cscope 15 /usr/src/microwindows/src               0003615849
	@contrib/GPL/tpcal/tpcal.c

19 
	~<°dio.h
>

20 
	~<î∫o.h
>

21 
	~<°dlib.h
>

22 
	~<time.h
>

23 
	~<°rög.h
>

24 
	~"wödows.h
"

25 
	~"mou_ç.h
"

26 
	~"å™sf‹m.h
"

28 
	gxext
, 
	gyext
;

29 
CALIBRATION_PAIRS
 
	g˝s
;

30 
CALIBRATION_PAIR
* 
	gp˝
 = 0;

32 
	$DøwAbout
(
HDC
 
hdc
, 
RECT
 
r
)

34 c⁄° 
vî_maj‹
 = 0;

35 c⁄° 
vî_mö‹
 = 5;

36 c⁄° 
≠p_«me
[] = "Touch Panel Calibrator";

37 c⁄° 
tôÀ
[] = "%s, version %d.%d";

38 c⁄° 
c›yright
[] = "(C) 1999 Bradley D. LaRonde <brad@ltc.com>";

39 c⁄° 
w¨ø¡y
[] = "ABSOLUTELY NO WARRANTY";

40 c⁄° 
li˚n£1
[] = "This is free software,ánd youáre welcomeÅo";

41 c⁄° 
li˚n£2
[] = "redistribute it under certain conditions.";

43 c⁄° 
Àadög
 = 15;

45 
s
[1024];

47 
	`•rötf
(
s
, 
tôÀ
, 
≠p_«me
, 
vî_maj‹
, 
vî_mö‹
);

48 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
DEFAULT_GUI_FONT
));

49 
	`DøwText
(
hdc
, 
s
, -1, &
r
, 
DT_CENTER
);

51 
r
.
t›
 +
Àadög
;

52 
	`DøwText
(
hdc
, 
c›yright
, -1, &
r
, 
DT_CENTER
);

54 
r
.
t›
 +
Àadög
;

55 
	`DøwText
(
hdc
, 
w¨ø¡y
, -1, &
r
, 
DT_CENTER
);

57 
r
.
t›
 +
Àadög
;

58 
	`DøwText
(
hdc
, 
li˚n£1
, -1, &
r
, 
DT_CENTER
);

59 
r
.
t›
 +
Àadög
;

60 
	`DøwText
(
hdc
, 
li˚n£2
, -1, &
r
, 
DT_CENTER
);

61 
	}
}

63 
	$DøwD⁄e
(
HDC
 
hdc
, 
RECT
 
r
)

65 c⁄° 
d⁄emsg
[] = "Calibration is done!";

66 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
DEFAULT_GUI_FONT
));

67 
	`DøwText
(
hdc
, 
d⁄emsg
, -1, &
r
, 
DT_CENTER
);

68 
	}
}

71 
	$DøwT¨gë
(
HDC
 
hdc
, 
POINT
 
p
)

73 c⁄° 
sˇÀ
 = 9;

74 c⁄° 
˚¡î
 = 3;

82 
	`Re˘™gÀ
(
hdc
, 
p
.
x
 - 
˚¡î
,Ö.
y
 - center,Ö.x + center + 1,Ö.y + center + 1);

85 
	`MoveToEx
(
hdc
, 
p
.
x
 - 
sˇÀ
,Ö.
y
, 
NULL
);

86 
	`LöeTo
(
hdc
, 
p
.
x
 + 
sˇÀ
 + 1,Ö.
y
);

88 
	`MoveToEx
(
hdc
, 
p
.
x
,Ö.
y
 - 
sˇÀ
, 
NULL
);

89 
	`LöeTo
(
hdc
, 
p
.
x
,Ö.
y
 + 
sˇÀ
 + 1);

90 
	}
}

92 
	$DøwLabñAlign
(
HDC
 
hdc
, 
POINT
 
p
, 
LPCSTR
 
psz
, 
Æign
)

94 
RECT
 
r
;

95 c⁄° 
w
 = 180;

96 c⁄° 
h
 = 14;

97 c⁄° 
m
 = 15;

99 
Æign
)

103 
r
.
À·
 = 
p
.
x
 + 
m
;

104 
r
.
right
 = 
p
.
x
 + 
w
 + 
m
;

105 
r
.
t›
 = 
p
.
y
 - (
h
/2);

106 
r
.
bŸtom
 = 
p
.
y
 + (
h
/2);

111 
r
.
À·
 = 
p
.
x
 - (
w
 + 
m
);

112 
r
.
right
 = 
p
.
x
 - 
m
;

113 
r
.
t›
 = 
p
.
y
 - (
h
/2);

114 
r
.
bŸtom
 = 
p
.
y
 + (
h
/2);

119 
r
.
À·
 = 
p
.
x
 - (
w
/2);

120 
r
.
right
 = 
p
.
x
 + (
w
/2);

121 
r
.
t›
 = 
p
.
y
 + 
m
;

122 
r
.
bŸtom
 = 
p
.
y
 + 
m
 + 
h
;

127 
r
.
À·
 = 
p
.
x
;

128 
r
.
right
 = 
p
.
x
 + 
w
;

129 
r
.
t›
 = 
p
.
y
;

130 
r
.
bŸtom
 = 
p
.
y
 + 
h
;

134 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
DEFAULT_GUI_FONT
));

135 
	`DøwText
(
hdc
, 
psz
, -1, &
r
, 
DT_LEFT
);

136 
	}
}

138 
	$DøwLabñ
(
HDC
 
hdc
, 
POINT
 
p
, 
LPCSTR
 
psz
)

140 i‡–
p
.
x
 < (
xext
 * 1 / 4) )

141  
	`DøwLabñAlign
(
hdc
, 
p
, 
psz
, 1);

143 i‡–
p
.
x
 > (
xext
 * 3 / 4) )

144  
	`DøwLabñAlign
(
hdc
, 
p
, 
psz
, 2);

146  
	`DøwLabñAlign
(
hdc
, 
p
, 
psz
, 3);

147 
	}
}

149 
POINT
 
	$GëT¨gë
(
n
)

151 c⁄° 
ö£t
 = 10;

152 
POINT
 
p
;

154 
n
)

157 
p
.
x
 = 
xext
 / 2;Ö.
y
 = 
yext
 / 2;

158 
p˝
 = &
˝s
.
˚¡î
;

162 
p
.
x
 = 
ö£t
;Ö.
y
 = inset;

163 
p˝
 = &
˝s
.
ul
;

167 
p
.
x
 = 
xext
 - 
ö£t
;Ö.
y
 = inset;

168 
p˝
 = &
˝s
.
ur
;

172 
p
.
x
 = 
xext
 - 
ö£t
;Ö.
y
 = 
yext
 - inset;

173 
p˝
 = &
˝s
.
Ã
;

177 
p
.
x
 = 
ö£t
;Ö.
y
 = 
yext
 - inset;

178 
p˝
 = &
˝s
.
Œ
;

183 
p
.
x
 = 
	`øndom
(Ë/ (
RAND_MAX
 / 
xext
);

184 
p
.
y
 = 
	`øndom
(Ë/ (
RAND_MAX
 / 
yext
);

185 
p˝
 = 0;

189  
p
;

190 
	}
}

192 
	gtŸÆ_èrgës
 = 5;

193 
	gcuºít_èrgë
 = 0;

194 
POINT
 
	gcuºít_èrgë_loˇti⁄
;

196 
	$DoPaöt
(
HDC
 
hdc
)

198 c⁄° 
szIn°ru˘i⁄s
[] = "PleaseÅouchÅhe center ofÅheÅarget.";

200 
POINT
 
p
;

201 
i
, 
n
;

202 
ﬁd_r›
;

203 
POINT
 
œ°
 = 
cuºít_èrgë_loˇti⁄
;

204 
HPEN
 
hOldPí
;

206 i‡(
cuºít_èrgë
 =
tŸÆ_èrgës
) {

207 
RECT
 
r
 = {10, 
yext
/2, 
xext
 - 10, yext/2 + 40};

208 
	`DøwD⁄e
(
hdc
, 
r
);

212 i‡(
cuºít_èrgë
 == 0)

214 
RECT
 
r
 = {10, 
yext
 - 85, 
xext
 - 10, yext - 10};

215 
	`DøwAbout
(
hdc
, 
r
);

218 
cuºít_èrgë_loˇti⁄
 = 
	`GëT¨gë
(
cuºít_èrgë
);

220 
ﬁd_r›
 = 
	`SëROP2
(
hdc
, 
R2_XORPEN
);

221 
hOldPí
 = 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
WHITE_PEN
));

223 
n
 = 20;

224 
i
=0; i < 
n
; i++)

226 
p
.
x
 = 
œ°
.x + ((
cuºít_èrgë_loˇti⁄
.x -Üa°.xË* 
i
 / 
n
);

227 
p
.
y
 = 
œ°
.y + ((
cuºít_èrgë_loˇti⁄
.y -Üa°.yË* 
i
 / 
n
);

228 
	`DøwT¨gë
(
hdc
, 
p
);

229 
	`SÀï
(60);

230 
	`DøwT¨gë
(
hdc
, 
p
);

234 
	`SëROP2
(
hdc
, 
R2_COPYPEN
);

235 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
BLACK_PEN
));

237 
	`DøwT¨gë
(
hdc
, 
cuºít_èrgë_loˇti⁄
);

238 
	`DøwLabñ
(
hdc
, 
cuºít_èrgë_loˇti⁄
, 
szIn°ru˘i⁄s
);

241 
	`SëROP2
(
hdc
, 
ﬁd_r›
);

242 
	`Sñe˘Obje˘
(
hdc
, 
hOldPí
);

243 
	}
}

245 
	#GET_X_LPARAM
(
Õ
Ë(()()
	`LOWORD
÷p))

	)

246 
	#GET_Y_LPARAM
(
Õ
Ë(()()
	`HIWORD
÷p))

	)

248 
LRESULT
 
CALLBACK
 
	$WndProc
(
HWND
 
hwnd
, 
UINT
 
msg
, 
WPARAM
 
wp
, 
LPARAM
 
Õ
)

250 
PAINTSTRUCT
 
ps
;

251 
HDC
 
hdc
;

253 
msg
) {

254 
WM_PAINT
:

255 
hdc
 = 
	`BegöPaöt
(
hwnd
, &
ps
);

256 
	`DoPaöt
(
hdc
);

257 
	`EndPaöt
(
hwnd
, &
ps
);

260 
WM_NCHITTEST
:

261  
HTCLIENT
;

263 
WM_LBUTTONUP
:

264 i‡–
p˝
 != 0 )

266 
p˝
->
s¸ìn
.
x
 = 
cuºít_èrgë_loˇti⁄
.x * 
TRANSFORMATION_UNITS_PER_PIXEL
;

267 
p˝
->
s¸ìn
.
y
 = 
cuºít_èrgë_loˇti⁄
.y * 
TRANSFORMATION_UNITS_PER_PIXEL
;

268 
p˝
->
devi˚
.
x
 = 
	`GET_X_LPARAM
(
Õ
);

269 
p˝
->
devi˚
.
y
 = 
	`GET_Y_LPARAM
(
Õ
);

272 i‡–++
cuºít_èrgë
 =
tŸÆ_èrgës
 )

274 
TRANSFORMATION_COEFFICIENTS
 
tc
;

276 
	`CÆcTønsf‹m©i⁄C€fficõ¡sSim∂e
(&
˝s
, &
tc
);

277 
	`¥ötf
("%d %d %d %d %d %d %d\n",

278 
tc
.
a
,Åc.
b
,Åc.
c
,Åc.
d
,Åc.
e
,Åc.
f
,Åc.
s
);

279 
	`CÆcTønsf‹m©i⁄C€fficõ¡sBëãr
(&
˝s
, &
tc
);

280 
	`¥ötf
("%d %d %d %d %d %d %d\n",

281 
tc
.
a
,Åc.
b
,Åc.
c
,Åc.
d
,Åc.
e
,Åc.
f
,Åc.
s
);

282 
	`CÆcTønsf‹m©i⁄C€fficõ¡sEvíBëãr
(&
˝s
, &
tc
);

283 
	`¥ötf
("%d %d %d %d %d %d %d\n",

284 
tc
.
a
,Åc.
b
,Åc.
c
,Åc.
d
,Åc.
e
,Åc.
f
,Åc.
s
);

286 
	`CÆcTønsf‹m©i⁄C€fficõ¡sBe°
(&
˝s
, &
tc
);

287 
	`¥ötf
("%d %d %d %d %d %d %d\n",

288 
tc
.
a
,Åc.
b
,Åc.
c
,Åc.
d
,Åc.
e
,Åc.
f
,Åc.
s
);

289 
	`InvÆid©eRe˘
(
hwnd
, 
NULL
, 
TRUE
);

290 
	`Upd©eWödow
(
hwnd
);

291 
	`Po°QuôMesßge
(0);

294 
	`InvÆid©eRe˘
(
hwnd
, 
NULL
, 
TRUE
);

295 
	`Upd©eWödow
(
hwnd
);

299  
	`DefWödowProc
(
hwnd
, 
msg
, 
wp
, 
Õ
);

303 
	}
}

305 
WINAPI
 
	$WöMaö
(
HINSTANCE
 
hIn°™˚
, HINSTANCE 
hPªvIn°™˚
, 
LPSTR
 
ÕCmdLöe
, 
nShowCmd
)

307 
WNDCLASS
 
wc
;

308 
RECT
 
r
;

309 
HWND
 
hwnd
;

310 
MSG
 
msg
;

311 
MWCOORD
 
big
;

313 
	`§™dom
(
	`time
(
NULL
));

317 
wc
.
°yÀ
 = 
CS_DBLCLKS
 | 
CS_VREDRAW
 | 
CS_HREDRAW
;

318 
wc
.
Õ‚WndProc
 = (
WNDPROC
)
WndProc
;

319 
wc
.
cbClsExåa
 = 0;

320 
wc
.
cbWndExåa
 = 0;

321 
wc
.
hIn°™˚
 = 0;

322 
wc
.
hIc⁄
 = 0;

323 
wc
.
hCurs‹
 = 0;

324 
wc
.
hbrBackground
 = (
HBRUSH
)
	`GëStockObje˘
(
WHITE_BRUSH
);

325 
wc
.
ÕszMíuName
 = 
NULL
;

326 
wc
.
ÕszCœssName
 = "tpcal";

327 
	`Regi°îCœss
(&
wc
);

329 
	`GëWödowRe˘
(
	`GëDeskt›Wödow
(), &
r
);

330 
xext
 = 
r
.
right
;

331 
yext
 = 
r
.
bŸtom
;

333 
hwnd
 = 
	`Cª©eWödowEx
(0L, "tpcal", "Touch Panel Calibration",

334 
WS_VISIBLE
, 0, 0, 
xext
, 
yext
,

335 
NULL
, (
HMENU
)1, NULL, NULL);

338 
big
 = 1000000;

339 
	`GdRe°ri˘Mou£
(-
big
, -big, big, big);

342 
	`SëC≠tuª
(
hwnd
);

344 
	`GëMesßge
(&
msg
, 
NULL
, 0, 0)) {

345 
	`Tøn¶©eMesßge
(&
msg
);

346 
	`Di•©chMesßge
(&
msg
);

350 
	}
}

352 
	gíabÀ_poötög_co‹dö©e_å™sf‹m
;

354 
	$MwU£rInô
(
ac
, ** 
av
)

356 
íabÀ_poötög_co‹dö©e_å™sf‹m
 = 0;

358 i‡–
ac
 > 1 )

359 
tŸÆ_èrgës
 = 
	`©ﬁ
(
av
[1]);

362 
	}
}

	@contrib/GPL/tpcal/transform.c

20 
	~"wödows.h
"

21 
	~"mou_ç.h
"

22 
	~"å™sf‹m.h
"

24 
	$CÆcTønsf‹m©i⁄C€fficõ¡sSim∂e
(
CALIBRATION_PAIRS
 *
p˝
, 
TRANSFORMATION_COEFFICIENTS
 *
±c
)

32 
mö_s¸ìn_x
 = 
p˝
->
ul
.
s¸ìn
.
x
;

33 
mö_s¸ìn_y
 = 
p˝
->
ul
.
s¸ìn
.
y
;

34 
max_s¸ìn_x
 = 
p˝
->
Ã
.
s¸ìn
.
x
;

35 
max_s¸ìn_y
 = 
p˝
->
Ã
.
s¸ìn
.
y
;

37 
mö_devi˚_x
 = 
p˝
->
ul
.
devi˚
.
x
;

38 
mö_devi˚_y
 = 
p˝
->
ul
.
devi˚
.
y
;

39 
max_devi˚_x
 = 
p˝
->
Ã
.
devi˚
.
x
;

40 
max_devi˚_y
 = 
p˝
->
Ã
.
devi˚
.
y
;

42 
±c
->
s
 = (1 << 16);

43 
±c
->
a
 =Ötc->
s
 * (
mö_s¸ìn_x
 - 
max_s¸ìn_x
Ë/ (
mö_devi˚_x
 - 
max_devi˚_x
);

44 
±c
->
b
 = 0;

45 
±c
->
c
 = (±c->
a
 * -
mö_devi˚_x
Ë+ (±c->
s
 * 
mö_s¸ìn_x
);

46 
±c
->
d
 = 0;

47 
±c
->
e
 =Ötc->
s
 * (
mö_s¸ìn_y
 - 
max_s¸ìn_y
Ë/ (
mö_devi˚_y
 - 
max_devi˚_y
);

48 
±c
->
f
 = (±c->
e
 * -
mö_devi˚_y
Ë+ (±c->
s
 * 
mö_s¸ìn_y
);

51 
	}
}

53 
	$CÆcTønsf‹m©i⁄C€fficõ¡sBëãr
(
CALIBRATION_PAIRS
 *
p˝
, 
TRANSFORMATION_COEFFICIENTS
 *
±c
)

62 
ve˘‹
[3][2] =

64 {
p˝
->
ul
.
s¸ìn
.
x
,Ö˝->ul.s¸ìn.
y
},

65 {
p˝
->
ur
.
s¸ìn
.
x
,Ö˝->ur.s¸ìn.
y
},

66 {
p˝
->
Ã
.
s¸ìn
.
x
,Ö˝->Ã.s¸ìn.
y
}

69 
m©rix
[3][3] =

71 {
p˝
->
ul
.
devi˚
.
x
,Ö˝->ul.devi˚.
y
, 1.0},

72 {
p˝
->
ur
.
devi˚
.
x
,Ö˝->ur.devi˚.
y
, 1.0},

73 {
p˝
->
Ã
.
devi˚
.
x
,Ö˝->Ã.devi˚.
y
, 1.0}

76 
i
, 
j
, 
r
, 
k
;

77 
p
, 
q
;

79 
i
 = 0; i < 3; i++) {

80 
p
 = 
m©rix
[
i
][i];

82 
j
 = 0; j < 3; j++) {

83 
m©rix
[
i
][
j
] = m©rix[i][j] / 
p
;

86 
j
 = 0; j < 2; j++) {

87 
ve˘‹
[
i
][
j
] = ve˘‹[i][j] / 
p
;

90 
r
 = 0;Ñ < 3;Ñ++) {

91 i‡(
r
 !
i
) {

92 
q
 = 
m©rix
[
r
][
i
];

94 
m©rix
[
r
][
i
] = 0.0;

96 
k
 = 
i
 + 1; k < 3; k++) {

97 
m©rix
[
r
][
k
] = m©rix[r][k] - (
q
 * m©rix[
i
][k]);

100 
k
 = 0; k < 2; k++) {

101 
ve˘‹
[
r
][
k
] = ve˘‹[r][k] - (
q
 * ve˘‹[
i
][k]);

107 
±c
->
s
 = 1 << 16;

108 
±c
->
a
 = 
ve˘‹
[0][0] *Ötc->
s
;

109 
±c
->
b
 = 
ve˘‹
[1][0] *Ötc->
s
;

110 
±c
->
c
 = 
ve˘‹
[2][0] *Ötc->
s
;

111 
±c
->
d
 = 
ve˘‹
[0][1] *Ötc->
s
;

112 
±c
->
e
 = 
ve˘‹
[1][1] *Ötc->
s
;

113 
±c
->
f
 = 
ve˘‹
[2][1] *Ötc->
s
;

116 
	}
}

118 
	$CÆcTønsf‹m©i⁄C€fficõ¡sEvíBëãr
(
CALIBRATION_PAIRS
 *
p˝
, 
TRANSFORMATION_COEFFICIENTS
 *
±c
)

124 
ve˘‹
[4][2] =

126 {
p˝
->
ul
.
s¸ìn
.
x
,Ö˝->ul.s¸ìn.
y
},

127 {
p˝
->
ur
.
s¸ìn
.
x
,Ö˝->ur.s¸ìn.
y
},

128 {
p˝
->
Ã
.
s¸ìn
.
x
,Ö˝->Ã.s¸ìn.
y
},

129 {
p˝
->
Œ
.
s¸ìn
.
x
,Ö˝->Œ.s¸ìn.
y
}

132 
m©rix
[4][4] =

134 {
p˝
->
ul
.
devi˚
.
x
,Ö˝->ul.devi˚.x *Ö˝->ul.devi˚.
y
,Öcp->ul.device.y, 1.0},

135 {
p˝
->
ur
.
devi˚
.
x
,Ö˝->ur.devi˚.x *Ö˝->ur.devi˚.
y
,Öcp->ur.device.y, 1.0},

136 {
p˝
->
Ã
.
devi˚
.
x
,Ö˝->Ã.devi˚.x *Ö˝->Ã.devi˚.
y
,Öcp->lr.device.y, 1.0},

137 {
p˝
->
Œ
.
devi˚
.
x
,Ö˝->Œ.devi˚.x *Ö˝->Œ.devi˚.
y
,Öcp->ll.device.y, 1.0}

140 
i
, 
j
, 
r
, 
k
;

141 
p
, 
q
;

143 
i
 = 0; i < 4; i++) {

144 
p
 = 
m©rix
[
i
][i];

146 
j
 = 0; j < 4; j++) {

147 
m©rix
[
i
][
j
] = m©rix[i][j] / 
p
;

150 
j
 = 0; j < 2; j++) {

151 
ve˘‹
[
i
][
j
] = ve˘‹[i][j] / 
p
;

154 
r
 = 0;Ñ < 4;Ñ++) {

155 i‡(
r
 !
i
) {

156 
q
 = 
m©rix
[
r
][
i
];

158 
m©rix
[
r
][
i
] = 0.0;

160 
k
 = 
i
 + 1; k < 4; k++) {

161 
m©rix
[
r
][
k
] = m©rix[r][k] - (
q
 * m©rix[
i
][k]);

164 
k
 = 0; k < 2; k++) {

165 
ve˘‹
[
r
][
k
] = ve˘‹[r][k] - (
q
 * ve˘‹[
i
][k]);

172 
±c
->
s
 = 1 << 16;

173 
±c
->
a
 = 
ve˘‹
[0][0] *Ötc->
s
;

174 
±c
->
b
 = 
ve˘‹
[2][0] *Ötc->
s
;

175 
±c
->
c
 = 
ve˘‹
[3][0] *Ötc->
s
;

176 
±c
->
d
 = 
ve˘‹
[0][1] *Ötc->
s
;

177 
±c
->
e
 = 
ve˘‹
[2][1] *Ötc->
s
;

178 
±c
->
f
 = 
ve˘‹
[3][1] *Ötc->
s
;

181 
	}
}

183 
	$CÆcTønsf‹m©i⁄C€fficõ¡sBe°
(
CALIBRATION_PAIRS
 *
p˝
, 
TRANSFORMATION_COEFFICIENTS
 *
±c
)

189 c⁄° 
fú°_poöt
 = 0;

190 c⁄° 
œ°_poöt
 = 4;

191 
i
;

193 
Sx
=0, 
Sy
=0, 
Sxy
=0, 
Sx2
=0, 
Sy2
=0, 
Sm
=0, 
Sn
=0, 
Smx
=0, 
Smy
=0, 
Snx
=0, 
Sny
=0, 
S
=0;

194 
t1
, 
t2
, 
t3
, 
t4
, 
t5
, 
t6
, 
q
;

197 
CALIBRATION_PAIR
 *
˝
 = (CALIBRATION_PAIR*)
p˝
;

211 
i
 = 
fú°_poöt
; i < 
œ°_poöt
 + 1; i++) {

212 
Sx
 +
˝
[
i
].
devi˚
.
x
;

213 
Sy
 +
˝
[
i
].
devi˚
.
y
;

214 
Sxy
 +
˝
[
i
].
devi˚
.
x
 * cp[i].devi˚.
y
;

215 
Sx2
 +
˝
[
i
].
devi˚
.
x
 * cp[i].device.x;

216 
Sy2
 +
˝
[
i
].
devi˚
.
y
 * cp[i].device.y;

217 
Sm
 +
˝
[
i
].
s¸ìn
.
x
;

218 
Sn
 +
˝
[
i
].
s¸ìn
.
y
;

219 
Smx
 +
˝
[
i
].
s¸ìn
.
x
 * cp[i].
devi˚
.x;

220 
Smy
 +
˝
[
i
].
s¸ìn
.
x
 * cp[i].
devi˚
.
y
;

221 
Snx
 +
˝
[
i
].
s¸ìn
.
y
 * cp[i].
devi˚
.
x
;

222 
Sny
 +
˝
[
i
].
s¸ìn
.
y
 * cp[i].
devi˚
.y;

223 
S
 += 1;

227 
	`¥ötf
("%f, %f, %f, %f, "

230 
Sx
, 
Sy
, 
Sxy
, 
Sx2
, 
Sy2
, 
Sm
, 
Sn
, 
Smx
, 
Smy
, 
Snx
, 
Sny
, 
S
);

250 
t1
 = 
Sxy
 * 
Sy
 - 
Sx
 * 
Sy2
;

251 
t2
 = 
Sxy
 * 
Sx
 - 
Sx2
 * 
Sy
;

252 
t3
 = 
Sx2
 * 
Sy2
 - 
Sxy
 * Sxy;

253 
t4
 = 
Sy2
 * 
S
 - 
Sy
 * Sy;

254 
t5
 = 
Sx
 * 
Sy
 - 
Sxy
 * 
S
;

255 
t6
 = 
Sx2
 * 
S
 - 
Sx
 * Sx;

257 
q
 = 
t1
 * 
Sx
 + 
t2
 * 
Sy
 + 
t3
 * 
S
;

272 i‡(
q
 == 0)

275 
±c
->
s
 = 1 << 16;

276 
±c
->
a
 = ((
t4
 * 
Smx
 + 
t5
 * 
Smy
 + 
t1
 * 
Sm
Ë/ 
q
 + 0.5/65536Ë*Ötc->
s
;

277 
±c
->
b
 = ((
t5
 * 
Smx
 + 
t6
 * 
Smy
 + 
t2
 * 
Sm
Ë/ 
q
 + 0.5/65536Ë*Ötc->
s
;

278 
±c
->
c
 = ((
t1
 * 
Smx
 + 
t2
 * 
Smy
 + 
t3
 * 
Sm
Ë/ 
q
 + 0.5/65536Ë*Ötc->
s
;

279 
±c
->
d
 = ((
t4
 * 
Snx
 + 
t5
 * 
Sny
 + 
t1
 * 
Sn
Ë/ 
q
 + 0.5/65536Ë*Ötc->
s
;

280 
±c
->
e
 = ((
t5
 * 
Snx
 + 
t6
 * 
Sny
 + 
t2
 * 
Sn
Ë/ 
q
 + 0.5/65536Ë*Ötc->
s
;

281 
±c
->
f
 = ((
t1
 * 
Snx
 + 
t2
 * 
Sny
 + 
t3
 * 
Sn
Ë/ 
q
 + 0.5/65536Ë*Ötc->
s
;

288 i‡–(
±c
->
a
 =0x80000000Ë|| (±c->
b
 == 0x80000000) ||

289 (
±c
->
c
 =0x80000000Ë|| (±c->
d
 == 0x80000000) ||

290 (
±c
->
e
 =0x80000000Ë|| (±c->
f
 == 0x80000000) )

294 
	}
}

	@contrib/GPL/tpcal/transform.h

22 
MWPOINT
 
	ms¸ìn
, 
	mdevi˚
;

23 } 
	tCALIBRATION_PAIR
;

27 
CALIBRATION_PAIR
 
	m˚¡î
;

28 
CALIBRATION_PAIR
 
	mul
;

29 
CALIBRATION_PAIR
 
	mur
;

30 
CALIBRATION_PAIR
 
	mÃ
;

31 
CALIBRATION_PAIR
 
	mŒ
;

32 } 
	tCALIBRATION_PAIRS
;

34 
CÆcTønsf‹m©i⁄C€fficõ¡sSim∂e
(
CALIBRATION_PAIRS
 *
p˝
, 
TRANSFORMATION_COEFFICIENTS
 *
±c
);

35 
CÆcTønsf‹m©i⁄C€fficõ¡sBëãr
(
CALIBRATION_PAIRS
 *
p˝
, 
TRANSFORMATION_COEFFICIENTS
 *
±c
);

36 
CÆcTønsf‹m©i⁄C€fficõ¡sEvíBëãr
(
CALIBRATION_PAIRS
 *
p˝
, 
TRANSFORMATION_COEFFICIENTS
 *
±c
);

37 
CÆcTønsf‹m©i⁄C€fficõ¡sBe°
(
CALIBRATION_PAIRS
 *
p˝
, 
TRANSFORMATION_COEFFICIENTS
 *
±c
);

	@contrib/ntimers.c

3 
	$GsAddTimî
(
GsTimî
* 
√wtimî
) {

4 
i
;

5 
GsTimî
* 
curTimî
;

6 if(
our_timîs
.
numof
++>0) {

7 
curTimî
=
our_timî
->
hód
;

8 
curTimî
=
our_timî
->
hód
;curTimî!=
NULL
;curTimî=curTimî->
√xt
) {

9 if(
curTimî
->
due
>
√wtimî
->due) {

10 if(
our_timî
->
hód
==
curTimî
) {

11 
√wtimî
->
√xt
=
our_timî
->
hód
;

12 
our_timî
->
hód
=
√wtimî
;

15 
√wtimî
->
√xt
=
curTimî
;

16 
¥evTimî
->
√xt
=
√wtimî
;

19 
¥evTimî
=
curTimî
;

21 
our_timî
->
èû
->
√xt
=
√wtimî
;

22 
our_timî
->
èû
=
√wtimî
;

23 
√wtimî
->
√xt
=
NULL
;

26 
our_timî
->
hód
=
√wtimî
;

27 
our_timî
->
èû
=
√wtimî
;

28 
√wtimî
->
√xt
=
NULL
;

29 
	}
}

	@contrib/ntimers.h

1 #i‚de‡
__NTIMER_H__


2 
	#__NTIMER_H__


	)

4 
	sGsTimî
 {

5 
GsTimî
* 
	m√xt
;

6 
	mdue
;

7 * 
	msome_func
;

8 * 
	msome_¨gs
;

11 
	sGsTimîHﬁdî
 {

12 
GsTimî
* 
	mhód
;

13 
GsTimî
* 
	mèû
;

14 
	mnumof
;

	@contrib/speedtst/speed.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~<time.h
>

5 #ifde‡
TEST_FOR_X


6 
	~<X11/Xlib.h
>

8 
	#MWINCLUDECOLORS


	)

9 
	~<mi¸owö/«no-X.h
>

12 
	#NUM_POINTS
 80

	)

14 
time_t
 
	g°¨t_time
, 
	gíd_time
;

16 
	$°¨t_timî
()

18 
	`time
(&
°¨t_time
);

19 
	}
}

21 
	$íd_timî
()

23 
	`time
(&
íd_time
);

24 
	`¥ötf
("start=%lu,Énd=%lu,Åime=%lu\n",

25 
°¨t_time
, 
íd_time
,Énd_time-start_time);

26 
	}
}

28 
	$maö
()

30 #ifde‡
TEST_FOR_X


31 
Di•œy
 *
di•œy
;

32 
Wödow
 
wödow
;

33 
GC
 
gc
;

34 
XGCVÆues
 
gcVÆues
;

35 
Cﬁ‹m≠
 
cﬁ‹m≠
;

36 
Pixm≠
 
§c_pixm≠
;

37 
fgCﬁ‹
, 
bgCﬁ‹
;

38 
s¸ìnNum
;

39 
XPoöt
 
poöts
[
NUM_POINTS
];

41 
GR_WINDOW_ID
 
wödow
;

42 
GR_WINDOW_ID
 
§c_pixm≠
;

43 * 
§c_pixm≠_buf
[320*240*2];

44 
GR_GC_ID
 
gc
;

45 
GR_POINT
 
poöts
[
NUM_POINTS
];

48 
c
, 
c1
, 
cou¡
=4500;

49 
x
, 
y
, 
x1
, 
y1
, 
x2
, 
y2
;

51 #ifde‡
TEST_FOR_X


52 if(!(
di•œy
=
	`XO≥nDi•œy
(""))) {

53 
	`¥ötf
("Cannot connectÅo X.\n");

55 
s¸ìnNum
 = 
	`DeÁu…S¸ìn
(
di•œy
);

56 
cﬁ‹m≠
 = 
	`DeÁu…Cﬁ‹m≠
(
di•œy
, 
s¸ìnNum
);

58 
bgCﬁ‹
 = 
	`BœckPixñ
(
di•œy
, 
s¸ìnNum
);

59 
fgCﬁ‹
 = 
	`WhôePixñ
(
di•œy
, 
s¸ìnNum
);

60 
wödow
 = 
	`XCª©eSim∂eWödow
(
di•œy
, 
	`RoŸWödow
(di•œy, 
s¸ìnNum
),

62 
fgCﬁ‹
, 
bgCﬁ‹
);

63 
§c_pixm≠
 = 
	`XCª©ePixm≠
(
di•œy
, 
wödow
, 320, 240, 16);

64 
	`XM≠Rai£d
(
di•œy
, 
wödow
);

65 
gcVÆues
.
background
 = 
bgCﬁ‹
;

66 
gcVÆues
.
f‹eground
 = 
fgCﬁ‹
;

67 
gcVÆues
.
löe_width
 = 1;

68 
gcVÆues
.
löe_°yÀ
 = 
LöeSﬁid
;

69 
gcVÆues
.
fûl_°yÀ
 = 
FûlSﬁid
;

70 
gcVÆues
.
fûl_ruÀ
 = 
WödögRuÀ
;

71 
gcVÆues
.
¨c_mode
 = 
ArcPõSli˚
;

72 
gc
 = 
	`XCª©eGC
(
di•œy
, 
wödow
,

73 
GCF‹eground
 | 
GCBackground
 | 
GCLöeWidth
 | 
GCLöeStyÀ
 |

74 
GCFûlStyÀ
,

75 &
gcVÆues
);

78 
	`GrO≥n
();

79 
wödow
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 0, 0, 639, 479, 0, 
BLACK
, 
BLUE
);

80 
§c_pixm≠
 = 
	`GrNewPixm≠
(640, 480, 
§c_pixm≠_buf
);

81 
	`GrM≠Wödow
(
wödow
);

82 
gc
 = 
	`GrNewGC
();

83 
	`GrSëGCF‹eground
(
gc
, 
WHITE
);

84 
	`GrSëGCBackground
(
gc
, 
BLACK
);

85 
	`GrSëGCMode
(
gc
, 
GR_MODE_COPY
);

94 
	`¥ötf
("Horizontal Line(XDrawLine)\n");

95 
	`°¨t_timî
();

96 
c
=0; c<
cou¡
*20; c++)

98 
y1
=
	`øndom
()%480;

99 #ifde‡
TEST_FOR_X


100 
	`XDøwLöe
(
di•œy
, 
wödow
, 
gc
, 0, 
y1
, 639, y1);

101 
	`XFlush
(
di•œy
);

103 
	`GrLöe
(
wödow
, 
gc
, 0, 
y1
, 639, y1);

104 
	`GrFlush
();

107 
	`íd_timî
();

108 #ifde‡
TEST_FOR_X


109 
	`XCÀ¨Wödow
(
di•œy
, 
wödow
);

111 
	`GrCÀ¨Wödow
(
wödow
, 
GR_TRUE
);

116 
	`¥ötf
("Vertical Line(XDrawLine)\n");

117 
	`°¨t_timî
();

118 
c
=0; c<
cou¡
*19; c++)

120 
x1
=
	`øndom
()%640;

121 #ifde‡
TEST_FOR_X


122 
	`XDøwLöe
(
di•œy
, 
wödow
, 
gc
, 
x1
, 0, x1, 479);

123 
	`XFlush
(
di•œy
);

125 
	`GrLöe
(
wödow
, 
gc
, 
x1
, 0, x1, 479);

126 
	`GrFlush
();

129 
	`íd_timî
();

130 #ifde‡
TEST_FOR_X


131 
	`XCÀ¨Wödow
(
di•œy
, 
wödow
);

133 
	`GrCÀ¨Wödow
(
wödow
, 
GR_TRUE
);

138 
	`¥ötf
("General Line(XDrawLine)\n");

139 
	`°¨t_timî
();

140 
c
=0; c<
cou¡
*22; c++)

142 
x1
 = 
	`øndom
()%640;

143 
x2
 = 
	`øndom
()%640;

144 
y1
 = 
	`øndom
()%480;

145 
y2
 = 
	`øndom
()%480;

146 #ifde‡
TEST_FOR_X


147 
	`XDøwLöe
(
di•œy
, 
wödow
, 
gc
, 
x1
, 
y1
, 
x2
, 
y2
);

148 
	`XFlush
(
di•œy
);

150 
	`GrLöe
(
wödow
, 
gc
, 
x1
, 
y1
, 
x2
, 
y2
);

151 
	`GrFlush
();

154 
	`íd_timî
();

155 #ifde‡
TEST_FOR_X


156 
	`XCÀ¨Wödow
(
di•œy
, 
wödow
);

158 
	`GrCÀ¨Wödow
(
wödow
, 
GR_TRUE
);

163 
	`¥ötf
("XPoint\n");

164 
	`°¨t_timî
();

165 
c
=0; c<
cou¡
*25; c++)

167 
x1
 = 
	`øndom
()%640;

168 
y1
 = 
	`øndom
()%480;

169 #ifde‡
TEST_FOR_X


170 
	`XDøwPoöt
(
di•œy
, 
wödow
, 
gc
, 
x1
, 
y1
);

171 
	`XFlush
(
di•œy
);

173 
	`GrPoöt
(
wödow
, 
gc
, 
x1
, 
y1
);

174 
	`GrFlush
();

177 
	`íd_timî
();

178 #ifde‡
TEST_FOR_X


179 
	`XCÀ¨Wödow
(
di•œy
, 
wödow
);

181 
	`GrCÀ¨Wödow
(
wödow
, 
GR_TRUE
);

186 
	`¥ötf
("XRectangle\n");

187 
	`°¨t_timî
();

188 
c
=0; c<
cou¡
*20; c++)

190 
x1
=
	`øndom
()%639;

191 
y1
=
	`øndom
()%479;

192 
x2
=
	`øndom
()%(639-
x1
)+1;

193 
y2
=
	`øndom
()%(479-
y1
)+1;

194 #ifde‡
TEST_FOR_X


195 
	`XDøwRe˘™gÀ
(
di•œy
, 
wödow
, 
gc
, 
x1
, 
y1
, 
x2
, 
y2
);

196 
	`XFlush
(
di•œy
);

198 
	`GrRe˘
(
wödow
, 
gc
, 
x1
, 
y1
, 
x2
, 
y2
);

199 
	`GrFlush
();

202 
	`íd_timî
();

203 #ifde‡
TEST_FOR_X


204 
	`XCÀ¨Wödow
(
di•œy
, 
wödow
);

206 
	`GrCÀ¨Wödow
(
wödow
, 
GR_TRUE
);

211 
	`¥ötf
("XFillRectangle\n");

212 
	`°¨t_timî
();

213 
c
=0; c<
cou¡
*18; c++)

215 
x1
=
	`øndom
()%639;

216 
y1
=
	`øndom
()%479;

217 
x2
=
	`øndom
()%(639-
x1
)+1;

218 
y2
=
	`øndom
()%(479-
y1
)+1;

219 #ifde‡
TEST_FOR_X


220 
	`XFûlRe˘™gÀ
(
di•œy
, 
wödow
, 
gc
, 
x1
, 
y1
, 
x2
, 
y2
);

221 
	`XFlush
(
di•œy
);

223 
	`GrFûlRe˘
(
wödow
, 
gc
, 
x1
, 
y1
, 
x2
, 
y2
);

224 
	`GrFlush
();

227 
	`íd_timî
();

228 #ifde‡
TEST_FOR_X


230 
	`XCÀ¨Wödow
(
di•œy
, 
wödow
);

232 
	`GrCÀ¨Wödow
(
wödow
, 
GR_TRUE
);

237 
	`¥ötf
("XFillPolygon\n");

238 
	`°¨t_timî
();

239 
c
=0; c<
cou¡
; c++)

241 
c1
=0; c1<
NUM_POINTS
; c1++)

243 
poöts
[
c1
].
x
 = 
	`øndom
()%640;

244 
poöts
[
c1
].
y
 = 
	`øndom
()%480;

246 #ifde‡
TEST_FOR_X


247 
	`XFûlPﬁyg⁄
(
di•œy
, 
wödow
, 
gc
, 
poöts
, 
NUM_POINTS
,

249 
	`XFlush
(
di•œy
);

251 
	`GrFûlPﬁy
(
wödow
, 
gc
, 
NUM_POINTS
, 
poöts
);

252 
	`GrFlush
();

255 
	`íd_timî
();

256 #ifde‡
TEST_FOR_X


257 
	`XCÀ¨Wödow
(
di•œy
, 
wödow
);

259 
	`GrCÀ¨Wödow
(
wödow
, 
GR_TRUE
);

265 
	`¥ötf
("XCopyArea\n");

266 
	`°¨t_timî
();

267 
c
=0; c<
cou¡
*5; c++)

269 
x1
=
	`øndom
()%320;

270 
y1
=
	`øndom
()%240;

271 
x2
=
	`øndom
()%319+1;

272 
y2
=
	`øndom
()%239+1;

274 #ifde‡
TEST_FOR_X


275 
	`XC›yAªa
(
di•œy
, 
§c_pixm≠
, 
wödow
, 
gc
,

276 0, 0, 
x2
, 
y2
, 
x1
, 
y1
);

277 
	`XFlush
(
di•œy
);

279 
	`GrC›yAªa
(
wödow
, 
gc
, 
x1
, 
y1
, 
x2
 ,
y2
, 
§c_pixm≠
,

281 
	`GrFlush
();

284 
	`íd_timî
();

286 #ifde‡
TEST_FOR_X


287 
	`XDe°royWödow
(
di•œy
, 
wödow
);

289 
	`GrClo£
();

291 
	}
}

	@demos/mwin/malpha.c

8 
	~"wödows.h
"

9 
	~"wöã∫.h
"

10 
	~"wötoﬁs.h
"

12 
MWIMAGEHDR
 
image_ˇr8
;

14 
	#APPCLASS
 "ã°"

	)

17 
LRESULT
 
CALLBACK
 
WndProc
(
HWND
 
hwnd
,
UINT
 
uMsg
,
WPARAM
 
wp
,
LPARAM
 
Õ
);

18 
LRESULT
 
CALLBACK
 
ChûdWndProc
(
HWND
 
hwnd
,
UINT
 
uMsg
,
WPARAM
 
wp
,
LPARAM
 
Õ
);

21 
	$Regi°îAµCœss
()

23 
WNDCLASS
 
wc
;

25 
wc
.
°yÀ
 = 
CS_DBLCLKS
 | 
CS_VREDRAW
 | 
CS_HREDRAW
;

26 
wc
.
Õ‚WndProc
 = (
WNDPROC
)
WndProc
;

27 
wc
.
cbClsExåa
 = 0;

28 
wc
.
cbWndExåa
 = 0;

29 
wc
.
hIn°™˚
 = 0;

30 
wc
.
hIc⁄
 = 0;

31 
wc
.
hCurs‹
 = 0;

32 
wc
.
hbrBackground
 = (
HBRUSH
)
	`GëStockObje˘
(
GRAY_BRUSH
);

33 
wc
.
ÕszMíuName
 = 
NULL
;

34 
wc
.
ÕszCœssName
 = 
APPCLASS
;

35 
	`Regi°îCœss
–&
wc
);

38 
	}
}

40 
HWND


41 
	$Cª©eAµWödow
()

43 
HWND
 
hwnd
;

44 
width
, 
height
;

45 
RECT
 
r
;

46 
√xtid
 = 0;

48 
	`GëWödowRe˘
(
	`GëDeskt›Wödow
(), &
r
);

49 
width
 = 
height
 = 
r
.
right
 / 2;

51 
hwnd
 = 
	`Cª©eWödowEx
(
WS_EX_LAYERED
, 
APPCLASS
,

53 
WS_OVERLAPPEDWINDOW
 | 
WS_VISIBLE
,

54 
CW_USEDEFAULT
, CW_USEDEFAULT,

55 
width
, 
height
,

56 
NULL
, (
HMENU
)++
√xtid
, NULL, NULL);

58  
hwnd
;

59 
	}
}

61 
LRESULT
 
CALLBACK


62 
	$WndProc
(
HWND
 
hwnd
, 
UINT
 
msg
, 
WPARAM
 
wp
, 
LPARAM
 
Õ
)

64 
PAINTSTRUCT
 
ps
;

65 
HWND
 
sibwp
;

66 
HDC
 
hdcMem
;

67 
HBITMAP
 
hbmp
, 
hbmpOrg
;

68 
HBRUSH
 
hbr
;

69 
RECT
 
rc
;

70 
mw∑ötSîül
;

72 
msg
) {

73 
WM_ERASEBKGND
:

77 
WM_PAINT
:

88 
mwf‹˚NC∑öt
 = 
TRUE
;

91 ++
hwnd
->
unm≠cou¡
;

92 
	`SídMesßge
(
roŸwp
, 
WM_PAINT
, 0, 0);

93 
sibwp
=
hwnd
->
siblögs
; sibwp; sibwp=sibwp->siblings)

94 
	`SídMesßge
(
sibwp
, 
WM_PAINT
, 0, 0);

95 --
hwnd
->
unm≠cou¡
;

98 
sibwp
=
hwnd
->
∑ª¡
->
chûdªn
; sibwp != hwnd;

99 
sibwp
=sibwp->
siblögs
)

101 if(
sibwp
->
∑ötSîül
 !
mw∑ötSîül
)

102 
	`Po°Mesßge
(
sibwp
, 
WM_PAINT
, 0, 0);

105 
	`BegöPaöt
(
hwnd
, &
ps
);

106 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

109 
hdcMem
 = 
	`Cª©eCom∑tibÀDC
(
ps
.
hdc
);

110 
hbmp
 = 
	`Cª©eCom∑tibÀBôm≠
(
hdcMem
, 
rc
.
right
,Ñc.
bŸtom
);

111 
hbmpOrg
 = 
	`Sñe˘Obje˘
(
hdcMem
, 
hbmp
);

114 
hbr
 = (
HBRUSH
)
	`GëCœssL⁄g
(
hwnd
, 
GCL_HBRBACKGROUND
);

115 
	`FûlRe˘
(
hdcMem
, &
rc
, 
hbr
);

116 
	`Sñe˘Obje˘
(
hdcMem
, 
	`GëStockObje˘
(
DEFAULT_GUI_FONT
));

117 
	`SëBkMode
(
hdcMem
, 
TRANSPARENT
);

118 
	#TEXTSTRING
 "Thi†dem⁄°øã†Æph®bÀndög"

	)

119 
	`TextOut
(
hdcMem
, 0, 20, 
TEXTSTRING
, 
	`°æí
(TEXTSTRING));

122 
	`BôB…
(
ps
.
hdc
, 0, 0, 
rc
.
right
,Ñc.
bŸtom
, 
hdcMem
, 0, 0,

123 
MWROP_BLENDCONSTANT
 | 150);

124 
	`DñëeObje˘
(
	`Sñe˘Obje˘
(
hdcMem
, 
hbmpOrg
));

125 
	`DñëeDC
(
hdcMem
);

127 
	`EndPaöt
(
hwnd
, &
ps
);

131  
	`DefWödowProc
–
hwnd
, 
msg
, 
wp
, 
Õ
);

134 
	}
}

136 
WINAPI


137 
	$WöMaö
(
HINSTANCE
 
hIn°™˚
, HINSTANCE 
hPªvIn°™˚
, 
LPSTR
 
ÕCmdLöe
,

138 
nShowCmd
)

140 
MSG
 
msg
;

145 
mwERASEMOVE
 = 
FALSE
;

147 
	`Regi°îAµCœss
();

150 
	`MwSëDeskt›WÆÕ≠î
(&
image_ˇr8
);

155 
	`Upd©eWödow
(
	`GëDeskt›Wödow
());

157 
	`Cª©eAµWödow
();

158 
	`Cª©eAµWödow
();

161  
	`GëMesßge
(&
msg
, 
NULL
, 0, 0)) {

162 
	`Tøn¶©eMesßge
(&
msg
);

163 
	`Di•©chMesßge
(&
msg
);

166 
	}
}

	@demos/mwin/mdemo.c

7 
	#MWINCLUDECOLORS


	)

8 
	~"wödows.h
"

9 
	~"wöã∫.h
"

11 
	~"devi˚.h
"

13 #i‡
DOS_TURBOC


14 
	g_°kÀn
 = 4096;

17 
	#CLIPDEMO
 0

	)

19 #i‚de‡
ELKS


20 
	#TIMERDEMO
 1

	)

21 
	#GRAPH3D
 0

	)

22 
	#IMAGE
 0

	)

24 
	#ARCDEMO
 1

	)

25 
	#CHILD
 1

	)

26 
	#CLIENT3D
 0

	)

27 
	#USEBLIT
 1

	)

29 #i‡
GRAPH3D


30 
	~"gøph3d.h
"

33 
MWIMAGEHDR
 
image_ˇr8
;

34 
MWIMAGEHDR
 
image_zi⁄208
;

35 
MWIMAGEHDR
 
image_≥nguö
;

36 
MWIMAGEHDR
 
image_undî4
;

37 
MWIMAGEHDR
 
image_mi¸owö
;

38 
MWIMAGEHDR
 
image_cs1
;

39 
MWIMAGEHDR
 
image_æe8
;

41 #i‡
CHILD


42 #i‡
ELKS
 | 
MSDOS


43 
PMWIMAGEHDR
 
	gimage
 = &
image_cs1
;

45 
PMWIMAGEHDR
 
	gimage
 = &
image_≥nguö
;

49 #i‡
IMAGE


50 
PMWIMAGEHDR
 
	gimage2
 = &
image_zi⁄208
;

53 
	#APPCLASS
 "ã°"

	)

54 
	#APPCHILD
 "ã°2"

	)

57 
LRESULT
 
CALLBACK
 
WndProc
(
HWND
 
hwnd
,
UINT
 
uMsg
,
WPARAM
 
wp
,
LPARAM
 
Õ
);

58 
LRESULT
 
CALLBACK
 
ChûdWndProc
(
HWND
 
hwnd
,
UINT
 
uMsg
,
WPARAM
 
wp
,
LPARAM
 
Õ
);

61 
	$MwU£rInô
(
ac
, **
av
)

65 
	}
}

68 
	$Regi°îAµCœss
()

70 
WNDCLASS
 
wc
;

72 #i‡!
ELKS


73 
	`MwRegi°îBuâ⁄C⁄åﬁ
(
NULL
);

74 
	`MwRegi°îEdôC⁄åﬁ
(
NULL
);

75 
	`MwRegi°îLi°boxC⁄åﬁ
(
NULL
);

76 
	`MwRegi°îProgªssB¨C⁄åﬁ
(
NULL
);

79 
wc
.
°yÀ
 = 
CS_DBLCLKS
 | 
CS_VREDRAW
 | 
CS_HREDRAW
;

80 
wc
.
Õ‚WndProc
 = (
WNDPROC
)
WndProc
;

81 
wc
.
cbClsExåa
 = 0;

82 
wc
.
cbWndExåa
 = 0;

83 
wc
.
hIn°™˚
 = 0;

84 
wc
.
hIc⁄
 = 0;

85 
wc
.
hCurs‹
 = 0;

86 
wc
.
hbrBackground
 = (
HBRUSH
)
	`GëStockObje˘
(
LTGRAY_BRUSH
);

87 
wc
.
ÕszMíuName
 = 
NULL
;

88 
wc
.
ÕszCœssName
 = 
APPCLASS
;

89 
	`Regi°îCœss
–&
wc
);

91 #i‡
CHILD


92 
wc
.
Õ‚WndProc
 = (
WNDPROC
)
ChûdWndProc
;

93 
wc
.
ÕszCœssName
 = 
APPCHILD
;

94  
	`Regi°îCœss
–&
wc
);

97 
	}
}

99 
HWND


100 
	$Cª©eAµWödow
()

102 
HWND
 
hwnd
, 
hli°
;

103 
√xtid
 = 1;

104 
width
, 
height
;

105 
RECT
 
r
;

106 
	`GëWödowRe˘
(
	`GëDeskt›Wödow
(), &
r
);

107 
width
 = 
height
 = 
r
.
right
 / 2;

109 
hwnd
 = 
	`Cª©eWödowEx
(0L, 
APPCLASS
,

111 
WS_OVERLAPPEDWINDOW
 | 
WS_VISIBLE
,

112 
CW_USEDEFAULT
, CW_USEDEFAULT,

113 
width
, 
height
,

114 
NULL
, (
HMENU
)
√xtid
++, NULL, NULL);

116 #i‡
CHILD


117 if(
hwnd


118 #i‡
GRAPH3D


119 && (
√xtid
 & 03)!=2

122 
	`Cª©eWödowEx
(0L, 
APPCHILD
,

124 
WS_BORDER
 | 
WS_CHILD
 | 
WS_VISIBLE
,

125 4, 4, 
width
 / 3-6, 
height
 / 3,

126 
hwnd
, (
HMENU
)2, 
NULL
, NULL);

127 
	`Cª©eWödowEx
(0L, 
APPCHILD
,

129 
WS_BORDER
 | 
WS_CHILD
 | 
WS_VISIBLE
,

130 
width
 / 3, 
height
 / 3, width / 3-6, height / 3,

131 
hwnd
, (
HMENU
)3, 
NULL
, NULL);

132 
	`Cª©eWödowEx
(0L, 
APPCHILD
,

134 
WS_BORDER
 | 
WS_CHILD
 | 
WS_VISIBLE
,

135 
width
 * 3 / 5, 
height
 * 3 / 5,

136 
width
 * 2 / 3, 
height
 * 2 / 3,

137 
hwnd
, (
HMENU
)4, 
NULL
, NULL);

138 
	`Cª©eWödowEx
(0L, "EDIT",

140 
WS_BORDER
|
WS_CHILD
 | 
WS_VISIBLE
,

141 
width
 * 5 / 8, 10, 100, 18,

142 
hwnd
, (
HMENU
)5, 
NULL
, NULL);

143 
	`Cª©eWödowEx
(0L, "PROGBAR",

145 
WS_BORDER
|
WS_CHILD
 | 
WS_VISIBLE
,

146 
width
 * 5 / 8, 32, 100, 18,

147 
hwnd
, (
HMENU
)6, 
NULL
, NULL);

149 
hli°
 = 
	`Cª©eWödowEx
(0L, "LISTBOX",

151 
WS_HSCROLL
|
WS_VSCROLL
|
WS_BORDER
|
WS_CHILD
 | 
WS_VISIBLE
,

152 
width
 * 5 / 8, 54, 100, 48,

153 
hwnd
, (
HMENU
)7, 
NULL
, NULL);

154 
	`SídMesßge
(
hli°
, 
LB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"Cherry");

155 
	`SídMesßge
(
hli°
, 
LB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"Apple");

156 
	`SídMesßge
(
hli°
, 
LB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"Orange");

158 
	`Cª©eWödowEx
(0L, "BUTTON",

160 
BS_AUTOCHECKBOX
 | 
WS_CHILD
 | 
WS_VISIBLE
,

161 
width
 * 5 / 8 + 50, 106, 50, 14,

162 
hwnd
, (
HMENU
)8, 
NULL
, NULL);

165  
hwnd
;

166 
	}
}

168 #i‡
CHILD


169 
LRESULT
 
CALLBACK


170 
	$ChûdWndProc
(
HWND
 
hwnd
, 
UINT
 
msg
, 
WPARAM
 
wp
, 
LPARAM
 
Õ
)

172 
RECT
 
rc
;

173 
PAINTSTRUCT
 
ps
;

175 
msg
) {

176 
WM_PAINT
:

177 
	`BegöPaöt
(
hwnd
, &
ps
);

178 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

179 #i‡
USEBLIT


181 
HDC
 
hdcMem
;

182 
HBITMAP
 
hbmp
, 
hbmpOrg
;

185 
hdcMem
 = 
	`Cª©eCom∑tibÀDC
(
ps
.
hdc
);

191 
hbmp
 = 
	`Cª©eCom∑tibÀBôm≠
(
hdcMem
, 
image
->
width
, image->
height
);

192 
hbmpOrg
 = 
	`Sñe˘Obje˘
(
hdcMem
, 
hbmp
);

195 
	`DøwDIB
(
hdcMem
, 0, 0, 
image
);

200 
	`SåëchB…
(
ps
.
hdc
, 0, 0, 
rc
.
right
*4/5,Ñc.
bŸtom
*4/5, 
hdcMem
,

201 0, 0, 
image
->
width
, image->
height
, 
MWROP_SRCCOPY
);

202 
	`DñëeObje˘
(
	`Sñe˘Obje˘
(
hdcMem
, 
hbmpOrg
));

203 
	`DñëeDC
(
hdcMem
);

206 
	`DøwDIB
(
ps
.
hdc
, 
rc
.
À·
,Ñc.
t›
, 
image
);

208 
	`EndPaöt
(
hwnd
, &
ps
);

211  
	`DefWödowProc
–
hwnd
, 
msg
, 
wp
, 
Õ
);

214 
	}
}

217 
LRESULT
 
CALLBACK


218 
	$WndProc
(
HWND
 
hwnd
, 
UINT
 
msg
, 
WPARAM
 
wp
, 
LPARAM
 
Õ
)

220 
PAINTSTRUCT
 
ps
;

221 
HDC
 
hdc
;

222 #i‡
CLIENT3D
 | 
IMAGE
 | 
GRAPH3D


223 
RECT
 
rc
;

225 #i‡
GRAPH3D


226 
cou¡up
 = 1;

227 
id
;

228 
vec1
 
gx
, 
gy
;

230 #i‡
TIMERDEMO


231 
POINT
 
mou£±
;

233 #i‡
ARCDEMO


234 
°¨tdegªes
 = 0;

235 
íddegªes
 = 30;

238  
msg
) {

239 #i‡
TIMERDEMO


240 
WM_CREATE
:

241 
	`SëTimî
(
hwnd
, 1, 100, 
NULL
);

242 
mou£±
.
x
 = 60;

243 
mou£±
.
y
 = 20;

246 
WM_TIMER
:

247 #i‡
GRAPH3D


248 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

249 if(
cou¡up
) {

250 
mou£±
.
y
 += 20;

251 if(
mou£±
.
y
 >
rc
.
bŸtom
) {

252 
mou£±
.
y
 -= 20;

253 
cou¡up
 = 0;

256 
mou£±
.
y
 -= 20;

257 if(
mou£±
.
y
 < 20) {

258 
mou£±
.
y
 += 20;

259 
cou¡up
 = 1;

262 
	`SídMesßge
(
hwnd
, 
WM_MOUSEMOVE
, 0,

263 
	`MAKELONG
(
mou£±
.
x
, mou£±.
y
));

265 #i‡
ARCDEMO


266 
°¨tdegªes
 += 10;

267 if(
°¨tdegªes
 >= 360)

268 
°¨tdegªes
 = 0;

269 
íddegªes
 += 15;

270 if(
íddegªes
 >= 360)

271 
íddegªes
 = 0;

272 
	`InvÆid©eRe˘
(
hwnd
, 
NULL
, 
TRUE
);

276 
WM_DESTROY
:

277 
	`KûlTimî
(
hwnd
, 1);

280 
WM_SIZE
:

283 
WM_MOVE
:

286 #i‡
CLIENT3D


287 
WM_SETFOCUS
:

288 
	`Po°Mesßge
((
HWND
)
wp
, 
WM_PAINT
, 0, 0L);

291 
WM_KILLFOCUS
:

292 
	`Po°Mesßge
((
HWND
)
wp
, 
WM_PAINT
, 0, 0L);

294 
WM_ERASEBKGND
:

295 if(
	`GëFocus
(Ë!
hwnd
)

296  
	`DefWödowProc
(
hwnd
, 
msg
, 
wp
, 
Õ
);

299 #i‡
GRAPH3D


300 
WM_ERASEBKGND
:

301 if((
	`GëWödowL⁄g
(
hwnd
, 
GWL_ID
) & 03) == 1)

303  
	`DefWödowProc
(
hwnd
, 
msg
, 
wp
, 
Õ
);

305 
WM_PAINT
:

306 
hdc
 = 
	`BegöPaöt
(
hwnd
, &
ps
);

308 #i‡
CLIENT3D


309 if(
	`GëFocus
(Ë=
hwnd
) {

310 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

311 
	`Døw3dShadow
(
hdc
, 
rc
.
À·
,Ñc.
t›
,

312 
rc
.
right
-rc.
À·
,Ñc.
bŸtom
-rc.
t›
,

313 
	`GëSysCﬁ‹
(
COLOR_3DDKSHADOW
),

314 
	`GëSysCﬁ‹
(
COLOR_3DLIGHT
));

315 
	`InÊ©eRe˘
(&
rc
, -1, -1);

316 
	`FûlRe˘
(
hdc
, &
rc
, 
	`GëStockObje˘
(
GRAY_BRUSH
));

319 #i‡
IMAGE


320 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

321 
	`DøwDIB
(
hdc
, 
rc
.
À·
+2,Ñc.
t›
+2, 
image2
);

323 #i‡
ARCDEMO


325 
x
, 
y
, 
w
, 
h
;

326 
RECT
 
rc
;

328 if(
hdc
 !
NULL
) {

329 
	`GëWödowRe˘
(
hwnd
, &
rc
);

330 
rc
.
t›
 += 13;

331 
	`InÊ©eRe˘
(&
rc
, -3, -3);

336 
x
 = 
rc
.
À·
;

337 
y
 = 
rc
.
t›
;

338 
w
 = 
rc
.
right
 -Ñc.
À·
;

339 
h
 = 
rc
.
bŸtom
 -Ñc.
t›
;

340 
w
 += 10;

341 
	`GdSëF‹egroundCﬁ‹
(
hdc
->
psd
, 
	`RGB
(0,255,0));

342 
	`GdArcAngÀ
(
hdc
->
psd
, 
x
+
w
/2, 
y
+
h
/2, w/2, h/2, 
°¨tdegªes
*64,

343 
íddegªes
*64, 
MWPIE
);

344 
	`GdSëF‹egroundCﬁ‹
(
hdc
->
psd
, 
	`RGB
(0,0,0));

345 
	`GdArcAngÀ
(
hdc
->
psd
, 
x
+
w
/2, 
y
+
h
/2, w/2, h/2, 
°¨tdegªes
*64,

346 
íddegªes
*64, 
MWARCOUTLINE
);

350 
	`EndPaöt
(
hwnd
, &
ps
);

354 #i‡
GRAPH3D


355 
id
 = ()
	`GëWödowL⁄g
(
hwnd
, 
GWL_ID
) & 03;

356 
	`öô3
(
hdc
, 
id
 =1? 
hwnd
: 
NULL
);

357 
id
) {

359 
	`ro£
(1.0, 7, 13);

364 
	`look3
(-2 * 
gx
, -2 * 
gy
, 1.2);

365 
	`døwgrid
(-8.0, 8.0, 10, -8.0, 8.0, 10);

368 
	`£tcﬁ‹3
(
BLACK
);

369 
	`cú˛e3
(1.0);

372 
	`£tcﬁ‹3
(
BLUE
);

373 
	`daisy
(1.0, 20);

377 #i‡
CLIPDEMO


378 if(
id
 == 1) {

379 
HRGN
 
hrgn
, 
hrgn2
;

382 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

383 
	`InÊ©eRe˘
(&
rc
, -80, -80);

384 ()
	`GëWödowL⁄g
(
hwnd
, 
GWL_ID
)) {

386 
hrgn
 = 
	`Cª©eEŒùticRgnIndúe˘
(&
rc
);

389 
hrgn
 = 
	`Cª©eRoundRe˘Rgn
(
rc
.
À·
,Ñc.
t›
,

390 
rc
.
right
,Ñc.
bŸtom
, 100, 100);

393 
hrgn
 = 
	`Cª©eRe˘RgnIndúe˘
(&
rc
);

398 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

399 
hrgn2
 = 
	`Cª©eRe˘RgnIndúe˘
(&
rc
);

400 
	`Sñe˘ClùRgn
(
hdc
, 
hrgn2
);

401 
	`ExtSñe˘ClùRgn
(
hdc
, 
hrgn
, 
RGN_XOR
);

402 
	`DñëeObje˘
(
hrgn2
);

404 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

405 
	`FûlRe˘
(
hdc
, &
rc
, 
	`GëStockObje˘
(
BLACK_BRUSH
));

408 
	`Sñe˘ClùRgn
(
hdc
, 
hrgn
);

409 
	`DñëeObje˘
(
hrgn
);

413 
	`∑öt3
(
hdc
);

416 
	`EndPaöt
(
hwnd
, &
ps
);

419 
WM_LBUTTONDOWN
:

422 
WM_MOUSEMOVE
:

423 #i‡
GRAPH3D


424 if((
	`GëWödowL⁄g
(
hwnd
, 
GWL_ID
) & 03) == 1) {

425 
POINT
 
±
;

427 
	`POINTSTOPOINT
(
±
, 
Õ
);

428 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

429 
gx
 = (
vec1
)
±
.
x
 / 
rc
.
right
;

430 
gy
 = (
vec1
)
±
.
y
 / 
rc
.
bŸtom
;

431 
	`InvÆid©eRe˘
(
hwnd
, 
NULL
, 
FALSE
);

432 
mou£±
.
x
 = 
±
.x;

433 
mou£±
.
y
 = 
±
.y;

438 
WM_LBUTTONUP
:

441 
WM_RBUTTONDOWN
:

445  
	`DefWödowProc
–
hwnd
, 
msg
, 
wp
, 
Õ
);

448 
	}
}

450 
WINAPI


451 
	$WöMaö
(
HINSTANCE
 
hIn°™˚
, HINSTANCE 
hPªvIn°™˚
, 
LPSTR
 
ÕCmdLöe
,

452 
nShowCmd
)

454 
MSG
 
msg
;

455 
HWND
 
hwnd
;

456 
RECT
 
rc
;

458 
	`Regi°îAµCœss
();

459 
	`GëWödowRe˘
(
	`GëDeskt›Wödow
(), &
rc
);

460 #i‡!(
ELKS
 | 
MSDOS
)

462 
	`Cª©eWödowEx
(0L, 
APPCHILD
, "", 
WS_BORDER
 | 
WS_VISIBLE
,

463 
rc
.
right
-130-1,Ñc.
bŸtom
-153-1, 130, 153,

464 
	`GëDeskt›Wödow
(), (
HMENU
)1000, 
NULL
, NULL);

466 
	`Cª©eAµWödow
();

467 
	`Cª©eAµWödow
();

468 
	`Cª©eAµWödow
();

469 #i‡!(
ELKS
 | 
MSDOS
)

470 
	`Cª©eAµWödow
();

471 
	`Cª©eAµWödow
();

472 
	`Cª©eAµWödow
();

473 
	`Cª©eAµWödow
();

474 
	`Cª©eAµWödow
();

475 
hwnd
 = 
	`Cª©eAµWödow
();

476 
	`GëWödowRe˘
(
hwnd
, &
rc
);

477 
	`Off£tRe˘
(&
rc
, 50, 50);

478 
	`MoveWödow
(
hwnd
, 
rc
.
À·
,Ñc.
t›
,Ñc.
bŸtom
-rc.top,

479 
rc
.
right
-rc.
À·
, 
TRUE
);

481 #i‡!(
ELKS
 | 
MSDOS
)

483 
	`MwSëDeskt›WÆÕ≠î
(&
image_mi¸owö
);

489  
	`GëMesßge
(&
msg
, 
NULL
, 0, 0)) {

490 
	`Tøn¶©eMesßge
(&
msg
);

491 
	`Di•©chMesßge
(&
msg
);

494 
	}
}

	@demos/mwin/mdemo.stretch.c

7 
	#MWINCLUDECOLORS


	)

8 
	~"wödows.h
"

9 
	~"wöã∫.h
"

11 
	~"devi˚.h
"

13 #i‡
DOS_TURBOC


14 
	g_°kÀn
 = 4096;

17 
	#CLIPDEMO
 0

	)

19 #i‚de‡
ELKS


20 
	#TIMERDEMO
 1

	)

21 
	#GRAPH3D
 0

	)

22 
	#IMAGE
 0

	)

24 
	#ARCDEMO
 1

	)

25 
	#CHILD
 1

	)

26 
	#CLIENT3D
 0

	)

28 #i‡
GRAPH3D


29 
	~"gøph3d.h
"

32 
MWIMAGEHDR
 
image_ˇr8
;

33 
MWIMAGEHDR
 
image_zi⁄208
;

34 
MWIMAGEHDR
 
image_≥nguö
;

35 
MWIMAGEHDR
 
image_undî4
;

36 
MWIMAGEHDR
 
image_mi¸owö
;

37 
MWIMAGEHDR
 
image_cs1
;

38 
MWIMAGEHDR
 
image_æe8
;

40 #i‡
CHILD


41 #i‡
ELKS
 | 
MSDOS


42 
PMWIMAGEHDR
 
	gimage
 = &
image_cs1
;

44 
PMWIMAGEHDR
 
	gimage
 = &
image_≥nguö
;

48 #i‡
IMAGE


49 
PMWIMAGEHDR
 
	gimage2
 = &
image_zi⁄208
;

52 
	#APPCLASS
 "ã°"

	)

53 
	#APPCHILD
 "ã°2"

	)

56 
LRESULT
 
CALLBACK
 
WndProc
(
HWND
 
hwnd
,
UINT
 
uMsg
,
WPARAM
 
wp
,
LPARAM
 
Õ
);

57 
LRESULT
 
CALLBACK
 
ChûdWndProc
(
HWND
 
hwnd
,
UINT
 
uMsg
,
WPARAM
 
wp
,
LPARAM
 
Õ
);

60 
	$MwU£rInô
(
ac
, **
av
)

64 
	}
}

67 
	$Regi°îAµCœss
()

69 
WNDCLASS
 
wc
;

71 #i‡!
ELKS


72 
	`MwRegi°îBuâ⁄C⁄åﬁ
(
NULL
);

73 
	`MwRegi°îEdôC⁄åﬁ
(
NULL
);

74 
	`MwRegi°îLi°boxC⁄åﬁ
(
NULL
);

75 
	`MwRegi°îProgªssB¨C⁄åﬁ
(
NULL
);

78 
wc
.
°yÀ
 = 
CS_DBLCLKS
 | 
CS_VREDRAW
 | 
CS_HREDRAW
;

79 
wc
.
Õ‚WndProc
 = (
WNDPROC
)
WndProc
;

80 
wc
.
cbClsExåa
 = 0;

81 
wc
.
cbWndExåa
 = 0;

82 
wc
.
hIn°™˚
 = 0;

83 
wc
.
hIc⁄
 = 0;

84 
wc
.
hCurs‹
 = 0;

85 
wc
.
hbrBackground
 = (
HBRUSH
)
	`GëStockObje˘
(
LTGRAY_BRUSH
);

86 
wc
.
ÕszMíuName
 = 
NULL
;

87 
wc
.
ÕszCœssName
 = 
APPCLASS
;

88 
	`Regi°îCœss
–&
wc
);

90 #i‡
CHILD


91 
wc
.
Õ‚WndProc
 = (
WNDPROC
)
ChûdWndProc
;

92 
wc
.
ÕszCœssName
 = 
APPCHILD
;

93  
	`Regi°îCœss
–&
wc
);

96 
	}
}

98 
HWND


99 
	$Cª©eAµWödow
()

101 
HWND
 
hwnd
, 
hli°
;

102 
√xtid
 = 1;

103 
width
, 
height
;

104 
RECT
 
r
;

105 
	`GëWödowRe˘
(
	`GëDeskt›Wödow
(), &
r
);

106 
width
 = 
height
 = 
r
.
right
 / 2;

108 
hwnd
 = 
	`Cª©eWödowEx
(0L, 
APPCLASS
,

110 
WS_OVERLAPPEDWINDOW
 | 
WS_VISIBLE
,

111 
CW_USEDEFAULT
, CW_USEDEFAULT,

112 
width
, 
height
,

113 
NULL
, (
HMENU
)
√xtid
++, NULL, NULL);

115 #i‡
CHILD


116 if(
hwnd


117 #i‡
GRAPH3D


118 && (
√xtid
 & 03)!=2

121 
	`Cª©eWödowEx
(0L, 
APPCHILD
,

123 
WS_BORDER
 | 
WS_CHILD
 | 
WS_VISIBLE
,

124 4, 4, 
width
 / 3, 
height
 / 3,

125 
hwnd
, (
HMENU
)2, 
NULL
, NULL);

126  
hwnd
;

127 
	`Cª©eWödowEx
(0L, 
APPCHILD
,

129 
WS_BORDER
 | 
WS_CHILD
 | 
WS_VISIBLE
,

130 
width
 / 3, 
height
 / 3, width / 3, height / 3,

131 
hwnd
, (
HMENU
)3, 
NULL
, NULL);

132 
	`Cª©eWödowEx
(0L, 
APPCHILD
,

134 
WS_BORDER
 | 
WS_CHILD
 | 
WS_VISIBLE
,

135 
width
 * 3 / 5, 
height
 * 3 / 5,

136 
width
 * 2 / 3, 
height
 * 2 / 3,

137 
hwnd
, (
HMENU
)4, 
NULL
, NULL);

138 
	`Cª©eWödowEx
(0L, "EDIT",

140 
WS_BORDER
|
WS_CHILD
 | 
WS_VISIBLE
,

141 
width
 * 5 / 8, 10, 100, 18,

142 
hwnd
, (
HMENU
)5, 
NULL
, NULL);

143 
	`Cª©eWödowEx
(0L, "PROGBAR",

145 
WS_BORDER
|
WS_CHILD
 | 
WS_VISIBLE
,

146 
width
 * 5 / 8, 32, 100, 18,

147 
hwnd
, (
HMENU
)6, 
NULL
, NULL);

149 
hli°
 = 
	`Cª©eWödowEx
(0L, "LISTBOX",

151 
WS_HSCROLL
|
WS_VSCROLL
|
WS_BORDER
|
WS_CHILD
 | 
WS_VISIBLE
,

152 
width
 * 5 / 8, 54, 100, 48,

153 
hwnd
, (
HMENU
)7, 
NULL
, NULL);

154 
	`SídMesßge
(
hli°
, 
LB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"Cherry");

155 
	`SídMesßge
(
hli°
, 
LB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"Apple");

156 
	`SídMesßge
(
hli°
, 
LB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"Orange");

158 
	`Cª©eWödowEx
(0L, "BUTTON",

160 
BS_AUTOCHECKBOX
 | 
WS_CHILD
 | 
WS_VISIBLE
,

161 
width
 * 5 / 8 + 50, 106, 50, 14,

162 
hwnd
, (
HMENU
)8, 
NULL
, NULL);

165  
hwnd
;

166 
	}
}

168 #i‡
CHILD


169 
LRESULT
 
CALLBACK


170 
	$ChûdWndProc
(
HWND
 
hwnd
, 
UINT
 
msg
, 
WPARAM
 
wp
, 
LPARAM
 
Õ
)

172 
HDC
 
hdcMem
;

173 
HBITMAP
 
hbmp
, 
hbmpOrg
;

174 
RECT
 
rc
;

175 
PAINTSTRUCT
 
ps
;

177 
msg
) {

178 
WM_PAINT
:

179 
	`BegöPaöt
(
hwnd
, &
ps
);

180 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

183 
hdcMem
 = 
	`Cª©eCom∑tibÀDC
(
ps
.
hdc
);

185 
hbmp
 = 
	`Cª©eCom∑tibÀBôm≠
(
hdcMem
, 
image
->
width
, image->
height
);

186 
hbmpOrg
 = 
	`Sñe˘Obje˘
(
hdcMem
, 
hbmp
);

189 
	`DøwDIB
(
hdcMem
, 0, 0, 
image
);

193 
	`SåëchB…
(
ps
.
hdc
, 0, 0, 
rc
.
right
,Ñc.
bŸtom
, 
hdcMem
, 0, 0, 
image
->
width
, image->
height
, 
MWROP_SRCCOPY
);

194 
	`DñëeObje˘
(
	`Sñe˘Obje˘
(
hdcMem
, 
hbmpOrg
));

195 
	`DñëeDC
(
hdcMem
);

197 
	`EndPaöt
(
hwnd
, &
ps
);

200  
	`DefWödowProc
–
hwnd
, 
msg
, 
wp
, 
Õ
);

203 
	}
}

206 
LRESULT
 
CALLBACK


207 
	$WndProc
(
HWND
 
hwnd
, 
UINT
 
msg
, 
WPARAM
 
wp
, 
LPARAM
 
Õ
)

209 
PAINTSTRUCT
 
ps
;

210 
HDC
 
hdc
;

211 #i‡
CLIENT3D
 | 
IMAGE
 | 
GRAPH3D


212 
RECT
 
rc
;

214 #i‡
GRAPH3D


215 
cou¡up
 = 1;

216 
id
;

217 
vec1
 
gx
, 
gy
;

219 #i‡
TIMERDEMO


220 
POINT
 
mou£±
;

222 #i‡
ARCDEMO


223 
°¨tdegªes
 = 0;

224 
íddegªes
 = 30;

227  
msg
) {

228 #i‡
TIMERDEMO


229 
WM_CREATE
:

230 
	`SëTimî
(
hwnd
, 1, 100, 
NULL
);

231 
mou£±
.
x
 = 60;

232 
mou£±
.
y
 = 20;

235 
WM_TIMER
:

236 #i‡
GRAPH3D


237 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

238 if(
cou¡up
) {

239 
mou£±
.
y
 += 20;

240 if(
mou£±
.
y
 >
rc
.
bŸtom
) {

241 
mou£±
.
y
 -= 20;

242 
cou¡up
 = 0;

245 
mou£±
.
y
 -= 20;

246 if(
mou£±
.
y
 < 20) {

247 
mou£±
.
y
 += 20;

248 
cou¡up
 = 1;

251 
	`SídMesßge
(
hwnd
, 
WM_MOUSEMOVE
, 0,

252 
	`MAKELONG
(
mou£±
.
x
, mou£±.
y
));

254 #i‡
ARCDEMO


255 
°¨tdegªes
 += 10;

256 if(
°¨tdegªes
 >= 360)

257 
°¨tdegªes
 = 0;

258 
íddegªes
 += 15;

259 if(
íddegªes
 >= 360)

260 
íddegªes
 = 0;

261 
	`InvÆid©eRe˘
(
hwnd
, 
NULL
, 
TRUE
);

265 
WM_DESTROY
:

266 
	`KûlTimî
(
hwnd
, 1);

269 
WM_SIZE
:

272 
WM_MOVE
:

275 #i‡
CLIENT3D


276 
WM_SETFOCUS
:

277 
	`Po°Mesßge
((
HWND
)
wp
, 
WM_PAINT
, 0, 0L);

280 
WM_KILLFOCUS
:

281 
	`Po°Mesßge
((
HWND
)
wp
, 
WM_PAINT
, 0, 0L);

283 
WM_ERASEBKGND
:

284 if(
	`GëFocus
(Ë!
hwnd
)

285  
	`DefWödowProc
(
hwnd
, 
msg
, 
wp
, 
Õ
);

288 #i‡
GRAPH3D


289 
WM_ERASEBKGND
:

290 if((
	`GëWödowL⁄g
(
hwnd
, 
GWL_ID
) & 03) == 1)

292  
	`DefWödowProc
(
hwnd
, 
msg
, 
wp
, 
Õ
);

294 
WM_PAINT
:

295 
hdc
 = 
	`BegöPaöt
(
hwnd
, &
ps
);

297 #i‡
CLIENT3D


298 if(
	`GëFocus
(Ë=
hwnd
) {

299 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

300 
	`Døw3dShadow
(
hdc
, 
rc
.
À·
,Ñc.
t›
,

301 
rc
.
right
-rc.
À·
,Ñc.
bŸtom
-rc.
t›
,

302 
	`GëSysCﬁ‹
(
COLOR_3DDKSHADOW
),

303 
	`GëSysCﬁ‹
(
COLOR_3DLIGHT
));

304 
	`InÊ©eRe˘
(&
rc
, -1, -1);

305 
	`FûlRe˘
(
hdc
, &
rc
, 
	`GëStockObje˘
(
GRAY_BRUSH
));

308 #i‡
IMAGE


309 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

310 
	`DøwDIB
(
hdc
, 
rc
.
À·
+2,Ñc.
t›
+2, 
image2
);

312 #i‡
ARCDEMO


314 
x
, 
y
, 
w
, 
h
;

315 
RECT
 
rc
;

317 if(
hdc
 !
NULL
) {

318 
	`GëWödowRe˘
(
hwnd
, &
rc
);

319 
rc
.
t›
 += 13;

320 
	`InÊ©eRe˘
(&
rc
, -3, -3);

325 
x
 = 
rc
.
À·
;

326 
y
 = 
rc
.
t›
;

327 
w
 = 
rc
.
right
 -Ñc.
À·
;

328 
h
 = 
rc
.
bŸtom
 -Ñc.
t›
;

329 
w
 += 10;

330 
	`GdSëF‹egroundCﬁ‹
(
hdc
->
psd
, 
	`RGB
(0,255,0));

331 
	`GdArcAngÀ
(
hdc
->
psd
, 
x
+
w
/2, 
y
+
h
/2, w/2, h/2, 
°¨tdegªes
*64,

332 
íddegªes
*64, 
MWPIE
);

333 
	`GdSëF‹egroundCﬁ‹
(
hdc
->
psd
, 
	`RGB
(0,0,0));

334 
	`GdArcAngÀ
(
hdc
->
psd
, 
x
+
w
/2, 
y
+
h
/2, w/2, h/2, 
°¨tdegªes
*64,

335 
íddegªes
*64, 
MWARCOUTLINE
);

340 
	`EndPaöt
(
hwnd
, &
ps
);

344 #i‡
GRAPH3D


345 
id
 = ()
	`GëWödowL⁄g
(
hwnd
, 
GWL_ID
) & 03;

346 
	`öô3
(
hdc
, 
id
 =1? 
hwnd
: 
NULL
);

347 
id
) {

349 
	`ro£
(1.0, 7, 13);

354 
	`look3
(-2 * 
gx
, -2 * 
gy
, 1.2);

355 
	`døwgrid
(-8.0, 8.0, 10, -8.0, 8.0, 10);

358 
	`£tcﬁ‹3
(
BLACK
);

359 
	`cú˛e3
(1.0);

362 
	`£tcﬁ‹3
(
BLUE
);

363 
	`daisy
(1.0, 20);

367 #i‡
CLIPDEMO


368 if(
id
 == 1) {

369 
HRGN
 
hrgn
, 
hrgn2
;

372 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

373 
	`InÊ©eRe˘
(&
rc
, -80, -80);

374 ()
	`GëWödowL⁄g
(
hwnd
, 
GWL_ID
)) {

376 
hrgn
 = 
	`Cª©eEŒùticRgnIndúe˘
(&
rc
);

379 
hrgn
 = 
	`Cª©eRoundRe˘Rgn
(
rc
.
À·
,Ñc.
t›
,

380 
rc
.
right
,Ñc.
bŸtom
, 100, 100);

383 
hrgn
 = 
	`Cª©eRe˘RgnIndúe˘
(&
rc
);

388 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

389 
hrgn2
 = 
	`Cª©eRe˘RgnIndúe˘
(&
rc
);

390 
	`Sñe˘ClùRgn
(
hdc
, 
hrgn2
);

391 
	`ExtSñe˘ClùRgn
(
hdc
, 
hrgn
, 
RGN_XOR
);

392 
	`DñëeObje˘
(
hrgn2
);

394 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

395 
	`FûlRe˘
(
hdc
, &
rc
, 
	`GëStockObje˘
(
BLACK_BRUSH
));

398 
	`Sñe˘ClùRgn
(
hdc
, 
hrgn
);

399 
	`DñëeObje˘
(
hrgn
);

403 
	`∑öt3
(
hdc
);

406 
	`EndPaöt
(
hwnd
, &
ps
);

409 
WM_LBUTTONDOWN
:

412 
WM_MOUSEMOVE
:

413 #i‡
GRAPH3D


414 if((
	`GëWödowL⁄g
(
hwnd
, 
GWL_ID
) & 03) == 1) {

415 
POINT
 
±
;

417 
	`POINTSTOPOINT
(
±
, 
Õ
);

418 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

419 
gx
 = (
vec1
)
±
.
x
 / 
rc
.
right
;

420 
gy
 = (
vec1
)
±
.
y
 / 
rc
.
bŸtom
;

421 
	`InvÆid©eRe˘
(
hwnd
, 
NULL
, 
FALSE
);

422 
mou£±
.
x
 = 
±
.x;

423 
mou£±
.
y
 = 
±
.y;

428 
WM_LBUTTONUP
:

431 
WM_RBUTTONDOWN
:

435  
	`DefWödowProc
–
hwnd
, 
msg
, 
wp
, 
Õ
);

438 
	}
}

440 
WINAPI


441 
	$WöMaö
(
HINSTANCE
 
hIn°™˚
, HINSTANCE 
hPªvIn°™˚
, 
LPSTR
 
ÕCmdLöe
,

442 
nShowCmd
)

444 
MSG
 
msg
;

445 
HWND
 
hwnd
;

446 
RECT
 
rc
;

448 
	`Regi°îAµCœss
();

449 
	`GëWödowRe˘
(
	`GëDeskt›Wödow
(), &
rc
);

450 #i‡!(
ELKS
 | 
MSDOS
)

456 
	`Cª©eAµWödow
();

457 
	`Cª©eAµWödow
();

459 #i‡!(
ELKS
 | 
MSDOS
)

471 #i‡!(
ELKS
 | 
MSDOS
)

473 
	`MwSëDeskt›WÆÕ≠î
(&
image_mi¸owö
);

479  
	`GëMesßge
(&
msg
, 
NULL
, 0, 0)) {

480 
	`Tøn¶©eMesßge
(&
msg
);

481 
	`Di•©chMesßge
(&
msg
);

484 
	}
}

	@demos/mwin/mine.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~<time.h
>

4 
	~<°rög.h
>

8 
mwCuºítBuâ⁄s
;

11 #i‡
deföed
(
__πems__
Ë|| deföed(
PSP
)

12 
	#§™dom
 
§™d


	)

13 
	#øndom
 
ønd


	)

16 
	#MWINCLUDECOLORS


	)

17 
	~"wödows.h
"

18 
	~"wötoﬁs.h
"

21 
	mÊag
;

22 
	mvÆue
;

23 
BOOL
 
	mã°
;

24 
BOOL
 
	mhô
;

25 
BOOL
 
	mbombout
;

26 
BOOL
 
	mîr‹
;

27 }
	tBOM
;

30 
	mx
;

31 
	my
;

32 
BOOL
 
	mNY
;

33 }
	tNO
;

36 
	mhighsc‹e
;

37 
	m«me
[20];

38 }
	tSCORE
;

41 
DWORD
 
	mdwStyÀ
;

42 
LPSTR
 
	m•C≠ti⁄
;

43 
HMENU
 
	mhMíu
;

44 
HCURSOR
 
	mhCurs‹
;

45 
HICON
 
	mhIc⁄
;

46 
WNDPROC
 
	mMaöWödowProc
;

47 
	mlx
, 
	mty
, 
	mrx
, 
	mby
;

48 
COLORREF
 
	miBkCﬁ‹
;

49 
DWORD
 
	mdwAddD©a
;

50 
HWND
 
	mhHo°ög
;

51 } 
	tMAINWINCREATE
, *
	tPMAINWINCREATE
;

53 
	#IDOK
 0

	)

54 
	#GëCh¨Width
(Ë11

	)

55 
	#GëCh¨Height
(Ë13

	)

57 
MWIMAGEHDR
 
image_möeÊag
;

58 
MWIMAGEHDR
 
image_möeÁ˚
;

59 
MWIMAGEHDR
 
image_möeÁ˚lo°
;

60 
MWIMAGEHDR
 
image_möebomb
;

61 
MWIMAGEHDR
 
image_möed⁄e
;

62 
MWIMAGEHDR
 
image_möehôÁl£
;

64 
HWND
 
Cª©eMaöWödow
(
PMAINWINCREATE
 
pCª©eInfo
);

65 
BOOL
 
PtInRe˘2
(c⁄° 
RECT
 *
Õrc
, 
x
, 
y
);

66 
Døw3DUpFøme
(
HDC
 
hDC
, 
l
, 
t
, 
r
, 
b
, 
fûlc
);

67 
SórchGround
(
HDC
 
hdc
,
x
,
y
);

68 
O≥n
(
HWND
 
hWnd
,
x
,
y
);

69 
LRESULT
 
Te°MyWöProc
(
HWND
 
hWnd
,
UINT
 
mesßge
,
WPARAM
 
wP¨am
,
LPARAM
 
lP¨am
);

70 
InôMyWöCª©eInfo
(
PMAINWINCREATE
 
pCª©eInfo
);

71 
InôAbHo°edCª©eInfo
(
HWND
 
hHo°ög
, 
PMAINWINCREATE
 
pCª©eInfo
);

72 
InôHighSc‹eCª©eInfo
 (
HWND
 
hHo°ög
, 
PMAINWINCREATE
 
pCª©eInfo
);

73 
InôC⁄gøtuœti⁄Cª©eInfo
 (
HWND
 
hHo°ög
, 
PMAINWINCREATE
 
pCª©eInfo
);

74 * 
Te°MyWödow
(* 
d©a
);

75 
BombGame
(
HWND
 
hWnd
, 
x
, 
y
);

76 
Föished
(
HWND
 
hWnd
);

77 
C™˚l3DFøme
(
HDC
 
hdc
, 
l
,
t
,
r
,
b
);

78 
TextVÆue
(
HDC
 
hdc
, 
x
,
y
,
vÆue
);

79 
BombOut
(
HWND
 
hWnd
);

80 
BŸhBuâ⁄DownProc
(
HWND
 
hWnd
, 
x
, 
y
);

81 
DøwDigô
(
HDC
 
hdc
, * 
buf„r
, 
CLOCK
);

83 
	#ID_ABOUT
 300

	)

84 
	#ID_NEW
 301

	)

85 
	#ID_LARGE
 302

	)

86 
	#ID_MIDDLE
 303

	)

87 
	#ID_SMALL
 304

	)

88 
	#ID_CLOSE
 305

	)

89 
	#ID_HIGHSCORE
 306

	)

90 
	#ID_CLOCK
 400

	)

92 
	#WIDTH_LARGEWIN
 544

	)

93 
	#HEIGHT_LARGEWIN
 371

	)

94 
	#WIDTH_MIDDLEWIN
 287

	)

95 
	#HEIGHT_MIDDLEWIN
 332

	)

96 
	#WIDTH_SMALLWIN
 178

	)

97 
	#HEIGHT_SMALLWIN
 206

	)

99 
	#WIDTH_FACE
 30

	)

100 
	#HEIGHT_FACE
 30

	)

102 
	#WIDTH_DIGIT
 11

	)

103 
	#WIDTH_BOMNUM
 (2*
WIDTH_DIGIT
)

	)

104 
	#HEIGHT_BOMNUM
 30

	)

106 
	#WIDTH_CLOCK
 (3*
WIDTH_DIGIT
)

	)

107 
	#HEIGHT_CLOCK
 30

	)

108 
	#FREQ_CLOCK
 1000

	)

110 
	#WIDTH_BOX
 18

	)

111 
	#HEIGHT_BOX
 18

	)

114 
	gwöwidth
 = 
WIDTH_LARGEWIN
;

115 
	gwöheight
 = 
HEIGHT_LARGEWIN
;

116 
	gsg_boxnumx
 = 30;

117 
	gsg_boxnumy
 = 18;

118 
	gbombnum
 = 99;

122 
	gwöwidth
 = 
WIDTH_MIDDLEWIN
;

123 
	gwöheight
 = 
HEIGHT_MIDDLEWIN
;

124 
	gsg_boxnumx
 = 16;

125 
	gsg_boxnumy
 = 16;

126 
	gbombnum
 = 40;

130 
	gwöwidth
 = 
WIDTH_SMALLWIN
;

131 
	gwöheight
 = 
HEIGHT_SMALLWIN
;

132 
	gsg_boxnumx
 = 8;

133 
	gsg_boxnumy
 = 8;

134 
	gbombnum
 = 10;

137 
BOM
 
	gbom
[30][18];

138 
NO
 
	gNoAdr
[540];

139 
SCORE
 
	gsc‹e
[3];

140 
	gôime
, 
	gÀ·bombnum
;

141 
	gﬁdx
, 
	gﬁdy
, 
	gadrx
, 
	gadry
;

142 
	gÊag_bombout
, 
	gÊag_föished
, 
	gÊag_size
 = 2;

143 
	g£c⁄d
 = 0 ;

144 
BOOL
 
	gbTimî
;

145 
HWND
 
	ghHighsc‹e
,
	ghC⁄gøtuœã
;

146 
	goff£tx
;

147 
	gx_Á˚
, 
	gx_bomnum
, 
	gx_˛ock
;

149 
	$C™˚l3DFøme
(
HDC
 
hdc
, 
l
, 
t
, 
w
, 
h
)

151 
HBRUSH
 
hbr
;

152 
RECT
 
rc
;

154 
	`SëTextCﬁ‹
 (
hdc
,
GRAY
);

155 
	`Re˘™gÀ
(
hdc
, 
l
, 
t
,Ü + 
w
,Å + 
h
);

156 
hbr
 = 
	`Cª©eSﬁidBrush
(
LTGRAY
);

157 
	`SëRe˘
(&
rc
, 
l
+1, 
t
+1,Ü+
w
,Å+
h
);

158 
	`FûlRe˘
(
hdc
, &
rc
, 
hbr
);

159 
	`DñëeObje˘
(
hbr
);

160 
	}
}

162 
	$TextVÆue
(
HDC
 
hdc
, 
x
, 
y
, 
vÆue
)

164 
cﬁ‹
 = 0;

165 
va
[20];

166 
vÆue
)

168 1: 
cﬁ‹
=
BLUE
; ;

169 2: 
cﬁ‹
=
GREEN
; ;

170 3: 
cﬁ‹
=
RED
; ;

171 4: 
cﬁ‹
=
MAGENTA
; ;

172 5: 
cﬁ‹
=
YELLOW
; ;

173 6: 
cﬁ‹
=
CYAN
; ;

174 7: 
cﬁ‹
=
RED
; ;

175 8: 
cﬁ‹
=
GREEN
; ;

177 
	`SëBkCﬁ‹
(
hdc
,
LTGRAY
);

178 
	`SëTextCﬁ‹
(
hdc
,
cﬁ‹
);

179 
	`•rötf
(
va
,"%d",
vÆue
);

181 
	`TextOut
(
hdc
, 
x
 + ((
WIDTH_BOX
 - 
	`GëCh¨Width
 ()) >> 1),

182 
y
 + ((
HEIGHT_BOX
 - 
	`GëCh¨Height
 ()Ë>> 1), 
va
, -1);

183 
	}
}

185 
	$SórchGround
(
HDC
 
hdc
,
x
,
y
)

187 
x1
=0,
y1
=0;

188 
i
=1;

190 
bom
[
x
][
y
].
ã°
=
TRUE
;

191 
NoAdr
[
ôime
].
x
=x;

192 
NoAdr
[
ôime
].
y
=y;

193 
NoAdr
[
ôime
].
NY
=
FALSE
;

194 
ôime
++;

195 
	`C™˚l3DFøme
(
hdc
,
x
*
WIDTH_BOX
+
off£tx
, 
y
*
HEIGHT_BOX
+
HEIGHT_FACE
,

196 
WIDTH_BOX
, 
HEIGHT_BOX
);

197  
i
 <= 8 )

199 
i
)

201 1: 
x1
=
x
-1; 
y1
=
y
; ;

202 2: 
x1
=
x
-1; 
y1
=
y
-1; ;

203 3: 
x1
=
x
-1; 
y1
=
y
+1; ;

204 4: 
x1
=
x
+1; 
y1
=
y
; ;

205 5: 
x1
=
x
+1; 
y1
=
y
-1; ;

206 6: 
x1
=
x
+1; 
y1
=
y
+1; ;

207 7: 
y1
=
y
-1; 
x1
=
x
; ;

208 8: 
y1
=
y
+1; 
x1
=
x
; ;

210 if–
x1
>=0 && 
y1
>=0 && x1<
sg_boxnumx
 && y1<
sg_boxnumy


211 &&!
bom
[
x1
][
y1
].
hô
&& !bom[x1][y1].
ã°
 && !bom[x1][y1].
vÆue
 )

212 
	`SórchGround
(
hdc
,
x1
,
y1
);

214 if–
x1
>=0 && 
y1
>=0 && x1<
sg_boxnumx
 && y1<
sg_boxnumy


215 &&!
bom
[
x1
][
y1
].
hô


216 &&!
bom
[
x1
][
y1
].
ã°
 && bom[x1][y1].
vÆue
!=0 )

218 
bom
[
x1
][
y1
].
ã°
=
TRUE
;

219 
NoAdr
[
ôime
].
x
=
x1
;

220 
NoAdr
[
ôime
].
y
=
y1
;

221 
NoAdr
[
ôime
].
NY
=
TRUE
;

222 
ôime
++;

223 
	`C™˚l3DFøme
(
hdc
, 
x1
*
WIDTH_BOX
+
off£tx
, 
y1
*
HEIGHT_BOX
+
HEIGHT_FACE
,

224 
WIDTH_BOX
, 
HEIGHT_BOX
);

225 
	`TextVÆue
(
hdc
, 
x1
*
WIDTH_BOX
+
off£tx
, 
y1
*
HEIGHT_BOX
+
HEIGHT_FACE
,

226 
bom
[
x1
][
y1
].
vÆue
);

228 
i
++;

230 
	}
}

232 
BOOL
 
	$O≥n
(
HWND
 
hWnd
,
x
,
y
)

234 
x1
=0,
y1
=0;

235 
i
=1;

236 
HDC
 
hdc
;

238 
hdc
 = 
	`GëDC
(
hWnd
);

239  
i
 <= 8 )

241  
i
 ) {

242 1: 
x1
=
x
-1; 
y1
=
y
; ;

243 2: 
x1
=
x
-1; 
y1
=
y
-1; ;

244 3: 
x1
=
x
-1; 
y1
=
y
+1; ;

245 4: 
x1
=
x
+1; 
y1
=
y
; ;

246 5: 
x1
=
x
+1; 
y1
=
y
-1; ;

247 6: 
x1
=
x
+1; 
y1
=
y
+1; ;

248 7: 
y1
=
y
-1; 
x1
=
x
; ;

249 8: 
y1
=
y
+1; 
x1
=
x
; ;

252 if–
x1
>=0 && 
y1
>=0 && x1<
sg_boxnumx
 && y1<
sg_boxnumy


253 && !
bom
[
x1
][
y1
].
hô
 && bom[x1][y1].
Êag
) {

254 
	`Rñó£DC
(
hWnd
, 
hdc
);

255  
FALSE
;

258 if–
x1
>=0 && 
y1
>=0 && x1<
sg_boxnumx
 && y1<
sg_boxnumy


259 && !
bom
[
x1
][
y1
].
ã°
 && !bom[x1][y1].
vÆue


260 && !
bom
[
x1
][
y1
].
Êag
 ){

261 
	`SórchGround
(
hdc
,
x1
,
y1
);

264 if–
x1
>=0 && 
y1
>=0 && x1<
sg_boxnumx
 && y1<
sg_boxnumy


265 && !
bom
[
x1
][
y1
].
ã°
 && bom[x1][y1].
vÆue
!=0 )

267 
bom
[
x1
][
y1
].
ã°
=
TRUE
;

268 
NoAdr
[
ôime
].
x
=
x1
;

269 
NoAdr
[
ôime
].
y
=
y1
;

270 
NoAdr
[
ôime
].
NY
=
TRUE
;

271 
ôime
++;

272 
	`C™˚l3DFøme
(
hdc
, 
x1
*
WIDTH_BOX
+
off£tx
, 
y1
*
HEIGHT_BOX
+
HEIGHT_FACE
,

273 
WIDTH_BOX
, 
HEIGHT_BOX
);

274 
	`TextVÆue
(
hdc
, 
x1
*
WIDTH_BOX
+
off£tx
, 
y1
*
HEIGHT_BOX
+
HEIGHT_FACE
,

275 
bom
[
x1
][
y1
].
vÆue
);

277 
i
++;

280 
	`Rñó£DC
(
hWnd
, 
hdc
);

281  
TRUE
;

282 
	}
}

284 
	$BombOut
(
HWND
 
hWnd
)

286 
i
,
j
;

287 
HDC
 
hdc
;

289 
hdc
=
	`GëDC
(
hWnd
);

291 
i
 = 0; i < 
sg_boxnumx
; i++) {

292 
j
 = 0; j < 
sg_boxnumy
; j++) {

293 i‡(
bom
[
i
][
j
].
Êag
 && !bom[i][j].
hô
) {

294 
	`C™˚l3DFøme
(
hdc
,
i
*
WIDTH_BOX
+
off£tx
,
j
*
HEIGHT_BOX
+
HEIGHT_FACE
,

295 
WIDTH_BOX
,
HEIGHT_BOX
);

297 
	`DøwDIB
(
hdc
, 
i
*
WIDTH_BOX
+
off£tx
+1, 
j
*
HEIGHT_BOX
+1+
HEIGHT_FACE
,

298 &
image_möebomb
);

299 
bom
[
i
][
j
].
bombout
 = 
TRUE
;

301 i‡(!
bom
[
i
][
j
].
Êag
 && bom[i][j].
hô
){

302 
	`C™˚l3DFøme
(
hdc
,
i
*
WIDTH_BOX
+
off£tx
,
j
*
HEIGHT_BOX
+
HEIGHT_FACE
,

303 
WIDTH_BOX
,
HEIGHT_BOX
);

305 
	`DøwDIB
(
hdc
, 
i
*
WIDTH_BOX
+
off£tx
+1, 
j
*
HEIGHT_BOX
+1+
HEIGHT_FACE
,

306 &
image_möehôÁl£
);

307 
bom
[
i
][
j
].
îr‹
 = 
TRUE
;

313 
	`DøwDIB
(
hdc
, 
x_Á˚
, 0, &
image_möeÁ˚lo°
);

314 
Êag_bombout
 = 1;

315 
bTimî
 = 
FALSE
;

316 
	`Rñó£DC
(
hWnd
, 
hdc
);

317 
	}
}

319 
	$Föished
(
HWND
 
hWnd
)

321 
i
,
j
;

322 
HDC
 
hdc
;

323 
RECT
 
bombnumbî
;

324 
MAINWINCREATE
 
Cª©eInfo
;

326 
hdc
 = 
	`GëDC
(
hWnd
);

328 
i
 = 0; i < 
sg_boxnumx
; i++) {

329 
j
 = 0; j < 
sg_boxnumy
; j++) {

330 i‡(
bom
[
i
][
j
].
Êag
 && !bom[i][j].
hô
) {

332 
	`DøwDIB
(
hdc
, 
i
*
WIDTH_BOX
+
off£tx
+3, 
j
*
HEIGHT_BOX
+3+
HEIGHT_FACE
,

333 &
image_möeÊag
);

334 
bom
[
i
][
j
].
hô
 = 
TRUE
;

339 
	`DøwDIB
(
hdc
, 
x_Á˚
+1, 1, &
image_möed⁄e
);

340 
Êag_föished
 = 1;

341 
bTimî
 = 
FALSE
;

342 
	`Rñó£DC
(
hWnd
, 
hdc
);

344 
À·bombnum
 = 0;

346 
	`SëRe˘
 (&
bombnumbî
, 
x_bomnum
, 0,

347 
x_bomnum
 + 
WIDTH_BOMNUM
, 
HEIGHT_BOMNUM
);

348 
	`InvÆid©eRe˘
 (
hWnd
, &
bombnumbî
, 
FALSE
);

350 i‡(
£c⁄d
 < 
sc‹e
[
Êag_size
].
highsc‹e
){

351 
	`InôC⁄gøtuœti⁄Cª©eInfo
(
hWnd
, &
Cª©eInfo
);

352 
hC⁄gøtuœã
 = 
	`Cª©eMaöWödow
 (&
Cª©eInfo
);

354 
	}
}

357 
HMENU
 
	$¸óãpmíuabout
()

359 
HMENU
 
hmnu
;

360 
MENUITEMINFO
 
mii
;

361 
	`mem£t
 (&
mii
, 0, (
MENUITEMINFO
));

362 
mii
.
ty≥
 = 
MFT_STRING
;

363 
mii
.
id
 = 0;

364 
mii
.
ty≥d©a
 = (
DWORD
)"About";

365 
hmnu
 = 
	`Cª©eP›upMíu
 (&
mii
);

367 
	`mem£t
 (&
mii
, 0, (
MENUITEMINFO
));

368 
mii
.
ty≥
 = 
MFT_STRING
 ;

369 
mii
.
°©e
 = 0;

370 
mii
.
id
 = 
ID_ABOUT
;

371 
mii
.
ty≥d©a
 = (
DWORD
)"About Bomb Game";

372 
	`In£πMíuIãm
(
hmnu
, 3, 
TRUE
, &
mii
);

374  
hmnu
;

375 
	}
}

377 
HMENU
 
	$¸óãpmíu°¨t
()

379 
HMENU
 
hmnu
;

380 
MENUITEMINFO
 
mii
;

381 
	`mem£t
 (&
mii
, 0, (
MENUITEMINFO
));

382 
mii
.
ty≥
 = 
MFT_STRING
;

383 
mii
.
id
 = 0;

384 
mii
.
ty≥d©a
 = (
DWORD
)"Start";

385 
hmnu
 = 
	`Cª©eP›upMíu
 (&
mii
);

387 
	`mem£t
 (&
mii
, 0, (
MENUITEMINFO
));

388 
mii
.
ty≥
 = 
MFT_STRING
 ;

389 
mii
.
°©e
 = 0;

390 
mii
.
id
 = 
ID_NEW
;

391 
mii
.
ty≥d©a
 = (
DWORD
)"New Game";

392 
	`In£πMíuIãm
(
hmnu
, 0, 
TRUE
, &
mii
);

394 
mii
.
ty≥
 = 
MFT_STRING
 ;

395 
mii
.
°©e
 = 0;

396 
mii
.
id
 = 
ID_HIGHSCORE
;

397 
mii
.
ty≥d©a
 = (
DWORD
)"High Score";

398 
	`In£πMíuIãm
(
hmnu
, 1, 
TRUE
, &
mii
);

400 
mii
.
ty≥
 = 
MFT_STRING
 ;

401 
mii
.
°©e
 = 0;

402 
mii
.
id
 = 
ID_CLOSE
;

403 
mii
.
ty≥d©a
 = (
DWORD
)"Quit Game";

404 
	`In£πMíuIãm
(
hmnu
, 2, 
TRUE
, &
mii
);

406  
hmnu
;

407 
	}
}

409 
HMENU
 
	$¸óãpmíuÀvñ
()

411 
HMENU
 
hmnu
;

412 
MENUITEMINFO
 
mii
;

413 
	`mem£t
 (&
mii
, 0, (
MENUITEMINFO
));

414 
mii
.
ty≥
 = 
MFT_STRING
;

415 
mii
.
id
 = 0;

416 
mii
.
ty≥d©a
 = (
DWORD
)"Level";

417 
hmnu
 = 
	`Cª©eP›upMíu
 (&
mii
);

419 
mii
.
ty≥
 = 
MFT_STRING
 ;

420 
mii
.
°©e
 = 0;

421 
mii
.
id
 = 
ID_LARGE
;

422 
mii
.
ty≥d©a
 = (
DWORD
)"Large";

423 
	`In£πMíuIãm
(
hmnu
, 0, 
TRUE
, &
mii
);

425 
mii
.
ty≥
 = 
MFT_STRING
 ;

426 
mii
.
°©e
 = 0;

427 
mii
.
id
 = 
ID_MIDDLE
;

428 
mii
.
ty≥d©a
 = (
DWORD
)"Middle";

429 
	`In£πMíuIãm
(
hmnu
, 1, 
TRUE
, &
mii
);

431 
mii
.
ty≥
 = 
MFT_STRING
 ;

432 
mii
.
°©e
 = 0;

433 
mii
.
id
 = 
ID_SMALL
;

434 
mii
.
ty≥d©a
 = (
DWORD
)"Small";

435 
	`In£πMíuIãm
(
hmnu
, 2, 
TRUE
, &
mii
);

437  
hmnu
;

438 
	}
}

440 
HMENU
 
	$¸óãmíu1
()

442 
HMENU
 
hmnu
;

443 
MENUITEMINFO
 
mii
;

445 
hmnu
 = 
	`Cª©eMíu
();

447 
	`mem£t
 (&
mii
, 0, (
MENUITEMINFO
));

448 
mii
.
ty≥
 = 
MFT_STRING
;

449 
mii
.
id
 = 100;

450 
mii
.
ty≥d©a
 = (
DWORD
)"Start";

451 
mii
.
hsubmíu
 = 
	`¸óãpmíu°¨t
();

453 
	`In£πMíuIãm
(
hmnu
, 0, 
TRUE
, &
mii
);

455 
mii
.
ty≥
 = 
MFT_STRING
;

456 
mii
.
id
 = 110;

457 
mii
.
ty≥d©a
 = (
DWORD
)"Level";

458 
mii
.
hsubmíu
 = 
	`¸óãpmíuÀvñ
();

459 
	`In£πMíuIãm
(
hmnu
, 1, 
TRUE
, &
mii
);

461 
mii
.
ty≥
 = 
MFT_STRING
;

462 
mii
.
id
 = 120;

463 
mii
.
ty≥d©a
 = (
DWORD
)"About";

464 
mii
.
hsubmíu
 = 
	`¸óãpmíuabout
();

465 
	`In£πMíuIãm
(
hmnu
, 2, 
TRUE
, &
mii
);

467  
hmnu
;

468 
	}
}

471 
	$BŸhBuâ⁄DownProc
(
HWND
 
hWnd
,
adrx
,
adry
)

473 
ã°_›í
 = 0;

474 
i
 = 1;

475 
adrx1
 = 0, 
adry1
 = 0;

476 
Êag_›íed
 = 1;

478 i‡(!
bom
[
adrx
][
adry
].
ã°
)

480 i‡(!
bom
[
adrx
][
adry
].
vÆue
)

482 i‡(
bom
[
adrx
][
adry
].
hô
)

484 
i
 <= 8)

486 
i
)

489 
adrx1
 = 
adrx
-1;

490 
adry1
 = 
adry
;

494 
adrx1
 = 
adrx
-1;

495 
adry1
 = 
adry
-1;

499 
adrx1
 = 
adrx
-1;

500 
adry1
 = 
adry
+1;

504 
adrx1
 = 
adrx
;

505 
adry1
 = 
adry
-1;

509 
adrx1
 = 
adrx
;

510 
adry1
 = 
adry
+1;

514 
adrx1
 = 
adrx
+1;

515 
adry1
 = 
adry
;

519 
adrx1
 = 
adrx
+1;

520 
adry1
 = 
adry
+1;

524 
adrx1
 = 
adrx
+1;

525 
adry1
 = 
adry
-1;

529 i‡(
adrx1
>=0 && 
adry1
>=0 &&ádrx1<
sg_boxnumx
 &&ádry1<
sg_boxnumy


530 && 
bom
[
adrx1
][
adry1
].
hô
)

531 
ã°_›í
++;

533 if(
adrx
>=0 && 
adry1
>=0 && 
adrx1
<
sg_boxnumx
 &&ádry1<
sg_boxnumy


534 && !
bom
[
adrx1
][
adry1
].
ã°
)

535 
Êag_›íed
 = 0;

536 
i
++;

538 i‡((
ã°_›í
 =
bom
[
adrx
][
adry
].
vÆue
Ë&& !
Êag_›íed
)

540 i‡(!
	`O≥n
 (
hWnd
, 
adrx
, 
adry
))

541 
	`BombOut
 (
hWnd
);

542 i‡(
ôime
 =(
sg_boxnumx
*
sg_boxnumy
-
bombnum
))

543 
	`Föished
(
hWnd
);

547 
	}
}

549 
	$DøwDigô
(
HDC
 
hdc
, * 
buf„r
, 
CLOCK
)

551 
x
;

553 i‡(
CLOCK
)

554 
x
 = 
x_˛ock
;

556 
x
 = 
x_bomnum
;

558 
	`SëBkMode
(
hdc
, 
OPAQUE
);

559 
	`SëBkCﬁ‹
(
hdc
, 
LTGRAY
);

560 
	`TextOut
(
hdc
, 
x
, 0, 
buf„r
, -1);

562 
	}
}

564 
LRESULT
 
	$Te°MyWöProc
(
HWND
 
hWnd
, 
UINT
 
mesßge
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
)

566 
HDC
 
hdc
;

567 
bomn
[30], 
£c⁄ds
[30];

568 
i
, 
j
;

569 
øn1
, 
øn2
;

570 
RECT
 
bombªgi⁄
, 
Á˚
, 
⁄îe˘
, 
bombnumbî
, 
˛ock
;

571 
RECT
 
wöposôi⁄
;

572 
MAINWINCREATE
 
Cª©eInfo
;

574 
PAINTSTRUCT
 
ps
;

575 
mesßge
) {

577 
WM_CREATE
:

579 
FILE
* 
pHighsc‹e
;

580 
buf„r
[256];

581 if–
	`LﬂdBôm≠
(&
bmpbom
,"res/lei.bmp")<0)

582 
	`Ârötf
(
°dîr
,"bitmapÉrror");

584 
fVÆidbom
 = 
TRUE
;

586 if–
	`LﬂdBôm≠
(&
bmpÁ˚
,"res/face1.bmp")<0)

587 
	`Ârötf
(
°dîr
,"bitmapÉrror");

589 
fVÆidÁ˚
 = 
TRUE
;

591 if–
	`LﬂdBôm≠
(&
bôm≠1
,"res/face.bmp")<0)

592 
	`Ârötf
(
°dîr
,"bitmapÉrror");

594 
fVÆid1
 = 
TRUE
;

596 if–
	`LﬂdBôm≠
(&
bmpÊag
,"res/flag.bmp")<0)

597 
	`Ârötf
(
°dîr
,"bitmapÉrror");

599 
fVÆidÊag
 = 
TRUE
;

601 if–
	`LﬂdBôm≠
(&
bmpföÆÁ˚
,"res/finished.bmp")<0)

602 
	`Ârötf
(
°dîr
,"bitmapÉrror");

604 
fVÆidföÆÁ˚
 = 
TRUE
;

606 if–
	`LﬂdBôm≠
(&
bmphôÁl£
,"res/hitfalse.bmp")<0)

607 
	`Ârötf
(
°dîr
,"bitmapÉrror");

609 
fVÆidhôÁl£
 = 
TRUE
;

611 
i
 = 0; i < 10; i++){

612 
	`•rötf
(
buf„r
, "ªs/%d.bmp", 
i
);

613 
	`LﬂdBôm≠
(
sg_bmpDigô
 + 
i
, 
buf„r
);

616 i‡((
pHighsc‹e
 = 
	`f›í
("res/.highscore.bomb","r"))){

617 
i
 = 0; i < 3; i++)

618 
	`fsˇnf
(
pHighsc‹e
, "%d, %s",

619 &
sc‹e
[
i
].
highsc‹e
, sc‹e[i].
«me
);

620 
	`f˛o£
(
pHighsc‹e
);

623 
i
 = 0; i < 3; i++){

624 
sc‹e
[
i
].
highsc‹e
 = 999;

625 
	`°r˝y
(
sc‹e
[
i
].
«me
, "unknown");

628 
	`SëTimî
(
hWnd
, 
ID_CLOCK
, 
FREQ_CLOCK
, 
NULL
);

630 
	`Po°Mesßge
(
hWnd
,
WM_COMMAND
,
ID_NEW
,0);

633 
WM_COMMAND
:

634 i‡(
	`LOWORD
(
wP¨am
Ë=
ID_ABOUT
)

636 
	`InôAbHo°edCª©eInfo
(
hWnd
,&
Cª©eInfo
);

637 
	`Cª©eMaöWödow
(&
Cª©eInfo
);

640 i‡(
	`LOWORD
(
wP¨am
Ë=
ID_CLOSE
)

642 
	`Po°Mesßge
(
hWnd
, 
WM_CLOSE
, 0, 0);

645 i‡(
	`LOWORD
(
wP¨am
Ë=
ID_HIGHSCORE
)

647 
	`InôHighSc‹eCª©eInfo
(
hWnd
,&
Cª©eInfo
);

648 
hHighsc‹e
 = 
	`Cª©eMaöWödow
(&
Cª©eInfo
);

649 
	`ShowWödow
(
hHighsc‹e
,
SW_SHOW
);

652 i‡(
	`LOWORD
(
wP¨am
Ë=
ID_LARGE
)

654 
bombnum
 = 99;

655 
sg_boxnumx
 = 30;

656 
sg_boxnumy
 = 18;

657 
wöwidth
 = 
WIDTH_LARGEWIN
;

658 
Êag_size
 = 2;

659 
	`GëWödowRe˘
(
hWnd
, &
wöposôi⁄
);

660 
	`MoveWödow
(
hWnd
, 
wöposôi⁄
.
À·
, wöposôi⁄.
t›
,

661 
WIDTH_LARGEWIN
, 
HEIGHT_LARGEWIN
, 
FALSE
);

662 
	`Po°Mesßge
(
hWnd
, 
WM_COMMAND
, 
ID_NEW
, 0);

664 i‡(
	`LOWORD
(
wP¨am
Ë=
ID_MIDDLE
)

666 
bombnum
 = 40;

667 
sg_boxnumx
 = 16;

668 
sg_boxnumy
 = 16;

669 
wöwidth
 = 
WIDTH_MIDDLEWIN
;

670 
Êag_size
 = 1;

671 
	`GëWödowRe˘
(
hWnd
, &
wöposôi⁄
);

672 
	`MoveWödow
(
hWnd
, 
wöposôi⁄
.
À·
, wöposôi⁄.
t›
,

673 
WIDTH_MIDDLEWIN
, 
HEIGHT_MIDDLEWIN
, 
FALSE
);

674 
	`Po°Mesßge
(
hWnd
, 
WM_COMMAND
, 
ID_NEW
, 0);

677 i‡(
	`LOWORD
(
wP¨am
Ë=
ID_SMALL
)

679 
bombnum
 = 10;

680 
sg_boxnumx
 = 8;

681 
sg_boxnumy
 = 8;

682 
wöwidth
 = 
WIDTH_SMALLWIN
;

683 
Êag_size
 = 0;

684 
	`GëWödowRe˘
(
hWnd
, &
wöposôi⁄
);

685 
	`MoveWödow
(
hWnd
, 
wöposôi⁄
.
À·
, wöposôi⁄.
t›
,

686 
WIDTH_SMALLWIN
, 
HEIGHT_SMALLWIN
, 
FALSE
);

687 
	`Po°Mesßge
(
hWnd
, 
WM_COMMAND
, 
ID_NEW
, 0);

690 i‡(
	`LOWORD
(
wP¨am
Ë=
ID_NEW
)

692 
bTimî
 = 
FALSE
;

693 
£c⁄d
 = 0;

694 
ôime
 = 0;

695 
À·bombnum
 = 
bombnum
;

696 
Êag_bombout
 = 0;

697 
Êag_föished
 = 0;

698 
x_bomnum
 = 
wöwidth
 / 6;

699 
x_Á˚
 = (
wöwidth
*2) / 5;

700 
x_˛ock
 = (
wöwidth
*3) / 5;

701 
off£tx
 = (
wöwidth
 - 
WIDTH_BOX
*
sg_boxnumx
)/2-2;

702 
	`SëRe˘
 (&
˛ock
, 
x_˛ock
, 0,

703 
x_˛ock
 + 
WIDTH_CLOCK
, 
HEIGHT_CLOCK
);

705 
	`SëRe˘
 (&
Á˚
, 
x_Á˚
, 0,

706 
x_Á˚
 + 
WIDTH_FACE
, 
HEIGHT_FACE
);

708 
	`SëRe˘
 (&
bombªgi⁄
, 
off£tx
, 
HEIGHT_FACE
,

709 
WIDTH_BOX
*
sg_boxnumx
+
off£tx
,

710 
HEIGHT_BOX
*
sg_boxnumy
+
HEIGHT_FACE
);

712 
	`SëRe˘
 (&
bombnumbî
, 
x_bomnum
, 0,

713 
x_bomnum
 + 
WIDTH_BOMNUM
, 
HEIGHT_BOMNUM
);

717 
i
 = 0; i < 
sg_boxnumx
; i++)

718 
j
 = 0; j < 
sg_boxnumy
; j++)

719 { 
bom
[
i
][
j
].
Êag
 = 0;

720 
bom
[
i
][
j
].
hô
 = 
FALSE
;

721 
bom
[
i
][
j
].
vÆue
 = 0;

722 
bom
[
i
][
j
].
ã°
 = 
FALSE
;

723 
bom
[
i
][
j
].
bombout
 = 
FALSE
;

724 
bom
[
i
][
j
].
îr‹
 = 
FALSE
;

726 
i
 = 0; i < (
sg_boxnumx
*
sg_boxnumy
); i++)

727 
NoAdr
[
i
].
NY
 = 
FALSE
;

729 
	`§™dom
–
	`time
(
NULL
));

730 
i
 = 0;

731  
i
 < 
bombnum
 )

733 
øn1
 = 
	`øndom
()%
sg_boxnumx
;

734 
øn2
 = 
	`øndom
()%
sg_boxnumy
;

735 if(!
bom
[
øn1
][
øn2
].
Êag
)

737 
bom
[
øn1
][
øn2
].
Êag
 = 1;

738 
i
++;

740 #ifde‡
__πems__


741 
i
++;

745 
i
 = 0; i < 
sg_boxnumx
; i++)

746 
j
 = 0; j < 
sg_boxnumy
; j++)

748 i‡(!
bom
[
i
][
j
].
Êag
) {

749 if(
i
-1>=0&&
j
-1>=0&&
bom
[i-1][j-1].
Êag
)

750 
bom
[
i
][
j
].
vÆue
++;

752 if(
i
-1>=0&&
bom
[i-1][
j
].
Êag
)

753 
bom
[
i
][
j
].
vÆue
++;

755 if(
i
-1>=0&&
j
+1<
sg_boxnumy
&&
bom
[i-1][j+1].
Êag
)

756 
bom
[
i
][
j
].
vÆue
++;

758 if(
j
-1>=0&&
bom
[
i
][j-1].
Êag
)

759 
bom
[
i
][
j
].
vÆue
++;

761 if(
j
+1<
sg_boxnumy
&&
bom
[
i
][j+1].
Êag
)

762 
bom
[
i
][
j
].
vÆue
++;

764 if(
i
+1<
sg_boxnumx
&&
j
+1<
sg_boxnumy
&&
bom
[i+1][j+1].
Êag
)

765 
bom
[
i
][
j
].
vÆue
++;

767 if(
i
+1<
sg_boxnumx
&&
bom
[i+1][
j
].
Êag
)

768 
bom
[
i
][
j
].
vÆue
++;

770 if(
i
+1<
sg_boxnumx
&&
j
-1>=0&&
bom
[i+1][j-1].
Êag
)

771 
bom
[
i
][
j
].
vÆue
++;

774 
	`InvÆid©eRe˘
 (
hWnd
, 
NULL
, 
TRUE
);

778 
WM_TIMER
:

779 i‡(
wP¨am
 =
ID_CLOCK
)

780 i‡(
bTimî
){

781 i‡(
£c⁄d
 < 1000){

782 
£c⁄d
++;

783 
	`InvÆid©eRe˘
(
hWnd
, &
˛ock
, 
FALSE
);

788 
WM_LBUTTONDOWN
:

790 
ﬁdx
 = 
	`LOWORD
 (
lP¨am
);

791 
ﬁdy
 = 
	`HIWORD
 (
lP¨am
);

793 
adrx
 = (
ﬁdx
-
off£tx
)/
WIDTH_BOX
;

794 
adry
 = (
ﬁdy
-
HEIGHT_FACE
)/
HEIGHT_BOX
;

796 i‡(
hC⁄gøtuœã
 || 
hHighsc‹e
)

799 i‡(!
	`PtInRe˘2
 (&
bombªgi⁄
, 
ﬁdx
, 
ﬁdy
)) {

800 i‡(
	`PtInRe˘2
 (&
Á˚
, 
ﬁdx
, 
ﬁdy
)){

801 
	`Po°Mesßge
 (
hWnd
, 
WM_COMMAND
, 
ID_NEW
, 0);

807 i‡(
Êag_bombout
)

809 i‡(
Êag_föished
)

811 i‡(!
bTimî
)

812 
bTimî
 = 
TRUE
;

814 i‡(
bom
[
adrx
][
adry
].
hô
)

818 i‡(
	`GëShi·KeySètus
() & 0x00000200) {

820 if(
mwCuºítBuâ⁄s
 & 
MWBUTTON_R
) {

821 
	`BŸhBuâ⁄DownProc
(
hWnd
,
adrx
,
adry
);

826 i‡(
bom
[
adrx
][
adry
].
ã°
)

829 i‡(
bom
[
adrx
][
adry
].
Êag
) {

830 
	`BombOut
(
hWnd
);

833 i‡(
bom
[
adrx
][
adry
].
vÆue
 != 0)

835 
NoAdr
[
ôime
].
x
 = 
adrx
;

836 
NoAdr
[
ôime
].
y
 = 
adry
;

837 
NoAdr
[
ôime
].
NY
 = 
TRUE
;

838 
ôime
++;

839 
bom
[
adrx
][
adry
].
ã°
 = 
TRUE
;

841 
	`SëRe˘
 (&
⁄îe˘
, 
adrx
*
WIDTH_BOX
+
off£tx
,

842 
adry
*
HEIGHT_BOX
+
HEIGHT_FACE
,

843 (
adrx
+1)*
WIDTH_BOX
+
off£tx
,

844 (
adry
+1)*
HEIGHT_BOX
+
HEIGHT_FACE
);

845 
	`InvÆid©eRe˘
 (
hWnd
, &
⁄îe˘
, 
FALSE
);

848 
hdc
 = 
	`GëDC
(
hWnd
);

849 
	`SórchGround
 (
hdc
, 
adrx
, 
adry
);

850 
	`Rñó£DC
(
hWnd
, 
hdc
);

853 i‡(
ôime
 =(
sg_boxnumx
*
sg_boxnumy
 - 
bombnum
))

854 
	`Föished
(
hWnd
);

858 
WM_MBUTTONDOWN
:

859 
ﬁdx
 = 
	`LOWORD
 (
lP¨am
);

860 
ﬁdy
 = 
	`HIWORD
 (
lP¨am
);

861 
adrx
 = (
ﬁdx
-
off£tx
)/
WIDTH_BOX
;

862 
adry
 = (
ﬁdy
-
HEIGHT_FACE
)/
HEIGHT_BOX
;

864 i‡(!
	`PtInRe˘2
 (&
bombªgi⁄
, 
ﬁdx
, 
ﬁdy
))

866 i‡(
Êag_bombout
)

868 i‡(
Êag_föished
)

871 i‡(!
bTimî
)

872 
bTimî
 = 
TRUE
;

876 
	`BŸhBuâ⁄DownProc
(
hWnd
,
adrx
,
adry
);

879 
WM_RBUTTONDOWN
:

881 
	`SëC≠tuª
 (
hWnd
);

883 
ﬁdx
 = 
	`LOWORD
 (
lP¨am
);

884 
ﬁdy
 = 
	`HIWORD
 (
lP¨am
);

885 
adrx
 = (
ﬁdx
-
off£tx
)/
WIDTH_BOX
;

886 
adry
 = (
ﬁdy
-
HEIGHT_FACE
)/
HEIGHT_BOX
;

888 i‡(!
	`PtInRe˘2
 (&
bombªgi⁄
, 
ﬁdx
, 
ﬁdy
))

890 i‡(
Êag_bombout
)

892 i‡(
Êag_föished
)

895 i‡(!
bTimî
)

896 
bTimî
 = 
TRUE
;

901 i‡(
	`GëShi·KeySètus
() & 0x00000100){

903 if(
mwCuºítBuâ⁄s
 & 
MWBUTTON_L
) {

904 
	`BŸhBuâ⁄DownProc
(
hWnd
,
adrx
,
adry
);

909 i‡(
bom
[
adrx
][
adry
].
ã°
)

911 i‡(!
bom
[
adrx
][
adry
].
hô
 )

913 
bom
[
adrx
][
adry
].
hô
 = 
TRUE
;

914 
À·bombnum
--;

917 { 
bom
[
adrx
][
adry
].
hô
 = 
FALSE
;

918 
À·bombnum
++;

920 
	`SëRe˘
 (&
⁄îe˘
, 
adrx
*
WIDTH_BOX
+
off£tx
,

921 
adry
*
HEIGHT_BOX
+
HEIGHT_FACE
,

922 (
adrx
+1)*
WIDTH_BOX
+
off£tx
,

923 (
adry
+1)*
HEIGHT_BOX
+
HEIGHT_FACE
);

924 
	`InvÆid©eRe˘
 (
hWnd
, &
⁄îe˘
, 
FALSE
);

925 
	`InvÆid©eRe˘
 (
hWnd
, &
bombnumbî
, 
FALSE
);

928 
WM_PAINT
:

929 
hdc
 = 
	`BegöPaöt
 (
hWnd
, &
ps
);

931 
	`•rötf
(
£c⁄ds
, "%03d", 
£c⁄d
);

932 
	`DøwDigô
(
hdc
, 
£c⁄ds
, 
TRUE
);

934 i‡(
À·bombnum
 >= 0){

935 
	`•rötf
(
bomn
,"%02d",
À·bombnum
);

936 
	`DøwDigô
(
hdc
, 
bomn
, 
FALSE
);

939 i‡(
Êag_föished
)

940 
	`DøwDIB
(
hdc
, 
x_Á˚
+1, 1, &
image_möed⁄e
);

942 
	`DøwMyBôm≠
 (
hdc
, 
fVÆidföÆÁ˚
?&
bmpföÆÁ˚
:
NULL
,

945 i‡(
Êag_bombout
)

946 
	`DøwDIB
(
hdc
, 
x_Á˚
, 0, &
image_möeÁ˚lo°
);

948 
	`DøwDIB
(
hdc
, 
x_Á˚
, 0, &
image_möeÁ˚
);

950 
i
 = 0; i < 
sg_boxnumx
; i++)

951 
j
 = 0; j < 
sg_boxnumy
; j++)

953 i‡(!
bom
[
i
][
j
].
ã°
 && !bom[i][j].
bombout
){

954 
	`SëTextCﬁ‹
 (
hdc
,
BLACK
);

955 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
NULL_BRUSH
));

956 
	`Døw3DUpFøme
(
hdc
,

957 
i
*
WIDTH_BOX
+
off£tx
,

958 
j
*
HEIGHT_BOX
+
HEIGHT_FACE
,

959 (
i
+1)*
WIDTH_BOX
+
off£tx
,

960 (
j
+1)*
HEIGHT_BOX
+
HEIGHT_FACE
,

961 
LTGRAY
);

965 i‡–
bom
[
i
][
j
].
hô
)

966 
	`DøwDIB
(
hdc
, 
i
*
WIDTH_BOX
+
off£tx
+3, 
j
*
HEIGHT_BOX
+3+
HEIGHT_FACE
,

967 &
image_möeÊag
);

969 i‡(
bom
[
i
][
j
].
îr‹
) {

970 
	`C™˚l3DFøme
(
hdc
,
i
*
WIDTH_BOX
+
off£tx
,

971 
j
*
HEIGHT_BOX
+
HEIGHT_FACE
,

972 
WIDTH_BOX
,
HEIGHT_BOX
);

974 
	`DøwDIB
(
hdc
, 
i
*
WIDTH_BOX
+
off£tx
+1, 
j
*
HEIGHT_BOX
+1+
HEIGHT_FACE
,

975 &
image_möehôÁl£
);

978 i‡(
bom
[
i
][
j
].
bombout
) {

979 
	`C™˚l3DFøme
(
hdc
,
i
*
WIDTH_BOX
+
off£tx
,

980 
j
*
HEIGHT_BOX
+
HEIGHT_FACE
,

981 
WIDTH_BOX
,
HEIGHT_BOX
);

983 
	`DøwDIB
(
hdc
, 
i
*
WIDTH_BOX
+
off£tx
+1, 
j
*
HEIGHT_BOX
+1+
HEIGHT_FACE
,

984 &
image_möebomb
);

988  
i
 = 0; i < 
ôime
; i++ )

990 
	`C™˚l3DFøme
(
hdc
,(
NoAdr
[
i
].
x
)*
WIDTH_BOX
+
off£tx
,

991 (
NoAdr
[
i
].
y
)*
HEIGHT_BOX
+
HEIGHT_FACE
,

992 
WIDTH_BOX
, 
HEIGHT_BOX
);

993 if(
NoAdr
[
i
].
NY
)

994 
	`TextVÆue
(
hdc
,(
NoAdr
[
i
].
x
)*
WIDTH_BOX
+
off£tx
,

995 (
NoAdr
[
i
].
y
)*
HEIGHT_BOX
+
HEIGHT_FACE
,

996 
bom
[
NoAdr
[
i
].
x
][NoAdr[i].
y
].
vÆue
);

998 
	`EndPaöt
 (
hWnd
, &
ps
);

1001 
WM_CLOSE
:

1002 
	`KûlTimî
(
hWnd
, 
ID_CLOCK
);

1003 
	`De°royWödow
 (
hWnd
);

1004 
	`Po°QuôMesßge
 (0);

1007  
	`DefWödowProc
(
hWnd
, 
mesßge
, 
wP¨am
, 
lP¨am
);

1010 
	`InôMyWöCª©eInfo
(
PMAINWINCREATE
 
pCª©eInfo
)

1012 
pCª©eInfo
->
dwStyÀ
 = 
WS_CAPTION
 | 
WS_BORDER
 | 
WS_SYSMENU
 | 
WS_VISIBLE
;

1013 
pCª©eInfo
->
•C≠ti⁄
="Microwindows Minesweeper";

1014 
pCª©eInfo
->
hMíu
 = 0;

1015 
pCª©eInfo
->
hCurs‹
 = 0;

1016 
pCª©eInfo
->
hIc⁄
 = 0;

1017 
pCª©eInfo
->
MaöWödowProc
 = 
Te°MyWöProc
;

1018 
pCª©eInfo
->
lx
 = 0;

1019 
pCª©eInfo
->
ty
 = 0;

1020 
pCª©eInfo
->
rx
 = 
wöwidth
;

1021 
pCª©eInfo
->
by
 = 
wöheight
;

1022 
pCª©eInfo
->
iBkCﬁ‹
 = 
LTGRAY
;

1023 
pCª©eInfo
->
dwAddD©a
 = 0;

1024 
pCª©eInfo
->
hHo°ög
 = 
HWND_DESKTOP
;

1027 * 
	`Te°MyWödow
(* 
d©a
)

1029 
MSG
 
Msg
;

1030 
MAINWINCREATE
 
Cª©eInfo
;

1031 
HWND
 
hMaöWnd
;

1033 
	`InôMyWöCª©eInfo
(&
Cª©eInfo
);

1035 
hMaöWnd
 = 
	`Cª©eMaöWödow
(&
Cª©eInfo
);

1037 i‡(
hMaöWnd
 == 0)

1038  
NULL
;

1040 
	`ShowWödow
(
hMaöWnd
,
SW_SHOWNORMAL
);

1041  
	`GëMesßge
(&
Msg
, 
NULL
, 0, 0) ) {

1042 
	`Tøn¶©eMesßge
 (&
Msg
);

1043 
	`Di•©chMesßge
(&
Msg
);

1046  
NULL
;

1049 
WINAPI


1050 
	`WöMaö
(
HINSTANCE
 
hIn°™˚
, HINSTANCE 
hPªvIn°™˚
, 
LPSTR
 
ÕCmdLöe
,

1051 
nShowCmd
)

1053 
	`Te°MyWödow
 (
NULL
);

1058 
LRESULT
 
	`AbHo°edWöProc
 (
HWND
 
hWnd
, 
UINT
 
mesßge
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
)

1060 
PAINTSTRUCT
 
ps
;

1062 
mesßge
) {

1063 
WM_CREATE
:

1066 
WM_PAINT
:

1068 
HDC
 
hdc
;

1070 
hdc
 = 
	`BegöPaöt
 (
hWnd
, &
ps
);

1071 
	`SëBkCﬁ‹
(
hdc
,
LTGRAY
);

1072 
	`TextOut
 (
hdc
, 10, 25, "Minesweeper Ver 0.9 (1999/08/27)", -1);

1073 
	`TextOut
 (
hdc
, 10, 55,

1075 
	`TextOut
 (
hdc
, 10, 75,

1077 
	`EndPaöt
 (
hWnd
, &
ps
);

1081 
WM_CLOSE
:

1082 
	`De°royWödow
 (
hWnd
);

1086  
	`DefWödowProc
(
hWnd
, 
mesßge
, 
wP¨am
, 
lP¨am
);

1088 
	`InôAbHo°edCª©eInfo
 (
HWND
 
hHo°ög
, 
PMAINWINCREATE
 
pCª©eInfo
)

1090 
pCª©eInfo
->
dwStyÀ
 = 
WS_BORDER
 | 
WS_CAPTION
 | 
WS_VISIBLE
;

1091 
pCª©eInfo
->
•C≠ti⁄
 = "Theábout window" ;

1092 
pCª©eInfo
->
hMíu
 = 0;

1093 
pCª©eInfo
->
hCurs‹
 = 0;

1094 
pCª©eInfo
->
hIc⁄
 = 0;

1095 
pCª©eInfo
->
MaöWödowProc
 = 
AbHo°edWöProc
;

1096 
pCª©eInfo
->
lx
 = 100;

1097 
pCª©eInfo
->
ty
 = 200;

1098 
pCª©eInfo
->
rx
 = 540;

1099 
pCª©eInfo
->
by
 = 390;

1100 
pCª©eInfo
->
iBkCﬁ‹
 = 
LTGRAY
;

1101 
pCª©eInfo
->
dwAddD©a
 = 0;

1102 
pCª©eInfo
->
hHo°ög
 = hHosting;

1106 
	#IDC_RESET
 110

	)

1107 
LRESULT
 
	`HighSc‹eWöProc
 (
HWND
 
hWnd
, 
UINT
 
mesßge
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
)

1109 
PAINTSTRUCT
 
ps
;

1110 
HWND
 
hRESET
, 
hOK
;

1112 
mesßge
) {

1113 
WM_CREATE
:

1114 
hRESET
 = 
	`Cª©eWödowEx
 (0L, "button",

1116 
WS_CHILD
 | 
BS_PUSHBUTTON
 | 
WS_VISIBLE
,

1118 
hWnd
, (
HMENU
)
IDC_RESET
, 0, 0L);

1120 
hOK
 = 
	`Cª©eWödowEx
 (0L, "button",

1122 
WS_CHILD
 | 
BS_PUSHBUTTON
 | 
WS_VISIBLE
,

1124 
hWnd
, (
HMENU
)
IDOK
, 0, 0L);

1127 
WM_COMMAND
:

1129 
id
 = 
	`LOWORD
(
wP¨am
);

1130 
i
;

1132 i‡(
id
 =
IDC_RESET
 && 
	`HIWORD
(
wP¨am
Ë=
BN_CLICKED
) {

1133 
i
 = 0; i < 3; i++){

1134 
sc‹e
[
i
].
highsc‹e
 = 999;

1135 
	`°r˝y
(
sc‹e
[
i
].
«me
, "unknown");

1139 
FILE
* 
pHighsc‹e
;

1140 i‡((
pHighsc‹e
 = 
	`f›í
("res/.highscore.bomb", "w+"))){

1141 
i
 = 0; i < 3; i++)

1142 
	`Ârötf
(
pHighsc‹e
, "%d, %s\n",

1143 
sc‹e
[
i
].
highsc‹e
,sc‹e[i].
«me
);

1144 
	`f˛o£
(
pHighsc‹e
);

1147 
	`InvÆid©eRe˘
(
hWnd
, 
NULL
, 
TRUE
);

1149 i‡(
id
 =
IDOK
 && 
	`HIWORD
(
wP¨am
Ë=
BN_CLICKED
)

1150 
	`Po°Mesßge
(
hWnd
, 
WM_CLOSE
, 0, 0);

1154 
WM_PAINT
:

1156 
HDC
 
hdc
;

1157 
buf„r
[50];

1158 
i
;

1160 
hdc
 = 
	`BegöPaöt
 (
hWnd
, &
ps
);

1161 
	`SëBkCﬁ‹
(
hdc
,
LTGRAY
);

1162 
	`TextOut
(
hdc
, 130, 15, "”¢–€∞Ò", -1);

1163 
	`TextOut
(
hdc
, 15, 45, "SMALL" , -1);

1164 
	`TextOut
(
hdc
, 15, 75, "MIDDLE", -1 );

1165 
	`TextOut
(
hdc
, 15, 105, "LARGE", -1 );

1166 
i
 = 0; i < 3; i++){

1167 
	`•rötf
(
buf„r
, "%3d %s",

1168 
sc‹e
[
i
].
highsc‹e
, sc‹e[i].
«me
);

1169 
	`TextOut
(
hdc
, 150, 45+
i
*30, 
buf„r
, -1);

1171 
	`EndPaöt
 (
hWnd
, &
ps
);

1175 
WM_CLOSE
:

1176 
	`De°royWödow
 (
hRESET
);

1177 
	`De°royWödow
 (
hOK
);

1178 
	`De°royWödow
 (
hWnd
);

1179 
hHighsc‹e
 = 
HWND_DESKTOP
;

1183  
	`DefWödowProc
(
hWnd
, 
mesßge
, 
wP¨am
, 
lP¨am
);

1186 
	`InôHighSc‹eCª©eInfo
 (
HWND
 
hHo°ög
, 
PMAINWINCREATE
 
pCª©eInfo
)

1188 
pCª©eInfo
->
dwStyÀ
 = 
WS_BORDER
 | 
WS_CAPTION
;

1189 
pCª©eInfo
->
•C≠ti⁄
 = "High Score" ;

1190 
pCª©eInfo
->
hMíu
 = 0;

1191 
pCª©eInfo
->
hCurs‹
 = 0;

1192 
pCª©eInfo
->
hIc⁄
 = 0;

1193 
pCª©eInfo
->
MaöWödowProc
 = 
HighSc‹eWöProc
;

1194 
pCª©eInfo
->
lx
 = 100;

1195 
pCª©eInfo
->
ty
 = 200;

1196 
pCª©eInfo
->
rx
 = 470;

1197 
pCª©eInfo
->
by
 = 410;

1198 
pCª©eInfo
->
iBkCﬁ‹
 = 
LTGRAY
;

1199 
pCª©eInfo
->
dwAddD©a
 = 0;

1200 
pCª©eInfo
->
hHo°ög
 = hHosting;

1205 
	#IDC_CTRL_NAME
 100

	)

1207 
LRESULT
 
	`C⁄gøtuœti⁄WöProc
 (
HWND
 
hWnd
, 
UINT
 
mesßge
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
)

1209 
HWND
 
hProm±
, 
hName
, 
hOK
;

1211 
mesßge
) {

1212 
WM_CREATE
:

1214 
hProm±
 = 
	`Cª©eWödow
 ("static",

1216 
SS_SIMPLE
 | 
WS_VISIBLE
,

1217 
IDC_STATIC
,

1218 10, 10, 185, 24, 
hWnd
, 0);

1219 
hName
 = 
	`Cª©eWödow
 ("edit",

1220 
	`gëlogö
(),

1221 
WS_CHILD
 | 
WS_VISIBLE
 | 
WS_BORDER
,

1222 
IDC_CTRL_NAME
,

1223 10, 40, 175, 26, 
hWnd
, 0);

1225 
hOK
 = 
	`Cª©eWödow
 ("button",

1227 
WS_CHILD
 | 
BS_PUSHBUTTON
 | 
WS_VISIBLE
,

1229 
hWnd
, (
HMENU
)
IDOK
, 0, 0L);

1232 
WM_COMMAND
:

1234 
id
 = 
	`LOWORD
(
wP¨am
);

1236 i‡(
id
 =
IDOK
 && 
	`HIWORD
(
wP¨am
Ë=
BN_CLICKED
) {

1237 
sc‹e
[
Êag_size
].
highsc‹e
 = 
£c⁄d
;

1238 
	`SídMesßge
 (
hName
, 
WM_GETTEXT
,

1239 19, (
LPARAM
)
sc‹e
[
Êag_size
].
«me
);

1241 
FILE
* 
pHighsc‹e
;

1242 
i
;

1243 i‡((
pHighsc‹e
 = 
	`f›í
("res/.highscore.bomb", "w+"))){

1244 
i
 = 0; i < 3; i++)

1245 
	`Ârötf
(
pHighsc‹e
, "%d, %s\n",

1246 
sc‹e
[
i
].
highsc‹e
,sc‹e[i].
«me
);

1247 
	`f˛o£
(
pHighsc‹e
);

1250 
	`Po°Mesßge
 (
hWnd
, 
WM_CLOSE
, 0, 0);

1254 
WM_CLOSE
:

1255 
	`De°royWödow
 (
hProm±
);

1256 
	`De°royWödow
 (
hName
);

1257 
	`De°royWödow
 (
hOK
);

1258 
	`De°royWödow
 (
hWnd
);

1259 
hC⁄gøtuœã
 = 
HWND_DESKTOP
;

1263  
	`DefWödowProc
(
hWnd
, 
mesßge
, 
wP¨am
, 
lP¨am
);

1266 
	`InôC⁄gøtuœti⁄Cª©eInfo
 (
HWND
 
hHo°ög
, 
PMAINWINCREATE
 
pCª©eInfo
)

1268 
pCª©eInfo
->
dwStyÀ
 = 
WS_BORDER
 | 
WS_CAPTION
 | 
WS_VISIBLE
;

1269 
pCª©eInfo
->
•C≠ti⁄
 = "Congratulation" ;

1270 
pCª©eInfo
->
hMíu
 = 0;

1271 
pCª©eInfo
->
hCurs‹
 = 0;

1272 
pCª©eInfo
->
hIc⁄
 = 0;

1273 
pCª©eInfo
->
MaöWödowProc
 = 
C⁄gøtuœti⁄WöProc
;

1274 
pCª©eInfo
->
lx
 = 50;

1275 
pCª©eInfo
->
ty
 = 60;

1276 
pCª©eInfo
->
rx
 = 255;

1277 
pCª©eInfo
->
by
 = 200;

1278 
pCª©eInfo
->
iBkCﬁ‹
 = 
LTGRAY
;

1279 
pCª©eInfo
->
dwAddD©a
 = 0;

1280 
pCª©eInfo
->
hHo°ög
 = hHosting;

1283 
HWND


1284 
	`Cª©eMaöWödow
(
PMAINWINCREATE
 
pCª©eInfo
)

1286 
HWND
 
hwnd
;

1287 
RECT
 
rc
;

1288 
WNDCLASS
 
wc
;

1290 
wc
.
°yÀ
 = 
CS_DBLCLKS
 | 
CS_HREDRAW
 | 
CS_VREDRAW
;

1291 
wc
.
Õ‚WndProc
 = (
WNDPROC
)
pCª©eInfo
->
MaöWödowProc
;

1292 
wc
.
cbClsExåa
 = 0;

1293 
wc
.
cbWndExåa
 = 0;

1294 
wc
.
hIn°™˚
 = 0;

1295 
wc
.
hIc⁄
 = 
pCª©eInfo
->hIcon;

1296 
wc
.
hCurs‹
 = 
pCª©eInfo
->hCursor;

1297 
wc
.
hbrBackground
 = (
HBRUSH
)
	`Cª©eSﬁidBrush
(
pCª©eInfo
->
iBkCﬁ‹
);

1298 
wc
.
ÕszMíuName
 = 0;

1299 
wc
.
ÕszCœssName
 = 
pCª©eInfo
->
•C≠ti⁄
;

1300 
	`Regi°îCœss
(&
wc
);

1302 
	`SëRe˘
(&
rc
, 
pCª©eInfo
->
lx
,ÖCª©eInfo->
ty
,ÖCª©eInfo->
rx
,

1303 
pCª©eInfo
->
by
);

1304 
	`Adju°WödowRe˘Ex
(&
rc
, 
pCª©eInfo
->
dwStyÀ
, 
FALSE
, 0L);

1306 
hwnd
 = 
	`Cª©eWödowEx
(0L, 
pCª©eInfo
->
•C≠ti⁄
,

1307 
pCª©eInfo
->
•C≠ti⁄
,

1308 
pCª©eInfo
->
dwStyÀ
,

1309 
rc
.
À·
,Ñc.
t›
,Ñc.
right
-rc.À·,Ñc.
bŸtom
-rc.top,

1310 
pCª©eInfo
->
hHo°ög
,

1311 (
HMENU
)0, (
HINSTANCE
)0,

1312 (
PVOID
)
pCª©eInfo
->
dwAddD©a
);

1313  
hwnd
;

1316 
BOOL


1317 
	`PtInRe˘2
(c⁄° 
RECT
 *
Õrc
, 
x
, 
y
)

1319 
POINT
 
p
;

1321 
p
.
x
 = x;

1322 
p
.
y
 = y;

1323  
	`PtInRe˘
(
Õrc
, 
p
);

1327 
	`Døw3DUpFøme
(
HDC
 
hDC
, 
l
, 
t
, 
r
, 
b
, 
fûlc
)

1329 
RECT
 
rc
;

1330 
HBRUSH
 
hbr
;

1332 
	`SëRe˘
(&
rc
, 
l
, 
t
, 
r
, 
b
);

1333 
	`Døw3dBox
(
hDC
, 
rc
.
À·
,Ñc.
t›
,

1334 
rc
.
right
-rc.
À·
,Ñc.
bŸtom
-rc.
t›
,

1335 
	`GëSysCﬁ‹
(
COLOR_3DLIGHT
),

1336 
	`GëSysCﬁ‹
(
COLOR_WINDOWFRAME
));

1337 
	`InÊ©eRe˘
(&
rc
, -1, -1);

1338 
	`Døw3dBox
(
hDC
, 
rc
.
À·
,Ñc.
t›
,

1339 
rc
.
right
-rc.
À·
,Ñc.
bŸtom
-rc.
t›
,

1340 
	`GëSysCﬁ‹
(
COLOR_BTNHIGHLIGHT
),

1341 
	`GëSysCﬁ‹
(
COLOR_BTNSHADOW
));

1342 
	`InÊ©eRe˘
(&
rc
, -1, -1);

1344 
hbr
 = 
	`Cª©eSﬁidBrush
(
LTGRAY
);

1345 
	`FûlRe˘
(
hDC
, &
rc
, 
hbr
);

1346 
	`DñëeObje˘
(
hbr
);

	@demos/mwin/mstretch.c

6 
	#MWINCLUDECOLORS


	)

7 
	~"wödows.h
"

8 
	~"devi˚.h
"

10 
MWIMAGEHDR
 
image_≥nguö
;

12 
PMWIMAGEHDR
 
	gimage
 = &
image_≥nguö
;

14 
	#APPCHILD
 "ã°2"

	)

17 
LRESULT
 
CALLBACK
 
ChûdWndProc
(
HWND
 
hwnd
,
UINT
 
uMsg
,
WPARAM
 
wp
,
LPARAM
 
Õ
);

20 
	$Regi°îAµCœss
()

22 
WNDCLASS
 
wc
;

24 
wc
.
°yÀ
 = 
CS_DBLCLKS
 | 
CS_VREDRAW
 | 
CS_HREDRAW
;

25 
wc
.
Õ‚WndProc
 = (
WNDPROC
)
ChûdWndProc
;

26 
wc
.
cbClsExåa
 = 0;

27 
wc
.
cbWndExåa
 = 0;

28 
wc
.
hIn°™˚
 = 0;

29 
wc
.
hIc⁄
 = 0;

30 
wc
.
hCurs‹
 = 0;

31 
wc
.
hbrBackground
 = (
HBRUSH
)
	`GëStockObje˘
(
LTGRAY_BRUSH
);

32 
wc
.
ÕszMíuName
 = 
NULL
;

33 
wc
.
ÕszCœssName
 = 
APPCHILD
;

34  
	`Regi°îCœss
–&
wc
);

35 
	}
}

37 
LRESULT
 
CALLBACK


38 
	$ChûdWndProc
(
HWND
 
hwnd
, 
UINT
 
msg
, 
WPARAM
 
wp
, 
LPARAM
 
Õ
)

40 
HDC
 
hdcMem
;

41 
HBITMAP
 
hbmp
, 
hbmpOrg
;

42 
RECT
 
rc
;

43 
PAINTSTRUCT
 
ps
;

45 
msg
) {

46 
WM_PAINT
:

47 
	`BegöPaöt
(
hwnd
, &
ps
);

48 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

51 
hdcMem
 = 
	`Cª©eCom∑tibÀDC
(
ps
.
hdc
);

52 
hbmp
 = 
	`Cª©eCom∑tibÀBôm≠
(
hdcMem
, 
image
->
width
, image->
height
);

53 
hbmpOrg
 = 
	`Sñe˘Obje˘
(
hdcMem
, 
hbmp
);

56 
	`DøwDIB
(
hdcMem
, 0, 0, 
image
);

59 
	`SåëchB…
(
ps
.
hdc
, 0, 0, 
rc
.
right
,Ñc.
bŸtom
, 
hdcMem
,

60 0, 0, 
image
->
width
, image->
height
, 
MWROP_SRCCOPY
);

61 
	`DñëeObje˘
(
	`Sñe˘Obje˘
(
hdcMem
, 
hbmpOrg
));

62 
	`DñëeDC
(
hdcMem
);

63 
	`EndPaöt
(
hwnd
, &
ps
);

66  
	`DefWödowProc
–
hwnd
, 
msg
, 
wp
, 
Õ
);

69 
	}
}

71 
WINAPI


72 
	$WöMaö
(
HINSTANCE
 
hIn°™˚
, HINSTANCE 
hPªvIn°™˚
, 
LPSTR
 
ÕCmdLöe
,

73 
nShowCmd
)

75 
MSG
 
msg
;

76 
RECT
 
rc
;

78 
	`Regi°îAµCœss
();

79 
	`GëWödowRe˘
(
	`GëDeskt›Wödow
(), &
rc
);

82 
	`Cª©eWödowEx
(0L, 
APPCHILD
, "", 
WS_BORDER
 | 
WS_VISIBLE
,

84 
	`GëDeskt›Wödow
(), (
HMENU
)1000, 
NULL
, NULL);

86 
	`Cª©eWödowEx
(0L, 
APPCHILD
, "", 
WS_BORDER
 | 
WS_VISIBLE
,

88 
	`GëDeskt›Wödow
(), (
HMENU
)1001, 
NULL
, NULL);

91  
	`GëMesßge
(&
msg
, 
NULL
, 0, 0)) {

92 
	`Tøn¶©eMesßge
(&
msg
);

93 
	`Di•©chMesßge
(&
msg
);

96 
	}
}

	@demos/mwin/mterm.c

9 
	~<°dio.h
>

10 
	~<°dlib.h
>

11 
	~<f˙é.h
>

12 
	~<uni°d.h
>

13 
	~<î∫o.h
>

14 
	~<sig«l.h
>

15 
	#MWINCLUDECOLORS


	)

16 
	~"wödows.h
"

17 
	~"wöã∫.h
"

18 
	~"wötoﬁs.h
"

20 
	#COLS
 80

	)

21 
	#ROWS
 24

	)

22 
	#XMARGIN
 2

	)

23 
	#YMARGIN
 2

	)

24 
	#FGCOLOR
 
GREEN


	)

25 
	#BKCOLOR
 
BLACK


	)

26 
	#FONTNAME
 
SYSTEM_FIXED_FONT


	)

28 
	#APPCLASS
 "mãrm"

	)

30 #i‡
DOS_DJGPP


31 
	#kûÕg
 
kûl


	)

32 
	#SIGCHLD
 17

	)

36 
LRESULT
 
CALLBACK
 
WndProc
(
HWND
 
hwnd
,
UINT
 
uMsg
,
WPARAM
 
wp
,
LPARAM
 
Õ
);

37 
EmOutCh¨
(
HWND
 
hwnd
, 
ch
);

38 
Cª©ePtyShñl
();

39 
RódPtyShñl
(
fd
, *
buf
, 
cou¡
);

40 
WrôePtyShñl
(
fd
, *
buf
, 
cou¡
);

41 
Clo£PtyShñl
(
fd
);

44 
	gâyfd
 = -1;

45 
	gxpos
 = 
XMARGIN
;

46 
	gypos
 = 
YMARGIN
;

47 
	gnCh¨Width
, 
	gnCh¨Height
;

48 
	gnS¸ìnWidth
, 
	gnS¸ìnHeight
;

51 
	$Regi°îAµCœss
()

53 
WNDCLASS
 
wc
;

55 
wc
.
°yÀ
 = 
CS_DBLCLKS
 | 
CS_VREDRAW
 | 
CS_HREDRAW
;

56 
wc
.
Õ‚WndProc
 = (
WNDPROC
)
WndProc
;

57 
wc
.
cbClsExåa
 = 0;

58 
wc
.
cbWndExåa
 = 0;

59 
wc
.
hIn°™˚
 = 0;

60 
wc
.
hIc⁄
 = 0;

61 
wc
.
hCurs‹
 = 0;

62 
wc
.
hbrBackground
 = 
	`Cª©eSﬁidBrush
(
BKCOLOR
);

63 
wc
.
ÕszMíuName
 = 
NULL
;

64 
wc
.
ÕszCœssName
 = 
APPCLASS
;

65 
	`Regi°îCœss
–&
wc
);

67 
	}
}

69 
HWND


70 
	$Cª©eAµWödow
()

72 
HWND
 
hwnd
;

73 
HDC
 
hdc
;

74 
w
, 
h
;

75 
RECT
 
rc
;

77 
	`GëWödowRe˘
(
	`GëDeskt›Wödow
(), &
rc
);

78 
w
 = 
rc
.
right
 - 40;

79 
h
 = 
rc
.
bŸtom
;

82 
hdc
 = 
	`GëDC
(
NULL
);

83 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
FONTNAME
));

84 
	`SëRe˘
(&
rc
, 0, 0, 0, 0);

85 
nCh¨Height
 = 
	`DøwText
(
hdc
, "m", 1, &
rc
, 
DT_CALCRECT
);

86 
nCh¨Width
 = 
rc
.
right
;

87 
nS¸ìnWidth
 = 
	`mö
(
w
, 
nCh¨Width
*
COLS
);

88 
nS¸ìnHeight
 = 
	`mö
(
h
, 
nCh¨Height
*
ROWS
);

89 
	`Rñó£DC
(
NULL
, 
hdc
);

91 
hwnd
 = 
	`Cª©eWödowEx
(0L, 
APPCLASS
,

93 
WS_OVERLAPPEDWINDOW
 | 
WS_VISIBLE
,

94 
CW_USEDEFAULT
, CW_USEDEFAULT,

95 
nS¸ìnWidth
+4, 
nS¸ìnHeight
+24,

96 
NULL
, (
HMENU
)1, NULL, NULL);

98  
hwnd
;

99 
	}
}

101 
LRESULT
 
CALLBACK


102 
	$WndProc
(
HWND
 
hwnd
, 
UINT
 
msg
, 
WPARAM
 
wp
, 
LPARAM
 
Õ
)

104 
ch
;

105 
HDC
 
hdc
;

106 
RECT
 
rc
;

107 
PAINTSTRUCT
 
ps
;

109 
msg
) {

110 
WM_CREATE
:

111 
âyfd
 = 
	`Cª©ePtyShñl
();

114 
	`MwRegi°îFdI≈ut
(
hwnd
, 
âyfd
);

115 
xpos
 = 
XMARGIN
;

116 
ypos
 = 
YMARGIN
;

119 
WM_DESTROY
:

120 
	`MwUƒegi°îFdI≈ut
(
hwnd
, 
âyfd
);

121 
	`Clo£PtyShñl
(
âyfd
);

124 
WM_CHAR
:

125 
ch
 = ()
wp
;

127 if(
âyfd
 == -1) {

128 
	`EmOutCh¨
(
hwnd
, 
ch
);

129 if(
ch
 == '\r')

130 
	`EmOutCh¨
(
hwnd
, '\n');

132 
	`WrôePtyShñl
(
âyfd
, &
ch
, 1);

135 
WM_FDINPUT
:

136 if(
	`RódPtyShñl
(
âyfd
, &
ch
, 1) == 1)

137 
	`EmOutCh¨
(
hwnd
, 
ch
);

140 
WM_PAINT
:

141 
hdc
 = 
	`BegöPaöt
(
hwnd
, &
ps
);

142 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

143 
	`Døw3dIn£t
(
hdc
, 0, 0, 
rc
.
right
-rc.
À·
,Ñc.
bŸtom
-rc.
t›
);

144 
	`EndPaöt
(
hwnd
, &
ps
);

148  
	`DefWödowProc
(
hwnd
, 
msg
, 
wp
, 
Õ
);

151 
	}
}

153 
WINAPI


154 
	$WöMaö
(
HINSTANCE
 
hIn°™˚
, HINSTANCE 
hPªvIn°™˚
, 
LPSTR
 
ÕCmdLöe
,

155 
nShowCmd
)

157 
MSG
 
msg
;

158 
MWIMAGEHDR
 
image_ˇr8
;

160 
	`Regi°îAµCœss
();

161 
	`MwSëDeskt›WÆÕ≠î
(&
image_ˇr8
);

163 
	`Cª©eAµWödow
();

166 
	`GëMesßge
(&
msg
, 
NULL
, 0, 0)) {

167 
	`Tøn¶©eMesßge
(&
msg
);

168 
	`Di•©chMesßge
(&
msg
);

171 
	}
}

174 
	$EmOutCh¨
(
HWND
 
hwnd
, 
ch
)

176 
HDC
 
hdc
;

177 
RECT
 
rc
;

179 
ch
) {

181 
xpos
 = 
XMARGIN
;

184 
ypos
 +
nCh¨Height
;

185 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

186 if(
ypos
 > (
ROWS
-1)*
nCh¨Height
 + 
YMARGIN
) {

187 
ypos
 -
nCh¨Height
;

190 
hdc
 = 
	`GëDC
(
hwnd
);

191 
	`BôB…
(
hdc
, 
XMARGIN
, 
YMARGIN
, 
rc
.
right
-XMARGIN*2,

192 
rc
.
bŸtom
-
nCh¨Height
-
YMARGIN
*2,

193 
hdc
, 
XMARGIN
, 
nCh¨Height
+
YMARGIN
, 
SRCCOPY
);

194 
rc
.
t›
 = 
ypos
;

195 
rc
.
À·
 +
XMARGIN
;

196 
rc
.
right
 -
XMARGIN
;

197 
rc
.
bŸtom
 -
YMARGIN
;

198 
	`FûlRe˘
(
hdc
, &
rc
,

199 (
HBRUSH
)
	`GëCœssL⁄g
(
hwnd
, 
GCL_HBRBACKGROUND
));

200 
	`Rñó£DC
(
hwnd
, 
hdc
);

204 
	`wrôe
(
STDERR_FILENO
, "\007", 1);

207 
xpos
 +
nCh¨Width
;

208 (
xpos
/
nCh¨Width
) & 7)

209 
	`EmOutCh¨
(
hwnd
, ' ');

212 if(
xpos
 <
XMARGIN
)

214 
xpos
 -
nCh¨Width
;

215 
	`EmOutCh¨
(
hwnd
, ' ');

216 
xpos
 -
nCh¨Width
;

221 
hdc
 = 
	`GëDC
(
hwnd
);

222 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
FONTNAME
));

223 
	`SëBkCﬁ‹
(
hdc
, 
BKCOLOR
);

224 
	`SëTextCﬁ‹
(
hdc
, 
FGCOLOR
);

225 
	`SëRe˘
(&
rc
, 
xpos
, 
ypos
, xpos+
nCh¨Width
, ypos+
nCh¨Height
);

226 
	`ExtTextOut
(
hdc
, 
xpos
, 
ypos
, 
ETO_OPAQUE
, &
rc
, (*)&
ch
, 1, 
NULL
);

227 
	`Rñó£DC
(
hwnd
, 
hdc
);

228 
xpos
 +
nCh¨Width
;

229 if(
xpos
 > (
COLS
-1)*
nCh¨Width
) {

230 
xpos
 = 
XMARGIN
;

231 
	`EmOutCh¨
(
hwnd
, '\n');

233 
	}
}

235 #i‡
ELKS


236 
	#SHELL
 "/bö/ßsh"

	)

238 #i‡
DOS_DJGPP


239 
	#SHELL
 "bash"

	)

241 
	#SHELL
 "/bö/sh"

	)

245 
	gpid
;

248 
	$±ysig«Àd
(
signo
)

250 
signo
) {

251 
SIGINT
:

252 #i‡!
ELKS


254 
	`kûÕg
(
pid
, 
SIGINT
);

257 
SIGCHLD
:

258 
	`De°royWödow
(
	`GëA˘iveWödow
());

259 
	`Cª©eAµWödow
();

262 
	`Ârötf
(
°dîr
, "Unˇughàsig«»%d\n", 
signo
);

263 
	}
}

269 
	$Cª©ePtyShñl
()

271 
n
 = 0;

272 
tfd
;

273 
±y_«me
[12];

274 * 
¨gv
[2];

276 
agaö
:

277 
	`•rötf
(
±y_«me
, "/dev/±yp%d", 
n
);

278 i‡((
tfd
 = 
	`›í
(
±y_«me
, 
O_RDWR
 | 
O_NONBLOCK
)) < 0) {

279 i‡((
î∫o
 =
EBUSY
 ||Éºnÿ=
EIO
Ë&& 
n
 < 10) {

280 ++
n
;

281 
agaö
;

283 
	`Ârötf
(
°dîr
, "C™'à¸óãÖty %s\n", 
±y_«me
);

286 
	`sig«l
(
SIGCHLD
, 
±ysig«Àd
);

287 
	`sig«l
(
SIGINT
, 
±ysig«Àd
);

288 i‡((
pid
 = 
	`f‹k
()) == -1) {

289 
	`Ârötf
(
°dîr
, "NoÖrocesses\n");

292 i‡(!
pid
) {

293 
	`˛o£
(
STDIN_FILENO
);

294 
	`˛o£
(
STDOUT_FILENO
);

295 
	`˛o£
(
STDERR_FILENO
);

296 
	`˛o£
(
tfd
);

298 
	`£tsid
();

299 
±y_«me
[5] = 't';

300 i‡((
tfd
 = 
	`›í
(
±y_«me
, 
O_RDWR
)) < 0) {

301 
	`Ârötf
(
°dîr
, "Chûd: C™'à›íÖty %s\n", 
±y_«me
);

302 
	`exô
(1);

304 
	`dup2
(
tfd
, 
STDIN_FILENO
);

305 
	`dup2
(
tfd
, 
STDOUT_FILENO
);

306 
	`dup2
(
tfd
, 
STDERR_FILENO
);

308 
¨gv
[0] = 
SHELL
;

309 
¨gv
[1] = 
NULL
;

310 
	`execv
(
¨gv
[0],árgv);

311 
	`exô
(1);

313  
tfd
;

314 
	}
}

317 
	$RódPtyShñl
(
fd
, *
buf
, 
cou¡
)

319  
	`ªad
(
fd
, 
buf
, 
cou¡
);

320 
	}
}

323 
	$WrôePtyShñl
(
fd
, *
buf
, 
cou¡
)

325  
	`wrôe
(
fd
, 
buf
, 
cou¡
);

326 
	}
}

329 
	$Clo£PtyShñl
(
fd
)

331 if(
âyfd
 != -1)

332 
	`˛o£
(
fd
);

333 
	}
}

	@demos/mwin/mtest.c

2 
	~<wödows.h
>

4 
LRESULT
 
CALLBACK
 
w¥oc
(
HWND
,
UINT
,
WPARAM
,
LPARAM
);

6 
WINAPI
 
	$WöMaö
(
HINSTANCE
 
hIn°™˚
, HINSTANCE 
hPªvIn°™˚
,

7 
PSTR
 
szCmdLöe
, 
iCmdShow
)

9 
szAµName
[]="HolaWin";

10 
HWND
 
hwnd
;

11 
MSG
 
msg
;

12 
WNDCLASS
 
wnd˛ass
;

14 
wnd˛ass
.
°yÀ
 = 
CS_DBLCLKS
 | 
CS_HREDRAW
 | 
CS_VREDRAW
;

15 
wnd˛ass
.
Õ‚WndProc
 = (
WNDPROC
)
w¥oc
;

16 
wnd˛ass
.
cbClsExåa
 =0;

17 
wnd˛ass
.
cbWndExåa
 =0;

18 
wnd˛ass
.
hIn°™˚
 =0;

19 
wnd˛ass
.
hIc⁄
 =0;

20 
wnd˛ass
.
hCurs‹
 =0;

21 
wnd˛ass
.
hbrBackground
 =(
HBRUSH
)
	`GëStockObje˘
(
LTGRAY_BRUSH
);

22 
wnd˛ass
.
ÕszMíuName
 =
NULL
;

23 
wnd˛ass
.
ÕszCœssName
 = 
szAµName
;

25 
	`Regi°îCœss
(&
wnd˛ass
);

26 
hwnd
=
	`Cª©eWödowEx
(0L,

27 
szAµName
,

29 
WS_OVERLAPPEDWINDOW
 | 
WS_VISIBLE
,

30 
CW_USEDEFAULT
,

31 
CW_USEDEFAULT
,

34 
NULL
,

35 
NULL
,

36 
NULL
,

37 
NULL
);

40 
	`ShowWödow
(
hwnd
,
iCmdShow
);

41 
	`Upd©eWödow
(
hwnd
);

43 
	`GëMesßge
(&
msg
,
NULL
,0,0)) {

44 
	`Tøn¶©eMesßge
(&
msg
);

45 
	`Di•©chMesßge
(&
msg
);

47  
msg
.
wP¨am
;

48 
	}
}

49 
LRESULT
 
CALLBACK
 
	$w¥oc
(
HWND
 
hwnd
, 
UINT
 
iMsg
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
)

51 
HDC
 
hdc
;

52 
PAINTSTRUCT
 
ps
;

53 
RECT
 
ª˘
;

55 
iMsg
) {

56 
WM_CREATE
:

58 
WM_PAINT
:

60 
hdc
=
	`BegöPaöt
(
hwnd
,&
ps
);

61 
	`GëClõ¡Re˘
(
hwnd
,&
ª˘
);

62 
	`DøwText
(
hdc
, "Hﬁa, NOS §æ§ø§§«—", -1, &
ª˘
,

63 
DT_SINGLELINE
|
DT_CENTER
|
DT_VCENTER
);

64 
	`EndPaöt
(
hwnd
,&
ps
);

66 
WM_DESTROY
:

67 
	`Po°QuôMesßge
(0);

70  
	`DefWödowProc
(
hwnd
,
iMsg
,
wP¨am
,
lP¨am
);

73 
	}
}

	@demos/mwin/mtest2.c

1 
	#MWINCLUDECOLORS


	)

2 
	~<wödows.h
>

4 
LRESULT
 
CALLBACK
 
w¥oc
(
HWND
,
UINT
,
WPARAM
,
LPARAM
);

6 
WINAPI
 
	$WöMaö
(
HINSTANCE
 
hIn°™˚
, HINSTANCE 
hPªvIn°™˚
,

7 
PSTR
 
szCmdLöe
, 
iCmdShow
)

9 
szAµName
[]="HolaWin";

10 
HWND
 
hwnd
;

11 
MSG
 
msg
;

12 
WNDCLASS
 
wnd˛ass
;

14 
width
, 
height
;

15 
RECT
 
r
;

16 
HWND
 
hli°
,
hedô
;

18 
	`GëWödowRe˘
(
	`GëDeskt›Wödow
(), &
r
);

19 
width
 = 
height
 = 
r
.
right
 / 2;

21 
	`MwRegi°îBuâ⁄C⁄åﬁ
(
NULL
);

22 
	`MwRegi°îEdôC⁄åﬁ
(
NULL
);

23 
	`MwRegi°îLi°boxC⁄åﬁ
(
NULL
);

24 
	`MwRegi°îProgªssB¨C⁄åﬁ
(
NULL
);

25 
	`MwRegi°îSèticC⁄åﬁ
(
NULL
);

26 
	`MwRegi°îComboboxC⁄åﬁ
(
NULL
);

27 
	`MwRegi°îS¸ﬁlb¨C⁄åﬁ
(
NULL
);

29 
wnd˛ass
.
°yÀ
 = 
CS_DBLCLKS
 | 
CS_HREDRAW
 | 
CS_VREDRAW
;

30 
wnd˛ass
.
Õ‚WndProc
 = (
WNDPROC
)
w¥oc
;

31 
wnd˛ass
.
cbClsExåa
 =0;

32 
wnd˛ass
.
cbWndExåa
 =0;

33 
wnd˛ass
.
hIn°™˚
 =0;

34 
wnd˛ass
.
hIc⁄
 =0;

35 
wnd˛ass
.
hCurs‹
 =0;

36 
wnd˛ass
.
hbrBackground
 =(
HBRUSH
)
	`GëStockObje˘
(
LTGRAY_BRUSH
);

37 
wnd˛ass
.
ÕszMíuName
 =
NULL
;

38 
wnd˛ass
.
ÕszCœssName
 = 
szAµName
;

40 
	`Regi°îCœss
(&
wnd˛ass
);

41 
hwnd
=
	`Cª©eWödowEx
(0L,

42 
szAµName
,

44 
WS_OVERLAPPEDWINDOW
 | 
WS_VISIBLE
,

45 
CW_USEDEFAULT
,

46 
CW_USEDEFAULT
,

47 
width
,

48 
height
,

49 
NULL
,

50 
NULL
,

51 
NULL
,

52 
NULL
);

53 #i‡!
ELKS


55 
hedô
=
	`Cª©eWödowEx
(0L, "EDIT",

57 
WS_BORDER
|
WS_CHILD
 | 
WS_VISIBLE
,

58 
width
 * 5 / 8, 10, 100, 18,

59 
hwnd
, (
HMENU
)5, 
NULL
, NULL);

61 
	`Cª©eWödowEx
(0L, "PROGBAR",

63 
WS_BORDER
|
WS_CHILD
 | 
WS_VISIBLE
,

64 
width
 * 5 / 8, 32, 100, 18,

65 
hwnd
, (
HMENU
)6, 
NULL
, NULL);

67 
hli°
 = 
	`Cª©eWödowEx
(0L, "LISTBOX",

69 
WS_VSCROLL
|

71 
WS_BORDER
|
WS_CHILD
 | 
WS_VISIBLE
,

72 
width
 * 5 / 8, 54, 100, 54,

73 
hwnd
, (
HMENU
)7, 
NULL
, NULL);

75 
	`SídMesßge
(
hli°
, 
LB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"Cherry");

76 
	`SídMesßge
(
hli°
, 
LB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"Apple");

77 
	`SídMesßge
(
hli°
, 
LB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"Orange");

78 
	`SídMesßge
(
hli°
, 
LB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"Banana");

79 
	`SídMesßge
(
hli°
, 
LB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"Smooth");

80 
	`SídMesßge
(
hli°
, 
LB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"00000");

81 
	`SídMesßge
(
hli°
, 
LB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"11111");

82 
	`SídMesßge
(
hli°
, 
LB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"22222");

83 
	`SídMesßge
(
hli°
, 
LB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"33333");

84 
	`SídMesßge
(
hli°
, 
LB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"44444");

85 
	`SídMesßge
(
hli°
, 
LB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"55555");

86 
	`SídMesßge
(
hli°
, 
LB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"66666");

87 
	`SídMesßge
(
hli°
, 
LB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"77777");

88 
	`SídMesßge
(
hli°
, 
LB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"88888");

89 
	`SídMesßge
(
hli°
, 
LB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"99999");

91 
	`Cª©eWödowEx
(0L, "BUTTON",

93 
WS_CHILD
 | 
WS_VISIBLE
,

94 
width
 * 5 / 8 + 50, 106+16+6, 50, 14,

95 
hwnd
, (
HMENU
)8, 
NULL
, NULL);

97 
	`Cª©eWödowEx
(0L, "STATIC",

99 
WS_CHILD
 | 
WS_VISIBLE
,

100 
width
 * 5 / 8, 106+34+6, 100, 18,

101 
hwnd
, (
HMENU
)9, 
NULL
, NULL);

104 
HWND
 
hcombo
;

106 
hcombo
 = 
	`Cª©eWödowEx
(0L, "COMBOBOX",

109 
CBS_SIMPLE
 |

112 
CBS_DROPDOWNLIST
 |

115 
CBS_DROPDOWN
 |

118 
WS_VSCROLL
 | 
WS_CHILD
 | 
WS_VISIBLE
,

119 
width
 * 5 / 8, 106+14+4+18+4, 100, (18*5),

120 
hwnd
, (
HMENU
)10, 
NULL
, NULL);

122 
	`SídMesßge
(
hcombo
, 
CB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"Cherry");

123 
	`SídMesßge
(
hcombo
, 
CB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"Apple");

124 
	`SídMesßge
(
hcombo
, 
CB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"Orange");

125 
	`SídMesßge
(
hcombo
, 
CB_ADDSTRING
, 0, (
LPARAM
)(
LPSTR
)"Banana");

130 
	`Cª©eWödowEx
(0L, "SCROLLBAR",

132 
SBS_VERT
 |

133 
WS_CHILD
 | 
WS_VISIBLE
 ,

134 
width
 * 5 / 8 -(18*2), 106+68, 18, 128,

135 
hwnd
, (
HMENU
)11, 
NULL
, NULL);

137 
	`Cª©eWödowEx
(0L, "SCROLLBAR",

139 
SBS_HORZ
 |

140 
WS_CHILD
 | 
WS_VISIBLE
 ,

141 
width
 * 5 / 8 -18 , 106+68, 128, 18,

142 
hwnd
, (
HMENU
)12, 
NULL
, NULL);

147 
	`ShowWödow
(
hwnd
,
iCmdShow
);

148 
	`Upd©eWödow
(
hwnd
);

150 
	`GëMesßge
(&
msg
,
NULL
,0,0)) {

151 
	`Tøn¶©eMesßge
(&
msg
);

152 
	`Di•©chMesßge
(&
msg
);

155  
msg
.
wP¨am
;

156 
	}
}

157 
LRESULT
 
CALLBACK
 
	$w¥oc
(
HWND
 
hwnd
, 
UINT
 
iMsg
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
)

159 
HDC
 
hdc
;

160 
PAINTSTRUCT
 
ps
;

161 
RECT
 
ª˘
;

162 
HGDIOBJ
 
ﬁdf⁄t
;

164 
iMsg
) {

165 
WM_CREATE
:

167 
WM_PAINT
:

169 
hdc
=
	`BegöPaöt
(
hwnd
,&
ps
);

175 
	`GëClõ¡Re˘
(
hwnd
,&
ª˘
);

176 
ﬁdf⁄t
=
	`Sñe˘Obje˘
(
hdc
,
	`Cª©eF⁄t
(12,

178 
FF_DONTCARE
|
DEFAULT_PITCH
,

180 
	`DøwText
(
hdc
, "Hﬁa, NOS, §§§Â¥˙∏’", -1, &
ª˘
,

181 
DT_SINGLELINE
|
DT_CENTER
|
DT_VCENTER
);

182 
	`DñëeObje˘
(
	`Sñe˘Obje˘
(
hdc
,
ﬁdf⁄t
));

187 
	`EndPaöt
(
hwnd
,&
ps
);

189 
WM_DESTROY
:

190 
	`Po°QuôMesßge
(0);

193  
	`DefWödowProc
(
hwnd
,
iMsg
,
wP¨am
,
lP¨am
);

196 
	}
}

	@demos/mwin/muserfd.c

1 
	~<wödows.h
>

2 
	~<wöã∫.h
>

3 
	~<°dio.h
>

4 
	~<°dlib.h
>

7 #i‡
DOS_DJGPP
 | 
deföed
(
__FªeBSD__
)

8 
	~<sys/ty≥s.h
>

11 
	#MAX_TEST_FD
 (500)

	)

13 
LRESULT
 
CALLBACK
 
w¥oc
(
HWND
,
UINT
,
WPARAM
,
LPARAM
);

15 
WINAPI
 
	$WöMaö
(
HINSTANCE
 
hIn°™˚
, HINSTANCE 
hPªvIn°™˚
,

16 
PSTR
 
szCmdLöe
, 
iCmdShow
)

18 
szAµName
[]="HolaWin";

19 
HWND
 
hwnd
;

20 
WNDCLASS
 
wnd˛ass
;

21 
øndom_fd
[
MAX_TEST_FD
][2], 
fd
, 
uƒeg_fd
;

23 
wnd˛ass
.
°yÀ
 = 
CS_DBLCLKS
 | 
CS_HREDRAW
 | 
CS_VREDRAW
;

24 
wnd˛ass
.
Õ‚WndProc
 = (
WNDPROC
)
w¥oc
;

25 
wnd˛ass
.
cbClsExåa
 =0;

26 
wnd˛ass
.
cbWndExåa
 =0;

27 
wnd˛ass
.
hIn°™˚
 =0;

28 
wnd˛ass
.
hIc⁄
 =0;

29 
wnd˛ass
.
hCurs‹
 =0;

30 
wnd˛ass
.
hbrBackground
 =(
HBRUSH
)
	`GëStockObje˘
(
LTGRAY_BRUSH
);

31 
wnd˛ass
.
ÕszMíuName
 =
NULL
;

32 
wnd˛ass
.
ÕszCœssName
 = 
szAµName
;

34 
	`Regi°îCœss
(&
wnd˛ass
);

35 
hwnd
=
	`Cª©eWödowEx
(0L,

36 
szAµName
,

38 
WS_OVERLAPPEDWINDOW
 | 
WS_VISIBLE
,

39 
CW_USEDEFAULT
,

40 
CW_USEDEFAULT
,

43 
NULL
,

44 
NULL
,

45 
NULL
,

46 
NULL
);

53 
	`¥ötf
 ("SelectáÑandomÜist of fd'sÅoÅest with.\n");

55 
fd
 = 0; fd < 
MAX_TEST_FD
; fd++)

57 
øndom_fd
[
fd
][0] = 
	`øndom
 (Ë% 
FD_SETSIZE
;

58 
øndom_fd
[
fd
][1] = 
	`øndom
 () % 3;

61 
fd
 = 0; fd < 
MAX_TEST_FD
; fd++)

63 
øndom_fd
[
fd
][1])

66 
	`MwRegi°îFdI≈ut
 (
hwnd
, 
øndom_fd
[
fd
][0]);

70 
	`MwRegi°îFdOuçut
 (
hwnd
, 
øndom_fd
[
fd
][0]);

74 
	`MwRegi°îFdEx˚±
 (
hwnd
, 
øndom_fd
[
fd
][0]);

79 
	`¥ötf
 ("Bad fdÅype, fd index = %i,Åype = %i !\n",

80 
fd
, 
øndom_fd
[fd][1]);

85 
uƒeg_fd
 = 
	`øndom
 (Ë% 
MAX_TEST_FD
;

87 
fd
 = 0; fd < 
MAX_TEST_FD
; fd++)

89 
øndom_fd
[
uƒeg_fd
][1])

92 
	`MwUƒegi°îFdI≈ut
 (
hwnd
, 
øndom_fd
[
uƒeg_fd
][0]);

96 
	`MwUƒegi°îFdOuçut
 (
hwnd
, 
øndom_fd
[
uƒeg_fd
][0]);

100 
	`MwUƒegi°îFdEx˚±
 (
hwnd
, 
øndom_fd
[
uƒeg_fd
][0]);

105 
	`¥ötf
 ("Bad fdÅype !\n");

109 
uƒeg_fd
++;

110 i‡(
uƒeg_fd
 >
MAX_TEST_FD
)

111 
uƒeg_fd
 = 0;

116 
	}
}

118 
LRESULT
 
CALLBACK
 
	$w¥oc
(
HWND
 
hwnd
, 
UINT
 
iMsg
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
)

120 
HDC
 
hdc
;

121 
PAINTSTRUCT
 
ps
;

122 
RECT
 
ª˘
;

124 
iMsg
) {

125 
WM_CREATE
:

127 
WM_PAINT
:

129 
WM_MOUSEFIRST
:

131 
hdc
=
	`BegöPaöt
(
hwnd
,&
ps
);

132 
	`GëClõ¡Re˘
(
hwnd
,&
ª˘
);

133 
	`DøwText
(
hdc
, "Hﬁa, NOS", -1, &
ª˘
,

134 
DT_SINGLELINE
|
DT_CENTER
|
DT_VCENTER
);

135 
	`EndPaöt
(
hwnd
,&
ps
);

137 
WM_DESTROY
:

138 
	`Po°QuôMesßge
(0);

141  
	`DefWödowProc
(
hwnd
,
iMsg
,
wP¨am
,
lP¨am
);

144 
	}
}

	@demos/nanowm/actions.c

7 
	~<°dio.h
>

8 
	~<°dlib.h
>

9 
	#MWINCLUDECOLORS


	)

10 
	~"«no-X.h
"

11 
	~"nxdøw.h
"

15 
	~"«nowm.h
"

20 
	$ªdøw_nˇªa
(
wö
 *
wödow
)

22 
GR_WINDOW_INFO
 
öfo
;

23 
GR_WM_PROPERTIES
 
¥›s
;

24 
GR_BOOL
 
a˘ive
;

26 
	`D¥ötf
("c⁄èöî_exposuª wödow %d\n", 
wödow
->
wid
);

28 
	`GrGëWödowInfo
(
wödow
->
wid
, &
öfo
);

30 
	`GrGëWMPr›îtõs
(
wödow
->
˛õ¡id
, &
¥›s
);

37 i‡(
¥›s
.
Êags
 == 0)

40 
a˘ive
 = (
wödow
->
˛õ¡id
 =
	`GrGëFocus
());

41 
	`nxPaötNCAªa
(
wödow
->
wid
, 
öfo
.
width
, info.
height
, 
¥›s
.
tôÀ
,

42 
a˘ive
, 
¥›s
.props);

45 i‡(
¥›s
.
tôÀ
)

46 
	`‰ì
(
¥›s
.
tôÀ
);

47 
	}
}

49 
	$c⁄èöî_exposuª
(
wö
 *
wödow
, 
GR_EVENT_EXPOSURE
 *
evít
)

51 
	`D¥ötf
("c⁄èöî_exposuª wödow %d\n", 
wödow
->
wid
);

53 
	`ªdøw_nˇªa
(
wödow
);

54 
	}
}

56 
GR_BOOL


57 
	$PtInRe˘
(
GR_RECT
 *
¥c
, 
GR_SIZE
 
x
, GR_SIZE 
y
)

59  (
x
 >
¥c
->x && x < (¥c->x+¥c->
width
) &&

60 
y
 >
¥c
->y && y < (¥c->y+¥c->
height
));

61 
	}
}

63 
	$c⁄èöî_buâ⁄down
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
)

65 
pos_size
 *
pos
;

66 
GR_RECT
 
r
;

67 
GR_COORD
 
cxb‹dî
 = 0, 
cyb‹dî
 = 0;

68 
GR_WINDOW_INFO
 
öfo
;

69 
GR_GC_ID
 
gc
;

70 
	`D¥ötf
("c⁄èöî_buâ⁄dow¿wödow %d\n", 
wödow
->
wid
);

72 if(
wödow
->
a˘ive
) ;

74 
	`GrGëWödowInfo
(
wödow
->
wid
, &
öfo
);

77 i‡(
öfo
.
¥›s
 & 
GR_WM_PROPS_BORDER
) {

78 
cxb‹dî
 = 1;

79 
cyb‹dî
 = 1;

81 i‡(
öfo
.
¥›s
 & 
GR_WM_PROPS_APPFRAME
) {

82 
cxb‹dî
 = 
CXBORDER
;

83 
cyb‹dî
 = 
CYBORDER
;

87 i‡((
öfo
.
¥›s
 & (
GR_WM_PROPS_CAPTION
|
GR_WM_PROPS_CLOSEBOX
)) ==

88 (
GR_WM_PROPS_CAPTION
|
GR_WM_PROPS_CLOSEBOX
)) {

91 
r
.
x
 = 
öfo
.
width
 - 
CXCLOSEBOX
 - 
cxb‹dî
 - 2;

92 
r
.
y
 = 
cyb‹dî
 + 2;

93 
r
.
width
 = 
CXCLOSEBOX
;

94 
r
.
height
 = 
CYCLOSEBOX
;

97 i‡(
	`PtInRe˘
(&
r
, 
evít
->
x
,Évít->
y
)) {

99 
	`GrClo£Wödow
(
wödow
->
˛õ¡id
);

105 
	`GrSëFocus
(
wödow
->
˛õ¡id
);

113 
r
.
x
 = 
öfo
.
width
 - 5;

114 
r
.
y
 = 
öfo
.
height
 - 5;

115 
r
.
width
 = 5;

116 
r
.
height
 = 5;

118 if(
	`PtInRe˘
(&
r
,
evít
->
x
,Évít->
y
)) {

120 
pos_size
 * 
pos
;

122 if(!
wödow
->
d©a
)

123 if(!(
wödow
->
d©a
 = 
	`mÆloc
((
pos_size
)))) ;

125 
wödow
->
sizög
 = 
GR_TRUE
;

126 
pos
 = (
pos_size
*)
wödow
->
d©a
;

129 
	`GrGëWödowInfo
(
wödow
->
˛õ¡id
,&
öfo
);

130 
pos
->
xoff
 = -
öfo
.
width
;

131 
pos
->
yoff
 = -
öfo
.
height
;

133 
	`GrGëWödowInfo
(
wödow
->
wid
,&
öfo
);

134 
pos
->
xoff
 +
öfo
.
width
;

135 
pos
->
yoff
 +
öfo
.
height
;

137 
gc
 = 
	`GrNewGC
();

138 
	`GrSëGCMode
(
gc
, 
GR_MODE_XOR
|
GR_MODE_EXCLUDECHILDREN
);

139 
	`GrRe˘
(
GR_ROOT_WINDOW_ID
,
gc
,
öfo
.
x
, info.
y
, info.
width
, info.
height
);

140 
	`GrDe°royGC
(
gc
);

143 
pos
->
width
 = 
öfo
.width;

144 
pos
->
height
 = 
öfo
.height;

150 i‡(!(
öfo
.
¥›s
 & 
GR_WM_PROPS_CAPTION
))

154 
r
.
x
 = 
cxb‹dî
;

155 
r
.
y
 = 
cyb‹dî
;

156 
r
.
width
 = 
öfo
.width - 
cxb‹dî
*2;

157 
r
.
height
 = 
CYCAPTION
;

160 i‡(!
	`PtInRe˘
(&
r
, 
evít
->
x
,Évít->
y
))

164 i‡(!(
öfo
.
¥›s
 & 
GR_WM_PROPS_NORAISE
))

165 
	`GrRai£Wödow
(
wödow
->
wid
);

168 i‡(
öfo
.
¥›s
 & 
GR_WM_PROPS_NOMOVE
)

171 if(!
wödow
->
d©a
)

172 if(!(
wödow
->
d©a
 = 
	`mÆloc
((
pos_size
)))) ;

174 
pos
 = (
pos_size
 *Ë
wödow
->
d©a
;

176 
	`GrGëWödowInfo
(
wödow
->
wid
,&
öfo
);

178 
pos
->
xoff
 = 
evít
->
x
;

179 
pos
->
yoff
 = 
evít
->
y
;

181 #ifde‡
OUTLINE_MOVE


182 
pos
->
x‹ig
 = 
öfo
.
x
;

183 
pos
->
y‹ig
 = 
öfo
.
y
;

184 
pos
->
width
 = 
öfo
.width;

185 
pos
->
height
 = 
öfo
.height;

187 
gc
 = 
	`GrNewGC
();

188 
	`GrSëGCMode
(
gc
, 
GR_MODE_XOR
|
GR_MODE_EXCLUDECHILDREN
);

189 
	`GrRe˘
(
GR_ROOT_WINDOW_ID
,
gc
,
öfo
.
x
, info.
y
, info.
width
, info.
height
);

190 
	`GrDe°royGC
(
gc
);

192 
wödow
->
a˘ive
 = 
GR_TRUE
;

193 
	}
}

195 
	$c⁄èöî_buâ⁄up
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
)

197 
	`D¥ötf
("c⁄èöî_buâ⁄u∞wödow %d\n", 
wödow
->
wid
);

199 if(
wödow
->
a˘ive
) {

200 
pos_size
 * 
pos
 = (pos_sizê*)
wödow
->
d©a
;

201 #ifde‡
OUTLINE_MOVE


202 
GR_GC_ID
 
gc
;

203 
gc
 = 
	`GrNewGC
();

204 
	`GrSëGCMode
(
gc
, 
GR_MODE_XOR
|
GR_MODE_EXCLUDECHILDREN
);

205 
	`GrRe˘
(
GR_ROOT_WINDOW_ID
,
gc
,
pos
->
x‹ig
,Öos->
y‹ig
,Öos->
width
,Öos->
height
);

207 
	`GrMoveWödow
(
wödow
->
wid
, 
pos
->
x‹ig
,Öos->
y‹ig
);

210 
	`‰ì
(
pos
);

211 
wödow
->
a˘ive
 = 
GR_FALSE
;

212 
wödow
->
d©a
 = 0;

215 if(
wödow
->
sizög
) {

216 
GR_WINDOW_INFO
 
öfo
;

217 
GR_GC_ID
 
gc
;

219 
pos_size
 * 
pos
 = (pos_sizê*)
wödow
->
d©a
;

221 
gc
 = 
	`GrNewGC
();

222 
	`GrSëGCMode
(
gc
, 
GR_MODE_XOR
|
GR_MODE_EXCLUDECHILDREN
);

224 
	`GrGëWödowInfo
(
wödow
->
wid
, &
öfo
);

226 
	`GrRe˘
(
GR_ROOT_WINDOW_ID
,
gc
,
öfo
.
x
, info.
y
, 
pos
->
width
,Öos->
height
);

228 
	`GrResizeWödow
(
wödow
->
wid
,
evít
->
roŸx
 - 
öfo
.
x
,Évít->
roŸy
 - info.
y
);

229 
	`GrResizeWödow
(
wödow
->
˛õ¡id
,
evít
->
roŸx
 - 
öfo
.
x
 - 
pos
->
xoff
,

230 
evít
->
roŸy
 - 
öfo
.
y
 - 
pos
->
yoff
);

231 
	`GrDe°royGC
(
gc
);

232 
	`‰ì
(
wödow
->
d©a
);

233 
wödow
->
sizög
 = 
GR_FALSE
;

234 
wödow
->
d©a
 = 0;

236 
	}
}

238 
	$c⁄èöî_mou£moved
(
wö
 *
wödow
, 
GR_EVENT_MOUSE
 *
evít
)

240 
pos_size
 *
pos
;

241 
GR_WINDOW_INFO
 
öfo
;

242 
GR_GC_ID
 
gc
;

244 
	`D¥ötf
("c⁄èöî_mou£moved wödow %d\n", 
wödow
->
wid
);

246 if(
wödow
->
sizög
) {

248 
pos_size
 * 
pos
 = (pos_size*)
wödow
->
d©a
;

249 
	`GrGëWödowInfo
(
wödow
->
wid
, &
öfo
);

251 
gc
 = 
	`GrNewGC
();

252 
	`GrSëGCMode
(
gc
, 
GR_MODE_XOR
|
GR_MODE_EXCLUDECHILDREN
);

255 
	`GrRe˘
(
GR_ROOT_WINDOW_ID
,
gc
,
öfo
.
x
, info.
y
, 
pos
->
width
,Öos->
height
);

257 
	`GrRe˘
(
GR_ROOT_WINDOW_ID
,
gc
,
öfo
.
x
, info.
y
,

258 
evít
->
roŸx
 - 
öfo
.
x
,Évít->
roŸy
 - info.
y
);

259 
	`GrDe°royGC
(
gc
);

263 
pos
->
width
 = 
evít
->
roŸx
 - 
öfo
.
x
;

264 
pos
->
height
 = 
evít
->
roŸy
 - 
öfo
.
y
;

269 if(!
wödow
->
a˘ive
) ;

271 
pos
 = (
pos_size
 *Ë
wödow
->
d©a
;

273 #ifde‡
OUTLINE_MOVE


274 
gc
 = 
	`GrNewGC
();

275 
	`GrSëGCMode
(
gc
, 
GR_MODE_XOR
|
GR_MODE_EXCLUDECHILDREN
);

276 
	`GrRe˘
(
GR_ROOT_WINDOW_ID
,
gc
,
pos
->
x‹ig
,Öos->
y‹ig
,Öos->
width
,Öos->
height
);

277 
	`GrRe˘
(
GR_ROOT_WINDOW_ID
,
gc
,
evít
->
roŸx
 - 
pos
->
xoff
,Évít->
roŸy
 -Öos->
yoff
,

278 
pos
->
width
,Öos->
height
);

280 
pos
->
x‹ig
 = 
evít
->
roŸx
 -Öos->
xoff
;

281 
pos
->
y‹ig
 = 
evít
->
roŸy
 -Öos->
yoff
;

283 
	`GrDe°royGC
(
gc
);

285 
	`GrMoveWödow
(
wödow
->
wid
, 
evít
->
roŸx
 - 
pos
->
xoff
,

286 
evít
->
roŸy
 - 
pos
->
yoff
);

288 
	}
}

291 
	$t›b¨_exposuª
(
wö
 *
wödow
, 
GR_EVENT_EXPOSURE
 *
evít
)

293 
wö
 *
pwö
 = 
	`föd_wödow
(
wödow
->
pid
);

294 
˛õ¡öfo
 *
ci
 = 
pwö
->
d©a
;

295 
GR_WM_PROPERTIES
 
¥›
;

297 
	`D¥ötf
("t›b¨_exposuª wödow %d\n", 
wödow
->
wid
);

299 
	`GrGëWMPr›îtõs
(
ci
->
cid
, &
¥›
);

300 i‡(
¥›
.
tôÀ
) {

301 
	`GrText
(
wödow
->
wid
, 
buâ⁄sgc
, 0, 0, 
¥›
.
tôÀ
, -1,

302 
GR_TFASCII
|
GR_TFTOP
);

303 
	`‰ì
(
¥›
.
tôÀ
);

305 
	}
}

307 
	$˛o£buâ⁄_exposuª
(
wö
 *
wödow
, 
GR_EVENT_EXPOSURE
 *
evít
)

309 
	`D¥ötf
("˛o£buâ⁄_exposuª wödow %d\n", 
wödow
->
wid
);

311 
	`GrBôm≠
(
wödow
->
wid
, 
buâ⁄sgc
, 0, 0, 
TITLE_BAR_HEIGHT
,

312 
TITLE_BAR_HEIGHT
, 
wödow
->
a˘ive
 ? 
˛o£buâ⁄_¥es£d
 :

313 
˛o£buâ⁄_nŸ¥es£d
);

314 
	}
}

316 
	$t›b¨_buâ⁄down
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
)

318 
posôi⁄
 *
pos
;

320 
	`D¥ötf
("t›b¨_buâ⁄dow¿wödow %d\n", 
wödow
->
wid
);

322 
	`GrRai£Wödow
(
wödow
->
pid
);

324 if(
wödow
->
a˘ive
) ;

326 if(!
wödow
->
d©a
)

327 if(!(
wödow
->
d©a
 = 
	`mÆloc
((
posôi⁄
)))) ;

329 
pos
 = (
posôi⁄
 *Ë
wödow
->
d©a
;

331 
pos
->
x
 = 
evít
->x + 
TITLE_BAR_HEIGHT
;

332 
pos
->
y
 = 
evít
->y;

334 
wödow
->
a˘ive
 = 
GR_TRUE
;

335 
	}
}

337 
	$ªsizeb¨_buâ⁄down
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
)

339 
GR_WINDOW_INFO
 
wi
;

340 
pos_size
 *
pos
;

342 
	`D¥ötf
("ªsizeb¨_buâ⁄dow¿wödow %d\n", 
wödow
->
wid
);

344 
	`GrRai£Wödow
(
wödow
->
pid
);

346 if(
wödow
->
a˘ive
) ;

348 if(!
wödow
->
d©a
)

349 if(!(
wödow
->
d©a
 = 
	`mÆloc
((
pos_size
)))) ;

351 
pos
 = (
pos_size
 *Ë
wödow
->
d©a
;

353 
	`GrGëWödowInfo
(
wödow
->
pid
, &
wi
);

355 
pos
->
xoff
 = 
evít
->
x
;

356 
pos
->
yoff
 = 
evít
->
y
;

357 
pos
->
x‹ig
 = 
wi
.
x
;

358 
pos
->
y‹ig
 = 
wi
.
y
;

359 
pos
->
width
 = 
wi
.width;

360 
pos
->
height
 = 
wi
.height;

362 
wödow
->
a˘ive
 = 
GR_TRUE
;

363 
	}
}

365 
	$˛o£buâ⁄_buâ⁄down
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
)

367 
	`D¥ötf
("˛o£buâ⁄_buâ⁄dow¿wödow %d\n", 
wödow
->
wid
);

369 
	`GrRai£Wödow
(
wödow
->
pid
);

371 
wödow
->
a˘ive
 = 
GR_TRUE
;

372 
	`˛o£buâ⁄_exposuª
(
wödow
, 
NULL
);

373 
	}
}

376 
	$t›b¨_buâ⁄up
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
)

378 
	`D¥ötf
("t›b¨_buâ⁄u∞wödow %d\n", 
wödow
->
wid
);

380 
wödow
->
a˘ive
 = 
GR_FALSE
;

381 
	}
}

383 
	$˛o£buâ⁄_buâ⁄up
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
)

385 
wö
 *
pwö
 = 
	`föd_wödow
(
wödow
->
pid
);

386 
˛õ¡öfo
 *
ci
 = 
pwö
->
d©a
;

388 
	`D¥ötf
("˛o£buâ⁄_buâ⁄u∞wödow %d\n", 
wödow
->
wid
);

390 
wödow
->
a˘ive
 = 
GR_FALSE
;

391 
	`˛o£buâ⁄_exposuª
(
wödow
, 
NULL
);

393 
	`GrClo£Wödow
(
ci
->
cid
);

394 
	}
}

396 
	$t›b¨_mou£moved
(
wö
 *
wödow
, 
GR_EVENT_MOUSE
 *
evít
)

398 
posôi⁄
 *
pos
;

399 
GR_WM_PROPERTIES
 
¥›s
;

401 
	`D¥ötf
("t›b¨_mou£moved wödow %d\n", 
wödow
->
wid
);

403 if(!
wödow
->
a˘ive
) ;

405 
pos
 = (
posôi⁄
 *Ë
wödow
->
d©a
;

408 
	`GrGëWMPr›îtõs
(
wödow
->
pid
, &
¥›s
);

409 i‡(
¥›s
.
tôÀ
)

410 
	`‰ì
(
¥›s
.
tôÀ
);

411 
¥›s
.
Êags
 = 
GR_WM_FLAGS_PROPS
;

412 
¥›s
.¥›†|
GR_WM_PROPS_NOBACKGROUND
;

413 
	`GrSëWMPr›îtõs
(
wödow
->
pid
, &
¥›s
);

415 
	`GrMoveWödow
(
wödow
->
pid
, 
evít
->
roŸx
 - 
pos
->
x
,

416 
evít
->
roŸy
 - 
pos
->
y
);

418 
¥›s
.¥›†&~
GR_WM_PROPS_NOBACKGROUND
;

419 
	`GrSëWMPr›îtõs
(
wödow
->
pid
, &
¥›s
);

420 
	}
}

422 
	$À·b¨_mou£moved
(
wö
 *
wödow
, 
GR_EVENT_MOUSE
 *
evít
)

424 
GR_COORD
 
√wx
;

425 
GR_SIZE
 
√wwidth
;

426 
pos_size
 *
pos
;

428 
	`D¥ötf
("À·b¨_mou£moved wödow %d\n", 
wödow
->
wid
);

430 if(!
wödow
->
a˘ive
) ;

432 
pos
 = (
pos_size
 *Ë
wödow
->
d©a
;

434 
√wx
 = 
evít
->
roŸx
 - 
pos
->
xoff
;

435 
√wwidth
 = 
pos
->
width
 +Öos->
x‹ig
 - 
evít
->
roŸx
 -Öos->
xoff
;

437 
	`GrMoveWödow
(
wödow
->
pid
, 
√wx
, 
pos
->
y‹ig
);

438 
	`GrResizeWödow
(
wödow
->
pid
, 
√wwidth
, 
pos
->
height
);

439 
	}
}

441 
	$À·ªsize_mou£moved
(
wö
 *
wödow
, 
GR_EVENT_MOUSE
 *
evít
)

443 
GR_COORD
 
√wx
;

444 
GR_SIZE
 
√wwidth
, 
√wheight
;

445 
pos_size
 *
pos
;

447 
	`D¥ötf
("À·ªsize_mou£moved wödow %d\n", 
wödow
->
wid
);

449 if(!
wödow
->
a˘ive
) ;

451 
pos
 = (
pos_size
 *Ë
wödow
->
d©a
;

453 
√wx
 = 
evít
->
roŸx
 - 
pos
->
xoff
;

454 
√wheight
 = 
evít
->
roŸy
 - 
pos
->
y‹ig
;

455 
√wwidth
 = 
pos
->
width
 +Öos->
x‹ig
 - 
evít
->
roŸx
 -Öos->
xoff
;

457 
	`GrMoveWödow
(
wödow
->
pid
, 
√wx
, 
pos
->
y‹ig
);

458 
	`GrResizeWödow
(
wödow
->
pid
, 
√wwidth
, 
√wheight
);

459 
	}
}

461 
	$bŸtomb¨_mou£moved
(
wö
 *
wödow
, 
GR_EVENT_MOUSE
 *
evít
)

463 
GR_SIZE
 
√wheight
;

464 
pos_size
 *
pos
;

466 
	`D¥ötf
("bŸtomb¨_mou£moved wödow %d\n", 
wödow
->
wid
);

468 if(!
wödow
->
a˘ive
) ;

470 
pos
 = (
pos_size
 *Ë
wödow
->
d©a
;

472 
√wheight
 = 
evít
->
roŸy
 - 
pos
->
y‹ig
;

474 
	`GrResizeWödow
(
wödow
->
pid
, 
pos
->
width
, 
√wheight
);

475 
	}
}

477 
	$righåesize_mou£moved
(
wö
 *
wödow
, 
GR_EVENT_MOUSE
 *
evít
)

479 
GR_SIZE
 
√wwidth
, 
√wheight
;

480 
pos_size
 *
pos
;

482 
	`D¥ötf
("righåesize_mou£moved wödow %d\n", 
wödow
->
wid
);

484 if(!
wödow
->
a˘ive
) ;

486 
pos
 = (
pos_size
 *Ë
wödow
->
d©a
;

488 
√wheight
 = 
evít
->
roŸy
 - 
pos
->
y‹ig
;

489 
√wwidth
 = 
evít
->
roŸx
 - 
pos
->
x‹ig
;

491 
	`GrResizeWödow
(
wödow
->
pid
, 
√wwidth
, 
√wheight
);

492 
	}
}

494 
	$rightb¨_mou£moved
(
wö
 *
wödow
, 
GR_EVENT_MOUSE
 *
evít
)

496 
GR_SIZE
 
√wwidth
;

497 
pos_size
 *
pos
;

499 
	`D¥ötf
("rightb¨_mou£moved wödow %d\n", 
wödow
->
wid
);

501 if(!
wödow
->
a˘ive
) ;

503 
pos
 = (
pos_size
 *Ë
wödow
->
d©a
;

505 
√wwidth
 = 
evít
->
roŸx
 - 
pos
->
x‹ig
;

507 
	`GrResizeWödow
(
wödow
->
pid
, 
√wwidth
, 
pos
->
height
);

509 
	}
}

	@demos/nanowm/clients.c

7 
	~<°dio.h
>

8 
	~<°dlib.h
>

9 
	#MWINCLUDECOLORS


	)

10 
	~"«no-X.h
"

11 
	~"nxdøw.h
"

15 
	~"«nowm.h
"

18 
	#DEFAULT_WINDOW_STYLE
 (
GR_WM_PROPS_APPFRAME
 | 
GR_WM_PROPS_CAPTION
 |\

19 
GR_WM_PROPS_CLOSEBOX
)

	)

21 
GR_COORD
 
	gœ°x
 = 
FIRST_WINDOW_LOCATION
;

22 
GR_COORD
 
	gœ°y
 = 
FIRST_WINDOW_LOCATION
;

28 
	$√w_˛õ¡_wödow
(
GR_WINDOW_ID
 
wid
)

30 
wö
 
wödow
;

31 
GR_WINDOW_ID
 
pid
;

32 
GR_WINDOW_INFO
 
wöfo
;

33 
GR_COORD
 
x
, 
y
, 
width
, 
height
, 
xoff£t
, 
yoff£t
;

34 
GR_WM_PROPS
 
°yÀ
;

35 
GR_WM_PROPERTIES
 
¥›s
;

38 
	`GrGëWödowInfo
(
wid
, &
wöfo
);

39 
°yÀ
 = 
wöfo
.
¥›s
;

42 i‡(
wöfo
.
∑ª¡
 !
GR_ROOT_WINDOW_ID
 ||

43 (
°yÀ
 & 
GR_WM_PROPS_NODECORATE
))

47 i‡(
wöfo
.
b‹dîsize
) {

60 
	`GrUnm≠Wödow
(
wid
);

63 
¥›s
.
Êags
 = 
°yÀ
 | 
GR_WM_FLAGS_BORDERSIZE
;

64 
¥›s
.
b‹dîsize
 = 0;

65 
	`GrSëWMPr›îtõs
(
wid
, &
¥›s
);

68 
	`GrM≠Wödow
(
wid
);

73 i‡((
°yÀ
 & 
GR_WM_PROPS_APPMASK
Ë=
GR_WM_PROPS_APPWINDOW
) {

74 
GR_WM_PROPERTIES
 
¥
;

76 
°yÀ
 = (°yÀ & ~
GR_WM_PROPS_APPMASK
)|
DEFAULT_WINDOW_STYLE
;

77 
¥
.
Êags
 = 
GR_WM_FLAGS_PROPS
;

78 
¥
.
¥›s
 = 
°yÀ
;

79 
	`GrSëWMPr›îtõs
(
wid
, &
¥
);

83 i‡(
°yÀ
 & 
GR_WM_PROPS_APPFRAME
) {

84 
width
 = 
wöfo
.width + 
CXFRAME
;

85 
height
 = 
wöfo
.heighà+ 
CYFRAME
;

86 
xoff£t
 = 
CXBORDER
;

87 
yoff£t
 = 
CYBORDER
;

88 } i‡(
°yÀ
 & 
GR_WM_PROPS_BORDER
) {

89 
width
 = 
wöfo
.width + 2;

90 
height
 = 
wöfo
.height + 2;

91 
xoff£t
 = 1;

92 
yoff£t
 = 1;

94 
width
 = 
wöfo
.width;

95 
height
 = 
wöfo
.height;

96 
xoff£t
 = 0;

97 
yoff£t
 = 0;

99 i‡(
°yÀ
 & 
GR_WM_PROPS_CAPTION
) {

100 
height
 +
CYCAPTION
;

101 
yoff£t
 +
CYCAPTION
;

102 i‡(
°yÀ
 & 
GR_WM_PROPS_APPFRAME
) {

104 ++
height
;

105 ++
yoff£t
;

110 i‡(
°yÀ
 & 
GR_WM_PROPS_NOAUTOMOVE
) {

111 
x
 = 
wöfo
.x;

112 
y
 = 
wöfo
.y;

115 
x
 = 
œ°x
 + 
WINDOW_STEP
;

116 if((
x
 + 
width
Ë> 
si
.
cﬁs
)

117 
x
 = 
FIRST_WINDOW_LOCATION
;

118 
œ°x
 = 
x
;

119 
y
 = 
œ°y
 + 
WINDOW_STEP
;

120 if((
y
 + 
height
Ë> 
si
.
rows
)

121 
y
 = 
FIRST_WINDOW_LOCATION
;

122 
œ°y
 = 
y
;

126 
pid
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 
x
, 
y
, 
width
, 
height
,

127 0, 
LTGRAY
, 
BLACK
);

128 
wödow
.
wid
 = 
pid
;

129 
wödow
.
pid
 = 
GR_ROOT_WINDOW_ID
;

130 
wödow
.
ty≥
 = 
WINDOW_TYPE_CONTAINER
;

131 
wödow
.
sizög
 = 
GR_FALSE
;

132 
wödow
.
a˘ive
 = 0;

133 
wödow
.
d©a
 = 
NULL
;

134 
wödow
.
˛õ¡id
 = 
wid
;

135 
	`add_wödow
(&
wödow
);

138 
¥›s
.
Êags
 = 
GR_WM_FLAGS_PROPS
;

139 
¥›s
.¥›†
°yÀ
 | 
GR_WM_PROPS_NOBACKGROUND
;

140 
	`GrSëWMPr›îtõs
(
pid
, &
¥›s
);

142 
	`D¥ötf
("New clõ¡ wödow %d c⁄èöî %d\n", 
wid
, 
pid
);

144 
	`GrSñe˘Evíts
(
pid
, 
GR_EVENT_MASK_CHLD_UPDATE


145 | 
GR_EVENT_MASK_BUTTON_UP
 | 
GR_EVENT_MASK_BUTTON_DOWN


146 | 
GR_EVENT_MASK_MOUSE_POSITION
 | 
GR_EVENT_MASK_EXPOSURE
);

149 
	`GrRï¨ítWödow
(
wid
, 
pid
, 
xoff£t
, 
yoff£t
);

152 
	`GrM≠Wödow
(
pid
);

154 
	`GrSëFocus
(
wid
);

157 
wödow
.
wid
 = wid;

158 
wödow
.
pid
 =Öid;

159 
wödow
.
ty≥
 = 
WINDOW_TYPE_CLIENT
;

160 
wödow
.
sizög
 = 
GR_FALSE
;

161 
wödow
.
a˘ive
 = 0;

162 
wödow
.
˛õ¡id
 = 0;

163 
wödow
.
d©a
 = 
NULL
;

164 
	`add_wödow
(&
wödow
);

168 
nid
 = 
	`GrNewWödow
(
pid
, 0, 0, 
TITLE_BAR_HEIGHT
, TITLE_BAR_HEIGHT, 0,

169 
LTGRAY
, 
BLACK
);

170 
wödow
.
wid
 = 
nid
;

171 
wödow
.
pid
 =Öid;

172 
wödow
.
ty≥
 = 
WINDOW_TYPE_UTILITYBUTTON
;

173 
wödow
.
a˘ive
 = 
GR_FALSE
;

174 
wödow
.
d©a
 = 
NULL
;

175 
	`add_wödow
(&
wödow
);

177 
	`GrSñe˘Evíts
(
nid
, 
GR_EVENT_MASK_BUTTON_DOWN
 | 
GR_EVENT_MASK_BUTTON_UP


178 | 
GR_EVENT_MASK_EXPOSURE


179 | 
GR_EVENT_MASK_MOUSE_EXIT
);

180 
	`GrM≠Wödow
(
nid
);

181 
	`GrBôm≠
(
nid
, 
buâ⁄sgc
, 0, 0, 
TITLE_BAR_HEIGHT
, TITLE_BAR_HEIGHT,

182 
utûôybuâ⁄_nŸ¥es£d
);

184 
nid
 = 
	`GrNewWödow
(
pid
, 
TITLE_BAR_HEIGHT
 + 1, 1, 
width
 - (4 *

185 
TITLE_BAR_HEIGHT
Ë- 3, TITLE_BAR_HEIGHT - 3, 1, 
LTGRAY
,

186 
BLACK
);

187 
wödow
.
wid
 = 
nid
;

188 
wödow
.
pid
 =Öid;

189 
wödow
.
ty≥
 = 
WINDOW_TYPE_TOPBAR
;

190 
wödow
.
a˘ive
 = 
GR_FALSE
;

191 
wödow
.
d©a
 = 
NULL
;

193 
	`add_wödow
(&
wödow
);

195 
	`GrSñe˘Evíts
(
nid
, 
GR_EVENT_MASK_BUTTON_DOWN
 | 
GR_EVENT_MASK_BUTTON_UP


196 | 
GR_EVENT_MASK_EXPOSURE


197 | 
GR_EVENT_MASK_MOUSE_POSITION
);

198 
	`GrM≠Wödow
(
nid
);

200 
nid
 = 
	`GrNewWödow
(
pid
, 
width
 - (3 * 
TITLE_BAR_HEIGHT
), 0,

201 
TITLE_BAR_HEIGHT
, TITLE_BAR_HEIGHT, 0, 
LTGRAY
, 
BLACK
);

202 
wödow
.
wid
 = 
nid
;

203 
wödow
.
pid
 =Öid;

204 
wödow
.
ty≥
 = 
WINDOW_TYPE_ICONISEBUTTON
;

205 
wödow
.
a˘ive
 = 
GR_FALSE
;

206 
wödow
.
d©a
 = 
NULL
;

207 
	`add_wödow
(&
wödow
);

209 
	`GrSñe˘Evíts
(
nid
, 
GR_EVENT_MASK_BUTTON_DOWN
 | 
GR_EVENT_MASK_BUTTON_UP


210 | 
GR_EVENT_MASK_EXPOSURE


211 | 
GR_EVENT_MASK_MOUSE_EXIT
);

212 
	`GrM≠Wödow
(
nid
);

213 
	`GrBôm≠
(
nid
, 
buâ⁄sgc
, 0, 0, 
TITLE_BAR_HEIGHT
, TITLE_BAR_HEIGHT,

214 
ic⁄i£buâ⁄_nŸ¥es£d
);

216 
nid
 = 
	`GrNewWödow
(
pid
, 
width
 - (2 * 
TITLE_BAR_HEIGHT
), 0,

217 
TITLE_BAR_HEIGHT
, TITLE_BAR_HEIGHT, 0, 
LTGRAY
, 
BLACK
);

218 
wödow
.
wid
 = 
nid
;

219 
wödow
.
pid
 =Öid;

220 
wödow
.
ty≥
 = 
WINDOW_TYPE_MAXIMISEBUTTON
;

221 
wödow
.
a˘ive
 = 
GR_FALSE
;

222 
wödow
.
d©a
 = 
NULL
;

223 
	`add_wödow
(&
wödow
);

225 
	`GrSñe˘Evíts
(
nid
, 
GR_EVENT_MASK_BUTTON_DOWN
 | 
GR_EVENT_MASK_BUTTON_UP


226 | 
GR_EVENT_MASK_EXPOSURE


227 | 
GR_EVENT_MASK_MOUSE_EXIT
);

228 
	`GrM≠Wödow
(
nid
);

229 
	`GrBôm≠
(
nid
, 
buâ⁄sgc
, 0, 0, 
TITLE_BAR_HEIGHT
, TITLE_BAR_HEIGHT,

230 
maximi£buâ⁄_nŸ¥es£d
);

232 
nid
 = 
	`GrNewWödow
(
pid
, 
width
 - 
TITLE_BAR_HEIGHT
, 0,

233 
TITLE_BAR_HEIGHT
, TITLE_BAR_HEIGHT, 0, 
LTGRAY
, 
BLACK
);

234 
wödow
.
wid
 = 
nid
;

235 
wödow
.
pid
 =Öid;

236 
wödow
.
ty≥
 = 
WINDOW_TYPE_CLOSEBUTTON
;

237 
wödow
.
a˘ive
 = 
GR_FALSE
;

238 
wödow
.
d©a
 = 
NULL
;

239 
	`add_wödow
(&
wödow
);

241 
	`GrSñe˘Evíts
(
nid
, 
GR_EVENT_MASK_BUTTON_DOWN
 | 
GR_EVENT_MASK_BUTTON_UP


242 | 
GR_EVENT_MASK_EXPOSURE


243 | 
GR_EVENT_MASK_MOUSE_EXIT
);

244 
	`GrM≠Wödow
(
nid
);

245 
	`GrBôm≠
(
nid
, 
buâ⁄sgc
, 0, 0, 
TITLE_BAR_HEIGHT
, TITLE_BAR_HEIGHT,

246 
˛o£buâ⁄_nŸ¥es£d
);

248 
nid
 = 
	`GrNewWödow
(
pid
, 1, 
TITLE_BAR_HEIGHT
 + 1, 
BORDER_WIDTHS
 - 2,

249 
height
 - 
TITLE_BAR_HEIGHT
 - 
BORDER_WIDTHS
 - 1,

250 1, 
LTGRAY
, 
BLACK
);

251 
wödow
.
wid
 = 
nid
;

252 
wödow
.
pid
 =Öid;

253 
wödow
.
ty≥
 = 
WINDOW_TYPE_LEFTBAR
;

254 
wödow
.
a˘ive
 = 
GR_FALSE
;

255 
wödow
.
d©a
 = 
NULL
;

257 
	`add_wödow
(&
wödow
);

259 
	`GrSëCurs‹
(
nid
, 
h‹iz⁄èl_ªsize_cﬁumns
, 
h‹iz⁄èl_ªsize_rows
,

260 
h‹iz⁄èl_ªsize_hŸx
, 
h‹iz⁄èl_ªsize_hŸy
,

261 
BLACK
, 
WHITE
, 
h‹iz⁄èl_ªsize_fg
,

262 
h‹iz⁄èl_ªsize_bg
);

264 
	`GrSñe˘Evíts
(
nid
, 
GR_EVENT_MASK_BUTTON_DOWN
 | 
GR_EVENT_MASK_BUTTON_UP


265 | 
GR_EVENT_MASK_MOUSE_POSITION
);

267 
	`GrM≠Wödow
(
nid
);

269 
nid
 = 
	`GrNewWödow
(
pid
, 1, 
height
 - 
BORDER_WIDTHS
 + 1, BORDER_WIDTHS - 2,

270 
BORDER_WIDTHS
 - 2, 1, 
LTGRAY
, 
BLACK
);

271 
wödow
.
wid
 = 
nid
;

272 
wödow
.
pid
 =Öid;

273 
wödow
.
ty≥
 = 
WINDOW_TYPE_LEFTRESIZE
;

274 
wödow
.
a˘ive
 = 
GR_FALSE
;

275 
wödow
.
d©a
 = 
NULL
;

278 
	`add_wödow
(&
wödow
);

280 
	`GrSëCurs‹
(
nid
, 
À·h™d_ªsize_cﬁumns
, 
À·h™d_ªsize_rows
,

281 
À·h™d_ªsize_hŸx
, 
À·h™d_ªsize_hŸy
,

282 
BLACK
, 
WHITE
, 
À·h™d_ªsize_fg
, 
À·h™d_ªsize_bg
);

284 
	`GrSñe˘Evíts
(
nid
, 
GR_EVENT_MASK_BUTTON_DOWN
 | 
GR_EVENT_MASK_BUTTON_UP


285 | 
GR_EVENT_MASK_MOUSE_POSITION
);

287 
	`GrM≠Wödow
(
nid
);

289 
nid
 = 
	`GrNewWödow
(
pid
, 
BORDER_WIDTHS
, 
height
 - BORDER_WIDTHS + 1,

290 
width
 - (2 * 
BORDER_WIDTHS
), BORDER_WIDTHS - 2, 1,

291 
LTGRAY
, 
BLACK
);

292 
wödow
.
wid
 = 
nid
;

293 
wödow
.
pid
 =Öid;

294 
wödow
.
ty≥
 = 
WINDOW_TYPE_BOTTOMBAR
;

295 
wödow
.
a˘ive
 = 
GR_FALSE
;

296 
wödow
.
d©a
 = 
NULL
;

297 
	`add_wödow
(&
wödow
);

299 
	`GrSëCurs‹
(
nid
, 
vîtiˇl_ªsize_cﬁumns
, 
vîtiˇl_ªsize_rows
,

300 
vîtiˇl_ªsize_hŸx
, 
vîtiˇl_ªsize_hŸy
,

301 
BLACK
, 
WHITE
, 
vîtiˇl_ªsize_fg
, 
vîtiˇl_ªsize_bg
);

303 
	`GrSñe˘Evíts
(
nid
, 
GR_EVENT_MASK_BUTTON_DOWN
 | 
GR_EVENT_MASK_BUTTON_UP


304 | 
GR_EVENT_MASK_MOUSE_POSITION
);

306 
	`GrM≠Wödow
(
nid
);

308 
nid
 = 
	`GrNewWödow
(
pid
, 
width
 - 
BORDER_WIDTHS
 + 1,

309 
height
 - 
BORDER_WIDTHS
 + 1, BORDER_WIDTHS - 2,

310 
BORDER_WIDTHS
 - 2, 1, 
LTGRAY
, 
BLACK
);

311 
wödow
.
wid
 = 
nid
;

312 
wödow
.
pid
 =Öid;

313 
wödow
.
ty≥
 = 
WINDOW_TYPE_RIGHTRESIZE
;

314 
wödow
.
a˘ive
 = 
GR_FALSE
;

315 
wödow
.
d©a
 = 
NULL
;

317 
	`add_wödow
(&
wödow
);

319 
	`GrSëCurs‹
(
nid
, 
righth™d_ªsize_cﬁumns
, 
righth™d_ªsize_rows
,

320 
righth™d_ªsize_hŸx
, 
righth™d_ªsize_hŸy
,

321 
BLACK
, 
WHITE
, 
righth™d_ªsize_fg
, 
righth™d_ªsize_bg
);

323 
	`GrSñe˘Evíts
(
nid
, 
GR_EVENT_MASK_BUTTON_DOWN
 | 
GR_EVENT_MASK_BUTTON_UP


324 | 
GR_EVENT_MASK_MOUSE_POSITION
);

326 
	`GrM≠Wödow
(
nid
);

328 
nid
 = 
	`GrNewWödow
(
pid
, 
width
 - 
BORDER_WIDTHS
 + 1, 
TITLE_BAR_HEIGHT
 + 1,

329 
BORDER_WIDTHS
 - 2, 
height
 - 
TITLE_BAR_HEIGHT
 - BORDER_WIDTHS -1,

330 1, 
LTGRAY
, 
BLACK
);

331 
wödow
.
wid
 = 
nid
;

332 
wödow
.
pid
 =Öid;

333 
wödow
.
ty≥
 = 
WINDOW_TYPE_RIGHTBAR
;

334 
wödow
.
a˘ive
 = 
GR_FALSE
;

335 
wödow
.
d©a
 = 
NULL
;

337 
	`add_wödow
(&
wödow
);

339 
	`GrSëCurs‹
(
nid
, 
h‹iz⁄èl_ªsize_cﬁumns
, 
h‹iz⁄èl_ªsize_rows
,

340 
h‹iz⁄èl_ªsize_hŸx
, 
h‹iz⁄èl_ªsize_hŸy
,

341 
BLACK
, 
WHITE
, 
h‹iz⁄èl_ªsize_fg
,

342 
h‹iz⁄èl_ªsize_bg
);

344 
	`GrSñe˘Evíts
(
nid
, 
GR_EVENT_MASK_BUTTON_DOWN
 | 
GR_EVENT_MASK_BUTTON_UP


345 | 
GR_EVENT_MASK_MOUSE_POSITION
);

346 
	`GrM≠Wödow
(
nid
);

349 
	}
}

351 
	$˛õ¡_wödow_ªm≠
(
wö
 *
wödow
) {

353 
GR_WINDOW_INFO
 
wöfo
;

354 
wö
 *
pwö
;

356 if(!(
pwö
 = 
	`föd_wödow
(
wödow
->
pid
))) {

357 
	`Ârötf
(
°dîr
, "Couldn't findÖarent of destroyed window "

358 "%d\n", 
wödow
->
wid
);

362 
	`D¥ötf
("˛õ¡_wödow_ªm≠ %d (∑ª¡ %d)\n", 
wödow
->
wid
, wödow->
pid
);

363 
	`GrGëWödowInfo
(
pwö
->
wid
, &
wöfo
);

364 i‡(
wöfo
.
m≠≥d
 =
GR_FALSE
Ë
	`GrM≠Wödow
(
pwö
->
wid
);

365 
	}
}

369 
	$˛õ¡_wödow_unm≠
(
wö
 *
wödow
) {

370 
wö
 *
pwö
;

372 if(!(
pwö
 = 
	`föd_wödow
(
wödow
->
pid
))) {

373 
	`Ârötf
(
°dîr
, "Couldn't findÖarent of destroyed window "

374 "%d\n", 
wödow
->
wid
);

378 
	`GrUnm≠Wödow
(
pwö
->
wid
);

379 
	}
}

382 
	$˛õ¡_wödow_ªsize
(
wö
 *
wödow
)

384 
wö
 *
pwö
;

385 
GR_COORD
 
width
, 
height
;

386 
GR_WM_PROPS
 
°yÀ
;

387 
GR_WINDOW_INFO
 
wöfo
;

389 
	`D¥ötf
("˛õ¡_wödow_ªsizê%d (∑ª¡ %d)\n", 
wödow
->
wid
, wödow->
pid
);

390 if(!(
pwö
 = 
	`föd_wödow
(
wödow
->
pid
))) {

391 
	`Ârötf
(
°dîr
, "Couldn'àfödÖ¨íào‡ªsizêwödow %d\n", 
wödow
->
wid
);

396 
	`GrGëWödowInfo
(
pwö
->
˛õ¡id
, &
wöfo
);

397 
°yÀ
 = 
wöfo
.
¥›s
;

399 i‡(
°yÀ
 & 
GR_WM_PROPS_APPFRAME
) {

400 
width
 = 
wöfo
.width + 
CXFRAME
;

401 
height
 = 
wöfo
.heighà+ 
CYFRAME
;

402 } i‡(
°yÀ
 & 
GR_WM_PROPS_BORDER
) {

403 
width
 = 
wöfo
.width + 2;

404 
height
 = 
wöfo
.height + 2;

406 
width
 = 
wöfo
.width;

407 
height
 = 
wöfo
.height;

409 i‡(
°yÀ
 & 
GR_WM_PROPS_CAPTION
) {

410 
height
 +
CYCAPTION
;

411 i‡(
°yÀ
 & 
GR_WM_PROPS_APPFRAME
) {

413 ++
height
;

418 
	`GrResizeWödow
(
pwö
->
wid
, 
width
, 
height
);

419 
	}
}

425 
	$˛õ¡_wödow_de°roy
(
wö
 *
wödow
)

427 
wö
 *
pwö
;

428 
GR_WINDOW_ID
 
pid
;

430 
	`D¥ötf
("Clõ¡ wödow %d ha†bì¿de°royed\n", 
wödow
->
wid
);

432 if(!(
pwö
 = 
	`föd_wödow
(
wödow
->
pid
))) {

433 
	`Ârötf
(
°dîr
, "Couldn't findÖarent of destroyed window "

434 "%d\n", 
wödow
->
wid
);

439 
pid
 = 
pwö
->
wid
;

440 
	`ªmove_wödow_™d_chûdªn
(
pwö
);

442 
	`D¥ötf
("De°royög c⁄èöî %d\n", 
pid
);

443 
	`GrDe°royWödow
(
pid
);

444 
	}
}

	@demos/nanowm/events.c

7 
	~<°dio.h
>

8 
	~<°dlib.h
>

9 
	#MWINCLUDECOLORS


	)

10 
	~"«no-X.h
"

14 
	~"«nowm.h
"

16 
	$do_exposuª
(
GR_EVENT_EXPOSURE
 *
evít
)

18 
wö
 *
wödow
;

20 
	`D¥ötf
("do_exposure: wid %d, x %d, y %d, width %d, height %d\n",

21 
evít
->
wid
,Évít->
x
,Évít->
y
,Évít->
width
,Évít->
height
);

23 if(!(
wödow
 = 
	`föd_wödow
(
evít
->
wid
))) ;

25 
wödow
->
ty≥
) {

26 
WINDOW_TYPE_CONTAINER
:

27 
	`c⁄èöî_exposuª
(
wödow
, 
evít
);

30 
	`¥ötf
("UnhandledÉxposure on window %d "

31 "—y≥ %d)\n", 
wödow
->
wid
, wödow->
ty≥
);

35 
	}
}

37 
	$do_buâ⁄_down
(
GR_EVENT_BUTTON
 *
evít
)

39 
wö
 *
wödow
;

41 
	`D¥ötf
("do_button_down: wid %d, subwid %d,Ñootx %d,Ñooty %d, x %d, "

43 
evít
->
wid
,Évít->
subwid
,Évít->
roŸx
,Évít->
roŸy
,Évít->
x
,

44 
evít
->
y
,Évít->
buâ⁄s
,Évít->
ch™gebuâ⁄s
,

45 
evít
->
modifõrs
);

47 if(!(
wödow
 = 
	`föd_wödow
(
evít
->
wid
))) ;

49 
wödow
->
ty≥
) {

50 
WINDOW_TYPE_CONTAINER
:

51 
	`c⁄èöî_buâ⁄down
(
wödow
, 
evít
);

54 
	`¥ötf
("Unhandled button down on window %d "

55 "—y≥ %d)\n", 
wödow
->
wid
, wödow->
ty≥
);

58 
	}
}

60 
	$do_buâ⁄_up
(
GR_EVENT_BUTTON
 *
evít
)

62 
wö
 *
wödow
;

64 
	`D¥ötf
("do_button_up: wid %d, subwid %d,Ñootx %d,Ñooty %d, x %d, "

66 
evít
->
wid
,Évít->
subwid
,Évít->
roŸx
,Évít->
roŸy
,Évít->
x
,

67 
evít
->
y
,Évít->
buâ⁄s
,Évít->
ch™gebuâ⁄s
,

68 
evít
->
modifõrs
);

70 if(!(
wödow
 = 
	`föd_wödow
(
evít
->
wid
))) ;

72 
wödow
->
ty≥
) {

73 
WINDOW_TYPE_CONTAINER
:

74 
	`c⁄èöî_buâ⁄up
(
wödow
, 
evít
);

77 
	`¥ötf
("Unhandled button up on window %d "

78 "—y≥ %d)\n", 
wödow
->
wid
, wödow->
ty≥
);

81 
	}
}

83 
	$do_mou£_íãr
(
GR_EVENT_GENERAL
 *
evít
)

85 
wö
 *
wödow
;

87 
	`D¥ötf
("do_mou£_íãr: wid %d\n", 
evít
->
wid
);

89 if(!(
wödow
 = 
	`föd_wödow
(
evít
->
wid
)))

92 
wödow
->
ty≥
) {

94 
	`¥ötf
("Unhandled mouseÉnter from window %d "

95 "—y≥ %d)\n", 
wödow
->
wid
, wödow->
ty≥
);

98 
	}
}

100 
	$do_mou£_exô
(
GR_EVENT_GENERAL
 *
evít
)

102 
wö
 *
wödow
;

104 
	`D¥ötf
("do_mou£_exô: wid %d\n", 
evít
->
wid
);

106 if(!(
wödow
 = 
	`föd_wödow
(
evít
->
wid
))) ;

108 
wödow
->
ty≥
) {

110 
	`¥ötf
("Unhandled mouseÉxit from window %d "

111 "—y≥ %d)\n", 
wödow
->
wid
, wödow->
ty≥
);

114 
	}
}

116 
	$do_mou£_moved
(
GR_EVENT_MOUSE
 *
evít
)

118 
wö
 *
wödow
;

120 
	`D¥ötf
("do_mouse_moved: wid %d, subwid %d,Ñootx %d,Ñooty %d, x %d, "

121 "y %d, buâ⁄†%d, modifõr†%d\n", 
evít
->
wid
,Évít->
subwid
,

122 
evít
->
roŸx
,Évít->
roŸy
,Évít->
x
,Évít->
y
,Évít->
buâ⁄s
,

123 
evít
->
modifõrs
);

125 if(!(
wödow
 = 
	`föd_wödow
(
evít
->
wid
))) ;

127 
wödow
->
ty≥
) {

128 
WINDOW_TYPE_CONTAINER
:

129 
	`c⁄èöî_mou£moved
(
wödow
, 
evít
);

132 
	`¥ötf
("Unhandled mouse movement in window %d "

133 "—y≥ %d)\n", 
wödow
->
wid
, wödow->
ty≥
);

136 
	}
}

138 
	$do_focus_ö
(
GR_EVENT_GENERAL
 *
evít
)

140 
wö
 *
wödow
;

142 
	`¥ötf
("do_focus_ö: wid %d\n", 
evít
->
wid
);

144 if(!(
wödow
 = 
	`föd_wödow
(
evít
->
wid
)))

147 
wödow
->
ty≥
) {

149 
	`¥ötf
("Unhandled focus in from window %d "

150 "—y≥ %d)\n", 
wödow
->
wid
, wödow->
ty≥
);

153 
	}
}

155 
	$do_key_down
(
GR_EVENT_KEYSTROKE
 *
evít
)

157 
	`D¥ötf
("do_key_down: wid %d, subwid %d,Ñootx %d,Ñooty %d, x %d, "

159 
evít
->
wid
,Évít->
subwid
,Évít->
roŸx
,

160 
evít
->
roŸy
,Évít->
x
,Évít->
y
,Évít->
buâ⁄s
,

161 
evít
->
modifõrs
,Évít->
ch
,Évít->
sˇncode
);

164 
	}
}

166 
	$do_key_up
(
GR_EVENT_KEYSTROKE
 *
evít
)

168 
	`D¥ötf
("do_key_up: wid %d, subwid %d,Ñootx %d,Ñooty %d, x %d, "

170 
evít
->
wid
,Évít->
subwid
,Évít->
roŸx
,

171 
evít
->
roŸy
,Évít->
x
,Évít->
y
,Évít->
buâ⁄s
,

172 
evít
->
modifõrs
,Évít->
ch
,Évít->
sˇncode
);

173 
	}
}

175 
	$do_upd©e
(
GR_EVENT_UPDATE
 *
evít
)

177 
wö
 *
wödow
;

179 
	`D¥ötf
("do_update: wid %d, subwid %d, x %d, y %d, width %d, height %d, "

180 "uty≥ %d\n", 
evít
->
wid
,Évít->
subwid
,Évít->
x
,Évít->
y
,Évít->
width
,

181 
evít
->
height
,Évít->
uty≥
);

183 if(!(
wödow
 = 
	`föd_wödow
(
evít
->
subwid
))) {

184 i‡(
evít
->
uty≥
 =
GR_UPDATE_MAP
Ë
	`√w_˛õ¡_wödow
”vít->
subwid
);

188 if(
wödow
->
ty≥
 =
WINDOW_TYPE_CONTAINER
) {

189 i‡(
evít
->
uty≥
 =
GR_UPDATE_ACTIVATE
)

190 
	`ªdøw_nˇªa
(
wödow
);

194 i‡(
wödow
->
ty≥
 =
WINDOW_TYPE_CLIENT
) {

195 if(
evít
->
uty≥
 =
GR_UPDATE_MAP
Ë
	`˛õ¡_wödow_ªm≠
(
wödow
);

196 if(
evít
->
uty≥
 =
GR_UPDATE_DESTROY
Ë
	`˛õ¡_wödow_de°roy
(
wödow
);

197 if(
evít
->
uty≥
 =
GR_UPDATE_UNMAP
Ë
	`˛õ¡_wödow_unm≠
(
wödow
);

198 if(
evít
->
uty≥
 =
GR_UPDATE_SIZE
Ë
	`˛õ¡_wödow_ªsize
(
wödow
);

200 
	}
}

	@demos/nanowm/nanowm.c

8 
	~<°dio.h
>

9 
	~<°dlib.h
>

10 
	#MWINCLUDECOLORS


	)

11 
	~"«no-X.h
"

15 
	~"«nowm.h
"

17 
GR_SCREEN_INFO
 
	gsi
;

19 
	$maö
(
¨gc
, *
¨gv
[])

21 
GR_EVENT
 
evít
;

22 
GR_WM_PROPERTIES
 
¥›s
;

23 
wö
 
wödow
;

25 if(
	`GrO≥n
() < 0) {

26 
	`Ârötf
(
°dîr
, "Couldn't connectÅo Nano-X server!\n");

27 
	`exô
(1);

31 
	`GrSëEº‹H™dÀr
(
NULL
);

33 
	`GrGëS¸ìnInfo
(&
si
);

36 
wödow
.
wid
 = 
GR_ROOT_WINDOW_ID
;

37 
wödow
.
pid
 = 
GR_ROOT_WINDOW_ID
;

38 
wödow
.
ty≥
 = 
WINDOW_TYPE_ROOT
;

39 
wödow
.
˛õ¡id
 = 1;

40 
wödow
.
sizög
 = 
GR_FALSE
;

41 
wödow
.
a˘ive
 = 0;

42 
wödow
.
d©a
 = 
NULL
;

43 
	`add_wödow
(&
wödow
);

45 
	`GrSñe˘Evíts
(
GR_ROOT_WINDOW_ID
, 
GR_EVENT_MASK_CHLD_UPDATE
);

48 
¥›s
.
Êags
 = 
GR_WM_FLAGS_BACKGROUND
;

49 
¥›s
.
background
 = 
	`GrGëSysCﬁ‹
(
GR_COLOR_DESKTOP
);

50 
	`GrSëWMPr›îtõs
(
GR_ROOT_WINDOW_ID
, &
¥›s
);

53 
	`GrGëNextEvít
(&
evít
);

55 
evít
.
ty≥
) {

56 
GR_EVENT_TYPE_ERROR
:

57 
	`¥ötf
("«nowm:Éº‹ %d\n", 
evít
.
îr‹
.
code
);

59 
GR_EVENT_TYPE_EXPOSURE
:

60 
	`do_exposuª
(&
evít
.
exposuª
);

62 
GR_EVENT_TYPE_BUTTON_DOWN
:

63 
	`do_buâ⁄_down
(&
evít
.
buâ⁄
);

65 
GR_EVENT_TYPE_BUTTON_UP
:

66 
	`do_buâ⁄_up
(&
evít
.
buâ⁄
);

68 
GR_EVENT_TYPE_MOUSE_ENTER
:

69 
	`do_mou£_íãr
(&
evít
.
gíîÆ
);

71 
GR_EVENT_TYPE_MOUSE_EXIT
:

72 
	`do_mou£_exô
(&
evít
.
gíîÆ
);

74 
GR_EVENT_TYPE_MOUSE_POSITION
:

75 
	`do_mou£_moved
(&
evít
.
mou£
);

77 
GR_EVENT_TYPE_KEY_DOWN
:

78 
	`do_key_down
(&
evít
.
key°roke
);

80 
GR_EVENT_TYPE_KEY_UP
:

81 
	`do_key_up
(&
evít
.
key°roke
);

83 
GR_EVENT_TYPE_FOCUS_IN
:

84 
	`do_focus_ö
(&
evít
.
gíîÆ
);

86 
GR_EVENT_TYPE_CHLD_UPDATE
:

87 
	`do_upd©e
(&
evít
.
upd©e
);

90 
	`Ârötf
(
°dîr
, "Got unexpectedÉvent %d\n",

91 
evít
.
ty≥
);

96 
	`GrClo£
();

97 
	}
}

	@demos/nanowm/nanowm.h

6 #i‚de‡
__NANOWM_H


7 
	#__NANOWM_H


	)

9 #ifde‡
WMDEBUG


10 
	#D¥ötf
 
¥ötf


	)

12 
	#D¥ötf
(
ign‹e
...)

	)

16 
	#FIRST_WINDOW_LOCATION
 2

	)

19 
	#WINDOW_STEP
 20

	)

23 
	mWINDOW_TYPE_ROOT
,

24 
	mWINDOW_TYPE_CONTAINER
,

25 
WINDOW_TYPE_CLIENT


52 
	swödowli°
 {

53 
GR_WINDOW_ID
 
	mwid
;

54 
GR_WINDOW_ID
 
	mpid
;

55 
GR_WINDOW_ID
 
	m˛õ¡id
;

56 
	mty≥
;

57 
	msizög
;

58 
	ma˘ive
;

59 *
	md©a
;

60 
wödowli°
 *
	m√xt
;

62 
wödowli°
 
	twö
;

67 
	sposôi⁄
 {

68 
GR_COORD
 
	mx
;

69 
GR_COORD
 
	my
;

76 
	spos_size
 {

77 
GR_COORD
 
	mxoff
;

78 
GR_COORD
 
	myoff
;

79 
GR_COORD
 
	mx‹ig
;

80 
GR_COORD
 
	my‹ig
;

81 
GR_SIZE
 
	mwidth
;

82 
GR_SIZE
 
	mheight
;

89 
	s˛õ¡öfo
 {

90 
GR_WINDOW_ID
 
	mcid
;

95 
wö
 *
föd_wödow
(
GR_WINDOW_ID
 
wid
);

96 
add_wödow
(
wö
 *
wödow
);

97 
ªmove_wödow
(
wö
 *
wödow
);

98 
ªmove_wödow_™d_chûdªn
(
wö
 *
wödow
);

99 
√w_˛õ¡_wödow
(
GR_WINDOW_ID
 
wid
);

100 
˛õ¡_wödow_ªsize
(
wö
 *
wödow
);

101 
˛õ¡_wödow_de°roy
(
wö
 *
wödow
);

103 
˛õ¡_wödow_ªm≠
(
wö
 *
wödow
);

104 
˛õ¡_wödow_unm≠
(
wö
 *
wödow
);

106 
ªdøw_nˇªa
(
wö
 *
wödow
);

107 
do_exposuª
(
GR_EVENT_EXPOSURE
 *
evít
);

108 
do_buâ⁄_down
(
GR_EVENT_BUTTON
 *
evít
);

109 
do_buâ⁄_up
(
GR_EVENT_BUTTON
 *
evít
);

110 
do_mou£_íãr
(
GR_EVENT_GENERAL
 *
evít
);

111 
do_mou£_exô
(
GR_EVENT_GENERAL
 *
evít
);

112 
do_mou£_moved
(
GR_EVENT_MOUSE
 *
evít
);

113 
do_focus_ö
(
GR_EVENT_GENERAL
 *
evít
);

114 
do_key_down
(
GR_EVENT_KEYSTROKE
 *
evít
);

115 
do_key_up
(
GR_EVENT_KEYSTROKE
 *
evít
);

116 
do_focus_ö
(
GR_EVENT_GENERAL
 *
evít
);

117 
do_focus_out
(
GR_EVENT_GENERAL
 *
evít
);

118 
do_upd©e
(
GR_EVENT_UPDATE
 *
evít
);

119 
do_chld_upd©e
(
GR_EVENT_UPDATE
 *
evít
);

120 
roŸwödow_exposuª
(
wö
 *
wödow
, 
GR_EVENT_EXPOSURE
 *
evít
);

121 
c⁄èöî_exposuª
(
wö
 *
wödow
, 
GR_EVENT_EXPOSURE
 *
evít
);

122 
t›b¨_exposuª
(
wö
 *
wödow
, 
GR_EVENT_EXPOSURE
 *
evít
);

123 
˛o£buâ⁄_exposuª
(
wö
 *
wödow
, 
GR_EVENT_EXPOSURE
 *
evít
);

124 
maximi£buâ⁄_exposuª
(
wö
 *
wödow
, 
GR_EVENT_EXPOSURE
 *
evít
);

125 
ª°‹ebuâ⁄_exposuª
(
wö
 *
wödow
, 
GR_EVENT_EXPOSURE
 *
evít
);

126 
ic⁄i£buâ⁄_exposuª
(
wö
 *
wödow
, 
GR_EVENT_EXPOSURE
 *
evít
);

127 
utûôybuâ⁄_exposuª
(
wö
 *
wödow
, 
GR_EVENT_EXPOSURE
 *
evít
);

128 
utûôymíu_exposuª
(
wö
 *
wödow
, 
GR_EVENT_EXPOSURE
 *
evít
);

129 
utûôymíuíåy_exposuª
(
wö
 *
wödow
, 
GR_EVENT_EXPOSURE
 *
evít
);

130 
roŸmíu_exposuª
(
wö
 *
wödow
, 
GR_EVENT_EXPOSURE
 *
evít
);

131 
roŸmíuíåy_exposuª
(
wö
 *
wödow
, 
GR_EVENT_EXPOSURE
 *
evít
);

132 
ic⁄_exposuª
(
wö
 *
wödow
, 
GR_EVENT_EXPOSURE
 *
evít
);

133 
roŸwödow_buâ⁄down
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

134 
c⁄èöî_buâ⁄down
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

135 
t›b¨_buâ⁄down
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

136 
ªsizeb¨_buâ⁄down
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

137 
˛o£buâ⁄_buâ⁄down
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

138 
maximi£buâ⁄_buâ⁄down
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

139 
ª°‹ebuâ⁄_buâ⁄down
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

140 
ic⁄i£buâ⁄_buâ⁄down
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

141 
utûôybuâ⁄_buâ⁄down
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

142 
ic⁄_buâ⁄down
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

143 
roŸwödow_buâ⁄up
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

144 
c⁄èöî_buâ⁄up
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

145 
t›b¨_buâ⁄up
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

146 
ªsizeb¨_buâ⁄up
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

147 
˛o£buâ⁄_buâ⁄up
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

148 
maximi£buâ⁄_buâ⁄up
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

149 
ª°‹ebuâ⁄_buâ⁄up
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

150 
ic⁄i£buâ⁄_buâ⁄up
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

151 
utûôybuâ⁄_buâ⁄up
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

152 
ic⁄_buâ⁄up
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

153 
utûôymíuíåy_buâ⁄up
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

154 
roŸmíuíåy_buâ⁄up
(
wö
 *
wödow
, 
GR_EVENT_BUTTON
 *
evít
);

155 
˛o£buâ⁄_mou£exô
(
wö
 *
wödow
, 
GR_EVENT_GENERAL
 *
evít
);

156 
maximi£buâ⁄_mou£exô
(
wö
 *
wödow
, 
GR_EVENT_GENERAL
 *
evít
);

157 
ª°‹ebuâ⁄_mou£exô
(
wö
 *
wödow
, 
GR_EVENT_GENERAL
 *
evít
);

158 
ic⁄i£buâ⁄_mou£exô
(
wö
 *
wödow
, 
GR_EVENT_GENERAL
 *
evít
);

159 
utûôybuâ⁄_mou£exô
(
wö
 *
wödow
, 
GR_EVENT_GENERAL
 *
evít
);

160 
utûôymíu_mou£exô
(
wö
 *
wödow
, 
GR_EVENT_GENERAL
 *
evít
);

161 
utûôymíuíåy_mou£exô
(
wö
 *
wödow
, 
GR_EVENT_GENERAL
 *
evít
);

162 
roŸmíu_mou£exô
(
wö
 *
wödow
, 
GR_EVENT_GENERAL
 *
evít
);

163 
roŸmíuíåy_mou£exô
(
wö
 *
wödow
, 
GR_EVENT_GENERAL
 *
evít
);

164 
c⁄èöî_mou£moved
(
wö
 *
wödow
, 
GR_EVENT_MOUSE
 *
evít
);

165 
t›b¨_mou£moved
(
wö
 *
wödow
, 
GR_EVENT_MOUSE
 *
evít
);

166 
À·b¨_mou£moved
(
wö
 *
wödow
, 
GR_EVENT_MOUSE
 *
evít
);

167 
À·ªsize_mou£moved
(
wö
 *
wödow
, 
GR_EVENT_MOUSE
 *
evít
);

168 
bŸtomb¨_mou£moved
(
wö
 *
wödow
, 
GR_EVENT_MOUSE
 *
evít
);

169 
righåesize_mou£moved
(
wö
 *
wödow
, 
GR_EVENT_MOUSE
 *
evít
);

170 
rightb¨_mou£moved
(
wö
 *
wödow
, 
GR_EVENT_MOUSE
 *
evít
);

172 
GR_SCREEN_INFO
 
si
;

173 
wö
 *
wödows
;

174 
GR_BITMAP
 
utûôybuâ⁄_nŸ¥es£d
[];

175 
GR_BITMAP
 
utûôybuâ⁄_¥es£d
[];

176 
GR_BITMAP
 
maximi£buâ⁄_nŸ¥es£d
[];

177 
GR_BITMAP
 
maximi£buâ⁄_¥es£d
[];

178 
GR_BITMAP
 
ic⁄i£buâ⁄_nŸ¥es£d
[];

179 
GR_BITMAP
 
ic⁄i£buâ⁄_¥es£d
[];

180 
GR_BITMAP
 
˛o£buâ⁄_nŸ¥es£d
[];

181 
GR_BITMAP
 
˛o£buâ⁄_¥es£d
[];

182 
GR_BITMAP
 
ª°‹ebuâ⁄_nŸ¥es£d
[];

183 
GR_BITMAP
 
ª°‹ebuâ⁄_¥es£d
[];

184 
GR_BITMAP
 
h‹iz⁄èl_ªsize_fg
[];

185 
GR_BITMAP
 
h‹iz⁄èl_ªsize_bg
[];

186 
GR_BITMAP
 
vîtiˇl_ªsize_fg
[];

187 
GR_BITMAP
 
vîtiˇl_ªsize_bg
[];

188 
GR_BITMAP
 
righth™d_ªsize_fg
[];

189 
GR_BITMAP
 
righth™d_ªsize_bg
[];

190 
GR_BITMAP
 
À·h™d_ªsize_fg
[];

191 
GR_BITMAP
 
À·h™d_ªsize_bg
[];

192 
h‹iz⁄èl_ªsize_cﬁumns
, 
h‹iz⁄èl_ªsize_rows
;

193 
h‹iz⁄èl_ªsize_hŸx
, 
h‹iz⁄èl_ªsize_hŸy
;

194 
vîtiˇl_ªsize_cﬁumns
, 
vîtiˇl_ªsize_rows
;

195 
vîtiˇl_ªsize_hŸx
, 
vîtiˇl_ªsize_hŸy
;

196 
À·h™d_ªsize_cﬁumns
, 
À·h™d_ªsize_rows
;

197 
À·h™d_ªsize_hŸx
, 
À·h™d_ªsize_hŸy
;

198 
righth™d_ªsize_cﬁumns
, 
righth™d_ªsize_rows
;

199 
righth™d_ªsize_hŸx
, 
righth™d_ªsize_hŸy
;

	@demos/nanowm/wlist.c

7 
	~<°dio.h
>

8 
	~<°dlib.h
>

9 
	#MWINCLUDECOLORS


	)

10 
	~"«no-X.h
"

14 
	~"«nowm.h
"

16 
wö
 *
	gwödows
;

22 
wö
 *
	$föd_wödow
(
GR_WINDOW_ID
 
wid
)

24 
wö
 *
w
 = 
wödows
;

26 
	`D¥ötf
("Lookög f‹ wödow %d... ", 
wid
);

28 
w
) {

29 
	`D¥ötf
("%d ", 
w
->
wid
);

30 if(
w
->
wid
 == wid) {

31 
	`D¥ötf
("found it!\n");

32  
w
;

34 
w
 = w->
√xt
;

37 
	`D¥ötf
("N›e, %d i†nŸ i¿thêli°\n", 
wid
);

38  
NULL
;

39 
	}
}

45 
	$add_wödow
(
wö
 *
wödow
)

47 
wö
 *
w
;

49 
	`D¥ötf
("Addög wödow %d\n", 
wödow
->
wid
);

51 if(!(
w
 = 
	`mÆloc
((
wö
))))  -1;

53 
w
->
wid
 = 
wödow
->wid;

54 
w
->
pid
 = 
wödow
->pid;

55 
w
->
ty≥
 = 
wödow
->type;

56 
w
->
sizög
 = 
GR_FALSE
;

57 
w
->
a˘ive
 = 
wödow
->active;

58 
w
->
˛õ¡id
 = 
wödow
->clientid;

59 
w
->
d©a
 = 
wödow
->data;

60 
w
->
√xt
 = 
wödows
;

61 
wödows
 = 
w
;

64 
	}
}

73 
	$ªmove_wödow
(
wö
 *
wödow
)

75 
wö
 *
w
 = 
wödows
;

76 
wö
 *
¥ev
 = 
NULL
;

78 
w
) {

79 if(
w
 =
wödow
) {

80 if(!
¥ev
Ë
wödows
 = 
w
->
√xt
;

81 
¥ev
->
√xt
 = 
w
->next;

82 if(
w
->
d©a
Ë
	`‰ì
(w->data);

83 
	`‰ì
(
w
);

86 
¥ev
 = 
w
;

87 
w
 = w->
√xt
;

91 
	}
}

97 
	$ªmove_wödow_™d_chûdªn
(
wö
 *
wödow
)

99 
wö
 *
t
, *
w
 = 
wödows
;

100 
wö
 *
¥ev
 = 
NULL
;

101 
GR_WINDOW_ID
 
pid
 = 
wödow
->
wid
;

103 
	`D¥ötf
("Removög wödow %dánd chûdªn\n", 
wödow
->
wid
);

105 
w
) {

106 
	`D¥ötf
("Examöög wödow %d (pid %d)\n", 
w
->
wid
, w->
pid
);

107 if((
w
->
pid
 =pidË|| (w =
wödow
)) {

108 
	`D¥ötf
("Removög wödow %d (pid %d)\n", 
w
->
wid
,

109 
w
->
pid
);

110 if(
¥ev
Ë¥ev->
√xt
 = 
w
->next;

111 
wödows
 = 
w
->
√xt
;

112 
t
 = 
w
->
√xt
;

113 if(
w
->
d©a
Ë
	`‰ì
(w->data);

114 
	`‰ì
(
w
);

115 
w
 = 
t
;

118 
¥ev
 = 
w
;

119 
w
 = w->
√xt
;

123 
	}
}

	@demos/nanox/arcdemo.c

7 
	~<°dlib.h
>

8 
	#MWINCLUDECOLORS


	)

9 
	~"«no-X.h
"

12 
	$døw
(
GR_EVENT
 *
ï
)

14 
GR_WINDOW_ID
 
wid
 = ((
GR_EVENT_EXPOSURE
 *)
ï
)->wid;

15 
GR_GC_ID
 
gc
 = 
	`GrNewGC
();

16 
x
 = 40;

17 
y
 = 40;

18 
rx
 = 30;

19 
ry
 = 30;

20 
xoff
 = (
rx
 + 10) * 2;

24 
	`GrSëGCF‹eground
(
gc
, 
GREEN
);

25 
	`GrArcAngÀ
(
wid
, 
gc
, 
x
, 
y
, 3, 3, 0, 0, 
GR_PIE
);

27 
	`GrSëGCF‹eground
(
gc
, 
BLACK
);

28 
	`GrArcAngÀ
(
wid
, 
gc
, 
x
, 
y
, 3, 3, 0, 0, 
GR_ARC
);

30 
	`GrSëGCF‹eground
(
gc
, 
BLACK
);

31 
	`GrPoöt
(
wid
, 
gc
, 
x
, 
y
);

33 
	`GrSëGCF‹eground
(
gc
, 
GREEN
);

34 
	`GrArc
(
wid
, 
gc
, 
x
, 
y
, 
rx
, 
ry
, 0, -30, -30, 0, 
GR_PIE
);

35 
	`GrArc
(
wid
, 
gc
, 
x
+5, 
y
, 
rx
, 
ry
, 30, 0, 0, -30, 
GR_PIE
);

36 
	`GrArc
(
wid
, 
gc
, 
x
, 
y
+5, 
rx
, 
ry
, -30, 0, 0, 30, 
GR_PIE
);

37 
	`GrArc
(
wid
, 
gc
, 
x
+5, 
y
+5, 
rx
, 
ry
, 0, 30, 30, 0, 
GR_PIE
);

41 
	`GrSëGCF‹eground
(
gc
, 
GREEN
);

42 
x
 +
xoff
;

43 
	`GrArc
(
wid
, 
gc
, 
x
, 
y
, 
rx
, 
ry
, 0, -30, -30, 0, 
GR_ARCOUTLINE
);

44 
	`GrArc
(
wid
, 
gc
, 
x
+5, 
y
, 
rx
, 
ry
, 30, 0, 0, -30, 
GR_ARCOUTLINE
);

45 
	`GrArc
(
wid
, 
gc
, 
x
, 
y
+5, 
rx
, 
ry
, -30, 0, 0, 30, 
GR_ARCOUTLINE
);

46 
	`GrArc
(
wid
, 
gc
, 
x
+5, 
y
+5, 
rx
, 
ry
, 0, 30, 30, 0, 
GR_ARCOUTLINE
);

49 
x
 +
xoff
;

50 
	`GrArc
(
wid
, 
gc
, 
x
, 
y
, 
rx
, 
ry
, 0, -30, -30, 0, 
GR_ARC
);

51 
	`GrArc
(
wid
, 
gc
, 
x
+5, 
y
, 
rx
, 
ry
, 30, 0, 0, -30, 
GR_ARC
);

52 
	`GrArc
(
wid
, 
gc
, 
x
, 
y
+5, 
rx
, 
ry
, -30, 0, 0, 30, 
GR_ARC
);

53 
	`GrArc
(
wid
, 
gc
, 
x
+5, 
y
+5, 
rx
, 
ry
, 0, 30, 30, 0, 
GR_ARC
);

55 
	`GrDe°royGC
(
gc
);

56 
	}
}

59 
	$maö
(
ac
, **
av
)

61 
GR_EVENT
 
ev
;

62 
GR_WINDOW_ID
 
wid
;

64 i‡(
	`GrO≥n
() < 0)

65 
	`exô
(-1);

67 
wid
 = 
	`GrNewWödowEx
(
GR_WM_PROPS_BORDER
|
GR_WM_PROPS_CAPTION
|

68 
GR_WM_PROPS_CLOSEBOX
, "arcdemo",

69 
GR_ROOT_WINDOW_ID
, 0, 0, 250, 90, 
WHITE
);

71 
	`GrSñe˘Evíts
(
wid
, 
GR_EVENT_MASK_EXPOSURE
 | 
GR_EVENT_MASK_CLOSE_REQ
);

72 
	`GrM≠Wödow
(
wid
);

75 
	`GrGëNextEvít
(&
ev
);

77 i‡(
ev
.
ty≥
 =
GR_EVENT_TYPE_CLOSE_REQ
)

79 i‡(
ev
.
ty≥
 =
GR_EVENT_TYPE_EXPOSURE
)

80 
	`døw
(&
ev
);

83 
	`GrClo£
();

86 
	}
}

	@demos/nanox/bmpdemo.c

7 
	~<°dio.h
>

8 
	~<«no-X.h
>

9 
	~<nxcﬁ‹s.h
>

11 
	#TUX


	)

13 #ifde‡
TUX


15 
	#BMAP
(
a15
, 
a14
, 
a13
, 
a12
, 
a11
, 
a10
, 
a9
, 
a8
, 
a7
, 
a6
, 
a5
, 
a4
, 
a3
, 
a2
, \

16 
a1
, 
a0
Ë(
GR_BITMAP
)◊0 | (a1 << 1Ë| (
a2
 << 2Ë| (
a3
 << 3) \

17 | (
a4
 << 4Ë| (
a5
 << 5Ë| (
a6
 << 6Ë| (
a7
 << 7Ë| (
a8
 << 8) \

18 | (
a9
 << 9Ë| (
a10
 << 10Ë| (
a11
 << 11Ë| (
a12
 << 12) \

19 | (
a13
 << 13Ë| (
a14
 << 14Ë| (
a15
 << 15))

	)

21 
	#TUX_WIDTH
 32

	)

22 
	#TUX_HEIGHT
 32

	)

24 
ªdøw
(
GR_WINDOW_ID
 
wid
, 
GR_GC_ID
 
gc
);

26 
GR_BITMAP
 
	gtux_bôs
[] = {

27 
BMAP
(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),BMAP(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),

28 
BMAP
(0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1),BMAP(1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0),

29 
BMAP
(0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1),BMAP(1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0),

30 
BMAP
(0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1),BMAP(1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0),

31 
BMAP
(0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1),BMAP(1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0),

32 
BMAP
(0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1),BMAP(0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0),

33 
BMAP
(0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1),BMAP(0,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0),

34 
BMAP
(0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1),BMAP(1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0),

35 
BMAP
(0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0),BMAP(0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0),

36 
BMAP
(0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0),BMAP(0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0),

37 
BMAP
(0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1),BMAP(0,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0),

38 
BMAP
(0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1),BMAP(0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0),

39 
BMAP
(0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0),BMAP(0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0),

40 
BMAP
(0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0),BMAP(0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0),

41 
BMAP
(0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0),BMAP(0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0),

42 
BMAP
(0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0),BMAP(0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0),

43 
BMAP
(0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0),BMAP(0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0),

44 
BMAP
(0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0),BMAP(0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0),

45 
BMAP
(0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0),BMAP(0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0),

46 
BMAP
(0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0),BMAP(0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0),

47 
BMAP
(0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0),BMAP(0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0),

48 
BMAP
(0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0),BMAP(0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0),

49 
BMAP
(0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0),BMAP(0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0),

50 
BMAP
(0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0),BMAP(0,0,0,0,1,0,1,1,1,0,0,0,0,0,0,0),

51 
BMAP
(0,0,0,0,1,0,0,0,1,0,1,1,0,0,0,0),BMAP(0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0),

52 
BMAP
(0,0,0,0,0,1,0,0,0,0,0,1,1,0,0,0),BMAP(0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0),

53 
BMAP
(0,0,0,1,0,0,0,1,0,1,0,0,0,0,0,0),BMAP(0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0),

54 
BMAP
(0,0,0,0,1,0,0,1,0,0,1,0,1,0,0,0),BMAP(0,0,1,1,1,0,0,0,1,0,1,0,1,0,0,0),

55 
BMAP
(0,0,0,1,0,0,1,0,0,0,1,0,1,1,1,1),BMAP(1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0),

56 
BMAP
(0,0,0,0,1,0,1,0,1,0,0,0,1,1,1,1),BMAP(1,1,1,1,1,1,0,1,1,0,0,0,0,0,0,0),

57 
BMAP
(0,0,0,0,0,0,0,0,1,1,1,0,1,0,0,0),BMAP(0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0),

58 
BMAP
(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),BMAP(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0),

61 
	#BITMAPWIDTH
 
TUX_WIDTH


	)

62 
	#BITMAPHEIGHT
 
TUX_HEIGHT


	)

63 
	#BITMAP
 
tux_bôs


	)

66 
	~"tuxmask.h
"

67 
	#BITMAPWIDTH
 
TUXMASK_WIDTH


	)

68 
	#BITMAPHEIGHT
 
TUXMASK_HEIGHT


	)

69 
	#BITMAP
 
tuxmask_bôs


	)

72 
	$ªdøw
(
GR_WINDOW_ID
 
wid
, 
GR_GC_ID
 
gc
)

74 
	`GrBôm≠
(
wid
, 
gc
, 0, 0, 
BITMAPWIDTH
, 
BITMAPHEIGHT
, 
BITMAP
);

75 
	}
}

77 
	$maö
()

79 
GR_WINDOW_ID
 
wid
;

80 
GR_GC_ID
 
gc
;

81 
GR_EVENT
 
evít
;

83 if(
	`GrO≥n
() < 0) {

84 
	`Ârötf
(
°dîr
, "Couldn't connectÅoÅhe Nano-X server\n");

88 
wid
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 0, 0, 
BITMAPWIDTH
, 
BITMAPHEIGHT
,

89 0, 
GR_COLOR_WHITE
, 0);

91 
	`GrSñe˘Evíts
(
wid
, 
GR_EVENT_MASK_CLOSE_REQ
 | 
GR_EVENT_MASK_EXPOSURE
);

93 
gc
 = 
	`GrNewGC
();

94 
	`GrSëGCF‹eground
(
gc
, 
GR_COLOR_BLACK
);

95 
	`GrSëGCBackground
(
gc
, 
GR_COLOR_WHITE
);

97 
	`GrM≠Wödow
(
wid
);

100 
	`GrGëNextEvít
(&
evít
);

101 
evít
.
ty≥
) {

102 
GR_EVENT_TYPE_EXPOSURE
:

103 
	`ªdøw
(
wid
, 
gc
);

105 
GR_EVENT_TYPE_CLOSE_REQ
:

106 
	`GrClo£
();

112 
	}
}

	@demos/nanox/convpbm.c

9 
	~<°dio.h
>

10 
	~<°rög.h
>

11 
	~<î∫o.h
>

12 
	~<˘y≥.h
>

13 
	~<°dlib.h
>

15 *
°rdup_touµî
(*
ö
);

16 
out_w‹d
(
w‹d
);

18 *
	$°rdup_touµî
(*
ö
)

20 *
p
, *
out
;

22 
p
 = 
out
 = 
	`°rdup
(
ö
);

24 if(
out
Ëdÿ{ *
p
++ = 
	`touµî
(*
ö
); } *in++);

26  
out
;

27 
	}
}

29 
	$out_w‹d
(
w‹d
)

31 
w‹ds
 = 0;

33 
	`¥ötf
("0x%04x, ", 
w‹d
);

35 if(++
w‹ds
 == 8) {

36 
w‹ds
 = 0;

37 
	`¥ötf
("\n\t");

39 
	}
}

41 
	$maö
(
¨gc
, *
¨gv
[])

43 
FILE
 *
Â
;

44 
size_t
 
Àn
;

45 *
¥efix
;

46 
w‹d
 = 0;

47 
width
, 
height
, 
x
 = 0, 
i
, 
b
, 
w
 = 0;

48 
buf
[
BUFSIZ
];

50 if(
¨gc
 != 3) {

51 
	`Ârötf
(
°dîr
, "Usage: convpbm [input.pbm]Örefix > "

56 if(!(
Â
 = 
	`f›í
(
¨gv
[1], "r"))) {

57 
	`Ârötf
(
°dîr
, "Couldn'à›í i≈uàfûê\"%s\"\n", 
¨gv
[1]);

61 if(!(
	`fgës
(
buf
, 
BUFSIZ
, 
Â
))Ë
ªadîr
;

63 if(
	`°rcmp
(
buf
, "P4\n")) {

64 
	`Ârötf
(
°dîr
, "Didn't find valid header. PerhapsÅhis is "

69 if(
	`fsˇnf
(
Â
, "%d %d\n", &
width
, &
height
) != 2) {

70 
	`Ârötf
(
°dîr
, "FailedÅoÑead image dimensions\n");

74 if(!(
¥efix
 = 
	`°rdup_touµî
(
¨gv
[2]))Ë
nomem
;

76 
	`¥ötf
("/*\n * Microwindows bitmap converted by convbmp\n * Image "

79 "°©i¯GR_BITMAP %s_bôs[] = {\n\t", 
width
, 
height
, 
¨gv
[2],

80 
¨gv
[1], 
¥efix
, 
width
,Öªfix, 
height
,árgv[2]);

82 
	`‰ì
(
¥efix
);

84 !
	`„of
(
Â
)) {

85 
Àn
 = 
	`‰ód
(
buf
, 1, 
BUFSIZ
, 
Â
);

86 
i
 = 0; i < 
Àn
; i++) {

87 
b
 = 0; b < 8; b++) {

88 
w‹d
 <<= 1;

89 
w‹d
 |(
buf
[
i
] & 0x80) ? 0 : 1;

90 
buf
[
i
] <<= 1;

91 if(++
x
 >
width
) {

92 
x
 = 0;

93 
w‹d
 <<8 - 
b
 - 1;

94 if(
w
 == 0) {

95 
w‹d
 <<= 8;

96 
w
 = 1;

101 if(++
w
 == 2) {

102 
w
 = 0;

103 
	`out_w‹d
(
w‹d
);

104 
w‹d
 = 0;

109 
	`¥ötf
("};\n");

111 
	`f˛o£
(
Â
);

114 
ªadîr
:

115 
	`Ârötf
(
°dîr
, "RódÉº‹: %s\n", 
	`°ªº‹
(
î∫o
));

118 
nomem
:

119 
	`Ârötf
(
°dîr
, "Out of memory\n");

122 
	}
}

	@demos/nanox/dashdemo.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	#MWINCLUDECOLORS


	)

4 
	~"«no-X.h
"

6 
	gCOLS
, 
	gROWS
;

7 
GR_WINDOW_ID
 
	gg_maö
;

10 
	$døw_s¸ìn
()

12 
GR_POINT
 
åi
[4] = { {5, 115}, {105, 115}, {55, 200}, {5, 115} };

13 
GR_WINDOW_INFO
 
wöfo
;

14 
GR_GC_ID
 
gc
;

15 
dash1
[2] = { 10, 5 };

16 
dash2
[4] = { 5, 2, 1, 2 };

17 
dash3
[4] = { 5, 2, 5, 5 };

18 
dash4
[2] = { 2, 2 };

20 
	`GrGëWödowInfo
(
g_maö
, &
wöfo
);

23 
gc
 = 
	`GrNewGC
();

24 
	`GrSëGCLöeAâribuãs
(
gc
, 
GR_LINE_ONOFF_DASH
);

28 
	`GrSëGCDash
(
gc
, 
dash1
, 2);

29 
	`GrRe˘
(
g_maö
, 
gc
, 5, 5, 100, 100);

31 
	`GrSëGCDash
(
gc
, 
dash2
, 4);

32 
	`GrLöe
(
g_maö
, 
gc
, 10, 10, 95, 95);

34 
	`GrSëGCDash
(
gc
, 
dash3
, 4);

35 
	`GrEŒù£
(
g_maö
, 
gc
, 160, 55, 50, 50);

37 
	`GrSëGCDash
(
gc
, 
dash4
, 2);

38 
	`GrPﬁy
(
g_maö
, 
gc
, 4, 
åi
);

40 
	`GrDe°royGC
(
gc
);

41 
	}
}

44 
	$maö
(
¨gc
, **
¨gv
)

46 
COLS
, 
ROWS
;

48 i‡(
	`GrO≥n
() < 0) {

49 
	`Ârötf
(
°dîr
, "Cannot open graphics\n");

50 
	`exô
(1);

53 
COLS
 = 350;

54 
ROWS
 = 300;

56 
g_maö
 = 
	`GrNewWödowEx
(
GR_WM_PROPS_APPWINDOW
, "dashdemo",

57 
GR_ROOT_WINDOW_ID
, 100, 50, 
COLS
 - 120, 
ROWS
 - 60, 
BLUE
);

59 
	`GrSñe˘Evíts
(
g_maö
, 
GR_EVENT_MASK_EXPOSURE
|
GR_EVENT_MASK_CLOSE_REQ
);

60 
	`GrM≠Wödow
(
g_maö
);

63 
GR_EVENT
 
evít
;

64 
	`GrGëNextEvít
(&
evít
);

66 
evít
.
ty≥
) {

67 
GR_EVENT_TYPE_EXPOSURE
:

68 
	`døw_s¸ìn
();

71 
GR_EVENT_TYPE_CLOSE_REQ
:

72 
	`GrClo£
();

73 
	`exô
(0);

76 
	}
}

	@demos/nanox/demo.c

5 
	~<°dio.h
>

6 
	~<°dlib.h
>

7 
	#MWINCLUDECOLORS


	)

8 
	~"«no-X.h
"

10 #i‡
DOS_TURBOC


11 
	g_°kÀn
 = 32768;

17 
	#_
 ((Ë0Ë

	)

18 
	#X
 ((Ë1Ë

	)

19 
	#MASK
(
a
,
b
,
c
,
d
,
e
,
f
,
g
) \

20 (((((((((((((
a
 * 2Ë+ 
b
Ë* 2Ë+ 
c
Ë* 2Ë+ 
d
) * 2) \

21 + 
e
Ë* 2Ë+ 
f
Ë* 2Ë+ 
g
Ë<< 9)

	)

23 
	#W2_WIDTH
 70

	)

24 
	#W2_HEIGHT
 40

	)

27 
GR_WINDOW_ID
 
	gw1
;

28 
GR_WINDOW_ID
 
	gw2
;

29 
GR_WINDOW_ID
 
	gw3
;

30 
GR_WINDOW_ID
 
	gw4
;

31 
GR_WINDOW_ID
 
	gw5
;

32 
GR_GC_ID
 
	ggc1
;

33 
GR_GC_ID
 
	ggc2
;

34 
GR_GC_ID
 
	ggc3
;

35 
GR_GC_ID
 
	ggc4
;

36 
GR_COORD
 
	gbegxpos
;

37 
GR_COORD
 
	gxpos
;

38 
GR_COORD
 
	gypos
;

39 
GR_COORD
 
	glöexpos
;

40 
GR_COORD
 
	glöeypos
;

41 
GR_COORD
 
	gx‹xpos
;

42 
GR_COORD
 
	gx‹ypos
;

43 
GR_BOOL
 
	glöeok
;

44 
GR_SIZE
 
	gCOLS
, 
	gROWS
;

45 
GR_SCREEN_INFO
 
	gsi
;

47 
do_buâ⁄down
(
GR_EVENT_BUTTON
 *
bp
);

48 
do_buâ⁄up
(
GR_EVENT_BUTTON
 *
bp
);

49 
do_mŸi⁄
(
GR_EVENT_MOUSE
 *
mp
);

50 
do_key°roke
(
GR_EVENT_KEYSTROKE
 *
kp
);

51 
do_exposuª
(
GR_EVENT_EXPOSURE
 *
ï
);

52 
do_focusö
(
GR_EVENT_GENERAL
 *
gp
);

53 
do_focusout
(
GR_EVENT_GENERAL
 *
gp
);

54 
do_íãr
(
GR_EVENT_GENERAL
 *
gp
);

55 
do_exô
(
GR_EVENT_GENERAL
 *
gp
);

56 
do_idÀ
();

58 
îr‹ˇtchî
(
GR_EVENT
 *
ï
);

61 
	$maö
(
¨gc
,**
¨gv
)

63 
GR_EVENT
 
evít
;

64 
GR_BITMAP
 
bôm≠1fg
[7];

65 
GR_BITMAP
 
bôm≠1bg
[7];

66 
GR_BITMAP
 
bôm≠2fg
[7];

67 
GR_BITMAP
 
bôm≠2bg
[7];

69 i‡(
	`GrO≥n
() < 0) {

70 
	`Ârötf
(
°dîr
, "cannot open graphics\n");

71 
	`exô
(1);

74 
	`GrReqShmCmds
(655360);

76 
	`GrGëS¸ìnInfo
(&
si
);

77 
COLS
 = 
si
.
cﬁs
 - 40;

78 
ROWS
 = 
si
.
rows
 - 80;

81 
	`GrSëEº‹H™dÀr
(
îr‹ˇtchî
);

83 
w1
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 100, 50, 
COLS
 - 120,

84 
ROWS
 - 60, 1, 
BROWN
, 
WHITE
);

85 
w2
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 6, 6, 
W2_WIDTH
, 
W2_HEIGHT
, 2, 
GREEN
,

86 
WHITE
);

87 
w3
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 250, 30, 80, 100, 1, 
LTGRAY
,

88 
GREEN
);

89 
w4
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 350, 20, 200, 150, 5, 
BLACK
, 
WHITE
);

90 
w5
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 11, 143, 209, 100, 1, 
BLUE
, 
GREEN
);

92 
	`GrSñe˘Evíts
(
w1
, 
GR_EVENT_MASK_BUTTON_DOWN
 |

93 
GR_EVENT_MASK_KEY_DOWN
 | 
GR_EVENT_MASK_EXPOSURE
 |

94 
GR_EVENT_MASK_FOCUS_IN
 | 
GR_EVENT_MASK_FOCUS_OUT
 |

95 
GR_EVENT_MASK_CLOSE_REQ
);

100 
	`GrSñe˘Evíts
(
w2
, 
GR_EVENT_MASK_BUTTON_DOWN
 |

101 
GR_EVENT_MASK_BUTTON_UP
 | 
GR_EVENT_MASK_CLOSE_REQ
);

102 
	`GrSñe˘Evíts
(
w3
, 
GR_EVENT_MASK_BUTTON_DOWN
 |

103 
GR_EVENT_MASK_MOUSE_MOTION
 | 
GR_EVENT_MASK_CLOSE_REQ
);

104 
	`GrSñe˘Evíts
(
w4
, 
GR_EVENT_MASK_BUTTON_DOWN
 |

105 
GR_EVENT_MASK_BUTTON_UP
 | 
GR_EVENT_MASK_MOUSE_POSITION
 |

106 
GR_EVENT_MASK_KEY_DOWN
 | 
GR_EVENT_MASK_CLOSE_REQ
);

107 
	`GrSñe˘Evíts
(
w5
, 
GR_EVENT_MASK_MOUSE_ENTER
 |

108 
GR_EVENT_MASK_MOUSE_EXIT
 | 
GR_EVENT_MASK_CLOSE_REQ
);

109 
	`GrSñe˘Evíts
(
GR_ROOT_WINDOW_ID
, 
GR_EVENT_MASK_BUTTON_DOWN
 |

110 
GR_EVENT_MASK_CLOSE_REQ
);

112 
	`GrM≠Wödow
(
w1
);

113 
	`GrM≠Wödow
(
w2
);

114 
	`GrM≠Wödow
(
w3
);

115 
	`GrM≠Wödow
(
w4
);

116 
	`GrM≠Wödow
(
w5
);

118 
gc1
 = 
	`GrNewGC
();

119 
gc2
 = 
	`GrNewGC
();

120 
gc3
 = 
	`GrNewGC
();

121 
gc4
 = 
	`GrNewGC
();

123 
	`GrSëGCF‹eground
(
gc1
, 
RED
);

124 
	`GrSëGCBackground
(
gc1
, 
BROWN
);

125 
	`GrSëGCF‹eground
(
gc2
, 
MAGENTA
);

126 
	`GrSëGCMode
(
gc4
, 
GR_MODE_XOR
);

128 
bôm≠1fg
[0] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

129 
bôm≠1fg
[1] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

130 
bôm≠1fg
[2] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

131 
bôm≠1fg
[3] = 
	`MASK
(
X
,X,X,X,X,X,X);

132 
bôm≠1fg
[4] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

133 
bôm≠1fg
[5] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

134 
bôm≠1fg
[6] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

136 
bôm≠1bg
[0] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

137 
bôm≠1bg
[1] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

138 
bôm≠1bg
[2] = 
	`MASK
(
X
,X,X,X,X,X,X);

139 
bôm≠1bg
[3] = 
	`MASK
(
X
,X,X,X,X,X,X);

140 
bôm≠1bg
[4] = 
	`MASK
(
X
,X,X,X,X,X,X);

141 
bôm≠1bg
[5] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

142 
bôm≠1bg
[6] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

144 
bôm≠2fg
[0] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

145 
bôm≠2fg
[1] = 
	`MASK
(
_
,
X
,_,_,_,X,_);

146 
bôm≠2fg
[2] = 
	`MASK
(
X
,
_
,_,_,_,_,X);

147 
bôm≠2fg
[3] = 
	`MASK
(
X
,
_
,_,_,_,_,X);

148 
bôm≠2fg
[4] = 
	`MASK
(
_
,
X
,_,_,_,X,_);

149 
bôm≠2fg
[5] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

151 
bôm≠2bg
[0] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

152 
bôm≠2bg
[1] = 
	`MASK
(
_
,
X
,X,X,X,X,_);

153 
bôm≠2bg
[2] = 
	`MASK
(
X
,X,X,X,X,X,X);

154 
bôm≠2bg
[3] = 
	`MASK
(
X
,X,X,X,X,X,X);

155 
bôm≠2bg
[4] = 
	`MASK
(
_
,
X
,X,X,X,X,_);

156 
bôm≠2bg
[5] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

158 
	`GrSëCurs‹
(
w1
, 7, 7, 3, 3, 
WHITE
, 
BLACK
, 
bôm≠1fg
, 
bôm≠1bg
);

159 
	`GrSëCurs‹
(
w2
, 7, 7, 3, 3, 
WHITE
, 
BLACK
, 
bôm≠2fg
, 
bôm≠2bg
);

162 
	`GrCheckNextEvít
(&
evít
);

164 
evít
.
ty≥
) {

165 
GR_EVENT_TYPE_BUTTON_DOWN
:

166 
	`do_buâ⁄down
(&
evít
.
buâ⁄
);

169 
GR_EVENT_TYPE_BUTTON_UP
:

170 
	`do_buâ⁄up
(&
evít
.
buâ⁄
);

173 
GR_EVENT_TYPE_MOUSE_POSITION
:

174 
GR_EVENT_TYPE_MOUSE_MOTION
:

175 
	`do_mŸi⁄
(&
evít
.
mou£
);

178 
GR_EVENT_TYPE_KEY_DOWN
:

179 
	`do_key°roke
(&
evít
.
key°roke
);

182 
GR_EVENT_TYPE_EXPOSURE
:

183 
	`do_exposuª
(&
evít
.
exposuª
);

186 
GR_EVENT_TYPE_FOCUS_IN
:

187 
	`do_focusö
(&
evít
.
gíîÆ
);

190 
GR_EVENT_TYPE_FOCUS_OUT
:

191 
	`do_focusout
(&
evít
.
gíîÆ
);

194 
GR_EVENT_TYPE_MOUSE_ENTER
:

195 
	`do_íãr
(&
evít
.
gíîÆ
);

198 
GR_EVENT_TYPE_MOUSE_EXIT
:

199 
	`do_exô
(&
evít
.
gíîÆ
);

202 
GR_EVENT_TYPE_CLOSE_REQ
:

203 
	`GrClo£
();

204 
	`exô
(0);

206 
GR_EVENT_TYPE_NONE
:

207 
	`do_idÀ
();

211 
	}
}

218 
	$do_buâ⁄down
(
GR_EVENT_BUTTON
 *
bp
)

220 
GR_PIXELVAL
 
öèbÀ
[
W2_WIDTH
 * 
W2_HEIGHT
];

221 
GR_PIXELVAL
 
ouâabÀ
[
W2_WIDTH
 * 
W2_HEIGHT
 * 6];

222 
GR_PIXELVAL
 *
öp
;

223 
GR_PIXELVAL
 *
ouç
;

224 
GR_PIXELVAL
 *
ﬁdöp
;

225 
GR_COORD
 
row
;

226 
GR_COORD
 
cﬁ
;

231 i‡(
bp
->
wid
 =
w3
) {

232 
	`GrRai£Wödow
(
w3
);

233 
	`GrRódAªa
(
w2
, 0, 0, 
W2_WIDTH
, 
W2_HEIGHT
, 
öèbÀ
);

234 
öp
 = 
öèbÀ
;

235 
ouç
 = 
ouâabÀ
;

236 
row
 = 0;Ñow < 
W2_HEIGHT
;Ñow++) {

237 
ﬁdöp
 = 
öp
;

238 
cﬁ
 = 0; cﬁ < 
W2_WIDTH
; col++) {

239 *
ouç
++ = *
öp
;

240 *
ouç
++ = *
öp
++;

242 
öp
 = 
ﬁdöp
;

243 
cﬁ
 = 0; cﬁ < 
W2_WIDTH
; col++) {

244 *
ouç
++ = *
öp
;

245 *
ouç
++ = *
öp
++;

247 
öp
 = 
ﬁdöp
;

248 
cﬁ
 = 0; cﬁ < 
W2_WIDTH
; col++) {

249 *
ouç
++ = *
öp
;

250 *
ouç
++ = *
öp
++;

253 
	`GrAªa
(
w1
, 
gc1
, 0, 0, 
W2_WIDTH
 * 2, 
W2_HEIGHT
 * 3, 
ouâabÀ
,

254 
MWPF_PIXELVAL
);

258 i‡(
bp
->
wid
 =
w4
) {

259 
	`GrRai£Wödow
(
w4
);

260 
löexpos
 = 
bp
->
x
;

261 
löeypos
 = 
bp
->
y
;

262 
x‹xpos
 = 
bp
->
x
;

263 
x‹ypos
 = 
bp
->
y
;

264 
	`GrLöe
(
w4
, 
gc4
, 
x‹xpos
, 
x‹ypos
, 
löexpos
, 
löeypos
);

265 
löeok
 = 
GR_TRUE
;

269 i‡(
bp
->
wid
 !
w1
) {

274 i‡((
bp
->
buâ⁄s
 & -(() bp->buttons)) != bp->buttons)

275 
	`GrCÀ¨Wödow
(-1, 0);

279 
	`GrRai£Wödow
(
w1
);

282 i‡(
bp
->
buâ⁄s
 & 
GR_BUTTON_L
) {

283 
	`GrCÀ¨Wödow
(
w1
, 
GR_TRUE
);

287 
begxpos
 = 
bp
->
x
;

288 
xpos
 = 
bp
->
x
;

289 
ypos
 = 
bp
->
y
;

290 
	}
}

297 
	$do_buâ⁄up
(
GR_EVENT_BUTTON
 *
bp
)

299 i‡(
bp
->
wid
 =
w4
) {

300 i‡(
löeok
) {

301 
	`GrLöe
(
w4
, 
gc4
, 
x‹xpos
, 
x‹ypos
, 
löexpos
, 
löeypos
);

302 
	`GrLöe
(
w4
, 
gc3
, 
bp
->
x
, bp->
y
, 
löexpos
, 
löeypos
);

304 
löeok
 = 
GR_FALSE
;

308 i‡(
bp
->
wid
 =
w2
) {

309 
	`GrClo£
();

310 
	`exô
(0);

312 
	}
}

319 
	$do_mŸi⁄
(
GR_EVENT_MOUSE
 *
mp
)

321 i‡(
mp
->
wid
 =
w4
) {

322 i‡(
löeok
) {

323 
	`GrLöe
(
w4
, 
gc4
, 
x‹xpos
, 
x‹ypos
, 
löexpos
, 
löeypos
);

324 
x‹xpos
 = 
mp
->
x
;

325 
x‹ypos
 = 
mp
->
y
;

326 
	`GrLöe
(
w4
, 
gc4
, 
x‹xpos
, 
x‹ypos
, 
löexpos
, 
löeypos
);

331 i‡(
mp
->
wid
 =
w3
) {

332 
	`GrPoöt
(
w3
, 
gc3
, 
mp
->
x
, mp->
y
);

335 
	}
}

342 
	$do_key°roke
(
GR_EVENT_KEYSTROKE
 *
kp
)

344 
GR_SIZE
 
width
;

345 
GR_SIZE
 
height
;

346 
GR_SIZE
 
ba£
;

348 i‡(
kp
->
wid
 =
w4
) {

349 i‡(
löeok
) {

350 
	`GrLöe
(
w4
, 
gc4
, 
x‹xpos
, 
x‹ypos
, 
löexpos
, 
löeypos
);

351 
löeok
 = 
GR_FALSE
;

356 
	`GrGëGCTextSize
(
gc1
, &
kp
->
ch
, 1, 
GR_TFASCII
, &
width
, &
height
, &
ba£
);

357 i‡((
kp
->
ch
 == '\r') || (kp->ch == '\n')) {

358 
xpos
 = 
begxpos
;

359 
ypos
 +
height
;

362 i‡(
kp
->
ch
 == '\b') {

363 i‡(
xpos
 <
begxpos
)

365 
xpos
 -
width
;

366 
	`GrSëGCF‹eground
(
gc3
, 
BROWN
);

367 
	`GrFûlRe˘
(
w1
, 
gc3
, 
xpos
, 
ypos
 - 
height
 + 
ba£
 + 1,

368 
width
, 
height
);

371 
	`GrText
(
w1
, 
gc1
, 
xpos
, 
ypos
 + 
ba£
, &
kp
->
ch
, 1, 0);

372 
xpos
 +
width
;

373 
	}
}

380 
	$do_exposuª
(
GR_EVENT_EXPOSURE
 *
ï
)

382 
GR_POINT
 
poöts
[3];

384 i‡(
ï
->
wid
 !
w1
)

386 
poöts
[0].
x
 = 311;

387 
poöts
[0].
y
 = 119;

388 
poöts
[1].
x
 = 350;

389 
poöts
[1].
y
 = 270;

390 
poöts
[2].
x
 = 247;

391 
poöts
[2].
y
 = 147;

393 
	`GrFûlRe˘
(
w1
, 
gc2
, 50, 50, 150, 200);

394 
	`GrFûlPﬁy
(
w1
, 
gc2
, 3, 
poöts
);

395 
	}
}

402 
	$do_focusö
(
GR_EVENT_GENERAL
 *
gp
)

404 i‡(
gp
->
wid
 !
w1
)

406 
	`GrSëB‹dîCﬁ‹
(
w1
, 
WHITE
);

407 
	}
}

413 
	$do_focusout
(
GR_EVENT_GENERAL
 *
gp
)

415 i‡(
gp
->
wid
 !
w1
)

417 
	`GrSëB‹dîCﬁ‹
(
w1
, 
GRAY
);

418 
	}
}

425 
	$do_íãr
(
GR_EVENT_GENERAL
 *
gp
)

427 i‡(
gp
->
wid
 !
w5
)

429 
	`GrSëB‹dîCﬁ‹
(
w5
, 
WHITE
);

430 
	`GrRai£Wödow
(
w5
);

431 
	}
}

438 
	$do_exô
(
GR_EVENT_GENERAL
 *
gp
)

440 i‡(
gp
->
wid
 !
w5
)

442 
	`GrSëB‹dîCﬁ‹
(
w5
, 
GREEN
);

443 
	`GrLowîWödow
(
w5
);

444 
	}
}

452 
	$do_idÀ
()

454 
GR_COORD
 
x
;

455 
GR_COORD
 
y
;

456 
GR_SIZE
 
rx
;

457 
GR_SIZE
 
ry
;

458 
GR_PIXELVAL
 
pixñvÆ
;

460 
x
 = 
	`ønd
() % 70;

461 
y
 = 
	`ønd
() % 40;

462 
rx
 = (
	`ønd
() % 10) + 5;

463 
ry
 = (
rx
 * 
si
.
ydpcm
Ë/ si.
xdpcm
;

465 
pixñvÆ
 = 
	`ønd
(Ë% 
si
.
ncﬁ‹s
;

467 
	`GrSëGCF‹egroundPixñVÆ
(
gc3
, 
pixñvÆ
);

468 
	`GrFûlEŒù£
(
w2
, 
gc3
, 
x
, 
y
, 
rx
, 
ry
);

469 
	}
}

476 
	$îr‹ˇtchî
(
GR_EVENT
 *
ï
)

478 
	`¥ötf
("nx˛õ¡: Eº‹ (%sË", 
ï
->
îr‹
.
«me
);

479 
	`¥ötf
(
nxEº‹Såögs
[
ï
->
îr‹
.
code
],Ép->îr‹.
id
);

480 
	}
}

	@demos/nanox/demo2.c

1 
	#MWINCLUDECOLORS


	)

2 
	~<°dio.h
>

3 
	~<°dlib.h
>

4 
	~<uni°d.h
>

5 
	~"«no-X.h
"

7 
	~<sig«l.h
>

10 
	$maö
(
ac
,**
av
)

12 
GR_WINDOW_ID
 
w
, 
w2
;

13 
GR_GC_ID
 
gc
;

14 
GR_EVENT
 
evít
;

15 
GR_WM_PROPERTIES
 
¥›s
;

16 
GR_FONT_ID
 
f⁄t
;

18 i‡(
	`GrO≥n
() < 0) {

19 
	`¥ötf
("Can't open graphics\n");

20 
	`exô
(1);

24 
	`GrSëEº‹H™dÀr
(
NULL
);

26 
	#WIDTH
 320

	)

27 
	#HEIGHT
 240

	)

28 
w
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 20, 20, 
WIDTH
, 
HEIGHT
,

29 0, 
GREEN
, 
BLACK
);

31 
w2
 = 
	`GrNewWödow
(
w
, 20, 20, 40, 40, 0, 
BLUE
, 
BLACK
);

33 
¥›s
.
Êags
 = 
GR_WM_FLAGS_PROPS
 | 
GR_WM_FLAGS_TITLE
;

34 
¥›s
.¥›†
GR_WM_PROPS_NOBACKGROUND
;

35 
¥›s
.
tôÀ
 = "Nano-X Demo2";

36 
	`GrSëWMPr›îtõs
(
w
, &
¥›s
);

38 
gc
 = 
	`GrNewGC
();

40 
f⁄t
 = 
	`GrCª©eF⁄t
("f⁄ts/pcf/lubI24.pcf", 0, 
NULL
);

41 
	`GrSëGCF⁄t
(
gc
, 
f⁄t
);

43 
	`GrSñe˘Evíts
(
w
, 
GR_EVENT_MASK_EXPOSURE
 | 
GR_EVENT_MASK_CLOSE_REQ


44 | 
GR_EVENT_MASK_BUTTON_DOWN


45 | 
GR_EVENT_MASK_KEY_DOWN
 | 
GR_EVENT_MASK_KEY_UP
);

46 
	`GrM≠Wödow
(
w
);

47 
	`GrSëFocus
(
w
);

54 
	`GrGëNextEvít
(&
evít
);

55 
evít
.
ty≥
) {

56 
GR_EVENT_TYPE_EXPOSURE
:

57 
	`GrSëGCF‹eground
(
gc
,
	`GrGëSysCﬁ‹
(
GR_COLOR_APPWINDOW
));

58 
	`GrFûlRe˘
(
w
, 
gc
, 
evít
.
exposuª
.
x
,Évít.exposuª.
y
,

59 
evít
.
exposuª
.
width
,Évít.exposuª.
height
);

60 
	`GrSëGCF‹eground
(
gc
, 
	`GrGëSysCﬁ‹
(
GR_COLOR_APPTEXT
));

61 
	`GrSëGCU£Background
(
gc
, 
GR_FALSE
);

62 
	`GrText
(
w
, 
gc
, 10, 30, "HñlÿW‹ld @MNOPmn", -1, 
GR_TFASCII
);

63 
	`GrRe˘
(
w
, 
gc
, 5, 5, 300, 60);

65 
GR_EVENT_TYPE_CLOSE_REQ
:

66 
	`GrClo£
();

67 
	`exô
(0);

69 
GR_EVENT_TYPE_ERROR
:

70 
	`¥ötf
("\7demo2: Eº‹ (%sË", 
evít
.
îr‹
.
«me
);

71 
	`¥ötf
(
nxEº‹Såögs
[
evít
.
îr‹
.
code
],evít.îr‹.
id
);

74 
GR_EVENT_TYPE_BUTTON_DOWN
:

75 
	`GrUnm≠Wödow
(
w
);

76 
	`GrFlush
();

77 
	`¶ìp
(1);

78 
	`GrM≠Wödow
(
w
);

82 
GR_EVENT_TYPE_BUTTON_DOWN
:

84 
	`GrM≠Wödow
(
w2
);

85 
	`GrMoveWödow
(
GR_ROOT_WINDOW_ID
, 0, 0);

86 { 
GR_SCREEN_INFO
 
söfo
; 
	`GrGëS¸ìnInfo
(&sinfo); }

90 
GR_EVENT_TYPE_KEY_DOWN
:

91 
kev
 = (
GR_EVENT_KEYSTROKE
 *)&
evít
;

92 
	`¥ötf
("DOWN %d (%04x) %04x\n",

93 
kev
->
ch
, kev->ch, kev->
modifõrs
);

95 
GR_EVENT_TYPE_KEY_UP
:

96 
kev
 = (
GR_EVENT_KEYSTROKE
 *)&
evít
;

97 
	`¥ötf
("UP %d (%04x) %04x\n",

98 
kev
->
ch
, kev->ch, kev->
modifõrs
);

104 
	`GrClo£
();

106 
	}
}

	@demos/nanox/demo4.c

5 
	~<°dio.h
>

6 
	~<°dlib.h
>

7 
	~"«no-X.h
"

8 
	~"devi˚.h
"

10 
GR_GC_ID
 
	ggc1
;

11 
GR_SCREEN_INFO
 
	gsi
;

13 
	#GRAY14
 
	`MWRGB
–17, 17, 17 )

	)

14 
	#GRAY13
 
	`MWRGB
–34, 34, 34 )

	)

15 
	#GRAY12
 
	`MWRGB
–51, 51, 51 )

	)

16 
	#GRAY11
 
	`MWRGB
–68, 68, 68 )

	)

17 
	#GRAY10
 
	`MWRGB
–85, 85, 85 )

	)

18 
	#GRAY9
 
	`MWRGB
–102, 102, 102 )

	)

19 
	#GRAY8
 
	`MWRGB
–119, 119, 119 )

	)

20 
	#GRAY7
 
	`MWRGB
–136, 136, 136 )

	)

21 
	#GRAY6
 
	`MWRGB
–153, 153, 153 )

	)

22 
	#GRAY5
 
	`MWRGB
–170, 170, 170 )

	)

23 
	#GRAY4
 
	`MWRGB
–187, 187, 187 )

	)

24 
	#GRAY3
 
	`MWRGB
–204, 204, 204 )

	)

25 
	#GRAY2
 
	`MWRGB
–221, 221, 221 )

	)

26 
	#GRAY1
 
	`MWRGB
–238, 238, 238 )

	)

29 
	$maö
(
¨gc
,**
¨gv
)

31 
GR_EVENT
 
evít
;

33 i‡(
	`GrO≥n
() < 0) {

34 
	`Ârötf
(
°dîr
, "cannot open graphics\n");

35 
	`exô
(1);

38 
	`GrGëS¸ìnInfo
(&
si
);

40 
gc1
 = 
	`GrNewGC
();

42 
	`GrSëGCF‹eground
(
gc1
, 
WHITE
);

45 
	`GrLöe
(
GR_ROOT_WINDOW_ID
, 
gc1
, 4, 4, 634, 4);

46 
	`GrLöe
(
GR_ROOT_WINDOW_ID
, 
gc1
, 4, 4, 4, 474);

47 
	`GrLöe
(
GR_ROOT_WINDOW_ID
, 
gc1
, 634, 4, 634, 474);

48 
	`GrLöe
(
GR_ROOT_WINDOW_ID
, 
gc1
, 4, 474, 634, 474);

54 
PSD
 
mempsd
;

55 
löñí
, 
size
;

56 * 
pixñs
;

58 
mempsd
 = 
s¸dev
.
	`AŒoˇãMemGC
(&scrdev);

59 
	`GdCÆcMemGCAŒoc
(
mempsd
, 50, 100, 0, 0, &
size
, &
löñí
);

60 
pixñs
 = 
	`mÆloc
(
size
);

61 
mempsd
->
Êags
 |
PSF_ADDRMALLOC
;

62 
mempsd
->
	`M≠MemGC
(mempsd, 50, 100, 
s¸dev
.
∂™es
, s¸dev.
bµ
,

63 
löñí
, 
size
, 
pixñs
);

66 
	`GdSëF‹egroundCﬁ‹
(
mempsd
, 
GREEN
);

67 
	`GdFûlRe˘
(
mempsd
, 0, 0, 50, 100);

68 
	`GdSëF‹egroundCﬁ‹
(
mempsd
, 
RED
);

69 
	`GdFûlRe˘
(
mempsd
, 5, 20, 40, 60);

72 
	`GdBlô
(&
s¸dev
, 10, 10, 50, 100, 
mempsd
, 0, 0, 0);

81 
	`GrGëNextEvít
(&
evít
);

82 if(
evít
.
ty≥
 =
GR_EVENT_TYPE_CLOSE_REQ
) ;

85 
	`GrClo£
();

88 
	}
}

	@demos/nanox/demo5.c

5 
	~<°dio.h
>

6 
	~<°dlib.h
>

7 
	#MWINCLUDECOLORS


	)

8 
	~"«no-X.h
"

13 
	#_
 ((Ë0Ë

	)

14 
	#X
 ((Ë1Ë

	)

15 
	#MASK
(
a
,
b
,
c
,
d
,
e
,
f
,
g
) \

16 (((((((((((((
a
 * 2Ë+ 
b
Ë* 2Ë+ 
c
Ë* 2Ë+ 
d
) * 2) \

17 + 
e
Ë* 2Ë+ 
f
Ë* 2Ë+ 
g
Ë<< 9)

	)

19 
	#W2_WIDTH
 70

	)

20 
	#W2_HEIGHT
 40

	)

23 
GR_WINDOW_ID
 
	gw1
;

24 
GR_WINDOW_ID
 
	gw2
;

25 
GR_WINDOW_ID
 
	gw3
;

26 
GR_WINDOW_ID
 
	gw4
;

27 
GR_WINDOW_ID
 
	gw5
;

28 
GR_WINDOW_ID
 
	gp1
;

29 
GR_GC_ID
 
	ggc1
;

30 
GR_GC_ID
 
	ggc2
;

31 
GR_GC_ID
 
	ggc3
;

32 
GR_GC_ID
 
	ggc4
;

33 
GR_COORD
 
	gbegxpos
;

34 
GR_COORD
 
	gxpos
;

35 
GR_COORD
 
	gypos
;

36 
GR_COORD
 
	glöexpos
;

37 
GR_COORD
 
	glöeypos
;

38 
GR_COORD
 
	gx‹xpos
;

39 
GR_COORD
 
	gx‹ypos
;

40 
GR_BOOL
 
	glöeok
;

41 
GR_SCREEN_INFO
 
	gsi
;

43 
do_buâ⁄down
(
GR_EVENT_BUTTON
 *
bp
);

44 
do_buâ⁄up
(
GR_EVENT_BUTTON
 *
bp
);

45 
do_mŸi⁄
(
GR_EVENT_MOUSE
 *
mp
);

46 
do_key°roke
(
GR_EVENT_KEYSTROKE
 *
kp
);

47 
do_exposuª
(
GR_EVENT_EXPOSURE
 *
ï
);

48 
do_focusö
(
GR_EVENT_GENERAL
 *
gp
);

49 
do_focusout
(
GR_EVENT_GENERAL
 *
gp
);

50 
do_íãr
(
GR_EVENT_GENERAL
 *
gp
);

51 
do_exô
(
GR_EVENT_GENERAL
 *
gp
);

52 
do_idÀ
();

55 
	$maö
(
¨gc
,**
¨gv
)

57 
GR_EVENT
 
evít
;

58 
GR_BITMAP
 
bôm≠1fg
[7];

59 
GR_BITMAP
 
bôm≠1bg
[7];

60 
GR_BITMAP
 
bôm≠2fg
[7];

61 
GR_BITMAP
 
bôm≠2bg
[7];

63 i‡(
	`GrO≥n
() < 0) {

64 
	`Ârötf
(
°dîr
, "cannot open graphics\n");

65 
	`exô
(1);

68 
	`GrGëS¸ìnInfo
(&
si
);

70 
w1
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 100, 50, 
si
.
cﬁs
 - 120,

71 
si
.
rows
 - 60, 1, 
BROWN
, 
WHITE
);

72 
w2
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 6, 6, 
W2_WIDTH
, 
W2_HEIGHT
, 2, 
GREEN
,

73 
WHITE
);

74 
w3
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 250, 30, 80, 100, 1, 
LTGRAY
,

75 
GREEN
);

76 
w4
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 350, 20, 200, 150, 5, 
BLACK
, 
WHITE
);

77 
w5
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 11, 143, 209, 100, 1, 
BLUE
, 
GREEN
);

79 
p1
 = 
	`GrNewPixm≠
(200,200,0);

81 
	`GrSñe˘Evíts
(
w1
, 
GR_EVENT_MASK_BUTTON_DOWN
 |

82 
GR_EVENT_MASK_KEY_DOWN
 | 
GR_EVENT_MASK_EXPOSURE
 |

83 
GR_EVENT_MASK_FOCUS_IN
 | 
GR_EVENT_MASK_FOCUS_OUT
 |

84 
GR_EVENT_MASK_CLOSE_REQ
);

85 
	`GrSñe˘Evíts
(
w2
, 
GR_EVENT_MASK_BUTTON_UP
 | 
GR_EVENT_MASK_CLOSE_REQ
);

86 
	`GrSñe˘Evíts
(
w3
, 
GR_EVENT_MASK_BUTTON_DOWN
 |

87 
GR_EVENT_MASK_MOUSE_MOTION
 | 
GR_EVENT_MASK_CLOSE_REQ
);

88 
	`GrSñe˘Evíts
(
w4
, 
GR_EVENT_MASK_BUTTON_DOWN
 |

89 
GR_EVENT_MASK_BUTTON_UP
 | 
GR_EVENT_MASK_MOUSE_POSITION
 |

90 
GR_EVENT_MASK_KEY_DOWN
 | 
GR_EVENT_MASK_CLOSE_REQ
);

91 
	`GrSñe˘Evíts
(
w5
, 
GR_EVENT_MASK_MOUSE_ENTER
 |

92 
GR_EVENT_MASK_MOUSE_EXIT
 | 
GR_EVENT_MASK_CLOSE_REQ
);

93 
	`GrSñe˘Evíts
(
GR_ROOT_WINDOW_ID
, 
GR_EVENT_MASK_BUTTON_DOWN
 |

94 
GR_EVENT_MASK_CLOSE_REQ
);

96 
	`GrM≠Wödow
(
w1
);

97 
	`GrM≠Wödow
(
w2
);

98 
	`GrM≠Wödow
(
w3
);

99 
	`GrM≠Wödow
(
w4
);

100 
	`GrM≠Wödow
(
w5
);

102 
gc1
 = 
	`GrNewGC
();

103 
gc2
 = 
	`GrNewGC
();

104 
gc3
 = 
	`GrNewGC
();

105 
gc4
 = 
	`GrNewGC
();

107 
	`GrSëGCF‹eground
(
gc1
, 
RED
);

108 
	`GrSëGCBackground
(
gc1
, 
BROWN
);

109 
	`GrSëGCF‹eground
(
gc2
, 
MAGENTA
);

110 
	`GrSëGCMode
(
gc4
, 
GR_MODE_XOR
);

112 
bôm≠1fg
[0] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

113 
bôm≠1fg
[1] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

114 
bôm≠1fg
[2] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

115 
bôm≠1fg
[3] = 
	`MASK
(
X
,X,X,X,X,X,X);

116 
bôm≠1fg
[4] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

117 
bôm≠1fg
[5] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

118 
bôm≠1fg
[6] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

120 
bôm≠1bg
[0] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

121 
bôm≠1bg
[1] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

122 
bôm≠1bg
[2] = 
	`MASK
(
X
,X,X,X,X,X,X);

123 
bôm≠1bg
[3] = 
	`MASK
(
X
,X,X,X,X,X,X);

124 
bôm≠1bg
[4] = 
	`MASK
(
X
,X,X,X,X,X,X);

125 
bôm≠1bg
[5] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

126 
bôm≠1bg
[6] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

128 
bôm≠2fg
[0] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

129 
bôm≠2fg
[1] = 
	`MASK
(
_
,
X
,_,_,_,X,_);

130 
bôm≠2fg
[2] = 
	`MASK
(
X
,
_
,_,_,_,_,X);

131 
bôm≠2fg
[3] = 
	`MASK
(
X
,
_
,_,_,_,_,X);

132 
bôm≠2fg
[4] = 
	`MASK
(
_
,
X
,_,_,_,X,_);

133 
bôm≠2fg
[5] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

135 
bôm≠2bg
[0] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

136 
bôm≠2bg
[1] = 
	`MASK
(
_
,
X
,X,X,X,X,_);

137 
bôm≠2bg
[2] = 
	`MASK
(
X
,X,X,X,X,X,X);

138 
bôm≠2bg
[3] = 
	`MASK
(
X
,X,X,X,X,X,X);

139 
bôm≠2bg
[4] = 
	`MASK
(
_
,
X
,X,X,X,X,_);

140 
bôm≠2bg
[5] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

142 
	`GrSëCurs‹
(
w1
, 7, 7, 3, 3, 
WHITE
, 
BLACK
, 
bôm≠1fg
, 
bôm≠1bg
);

143 
	`GrSëCurs‹
(
w2
, 7, 6, 3, 3, 
WHITE
, 
BLACK
, 
bôm≠2fg
, 
bôm≠2bg
);

145 
	`GrRe˘
(
GR_ROOT_WINDOW_ID
, 
gc1
, 0, 0, 
si
.
cﬁs
, si.
rows
);

149 
	`GrGëNextEvít
(&
evít
);

151 
evít
.
ty≥
) {

152 
GR_EVENT_TYPE_BUTTON_DOWN
:

153 
	`do_buâ⁄down
(&
evít
.
buâ⁄
);

156 
GR_EVENT_TYPE_BUTTON_UP
:

157 
	`do_buâ⁄up
(&
evít
.
buâ⁄
);

160 
GR_EVENT_TYPE_MOUSE_POSITION
:

161 
GR_EVENT_TYPE_MOUSE_MOTION
:

162 
	`do_mŸi⁄
(&
evít
.
mou£
);

165 
GR_EVENT_TYPE_KEY_DOWN
:

166 
	`do_key°roke
(&
evít
.
key°roke
);

169 
GR_EVENT_TYPE_EXPOSURE
:

170 
	`do_exposuª
(&
evít
.
exposuª
);

173 
GR_EVENT_TYPE_FOCUS_IN
:

174 
	`do_focusö
(&
evít
.
gíîÆ
);

177 
GR_EVENT_TYPE_FOCUS_OUT
:

178 
	`do_focusout
(&
evít
.
gíîÆ
);

181 
GR_EVENT_TYPE_MOUSE_ENTER
:

182 
	`do_íãr
(&
evít
.
gíîÆ
);

185 
GR_EVENT_TYPE_MOUSE_EXIT
:

186 
	`do_exô
(&
evít
.
gíîÆ
);

189 
GR_EVENT_TYPE_CLOSE_REQ
:

190 
	`GrClo£
();

191 
	`exô
(0);

193 
GR_EVENT_TYPE_NONE
:

194 
	`do_idÀ
();

198 
	}
}

205 
	$do_buâ⁄down
(
GR_EVENT_BUTTON
 *
bp
)

207 
GR_PIXELVAL
 
öèbÀ
[
W2_WIDTH
 * 
W2_HEIGHT
];

208 
GR_PIXELVAL
 
ouâabÀ
[
W2_WIDTH
 * 
W2_HEIGHT
 * 6];

209 
GR_PIXELVAL
 *
öp
;

210 
GR_PIXELVAL
 *
ouç
;

211 
GR_PIXELVAL
 *
ﬁdöp
;

212 
GR_COORD
 
row
;

213 
GR_COORD
 
cﬁ
;

218 i‡(
bp
->
wid
 =
w3
) {

219 
	`GrRai£Wödow
(
w3
);

220 
	`GrRódAªa
(
w2
, 0, 0, 
W2_WIDTH
, 
W2_HEIGHT
, 
öèbÀ
);

221 
öp
 = 
öèbÀ
;

222 
ouç
 = 
ouâabÀ
;

223 
row
 = 0;Ñow < 
W2_HEIGHT
;Ñow++) {

224 
ﬁdöp
 = 
öp
;

225 
cﬁ
 = 0; cﬁ < 
W2_WIDTH
; col++) {

226 *
ouç
++ = *
öp
;

227 *
ouç
++ = *
öp
++;

229 
öp
 = 
ﬁdöp
;

230 
cﬁ
 = 0; cﬁ < 
W2_WIDTH
; col++) {

231 *
ouç
++ = *
öp
;

232 *
ouç
++ = *
öp
++;

234 
öp
 = 
ﬁdöp
;

235 
cﬁ
 = 0; cﬁ < 
W2_WIDTH
; col++) {

236 *
ouç
++ = *
öp
;

237 *
ouç
++ = *
öp
++;

240 
	`GrAªa
(
w1
, 
gc1
, 0, 0, 
W2_WIDTH
 * 2, 
W2_HEIGHT
 * 3, 
ouâabÀ
,

241 
MWPF_PIXELVAL
);

245 i‡(
bp
->
wid
 =
w4
) {

250 
	`GrLöe
(
p1
, 
gc1
, 0,0, 
bp
->
x
, bp->
y
);

252 
	`GrRai£Wödow
(
w4
);

253 
löexpos
 = 
bp
->
x
;

254 
löeypos
 = 
bp
->
y
;

255 
x‹xpos
 = 
bp
->
x
;

256 
x‹ypos
 = 
bp
->
y
;

257 
	`GrLöe
(
w4
, 
gc4
, 
x‹xpos
, 
x‹ypos
, 
löexpos
, 
löeypos
);

258 
löeok
 = 
GR_TRUE
;

262 i‡(
bp
->
wid
 !
w1
) {

267 i‡((
bp
->
buâ⁄s
 & -(() bp->buttons)) != bp->buttons)

268 
	`GrCÀ¨Wödow
(-1, 0);

272 
	`GrRai£Wödow
(
w1
);

275 i‡(
bp
->
buâ⁄s
 & 
GR_BUTTON_L
) {

276 
	`GrCÀ¨Wödow
(
w1
, 
GR_TRUE
);

280 
begxpos
 = 
bp
->
x
;

281 
xpos
 = 
bp
->
x
;

282 
ypos
 = 
bp
->
y
;

283 
	}
}

290 
	$do_buâ⁄up
(
GR_EVENT_BUTTON
 *
bp
)

292 i‡(
bp
->
wid
 =
w4
) {

293 i‡(
löeok
) {

294 
	`GrLöe
(
w4
, 
gc4
, 
x‹xpos
, 
x‹ypos
, 
löexpos
, 
löeypos
);

295 
	`GrLöe
(
w4
, 
gc3
, 
bp
->
x
, bp->
y
, 
löexpos
, 
löeypos
);

297 
löeok
 = 
GR_FALSE
;

298 
	`GrC›yAªa
(
w1
, 
gc4
, 200,200, 200,200, 
p1
,0,0,
MWROP_SRCCOPY
);

302 i‡(
bp
->
wid
 =
w2
) {

303 
	`GrClo£
();

304 
	`exô
(0);

306 
	}
}

313 
	$do_mŸi⁄
(
GR_EVENT_MOUSE
 *
mp
)

315 i‡(
mp
->
wid
 =
w4
) {

316 i‡(
löeok
) {

317 
	`GrLöe
(
w4
, 
gc4
, 
x‹xpos
, 
x‹ypos
, 
löexpos
, 
löeypos
);

318 
x‹xpos
 = 
mp
->
x
;

319 
x‹ypos
 = 
mp
->
y
;

320 
	`GrLöe
(
w4
, 
gc4
, 
x‹xpos
, 
x‹ypos
, 
löexpos
, 
löeypos
);

325 i‡(
mp
->
wid
 =
w3
) {

326 
	`GrPoöt
(
w3
, 
gc3
, 
mp
->
x
, mp->
y
);

329 
	}
}

336 
	$do_key°roke
(
GR_EVENT_KEYSTROKE
 *
kp
)

338 
GR_SIZE
 
width
;

339 
GR_SIZE
 
height
;

340 
GR_SIZE
 
ba£
;

342 i‡(
kp
->
wid
 =
w4
) {

343 i‡(
löeok
) {

344 
	`GrLöe
(
w4
, 
gc4
, 
x‹xpos
, 
x‹ypos
, 
löexpos
, 
löeypos
);

345 
löeok
 = 
GR_FALSE
;

350 
	`GrGëGCTextSize
(
gc1
, &
kp
->
ch
, 1, 
GR_TFASCII
, &
width
, &
height
, &
ba£
);

351 i‡((
kp
->
ch
 == '\r') || (kp->ch == '\n')) {

352 
xpos
 = 
begxpos
;

353 
ypos
 +
height
;

356 i‡(
kp
->
ch
 == '\b') {

357 i‡(
xpos
 <
begxpos
)

359 
xpos
 -
width
;

360 
	`GrSëGCF‹eground
(
gc3
, 
BROWN
);

361 
	`GrFûlRe˘
(
w1
, 
gc3
, 
xpos
, 
ypos
 - 
height
 + 
ba£
 + 1,

362 
width
, 
height
);

365 
	`GrText
(
w1
, 
gc1
, 
xpos
, 
ypos
 + 
ba£
, &
kp
->
ch
, 1, 0);

366 
xpos
 +
width
;

367 
	}
}

374 
	$do_exposuª
(
GR_EVENT_EXPOSURE
 *
ï
)

376 
GR_POINT
 
poöts
[3];

378 i‡(
ï
->
wid
 !
w1
)

380 
poöts
[0].
x
 = 311;

381 
poöts
[0].
y
 = 119;

382 
poöts
[1].
x
 = 350;

383 
poöts
[1].
y
 = 270;

384 
poöts
[2].
x
 = 247;

385 
poöts
[2].
y
 = 147;

387 
	`GrFûlRe˘
(
w1
, 
gc2
, 50, 50, 150, 200);

388 
	`GrFûlPﬁy
(
w1
, 
gc2
, 3, 
poöts
);

389 
	}
}

396 
	$do_focusö
(
GR_EVENT_GENERAL
 *
gp
)

398 i‡(
gp
->
wid
 !
w1
)

400 
	`GrSëB‹dîCﬁ‹
(
w1
, 
WHITE
);

401 
	}
}

407 
	$do_focusout
(
GR_EVENT_GENERAL
 *
gp
)

409 i‡(
gp
->
wid
 !
w1
)

411 
	`GrSëB‹dîCﬁ‹
(
w1
, 
GRAY
);

412 
	}
}

419 
	$do_íãr
(
GR_EVENT_GENERAL
 *
gp
)

421 i‡(
gp
->
wid
 !
w5
)

423 
	`GrSëB‹dîCﬁ‹
(
w5
, 
WHITE
);

424 
	`GrRai£Wödow
(
w5
);

425 
	}
}

432 
	$do_exô
(
GR_EVENT_GENERAL
 *
gp
)

434 i‡(
gp
->
wid
 !
w5
)

436 
	`GrSëB‹dîCﬁ‹
(
w5
, 
GREEN
);

437 
	`GrLowîWödow
(
w5
);

438 
	}
}

446 
	$do_idÀ
()

448 
GR_COORD
 
x
;

449 
GR_COORD
 
y
;

450 
GR_SIZE
 
rx
;

451 
GR_SIZE
 
ry
;

452 
GR_PIXELVAL
 
pixñvÆ
;

454 
x
 = 
	`ønd
() % 70;

455 
y
 = 
	`ønd
() % 40;

456 
rx
 = (
	`ønd
() % 10) + 5;

457 
ry
 = (
rx
 * 
si
.
ydpcm
Ë/ si.
xdpcm
;

459 
pixñvÆ
 = 
	`ønd
(Ë% 
si
.
ncﬁ‹s
;

461 
	`GrSëGCF‹egroundPixñVÆ
(
gc3
, 
pixñvÆ
);

462 
	`GrFûlEŒù£
(
w2
, 
gc3
, 
x
, 
y
, 
rx
, 
ry
);

463 
	}
}

	@demos/nanox/demo6.c

8 
	#USE_PIXMAPS


	)

10 
	~<°dio.h
>

11 
	~<°dlib.h
>

12 
	~<°rög.h
>

13 
	~<î∫o.h
>

14 
	~<«no-X.h
>

16 
GR_WINDOW_ID
 
	gwödow
;

17 #ifde‡
USE_PIXMAPS


18 
GR_WINDOW_ID
 
	gpm≠
;

20 
GR_GC_ID
 
	ggc
;

21 
	gwidth
, 
	gheight
;

22 *
	gd©a
;

24 
	$do_exposuª
(
GR_EVENT_EXPOSURE
 *
evít
)

27 #ifde‡
USE_PIXMAPS


28 
	`GrC›yAªa
(
wödow
, 
gc
, 0, 0, 
width
, 
height
, 
pm≠
, 0, 0, 
MWROP_SRCCOPY
);

30 
	`GrAªa
(
wödow
, 
gc
, 0, 0, 
width
, 
height
, 
d©a
, 
MWPF_RGB
);

32 
	}
}

34 
	$îr‹h™dÀr
(
GR_EVENT
 *
ï
)

36 
	`¥ötf
("Eº‹ (%sËcodê%d id %d", 
ï
->
îr‹
.
«me
,

37 
ï
->
îr‹
.
code
,Ép->îr‹.
id
);

38 
	`exô
(1);

39 
	}
}

41 
	$maö
(
¨gc
, *
¨gv
[])

43 
löe
[256];

44 
GR_EVENT
 
evít
;

45 
FILE
 *
öfûe
;

46 
i
, 
o
;

47 *
p
;

49 if(
¨gc
 != 2) {

50 
	`¥ötf
("Usage: demo6 <filename.ppm>\n");

51 
	`exô
(1);

54 if(!(
öfûe
 = 
	`f›í
(
¨gv
[1], "r"))) {

55 
	`¥ötf
("Couldn'à›í \"%s\" f‹Ñódög: %s\n", 
¨gv
[1],

56 
	`°ªº‹
(
î∫o
));

57 
	`exô
(2);

61 if(!
	`fgës
(
löe
, 256, 
öfûe
)Ë
åunˇãd
;

62 if(
löe
[0] != 'P' ||Üine[1] != '6') {

63 
	`¥ötf
("Unsupported PPMÅype orÇotá PPM file.\n");

64 
	`¥ötf
("Please supplyá valid P6 format file (colour, with "

70 if(!
	`fgës
(
löe
, 256, 
öfûe
)Ë
åunˇãd
;

71 } 
löe
[0] == '#');

74 
	`ssˇnf
(
löe
, "%ò%i", &
width
, &
height
);

77 if(!
	`fgës
(
löe
, 256, 
öfûe
)Ë
åunˇãd
;

78 
	`ssˇnf
(
löe
, "%i", &
i
);

79 if(
i
 != 255) {

80 
	`¥ötf
("Truecolour mode only is supported\n");

81 
	`exô
(4);

85 
i
 = 
width
 * 
height
 * 3;

87 
o
 = 
width
 * 
height
 * 4;

90 if(!(
d©a
 = 
	`mÆloc
(
o
))) {

91 
	`¥ötf
("NotÉnough memoryÅoÜoad image\n");

92 
	`exô
(5);

97 
p
 = 
d©a
;

98 
o
) {

99 if(
	`‰ód
(
p
, 1, 3, 
öfûe
Ë!3Ë
åunˇãd
;

100 
p
 += 4;

101 
o
 -= 4;

105 
	`f˛o£
(
öfûe
);

108 
	`GrSëEº‹H™dÀr
(
îr‹h™dÀr
);

110 if(
	`GrO≥n
() < 0) {

111 
	`¥ötf
("Couldn't connectÅo Nano-X server\n");

112 
	`exô
(6);

115 #ifde‡
USE_PIXMAPS


117 
pm≠
 = 
	`GrNewPixm≠
(
width
, 
height
, 
NULL
);

121 
gc
 = 
	`GrNewGC
();

123 #ifde‡
USE_PIXMAPS


125 
	`GrAªa
(
pm≠
, 
gc
, 0, 0, 
width
, 
height
, 
d©a
, 
MWPF_RGB
);

127 
	`‰ì
(
d©a
);

131 
wödow
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 0, 0, 
width
, 
height
, 0, 0, 0);

134 
	`GrSñe˘Evíts
(
wödow
, 
GR_EVENT_MASK_EXPOSURE
 |

135 
GR_EVENT_MASK_CLOSE_REQ
);

138 
	`GrM≠Wödow
(
wödow
);

140 #ifde‡
USE_PIXMAPS


142 
	`GrC›yAªa
(
wödow
, 
gc
, 0, 0, 
width
, 
height
, 
pm≠
, 0, 0,

143 
MWROP_SRCCOPY
);

145 
	`GrAªa
(
wödow
, 
gc
, 0, 0, 
width
, 
height
, 
d©a
, 
MWPF_RGB
);

149 
	`GrGëNextEvít
(&
evít
);

150 
evít
.
ty≥
) {

151 
GR_EVENT_TYPE_EXPOSURE
:

152 
	`do_exposuª
(&
evít
.
exposuª
);

154 
GR_EVENT_TYPE_CLOSE_REQ
:

155 
	`GrClo£
();

156 
	`exô
(0);

162 
åunˇãd
:

163 
	`¥ötf
("Error: FileáppearsÅo beÅruncated\n");

164 
	`exô
(3);

165 
	}
}

	@demos/nanox/fontdemo.c

4 
	~<°dio.h
>

5 
	~<°dlib.h
>

6 
	#MWINCLUDECOLORS


	)

7 
	~"«no-X.h
"

11 
	#FONTNAME
 "times.âf"

	)

13 
	#FGCOLOR
 
BLACK


	)

14 
	#BGCOLOR
 
WHITE


	)

16 
GR_WINDOW_ID
 
	gw
;

17 
GR_GC_ID
 
	ggc
;

18 
GR_FONT_ID
 
	gf⁄t
;

19 
GR_BOOL
 
	gØ
 = 
GR_TRUE
;

22 
	$do_∑öt
(
GR_EVENT_EXPOSURE
 *
ï
)

24 
i
, 
y
 = 0;

26 
i
=3; i<=30; ++i) {

27 
GR_FONT_INFO
 
öfo
;

28 
buf
[64];

30 
f⁄t
 = 
	`GrCª©eF⁄t
(
FONTNAME
, 
i
, 
NULL
);

31 i‡(
Ø
)

32 
	`GrSëF⁄tAâr
(
f⁄t
, 
GR_TFANTIALIAS
|
GR_TFKERNING
, 0);

34 
	`GrSëGCF⁄t
(
gc
, 
f⁄t
);

36 
	`•rötf
(
buf
, "%d ThêQuick Brow¿Fox Jum≥d Ovî ThêLazy Dog", 
i
);

37 
	`GrText
(
w
, 
gc
, 0, 
y
, 
buf
, -1, 
GR_TFASCII
|
GR_TFTOP
);

39 
	`GrGëF⁄tInfo
(
f⁄t
, &
öfo
);

40 
y
 +
öfo
.
height
;

42 
	`GrDe°royF⁄t
(
f⁄t
);

44 
	}
}

47 
	$maö
(
ac
, **
av
)

49 i‡(
	`GrO≥n
() < 0)

50 
	`exô
(1);

52 
w
 = 
	`GrNewWödowEx
(
GR_WM_PROPS_APPWINDOW
, "f⁄tdemo", 
GR_ROOT_WINDOW_ID
,

53 10, 10, 640, 530, 
BGCOLOR
);

54 
	`GrSñe˘Evíts
(
w
, 
GR_EVENT_MASK_EXPOSURE
|
GR_EVENT_MASK_BUTTON_DOWN
|

55 
GR_EVENT_MASK_CLOSE_REQ
);

56 
	`GrM≠Wödow
(
w
);

58 
gc
 = 
	`GrNewGC
();

59 
	`GrSëGCU£Background
(
gc
, 
GR_FALSE
);

60 
	`GrSëGCF‹eground
(
gc
, 
FGCOLOR
);

61 
	`GrSëGCBackground
(
gc
, 
BGCOLOR
);

64 
GR_EVENT
 
evít
;

66 
	`GrGëNextEvít
(&
evít
);

67 
evít
.
ty≥
) {

68 
GR_EVENT_TYPE_EXPOSURE
:

69 
	`do_∑öt
(&
evít
.
exposuª
);

72 
GR_EVENT_TYPE_BUTTON_DOWN
:

74 
GR_WINDOW_INFO
 
öfo
;

76 
Ø
 = !aa;

77 
	`GrGëWödowInfo
(
w
, &
öfo
);

78 
	`GrSëGCF‹eground
(
gc
, 
BGCOLOR
);

79 
	`GrFûlRe˘
(
w
, 
gc
, 0, 0, 
öfo
.
width
, info.
height
);

80 
	`GrSëGCF‹eground
(
gc
, 
FGCOLOR
);

81 
	`do_∑öt
(&
evít
.
exposuª
);

85 
GR_EVENT_TYPE_CLOSE_REQ
:

86 
	`GrClo£
();

87 
	`exô
(0);

90 
	}
}

	@demos/nanox/ftdemo.c

5 
	~<°dio.h
>

6 
	~<°dlib.h
>

7 
	#MWINCLUDECOLORS


	)

8 
	~"«no-X.h
"

10 #i‡
HAVE_T1LIB_SUPPORT


11 
	#FONTNAME
 "bchr"

	)

13 
	#FONTNAME
 "bchb"

	)

14 
	#FONTNAME
 "d¸10"

	)

15 
	#FONTNAME
 "dcbx10"

	)

17 #ñi‡
HAVE_FREETYPE_SUPPORT


18 
	#FONTNAME
 "…1-r-omega-£rif"

	)

20 
	#FONTNAME
 "times"

	)

21 
	#FONTNAME
 "cour"

	)

24 
	#FONTNAME
 
GR_FONT_SYSTEM_VAR


	)

27 
	#MAXW
 400

	)

28 
	#MAXH
 400

	)

30 
GR_GC_ID
 
	ggid
;

31 
GR_FONT_ID
 
	gf⁄tid
, 
	gf⁄tid2
;

32 
GR_BOOL
 
	gkînög
 = 
GR_FALSE
;

33 
GR_BOOL
 
	gØ
 = 
GR_TRUE
;

34 
GR_BOOL
 
	gundîlöe
 = 
GR_FALSE
;

35 
	g™gÀ
 = 0;

36 
	g°©e
 = 
GR_TFBOTTOM
;

37 
	gbuf„r
[128];

38 
	gn
;

39 
Rídî
(
GR_WINDOW_ID
 
wödow
);

42 
	$maö
()

44 
FILE
 *
fûe
;

45 
GR_EVENT
 
evít
;

46 
GR_WINDOW_ID
 
wödow
;

48 i‡(
	`GrO≥n
() < 0) {

49 
	`Ârötf
(
°dîr
, "cannot open graphics\n");

50 
	`exô
(1);

53 
wödow
 = 
	`GrNewWödowEx
(
GR_WM_PROPS_APPWINDOW
, "ftdemo",

54 
GR_ROOT_WINDOW_ID
, 50,50, 
MAXW
,
MAXH
, 
WHITE
);

55 
	`GrM≠Wödow
(
wödow
);

57 
gid
 = 
	`GrNewGC
 ();

58 
	`GrSñe˘Evíts
(
wödow
, 
GR_EVENT_MASK_KEY_DOWN
 |

59 
GR_EVENT_MASK_CLOSE_REQ
 | 
GR_EVENT_MASK_EXPOSURE
);

61 i‡((
fûe
 = 
	`f›í
("bö/·demo.txt", "r")Ë=
NULL
) {

62 
	`¥ötf
("Can't openÅext file\n");

66 
n
 = 0;

68 if(
	`fgës
(
buf„r
, 128, 
fûe
Ë!
NULL
) {

69 
n
 = 0;Ç < 128 && 
buf„r
[n];Ç++) {

70 i‡(
buf„r
[
n
] == '\n')

74 
	`f˛o£
(
fûe
);

76 
f⁄tid
 = 
	`GrCª©eF⁄t
(
FONTNAME
, 20, 
NULL
);

77 
f⁄tid2
 = 
	`GrCª©eF⁄t
(
FONTNAME
, 36, 
NULL
);

79 
	`Rídî
(
wödow
);

82 
	`GrGëNextEvít
(&
evít
);

84 
evít
.
ty≥
) {

85 
GR_EVENT_TYPE_KEY_DOWN
:

86 
evít
.
key°roke
.
ch
) {

90 
™gÀ
 += 100;

91 
™gÀ
 %= 3600;

96 
™gÀ
 -= 100;

97 
™gÀ
 %= 3600;

100 
Ø
 = (Ø =
GR_FALSE
)?
GR_TRUE
:GR_FALSE;

103 
kînög
 = (kînög =
GR_FALSE
)?
GR_TRUE
:GR_FALSE;

106 
°©e
 = (°©ê=
GR_TFBOTTOM
)?
GR_TFBASELINE
: \

107 (
°©e
 =
GR_TFBASELINE
)?
GR_TFTOP
:
GR_TFBOTTOM
;

110 
undîlöe
 = undîlöe? 
GR_FALSE
: 
GR_TRUE
;

116 
	`Rídî
(
wödow
);

118 
GR_EVENT_TYPE_EXPOSURE
:

119 
	`Rídî
(
wödow
);

121 
GR_EVENT_TYPE_CLOSE_REQ
:

122 
	`GrClo£
();

123 
	`exô
(0);

128 
	}
}

130 
	$Rídî
(
GR_WINDOW_ID
 
wödow
)

132 
	`GrSëGCBackground
(
gid
, 
WHITE
);

133 
	`GrSëGCF‹eground
 (
gid
, 
WHITE
);

134 
	`GrSëGCU£Background
(
gid
, 
GR_FALSE
);

135 
	`GrFûlRe˘
(
wödow
, 
gid
, 0, 0, 
MAXW
, 
MAXH
);

136 
	`GrSëGCF‹eground
 (
gid
, 
BLACK
);

139 
	`GrSëGCF⁄t
(
gid
, 
f⁄tid
);

140 
	`GrSëF⁄tAâr
(
f⁄tid
, 
GR_TFKERNING
 | 
GR_TFANTIALIAS
, 0);

141 
	`GrText
(
wödow
, 
gid
, 5, 20, "+ RŸ©ê°rög clockwi£", 25, 
GR_TFASCII
);

142 
	`GrText
(
wödow
, 
gid
, 5, 40, "- RŸ©ê°rög cou¡î-˛ockwi£", 34, 
GR_TFASCII
);

143 
	`GrText
(
wödow
, 
gid
, 5, 60, "®ToggÀá¡i-Æüsög", 22, 
GR_TFASCII
);

144 
	`GrText
(
wödow
, 
gid
, 5, 80, "k ToggÀ kînög", 16, 
GR_TFASCII
);

145 
	`GrText
(
wödow
, 
gid
, 5, 100, "u ToggÀ undîlöe", 18, 
GR_TFASCII
);

146 
	`GrText
(
wödow
, 
gid
, 5, 120, "» ToggÀálignmíàbŸtom/ba£löe/t›", 39, 
GR_TFASCII
);

149 
	`GrSëGCF⁄t
(
gid
, 
f⁄tid2
);

150 
	`GrSëF⁄tAâr
(
f⁄tid2
, (
kînög
?
GR_TFKERNING
:0Ë| (
Ø
?
GR_TFANTIALIAS
:0) |

151 (
undîlöe
?
GR_TFUNDERLINE
: 0), -1);

152 
	`GrSëF⁄tRŸ©i⁄
(
f⁄tid2
, 
™gÀ
);

153 
	`GrText
(
wödow
, 
gid
, 
MAXW
/2, 
MAXH
/2, 
buf„r
, 
n
, 
°©e
|
GR_TFUTF8
);

156 
	`GrLöe
 (
wödow
, 
gid
, (
MAXW
/2)-10 , 
MAXH
/2, (MAXW/2)+10, MAXH/2);

157 
	`GrLöe
 (
wödow
, 
gid
, 
MAXW
/2, (
MAXH
/2)-10, MAXW/2, (MAXH/2)+10);

158 
	}
}

	@demos/nanox/getselection.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~<uni°d.h
>

4 
	~<°rög.h
>

6 
	~"«no-X.h
"

8 
	gbyãs_ª˚ived
 = 0;

9 *
	gd©a
 = 
NULL
;

11 
	$gŸ_˛õ¡_d©a
(
GR_EVENT
 *
evít
)

13 
GR_EVENT_CLIENT_DATA
 *
ev
 = &
evít
->
˛õ¡d©a
;

15 
	`Ârötf
(
°dîr
, "Got client dataÖacket with serialÇumber %ld for "

16 "wödow %d from wödow %d\n", 
ev
->
£rül
,Év->
wid
,

17 
ev
->
rid
);

18 if(!(
d©a
 = 
	`ªÆloc
(d©a, 
byãs_ª˚ived
 + 
ev
->
d©Æí
))) {

19 
	`Ârötf
(
°dîr
, "Out of memory\n");

20 
	`exô
(7);

22 
	`mem˝y
(
d©a
 + 
byãs_ª˚ived
, 
ev
->d©a,Év->
d©Æí
);

23 
	`‰ì
(
ev
->
d©a
);

25 
	`Ârötf
(
°dîr
, "Got client dataÖacket with serialÇumber %ld for "

26 "wödow %d from wödow %d\n", 
ev
->
£rül
,Év->
wid
,

27 
ev
->
rid
);

28 
	`Ârötf
(
°dîr
, "AlreadyÑeceived %d bytes,ÅhisÖacket is %ld bytes "

30 
byãs_ª˚ived
, 
ev
->
d©Æí
,Év->
Àn
);

32 
byãs_ª˚ived
 +
ev
->
d©Æí
;

33 if(
byãs_ª˚ived
 =
ev
->
Àn
) {

34 
	`Ârötf
(
°dîr
, "we haveÑeceivedáll ofÅhe dataÇow.\n");

35 
	`Ârötf
(
°dîr
, "Thêd©®öÅhê∑ckë is:\n%s\n", 
d©a
);

38 if(
byãs_ª˚ived
 < 
ev
->
Àn
) {

39 
	`Ârötf
(
°dîr
, "this isÇotÅheÜast dataÖacket.\n");

41 } 
	`Ârötf
(
°dîr
, "we haveÑeceivedÅoo much data (shouldn't "

45 
	}
}

47 
	$maö
(
¨gc
, *
¨gv
[])

49 
GR_CHAR
 *
ty≥li°
, *
p
;

50 
GR_WINDOW_ID
 
sid
, 
wid
;

51 
GR_EVENT
 
evít
;

52 
n
 = 0, 
mimëy≥
 = -1;

54 if(
	`GrO≥n
() < 0) {

55 
	`Ârötf
(
°dîr
, "Couldn't connectÅo Nano-X server\n");

59 
sid
 = 
	`GrGëSñe˘i⁄Ow√r
(&
ty≥li°
);

60 if(!
sid
) {

61 
	`Ârötf
(
°dîr
, "Clipboard isÉmpty\n");

65 if(!
ty≥li°
) {

66 
	`Ârötf
(
°dîr
, "GrGetSelectionOwner()ÑeturnedánÉmpty "

67 "ty≥Üi° f‹ wödow %d\n", 
sid
);

71 
	`Ârötf
(
°dîr
, "Wödow %d own†thê£À˘i⁄\n", 
sid
);

72 
	`Ârötf
(
°dîr
, "It claimsÅo beábleÅo supply data inÅhe following "

73 "ty≥s:\n%s\n", 
ty≥li°
);

75 
p
 = 
	`°πok
(
ty≥li°
, " ");

77 if(!
	`°∫cmp
("ãxt/∂aö", 
p
, 10)) {

78 
mimëy≥
 = 
n
;

81 
n
++;

82 } (
p
 = 
	`°πok
(
NULL
, " ")));

84 if(
mimëy≥
 == -1) {

85 
	`Ârötf
(
°dîr
, "TypeÅext/plain isÇotávailable\n");

89 
	`‰ì
(
ty≥li°
);

91 
	`Ârötf
(
°dîr
, "TypeÅext/plain isávailable-Ñequesting data\n");

93 
wid
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 0, 0, 1, 1, 0, 0, 0);

94 if(!
wid
) {

95 
	`Ârötf
(
°dîr
, "Couldn't getá window\n");

99 
	`GrSñe˘Evíts
(
wid
, 
GR_EVENT_MASK_CLIENT_DATA
);

101 
	`GrReque°Clõ¡D©a
(
wid
, 
sid
, 0, 
mimëy≥
);

104 
	`GrGëNextEvítTimeout
(&
evít
, 4000);

105 
evít
.
ty≥
) {

106 
GR_EVENT_TYPE_CLIENT_DATA
:

107 if(
	`gŸ_˛õ¡_d©a
(&
evít
))

110 
GR_EVENT_TYPE_TIMEOUT
:

111 
	`Ârötf
(
°dîr
, "Timed out waiting for data\n");

119 
	}
}

	@demos/nanox/grabdemo.c

24 
	#MWINCLUDECOLORS


	)

25 
	~<°dio.h
>

26 
	~<°dlib.h
>

27 
	~<uni°d.h
>

28 
	~"«no-X.h
"

30 
	~<sig«l.h
>

32 
GR_WINDOW_ID
 
	gmaö_wödow
;

33 
GR_GC_ID
 
	gmaö_gc
;

35 
	gmesßge1
[100] = "";

36 
	gmesßge2
[100] = "";

37 
	gmesßge3
[100] = "";

38 
	gmesßge4
[100] = "";

39 
	gmesßge5
[100] = "TryÖressing keys...";

41 
	#WIDTH
 500

	)

42 
	#HEIGHT
 110

	)

45 
	$gëSîülNumbî
()

47 
£rül
 = 0;

48 i‡(++
£rül
 >= 1000)

49 
£rül
 = 0;

50  
£rül
;

51 
	}
}

54 
	$keyToCh¨
(
key
)

56 i‡((
key
 >= 32) && (key <= 127)) {

57  ()
key
;

61 
	}
}

64 c⁄° *
	$gøbKödName
(
köd
)

66 
köd
) {

67 
GR_GRAB_HOTKEY_EXCLUSIVE
:

69 
GR_GRAB_HOTKEY
:

71 
GR_GRAB_EXCLUSIVE
:

73 
GR_GRAB_EXCLUSIVE_MOUSE
:

78 
	}
}

81 
	$ª∑öt
(
x
, 
y
, 
width
, 
height
)

83 
	`GrSëGCF‹eground
(
maö_gc
, 
	`GrGëSysCﬁ‹
(
GR_COLOR_APPWINDOW
));

84 
	`GrFûlRe˘
(
maö_wödow
, 
maö_gc
, 
x
, 
y
, 
width
, 
height
);

85 
	`GrSëGCF‹eground
(
maö_gc
, 
	`GrGëSysCﬁ‹
(
GR_COLOR_APPTEXT
));

86 
	`GrSëGCU£Background
(
maö_gc
, 
GR_FALSE
);

87 
	`GrText
(
maö_wödow
, 
maö_gc
, 10, 20, 
mesßge1
, -1, 
GR_TFASCII
);

88 
	`GrText
(
maö_wödow
, 
maö_gc
, 10, 40, 
mesßge2
, -1, 
GR_TFASCII
);

89 
	`GrText
(
maö_wödow
, 
maö_gc
, 10, 60, 
mesßge3
, -1, 
GR_TFASCII
);

90 
	`GrText
(
maö_wödow
, 
maö_gc
, 10, 80, 
mesßge4
, -1, 
GR_TFASCII
);

91 
	`GrText
(
maö_wödow
, 
maö_gc
, 10, 100, 
mesßge5
, -1, 
GR_TFASCII
);

92 
	`GrRe˘
(
maö_wödow
, 
maö_gc
, 5, 5, 
WIDTH
 - 10, 
HEIGHT
 - 10);

93 
	}
}

96 
	$ª∑ötAŒ
()

98 
	`ª∑öt
(0,0,
WIDTH
,
HEIGHT
);

99 
	}
}

102 
	$maö
(
¨gc
,**
¨gv
)

104 
GR_EVENT
 
evít
;

105 
GR_WM_PROPERTIES
 
¥›s
;

106 
gøbResu…
;

107 
key
 = 'a';

108 
gøbKöd
 = 
GR_GRAB_HOTKEY_EXCLUSIVE
;

110 i‡(
¨gc
 >= 2)

111 
key
 = 
	`©oi
(
¨gv
[1]);

113 i‡(
¨gc
 >= 3) {

114 
¨gv
[2][0]) {

116 
gøbKöd
 = 
GR_GRAB_HOTKEY_EXCLUSIVE
;

119 
gøbKöd
 = 
GR_GRAB_HOTKEY
;

122 
gøbKöd
 = 
GR_GRAB_EXCLUSIVE
;

125 
gøbKöd
 = 
GR_GRAB_EXCLUSIVE_MOUSE
;

128 
	`¥ötf
( "Usage: %s key {n|h|x|s}\n"

134 
¨gv
[0]);

139 i‡(
	`GrO≥n
() < 0) {

140 
	`¥ötf
("Can't open graphics\n");

141 
	`exô
(1);

145 
	`GrSëEº‹H™dÀr
(
NULL
);

147 
maö_wödow
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 20, 20, 
WIDTH
, 
HEIGHT
,

148 0, 
GREEN
, 
BLACK
);

150 
¥›s
.
Êags
 = 
GR_WM_FLAGS_PROPS
 | 
GR_WM_FLAGS_TITLE
;

151 
¥›s
.¥›†
GR_WM_PROPS_NOBACKGROUND
;

152 
¥›s
.
tôÀ
 = "Nano-X GrabKey Demo";

153 
	`GrSëWMPr›îtõs
(
maö_wödow
, &
¥›s
);

155 
maö_gc
 = 
	`GrNewGC
();

157 
	`¥ötf
("Ex˛usivñyÑe£rvög key %d ('%c'): ", 
key
, 
	`keyToCh¨
(key));

158 
gøbResu…
 = 
	`GrGøbKey
(
maö_wödow
, 
key
, 
gøbKöd
);

159 
	`¥ötf
("%d\n", 
gøbResu…
);

161 
	`GrSñe˘Evíts
(
maö_wödow
, 
GR_EVENT_MASK_EXPOSURE
 | 
GR_EVENT_MASK_CLOSE_REQ


162 | 
GR_EVENT_MASK_KEY_DOWN
 | 
GR_EVENT_MASK_KEY_UP
);

163 
	`GrM≠Wödow
(
maö_wödow
);

164 
	`GrSëFocus
(
maö_wödow
);

166 
	`•rötf
(
mesßge1
,"ExclusivelyÑeserving key %d ('%c'): %s (Mode: %s)\n",

167 
key
, 
	`keyToCh¨
(key),

168 (
gøbResu…
 ? "success" : "failure"),

169 
	`gøbKödName
(
gøbKöd
));

172 
	`GrGëNextEvít
(&
evít
);

173 
evít
.
ty≥
) {

174 
GR_EVENT_TYPE_EXPOSURE
:

175 
	`ª∑öt
(
evít
.
exposuª
.
x
,Évít.exposuª.
y
,

176 
evít
.
exposuª
.
width
,Évít.exposuª.
height
);

178 
GR_EVENT_TYPE_CLOSE_REQ
:

179 
	`GrClo£
();

180 
	`exô
(0);

182 
GR_EVENT_TYPE_ERROR
:

183 
	`¥ötf
("\7gøbdemo: Eº‹ (%sË", 
evít
.
îr‹
.
«me
);

184 
	`¥ötf
(
nxEº‹Såögs
[
evít
.
îr‹
.
code
],evít.îr‹.
id
);

186 
GR_EVENT_TYPE_KEY_DOWN
:

187 i‡(
evít
.
key°roke
.
hŸkey
)

188 
	`•rötf
(
mesßge4
, "%03d Hotkey %d ('%c') scan %dÖressed\n",

189 
	`gëSîülNumbî
(), 
evít
.
key°roke
.
ch
,

190 
	`keyToCh¨
(
evít
.
key°roke
.
ch
),Évít.key°roke.
sˇncode
);

192 
	`•rötf
(
mesßge2
, "%03d Key %d ('%c') scan %dÖressed\n",

193 
	`gëSîülNumbî
(), 
evít
.
key°roke
.
ch
,

194 
	`keyToCh¨
(
evít
.
key°roke
.
ch
),Évít.key°roke.
sˇncode
);

195 
	`ª∑ötAŒ
();

197 
GR_EVENT_TYPE_KEY_UP
:

198 i‡(
evít
.
key°roke
.
hŸkey
)

199 
	`•rötf
(
mesßge5
, "%03d Hotkey %d ('%c')Ñeleased\n",

200 
	`gëSîülNumbî
(), 
evít
.
key°roke
.
ch
, 
	`keyToCh¨
(event.keystroke.ch));

202 
	`•rötf
(
mesßge3
, "%03d Key %d ('%c')Ñeleased\n",

203 
	`gëSîülNumbî
(), 
evít
.
key°roke
.
ch
, 
	`keyToCh¨
(event.keystroke.ch));

204 
	`ª∑ötAŒ
();

209 
	`GrClo£
();

211 
	}
}

	@demos/nanox/info.c

5 
	~<°dio.h
>

6 
	~<c⁄io.h
>

7 
	~"«no-X.h
"

9 
	$maö
()

11 
GR_SCREEN_INFO
 
si
;

12 
GR_FONT_INFO
 
fi
;

13 
GR_GC_INFO
 
gi
;

14 
GR_FONT
 
f⁄ts
;

15 
x
, 
y
;

17 
	`GrO≥n
();

18 
	`GrGëS¸ìnInfo
(&
si
);

20 
	`¥ötf
("row†%d\n", 
si
.
rows
);

21 
	`¥ötf
("cﬁ†%d\n", 
si
.
cﬁs
);

22 
	`¥ötf
("bµ = %d\n", 
si
.
bµ
);

23 
	`¥ötf
("∂™e†%d\n", 
si
.
∂™es
);

24 
	`¥ötf
("ncﬁ‹†%d\n", 
si
.
ncﬁ‹s
);

25 
	`¥ötf
("buâ⁄†0x%x\n", 
si
.
buâ⁄s
);

26 
	`¥ötf
("modifõr†0x%x\n", 
si
.
modifõrs
);

27 
	`¥ötf
("f⁄t†%d\n", 
si
.
f⁄ts
);

29 
	`gëch
();

31 
f⁄ts
 = 0; f⁄t†< 
si
.fonts; fonts++) {

33 
	`GrGëF⁄tInfo
(
f⁄ts
, &
fi
);

35 
	`¥ötf
("\nf⁄à%d\n", 
fi
.
f⁄t
);

36 
	`¥ötf
("heighà%d\n", 
fi
.
height
);

37 
	`¥ötf
("maxwidth = %d\n", 
fi
.
maxwidth
);

38 
	`¥ötf
("ba£löê%d\n", 
fi
.
ba£löe
);

39 
	`¥ötf
("fixed = %s\n", 
fi
.
fixed
 ? "TRUE" : "FALSE");

40 
	`¥ötf
("widths =\n");

41 
y
 = 0; y != 3; y++) {

42 
x
 = 0; x != 7; x++)

43 
	`¥ötf
("%2d", 
fi
.
widths
[
x
 * 
y
]);

44 
	`¥ötf
("\n");

46 
	`gëch
();

52 
	`gëch
();

54 
	`GrClo£
();

55 
	}
}

	@demos/nanox/ipcclient.c

7 
	~<°dio.h
>

8 
	~<°dlib.h
>

9 
	~<uni°d.h
>

10 
	~<°rög.h
>

12 
	~"«no-X.h
"

14 
	$£nd_pög
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
£rvîid
,

15 
GR_SERIALNO
 
£rül
)

17 
	`¥ötf
("SídögÖög from %dÅÿ%d wôh sîü»%lu\n", 
wid
, 
£rvîid
,

18 
£rül
);

19 
	`GrSídClõ¡D©a
(
wid
, 
£rvîid
, 
£rül
, 4, 4, "ping");

20 
	}
}

22 
	$h™dÀ_∑ckë
(
GR_EVENT
 *
evít
)

24 
GR_EVENT_CLIENT_DATA
 *
pkt
 = (GR_EVENT_CLIENT_DATA *)
evít
;

26 if(
pkt
->
Àn
 =4 && !
	`memcmp
’kt->
d©a
, "pong", 4)) {

27 
	`¥ötf
("GŸÖ⁄g from %dÅÿ%d wôh sîü»%lu\n", 
pkt
->
rid
,

28 
pkt
->
wid
,Ökt->
£rül
);

29 } 
	`¥ötf
("GŸ unknow¿∑ckë from %d\n", 
pkt
->
rid
);

30 
	}
}

32 
	$maö
(
¨gc
, *
¨gv
[])

34 
GR_EVENT
 
evít
;

35 
GR_PROP
 *
d©a
;

36 
GR_SERIALNO
 
cou¡
 = 0;

37 
GR_WINDOW_ID
 
wid
, 
£rvîid
;

39 if(
	`GrO≥n
() < 0) {

40 
	`Ârötf
(
°dîr
, "Couldn't connectÅo Nano-X server\n");

44 
wid
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 0, 0, 1, 1, 0, 0, 0);

45 if(!
wid
) {

46 
	`Ârötf
(
°dîr
, "Couldn't getá window\n");

47 
	`GrClo£
();

51 
	`GrSñe˘Evíts
(
wid
, 
GR_EVENT_MASK_CLIENT_DATA
 | 
GR_EVENT_MASK_TIMER
);

53 if(
	`GrGëWödowPr›îty
(
GR_ROOT_WINDOW_ID
, "demo_ùc_£rvî", &
d©a
)

54 !(
£rvîid
)) {

55 if(!
d©a
) {

56 
	`Ârötf
(
°dîr
, "Couldn't find server ID\n");

57 
	`GrClo£
();

60 
	`Ârötf
(
°dîr
, "Server IDÖroperty is wrong size\n");

61 
	`‰ì
(
d©a
);

62 
	`GrClo£
();

67 
	`mem˝y
(&
£rvîid
, 
d©a
, (serverid));

68 
	`‰ì
(
d©a
);

70 
	`¥ötf
("Found sîvîáàwödow %d\n", 
£rvîid
);

72 
	`GrCª©eTimî
(
wid
, 1000, 
GR_TRUE
);

75 
	`GrGëNextEvít
(&
evít
);

76 
evít
.
ty≥
) {

77 
GR_EVENT_TYPE_TIMER
:

78 
	`£nd_pög
(
wid
, 
£rvîid
, 
cou¡
++);

80 
GR_EVENT_TYPE_CLIENT_DATA
:

81 
	`h™dÀ_∑ckë
(&
evít
);

84 
	`Ârötf
(
°dîr
, "Got unknownÉvent %d\n",

85 
evít
.
ty≥
);

90 
	`GrClo£
();

93 
	}
}

	@demos/nanox/ipcserver.c

7 
	~<°dio.h
>

8 
	~<°dlib.h
>

9 
	~<uni°d.h
>

10 
	~<°rög.h
>

12 
	~"«no-X.h
"

14 
	$h™dÀ_∑ckë
(
GR_WINDOW_ID
 
wid
, 
GR_EVENT
 *
evít
)

16 
GR_EVENT_CLIENT_DATA
 *
pkt
 = (GR_EVENT_CLIENT_DATA *)
evít
;

18 if(
pkt
->
Àn
 =4 && !
	`memcmp
’kt->
d©a
, "ping", 4)) {

19 
	`¥ötf
("GotÖingÖacket from window %d with serial %lu, "

20 "£ndögÖ⁄gÑïly\n", 
pkt
->
rid
,Ökt->
£rül
);

21 
	`GrSídClõ¡D©a
(
wid
, 
pkt
->
rid
,Ökt->
£rül
,

23 } 
	`¥ötf
("GŸ unknow¿∑ckë from wödow %d\n", 
pkt
->
rid
);

24 
	}
}

26 
	$maö
(
¨gc
, *
¨gv
[])

28 
GR_EVENT
 
evít
;

29 
GR_WINDOW_ID
 
wid
;

31 if(
	`GrO≥n
() < 0) {

32 
	`Ârötf
(
°dîr
, "Couldn't connectÅo Nano-X server\n");

36 
wid
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 0, 0, 1, 1, 0, 0, 0);

37 if(!
wid
) {

38 
	`Ârötf
(
°dîr
, "Couldn't getá window\n");

39 
	`GrClo£
();

43 
	`GrSñe˘Evíts
(
wid
, 
GR_EVENT_MASK_CLIENT_DATA
);

45 
	`GrCh™gePr›îty
(
GR_ROOT_WINDOW_ID
, "demo_ùc_£rvî", (
GR_PROP
 *)&
wid
,

46 (
wid
));

48 
	`¥ötf
("Regi°îed sîvî wödow %d\n", 
wid
);

51 
	`GrGëNextEvít
(&
evít
);

52 
evít
.
ty≥
) {

53 
GR_EVENT_TYPE_CLIENT_DATA
:

54 
	`h™dÀ_∑ckë
(
wid
, &
evít
);

57 
	`Ârötf
(
°dîr
, "Got unknownÉvent %d\n",

58 
evít
.
ty≥
);

63 
	`GrClo£
();

66 
	}
}

	@demos/nanox/landmine.c

6 
	~<°dio.h
>

7 
	~<°d¨g.h
>

8 
	~<°dlib.h
>

9 
	~<°rög.h
>

10 #i‡
UNIX
 | 
DOS_DJGPP


11 
	~<f˙é.h
>

12 
	~<uni°d.h
>

13 
	~<time.h
>

15 
	#MWINCLUDECOLORS


	)

16 
	~"«no-X.h
"

19 
	#MINSIZE
 3

	)

20 
	#MAXSIZE
 30

	)

21 
	#SIZE
 15

	)

22 
	#MINEPERCENT
 15

	)

23 
	#SAVEFILE
 "œndmöe.ßve"

	)

24 
	#MAGIC
 649351261

	)

25 
	#MAXPARAMS
 1000

	)

27 
	#FULLSIZE
 (
MAXSIZE
 + 2Ë

	)

29 #ifde‡
__ECOS


31 
	#BOARDGAP
 2

	)

32 
	#RIGHTGAP
 2

	)

33 
	#BUTTONGAP
 5

	)

34 
	#STATUSGAP
 10

	)

36 
	#BUTTONWIDTH
 80

	)

37 
	#BUTTONHEIGHT
 25

	)

38 
	#RIGHTSIDE
 90

	)

39 
	#BOARDBORDER
 2

	)

41 
	#BOARDGAP
 10

	)

42 
	#RIGHTGAP
 15

	)

43 
	#BUTTONGAP
 20

	)

44 
	#STATUSGAP
 35

	)

46 
	#BUTTONWIDTH
 80

	)

47 
	#BUTTONHEIGHT
 25

	)

48 
	#RIGHTSIDE
 150

	)

49 
	#BOARDBORDER
 2

	)

57 
	#PRINTSTEPS
 
	`¥öéöe
(2, "Sãps: %3d\n", 
°ïs
)

	)

63 
	tCELL
;

64 
	tPOS
;

70 
	#X
 ((Ë1)

	)

71 
	#_
 ((Ë0)

	)

73 
	#BITS
(
a
,
b
,
c
,
d
,
e
,
f
,
g
,
h
,
i
) \

74 (((((((((
a
*2+
b
)*2+
c
)*2+
d
)*2+
e
)*2+
f
)*2+
g
)*2+
h
)*2+
i
Ë<< 7)

	)

77 
GR_BITMAP
 
	gtwﬁegs_fg
[] = {

78 
BITS
(
_
,_,_,_,_,_,_,_,_),

79 
BITS
(
_
,_,_,
X
,X,X,_,_,_),

80 
BITS
(
_
,_,_,
X
,X,X,_,_,_),

81 
BITS
(
_
,_,_,
X
,X,X,_,_,_),

82 
BITS
(
_
,_,_,_,
X
,_,_,_,_),

83 
BITS
(
_
,_,
X
,X,X,X,X,_,_),

84 
BITS
(
_
,
X
,_,X,_,X,_,X,_),

85 
BITS
(
_
,
X
,_,X,X,X,_,X,_),

86 
BITS
(
_
,_,_,
X
,_,X,_,_,_),

87 
BITS
(
_
,_,_,
X
,_,X,_,_,_),

88 
BITS
(
_
,_,
X
,X,_,X,X,_,_),

89 
BITS
(
_
,_,_,_,_,_,_,_,_)

92 
GR_BITMAP
 
	gtwﬁegs_bg
[] = {

93 
BITS
(
_
,_,
X
,X,X,X,X,_,_),

94 
BITS
(
_
,_,
X
,X,X,X,X,_,_),

95 
BITS
(
_
,_,
X
,X,X,X,X,_,_),

96 
BITS
(
_
,_,
X
,X,X,X,X,_,_),

97 
BITS
(
_
,
X
,X,X,X,X,X,X,_),

98 
BITS
(
X
,X,X,X,X,X,X,X,X),

99 
BITS
(
X
,X,X,X,
_
,X,X,X,X),

100 
BITS
(
X
,X,X,X,X,X,X,X,X),

101 
BITS
(
X
,X,X,X,X,X,X,X,X),

102 
BITS
(
_
,
X
,X,X,X,X,X,X,_),

103 
BITS
(
_
,
X
,X,X,X,X,X,X,_),

104 
BITS
(
_
,
X
,X,X,X,X,X,X,_)

108 
GR_BITMAP
 
	g⁄ñeg_fg
[] = {

109 
BITS
(
_
,_,_,_,_,_,_,_,_),

110 
BITS
(
_
,_,_,
X
,X,X,_,_,_),

111 
BITS
(
_
,_,_,
X
,X,X,_,_,_),

112 
BITS
(
_
,_,_,
X
,X,X,_,_,_),

113 
BITS
(
_
,_,_,_,
X
,_,_,_,_),

114 
BITS
(
_
,_,
X
,X,X,X,X,_,_),

115 
BITS
(
_
,
X
,_,X,_,X,_,X,_),

116 
BITS
(
_
,_,_,
X
,X,X,_,X,_),

117 
BITS
(
_
,_,_,_,_,
X
,_,_,_),

118 
BITS
(
_
,_,_,_,_,
X
,_,_,_),

119 
BITS
(
_
,_,_,_,_,
X
,X,_,_),

120 
BITS
(
_
,_,_,_,_,_,_,_,_),

124 
GR_BITMAP
 
	g⁄ñeg_bg
[] = {

125 
BITS
(
_
,_,
X
,X,X,X,X,_,_),

126 
BITS
(
_
,_,
X
,X,X,X,X,_,_),

127 
BITS
(
_
,_,
X
,X,X,X,X,_,_),

128 
BITS
(
_
,_,
X
,X,X,X,X,_,_),

129 
BITS
(
_
,
X
,X,X,X,X,X,X,_),

130 
BITS
(
X
,X,X,X,X,X,X,X,X),

131 
BITS
(
X
,X,X,X,
_
,X,X,X,X),

132 
BITS
(
X
,X,X,X,X,X,X,X,X),

133 
BITS
(
_
,_,
X
,X,X,X,X,X,X),

134 
BITS
(
_
,_,_,_,
X
,X,X,X,_),

135 
BITS
(
_
,_,_,_,
X
,X,X,X,_),

136 
BITS
(
_
,_,_,_,
X
,X,X,X,_)

140 
GR_BITMAP
 
	gnﬁeg_fg
[] = {

141 
BITS
(
_
,_,_,_,_,_,_,_,_),

142 
BITS
(
_
,_,_,
X
,X,X,_,_,_),

143 
BITS
(
_
,_,_,
X
,X,X,_,_,_),

144 
BITS
(
_
,_,_,
X
,X,X,_,_,_),

145 
BITS
(
_
,_,_,_,
X
,_,_,_,_),

146 
BITS
(
_
,_,
X
,X,X,X,X,_,_),

147 
BITS
(
_
,
X
,_,X,_,X,_,X,_),

148 
BITS
(
_
,_,_,
X
,X,X,_,_,_),

149 
BITS
(
_
,_,_,_,_,_,_,_,_),

150 
BITS
(
_
,_,_,_,_,_,_,_,_),

151 
BITS
(
_
,_,_,_,_,_,_,_,_),

152 
BITS
(
_
,_,_,_,_,_,_,_,_),

156 
GR_BITMAP
 
	gnﬁeg_bg
[] = {

157 
BITS
(
_
,_,
X
,X,X,X,X,_,_),

158 
BITS
(
_
,_,
X
,X,X,X,X,_,_),

159 
BITS
(
_
,_,
X
,X,X,X,X,_,_),

160 
BITS
(
_
,_,
X
,X,X,X,X,_,_),

161 
BITS
(
_
,
X
,X,X,X,X,X,X,_),

162 
BITS
(
X
,X,X,X,X,X,X,X,X),

163 
BITS
(
X
,X,X,X,
_
,X,X,X,X),

164 
BITS
(
X
,X,X,X,X,X,X,X,X),

165 
BITS
(
_
,_,
X
,X,X,X,X,_,_),

166 
BITS
(
_
,_,_,_,_,_,_,_,_),

167 
BITS
(
_
,_,_,_,_,_,_,_,_),

168 
BITS
(
_
,_,_,_,_,_,_,_,_)

175 
	#F_EMPTY
 ' '

	)

176 
	#F_REMEMBER
 '*'

	)

177 
	#F_WRONG
 'X'

	)

178 
	#F_DISPLAY
 0xf‡

	)

179 
	#F_MINE
 0x100

	)

180 
	#F_EDGE
 0x200

	)

181 
	#F_OLD
 0x400

	)

182 
	#F_REACH
 0x800

	)

183 
	#F_FLAGS
 0xff00

	)

190 
	s°©us
 {

191 
	ms_magic
;

192 
	ms_∂ayög
;

193 
	ms_size
;

194 
	ms_möes
;

195 
	ms_Àgs
;

196 
	ms_°ïs
;

197 
	ms_ödex
;

198 
	ms_sizï¨am
[
MAXPARAMS
];

199 
	ms_möï¨am
[
MAXPARAMS
];

200 
	ms_games0
[
MAXPARAMS
];

201 
	ms_games1
[
MAXPARAMS
];

202 
	ms_games2
[
MAXPARAMS
];

203 
	ms_°ïs0
[
MAXPARAMS
];

204 
	ms_°ïs1
[
MAXPARAMS
];

205 
	ms_°ïs2
[
MAXPARAMS
];

206 
CELL
 
	ms_bﬂrd
[
FULLSIZE
*FULLSIZE];

207 } 
	g°
;

213 
	#magic
 
°
.
s_magic


	)

214 
	#∂ayög
 
°
.
s_∂ayög


	)

215 
	#size
 
°
.
s_size


	)

216 
	#möes
 
°
.
s_möes


	)

217 
	#Àgs
 
°
.
s_Àgs


	)

218 
	#°ïs
 
°
.
s_°ïs


	)

219 
	#ödex
 
°
.
s_ödex


	)

220 
	#sizï¨am
 
°
.
s_sizï¨am


	)

221 
	#möï¨am
 
°
.
s_möï¨am


	)

222 
	#games0
 
°
.
s_games0


	)

223 
	#games1
 
°
.
s_games1


	)

224 
	#games2
 
°
.
s_games2


	)

225 
	#°ïs0
 
°
.
s_°ïs0


	)

226 
	#°ïs1
 
°
.
s_°ïs1


	)

227 
	#°ïs2
 
°
.
s_°ïs2


	)

228 
	#bﬂrd
 
°
.
s_bﬂrd


	)

231 
	#bﬂrdpos
(
row
, 
cﬁ
Ë((‘owË* 
FULLSIZE
Ë+ (cﬁ))

	)

232 
	#ismöe
(
˚Œ
Ë((˚ŒË& 
F_MINE
)

	)

233 
	#i£dge
(
˚Œ
Ë((˚ŒË& 
F_EDGE
)

	)

234 
	#isﬁd
(
˚Œ
Ë((˚ŒË& 
F_OLD
)

	)

235 
	#is£í
(
˚Œ
Ë(((˚ŒË& 
F_DISPLAY
Ë=
F_REMEMBER
)

	)

236 
	#isknown
(
˚Œ
Ë(((˚ŒË& 
F_DISPLAY
Ë!
F_EMPTY
)

	)

237 
	#di•œych¨
(
˚Œ
Ë((˚ŒË& 
F_DISPLAY
)

	)

238 
	#badsqu¨e
(
n
Ë((“Ë<0Ë|| (“Ë> 
size
))

	)

244 
POS
 
	g°ïèbÀ
[8] = {

245 
FULLSIZE
, -FULLSIZE, 1, -1, FULLSIZE-1,

246 
FULLSIZE
+1, -FULLSIZE-1, -FULLSIZE+1

250 
GR_WINDOW_ID
 
	gmaöwid
;

251 
GR_WINDOW_ID
 
	gbﬂrdwid
;

252 
GR_WINDOW_ID
 
	g°©wid
;

253 
GR_WINDOW_ID
 
	gquôwid
;

254 
GR_WINDOW_ID
 
	gßvewid
;

255 
GR_WINDOW_ID
 
	g√wgamewid
;

257 
GR_GC_ID
 
	gbﬂrdgc
;

258 
GR_GC_ID
 
	g˛órgc
;

259 
GR_GC_ID
 
	gªdgc
;

260 
GR_GC_ID
 
	ggªígc
;

261 
GR_GC_ID
 
	gbœckgc
;

262 
GR_GC_ID
 
	gdñaygc
;

263 
GR_GC_ID
 
	g°©gc
;

264 
GR_GC_ID
 
	gbuâ⁄gc
;

265 
GR_GC_ID
 
	gx‹gc
;

267 
GR_SIZE
 
	gxp
;

268 
GR_SIZE
 
	gyp
;

269 
GR_SIZE
 
	g°©width
;

270 
GR_SIZE
 
	g°©height
;

271 
GR_SIZE
 
	gch¨height
;

272 
GR_COORD
 
	gch¨xpos
;

273 
GR_COORD
 
	gch¨ypos
;

275 
GR_SCREEN_INFO
 
	gsi
;

276 
GR_FONT_INFO
 
	gfi
;

278 
GR_SIZE
 
	gCOLS
, 
	gROWS
;

280 *
	gßvefûe
;

286 
dokey
(
GR_EVENT_KEYSTROKE
 *
kp
);

287 
døwbﬂrd
();

288 
døw˚Œ
(
POS
 
pos
);

289 
˛ór˚Œ
(
POS
 
pos
);

290 
døwbomb
(
POS
 
pos
, 
GR_GC_ID
 
gc
, 
GR_BOOL
 
™im©e
);

291 
døwbuâ⁄
(
GR_WINDOW_ID
 
wödow
, *
œbñ
);

292 
£tcurs‹
();

293 
dñay
();

294 
˚Œ˚¡î
(
POS
 
pos
, 
GR_COORD
 *
ªtx
, GR_COORD *
ªty
);

295 
døw°©us
();

296 
¥öéöe
(
GR_COORD
, *, ...);

297 
√wlöe
();

298 
POS
 
föd˚Œ
(
GR_COORD
 
x
, GR_COORD 
y
);

299 
√wgame
();

300 
GR_BOOL
 
check∑th
(
POS
 
pos
);

301 
movë›os
(
POS
 
√wpos
);

302 
toggÀ˚Œ
(
POS
 
pos
);

303 
födödex
();

304 
ªadgame
(*
«me
);

305 
GR_BOOL
 
wrôegame
(*
«me
);

306 
gameovî
();

307 
h™dÀevít
(
GR_EVENT
 *
ï
);

308 
d€xposuª
(
GR_EVENT_EXPOSURE
 *
ï
);

309 
dobuâ⁄
(
GR_EVENT_BUTTON
 *
bp
);

310 
dokey
(
GR_EVENT_KEYSTROKE
 *
kp
);

313 
	$maö
(
¨gc
,**
¨gv
)

315 
GR_COORD
 
x
;

316 
GR_COORD
 
y
;

317 
GR_SIZE
 
width
;

318 
GR_SIZE
 
height
;

319 
GR_COORD
 
rightx
;

320 
GR_BOOL
 
£tsize
;

321 
GR_BOOL
 
£tmöes
;

322 
GR_SIZE
 
√wsize
 = 10;

323 
GR_COUNT
 
√wmöes
 = 25;

324 
GR_WM_PROPERTIES
 
¥›s
;

326 
£tmöes
 = 
GR_FALSE
;

327 
£tsize
 = 
GR_FALSE
;

329 
¨gc
--;

330 
¨gv
++;

331 (
¨gc
 > 0Ë&& (**
¨gv
 == '-')) {

332 
¨gv
[0][1]) {

334 i‡(
¨gc
 <= 0) {

335 
	`Ârötf
(
°dîr
, "Missing mine count\n");

336 
	`exô
(1);

338 
¨gc
--;

339 
¨gv
++;

340 
√wmöes
 = 
	`©oi
(*
¨gv
);

341 
£tmöes
 = 
GR_TRUE
;

345 i‡(
¨gc
 <= 0) {

346 
	`Ârötf
(
°dîr
, "Missing size\n");

347 
	`exô
(1);

349 
¨gc
--;

350 
¨gv
++;

351 
√wsize
 = 
	`©oi
(*
¨gv
);

352 
£tsize
 = 
GR_TRUE
;

356 
	`Ârötf
(
°dîr
, "Unknown option \"-%c\"\n",

357 
¨gv
[0][1]);

358 
	`exô
(1);

360 
¨gc
--;

361 
¨gv
++;

363 i‡(
¨gc
 > 0)

364 
ßvefûe
 = *
¨gv
;

366 
	`§™d
(
	`time
(0));

368 
	`ªadgame
(
ßvefûe
);

370 i‡(
£tsize
) {

371 i‡((
√wsize
 < 
MINSIZE
Ë|| (√wsizê> 
MAXSIZE
)) {

372 
	`Ârötf
(
°dîr
, "Illegal board size\n");

373 
	`exô
(1);

375 i‡(
√wsize
 !
size
) {

376 i‡(
°ïs
 && 
∂ayög
) {

377 
	`Ârötf
(
°dîr
,

379 
	`exô
(1);

381 
∂ayög
 = 
GR_FALSE
;

382 
size
 = 
√wsize
;

383 i‡(!
∂ayög
)

384 
möes
 = (
size
 * sizê* 
MINEPERCENT
) / 100;

388 i‡(
£tmöes
) {

389 i‡((
√wmöes
 <0Ë|| (“ewmöe†> (
size
 * size) / 2))) {

390 
	`Ârötf
(
°dîr
, "IllegalÇumber of mines\n");

391 
	`exô
(1);

393 i‡(
√wmöes
 !
möes
) {

394 i‡(
°ïs
 && 
∂ayög
) {

395 
	`Ârötf
(
°dîr
,

397 
	`exô
(1);

399 
∂ayög
 = 
GR_FALSE
;

400 
möes
 = 
√wmöes
;

404 
	`födödex
();

411 i‡(
	`GrO≥n
() < 0) {

412 
	`Ârötf
(
°dîr
, "Cannot open graphics\n");

413 
	`exô
(1);

416 
	`GrReqShmCmds
(655360);

418 
	`GrGëS¸ìnInfo
(&
si
);

419 
	`GrGëF⁄tInfo
(0, &
fi
);

420 
ch¨height
 = 
fi
.
height
;

426 
COLS
 = 
si
.
cﬁs
 - 40;

428 
COLS
 = 
si
.
cﬁs
;

430 
ROWS
 = 
si
.
rows
 - 80;

431 
maöwid
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 0, 0, 
COLS
, 
ROWS
,

432 0, 
BLACK
, 
WHITE
);

435 
¥›s
.
Êags
 = 
GR_WM_FLAGS_TITLE
 | 
GR_WM_FLAGS_PROPS
;

436 
¥›s
.¥›†
GR_WM_PROPS_APPFRAME
 | 
GR_WM_PROPS_CAPTION
;

437 
¥›s
.
tôÀ
 = "Land Mine";

438 
	`GrSëWMPr›îtõs
(
maöwid
, &
¥›s
);

445 
width
 = 
COLS
 - 
RIGHTSIDE
 - (
si
.
xdpcm
 * 
RIGHTGAP
 / 10Ë- 
BOARDBORDER
 * 2;

446 
height
 = (((Ë
width
Ë* 
si
.
ydpcm
Ë/ si.
xdpcm
;

447 i‡(
height
 > 
ROWS
 ) {

448 
height
 = 
ROWS
 - 
BOARDBORDER
 * 2;

449 
width
 = (((Ë
height
Ë* 
si
.
xdpcm
Ë/ si.
ydpcm
;

451 
xp
 = 
width
 / 
size
;

452 
yp
 = 
height
 / 
size
;

454 
width
 = 
xp
 * 
size
 - 1;

455 
height
 = 
yp
 * 
size
 - 1;

456 
x
 = 
BOARDBORDER
;

457 
y
 = (
ROWS
 - 
height
) / 2;

459 
rightx
 = 
x
 + 
width
 + (
si
.
xdpcm
 * 
RIGHTGAP
 / 10);

460 
bﬂrdwid
 = 
	`GrNewWödow
(
maöwid
, 
x
, 
y
, 
width
, 
height
, 
BOARDBORDER
,

461 
BLUE
, 
WHITE
);

465 
x
 = 
rightx
;

466 
y
 = (
si
.
ydpcm
 * 
BOARDGAP
 / 10);

467 
quôwid
 = 
	`GrNewWödow
(
maöwid
, 
x
, 
y
, 
BUTTONWIDTH
, 
BUTTONHEIGHT
,

468 1, 
RED
, 
WHITE
);

470 
y
 +(
si
.
ydpcm
 * 
BUTTONGAP
 / 10);

471 
ßvewid
 = 
	`GrNewWödow
(
maöwid
, 
x
, 
y
, 
BUTTONWIDTH
, 
BUTTONHEIGHT
,

472 1, 
GREEN
, 
WHITE
);

474 
y
 +(
si
.
ydpcm
 * 
BUTTONGAP
 / 10);

475 
√wgamewid
 = 
	`GrNewWödow
(
maöwid
, 
x
, 
y
, 
BUTTONWIDTH
, 
BUTTONHEIGHT
,

476 1, 
GREEN
, 
WHITE
);

481 
x
 = 
rightx
;

482 
y
 +(
si
.
ydpcm
 * 
STATUSGAP
 / 10);

483 
width
 = 
COLS
 - 
x
;

484 
height
 = 
ROWS
 - 
y
;

485 
°©wid
 = 
	`GrNewWödow
(
maöwid
, 
x
, 
y
, 
width
, 
height
, 0,

487 
°©width
 = 
width
;

488 
°©height
 = 
height
;

493 
bﬂrdgc
 = 
	`GrNewGC
();

494 
˛órgc
 = 
	`GrNewGC
();

495 
dñaygc
 = 
	`GrNewGC
();

496 
ªdgc
 = 
	`GrNewGC
();

497 
gªígc
 = 
	`GrNewGC
();

498 
°©gc
 = 
	`GrNewGC
();

499 
bœckgc
 = 
	`GrNewGC
();

500 
buâ⁄gc
 = 
	`GrNewGC
();

501 
x‹gc
 = 
	`GrNewGC
();

502 
	`GrSëGCBackground
(
bﬂrdgc
, 
BLUE
);

503 
	`GrSëGCF‹eground
(
˛órgc
, 
BLUE
);

504 
	`GrSëGCF‹eground
(
ªdgc
, 
RED
);

505 
	`GrSëGCF‹eground
(
gªígc
, 
GREEN
);

506 
	`GrSëGCF‹eground
(
°©gc
, 
GRAY
);

507 
	`GrSëGCF‹eground
(
dñaygc
, 
BLACK
);

508 
	`GrSëGCF‹eground
(
bœckgc
, 
BLACK
);

509 
	`GrSëGCMode
(
dñaygc
, 
GR_MODE_XOR
);

510 
	`GrSëGCMode
(
x‹gc
, 
GR_MODE_XOR
);

511 
	`GrSëGCU£Background
(
bﬂrdgc
, 
GR_FALSE
);

512 
	`GrSëGCU£Background
(
buâ⁄gc
, 
GR_FALSE
);

514 
	`GrSñe˘Evíts
(
maöwid
, 
GR_EVENT_MASK_CLOSE_REQ
);

516 
	`GrSñe˘Evíts
(
bﬂrdwid
, 
GR_EVENT_MASK_EXPOSURE
 |

517 
GR_EVENT_MASK_BUTTON_DOWN
 | 
GR_EVENT_MASK_KEY_DOWN
);

519 
	`GrSñe˘Evíts
(
°©wid
, 
GR_EVENT_MASK_EXPOSURE
);

521 
	`GrSñe˘Evíts
(
quôwid
, 
GR_EVENT_MASK_EXPOSURE
 |

522 
GR_EVENT_MASK_BUTTON_DOWN
);

524 
	`GrSñe˘Evíts
(
√wgamewid
, 
GR_EVENT_MASK_EXPOSURE
 |

525 
GR_EVENT_MASK_BUTTON_DOWN
);

527 
	`GrSñe˘Evíts
(
ßvewid
, 
GR_EVENT_MASK_EXPOSURE
 |

528 
GR_EVENT_MASK_BUTTON_DOWN
);

530 
	`£tcurs‹
();

532 
	`GrM≠Wödow
(
maöwid
);

533 
	`GrM≠Wödow
(
bﬂrdwid
);

534 
	`GrM≠Wödow
(
°©wid
);

535 
	`GrM≠Wödow
(
quôwid
);

536 
	`GrM≠Wödow
(
ßvewid
);

537 
	`GrM≠Wödow
(
√wgamewid
);

539 i‡(!
∂ayög
)

540 
	`√wgame
();

542 
GR_TRUE
) {

543 
GR_EVENT
 
evít
;

545 
	`GrGëNextEvít
(&
evít
);

546 
	`h™dÀevít
(&
evít
);

548 
	}
}

555 
	$h™dÀevít
(
GR_EVENT
 *
ï
)

557 
ï
->
ty≥
) {

558 
GR_EVENT_TYPE_BUTTON_DOWN
:

559 
	`dobuâ⁄
(&
ï
->
buâ⁄
);

562 
GR_EVENT_TYPE_EXPOSURE
:

563 
	`d€xposuª
(&
ï
->
exposuª
);

566 
GR_EVENT_TYPE_KEY_DOWN
:

567 
	`dokey
(&
ï
->
key°roke
);

570 
GR_EVENT_TYPE_CLOSE_REQ
:

571 
	`GrClo£
();

572 
	`exô
(0);

574 
	}
}

581 
	$d€xposuª
(
GR_EVENT_EXPOSURE
 *
ï
)

583 i‡(
ï
->
wid
 =
bﬂrdwid
) {

584 
	`døwbﬂrd
();

588 i‡(
ï
->
wid
 =
°©wid
) {

589 
	`døw°©us
();

593 i‡(
ï
->
wid
 =
quôwid
) {

594 
	`døwbuâ⁄
(
quôwid
, "QUIT");

598 i‡(
ï
->
wid
 =
ßvewid
) {

599 
	`døwbuâ⁄
(
ßvewid
, "SAVE GAME");

603 i‡(
ï
->
wid
 =
√wgamewid
) {

604 
	`døwbuâ⁄
(
√wgamewid
, "NEW GAME");

607 
	}
}

614 
	$dobuâ⁄
(
GR_EVENT_BUTTON
 *
bp
)

616 i‡(
bp
->
wid
 =
bﬂrdwid
) {

617 
	`movë›os
(
	`föd˚Œ
(
bp
->
x
, bp->
y
));

621 i‡(
bp
->
wid
 =
quôwid
) {

622 
	`GrFûlRe˘
(
quôwid
, 
x‹gc
, 0, 0, 
BUTTONWIDTH
, 
BUTTONHEIGHT
);

623 
	`GrFlush
();

624 i‡(
ßvefûe
)

625 
	`wrôegame
(
ßvefûe
);

626 
	`GrClo£
();

627 
	`exô
(0);

630 i‡(
bp
->
wid
 =
ßvewid
) {

631 
	`GrFûlRe˘
(
ßvewid
, 
x‹gc
, 0, 0, 
BUTTONWIDTH
, 
BUTTONHEIGHT
);

632 
	`GrFlush
();

633 i‡(
ßvefûe
 =
NULL
)

634 
ßvefûe
 = 
SAVEFILE
;

635 i‡(
	`wrôegame
(
ßvefûe
))

636 
	`wrôe
(1, "\007", 1);

638 
	`dñay
();

639 
	`GrFûlRe˘
(
ßvewid
, 
x‹gc
, 0, 0, 
BUTTONWIDTH
, 
BUTTONHEIGHT
);

642 i‡(
bp
->
wid
 =
√wgamewid
) {

643 
	`GrFûlRe˘
(
√wgamewid
, 
x‹gc
, 0, 0, 
BUTTONWIDTH
, 
BUTTONHEIGHT
);

644 
	`GrFlush
();

648 
	`√wgame
();

649 
	`dñay
();

651 
	`GrFûlRe˘
(
√wgamewid
, 
x‹gc
, 0, 0, 
BUTTONWIDTH
, 
BUTTONHEIGHT
);

653 
	}
}

660 
	$dokey
(
GR_EVENT_KEYSTROKE
 *
kp
)

662 i‡((
kp
->
wid
 !
bﬂrdwid
Ë|| !
∂ayög
)

665 
kp
->
ch
) {

667 
	`toggÀ˚Œ
(
	`föd˚Œ
(
kp
->
x
, kp->
y
));

670 
	}
}

677 
	$døwbﬂrd
()

679 
GR_COORD
 
row
;

680 
GR_COORD
 
cﬁ
;

682 
row
 = 1;Ñow < 
size
;Ñow++) {

683 
	`GrLöe
(
bﬂrdwid
, 
bﬂrdgc
, 0, 
row
 * 
yp
 - 1, 
size
 * 
xp
 - 1,

684 
row
 * 
yp
 - 1);

685 
	`GrLöe
(
bﬂrdwid
, 
bﬂrdgc
, 
row
 * 
xp
 - 1, 0,

686 
row
 * 
xp
 - 1, 
size
 * 
yp
 - 1);

688 
row
 = 0;Ñow < 
FULLSIZE
;Ñow++) {

689 
cﬁ
 = 0; cﬁ < 
FULLSIZE
; col++) {

690 
	`døw˚Œ
(
	`bﬂrdpos
(
row
, 
cﬁ
));

693 
	}
}

700 
	$døw˚Œ
(
POS
 
pos
)

702 
GR_COORD
 
x
;

703 
GR_COORD
 
y
;

704 
GR_SIZE
 
chwidth
;

705 
GR_SIZE
 
chheight
;

706 
GR_SIZE
 
chba£
;

707 
CELL
 
˚Œ
;

708 
GR_CHAR
 
ch
;

710 
˚Œ
 = 
bﬂrd
[
pos
];

711 i‡(!
	`isknown
(
˚Œ
))

714 
ch
 = 
	`di•œych¨
(
˚Œ
);

715 i‡(
ch
 =
F_WRONG
) {

716 
	`døwbomb
(
pos
, 
gªígc
, 
GR_FALSE
);

720 i‡(
	`isﬁd
(
˚Œ
)) {

721 
	`˛ór˚Œ
(
pos
);

722 
	`˚Œ˚¡î
(
pos
, &
x
, &
y
);

723 
	`GrGëGCTextSize
(
bﬂrdgc
, &
ch
, 1, 
GR_TFASCII
, &
chwidth
,

724 &
chheight
, &
chba£
);

725 
	`GrText
(
bﬂrdwid
, 
bﬂrdgc
, 
x
 - 
chwidth
 / 2 + 1,

726 
y
 + 
chheight
 / 2, &
ch
, 1, 
GR_TFBOTTOM
);

730 
	`døwbomb
(
pos
, 
ªdgc
, 
GR_FALSE
);

731 
	}
}

738 
	$˛ór˚Œ
(
POS
 
pos
)

740 
GR_COORD
 
row
;

741 
GR_COORD
 
cﬁ
;

743 
row
 = 
pos
 / 
FULLSIZE
;

744 
cﬁ
 = 
pos
 % 
FULLSIZE
;

745 
	`GrFûlRe˘
(
bﬂrdwid
, 
˛órgc
, 
cﬁ
 * 
xp
 - xp, 
row
 * 
yp
 - yp,

746 
xp
 - 1, 
yp
 - 1);

747 
	}
}

755 
	$døwbomb
(
POS
 
pos
, 
GR_GC_ID
 
gc
, 
GR_BOOL
 
™im©e
)

760 
GR_COORD
 
x
;

761 
GR_COORD
 
y
;

762 
GR_COUNT
 
cou¡
;

764 i‡(
™im©e
)

765 
	`wrôe
(1, "\007", 1);

767 
	`˚Œ˚¡î
(
pos
, &
x
, &
y
);

769 
cou¡
 = (
™im©e
 ? 8 : 1);

771 
	`GrFûlEŒù£
(
bﬂrdwid
, 
gc
, 
x
, 
y
, 
xp
 / 2 - 3, 
yp
 / 2 - 3);

772 i‡(--
cou¡
 == 0)

774 
	`dñay
();

775 
	`˛ór˚Œ
(
pos
);

776 
	`dñay
();

778 
	}
}

785 
	$døwbuâ⁄
(
GR_WINDOW_ID
 
wödow
, *
œbñ
)

787 
GR_SIZE
 
width
;

788 
GR_SIZE
 
height
;

789 
GR_SIZE
 
ba£
;

791 
	`GrGëGCTextSize
(
buâ⁄gc
, 
œbñ
, 
	`°æí
÷abñ), 
GR_TFASCII
, &
width
,

792 &
height
, &
ba£
);

793 
	`GrText
(
wödow
, 
buâ⁄gc
, (
BUTTONWIDTH
 - 
width
) / 2,

794 (
BUTTONHEIGHT
 - 
height
) / 2 + height - 1,

795 
œbñ
, -1, 
GR_TFBOTTOM
);

796 
	}
}

804 
	$£tcurs‹
()

806 
GR_BITMAP
 *
fgbôs
;

807 
GR_BITMAP
 *
bgbôs
;

809 
Àgs
) {

811 
fgbôs
 = 
nﬁeg_fg
;

812 
bgbôs
 = 
nﬁeg_bg
;

815 
fgbôs
 = 
⁄ñeg_fg
;

816 
bgbôs
 = 
⁄ñeg_bg
;

819 
fgbôs
 = 
twﬁegs_fg
;

820 
bgbôs
 = 
twﬁegs_bg
;

823 
	`GrSëCurs‹
(
bﬂrdwid
, 9, 12, 4, 6, 
WHITE
, 
BLACK
, 
fgbôs
, 
bgbôs
);

824 
	}
}

833 
	$dñay
()

835 
GR_COUNT
 
i
;

837 
i
 = 0; i < 1; i++) {

838 
	`GrFûlRe˘
(
bﬂrdwid
, 
dñaygc
, 0, 0, 
xp
 * 
size
 - 1,

839 
yp
 * 
size
 - 1);

840 
	`GrFlush
();

842 
	}
}

850 
	$˚Œ˚¡î
(
POS
 
pos
, 
GR_COORD
 *
ªtx
, GR_COORD *
ªty
)

852 *
ªtx
 = (
pos
 % 
FULLSIZE
Ë* 
xp
 - 1 - xp / 2;

853 *
ªty
 = (
pos
 / 
FULLSIZE
Ë* 
yp
 - 1 - yp / 2;

854 
	}
}

861 
	$døw°©us
()

863 
sc‹e
;

864 
Æl°ïs
;

865 
games
;

867 
sc‹e
 = 0;

868 
games
 = 
games0
[
ödex
];

869 
Æl°ïs
 = 
°ïs0
[
ödex
];

870 
sc‹e
 +
games1
[
ödex
];

871 
games
 +
games1
[
ödex
];

872 
Æl°ïs
 +
°ïs1
[
ödex
];

873 
sc‹e
 +
games2
[
ödex
] * 2;

874 
games
 +
games2
[
ödex
];

875 
Æl°ïs
 +
°ïs2
[
ödex
];

877 
	`¥öéöe
(0, "Size: %2d\n", 
size
);

878 
	`¥öéöe
(1, "Möes: %3d\n", 
möes
);

879 
PRINTSTEPS
;

880 
	`¥öéöe
(3, "Legs: %d\n", 
Àgs
);

882 
	`¥öéöe
(5, "W⁄ games: %3d\n", 
games2
[
ödex
]);

883 
	`¥öéöe
(6, "1-Àg games:%3d\n", 
games1
[
ödex
]);

884 
	`¥öéöe
(7, "Lo° games: %3d\n", 
games0
[
ödex
]);

886 i‡(
games
) {

887 
	`¥öéöe
(9, "Legs/game: %3d.%03d\n", 
sc‹e
 / 
games
,

888 ((
sc‹e
 * 1000Ë/ 
games
) % 1000);

890 
	`¥öéöe
(10, "Sãps/game:%3d.%03d\n", 
Æl°ïs
 / 
games
,

891 ((
Æl°ïs
 * 1000Ë/ 
games
) % 1000);

893 
	}
}

901 
	$¥öéöe
(
GR_COORD
 
row
, * 
fmt
, ...)

903 
va_li°
 
≠
;

904 
GR_COUNT
 
cc
;

905 
GR_SIZE
 
width
;

906 *
˝
;

907 
buf
[256];

909 
	`va_°¨t
(
≠
, 
fmt
);

910 
	`v•rötf
(
buf
, 
fmt
, 
≠
);

911 
	`va_íd
(
≠
);

913 i‡(
row
 >= 0) {

914 
ch¨xpos
 = 0;

915 
ch¨ypos
 = 
ch¨height
 * 
row
 + charheight - 1;

918 
˝
 = 
buf
;

920 
cc
 = 0;

921 
width
 = 0;

922 *
˝
 >= ' ') {

923 
width
 +
fi
.
widths
[()*
˝
++];

924 
cc
++;

926 i‡(
width
) {

927 
	`GrText
(
°©wid
, 
°©gc
, 
ch¨xpos
, 
ch¨ypos
,

928 
˝
 - 
cc
, cc, 
GR_TFBOTTOM
);

929 
ch¨xpos
 +
width
;

932 *
˝
++) {

936 
	`√wlöe
();

939 
ch¨xpos
 = 0;

943 
	}
}

951 
	$√wlöe
()

953 
	`GrFûlRe˘
(
°©wid
, 
bœckgc
, 
ch¨xpos
, 
ch¨ypos
 - 
ch¨height
 + 1,

954 
°©width
 - 
ch¨xpos
, 
ch¨height
);

955 
ch¨xpos
 = 0;

956 
ch¨ypos
 +
ch¨height
;

957 
	}
}

965 
POS


966 
	$föd˚Œ
(
GR_COORD
 
x
, GR_COORD 
y
)

968 
GR_COORD
 
row
;

969 
GR_COORD
 
cﬁ
;

971 i‡(((
x
 % 
xp
Ë=0Ë|| ((
y
 % 
yp
) == 0))

973 
row
 = (
y
 / 
yp
) + 1;

974 
cﬁ
 = (
x
 / 
xp
) + 1;

975 i‡((
row
 <0Ë|| (row > 
size
Ë|| (
cﬁ
 <= 0) || (col > size))

977  
	`bﬂrdpos
(
row
, 
cﬁ
);

978 
	}
}

985 
	$√wgame
()

987 
GR_COORD
 
row
;

988 
GR_COORD
 
cﬁ
;

989 
GR_COUNT
 
cou¡
;

990 
CELL
 
˚Œ
;

991 
POS
 
pos
;

993 
row
 = 0;Ñow < 
FULLSIZE
;Ñow++) {

994 
cﬁ
 = 0; cﬁ < 
FULLSIZE
; col++) {

995 
˚Œ
 = 
F_EMPTY
;

996 i‡(
	`badsqu¨e
(
row
Ë|| badsqu¨e(
cﬁ
))

997 
˚Œ
 |
F_EDGE
;

998 
bﬂrd
[
	`bﬂrdpos
(
row
, 
cﬁ
)] = 
˚Œ
;

1002 
∂ayög
 = 
GR_TRUE
;

1003 
cou¡
 = 0;

1004 
Àgs
 = 2;

1005 
°ïs
 = 0;

1006 
	`døw°©us
();

1007 
	`£tcurs‹
();

1009 
cou¡
 < 
möes
) {

1011 
row
 = (
	`ønd
(Ë/ 16Ë% (
size
 * size + 1);

1012 } 
row
 =(
size
 * size));

1014 
cﬁ
 = (
row
 % 
size
) + 1;

1015 
row
 = (row / 
size
) + 1;

1016 
pos
 = 
	`bﬂrdpos
(
row
, 
cﬁ
);

1018 i‡((
pos
 =
	`bﬂrdpos
(1,1)) || (pos == boardpos(1,2)) ||

1019 (
pos
 =
	`bﬂrdpos
(2,1)) || (pos == boardpos(2,2)) ||

1020 (
pos
 =
	`bﬂrdpos
(
size
,size)))

1023 i‡(!
	`ismöe
(
bﬂrd
[
pos
]Ë&& 
	`check∑th
(pos))

1024 
cou¡
++;

1027 
bﬂrd
[
	`bﬂrdpos
(1,1)] = (
F_OLD
 | '0');

1029 
	`GrCÀ¨Wödow
(
bﬂrdwid
, 
GR_TRUE
);

1030 
	}
}

1038 
GR_BOOL


1039 
	$check∑th
(
POS
 
pos
)

1041 
CELL
 *
bp
;

1042 
CELL
 *
ídbp
;

1043 
POS
 
ídpos
;

1044 
GR_COUNT
 
cou¡
;

1045 
GR_COUNT
 
i
;

1046 
GR_BOOL
 
m‹e
;

1053 
bﬂrd
[
pos
] |
F_MINE
;

1055 
cou¡
 = 0;

1057 
i
 = 7; i >= 0; i--) {

1058 i‡(
bﬂrd
[
pos
 + 
°ïèbÀ
[
i
]] & (
F_MINE
 | 
F_EDGE
))

1059 
cou¡
++;

1062 i‡(
cou¡
 < 2)

1063  
GR_TRUE
;

1069 
ídpos
 = 
	`bﬂrdpos
(
size
, size);

1070 
bp
 = &
bﬂrd
[
ídpos
];

1071 
ídbp
 = 
bp
;

1072 
bp
 !
bﬂrd
)

1073 *
bp
-- &~
F_REACH
;

1074 
bﬂrd
[
	`bﬂrdpos
(1,1)] |
F_REACH
;

1082 
m‹e
 = 
GR_FALSE
;

1083 
bp
 = &
bﬂrd
[
	`bﬂrdpos
(1,1)]; b∞!
ídbp
; bp++) {

1084 i‡(*
bp
 & 
F_REACH
) {

1085 
i
 = 7; i >= 0; i--) {

1086 i‡((
bp
[
°ïèbÀ
[
i
]] & (
F_MINE
 | 
F_REACH
 | 
F_EDGE
)) == 0) {

1087 
bp
[
°ïèbÀ
[
i
]] |
F_REACH
;

1088 
m‹e
 = 
GR_TRUE
;

1094 i‡(
bﬂrd
[
ídpos
] & 
F_REACH
)

1095  
GR_TRUE
;

1096 } 
m‹e
);

1101 
bﬂrd
[
pos
] &~
F_MINE
;

1103  
GR_FALSE
;

1104 
	}
}

1115 
	$movë›os
(
POS
 
√wpos
)

1117 
POS
 
fixpos
;

1118 
CELL
 
˚Œ
;

1119 
GR_COUNT
 
cou¡
;

1120 
GR_COUNT
 
i
;

1122 i‡((
√wpos
 < 0Ë|| (√wpo†>(
FULLSIZE
 * FULLSIZE)Ë|| !
∂ayög
)

1125 
˚Œ
 = 
bﬂrd
[
√wpos
];

1127 i‡(
	`i£dge
(
˚Œ
Ë|| (
	`is£í
(˚Œ)Ë|| 
	`isﬁd
(cell))

1130 
cou¡
 = 
	`isﬁd
(
˚Œ
);

1131 
i
 = 0; i < 8; i++)

1132 i‡(
	`isﬁd
(
bﬂrd
[
√wpos
 + 
°ïèbÀ
[
i
]]))

1133 
cou¡
++;

1135 i‡(
cou¡
 <= 0)

1138 
˚Œ
 = (˚Œ & 
F_FLAGS
Ë| 
F_OLD
;

1139 
°ïs
++;

1141 
PRINTSTEPS
;

1143 i‡(
	`ismöe
(
˚Œ
)) {

1144 
Àgs
--;

1145 
bﬂrd
[
√wpos
] = (
F_REMEMBER
 | 
F_MINE
);

1146 
˚Œ
 = (
F_EMPTY
 | 
F_OLD
);

1147 
bﬂrd
[
√wpos
] = 
˚Œ
;

1148 
	`døwbomb
(
√wpos
, 
ªdgc
, 
GR_TRUE
);

1149 
	`˛ór˚Œ
(
√wpos
);

1150 
	`£tcurs‹
();

1151 
i
 = 0; i < 8; i++) {

1152 
fixpos
 = 
√wpos
 + 
°ïèbÀ
[
i
];

1153 i‡(
	`isﬁd
(
bﬂrd
[
fixpos
])) {

1154 
bﬂrd
[
fixpos
]--;

1155 
	`døw˚Œ
(
fixpos
);

1158 
	`døw°©us
();

1161 
cou¡
 = 0;

1162 
i
 = 0; i < 8; i++)

1163 i‡(
	`ismöe
(
bﬂrd
[
√wpos
 + 
°ïèbÀ
[
i
]]))

1164 
cou¡
++;

1165 
bﬂrd
[
√wpos
] = 
˚Œ
 | (
cou¡
 + '0');

1167 
	`døw˚Œ
(
√wpos
);

1169 i‡((
Àgs
 <0Ë|| (
√wpos
 =
	`bﬂrdpos
(
size
,size)))

1170 
	`gameovî
();

1171 
	}
}

1179 
	$toggÀ˚Œ
(
POS
 
pos
)

1181 
CELL
 
˚Œ
;

1183 i‡((
pos
 <0Ë|| !
∂ayög
)

1186 
˚Œ
 = 
bﬂrd
[
pos
];

1187 i‡(
	`isknown
(
˚Œ
)) {

1188 i‡(!
	`is£í
(
˚Œ
))

1190 
bﬂrd
[
pos
] = (bﬂrd[pos] & 
F_FLAGS
Ë| 
F_EMPTY
;

1191 
	`˛ór˚Œ
(
pos
);

1195 
bﬂrd
[
pos
] = (bﬂrd[pos] & 
F_FLAGS
Ë| 
F_REMEMBER
;

1196 
	`døw˚Œ
(
pos
);

1197 
	}
}

1205 
	$gameovî
()

1207 
POS
 
pos
;

1208 
CELL
 
˚Œ
;

1210 
∂ayög
 = 
GR_FALSE
;

1211 
Àgs
) {

1213 
games0
[
ödex
]++;

1214 
°ïs0
[
ödex
] +
°ïs
;

1217 
games1
[
ödex
]++;

1218 
°ïs1
[
ödex
] +
°ïs
;

1221 
games2
[
ödex
]++;

1222 
°ïs2
[
ödex
] +
°ïs
;

1226 
pos
 = 0;Öo†< (
FULLSIZE
 * FULLSIZE);Öos++) {

1227 
˚Œ
 = 
bﬂrd
[
pos
];

1228 i‡(
	`is£í
(
˚Œ
))

1229 
˚Œ
 = (˚Œ & 
F_FLAGS
Ë| 
F_WRONG
;

1230 i‡(
	`ismöe
(
˚Œ
))

1231 
˚Œ
 = (˚Œ & 
F_FLAGS
Ë| 
F_REMEMBER
;

1232 
bﬂrd
[
pos
] = 
˚Œ
;

1235 
	`døwbﬂrd
();

1236 
	`døw°©us
();

1237 
	}
}

1246 
	$födödex
()

1248 
ödex
 = 0; index < 
MAXPARAMS
; index++) {

1249 i‡((
sizï¨am
[
ödex
] =
size
Ë&& (
möï¨am
[ödex] =
möes
))

1252 
ödex
 = 0; index < 
MAXPARAMS
; index++) {

1253 i‡(
sizï¨am
[
ödex
] == 0) {

1254 
sizï¨am
[
ödex
] = 
size
;

1255 
möï¨am
[
ödex
] = 
möes
;

1259 
	`Ârötf
(
°dîr
, "Too manyÖarameters in save file\n");

1260 
	`exô
(1);

1261 
	}
}

1269 
	$ªadgame
(*
«me
)

1271 
fd
;

1273 
fd
 = -1;

1274 i‡(
«me
)

1275 
fd
 = 
	`›í
(
«me
, 0);

1277 i‡(
fd
 < 0) {

1278 
magic
 = 
MAGIC
;

1279 
size
 = 
SIZE
;

1280 
möes
 = (
size
 * sizê* 
MINEPERCENT
) / 100;

1281 
∂ayög
 = 
GR_FALSE
;

1285 i‡(
	`ªad
(
fd
, &
°
, (st)) != (st))

1286 
magic
 = 0;

1287 
	`˛o£
(
fd
);

1289 i‡((
magic
 !
MAGIC
Ë|| (
size
 > 
MAXSIZE
)) {

1290 
	`Ârötf
(
°dîr
, "Save file format is incorrect\n");

1291 
	`exô
(1);

1293 
	}
}

1300 
GR_BOOL


1301 
	$wrôegame
(*
«me
)

1303 
fd
;

1305 i‡(
«me
 =
NULL
)

1306  
GR_TRUE
;

1308 
fd
 = 
	`¸ót
(
«me
, 0666);

1309 i‡(
fd
 < 0)

1310  
GR_TRUE
;

1312 i‡(
	`wrôe
(
fd
, &
°
, (st)) != (st)) {

1313 
	`˛o£
(
fd
);

1314  
GR_TRUE
;

1316 
	`˛o£
(
fd
);

1317  
GR_FALSE
;

1318 
	}
}

	@demos/nanox/launcher.c

56 
	~<time.h
>

57 
	~<°dio.h
>

58 
	~<î∫o.h
>

59 
	~<°dlib.h
>

60 
	~<°rög.h
>

61 
	~<˘y≥.h
>

62 
	~<sig«l.h
>

63 
	~<uni°d.h
>

64 
	~<sys/waô.h
>

66 
	~<«no-X.h
>

67 
	~<nxcﬁ‹s.h
>

69 
	~"œunchî.h
"

72 
pid_t
 
	gs•id
;

74 #i‚de‡
WAIT_ANY


78 
	#WAIT_ANY
 (
pid_t
)-1

	)

81 
	$ª≠î
(
signum
) {

82 
pid_t
 
pid
;

84 (
pid
 = 
	`waôpid
(
WAIT_ANY
, 
NULL
, 
WNOHANG
) > 0))

85 if(
pid
 =
s•id
) sspid = -1;

86 
	}
}

88 *
	$my_mÆloc
(
size_t
 
size
)

90 *
ªt
;

92 if(!(
ªt
 = 
	`mÆloc
(
size
))) {

93 
	`Ârötf
(
°dîr
, "Out of memory\n");

94 
	`exô
(1);

97  
ªt
;

98 
	}
}

100 
	$ußge
()

102 
	`Ârötf
(
°dîr
, "Usage:Üauncher <config-file>\n");

103 
	`exô
(3);

104 
	}
}

106 
	$‰ì_¥og_ôem
(
¥og_ôem
 *
¥og
)

108 
n
;

110 
n
 = 0;Ç < 
MAX_ARGUMENTS
;Ç++)

111 if(
¥og
->
¨gv
[
n
]Ë
	`‰ì
(prog->argv[n]);

112 
	`‰ì
(
¥og
->
comm™d
);

113 
	`‰ì
(
¥og
);

114 
	}
}

116 
¥og_ôem
 *
	$make_¥og_ôem
(*
buf
, 
löío
)

118 *
p
, *
µ
, *
comm™d
;

119 
¥og_ôem
 *
¥og
;

120 
n
;

122 
p
 = 
buf
;

124 
¥og
 = 
	`my_mÆloc
((
¥og_ôem
));

126 
n
 = 0;Ç < 
MAX_ARGUMENTS
;Ç++Ë
¥og
->
¨gv
[n] = 
NULL
;

128 
	`is•a˚
(*
p
))Ö++;

129 if(!*
p
) {

130 
	`Ârötf
(
°dîr
, "PrematureÉnd ofÜine onÜine %d of config "

131 "fûe\n", 
löío
);

134 
comm™d
 = 
p
;

135 *
p
 && (!
	`is•a˚
(*p)))Ö++;

136 *
p
++ = 0;

137 if(!(
¥og
->
comm™d
 = 
	`°rdup
(command))) {

138 
	`‰ì
(
¥og
);

139 
nomem
;

141 
µ
 = 
p
 - 1;

142 --
µ
 !
comm™d
) {

143 if(*
µ
 == '/') {

144 
µ
++;

148 if(!(
¥og
->
¨gv
[0] = 
	`°rdup
(
µ
))) {

149 
	`‰ì
(
¥og
->
comm™d
);

150 
	`‰ì
(
¥og
);

151 
nomem
;

154 
n
 = 1;

155 *
p
) {

156 
	`is•a˚
(*
p
))Ö++;

157 if(!*
p
) ;

158 
µ
 = 
p
;

159 *
p
 && (!
	`is•a˚
(*p)))Ö++;

160 *
p
++ = 0;

161 if(!(
¥og
->
¨gv
[
n
] = 
	`°rdup
(
µ
))Ë
nomem
;

162 if(++
n
 =(
MAX_ARGUMENTS
 - 1)) {

163 
	`Ârötf
(
°dîr
, "Too manyárguments onÜine "

164 "%d o‡thêc⁄fig fûe\n", 
löío
);

169  
¥og
;

171 
nomem
:

172 
	`Ârötf
(
°dîr
, "Out of memoryÖarsingÜine %d ofÅhe config "

173 "fûe\n", 
löío
);

175 
	}
}

177 
	$£t_wödow_background_cﬁour
(*
buf
, 
löío
)

179 
GR_WM_PROPERTIES
 
¥›s
;

180 *
p
 = 
buf
, *
µ
;

182 
	`is•a˚
(*
p
))Ö++;

183 if(!*
p
) {

184 
	`Ârötf
(
°dîr
, "PrematureÉnd ofÜine onÜine %d of config "

185 "fûe\n", 
löío
);

188 
µ
 = 
p
;

189 *
p
 && (!
	`is•a˚
(*p)))Ö++;

190 *
p
 = 0;

194 if(!
	`°rcmp
(
µ
, "BLACK")Ë
¥›s
.
background
 = 
GR_COLOR_BLACK
;

195 if(!
	`°rcmp
(
µ
, "WHITE")Ë
¥›s
.
background
 = 
GR_COLOR_WHITE
;

196 if(!
	`°rcmp
(
µ
, "RED")Ë
¥›s
.
background
 = 
GR_COLOR_RED
;

197 if(!
	`°rcmp
(
µ
, "GREEN")Ë
¥›s
.
background
 = 
GR_COLOR_GREEN
;

198 if(!
	`°rcmp
(
µ
, "BLUE")Ë
¥›s
.
background
 = 
GR_COLOR_BLUE
;

199 if(!
	`°rcmp
(
µ
, "CYAN")Ë
¥›s
.
background
 = 
GR_COLOR_CYAN
;

200 if(!
	`°rcmp
(
µ
, "MAGENTA")Ë
¥›s
.
background
 = 
GR_COLOR_MAGENTA
;

201 if(!
	`°rcmp
(
µ
, "YELLOW")Ë
¥›s
.
background
 = 
GR_COLOR_YELLOW
;

202 if(!
	`°rcmp
(
µ
, "BROWN")Ë
¥›s
.
background
 = 
GR_COLOR_BROWN
;

203 if(!
	`°rcmp
(
µ
, "GRAY")Ë
¥›s
.
background
 = 
GR_COLOR_GRAY
;

205 
	`Ârötf
(
°dîr
, "Invalid colour \"%s\" onÜine %d of config "

206 "fûe\n", 
µ
, 
löío
);

210 
¥›s
.
Êags
 = 
GR_WM_FLAGS_BACKGROUND
;

211 
	`GrSëWMPr›îtõs
(
GR_ROOT_WINDOW_ID
, &
¥›s
);

212 
	}
}

214 
	$∑r£_c⁄fig_löe
(
l°©e
 *
°©e
, *
buf
, 
löío
)

216 *
p
, *
µ
, *
«me
, *
ic⁄
;

217 
n
;

218 
lôem
 *
√w_lôem
, *
li
;

219 
ssôem
 *
√w_ssôem
, *
tmp_ssôem
;

220 
°ôem
 *
√w_°ôem
, *
tmp_°ôem
;

221 
GR_IMAGE_INFO
 
imageöfo
;

223 
p
 = 
buf
;

225 if((!*
p
) || (*p == '#') || (*p == '\n')) ;

227 
	`is•a˚
(*
p
))Ö++;

228 
«me
 = 
p
;

229 *
p
 && (!
	`is•a˚
(*p)))Ö++;

230 if(!*
p
Ë
¥em©uª
;

231 *
p
++ = 0;

233 if(!
	`°rcmp
(
«me
, "$screensaver")) {

234 
√w_ssôem
 = 
	`my_mÆloc
((
ssôem
));

235 if(!(
√w_ssôem
->
¥og
 = 
	`make_¥og_ôem
(
p
, 
löío
))) {

236 
	`‰ì
(
√w_ssôem
);

239 
°©e
->
numssôems
++;

240 
√w_ssôem
->
√xt
 = 
NULL
;

241 if(!
°©e
->
ssôems
Ë°©e->ssôem†
√w_ssôem
;

243 
tmp_ssôem
 = 
°©e
->
ssôems
;

244 
tmp_ssôem
->
√xt
)Åmp_ssitem =Åmp_ssitem->next;

245 
tmp_ssôem
->
√xt
 = 
√w_ssôem
;

248 } if(!
	`°rcmp
(
«me
, "$startup")) {

249 
√w_°ôem
 = 
	`my_mÆloc
((
°ôem
));

250 if(!(
√w_°ôem
->
¥og
 = 
	`make_¥og_ôem
(
p
, 
löío
))) {

251 
	`‰ì
(
√w_°ôem
);

254 
√w_°ôem
->
√xt
 = 
NULL
;

255 if(!
°©e
->
°ôems
Ë°©e->°ôem†
√w_°ôem
;

257 
tmp_°ôem
 = 
°©e
->
°ôems
;

258 
tmp_°ôem
->
√xt
)Åmp_stitem =Åmp_stitem->next;

259 
tmp_°ôem
->
√xt
 = 
√w_°ôem
;

262 } if(!
	`°rcmp
(
«me
, "$screensaver_timeout")) {

263 
n
 = 
	`°πﬁ
(
p
, 
NULL
, 10);

264 
	`GrSëS¸ìnSavîTimeout
(
n
);

266 } if(!
	`°rcmp
(
«me
, "$screensaver_rotate_time")) {

267 
°©e
->
rŸ©ess
 = 
	`°πﬁ
(
p
, 
NULL
, 10);

269 } if(!
	`°rcmp
(
«me
, "$random_screensaver")) {

270 
	`§™d
(
	`time
(0));

271 
°©e
->
øndomss
 = 1;

273 } if(!
	`°rcmp
(
«me
, "$window_background_image")) {

274 
	`is•a˚
(*
p
))Ö++;

275 if(!*
p
Ë
¥em©uª
;

276 
µ
 = 
p
;

277 *
p
 && (!
	`is•a˚
(*p)))Ö++;

278 *
p
 = 0;

279 
°©e
->
wödow_background_image
 = 
	`°rdup
(
µ
);

281 } if(!
	`°rcmp
(
«me
, "$window_background_mode")) {

282 
°©e
->
wödow_background_mode
 = (Ë
	`°πﬁ
(
p
, 
NULL
, 10);

284 } if(!
	`°rcmp
(
«me
, "$window_background_colour")) {

285 
	`£t_wödow_background_cﬁour
(
p
, 
löío
);

289 
	`is•a˚
(*
p
))Ö++;

290 if(!*
p
Ë
¥em©uª
;

291 
ic⁄
 = 
p
;

292 *
p
 && (!
	`is•a˚
(*p)))Ö++;

293 if(!*
p
Ë
¥em©uª
;

294 *
p
++ = 0;

296 
√w_lôem
 = 
	`my_mÆloc
((
lôem
));

297 if(!(
√w_lôem
->
«me
 = 
	`°rdup
(name))) {

298 
	`‰ì
(
√w_lôem
);

299 
nomem
;

301 if(!(
√w_lôem
->
ic⁄
 = 
	`°rdup
(icon))) {

302 
	`‰ì
(
√w_lôem
->
«me
);

303 
	`‰ì
(
√w_lôem
);

304 
nomem
;

306 if(!(
√w_lôem
->
¥og
 = 
	`make_¥og_ôem
(
p
, 
löío
))) {

307 
	`‰ì
(
√w_lôem
->
«me
);

308 
	`‰ì
(
√w_lôem
->
ic⁄
);

309 
	`‰ì
(
√w_lôem
);

312 
√w_lôem
->
ic⁄id
 = 0;

313 if(
	`°rcmp
("-", 
ic⁄
)) {

314 
li
 = 
°©e
->
lôems
;

315 
li
) {

316 if(!(
	`°rcmp
(
ic⁄
, 
li
->
«me
))) {

317 
√w_lôem
->
ic⁄id
 = 
li
->iconid;

320 
li
 =Üi->
√xt
;

322 if(!
√w_lôem
->
ic⁄id
) {

323 if(!(
√w_lôem
->
ic⁄id
 = 
	`GrLﬂdImageFromFûe
(
ic⁄
, 0))){

324 
	`Ârötf
(
°dîr
, "Couldn'tÜoad icon \"%s\"\n",

325 
ic⁄
);

327 
	`GrGëImageInfo
(
√w_lôem
->
ic⁄id
, &
imageöfo
);

328 if((
imageöfo
.
width
 !
ICON_WIDTH
) ||

329 (
imageöfo
.
height
 !
ICON_HEIGHT
)) {

330 
	`Ârötf
(
°dîr
, "Icon \"%s\" isÅhe "

332 "\n", 
ic⁄
, 
imageöfo
.
width
,

333 
imageöfo
.
height
, 
ICON_WIDTH
,

334 
ICON_HEIGHT
);

335 
	`GrFªeImage
(
√w_lôem
->
ic⁄id
);

336 
√w_lôem
->
ic⁄id
 = 0;

342 
√w_lôem
->
¥ev
 = 
NULL
;

343 
√w_lôem
->
√xt
 = 
NULL
;

344 if(!
°©e
->
lôems
) {

345 
°©e
->
œ°lôem
 = 
√w_lôem
;

346 
°©e
->
lôems
 = 
√w_lôem
;

348 
√w_lôem
->
√xt
 = 
°©e
->
lôems
;

349 
°©e
->
lôems
->
¥ev
 = 
√w_lôem
;

350 
°©e
->
lôems
 = 
√w_lôem
;

353 
°©e
->
numlôems
++;

357 
nomem
:

358 
	`Ârötf
(
°dîr
, "Out of memory\n");

359 
	`exô
(1);

361 
¥em©uª
:

362 
	`Ârötf
(
°dîr
, "PrematureÉnd ofÜine onÜine %d of config file\n",

363 
löío
);

364 
	}
}

366 
	$ªad_c⁄fig
(
l°©e
 *
°©e
)

368 
löío
 = 1;

369 
FILE
 *
Â
;

370 *
buf
 = 
	`my_mÆloc
(256);

372 if(!(
Â
 = 
	`f›í
(
°©e
->
c⁄fig_fûe
, "r"))) {

373 
	`Ârötf
(
°dîr
, "Couldn't open config file \"%s\"\n",

374 
°©e
->
c⁄fig_fûe
);

375 
	`exô
(2);

378 
°©e
->
lôems
 = 
NULL
;

379 
°©e
->
numlôems
 = 0;

380 
°©e
->
ssôems
 = 
NULL
;

381 
°©e
->
øndomss
 = 0;

382 
°©e
->
numssôems
 = 0;

383 
°©e
->
°ôems
 = 
NULL
;

384 
°©e
->
rŸ©ess
 = 0;

386 
	`fgës
(
buf
, 256, 
Â
)) {

387 
	`∑r£_c⁄fig_löe
(
°©e
, 
buf
, 
löío
);

388 
löío
++;

391 
	`f˛o£
(
Â
);

392 
	`‰ì
(
buf
);

394 if(
°©e
->
øndomss
Ë
	`choo£_øndom_s¸ìnßvî
(state);

395 
°©e
->
curssôem
 = sèã->
ssôems
;

397 if(!
°©e
->
numlôems
) {

398 
	`Ârötf
(
°dîr
, "No validÜauncher items in config file\n");

399 
	`exô
(5);

401 
	}
}

403 
	$døw_ôem
(
l°©e
 *
°©e
, 
lôem
 *
ôem
)

405 
GR_SIZE
 
width
, 
height
, 
ba£
, 
x
, 
Àn
;

407 
	`GrDøwImageToFô
(
ôem
->
wid
, 
°©e
->
gc
, 
ICON_X_POSITION
, 
ICON_Y_POSITION
,

408 
ICON_WIDTH
, 
ICON_HEIGHT
, 
ôem
->
ic⁄id
);

410 
Àn
 = 
	`°æí
(
ôem
->
«me
);

411 
	`GrGëGCTextSize
(
°©e
->
gc
, 
ôem
->
«me
, 
Àn
, 0, &
width
, &
height
, &
ba£
);

412 if(
width
 >
ITEM_WIDTH
Ë
x
 = 0;

413 
x
 = (
ITEM_WIDTH
 - 
width
) / 2;

415 
	`GrText
(
ôem
->
wid
, 
°©e
->
gc
, 
x
, 
TEXT_Y_POSITION
, iãm->
«me
, 
Àn
, 0);

416 
	}
}

418 
	$h™dÀ_exposuª_evít
(
l°©e
 *
°©e
)

420 
GR_EVENT_EXPOSURE
 *
evít
 = &
°©e
->evít.
exposuª
;

421 
lôem
 *
i
 = 
°©e
->
lôems
;

423 if(
evít
->
wid
 =
°©e
->
maö_wödow
) ;

425 
i
) {

426 if(
evít
->
wid
 =
i
->wid) {

427 
	`døw_ôem
(
°©e
, 
i
);

430 
i
 = i->
√xt
;

433 
	`Ârötf
(
°dîr
, "GotÉxposureÉvent for unknown window %d\n",

434 
evít
->
wid
);

435 
	}
}

437 
pid_t
 
	$œunch_¥ogøm
(
¥og_ôem
 *
¥og
)

439 
pid_t
 
pid
;

441 if((
pid
 = 
	`f‹k
()Ë=-1Ë
	`≥º‹
("Couldn't fork");

442 if(!
pid
) {

443 if(
	`execvp
(
¥og
->
comm™d
,Örog->
¨gv
) == -1)

444 
	`Ârötf
(
°dîr
, "Couldn't start \"%s\": %s\n",

445 
¥og
->
comm™d
, 
	`°ªº‹
(
î∫o
));

446 
	`exô
(7);

449  
pid
;

450 
	}
}

452 
	$h™dÀ_mou£_evít
(
l°©e
 *
°©e
)

454 
GR_EVENT_MOUSE
 *
evít
 = &
°©e
->evít.
mou£
;

455 
lôem
 *
i
 = 
°©e
->
lôems
;

457 if(
evít
->
wid
 =
°©e
->
maö_wödow
) ;

459 
i
) {

460 if(
evít
->
wid
 =
i
->wid) {

461 
	`œunch_¥ogøm
(
i
->
¥og
);

464 
i
 = i->
√xt
;

467 
	`Ârötf
(
°dîr
, "GŸ mou£Évíàf‹ unknow¿wödow %d\n", 
evít
->
wid
);

468 
	}
}

470 
	$choo£_øndom_s¸ìnßvî
(
l°©e
 *
°©e
)

472 
i
;

473 
ssôem
 *
s
;

475 if(!
°©e
->
numssôems
) ;

478 
i
 = 
	`ønd
(Ë% 
°©e
->
numssôems
;

479 
s
 = 
°©e
->
ssôems
;

480 
i
--Ë
s
 = s->
√xt
;

481 } 
s
 =
°©e
->
curssôem
);

483 
°©e
->
curssôem
 = 
s
;

484 
	}
}

486 
	$a˘iv©e_s¸ìnßvî
(
l°©e
 *
°©e
)

488 
s•id
 = 
	`œunch_¥ogøm
(
°©e
->
curssôem
->
¥og
);

490 if(
°©e
->
øndomss
Ë
	`choo£_øndom_s¸ìnßvî
(state);

492 
°©e
->
curssôem
 = sèã->curssôem->
√xt
;

493 if(!
°©e
->
curssôem
Ë°©e->curssôem = sèã->
ssôems
;

495 
	}
}

497 
	$dó˘iv©e_s¸ìnßvî
(
l°©e
 *
°©e
)

499 if(
s•id
 >0Ë
	`kûl
(s•id, 
SIGINT
);

500 
	}
}

502 
	$h™dÀ_s¸ìnßvî_evít
(
l°©e
 *
°©e
)

504 
GR_EVENT_SCREENSAVER
 *
evít
 = &
°©e
->evít.
s¸ìnßvî
;

506 if(
evít
->
a˘iv©e
 !
GR_TRUE
) {

507 if(
°©e
->
s§Ÿ©ëimî
 > 0)

508 
	`GrDe°royTimî
(
°©e
->
s§Ÿ©ëimî
);

512 if(!
°©e
->
ssôems
) {

513 
	`Ârötf
(
°dîr
, "Got screensaveráctivateÉvent withÇo "

518 
	`a˘iv©e_s¸ìnßvî
(
°©e
);

520 if(
°©e
->
rŸ©ess
) {

521 
°©e
->
s§Ÿ©ëimî
 = 
	`GrCª©eTimî
(°©e->
maö_wödow
,

522 
°©e
->
rŸ©ess
 * 1000 );

523 } 
°©e
->
s§Ÿ©ëimî
 = -1;

524 
	}
}

526 
	$h™dÀ_timî_evít
(
l°©e
 *
°©e
)

528 
GR_EVENT_TIMER
 *
evít
 = &
°©e
->evít.
timî
;

530 if(
evít
->
tid
 !
°©e
->
s§Ÿ©ëimî
) ;

532 
	`dó˘iv©e_s¸ìnßvî
(
°©e
);

533 
	`a˘iv©e_s¸ìnßvî
(
°©e
);

534 
	}
}

536 
	$h™dÀ_evít
(
l°©e
 *
°©e
)

538 
°©e
->
evít
.
ty≥
) {

539 
GR_EVENT_TYPE_EXPOSURE
:

540 
	`h™dÀ_exposuª_evít
(
°©e
);

542 
GR_EVENT_TYPE_BUTTON_DOWN
:

543 
	`h™dÀ_mou£_evít
(
°©e
);

545 
GR_EVENT_TYPE_CLOSE_REQ
:

547 
GR_EVENT_TYPE_SCREENSAVER
:

548 
	`h™dÀ_s¸ìnßvî_evít
(
°©e
);

550 
GR_EVENT_TYPE_TIMER
:

551 
	`h™dÀ_timî_evít
(
°©e
);

553 
GR_EVENT_TYPE_NONE
:

556 
	`Ârötf
(
°dîr
, "Got unknownÉventÅype %d\n",

557 
°©e
->
evít
.
ty≥
);

560 
	}
}

562 
	$do_evít_lo›
(
l°©e
 *
°©e
)

565 
	`GrGëNextEvít
(&
°©e
->
evít
);

566 
	`h™dÀ_evít
(
°©e
);

567 } 
°©e
->
evít
.
ty≥
 !
GR_EVENT_TYPE_CLOSE_REQ
);

568 
	}
}

570 
	$do_°¨tups
(
l°©e
 *
°©e
)

572 
°ôem
 *
tmp
, *
°
 = 
°©e
->
°ôems
;

574 
°
) {

575 
	`œunch_¥ogøm
(
°
->
¥og
);

576 
tmp
 = 
°
;

577 
°
 = st->
√xt
;

578 
	`‰ì_¥og_ôem
(
tmp
->
¥og
);

579 
	`‰ì
(
tmp
);

581 
	}
}

583 
	$öôüli£
(
l°©e
 *
°©e
)

585 
GR_SCREEN_INFO
 
si
;

586 
GR_IMAGE_ID
 
back_image
;

587 
GR_IMAGE_INFO
 
imageöfo
;

588 
rows
 = 1, 
cﬁumns
 = 1, 
width
, 
height
, 
x
 = 0, 
y
 = 0;

589 
GR_WM_PROPERTIES
 
¥›s
;

590 
lôem
 *
i
;

592 if(
	`GrO≥n
() < 0) {

593 
	`Ârötf
(
°dîr
, "Couldn't connectÅo Nano-X server\n");

594 
	`exô
(4);

597 
°©e
->
wödow_background_mode
 = 0;

598 
°©e
->
wödow_background_image
 = 
NULL
;

599 
s•id
 = -1;

601 
	`ªad_c⁄fig
(
°©e
);

603 
	`GrGëS¸ìnInfo
(&
si
);

605 if(
si
.
rows
 > si.
cﬁs
) {

606 
rows
 = 
°©e
->
numlôems
;

607 (((
rows
 / 
cﬁumns
Ë+Ñow†% cﬁumnsË* 
ITEM_HEIGHT
) >

608 
si
.
rows
) {

609 
cﬁumns
++;

611 if((
cﬁumns
 * 
ITEM_WIDTH
Ë> 
si
.
cﬁs
Ë
toom™y
;

612 
rows
 = (row†/ 
cﬁumns
) + (rows % columns);

613 
width
 = 
cﬁumns
 * 
ITEM_WIDTH
 + 1 + columns;

614 
height
 = 
rows
 * 
ITEM_HEIGHT
 + 1 +Ñows;

616 
cﬁumns
 = 
°©e
->
numlôems
;

617 (((
cﬁumns
 / 
rows
Ë+ (cﬁumn†%Ñows)Ë* 
ITEM_WIDTH
) >

618 
si
.
cﬁs
) {

619 
rows
++;

621 if((
rows
 * 
ITEM_HEIGHT
Ë> 
si
.rowsË
toom™y
;

622 
cﬁumns
 = (cﬁumn†/ 
rows
) + (columns %Ñows);

623 
width
 = 
cﬁumns
 * 
ITEM_WIDTH
 + 1 + columns;

624 
height
 = (
rows
 * 
ITEM_HEIGHT
) + 1 +Ñows;

625 
y
 = 
si
.
rows
 - (row†* 
ITEM_HEIGHT
) - 1 -Ñows;

628 
°©e
->
gc
 = 
	`GrNewGC
();

629 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
ITEM_TEXT_COLOUR
);

630 
	`GrSëGCBackground
(
°©e
->
gc
, 
ITEM_BACKGROUND_COLOUR
);

632 if(
°©e
->
wödow_background_image
) {

633 if(!(
back_image
 = 
	`GrLﬂdImageFromFûe
(

634 
°©e
->
wödow_background_image
, 0))) {

635 
	`Ârötf
(
°dîr
, "Couldn'tÜoad background image\n");

637 
	`GrGëImageInfo
(
back_image
, &
imageöfo
);

638 if(!(
°©e
->
background_pixm≠
 = 
	`GrNewPixm≠
(

639 
imageöfo
.
width
,

640 
imageöfo
.
height
, 
NULL
))) {

641 
	`Ârötf
(
°dîr
, "Couldn'tállocateÖixmap "

644 
	`GrDøwImageToFô
(
°©e
->
background_pixm≠
,

645 
°©e
->
gc
, 0, 0, 
imageöfo
.
width
,

646 
imageöfo
.
height
, 
back_image
);

647 
	`GrFªeImage
(
back_image
);

648 
	`GrSëBackgroundPixm≠
(
GR_ROOT_WINDOW_ID
,

649 
°©e
->
background_pixm≠
,

650 
°©e
->
wödow_background_mode
);

651 
	`GrCÀ¨Wödow
(
GR_ROOT_WINDOW_ID
, 
GR_TRUE
);

656 if(
°©e
->
ssôems
)

657 
	`GrSñe˘Evíts
(
GR_ROOT_WINDOW_ID
, 
GR_EVENT_MASK_SCREENSAVER
);

659 
°©e
->
maö_wödow
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 0, 
y
, 
width
, 
height
,

660 0, 
ITEM_BACKGROUND_COLOUR
, 0);

661 
	`GrSñe˘Evíts
(
°©e
->
maö_wödow
, 
GR_EVENT_MASK_CLOSE_REQ
 |

662 
GR_EVENT_MASK_TIMER
);

663 
¥›s
.
Êags
 = 
GR_WM_FLAGS_PROPS
;

664 
¥›s
.¥›†
GR_WM_PROPS_NOMOVE
 | 
GR_WM_PROPS_NODECORATE
 |

665 
GR_WM_PROPS_NOAUTOMOVE
 | 
GR_WM_PROPS_NOAUTORESIZE
;

666 
	`GrSëWMPr›îtõs
(
°©e
->
maö_wödow
, &
¥›s
);

668 
i
 = 
°©e
->
œ°lôem
;

669 
y
 = 0;

670 
i
) {

671 
i
->
wid
 = 
	`GrNewWödow
(
°©e
->
maö_wödow
,

672 (
x
 * 
ITEM_WIDTH
) + x + 1,

673 (
y
 * 
ITEM_HEIGHT
Ë+ y + 1, 
ITEM_WIDTH
,

674 
ITEM_HEIGHT
, 1, 
ITEM_BACKGROUND_COLOUR
,

675 
ITEM_BORDER_COLOUR
);

676 
	`GrSñe˘Evíts
(
i
->
wid
, 
GR_EVENT_MASK_EXPOSURE
 |

677 
GR_EVENT_MASK_BUTTON_DOWN
);

678 
	`GrM≠Wödow
(
i
->
wid
);

679 
i
 = i->
¥ev
;

680 if(++
x
 =
cﬁumns
) {

681 
x
 = 0;

682 
y
++;

686 
	`GrM≠Wödow
(
°©e
->
maö_wödow
);

688 
	`sig«l
(
SIGCHLD
, &
ª≠î
);

690 
	`do_°¨tups
(
°©e
);

694 
toom™y
:

695 
	`Ârötf
(
°dîr
, "Too many itemsÅo fit on screen\n");

696 
	`exô
(6);

697 
	}
}

699 
	$maö
(
¨gc
, *
¨gv
[])

701 
l°©e
 *
°©e
;

703 if(
¨gc
 !2Ë
	`ußge
();

705 
°©e
 = 
	`my_mÆloc
((
l°©e
));

706 
°©e
->
c⁄fig_fûe
 = 
	`°rdup
(
¨gv
[1]);

708 
	`öôüli£
(
°©e
);

710 
	`do_evít_lo›
(
°©e
);

712 
	`GrClo£
();

715 
	}
}

	@demos/nanox/launcher.h

32 #i‚de‡
LAUNCHER_H


33 
	#LAUNCHER_H


	)

35 
	#ITEM_WIDTH
 100

	)

36 
	#ITEM_HEIGHT
 60

	)

37 
	#ITEM_TEXT_COLOUR
 
GR_COLOR_BLACK


	)

38 
	#ITEM_BORDER_COLOUR
 
GR_COLOR_BLACK


	)

39 
	#ITEM_BACKGROUND_COLOUR
 
GR_COLOR_GRAY80


	)

40 
	#ICON_WIDTH
 32

	)

41 
	#ICON_HEIGHT
 32

	)

42 
	#ICON_X_POSITION
 ((
ITEM_WIDTH
 - 
ICON_WIDTH
Ë/ 2)

	)

43 
	#ICON_Y_POSITION
 6

	)

44 
	#TEXT_Y_POSITION
 (
ITEM_HEIGHT
 - 6)

	)

45 
	#MAX_ARGUMENTS
 12

	)

47 
	scomm™d_¨gv
 {

48 *
	mcomm™d
;

49 *
	m¨gv
[
MAX_ARGUMENTS
];

51 
comm™d_¨gv
 
	t¥og_ôem
;

53 
	sœunchî_ôem
 {

54 *
	m«me
;

55 *
	mic⁄
;

56 
¥og_ôem
 *
	m¥og
;

57 
œunchî_ôem
 *
	m√xt
;

58 
œunchî_ôem
 *
	m¥ev
;

59 
GR_IMAGE_ID
 
	mic⁄id
;

60 
GR_WINDOW_ID
 
	mwid
;

62 
œunchî_ôem
 
	tlôem
;

64 
	s¥og_li°
 {

65 
¥og_ôem
 *
	m¥og
;

66 
¥og_li°
 *
	m√xt
;

68 
¥og_li°
 
	tssôem
;

69 
¥og_li°
 
	t°ôem
;

71 
	sœunchî_°©e
 {

72 *
	mc⁄fig_fûe
;

73 
GR_WINDOW_ID
 
	mmaö_wödow
;

74 
lôem
 *
	mlôems
;

75 
lôem
 *
	mœ°lôem
;

76 
	mnumlôems
;

77 
ssôem
 *
	mssôems
;

78 
ssôem
 *
	mcurssôem
;

79 
	mnumssôems
;

80 
	møndomss
;

81 
	mrŸ©ess
;

82 
GR_TIMER_ID
 
	ms§Ÿ©ëimî
;

83 
°ôem
 *
	m°ôems
;

84 
GR_GC_ID
 
	mgc
;

85 
GR_EVENT
 
	mevít
;

86 
	mwödow_background_mode
;

87 *
	mwödow_background_image
;

88 
GR_WINDOW_ID
 
	mbackground_pixm≠
;

90 
œunchî_°©e
 
	tl°©e
;

92 
ª≠î
(
signum
);

93 *
my_mÆloc
(
size_t
 
size
);

94 
ußge
();

95 
‰ì_¥og_ôem
(
¥og_ôem
 *
ôem
);

96 
¥og_ôem
 *
make_¥og_ôem
(*
comm™d
, 
löío
);

97 
£t_wödow_background_cﬁour
(*
buf
, 
löío
);

98 
∑r£_c⁄fig_löe
(
l°©e
 *
°©e
, *
buf
, 
löío
);

99 
ªad_c⁄fig
(
l°©e
 *
°©e
);

100 
døw_ôem
(
l°©e
 *
°©e
, 
lôem
 *
ôem
);

101 
h™dÀ_exposuª_evít
(
l°©e
 *
°©e
);

102 
pid_t
 
œunch_¥ogøm
(
¥og_ôem
 *
¥og
);

103 
h™dÀ_mou£_evít
(
l°©e
 *
°©e
);

104 
choo£_øndom_s¸ìnßvî
(
l°©e
 *
°©e
);

105 
a˘iv©e_s¸ìnßvî
(
l°©e
 *
°©e
);

106 
dó˘iv©e_s¸ìnßvî
(
l°©e
 *
°©e
);

107 
h™dÀ_s¸ìnßvî_evít
(
l°©e
 *
°©e
);

108 
h™dÀ_timî_evít
(
l°©e
 *
°©e
);

109 
h™dÀ_evít
(
l°©e
 *
°©e
);

110 
do_evít_lo›
(
l°©e
 *
°©e
);

111 
do_°¨tups
(
l°©e
 *
°©e
);

112 
öôüli£
(
l°©e
 *
°©e
);

	@demos/nanox/logfont.c

4 
	~<°dio.h
>

5 
	~<°dlib.h
>

6 
	~<°rög.h
>

7 
	~<uni°d.h
>

8 #i‡
UNIX


9 
	~<time.h
>

11 
	#MWINCLUDECOLORS


	)

12 
	~"«no-X.h
"

14 
	#FONT
 "¨ül.âf"

	)

20 
	#MAXW
 630

	)

21 
	#MAXH
 470

	)

23 
	$maö
(
¨gc
, **
¨gv
)

25 
GR_WINDOW_ID
 
wödow
;

26 
GR_EVENT
 
evít
;

27 
GR_GC_ID
 
gc
;

28 
GR_FONT_ID
 
f⁄tid
;

29 
x
, 
y
, 
∫d
 = 0;

30 
MWLOGFONT
 
lf
;

31 
des¸ùti⁄
[128];

33 
	`§™d
(
	`time
(0));

35 
	`GrO≥n
();

36 
wödow
 = 
	`GrNewWödowEx
(
GR_WM_PROPS_APPWINDOW
, "logfont",

37 
GR_ROOT_WINDOW_ID
, 5, 5, 
MAXW
, 
MAXH
, 
BLACK
);

38 
	`GrSñe˘Evíts
(
wödow
, 
GR_EVENT_MASK_EXPOSURE
|
GR_EVENT_MASK_CLOSE_REQ
);

39 
	`GrM≠Wödow
(
wödow
);

41 
gc
 = 
	`GrNewGC
();

43 
	`GrSëGCU£Background
(
gc
,
GR_FALSE
);

44 
	`GrSëGCBackground
(
gc
, 
	`GR_RGB
(0, 0, 0));

46 
y
 = 30;

47 
x
 = 0;

50 
	`GrCheckNextEvít
(&
evít
);

52 if(
evít
.
ty≥
 =
GR_EVENT_TYPE_CLOSE_REQ
) {

53 
	`GrClo£
();

54 
	`exô
(0);

59 
	`MWLF_CÀ¨
(&
lf
);

60 
des¸ùti⁄
[0] = '\0';

62 
lf
.
lfHeight
 = 12;

64 i‡–
∫d
 & 1 ) {

65 
lf
.
lfWeight
 = 
MWLF_WEIGHT_BOLD
;

66 
	`°rˇt
(
des¸ùti⁄
,"Bold ");

69 i‡–
∫d
 & 2 ) {

70 
lf
.
lfIèlic
 = 1;

71 
	`°rˇt
(
des¸ùti⁄
,"Italics ");

73 i‡–
∫d
 & 4 ) {

74 
lf
.
lfOblique
 = 1;

75 
	`°rˇt
(
des¸ùti⁄
,"Oblique ");

78 i‡–
∫d
 & 8 ) {

79 
lf
.
lfM⁄o•a˚
 = 1;

80 
	`°rˇt
(
des¸ùti⁄
,"Monospace ");

82 
lf
.
lfPr›‹ti⁄Æ
 = 1;

83 
	`°rˇt
(
des¸ùti⁄
,"Proportional ");

86 i‡–
¨gc
 > 1 )

87 
	`°r˝y
(
lf
.
lfFa˚Name
,
¨gv
[1]);

89 
	`°r˝y
(
lf
.
lfFa˚Name
, 
FONT
);

91 
f⁄tid
 = 
	`GrCª©eF⁄t
(0, 0, &
lf
);

93 
	`GrSëF⁄tSize
(
f⁄tid
,26);

95 
	`GrSëF⁄tAâr
(
f⁄tid
, 
GR_TFKERNING
 | 
GR_TFANTIALIAS
, 0);

96 
	`GrSëGCF⁄t
(
gc
, 
f⁄tid
);

98 
	`GrSëGCF‹eground
(
gc
, 0xffffff);

102 
	`GrText
(
wödow
, 
gc
,
x
,
y
, 
des¸ùti⁄
, -1, 
GR_TFTOP
|
GR_TFASCII
);

103 
	`GrDe°royF⁄t
(
f⁄tid
);

105 
∫d
++;

106 
y
 += 30;

107 i‡–
y
 > 460 )

108 
y
 = 0;

111 
	`GrClo£
();

112 
	}
}

	@demos/nanox/move.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	#MWINCLUDECOLORS


	)

4 
	~"«no-X.h
"

9 
	$maö
(
ac
,**
av
)

11 
GR_COORD
 
off£t_x
 = 0, 
off£t_y
 = 0;

12 
GR_WINDOW_ID
 
wödow1
, 
subwödow1
, 
subsubwö1
;

13 
GR_WINDOW_ID
 
wödow2
, 
subwödow2
;

15 
GR_EVENT
 
evít
;

17 
	`Ârötf
(
°dîr
,"This isá demoÖrogram.\n");

18 
	`Ârötf
(
°dîr
,"Left-button drags window\n");

19 
	`Ârötf
(
°dîr
,"Right-buttonÑaises window\n");

21 
	`GrO≥n
();

22 
wödow1
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 20, 20, 100, 60, 4, 
BLACK
, 
BLUE
);

23 
subwödow1
 = 
	`GrNewWödow
(
wödow1
, 5, 5, 90, 50, 4, 
WHITE
, 
RED
);

24 
subsubwö1
 = 
	`GrNewWödow
(
subwödow1
, 10, 10, 10, 10, 2, 
GREEN
, 
BLUE
);

26 
wödow2
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 20, 100, 100, 60, 4, 
BLACK
, 
BLUE
);

27 
subwödow2
 = 
	`GrNewWödow
(
wödow2
, 5, 5, 90, 50, 4, 
WHITE
, 
RED
);

30 
	`GrSñe˘Evíts
(
wödow1
,

31 
GR_EVENT_MASK_EXPOSURE
 |

32 
GR_EVENT_MASK_BUTTON_DOWN
 |

33 
GR_EVENT_MASK_BUTTON_UP
 |

34 
GR_EVENT_MASK_MOUSE_ENTER
 |

35 
GR_EVENT_MASK_MOUSE_EXIT
 |

36 
GR_EVENT_MASK_MOUSE_MOTION
 |

37 
GR_EVENT_MASK_CLOSE_REQ
);

39 
	`GrSñe˘Evíts
(
wödow2
,

40 
GR_EVENT_MASK_EXPOSURE
 |

41 
GR_EVENT_MASK_BUTTON_DOWN
 |

42 
GR_EVENT_MASK_BUTTON_UP
 |

43 
GR_EVENT_MASK_MOUSE_ENTER
 |

44 
GR_EVENT_MASK_MOUSE_EXIT
 |

45 
GR_EVENT_MASK_MOUSE_MOTION
 |

46 
GR_EVENT_MASK_CLOSE_REQ
);

48 
	`GrSñe˘Evíts
(
subsubwö1
,

49 
GR_EVENT_MASK_BUTTON_DOWN
 |

52 
	`GrM≠Wödow
(
subsubwö1
);

53 
	`GrM≠Wödow
(
subwödow1
);

54 
	`GrM≠Wödow
(
wödow1
);

57 
	`GrM≠Wödow
(
subwödow2
);

58 
	`GrM≠Wödow
(
wödow2
);

61 
	`GrGëNextEvít
(&
evít
);

63 
evít
.
ty≥
) {

64 
GR_EVENT_TYPE_NONE
:

66 
GR_EVENT_TYPE_BUTTON_DOWN
:

67 
off£t_x
 = 
evít
.
buâ⁄
.
x
;

68 
off£t_y
 = 
evít
.
buâ⁄
.
y
;

70 i‡(
evít
.
buâ⁄
.
ch™gebuâ⁄s
 & 
GR_BUTTON_R
) {

71 
	`GrRai£Wödow
(
evít
.
buâ⁄
.
wid
);

73 i‡(
evít
.
buâ⁄
.
wid
 =
subsubwö1
) {

74 
GR_WINDOW_INFO
 
wöfo
;

75 
	`GrGëWödowInfo
(
subsubwö1
, &
wöfo
);

76 i‡(
wöfo
.
∑ª¡
 =
subwödow1
) {

77 
	`GrRï¨ítWödow
(
subsubwö1
, 
subwödow2
, 10, 10);

79 
	`GrRï¨ítWödow
(
subsubwö1
, 
subwödow1
, 10, 10);

82 
GR_EVENT_TYPE_MOUSE_MOTION
:

83 i‡(
evít
.
mou£
.
buâ⁄s
 =
GR_BUTTON_L
 &&

84 (
evít
.
mou£
.
wid
 =
wödow1
 ||Évít.mou£.wid =
wödow2
)) {

85 
	`GrMoveWödow
(
evít
.
mou£
.
wid
,

86 
evít
.
mou£
.
roŸx
 - 
off£t_x
,

87 
evít
.
mou£
.
roŸy
 - 
off£t_y
);

89 i‡(
evít
.
mou£
.
buâ⁄s
 =
GR_BUTTON_R
) {

90 
	`GrResizeWödow
(
evít
.
mou£
.
wid
,

91 
evít
.
mou£
.
x
 + 1,

92 
evít
.
mou£
.
y
 + 1);

95 
GR_EVENT_TYPE_EXPOSURE
:

100 
GR_EVENT_TYPE_CLOSE_REQ
:

101 
	`GrClo£
();

102 
	`exô
(0);

104 
	`Ârötf
(
°dîr
, "%d\n", 
evít
.
ty≥
);

107 
	`GrClo£
();

108 
	}
}

	@demos/nanox/npanel.c

12 
	#SHOW_WINDOW_MOTION


	)

18 #unde‡
USE_WEIRD_POINTER


20 
	~<°dio.h
>

21 
	~<sig«l.h
>

22 
	~<sys/time.h
>

23 
	~<sys/waô.h
>

24 
	~<°dlib.h
>

25 
	~<uni°d.h
>

26 
	#MWINCLUDECOLORS


	)

27 
	~"«no-X.h
"

32 
	#_
 ((Ë0Ë

	)

33 
	#X
 ((Ë1Ë

	)

34 
	#MASK
(
a
,
b
,
c
,
d
,
e
,
f
,
g
) \

35 (((((((((((((
a
 * 2Ë+ 
b
Ë* 2Ë+ 
c
Ë* 2Ë+ 
d
) * 2) \

36 + 
e
Ë* 2Ë+ 
f
Ë* 2Ë+ 
g
Ë<< 9)

	)

38 
	#DEC_HEIGHT
 7

	)

39 
	#IDLE_DELAY
 100000

	)

41 
GR_WINDOW_ID
 
	gw1
;

42 
GR_GC_ID
 
	ggc
;

43 
GR_GC_ID
 
	gbgc
;

44 
GR_SCREEN_INFO
 
	gsi
;

45 
	gfwidth
, 
	gfheight
;

46 
	gfba£
;

47 
	gnum_≠ps
 = 0;

49 
do_exposuª
(
GR_EVENT_EXPOSURE
 *
ï
);

50 
do_buâ⁄down
(
GR_EVENT_BUTTON
 *
ï
);

51 
do_buâ⁄up
(
GR_EVENT_BUTTON
 *
ï
);

52 
do_upd©e
(
GR_EVENT_UPDATE
 *
ï
);

53 
do_mou£
(
GR_EVENT_MOUSE
 *
ï
);

55 
	s≠p_öfo
 {

56 
	m≠p_id
[10];

57 
	m≠p_∑th
[64];

58 } 
	gAµs
[] = {

59 #i‡
ELKS


74 
m™aged_wödow
 
	tmwö
;

75 
	sm™aged_wödow
 {

76 
GR_WINDOW_ID
 
	mwid
;

77 
GR_WINDOW_ID
 
	mfid
;

78 
GR_COORD
 
	mx
;

79 
GR_COORD
 
	my
;

80 
GR_SIZE
 
	mwidth
;

81 
mwö
 * 
	m√xt
;

84 
mwö
 * 
	gmwös
 = 
NULL
;

85 
mwö
 * 
	gö_mŸi⁄
 = 
NULL
;

86 
GR_COORD
 
	gmove_xoff
;

87 
GR_COORD
 
	gmove_yoff
;

89 #i‚de‡
WAIT_ANY


93 
	#WAIT_ANY
 (
pid_t
)-1

	)

99 
	$ª≠î
(
signum
Ë{ 
	`waôpid
(
WAIT_ANY
, 
NULL
, 
WNOHANG
Ë> 0); 
	}
}

102 
	$maö
(
¨gc
,**
¨gv
)

104 
GR_EVENT
 
evít
;

105 
≠p_öfo
 * 
a˘
;

106 
width
, 
height
;

108 #ifde‡
USE_WEIRD_POINTER


109 
GR_BITMAP
 
bôm≠1fg
[7];

110 
GR_BITMAP
 
bôm≠1bg
[7];

113 
a˘
 = 
Aµs
;á˘->
≠p_id
[0] !'\0';á˘++, 
num_≠ps
++);

115 i‡(
	`GrO≥n
() < 0) {

116 
	`Ârötf
(
°dîr
, "cannot open graphics\n");

117 
	`exô
(1);

120 
	`GrGëS¸ìnInfo
(&
si
);

122 
	`sig«l
(
SIGCHLD
, &
ª≠î
);

124 
gc
 = 
	`GrNewGC
();

125 
bgc
 = 
	`GrNewGC
();

127 
	`GrSëGCF‹eground
(
bgc
, 
GRAY
);

128 
	`GrSëGCF⁄t
(
gc
, 
	`GrCª©eF⁄t
(
GR_FONT_SYSTEM_FIXED
, 0, 
NULL
));

130 
	`GrGëGCTextSize
(
gc
, "A", 1, 
GR_TFASCII
, &
fwidth
, &
fheight
, &
fba£
);

131 
width
 = 
fwidth
 * 8 + 4;

132 
height
 = (
fheight
Ë* 
num_≠ps
 + 4;

134 
w1
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 5, 5, 
width
,

135 
height
, 1, 
WHITE
, 
BLACK
);

137 
	`GrSñe˘Evíts
(
w1
, 
GR_EVENT_MASK_EXPOSURE
 | 
GR_EVENT_MASK_BUTTON_DOWN


138 | 
GR_EVENT_MASK_CLOSE_REQ
);

139 
	`GrSñe˘Evíts
(
GR_ROOT_WINDOW_ID
, 
GR_EVENT_MASK_EXPOSURE
 |

140 
GR_EVENT_MASK_CHLD_UPDATE
);

142 
	`GrM≠Wödow
(
w1
);

144 #ifde‡
USE_WEIRD_POINTER


145 
bôm≠1bg
[0] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

146 
bôm≠1bg
[1] = 
	`MASK
(
_
,
X
,X,X,X,X,_);

147 
bôm≠1bg
[2] = 
	`MASK
(
_
,
X
,X,X,X,X,_);

148 
bôm≠1bg
[3] = 
	`MASK
(
_
,
X
,X,X,X,X,_);

149 
bôm≠1bg
[4] = 
	`MASK
(
_
,
X
,X,X,X,X,_);

150 
bôm≠1bg
[5] = 
	`MASK
(
_
,
X
,X,X,X,X,_);

151 
bôm≠1bg
[6] = 
	`MASK
(
X
,X,X,X,X,X,X);

153 
bôm≠1fg
[0] = 
	`MASK
(
_
,_,_,_,_,_,_);

154 
bôm≠1fg
[1] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

155 
bôm≠1fg
[2] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

156 
bôm≠1fg
[3] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

157 
bôm≠1fg
[4] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

158 
bôm≠1fg
[5] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

159 
bôm≠1fg
[6] = 
	`MASK
(
_
,
X
,X,X,X,X,_);

161 
	`GrSëCurs‹
(
w1
, 7, 7, 3, 3, 
WHITE
, 
BLACK
, 
bôm≠1fg
, 
bôm≠1bg
);

164 
	`GrFûlRe˘
(
GR_ROOT_WINDOW_ID
, 
bgc
, 0, 0, 
si
.
cﬁs
, si.
rows
);

166 
	`GrSëGCF‹eground
(
gc
, 
BLACK
);

167 
	`GrSëGCBackground
(
gc
, 
WHITE
);

170 
	`GrGëNextEvít
(&
evít
);

172 
evít
.
ty≥
) {

173 
GR_EVENT_TYPE_EXPOSURE
:

174 
	`do_exposuª
(&
evít
.
exposuª
);

176 
GR_EVENT_TYPE_BUTTON_DOWN
:

177 
	`do_buâ⁄down
(&
evít
.
buâ⁄
);

179 
GR_EVENT_TYPE_BUTTON_UP
:

180 
	`do_buâ⁄up
(&
evít
.
buâ⁄
);

182 
GR_EVENT_TYPE_UPDATE
:

183 
	`do_upd©e
(&
evít
.
upd©e
);

185 
GR_EVENT_TYPE_MOUSE_POSITION
:

186 
	`do_mou£
(&
evít
.
mou£
);

188 
GR_EVENT_TYPE_CLOSE_REQ
:

189 
	`GrClo£
();

190 
	`exô
(0);

193 
	}
}

195 
mwö
 * 
	$IsDec‹©i⁄
(
GR_WINDOW_ID
 
wid
)

197 
mwö
 * 
mwp
;

198 
mwp
 = 
mwös
; mwp; mw∞mwp->
√xt
) {

199 i‡(
mwp
->
fid
 =
wid
) {

200  
mwp
;

203  
NULL
;

204 
	}
}

206 
mwö
 * 
	$FödWödow
(
GR_WINDOW_ID
 
wid
)

208 
mwö
 * 
mwp
;

209 
mwp
 = 
mwös
; mwp; mw∞mwp->
√xt
) {

210 i‡(
mwp
->
wid
 == wid) {

211  
mwp
;

214  
NULL
;

215 
	}
}

217 
mwö
 * 
	$NewWödow
(
GR_WINDOW_ID
 
wid
)

219 
mwö
 * 
mwp
 = 
	`mÆloc
((mwin));

221 i‡(
mwp
) {

222 
mwp
->
wid
 = wid;

223 
mwp
->
√xt
 = 
mwös
;

224 
mwös
 = 
mwp
;

226  
mwp
;

227 
	}
}

230 
	$do_upd©e
(
GR_EVENT_UPDATE
 *
ï
)

232 
mwö
 * 
mwp
;

233 
mwö
 * 
tmwp
;

234 
GR_WINDOW_INFO
 
wöfo
;

236 i‡(
	`IsDec‹©i⁄
(
ï
->
wid
)) ;

238 i‡((
mwp
 = 
	`FödWödow
(
ï
->
wid
)Ë=
NULL
) {

240 i‡(
ï
->
uty≥
 !
GR_UPDATE_MAP
) ;

241 i‡((
mwp
 = 
	`NewWödow
(
ï
->
wid
)Ë=
NULL
) {

242 
	`¥ötf
("malloc failed\n");

245 
	`GrGëWödowInfo
(
ï
->
wid
, &
wöfo
);

246 
mwp
->
x
 = 
ï
->x - 
wöfo
.
b‹dîsize
;

247 
mwp
->
y
 = 
ï
->y - 
wöfo
.
b‹dîsize
;

248 
mwp
->
width
 = 
ï
->width + 2 * 
wöfo
.
b‹dîsize
;

249 
	`GrMoveWödow
(
mwp
->
wid
, mwp->
x
 + 
wöfo
.
b‹dîsize
,

250 
mwp
->
y
 + 
DEC_HEIGHT
 +

251 2 * 
wöfo
.
b‹dîsize
);

252 
mwp
->
fid
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, mwp->
x
 + 1,

253 
mwp
->
y
 + 1, mwp->
width
 - 2,

254 
DEC_HEIGHT
 - 2, 1, 
BLUE
, 
BLACK
);

255 
	`GrSñe˘Evíts
(
mwp
->
fid
, 
GR_EVENT_MASK_BUTTON_DOWN
 |

256 
GR_EVENT_MASK_BUTTON_UP
 | 
GR_EVENT_MASK_MOUSE_POSITION
);

257 
	`GrM≠Wödow
(
mwp
->
fid
);

259 
ï
->
uty≥
) {

260 
GR_UPDATE_UNMAP
:

261 
	`GrUnm≠Wödow
(
mwp
->
fid
);

262 
	`GrDe°royWödow
(
mwp
->
fid
);

263 i‡(
mwös
 =
mwp
) {

264 
mwös
 = 
mwp
->
√xt
;

265 } 
tmwp
 = 
mwös
;Åmwp;Åmw∞tmwp->
√xt
) {

266 i‡(
tmwp
->
√xt
 =
mwp
) {

267 
tmwp
->
√xt
 = 
mwp
->next;

270 
	`‰ì
(
mwp
);

272 
GR_UPDATE_MOVE
:

273 
	`GrGëWödowInfo
(
ï
->
wid
, &
wöfo
);

274 i‡((
ï
->
x
 =(
mwp
->x + 
wöfo
.
b‹dîsize
)) &&

275 (
ï
->
y
 =(
mwp
->y + 
wöfo
.
b‹dîsize


276 + 
DEC_HEIGHT
))) {

279 
mwp
->
x
 = 
ï
->x - 
wöfo
.
b‹dîsize
;

280 
mwp
->
y
 = 
ï
->y - 
wöfo
.
b‹dîsize
 - 
DEC_HEIGHT
;

281 
	`GrMoveWödow
(
mwp
->
fid
, mwp->
x
 + 1, mwp->
y
 + 1);

286 
	}
}

292 
	$do_mou£
(
GR_EVENT_MOUSE
 *
ï
)

294 #ifde‡
SHOW_WINDOW_MOTION


295 
GR_WINDOW_INFO
 
wöfo
;

297 if(!
ö_mŸi⁄
) ;

299 
ö_mŸi⁄
->
x
 = 
ï
->
roŸx
 - 
move_xoff
 - 1;

300 
ö_mŸi⁄
->
y
 = 
ï
->
roŸy
 - 
move_yoff
 - 1;

301 
	`GrMoveWödow
(
ö_mŸi⁄
->
fid
, in_mŸi⁄->
x
 + 1, in_mŸi⁄->
y
 + 1);

302 
	`GrGëWödowInfo
(
ö_mŸi⁄
->
wid
, &
wöfo
);

303 
	`GrMoveWödow
(
ö_mŸi⁄
->
wid
, in_mŸi⁄->
x
 + 
wöfo
.
b‹dîsize
 - 1,

304 
ö_mŸi⁄
->
y
 + 2 * 
wöfo
.
b‹dîsize
 + 
DEC_HEIGHT
 - 1);

306 
	}
}

312 
	$do_exposuª
(
GR_EVENT_EXPOSURE
 *
ï
)

314 
≠p_öfo
 * 
a˘
;

315 
≠p_no
;

317 i‡(
ï
->
wid
 =
w1
) {

318 
a˘
=
Aµs
,
≠p_no
=0;a˘->
≠p_id
[0]!='\0';act++,app_no++) {

319 
	`GrText
(
w1
, 
gc
, 2, 2 + 
fheight
 * (
≠p_no
 + 1),

320 
a˘
->
≠p_id
, -1, 
GR_TFBOTTOM
);

322 } i‡(
ï
->
wid
 =
GR_ROOT_WINDOW_ID
) {

323 
	`GrFûlRe˘
(
GR_ROOT_WINDOW_ID
, 
bgc
, 
ï
->
x
,Ép->
y
,

324 
ï
->
width
,Ép->
height
);

326 
	}
}

328 ** 
ívú⁄
;

331 
	$do_buâ⁄down
(
GR_EVENT_BUTTON
 *
ï
)

333 
mwö
 * 
mwp
;

334 
≠p_no
;

336 i‡(
ï
->
wid
 =
w1
) {

337 
≠p_no
 = 
ï
->
y
 / 
fheight
;

338 i‡(
≠p_no
 >
num_≠ps
) {

339 
≠p_no
 = 
num_≠ps
 - 1;

342 i‡(!
	`vf‹k
()) {

343 * 
«rgv
[2];

345 
«rgv
[0] = 
Aµs
[
≠p_no
].
≠p_∑th
;

346 
«rgv
[1] = 0;

347 
	`execve
(
«rgv
[0],Ç¨gv, 
ívú⁄
);

349 
	`exô
(1);

351 } i‡((
mwp
 = 
	`IsDec‹©i⁄
(
ï
->
wid
)Ë!
NULL
) {

352 
	`GrRai£Wödow
(
mwp
->
wid
);

353 
	`GrRai£Wödow
(
mwp
->
fid
);

354 
ö_mŸi⁄
 = 
mwp
;

355 
move_xoff
 = 
ï
->
x
;

356 
move_yoff
 = 
ï
->
y
;

358 
	}
}

361 
	$do_buâ⁄up
(
GR_EVENT_BUTTON
 *
ï
)

363 #ifde‡
SHOW_WINDOW_MOTION


364 
ö_mŸi⁄
 = 
NULL
;

366 
mwö
 * 
mwp
;

367 
GR_WINDOW_INFO
 
wöfo
;

369 i‡((
mwp
 = 
	`IsDec‹©i⁄
(
ï
->
wid
)Ë!
NULL
) {

370 i‡(
mwp
 =
ö_mŸi⁄
) {

371 
mwp
->
x
 = 
ï
->
roŸx
 - 1 - 
move_xoff
;

372 
mwp
->
y
 = 
ï
->
roŸy
 - 1 - 
move_yoff
;

373 
	`GrMoveWödow
(
mwp
->
fid
, mwp->
x
 + 1, mwp->
y
 + 1);

374 
	`GrGëWödowInfo
(
mwp
->
wid
, &
wöfo
);

375 
	`GrMoveWödow
(
mwp
->
wid
, mwp->
x
 + 
wöfo
.
b‹dîsize
,

376 
mwp
->
y
 + 2 * 
wöfo
.
b‹dîsize
 + 
DEC_HEIGHT
);

377 
ö_mŸi⁄
 = 
NULL
;

381 
	}
}

	@demos/nanox/nsaver.c

35 
	~<î∫o.h
>

36 
	~<°dio.h
>

37 
	~<°dlib.h
>

38 
	~<time.h
>

39 
	~<m©h.h
>

40 
	~<sys/time.h
>

42 
	~<«no-X.h
>

43 
	~<nxcﬁ‹s.h
>

44 
	~"nßvî.h
"

46 *
	$my_mÆloc
(
size_t
 
size
)

48 *
ªt
;

50 if(!(
ªt
 = 
	`mÆloc
(
size
))) {

51 
	`Ârötf
(
°dîr
, "Out of memory\n");

52 
	`exô
(1);

55  
ªt
;

56 
	}
}

58 
GR_COLOR
 
	$gë_øndom_cﬁour
(
mö_brighäess
)

60 
r
, 
g
, 
b
;

63 
r
 = 
	`RANDRANGE
(0, 255);

64 
g
 = 
	`RANDRANGE
(0, 255);

65 
b
 = 
	`RANDRANGE
(0, 255);

66 } (
r
 + 
g
 + 
b
Ë/ 3 < 
mö_brighäess
);

68 (
	`MWRGB
(
r
, 
g
, 
b
));

69 
	}
}

71 
	$gë_øndom_poöt_⁄_s¸ìn
(
n°©e
 *
°©e
, 
GR_COORD
 *
x
, GR_COORD *
y
,

72 
GR_COLOR
 *
c
)

74 if(
x
Ë*x = 
	`RANDRANGE
(0, 
°©e
->
si
.
cﬁs
 - 1);

75 if(
y
Ë*y = 
	`RANDRANGE
(0, 
°©e
->
si
.
rows
 - 1);

76 if(
c
Ë*¯
	`gë_øndom_cﬁour
(
GRP_MINBRIGHTNESS
);

77 
	}
}

79 
	$nŸ_squ¨e
(
n
)

81 
n
) {

82 if(
n
 & 1) {

83 if(
n
 - 1)  1;

86 
n
 >>= 1;

89 
	}
}

91 
	$make_øndom_squ¨e
(
n°©e
 *
°©e
, 
mö_brighäess
, 
mö_size
,

92 
max_size
, 
√ed_squ¨e
, 
GR_COORD
 *
ªtx
,

93 
GR_COORD
 *
ªty
, 
GR_SIZE
 *
ªtsize
)

95 
x1
, 
x2
, 
y
, 
size
, 
tmp
;

96 
GR_COLOR
 
cﬁour
 = 
	`gë_øndom_cﬁour
(
mö_brighäess
);

98 
	`GrSëGCF‹eground
(
°©e
->
maö_gc
, 
cﬁour
);

101 
x1
 = 
	`RANDRANGE
(0, 
°©e
->
si
.
cﬁs
);

102 
x2
 = 
	`RANDRANGE
(0, 
°©e
->
si
.
cﬁs
);

103 if(
x1
 > 
x2
) {

104 
tmp
 = 
x1
;

105 
x1
 = 
x2
;

106 
x2
 = 
tmp
;

108 
size
 = 
x2
 - 
x1
;

109 } 
size
 < 
mö_size
 || sizê> 
max_size
 ||

110 (
√ed_squ¨e
 && 
	`nŸ_squ¨e
(
size
)));

112 
y
 = 
	`RANDRANGE
(0, 
°©e
->
si
.
rows
 - 
size
 - 1);

114 *
ªtx
 = 
x1
;

115 *
ªty
 = 
y
;

116 *
ªtsize
 = 
size
;

117 
	}
}

119 #ifde‡
HAVE_USLEEP


120 
	$m¶ìp
(
ms
)

122 
	`u¶ìp
(
ms
 * 1000);

123 
	}
}

125 
	$m¶ìp
(
ms
)

127 
time•ec
 
ªq
, 
ªm
;

129 
ªq
.
tv_£c
 = 
ms
 / 1000000;

130 
ªq
.
tv_n£c
 = (
ms
 % 1000000) * 1000000;

132 
	`«no¶ìp
(&
ªq
, &
ªm
) == -1) {

133 if(
î∫o
 =
EINTR
) {

134 
ªq
.
tv_£c
 = 
ªm
.tv_sec;

135 
ªq
.
tv_n£c
 = 
ªm
.tv_nsec;

138 
	`≥º‹
("nanosleep() failed");

142 
	}
}

145 
GR_WINDOW_ID
 
	$ˇ±uª_s¸ìn
(
n°©e
 *
°©e
)

147 
GR_WINDOW_ID
 
pid
;

149 #i‡
CAPTURESCREEN_DELAY


153 
	`m¶ìp
(
CAPTURESCREEN_DELAY
);

156 
pid
 = 
	`GrNewPixm≠
(
°©e
->
si
.
cﬁs
, sèã->si.
rows
, 
NULL
);

157 
	`GrC›yAªa
(
pid
, 
°©e
->
maö_gc
, 0, 0, sèã->
si
.
cﬁs
,

158 
°©e
->
si
.
rows
, 
GR_ROOT_WINDOW_ID
, 0, 0, 0);

160  
pid
;

161 
	}
}

163 
	$ßvî1_öô
(
n°©e
 *
°©e
Ë{
	}
}

165 
	$ßvî1_exposuª
(
n°©e
 *
°©e
)

167 
	`GrCÀ¨Wödow
(
°©e
->
maö_wödow
, 0);

168 
	}
}

170 
	$ßvî1_™im©e
(
n°©e
 *
°©e
Ë{
	}
}

172 
	$ßvî2_öô
(
n°©e
 *
°©e
)

174 
s2°©e
 *
s
 = 
	`my_mÆloc
((s2state));

175 
°©e
->
¥iv
 = 
s
;

176 
s
->
pixñs
 = 
SAVER2_MAXPIXELS
;

177 
°©e
->
™im©e_öãrvÆ
 = 
SAVER2_DELAY
;

178 
	}
}

180 
	$ßvî2_exposuª
(
n°©e
 *
°©e
)

182 
	`GrCÀ¨Wödow
(
°©e
->
maö_wödow
, 0);

183 
	}
}

185 
	$ßvî2_™im©e
(
n°©e
 *
°©e
)

187 
GR_COORD
 
x
, 
y
;

188 
GR_COLOR
 
c
;

189 
pixñs
 = 
SAVER2_PIXELS_PER_FRAME
;

190 
s2°©e
 *
s
 = 
°©e
->
¥iv
;

192 
pixñs
--) {

193 if(!(
s
->
pixñs
--)) {

194 
s
->
pixñs
 = 
SAVER2_MAXPIXELS
;

195 
	`GrCÀ¨Wödow
(
°©e
->
maö_wödow
, 0);

197 
	`gë_øndom_poöt_⁄_s¸ìn
(
°©e
, &
x
, &
y
, &
c
);

198 
	`GrSëGCF‹eground
(
°©e
->
maö_gc
, 
c
);

199 
	`GrPoöt
(
°©e
->
maö_wödow
, sèã->
maö_gc
, 
x
, 
y
);

201 
	}
}

203 
	$ßvî3_öô
(
n°©e
 *
°©e
)

205 
s3°©e
 *
s
 = 
	`my_mÆloc
((s3state));

206 
°©e
->
¥iv
 = 
s
;

207 
s
->
max£gmíts
 = 
SAVER3_MAXSEGMENTS
;

208 
s
->
œ°x
 = 0;

209 
s
->
œ°y
 = 0;

210 
°©e
->
™im©e_öãrvÆ
 = 
SAVER3_DELAY
;

211 
	}
}

213 
	$ßvî3_exposuª
(
n°©e
 *
°©e
)

215 
	`GrCÀ¨Wödow
(
°©e
->
maö_wödow
, 0);

216 
	}
}

218 
	$ßvî3_™im©e
(
n°©e
 *
°©e
)

220 
GR_COORD
 
√wx
, 
√wy
;

221 
GR_COLOR
 
c
;

222 
s3°©e
 *
s
 = 
°©e
->
¥iv
;

223 
pixñs
 = 
SAVER3_SEGMENTS_PER_FRAME
;

225 
pixñs
--) {

226 if(!(
s
->
max£gmíts
--)) {

227 
s
->
max£gmíts
 = 
SAVER3_MAXSEGMENTS
;

228 
	`GrCÀ¨Wödow
(
°©e
->
maö_wödow
, 0);

230 
	`gë_øndom_poöt_⁄_s¸ìn
(
°©e
, &
√wx
, &
√wy
, &
c
);

231 
	`GrSëGCF‹eground
(
°©e
->
maö_gc
, 
c
);

232 
	`GrLöe
(
°©e
->
maö_wödow
, sèã->
maö_gc
, 
s
->
œ°x
, s->
œ°y
,

233 
√wx
, 
√wy
);

234 
s
->
œ°x
 = 
√wx
;

235 
s
->
œ°y
 = 
√wy
;

237 
	}
}

239 
	$ßvî4_öô
(
n°©e
 *
°©e
)

241 
i
;

242 
GR_COORD
 
x
, 
y
;

244 
s4°©e
 *
s
 = 
	`my_mÆloc
((s4state));

245 
°©e
->
¥iv
 = 
s
;

247 
s
->
Àngth
 = 0;

249 
i
 = 0; i < 
SAVER4_NUMWORMS
; i++) {

250 
s
->
tù
 = 0;

251 
	`gë_øndom_poöt_⁄_s¸ìn
(
°©e
, &
x
, &
y
, &
s
->
w‹ms
[
i
].
cﬁour
);

252 
s
->
w‹ms
[
i
].
x
 = x;

253 
s
->
w‹ms
[
i
].
poöts
[0].
x
 = x;

254 
s
->
w‹ms
[
i
].
y
 = y;

255 
s
->
w‹ms
[
i
].
poöts
[0].
y
 = y;

258 
°©e
->
™im©e_öãrvÆ
 = 
SAVER4_DELAY
;

259 
	}
}

261 
	$ßvî4_exposuª
(
n°©e
 *
°©e
)

263 
i
;

264 
s4°©e
 *
s
 = 
°©e
->
¥iv
;

266 
	`GrCÀ¨Wödow
(
°©e
->
maö_wödow
, 0);

268 if(!
s
->
Àngth
) ;

270 
i
 = 0; i < 
SAVER4_NUMWORMS
; i++) {

271 
	`GrSëGCF‹eground
(
°©e
->
maö_gc
, 
s
->
w‹ms
[
i
].
cﬁour
);

272 
	`GrPoöts
(
°©e
->
maö_wödow
, sèã->
maö_gc
, 
s
->
Àngth
,

273 
s
->
w‹ms
[
i
].
poöts
);

275 
	}
}

277 
	$ßvî4_gë_√w_w‹m_posôi⁄
(
n°©e
 *
°©e
, 
w‹m
, 
√wtù
)

279 
s4°©e
 *
s
 = 
°©e
->
¥iv
;

280 
s4w‹m
 *
w
 = &
s
->
w‹ms
[
w‹m
];

282 
w
->
d
 +
	`FRANDRANGE
(-
SAVER4_MAXROTATION
, SAVER4_MAXROTATION);

283 
w
->
x
 +
	`cos
(w->
d
Ë* 
SAVER4_VELOCITY
;

284 
w
->
y
 +
	`sö
(w->
d
Ë* 
SAVER4_VELOCITY
;

285 if(
w
->
x
 < 0Ëw->x = 
°©e
->
si
.
cﬁs
 - 1 + w->x;

286 if(
w
->
x
 >
°©e
->
si
.
cﬁs
) w->x -= state->si.cols;

287 if(
w
->
y
 < 0Ëw->y = 
°©e
->
si
.
rows
 - 1 + w->y;

288 if(
w
->
y
 >
°©e
->
si
.
rows
) w->y -= state->si.rows;

289 
w
->
poöts
[
√wtù
].
x
 = (
GR_COORD
)w->x;

290 
w
->
poöts
[
√wtù
].
y
 = (
GR_COORD
)w->y;

291 
	}
}

293 
	$ßvî4_™im©e
(
n°©e
 *
°©e
)

295 
i
, 
èû
, 
√wtù
;

296 
s4°©e
 *
s
 = 
°©e
->
¥iv
;

298 if(
s
->
Àngth
 =
SAVER4_WORMLENGTH
Ë
èû
 = s->
tù
 + 1;

299 
èû
 = 0;

300 if(
èû
 =
SAVER4_WORMLENGTH
)Åail = 0;

301 
√wtù
 = 
s
->
tù
 + 1;

302 if(
√wtù
 =
SAVER4_WORMLENGTH
)Çewtip = 0;

304 
i
 = 0; i < 
SAVER4_NUMWORMS
; i++) {

305 
	`GrSëGCF‹eground
(
°©e
->
maö_gc
, 
GR_COLOR_BLACK
);

306 
	`GrFûlRe˘
(
°©e
->
maö_wödow
, sèã->
maö_gc
,

307 
s
->
w‹ms
[
i
].
poöts
[
èû
].
x
,

308 
s
->
w‹ms
[
i
].
poöts
[
èû
].
y
,

309 
SAVER4_WORMTHICKNESS
,

310 
SAVER4_WORMTHICKNESS
);

311 
	`ßvî4_gë_√w_w‹m_posôi⁄
(
°©e
, 
i
, 
√wtù
);

312 
	`GrSëGCF‹eground
(
°©e
->
maö_gc
, 
s
->
w‹ms
[
i
].
cﬁour
);

313 
	`GrFûlRe˘
(
°©e
->
maö_wödow
, sèã->
maö_gc
,

314 
s
->
w‹ms
[
i
].
poöts
[
√wtù
].
x
,

315 
s
->
w‹ms
[
i
].
poöts
[
√wtù
].
y
,

316 
SAVER4_WORMTHICKNESS
,

317 
SAVER4_WORMTHICKNESS
);

320 
s
->
tù
 = 
√wtù
;

321 if(
s
->
Àngth
 < 
SAVER4_WORMLENGTH
) s->length++;

322 
	}
}

324 
	$ßvî5_öô
(
n°©e
 *
°©e
)

326 
i
;

328 
s5°©e
 *
s
 = 
	`my_mÆloc
((s5state));

329 
°©e
->
¥iv
 = 
s
;

331 
s
->
num°¨s
 = 0;

333 
i
 = 0; i < 
SAVER5_NUMSTARS
; i++) {

334 
s
->
°¨s
[
i
].
™gÀ
 = 
	`FRANDRANGE
(0, (2 * 
M_PI
));

335 
s
->
°¨s
[
i
].
pos
 = 1;

338 
°©e
->
™im©e_öãrvÆ
 = 
SAVER5_DELAY
;

339 
	}
}

341 
	$ßvî5_døw°¨
(
n°©e
 *
°©e
, 
s5°©e
 *
s
, 
°¨
, 
dñëe
)

343 
›p
, 
adj
;

344 
GR_COORD
 
x
, 
y
;

346 if(
dñëe
Ë
	`GrSëGCF‹eground
(
°©e
->
maö_gc
, 
GR_COLOR_BLACK
);

347 
	`GrSëGCF‹eground
(
°©e
->
maö_gc
, 
GR_COLOR_WHITE
);

349 
›p
 = ()(
	`sö
(
s
->
°¨s
[
°¨
].
™gÀ
Ë* s->°¨s[°¨].
pos
);

350 
adj
 = ()(
	`cos
(
s
->
°¨s
[
°¨
].
™gÀ
Ë* s->°¨s[°¨].
pos
);

352 
x
 = (
°©e
->
si
.
cﬁs
 / 2Ë+ 
adj
;

353 
y
 = (
°©e
->
si
.
rows
 / 2Ë+ 
›p
;

355 if((
x
 < 0Ë|| (
y
 < 0Ë|| (x >
°©e
->
si
.
cﬁs
Ë|| (y >°©e->si.
rows
))

358 
	`GrPoöt
(
°©e
->
maö_wödow
, sèã->
maö_gc
, 
x
, 
y
);

361 
	}
}

363 
	$ßvî5_exposuª
(
n°©e
 *
°©e
)

365 
i
;

366 
s5°©e
 *
s
 = 
°©e
->
¥iv
;

368 
	`GrCÀ¨Wödow
(
°©e
->
maö_wödow
, 0);

370 
i
 = 0; i < 
SAVER5_NUMSTARS
; i++) {

371 
	`ßvî5_døw°¨
(
°©e
, 
s
, 
i
, 0);

373 
	}
}

375 
	$ßvî5_™im©e
(
n°©e
 *
°©e
)

377 
i
;

378 
posôi⁄
, 
sˇÀ
, 
ö¸emít
;

379 
s5°©e
 *
s
 = 
°©e
->
¥iv
;

381 if(
s
->
num°¨s
 < 
SAVER5_NUMSTARS
) {

382 
s
->
num°¨s
 +
SAVER5_STARS_INCREMENT
;

383 if(
s
->
num°¨s
 > 
SAVER5_NUMSTARS
)

384 
s
->
num°¨s
 = 
SAVER5_NUMSTARS
;

387 
i
 = 0; i < 
s
->
num°¨s
; i++) {

388 
	`ßvî5_døw°¨
(
°©e
, 
s
, 
i
, 1);

389 
posôi⁄
 = ()
s
->
°¨s
[
i
].
pos
 /

390 ()(
°©e
->
si
.
cﬁs
 / 2);

391 
sˇÀ
 = 
	`sö
((
posôi⁄
 * 
M_PI_2
Ë+ 
M_PI
 + M_PI_2) + 1.0;

392 
ö¸emít
 = (
sˇÀ
 * 
SAVER5_STARS_ACCEL_RATE
) + 1;

393 
s
->
°¨s
[
i
].
pos
 +(Ë
ö¸emít
;

394 if(
	`ßvî5_døw°¨
(
°©e
, 
s
, 
i
, 0)) {

395 
s
->
°¨s
[
i
].
pos
 = 1;

396 
s
->
°¨s
[
i
].
™gÀ
 = 
	`FRANDRANGE
(0, (2 * 
M_PI
));

397 
	`ßvî5_døw°¨
(
°©e
, 
s
, 
i
, 0);

400 
	}
}

402 
	$ßvî6_öô
(
n°©e
 *
°©e
)

404 
i
, 
n
;

406 
s6°©e
 *
s
 = 
	`my_mÆloc
((s6state));

407 
°©e
->
¥iv
 = 
s
;

409 
s
->
√w_bﬁt_time
 = 0;

411 
i
 = 0; i < 
SAVER6_MAXBOLTS
; i++) {

412 
s
->
bﬁts
[
i
].
duøti⁄
 = 0;

413 
n
 = 0;Ç < 
SAVER6_MAXFORKS
;Ç++) {

414 
s
->
bﬁts
[
i
].
f‹ks
[
n
].
vÆid
 = 0;

418 
°©e
->
™im©e_öãrvÆ
 = 
SAVER6_DELAY
;

419 
	}
}

421 
	$ßvî6_døwf‹k
(
n°©e
 *
°©e
, 
s6°©e
 *
s
, 
bﬁt
, 
f‹k
, 
dñëe
)

423 
i
;

425 if(
dñëe
Ë
	`GrSëGCF‹eground
(
°©e
->
maö_gc
, 
GR_COLOR_BLACK
);

426 
i
 = 0; i < 
SAVER6_THICKNESS
; i++) {

427 if(!
dñëe
) {

428 if((
i
 < 2Ë|| (ò>
SAVER6_THICKNESS
 - 2))

429 
	`GrSëGCF‹eground
(
°©e
->
maö_gc
,

430 
GR_COLOR_CORNFLOWERBLUE
);

431 
	`GrSëGCF‹eground
(
°©e
->
maö_gc
, 
GR_COLOR_WHITE
);

433 
	`GrPﬁy
(
°©e
->
maö_wödow
, sèã->
maö_gc
,

434 
s
->
bﬁts
[
bﬁt
].
f‹ks
[
f‹k
].
vÆid
,

435 
s
->
bﬁts
[
bﬁt
].
f‹ks
[
f‹k
].
vîti˚s
[
i
]);

437 
	}
}

439 
	$ßvî6_døwbﬁt
(
n°©e
 *
°©e
, 
s6°©e
 *
s
, 
bﬁt
, 
dñëe
)

441 
n
;

443 
n
 = 0;Ç < 
SAVER6_MAXFORKS
;Ç++)

444 if(
s
->
bﬁts
[
bﬁt
].
f‹ks
[
n
].
vÆid
)

445 
	`ßvî6_døwf‹k
(
°©e
, 
s
, 
bﬁt
, 
n
, 
dñëe
);

446 
	}
}

448 
	$ßvî6_døwlighäög
(
n°©e
 *
°©e
, 
s6°©e
 *
s
, 
dñëe
)

450 
i
;

452 
i
 = 0; i < 
SAVER6_MAXBOLTS
; i++) {

453 if(
s
->
bﬁts
[
i
].
duøti⁄
) {

454 if(
dñëe
Ë
s
->
bﬁts
[
i
].
duøti⁄
--;

455 
	`ßvî6_døwbﬁt
(
°©e
, 
s
, 
i
, 
dñëe
);

458 
	}
}

460 
	$ßvî6_exposuª
(
n°©e
 *
°©e
)

462 
s6°©e
 *
s
 = 
°©e
->
¥iv
;

464 
	`GrCÀ¨Wödow
(
°©e
->
maö_wödow
, 0);

466 
	`ßvî6_døwlighäög
(
°©e
, 
s
, 0);

467 
	}
}

469 
	$ßvî6_£tvîti˚s
(
s6°©e
 *
s
, 
bﬁt
, 
f‹k
, 
vît
, 
GR_COORD
 
x
,

470 
GR_COORD
 
y
)

472 
i
;

474 
i
 = 0; i < 
SAVER6_THICKNESS
; i++) {

475 
s
->
bﬁts
[
bﬁt
].
f‹ks
[
f‹k
].
vîti˚s
[
i
][
vît
].
x
 = x + i;

476 
s
->
bﬁts
[
bﬁt
].
f‹ks
[
f‹k
].
vîti˚s
[
i
][
vît
].
y
 = y;

478 
	}
}

480 
	$ßvî6_≥πurb
(
n°©e
 *
°©e
, 
GR_COORD
 *
x
, GR_COORD *
y
, 
max≥πurb
)

482 *
x
 +()
	`FRANDRANGE
(0, (
max≥πurb
 - 1.0)) -

483 ()(
max≥πurb
 / 2.0);

484 if(*
x
 < 0) *x = 0;

485 if(*
x
 > (
°©e
->
si
.
cﬁs
 - 1)) *x = state->si.cols - 1;

487 *
y
 +()
	`FRANDRANGE
(0, (
max≥πurb
 - 1.0)) -

488 ()(
max≥πurb
 / 2.0);

489 if(*
y
 < 0) *y = 0;

490 if(*
y
 > (
°©e
->
si
.
cﬁs
 - 1)) *y = state->si.cols - 1;

491 
	}
}

493 
	$ßvî6_makef‹k
(
n°©e
 *
°©e
, 
s6°©e
 *
s
, 
bﬁt
, 
f‹k
, 
GR_COORD
 
x
,

494 
GR_COORD
 
y
)

496 
i
, 
vîti˚s
;

497 
Àngth
, 
ö¸
, 
pos
, 
™gÀ
, 
sˇÀ
;

498 
GR_COORD
 
ex
, 
ey
, 
nx
, 
ny
, 
xÀn
, 
yÀn
;

500 
	`ßvî6_£tvîti˚s
(
s
, 
bﬁt
, 
f‹k
, 0, 
x
 , 
y
);

502 
sˇÀ
 = ()(
°©e
->
si
.
rows
 - 
y
) / ()state->si.rows;

504 
vîti˚s
 = ()(
sˇÀ
 * ()
	`RANDRANGE
(
SAVER6_MINFULLVERTICES
,

505 
SAVER6_MAXVERTICES
));

507 if(
vîti˚s
 < 
SAVER6_MINVERTICES
) vertices = SAVER6_MINVERTICES;

509 
s
->
bﬁts
[
bﬁt
].
f‹ks
[
f‹k
].
vÆid
 = 
vîti˚s
;

511 
ey
 = 
°©e
->
si
.
rows
 - 
SAVER6_MAXEND_Y
 +

512 ()
	`FRANDRANGE
(0, 
SAVER6_MAXEND_Y
 - 1.0);

513 if((
ey
 - 
y
Ë<0Ëey = 
SAVER6_MINDROP
;

514 if(
ey
 >(
°©e
->
si
.
rows
 - 1))Éy = state->si.rows - 1;

516 if(!
f‹k
) {

517 
ex
 = 
x
 + 
	`FRANDRANGE
(0, ((
°©e
->
si
.
cﬁs
 - 1.0) / 2.0));

519 
ex
 = 
x
 + (
	`FRANDRANGE
(0, (
ey
 - 
y
)) / 2.0) - ((ey - y) / 2.0);

522 if(
ex
 >
°©e
->
si
.
cﬁs
)Éx = state->si.cols - 1;

523 if(
ex
 < 0)Éx = 0;

525 
xÀn
 = 
	`MAX
(
x
, 
ex
Ë- 
	`MIN
(x,Éx);

526 
yÀn
 = 
	`MAX
(
y
, 
ey
Ë- 
	`MIN
(y,Éy);

528 
Àngth
 = 
	`sqπ
((()(
xÀn
 * xÀnË+ ()(
yÀn
 * ylen)));

529 
ö¸
 = 
Àngth
 / (
vîti˚s
 - 1);

530 
™gÀ
 = 
	`©™
((()
xÀn
 / ()
yÀn
));

532 
i
 = 
vîti˚s
 - 1; i ; i--) {

533 
pos
 = (
ö¸
 * (
i
 - 1)Ë+ (
	`FRANDRANGE
(0, 
SAVER6_MAXZIGZAG
) -

534 (()
SAVER6_MAXZIGZAG
 / 2.0));

535 if(
pos
 < 0)Öos = 0;

536 if(
pos
 > 
Àngth
)Öos =Üength;

537 
nx
 = 
x
 - (
pos
 * 
	`sö
(
™gÀ
));

538 
ny
 = 
y
 + 
pos
 * 
	`cos
(
™gÀ
);

539 
	`ßvî6_≥πurb
(
°©e
, &
nx
, &
ny
, 
SAVER6_MAXZIGZAG
);

540 
	`ßvî6_£tvîti˚s
(
s
, 
bﬁt
, 
f‹k
, 
i
, 
nx
 , 
ny
);

542 
	}
}

544 
	$ßvî6_makef‹ks
(
n°©e
 *
°©e
, 
s6°©e
 *
s
, 
bﬁt
, 
f‹k
,

545 *
vît
, *
√xtf‹k
)

547 
thisvît
 = 1, 
thisf‹k
;

548 
¥ob
;

550 if(*
vît
 =(
s
->
bﬁts
[
bﬁt
].
f‹ks
[
f‹k
].
vÆid
 - 1))  0;

551 if(*
√xtf‹k
 =
SAVER6_MAXFORKS
)  0;

553 
¥ob
 = ()
SAVER6_FORK_PROBABILITY
 * (()*
vît
 /

554 ()
s
->
bﬁts
[
bﬁt
].
f‹ks
[
f‹k
].
vÆid
) *

555 (1.0 / (()
f‹k
 + 1.0));

556 if(()
	`FRANDRANGE
(0, 1Ë< 
¥ob
) {

557 
thisf‹k
 = *
√xtf‹k
;

558 
	`ßvî6_makef‹k
(
°©e
, 
s
, 
bﬁt
, 
thisf‹k
,

559 
s
->
bﬁts
[
bﬁt
].
f‹ks
[
f‹k
].
vîti˚s
[0][*
vît
].
x
,

560 
s
->
bﬁts
[
bﬁt
].
f‹ks
[
f‹k
].
vîti˚s
[0][*
vît
].
y
);

561 *
√xtf‹k
 += 1;

562 
	`ßvî6_makef‹ks
(
°©e
, 
s
, 
bﬁt
, 
thisf‹k
, &
thisvît
,

563 
√xtf‹k
));

566 *
vît
 += 1;

569 
	}
}

571 
	$ßvî6_makebﬁt
(
n°©e
 *
°©e
, 
s6°©e
 *
s
, 
bﬁt
)

573 
GR_COORD
 
x
;

574 
vît
 = 1, 
√xtf‹k
 = 1, 
n
;

576 
n
 = 0;Ç < 
SAVER6_MAXFORKS
;Ç++)

577 
s
->
bﬁts
[
bﬁt
].
f‹ks
[
n
].
vÆid
 = 0;

579 
x
 = 
	`RANDRANGE
(0, 
°©e
->
si
.
cﬁs
 - 1);

581 
	`ßvî6_makef‹k
(
°©e
, 
s
, 
bﬁt
, 0, 
x
, 0);

583 
	`ßvî6_makef‹ks
(
°©e
, 
s
, 
bﬁt
, 0, &
vît
, &
√xtf‹k
));

584 
	}
}

586 
	$ßvî6_√wbﬁt
(
n°©e
 *
°©e
, 
s6°©e
 *
s
)

588 
i
;

590 
i
 = 0; i < 
SAVER6_MAXBOLTS
; i++) {

591 if(!
s
->
bﬁts
[
i
].
duøti⁄
) {

592 
	`ßvî6_makebﬁt
(
°©e
, 
s
, 
i
);

593 
s
->
bﬁts
[
i
].
duøti⁄
 = 
	`RANDRANGE
(
SAVER6_MINDURATION
,

594 
SAVER6_MAXDURATION
);

595 
	`ßvî6_døwbﬁt
(
°©e
, 
s
, 
i
, 0);

600 
s
->
√w_bﬁt_time
 = 
	`RANDRANGE
(1, 
SAVER6_MAXNEWBOLTTIME
);

601 
	}
}

603 
	$ßvî6_≥πurb_bﬁt
(
n°©e
 *
°©e
, 
s6°©e
 *
s
, 
bﬁt
, 
f‹k
)

605 
m
, 
o
;

606 
GR_COORD
 
x
, 
ox
, 
y
, 
oy
;

608 
m
 = 1; m < 
s
->
bﬁts
[
bﬁt
].
f‹ks
[
f‹k
].
vÆid
; m++) {

609 
ox
 = 
x
 = 
s
->
bﬁts
[
bﬁt
].
f‹ks
[
f‹k
].
vîti˚s
[0][
m
].x;

610 
oy
 = 
y
 = 
s
->
bﬁts
[
bﬁt
].
f‹ks
[
f‹k
].
vîti˚s
[0][
m
].y;

611 
	`ßvî6_≥πurb
(
°©e
, &
x
, &
y
, 
SAVER6_MAXZIGZAG
);

612 
	`ßvî6_£tvîti˚s
(
s
, 
bﬁt
, 
f‹k
, 
m
, 
x
, 
y
);

613 
o
 = 
f‹k
 + 1; o < 
SAVER6_MAXFORKS
; o++) {

614 if((
s
->
bﬁts
[
bﬁt
].
f‹ks
[
o
].
vîti˚s
[0][0].
x
 =
ox
) &&

615 (
s
->
bﬁts
[
bﬁt
].
f‹ks
[
o
].
vîti˚s
[0][0].
y


616 =
oy
)) {

617 
	`ßvî6_£tvîti˚s
(
s
, 
bﬁt
, 
o
, 0, 
x
, 
y
);

621 
	}
}

623 
	$ßvî6_≥πurb_lighäög
(
n°©e
 *
°©e
, 
s6°©e
 *
s
)

625 
i
, 
n
;

627 
i
 = 0; i < 
SAVER6_MAXBOLTS
; i++) {

628 if(!
s
->
bﬁts
[
i
].
duøti⁄
) ;

629 
n
 = 0;Ç < 
SAVER6_MAXFORKS
;Ç++) {

630 if(!
s
->
bﬁts
[
i
].
f‹ks
[
n
].
vÆid
) ;

631 
	`ßvî6_≥πurb_bﬁt
(
°©e
, 
s
, 
i
, 
n
);

634 
	}
}

636 
	$ßvî6_™im©e
(
n°©e
 *
°©e
)

638 
s6°©e
 *
s
 = 
°©e
->
¥iv
;

640 
	`ßvî6_døwlighäög
(
°©e
, 
s
, 1);

641 
	`ßvî6_≥πurb_lighäög
(
°©e
, 
s
);

642 
	`ßvî6_døwlighäög
(
°©e
, 
s
, 0);

644 if(!
s
->
√w_bﬁt_time
--Ë
	`ßvî6_√wbﬁt
(
°©e
, s);

645 
	}
}

649 
	$ßvî7_døw°¨
(
n°©e
 *
°©e
, 
s7°©e
 *
s
)

651 
	`GrSëGCF‹eground
(
°©e
->
maö_gc
, 
SAVER7_STARCOLOUR
);

652 
	`GrFûlEŒù£
(
°©e
->
maö_wödow
, sèã->
maö_gc
, 
s
->
°¨x
, s->
°¨y
,

653 
SAVER7_STARRADIUS
, SAVER7_STARRADIUS);

654 
	}
}

656 
	$ßvî7_døw∂™ë
(
n°©e
 *
°©e
, 
s7°©e
 *
s
, 
∂™ë
, 
îa£
)

658 if(
îa£
Ë
	`GrSëGCF‹eground
(
°©e
->
maö_gc
, 
GR_COLOR_BLACK
);

659 
	`GrSëGCF‹eground
(
°©e
->
maö_gc
, 
s
->
∂™ës
[
∂™ë
].
cﬁour
);

661 if((
s
->
∂™ës
[
∂™ë
].
ax
 < 0Ë|| (s->∂™ës[∂™ë].
ay
 < 0) ||

662 (
s
->
∂™ës
[
∂™ë
].
ax
 >
°©e
->
si
.
cﬁs
) ||

663 (
s
->
∂™ës
[
∂™ë
].
ay
 >
°©e
->
si
.
rows
)) {

667 
	`GrFûlEŒù£
(
°©e
->
maö_wödow
, sèã->
maö_gc
, 
s
->
∂™ës
[
∂™ë
].
ax
,

668 
s
->
∂™ës
[
∂™ë
].
ay
,

669 
SAVER7_PLANETRADIUS
, SAVER7_PLANETRADIUS);

670 
	}
}

672 
	$ßvî7_ˇlc_∂™ë_posôi⁄
(
n°©e
 *
°©e
, 
s7°©e
 *
s
, 
∂™ë
)

674 if(
s
->
∂™ës
[
∂™ë
].
r
 > -
SAVER7_ALMOSTDIST
) {

675 
s
->
∂™ës
[
∂™ë
].
ax
 = ()((Ë
°©e
->
si
.
cﬁs
 *

676 (0.5 + (
s
->
∂™ës
[
∂™ë
].
x
 / (s->∂™ës[∂™ë].
r
 +

677 
SAVER7_DIST
))));

678 
s
->
∂™ës
[
∂™ë
].
ay
 = ()((Ë
°©e
->
si
.
rows
 *

679 (0.5 + (
s
->
∂™ës
[
∂™ë
].
y
 / (s->∂™ës[∂™ë].
r
 +

680 
SAVER7_DIST
))));

682 
s
->
∂™ës
[
∂™ë
].
ax
 = -1;

683 
s
->
∂™ës
[
∂™ë
].
ay
 = -1;

685 
	}
}

687 
	$ßvî7_öô
(
n°©e
 *
°©e
)

689 
i
;

690 
s7°©e
 *
s
 = 
	`my_mÆloc
((s7state));

691 
°©e
->
¥iv
 = 
s
;

693 
s
->
°¨x
 = 
°©e
->
si
.
cﬁs
 / 2;

694 
s
->
°¨y
 = 
°©e
->
si
.
rows
 / 2;

696 
i
 = 0; i < 
SAVER7_PLANETS
; i++) {

697 
s
->
∂™ës
[
i
].
r
 = 
	`FRANDRANGE
(
SAVER7_MIN_STARTDIM
,

698 
SAVER7_MAX_STARTDIM
);

699 
s
->
∂™ës
[
i
].
x
 = 
	`FRANDRANGE
(
SAVER7_MIN_STARTDIM
,

700 
SAVER7_MAX_STARTDIM
);

701 
s
->
∂™ës
[
i
].
y
 = 
	`FRANDRANGE
(
SAVER7_MIN_STARTDIM
,

702 
SAVER7_MAX_STARTDIM
);

703 
s
->
∂™ës
[
i
].
rv
 = 
	`FRANDRANGE
(
SAVER7_MIN_STARTVEL
,

704 
SAVER7_MAX_STARTVEL
);

705 
s
->
∂™ës
[
i
].
xv
 = 
	`FRANDRANGE
(
SAVER7_MIN_STARTVEL
,

706 
SAVER7_MAX_STARTVEL
);

707 
s
->
∂™ës
[
i
].
yv
 = 
	`FRANDRANGE
(
SAVER7_MIN_STARTVEL
,

708 
SAVER7_MAX_STARTVEL
);

709 
s
->
∂™ës
[
i
].
cﬁour
 = 
	`RANDRANGE
(0, 
°©e
->
si
.
ncﬁ‹s
 - 1);

710 
	`ßvî7_ˇlc_∂™ë_posôi⁄
(
°©e
, 
s
, 
i
);

711 
	`ßvî7_døw∂™ë
(
°©e
, 
s
, 
i
, 0);

714 
	`ßvî7_døw°¨
(
°©e
, 
s
);

716 
°©e
->
™im©e_öãrvÆ
 = 
SAVER7_DELAY
;

717 
	}
}

719 
	$ßvî7_exposuª
(
n°©e
 *
°©e
)

721 
i
;

722 
s7°©e
 *
s
 = 
°©e
->
¥iv
;

724 
	`GrCÀ¨Wödow
(
°©e
->
maö_wödow
, 0);

726 
i
 = 0; i < 
SAVER7_PLANETS
; i++)

727 
	`ßvî7_døw∂™ë
(
°©e
, 
s
, 
i
, 0);

729 
	`ßvî7_døw°¨
(
°©e
, 
s
);

730 
	}
}

732 
	$ßvî7_movïœ√t
(
n°©e
 *
°©e
, 
s7°©e
 *
s
, 
∂™ë
)

734 
di°
;

735 
ac˚l
;

737 
di°
 = (
s
->
∂™ës
[
∂™ë
].
x
 * s->planets[planet].x) +

738 (
s
->
∂™ës
[
∂™ë
].
y
 * s->planets[planet].y) +

739 (
s
->
∂™ës
[
∂™ë
].
r
 * s->planets[planet].r);

740 if(
di°
 < 
SAVER7_COLLIDE
) dist = SAVER7_COLLIDE;

741 
di°
 = 
	`sqπ
(dist);

742 
di°
 = dist * dist * dist;

744 #ifde‡
SAVER7_USE_DAMPING


745 
ac˚l
 = 
s
->
∂™ës
[
∂™ë
].
r
 * 
SAVER7_G
 / 
di°
;

746 if(
ac˚l
 > 
SAVER7_MAX_ACCEL
)áccel = SAVER7_MAX_ACCEL;

747 if(
ac˚l
 < -
SAVER7_MAX_ACCEL
)áccel = -SAVER7_MAX_ACCEL;

748 
s
->
∂™ës
[
∂™ë
].
rv
 = (s->∂™ës[∂™ë].rv + 
ac˚l
) *

749 
SAVER7_DAMPING_FACTOR
;

750 
s
->
∂™ës
[
∂™ë
].
r
 +s->∂™ës[∂™ë].
rv
;

751 
ac˚l
 = 
s
->
∂™ës
[
∂™ë
].
x
 * 
SAVER7_G
 / 
di°
;

752 if(
ac˚l
 > 
SAVER7_MAX_ACCEL
)áccel = SAVER7_MAX_ACCEL;

753 if(
ac˚l
 < -
SAVER7_MAX_ACCEL
)áccel = -SAVER7_MAX_ACCEL;

754 
s
->
∂™ës
[
∂™ë
].
xv
 = (s->∂™ës[∂™ë].xv + 
ac˚l
) *

755 
SAVER7_DAMPING_FACTOR
;

756 
s
->
∂™ës
[
∂™ë
].
x
 +s->∂™ës[∂™ë].
xv
;

757 
ac˚l
 = 
s
->
∂™ës
[
∂™ë
].
y
 * 
SAVER7_G
 / 
di°
;

758 if(
ac˚l
 > 
SAVER7_MAX_ACCEL
)áccel = SAVER7_MAX_ACCEL;

759 if(
ac˚l
 < -
SAVER7_MAX_ACCEL
)áccel = -SAVER7_MAX_ACCEL;

760 
s
->
∂™ës
[
∂™ë
].
yv
 = (s->∂™ës[∂™ë].yv + 
ac˚l
) *

761 
SAVER7_DAMPING_FACTOR
;

762 
s
->
∂™ës
[
∂™ë
].
y
 +s->∂™ës[∂™ë].
yv
;

764 
ac˚l
 = 
s
->
∂™ës
[
∂™ë
].
r
 * 
SAVER7_G
 / 
di°
;

765 
s
->
∂™ës
[
∂™ë
].
rv
 +
ac˚l
;

766 
s
->
∂™ës
[
∂™ë
].
r
 +s->∂™ës[∂™ë].
rv
;

767 
ac˚l
 = 
s
->
∂™ës
[
∂™ë
].
x
 * 
SAVER7_G
 / 
di°
;

768 
s
->
∂™ës
[
∂™ë
].
xv
 +
ac˚l
;

769 
s
->
∂™ës
[
∂™ë
].
x
 +s->∂™ës[∂™ë].
xv
;

770 
ac˚l
 = 
s
->
∂™ës
[
∂™ë
].
y
 * 
SAVER7_G
 / 
di°
;

771 
s
->
∂™ës
[
∂™ë
].
yv
 +
ac˚l
;

772 
s
->
∂™ës
[
∂™ë
].
y
 +s->∂™ës[∂™ë].
yv
;

774 
	}
}

776 
	$ßvî7_™im©e
(
n°©e
 *
°©e
)

778 
i
;

779 
s7°©e
 *
s
 = 
°©e
->
¥iv
;

781 
i
 = 0; i < 
SAVER7_PLANETS
; i++) {

782 
	`ßvî7_movïœ√t
(
°©e
, 
s
, 
i
);

783 
	`ßvî7_døw∂™ë
(
°©e
, 
s
, 
i
, 1);

784 
	`ßvî7_ˇlc_∂™ë_posôi⁄
(
°©e
, 
s
, 
i
);

785 
	`ßvî7_døw∂™ë
(
°©e
, 
s
, 
i
, 0);

787 
	`ßvî7_døw°¨
(
°©e
, 
s
);

788 
	}
}

793 
	$ßvî8_öô
(
n°©e
 *
°©e
)

795 
ªd
 = 0, 
gªí
 = 0, 
blue
 = 0, 
°ï
, 
i
 = 0;

797 
s8°©e
 *
s
 = 
	`my_mÆloc
((s8state));

798 
°©e
->
¥iv
 = 
s
;

800 
s
->
cuºít_löe
 = 0;

802 
°ï
 = 512 / 
SAVER8_NUMCOLOURS
;

804 
gªí
 = 255; gªí > 0; gªí -
°ï
, 
blue
 +°ï, 
i
++)

805 
	`GrFödCﬁ‹
(
	`GR_RGB
(0, 
gªí
, 
blue
), &
s
->
cﬁours
[
i
]);

806 
blue
 = 255; bluê> 0; bluê-
°ï
, 
ªd
 +°ï, 
i
++)

807 
	`GrFödCﬁ‹
(
	`GR_RGB
(
ªd
, 0, 
blue
), &
s
->
cﬁours
[
i
]);

809 
s
->
rows
 = 
	`my_mÆloc
((
GR_PIXELVAL
Ë* 
°©e
->
si
.
cﬁs
 *

810 
SAVER8_LINES_PER_FRAME
);

812 
°©e
->
™im©e_öãrvÆ
 = 
SAVER8_DELAY1
;

813 
	}
}

815 
	$ßvî8_døw∑âîn
(
n°©e
 *
°©e
)

817 
x
, 
y
, 
cﬁ
, 
√wÁ˘‹
, 
löes
 = 
SAVER8_LINES_PER_FRAME
;

818 
s8°©e
 *
s
 = 
°©e
->
¥iv
;

819 
GR_PIXELVAL
 *
p
 = 
s
->
rows
;

821 if(!
s
->
cuºít_löe
) {

822 
°©e
->
™im©e_öãrvÆ
 = 
SAVER8_DELAY1
;

824 
√wÁ˘‹
 = 
	`RANDRANGE
(
SAVER8_MINFACTOR
,

825 
SAVER8_MAXFACTOR
);

826 } 
√wÁ˘‹
 =
s
->
Á˘‹
);

827 
s
->
Á˘‹
 = 
√wÁ˘‹
;

830 
y
 = 
s
->
cuºít_löe
;

831 
s
->
cuºít_löe
 < 
°©e
->
si
.
rows
) {

832 if(!--
löes
) ;

833 
x
 = 0; x < 
°©e
->
si
.
cﬁs
; x++) {

834 
cﬁ
 = ((((
x
 * xË+ (
s
->
cuºít_löe
 * s->current_line))

835 / 
s
->
Á˘‹
Ë% 
SAVER8_NUMCOLOURS
);

836 *
p
++ = 
s
->
cﬁours
[
cﬁ
];

838 
s
->
cuºít_löe
++;

841 
	`GrAªa
(
°©e
->
maö_wödow
, sèã->
maö_gc
, 0, 
y
, sèã->
si
.
cﬁs
,

842 
s
->
cuºít_löe
 - 
y
, s->
rows
, 
MWPF_PIXELVAL
);

844 if(
löes
) {

845 
°©e
->
™im©e_öãrvÆ
 = 
SAVER8_DELAY2
;

846 
s
->
cuºít_löe
 = 0;

848 
	}
}

850 
	$ßvî8_exposuª
(
n°©e
 *
°©e
)

852 
s8°©e
 *
s
 = 
°©e
->
¥iv
;

854 
	`GrCÀ¨Wödow
(
°©e
->
maö_wödow
, 0);

855 
s
->
cuºít_löe
 = 0;

856 
	`ßvî8_døw∑âîn
(
°©e
);

857 
	}
}

859 
	$ßvî8_™im©e
(
n°©e
 *
°©e
)

861 
	`ßvî8_døw∑âîn
(
°©e
);

862 
	}
}

866 
	$ßvî9_öô
(
n°©e
 *
°©e
)

868 
s9°©e
 *
s
 = 
	`my_mÆloc
((s9state));

869 
°©e
->
¥iv
 = 
s
;

871 
s
->
pid
 = 
	`ˇ±uª_s¸ìn
(
°©e
);

873 
	`GrSëGCF‹eground
(
°©e
->
maö_gc
, 
GR_COLOR_BLACK
);

874 
	`GrLöe
(
s
->
pid
, 
°©e
->
maö_gc
, 0, 0, sèã->
si
.
cﬁs
, 0);

876 
°©e
->
™im©e_öãrvÆ
 = 
SAVER9_DELAY
;

877 
	}
}

879 
	$ßvî9_exposuª
(
n°©e
 *
°©e
)

881 
s9°©e
 *
s
 = 
°©e
->
¥iv
;

883 
	`GrC›yAªa
(
°©e
->
maö_wödow
, sèã->
maö_gc
, 0, 0, sèã->
si
.
cﬁs
,

884 
°©e
->
si
.
rows
, 
s
->
pid
, 0, 0, 0);

885 
	}
}

887 
	$ßvî9_™im©e
(
n°©e
 *
°©e
)

889 
GR_COORD
 
x
, 
y
;

890 
GR_SIZE
 
w
, 
h
;

891 
s9°©e
 *
s
 = 
°©e
->
¥iv
;

893 
x
 = 
	`RANDRANGE
(0, 
°©e
->
si
.
cﬁs
 - 2);

894 
y
 = 
	`RANDRANGE
(0, 
°©e
->
si
.
rows
 - 2);

895 
w
 = 
	`RANDRANGE
(1, 
°©e
->
si
.
cﬁs
 - 
x
);

896 
h
 = 
	`RANDRANGE
(1, 
°©e
->
si
.
rows
 - 
y
);

898 
	`GrC›yAªa
(
s
->
pid
, 
°©e
->
maö_gc
, 
x
, 
y
 + 1, 
w
, 
h
, s->pid, x, y, 0);

899 
	`GrC›yAªa
(
°©e
->
maö_wödow
, sèã->
maö_gc
, 
x
, 
y
 + 1, 
w
, 
h
, 
s
->
pid
,

900 
x
, 
y
, 0);

901 
	}
}

905 
	$ßvî10_öô
(
n°©e
 *
°©e
)

907 
s10°©e
 *
s
 = 
	`my_mÆloc
((s10state));

908 
°©e
->
¥iv
 = 
s
;

910 
s
->
s¸ìn
 = 
	`ˇ±uª_s¸ìn
(
°©e
);

911 
s
->
•Ÿ
 = 
	`GrNewPixm≠
(
SAVER10_SPOTDIA
 + 
SAVER10_OVERSIZE
 * 2,

912 
SAVER10_SPOTDIA
 + 
SAVER10_OVERSIZE
 * 2, 
NULL
);

914 
s
->
x
 = 
	`RANDRANGE
((
SAVER10_SPOTDIA
 / 2Ë+ 
SAVER10_OVERSIZE
,

915 
°©e
->
si
.
cﬁs
 - 1 - (
SAVER10_SPOTDIA
 / 2) -

916 
SAVER10_OVERSIZE
);

917 
s
->
y
 = 
	`RANDRANGE
((
SAVER10_SPOTDIA
 / 2Ë+ 
SAVER10_OVERSIZE
,

918 
°©e
->
si
.
rows
 - 1 - (
SAVER10_SPOTDIA
 / 2) -

919 
SAVER10_OVERSIZE
);

920 
s
->
dúe˘i⁄
 = 
	`FRANDRANGE
(0, 2 * 
PI
) - PI;

922 
°©e
->
™im©e_öãrvÆ
 = 
SAVER10_DELAY
;

923 
	}
}

925 
	$ßvî10_exposuª
(
n°©e
 *
°©e
)

927 
	`GrCÀ¨Wödow
(
°©e
->
maö_wödow
, 0);

928 
	}
}

930 
	$ßvî10_™im©e
(
n°©e
 *
°©e
)

932 
i
, 
x
, 
y
, 
w
, 
xx
, 
yy
, 
ªåy
;

933 
s10°©e
 *
s
 = 
°©e
->
¥iv
;

934 
d
, 
√wx
, 
√wy
;

937 
√wx
 = 
s
->
x
 + 
	`cos
(s->
dúe˘i⁄
Ë* 
SAVER10_VELOCITY
;

938 
√wy
 = 
s
->
y
 + 
	`sö
(s->
dúe˘i⁄
Ë* 
SAVER10_VELOCITY
;

939 if((
√wx
 < (
SAVER10_SPOTDIA
 / 2Ë+ 
SAVER10_OVERSIZE
) ||

940 (
√wx
 > 
°©e
->
si
.
cﬁs
 - (
SAVER10_SPOTDIA
 / 2)

941 - 
SAVER10_OVERSIZE
) ||

942 (
√wy
 < (
SAVER10_SPOTDIA
 / 2) + 3) ||

943 (
√wy
 > 
°©e
->
si
.
rows
 - (
SAVER10_SPOTDIA
 / 2)

944 - 
SAVER10_OVERSIZE
)) {

945 
s
->
dúe˘i⁄
 = 
	`FRANDRANGE
(0, 2 * 
PI
);

946 
ªåy
 = 1;

947 } 
ªåy
 = 0;

948 } 
ªåy
);

950 
s
->
x
 = 
√wx
;

951 
s
->
y
 = 
√wy
;

953 
y
 = 
s
->y - (
SAVER10_SPOTDIA
 / 2);

954 
yy
 = 
SAVER10_OVERSIZE
;

955 
i
 = 0; i < 
SAVER10_SPOTDIA
; i++) {

956 
d
 = 
	`sö
(
	`acos
((()
i
/(()
SAVER10_SPOTDIA
 / 2.0)) - 1))

957 * ()
SAVER10_SPOTDIA
 / 2.0;

958 
w
 = (Ë2 * 
d
;

959 
x
 = (Ë
s
->x - 
d
;

960 
xx
 = (Ë(
SAVER10_SPOTDIA
 / 2Ë- 
d
 + 
SAVER10_OVERSIZE
;

961 if(!
w
) ;

962 
	`GrC›yAªa
(
s
->
•Ÿ
, 
°©e
->
maö_gc
, 
xx
, 
yy
, 
w
, 1, s->
s¸ìn
,

963 
x
, 
y
, 0);

964 
y
++;

965 
yy
++;

968 
x
 = 
s
->x - (
SAVER10_SPOTDIA
 / 2Ë- 
SAVER10_OVERSIZE
;

969 
y
 = 
s
->y - (
SAVER10_SPOTDIA
 / 2Ë- 
SAVER10_OVERSIZE
;

970 if(
x
 < 0) x = 0;

971 if(
y
 < 0) y = 0;

973 
	`GrC›yAªa
(
°©e
->
maö_wödow
, sèã->
maö_gc
, 
x
, 
y
, 
SAVER10_SPOTDIA
 +

974 2 * 
SAVER10_OVERSIZE
, 
SAVER10_SPOTDIA
 +

975 2 * 
SAVER10_OVERSIZE
, 
s
->
•Ÿ
, 0, 0, 0);

976 
	}
}

978 
	$ßvî11_öô
(
n°©e
 *
°©e
)

980 
s11°©e
 *
s
 = 
	`my_mÆloc
((s11state));

981 
°©e
->
¥iv
 = 
s
;

983 
°©e
->
™im©e_öãrvÆ
 = 
SAVER11_DELAY
;

984 
	}
}

986 
	$ßvî11_exposuª
(
n°©e
 *
°©e
)

988 
s11°©e
 *
s
 = 
°©e
->
¥iv
;

990 
	`GrCÀ¨Wödow
(
°©e
->
maö_wödow
, 0);

992 
	`make_øndom_squ¨e
(
°©e
, 
SAVER11_MIN_BRIGHTNESS
, 
SAVER11_MIN_SIZE
,

993 
SAVER11_MAX_SIZE
, 0, &
s
->
x
, &s->
y
, &s->
size
);

994 
	}
}

996 
	$ßvî11_™im©e
(
n°©e
 *
°©e
)

998 
s11°©e
 *
s
 = 
°©e
->
¥iv
;

1000 
	`make_øndom_squ¨e
(
°©e
, 
SAVER11_MIN_BRIGHTNESS
, 
SAVER11_MIN_SIZE
,

1001 
SAVER11_MAX_SIZE
, 0, &
s
->
x
, &s->
y
, &s->
size
);

1003 
	`GrFûlRe˘
(
°©e
->
maö_wödow
, sèã->
maö_gc
, 
s
->
x
, s->
y
, s->
size
,

1004 
s
->
size
);

1005 
	}
}

1007 
	$ßvî12_√w_sh≠e
(
n°©e
 *
°©e
)

1009 
s12°©e
 *
s
 = 
°©e
->
¥iv
;

1011 
	`make_øndom_squ¨e
(
°©e
, 
SAVER12_MIN_BRIGHTNESS
, 
SAVER12_MIN_SIZE
,

1012 
SAVER12_MAX_SIZE
, 1, &
s
->
x
, &s->
y
, &s->
size
);

1014 
s
->
t
 = 0;

1015 
s
->
kt
 = 
	`RANDRANGE
(0, s->
size
);

1016 
	}
}

1018 
	$ßvî12_öô
(
n°©e
 *
°©e
)

1020 
s12°©e
 *
s
 = 
	`my_mÆloc
((s12state));

1021 
°©e
->
¥iv
 = 
s
;

1023 
	`ßvî12_√w_sh≠e
(
°©e
);

1025 
°©e
->
™im©e_öãrvÆ
 = 
SAVER12_DELAY
;

1026 
	}
}

1028 
	$ßvî12_exposuª
(
n°©e
 *
°©e
)

1030 
	`GrCÀ¨Wödow
(
°©e
->
maö_wödow
, 0);

1032 
	`ßvî12_√w_sh≠e
(
°©e
);

1033 
	}
}

1035 
	$ßvî12_™im©e
(
n°©e
 *
°©e
)

1037 
x1
, 
y1
, 
x2
, 
y2
;

1038 
s12°©e
 *
s
 = 
°©e
->
¥iv
;

1040 if(
s
->
t
 >s->
size
Ë
	`ßvî12_√w_sh≠e
(
°©e
);

1042 
x1
 = 0; x1 < 
s
->
size
; x1++) {

1043 
y1
 = (
x1
 ^ ((
s
->
t
 + s->
kt
Ë% s->
size
)) % s->size;

1044 
x2
 = (
x1
 % 
s
->
size
Ë+ s->
x
;

1045 
y2
 = 
y1
 + 
s
->
y
;

1046 
	`GrPoöt
(
°©e
->
maö_wödow
, sèã->
maö_gc
, 
x2
, 
y2
);

1049 
s
->
t
++;

1050 
	}
}

1054 
	$ßvî13_öô
(
n°©e
 *
°©e
)

1056 
s13°©e
 *
s
 = 
	`my_mÆloc
((s13state));

1057 
°©e
->
¥iv
 = 
s
;

1059 
s
->
s¸ìn
 = 
	`my_mÆloc
((
GR_PIXELVAL
Ë* 
°©e
->
si
.
rows
 *

1060 
°©e
->
si
.
cﬁs
);

1061 
s
->
rows
 = 
	`my_mÆloc
((
GR_PIXELVAL
Ë* 
°©e
->
si
.
cﬁs
 *

1062 
SAVER13_ZOOM_FACTOR
 * 
SAVER13_ROWS_BUFFER
);

1063 
s
->
rownum
 = 0;

1065 
s
->
x
 = 
	`RANDRANGE
(0, 
°©e
->
si
.
cﬁs
 - (state->si.cols /

1066 
SAVER13_ZOOM_FACTOR
));

1067 
s
->
x
 = 
	`RANDRANGE
(0, 
°©e
->
si
.
rows
 - (state->si.rows /

1068 
SAVER13_ZOOM_FACTOR
));

1069 
s
->
dúe˘i⁄
 = 
	`FRANDRANGE
(0, 2 * 
PI
) - PI;

1071 
°©e
->
™im©e_öãrvÆ
 = 1;

1073 #i‡
CAPTURESCREEN_DELAY


1074 
	`m¶ìp
(
CAPTURESCREEN_DELAY
);

1077 
	`GrRódAªa
(
GR_ROOT_WINDOW_ID
, 0, 0, 
°©e
->
si
.
cﬁs
, sèã->si.
rows
,

1078 
s
->
s¸ìn
);

1079 
	}
}

1081 
	$ßvî13_exposuª
(
n°©e
 *
°©e
)

1083 
s13°©e
 *
s
 = 
°©e
->
¥iv
;

1084 
	`GrCÀ¨Wödow
(
°©e
->
maö_wödow
, 0);

1085 
s
->
rownum
 = 0;

1086 
	}
}

1088 
	$ßvî13_move_p‹èl
(
n°©e
 *
°©e
)

1090 
ªåy
;

1091 
√wx
, 
√wy
;

1092 
s13°©e
 *
s
 = 
°©e
->
¥iv
;

1095 
√wx
 = 
s
->
x
 + 
	`cos
(s->
dúe˘i⁄
Ë* 
SAVER13_VELOCITY
;

1096 
√wy
 = 
s
->
y
 + 
	`sö
(s->
dúe˘i⁄
Ë* 
SAVER13_VELOCITY
;

1097 if(
√wx
 < 0 ||Çewx > 
°©e
->
si
.
cﬁs
 -

1098 (
°©e
->
si
.
cﬁs
 / 
SAVER13_ZOOM_FACTOR
) ||

1099 
√wy
 < 0 ||Çewy > 
°©e
->
si
.
rows
 -

1100 (
°©e
->
si
.
rows
 / 
SAVER13_ZOOM_FACTOR
)) {

1101 
s
->
dúe˘i⁄
 = 
	`FRANDRANGE
(0, 2 * 
PI
);

1102 
ªåy
 = 1;

1103 } 
ªåy
 = 0;

1104 } 
ªåy
);

1105 
s
->
x
 = 
√wx
;

1106 
s
->
y
 = 
√wy
;

1107 
	}
}

1109 
	$ßvî13_™im©e
(
n°©e
 *
°©e
)

1111 
rows
, 
r
, 
y
, 
i
, 
n
;

1112 
s13°©e
 *
s
 = 
°©e
->
¥iv
;

1113 
GR_PIXELVAL
 *
§c
, *
d°
;

1115 
rows
 = (
°©e
->
si
.row†/ 
SAVER13_ZOOM_FACTOR
Ë- 
s
->
rownum
;

1116 if(
rows
 > 
SAVER13_ROWS_BUFFER
)Ñows = SAVER13_ROWS_BUFFER;

1117 
d°
 = 
s
->
rows
;

1118 
y
 = 
s
->y + s->
rownum
;

1119 
r
 = 0;Ñ < 
rows
;Ñ++) {

1120 
§c
 = &
s
->
s¸ìn
[(
y
++ * 
°©e
->
si
.
cﬁs
Ë+ ()s->
x
];

1121 
i
 = 0; i < 
SAVER13_ZOOM_FACTOR
; i++)

1122 
n
 = 0;Ç < 
°©e
->
si
.
cﬁs
;Ç++)

1123 *
d°
++ = 
§c
[
n
 / 
SAVER13_ZOOM_FACTOR
];

1126 
	`GrAªa
(
°©e
->
maö_wödow
, sèã->
maö_gc
, 0, 
s
->
rownum
 *

1127 
SAVER13_ZOOM_FACTOR
, 
°©e
->
si
.
cﬁs
,

1128 
SAVER13_ZOOM_FACTOR
 * 
rows
,

1129 
s
->
rows
, 
MWPF_PIXELVAL
);

1131 
s
->
rownum
 +
rows
;

1132 if(
s
->
rownum
 >
°©e
->
si
.
rows
 / 
SAVER13_ZOOM_FACTOR
) {

1133 
s
->
rownum
 = 0;

1134 
	`ßvî13_move_p‹èl
(
°©e
);

1135 
°©e
->
™im©e_öãrvÆ
 = 
SAVER13_DELAY
;

1136 } 
°©e
->
™im©e_öãrvÆ
 = 1;

1138 
	}
}

1140 
	$öô
(
n°©e
 *
°©e
)

1142 
GR_WM_PROPERTIES
 
¥›s
;

1143 
GR_BITMAP
 
curs‹
 = 0;

1145 if(!
	`GrO≥n
()) {

1146 
	`Ârötf
(
°dîr
, "Couldn't connectÅo Nano-X server\n");

1150 
	`GrGëS¸ìnInfo
(&
°©e
->
si
);

1152 
°©e
->
maö_wödow
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 0, 0,

1153 
°©e
->
si
.
cﬁs
, sèã->si.
rows
, 0, 
GR_COLOR_BLACK
, 0);

1155 
	`GrSñe˘Evíts
(
°©e
->
maö_wödow
, 
GR_EVENT_MASK_EXPOSURE
 |

1156 
GR_EVENT_MASK_BUTTON_UP
 |

1157 
GR_EVENT_MASK_BUTTON_DOWN
 |

1158 
GR_EVENT_MASK_MOUSE_MOTION
 |

1159 
GR_EVENT_MASK_KEY_UP
 |

1160 
GR_EVENT_MASK_KEY_DOWN
 |

1161 
GR_EVENT_MASK_FOCUS_OUT
 |

1162 
GR_EVENT_MASK_CLOSE_REQ
);

1164 
¥›s
.
Êags
 = 
GR_WM_FLAGS_PROPS
;

1165 
¥›s
.¥›†
GR_WM_PROPS_NOMOVE
 | 
GR_WM_PROPS_NODECORATE
 |

1166 
GR_WM_PROPS_NOAUTOMOVE
 | 
GR_WM_PROPS_NOAUTORESIZE
;

1167 
	`GrSëWMPr›îtõs
(
°©e
->
maö_wödow
, &
¥›s
);

1169 
°©e
->
maö_gc
 = 
	`GrNewGC
();

1170 
	`GrSëGCF‹eground
(
°©e
->
maö_gc
, 
GR_COLOR_WHITE
);

1171 
	`GrSëGCBackground
(
°©e
->
maö_gc
, 
GR_COLOR_BLACK
);

1173 
°©e
->
™im©e_öãrvÆ
 = 0;

1175 
	`§™d
(
	`time
(0));

1177 
öô_fun˘i⁄s
[
°©e
->
ßvî
](state);

1179 
	`ˇlcuœã_timeout
(
°©e
);

1181 
	`GrSñe˘Evíts
(
GR_ROOT_WINDOW_ID
, 
GR_EVENT_MASK_SCREENSAVER
);

1183 
	`GrSëCurs‹
(
°©e
->
maö_wödow
, 1, 1, 1, 1, 0, 0, &
curs‹
, &cursor);

1185 
	`GrM≠Wödow
(
°©e
->
maö_wödow
);

1187 
	`GrSëFocus
(
°©e
->
maö_wödow
);

1190 
	}
}

1192 
	$ˇlcuœã_timeout
(
n°©e
 *
°©e
)

1194 
timevÆ
 
t
;

1195 
u
;

1197 
	`gëtimeofday
(&
t
, 
NULL
);

1198 
u
 = 
t
.
tv_u£c
 + (
°©e
->
™im©e_öãrvÆ
 * 1000);

1199 
°©e
->
timeout
.
tv_£c
 = 
t
.tv_£¯+ (
u
 / 1000000);

1200 
°©e
->
timeout
.
tv_u£c
 = 
u
 % 1000000;

1201 
	}
}

1203 
	$timeout_dñay
(
n°©e
 *
°©e
)

1205 
timevÆ
 
t
;

1206 sig√d 
s
, 
m
, 
ªt
;

1208 
	`gëtimeofday
(&
t
, 
NULL
);

1210 if(!
°©e
->
™im©e_öãrvÆ
)  0;

1212 if((
t
.
tv_£c
 > 
°©e
->
timeout
.tv_sec) ||

1213 ((
t
.
tv_£c
 =
°©e
->
timeout
.tv_sec) &&

1214 
t
.
tv_u£c
 >
°©e
->
timeout
.tv_usec))  1;

1216 
s
 = 
°©e
->
timeout
.
tv_£c
 - 
t
.tv_sec;

1217 
m
 = ((
°©e
->
timeout
.
tv_u£c
 - 
t
.tv_usec) / 1000);

1218 
ªt
 = ()((1000 * 
s
Ë+ 
m
);

1220 if(
ªt
 <= 0)  1;

1221  
ªt
;

1222 
	}
}

1224 
	$do_™im©e
(
n°©e
 *
°©e
)

1226 
timevÆ
 
t
;

1228 if(!
°©e
->
™im©e_öãrvÆ
) ;

1230 
	`gëtimeofday
(&
t
, 
NULL
);

1232 if((
t
.
tv_£c
 > 
°©e
->
timeout
.tv_sec) ||

1233 ((
t
.
tv_£c
 =
°©e
->
timeout
.tv_sec) &&

1234 (
t
.
tv_u£c
 >
°©e
->
timeout
.tv_usec))) {

1235 
™im©e_fun˘i⁄s
[
°©e
->
ßvî
](state);

1236 
	`ˇlcuœã_timeout
(
°©e
);

1238 
	}
}

1240 
	$do_s¸ìnßvî_evít
(
n°©e
 *
°©e
)

1242 
GR_EVENT_SCREENSAVER
 *
evít
 = &
°©e
->evít.
s¸ìnßvî
;

1244 if(
evít
->
a˘iv©e
 !
GR_FALSE
) {

1245 
	`Ârötf
(
°dîr
, "GotáÇon-deactivate screensaverÉvent\n");

1250 
	}
}

1252 
	$h™dÀ_evít
(
n°©e
 *
°©e
)

1254 
°©e
->
evít
.
ty≥
) {

1255 
GR_EVENT_TYPE_EXPOSURE
:

1256 
exposuª_fun˘i⁄s
[
°©e
->
ßvî
](state);

1257 
GR_EVENT_TYPE_TIMEOUT
:

1258 
GR_EVENT_TYPE_NONE
:

1260 
GR_EVENT_TYPE_SCREENSAVER
:

1261 if(
	`do_s¸ìnßvî_evít
(
°©e
))  0;

1263 
GR_EVENT_TYPE_CLOSE_REQ
:

1264 
GR_EVENT_TYPE_BUTTON_UP
:

1265 
GR_EVENT_TYPE_BUTTON_DOWN
:

1266 
GR_EVENT_TYPE_MOUSE_MOTION
:

1267 
GR_EVENT_TYPE_KEY_UP
:

1268 
GR_EVENT_TYPE_KEY_DOWN
:

1269 
GR_EVENT_TYPE_FOCUS_OUT
:

1272 
	`Ârötf
(
°dîr
, "Got unknownÉventÅype %d\n",

1273 
°©e
->
evít
.
ty≥
);

1276 
	`do_™im©e
(
°©e
);

1278 
	}
}

1280 
	$maö
(
¨gc
, *
¨gv
[])

1282 
ªt
;

1283 
n°©e
 *
°©e
 = 
	`my_mÆloc
((nstate));

1285 if(
¨gc
 == 2) {

1286 
°©e
->
ßvî
 = 
	`©oi
(
¨gv
[1]) - 1;

1287 if((
°©e
->
ßvî
Ë< 0 || (°©e->ßvî >
NUM_SAVERS
)) {

1288 
	`Ârötf
(
°dîr
, "Invalid saverÇumber \"%s\"\n",

1289 
¨gv
[1]);

1292 } 
°©e
->
ßvî
 = 0;

1294 if((
ªt
 = 
	`öô
(
°©e
))) Ñet;

1297 
	`GrGëNextEvítTimeout
(&
°©e
->
evít
, 
	`timeout_dñay
(state));

1298 } 
	`h™dÀ_evít
(
°©e
));

1300 
	`GrClo£
();

1303 
	}
}

	@demos/nanox/nsaver.h

1 #i‚de‡
NSAVER_H


2 
	#NSAVER_H


	)

36 #ifde‡
UCLIBC_HACK


37 #unde‡
RAND_MAX


38 
	#RAND_MAX
 32767

	)

41 
	#MAX
(
X
, 
Y
Ë((XË> (YË? (XË: (Y))

	)

42 
	#MIN
(
X
, 
Y
Ë((XË< (YË? (XË: (Y))

	)

43 
	#RANDRANGE
(
LO
, 
HI
Ë((
	`ønd
(Ë% (()(HIË- ()(LOË+ 1)Ë+ ()(LO))

	)

44 
	#FRANDRANGE
(
LO
, 
HI
Ë((()
	`ønd
() * (()(HI) - ()(LO)) / \

45 ()(()
RAND_MAX
 + 1.0)Ë+ ()(
LO
))

	)

47 
	#PI
 3.14159265358979323846264338327

	)

48 
	#CAPTURESCREEN_DELAY
 500

	)

49 
	#GRP_MINBRIGHTNESS
 150

	)

52 
GR_WINDOW_ID
 
	mmaö_wödow
;

53 
GR_GC_ID
 
	mmaö_gc
;

54 
GR_EVENT
 
	mevít
;

55 
	m™im©e_öãrvÆ
;

56 
timevÆ
 
	mtimeout
;

57 
	mßvî
;

58 *
	m¥iv
;

59 
GR_SCREEN_INFO
 
	msi
;

60 } 
	tn°©e
;

62 *
my_mÆloc
(
size_t
 
size
);

63 
GR_COLOR
 
gë_øndom_cﬁour
(
mö_brighäess
);

64 
gë_øndom_poöt_⁄_s¸ìn
(
n°©e
 *
°©e
, 
GR_COORD
 *
x
, GR_COORD *
y
,

65 
GR_COLOR
 *
c
);

66 
nŸ_squ¨e
(
n
);

67 
make_øndom_squ¨e
(
n°©e
 *
°©e
, 
mö_brighäess
, 
mö_size
,

68 
max_size
, 
√ed_squ¨e
, 
GR_COORD
 *
ªtx
, GR_COORD *
ªty
,

69 
GR_SIZE
 *
ªtsize
);

70 
öô
(
n°©e
 *
°©e
);

71 
ˇlcuœã_timeout
(
n°©e
 *
°©e
);

72 
timeout_dñay
(
n°©e
 *
°©e
);

73 
timeout_dñay
(
n°©e
 *
°©e
);

74 
do_™im©e
(
n°©e
 *
°©e
);

75 
do_s¸ìnßvî_evít
(
n°©e
 *
°©e
);

76 
h™dÀ_evít
(
n°©e
 *
°©e
);

77 
m¶ìp
(
ms
);

78 
GR_WINDOW_ID
 
ˇ±uª_s¸ìn
(
n°©e
 *
°©e
);

80 
	#NUM_SAVERS
 13

	)

82 
ßvî1_öô
(
n°©e
 *
°©e
);

83 
ßvî1_exposuª
(
n°©e
 *
°©e
);

84 
ßvî1_™im©e
(
n°©e
 *
°©e
);

86 
	#SAVER2_DELAY
 30

	)

87 
	#SAVER2_MAXPIXELS
 65535

	)

88 
	#SAVER2_PIXELS_PER_FRAME
 16

	)

91 
	mpixñs
;

92 } 
	ts2°©e
;

94 
ßvî2_öô
(
n°©e
 *
°©e
);

95 
ßvî2_exposuª
(
n°©e
 *
°©e
);

96 
ßvî2_™im©e
(
n°©e
 *
°©e
);

98 
	#SAVER3_DELAY
 30

	)

99 
	#SAVER3_MAXSEGMENTS
 65535

	)

100 
	#SAVER3_SEGMENTS_PER_FRAME
 4

	)

103 
	mmax£gmíts
;

104 
GR_COORD
 
	mœ°x
;

105 
GR_COORD
 
	mœ°y
;

106 } 
	ts3°©e
;

108 
ßvî3_öô
(
n°©e
 *
°©e
);

109 
ßvî3_exposuª
(
n°©e
 *
°©e
);

110 
ßvî3_™im©e
(
n°©e
 *
°©e
);

112 
	#SAVER4_DELAY
 30

	)

113 
	#SAVER4_NUMWORMS
 5

	)

114 
	#SAVER4_WORMLENGTH
 50

	)

115 
	#SAVER4_VELOCITY
 2

	)

116 
	#SAVER4_MAXROTATION
 (
PI
/8)

	)

117 
	#SAVER4_WORMTHICKNESS
 3

	)

120 
	mx
;

121 
	my
;

122 
	md
;

123 
GR_COLOR
 
	mcﬁour
;

124 
GR_POINT
 
	mpoöts
[
SAVER4_WORMLENGTH
];

125 } 
	ts4w‹m
;

128 
	mÀngth
;

129 
	mtù
;

130 
s4w‹m
 
	mw‹ms
[
SAVER4_NUMWORMS
];

131 } 
	ts4°©e
;

133 
ßvî4_öô
(
n°©e
 *
°©e
);

134 
ßvî4_exposuª
(
n°©e
 *
°©e
);

135 
ßvî4_gë_√w_w‹m_posôi⁄
(
n°©e
 *
°©e
, 
w‹m
, 
√wtù
);

136 
ßvî4_w‹m_cﬁlides
(
n°©e
 *
°©e
, 
s4°©e
 *
s
, 
x
, 
y
, 
thisw‹m
,

137 
thi•oöt
);

138 
ßvî4_™im©e
(
n°©e
 *
°©e
);

140 
	#SAVER5_DELAY
 30

	)

141 
	#SAVER5_NUMSTARS
 300

	)

142 
	#SAVER5_STARS_INCREMENT
 2

	)

143 
	#SAVER5_STARS_ACCEL_RATE
 30

	)

146 
	m™gÀ
;

147 
	mpos
;

148 } 
	ts5°¨
;

151 
	mnum°¨s
;

152 
s5°¨
 
	m°¨s
[
SAVER5_NUMSTARS
];

153 } 
	ts5°©e
;

155 
ßvî5_öô
(
n°©e
 *
°©e
);

156 
ßvî5_døw°¨
(
n°©e
 *
°©e
, 
s5°©e
 *
s
, 
°¨
, 
dñëe
);

157 
ßvî5_exposuª
(
n°©e
 *
°©e
);

158 
ßvî5_™im©e
(
n°©e
 *
°©e
);

160 
	#SAVER6_DELAY
 8

	)

161 
	#SAVER6_MAXVERTICES
 20

	)

162 
	#SAVER6_MINFULLVERTICES
 5

	)

163 
	#SAVER6_MINVERTICES
 3

	)

164 
	#SAVER6_MINDROP
 10

	)

165 
	#SAVER6_MAXBOLTS
 4

	)

166 
	#SAVER6_MAXFORKS
 20

	)

167 
	#SAVER6_MAXEND_Y
 50

	)

168 
	#SAVER6_THICKNESS
 6

	)

169 
	#SAVER6_MINDURATION
 10

	)

170 
	#SAVER6_MAXDURATION
 20

	)

171 
	#SAVER6_MAXNEWBOLTTIME
 300

	)

172 
	#SAVER6_MAXZIGZAG
 10

	)

173 
	#SAVER6_MAXPERTURBATION
 5

	)

174 
	#SAVER6_FORK_PROBABILITY
 0.5

	)

177 
	mvÆid
;

178 
GR_POINT
 
	mvîti˚s
[
SAVER6_THICKNESS
][
SAVER6_MAXVERTICES
];

179 } 
	ts6f‹k
;

182 
	mduøti⁄
;

183 
s6f‹k
 
	mf‹ks
[
SAVER6_MAXFORKS
];

184 } 
	ts6bﬁt
;

187 
	m√w_bﬁt_time
;

188 
s6bﬁt
 
	mbﬁts
[
SAVER6_MAXBOLTS
];

189 } 
	ts6°©e
;

191 
ßvî6_öô
(
n°©e
 *
°©e
);

192 
ßvî6_døwf‹k
(
n°©e
 *
°©e
, 
s6°©e
 *
s
, 
bﬁt
, 
f‹k
, 
dñëe
);

193 
ßvî6_døwbﬁt
(
n°©e
 *
°©e
, 
s6°©e
 *
s
, 
bﬁt
, 
dñëe
);

194 
ßvî6_døwlighäög
(
n°©e
 *
°©e
, 
s6°©e
 *
s
, 
dñëe
);

195 
ßvî6_exposuª
(
n°©e
 *
°©e
);

196 
ßvî6_£tvîti˚s
(
s6°©e
 *
s
, 
bﬁt
, 
f‹k
, 
vît
, 
GR_COORD
 
x
,

197 
GR_COORD
 
y
);

198 
ßvî6_makef‹k
(
n°©e
 *
°©e
, 
s6°©e
 *
s
, 
bﬁt
, 
f‹k
, 
GR_COORD
 
x
,

199 
GR_COORD
 
y
);

200 
ßvî6_makef‹ks
(
n°©e
 *
°©e
, 
s6°©e
 *
s
, 
bﬁt
, 
f‹k
,

201 *
vît
, *
√xtf‹k
);

202 
ßvî6_≥πurb
(
n°©e
 *
°©e
, 
GR_COORD
 *
x
, GR_COORD *
y
, 
max≥πurb
);

203 
ßvî6_makebﬁt
(
n°©e
 *
°©e
, 
s6°©e
 *
s
, 
bﬁt
);

204 
ßvî6_√wbﬁt
(
n°©e
 *
°©e
, 
s6°©e
 *
s
);

205 
ßvî6_≥πurb_bﬁt
(
n°©e
 *
°©e
, 
s6°©e
 *
s
, 
bﬁt
, 
f‹k
);

206 
ßvî6_≥πurb_lighäög
(
n°©e
 *
°©e
, 
s6°©e
 *
s
);

207 
ßvî6_™im©e
(
n°©e
 *
°©e
);

211 
	#SAVER7_DELAY
 10

	)

212 
	#SAVER7_PLANETS
 15

	)

213 
	#SAVER7_PLANETS_USE_DAMPING


	)

214 
	#SAVER7_STARCOLOUR
 
GR_COLOR_YELLOW


	)

215 
	#SAVER7_STARRADIUS
 5

	)

216 
	#SAVER7_PLANETRADIUS
 3

	)

217 
	#SAVER7_DIST
 16.0

	)

218 
	#SAVER7_ALMOSTDIST
 (
SAVER7_DIST
 - 0.01)

	)

219 
	#SAVER7_MAX_STARTDIM
 (
SAVER7_ALMOSTDIST
 / 2.0)

	)

220 
	#SAVER7_MIN_STARTDIM
 -
SAVER7_MAX_STARTDIM


	)

221 
	#SAVER7_MAX_STARTVEL
 0.04

	)

222 
	#SAVER7_MIN_STARTVEL
 -
SAVER7_MAX_STARTVEL


	)

223 
	#SAVER7_G
 -0.02

	)

224 
	#SAVER7_COLLIDE
 0.0001

	)

225 
	#SAVER7_DAMPING_FACTOR
 0.999999

	)

226 
	#SAVER7_MAX_ACCEL
 0.1

	)

229 
	mr
;

230 
	mrv
;

231 
	mx
;

232 
	mxv
;

233 
	my
;

234 
	myv
;

235 
GR_COORD
 
	max
;

236 
GR_COORD
 
	may
;

237 
GR_COLOR
 
	mcﬁour
;

238 } 
	ts7∂™ë
;

241 
s7∂™ë
 
	m∂™ës
[
SAVER7_PLANETS
];

242 
GR_COORD
 
	m°¨x
;

243 
GR_COORD
 
	m°¨y
;

244 } 
	ts7°©e
;

246 
ßvî7_öô
(
n°©e
 *
°©e
);

247 
ßvî7_exposuª
(
n°©e
 *
°©e
);

248 
ßvî7_™im©e
(
n°©e
 *
°©e
);

250 
ßvî7_døw°¨
(
n°©e
 *
°©e
, 
s7°©e
 *
s
);

251 
ßvî7_døw∂™ë
(
n°©e
 *
°©e
, 
s7°©e
 *
s
, 
∂™ë
, 
îa£
);

252 
ßvî7_ˇlc_∂™ë_posôi⁄
(
n°©e
 *
°©e
, 
s7°©e
 *
s
, 
∂™ë
);

253 
ßvî7_movïœ√t
(
n°©e
 *
°©e
, 
s7°©e
 *
s
, 
∂™ë
);

258 
	#SAVER8_DELAY1
 1

	)

259 
	#SAVER8_DELAY2
 10000

	)

260 
	#SAVER8_NUMCOLOURS
 64

	)

261 
	#SAVER8_MINFACTOR
 1

	)

262 
	#SAVER8_MAXFACTOR
 20

	)

263 
	#SAVER8_LINES_PER_FRAME
 64

	)

266 
GR_PIXELVAL
 *
	mrows
;

267 
	mrownum
;

268 
GR_PIXELVAL
 
	mcﬁours
[
SAVER8_NUMCOLOURS
];

269 
	mcuºít_löe
;

270 
	mÁ˘‹
;

271 } 
	ts8°©e
;

273 
ßvî8_öô
(
n°©e
 *
°©e
);

274 
ßvî8_døw∑âîn
(
n°©e
 *
°©e
);

275 
ßvî8_exposuª
(
n°©e
 *
°©e
);

276 
ßvî8_™im©e
(
n°©e
 *
°©e
);

278 
	#SAVER9_DELAY
 30

	)

281 
GR_WINDOW_ID
 
	mpid
;

282 } 
	ts9°©e
;

284 
ßvî9_öô
(
n°©e
 *
°©e
);

285 
ßvî9_exposuª
(
n°©e
 *
°©e
);

286 
ßvî9_™im©e
(
n°©e
 *
°©e
);

288 
	#SAVER10_DELAY
 20

	)

289 
	#SAVER10_SPOTDIA
 49

	)

290 
	#SAVER10_VELOCITY
 3

	)

291 
	#SAVER10_OVERSIZE
 (2 * 
SAVER10_VELOCITY
)

	)

294 
GR_WINDOW_ID
 
	ms¸ìn
;

295 
GR_WINDOW_ID
 
	m•Ÿ
;

296 
	mx
;

297 
	my
;

298 
	mdúe˘i⁄
;

299 } 
	ts10°©e
;

301 
ßvî10_öô
(
n°©e
 *
°©e
);

302 
ßvî10_exposuª
(
n°©e
 *
°©e
);

303 
ßvî10_™im©e
(
n°©e
 *
°©e
);

305 
	#SAVER11_DELAY
 50

	)

306 
	#SAVER11_MIN_BRIGHTNESS
 100

	)

307 
	#SAVER11_MIN_SIZE
 20

	)

308 
	#SAVER11_MAX_SIZE
 150

	)

311 
GR_COORD
 
	mx
;

312 
GR_COORD
 
	my
;

313 
GR_SIZE
 
	msize
;

314 } 
	ts11°©e
;

316 
ßvî11_öô
(
n°©e
 *
°©e
);

317 
ßvî11_exposuª
(
n°©e
 *
°©e
);

318 
ßvî11_™im©e
(
n°©e
 *
°©e
);

322 
	#SAVER12_DELAY
 10

	)

323 
	#SAVER12_MIN_BRIGHTNESS
 100

	)

324 
	#SAVER12_MIN_SIZE
 64

	)

325 
	#SAVER12_MAX_SIZE
 256

	)

328 
	mt
;

329 
	mkt
;

330 
GR_COORD
 
	mx
;

331 
GR_COORD
 
	my
;

332 
GR_SIZE
 
	msize
;

333 } 
	ts12°©e
;

335 
ßvî12_√w_sh≠e
(
n°©e
 *
°©e
);

336 
ßvî12_öô
(
n°©e
 *
°©e
);

337 
ßvî12_exposuª
(
n°©e
 *
°©e
);

338 
ßvî12_™im©e
(
n°©e
 *
°©e
);

340 
	#SAVER13_DELAY
 10

	)

341 
	#SAVER13_ZOOM_FACTOR
 8

	)

342 
	#SAVER13_ROWS_BUFFER
 64

	)

343 
	#SAVER13_VELOCITY
 4

	)

346 
GR_PIXELVAL
 *
	ms¸ìn
;

347 
GR_PIXELVAL
 *
	mrows
;

348 
	mrownum
;

349 
	mx
;

350 
	my
;

351 
	mdúe˘i⁄
;

352 } 
	ts13°©e
;

354 
ßvî13_öô
(
n°©e
 *
°©e
);

355 
ßvî13_exposuª
(
n°©e
 *
°©e
);

356 
ßvî13_™im©e
(
n°©e
 *
°©e
);

357 
ßvî13_move_p‹èl
(
n°©e
 *
°©e
);

359 (*
	tßvî_fun˘i⁄
)(
	tn°©e
 *);

361 
ßvî_fun˘i⁄
 
öô_fun˘i⁄s
[
NUM_SAVERS
] = {

362 
ßvî1_öô
,

363 
ßvî2_öô
,

364 
ßvî3_öô
,

365 
ßvî4_öô
,

366 
ßvî5_öô
,

367 
ßvî6_öô
,

368 
ßvî7_öô
,

369 
ßvî8_öô
,

370 
ßvî9_öô
,

371 
ßvî10_öô
,

372 
ßvî11_öô
,

373 
ßvî12_öô
,

374 
ßvî13_öô


375 
	}
};

376 
ßvî_fun˘i⁄
 
	gexposuª_fun˘i⁄s
[
NUM_SAVERS
] = {

377 
ßvî1_exposuª
,

378 
ßvî2_exposuª
,

379 
ßvî3_exposuª
,

380 
ßvî4_exposuª
,

381 
ßvî5_exposuª
,

382 
ßvî6_exposuª
,

383 
ßvî7_exposuª
,

384 
ßvî8_exposuª
,

385 
ßvî9_exposuª
,

386 
ßvî10_exposuª
,

387 
ßvî11_exposuª
,

388 
ßvî12_exposuª
,

389 
ßvî13_exposuª
,

391 
ßvî_fun˘i⁄
 
	g™im©e_fun˘i⁄s
[
NUM_SAVERS
] = {

392 
ßvî1_™im©e
,

393 
ßvî2_™im©e
,

394 
ßvî3_™im©e
,

395 
ßvî4_™im©e
,

396 
ßvî5_™im©e
,

397 
ßvî6_™im©e
,

398 
ßvî7_™im©e
,

399 
ßvî8_™im©e
,

400 
ßvî9_™im©e
,

401 
ßvî10_™im©e
,

402 
ßvî11_™im©e
,

403 
ßvî12_™im©e
,

404 
ßvî13_™im©e


	@demos/nanox/nterm.c

8 
	~<°dio.h
>

9 
	~<°rög.h
>

10 
	~<°dlib.h
>

11 
	~<f˙é.h
>

12 
	~<uni°d.h
>

13 
	~<î∫o.h
>

14 
	~<sig«l.h
>

16 
	#MWINCLUDECOLORS


	)

17 
	~"«no-X.h
"

19 
	#HAVEBLIT
 0

	)

21 
	#_
 ((Ë0Ë

	)

22 
	#X
 ((Ë1Ë

	)

23 
	#MASK
(
a
,
b
,
c
,
d
,
e
,
f
,
g
) \

24 (((((((((((((
a
 * 2Ë+ 
b
Ë* 2Ë+ 
c
Ë* 2Ë+ 
d
) * 2) \

25 + 
e
Ë* 2Ë+ 
f
Ë* 2Ë+ 
g
Ë<< 9)

	)

27 #i‡
DOS_DJGPP


28 
	#SIGCHLD
 17

	)

31 
GR_WINDOW_ID
 
	gw1
;

32 
GR_GC_ID
 
	ggc1
;

33 
GR_GC_ID
 
	ggc3
;

34 
GR_COORD
 
	gxpos
;

35 
GR_COORD
 
	gypos
;

36 
GR_SCREEN_INFO
 
	gsi
;

37 
	gtfdMa°î
,
	gtfdSœve
;

39 
ãxt_öô
();

40 
ãrm_öô
();

41 
do_key°roke
(
GR_EVENT_KEYSTROKE
 *
kp
);

42 
do_focusö
(
GR_EVENT_GENERAL
 *
gp
);

43 
do_focusout
(
GR_EVENT_GENERAL
 *
gp
);

44 
do_fdöput
();

45 
¥ötg
(* 
ãxt
);

46 
H™dÀEvít
(
GR_EVENT
 *
ï
);

47 
ch¨_dñ
(
GR_COORD
 
x
, GR_COORD 
y
);

48 
ch¨_out
(
GR_CHAR
 
ch
);

49 
sigchûd
(
signo
);

51 
	$maö
(
¨gc
, ** 
¨gv
)

53 
GR_BITMAP
 
bôm≠1fg
[7];

54 
GR_BITMAP
 
bôm≠1bg
[7];

56 i‡(
	`GrO≥n
() < 0) {

57 
	`Ârötf
(
°dîr
, "cannot open graphics\n");

58 
	`exô
(1);

61 
	`GrGëS¸ìnInfo
(&
si
);

63 
w1
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 50, 30, 
si
.
cﬁs
 - 10,

64 
si
.
rows
 - 60, 1, 
WHITE
, 
LTBLUE
);

66 
	`GrSñe˘Evíts
(
w1
, 
GR_EVENT_MASK_BUTTON_DOWN
 |

67 
GR_EVENT_MASK_KEY_DOWN
 | 
GR_EVENT_MASK_EXPOSURE
 |

68 
GR_EVENT_MASK_FOCUS_IN
 | 
GR_EVENT_MASK_FOCUS_OUT
 |

69 
GR_EVENT_MASK_CLOSE_REQ
);

71 
	`GrM≠Wödow
(
w1
);

73 
gc1
 = 
	`GrNewGC
();

74 
gc3
 = 
	`GrNewGC
();

76 
	`GrSëGCF‹eground
(
gc1
, 
GRAY
);

77 
	`GrSëGCBackground
(
gc1
, 
LTBLUE
);

78 
	`GrSëGCF⁄t
(
gc1
, 
	`GrCª©eF⁄t
(
GR_FONT_SYSTEM_FIXED
, 0, 
NULL
));

80 
	`GrSëGCF‹eground
(
gc3
, 
WHITE
);

81 
	`GrSëGCBackground
(
gc3
, 
BLACK
);

83 
bôm≠1fg
[0] = 
	`MASK
(
_
,_,
X
,_,X,_,_);

84 
bôm≠1fg
[1] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

85 
bôm≠1fg
[2] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

86 
bôm≠1fg
[3] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

87 
bôm≠1fg
[4] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

88 
bôm≠1fg
[5] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

89 
bôm≠1fg
[6] = 
	`MASK
(
_
,_,
X
,_,X,_,_);

91 
bôm≠1bg
[0] = 
	`MASK
(
_
,
X
,X,X,X,X,_);

92 
bôm≠1bg
[1] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

93 
bôm≠1bg
[2] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

94 
bôm≠1bg
[3] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

95 
bôm≠1bg
[4] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

96 
bôm≠1bg
[5] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

97 
bôm≠1bg
[6] = 
	`MASK
(
_
,
X
,X,X,X,X,_);

99 
	`GrSëCurs‹
(
w1
, 7, 7, 3, 3, 
WHITE
, 
BLACK
, 
bôm≠1fg
, 
bôm≠1bg
);

103 
	`GrSëGCF‹eground
(
gc1
, 
BLACK
);

104 
	`GrSëGCBackground
(
gc1
, 
WHITE
);

105 
	`ãxt_öô
();

106 i‡(
	`ãrm_öô
() < 0) {

107 
	`GrClo£
();

108 
	`exô
(1);

111 
	`GrRegi°îI≈ut
(
tfdMa°î
);

114 
	`GrMaöLo›
(
H™dÀEvít
);

117 
GR_EVENT
 
ev
;

119 
	`GrGëNextEvít
(&
ev
);

120 
	`H™dÀEvít
(&
ev
);

125 
	}
}

128 
	$H™dÀEvít
(
GR_EVENT
 *
ï
)

130 
ï
->
ty≥
) {

131 
GR_EVENT_TYPE_KEY_DOWN
:

132 
	`do_key°roke
(&
ï
->
key°roke
);

135 
GR_EVENT_TYPE_FOCUS_IN
:

136 
	`do_focusö
(&
ï
->
gíîÆ
);

139 
GR_EVENT_TYPE_FOCUS_OUT
:

140 
	`do_focusout
(&
ï
->
gíîÆ
);

143 
GR_EVENT_TYPE_CLOSE_REQ
:

144 
	`GrClo£
();

145 
	`exô
(0);

147 
GR_EVENT_TYPE_FDINPUT
:

148 
	`do_fdöput
();

151 
	}
}

153 #i‡
ELKS


154 * 
	g«rgv
[2] = {"/bö/ßsh", 
NULL
};

156 #i‡
DOS_DJGPP


157 * 
	g«rgv
[2] = {"bash", 
NULL
};

159 * 
	g«rgv
[2] = {"/bö/sh", 
NULL
};

163 
	$sigchûd
(
signo
)

165 
	`¥ötg
("We haveá signalÑightÇow!\n");

166 
	`GrClo£
();

167 
	`exô
(0);

168 
	}
}

170 
	$ãrm_öô
()

172 
±y_«me
[12];

173 
n
 = 0;

174 
pid_t
 
pid
;

176 
agaö
:

177 
	`•rötf
(
±y_«me
, "/dev/±yp%d", 
n
);

178 i‡((
tfdMa°î
 = 
	`›í
(
±y_«me
, 
O_RDWR
 | 
O_NONBLOCK
)) < 0) {

179 i‡((
î∫o
 =
EBUSY
 ||Éºnÿ=
EIO
Ë&& 
n
 < 10) {

180 
n
++;

181 
agaö
;

183 
	`Ârötf
(
°dîr
, "C™'à¸óãÖty %s\n", 
±y_«me
);

186 
	`sig«l
(
SIGCHLD
, 
sigchûd
);

187 
	`sig«l
(
SIGINT
, 
sigchûd
);

189 #ifde‡
__uClöux__


190 #unde‡
f‹k


191 
	#f‹k
(Ë
	`vf‹k
()

	)

193 i‡((
pid
 = 
	`f‹k
()) == -1) {

194 
	`Ârötf
(
°dîr
, "NoÖrocesses\n");

197 i‡(!
pid
) {

198 
	`˛o£
(
STDIN_FILENO
);

199 
	`˛o£
(
STDOUT_FILENO
);

200 
	`˛o£
(
STDERR_FILENO
);

202 
	`˛o£
(
tfdMa°î
);

203 
	`£tsid
();

204 
±y_«me
[5] = 't';

205 i‡((
tfdSœve
 = 
	`›í
(
±y_«me
, 
O_RDWR
)) < 0) {

206 
	`Ârötf
(
°dîr
, "Chûd: C™'à›íÖty %s\n", 
±y_«me
);

207 
	`exô
(1);

209 
	`dup2
(
tfdSœve
, 
STDIN_FILENO
);

210 
	`dup2
(
tfdSœve
, 
STDOUT_FILENO
);

211 
	`dup2
(
tfdSœve
, 
STDERR_FILENO
);

212 
	`execv
(
«rgv
[0],Çargv);

213 
	`exô
(1);

216 
	}
}

219 
GR_SIZE
 
	gwidth
;

220 
GR_SIZE
 
	gheight
;

221 
GR_SIZE
 
	gba£
;

223 
	$ãxt_öô
()

225 
	`GrGëGCTextSize
(
gc1
, "A", 1, 
GR_TFASCII
, &
width
, &
height
, &
ba£
);

226 
	}
}

228 
	$ch¨_dñ
(
GR_COORD
 
x
, GR_COORD 
y
)

230 
xpos
 -
width
;

231 
	`GrFûlRe˘
(
w1
, 
gc3
, 
x
, 
y
 + 1, 
width
, 
height
);

232 
	}
}

234 
	$ch¨_out
(
GR_CHAR
 
ch
)

236 
ch
) {

238 
xpos
 = 0;

241 
ypos
 +
height
;

242 if(
ypos
 > 
si
.
rows
 - 60 - 
height
) {

243 
ypos
 -
height
;

244 #i‡
HAVEBLIT


245 
	`bogl_cfb8_blô
(50, 30, 
si
.
cﬁs
-120,

246 
si
.
rows
-60-
height
, 50, 30+height);

247 
	`GrFûlRe˘
(
w1
, 
gc3
, 50, 
ypos
, 
si
.
cﬁs
-120, 
height
);

251 
ypos
 = 0;

252 
	`GrCÀ¨Wödow
(
w1
, 
GR_FALSE
);

259 
xpos
 +
width
;

260 (
xpos
/
width
) & 7)

261 
	`ch¨_out
(' ');

264 i‡(
xpos
 <= 0)

266 
	`ch¨_dñ
(
xpos
, 
ypos
);

269 
	`GrText
(
w1
, 
gc1
, 
xpos
+1, 
ypos
, &
ch
, 1, 
GR_TFTOP
);

270 
xpos
 +
width
;

271 
	}
}

273 
	$¥ötg
(* 
ãxt
)

275 
i
;

277 
i
 = 0; i < 
	`°æí
(
ãxt
); i++) {

278 
	`ch¨_out
(
ãxt
[
i
]);

280 
	}
}

287 
	$do_key°roke
(
GR_EVENT_KEYSTROKE
 *
kp
)

289 
foo
;

291 
foo
 = 
kp
->
ch
;

292 
	`wrôe
(
tfdMa°î
, &
foo
, 1);

293 
	}
}

300 
	$do_focusö
(
GR_EVENT_GENERAL
 *
gp
)

302 i‡(
gp
->
wid
 !
w1
)

304 
	`GrSëB‹dîCﬁ‹
(
w1
, 
LTBLUE
);

305 
	}
}

311 
	$do_focusout
(
GR_EVENT_GENERAL
 *
gp
)

313 i‡(
gp
->
wid
 !
w1
)

315 
	`GrSëB‹dîCﬁ‹
(
w1
, 
GRAY
);

316 
	}
}

322 
	$do_fdöput
()

324 
c
;

326 i‡(
	`ªad
(
tfdMa°î
, &
c
, 1) == 1)

327 
	`ch¨_out
(
c
);

328 
	}
}

	@demos/nanox/ntetris.c

75 
	~<°dio.h
>

76 
	~<°rög.h
>

77 
	~<°dlib.h
>

78 
	~<f˙é.h
>

79 
	~<uni°d.h
>

80 
	~<time.h
>

81 
	~<˘y≥.h
>

82 
	~<î∫o.h
>

83 
	~<sys/time.h
>

85 #ifde‡
__ECOS


86 
	#øndom
 
ønd


	)

87 
	#§™dom
 
§™d


	)

90 
	~<«no-X.h
>

91 
	~<nxcﬁ‹s.h
>

93 
	~"¡ëris.h
"

95 *
	$my_mÆloc
(
size_t
 
size
)

97 *
ªt
;

99 if(!(
ªt
 = 
	`mÆloc
(
size
))) {

100 
	`Ârötf
(
°dîr
, "Out of memory\n");

101 
	`exô
(1);

104  
ªt
;

105 
	}
}

107 #ifde‡
HAVE_USLEEP


108 
	$m¶ìp
(
ms
)

110 
	`u¶ìp
(
ms
 * 1000);

111 
	}
}

113 
	$m¶ìp
(
ms
)

115 
time•ec
 
ªq
, 
ªm
;

117 
ªq
.
tv_£c
 = 
ms
 / 1000000;

118 
ªq
.
tv_n£c
 = (
ms
 % 1000000) * 1000000;

120 
	`«no¶ìp
(&
ªq
, &
ªm
) == -1) {

121 if(
î∫o
 =
EINTR
) {

122 
ªq
.
tv_£c
 = 
ªm
.tv_sec;

123 
ªq
.
tv_n£c
 = 
ªm
.tv_nsec;

126 
	`≥º‹
("nanosleep() failed");

130 
	}
}

133 #ifde‡
USE_HISCORE_FILE


134 
	$ªad_hisc‹e
(
n°©e
 *
°©e
)

136 
FILE
 *
f
;

137 
i
, 
n
;

139 if(!(
f
 = 
	`f›í
(
HISCORE_FILE
, "r"))) {

140 if(
î∫o
 !
ENOENT
)

141 
	`≥º‹
("Couldn't open high score file forÑeading");

142 
°©e
->
hisc‹e
 = sèã->
fhisc‹e
 = 0;

146 
i
 = 
	`fsˇnf
(
f
, "%d", &
n
);

147 
	`f˛o£
(
f
);

149 if(
i
 != 1) {

150 
	`Ârötf
(
°dîr
, "Couldn'tÑead high score file\n");

151 
n
 = 0;

154 
°©e
->
hisc‹e
 = sèã->
fhisc‹e
 = 
n
;

155 
	}
}

157 
	$wrôe_hisc‹e
(
n°©e
 *
°©e
)

159 
FILE
 *
f
;

161 if(
°©e
->
sc‹e
 > sèã->
hisc‹e
) state->hiscore = state->score;

162 if(
°©e
->
hisc‹e
 <°©e->
fhisc‹e
) ;

164 if(!(
f
 = 
	`f›í
(
HISCORE_FILE
, "w"))) {

165 
	`≥º‹
("Couldn't open high score file for writing");

169 if((
	`Ârötf
(
f
, "%d", 
°©e
->
hisc‹e
)) == -1)

170 
	`≥º‹
("Couldn't writeÅo high score file");

171 
°©e
->
fhisc‹e
 = sèã->
hisc‹e
;

173 
	`f˛o£
(
f
);

174 
	}
}

176 
	$ªad_hisc‹e
(
n°©e
 *
°©e
)

178 
°©e
->
hisc‹e
 = 0;

179 
	}
}

181 
	$wrôe_hisc‹e
(
n°©e
 *
°©e
Ë{
	}
}

184 
	$wûl_cﬁlide
(
n°©e
 *
°©e
, 
x
, 
y
, 
‹õ¡©i⁄
)

186 
r
, 
c
, 
xx
, 
yy
;

187 
ch
 = 0;

189 
	`døw_sh≠e
(
°©e
, sèã->
cuºít_sh≠e
.
x
, sèã->cuºít_sh≠e.
y
, 1);

190 
r
 = 0; 
ch
 < 3;Ñ++) {

191 
ch
 = 0;

192 
c
 = 0; 
ch
 < 2; c++) {

193 
ch
 = 
sh≠es
[
°©e
->
cuºít_sh≠e
.
ty≥
]

194 [
‹õ¡©i⁄
][
r
][
c
];

195 if(
ch
 == 1) {

196 
yy
 = 
y
 + 
r
;

197 
xx
 = 
x
 + 
c
;

198 if((
yy
 =
WELL_HEIGHT
Ë|| (
xx
 =
WELL_WIDTH
) ||

199 (
°©e
->
blocks
[0][
yy
][
xx
])) {

200 
	`døw_sh≠e
(
°©e
,

201 
°©e
->
cuºít_sh≠e
.
x
,

202 
°©e
->
cuºít_sh≠e
.
y
, 0);

208 
	`døw_sh≠e
(
°©e
, sèã->
cuºít_sh≠e
.
x
, sèã->cuºít_sh≠e.
y
, 0);

211 
	}
}

213 
	$døw_sh≠e
(
n°©e
 *
°©e
, 
GR_COORD
 
x
, GR_COORD 
y
, 
îa£
)

215 
r
, 
c
, 
yy
, 
xx
;

216 
GR_COLOR
 
cﬁ
;

217 
ch
 = 0;

219 if(
îa£
Ë
cﬁ
 = 0;

220 
cﬁ
 = 
°©e
->
cuºít_sh≠e
.
cﬁour
;

222 
r
 = 0; 
ch
 < 3;Ñ++) {

223 
ch
 = 0;

224 
c
 = 0; 
ch
 < 2; c++) {

225 
ch
 = 
sh≠es
[
°©e
->
cuºít_sh≠e
.
ty≥
]

226 [
°©e
->
cuºít_sh≠e
.
‹õ¡©i⁄
][
r
][
c
];

227 if(
ch
 == 1) {

228 
yy
 = 
y
 + 
r
;

229 
xx
 = 
x
 + 
c
;

230 
°©e
->
blocks
[0][
yy
][
xx
] = 
cﬁ
;

234 
	}
}

236 
	$døw_wñl
(
n°©e
 *
°©e
, 
f‹˚døw
)

238 
x
, 
y
;

240 
y
 = 
WELL_NOTVISIBLE
; y < 
WELL_HEIGHT
; y++) {

241 
x
 = 0; x < 
WELL_WIDTH
; x++) {

242 if(
f‹˚døw
 || (
°©e
->
blocks
[0][
y
][
x
] !=

243 
°©e
->
blocks
[1][
y
][
x
])) {

244 
°©e
->
blocks
[1][
y
][
x
] = state->blocks[0][y][x];

245 
	`GrSëGCF‹eground
(
°©e
->
wñlgc
,

246 
°©e
->
blocks
[0][
y
][
x
]);

247 
	`GrFûlRe˘
(
°©e
->
wñl_wödow
, sèã->
wñlgc
,

248 (
BLOCK_SIZE
 * 
x
),

249 (
BLOCK_SIZE
 * (
y
 - 
WELL_NOTVISIBLE
)),

250 
BLOCK_SIZE
, BLOCK_SIZE);

255 
	`GrFlush
();

256 
	}
}

258 
	$døw_sc‹e
(
n°©e
 *
°©e
)

260 
buf
[32];

262 
	`GrFûlRe˘
(
°©e
->
sc‹e_wödow
, sèã->
sc‹egcb
, 0, 0,

263 
SCORE_WINDOW_WIDTH
, 
SCORE_WINDOW_HEIGHT
);

265 
	`•rötf
(
buf
, "%d", 
°©e
->
sc‹e
);

266 
	`GrText
(
°©e
->
sc‹e_wödow
, sèã->
sc‹egcf
, 
TEXT_X_POSITION
,

267 
TEXT2_Y_POSITION
, 
buf
, 
	`°æí
(buf), 0);

268 
	`•rötf
(
buf
, "%d", 
°©e
->
hisc‹e
);

269 
	`GrText
(
°©e
->
sc‹e_wödow
, sèã->
sc‹egcf
, 
TEXT_X_POSITION
,

270 
TEXT_Y_POSITION
, 
buf
, 
	`°æí
(buf), 0);

271 
	}
}

273 
	$døw_√xt_sh≠e
(
n°©e
 *
°©e
)

275 
r
, 
c
, 
°¨tx
, 
°¨ty
, 
x
, 
y
;

276 
ch
 = 0;

278 
	`GrFûlRe˘
(
°©e
->
√xt_sh≠e_wödow
, sèã->
√xtsh≠egcb
, 0, 0,

279 
NEXT_SHAPE_WINDOW_WIDTH
, 
NEXT_SHAPE_WINDOW_HEIGHT
);

281 
	`GrSëGCF‹eground
(
°©e
->
√xtsh≠egcf
, sèã->
√xt_sh≠e
.
cﬁour
);

283 
°¨tx
 = (
BLOCK_SIZE
 * ((
NEXT_SHAPE_WINDOW_SIZE
 / 2) -

284 (
sh≠e_sizes
[
°©e
->
√xt_sh≠e
.
ty≥
]

285 [
°©e
->
√xt_sh≠e
.
‹õ¡©i⁄
][0] / 2)));

286 
°¨ty
 = (
BLOCK_SIZE
 * ((
NEXT_SHAPE_WINDOW_SIZE
 / 2) -

287 (
sh≠e_sizes
[
°©e
->
√xt_sh≠e
.
ty≥
]

288 [
°©e
->
√xt_sh≠e
.
‹õ¡©i⁄
][1] / 2)));

290 
r
 = 0; 
ch
 < 3;Ñ++) {

291 
ch
 = 0;

292 
c
 = 0; 
ch
 < 2; c++) {

293 
ch
 = 
sh≠es
[
°©e
->
√xt_sh≠e
.
ty≥
]

294 [
°©e
->
√xt_sh≠e
.
‹õ¡©i⁄
][
r
][
c
];

295 if(
ch
 == 1) {

296 
x
 = 
°¨tx
 + (
c
 * 
BLOCK_SIZE
);

297 
y
 = 
°¨ty
 + (
r
 * 
BLOCK_SIZE
);

298 
	`GrFûlRe˘
(
°©e
->
√xt_sh≠e_wödow
,

299 
°©e
->
√xtsh≠egcf
, 
x
, 
y
,

300 
BLOCK_SIZE
, BLOCK_SIZE);

304 
	}
}

306 
	$døw_√w_game_buâ⁄
(
n°©e
 *
°©e
)

308 
	`GrFûlRe˘
(
°©e
->
√w_game_buâ⁄
, sèã->
buâ⁄gcb
, 0, 0,

309 
NEW_GAME_BUTTON_WIDTH
, 
NEW_GAME_BUTTON_HEIGHT
);

310 
	`GrText
(
°©e
->
√w_game_buâ⁄
, sèã->
buâ⁄gcf
, 
TEXT_X_POSITION
,

311 
TEXT_Y_POSITION
, "New Game", 8, 0);

312 
	}
}

314 
	$døw_™ti˛ockwi£_buâ⁄
(
n°©e
 *
°©e
)

316 if(!
°©e
->
ru¬ög_buâ⁄s_m≠≥d
) ;

317 
	`GrFûlRe˘
(
°©e
->
™ti˛ockwi£_buâ⁄
, sèã->
buâ⁄gcb
, 0, 0,

318 
ANTICLOCKWISE_BUTTON_WIDTH
, 
ANTICLOCKWISE_BUTTON_HEIGHT
);

319 
	`GrText
(
°©e
->
™ti˛ockwi£_buâ⁄
, sèã->
buâ⁄gcf
, 
TEXT_X_POSITION
,

320 
TEXT_Y_POSITION
, " /", 4, 0);

321 
	}
}

323 
	$døw_˛ockwi£_buâ⁄
(
n°©e
 *
°©e
)

325 if(!
°©e
->
ru¬ög_buâ⁄s_m≠≥d
) ;

326 
	`GrFûlRe˘
(
°©e
->
˛ockwi£_buâ⁄
, sèã->
buâ⁄gcb
, 0, 0,

327 
CLOCKWISE_BUTTON_WIDTH
, 
CLOCKWISE_BUTTON_HEIGHT
);

328 
	`GrText
(
°©e
->
˛ockwi£_buâ⁄
, sèã->
buâ⁄gcf
, 
TEXT_X_POSITION
,

329 
TEXT_Y_POSITION
, " \\", 4, 0);

330 
	}
}

332 
	$døw_À·_buâ⁄
(
n°©e
 *
°©e
)

334 if(!
°©e
->
ru¬ög_buâ⁄s_m≠≥d
) ;

335 
	`GrFûlRe˘
(
°©e
->
À·_buâ⁄
, sèã->
buâ⁄gcb
, 0, 0,

336 
LEFT_BUTTON_WIDTH
, 
LEFT_BUTTON_HEIGHT
);

337 
	`GrText
(
°©e
->
À·_buâ⁄
, sèã->
buâ⁄gcf
, 
TEXT_X_POSITION
,

338 
TEXT_Y_POSITION
, " <", 3, 0);

339 
	}
}

341 
	$døw_right_buâ⁄
(
n°©e
 *
°©e
)

343 if(!
°©e
->
ru¬ög_buâ⁄s_m≠≥d
) ;

344 
	`GrFûlRe˘
(
°©e
->
right_buâ⁄
, sèã->
buâ⁄gcb
, 0, 0,

345 
RIGHT_BUTTON_WIDTH
, 
RIGHT_BUTTON_HEIGHT
);

346 
	`GrText
(
°©e
->
right_buâ⁄
, sèã->
buâ⁄gcf
, 
TEXT_X_POSITION
,

347 
TEXT_Y_POSITION
, " >", 4, 0);

348 
	}
}

350 
	$døw_dr›_buâ⁄
(
n°©e
 *
°©e
)

352 if(!
°©e
->
ru¬ög_buâ⁄s_m≠≥d
) ;

353 
	`GrFûlRe˘
(
°©e
->
dr›_buâ⁄
, sèã->
buâ⁄gcb
, 0, 0,

354 
DROP_BUTTON_WIDTH
, 
DROP_BUTTON_HEIGHT
);

355 
	`GrText
(
°©e
->
dr›_buâ⁄
, sèã->
buâ⁄gcf
, 
TEXT_X_POSITION
,

356 
TEXT_Y_POSITION
, " Drop", 8, 0);

357 
	}
}

359 
	$døw_∑u£_c⁄töue_buâ⁄
(
n°©e
 *
°©e
)

361 if((
°©e
->
ru¬ög_buâ⁄s_m≠≥d
Ë&& (°©e->°©ê=
STATE_STOPPED
)) {

362 
	`GrUnm≠Wödow
(
°©e
->
∑u£_c⁄töue_buâ⁄
);

363 
	`GrUnm≠Wödow
(
°©e
->
™ti˛ockwi£_buâ⁄
);

364 
	`GrUnm≠Wödow
(
°©e
->
˛ockwi£_buâ⁄
);

365 
	`GrUnm≠Wödow
(
°©e
->
À·_buâ⁄
);

366 
	`GrUnm≠Wödow
(
°©e
->
right_buâ⁄
);

367 
	`GrUnm≠Wödow
(
°©e
->
dr›_buâ⁄
);

368 
°©e
->
ru¬ög_buâ⁄s_m≠≥d
 = 0;

371 if((!
°©e
->
ru¬ög_buâ⁄s_m≠≥d
Ë&& (°©e->°©ê=
STATE_RUNNING
)){

372 
	`GrM≠Wödow
(
°©e
->
∑u£_c⁄töue_buâ⁄
);

373 
	`GrM≠Wödow
(
°©e
->
™ti˛ockwi£_buâ⁄
);

374 
	`GrM≠Wödow
(
°©e
->
˛ockwi£_buâ⁄
);

375 
	`GrM≠Wödow
(
°©e
->
À·_buâ⁄
);

376 
	`GrM≠Wödow
(
°©e
->
right_buâ⁄
);

377 
	`GrM≠Wödow
(
°©e
->
dr›_buâ⁄
);

378 
°©e
->
ru¬ög_buâ⁄s_m≠≥d
 = 1;

381 if(!
°©e
->
ru¬ög_buâ⁄s_m≠≥d
) ;

382 
	`GrFûlRe˘
(
°©e
->
∑u£_c⁄töue_buâ⁄
, sèã->
buâ⁄gcb
, 0, 0,

383 
PAUSE_CONTINUE_BUTTON_WIDTH
, 
PAUSE_CONTINUE_BUTTON_HEIGHT
);

384 if(
°©e
->°©ê=
STATE_PAUSED
) {

385 
	`GrText
(
°©e
->
∑u£_c⁄töue_buâ⁄
, sèã->
buâ⁄gcf
,

386 
TEXT_X_POSITION
, 
TEXT_Y_POSITION
, " Continue", 9, 0);

388 
	`GrText
(
°©e
->
∑u£_c⁄töue_buâ⁄
, sèã->
buâ⁄gcf
,

389 
TEXT_X_POSITION
, 
TEXT_Y_POSITION
, " Pause", 8, 0);

391 
	}
}

393 
	$block_is_Æl_ö_wñl
(
n°©e
 *
°©e
)

395 if(
°©e
->
cuºít_sh≠e
.
y
 >
WELL_NOTVISIBLE
)

399 
	}
}

401 
	$dñëe_löe
(
n°©e
 *
°©e
, 
löe
)

403 
x
, 
y
;

405 if(
löe
 < 
WELL_NOTVISIBLE
) ;

407 
y
 = 
löe
 - 1; y; y--)

408 
x
 = 
WELL_WIDTH
; x; x--)

409 
°©e
->
blocks
[0][
y
 + 1][
x
] = state->blocks[0][y][x];

411 
	`døw_wñl
(
°©e
, 0);

412 
	}
}

414 
	$block_ªached_bŸtom
(
n°©e
 *
°©e
)

416 
x
, 
y
, 
ƒ
;

418 if(!
	`block_is_Æl_ö_wñl
(
°©e
)) {

419 
°©e
->°©ê
STATE_STOPPED
;

423 
y
 = 
WELL_HEIGHT
 - 1; y; y--) {

424 
ƒ
 = 0;

425 
x
 = 0; x < 
WELL_WIDTH
; x++) {

426 if(!
°©e
->
blocks
[0][
y
][
x
]) {

427 
ƒ
 = 1;

431 if(
ƒ
) ;

432 
	`m¶ìp
(
DELETE_LINE_DELAY
);

433 
	`dñëe_löe
(
°©e
, 
y
);

434 
°©e
->
sc‹e
 +
SCORE_INCREMENT
;

435 if((
LEVELS
 > (
°©e
->
Àvñ
 + 1)) && (((state->level + 1) *

436 
LEVEL_DIVISOR
Ë<
°©e
->
sc‹e
))

437 
°©e
->
Àvñ
++;

438 
	`døw_sc‹e
(
°©e
);

439 
y
++;

442 
	`choo£_√w_sh≠e
(
°©e
);

443 
	`døw_√xt_sh≠e
(
°©e
);

444 
	}
}

446 
	$move_block
(
n°©e
 *
°©e
, 
dúe˘i⁄
)

448 if(
dúe˘i⁄
 == 0) {

449 if(!
°©e
->
cuºít_sh≠e
.
x
) ;

451 if(!
	`wûl_cﬁlide
(
°©e
, (°©e->
cuºít_sh≠e
.
x
 - 1),

452 
°©e
->
cuºít_sh≠e
.
y
,

453 
°©e
->
cuºít_sh≠e
.
‹õ¡©i⁄
)) {

454 
	`døw_sh≠e
(
°©e
, sèã->
cuºít_sh≠e
.
x
,

455 
°©e
->
cuºít_sh≠e
.
y
, 1);

456 
°©e
->
cuºít_sh≠e
.
x
--;

457 
	`døw_sh≠e
(
°©e
, sèã->
cuºít_sh≠e
.
x
,

458 
°©e
->
cuºít_sh≠e
.
y
, 0);

459 
	`døw_wñl
(
°©e
, 0);

463 if(!
	`wûl_cﬁlide
(
°©e
, (°©e->
cuºít_sh≠e
.
x
 + 1),

464 
°©e
->
cuºít_sh≠e
.
y
,

465 
°©e
->
cuºít_sh≠e
.
‹õ¡©i⁄
)) {

466 
	`døw_sh≠e
(
°©e
, sèã->
cuºít_sh≠e
.
x
,

467 
°©e
->
cuºít_sh≠e
.
y
, 1);

468 
°©e
->
cuºít_sh≠e
.
x
++;

469 
	`døw_sh≠e
(
°©e
, sèã->
cuºít_sh≠e
.
x
,

470 
°©e
->
cuºít_sh≠e
.
y
, 0);

471 
	`døw_wñl
(
°©e
, 0);

474 
	}
}

476 
	$rŸ©e_block
(
n°©e
 *
°©e
, 
dúe˘i⁄
)

478 
√w‹õ¡©i⁄
 = 0;

480 if(
dúe˘i⁄
 == 0) {

481 if(!
°©e
->
cuºít_sh≠e
.
‹õ¡©i⁄
)

482 
√w‹õ¡©i⁄
 = 
MAXORIENTATIONS
 - 1;

483 
√w‹õ¡©i⁄
 = 
°©e
->
cuºít_sh≠e
.
‹õ¡©i⁄
 - 1;

485 
√w‹õ¡©i⁄
 = 
°©e
->
cuºít_sh≠e
.
‹õ¡©i⁄
 + 1;

486 if(
√w‹õ¡©i⁄
 =
MAXORIENTATIONS
)Çeworientation = 0;

489 if(!
	`wûl_cﬁlide
(
°©e
, sèã->
cuºít_sh≠e
.
x
, sèã->cuºít_sh≠e.
y
,

490 
√w‹õ¡©i⁄
)) {

491 
	`døw_sh≠e
(
°©e
, sèã->
cuºít_sh≠e
.
x
,

492 
°©e
->
cuºít_sh≠e
.
y
, 1);

493 
°©e
->
cuºít_sh≠e
.
‹õ¡©i⁄
 = 
√w‹õ¡©i⁄
;

494 
	`døw_sh≠e
(
°©e
, sèã->
cuºít_sh≠e
.
x
,

495 
°©e
->
cuºít_sh≠e
.
y
, 0);

496 
	`døw_wñl
(
°©e
, 0);

498 
	}
}

500 
	$dr›_block_1
(
n°©e
 *
°©e
)

502 if(
	`wûl_cﬁlide
(
°©e
, sèã->
cuºít_sh≠e
.
x
,

503 (
°©e
->
cuºít_sh≠e
.
y
 + 1),

504 
°©e
->
cuºít_sh≠e
.
‹õ¡©i⁄
)) {

505 
	`block_ªached_bŸtom
(
°©e
);

509 
	`døw_sh≠e
(
°©e
, sèã->
cuºít_sh≠e
.
x
, sèã->cuºít_sh≠e.
y
, 1);

510 
°©e
->
cuºít_sh≠e
.
y
++;

511 
	`døw_sh≠e
(
°©e
, sèã->
cuºít_sh≠e
.
x
, sèã->cuºít_sh≠e.
y
, 0);

513 
	`døw_wñl
(
°©e
, 0);

516 
	}
}

518 
	$dr›_block
(
n°©e
 *
°©e
)

520 !
	`dr›_block_1
(
°©e
)Ë
	`m¶ìp
(
DROP_BLOCK_DELAY
);

521 
	}
}

523 
	$h™dÀ_exposuª_evít
(
n°©e
 *
°©e
)

525 
GR_EVENT_EXPOSURE
 *
evít
 = &
°©e
->evít.
exposuª
;

527 if(
evít
->
wid
 =
°©e
->
sc‹e_wödow
) {

528 
	`døw_sc‹e
(
°©e
);

531 if(
evít
->
wid
 =
°©e
->
√xt_sh≠e_wödow
) {

532 
	`døw_√xt_sh≠e
(
°©e
);

535 if(
evít
->
wid
 =
°©e
->
√w_game_buâ⁄
) {

536 
	`døw_√w_game_buâ⁄
(
°©e
);

539 if(
evít
->
wid
 =
°©e
->
∑u£_c⁄töue_buâ⁄
) {

540 
	`døw_∑u£_c⁄töue_buâ⁄
(
°©e
);

543 if(
evít
->
wid
 =
°©e
->
™ti˛ockwi£_buâ⁄
) {

544 
	`døw_™ti˛ockwi£_buâ⁄
(
°©e
);

547 if(
evít
->
wid
 =
°©e
->
˛ockwi£_buâ⁄
) {

548 
	`døw_˛ockwi£_buâ⁄
(
°©e
);

551 if(
evít
->
wid
 =
°©e
->
À·_buâ⁄
) {

552 
	`døw_À·_buâ⁄
(
°©e
);

555 if(
evít
->
wid
 =
°©e
->
right_buâ⁄
) {

556 
	`døw_right_buâ⁄
(
°©e
);

559 if(
evít
->
wid
 =
°©e
->
dr›_buâ⁄
) {

560 
	`døw_dr›_buâ⁄
(
°©e
);

563 if(
evít
->
wid
 =
°©e
->
wñl_wödow
) {

564 
	`døw_wñl
(
°©e
, 1);

567 
	}
}

569 
	$h™dÀ_mou£_evít
(
n°©e
 *
°©e
)

571 
GR_EVENT_MOUSE
 *
evít
 = &
°©e
->evít.
mou£
;

573 if(
evít
->
wid
 =
°©e
->
√w_game_buâ⁄
) {

574 
°©e
->°©ê
STATE_NEWGAME
;

577 if(
evít
->
wid
 =
°©e
->
∑u£_c⁄töue_buâ⁄
) {

578 if(
°©e
->°©ê=
STATE_PAUSED
Ë°©e->°©ê
STATE_RUNNING
;

579 
°©e
->°©ê
STATE_PAUSED
;

582 if(
evít
->
wid
 =
°©e
->
™ti˛ockwi£_buâ⁄
) {

583 if(
°©e
->°©ê=
STATE_PAUSED
Ë°©e->°©ê
STATE_RUNNING
;

584 
	`rŸ©e_block
(
°©e
, 0);

587 if(
evít
->
wid
 =
°©e
->
˛ockwi£_buâ⁄
) {

588 if(
°©e
->°©ê=
STATE_PAUSED
Ë°©e->°©ê
STATE_RUNNING
;

589 
	`rŸ©e_block
(
°©e
, 1);

592 if(
evít
->
wid
 =
°©e
->
À·_buâ⁄
) {

593 if(
°©e
->°©ê=
STATE_PAUSED
Ë°©e->°©ê
STATE_RUNNING
;

594 
	`move_block
(
°©e
, 0);

597 if(
evít
->
wid
 =
°©e
->
right_buâ⁄
) {

598 if(
°©e
->°©ê=
STATE_PAUSED
Ë°©e->°©ê
STATE_RUNNING
;

599 
	`move_block
(
°©e
, 1);

602 if(
evít
->
wid
 =
°©e
->
dr›_buâ⁄
) {

603 if(
°©e
->°©ê=
STATE_PAUSED
Ë°©e->°©ê
STATE_RUNNING
;

604 
	`dr›_block
(
°©e
);

607 
	}
}

609 
	$h™dÀ_keybﬂrd_evít
(
n°©e
 *
°©e
)

611 
GR_EVENT_KEYSTROKE
 *
evít
 = &
°©e
->evít.
key°roke
;

613 
evít
->
ch
) {

616 
MWKEY_CANCEL
:

617 
°©e
->°©ê
STATE_EXIT
;

621 
MWKEY_APP1
:

622 
°©e
->°©ê
STATE_NEWGAME
;

626 if(
°©e
->°©ê=
STATE_STOPPED
) ;

628 
°©e
->°©ê
STATE_RUNNING
;

630 
evít
->
ch
) {

633 
°©e
->°©ê
STATE_PAUSED
;

637 
MWKEY_LEFT
:

638 
	`move_block
(
°©e
, 0);

642 
MWKEY_RIGHT
:

643 
	`move_block
(
°©e
, 1);

647 
MWKEY_UP
:

648 
	`rŸ©e_block
(
°©e
, 0);

652 
MWKEY_DOWN
:

653 
	`rŸ©e_block
(
°©e
, 1);

656 
MWKEY_MENU
:

657 
	`dr›_block
(
°©e
);

660 
	}
}

662 
	$h™dÀ_evít
(
n°©e
 *
°©e
)

664 
°©e
->
evít
.
ty≥
) {

665 
GR_EVENT_TYPE_EXPOSURE
:

666 
	`h™dÀ_exposuª_evít
(
°©e
);

668 
GR_EVENT_TYPE_BUTTON_DOWN
:

669 
	`h™dÀ_mou£_evít
(
°©e
);

671 
GR_EVENT_TYPE_KEY_DOWN
:

672 
	`h™dÀ_keybﬂrd_evít
(
°©e
);

674 
GR_EVENT_TYPE_CLOSE_REQ
:

675 
°©e
->°©ê
STATE_EXIT
;

677 
GR_EVENT_TYPE_TIMEOUT
:

680 
	`Ârötf
(
°dîr
, "UnhandledÉventÅype %d\n",

681 
°©e
->
evít
.
ty≥
);

684 
	}
}

686 
	$˛ór_wñl
(
n°©e
 *
°©e
)

688 
x
, 
y
;

690 
y
 = 0; y < 
WELL_HEIGHT
; y++)

691 
x
 = 0; x < 
WELL_WIDTH
; x++) {

692 
°©e
->
blocks
[0][
y
][
x
] = 0;

693 
°©e
->
blocks
[1][
y
][
x
] = 0;

695 
	}
}

697 
	$choo£_√w_sh≠e
(
n°©e
 *
°©e
)

699 
°©e
->
cuºít_sh≠e
.
ty≥
 = sèã->
√xt_sh≠e
.type;

700 
°©e
->
cuºít_sh≠e
.
‹õ¡©i⁄
 = sèã->
√xt_sh≠e
.orientation;

701 
°©e
->
cuºít_sh≠e
.
cﬁour
 = sèã->
√xt_sh≠e
.colour;

702 
°©e
->
cuºít_sh≠e
.
x
 = (
WELL_WIDTH
 / 2) - 2;

703 
°©e
->
cuºít_sh≠e
.
y
 = 
WELL_NOTVISIBLE
 -

704 
sh≠e_sizes
[
°©e
->
√xt_sh≠e
.
ty≥
]

705 [
°©e
->
√xt_sh≠e
.
‹õ¡©i⁄
][1] - 1;

706 
°©e
->
√xt_sh≠e
.
ty≥
 = 
	`øndom
(Ë% 
MAXSHAPES
;

707 
°©e
->
√xt_sh≠e
.
‹õ¡©i⁄
 = 
	`øndom
(Ë% 
MAXORIENTATIONS
;

708 
°©e
->
√xt_sh≠e
.
cﬁour
 = 
block_cﬁours
[
	`øndom
() %

709 (
MAX_BLOCK_COLOUR
 + 1)];

710 
	}
}

712 
	$√w_game
(
n°©e
 *
°©e
)

714 
	`˛ór_wñl
(
°©e
);

715 if(
°©e
->
sc‹e
 > sèã->
hisc‹e
) state->hiscore = state->score;

716 
°©e
->
sc‹e
 = 0;

717 
°©e
->
Àvñ
 = 0;

718 
	`døw_sc‹e
(
°©e
);

719 
	`choo£_√w_sh≠e
(
°©e
);

720 
	`døw_√xt_sh≠e
(
°©e
);

721 
	`døw_wñl
(
°©e
, 1);

722 if(
°©e
->°©ê=
STATE_NEWGAME
Ë°©e->°©ê
STATE_RUNNING
;

723 
	}
}

725 
	$öô_game
(
n°©e
 *
°©e
)

727 
GR_WM_PROPERTIES
 
¥›s
;

728 
GR_COORD
 
x
 = 
MAIN_WINDOW_X_POSITION
;

730 if(
	`GrO≥n
() < 0) {

731 
	`Ârötf
(
°dîr
, "Couldn't connectÅo Nano-X server\n");

732 
	`exô
(1);

735 
°©e
->
maö_wödow
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 
x
,

736 
MAIN_WINDOW_Y_POSITION
,

737 
MAIN_WINDOW_WIDTH
,

738 
MAIN_WINDOW_HEIGHT
, 0,

739 
MAIN_WINDOW_BACKGROUND_COLOUR
, 0);

741 
¥›s
.
Êags
 = 
GR_WM_FLAGS_TITLE
 | 
GR_WM_FLAGS_PROPS
;

742 
¥›s
.¥›†
GR_WM_PROPS_BORDER
 | 
GR_WM_PROPS_CAPTION
 |

743 
GR_WM_PROPS_CLOSEBOX
;

744 
¥›s
.
tôÀ
 = "Nano-Tetris";

745 
	`GrSëWMPr›îtõs
(
°©e
->
maö_wödow
, &
¥›s
);

746 
	`GrSñe˘Evíts
(
°©e
->
maö_wödow
, 
GR_EVENT_MASK_EXPOSURE
 |

747 
GR_EVENT_MASK_CLOSE_REQ
 |

748 
GR_EVENT_MASK_KEY_DOWN
 |

749 
GR_EVENT_MASK_TIMEOUT
);

751 
°©e
->
sc‹e_wödow
 = 
	`GrNewWödow
(°©e->
maö_wödow
,

752 
SCORE_WINDOW_X_POSITION
,

753 
SCORE_WINDOW_Y_POSITION
,

754 
SCORE_WINDOW_WIDTH
,

755 
SCORE_WINDOW_HEIGHT
, 0,

756 
SCORE_WINDOW_BACKGROUND_COLOUR
, 0);

757 
	`GrSñe˘Evíts
(
°©e
->
sc‹e_wödow
, 
GR_EVENT_MASK_EXPOSURE
);

758 
	`GrM≠Wödow
(
°©e
->
sc‹e_wödow
);

759 
°©e
->
sc‹egcf
 = 
	`GrNewGC
();

760 
	`GrSëGCF‹eground
(
°©e
->
sc‹egcf
, 
SCORE_WINDOW_FOREGROUND_COLOUR
);

761 
	`GrSëGCBackground
(
°©e
->
sc‹egcf
, 
SCORE_WINDOW_BACKGROUND_COLOUR
);

762 
°©e
->
sc‹egcb
 = 
	`GrNewGC
();

763 
	`GrSëGCF‹eground
(
°©e
->
sc‹egcb
, 
SCORE_WINDOW_BACKGROUND_COLOUR
);

765 
°©e
->
√xt_sh≠e_wödow
 = 
	`GrNewWödow
(°©e->
maö_wödow
,

766 
NEXT_SHAPE_WINDOW_X_POSITION
,

767 
NEXT_SHAPE_WINDOW_Y_POSITION
,

768 
NEXT_SHAPE_WINDOW_WIDTH
,

769 
NEXT_SHAPE_WINDOW_HEIGHT
, 0,

770 
NEXT_SHAPE_WINDOW_BACKGROUND_COLOUR
, 0);

771 
	`GrSñe˘Evíts
(
°©e
->
√xt_sh≠e_wödow
, 
GR_EVENT_MASK_EXPOSURE
);

772 
	`GrM≠Wödow
(
°©e
->
√xt_sh≠e_wödow
);

773 
°©e
->
√xtsh≠egcf
 = 
	`GrNewGC
();

774 
°©e
->
√xtsh≠egcb
 = 
	`GrNewGC
();

775 
	`GrSëGCF‹eground
(
°©e
->
√xtsh≠egcb
,

776 
NEXT_SHAPE_WINDOW_BACKGROUND_COLOUR
);

778 
°©e
->
√w_game_buâ⁄
 = 
	`GrNewWödow
(°©e->
maö_wödow
,

779 
NEW_GAME_BUTTON_X_POSITION
,

780 
NEW_GAME_BUTTON_Y_POSITION
,

781 
NEW_GAME_BUTTON_WIDTH
,

782 
NEW_GAME_BUTTON_HEIGHT
, 0,

783 
BUTTON_BACKGROUND_COLOUR
, 0);

784 
	`GrSñe˘Evíts
(
°©e
->
√w_game_buâ⁄
, 
GR_EVENT_MASK_EXPOSURE
 |

785 
GR_EVENT_MASK_BUTTON_DOWN
);

786 
	`GrM≠Wödow
(
°©e
->
√w_game_buâ⁄
);

787 
°©e
->
buâ⁄gcf
 = 
	`GrNewGC
();

788 
	`GrSëGCF‹eground
(
°©e
->
buâ⁄gcf
, 
BUTTON_FOREGROUND_COLOUR
);

789 
	`GrSëGCBackground
(
°©e
->
buâ⁄gcf
, 
BUTTON_BACKGROUND_COLOUR
);

790 
°©e
->
buâ⁄gcb
 = 
	`GrNewGC
();

791 
	`GrSëGCF‹eground
(
°©e
->
buâ⁄gcb
, 
BUTTON_BACKGROUND_COLOUR
);

793 
°©e
->
∑u£_c⁄töue_buâ⁄
 = 
	`GrNewWödow
(°©e->
maö_wödow
,

794 
PAUSE_CONTINUE_BUTTON_X_POSITION
,

795 
PAUSE_CONTINUE_BUTTON_Y_POSITION
,

796 
PAUSE_CONTINUE_BUTTON_WIDTH
,

797 
PAUSE_CONTINUE_BUTTON_HEIGHT
, 0,

798 
BUTTON_BACKGROUND_COLOUR
, 0);

799 
	`GrSñe˘Evíts
(
°©e
->
∑u£_c⁄töue_buâ⁄
, 
GR_EVENT_MASK_EXPOSURE
 |

800 
GR_EVENT_MASK_BUTTON_DOWN
);

802 
°©e
->
™ti˛ockwi£_buâ⁄
 = 
	`GrNewWödow
(°©e->
maö_wödow
,

803 
ANTICLOCKWISE_BUTTON_X_POSITION
,

804 
ANTICLOCKWISE_BUTTON_Y_POSITION
,

805 
ANTICLOCKWISE_BUTTON_WIDTH
,

806 
ANTICLOCKWISE_BUTTON_HEIGHT
, 0,

807 
BUTTON_BACKGROUND_COLOUR
,

809 
	`GrSñe˘Evíts
(
°©e
->
™ti˛ockwi£_buâ⁄
, 
GR_EVENT_MASK_EXPOSURE
 |

810 
GR_EVENT_MASK_BUTTON_DOWN
);

812 
°©e
->
˛ockwi£_buâ⁄
 = 
	`GrNewWödow
(°©e->
maö_wödow
,

813 
CLOCKWISE_BUTTON_X_POSITION
,

814 
CLOCKWISE_BUTTON_Y_POSITION
,

815 
CLOCKWISE_BUTTON_WIDTH
,

816 
CLOCKWISE_BUTTON_HEIGHT
, 0,

817 
BUTTON_BACKGROUND_COLOUR
,

819 
	`GrSñe˘Evíts
(
°©e
->
˛ockwi£_buâ⁄
, 
GR_EVENT_MASK_EXPOSURE
 |

820 
GR_EVENT_MASK_BUTTON_DOWN
);

822 
°©e
->
À·_buâ⁄
 = 
	`GrNewWödow
(°©e->
maö_wödow
,

823 
LEFT_BUTTON_X_POSITION
,

824 
LEFT_BUTTON_Y_POSITION
,

825 
LEFT_BUTTON_WIDTH
,

826 
LEFT_BUTTON_HEIGHT
, 0,

827 
BUTTON_BACKGROUND_COLOUR
,

829 
	`GrSñe˘Evíts
(
°©e
->
À·_buâ⁄
, 
GR_EVENT_MASK_EXPOSURE
 |

830 
GR_EVENT_MASK_BUTTON_DOWN
);

832 
°©e
->
right_buâ⁄
 = 
	`GrNewWödow
(°©e->
maö_wödow
,

833 
RIGHT_BUTTON_X_POSITION
,

834 
RIGHT_BUTTON_Y_POSITION
,

835 
RIGHT_BUTTON_WIDTH
,

836 
RIGHT_BUTTON_HEIGHT
, 0,

837 
BUTTON_BACKGROUND_COLOUR
,

839 
	`GrSñe˘Evíts
(
°©e
->
right_buâ⁄
, 
GR_EVENT_MASK_EXPOSURE
 |

840 
GR_EVENT_MASK_BUTTON_DOWN
);

842 
°©e
->
dr›_buâ⁄
 = 
	`GrNewWödow
(°©e->
maö_wödow
,

843 
DROP_BUTTON_X_POSITION
,

844 
DROP_BUTTON_Y_POSITION
,

845 
DROP_BUTTON_WIDTH
,

846 
DROP_BUTTON_HEIGHT
, 0,

847 
BUTTON_BACKGROUND_COLOUR
,

849 
	`GrSñe˘Evíts
(
°©e
->
dr›_buâ⁄
, 
GR_EVENT_MASK_EXPOSURE
 |

850 
GR_EVENT_MASK_BUTTON_DOWN
);

852 
°©e
->
wñl_wödow
 = 
	`GrNewWödow
(°©e->
maö_wödow
,

853 
WELL_WINDOW_X_POSITION
,

854 
WELL_WINDOW_Y_POSITION
,

855 
WELL_WINDOW_WIDTH
,

856 
WELL_WINDOW_HEIGHT
, 0,

857 
WELL_WINDOW_BACKGROUND_COLOUR
, 0);

858 
	`GrSñe˘Evíts
(
°©e
->
wñl_wödow
, 
GR_EVENT_MASK_EXPOSURE
);

859 
	`GrM≠Wödow
(
°©e
->
wñl_wödow
);

860 
°©e
->
wñlgc
 = 
	`GrNewGC
();

862 
	`GrM≠Wödow
(
°©e
->
maö_wödow
);

864 
°©e
->°©ê
STATE_STOPPED
;

865 
°©e
->
sc‹e
 = 0;

866 
	`ªad_hisc‹e
(
°©e
);

867 
°©e
->
Àvñ
 = 0;

868 
°©e
->
ru¬ög_buâ⁄s_m≠≥d
 = 0;

870 
	`§™dom
(
	`time
(0));

872 
	`choo£_√w_sh≠e
(
°©e
);

873 
	`√w_game
(
°©e
);

874 
	}
}

876 
	$ˇlcuœã_timeout
(
n°©e
 *
°©e
)

878 
timevÆ
 
t
;

879 
u
;

881 
	`gëtimeofday
(&
t
, 
NULL
);

882 
u
 = 
t
.
tv_u£c
 + (
dñays
[
°©e
->
Àvñ
] * 1000);

883 
°©e
->
timeout
.
tv_£c
 = 
t
.tv_£¯+ (
u
 / 1000000);

884 
°©e
->
timeout
.
tv_u£c
 = 
u
 % 1000000;

885 
	}
}

887 
	$timeout_dñay
(
n°©e
 *
°©e
)

889 
timevÆ
 
t
;

890 sig√d 
s
, 
m
, 
ªt
;

892 
	`gëtimeofday
(&
t
, 
NULL
);

894 if((
t
.
tv_£c
 > 
°©e
->
timeout
.tv_sec) ||

895 ((
t
.
tv_£c
 =
°©e
->
timeout
.tv_sec) &&

896 
t
.
tv_u£c
 >
°©e
->
timeout
.tv_usec))  1;

898 
s
 = 
°©e
->
timeout
.
tv_£c
 - 
t
.tv_sec;

899 
m
 = ((
°©e
->
timeout
.
tv_u£c
 - 
t
.tv_usec) / 1000);

900 
ªt
 = ()((1000 * 
s
Ë+ 
m
);

907 if(
ªt
 <= 0)  1;

908  
ªt
;

909 
	}
}

911 
	$do_upd©e
(
n°©e
 *
°©e
)

913 
timevÆ
 
t
;

915 
	`gëtimeofday
(&
t
, 
NULL
);

917 if((
t
.
tv_£c
 > 
°©e
->
timeout
.tv_sec) ||

918 ((
t
.
tv_£c
 =
°©e
->
timeout
.tv_sec) &&

919 (
t
.
tv_u£c
 >
°©e
->
timeout
.tv_usec))) {

920 
	`dr›_block_1
(
°©e
);

921 
	`ˇlcuœã_timeout
(
°©e
);

923 
	}
}

925 
	$do_∑u£
(
n°©e
 *
°©e
)

927 
	`døw_∑u£_c⁄töue_buâ⁄
(
°©e
);

928 
°©e
->°©ê=
STATE_PAUSED
) {

929 
	`GrGëNextEvít
(&
°©e
->
evít
);

930 
	`h™dÀ_evít
(
°©e
);

932 
	`døw_∑u£_c⁄töue_buâ⁄
(
°©e
);

933 
	}
}

935 
	$waô_f‹_°¨t
(
n°©e
 *
°©e
)

937 
	`døw_∑u£_c⁄töue_buâ⁄
(
°©e
);

938 
°©e
->°©ê=
STATE_STOPPED
) {

939 
	`GrGëNextEvít
(&
°©e
->
evít
);

940 
	`h™dÀ_evít
(
°©e
);

942 if(
°©e
->°©ê=
STATE_NEWGAME
Ë°©e->°©ê
STATE_RUNNING
;

943 
	`døw_∑u£_c⁄töue_buâ⁄
(
°©e
);

944 
	`ˇlcuœã_timeout
(
°©e
);

945 
	}
}

947 
	$run_game
(
n°©e
 *
°©e
)

949 
°©e
->°©ê=
STATE_RUNNING
) {

950 
	`GrGëNextEvítTimeout
(&
°©e
->
evít
, 
	`timeout_dñay
(state));

951 
	`h™dÀ_evít
(
°©e
);

952 if(
°©e
->°©ê=
STATE_PAUSED
Ë
	`do_∑u£
(state);

953 if(
°©e
->°©ê=
STATE_RUNNING
Ë
	`do_upd©e
(state);

955 
	}
}

957 
	$maö_game_lo›
(
n°©e
 *
°©e
)

959 
	`waô_f‹_°¨t
(
°©e
);

960 
°©e
->°©ê!
STATE_EXIT
) {

961 if(
°©e
->°©ê=
STATE_RUNNING
Ë
	`run_game
(state);

962 if(
°©e
->°©ê=
STATE_STOPPED
Ë
	`waô_f‹_°¨t
(state);

963 if(
°©e
->°©ê!
STATE_EXIT
Ë
	`√w_game
(state);

965 
	}
}

967 
	$maö
(
¨gc
, *
¨gv
[])

969 
n°©e
 *
°©e
 = 
	`my_mÆloc
((nstate));

971 
	`öô_game
(
°©e
);

972 
	`maö_game_lo›
(
°©e
);

974 
	`wrôe_hisc‹e
(
°©e
);

976 
	`GrClo£
();

979 
	}
}

	@demos/nanox/ntetris.h

1 #i‚de‡
NTETRIS_H


2 
	#NTETRIS_H


	)

41 #i‚de‡
__ECOS


42 
	#USE_HISCORE_FILE


	)

43 
	#HISCORE_FILE
 "/u§/games/«nŸëris.hisc‹e"

	)

45 #unde‡
HAVE_USLEEP


46 
	#BLOCK_SIZE
 10

	)

47 
	#BORDER_WIDTH
 10

	)

48 
	#CONTROL_BAR_WIDTH
 90

	)

49 
	#BUTTON_HEIGHT
 20

	)

50 
	#BUTTON_WIDTH
 (
CONTROL_BAR_WIDTH
 - 
BORDER_WIDTH
)

	)

51 
	#BUTTON_BACKGROUND_COLOUR
 
GR_COLOR_GRAY75


	)

52 
	#BUTTON_FOREGROUND_COLOUR
 
GR_COLOR_BLACK


	)

53 
	#MOVEMENT_BUTTON_WIDTH
 ((
BUTTON_WIDTH
 / 2Ë- 1)

	)

54 
	#TEXT_X_POSITION
 5

	)

55 
	#TEXT_Y_POSITION
 15

	)

56 
	#TEXT2_Y_POSITION
 30

	)

57 
	#WELL_WIDTH
 12

	)

58 
	#WELL_HEIGHT
 28

	)

59 
	#WELL_VISIBLE_HEIGHT
 24

	)

60 
	#WELL_NOTVISIBLE
 (
WELL_HEIGHT
 - 
WELL_VISIBLE_HEIGHT
)

	)

61 
	#LEVEL_DIVISOR
 500

	)

62 #ifde‡
__ECOS


63 
	#DROP_BLOCK_DELAY
 10

	)

65 
	#DROP_BLOCK_DELAY
 25

	)

67 
	#DELETE_LINE_DELAY
 300

	)

68 
	#SCORE_INCREMENT
 100

	)

70 
	#MAIN_WINDOW_X_POSITION
 0

	)

71 
	#MAIN_WINDOW_Y_POSITION
 0

	)

72 
	#MAIN_WINDOW_WIDTH
 (
CONTROL_BAR_WIDTH
 + (2 * 
BORDER_WIDTH
) + \

73 (
WELL_WIDTH
 * 
BLOCK_SIZE
))

	)

74 
	#MAIN_WINDOW_HEIGHT
 ((2 * 
BORDER_WIDTH
) + \

75 (
WELL_VISIBLE_HEIGHT
 * 
BLOCK_SIZE
))

	)

76 
	#MAIN_WINDOW_BACKGROUND_COLOUR
 
GR_COLOR_NAVYBLUE


	)

78 
	#SCORE_WINDOW_WIDTH
 
BUTTON_WIDTH


	)

79 
	#SCORE_WINDOW_HEIGHT
 35

	)

80 
	#SCORE_WINDOW_X_POSITION
 
BORDER_WIDTH


	)

81 
	#SCORE_WINDOW_Y_POSITION
 
BORDER_WIDTH


	)

82 
	#SCORE_WINDOW_BACKGROUND_COLOUR
 
GR_COLOR_BLACK


	)

83 
	#SCORE_WINDOW_FOREGROUND_COLOUR
 
GR_COLOR_GREEN


	)

85 
	#NEXT_SHAPE_WINDOW_SIZE
 6

	)

86 
	#NEXT_SHAPE_WINDOW_WIDTH
 (
NEXT_SHAPE_WINDOW_SIZE
 * 
BLOCK_SIZE
)

	)

87 
	#NEXT_SHAPE_WINDOW_HEIGHT
 (
NEXT_SHAPE_WINDOW_SIZE
 * 
BLOCK_SIZE
)

	)

88 
	#NEXT_SHAPE_WINDOW_X_POSITION
 (
BORDER_WIDTH
 + 10)

	)

89 
	#NEXT_SHAPE_WINDOW_Y_POSITION
 ((2 * 
BORDER_WIDTH
Ë+ 
SCORE_WINDOW_HEIGHT
)

	)

90 
	#NEXT_SHAPE_WINDOW_BACKGROUND_COLOUR
 
GR_COLOR_BLACK


	)

92 
	#NEW_GAME_BUTTON_WIDTH
 
BUTTON_WIDTH


	)

93 
	#NEW_GAME_BUTTON_HEIGHT
 
BUTTON_HEIGHT


	)

94 
	#NEW_GAME_BUTTON_X_POSITION
 
BORDER_WIDTH


	)

95 
	#NEW_GAME_BUTTON_Y_POSITION
 ((3 * 
BORDER_WIDTH
Ë+ 
SCORE_WINDOW_HEIGHT
 \

96 + 
NEXT_SHAPE_WINDOW_HEIGHT
)

	)

98 
	#PAUSE_CONTINUE_BUTTON_WIDTH
 
BUTTON_WIDTH


	)

99 
	#PAUSE_CONTINUE_BUTTON_HEIGHT
 
BUTTON_HEIGHT


	)

100 
	#PAUSE_CONTINUE_BUTTON_X_POSITION
 
BORDER_WIDTH


	)

101 
	#PAUSE_CONTINUE_BUTTON_Y_POSITION
 ((4 * 
BORDER_WIDTH
) + \

102 
SCORE_WINDOW_HEIGHT
 + 
NEXT_SHAPE_WINDOW_HEIGHT
 + \

103 
NEW_GAME_BUTTON_HEIGHT
)

	)

105 
	#ANTICLOCKWISE_BUTTON_WIDTH
 
MOVEMENT_BUTTON_WIDTH


	)

106 
	#ANTICLOCKWISE_BUTTON_HEIGHT
 
BUTTON_HEIGHT


	)

107 
	#ANTICLOCKWISE_BUTTON_X_POSITION
 
BORDER_WIDTH


	)

108 
	#ANTICLOCKWISE_BUTTON_Y_POSITION
 ((5 * 
BORDER_WIDTH
) + \

109 
SCORE_WINDOW_HEIGHT
 + 
NEXT_SHAPE_WINDOW_HEIGHT
 + \

110 
NEW_GAME_BUTTON_HEIGHT
 + 
PAUSE_CONTINUE_BUTTON_HEIGHT
)

	)

112 
	#CLOCKWISE_BUTTON_WIDTH
 
MOVEMENT_BUTTON_WIDTH


	)

113 
	#CLOCKWISE_BUTTON_HEIGHT
 
BUTTON_HEIGHT


	)

114 
	#CLOCKWISE_BUTTON_X_POSITION
 (
ANTICLOCKWISE_BUTTON_X_POSITION
 + \

115 
ANTICLOCKWISE_BUTTON_WIDTH
 + 2)

	)

116 
	#CLOCKWISE_BUTTON_Y_POSITION
 
ANTICLOCKWISE_BUTTON_Y_POSITION


	)

118 
	#LEFT_BUTTON_WIDTH
 
MOVEMENT_BUTTON_WIDTH


	)

119 
	#LEFT_BUTTON_HEIGHT
 
BUTTON_HEIGHT


	)

120 
	#LEFT_BUTTON_X_POSITION
 
BORDER_WIDTH


	)

121 
	#LEFT_BUTTON_Y_POSITION
 (
ANTICLOCKWISE_BUTTON_Y_POSITION
 + \

122 
ANTICLOCKWISE_BUTTON_HEIGHT
 + 2)

	)

124 
	#RIGHT_BUTTON_WIDTH
 
MOVEMENT_BUTTON_WIDTH


	)

125 
	#RIGHT_BUTTON_HEIGHT
 
BUTTON_HEIGHT


	)

126 
	#RIGHT_BUTTON_X_POSITION
 (
LEFT_BUTTON_X_POSITION
 + 
LEFT_BUTTON_WIDTH
 + 2)

	)

127 
	#RIGHT_BUTTON_Y_POSITION
 
LEFT_BUTTON_Y_POSITION


	)

129 
	#DROP_BUTTON_WIDTH
 
BUTTON_WIDTH


	)

130 
	#DROP_BUTTON_HEIGHT
 
BUTTON_HEIGHT


	)

131 
	#DROP_BUTTON_X_POSITION
 
BORDER_WIDTH


	)

132 
	#DROP_BUTTON_Y_POSITION
 (
LEFT_BUTTON_Y_POSITION
 + 
LEFT_BUTTON_HEIGHT
 + 2)

	)

134 
	#WELL_WINDOW_WIDTH
 (
BLOCK_SIZE
 * 
WELL_WIDTH
)

	)

135 
	#WELL_WINDOW_HEIGHT
 (
BLOCK_SIZE
 * 
WELL_VISIBLE_HEIGHT
)

	)

136 
	#WELL_WINDOW_X_POSITION
 (
CONTROL_BAR_WIDTH
 + 
BORDER_WIDTH
)

	)

137 
	#WELL_WINDOW_Y_POSITION
 
BORDER_WIDTH


	)

138 
	#WELL_WINDOW_BACKGROUND_COLOUR
 
GR_COLOR_BLACK


	)

141 
	mSTATE_STOPPED
,

142 
	mSTATE_RUNNING
,

143 
	mSTATE_PAUSED
,

144 
	mSTATE_NEWGAME
,

145 
	mSTATE_EXIT
,

146 
	mSTATE_UNKNOWN


149 
GR_COLOR
 
	tblock
;

151 
	s¡ëris_sh≠e
 {

152 
	mty≥
;

153 
	m‹õ¡©i⁄
;

154 
GR_COLOR
 
	mcﬁour
;

155 
	mx
;

156 
	my
;

158 
¡ëris_sh≠e
 
	tsh≠e
;

160 
	s¡ëris_°©e
 {

161 
block
 
	mblocks
[2][
WELL_HEIGHT
][
WELL_WIDTH
];

162 
	msc‹e
;

163 
	mhisc‹e
;

164 
	mfhisc‹e
;

165 
	mÀvñ
;

166 
	m°©e
;

167 
	mru¬ög_buâ⁄s_m≠≥d
;

168 
sh≠e
 
	mcuºít_sh≠e
;

169 
sh≠e
 
	m√xt_sh≠e
;

170 
GR_WINDOW_ID
 
	mmaö_wödow
;

171 
GR_WINDOW_ID
 
	msc‹e_wödow
;

172 
GR_WINDOW_ID
 
	m√xt_sh≠e_wödow
;

173 
GR_WINDOW_ID
 
	m√w_game_buâ⁄
;

174 
GR_WINDOW_ID
 
	m∑u£_c⁄töue_buâ⁄
;

175 
GR_WINDOW_ID
 
	m™ti˛ockwi£_buâ⁄
;

176 
GR_WINDOW_ID
 
	m˛ockwi£_buâ⁄
;

177 
GR_WINDOW_ID
 
	mÀ·_buâ⁄
;

178 
GR_WINDOW_ID
 
	mright_buâ⁄
;

179 
GR_WINDOW_ID
 
	mdr›_buâ⁄
;

180 
GR_WINDOW_ID
 
	mwñl_wödow
;

181 
GR_GC_ID
 
	msc‹egcf
;

182 
GR_GC_ID
 
	msc‹egcb
;

183 
GR_GC_ID
 
	m√xtsh≠egcf
;

184 
GR_GC_ID
 
	m√xtsh≠egcb
;

185 
GR_GC_ID
 
	mbuâ⁄gcf
;

186 
GR_GC_ID
 
	mbuâ⁄gcb
;

187 
GR_GC_ID
 
	mwñlgc
;

188 
GR_EVENT
 
	mevít
;

189 
timevÆ
 
	mtimeout
;

191 
¡ëris_°©e
 
	tn°©e
;

193 *
my_mÆloc
(
size_t
 
size
);

194 
m¶ìp
(
ms
);

195 
ªad_hisc‹e
(
n°©e
 *
°©e
);

196 
wrôe_hisc‹e
(
n°©e
 *
°©e
);

197 
wûl_cﬁlide
(
n°©e
 *
°©e
, 
x
, 
y
, 
‹õ¡©i⁄
);

198 
døw_sh≠e
(
n°©e
 *
°©e
, 
GR_COORD
 
x
, GR_COORD 
y
, 
îa£
);

199 
døw_wñl
(
n°©e
 *
°©e
, 
f‹˚døw
);

200 
døw_sc‹e
(
n°©e
 *
°©e
);

201 
døw_√xt_sh≠e
(
n°©e
 *
°©e
);

202 
døw_√w_game_buâ⁄
(
n°©e
 *
°©e
);

203 
døw_™ti˛ockwi£_buâ⁄
(
n°©e
 *
°©e
);

204 
døw_˛ockwi£_buâ⁄
(
n°©e
 *
°©e
);

205 
døw_À·_buâ⁄
(
n°©e
 *
°©e
);

206 
døw_right_buâ⁄
(
n°©e
 *
°©e
);

207 
døw_dr›_buâ⁄
(
n°©e
 *
°©e
);

208 
døw_∑u£_c⁄töue_buâ⁄
(
n°©e
 *
°©e
);

209 
block_is_Æl_ö_wñl
(
n°©e
 *
°©e
);

210 
dñëe_löe
(
n°©e
 *
°©e
, 
löe
);

211 
block_ªached_bŸtom
(
n°©e
 *
°©e
);

212 
move_block
(
n°©e
 *
°©e
, 
dúe˘i⁄
);

213 
rŸ©e_block
(
n°©e
 *
°©e
, 
dúe˘i⁄
);

214 
dr›_block
(
n°©e
 *
°©e
);

215 
h™dÀ_exposuª_evít
(
n°©e
 *
°©e
);

216 
h™dÀ_mou£_evít
(
n°©e
 *
°©e
);

217 
h™dÀ_keybﬂrd_evít
(
n°©e
 *
°©e
);

218 
h™dÀ_evít
(
n°©e
 *
°©e
);

219 
˛ór_wñl
(
n°©e
 *
°©e
);

220 
choo£_√w_sh≠e
(
n°©e
 *
°©e
);

221 
√w_game
(
n°©e
 *
°©e
);

222 
öô_game
(
n°©e
 *
°©e
);

223 
ˇlcuœã_timeout
(
n°©e
 *
°©e
);

224 
timeout_dñay
(
n°©e
 *
°©e
);

225 
do_upd©e
(
n°©e
 *
°©e
);

226 
do_∑u£
(
n°©e
 *
°©e
);

227 
waô_f‹_°¨t
(
n°©e
 *
°©e
);

228 
run_game
(
n°©e
 *
°©e
);

229 
maö_game_lo›
(
n°©e
 *
°©e
);

231 
	#LEVELS
 12

	)

232 c⁄° 
	gdñays
[] = {600, 550, 500, 450, 400, 350,

234 
	#MAX_BLOCK_COLOUR
 3

	)

235 c⁄° 
GR_COLOR
 
	gblock_cﬁours
[] = {

236 
GR_COLOR_RED
, 
GR_COLOR_GREEN
, 
GR_COLOR_BLUE
, 
GR_COLOR_YELLOW


254 
	#MAXSHAPES
 7

	)

255 
	#MAXORIENTATIONS
 4

	)

256 
	#MAXCOLS
 5

	)

257 
	#MAXROWS
 4

	)

258 c⁄° 
	gsh≠es
[
MAXSHAPES
][
MAXORIENTATIONS
][
MAXROWS
][
MAXCOLS
] = {

404 c⁄° 
	gsh≠e_sizes
[
MAXSHAPES
][
MAXORIENTATIONS
][2] = {

	@demos/nanox/nxcal.c

6 
	~<°dio.h
>

7 
	~<°dlib.h
>

8 
	~<°rög.h
>

9 
	~<gë›t.h
>

10 
	~"«no-X.h
"

11 
	~"nxcﬁ‹s.h
"

13 
	#DEFAULT_DATA_FILE
 "nxˇl.d©"

	)

15 
	spoöt
 {

16 
	mx
;

17 
	my
;

20 
	#TARGET_DIST
 15

	)

21 
	#CROSS_SIZE
 15

	)

23 
poöt
 
	göput
[4];

24 
poöt
 
	gèrgë
[4];

26 
GR_WINDOW_ID
 
	gg_wid
;

27 
GR_SCREEN_INFO
 
	gg_si
;

29 
	gg_rŸ©e
 = 
MWPORTRAIT_NONE
;

31 
	g°©e
 = 0;

33 
	$ußge
()

35 
	`¥ötf
("Usage:Çxcal [-f] [-d <datafile>]\n");

36 
	`exô
(0);

37 
	}
}

40 
	$sw≠em
(*
a
, *
b
)

42 
t
 = *
a
;

43 *
a
 = *
b
;

44 *
b
 = 
t
;

45 
	}
}

48 
	$ˇlcuœã_å™sf‹m
(
GR_TRANSFORM
 * 
å™s
)

51 
GR_CAL_DATA
 
d©a
;

52 
xdiff
 = 0, 
ydiff
 = 0;

53 
xysw≠
 = 0;

58 
g_rŸ©e
) {

59 
MWPORTRAIT_NONE
:

60 
MWPORTRAIT_DOWN
:

61 i‡(
	`abs
(
öput
[0].
x
 - input[1].x) < 50)

62 
xysw≠
 = 1;

65 
MWPORTRAIT_RIGHT
:

66 
MWPORTRAIT_LEFT
:

67 i‡(
	`abs
(
öput
[1].
x
 - input[2].x) < 50)

68 
xysw≠
 = 1;

79 
g_rŸ©e
) {

80 
MWPORTRAIT_NONE
:

81 
MWPORTRAIT_DOWN
:

83 i‡(!
xysw≠
) {

84 
d©a
.
möx
 = (
öput
[0].
x
 + input[3].x) / 2;

85 
d©a
.
maxx
 = (
öput
[1].
x
 + input[2].x) / 2;

87 
d©a
.
möy
 = (
öput
[0].
y
 + input[1].y) / 2;

88 
d©a
.
maxy
 = (
öput
[3].
y
 + input[2].y) / 2;

90 
xdiff
 = (Ë(
d©a
.
maxx
 -

91 
d©a
.
möx
Ë/ (
èrgë
[1].
x
 -

92 
èrgë
[0].
x
);

93 
ydiff
 = (Ë(
d©a
.
maxy
 -

94 
d©a
.
möy
Ë/ (
èrgë
[2].
y
 -

95 
èrgë
[1].
y
);

97 
d©a
.
xªs
 = 
g_si
.
cﬁs
;

98 
d©a
.
yªs
 = 
g_si
.
rows
;

100 
d©a
.
möy
 = (
öput
[0].
y
 + input[3].y) / 2;

101 
d©a
.
maxy
 = (
öput
[1].
y
 + input[2].y) / 2;

103 
d©a
.
möx
 = (
öput
[0].
x
 + input[1].x) / 2;

104 
d©a
.
maxx
 = (
öput
[3].
x
 + input[2].x) / 2;

106 
xdiff
 = (Ë(
d©a
.
maxx
 -

107 
d©a
.
möx
Ë/ (
èrgë
[2].
y
 -

108 
èrgë
[1].
y
);

109 
ydiff
 = (Ë(
d©a
.
maxy
 -

110 
d©a
.
möy
Ë/ (
èrgë
[1].
x
 -

111 
èrgë
[0].
x
);

112 
d©a
.
xªs
 = 
g_si
.
rows
;

113 
d©a
.
yªs
 = 
g_si
.
cﬁs
;

118 
MWPORTRAIT_RIGHT
:

119 
MWPORTRAIT_LEFT
:

121 i‡(!
xysw≠
) {

122 
d©a
.
möx
 = (
öput
[2].
x
 + input[3].x) / 2;

123 
d©a
.
maxx
 = (
öput
[0].
x
 + input[1].x) / 2;

125 
d©a
.
möy
 = (
öput
[0].
y
 + input[3].y) / 2;

126 
d©a
.
maxy
 = (
öput
[1].
y
 + input[2].y) / 2;

128 
ydiff
 = (Ë(
d©a
.
maxy
 -

129 
d©a
.
möy
Ë/ (
èrgë
[1].
x
 -

130 
èrgë
[0].
x
);

131 
xdiff
 = (Ë(
d©a
.
maxx
 -

132 
d©a
.
möx
Ë/ (
èrgë
[2].
y
 -

133 
èrgë
[1].
y
);

138 
d©a
.
xªs
 = 
g_si
.
rows
;

139 
d©a
.
yªs
 = 
g_si
.
cﬁs
;

141 
d©a
.
maxy
 = (
öput
[2].
y
 + input[3].y) / 2;

142 
d©a
.
möy
 = (
öput
[0].
y
 + input[1].y) / 2;

144 
d©a
.
möx
 = (
öput
[0].
x
 + input[3].x) / 2;

145 
d©a
.
maxx
 = (
öput
[1].
x
 + input[2].x) / 2;

147 
ydiff
 = (Ë(
d©a
.
maxy
 -

148 
d©a
.
möy
Ë/ (
èrgë
[2].
y
 -

149 
èrgë
[1].
y
);

150 
xdiff
 = (Ë(
d©a
.
maxx
 -

151 
d©a
.
möx
Ë/ (
èrgë
[1].
x
 -

152 
èrgë
[0].
x
);

154 
d©a
.
xªs
 = 
g_si
.
cﬁs
;

155 
d©a
.
yªs
 = 
g_si
.
rows
;

161 
d©a
.
möx
 -(Ë(
xdiff
 * 
TARGET_DIST
);

162 
d©a
.
möy
 -(Ë(
ydiff
 * 
TARGET_DIST
);

164 
d©a
.
maxx
 +(Ë(
xdiff
 * 
TARGET_DIST
);

165 
d©a
.
maxy
 +(Ë(
ydiff
 * 
TARGET_DIST
);

172 i‡(
g_rŸ©e
 =
MWPORTRAIT_DOWN
 || g_rŸ©ê=
MWPORTRAIT_LEFT
) {

173 
	`sw≠em
(&
d©a
.
möx
, &d©a.
maxx
);

174 
	`sw≠em
(&
d©a
.
möy
, &d©a.
maxy
);

179 
	`GrCÆcTønsf‹m
(&
d©a
, 
å™s
);

180 
	}
}

183 
	$døw_èrgë
(
GR_WINDOW_ID
 
wid
, 
GR_GC_ID
 
gc
, 
x
, 
y
)

186 
	`GrSëGCF‹eground
(
gc
, 
GR_COLOR_WHITE
);

188 
	`GrFûlRe˘
(
wid
, 
gc
, 
x
 - 1, 
y
 - (
CROSS_SIZE
 / 2) - 1, 2,

189 
CROSS_SIZE
 / 2);

190 
	`GrFûlRe˘
(
wid
, 
gc
, 
x
 - 1, 
y
 + 1, 2, 
CROSS_SIZE
 / 2);

192 
	`GrFûlRe˘
(
wid
, 
gc
, 
x
 - (
CROSS_SIZE
 / 2Ë- 1, 
y
 - 1, CROSS_SIZE / 2, 2);

193 
	`GrFûlRe˘
(
wid
, 
gc
, 
x
 + 1, 
y
 - 1, 
CROSS_SIZE
 / 2, 2);

194 
	}
}

197 
	$døw_ãxt
(*
°r
, 
row
, 
GR_GC_ID
 
gc
)

199 
tw
, 
th
, 
tb
;

201 
	`GrGëGCTextSize
(
gc
, 
°r
, -1, 
GR_TFTOP
, &
tw
, &
th
, &
tb
);

202 
	`GrText
(
g_wid
, 
gc
, (
g_si
.
cﬁs
 - 
tw
Ë/ 2, 
row
, 
°r
, -1, 
GR_TFTOP
);

203 
	}
}

206 
	$ªdøw
()

208 
GR_GC_ID
 
gc
 = 
	`GrNewGC
();

209 
	`GrSëGCF‹eground
(
gc
, 
	`MWRGB
(30, 30, 30));

210 
	`GrFûlRe˘
(
g_wid
, 
gc
, 0, 0, 
g_si
.
cﬁs
, g_si.
rows
);

212 
	`GrSëGCF‹eground
(
gc
, 
GR_COLOR_WHITE
);

213 
	`GrSëGCBackground
(
gc
, 
	`MWRGB
(30, 30, 30));

215 
	`døw_ãxt
("Mi¸owödow†CÆibøti⁄", 95, 
gc
);

216 
	`døw_ãxt
("TouchÅhê¸os†haú†fúmlyÅo", 120, 
gc
);

217 
	`døw_ãxt
("ˇlibøã you∏h™dhñd", 140, 
gc
);

219 
	`døw_èrgë
(
g_wid
, 
gc
, 
èrgë
[
°©e
].
x
,Å¨gë[°©e].
y
);

220 
	`GrDe°royGC
(
gc
);

221 
	}
}

224 
	$h™dÀ_pos
(
GR_EVENT_MOUSE
 * 
øw
)

227 i‡(
øw
->
buâ⁄s
 & 
GR_BUTTON_L
) {

228 
öput
[
°©e
].
x
 = 
øw
->
roŸx
;

229 
öput
[
°©e
].
y
 = 
øw
->
roŸy
;

233 i‡(!
°©e
 && !
öput
[°©e].
x
 && !öput[°©e].
y
)

236 i‡(
°©e
 == 3)

239 
°©e
++;

240 
	`ªdøw
();

243 
	}
}

248 
	$ˇlibøã
(
GR_TRANSFORM
 * 
å™s
)

251 
	`GrGëS¸ìnInfo
(&
g_si
);

253 
èrgë
[0].
x
 = 
TARGET_DIST
;

254 
èrgë
[0].
y
 = 
TARGET_DIST
;

256 
èrgë
[1].
x
 = 
g_si
.
cﬁs
 - 
TARGET_DIST
;

257 
èrgë
[1].
y
 = 
TARGET_DIST
;

259 
èrgë
[2].
x
 = 
g_si
.
cﬁs
 - 
TARGET_DIST
;

260 
èrgë
[2].
y
 = 
g_si
.
rows
 - 
TARGET_DIST
;

262 
èrgë
[3].
x
 = 
TARGET_DIST
;

263 
èrgë
[3].
y
 = 
g_si
.
rows
 - 
TARGET_DIST
;

265 
	`GrSëTønsf‹m
(
NULL
);

267 
g_wid
 = 
	`GrNewWödowEx
(
GR_WM_PROPS_NODECORATE
, "nxˇl", 
GR_ROOT_WINDOW_ID
,

268 0, 0, 
g_si
.
cﬁs
, g_si.
rows
, 
GR_COLOR_BLACK
);

270 
	`GrSñe˘Evíts
(
g_wid
,

271 
GR_EVENT_MASK_EXPOSURE
 | 
GR_EVENT_MASK_MOUSE_POSITION
);

273 
	`GrM≠Wödow
(
g_wid
);

274 
	`GrSëFocus
(
g_wid
);

277 
GR_EVENT
 
evít
;

278 
	`GrGëNextEvít
(&
evít
);

280 i‡(
evít
.
ty≥
 =
GR_EVENT_TYPE_EXPOSURE
)

281 
	`ªdøw
();

282 i‡(
evít
.
ty≥
 =
GR_EVENT_TYPE_MOUSE_POSITION
)

283 i‡(
	`h™dÀ_pos
(&
evít
.
mou£
)) {

284 
	`ˇlcuœã_å™sf‹m
(
å™s
);

288 
	}
}

291 
	$maö
(
¨gc
, **
¨gv
)

293 
ªt
 = 0;

295 
f‹˚_ˇlibøã
 = 0;

296 
d©afûe
[128];

298 
GR_TRANSFORM
 
å™s
;

299 
GR_SCREEN_INFO
 
si
;

301 
d©afûe
[0] = 0;

303 i‡(
	`GrO≥n
() < 0) {

304 
	`Ârötf
(
°dîr
, "Couldn't connectÅo Nano-X server\n");

308 
	`GrGëS¸ìnInfo
(&
si
);

309 
g_rŸ©e
 = 
si
.
p‹åaô
;

312 *
›èrg
;

314 sig√d 
ch
 = 
	`gë›t
(
¨gc
, 
¨gv
, "fd:");

315 i‡(
ch
 == -1)

317 
ch
) {

319 
f‹˚_ˇlibøã
 = 1;

322 
	`°∫˝y
(
d©afûe
, 
›èrg
, (datafile) - 1);

325 
	`ußge
();

329 i‡(!
	`°æí
(
d©afûe
))

330 
	`°r˝y
(
d©afûe
, 
DEFAULT_DATA_FILE
);

332 
ªt
 = 
	`GrLﬂdTønsf‹mD©a
(
d©afûe
, &
å™s
);

334 i‡(!
ªt
 && !
f‹˚_ˇlibøã
)

335 
	`GrSëTønsf‹m
(&
å™s
);

337 
	`ˇlibøã
(&
å™s
);

338 
	`GrSëTønsf‹m
(&
å™s
);

339 
	`GrSaveTønsf‹mD©a
(&
å™s
, 
d©afûe
);

342 
	`GrClo£
();

344 
	}
}

	@demos/nanox/nxclock.c

8 
	~<°dio.h
>

9 
	~<°dlib.h
>

10 
	~<uni°d.h
>

11 
	~<time.h
>

12 
	~<sys/time.h
>

13 
	#MWINCLUDECOLORS


	)

14 
	~"«no-X.h
"

18 
	#CWIDTH
 100

	)

19 
	#CHEIGHT
 100

	)

24 
	#_
 ((Ë0Ë

	)

25 
	#X
 ((Ë1Ë

	)

26 
	#MASK
(
a
,
b
,
c
,
d
,
e
,
f
,
g
) \

27 (((((((((((((
a
 * 2Ë+ 
b
Ë* 2Ë+ 
c
Ë* 2Ë+ 
d
) * 2) \

28 + 
e
Ë* 2Ë+ 
f
Ë* 2Ë+ 
g
Ë<< 9)

	)

30 
GR_WINDOW_ID
 
	gw1
;

31 
GR_GC_ID
 
	ggc1
;

32 
GR_GC_ID
 
	ggc2
;

33 
	glh
 = -1, 
	glm
 = -1, 
	gls
 = -1;

34 
time_t
 
	gthí
;

36 
	gåig
[91] =

45 
do_exposuª
(
GR_EVENT_EXPOSURE
 *
ï
);

46 
do_˛ock
();

48 
do_idÀ
();

50 
bsö
(
™gÀ
);

51 
bcos
(
™gÀ
);

52 
døw_time
(
hour
, 
möuãs
, 
£c
, 
GR_GC_ID
 
gc
);

55 
	$maö
(
ac
, **
av
)

57 
GR_EVENT
 
evít
;

58 
GR_BITMAP
 
bôm≠1fg
[7];

59 
GR_BITMAP
 
bôm≠1bg
[7];

61 i‡(
	`GrO≥n
() < 0) {

62 
	`Ârötf
(
°dîr
, "cannot open graphics\n");

63 
	`exô
(1);

67 
w1
 = 
	`GrNewWödowEx
(

68 
GR_WM_PROPS_NOAUTOMOVE
|
GR_WM_PROPS_BORDER
|
GR_WM_PROPS_CAPTION
|

69 
GR_WM_PROPS_CLOSEBOX
, "nx˛ock", 
GR_ROOT_WINDOW_ID
,

70 10, 10, 
CWIDTH
, 
CHEIGHT
, 
	`GrGëSysCﬁ‹
(
GR_COLOR_WINDOW
));

72 
	`GrSñe˘Evíts
(
w1
, 
GR_EVENT_MASK_EXPOSURE
 | 
GR_EVENT_MASK_CLOSE_REQ
);

74 
gc1
 = 
	`GrNewGC
();

75 
gc2
 = 
	`GrNewGC
();

77 
	`GrSëGCF‹eground
(
gc1
, 
	`GrGëSysCﬁ‹
(
GR_COLOR_WINDOW
));

78 
	`GrSëGCBackground
(
gc1
, 
	`GrGëSysCﬁ‹
(
GR_COLOR_WINDOWTEXT
));

79 
	`GrSëGCF‹eground
(
gc2
, 
	`GrGëSysCﬁ‹
(
GR_COLOR_WINDOWTEXT
));

80 
	`GrSëGCBackground
(
gc2
, 
	`GrGëSysCﬁ‹
(
GR_COLOR_WINDOW
));

82 
bôm≠1bg
[0] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

83 
bôm≠1bg
[1] = 
	`MASK
(
_
,
X
,X,X,X,X,_);

84 
bôm≠1bg
[2] = 
	`MASK
(
X
,X,X,X,X,X,X);

85 
bôm≠1bg
[3] = 
	`MASK
(
X
,X,X,X,X,X,X);

86 
bôm≠1bg
[4] = 
	`MASK
(
X
,X,X,X,X,X,X);

87 
bôm≠1bg
[5] = 
	`MASK
(
_
,
X
,X,X,X,X,_);

88 
bôm≠1bg
[6] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

90 
bôm≠1fg
[0] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

91 
bôm≠1fg
[1] = 
	`MASK
(
_
,
X
,_,X,_,X,_);

92 
bôm≠1fg
[2] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

93 
bôm≠1fg
[3] = 
	`MASK
(
X
,
_
,_,X,X,_,X);

94 
bôm≠1fg
[4] = 
	`MASK
(
_
,_,_,_,_,_,_);

95 
bôm≠1fg
[5] = 
	`MASK
(
_
,
X
,_,_,_,X,_);

96 
bôm≠1fg
[6] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

98 
	`GrSëCurs‹
(
w1
, 7, 7, 3, 3, 
WHITE
, 
BLACK
, 
bôm≠1fg
, 
bôm≠1bg
);

99 
	`GrM≠Wödow
(
w1
);

102 
	`GrGëNextEvítTimeout
(&
evít
, 500L);

104 
evít
.
ty≥
) {

105 
GR_EVENT_TYPE_EXPOSURE
:

106 
	`do_exposuª
(&
evít
.
exposuª
);

109 
GR_EVENT_TYPE_CLOSE_REQ
:

110 
	`GrClo£
();

111 
	`exô
(0);

113 
GR_EVENT_TYPE_TIMEOUT
:

114 
	`do_˛ock
();

118 
	}
}

120 
	$bsö
(
™gÀ
)

122 if(
™gÀ
 < 91) {

123  
åig
[
™gÀ
];

124 } i‡(
™gÀ
 < 181) {

125  
åig
[180 - 
™gÀ
];

126 } i‡(
™gÀ
 < 271) {

127  -
åig
[
™gÀ
 - 180];

128 } i‡(
™gÀ
 < 361) {

129  -
åig
[360 - 
™gÀ
];

133 
	}
}

135 
	$bcos
(
™gÀ
)

137 if(
™gÀ
 < 91) {

138  
åig
[90 - 
™gÀ
];

139 } i‡(
™gÀ
 < 181) {

140  -
åig
[
™gÀ
 - 90];

141 } i‡(
™gÀ
 < 271) {

142  -
åig
[270 - 
™gÀ
];

143 } i‡(
™gÀ
 < 361) {

144  
åig
[
™gÀ
 - 270];

148 
	}
}

154 
	$do_exposuª
(
GR_EVENT_EXPOSURE
 *
ï
)

156 
GR_COORD
 
midx
 = 
CWIDTH
 / 2;

157 
GR_COORD
 
midy
 = 
CHEIGHT
 / 2;

158 
i
, 
l
;

162 
	`GrEŒù£
(
w1
, 
gc2
, 
midx
, 
midy
, midx - 1, midy - 1);

163 
i
 = 0; i < 60; i++) {

164 i‡(
i
%5 == 0) {

165 
l
 = 5;

167 
l
 = 0;

169 
	`GrLöe
(
w1
, 
gc2
,

170 
midx
 + (((midx - 3Ë* 
	`bsö
(
i
 * 6)) >> 8),

171 
midy
 + (((midy - 3Ë* 
	`bcos
(
i
 * 6)) >> 8),

172 
midx
 + (((midx - 3 - 
l
Ë* 
	`bsö
(
i
 * 6)) >> 8),

173 
midy
 + (((midy - 3 - 
l
Ë* 
	`bcos
(
i
 * 6)) >> 8));

176 
lh
 = -1; 
lm
 = -1; 
ls
 = -1;

177 
thí
 = 0;

178 
	`do_˛ock
();

179 
	}
}

181 
	$døw_time
(
hour
, 
möuãs
, 
£c
, 
GR_GC_ID
 
gc
)

183 
GR_COORD
 
midx
 = 
CWIDTH
 / 2;

184 
GR_COORD
 
midy
 = 
CHEIGHT
 / 2;

186 
	`GrLöe
(
w1
, 
gc1
,

187 
midx
 + (((midx - 8 - midx / 10Ë* 
	`bsö
(
ls
)) >> 8),

188 
midy
 - (((midy - 8 - midy / 10Ë* 
	`bcos
(
ls
)) >> 8),

189 
midx
 + (((midx - 8 - midx / 4Ë* 
	`bsö
(
ls
)) >> 8),

190 
midy
 - (((midy - 8 - 
midx
 / 4Ë* 
	`bcos
(
ls
)) >> 8));

191 
	`GrLöe
(
w1
, 
gc2
,

192 
midx
 + (((midx - 8 - midx / 10Ë* 
	`bsö
(
£c
)) >> 8),

193 
midy
 - (((midy - 8 - midy / 10Ë* 
	`bcos
(
£c
)) >> 8),

194 
midx
 + (((midx - 8 - midx / 4Ë* 
	`bsö
(
£c
)) >> 8),

195 
midy
 - (((midy - 8 - 
midx
 / 4Ë* 
	`bcos
(
£c
)) >> 8));

196 i‡((
lm
 !
möuãs
Ë|| (
ls
 == minutes)) {

197 
	`GrLöe
(
w1
, 
gc1
,

198 
midx
 + (((midx - 8 - midx / 10Ë* 
	`bsö
(
lm
)) >> 8),

199 
midy
 - (((midy - 8 - midy / 10Ë* 
	`bcos
(
lm
)) >> 8),

200 
midx
 + (((midx / 5Ë* 
	`bsö
(
lm
)) >> 8),

201 
midy
 - (((midy / 5Ë* 
	`bcos
(
lm
)) >> 8));

202 
	`GrLöe
(
w1
, 
gc2
,

203 
midx
 + (((midx - 8 - midx / 10Ë* 
	`bsö
(
möuãs
)) >> 8),

204 
midy
 - (((midy - 8 - midy / 10Ë* 
	`bcos
(
möuãs
)) >> 8),

205 
midx
 + (((midx / 5Ë* 
	`bsö
(
möuãs
)) >> 8),

206 
midy
 - (((midy / 5Ë* 
	`bcos
(
möuãs
)) >> 8));

207 
	`GrLöe
(
w1
, 
gc1
,

208 
midx
 + (((midx - 8 - midx / 2Ë* 
	`bsö
(
lh
)) >> 8),

209 
midy
 - (((midy - 8 - midy / 2Ë* 
	`bcos
(
lh
)) >> 8),

210 
midx
 + (((midx / 5Ë* 
	`bsö
(
lh
)) >> 8),

211 
midy
 - (((midy / 5Ë* 
	`bcos
(
lh
)) >> 8));

212 
	`GrLöe
(
w1
, 
gc2
,

213 
midx
 + (((midx - 8 - midx / 2Ë* 
	`bsö
(
hour
)) >> 8),

214 
midy
 - (((midy - 8 - midy / 2Ë* 
	`bcos
(
hour
)) >> 8),

215 
midx
 + (((midx / 5Ë* 
	`bsö
(
hour
)) >> 8),

216 
midy
 - (((midy / 5Ë* 
	`bcos
(
hour
)) >> 8));

218 
lh
 = 
hour
;

219 
lm
 = 
möuãs
;

220 
ls
 = 
£c
;

221 
	}
}

227 
	$do_˛ock
()

229 
timevÆ
 
tv
;

230 
timez⁄e
 
tz
;

231 
tm
 * 
ç
;

232 
time_t
 
now
;

233 
möuãs
, 
hour
, 
£c
;

235 
	`gëtimeofday
(&
tv
, &
tz
);

236 
now
 = 
tv
.
tv_£c
 - (60 * 
tz
.
tz_möuãswe°
);

237 i‡(
now
 =
thí
) {

240 
thí
 = 
now
;

241 
ç
 = 
	`gmtime
(&
now
);

242 
möuãs
 = 
ç
->
tm_mö
 * 6;

243 
£c
 = 
ç
->
tm_£c
 * 6;

244 
hour
 = 
ç
->
tm_hour
;

245 i‡(
hour
 > 12) {

246 
hour
 -= 12;

248 
hour
 = hour*30 + 
möuãs
/12;

249 
	`døw_time
(
hour
, 
möuãs
, 
£c
, 
gc2
);

250 
	}
}

256 
	$do_idÀ
()

258 
time•ec
 
idÀtime
;

259 
idÀtime
.
tv_£c
 = 0;

260 
idÀtime
.
tv_n£c
 = 100000;

261 
	`«no¶ìp
(&
idÀtime
, 
NULL
);

262 
	}
}

	@demos/nanox/nxev.c

9 
	~<°dio.h
>

10 
	~<°dlib.h
>

11 
	~<°rög.h
>

12 
	#MWINCLUDECOLORS


	)

13 
	~"«no-X.h
"

16 
GR_WINDOW_ID
 
	gw1
;

17 
GR_WINDOW_ID
 
	gw2
;

18 
GR_GC_ID
 
	ggc1
;

20 
	#ALT_CURSOR


	)

22 
	#WIDTH
 100

	)

23 
	#HEIGHT
 100

	)

25 #ifde‡
ALT_CURSOR


29 
	#_
 ((Ë0Ë

	)

30 
	#X
 ((Ë1Ë

	)

31 
	#MASK
(
a
,
b
,
c
,
d
,
e
,
f
,
g
) \

32 (((((((((((((
a
 * 2Ë+ 
b
Ë* 2Ë+ 
c
Ë* 2Ë+ 
d
) * 2) \

33 + 
e
Ë* 2Ë+ 
f
Ë* 2Ë+ 
g
Ë<< 9)

	)

36 
	s_xœt
 {

37 
GR_UPDATE_TYPE
 
	mty≥
;

38 c⁄° * 
	m«me
;

40 
_xœt
 
	tXLAT
;

42 
XLAT
 
	gupd©e_ty≥s
[] = {

44 { 
GR_UPDATE_MAP
, "GR_UPDATE_MAP" },

45 { 
GR_UPDATE_UNMAP
, "GR_UPDATE_UNMAP" },

46 { 
GR_UPDATE_MOVE
, "GR_UPDATE_MOVE" },

47 { 
GR_UPDATE_SIZE
, "GR_UPDATE_SIZE" },

48 { 
GR_UPDATE_UNMAPTEMP
, "GR_UPDATE_UNMAPTEMP" },

49 { 
GR_UPDATE_ACTIVATE
, "GR_UPDATE_ACTIVATE" },

50 { 
GR_UPDATE_DESTROY
, "GR_UPDATE_DESTROY" }

52 
	#NR_UPDATES
 7

	)

54 
	sXLAT
 {

55 
	mevít_ty≥
;

56 * 
	mevít_desc
;

59 
XLAT
 
	gèbÀ
[] = {

60 { 
GR_EVENT_TYPE_ERROR
, "GR_EVENT_TYPE_ERROR" },

61 { 
GR_EVENT_TYPE_NONE
, "GR_EVENT_TYPE_NONE" },

62 { 
GR_EVENT_TYPE_EXPOSURE
, "GR_EVENT_TYPE_EXPOSURE" },

63 { 
GR_EVENT_TYPE_BUTTON_DOWN
, "GR_EVENT_TYPE_BUTTON_DOWN" },

64 { 
GR_EVENT_TYPE_BUTTON_UP
, "GR_EVENT_TYPE_BUTTON_UP" },

65 { 
GR_EVENT_TYPE_MOUSE_ENTER
, "GR_EVENT_TYPE_MOUSE_ENTER" },

66 { 
GR_EVENT_TYPE_MOUSE_EXIT
, "GR_EVENT_TYPE_MOUSE_EXIT" },

67 { 
GR_EVENT_TYPE_MOUSE_MOTION
, "GR_EVENT_TYPE_MOUSE_MOTION" },

68 { 
GR_EVENT_TYPE_MOUSE_POSITION
, "GR_EVENT_TYPE_MOUSE_POSITION" },

69 { 
GR_EVENT_TYPE_KEY_DOWN
, "GR_EVENT_TYPE_KEY_DOWN" },

70 { 
GR_EVENT_TYPE_KEY_UP
, "GR_EVENT_TYPE_KEY_UP" },

71 { 
GR_EVENT_TYPE_FOCUS_IN
, "GR_EVENT_TYPE_FOCUS_IN" },

72 { 
GR_EVENT_TYPE_FOCUS_OUT
, "GR_EVENT_TYPE_FOCUS_OUT" },

73 { 
GR_EVENT_TYPE_FDINPUT
, "GR_EVENT_TYPE_FDINPUT" },

74 { 
GR_EVENT_TYPE_UPDATE
, "GR_EVENT_TYPE_UPDATE" },

75 { 
GR_EVENT_TYPE_CHLD_UPDATE
, "GR_EVENT_TYPE_CHLD_UPDATE" },

76 { 
GR_EVENT_TYPE_CLOSE_REQ
, "GR_EVENT_TYPE_CLOSE_REQ" },

79 
	#èbÀ_SZ
 ((
èbÀ
Ë/ —abÀ[0]))

	)

82 
	$lookupEvít
(
ty≥
)

84 
i
;

86 
i
 = 0; i < 
èbÀ_SZ
; i++)

87 i‡(
èbÀ
[
i
].
evít_ty≥
 =
ty≥
)

88  
èbÀ
[
i
].
evít_desc
;

90  
NULL
;

91 
	}
}

94 
	$maö
(
¨gc
, **
¨gv
)

96 
GR_EVENT
 
evít
;

98 i‡(
	`GrO≥n
() < 0) {

99 
	`Ârötf
(
°dîr
, "cannot open graphics\n");

100 
	`exô
(1);

103 
	`GrReqShmCmds
(65536);

105 
w1
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
,

107 
WIDTH
, 
HEIGHT
,

109 
WHITE
, 
BLACK
);

110 
	`GrSñe˘Evíts
(
w1
, 0xffffffffl);

112 
w2
 = 
	`GrNewWödow
(
w1
,

114 
WIDTH
 / 4, 
HEIGHT
 / 4,

116 
WHITE
, 
BLACK
);

117 
	`GrSñe˘Evíts
(
w2
, 0xffffffffl);

121 
GR_WM_PROPERTIES
 
¥›s
;

123 
¥›s
.
Êags
 = 
GR_WM_FLAGS_PROPS
 | 
GR_WM_FLAGS_TITLE
;

125 
¥›s
.¥›†
GR_WM_PROPS_BORDER
 | 
GR_WM_PROPS_CAPTION
 | \

126 
GR_WM_PROPS_CAPTION
 | 
GR_WM_PROPS_CLOSEBOX
;

127 
¥›s
.
tôÀ
 = "nano-X Events";

128 
	`GrSëWMPr›îtõs
(
w1
, &
¥›s
);

131 
	`GrM≠Wödow
(
w1
);

132 
	`GrM≠Wödow
(
w2
);

134 
gc1
 = 
	`GrNewGC
();

136 
	`GrSëGCF‹eground
(
gc1
, 
BLACK
);

137 
	`GrSëGCBackground
(
gc1
, 
WHITE
);

140 #ifde‡
ALT_CURSOR


142 
GR_BITMAP
 
bôm≠1fg
[7];

143 
GR_BITMAP
 
bôm≠1bg
[7];

145 
bôm≠1bg
[0] = 
	`MASK
(
X
,X,X,X,X,X,X);

146 
bôm≠1bg
[1] = 
	`MASK
(
_
,
X
,X,X,X,X,_);

147 
bôm≠1bg
[2] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

148 
bôm≠1bg
[3] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

149 
bôm≠1bg
[4] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

150 
bôm≠1bg
[5] = 
	`MASK
(
_
,
X
,X,X,X,X,_);

151 
bôm≠1bg
[6] = 
	`MASK
(
X
,X,X,X,X,X,X);

153 
bôm≠1fg
[0] = 
	`MASK
(
X
,X,X,X,X,X,X);

154 
bôm≠1fg
[1] = 
	`MASK
(
_
,
X
,X,X,X,X,_);

155 
bôm≠1fg
[2] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

156 
bôm≠1fg
[3] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

157 
bôm≠1fg
[4] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

158 
bôm≠1fg
[5] = 
	`MASK
(
_
,
X
,X,X,X,X,_);

159 
bôm≠1fg
[6] = 
	`MASK
(
X
,X,X,X,X,X,X);

161 
	`GrSëCurs‹
(
w1
, 7, 7, 3, 3, 
WHITE
, 
BLACK
, 
bôm≠1fg
, 
bôm≠1bg
);

167 
	`GrGëNextEvít
(&
evít
);

169 
	`¥ötf
("%s (0x%x)\n", \

170 
	`lookupEvít
(
evít
.
ty≥
),Évent.type);

172 
evít
.
ty≥
) {

173 
GR_EVENT_TYPE_EXPOSURE
:

175 
	`¥ötf
("\twid = %d\n", 
evít
.
exposuª
.
wid
);

176 
	`¥ötf
("\t(X, Y) = (%d, %d)\n", \

177 
evít
.
exposuª
.
x
,Évít.exposuª.
y
);

178 
	`¥ötf
("\twidth = %d, height = %d\n", \

179 
evít
.
exposuª
.
width
,Évít.exposuª.
height
);

182 
GR_EVENT_TYPE_BUTTON_DOWN
:

183 
GR_EVENT_TYPE_BUTTON_UP
:

185 
	`¥ötf
("\twid = %d\n", 
evít
.
buâ⁄
.
wid
);

186 
	`¥ötf
("\tsub-wödow id = %d\n", 
evít
.
buâ⁄
.
subwid
);

187 
	`¥ötf
("\troot window (X, Y) coordinates = (%d, %d)\n", \

188 
evít
.
buâ⁄
.
roŸx
,Évít.buâ⁄.
roŸy
);

189 
	`¥ötf
("\t(X, Y) = (%d, %d)\n", \

190 
evít
.
buâ⁄
.
x
,Évít.buâ⁄.
y
);

191 
	`¥ötf
("\tbuâ⁄s: %04X, ", 
evít
.
buâ⁄
.
buâ⁄s
);

192 
	`¥ötf
("ch™ged buâ⁄s: %04X\n", 
evít
.
buâ⁄
.
ch™gebuâ⁄s
);

193 
	`¥ötf
("\tmodifõrs: %04X\n", 
evít
.
buâ⁄
.
modifõrs
);

196 
GR_EVENT_TYPE_MOUSE_ENTER
:

197 
GR_EVENT_TYPE_MOUSE_EXIT
:

198 
GR_EVENT_TYPE_MOUSE_MOTION
:

199 
GR_EVENT_TYPE_MOUSE_POSITION
:

201 
	`¥ötf
("\twid = %d\n", 
evít
.
mou£
.
wid
);

202 
	`¥ötf
("\tsub-wödow id = %d\n", 
evít
.
mou£
.
subwid
);

203 
	`¥ötf
("\troot window (X, Y) coordinates = (%d, %d)\n", \

204 
evít
.
mou£
.
roŸx
,Évít.mou£.
roŸy
);

205 
	`¥ötf
("\t(X, Y) = (%d, %d)\n", \

206 
evít
.
mou£
.
x
,Évít.mou£.
y
);

207 
	`¥ötf
("\tbuâ⁄s: %04X\n", 
evít
.
mou£
.
buâ⁄s
);

208 
	`¥ötf
("\tmodifõrs: %04X\n", 
evít
.
mou£
.
modifõrs
);

211 
GR_EVENT_TYPE_KEY_DOWN
:

212 
GR_EVENT_TYPE_KEY_UP
:

214 
	`¥ötf
("\twid = %d\n", 
evít
.
key°roke
.
wid
);

215 
	`¥ötf
("\tsub-wödow id = %d\n", 
evít
.
key°roke
.
subwid
);

216 
	`¥ötf
("\troot window (X, Y) coordinates = (%d, %d)\n", \

217 
evít
.
key°roke
.
roŸx
,Évít.key°roke.
roŸy
);

218 
	`¥ötf
("\t(X, Y) = (%d, %d)\n", \

219 
evít
.
key°roke
.
x
,Évít.key°roke.
y
);

220 
	`¥ötf
("\tbuâ⁄s: %04X\n", 
evít
.
key°roke
.
buâ⁄s
);

221 
	`¥ötf
("\tmodifõrs: %04X\n", 
evít
.
key°roke
.
modifõrs
);

222 
	`¥ötf
("\tUnicode-16 keyvalue: %d, ASCII: %d\n", \

223 ()
evít
.
key°roke
.
ch
,Évent.keystroke.ch);

224 
	`¥ötf
("\tscancode: %02X\n",

225 ()
evít
.
key°roke
.
sˇncode
);

228 
GR_EVENT_TYPE_FOCUS_IN
:

229 
	`¥ötf
("\twid = %d\n", 
evít
.
gíîÆ
.
wid
);

230 
	`¥ötf
("\tﬁd focu†%d\n", 
evít
.
gíîÆ
.
Ÿhîid
);

232 
GR_EVENT_TYPE_FOCUS_OUT
:

233 
	`¥ötf
("\twid = %d\n", 
evít
.
gíîÆ
.
wid
);

234 
	`¥ötf
("\äew focu†%d\n", 
evít
.
gíîÆ
.
Ÿhîid
);

236 
GR_EVENT_TYPE_UPDATE
:

237 
GR_EVENT_TYPE_CHLD_UPDATE
:

239 
	`¥ötf
("\twid = %d\n", 
evít
.
upd©e
.
wid
);

240 
	`¥ötf
("\tsub-wödow id = %d\n", 
evít
.
upd©e
.
subwid
);

241 
	`¥ötf
("\t(X, Y) = (%d, %d)\n", \

242 
evít
.
upd©e
.
x
,Évít.upd©e.
y
);

243 
	`¥ötf
("\twidth = %d, height = %d\n", \

244 
evít
.
upd©e
.
width
,Évít.upd©e.
height
);

246 
GR_UPDATE_TYPE
 
u
 = 
evít
.
upd©e
.
uty≥
;

247 c⁄° * 
p
;

249 
p
 = (
u
 > 
NR_UPDATES
)? \

251 
upd©e_ty≥s
[
u
].
«me
;

253 
	`¥ötf
("\tupdate_type: %s (%d)\n",

254 
p
, 
u
);

258 
GR_EVENT_TYPE_TIMEOUT
:

259 
	`¥ötf
("\ttimeout?\n");

261 
GR_EVENT_TYPE_CLOSE_REQ
:

262 
	`GrClo£
();

263 
	`exô
(0);

269 
	}
}

	@demos/nanox/nxeyes.c

32 
	~<time.h
>

33 
	~<m©h.h
>

34 
	~<°dio.h
>

35 
	~<°dlib.h
>

37 
	~<«no-X.h
>

38 
	~<nxcﬁ‹s.h
>

39 
	~"nxeyes.h
"

41 
	#EYE_SPACING
 4

	)

42 
	#BLINK_CLOSED_TIME
 100

	)

43 
	#BLINK_MIN_OPEN_TIME
 1000

	)

44 
	#BLINK_MAX_OPEN_TIME
 8000

	)

45 
	#MAX_EYE_MOVEMENT
 10

	)

48 
GR_WINDOW_ID
 
	mwid
;

49 
GR_GC_ID
 
	mgc
;

50 
	mbuâ⁄_down
;

51 
	mmou£_moved
;

52 
GR_COORD
 
	mx
;

53 
GR_COORD
 
	my
;

54 
GR_COORD
 
	mmou£x
;

55 
GR_COORD
 
	mmou£y
;

56 
GR_COORD
 
	mﬁdx
;

57 
GR_COORD
 
	mﬁdy
;

58 
	meyes_˛o£d
;

59 
GR_TIMER_ID
 
	mtid
;

60 
GR_COORD
 
	mlx
;

61 
GR_COORD
 
	mly
;

62 
GR_COORD
 
	mrx
;

63 
GR_COORD
 
	mry
;

64 
GR_COORD
 
	mﬁx
;

65 
GR_COORD
 
	mﬁy
;

66 
GR_COORD
 
	m‹x
;

67 
GR_COORD
 
	m‹y
;

68 
	mquô
;

69 } 
	tnxeyes_°©e
;

71 
nxeyes_°©e
 *
öô
();

72 
buâ⁄_evít
(
GR_EVENT_BUTTON
 *
ev
, 
nxeyes_°©e
 *
°©e
);

73 
posôi⁄_evít
(
GR_EVENT_MOUSE
 *
ev
, 
nxeyes_°©e
 *
°©e
);

74 
°¨t_blök_timî
(
nxeyes_°©e
 *
°©e
);

75 
timî_evít
(
GR_EVENT_TIMER
 *
ev
, 
nxeyes_°©e
 *
°©e
);

76 
ˇlcuœã_pupû_posôi⁄
(
GR_COORD
 
wödow_x
, GR_COORD 
wödow_y
,

77 
GR_COORD
 
eye˚¡ª_x
, GR_COORD 
eye˚¡ª_y
,

78 
GR_COORD
 
mou£x
, GR_COORD 
mou£y
,

79 
GR_COORD
 *
ªtx
, GR_COORD *
ªty
);

80 
døw_eyes
(
nxeyes_°©e
 *
°©e
, 
fuŒ_ªdøw
);

82 
nxeyes_°©e
 *
	$öô
()

84 
nxeyes_°©e
 *
°©e
;

85 
GR_REGION_ID
 
rid1
, 
rid2
;

86 
GR_SCREEN_INFO
 
si
;

87 
GR_WM_PROPERTIES
 
¥›s
;

89 if(!(
°©e
 = 
	`mÆloc
((
nxeyes_°©e
)))Ë 
NULL
;

90 
°©e
->
ﬁdx
 = sèã->
ﬁdy
 = sèã->
x
 = sèã->
y
 = 0;

91 
°©e
->
buâ⁄_down
 = sèã->
eyes_˛o£d
 = sèã->
quô
 = 0;

92 
°©e
->
ﬁx
 = sèã->
‹x
 = 
EYEMASK_WIDTH
 / 2;

93 
°©e
->
ﬁy
 = sèã->
‹y
 = 
EYEMASK_HEIGHT
 / 2;

94 
	`GrGëS¸ìnInfo
(&
si
);

95 
°©e
->
mou£x
 = 
si
.
xpos
;

96 
°©e
->
mou£y
 = 
si
.
ypos
;

97 
°©e
->
mou£_moved
 = 1;

98 
°©e
->
gc
 = 
	`GrNewGC
();

99 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
GR_COLOR_WHITE
);

100 
	`GrSëGCBackground
(
°©e
->
gc
, 
GR_COLOR_BLACK
);

102 
°©e
->
wid
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 0, 0, (
EYEFG_HEIGHT
 * 2) +

103 
EYE_SPACING
, 
EYEFG_HEIGHT
, 0, 
GR_COLOR_WHITE
, 0);

105 
rid1
 = 
	`GrNewBôm≠Regi⁄
(
eyemask_bôs
, 
EYEMASK_WIDTH
, 
EYEMASK_HEIGHT
);

106 
rid2
 = 
	`GrNewBôm≠Regi⁄
(
eyemask_bôs
, 
EYEMASK_WIDTH
, 
EYEMASK_HEIGHT
);

107 
	`GrOff£tRegi⁄
(
rid2
, 
EYEMASK_WIDTH
 + 
EYE_SPACING
, 0);

108 
	`GrUni⁄Regi⁄
(
rid1
,Ñid1, 
rid2
);

109 
	`GrSëWödowRegi⁄
(
°©e
->
wid
, 
rid1
, 
GR_WINDOW_BOUNDING_MASK
);

110 
	`GrDe°royRegi⁄
(
rid1
);

111 
	`GrDe°royRegi⁄
(
rid2
);

113 
¥›s
.
Êags
 = 
GR_WM_FLAGS_PROPS
;

114 
¥›s
.¥›†
GR_WM_PROPS_NODECORATE
;

115 
	`GrSëWMPr›îtõs
(
°©e
->
wid
, &
¥›s
);

117 
	`GrSñe˘Evíts
(
°©e
->
wid
, 
GR_EVENT_MASK_CLOSE_REQ
 |

118 
GR_EVENT_MASK_MOUSE_POSITION
 |

119 
GR_EVENT_MASK_BUTTON_UP
 |

120 
GR_EVENT_MASK_BUTTON_DOWN
 |

121 
GR_EVENT_MASK_EXPOSURE
 |

122 
GR_EVENT_MASK_TIMER
);

124 
	`GrSñe˘Evíts
(
GR_ROOT_WINDOW_ID
, 
GR_EVENT_MASK_MOUSE_POSITION
);

126 
	`GrM≠Wödow
(
°©e
->
wid
);

128 
	`§™d
(
	`time
(0));

129 
	`°¨t_blök_timî
(
°©e
);

131  
°©e
;

132 
	}
}

134 
	$buâ⁄_evít
(
GR_EVENT_BUTTON
 *
ev
, 
nxeyes_°©e
 *
°©e
)

136 if(
ev
->
wid
 !
°©e
->wid) ;

137 if(
ev
->
ty≥
 =
GR_EVENT_TYPE_BUTTON_DOWN
) {

138 if(
ev
->
buâ⁄s
 & 
GR_BUTTON_L
) {

139 
°©e
->
buâ⁄_down
 = 1;

140 
°©e
->
x
 = 
ev
->x;

141 
°©e
->
y
 = 
ev
->y;

142 
	`GrRai£Wödow
(
°©e
->
wid
);

144 if(
ev
->
buâ⁄s
 & 
GR_BUTTON_R
Ë
°©e
->
quô
 = 1;

145 } 
°©e
->
buâ⁄_down
 = 0;

146 
	}
}

148 
	$posôi⁄_evít
(
GR_EVENT_MOUSE
 *
ev
, 
nxeyes_°©e
 *
°©e
)

150 
GR_COORD
 
√wx
, 
√wy
;

152 
°©e
->
mou£_moved
 = 1;

153 
°©e
->
mou£x
 = 
ev
->
roŸx
;

154 
°©e
->
mou£y
 = 
ev
->
roŸy
;

156 if(
ev
->
wid
 =
GR_ROOT_WINDOW_ID
) ;

158 if(!
°©e
->
buâ⁄_down
) ;

160 
√wx
 = 
ev
->
roŸx
 - 
°©e
->
x
;

161 
√wy
 = 
ev
->
roŸy
 - 
°©e
->
y
;

163 if(
√wx
 !
°©e
->
ﬁdx
 || 
√wy
 !°©e->
ﬁdy
) {

164 
	`GrMoveWödow
(
ev
->
wid
, 
√wx
, 
√wy
);

165 
°©e
->
ﬁdx
 = 
√wx
;

166 
°©e
->
ﬁdy
 = 
√wy
;

168 
	}
}

170 
	$°¨t_blök_timî
(
nxeyes_°©e
 *
°©e
)

172 
time
;

174 if(
°©e
->
eyes_˛o£d
Ë
time
 = 
BLINK_CLOSED_TIME
;

175 
time
 = (
	`ønd
(Ë% (
BLINK_MAX_OPEN_TIME
 - 
BLINK_MIN_OPEN_TIME
)) +

176 
BLINK_MIN_OPEN_TIME
;

178 
°©e
->
tid
 = 
	`GrCª©eTimî
(°©e->
wid
, 
time
);

179 
	}
}

181 
	$timî_evít
(
GR_EVENT_TIMER
 *
ev
, 
nxeyes_°©e
 *
°©e
)

183 if(
ev
->
tid
 !
°©e
->tid) ;

186 
	`GrDe°royTimî
(
°©e
->
tid
);

187 
°©e
->
tid
 = 0;

189 if(
°©e
->
eyes_˛o£d
) {

190 
°©e
->
eyes_˛o£d
 = 0;

191 
	`°¨t_blök_timî
(
°©e
);

193 
°©e
->
eyes_˛o£d
 = 1;

194 
	`°¨t_blök_timî
(
°©e
);

197 
	`døw_eyes
(
°©e
, 1);

198 
	}
}

200 
	$ˇlcuœã_pupû_posôi⁄
(
GR_COORD
 
wödow_x
, GR_COORD 
wödow_y
,

201 
GR_COORD
 
eye˚¡ª_x
, GR_COORD 
eye˚¡ª_y
,

202 
GR_COORD
 
mou£x
, GR_COORD 
mou£y
,

203 
GR_COORD
 *
ªtx
, GR_COORD *
ªty
)

205 
a
;

206 
ªvx
, 
ªvy
;

207 
GR_COORD
 
rx
, 
ry
, 
dx
, 
dy
, 
x
, 
y
;

209 
rx
 = 
eye˚¡ª_x
 + 
wödow_x
;

210 
dx
 = 
mou£x
 - 
rx
;

211 if(
dx
 < 0) {

212 
dx
 = -dx;

213 
ªvx
 = 1;

214 } 
ªvx
 = 0;

216 
ry
 = 
eye˚¡ª_y
 + 
wödow_y
;

217 
dy
 = 
mou£y
 - 
ry
;

218 if(
dy
 < 0) {

219 
dy
 = -dy;

220 
ªvy
 = 1;

221 } 
ªvy
 = 0;

223 if(
	`hypŸ
(
dx
, 
dy
Ë<
MAX_EYE_MOVEMENT
) {

224 
x
 = 
dx
;

225 
y
 = 
dy
;

227 
a
 = 
	`©™
(()
dy
 / ()
dx
);

228 
x
 = (
GR_COORD
)(
	`cos
(
a
Ë* ()
MAX_EYE_MOVEMENT
);

229 
y
 = (
GR_COORD
)(
	`sö
(
a
Ë* ()
MAX_EYE_MOVEMENT
);

232 if(
ªvx
Ë
x
 = -x;

233 if(
ªvy
Ë
y
 = -y;

235 *
ªtx
 = 
x
 + 
eye˚¡ª_x
 - (
PUPIL_WIDTH
 / 2);

236 *
ªty
 = 
y
 + 
eye˚¡ª_y
 - (
PUPIL_WIDTH
 / 2);

237 
	}
}

239 
	$døw_eyes
(
nxeyes_°©e
 *
°©e
, 
fuŒ_ªdøw
)

241 
GR_COORD
 
x
, 
y
;

242 
GR_BITMAP
 *
bôs
;

244 if(
fuŒ_ªdøw
) {

245 if(
°©e
->
eyes_˛o£d
Ë
bôs
 = 
eye˛o£_bôs
;

246 
bôs
 = 
eyefg_bôs
;

248 
	`GrBôm≠
(
°©e
->
wid
, sèã->
gc
, 0, 0, 
EYEFG_WIDTH
,

249 
EYEFG_HEIGHT
, 
bôs
);

250 
	`GrBôm≠
(
°©e
->
wid
, sèã->
gc
, 
EYEFG_WIDTH
 + 
EYE_SPACING
, 0,

251 
EYEFG_WIDTH
, 
EYEFG_HEIGHT
, 
bôs
);

254 if(
°©e
->
mou£_moved
) {

255 
x
 = 
EYEFG_WIDTH
 / 2;

256 
y
 = 
EYEFG_HEIGHT
 / 2;

257 
	`ˇlcuœã_pupû_posôi⁄
(
°©e
->
ﬁdx
, sèã->
ﬁdy
,

258 (
EYEFG_WIDTH
 / 2),

259 (
EYEFG_HEIGHT
 / 2), 
°©e
->
mou£x
,

260 
°©e
->
mou£y
, &°©e->
lx
, &°©e->
ly
);

261 
	`ˇlcuœã_pupû_posôi⁄
(
°©e
->
ﬁdx
, sèã->
ﬁdy
,

262 (
EYEFG_WIDTH
 / 2) + EYEFG_WIDTH

263 + 
EYE_SPACING
, (
EYEFG_WIDTH
 / 2),

264 
°©e
->
mou£x
, sèã->
mou£y
, &°©e->
rx
, &°©e->
ry
);

267 if(
°©e
->
eyes_˛o£d
) ;

269 
	`GrCÀ¨Aªa
(
°©e
->
wid
, sèã->
ﬁx
, sèã->
ﬁy
, 
PUPIL_WIDTH
,

270 
PUPIL_HEIGHT
, 0);

271 
	`GrBôm≠
(
°©e
->
wid
, sèã->
gc
, sèã->
lx
, sèã->
ly
, 
PUPIL_WIDTH
,

272 
PUPIL_HEIGHT
, 
pupû_bôs
);

273 
	`GrCÀ¨Aªa
(
°©e
->
wid
, sèã->
‹x
, sèã->
‹y
, 
PUPIL_WIDTH
,

274 
PUPIL_HEIGHT
, 0);

275 
	`GrBôm≠
(
°©e
->
wid
, sèã->
gc
, sèã->
rx
, sèã->
ry
, 
PUPIL_WIDTH
,

276 
PUPIL_HEIGHT
, 
pupû_bôs
);

278 
°©e
->
ﬁx
 = sèã->
lx
;

279 
°©e
->
ﬁy
 = sèã->
ly
;

280 
°©e
->
‹x
 = sèã->
rx
;

281 
°©e
->
‹y
 = sèã->
ry
;

282 
	}
}

284 
	$maö
()

286 
GR_EVENT
 
evít
;

287 
nxeyes_°©e
 *
°©e
;

289 if(
	`GrO≥n
() < 0) {

290 
	`Ârötf
(
°dîr
, "Couldn't connectÅo Nano-X server\n");

294 if(!(
°©e
 = 
	`öô
())) {

295 
	`Ârötf
(
°dîr
, "Couldn'tállocate state structure\n");

299 !
°©e
->
quô
) {

300 
	`GrGëNextEvít
(&
evít
);

301 
evít
.
ty≥
) {

302 
GR_EVENT_TYPE_CLOSE_REQ
:

303 
°©e
->
quô
 = 1;

305 
GR_EVENT_TYPE_MOUSE_POSITION
:

306 
	`posôi⁄_evít
(&
evít
.
mou£
, 
°©e
);

308 
GR_EVENT_TYPE_BUTTON_UP
:

309 
GR_EVENT_TYPE_BUTTON_DOWN
:

310 
	`buâ⁄_evít
(&
evít
.
buâ⁄
, 
°©e
);

312 
GR_EVENT_TYPE_EXPOSURE
:

313 
	`døw_eyes
(
°©e
, 1);

315 
GR_EVENT_TYPE_TIMER
:

316 
	`timî_evít
(&
evít
.
timî
, 
°©e
);

321 if(
°©e
->
mou£_moved
) {

322 
	`døw_eyes
(
°©e
, 0);

323 
°©e
->
mou£_moved
 = 0;

327 
	`GrClo£
();

328 
	`‰ì
(
°©e
);

331 
	}
}

	@demos/nanox/nxeyes.h

9 
	#EYEFG_WIDTH
 39

	)

10 
	#EYEFG_HEIGHT
 39

	)

12 
GR_BITMAP
 
	geyefg_bôs
[] = {

37 
	#EYEMASK_WIDTH
 39

	)

38 
	#EYEMASK_HEIGHT
 39

	)

40 
GR_BITMAP
 
	geyemask_bôs
[] = {

65 
	#PUPIL_WIDTH
 9

	)

66 
	#PUPIL_HEIGHT
 9

	)

68 
GR_BITMAP
 
	gpupû_bôs
[] = {

80 
	#EYECLOSE_WIDTH
 39

	)

81 
	#EYECLOSE_HEIGHT
 39

	)

83 
GR_BITMAP
 
	geye˛o£_bôs
[] = {

	@demos/nanox/nxlsclients.c

7 
	~<°dio.h
>

8 
	~<°dlib.h
>

9 
	#MWINCLUDECOLORS


	)

10 
	~"«no-X.h
"

11 
	~"wödef.h
"

14 
	#LIMIT
 10000

	)

16 
	s_cﬁour
 {

17 
	mcﬁour
;

18 * 
	m«me
;

20 
_cﬁour
 
	tCOLOURS
;

22 
COLOURS
 
	gcﬁour_èbÀ
[] = {

23 { 
BLACK
, "Black" },

24 { 
BLUE
, "Blue" },

25 { 
GREEN
, "Green"},

26 { 
CYAN
, "Cyan" },

27 { 
RED
, "Red" },

28 { 
MAGENTA
, "Magenta" },

29 { 
BROWN
, "Brown" },

30 { 
LTGRAY
, "LightGray" },

31 { 
GRAY
, "Gray" },

32 { 
DKGRAY
, "DarkGray" },

33 { 
LTBLUE
, "LightBlue" },

34 { 
LTGREEN
, "LightGreen" },

35 { 
LTCYAN
, "LightCyan" },

36 { 
LTRED
, "LightRed" },

37 { 
LTMAGENTA
, "LightMagenta" },

38 { 
YELLOW
, "Yellow" },

39 { 
WHITE
, "White" }

41 
	#NR_COLOURS
 ((
cﬁour_èbÀ
Ë/ (cﬁour_èbÀ[0]))

	)

44 
	$lookupCﬁour
(
c
)

46 
i
;

48 
i
 = 0; i < 
NR_COLOURS
; i++)

49 i‡(
c
 =
cﬁour_èbÀ
[
i
].
cﬁour
)

50  
cﬁour_èbÀ
[
i
].
«me
;

53 
	}
}

55 
	s_xœt
 {

56 
	mevít_ty≥
;

57 * 
	mevít_desc
;

59 
_xœt
 
	tXLAT
;

61 
XLAT
 
	gevít_èbÀ
[] = {

62 { 
GR_EVENT_TYPE_ERROR
, "GR_EVENT_MASK_ERROR" },

64 { 
GR_EVENT_TYPE_EXPOSURE
, "GR_EVENT_MASK_EXPOSURE" },

65 { 
GR_EVENT_TYPE_BUTTON_DOWN
, "GR_EVENT_MASK_BUTTON_DOWN" },

66 { 
GR_EVENT_TYPE_BUTTON_UP
, "GR_EVENT_MASK_BUTTON_UP" },

67 { 
GR_EVENT_TYPE_MOUSE_ENTER
, "GR_EVENT_MASK_MOUSE_ENTER" },

68 { 
GR_EVENT_TYPE_MOUSE_EXIT
, "GR_EVENT_MASK_MOUSE_EXIT" },

69 { 
GR_EVENT_TYPE_MOUSE_MOTION
, "GR_EVENT_MASK_MOUSE_MOTION" },

70 { 
GR_EVENT_TYPE_MOUSE_POSITION
, "GR_EVENT_MASK_MOUSE_POSITION" },

71 { 
GR_EVENT_TYPE_KEY_DOWN
, "GR_EVENT_MASK_KEY_DOWN" },

72 { 
GR_EVENT_TYPE_KEY_UP
, "GR_EVENT_MASK_KEY_UP" },

73 { 
GR_EVENT_TYPE_FOCUS_IN
, "GR_EVENT_MASK_FOCUS_IN" },

74 { 
GR_EVENT_TYPE_FOCUS_OUT
, "GR_EVENT_MASK_FOCUS_OUT" },

75 { 
GR_EVENT_TYPE_FDINPUT
, "GR_EVENT_MASK_FDINPUT" },

76 { 
GR_EVENT_TYPE_UPDATE
, "GR_EVENT_MASK_UPDATE" },

77 { 
GR_EVENT_TYPE_CHLD_UPDATE
, "GR_EVENT_MASK_CHLD_UPDATE" },

78 { 
GR_EVENT_TYPE_CLOSE_REQ
, "GR_EVENT_MASK_CLOSE_REQ" }

80 
	#NR_MASKS
 ((
evít_èbÀ
Ë/ ”vít_èbÀ[0]))

	)

82 
	s_wm_¥›s
 {

83 
GR_WM_PROPS
 
	m¥›
;

84 * 
	m¥›_symbﬁ
;

85 * 
	m¥›_des¸
;

87 
_wm_¥›s
 
	tWM_PROPS
;

89 
WM_PROPS
 
	g¥›s_èbÀ
[] = {

91 { 
GR_WM_PROPS_NOBACKGROUND
, "GR_WM_PROPS_NOBACKGROUND", "Don't draw window background" },

92 { 
GR_WM_PROPS_NOFOCUS
, "GR_WM_PROPS_NOFOCUS", "Don't set focusÅoÅhis window" },

93 { 
GR_WM_PROPS_NOMOVE
, "GR_WM_PROPS_NOMOVE", "Don'tÜet user move window" },

94 { 
GR_WM_PROPS_NORAISE
, "GR_WM_PROPS_NORAISE", "Don'tÜet userÑaise window" },

95 { 
GR_WM_PROPS_NODECORATE
, "GR_WM_PROPS_NODECORATE", "Don'tÑedecorate window" },

96 { 
GR_WM_PROPS_NOAUTOMOVE
, "GR_WM_PROPS_NOAUTOMOVE", "Don't move window on decorating" },

99 { 
GR_WM_PROPS_APPWINDOW
, "GR_WM_PROPS_APPWINDOW", "LeaveáppearanceÅo WM" },

100 { 
GR_WM_PROPS_APPMASK
, "GR_WM_PROPS_APPMASK", "Appearance mask" },

101 { 
GR_WM_PROPS_BORDER
, "GR_WM_PROPS_BORDER", "SingleÜine border" },

102 { 
GR_WM_PROPS_APPFRAME
, "GR_WM_PROPS_APPFRAME", "3Dápp frame" },

103 { 
GR_WM_PROPS_CAPTION
, "GR_WM_PROPS_CAPTION", "Title bar" },

104 { 
GR_WM_PROPS_CLOSEBOX
, "GR_WM_PROPS_CLOSEBOX", "Close box" },

106 { 
GR_WM_PROPS_MAXIMIZED
, "GR_WM_PROPS_MAXIMIZED", "Application is maximized" }

109 
	#NR_PROPS
 ((
¥›s_èbÀ
Ë/ ’r›s_èbÀ[0]))

	)

112 
	$maö
(
¨gc
, * 
¨gv
[])

114 
GR_WINDOW_ID
 
w
;

115 
GR_WINDOW_INFO
 
öfo
;

117 i‡(
	`GrO≥n
() < 0) {

118 
	`Ârötf
(
°dîr
, "nxlsclients: cannot open graphics\n");

119 
	`exô
(1);

122 
w
 = 0; w < 
LIMIT
; w++) {

123 
öfo
.
wid
 = -1;

125 
	`GrGëWödowInfo
(
w
, &
öfo
);

127 i‡(
öfo
.
wid
 == -1) {

128 
	`¥ötf
("Quîy wid = %d, GrGëWödowInfo(Ëi†nŸ w‹kög!\n", 
w
);

131 i‡(
öfo
.
wid
 == 0) {

133 
	`¥ötf
("Quîy wid = %d --> d€†nŸÉxi°\n", 
w
);

137 
	`¥ötf
("Wödow id = %d\n", 
öfo
.
wid
);

138 
	`¥ötf
("\tAbsﬁuã uµî-À· X: %d\n", 
öfo
.
x
);

139 
	`¥ötf
("\tAbsﬁuã uµî-À· Y: %d\n", 
öfo
.
y
);

140 
	`¥ötf
("\tWidth = %d\n", 
öfo
.
width
);

141 
	`¥ötf
("\tHeighà%d\n", 
öfo
.
height
);

142 
	`¥ötf
("\tBorder: size = %d, colour = %s (#%06lX)\n", \

143 
öfo
.
b‹dîsize
,

144 
	`lookupCﬁour
(
öfo
.
b‹dîcﬁ‹
), info.bordercolor);

145 
	`¥ötf
("\tBackground colour = %s (#%06lX)\n", \

146 
	`lookupCﬁour
(
öfo
.
background
), info.background);

148 
	`¥ötf
("\tP¨íà%d\n", 
öfo
.
∑ª¡
);

149 
	`¥ötf
("\tFú° chûd = %d\n", 
öfo
.
chûd
);

150 
	`¥ötf
("\tNexàsiblög? = %d\n", 
öfo
.
siblög
);

152 
	`¥ötf
("\t%söput-⁄ly, ", (
öfo
.
öput⁄ly
 =
TRUE
)?"": "not ");

153 
	`¥ötf
("%sm≠≥d", (
öfo
.
m≠≥d
 =
TRUE
)?"": "not ");

154 i‡(
öfo
.
m≠≥d
 !
TRUE
)

155 
	`¥ötf
(",Ñólized = %d", 
öfo
.
ªÆized
);

156 
	`¥ötf
("\n");

158 
	`¥ötf
("\tEvíàmask (0x%08lX):\n", 
öfo
.
evítmask
);

160 
i
, 
n
 = 0;

161 
GR_EVENT_MASK
 
tmp
 = 
öfo
.
evítmask
;

163 
i
 = 0; i < 
NR_MASKS
; i++) {

164 
GR_EVENT_MASK
 
mask
 = 
	`GR_EVENTMASK
(
evít_èbÀ
[
i
].
evít_ty≥
);

166 i‡((
tmp
 & 
mask
) == mask) {

167 
	`¥ötf
("\t\t%s\n", 
evít_èbÀ
[
i
].
evít_desc
);

168 
n
++;

171 i‡(!
n
)

172 
	`¥ötf
("\t\tGR_EVENT_MASK_NONE (?!?!?)\n");

176 
	`¥ötf
("\tWM Properties:\n");

178 
GR_WM_PROPERTIES
 
wm_¥›s
;

180 
	`GrGëWMPr›îtõs
(
w
, &
wm_¥›s
);

182 
	`¥ötf
("\t\tTitle: ");

183 i‡((
wm_¥›s
.
Êags
 & 
GR_WM_FLAGS_TITLE
 ) == GR_WM_FLAGS_TITLE)

184 
	`¥ötf
("'%s'\n", (*)
wm_¥›s
.
tôÀ
 ?

185 (*)
wm_¥›s
.
tôÀ
 : "(null)");

187 
	`¥ötf
("<untitled>\n");

188 i‡(
wm_¥›s
.
tôÀ
)

189 
	`‰ì
(
wm_¥›s
.
tôÀ
);

191 
	`¥ötf
("\t\tBackground colour: ");

192 i‡((
wm_¥›s
.
Êags
 & 
GR_WM_FLAGS_BACKGROUND
) == GR_WM_FLAGS_BACKGROUND)

193 
	`¥ötf
("%†(#%06lX)\n", 
	`lookupCﬁour
(
wm_¥›s
.
background
),

194 
wm_¥›s
.
background
);

196 
	`¥ötf
("<unspecified>\n");

198 
	`¥ötf
("\t\tBorder size: ");

199 i‡((
wm_¥›s
.
Êags
 & 
GR_WM_FLAGS_BORDERSIZE
) == GR_WM_FLAGS_BORDERSIZE)

200 
	`¥ötf
("%d\n", 
wm_¥›s
.
b‹dîsize
);

202 
	`¥ötf
("<unspecified>\n");

204 
	`¥ötf
("\t\tPr›îty bô†(0x%08lX):\n", 
wm_¥›s
.
¥›s
);

206 
i
, 
n
 = 0;

208 
i
 = 0; i < 
NR_PROPS
; i++) {

209 
GR_WM_PROPS
 
¥›
 = 
¥›s_èbÀ
[
i
].prop;

210 i‡((
wm_¥›s
.
¥›s
 & 
¥›
) ==Örop) {

211 
	`¥ötf
("\t\t\t%s (%s)\n", \

212 
¥›s_èbÀ
[
i
].
¥›_symbﬁ
, \

213 
¥›s_èbÀ
[
i
].
¥›_des¸
);

214 
n
++;

218 i‡(!
n
)

219 
	`¥ötf
("\t\tNONE (?!?!?)\n");

225 
	`GrClo£
();

228 
	}
}

	@demos/nanox/nxmag.c

45 
	~<°dio.h
>

46 
	~<°dlib.h
>

47 
	~<time.h
>

49 
	~<«no-X.h
>

50 
	~<nxcﬁ‹s.h
>

52 
	#DEFAULT_MAGNIFICATION
 10

	)

53 
	#DEFAULT_WIDTH
 15

	)

54 
	#DEFAULT_HEIGHT
 15

	)

55 
	#DEFAULT_UPDATE_PERIOD
 40

	)

56 
	#DEFAULT_FORCEUPDATE
 15

	)

59 
	mx
;

60 
	my
;

61 
	mlx
;

62 
	mly
;

63 
	mfu
;

64 
	mwidth
;

65 
	mheight
;

66 
	mpwidth
;

67 
	mpheight
;

68 
	mf‹˚upd©e
;

69 
	mmagnifiˇti⁄
;

70 
GR_GC_ID
 
	mgc
;

71 
GR_WINDOW_ID
 
	mwid
;

72 
GR_PIXELVAL
 *
	möbuf
;

73 
GR_PIXELVAL
 *
	moutbuf
;

74 } 
	tnm°©e
;

76 
	$ªad_öput
(
nm°©e
 *
°©e
)

78 
	`GrRódAªa
(
GR_ROOT_WINDOW_ID
, 
°©e
->
x
, sèã->
y
, sèã->
width
,

79 
°©e
->
height
, sèã->
öbuf
);

80 
	}
}

82 
	$magnify
(
nm°©e
 *
°©e
)

84 
x
, 
y
, 
i
;

85 
GR_PIXELVAL
 
pix
, *
p
, *
µ
 = 
°©e
->
outbuf
;

87 
y
 = 0; y < 
°©e
->
pheight
; y++) {

88 
p
 = 
°©e
->
öbuf
 + ((
y
 / sèã->
magnifiˇti⁄
Ë* sèã->
width
);

89 
x
 = 0; x < 
°©e
->
width
; x++) {

90 
pix
 = *
p
++;

91 
i
 = 0; i < 
°©e
->
magnifiˇti⁄
; i++)

92 *
µ
++ = 
pix
;

95 
	}
}

97 
	$døw_ouçut
(
nm°©e
 *
°©e
)

99 
	`GrAªa
(
°©e
->
wid
, sèã->
gc
, 0, 0, sèã->
pwidth
, sèã->
pheight
,

100 
°©e
->
outbuf
, 
MWPF_PIXELVAL
);

101 
	}
}

103 
	$do_upd©e
(
nm°©e
 *
°©e
)

105 if(
°©e
->
x
 =°©e->
lx
 && sèã->
y
 =°©e->
ly
 &&

106 
°©e
->
f‹˚upd©e
 && --°©e->
fu
)

109 
	`ªad_öput
(
°©e
);

110 
	`magnify
(
°©e
);

111 
	`døw_ouçut
(
°©e
);

113 
°©e
->
lx
 = sèã->
x
;

114 
°©e
->
ly
 = sèã->
y
;

115 
°©e
->
fu
 = sèã->
f‹˚upd©e
;

116 
	}
}

118 
	$mou£_moved
(
nm°©e
 *
°©e
, 
GR_EVENT_MOUSE
 *
ev
)

120 
°©e
->
x
 = 
ev
->
roŸx
 - sèã->
width
 / 2;

121 
°©e
->
y
 = 
ev
->
roŸy
 - sèã->
height
 / 2;

122 
	}
}

124 
nm°©e
 *
	$öô
(
¨gc
, **
¨gv
)

126 
i
;

127 *
p
;

128 
GR_COORD
 
x
 = 0;

129 
nm°©e
 *
°©e
;

130 
GR_SCREEN_INFO
 
si
;

131 
GR_WM_PROPERTIES
 
¥›s
;

132 
upd©ïîiod
 = 
DEFAULT_UPDATE_PERIOD
;

134 if(!(
°©e
 = 
	`mÆloc
((
nm°©e
)))Ë 
NULL
;

136 
°©e
->
width
 = 
DEFAULT_WIDTH
;

137 
°©e
->
height
 = 
DEFAULT_HEIGHT
;

138 
°©e
->
f‹˚upd©e
 = 
DEFAULT_FORCEUPDATE
;

139 
°©e
->
magnifiˇti⁄
 = 
DEFAULT_MAGNIFICATION
;

141 
¨gv
++;

142 
¨gc
--;

143 
¨gc
 > 0) {

144 if(
¨gv
[0][0] !'-'Ë
bad¨gs
;

145 if(
¨gc
 < 2Ë
bad¨gs
;

146 
i
 = 
	`°πﬁ
(
¨gv
[1], &
p
, 10);

147 if(*
p
Ë
bad¨gs
;

148 
¨gv
[0][1]) {

150 
°©e
->
width
 = 
i
;

153 
°©e
->
height
 = 
i
;

156 
°©e
->
magnifiˇti⁄
 = 
i
;

159 
upd©ïîiod
 = 
i
;

162 
°©e
->
f‹˚upd©e
 = 
i
;

165 
bad¨gs
;

167 
¨gc
 -= 2;

168 
¨gv
 += 2;

171 if(
	`GrO≥n
() < 0) {

172 
	`‰ì
(
°©e
);

173  
NULL
;

176 
°©e
->
pwidth
 = sèã->
width
 * sèã->
magnifiˇti⁄
;

177 
°©e
->
pheight
 = sèã->
height
 * sèã->
magnifiˇti⁄
;

179 if(!(
°©e
->
öbuf
 = 
	`mÆloc
((
GR_PIXELVAL
Ë* sèã->
width
 *

180 
°©e
->
height
))) {

181 
	`‰ì
(
°©e
);

182  
NULL
;

185 if(!(
°©e
->
outbuf
 = 
	`ˇŒoc
((
GR_PIXELVAL
Ë* sèã->
pwidth
 *

186 
°©e
->
pheight
, 1))) {

187 
	`‰ì
(
°©e
->
öbuf
);

188 
	`‰ì
(
°©e
);

189  
NULL
;

192 
	`GrGëS¸ìnInfo
(&
si
);

193 
°©e
->
x
 = 
si
.
xpos
 - sèã->
width
 / 2;

194 
°©e
->
y
 = 
si
.
ypos
 - sèã->
height
 / 2;

195 
°©e
->
lx
 = -1;

196 
°©e
->
ly
 = -1;

198 
°©e
->
wid
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 
x
, 0, sèã->
pwidth
,

199 
°©e
->
pheight
, 0, 
GR_COLOR_WHITE
, 0);

201 
	`GrSñe˘Evíts
(
°©e
->
wid
, 
GR_EVENT_TYPE_EXPOSURE
 |

202 
GR_EVENT_MASK_TIMER
 |

203 
GR_EVENT_MASK_CLOSE_REQ
);

205 
	`GrSñe˘Evíts
(
GR_ROOT_WINDOW_ID
, 
GR_EVENT_MASK_MOUSE_POSITION
);

207 
¥›s
.
Êags
 = 
GR_WM_FLAGS_TITLE
;

208 
¥›s
.
tôÀ
 = "nxmag";

209 
	`GrSëWMPr›îtõs
(
°©e
->
wid
, &
¥›s
);

211 
	`GrM≠Wödow
(
°©e
->
wid
);

213 
°©e
->
gc
 = 
	`GrNewGC
();

215 
	`GrCª©eTimî
(
°©e
->
wid
, 
upd©ïîiod
);

217 
	`do_upd©e
(
°©e
);

219  
°©e
;

221 
bad¨gs
:

222 
	`Ârötf
(
°dîr
, "usage: -w <width> -h <height> -m <magnification> "

224 
	`‰ì
(
°©e
);

225  
NULL
;

226 
	}
}

228 
	$maö
(
¨gc
, *
¨gv
[])

230 
GR_EVENT
 
ev
;

231 
nm°©e
 *
°©e
;

233 if(!(
°©e
 = 
	`öô
(
¨gc
, 
¨gv
)))  1;

236 
	`GrGëNextEvít
(&
ev
);

237 
ev
.
ty≥
) {

238 
GR_EVENT_TYPE_EXPOSURE
:

239 
	`døw_ouçut
(
°©e
);

241 
GR_EVENT_TYPE_TIMER
:

242 
	`do_upd©e
(
°©e
);

244 
GR_EVENT_TYPE_MOUSE_POSITION
:

245 
	`mou£_moved
(
°©e
, &
ev
.
mou£
);

247 
GR_EVENT_TYPE_CLOSE_REQ
:

248 
	`‰ì
(
°©e
->
öbuf
);

249 
	`‰ì
(
°©e
->
outbuf
);

250 
	`‰ì
(
°©e
);

251 
	`GrClo£
();

254 
	`Ârötf
(
°dîr
, "Got unknownÉventÅype %d\n",

255 
ev
.
ty≥
);

261 
	}
}

	@demos/nanox/nxterm.c

33 
	~<°dio.h
>

34 
	~<sig«l.h
>

35 
	~<sys/time.h
>

36 
	~<utmp.h
>

37 
	~<uni°d.h
>

38 
	~<î∫o.h
>

39 
	~<°dlib.h
>

40 
	~<pwd.h
>

41 
	~<°rög.h
>

42 
	~<sys/io˘l.h
>

43 
	~<ãrmios.h
>

44 
	~<sys/ty≥s.h
>

45 
	~<sys/°©.h
>

46 
	~<f˙é.h
>

47 
	#MWINCLUDECOLORS


	)

48 
	~"«no-X.h
"

49 
	~"nxãrm.h
"

51 
	#TITLE
 "nxãrm"

	)

53 
	#SMALLBUFFER
 80

	)

54 
	#LARGEBUFFER
 1024

	)

59 #ifde‡
löux


60 
	#NSIG
 
_NSIG


	)

63 #ifde‡
__FªeBSD__


64 
	~<libutû.h
>

72 
GR_WINDOW_ID
 
	gw1
;

73 
GR_GC_ID
 
	ggc1
;

74 
GR_FONT_ID
 
	gªgF⁄t
;

77 
GR_SCREEN_INFO
 
	gsi
;

78 
GR_FONT_INFO
 
	gfi
;

79 
GR_WINDOW_INFO
 
	gwi
;

80 
GR_GC_INFO
 
	ggi
;

81 
GR_BOOL
 
	ghavefocus
 = 
GR_FALSE
;

83 
pid_t
 
	gpid
;

84 
	gwöw
, 
	gwöh
, 
	gc⁄sﬁe
;

85 
	gpùeh
;

86 
	gcblök
 = 0, 
	gvisuÆbñl
 = 0, 
	gdebug
 = 0;

87 #ifde‡
__FªeBSD__


88 
	g±y
[
SMALLBUFFER
];

89 
wösize
 
	gwösz
;

92 
	#f⁄h
 
fi
.
height


	)

93 
	#f⁄w
 
fi
.
maxwidth


	)

95 
ãrm_öô
();

96 
maximize
();

97 
sigpùe
(
sig
);

98 
sigchld
(
sig
);

99 
sigquô
(
sig
);

100 
sÊush
();

101 
löeRedøw
();

102 
ßdd
 (
c
);

103 
show_curs‹
 ();

104 
døw_curs‹
 ();

105 
hide_curs‹
 ();

106 
vs¸ﬁl
(
löes
);

107 
esc5
(
c
);

108 
esc4
(
c
);

109 
esc3
(
c
);

110 
esc2
(
c
);

111 
esc1
(
c
);

112 
esc0
(
c
);

113 
¥ötc
(
c
);

114 
öô
();

115 
ãrm
();

116 
ußge
(*
s
);

117 *
mysig«l
(
signum
, *
h™dÀr
);

118 
sigchûd
(
signo
);

128 
	gisMaximized
=0;

130 
	$maximize
()

132 
x0
, 
y0
, 
w
, 
h
, 
w_max
,
h_max
;

134 i‡(!
isMaximized
)

137 
w_max
=
si
.
cﬁs
-
wi
.
b‹dîsize
;

138 
h_max
=
si
.
rows
-
wi
.
b‹dîsize
;

139 
	`GrMoveWödow
(
w1
,0,0);

140 
	`GrResizeWödow
(
w1
,
w_max
, 
h_max
);

141 
isMaximized
=1;

145 
	`GrResizeWödow
(
w1
, 
w
, 
h
);

146 
	`GrMoveWödow
(
w1
, 
x0
, 
y0
);

147 
isMaximized
=0;

149 
	}
}

159 
	$sigpùe
(
sig
)

163 
	`kûl
(-
pid
, 
SIGHUP
);

164 
	`_exô
(
sig
);

165 
	}
}

168 
	$sigchld
(
sig
)

171 
	`_exô
(
sig
);

172 
	}
}

175 
	$sigquô
(
sig
)

177 
	`sig«l
(
sig
, 
SIG_IGN
);

178 
	`kûl
(-
pid
, 
SIGHUP
);

179 
	}
}

186 
	gbgmode
, 
	gesc°©e
, 
	gcurx
, 
	gcury
, 
	gcur⁄
, 
	gcurvis
;

187 
	gßvx
, 
	gßvy
, 
	gwøp
, 
	g°yÀ
;

188 
	gcﬁ
, 
	grow
, 
	gcﬁmask
 = 0x7f, 
	growmask
 = 0x7f;

194 
	gsbuf˙t
 = 0;

195 
	gsbufx
, 
	gsbufy
;

196 
	glöeBuf„r
[
SMALLBUFFER
+1];

197 *
	gsbuf
=
löeBuf„r
;

199 
	$sÊush
()

201 i‡(
sbuf˙t
)

203 
	`GrText
(
w1
,
gc1
, 
sbufx
*
f⁄w
, 
sbufy
*
f⁄h
, 
sbuf
, 
sbuf˙t
, 
GR_TFTOP
);

204 
sbuf˙t
 = 0;

206 
	}
}

209 
	$löeRedøw
()

211 
	`GrSëGCF‹eground
(
gc1
,
gi
.
background
);

212 
	`GrFûlRe˘
(
w1
, 
gc1
, 
curx
*
f⁄w
, 
cury
*
f⁄h
, (
cﬁ
-curx)*fonw, fonh);

213 
	`GrSëGCF‹eground
(
gc1
,
gi
.
f‹eground
);

215 i‡(
sbuf˙t
)

217 
sbuf
[
sbuf˙t
] = 0;

218 
	`GrText
(
w1
,
gc1
, 
sbufx
*
f⁄w
, 
sbufy
*
f⁄h
, 
sbuf
, 
sbuf˙t
, 
GR_TFTOP
);

220 
	}
}

222 
	$ßdd
 (
c
)

224 i‡(
sbuf˙t
 =
SMALLBUFFER
)

226 
	`sÊush
 ();

229 i‡(!
sbuf˙t
)

231 
sbufx
 = 
curx
;

232 
sbufy
 = 
cury
;

235 
sbuf
[
sbuf˙t
++] = 
c
;

236 
	}
}

238 
	$show_curs‹
 ()

240 
	`GrSëGCMode
(
gc1
,
GR_MODE_XOR
);

241 
	`GrSëGCF‹eground
(
gc1
, 
WHITE
);

242 
	`GrFûlRe˘
(
w1
, 
gc1
, 
curx
*
f⁄w
, 
cury
*
f⁄h
+1, fonw, fonh-1);

243 
	`GrSëGCF‹eground
(
gc1
, 
gi
.
f‹eground
);

244 
	`GrSëGCMode
(
gc1
,
GR_MODE_COPY
);

245 
	}
}

248 
	$døw_curs‹
 ()

250 i‡(!
curvis
)

252 
curvis
 = 1;

253 
	`show_curs‹
();

255 
	}
}

256 
	$hide_curs‹
 ()

258 i‡(
curvis
)

260 
curvis
 = 0;

261 
	`show_curs‹
();

263 
	}
}

266 
	$vs¸ﬁl
(
löes
)

268 
	`hide_curs‹
();

269 
	`GrC›yAªa
(
w1
,
gc1
,0, 0, 
wöw
, 
wöh
-(
löes
*
f⁄h
),

270 
w1
, 0, (
löes
*
f⁄h
), 
MWROP_SRCCOPY
);

272 
	`GrSëGCF‹eground
(
gc1
,
gi
.
background
);

273 
	`GrFûlRe˘
(
w1
, 
gc1
, 0, 
wöh
-(
löes
*
f⁄h
),

274 
wöw
, (
löes
*
f⁄h
));

275 
	`GrSëGCF‹eground
(
gc1
,
gi
.
f‹eground
);

276 
	}
}

278 
	$esc5
(
c
)

281 
	`GrSëGCBackground
(
gc1
, 
c
);

282 
	`GrGëGCInfo
(
gc1
,&
gi
);

283 
esc°©e
 = 0;

284 
	}
}

286 
	$esc4
(
c
)

288 
	`GrSëGCF‹eground
(
gc1
,
c
);

289 
	`GrGëGCInfo
(
gc1
,&
gi
);

290 
esc°©e
 = 0;

291 
	}
}

293 
	$esc3
(
c
)

295 
curx
 = (
c
 - 32Ë& 
cﬁmask
;

296 i‡(
curx
 >
cﬁ
)

297 
curx
 = 
cﬁ
 - 1;

298 i‡(
curx
 < 0)

299 
curx
 = 0;

300 
esc°©e
 = 0;

301 
	}
}

304 
	$esc2
(
c
)

306 
cury
 = (
c
 - 32Ë& 
rowmask
;

307 i‡(
cury
 >
row
)

308 
cury
 = 
row
 - 1;

309 i‡(
cury
 < 0)

310 
cury
 = 0;

311 
esc°©e
 = 3;

312 
	}
}

315 
	$esc1
(
c
)

317 
Revî£Mode
=0;

318 
esc°©e
 = 0;

320 
c
)

323 
	`hide_curs‹
();

324 i‡((
cury
 -= 1) < 0)

325 
cury
 = 0;

329 
	`hide_curs‹
();

330 i‡((
cury
 +1Ë>
row
)

331 
cury
 = 
row
 - 1;

335 
	`hide_curs‹
();

336 i‡((
curx
 +1Ë>
cﬁ
)

337 
curx
 = 
cﬁ
 - 1;

341 
	`hide_curs‹
();

342 i‡((
curx
 -= 1) < 0)

343 
curx
 = 0;

347 
	`GrCÀ¨Wödow
(
w1
, 0);

348 
curx
 = 0;

349 
cury
 = 0;

353 
curx
 = 0;

354 
cury
 = 0;

358 i‡((
cury
 -= 1) < 0)

360 
cury
 = 0;

361 
	`vs¸ﬁl
(1);

367 i‡(
cury
 < 
row
-1)

369 
	`GrSëGCF‹eground
(
gc1
,
gi
.
background
);

370 
	`GrFûlRe˘
(
w1
,
gc1
, 0,(
cury
+1)*
f⁄h
, 
wöw
, (
row
-1-cury)*fonh);

371 
	`GrSëGCF‹eground
(
gc1
,
gi
.
f‹eground
);

373 
	`GrSëGCF‹eground
(
gc1
,
gi
.
background
);

374 
	`GrFûlRe˘
(
w1
, 
gc1
, 
curx
*
f⁄w
, 
cury
*
f⁄h
, (
cﬁ
-curx)*fonw, fonh);

375 
	`GrSëGCF‹eground
(
gc1
,
gi
.
f‹eground
);

379 
	`GrSëGCF‹eground
(
gc1
,
gi
.
background
);

380 
	`GrFûlRe˘
(
w1
, 
gc1
, 
curx
*
f⁄w
, 
cury
*
f⁄h
, (
cﬁ
-curx)*fonw, fonh);

381 
	`GrSëGCF‹eground
(
gc1
,
gi
.
f‹eground
);

385 i‡(
cury
 < 
row
-1)

387 
	`vs¸ﬁl
(1);

389 
curx
 = 0;

393 i‡(
cury
 < 
row
-1)

395 
	`vs¸ﬁl
(1);

397 
curx
 = 0;

401 
esc°©e
 = 2;

405 
esc°©e
 = 4;

409 
esc°©e
 = 5;

414 i‡(
cury
 > 0)

416 
	`GrSëGCF‹eground
(
gc1
,
gi
.
background
);

417 
	`GrFûlRe˘
(
w1
,
gc1
, 0, 0, 
wöw
, 
cury
*
f⁄h
);

418 
	`GrSëGCF‹eground
(
gc1
,
gi
.
f‹eground
);

420 i‡(
curx
 > 0)

422 
	`GrSëGCF‹eground
(
gc1
,
gi
.
background
);

423 
	`GrFûlRe˘
(
w1
,
gc1
, 0, 
cury
*
f⁄h
, 
curx
*
f⁄w
, fonh);

424 
	`GrSëGCF‹eground
(
gc1
,
gi
.
f‹eground
);

429 
cur⁄
 = 1;

433 
cur⁄
 = 0;

437 
ßvx
 = 
curx
;

438 
ßvy
 = 
cury
;

442 
curx
 = 
ßvx
;

443 
cury
 = 
ßvy
;

447 
	`GrSëGCF‹eground
(
gc1
,
gi
.
background
);

448 
	`GrRe˘
(
w1
,
gc1
, 0, 
cury
*
f⁄h
, 
wöw
, fonh);

449 
	`GrSëGCF‹eground
(
gc1
,
gi
.
f‹eground
);

450 
curx
 = 0;

454 i‡(
curx
 > 0)

456 
	`GrSëGCF‹eground
(
gc1
,
gi
.
background
);

457 
	`GrRe˘
(
w1
,
gc1
,0, 
cury
*
f⁄h
, 
curx
*
f⁄w
, fonh);

458 
	`GrSëGCF‹eground
(
gc1
,
gi
.
f‹eground
);

464 if(!
Revî£Mode
)

466 
	`GrSëGCF‹eground
(
gc1
,
gi
.
background
);

467 
	`GrSëGCBackground
(
gc1
,
gi
.
f‹eground
);

468 
Revî£Mode
=1;

475 if(
Revî£Mode
)

477 
	`GrSëGCF‹eground
(
gc1
,
gi
.
f‹eground
);

478 
	`GrSëGCBackground
(
gc1
,
gi
.
background
);

479 
Revî£Mode
=0;

485 
wøp
 = 1;

489 
wøp
 = 0;

531 
	}
}

537 
	$esc0
 (
c
)

539 
c
)

557 i‡(
visuÆbñl
)

568 
	`GrBñl
();

573 
	`löeRedøw
();

574 i‡(--
curx
 < 0)

576 
curx
 = 0;

582 
b‹g
,
i
;

584 
b‹g
=(((
curx
 >> 3) + 1) << 3);

585 if(
b‹g
 >
cﬁ
)

587 
b‹g
=
cﬁ
-1;

589 
b‹g
=b‹g-
curx
;

590 
i
=0; i < 
b‹g
; ++i){
	`ßdd
(' ');}

591 i‡((
curx
 = ((curx >> 3Ë+ 1Ë<< 3Ë>
cﬁ
)

593 
curx
 = 
cﬁ
 - 1;

599 
	`sÊush
();

600 i‡(++
cury
 >
row
)

602 
	`vs¸ﬁl
(1);

603 
cury
 = 
row
-1;

608 
	`sÊush
();

609 
curx
 = 0;

613 
	`sÊush
();

614 
esc°©e
 = 1;

621 
	`ßdd
(
c
);

622 i‡(++
curx
 >
cﬁ
)

624 
	`sÊush
();

625 i‡(!
wøp
)

627 
curx
 = 
cﬁ
-1;

631 
curx
 = 0;

632 i‡(++
cury
 >
row
)

634 
	`vs¸ﬁl
(1);

640 
	}
}

643 
	$¥ötc
(
c
)

645 
esc°©e
)

648 
	`esc0
(
c
);

652 
	`sÊush
();

653 
	`esc1
(
c
);

657 
	`sÊush
();

658 
	`esc2
(
c
);

662 
	`sÊush
();

663 
	`esc3
(
c
);

667 
	`sÊush
();

668 
	`esc4
(
c
);

672 
	`sÊush
();

673 
	`esc5
(
c
);

677 
esc°©e
 = 0;

680 
	}
}

683 
	$öô
()

685 
curx
 = 
ßvx
 = 0;

686 
cury
 = 
ßvy
 = 0;

687 
wøp
 = 1;

688 
cur⁄
 = 1;

689 
curvis
 = 0;

690 
esc°©e
 = 0;

691 
	}
}

699 
	$ãrm
()

701 
ö
, 
l
;

702 
GR_EVENT
 
wevít
;

703 
GR_EVENT_KEYSTROKE
 *
kp
;

704 
buf
[
LARGEBUFFER
];

706 
	`GrRegi°îI≈ut
(
pùeh
);

708 i‡(
havefocus
)

709 
	`døw_curs‹
();

710 
	`GrGëNextEvít
(&
wevít
);

712 
wevít
.
ty≥
) {

713 
GR_EVENT_TYPE_CLOSE_REQ
:

714 
	`GrClo£
();

715 
	`exô
(0);

718 
GR_EVENT_TYPE_KEY_DOWN
:

719 
kp
=(
GR_EVENT_KEYSTROKE
 *)&
wevít
;

721 i‡(
kp
->
ch
 & 
MWKEY_NONASCII_MASK
)

723 *
buf
 = 
kp
->
ch
 & 0xff;

724 
	`wrôe
(
pùeh
, 
buf
,1);

727 
GR_EVENT_TYPE_FOCUS_IN
:

728 
havefocus
 = 
GR_TRUE
;

731 
GR_EVENT_TYPE_FOCUS_OUT
:

732 
havefocus
 = 
GR_FALSE
;

733 
	`hide_curs‹
();

736 
GR_EVENT_TYPE_UPDATE
:

741 i‡(
wevít
.
upd©e
.
uty≥
 =
GR_UPDATE_UNMAPTEMP
)

742 
curvis
 = 0;

745 
GR_EVENT_TYPE_FDINPUT
:

746 
	`hide_curs‹
();

747 (
ö
 = 
	`ªad
(
pùeh
, 
buf
, (buf))) > 0) {

748 
l
=0;Ü<
ö
;Ü++) {

749 
	`¥ötc
(
buf
[
l
]);

750 i‡(
buf
[
l
] == '\n')

751 
	`¥ötc
('\r');

753 
	`sÊush
();

758 
	}
}

761 
	$ußge
(*
s
)

763 i‡(
s
)

764 
	`Ârötf
(
°dîr
, "îr‹: %s\n", 
s
);

765 
	`¥ötf
("usage:Çxterm [-b] [-d] [-f <font family>] [-s <font size>]\n");

766 
	`¥ötf
(" [-g <geometry>] [-v] [-c] [-h] [program {args}]\n");

767 
	`exô
(0);

768 
	}
}

771 *
	$mysig«l
(
signum
, *
h™dÀr
)

773 
siga˘i⁄
 
ß
, 
so
;

775 
ß
.
ß_h™dÀr
 = 
h™dÀr
;

776 
	`sigem±y£t
(&
ß
.
ß_mask
);

777 
ß
.
ß_Êags
 = 
SA_RESTART
;

778 
	`siga˘i⁄
(
signum
, &
ß
, &
so
);

780  
so
.
ß_h™dÀr
;

781 
	}
}

787 
	$maö
(
¨gc
, **
¨gv
)

789 
GR_BITMAP
 
bôm≠1fg
[7];

790 
GR_BITMAP
 
bôm≠1bg
[7];

791 
GR_WM_PROPERTIES
 
¥›s
;

793 
xp
, 
yp
, 
fsize
;

794 *
Ámûy
, *
shñl
 = 
NULL
, *
˝å
, *
geomëry
 = NULL;

795 
∑sswd
 *
pw
;

796 
buf
[80];

797 
uid
;

798 
thesh
[128];

799 #ifde‡
__FªeBSD__


800 *
±r
;

803 #ifde‡
SIGTTOU


805 
	`sig«l
(
SIGTTOU
, 
SIG_IGN
);

809 i‡(!(
pw
 = 
	`gëpwuid
((
uid
 = 
	`gëuid
()))))

811 
	`Ârötf
(
°dîr
, "error: wterm can't determine determine yourÜoginÇame\n");

812 
	`exô
(-1);

816 i‡(
	`GrO≥n
() < 0)

818 
	`Ârötf
(
°dîr
, "cannot open graphics\n");

819 
	`exô
(1);

822 
	`GrGëS¸ìnInfo
(&
si
);

827 
c⁄sﬁe
 = 0;

828 
¨gv
++;

829 *
¨gv
 && **argv=='-')

830 *(*
¨gv
+1))

833 
cblök
 = 1;

834 
¨gv
++;

838 
c⁄sﬁe
 = 1;

839 
¨gv
++;

843 
debug
 = 1;

844 
¨gv
++;

848 i‡(*++
¨gv
) {

849 
Ámûy
 = *
¨gv
++;

851 
	`ußge
("-f optionÑequiresánárgument");

856 i‡(*++
¨gv
) {

857 
fsize
 = 
	`©oi
(*
¨gv
++);

859 
	`ußge
("-s optionÑequiresánárgument");

864 i‡(*++
¨gv
) {

865 
geomëry
 = *
¨gv
++;

867 
	`ußge
("-g optionÑequiresánárgument");

873 
	`ußge
("");

876 
visuÆbñl
 = 1;

877 
¨gv
++;

881 
	`ußge
("unknown option");

888 i‡(*
¨gv
) {

889 
shñl
 = *
¨gv
;

891 i‡(!
shñl
) {

892 
shñl
 = 
	`gëív
("SHELL=");

894 i‡(!
shñl
) {

895 
shñl
 = 
pw
->
pw_shñl
;

897 i‡(!
shñl
) {

898 
shñl
 = "/bin/sh";

901 i‡(!*
¨gv
) {

908 
˝å
 = 
	`°ºchr
(
shñl
, '/');

909 
	`•rötf
 (
thesh
, "-%s", 
˝å
 ? c±∏+ 1 : 
shñl
);

910 *--
¨gv
 = 
thesh
;

913 
cﬁ
 = 80;

914 
row
 = 25;

915 
xp
 = 0;

916 
yp
 = 0;

917 i‡(
geomëry
)

919 i‡(
cﬁ
 < 1)

921 
cﬁ
 = 80;

923 i‡(
row
 < 1)

925 
row
 = 25;

927 i‡(
cﬁ
 > 0x7f)

928 
cﬁmask
 = 0xffff;

929 i‡(
row
 > 0x7f)

930 
rowmask
 = 0xffff;

933 
ªgF⁄t
=
	`GrCª©eF⁄t
(
GR_FONT_SYSTEM_FIXED
, 0, 
NULL
);

936 
	`GrGëF⁄tInfo
(
ªgF⁄t
, &
fi
);

938 
wöw
=
cﬁ
*
fi
.
maxwidth
;

939 
wöh
=
row
*
fi
.
height
;

940 
w1
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 10,10,
wöw
, 
wöh
,0,
BLACK
,
LTBLUE
);

941 
¥›s
.
Êags
 = 
GR_WM_FLAGS_TITLE
;

942 
¥›s
.
tôÀ
 = 
TITLE
;

943 
	`GrSëWMPr›îtõs
(
w1
, &
¥›s
);

945 
	`GrSñe˘Evíts
(
w1
, 
GR_EVENT_MASK_BUTTON_DOWN
 |

946 
GR_EVENT_MASK_KEY_DOWN
 |

947 
GR_EVENT_MASK_FOCUS_IN
 | 
GR_EVENT_MASK_FOCUS_OUT
 |

948 
GR_EVENT_MASK_UPDATE
 | 
GR_EVENT_MASK_CLOSE_REQ
);

950 
	`GrM≠Wödow
(
w1
);

952 
gc1
 = 
	`GrNewGC
();

953 
	`GrSëGCF⁄t
(
gc1
, 
ªgF⁄t
);

955 
	#_
 ((Ë0Ë

	)

956 
	#X
 ((Ë1Ë

	)

957 
	#MASK
(
a
,
b
,
c
,
d
,
e
,
f
,
g
) \

958 (((((((((((((
a
 * 2Ë+ 
b
Ë* 2Ë+ 
c
Ë* 2Ë+ 
d
) * 2) \

959 + 
e
Ë* 2Ë+ 
f
Ë* 2Ë+ 
g
Ë<< 9)

	)

960 
bôm≠1fg
[0] = 
	`MASK
(
_
,_,
X
,_,X,_,_);

961 
bôm≠1fg
[1] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

962 
bôm≠1fg
[2] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

963 
bôm≠1fg
[3] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

964 
bôm≠1fg
[4] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

965 
bôm≠1fg
[5] = 
	`MASK
(
_
,_,_,
X
,_,_,_);

966 
bôm≠1fg
[6] = 
	`MASK
(
_
,_,
X
,_,X,_,_);

968 
bôm≠1bg
[0] = 
	`MASK
(
_
,
X
,X,X,X,X,_);

969 
bôm≠1bg
[1] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

970 
bôm≠1bg
[2] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

971 
bôm≠1bg
[3] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

972 
bôm≠1bg
[4] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

973 
bôm≠1bg
[5] = 
	`MASK
(
_
,_,
X
,X,X,_,_);

974 
bôm≠1bg
[6] = 
	`MASK
(
_
,
X
,X,X,X,X,_);

975 
	`GrSëCurs‹
(
w1
, 7, 7, 3, 3, 
GREEN
, 
BLACK
, 
bôm≠1fg
, 
bôm≠1bg
);

976 
	`GrSëGCF‹eground
(
gc1
, 
GREEN
);

977 
	`GrSëGCBackground
(
gc1
, 
BLACK
);

978 
	`GrGëWödowInfo
(
w1
,&
wi
);

979 
	`GrGëGCInfo
(
gc1
,&
gi
);

981 
	`•rötf
(
buf
, "wãrm: %s", 
shñl
);

986 #ifde‡
__FªeBSD__


987 
	`puãnv
 ("TERM=wterm");

989 
	`puãnv
 ("TERM=vt52");

997 i‡(
ãrmˇp_°rög
)

999 
	`•rötf
 (
ãrmˇp_°rög
 + 
	`°æí
 (termcap_string), "li#%d:co#%d:",

1000 
row
, 
cﬁ
);

1001 
	`puãnv
 (
ãrmˇp_°rög
);

1008 
	`•rötf
 (
buf
, "%d", 
cﬁ
);

1009 
	`£ãnv
 ("COLUMNS", 
buf
, 1);

1010 
	`•rötf
 (
buf
, "%d", 
row
);

1011 
	`£ãnv
 ("LINES", 
buf
, 1);

1013 
	`öô
();

1018 #ifde‡
__FªeBSD__


1019 
wösz
.
ws_cﬁ
 = 
cﬁ
;

1020 
wösz
.
ws_row
 = 
row
;

1021 i‡((
pid
 = 
	`f‹k±y
(&
pùeh
, 
±y
, 
NULL
, &
wösz
)) < 0)

1023 
	`Ârötf
(
°dîr
,"wterm: can't createÖty\r\n");

1024 
	`≥º‹
("wterm");

1025 
	`¶ìp
(2);

1026 
	`GrKûlWödow
(
w1
);

1027 
	`exô
(-1);

1030 i‡((
±r
 = 
	`rödex
(
±y
, '/')))

1032 
	`°r˝y
(
±y
, 
±r
 + 1);

1035 i‡(!
pid
)

1037 
i
;

1038 
i
 = 
	`gëdèbÀsize
(); --i >= 3; )

1039 
	`˛o£
 (
i
);

1043 
i
 = 
NSIG
; --i >= 0; )

1044 
	`sig«l
 (
i
, 
SIG_DFL
);

1047 
	`£ãuid
(
	`gëuid
());

1048 
	`£ãgid
(
	`gëgid
());

1051 
	`execvp
(
shñl
, 
¨gv
);

1054 
	`Ârötf
(
°dîr
,"wterm: can't start shell\r\n");

1055 
	`¶ìp
(3);

1056 
	`GrKûlWödow
(
w1
);

1057 
	`_exô
(-1);

1060 
pùeh
 = 
	`ãrm_öô
();

1067 
	`mysig«l
(
SIGTERM
, 
sigquô
);

1068 
	`mysig«l
(
SIGHUP
, 
sigquô
);

1069 
	`mysig«l
(
SIGINT
, 
SIG_IGN
);

1070 
	`mysig«l
(
SIGQUIT
, 
sigquô
);

1071 
	`mysig«l
(
SIGPIPE
, 
sigpùe
);

1072 
	`mysig«l
(
SIGCHLD
, 
sigchld
);

1076 i‡(
c⁄sﬁe
)

1081 
visuÆbñl
 = 1;

1082 
c⁄sﬁe
 = 0;

1083 
	`io˘l
(
pùeh
, 
TIOCCONS
, 0);

1086 
	`ãrm
();

1088 
	}
}

1090 #i‡
ELKS


1091 * 
	g«rgv
[2] = {"/bö/ßsh", 
NULL
};

1093 #i‡
DOS_DJGPP


1094 * 
	g«rgv
[2] = {"bash", 
NULL
};

1096 * 
	g«rgv
[2] = {"/bö/sh", 
NULL
};

1100 
	$sigchûd
(
signo
)

1102 
	`GrClo£
();

1103 
	`exô
(0);

1104 
	}
}

1106 
	$ãrm_öô
()

1108 
tfd
;

1109 
n
 = 0;

1110 
pid_t
 
pid
;

1111 
±y_«me
[12];

1113 
agaö
:

1114 
	`•rötf
(
±y_«me
, "/dev/±yp%d", 
n
);

1115 i‡((
tfd
 = 
	`›í
(
±y_«me
, 
O_RDWR
 | 
O_NONBLOCK
)) < 0) {

1116 i‡((
î∫o
 =
EBUSY
 ||Éºnÿ=
EIO
Ë&& 
n
 < 10) {

1117 
n
++;

1118 
agaö
;

1120 
	`Ârötf
(
°dîr
, "C™'à¸óãÖty %s\n", 
±y_«me
);

1123 
	`sig«l
(
SIGCHLD
, 
sigchûd
);

1124 
	`sig«l
(
SIGINT
, 
sigchûd
);

1125 i‡((
pid
 = 
	`f‹k
()) == -1) {

1126 
	`Ârötf
(
°dîr
, "NoÖrocesses\n");

1129 i‡(!
pid
) {

1130 
	`˛o£
(
STDIN_FILENO
);

1131 
	`˛o£
(
STDOUT_FILENO
);

1132 
	`˛o£
(
tfd
);

1134 
	`£tsid
();

1135 
±y_«me
[5] = 't';

1136 i‡((
tfd
 = 
	`›í
(
±y_«me
, 
O_RDWR
)) < 0) {

1137 
	`Ârötf
(
°dîr
, "Chûd: C™'à›íÖty %s\n", 
±y_«me
);

1138 
	`exô
(1);

1140 
	`˛o£
(
STDERR_FILENO
);

1141 
	`dup2
(
tfd
, 
STDIN_FILENO
);

1142 
	`dup2
(
tfd
, 
STDOUT_FILENO
);

1143 
	`dup2
(
tfd
, 
STDERR_FILENO
);

1144 
	`execv
(
«rgv
[0],Çargv);

1145 
	`exô
(1);

1147  
tfd
;

1148 
	}
}

1151 
	$_wrôe_utmp
(*
löe
, *
u£r
, *
ho°
, 
time
)

1153 
fh
, 
off£t
, 
isEm±y
, 
isLöe
;

1154 
utmp
 
ut
;

1156 i‡((
fh
 = 
	`›í
("/ëc/utmp", 
O_RDWR
)) < 0) {

1162 
off£t
 = 0;

1163 
isEm±y
 = -1;

1164 
isLöe
 = -1;

1166 (
isLöe
 < 0Ë&& (
	`ªad
(
fh
, &
ut
, (ut)) == (ut))) {

1167 i‡(!
ut
.
ut_löe
[0])

1169 i‡(
isEm±y
 < 0)

1171 
isEm±y
 = 
off£t
;

1176 i‡(!
	`°∫cmp
(
ut
.
ut_löe
, 
löe
, (ut.ut_line))) {

1177 
isLöe
 = 
off£t
;

1180 
off£t
 +(
ut
);

1183 i‡(
isLöe
 != -1) {

1185 
	`l£ek
(
fh
, 
isLöe
, 
SEEK_SET
);

1186 } i‡(
isEm±y
 != -1) {

1188 
	`l£ek
(
fh
, 
isLöe
, 
SEEK_SET
);

1193 i‡(
time
)

1195 
	`°∫˝y
(
ut
.
ut_löe
, 
löe
, (ut.ut_line));

1196 
	`°∫˝y
(
ut
.
ut_«me
, 
u£r
, (ut.ut_name));

1197 
	`°∫˝y
(
ut
.
ut_ho°
, 
ho°
, (ut.ut_host));

1198 
ut
.
ut_time
 = 
time
;

1202 
	`mem£t
(&
ut
, 0, (ut));

1204 
	`wrôe
(
fh
, &
ut
, (ut));

1205 
	`˛o£
(
fh
);

1206 
	}
}

	@demos/nanox/nxterm.h

6 #ifde‡
__MINT__


8 
	gãrmˇp_°rög
[1024] =

19 #ñi‡
deföed
(
löux
Ë|| deföed(
__FªeBSD__
)

21 
	gãrmˇp_°rög
[1024] =

32 #ñi‡
deföed
(
sun
)

36 
	gãrmˇp_°rög
[1024] =

47 #ñi‡
deföed
(
__NëBSD__
)

49 
	gãrmˇp_°rög
[1024] =

62 #îr‹ 
o›s
, 
a
 
√w
 
›î©ög
 
sy°em
?

	@demos/nanox/nxview.c

8 
	~<°dio.h
>

9 
	~<°dlib.h
>

10 
	~<°rög.h
>

11 
	#MWINCLUDECOLORS


	)

12 
	~"«no-X.h
"

15 
	$maö
(
¨gc
,**
¨gv
)

17 
GR_IMAGE_ID
 
image_id
;

18 
GR_WINDOW_ID
 
wödow_id
;

19 
GR_GC_ID
 
gc_id
;

20 
GR_SIZE
 
w
 = -1;

21 
GR_SIZE
 
h
 = -1;

22 
GR_EVENT
 
evít
;

23 
GR_SCREEN_INFO
 
söfo
;

24 
GR_IMAGE_INFO
 
öfo
;

25 
tôÀ
[256];

27 i‡(
¨gc
 < 2) {

28 
	`¥ötf
("Usage:Çxview <image file> [stretch]\n");

29 
	`exô
(1);

32 i‡(
	`GrO≥n
() < 0) {

33 
	`Ârötf
(
°dîr
, "cannot open graphics\n");

34 
	`exô
(1);

37 i‡(!(
image_id
 = 
	`GrLﬂdImageFromFûe
(
¨gv
[1], 0))) {

38 
	`Ârötf
(
°dîr
, "C™'àlﬂd imagêfûe: %s\n", 
¨gv
[1]);

39 
	`exô
(1);

42 if(
¨gc
 > 2) {

44 
	`GrGëS¸ìnInfo
(&
söfo
);

45 
w
 = 
söfo
.
cﬁs
/2;

46 
h
 = 
söfo
.
rows
/2;

48 
	`GrGëImageInfo
(
image_id
, &
öfo
);

49 
w
 = 
öfo
.
width
;

50 
h
 = 
öfo
.
height
;

53 
	`•rötf
(
tôÀ
, "nxvõw %s", 
¨gv
[1]);

54 
wödow_id
 = 
	`GrNewWödowEx
(
GR_WM_PROPS_APPWINDOW
, 
tôÀ
,

55 
GR_ROOT_WINDOW_ID
, 0, 0, 
w
, 
h
, 
BLACK
);

57 
	`GrSñe˘Evíts
(
wödow_id
,

58 
GR_EVENT_MASK_CLOSE_REQ
|
GR_EVENT_MASK_EXPOSURE
);

60 
	`GrM≠Wödow
(
wödow_id
);

62 
gc_id
 = 
	`GrNewGC
();

65 
	`GrGëNextEvít
(&
evít
);

66 
evít
.
ty≥
) {

67 
GR_EVENT_TYPE_CLOSE_REQ
:

68 
	`GrDe°royWödow
(
wödow_id
);

69 
	`GrDe°royGC
(
gc_id
);

70 
	`GrFªeImage
(
image_id
);

71 
	`GrClo£
();

72 
	`exô
(0);

74 
GR_EVENT_TYPE_EXPOSURE
:

75 
	`GrDøwImageToFô
(
wödow_id
, 
gc_id
, 0,0, 
w
,
h
, 
image_id
);

81 
	}
}

	@demos/nanox/oneshot.c

32 
	~<°dio.h
>

33 
	~<°dlib.h
>

35 
	~<«no-X.h
>

36 
	~<nxcﬁ‹s.h
>

38 
	#WINDOW_WIDTH
 160

	)

39 
	#WINDOW_HEIGHT
 160

	)

40 
	#TIMER_PERIOD
 500

	)

42 
GR_WINDOW_ID
 
	gmaö_wödow
;

43 
GR_GC_ID
 
	ggc
;

44 
	gcuºít_cﬁour
 = 
GR_COLOR_BLACK
;

45 
GR_TIMER_ID
 
	gtimî_id
 = 0;

47 
	$ªdøw
()

49 
	`GrFûlRe˘
(
maö_wödow
, 
gc
, 0, 0, 
WINDOW_WIDTH
, 
WINDOW_HEIGHT
);

50 
	}
}

52 
	$timeout
()

54 
timî_id
 = 0;

55 
cuºít_cﬁour
 = (cuºít_cﬁou∏=
GR_COLOR_BLACK
Ë? 
GR_COLOR_WHITE
 :

56 
GR_COLOR_BLACK
;

57 
	`GrSëGCF‹eground
(
gc
, 
cuºít_cﬁour
);

58 
	`ªdøw
();

59 
	}
}

61 
	$buâ⁄_down
()

63 if(
timî_id
) ;

64 
timî_id
 = 
	`GrCª©eTimî
(
maö_wödow
, 
TIMER_PERIOD
, 
GR_FALSE
);

65 
	}
}

67 
	$buâ⁄_up
()

69 if(!
timî_id
) ;

70 
	`GrDe°royTimî
(
timî_id
);

71 
timî_id
 = 0;

72 
	}
}

74 
	$öô
()

76 
GR_WM_PROPERTIES
 
¥›s
;

78 if(
	`GrO≥n
() < 0) {

79 
	`Ârötf
(
°dîr
, "Couldn't connectÅo Nano-X server\n");

83 
maö_wödow
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 0, 0, 
WINDOW_WIDTH
,

84 
WINDOW_HEIGHT
, 0, 
GR_COLOR_WHITE
, 0);

86 
¥›s
.
Êags
 = 
GR_WM_FLAGS_TITLE
 | 
GR_WM_FLAGS_PROPS
;

87 
¥›s
.¥›†
GR_WM_PROPS_BORDER
 | 
GR_WM_PROPS_CAPTION
 |

88 
GR_WM_PROPS_CLOSEBOX
;

89 
¥›s
.
tôÀ
 = "oneshot";

90 
	`GrSëWMPr›îtõs
(
maö_wödow
, &
¥›s
);

92 
	`GrSñe˘Evíts
(
maö_wödow
, 
GR_EVENT_MASK_EXPOSURE
 |

93 
GR_EVENT_MASK_BUTTON_DOWN
 |

94 
GR_EVENT_MASK_BUTTON_UP
 |

95 
GR_EVENT_MASK_CLOSE_REQ
 |

96 
GR_EVENT_MASK_TIMER
);

98 
gc
 = 
	`GrNewGC
();

99 
	`GrSëGCF‹eground
(
gc
, 
cuºít_cﬁour
);

101 
	`GrM≠Wödow
(
maö_wödow
);

104 
	}
}

106 
	$h™dÀ_evít
(
GR_EVENT
 *
ev
)

108 
ev
->
ty≥
) {

109 
GR_EVENT_TYPE_CLOSE_REQ
:

111 
GR_EVENT_TYPE_EXPOSURE
:

112 
	`ªdøw
();

114 
GR_EVENT_TYPE_BUTTON_DOWN
:

115 
	`buâ⁄_down
();

117 
GR_EVENT_TYPE_BUTTON_UP
:

118 
	`buâ⁄_up
();

120 
GR_EVENT_TYPE_TIMER
:

121 
	`timeout
();

124 
	`Ârötf
(
°dîr
, "GŸ unknow¿evíà%d\n", 
ev
->
ty≥
);

128 
	}
}

130 
	$maö
(
¨gc
, *
¨gv
[])

132 
GR_EVENT
 
ev
;

134 if(
	`öô
())  -1;

137 
	`GrGëNextEvít
(&
ev
);

138 } !
	`h™dÀ_evít
(&
ev
));

140 
	`GrClo£
();

143 
	}
}

	@demos/nanox/pcfdemo.c

4 
	~<°dio.h
>

5 
	~<°dlib.h
>

6 
	#MWINCLUDECOLORS


	)

7 
	~"«no-X.h
"

9 
GR_FONT_ID
 
	gf⁄t
 = 0;

10 
GR_WINDOW_ID
 
	gmaö_wid
;

11 
GR_FONT_INFO
 
	gföfo
;

14 
	$døw_°rög
()

16 
cou¡
 = 0;

17 
x
 = 0;

18 
y
 = 10;

19 
ch
;

20 
GR_GC_ID
 
gc
 = 
	`GrNewGC
();

22 
	`GrSëGCF⁄t
(
gc
, 
f⁄t
);

24 
	`GrSëGCF‹eground
(
gc
, 
	`GR_RGB
(255, 255, 255));

25 
	`GrSëGCBackground
(
gc
, 
	`GR_RGB
(0, 0, 0));

27 
	`¥ötf
("Fú° ch¨ = %d,Üa° ch¨ = %d\n", 
föfo
.
fú°ch¨
,

28 
föfo
.
œ°ch¨
);

29 
	`¥ötf
("Max width = %d, max heighà%d\n", 
föfo
.
maxwidth
,

30 
föfo
.
height
);

32 
ch
 = 0; ch < 255; ch++) {

33 i‡(
ch
 < 
föfo
.
fú°ch¨
 || ch > föfo.
œ°ch¨
)

34 
	`GrFûlRe˘
(
maö_wid
, 
gc
, 
x
, 
y
, 
föfo
.
maxwidth
,

35 
föfo
.
height
);

37 
	`GrText
(
maö_wid
, 
gc
, 
x
, 
y
, &
ch
, 1,

38 
GR_TFTOP
 | 
GR_TFASCII
);

40 i‡(++
cou¡
 >= 16) {

41 
x
 = 0;

42 
y
 +
föfo
.
height
;

43 
cou¡
 = 0;

45 
x
 +
föfo
.
maxwidth
 + 2;

48 
	`GrDe°royGC
(
gc
);

49 
	}
}

52 
	$maö
(
¨gc
, **
¨gv
)

54 
width
, 
height
;

56 i‡(
¨gc
 < 2)

59 i‡(
	`GrO≥n
() == -1)

62 
f⁄t
 = 
	`GrCª©eF⁄t
(
¨gv
[1], 12, 0);

63 i‡(!
f⁄t
)

64 
	`¥ötf
("U«bÀÅÿlﬂd %s\n", 
¨gv
[1]);

66 
	`GrGëF⁄tInfo
(
f⁄t
, &
föfo
);

68 
width
 = ((
föfo
.
maxwidth
 + 2) * 16);

69 
height
 =

70 (((
föfo
.
œ°ch¨
 - föfo.
fú°ch¨
) / 16) +

71 5Ë* 
föfo
.
height
;

73 
maö_wid
 = 
	`GrNewWödowEx
(
GR_WM_PROPS_APPWINDOW
, "pcfdemo",

74 
GR_ROOT_WINDOW_ID
, 0, 0, 
width
, 
height
, 
BLACK
);

75 
	`GrSñe˘Evíts
(
maö_wid
, 
GR_EVENT_MASK_EXPOSURE
|
GR_EVENT_MASK_CLOSE_REQ
);

76 
	`GrM≠Wödow
(
maö_wid
);

79 
GR_EVENT
 
evít
;

80 
	`GrGëNextEvít
(&
evít
);

82 i‡(
evít
.
ty≥
 =
GR_EVENT_TYPE_EXPOSURE
)

83 
	`døw_°rög
();

85 if(
evít
.
ty≥
 =
GR_EVENT_TYPE_CLOSE_REQ
) {

86 
	`GrClo£
();

87 
	`exô
(0);

90 
	}
}

	@demos/nanox/periodic.c

32 
	~<°dio.h
>

33 
	~<°dlib.h
>

35 
	~<«no-X.h
>

36 
	~<nxcﬁ‹s.h
>

38 
	#WINDOW_WIDTH
 160

	)

39 
	#WINDOW_HEIGHT
 160

	)

40 
	#TIMER_PERIOD
 250

	)

42 
GR_WINDOW_ID
 
	gmaö_wödow
;

43 
GR_GC_ID
 
	ggc
;

44 
	gcuºít_cﬁour
 = 
GR_COLOR_BLACK
;

45 
GR_TIMER_ID
 
	gtimî_id
 = 0;

47 
	$ªdøw
()

49 
	`GrFûlRe˘
(
maö_wödow
, 
gc
, 0, 0, 
WINDOW_WIDTH
, 
WINDOW_HEIGHT
);

50 
	}
}

52 
	$timeout
()

54 
cuºít_cﬁour
 = (cuºít_cﬁou∏=
GR_COLOR_BLACK
Ë? 
GR_COLOR_WHITE
 :

55 
GR_COLOR_BLACK
;

56 
	`GrSëGCF‹eground
(
gc
, 
cuºít_cﬁour
);

57 
	`ªdøw
();

58 
	}
}

60 
	$buâ⁄_down
()

62 if(
timî_id
) {

63 
	`GrDe°royTimî
(
timî_id
);

64 
timî_id
 = 0;

65 } 
timî_id
 = 
	`GrCª©eTimî
(
maö_wödow
, 
TIMER_PERIOD
, 
GR_TRUE
);

66 
	}
}

68 
	$öô
()

70 
GR_WM_PROPERTIES
 
¥›s
;

72 if(
	`GrO≥n
() < 0) {

73 
	`Ârötf
(
°dîr
, "Couldn't connectÅo Nano-X server\n");

77 
maö_wödow
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 0, 0, 
WINDOW_WIDTH
,

78 
WINDOW_HEIGHT
, 0, 
GR_COLOR_WHITE
, 0);

80 
¥›s
.
Êags
 = 
GR_WM_FLAGS_TITLE
 | 
GR_WM_FLAGS_PROPS
;

81 
¥›s
.¥›†
GR_WM_PROPS_BORDER
 | 
GR_WM_PROPS_CAPTION
 |

82 
GR_WM_PROPS_CLOSEBOX
;

83 
¥›s
.
tôÀ
 = "periodic";

84 
	`GrSëWMPr›îtõs
(
maö_wödow
, &
¥›s
);

86 
	`GrSñe˘Evíts
(
maö_wödow
, 
GR_EVENT_MASK_EXPOSURE
 |

87 
GR_EVENT_MASK_BUTTON_DOWN
 |

88 
GR_EVENT_MASK_CLOSE_REQ
 |

89 
GR_EVENT_MASK_TIMER
);

91 
gc
 = 
	`GrNewGC
();

92 
	`GrSëGCF‹eground
(
gc
, 
cuºít_cﬁour
);

94 
	`GrM≠Wödow
(
maö_wödow
);

96 
timî_id
 = 
	`GrCª©eTimî
(
maö_wödow
, 
TIMER_PERIOD
, 
GR_TRUE
);

99 
	}
}

101 
	$h™dÀ_evít
(
GR_EVENT
 *
ev
)

103 
ev
->
ty≥
) {

104 
GR_EVENT_TYPE_CLOSE_REQ
:

106 
GR_EVENT_TYPE_EXPOSURE
:

107 
	`ªdøw
();

109 
GR_EVENT_TYPE_BUTTON_DOWN
:

110 
	`buâ⁄_down
();

112 
GR_EVENT_TYPE_TIMER
:

113 
	`timeout
();

116 
	`Ârötf
(
°dîr
, "GŸ unknow¿evíà%d\n", 
ev
->
ty≥
);

120 
	}
}

122 
	$maö
(
¨gc
, *
¨gv
[])

124 
GR_EVENT
 
ev
;

126 if(
	`öô
())  -1;

129 
	`GrGëNextEvít
(&
ev
);

130 } !
	`h™dÀ_evít
(&
ev
));

132 
	`GrClo£
();

135 
	}
}

	@demos/nanox/polydemo.c

4 
	~<°dio.h
>

5 
	~<°dlib.h
>

6 
	#MWINCLUDECOLORS


	)

7 
	~"«no-X.h
"

10 
	$døw
(
GR_EVENT
 * 
e
)

12 
GR_WINDOW_ID
 
wid
 = ((
GR_EVENT_EXPOSURE
 *)
e
)->wid;

13 
GR_GC_ID
 
gc
 = 
	`GrNewGC
();

14 
GR_POINT
 
poöts
[4];

15 
x
 = 10;

16 
y
 = 10;

17 
sz
 = 20;

18 
sz2
 = 5;

20 
	`GrSëGCBackground
(
gc
, 
BLACK
);

23 
poöts
[0].
x
 = x;

24 
poöts
[0].
y
 = y;

25 
poöts
[1].
x
 = x + 
sz
;

26 
poöts
[1].
y
 = y;

27 
poöts
[2].
x
 = x + (
sz
 / 2);

28 
poöts
[2].
y
 = y + 
sz
;

29 
poöts
[3].
x
 = x;

30 
poöts
[3].
y
 = y;

32 
	`GrSëGCF‹eground
(
gc
, 
WHITE
);

33 
	`GrFûlPﬁy
(
wid
, 
gc
, 3, 
poöts
);

36 
	`GrSëGCF‹eground
(
gc
, 
GREEN
);

37 
	`GrPﬁy
(
wid
, 
gc
, 4, 
poöts
);

40 
y
 +
sz
 + 10;

41 
poöts
[0].
x
 = x;

42 
poöts
[0].
y
 = y;

43 
poöts
[1].
x
 = x + 
sz
 + 1;

44 
poöts
[1].
y
 = y;

45 
poöts
[2].
x
 = x + (
sz
 / 2);

46 
poöts
[2].
y
 = y + 
sz
;

47 
poöts
[3].
x
 = x;

48 
poöts
[3].
y
 = y;

50 
	`GrSëGCF‹eground
(
gc
, 
WHITE
);

51 
	`GrFûlPﬁy
(
wid
, 
gc
, 3, 
poöts
);

54 
	`GrSëGCF‹eground
(
gc
, 
GREEN
);

55 
	`GrPﬁy
(
wid
, 
gc
, 4, 
poöts
);

58 
y
 +
sz
 + 10;

59 
poöts
[0].
x
 = x;

60 
poöts
[0].
y
 = y;

61 
poöts
[1].
x
 = x + 
sz
 - 1;

62 
poöts
[1].
y
 = y;

63 
poöts
[2].
x
 = x + (
sz
 / 2);

64 
poöts
[2].
y
 = y + 
sz
;

65 
poöts
[3].
x
 = x;

66 
poöts
[3].
y
 = y;

68 
	`GrSëGCF‹eground
(
gc
, 
WHITE
);

69 
	`GrFûlPﬁy
(
wid
, 
gc
, 3, 
poöts
);

72 
	`GrSëGCF‹eground
(
gc
, 
GREEN
);

73 
	`GrPﬁy
(
wid
, 
gc
, 4, 
poöts
);

76 
x
 = 60;

77 
y
 = 60;

78 
sz
 = 10;

79 
sz2
 = 8;

81 
poöts
[0].
x
 = x;

82 
poöts
[0].
y
 = y;

83 
y
 -
sz
;

84 
poöts
[1].
x
 = x + 
sz2
;

85 
poöts
[1].
y
 = y;

86 
y
 -
sz
;

87 
poöts
[2].
x
 = x;

88 
poöts
[2].
y
 = y;

89 
poöts
[3].
x
 = x;

90 
poöts
[3].
y
 = 60;

92 
	`GrSëGCF‹eground
(
gc
, 
WHITE
);

93 
	`GrFûlPﬁy
(
wid
, 
gc
, 3, 
poöts
);

96 
	`GrSëGCF‹eground
(
gc
, 
GREEN
);

97 
	`GrPﬁy
(
wid
, 
gc
, 4, 
poöts
);

100 
x
 = 60;

101 
y
 = 90;

102 
poöts
[0].
x
 = x;

103 
poöts
[0].
y
 = y;

104 
y
 -
sz
;

105 
poöts
[1].
x
 = x + 
sz2
;

106 
poöts
[1].
y
 = y;

107 
y
 -
sz
;

108 
poöts
[2].
x
 = x;

109 
poöts
[2].
y
 = y;

110 
poöts
[3].
x
 = x;

111 
poöts
[3].
y
 = 90;

113 
	`GrSëGCF‹eground
(
gc
, 
WHITE
);

114 
	`GrFûlPﬁy
(
wid
, 
gc
, 3, 
poöts
);

118 
GR_POINT
 
±1
[5] = {{10,120},{150,130},{120,220},{60,160},{15,200}};

119 
GR_POINT
 
±2
[5] = {{10,220},{150,230},{120,320},{60,360},{15,300}};

122 
	`GrSëGCF‹eground
(
gc
, 
WHITE
);

123 
	`GrFûlPﬁy
(
wid
,
gc
,5,
±1
);

126 
	`GrSëGCF‹eground
(
gc
, 
GREEN
);

127 
	`GrPﬁy
(
wid
,
gc
,5,
±1
);

130 
	`GrSëGCF‹eground
(
gc
, 
WHITE
);

131 
	`GrFûlPﬁy
(
wid
,
gc
,5,
±2
);

134 
	`GrSëGCF‹eground
(
gc
, 
GREEN
);

135 
	`GrPﬁy
(
wid
,
gc
,5,
±2
);

138 
	`GrDe°royGC
(
gc
);

139 
	}
}

142 
	$maö
(
ac
, **
av
)

144 
GR_EVENT
 
evít
;

145 
GR_WINDOW_ID
 
w
;

147 i‡(
	`GrO≥n
() < 0) {

148 
	`Ârötf
(
°dîr
, "cannot open graphics\n");

149 
	`exô
(1);

153 
w
 = 
	`GrNewWödowEx
(
GR_WM_PROPS_NOAUTOMOVE
 | 
GR_WM_PROPS_BORDER
 |

154 
GR_WM_PROPS_CAPTION
 | 
GR_WM_PROPS_CLOSEBOX
,

155 "pﬁydemo", 
GR_ROOT_WINDOW_ID
,

156 10, 10, 220, 362, 
	`GR_RGB
(0, 0, 0));

157 
	`GrSñe˘Evíts
(
w
, 
GR_EVENT_MASK_EXPOSURE
 | 
GR_EVENT_MASK_CLOSE_REQ
);

158 
	`GrM≠Wödow
(
w
);

161 
	`GrGëNextEvít
(&
evít
);

163 
evít
.
ty≥
) {

164 
GR_EVENT_TYPE_EXPOSURE
:

165 
	`døw
(&
evít
);

167 
GR_EVENT_TYPE_CLOSE_REQ
:

168 
	`GrClo£
();

169 
	`exô
(0);

173 
	}
}

	@demos/nanox/pressure.c

32 
	~<°dio.h
>

33 
	~<°dlib.h
>

35 
	~<«no-X.h
>

36 
	~<nxcﬁ‹s.h
>

38 
	#FIX_PRECISION
 10

	)

39 
	~<fixed.h
>

44 
	#DEFAULT_MIN_PRESSURE
 190

	)

45 
	#DEFAULT_MAX_PRESSURE
 215

	)

49 
	#DEFAULT_MIN_PRESSURE
 0

	)

50 
	#DEFAULT_MAX_PRESSURE
 100

	)

53 
	#MAX_BLOB_RAD
 20

	)

54 
	#WINDOW_WIDTH
 160

	)

55 
	#WINDOW_HEIGHT
 160

	)

57 
GR_WINDOW_ID
 
	gmaö_wödow
, 
	gmaö_pixm≠
;

58 
GR_GC_ID
 
	ggc
;

59 
	gmö_z
 = 
DEFAULT_MIN_PRESSURE
;

60 
	gmax_z
 = 
DEFAULT_MAX_PRESSURE
;

61 
	gmax_d
 = 
MAX_BLOB_RAD
;

63 
	$öô
(
¨gc
, *
¨gv
[])

65 
GR_PROP
 *
¥›
;

66 
GR_COORD
 
x
 = 0;

67 
GR_WM_PROPERTIES
 
¥›s
;

68 
möz
, 
maxz
;

70 if(
¨gc
 > 1) {

71 if(
¨gc
 != 3) {

72 
	`Ârötf
(
°dîr
, "Usage: %s min_pressure max_pressure\n",

73 
¨gv
[0]);

76 
möz
 = 
	`©oi
(
¨gv
[1]);

77 
maxz
 = 
	`©oi
(
¨gv
[2]);

78 if(
möz
 =0 || 
maxz
 == 0 || minz >= maxz) {

79 
	`Ârötf
(
°dîr
, "Invalid calibrationÖarameters\n");

82 
mö_z
 = 
möz
;

83 
max_z
 = 
maxz
;

86 if(
	`GrO≥n
() < 0) {

87 
	`Ârötf
(
°dîr
, "Couldn't connectÅo Nano-X server\n");

91 if(
	`GrGëWödowPr›îty
(
GR_ROOT_WINDOW_ID
, "WINDOW_MANAGER", &
¥›
)) {

92 
	`‰ì
(
¥›
);

93 
x
 = 
GR_OFF_SCREEN
;

96 
maö_wödow
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 
x
, 0, 
WINDOW_WIDTH
,

97 
WINDOW_HEIGHT
, 0, 
GR_COLOR_WHITE
, 0);

100 
¥›s
.
Êags
 = 
GR_WM_FLAGS_TITLE
 | 
GR_WM_FLAGS_PROPS
;

101 
¥›s
.¥›†
GR_WM_PROPS_BORDER
 | 
GR_WM_PROPS_CAPTION
 |

102 
GR_WM_PROPS_CLOSEBOX
;

103 
¥›s
.
tôÀ
 = "pressure";

104 
	`GrSëWMPr›îtõs
(
maö_wödow
, &
¥›s
);

106 
	`GrSñe˘Evíts
(
maö_wödow
, 
GR_EVENT_MASK_EXPOSURE
 |

107 
GR_EVENT_MASK_MOUSE_MOTION
 |

109 
GR_EVENT_MASK_BUTTON_DOWN
 |

110 
GR_EVENT_MASK_BUTTON_UP
 |

111 
GR_EVENT_MASK_CLOSE_REQ
);

113 
maö_pixm≠
 = 
	`GrNewPixm≠
(
WINDOW_WIDTH
, 
WINDOW_HEIGHT
, 
NULL
);

115 
gc
 = 
	`GrNewGC
();

116 
	`GrSëGCF‹eground
(
gc
, 
GR_COLOR_WHITE
);

117 
	`GrFûlRe˘
(
maö_pixm≠
, 
gc
, 0, 0, 
WINDOW_WIDTH
, 
WINDOW_HEIGHT
);

118 
	`GrSëGCF‹eground
(
gc
, 
GR_COLOR_BLACK
);

120 
	`GrM≠Wödow
(
maö_wödow
);

123 
	}
}

125 
	$h™dÀ_exposuª_evít
(
GR_EVENT_EXPOSURE
 *
ev
)

127 
	`GrC›yAªa
(
maö_wödow
, 
gc
, 
ev
->
x
,Év->
y
,Év->
width
,Év->
height
,

128 
maö_pixm≠
, 
ev
->
x
,Év->
y
, 0);

129 
	}
}

131 
	$h™dÀ_mou£_evít
(
GR_EVENT_MOUSE
 *
ev
)

133 
z
 = 
ev
->z, 
ød
;

136 if(
z
 < 
mö_z
) ;

139 
z
 = (z > 
max_z
) ? max_z : z;

142 
ød
 = 
	`fixtoöt
(
	`fixmu…
(
	`fixdiv
(
	`öâofix
(
z
 - 
mö_z
),

143 
	`öâofix
(
max_z
 - 
mö_z
)), i¡tofix(
MAX_BLOB_RAD
)));

145 
	`GrFûlEŒù£
(
maö_pixm≠
, 
gc
, 
ev
->
x
,Év->
y
, 
ød
,Ñad);

146 
	`GrFûlEŒù£
(
maö_wödow
, 
gc
, 
ev
->
x
,Év->
y
, 
ød
,Ñad);

147 
	}
}

149 
	$h™dÀ_evít
(
GR_EVENT
 *
ev
)

151 
ev
->
ty≥
) {

152 
GR_EVENT_TYPE_CLOSE_REQ
:

154 
GR_EVENT_TYPE_EXPOSURE
:

155 
	`h™dÀ_exposuª_evít
((
GR_EVENT_EXPOSURE
 *)
ev
);

157 
GR_EVENT_TYPE_MOUSE_POSITION
:

158 
GR_EVENT_TYPE_MOUSE_MOTION
:

159 
	`h™dÀ_mou£_evít
((
GR_EVENT_MOUSE
 *)
ev
);

161 
GR_EVENT_TYPE_BUTTON_DOWN
:

162 
GR_EVENT_TYPE_BUTTON_UP
:

165 
	`Ârötf
(
°dîr
, "GŸ unknow¿evíà%d\n", 
ev
->
ty≥
);

169 
	}
}

171 
	$maö
(
¨gc
, *
¨gv
[])

173 
GR_EVENT
 
ev
;

175 if(
	`öô
(
¨gc
, 
¨gv
))  -1;

178 
	`GrGëNextEvít
(&
ev
);

179 } !
	`h™dÀ_evít
(&
ev
));

181 
	`GrClo£
();

184 
	}
}

	@demos/nanox/rgndemo.c

8 
	~<°dio.h
>

9 
	~<«no-X.h
>

10 
	~<nxcﬁ‹s.h
>

12 
	~"tuxmask.h
"

14 
	#WINDOW_WIDTH
 190

	)

15 
	#WINDOW_HEIGHT
 305

	)

16 
	#NUMGCS
 5

	)

19 
ªdøw
(
GR_WINDOW_ID
 
wid
, 
GR_GC_ID
 *
gc
);

20 
GR_GC_ID
 
£tup_sögÀ_ª˘_ªgi⁄
();

21 
GR_GC_ID
 
£tup_mu…i_ª˘_ªgi⁄
();

22 
GR_GC_ID
 
£tup_sim∂e_pﬁy_ªgi⁄
();

23 
GR_GC_ID
 
£tup_bôm≠_ªgi⁄
();

24 
GR_GC_ID
 
£tup_com∂ex_pﬁy_ªgi⁄
();

27 
	$ªdøw
(
GR_WINDOW_ID
 
wid
, 
GR_GC_ID
 *
gc
)

29 
i
, 
y
;

31 
i
 = 0; i < 
NUMGCS
; i++)

32 
y
 = 40; y < 
WINDOW_HEIGHT
; y += 3)

33 
	`GrLöe
(
wid
, 
gc
[
i
], 0, 
y
, 
WINDOW_WIDTH
 - 1, y - 40);

34 
	}
}

36 
GR_GC_ID
 
	$£tup_sögÀ_ª˘_ªgi⁄
()

38 
GR_GC_ID
 
gc
;

39 
GR_RECT
 
ª˘
;

40 
GR_REGION_ID
 
rg
;

42 
gc
 = 
	`GrNewGC
();

43 
	`GrSëGCF‹eground
(
gc
, 
GR_COLOR_BLACK
);

44 
	`GrSëGCBackground
(
gc
, 
GR_COLOR_WHITE
);

45 
rg
 = 
	`GrNewRegi⁄
();

46 
ª˘
.
x
 = 0;

47 
ª˘
.
y
 = 0;

48 
ª˘
.
width
 = 60;

49 
ª˘
.
height
 = 40;

50 
	`GrUni⁄Re˘WôhRegi⁄
(
rg
, &
ª˘
);

51 
	`GrSëGCRegi⁄
(
gc
, 
rg
);

52 
	`GrSëGCClùOrigö
(
gc
, 25, 35);

54  
gc
;

55 
	}
}

57 
GR_GC_ID
 
	$£tup_mu…i_ª˘_ªgi⁄
()

59 
GR_GC_ID
 
gc
;

60 
GR_RECT
 
ª˘
;

61 
GR_REGION_ID
 
rg
;

63 
gc
 = 
	`GrNewGC
();

64 
	`GrSëGCF‹eground
(
gc
, 
GR_COLOR_BLUE
);

65 
	`GrSëGCBackground
(
gc
, 
GR_COLOR_WHITE
);

66 
rg
 = 
	`GrNewRegi⁄
();

67 
ª˘
.
x
 = 10;

68 
ª˘
.
y
 = 0;

69 
ª˘
.
width
 = 10;

70 
ª˘
.
height
 = 60;

71 
	`GrUni⁄Re˘WôhRegi⁄
(
rg
, &
ª˘
);

72 
ª˘
.
x
 = 40;

73 
ª˘
.
y
 = 0;

74 
ª˘
.
width
 = 10;

75 
ª˘
.
height
 = 60;

76 
	`GrUni⁄Re˘WôhRegi⁄
(
rg
, &
ª˘
);

77 
ª˘
.
x
 = 0;

78 
ª˘
.
y
 = 10;

79 
ª˘
.
width
 = 60;

80 
ª˘
.
height
 = 10;

81 
	`GrUni⁄Re˘WôhRegi⁄
(
rg
, &
ª˘
);

82 
ª˘
.
x
 = 0;

83 
ª˘
.
y
 = 40;

84 
ª˘
.
width
 = 60;

85 
ª˘
.
height
 = 10;

86 
	`GrUni⁄Re˘WôhRegi⁄
(
rg
, &
ª˘
);

87 
	`GrSëGCRegi⁄
(
gc
, 
rg
);

88 
	`GrSëGCClùOrigö
(
gc
, 105, 15);

90  
gc
;

91 
	}
}

93 
GR_GC_ID
 
	$£tup_sim∂e_pﬁy_ªgi⁄
()

95 
GR_GC_ID
 
gc
;

96 
GR_REGION_ID
 
rg
;

97 
GR_POINT
 
poöts
[] = { {15, 0}, {45, 0}, {60, 15}, {60, 45}, {45, 60},

100 
gc
 = 
	`GrNewGC
();

101 
	`GrSëGCF‹eground
(
gc
, 
GR_COLOR_PURPLE
);

102 
	`GrSëGCBackground
(
gc
, 
GR_COLOR_WHITE
);

103 
rg
 = 
	`GrNewPﬁyg⁄Regi⁄
(
GR_POLY_WINDING
, 8, 
poöts
);

104 
	`GrSëGCRegi⁄
(
gc
, 
rg
);

105 
	`GrSëGCClùOrigö
(
gc
, 25, 95);

107  
gc
;

108 
	}
}

110 
GR_GC_ID
 
	$£tup_bôm≠_ªgi⁄
()

112 
GR_GC_ID
 
gc
;

113 
GR_REGION_ID
 
rg
;

115 
gc
 = 
	`GrNewGC
();

116 
	`GrSëGCF‹eground
(
gc
, 
GR_COLOR_FORESTGREEN
);

117 
	`GrSëGCBackground
(
gc
, 
GR_COLOR_WHITE
);

118 
rg
 = 
	`GrNewBôm≠Regi⁄
(
tuxmask_bôs
, 
TUXMASK_WIDTH
, 
TUXMASK_HEIGHT
);

119 
	`GrSëGCRegi⁄
(
gc
, 
rg
);

120 
	`GrSëGCClùOrigö
(
gc
, 100, 80);

122  
gc
;

123 
	}
}

125 
GR_GC_ID
 
	$£tup_com∂ex_pﬁy_ªgi⁄
()

127 
GR_GC_ID
 
gc
;

128 
GR_REGION_ID
 
rg
;

129 
GR_POINT
 
poöts
[] = { {0, 0}, {99, 0}, {99, 99}, {0, 99}, {0, 19},

134 
gc
 = 
	`GrNewGC
();

135 
	`GrSëGCF‹eground
(
gc
, 
GR_COLOR_ORANGE
);

136 
	`GrSëGCBackground
(
gc
, 
GR_COLOR_WHITE
);

137 
rg
 = 
	`GrNewPﬁyg⁄Regi⁄
(
GR_POLY_EVENODD
, 20, 
poöts
);

138 
	`GrSëGCRegi⁄
(
gc
, 
rg
);

139 
	`GrSëGCClùOrigö
(
gc
, 25, 180);

141  
gc
;

142 
	}
}

144 
	$maö
()

146 
GR_WINDOW_ID
 
wid
;

147 
GR_GC_ID
 
gc
[
NUMGCS
];

148 
GR_EVENT
 
evít
;

150 if(
	`GrO≥n
() < 0) {

151 
	`Ârötf
(
°dîr
, "Couldn't connectÅoÅhe Nano-X server\n");

155 
wid
 = 
	`GrNewWödowEx
(
GR_WM_PROPS_APPWINDOW
, "rgndemo",

156 
GR_ROOT_WINDOW_ID
, 0, 0, 
WINDOW_WIDTH
, 
WINDOW_HEIGHT
,

157 
GR_COLOR_GRAY80
);

159 
	`GrSñe˘Evíts
(
wid
, 
GR_EVENT_MASK_CLOSE_REQ
 | 
GR_EVENT_MASK_EXPOSURE
);

161 
gc
[0] = 
	`£tup_sögÀ_ª˘_ªgi⁄
();

162 
gc
[1] = 
	`£tup_mu…i_ª˘_ªgi⁄
();

163 
gc
[2] = 
	`£tup_sim∂e_pﬁy_ªgi⁄
();

164 
gc
[3] = 
	`£tup_bôm≠_ªgi⁄
();

165 
gc
[4] = 
	`£tup_com∂ex_pﬁy_ªgi⁄
();

167 
	`GrM≠Wödow
(
wid
);

170 
	`GrGëNextEvít
(&
evít
);

171 
evít
.
ty≥
) {

172 
GR_EVENT_TYPE_EXPOSURE
:

173 
	`ªdøw
(
wid
, 
gc
);

175 
GR_EVENT_TYPE_CLOSE_REQ
:

176 
	`GrClo£
();

182 
	}
}

	@demos/nanox/setportrait.c

6 
	~<°dio.h
>

7 
	~<°dlib.h
>

8 
	~<°rög.h
>

10 
	~<«no-X.h
>

12 
	$ußge
()

14 
	`Ârötf
(
°dîr
, "Usage: setportrait <none|left|right|down>\n");

15 
	`exô
(-1);

16 
	}
}

18 
	$maö
(
¨gc
, *
¨gv
[])

20 
p‹åaô
 = -1;

22 if(
¨gc
 !2Ë
	`ußge
();

24 if(!
	`°rcmp
("n⁄e", 
¨gv
[1])Ë
p‹åaô
 = 
MWPORTRAIT_NONE
;

25 if(!
	`°rcmp
("À·", 
¨gv
[1])Ë
p‹åaô
 = 
MWPORTRAIT_LEFT
;

26 if(!
	`°rcmp
("right", 
¨gv
[1])Ë
p‹åaô
 = 
MWPORTRAIT_RIGHT
;

27 if(!
	`°rcmp
("down", 
¨gv
[1])Ë
p‹åaô
 = 
MWPORTRAIT_DOWN
;

28 
	`ußge
();

30 if(
	`GrO≥n
() < 0) {

31 
	`Ârötf
(
°dîr
, "Couldn't connectÅo Nano-X server\n");

35 
	`GrSëP‹åaôMode
(
p‹åaô
);

37 
	`GrClo£
();

40 
	}
}

	@demos/nanox/setselection.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~<uni°d.h
>

5 
	~"«no-X.h
"

7 
	$maö
(
¨gc
, *
¨gv
[])

9 
GR_WINDOW_ID
 
wid
;

10 
GR_EVENT
 
evít
;

11 
FILE
 *
Â
;

12 *
buf
 = 
NULL
;

13 
buf_size
 = 0;

14 
d©a_Àn
 = 0;

15 
ªt
 = 0;

16 
GR_EVENT_CLIENT_DATA_REQ
 *
ªq
;

17 
GR_EVENT_SELECTION_CHANGED
 *
sc
;

19 if(
¨gc
 != 2) {

20 
	`Ârötf
(
°dîr
, "Usage: setselection <text file>\n");

24 if(!(
Â
 = 
	`f›í
(
¨gv
[1], "r"))) {

25 
	`Ârötf
(
°dîr
, "Couldn't openÅext file\n");

30 
d©a_Àn
 +
ªt
;

31 
buf_size
 = 
d©a_Àn
 + 65536;

32 if(!(
buf
 = 
	`ªÆloc
(buf, 
buf_size
))) {

33 
	`Ârötf
(
°dîr
, "Out of memory\n");

36 } (
ªt
 = 
	`‰ód
(
buf
 + 
d©a_Àn
, 1, 65536, 
Â
)) > 0);

37 if(
ªt
 < 0) {

38 
	`Ârötf
(
°dîr
, "FailedÅoÑeadÅext file sucessfully\n");

42 if(
	`GrO≥n
() < 0) {

43 
	`Ârötf
(
°dîr
, "Couldn't connectÅo Nano-X server\n");

47 
wid
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 0, 0, 1, 1, 0, 0, 0);

48 if(!
wid
) {

49 
	`Ârötf
(
°dîr
, "Couldn't getá window\n");

53 
	`GrSñe˘Evíts
(
wid
, 
GR_EVENT_MASK_CLIENT_DATA_REQ
 |

54 
GR_EVENT_MASK_SELECTION_CHANGED
);

56 
	`GrSëSñe˘i⁄Ow√r
(
wid
, "nota/realtypeÅext/plainÇon/existant "

60 
	`GrGëNextEvít
(&
evít
);

61 
evít
.
ty≥
) {

62 
GR_EVENT_TYPE_CLIENT_DATA_REQ
:

63 
ªq
 = &
evít
.
˛õ¡d©¨eq
;

64 
	`Ârötf
(
°dîr
, "GotÑequest with serial "

66 "ty≥ %d\n", 
ªq
->
£rül
,Ñeq->
rid
,

67 
ªq
->
mimëy≥
);

68 
	`GrSídClõ¡D©a
(
wid
, 
ªq
->
rid
,Ñeq->
£rül
,

69 
d©a_Àn
, d©a_Àn, 
buf
);

71 
GR_EVENT_TYPE_SELECTION_CHANGED
:

72 
sc
 = &
evít
.
£À˘i⁄ch™ged
;

73 if(
sc
->
√w_ow√r
 !
wid
) {

74 
	`Ârötf
(
°dîr
, "Lost selectionÅo "

75 "wödow %d\n", 
sc
->
√w_ow√r
);

84 
	}
}

	@demos/nanox/slider.c

8 
	~<°dio.h
>

9 
	~<°dlib.h
>

10 
	~<°rög.h
>

11 
	~<uni°d.h
>

13 
	#MWINCLUDECOLORS


	)

14 
	~"«no-X.h
"

17 
	#WIDTH_IN_TILES
 4

	)

18 
	#HEIGHT_IN_TILES
 4

	)

19 
	#MAX_TILES
 (
WIDTH_IN_TILES
 * 
HEIGHT_IN_TILES
)

	)

20 
	#USE_IMAGE
 1

	)

22 
	gvÆue
[
WIDTH_IN_TILES
][
HEIGHT_IN_TILES
];

23 
	gˇlc_width
, 
	gˇlc_height
;

24 
	gtûe_width
 = 40;

25 
	gtûe_height
 = 40;

27 #i‡
USE_IMAGE


28 * 
	gimage_addr
;

29 
	gusög_image
 = 1;

30 
GR_WINDOW_ID
 
	gimage
;

33 
GR_WINDOW_ID
 
	gma°î
;

34 
GR_WINDOW_ID
 
	gbuâ⁄s
;

35 
GR_WINDOW_ID
 
	gtûes
;

36 
GR_GC_ID
 
	ggc1
;

39 
H™dÀEvíts
();

40 
Re‰eshWödow
();

41 
R™domi£Tûes
();

42 
MoveTûe
();

43 
DøwTûe
();

46 
	$maö
(
¨gc
,**
¨gv
)

48 i‡(
	`GrO≥n
() < 0) {

49 
	`Ârötf
(
°dîr
, "cannot open graphics\n");

50 
	`exô
(1);

53 
gc1
 = 
	`GrNewGC
();

55 #i‡
USE_IMAGE


56 
image
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 300, 0, (
WIDTH_IN_TILES
 * 
tûe_width
),

57 (
HEIGHT_IN_TILES
 * 
tûe_height
), 4, 
BLACK
, 
WHITE
);

59 if(
¨gc
 != 2)

61 
usög_image
 = 0;

64 
image_addr
 = 
	`mÆloc
(4 * (
WIDTH_IN_TILES
 * 
tûe_width
) *

65 (
HEIGHT_IN_TILES
 * 
tûe_height
) );

67 
image
 = 
	`GrNewPixm≠
((
WIDTH_IN_TILES
 * 
tûe_width
),

68 (
HEIGHT_IN_TILES
 * 
tûe_height
), 
image_addr
);

70 
	`GrDøwImageFromFûe
(
image
, 
gc1
, 0, 0,

71 
GR_IMAGE_MAX_SIZE
, GR_IMAGE_MAX_SIZE, 
¨gv
[1], 0);

76 
ˇlc_width
 = 10 + (
WIDTH_IN_TILES
 * 
tûe_width
);

77 
ˇlc_height
 = 15 + 35 + (
HEIGHT_IN_TILES
 * 
tûe_height
);

80 i‡(
ˇlc_width
 < 240) calc_width=240;

81 i‡(
ˇlc_height
 < 320) calc_height=320;

83 
ma°î
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 0, 0, 
ˇlc_width
, 
ˇlc_height
, 1, 
RED
, 
WHITE
);

84 
buâ⁄s
 = 
	`GrNewWödow
((
GR_WINDOW_ID
Ë
ma°î
, 5, 5, (
ˇlc_width
 - 5), 35, 1, 
RED
, RED);

86 
tûes
 = 
	`GrNewWödow
((
GR_WINDOW_ID
Ë
ma°î
, (
ˇlc_width
/2Ë- (
WIDTH_IN_TILES
 * 
tûe_width
 /2),

87 45 + ((
ˇlc_height
 - 50)/2Ë- (
HEIGHT_IN_TILES
 * 
tûe_height
 /2),

88 (
WIDTH_IN_TILES
 * 
tûe_width
), (
HEIGHT_IN_TILES
 * 
tûe_height
), 1, 
RED
, RED);

90 
	`GrM≠Wödow
(
ma°î
);

91 
	`GrM≠Wödow
(
buâ⁄s
);

92 
	`GrM≠Wödow
(
tûes
);

95 
	`§™dom
((Ë
	`gëpid
());

97 
	`R™domi£Tûes
();

99 
	`GrSñe˘Evíts
(
ma°î
, 
GR_EVENT_MASK_EXPOSURE
|
GR_EVENT_MASK_CLOSE_REQ
|

100 
GR_EVENT_MASK_KEY_DOWN
);

101 
	`GrSñe˘Evíts
(
buâ⁄s
, 
GR_EVENT_MASK_BUTTON_DOWN
);

102 
	`GrSñe˘Evíts
(
tûes
, 
GR_EVENT_MASK_BUTTON_DOWN
);

104 
	`Re‰eshWödow
();

106 
GR_TRUE
) {

107 
GR_EVENT
 
evít
;

109 
	`GrGëNextEvít
(&
evít
);

110 
	`H™dÀEvíts
(&
evít
);

112 
	}
}

119 
	$H™dÀEvíts
(
GR_EVENT
 *
ï
)

121 
hﬁe_x_pos
, 
hﬁe_y_pos
;

122 
ãmpx
, 
ãmpy
;

124 
ï
->
ty≥
) {

125 
GR_EVENT_TYPE_BUTTON_DOWN
:

126 i‡(
ï
->
buâ⁄
.
wid
 =
buâ⁄s
) {

127 i‡(
ï
->
buâ⁄
.
x
 < (
ˇlc_width
/2)) {

129 
	`R™domi£Tûes
();

130 
	`Re‰eshWödow
();

133 
	`GrClo£
();

134 #i‡
USE_IMAGE


135 i‡(
usög_image
)

136 
	`‰ì
(
image_addr
);

138 
	`exô
(0);

142 i‡(
ï
->
buâ⁄
.
wid
 =
tûes
) {

144 
	`MoveTûe
–()(
ï
->
buâ⁄
.
x
 / 
tûe_width
),

145 ()(
ï
->
buâ⁄
.
y
 / 
tûe_height
) );

149 
GR_EVENT_TYPE_KEY_DOWN
:

150 i‡(
ï
->
key°roke
.
wid
 =
ma°î
) {

151 
hﬁe_x_pos
 = 0;

152 
hﬁe_y_pos
 = 0;

155 
ãmpx
 = 0;Åempx < 
WIDTH_IN_TILES
;Åempx++)

156 
ãmpy
 = 0;Åempy < 
HEIGHT_IN_TILES
;Åempy++)

157 i‡(
vÆue
[
ãmpx
][
ãmpy
] =
MAX_TILES
) {

158 
hﬁe_x_pos
 = 
ãmpx
;

159 
hﬁe_y_pos
 = 
ãmpy
;

162 
ï
->
key°roke
.
ch
) {

165 
MWKEY_CANCEL
:

166 
	`GrClo£
();

167 #i‡
USE_IMAGE


168 i‡(
usög_image
)

169 
	`‰ì
(
image_addr
);

171 
	`exô
(0);

175 
	`R™domi£Tûes
();

176 
	`Re‰eshWödow
();

180 
MWKEY_DOWN
:

181 i‡(
hﬁe_y_pos
 != 0) {

182 
	`MoveTûe
(
hﬁe_x_pos
, 
hﬁe_y_pos
 - 1);

186 
MWKEY_UP
:

187 i‡(
hﬁe_y_pos
 !(
HEIGHT_IN_TILES
-1) ) {

188 
	`MoveTûe
(
hﬁe_x_pos
, 
hﬁe_y_pos
 + 1);

192 
MWKEY_RIGHT
:

193 i‡(
hﬁe_x_pos
 != 0) {

194 
	`MoveTûe
(
hﬁe_x_pos
 - 1, 
hﬁe_y_pos
);

198 
MWKEY_LEFT
:

199 i‡(
hﬁe_x_pos
 !(
WIDTH_IN_TILES
-1) ) {

200 
	`MoveTûe
(
hﬁe_x_pos
 + 1, 
hﬁe_y_pos
);

207 
GR_EVENT_TYPE_EXPOSURE
:

208 
	`Re‰eshWödow
();

210 
GR_EVENT_TYPE_CLOSE_REQ
:

211 
	`GrClo£
();

212 
	`exô
(0);

215 
	}
}

218 
	$Re‰eshWödow
()

220 
xpos
, 
ypos
;

222 
	`GrSëGCF‹eground
(
gc1
, 
WHITE
);

223 
	`GrSëGCBackground
(
gc1
, 
RED
);

226 
	`GrRe˘
(
buâ⁄s
, 
gc1
, 0, 0, (
ˇlc_width
 - 12)/2, 34);

227 
	`GrRe˘
(
buâ⁄s
, 
gc1
, (
ˇlc_width
 - 8)/2, 0, (calc_width - 12)/2, 34);

230 
	`GrText
(
buâ⁄s
, 
gc1
, (
ˇlc_width
 - 10)/4, 22, "Again", 5, 0);

231 
	`GrText
(
buâ⁄s
, 
gc1
, (
ˇlc_width
 - 10)*3/4, 22, "Quit", 4, 0);

233 
	`GrText
(
buâ⁄s
, 
gc1
, 5, 22, "Again", 5, 0);

234 
	`GrText
(
buâ⁄s
, 
gc1
, (
ˇlc_width
 / 2) + 5, 22, "Quit", 4, 0);

238 
ypos
=0; ypos< 
HEIGHT_IN_TILES
; ypos++){

239 
xpos
=0; xpos< 
WIDTH_IN_TILES
; xpos++){

240 
	`DøwTûe
(
xpos
, 
ypos
);

243 
	}
}

246 
	$R™domi£Tûes
()

248 
cou¡
, 
xpos
, 
ypos
;

251 
ypos
=0; ypos< 
HEIGHT_IN_TILES
; ypos++){

252 
xpos
=0; xpos< 
WIDTH_IN_TILES
; xpos++){

253 
vÆue
[
xpos
][
ypos
] = 1 + xpo†+ (
WIDTH_IN_TILES
 * ypos);

258 
xpos
 = 
WIDTH_IN_TILES
 - 1;

259 
ypos
 = 
HEIGHT_IN_TILES
 - 1;

262 
cou¡
=0; cou¡< 
MAX_TILES
 * 1000; count++){

263 
	`øndom
() % 4) {

265 i‡(
ypos
 < 
HEIGHT_IN_TILES
 - 1) {

266 
vÆue
[
xpos
][
ypos
] = value[xpos][ypos+1];

267 
ypos
++;

268 
vÆue
[
xpos
][
ypos
] = 
MAX_TILES
;

272 i‡(
xpos
 > 0) {

273 
vÆue
[
xpos
][
ypos
] = value[xpos - 1][ypos];

274 
xpos
--;

275 
vÆue
[
xpos
][
ypos
] = 
MAX_TILES
;

279 i‡(
ypos
 > 0) {

280 
vÆue
[
xpos
][
ypos
] = value[xpos][ypos - 1];

281 
ypos
--;

282 
vÆue
[
xpos
][
ypos
] = 
MAX_TILES
;

286 i‡(
xpos
 < 
WIDTH_IN_TILES
 - 1) {

287 
vÆue
[
xpos
][
ypos
] = value[xpos + 1][ypos];

288 
xpos
++;

289 
vÆue
[
xpos
][
ypos
] = 
MAX_TILES
;

294 
	}
}

297 
	$MoveTûe
(
xpos
, 
ypos
)

300 i‡(
ypos
 > 0 && 
vÆue
[
xpos
][ypo†- 1] =
MAX_TILES
) {

301 
vÆue
[
xpos
][
ypos
 - 1] = value[xpos][ypos];

302 
vÆue
[
xpos
][
ypos
] = 
MAX_TILES
;

303 
	`DøwTûe
(
xpos
, 
ypos
 - 1);

304 
	`DøwTûe
(
xpos
, 
ypos
);

307 i‡(
xpos
 < (
WIDTH_IN_TILES
 - 1Ë&& 
vÆue
[xpo†+ 1][
ypos
] =
MAX_TILES
) {

308 
vÆue
[
xpos
 + 1][
ypos
] = value[xpos][ypos];

309 
vÆue
[
xpos
][
ypos
] = 
MAX_TILES
;

310 
	`DøwTûe
(
xpos
 + 1, 
ypos
);

311 
	`DøwTûe
(
xpos
, 
ypos
);

314 i‡(
ypos
 < (
HEIGHT_IN_TILES
 - 1Ë&& 
vÆue
[
xpos
][ypo†+ 1] =
MAX_TILES
) {

315 
vÆue
[
xpos
][
ypos
 + 1] = value[xpos][ypos];

316 
vÆue
[
xpos
][
ypos
] = 
MAX_TILES
;

317 
	`DøwTûe
(
xpos
, 
ypos
 + 1);

318 
	`DøwTûe
(
xpos
, 
ypos
);

321 i‡(
xpos
 > 0 && 
vÆue
[xpo†- 1][
ypos
] =
MAX_TILES
) {

322 
vÆue
[
xpos
 - 1][
ypos
] = value[xpos][ypos];

323 
vÆue
[
xpos
][
ypos
] = 
MAX_TILES
;

324 
	`DøwTûe
(
xpos
 - 1, 
ypos
);

325 
	`DøwTûe
(
xpos
, 
ypos
);

329 i‡(
vÆue
[
WIDTH_IN_TILES
 - 1][
HEIGHT_IN_TILES
 - 1] =
MAX_TILES
) {

330 
wö√r
 = 0;

331 
ypos
=0; ypos< 
HEIGHT_IN_TILES
; ypos++){

332 
xpos
=0; xpos< 
WIDTH_IN_TILES
; xpos++){

333 i‡(
vÆue
[
xpos
][
ypos
] =
wö√r
 + 1)

334 
wö√r
++;

336 
wö√r
=0;

339 i‡(
wö√r
 =
MAX_TILES
) {

341 
lo›
 = 
MAX_TILES
;

342 
lo›
=0;Üo› < 
MAX_TILES
;Üoop++) {

343 
wö√r
=0; wö√∏< (
MAX_TILES
 - 
lo›
) ; winner++) {

346 
xpos
 = 
wö√r
 % 
WIDTH_IN_TILES
;

347 
ypos
 = ()(
wö√r
/
WIDTH_IN_TILES
);

348 
vÆue
[
xpos
][
ypos
] = 
lo›
 + 
wö√r
 + 1;

349 
	`DøwTûe
(
wö√r
 % 
WIDTH_IN_TILES
, ()(winner/WIDTH_IN_TILES));

351 
	`GrFlush
();

352 
wö√r
=0; winner < 10000000 ; winner++);

356 
	`GrSëGCF‹eground
(
gc1
, 
WHITE
);

357 
	`GrSëGCBackground
(
gc1
, 
RED
);

358 
	`GrText
(
tûes
, 
gc1
, ((
WIDTH_IN_TILES
 * 
tûe_width
)/2Ë- 40, (
HEIGHT_IN_TILES
 * 
tûe_height
)/2, "Well Done!!", -1, 0);

362 
	}
}

366 
	$DøwTûe
(
xpos
, 
ypos
)

368 
ãxt
[]="00";

371 
	`GrSëGCF‹eground
(
gc1
, 
RED
);

372 
	`GrFûlRe˘
(
tûes
, 
gc1
, (
xpos
* 
tûe_width
), (
ypos
*
tûe_height
),Åile_width,Åile_height);

374 i‡(
vÆue
[
xpos
][
ypos
] !
MAX_TILES
 ) {

376 
	`GrSëGCF‹eground
(
gc1
, 
WHITE
);

377 
	`GrSëGCBackground
(
gc1
, 
RED
);

378 
	`GrRe˘
(
tûes
, 
gc1
, (
xpos
*
tûe_width
), (
ypos
*
tûe_height
),Åile_width,Åile_height);

380 #i‡
USE_IMAGE


381 i‡(
usög_image
) {

383 
	`GrC›yAªa
(
tûes
, 
gc1
, 1 + (
xpos
*
tûe_width
), 1 + (
ypos
*
tûe_height
),

384 
tûe_width
 - 2, 
tûe_height
 - 2, 
image
,

385 1 + (((
vÆue
[
xpos
][
ypos
] - 1Ë% 
WIDTH_IN_TILES
Ë* 
tûe_width
),

386 1 + ((()(
vÆue
[
xpos
][
ypos
] - 1Ë/ 
WIDTH_IN_TILES
Ë* 
tûe_height
), 0);

390 i‡(
vÆue
[
xpos
][
ypos
] > 9)

391 
ãxt
[0] = 48 + ()(
vÆue
[
xpos
][
ypos
]/10);

393 
ãxt
[0] = 32;

395 
ãxt
[1] = 48 + 
vÆue
[
xpos
][
ypos
] % 10;

397 
	`GrText
(
tûes
, 
gc1
, (
xpos
*
tûe_width
Ë+ (tûe_width /2Ë- 5, (
ypos
*
tûe_height
Ë+ (tûe_height/2Ë+ 5, &
ãxt
, -1, 0);

398 #i‡
USE_IMAGE


402 
	}
}

	@demos/nanox/snap_jpg.c

4 
	~<°dio.h
>

5 
	~<°dlib.h
>

6 
	~<î∫o.h
>

7 
	~<°rög.h
>

8 
	~<«no-X.h
>

9 
	~<j≥glib.h
>

12 
	#PIXEL888TOCOLORVAL
(
p
) \

13 ((((
p
Ë& 0xff0000Ë>> 16Ë| (’Ë& 0xff00Ë| ((’Ë& 0xffË<< 16))

	)

16 
	#PIXEL565TOCOLORVAL
(
p
) \

17 ((((
p
Ë& 0xf800Ë>> 8Ë| ((’Ë& 0x07e0Ë<< 5Ë| ((’Ë& 0x1fË<< 19))

	)

19 
	#PIXEL555TOCOLORVAL
(
p
) \

20 ((((
p
Ë& 0x7c00Ë>> 7Ë| ((’Ë& 0x03e0Ë<< 6Ë| ((’Ë& 0x1fË<< 19))

	)

23 
	#PIXEL332TOCOLORVAL
(
p
) \

24 ((((
p
Ë& 0xe0)Ë| ((’Ë& 0x1cË<< 11Ë| ((’Ë& 0x03Ë<< 19))

	)

28 
	$ßve_image
(*
fb
, 
GR_WINDOW_FB_INFO
 * 
öfo
, *
fûe
)

30 
y
;

31 
FILE
 *
Â
;

32 
cﬁ‹vÆ
 = 0;

33 
j≥g_com¥ess_°ru˘
 
cöfo
;

34 
j≥g_îr‹_mgr
 
jîr
;

36 
Â
 = 
	`f›í
(
fûe
, "wb");

37 i‡(!
Â
) {

38 
	`Ârötf
(
°dîr
, "Bad fileÇame (error [%s])\n",

39 
	`°ªº‹
(
î∫o
));

43 
cöfo
.
îr
 = 
	`j≥g_°d_îr‹
(&
jîr
);

45 
	`j≥g_¸óã_com¥ess
(&
cöfo
);

46 
	`j≥g_°dio_de°
(&
cöfo
, 
Â
);

48 
cöfo
.
ö_cﬁ‹_•a˚
 = 
JCS_RGB
;

50 
cöfo
.
image_width
 = 
öfo
->
xªs
;

51 
cöfo
.
image_height
 = 
öfo
->
yªs
;

53 
cöfo
.
öput_comp⁄íts
 = 3;

54 
	`j≥g_£t_deÁu…s
(&
cöfo
);

56 
	`j≥g_°¨t_com¥ess
(&
cöfo
, 
TRUE
);

58 
y
 = 0; y < 
öfo
->
yªs
; y++) {

59 
JSAMPROW
 
row
[1];

61 
x
;

62 *
de°
 = 
	`Æloˇ
(
öfo
->
xªs
 * 3);

64 *
±r
 = 
de°
;

65 *
ch
 = (
fb
 + (
y
 * 
öfo
->
pôch
));

67 
x
 = 0; x < 
öfo
->
xªs
; x++) {

68 
öfo
->
bµ
) {

70 
cﬁ‹vÆ
 = 
	`PIXEL332TOCOLORVAL
(*
ch
);

74 
cﬁ‹vÆ
 =

75 
	`PIXEL555TOCOLORVAL
(*((*)
ch
));

80 
cﬁ‹vÆ
 = 
	`PIXEL888TOCOLORVAL
(*((*)
ch
));

84 
±r
[2] = (
cﬁ‹vÆ
 >> 16) & 0xFF;

85 
±r
[1] = (
cﬁ‹vÆ
 >> 8) & 0xFF;

86 
±r
[0] = (
cﬁ‹vÆ
 & 0xFF);

88 
±r
 += 3;

89 
ch
 +
öfo
->
byã•p
;

92 
row
[0] = 
de°
;

93 
	`j≥g_wrôe_sˇ∆öes
(&
cöfo
, 
row
, 1);

96 
	`j≥g_föish_com¥ess
(&
cöfo
);

97 
	`j≥g_de°roy_com¥ess
(&
cöfo
);

98 
	`f˛o£
(
Â
);

101 
	}
}

104 
	$maö
(
¨gc
, **
¨gv
)

106 
GR_WINDOW_FB_INFO
 
fböfo
;

107 *
fb
;

109 i‡(
¨gc
 < 2) {

110 
	`¥ötf
("Usage: snap_jpg <filename>\n");

114 i‡(
	`GrO≥n
() == -1) {

115 
	`Ârötf
(
°dîr
, "Error -Åhe Nano-X server isÇotÑunning\n");

119 
	`¥ötf
("TakögÅhêpi˘uªánd st‹ög iàö [%s]\n", 
¨gv
[1]);

121 
fb
 = 
	`GrO≥nClõ¡Fømebuf„r
();

123 i‡(!
fb
) {

124 
	`Ârötf
(
°dîr
,

129 
	`GrGëWödowFBInfo
(
GR_ROOT_WINDOW_ID
, &
fböfo
);

131 i‡(
	`ßve_image
(
fb
, &
fböfo
, 
¨gv
[1]) == -1)

132 
	`¥ötf
("Error!\n");

134 
	`¥ötf
("Su˚ssfuŒy saved [%s]\n", 
¨gv
[1]);

136 
	`GrClo£Clõ¡Fømebuf„r
();

137 
	`GrClo£
();

139 
	}
}

	@demos/nanox/snap_ppm.c

37 
	~<°dio.h
>

38 
	~<î∫o.h
>

39 
	~<°rög.h
>

40 
	~<uni°d.h
>

41 
	~<°dlib.h
>

43 
	~<«no-X.h
>

45 
	s¢≠_°©e
 {

46 *
	mouäame
;

47 
GR_PIXELVAL
 *
	mpixñs
;

48 
GR_SCREEN_INFO
 
	msöfo
;

50 
¢≠_°©e
 
	t¢≠°©e
;

52 
	$oom
()

54 
	`Ârötf
(
°dîr
, "Out of memory\n");

55 
	}
}

57 
¢≠°©e
 *
	$öô
(
¨gc
, *
¨gv
[])

59 
¢≠°©e
 *
°©e
;

61 if(
¨gc
 != 2) {

62 
	`Ârötf
(
°dîr
, "Usage: snap output.ppm\n");

63  
NULL
;

66 if(
	`GrO≥n
() < 0) {

67 
	`Ârötf
(
°dîr
, "Couldn't connectÅo Nano-X server\n");

68  
NULL
;

71 if(!(
°©e
 = 
	`mÆloc
((
¢≠°©e
)))) {

72 
	`oom
();

73  
NULL
;

76 
°©e
->
ouäame
 = 
¨gv
[1];

78 
	`GrGëS¸ìnInfo
(&
°©e
->
söfo
);

80 if(!(
°©e
->
pixñs
 = 
	`mÆloc
((
GR_PIXELVAL
Ë* sèã->
söfo
.
rows


81 * 
°©e
->
söfo
.
cﬁs
))) {

82 
	`‰ì
(
°©e
);

83 
	`oom
();

84  
NULL
;

87 (
°©e
);

88 
	}
}

90 
	$wrôeout
(
¢≠°©e
 *
°©e
)

92 
FILE
 *
Â
;

93 
x
, 
y
;

94 
rgb
[3], *
µ
;

95 
GR_PALETTE
 *
∑Àâe
 = 
NULL
;

97 if(!(
Â
 = 
	`f›í
(
°©e
->
ouäame
, "w"))) {

98 
	`Ârötf
(
°dîr
, "Couldn't open output file \"%s\": %s\n",

99 
°©e
->
ouäame
, 
	`°ªº‹
(
î∫o
));

103 if(
	`Ârötf
(
Â
, "P6\n%d %d\n255\n", 
°©e
->
söfo
.
cﬁs
, sèã->söfo.
rows
)

105 
badwrôe
;

107 if(
°©e
->
söfo
.
pixty≥
 =
MWPF_PALETTE
) {

108 if(!(
∑Àâe
 = 
	`mÆloc
((
GR_PALETTE
)))) {

109 
	`oom
();

112 
	`GrGëSy°emPÆëã
(
∑Àâe
);

115 
y
 = 0; y < 
°©e
->
söfo
.
rows
; y++) {

116 
x
 = 0; x < 
°©e
->
söfo
.
cﬁs
; x++) {

118 
µ
 = (*)
°©e
->
pixñs
 +

119 ((
x
 + (
y
 * 
°©e
->
söfo
.
cﬁs
)) *

120 (
GR_PIXELVAL
));

122 
°©e
->
söfo
.
pixty≥
) {

124 
MWPF_TRUECOLOR0888
:

125 
MWPF_TRUECOLOR888
:

126 
rgb
[0] = 
µ
[2];

127 
rgb
[1] = 
µ
[1];

128 
rgb
[2] = 
µ
[0];

130 
MWPF_PALETTE
:

131 
rgb
[0] = 
∑Àâe
->∑Àâe[
µ
[0]].
r
;

132 
rgb
[1] = 
∑Àâe
->∑Àâe[
µ
[0]].
g
;

133 
rgb
[2] = 
∑Àâe
->∑Àâe[
µ
[0]].
b
;

135 
MWPF_TRUECOLOR565
:

136 
rgb
[0] = 
µ
[1] & 0xf8;

137 
rgb
[1] = ((
µ
[1] & 0x07) << 5) |

138 ((
µ
[0] & 0xe0) >> 3);

139 
rgb
[2] = (
µ
[0] & 0x1f) << 3;

141 
MWPF_TRUECOLOR555
:

142 
rgb
[0] = (
µ
[1] & 0x7c) << 1;

143 
rgb
[1] = ((
µ
[1] & 0x03) << 6) |

144 ((
µ
[0] & 0xe0) >> 2);

145 
rgb
[2] = (
µ
[0] & 0x1f) << 3;

147 
MWPF_TRUECOLOR332
:

148 
rgb
[0] = 
µ
[0] & 0xe0;

149 
rgb
[1] = (
µ
[0] & 0x1c) << 3;

150 
rgb
[2] = (
µ
[0] & 0x03) << 6;

153 
	`Ârötf
(
°dîr
, "UnsupportedÖixel "

155 
	`f˛o£
(
Â
);

159 if(
	`fwrôe
(
rgb
, 3, 1, 
Â
Ë< 0Ë
badwrôe
;

163 
	`f˛o£
(
Â
);

164 if(
∑Àâe
Ë
	`‰ì
(palette);

167 
badwrôe
:

168 
	`Ârötf
(
°dîr
, "Eº‹ wrôögÅÿouçuàfûe: %s\n", 
	`°ªº‹
(
î∫o
));

169 
	`f˛o£
(
Â
);

170 if(
∑Àâe
Ë
	`‰ì
(palette);

172 
	}
}

174 
	$˛ónup
(
¢≠°©e
 *
°©e
)

176 if(
°©e
) {

177 if(
°©e
->
pixñs
Ë
	`‰ì
(state->pixels);

178 
	`‰ì
(
°©e
);

180 
	`GrClo£
();

181 
	}
}

183 
	$maö
(
¨gc
, *
¨gv
[])

185 
ªt
 = 0;

186 
¢≠°©e
 *
°©e
 = 
NULL
;

188 if((
°©e
 = 
	`öô
(
¨gc
, 
¨gv
))) {

189 
	`GrRódAªa
(
GR_ROOT_WINDOW_ID
, 0, 0, 
°©e
->
söfo
.
cﬁs
,

190 
°©e
->
söfo
.
rows
, sèã->
pixñs
);

191 if(
	`wrôeout
(
°©e
)Ë
ªt
 = 2;

192 } 
ªt
 = 1;

194 
	`˛ónup
(
°©e
);

195  
ªt
;

196 
	}
}

	@demos/nanox/t1demo.c

12 
	~<°dio.h
>

13 
	~<°dlib.h
>

14 #i‡
UNIX
 | 
DOS_DJGPP


15 
	~<time.h
>

17 
	#MWINCLUDECOLORS


	)

18 
	~"«no-X.h
"

20 
	#CLIP_POLYGON
 0

	)

21 
	#HZKBIG5
 1

	)

23 
	#WIDTH
 340

	)

24 
	#HEIGHT
 340

	)

26 #i‡
HAVE_EUCJP_SUPPORT


27 
	#MAXFONTS
 4

	)

28 
	#FONT1
 "k12x10.‚t"

	)

29 
	#FONT2
 "k12x12.‚t"

	)

30 
	#FONT3
 "k16x16.‚t"

	)

31 
	#FONT4
 "k24x24.‚t"

	)

32 
	#FONT5
 ""

	)

33 #ñi‡
HAVE_HZK_SUPPORT


34 
	#MAXFONTS
 1

	)

35 
	#FONT1
 "HZXFONT"

	)

36 
	#FONT2
 ""

	)

37 
	#FONT3
 ""

	)

38 
	#FONT4
 ""

	)

39 
	#FONT5
 ""

	)

40 #ñi‡
HAVE_T1LIB_SUPPORT


41 
	#MAXFONTS
 5

	)

42 
	#FONT1
 "bchr"

	)

43 
	#FONT2
 "bchb"

	)

44 
	#FONT3
 "d¸10"

	)

45 
	#FONT4
 "dcbx10"

	)

46 
	#FONT5
 "bchri"

	)

47 #ñi‡
HAVE_FREETYPE_SUPPORT


48 
	#MAXFONTS
 5

	)

49 
	#FONT1
 "…1-r-omega-£rif"

	)

50 
	#FONT2
 "¨ül"

	)

51 
	#FONT3
 "times"

	)

52 
	#FONT4
 "cour"

	)

53 
	#FONT5
 "timesi"

	)

54 #ñi‡
HAVE_PCF_SUPPORT


55 
	#MAXFONTS
 5

	)

56 
	#FONT1
 "7x14.pcf.gz"

	)

57 
	#FONT2
 "9x15.pcf.gz"

	)

58 
	#FONT3
 "hñvB12.pcf.gz"

	)

59 
	#FONT4
 "jisk™24.pcf.gz"

	)

60 
	#FONT5
 "gb24°.pcf.gz"

	)

61 #ñi‡
HAVE_BIG5_SUPPORT
 | 
HAVE_GB2312_SUPPORT
 | 
HAVE_JISX0213_SUPPORT
 | 
HAVE_KSC5601_SUPPORT


62 
	#MAXFONTS
 5

	)

63 
	#FONT1
 ""

	)

64 
	#FONT2
 ""

	)

65 
	#FONT3
 ""

	)

66 
	#FONT4
 ""

	)

67 
	#FONT5
 ""

	)

68 #ñi‡
HAVE_FNT_SUPPORT


69 
	#MAXFONTS
 5

	)

70 
	#FONT1
 "/tmp/hñvB12.‚t"

	)

71 
	#FONT2
 "/tmp/˛R6x8.‚t"

	)

72 
	#FONT3
 "/tmp/jisk™24.‚t"

	)

73 
	#FONT4
 "/tmp/jisk™16-2000-1.‚t"

	)

74 
	#FONT5
 "/tmp/gbk16-xke.‚t"

	)

76 
	#MAXFONTS
 5

	)

77 
	#FONT1
 ""

	)

78 
	#FONT2
 ""

	)

79 
	#FONT3
 ""

	)

80 
	#FONT4
 ""

	)

81 
	#FONT5
 ""

	)

84 
	#RAND
(
max
Ë((Ë((()(max)Ë* 
	`ønd
(Ë/ (
RAND_MAX
 + 1.0)))

	)

86 *
	g«mes
[5] = { 
FONT1
, 
FONT2
, 
FONT3
, 
FONT4
, 
FONT5
 };

89 
	$maö
(
ac
, **
av
)

91 
GR_WINDOW_ID
 
wödow
;

92 
GR_GC_ID
 
gc
;

93 
GR_FONT_ID
 
f⁄tid
;

94 
x
, 
y
, 
‚um
;

95 
GR_REGION_ID
 
ªgi⁄id
;

96 #i‡
CLIP_POLYGON


97 
GR_POINT
 
poöts
[] = { {20, 20}, {300, 20}, {300, 300}, {20, 300} };

99 
GR_RECT
 
˛ù_ª˘
 = { 20, 20, 300, 300 };

102 i‡(
	`GrO≥n
() < 0)

103 
	`exô
(1);

105 
wödow
 = 
	`GrNewWödowEx
(
GR_WM_PROPS_APPWINDOW
,

107 
GR_ROOT_WINDOW_ID
, 50, 50, 
WIDTH
, 
HEIGHT
, 
BLACK
);

108 
	`GrSñe˘Evíts
(
wödow
,

109 
GR_EVENT_MASK_EXPOSURE
 | 
GR_EVENT_MASK_CLOSE_REQ
);

110 
	`GrM≠Wödow
(
wödow
);

112 
gc
 = 
	`GrNewGC
();

113 
	`GrSëGCU£Background
(
gc
, 
GR_FALSE
);

114 
	`GrSëGCBackground
(
gc
, 
BLACK
);

116 #i‡
CLIP_POLYGON


118 
ªgi⁄id
 = 
	`GrNewPﬁyg⁄Regi⁄
(
MWPOLY_EVENODD
, 3, 
poöts
);

121 
ªgi⁄id
 = 
	`GrNewRegi⁄
();

122 
	`GrUni⁄Re˘WôhRegi⁄
(
ªgi⁄id
, &
˛ù_ª˘
);

124 
	`GrSëGCRegi⁄
(
gc
, 
ªgi⁄id
);

126 
	`§™d
(
	`time
(0));

128 
GR_EVENT
 
evít
;

130 
	`GrCheckNextEvít
(&
evít
);

131 i‡(
evít
.
ty≥
 =
GR_EVENT_TYPE_CLOSE_REQ
) {

132 
	`GrClo£
();

133 
	`exô
(0);

136 
f⁄tid
 = 
	`GrCª©eF⁄t
(
«mes
[
‚um
=
	`RAND
(
MAXFONTS
)], 0, 
NULL
);

137 
	`GrSëF⁄tSize
(
f⁄tid
, 
	`RAND
(80) + 1);

138 
	`GrSëF⁄tRŸ©i⁄
(
f⁄tid
, 330);

139 
	`GrSëF⁄tAâr
(
f⁄tid
, 
GR_TFKERNING
 | 
GR_TFANTIALIAS
, 0);

140 
	`GrSëGCF⁄t
(
gc
, 
f⁄tid
);

142 
	`GrSëGCF‹eground
(
gc
, 
	`ønd
() & 0xffffff);

145 
x
 = 
	`RAND
(
WIDTH
);

146 
y
 = 
	`RAND
(
HEIGHT
);

148 #i‡
HAVE_HZK_SUPPORT


150 #i‡
HZKBIG5


152 
buf„r
[] = {

155 
	`GrText
(
wödow
, 
gc
, 
x
, 
y
, 
buf„r
, 7, 
GR_TFUC16
);

158 
x
 = 
	`RAND
(
WIDTH
);

159 
y
 = 
	`RAND
(
HEIGHT
);

160 
	`GrText
(
wödow
, 
gc
, 
x
, 
y
,

161 "Mi¸owödows,≈w™Ô®œ•Œ§§≠^§Â¬I∞}¶r≈È", -1, 
GR_TFASCII
);

164 
x
 = 
	`RAND
(
WIDTH
);

165 
y
 = 
	`RAND
(
HEIGHT
);

166 
	`GrText
(
wödow
, 
gc
, 
x
, 
y
, "£t£u£v£w£∏£π£∫", -1, 
GR_TFASCII
);

170 
buf„r
[] = {

182 
	`GrText
(
wödow
, 
gc
, 
x
, 
y
, 
buf„r
, 9, 
GR_TFUC16
);

185 
x
 = 
	`RAND
(
WIDTH
);

186 
y
 = 
	`RAND
(
HEIGHT
);

187 
	`GrText
(
wödow
, 
gc
, 
x
, 
y
,

188 "Mi¸owödows,ª∂”≠ π”√÷–”¢Œƒµ„’Û◊÷ÃÂ", -1, 
GR_TFASCII
);

191 #ñi‡
HAVE_BIG5_SUPPORT


193 
	`GrText
(
wödow
, 
gc
, 
x
, 
y
, "\151\261\144\261\144\151", 6, 
MWTF_DBCS_BIG5
);

194 #ñi‡
HAVE_GB2312_SUPPORT


196 
	`GrText
(
wödow
, 
gc
, 
x
, 
y
, "\275\241\275\241", 4, 
MWTF_DBCS_GB
);

197 #ñi‡
HAVE_EUCJP_SUPPORT


199 
	`GrText
(
wödow
, 
gc
, 
x
, 
y
, "\242\241", 2, 
MWTF_DBCS_EUCJP
);

200 #ñi‡
HAVE_JISX0213_SUPPORT


202 
	`GrText
(
wödow
, 
gc
, 
x
, 
y
, "\242\241", 2, 
MWTF_DBCS_JIS
);

203 #ñi‡
HAVE_KSC5601_SUPPORT


205 
	`GrText
(
wödow
, 
gc
, 
x
, 
y
, "\273\273", 2, 
MWTF_DBCS_KSC
);

206 #ñi‡
HAVE_FREETYPE_SUPPORT


208 
	`GrText
(
wödow
, 
gc
, 
x
, 
y
, "Mi¸owödows", -1, 
GR_TFASCII
);

209 #ñi‡
HAVE_PCF_SUPPORT


212 i‡(
‚um
 == 3) {

214 
ãxt
[] =

216 
	`GrText
(
wödow
, 
gc
, 
x
,
y
, 
ãxt
, 5, 
GR_TFUC16
);

217 } i‡(
‚um
 == 4) {

219 
ãxt
[] =

223 
	`GrText
(
wödow
, 
gc
, 
x
,
y
, 
ãxt
, 5, 
GR_TFUC16
);

225 
	`GrText
(
wödow
, 
gc
, 
x
,
y
, "Mi¸owödows", -1, 
GR_TFASCII
);

226 #ñi‡
HAVE_FNT_SUPPORT


228 i‡(
‚um
 == 2 || fnum == 3) {

230 
ãxt
[] =

232 
	`GrText
(
wödow
, 
gc
, 
x
,
y
, 
ãxt
, 5, 
GR_TFUC16
);

233 } i‡(
‚um
 == 4) {

235 
ãxt
[] =

237 
	`GrText
(
wödow
, 
gc
, 
x
,
y
, 
ãxt
, 5, 
GR_TFUC16
);

239 
	`GrText
(
wödow
, 
gc
, 
x
,
y
, "Mi¸owödows", -1, 
GR_TFASCII
);

242 
	`GrText
(
wödow
, 
gc
, 
x
, 
y
, "Mi¸owödows", -1, 
GR_TFASCII
);

244 
	`GrFlush
();

245 
	`GrDe°royF⁄t
(
f⁄tid
);

247 
	`GrDe°royRegi⁄
(
ªgi⁄id
);

248 
	`GrClo£
();

250 
	}
}

	@demos/nanox/tsdemo.c

4 
	#MWINCLUDECOLORS


	)

5 
	~<°dlib.h
>

6 
	~"«no-X.h
"

8 
	#_
 ((Ë0Ë

	)

9 
	#X
 ((Ë1Ë

	)

12 
GR_BITMAP
 
	gg_°ù∂e1
[] = {

22 
GR_BITMAP
 
	gg_°ù∂e2
[] = {

27 
GR_BITMAP
 
	gg_°ù∂e3
[] = {

32 #ifde‡
NOTUSED


33 
GR_BITMAP
 
	gg_°ù∂e4
[] = {

41 
GR_BITMAP
 
	gg_°ù∂e1
[] = {

51 
GR_BITMAP
 
	gg_°ù∂e2
[] = {

56 
GR_BITMAP
 
	gg_°ù∂e3
[] = {

61 
GR_BITMAP
 
	gg_°ù∂e4
[] = {

70 
	gg_x
;

71 
GR_WINDOW_ID
 
	gg_maö
, 
	gg_pixm≠
;

74 
	$døw_£t
(*
«me
, 
mode
)

76 
x
;

77 
tw
, 
th
, 
tb
;

78 
GR_POINT
 
poöts
[4];

79 
GR_GC_ID
 
gc
 = 
	`GrNewGC
();

81 
	`GrSëGCF‹eground
(
gc
, 
WHITE
);

82 
	`GrSëGCBackground
(
gc
, 
GRAY
);

84 
	`GrGëGCTextSize
(
gc
, 
«me
, -1, 
GR_TFTOP
, &
tw
, &
th
, &
tb
);

86 
x
 = 
g_x
 + (
tw
 - 50) / 2;

88 
	`GrText
(
g_maö
, 
gc
, 
g_x
, 5, 
«me
, -1, 
GR_TFTOP
);

90 
g_x
 +(
tw
 + 10);

92 
	`GrSëGCFûlMode
(
gc
, 
mode
);

94 i‡(
mode
 =
GR_FILL_STIPPLE
)

95 
	`GrSëGCF‹eground
(
gc
, 
YELLOW
);

97 
	`GrSëGCF‹eground
(
gc
, 
WHITE
);

98 
	`GrSëGCBackground
(
gc
, 
BLUE
);

101 i‡(
mode
 =
GR_FILL_TILE
) {

102 
	`GrSëGCTûe
(
gc
, 
g_pixm≠
, 16, 16);

105 i‡(
mode
 =
GR_FILL_STIPPLE
 || modê=
GR_FILL_OPAQUE_STIPPLE
)

106 
	`GrSëGCStù∂e
(
gc
, 
g_°ù∂e2
, 2, 2);

108 
	`GrFûlRe˘
(
g_maö
, 
gc
, 
x
, 25, 50, 50);

110 i‡(
mode
 =
GR_FILL_STIPPLE
 || modê=
GR_FILL_OPAQUE_STIPPLE
)

111 
	`GrSëGCStù∂e
(
gc
, 
g_°ù∂e1
, 7, 7);

113 
	`GrFûlEŒù£
(
g_maö
, 
gc
, 
x
 + 25, 105, 25, 25);

115 i‡(
mode
 =
GR_FILL_STIPPLE
 || modê=
GR_FILL_OPAQUE_STIPPLE
)

116 
	`GrSëGCStù∂e
(
gc
, 
g_°ù∂e3
, 3, 2);

118 
poöts
[0].
x
 =Öoints[3].x = x;

119 
poöts
[0].
y
 =Öoints[3].y = 165;

121 
poöts
[1].
x
 = x + 50;

122 
poöts
[1].
y
 = 165;

124 
poöts
[2].
x
 = x + 25;

125 
poöts
[2].
y
 = 215;

127 
	`GrFûlPﬁy
(
g_maö
, 
gc
, 4, 
poöts
);

129 
	`GrDe°royGC
(
gc
);

130 
	}
}

133 
	$lﬂd_pixm≠
()

135 
GR_GC_ID
 
gc
 = 
	`GrNewGC
();

137 
g_pixm≠
 = 
	`GrNewPixm≠
(16, 16, 0);

138 
	`GrDøwImageFromFûe
(
g_pixm≠
, 
gc
, 0, 0, -1, -1, "bin/nxroach.pgm", 0);

140 
	`GrDe°royGC
(
gc
);

141 
	}
}

144 
	$maö
(
¨gc
, **
¨gv
)

146 
COLS
, 
ROWS
;

148 i‡(
	`GrO≥n
() == -1)

149 
	`exô
(1);

151 
COLS
 = 480;

152 
ROWS
 = 300;

154 
	`lﬂd_pixm≠
();

156 
g_maö
 = 
	`GrNewWödowEx
(
GR_WM_PROPS_APPWINDOW
, "tsdemo",

157 
GR_ROOT_WINDOW_ID
, 100, 50, 
COLS
 - 120, 
ROWS
 - 60, 
GRAY
);

159 
	`GrSñe˘Evíts
(
g_maö
,

160 
GR_EVENT_MASK_EXPOSURE
 | 
GR_EVENT_MASK_CLOSE_REQ
);

161 
	`GrM≠Wödow
(
g_maö
);

164 
GR_EVENT
 
evít
;

166 
	`GrGëNextEvít
(&
evít
);

168 
evít
.
ty≥
) {

169 
GR_EVENT_TYPE_EXPOSURE
:

170 
g_x
 = 5;

171 
	`døw_£t
("GR_FILL_STIPPLE", 
GR_FILL_STIPPLE
);

172 
	`døw_£t
("GR_FILL_OPAQUE_STIPPLE", 
GR_FILL_OPAQUE_STIPPLE
);

173 
	`døw_£t
("GR_FILL_TILE", 
GR_FILL_TILE
);

176 
GR_EVENT_TYPE_CLOSE_REQ
:

177 
	`GrClo£
();

178 
	`exô
(0);

181 
	}
}

	@demos/nanox/tux.c

35 
	~<°dio.h
>

36 
	~<°dlib.h
>

37 
	~<«no-X.h
>

38 
	~<nxcﬁ‹s.h
>

39 
	~"tuxmask.h
"

41 
	#DEFAULT_TUX_FILE
 "bö/tux.gif"

	)

43 
	gbuâ⁄_down
 = 0, 
	gx
 = 0, 
	gy
 = 0;

45 
GR_WINDOW_ID
 
	$öô
(*
tuxfûe
)

47 
GR_GC_ID
 
gc
;

48 
GR_IMAGE_ID
 
iid
;

49 
GR_WINDOW_ID
 
wid
;

50 
GR_REGION_ID
 
rid
;

51 
GR_WINDOW_ID
 
pid
;

52 
GR_IMAGE_INFO
 
iif
;

53 
GR_WM_PROPERTIES
 
¥›s
;

54 
GR_SCREEN_INFO
 
söfo
;

55 
x
, 
y
;

57 if(
	`GrO≥n
() < 0) {

58 
	`Ârötf
(
°dîr
, "Couldn't connectÅo Nano-X server\n");

61 
	`GrGëS¸ìnInfo
(&
söfo
);

63 if(!(
iid
 = 
	`GrLﬂdImageFromFûe
(
tuxfûe
, 0))) {

64 
	`Ârötf
(
°dîr
, "FaûedÅÿlﬂd imagêfûê\"%s\"\n", 
tuxfûe
);

67 
	`GrGëImageInfo
(
iid
, &
iif
);

68 
pid
 = 
	`GrNewPixm≠
(
iif
.
width
, iif.
height
, 
NULL
);

69 
gc
 = 
	`GrNewGC
();

70 
	`GrDøwImageToFô
(
pid
, 
gc
, 0, 0, 
iif
.
width
, iif.
height
, 
iid
);

71 
	`GrDe°royGC
(
gc
);

72 
	`GrFªeImage
(
iid
);

74 
x
 = 
söfo
.
cﬁs
 - 
iif
.
width
;

75 
y
 = 
söfo
.
rows
 - 
iif
.
height
;

76 
wid
 = 
	`GrNewWödowEx
(
GR_WM_PROPS_APPWINDOW
|
GR_WM_PROPS_NOAUTOMOVE
, 
NULL
,

77 
GR_ROOT_WINDOW_ID
, 
x
, 
y
, 
iif
.
width
, iif.
height
, 
GR_COLOR_GREEN
);

79 
	`GrSëBackgroundPixm≠
(
wid
, 
pid
, 
GR_BACKGROUND_TOPLEFT
);

81 
rid
 = 
	`GrNewBôm≠Regi⁄
(
tuxmask_bôs
, 
TUXMASK_WIDTH
, 
TUXMASK_HEIGHT
);

82 
	`GrSëWödowRegi⁄
(
wid
, 
rid
, 
GR_WINDOW_BOUNDING_MASK
);

83 
	`GrDe°royRegi⁄
(
rid
);

85 
¥›s
.
Êags
 = 
GR_WM_FLAGS_PROPS
;

86 
¥›s
.¥›†
GR_WM_PROPS_NODECORATE
;

87 
	`GrSëWMPr›îtõs
(
wid
, &
¥›s
);

89 
	`GrSñe˘Evíts
(
wid
, 
GR_EVENT_MASK_CLOSE_REQ
 |

90 
GR_EVENT_MASK_MOUSE_POSITION
 |

91 
GR_EVENT_MASK_BUTTON_UP
 |

92 
GR_EVENT_MASK_BUTTON_DOWN
);

94 
	`GrM≠Wödow
(
wid
);

96  
wid
;

97 
	}
}

99 
	$buâ⁄_evít
(
GR_EVENT_BUTTON
 *
ev
)

101 if(
ev
->
ty≥
 =
GR_EVENT_TYPE_BUTTON_DOWN
) {

102 if(
ev
->
buâ⁄s
 & 
GR_BUTTON_R
) {

103 
	`GrClo£
();

104 
	`exô
(0);

106 
buâ⁄_down
 = 1;

107 
x
 = 
ev
->x;

108 
y
 = 
ev
->y;

109 
	`GrRai£Wödow
(
ev
->
wid
);

110 } 
buâ⁄_down
 = 0;

111 
	}
}

113 
	$posôi⁄_evít
(
GR_EVENT_MOUSE
 *
ev
)

115 
√wx
 = 0, 
√wy
 = 0, 
ﬁdx
 = 0, 
ﬁdy
 = 0;

117 if(!
buâ⁄_down
) ;

119 
√wx
 = 
ev
->
roŸx
 - 
x
;

120 
√wy
 = 
ev
->
roŸy
 - 
y
;

122 if(
√wx
 !
ﬁdx
 || 
√wy
 !
ﬁdy
) {

123 
	`GrMoveWödow
(
ev
->
wid
, 
√wx
, 
√wy
);

124 
ﬁdx
 = 
√wx
;

125 
ﬁdy
 = 
√wy
;

127 
	}
}

129 
	$maö
(
¨gc
, *
¨gv
[])

131 *
tuxfûe
;

132 
GR_EVENT
 
evít
;

133 
GR_WINDOW_ID
 
wid
;

135 if(
¨gc
 >2Ë
tuxfûe
 = 
¨gv
[1];

136 
tuxfûe
 = 
DEFAULT_TUX_FILE
;

138 if(!(
wid
 = 
	`öô
(
tuxfûe
)))  1;

141 
	`GrGëNextEvít
(&
evít
);

142 
evít
.
ty≥
) {

143 
GR_EVENT_TYPE_CLOSE_REQ
:

146 
GR_EVENT_TYPE_MOUSE_POSITION
:

147 
	`posôi⁄_evít
(&
evít
.
mou£
);

149 
GR_EVENT_TYPE_BUTTON_UP
:

150 
GR_EVENT_TYPE_BUTTON_DOWN
:

151 
	`buâ⁄_evít
(&
evít
.
buâ⁄
);

159 
	}
}

	@demos/nanox/tuxmask.h

8 
	#TUXMASK_WIDTH
 80

	)

9 
	#TUXMASK_HEIGHT
 94

	)

11 
GR_BITMAP
 
	gtuxmask_bôs
[] = {

	@demos/nanox/wait.c

6 
	~"«no-X.h
"

8 
	$maö
()

10 
c
;

11 
	`ªad
(
	`GrO≥n
(), &
c
, 1);

13 
	}
}

	@demos/nanox/world.c

8 
	~<°dio.h
>

9 
	~<°dlib.h
>

10 
	~<°rög.h
>

11 
	#MWINCLUDECOLORS


	)

12 
	~"«no-X.h
"

14 #i‡
deföed
(
MSDOS
Ë|| deföed(
__ECOS
)

15 
	~<f˙é.h
>

18 #i‡
deföed
(
__FªeBSD__
)

19 
	~<uni°d.h
>

20 
	~<sys/ty≥s.h
>

21 
	~<f˙é.h
>

24 #i‡
LINUX
 || 
DOS_DJGPP
 || 
deföed
(
__CYGWIN__
)

25 
	~<sys/ty≥s.h
>

26 
	~<sys/°©.h
>

27 
	~<f˙é.h
>

28 
	~<uni°d.h
>

31 #i‚de‡
O_BINARY


32 
	#O_BINARY
 0

	)

35 #i‡
deföed
(
DOS_DJGPP
Ë|| deföed(
__ECOS
)

36 
	#MAPFILE
 "/w‹ld.m≠"

	)

38 
	#MAPFILE
 "demos/«nox/w‹ld.m≠"

	)

41 
	#SELECTBUTTON
 
GR_BUTTON_L


	)

42 
	#COORDBUTTON
 
GR_BUTTON_R


	)

48 
	tFLOAT
;

50 
	#SCALE
 100

	)

52 
	#FFMUL
(
a
,
b
Ë(((
FLOAT
)◊Ë* (bË+ (
SCALE
 / 2)Ë/ SCALE)

	)

53 
	#FFDIV
(
a
,
b
Ë(((
FLOAT
)◊Ë* 
SCALE
Ë/ (b))

	)

54 
	#FIMUL
(
a
,
b
Ë((
FLOAT
)◊Ë* (b))

	)

55 
	#FIDIV
(
a
,
b
Ë((
FLOAT
)◊Ë/ (b))

	)

56 
	#ITOF
(
a
Ë((
FLOAT
)◊Ë* 
SCALE
)

	)

57 
	#FTOI
(
a
Ë(((
FLOAT
)◊Ë+ (
SCALE
 / 2)Ë/ SCALE)

	)

60 
	#QSPAN
 (90L*60*
SCALE
Ë

	)

61 
	#HSPAN
 (
QSPAN
*2Ë

	)

62 
	#WSPAN
 (
QSPAN
*4Ë

	)

64 
	#ABS
(
n
Ë((“Ë< 0Ë? -“Ë: (n))

	)

71 
	mCode
;

72 
	mL©
;

73 
	mL⁄
;

74 } 
	tMWPACKED
 
	tDBPOINT
;

76 #i‡
MW_CPU_BIG_ENDIAN


77 
	#SHORT_SWAP
(
p
Ë’ = (’ & 0xffË<< 8Ë| (’ >> 8Ë& 0xff))

	)

78 
	#DBPOINT_CONVERT
(
p
Ë(
	`SHORT_SWAP
’->
Code
),SHORT_SWAP’->
L©
),SHORT_SWAP’->
L⁄
))

	)

80 
	#DBPOINT_CONVERT
(
p
Ë((Ì)

	)

83 
	#POINTSize
 (
DBPOINT
)

	)

84 
	#PCou¡
 128

	)

94 
FLOAT
 
	gX_SˇÀ
;

95 
FLOAT
 
	gY_SˇÀ
;

100 
FLOAT
 
	gL©ôude
, 
	gL⁄gôude
;

101 
FLOAT
 
	gzoom
;

103 
FLOAT
 
	gœåadius
;

104 
FLOAT
 
	gl⁄gødius
;

105 
FLOAT
 
	gvõwl⁄g
;

106 
FLOAT
 
	gvõwœt
;

108 
GR_SIZE
 
	gm≠width
;

109 
GR_SIZE
 
	gm≠height
;

110 
GR_COORD
 
	gm≠x‹ig
;

111 
GR_COORD
 
	gm≠y‹ig
;

112 
GR_COORD
 
	g£À˘x
;

113 
GR_COORD
 
	g£À˘y
;

114 
GR_COORD
 
	g£À˘±rx
;

115 
GR_COORD
 
	g£À˘±ry
;

116 
GR_SIZE
 
	g£À˘width
;

117 
GR_SIZE
 
	g£À˘height
;

118 
	g£À˘mode
;

119 
GR_BOOL
 
	g£À˘visibÀ
;

120 
GR_SIZE
 
	g£À˘xsˇÀ
;

121 
GR_SIZE
 
	g£À˘ysˇÀ
;

122 
GR_BOOL
 
	gco‹dvisibÀ
;

123 
GR_BOOL
 
	gco‹díabÀd
;

124 
GR_COORD
 
	gco‹dx
;

125 
GR_COORD
 
	gco‹dy
;

126 
GR_COORD
 
	g±rx
;

127 
GR_COORD
 
	g±ry
;

128 
	gco‹d°rög
[32];

130 
GR_WINDOW_ID
 
	gmaöwid
;

131 
GR_WINDOW_ID
 
	gm≠wid
;

132 
GR_GC_ID
 
	gm≠gc
;

133 
GR_GC_ID
 
	gx‹gc
;

134 
GR_SIZE
 
	gCOLS
, 
	gROWS
;

140 
	#SELECT_NONE
 0

	)

141 
	#SELECT_SCALE
 1

	)

142 
	#SELECT_MOVE
 2

	)

155 
GR_COLOR
 
	gcode_cﬁ‹s
[] = {

156 
BLACK
, 
GREEN
, 
RED
, BLACK, 
BROWN
, GREEN, 
BLUE
, BLUE

159 
checkevít
();

160 
d€xposuª
(
GR_EVENT_EXPOSURE
 *
ï
);

161 
dobuâ⁄down
(
GR_EVENT_BUTTON
 *
bp
);

162 
dobuâ⁄up
(
GR_EVENT_BUTTON
 *
bp
);

163 
d›osôi⁄
(
GR_EVENT_MOUSE
 *
mp
);

164 
dokeydown
(
GR_EVENT_KEYSTROKE
 *
kp
);

165 
show£À˘i⁄
(
GR_BOOL
 
show
);

166 
showco‹ds
(
GR_BOOL
 
show
);

167 
möto°r
(*
buf
, 
möuãs
);

168 
£tzoom
(
FLOAT
 
√wzoom
);

169 
lﬂd
(*
‚
);

172 
	$maö
(
¨gc
, **
¨gv
)

174 
GR_SCREEN_INFO
 
si
;

175 
GR_WM_PROPERTIES
 
¥›s
;

177 i‡(
	`GrO≥n
() < 0) {

178 
	`Ârötf
(
°dîr
, "Cannot open graphics\n");

179 
	`exô
(1);

182 
	`GrReqShmCmds
(65536);

184 
	`GrGëS¸ìnInfo
(&
si
);

185 #ifde‡
__ECOS


187 
COLS
 = 
si
.
cﬁs
 - 10;

188 
ROWS
 = 
si
.
rows
 - 40;

190 
COLS
 = 
si
.
cﬁs
 - 40;

191 
ROWS
 = 
si
.
rows
 - 80;

194 
maöwid
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 0, 0, 
COLS
, 
ROWS
,

195 0, 
BLACK
, BLACK);

198 
¥›s
.
Êags
 = 
GR_WM_FLAGS_TITLE
 | 
GR_WM_FLAGS_PROPS
;

199 
¥›s
.¥›†
GR_WM_PROPS_BORDER
 | 
GR_WM_PROPS_CAPTION
;

200 
¥›s
.
tôÀ
 = "NanoX World Map";

201 
	`GrSëWMPr›îtõs
(
maöwid
, &
¥›s
);

203 
m≠width
 = 
COLS
 - 2;

204 
m≠height
 = 
ROWS
 - 2;

205 
m≠x‹ig
 = 
m≠width
 / 2;

206 
m≠y‹ig
 = 
m≠height
 / 2;

207 
£À˘xsˇÀ
 = 4;

208 
£À˘ysˇÀ
 = 3;

209 
co‹dx
 = 0;

210 
co‹dy
 = 
ROWS
 - 1;

211 
m≠wid
 = 
	`GrNewWödow
(
maöwid
, 1, 1, 
m≠width
, 
m≠height
,

213 1, 
BLACK
, 
WHITE
);

215 1, 
LTGRAY
, 
BLACK
);

217 
	`GrSñe˘Evíts
(
maöwid
, 
GR_EVENT_MASK_CLOSE_REQ
);

218 
	`GrSñe˘Evíts
(
m≠wid
, 
GR_EVENT_MASK_EXPOSURE
 |

219 
GR_EVENT_MASK_BUTTON_DOWN
 | 
GR_EVENT_MASK_BUTTON_UP
 |

220 
GR_EVENT_MASK_MOUSE_POSITION
 | 
GR_EVENT_MASK_KEY_DOWN
);

222 
	`GrM≠Wödow
(
maöwid
);

223 
	`GrM≠Wödow
(
m≠wid
);

225 
m≠gc
 = 
	`GrNewGC
();

226 
x‹gc
 = 
	`GrNewGC
();

227 
	`GrSëGCMode
(
x‹gc
, 
GR_MODE_XOR
);

229 
L⁄gôude
 = 
	`ITOF
(0);

230 
L©ôude
 = 
	`ITOF
(0);

231 
	`£tzoom
(
	`ITOF
(1));

234 
	`checkevít
();

235 
	}
}

239 
	$checkevít
()

241 
GR_EVENT
 
evít
;

243 
	`GrGëNextEvít
(&
evít
);

244 
evít
.
ty≥
) {

245 
GR_EVENT_TYPE_EXPOSURE
:

246 
	`d€xposuª
(&
evít
.
exposuª
);

248 
GR_EVENT_TYPE_BUTTON_DOWN
:

249 
	`dobuâ⁄down
(&
evít
.
buâ⁄
);

251 
GR_EVENT_TYPE_BUTTON_UP
:

252 
	`dobuâ⁄up
(&
evít
.
buâ⁄
);

254 
GR_EVENT_TYPE_MOUSE_POSITION
:

255 
	`d›osôi⁄
(&
evít
.
mou£
);

257 
GR_EVENT_TYPE_KEY_DOWN
:

258 
	`dokeydown
(&
evít
.
key°roke
);

260 
GR_EVENT_TYPE_CLOSE_REQ
:

261 
	`GrClo£
();

262 
	`exô
(0);

264 
	}
}

268 
	$d€xposuª
(
GR_EVENT_EXPOSURE
 *
ï
)

270 i‡(
ï
->
wid
 !
m≠wid
)

275 
£À˘visibÀ
 = 
GR_FALSE
;

276 
co‹dvisibÀ
 = 
GR_FALSE
;

277 
	`lﬂd
(
MAPFILE
);

278 
	`show£À˘i⁄
(
GR_TRUE
);

279 
	`showco‹ds
(
GR_TRUE
);

280 
	}
}

284 
	$dobuâ⁄down
(
GR_EVENT_BUTTON
 *
bp
)

286 i‡(
bp
->
wid
 !
m≠wid
)

289 i‡(
bp
->
ch™gebuâ⁄s
 & 
SELECTBUTTON
) {

290 
	`show£À˘i⁄
(
GR_FALSE
);

291 
£À˘x
 = 
bp
->
x
;

292 
£À˘y
 = 
bp
->
y
;

293 
£À˘±rx
 = 
bp
->
x
;

294 
£À˘±ry
 = 
bp
->
y
;

295 
£À˘width
 = 0;

296 
£À˘height
 = 0;

297 
£À˘mode
 = 
SELECT_SCALE
;

298 
	`show£À˘i⁄
(
GR_TRUE
);

301 i‡(
bp
->
ch™gebuâ⁄s
 & 
COORDBUTTON
) {

302 
	`showco‹ds
(
GR_FALSE
);

303 
±rx
 = 
bp
->
x
;

304 
±ry
 = 
bp
->
y
;

305 
co‹díabÀd
 = 
GR_TRUE
;

306 
	`showco‹ds
(
GR_TRUE
);

308 
	}
}

312 
	$dobuâ⁄up
(
GR_EVENT_BUTTON
 *
bp
)

314 i‡(
bp
->
wid
 !
m≠wid
)

317 i‡(
bp
->
ch™gebuâ⁄s
 & 
COORDBUTTON
) {

318 
	`showco‹ds
(
GR_FALSE
);

319 
co‹díabÀd
 = 
GR_FALSE
;

322 i‡(
bp
->
ch™gebuâ⁄s
 & 
SELECTBUTTON
) {

323 
	`show£À˘i⁄
(
GR_FALSE
);

324 i‡(
£À˘mode
 =
SELECT_NONE
)

326 
£À˘mode
 = 
SELECT_NONE
;

327 i‡(
£À˘width
 <= 0)

329 
L⁄gôude
 +=

330 
	`FIDIV
(
	`FIMUL
(
võwl⁄g
, 
£À˘x
 - 
m≠x‹ig
), 
m≠width
);

331 
L©ôude
 -=

332 
	`FIDIV
(
	`FIMUL
(
võwœt
, 
£À˘y
 - 
m≠y‹ig
), 
m≠height
);

333 
	`£tzoom
(
	`FIDIV
(
	`FIMUL
(
zoom
, 
m≠width
), 
£À˘width
));

334 
	`GrCÀ¨Wödow
(
m≠wid
, 
GR_TRUE
);

336 
	}
}

340 
	$d›osôi⁄
(
GR_EVENT_MOUSE
 *
mp
)

342 
GR_SIZE
 
ãmp
;

344 i‡(
mp
->
wid
 !
m≠wid
)

347 i‡(
co‹díabÀd
) {

348 
	`showco‹ds
(
GR_FALSE
);

349 
±rx
 = 
mp
->
x
;

350 
±ry
 = 
mp
->
y
;

351 
	`showco‹ds
(
GR_TRUE
);

354 
	`show£À˘i⁄
(
GR_FALSE
);

355 
£À˘mode
) {

356 
SELECT_SCALE
:

357 
£À˘width
 = 
	`ABS
(
mp
->
x
 - 
£À˘x
) * 2 + 1;

358 
£À˘height
 = 
	`ABS
(
mp
->
y
 - 
£À˘y
) * 2 + 1;

359 
ãmp
 = ((Ë
£À˘width
Ë* 
£À˘ysˇÀ


360 / 
£À˘xsˇÀ
;

361 i‡(
£À˘height
 < 
ãmp
)

362 
£À˘height
 = 
ãmp
;

363 
ãmp
 = ((Ë
£À˘height
Ë* 
£À˘xsˇÀ


364 / 
£À˘ysˇÀ
;

365 i‡(
£À˘width
 < 
ãmp
)

366 
£À˘width
 = 
ãmp
;

369 
SELECT_MOVE
:

370 
£À˘x
 +(
mp
->
x
 - 
£À˘±rx
);

371 
£À˘y
 +(
mp
->
y
 - 
£À˘±ry
);

375 
£À˘±rx
 = 
mp
->
x
;

376 
£À˘±ry
 = 
mp
->
y
;

377 
	`show£À˘i⁄
(
GR_TRUE
);

378 
	}
}

382 
	$dokeydown
(
GR_EVENT_KEYSTROKE
 *
kp
)

384 i‡(
kp
->
wid
 !
m≠wid
)

387 i‡(
£À˘mode
 !
SELECT_NONE
) {

388 
kp
->
ch
) {

390 
£À˘mode
 = 
SELECT_SCALE
;

394 
£À˘mode
 = 
SELECT_MOVE
;

398 
	`show£À˘i⁄
(
GR_FALSE
);

399 
£À˘mode
 = 
SELECT_NONE
;

405 
kp
->
ch
) {

408 
	`GrClo£
();

409 
	`exô
(0);

412 
L⁄gôude
 = 
	`ITOF
(0);

413 
L©ôude
 = 
	`ITOF
(0);

414 
	`£tzoom
(
	`ITOF
(1));

415 
	`GrCÀ¨Wödow
(
m≠wid
, 
GR_TRUE
);

417 
	}
}

427 
	$show£À˘i⁄
(
GR_BOOL
 
show
)

429 i‡((
show
 =0Ë=(
£À˘visibÀ
 == 0))

431 i‡(
£À˘mode
 =
SELECT_NONE
)

433 
	`GrRe˘
(
m≠wid
, 
x‹gc
, 
£À˘x
 - 
£À˘width
 / 2,

434 
£À˘y
 - 
£À˘height
 / 2, 
£À˘width
, selectheight);

435 
£À˘visibÀ
 = 
show
;

436 
	}
}

444 
	$showco‹ds
(
GR_BOOL
 
show
)

446 
cuæ⁄g
;

447 
cuæ©
;

448 
FLOAT
 
±æ©
;

449 
FLOAT
 
±æ⁄g
;

451 i‡(((
show
 =0Ë=(
co‹dvisibÀ
 =0)Ë|| !
co‹díabÀd
)

454 i‡(
show
) {

455 
±æ©
 = 
	`FIDIV
(
	`FIMUL
(
võwœt
, 
±ry
), 
m≠height
 - 1);

456 
±æ⁄g
 = 
	`FIDIV
(
	`FIMUL
(
võwl⁄g
, 
±rx
), 
m≠width
 - 1);

458 
cuæ©
 = 
	`FTOI
(
L©ôude
 + 
œåadius
 - 
±æ©
);

459 
cuæ⁄g
 = 
	`FTOI
(
L⁄gôude
 - 
l⁄gødius
 + 
±æ⁄g
);

461 i‡(
cuæ⁄g
 > 180*60)

462 
cuæ⁄g
 -= 360*60;

463 i‡(
cuæ⁄g
 < -180*60)

464 
cuæ⁄g
 += 360*60;

466 
	`möto°r
(
co‹d°rög
, 
cuæ⁄g
);

467 
	`°rˇt
(
co‹d°rög
, " ");

468 
	`möto°r
(
co‹d°rög
 + 
	`°æí
(co‹d°rög), 
cuæ©
);

471 
	`GrText
(
m≠wid
, 
x‹gc
, 
co‹dx
, 
co‹dy
, 
co‹d°rög
, -1, 
GR_TFBOTTOM
);

472 
co‹dvisibÀ
 = 
show
;

473 
	}
}

481 
	$möto°r
(*
buf
, 
möuãs
)

483 i‡(
möuãs
 < 0) {

484 
möuãs
 = -minutes;

485 *
buf
++ = '-';

487 
	`•rötf
(
buf
, "%ld'%02ld", ()(
möuãs
 / 60), ()(minutes % 60));

488 
	}
}

496 
	$degtomö
(*
s
)

498 
deg
, 
möuãs
;

499 
°r
[10],*
	`°rchr
(),*
˝
;

501 
	`°r˝y
(
°r
,
s
);

502 i‡(
˝
 = 
	`°rchr
(
°r
,'\047')) {

503 *
˝
 = '\0';

504 
möuãs
 = 
	`©oi
(++
˝
);

506 
möuãs
 = 0;

507 i‡((
deg
 = 
	`©oi
(
°r
)) < 0)

508 
möuãs
 = -minutes;

509 (
deg
 * 60 + 
möuãs
);

510 
	}
}

519 
	$£tzoom
(
FLOAT
 
√wzoom
)

521 
zoom
 = 
√wzoom
;

523 
Y_SˇÀ
 = 
	`FIDIV
(
	`FIMUL
(
zoom
, 
m≠height
 * 3), 180 * 4);

524 
X_SˇÀ
 = 
	`FIDIV
(
	`FIMUL
(
zoom
, 
m≠width
), 360);

526 
võwl⁄g
 = 
	`FFDIV
(
WSPAN
, 
zoom
);

527 
võwœt
 = 
	`FFDIV
(
HSPAN
 * 4 / 3, 
zoom
);

528 
l⁄gødius
 = 
	`FIDIV
(
võwl⁄g
, 2);

529 
œåadius
 = 
	`FIDIV
(
võwœt
, 2);

530 
	}
}

537 
	$lﬂd
(*
‚
)

539 
DBPOINT
 *
µ
;

540 
DBPOINT
 *
≥nd
;

541 
FLOAT
 
x
, 
y
, 
L⁄Prv
, 
L©Prv
;

542 
ﬁdl⁄g
 = 0L;

543 
GR_COORD
 
x√w
, 
y√w
;

544 
GR_COORD
 
xﬁd
 = 0, 
yﬁd
 = 0;

545 
GR_BOOL
 
is_out
;

546 
GR_BOOL
 
was_out
;

547 
GR_BOOL
 
√w£g
 = 
GR_FALSE
;

548 
GR_COLOR
 
ﬁdcﬁ‹
;

549 
GR_COLOR
 
√wcﬁ‹
;

550 
n
;

551 
fh
;

552 
DBPOINT
 
p
[
PCou¡
];

554 
L⁄Prv
 = 
	`ITOF
(0);

555 
L©Prv
 = 
	`ITOF
(0);

556 
ﬁdcﬁ‹
 = -1;

557 
is_out
 = 
GR_FALSE
;

558 
was_out
 = 
GR_FALSE
;

560 
fh
 = 
	`›í
(
‚
, 
O_BINARY
 | 
O_RDONLY
);

561 i‡(
fh
 < 0) {

562 
	`GrClo£
();

563 
	`Ârötf
(
°dîr
, "C™nŸ o≥¿%s\n", 
‚
);

564 
	`exô
(1);

567 (
n
 = 
	`ªad
(
fh
, 
p
, 
PCou¡
 * 
POINTSize
)) > 0) {

568 
µ
 = 
p
,
≥nd
 =Ö + 
n
/
POINTSize
;Öp <Öend;Öp++)

570 
	`DBPOINT_CONVERT
(
µ
);

572 
x
 = 
	`ITOF
(
µ
->
L⁄
Ë- 
L⁄gôude
;

573 
y
 = 
	`ITOF
(
µ
->
L©
Ë- 
L©ôude
;

576 i‡(
x
 < -
HSPAN
)

577 
x
 +
WSPAN
;

578 i‡(
x
 > 
HSPAN
)

579 
x
 -
WSPAN
;

581 i‡(
µ
->
Code
 > 5) {

582 
√wcﬁ‹
 = 
code_cﬁ‹s
[
µ
->
Code
 / 1000];

583 i‡(
√wcﬁ‹
 !
ﬁdcﬁ‹
) {

584 
ﬁdcﬁ‹
 = 
√wcﬁ‹
;

585 
	`GrSëGCF‹eground
(
m≠gc
, 
ﬁdcﬁ‹
);

587 
√w£g
 = 
GR_TRUE
;

590 i‡(
ﬁdcﬁ‹
 =
BLACK
)

591 
go_⁄
;

594 i‡((
x
 < -
l⁄gødius
 || x >Üongradius ||

595 
y
 < -
œåadius
 || y >Üatradius))

597 
is_out
 = 1;

598 i‡(
was_out
) {

599 
L⁄Prv
 = 
x
;

600 
L©Prv
 = 
y
;

601 
go_⁄
;

605 
xﬁd
 = 
m≠x‹ig
 + 
	`FTOI
(
	`FFMUL
(
L⁄Prv
, 
X_SˇÀ
)) / 60;

606 
yﬁd
 = 
m≠y‹ig
 - 
	`FTOI
(
	`FFMUL
(
L©Prv
, 
Y_SˇÀ
)) / 60;

608 
is_out
 = 0;

609 i‡(
was_out
) {

610 
xﬁd
 = 
m≠x‹ig
 +

611 
	`FTOI
(
	`FFMUL
(
L⁄Prv
, 
X_SˇÀ
)) / 60;

612 
yﬁd
 = 
m≠y‹ig
 -

613 
	`FTOI
(
	`FFMUL
(
L©Prv
, 
Y_SˇÀ
)) / 60;

617 
L⁄Prv
 = 
x
;

618 
L©Prv
 = 
y
;

621 
x√w
 = 
m≠x‹ig
 + 
	`FTOI
(
	`FFMUL
(
x
, 
X_SˇÀ
)) / 60;

622 
y√w
 = 
m≠y‹ig
 - 
	`FTOI
(
	`FFMUL
(
y
, 
Y_SˇÀ
)) / 60;

625 i‡(
√w£g
 || 
	`ABS
(
ﬁdl⁄g
 - 
µ
->
L⁄
) > 180*60) {

626 
xﬁd
 = 
x√w
;

627 
yﬁd
 = 
y√w
;

629 
ﬁdl⁄g
 = 
µ
->
L⁄
;

631 
	`GrLöe
(
m≠wid
, 
m≠gc
, 
xﬁd
, 
yﬁd
, 
x√w
, 
y√w
);

632 
xﬁd
 = 
x√w
;

633 
yﬁd
 = 
y√w
;

634 
go_⁄
:

635 
was_out
 = 
is_out
;

636 
√w£g
 = 
GR_FALSE
;

639 
	`˛o£
(
fh
);

640 
	}
}

	@demos/nbreaker/animate.c

37 
	~<°dio.h
>

38 
	~<°dlib.h
>

40 
	~<«no-X.h
>

41 
	~"nbªakî.h
"

45 
	$™im©e
(
nb°©e
 *
°©e
)

47 
co‹ds
 
√wpos
;

48 
ªt
, 
i
 = 32;

49 
GR_PIXMAP_ID
 
˘mp
;

52 if(
°©e
->
Êags
.
∑u£d
) ;

55 if(
°©e
->°©ê=
STATE_FADING
) {

57 
°©e
->
Ádñevñ
 -°©e->
Ádî©e
;

60 if(
°©e
->
Ádñevñ
 <= 0) {

63 
°©e
->°©ê°©e->
√xt°©e
;

66 
˘mp
 = 
°©e
->
√wˇnvas
;

67 
°©e
->
√wˇnvas
 = sèã->
ˇnvas
;

68 
°©e
->
ˇnvas
 = 
˘mp
;

75 if(
°©e
->°©ê!
STATE_TITLESCREEN
) {

76 if(
°©e
->
bÆl
.
∑rked
) {

78 
	`døw_background
(
°©e
, 0,

79 
°©e
->
ˇnvasheight
 -

80 
°©e
->
b©height
 -

81 
°©e
->
bÆl
.
s
->
h
,

82 
°©e
->
ˇnvaswidth
,

83 
°©e
->
b©height
 +

84 
°©e
->
bÆl
.
s
->
h
);

86 
	`døw_b©
(
°©e
);

88 
	`døw_bÆl
(
°©e
);

91 
	`døw_background
(
°©e
, 0,

92 
°©e
->
ˇnvasheight
 -

93 
°©e
->
b©height
,

94 
°©e
->
ˇnvaswidth
,

95 
°©e
->
b©height
);

97 
	`døw_b©
(
°©e
);

104 
	`GrC›yAªa
(
°©e
->
ˇnvas
, sèã->
gc
, 0, 0,

105 
°©e
->
ˇnvaswidth
, sèã->
ˇnvasheight
,

106 
°©e
->
√wˇnvas
, 0, 0, 0);

108 
	`GrC›yAªa
(
°©e
->
ˇnvas
, sèã->
gc
, 0, 0,

109 
°©e
->
ˇnvaswidth
, sèã->
ˇnvasheight
,

110 
°©e
->
ﬁdˇnvas
, 0, 0,

111 
GR_CONST_BLEND
 | 
°©e
->
Ádñevñ
);

115 
	`døw_ˇnvas
(
°©e
, 0, 0, sèã->
ˇnvaswidth
,

116 
°©e
->
ˇnvasheight
);

123 if(
°©e
->
Êags
.
À·
)

124 
	`move_b©
(
°©e
, sèã->
b©x
 - sèã->
b©v
);

127 if(
°©e
->
Êags
.
right
)

128 
	`move_b©
(
°©e
, sèã->
b©x
 + sèã->
b©v
);

131 
	`™im©e_powîs
(
°©e
);

134 if(
°©e
->
bÆl
.
∑rked
) ;

143 
	`ˇlc_√w_bÆl_co‹ds
(
°©e
, &
√wpos
);

144 
ªt
 = 
	`check_bÆl_cﬁlisi⁄
(
°©e
, &
√wpos
);

145 } 
ªt
 =1 && --
i
);

150 if(
ªt
 == 2) ;

154 if(!
i
) {

155 
	`Ârötf
(
°dîr
, "InternalÉrror: stuck in collisionÜoop\n");

156 
	`∑rk_bÆl
(
°©e
);

157 
	`move_bÆl
(
°©e
);

162 
°©e
->
bÆl
.
x
 = 
√wpos
.x;

163 
°©e
->
bÆl
.
y
 = 
√wpos
.y;

164 
	`move_bÆl
(
°©e
);

165 
	}
}

	@demos/nbreaker/ball.c

36 
	~<m©h.h
>

37 
	~<°dio.h
>

38 
	~<°dlib.h
>

39 
	~<°rög.h
>

41 
	~<«no-X.h
>

42 
	~<nxcﬁ‹s.h
>

43 
	~"nbªakî.h
"

47 
	$lo°_bÆl
(
nb°©e
 *
°©e
)

50 if(!
°©e
->
numbÆls
--) {

53 
°©e
->°©ê
STATE_GAMELOST
;

55 
	`ßve_hisc‹e
(
°©e
);

58 
	`£t_Àvñ_a˘ive
(
°©e
);

63 
	`døw_background
(
°©e
, 0, sèã->
sc‹es
.
h
, sèã->
ˇnvaswidth
,

64 
°©e
->
bÆl
.
s
->
h
 + (
BALLS_BORDER
 * 2));

66 
	`døw_bÆls
(
°©e
);

68 
	`døw_ˇnvas
(
°©e
, 0, sèã->
sc‹es
.
h
, sèã->
ˇnvaswidth
,

69 
°©e
->
bÆl
.
s
->
h
 + (
BALLS_BORDER
 * 2));

71 
	`∑rk_bÆl
(
°©e
);

72 
	`move_bÆl
(
°©e
);

77 
	`døw_b©
(
°©e
);

79 
	`døw_ˇnvas
(
°©e
, sèã->
b©x
 - (°©e->
b©widths
[°©e->
b©
] / 2),

80 
°©e
->
ˇnvasheight
 - sèã->
b©height
,

81 
°©e
->
b©widths
[°©e->
b©
], sèã->
b©height
);

82 
	}
}

86 
	$∑rk_bÆl
(
nb°©e
 *
°©e
)

88 
°©e
->
bÆl
.
∑rked
 = 1;

90 
°©e
->
bÆl
.
x
 = sèã->
b©x
 - (°©e->bÆl.
s
->
w
 / 2);

91 
°©e
->
bÆl
.
y
 = sèã->
ˇnvasheight
 -

92 
°©e
->
b©height
 - sèã->
bÆl
.
s
->
h
;

94 
°©e
->
bÆl
.
d
 = 0;

95 
	}
}

102 
	$ˇlc_√w_bÆl_co‹ds
(
nb°©e
 *
°©e
, 
co‹ds
 *
c
)

104 
c
->
x
 = 
°©e
->
bÆl
.x + 
	`sö
(°©e->bÆl.
d
Ë* sèã->bÆl.
v
;

105 
c
->
y
 = 
°©e
->
bÆl
.y - 
	`cos
(°©e->bÆl.
d
Ë* sèã->bÆl.
v
;

106 
	}
}

111 
	$n‹mÆi£_™gÀ
(
d
)

113 if(
d
 < 0Ë d + (2 * 
M_PI
);

114 if(
d
 > (2 * 
M_PI
)) d -= (2 * M_PI);

115  
d
;

116 
	}
}

125 
	$check_bÆl_cﬁlisi⁄
(
nb°©e
 *
°©e
, 
co‹ds
 *
c
)

127 
i
, 
bc
;

128 
grid
 *
g
 = 
°©e
->grid;

131 if(
c
->
y
 < 
°©e
->
bÆl
.
s
->
h
 + (2 * 
BALLS_BORDER
Ë+ sèã->
sc‹es
.h) {

133 
°©e
->
bÆl
.
d
 = 
	`n‹mÆi£_™gÀ
(
M_PI
 - state->ball.d);

138 if(
c
->
y
 > 
°©e
->
ˇnvasheight
 - sèã->
bÆl
.
s
->
h
) {

141 if(
°©e
->
Êags
.
sf
) {

142 
°©e
->
bÆl
.
d
 = 
	`n‹mÆi£_™gÀ
(
M_PI
 - state->ball.d);

149 
	`lo°_bÆl
(
°©e
);

150 
	`move_bÆl
(
°©e
);

156 if(
c
->
x
 < 0) {

158 
°©e
->
bÆl
.
d
 = 
	`n‹mÆi£_™gÀ
((2 * 
M_PI
) - state->ball.d);

163 if(
c
->
x
 > 
°©e
->
ˇnvaswidth
 - sèã->
bÆl
.
s
->
w
) {

165 
°©e
->
bÆl
.
d
 = 
	`n‹mÆi£_™gÀ
((2 * 
M_PI
) - state->ball.d);

170 if(
c
->
y
 > 
°©e
->
ˇnvasheight
 - sèã->
b©height
 - sèã->
bÆl
.
s
->
h
 &&

171 
c
->
x
 > 
°©e
->
b©x
 -

172 (
°©e
->
b©widths
[°©e->
b©
] / 2Ë- sèã->
bÆl
.
s
->
w
 &&

173 
c
->
x
 < 
°©e
->
b©x
 +

174 (
°©e
->
b©widths
[°©e->
b©
] / 2)) {

179 if(
°©e
->
bÆl
.
y
 > sèã->
ˇnvasheight
 - sèã->
b©height
 -

180 
°©e
->
bÆl
.
s
->
h
)

184 if(
°©e
->
powîtimes
.
°ickyb©
) {

185 
	`∑rk_bÆl
(
°©e
);

186 
	`move_bÆl
(
°©e
);

191 
°©e
->
bÆl
.
d
 = 
	`n‹mÆi£_™gÀ
(((
c
->
x
 +

192 (
°©e
->
bÆl
.
s
->
w
 / 2)

193 - 
°©e
->
b©x
) /

194 
°©e
->
b©widths
[°©e->
b©
] /

195 2Ë* 
M_PI
);

201 
bc
 = 0;

203 
i
 = 0; i < 
°©e
->
width
 * sèã->
height
; i++) {

206 if(
g
->
b
 && 
c
->
y
 + 
°©e
->
bÆl
.
s
->
h
 > g->y && c->y < g->y +

207 
°©e
->
brickheight
 && 
c
->
x
 + sèã->
bÆl
.
s
->
w


208 > 
g
->
x
 && 
c
->x < g->x + 
°©e
->
brickwidth
) {

214 if(
	`brick_cﬁlisi⁄
(
°©e
, 
g
))  2;

219 if(!
°©e
->
Êags
.
nb
 && !
bc
) {

220 
bc
 = 1;

222 if(
°©e
->
bÆl
.
x
 + sèã->bÆl.
s
->
w
 < 
g
->x) {

223 
°©e
->
bÆl
.
d
 = 
	`n‹mÆi£_™gÀ
((2 *

224 
M_PI
Ë- 
°©e
->
bÆl
.
d
);

226 } if(
°©e
->
bÆl
.
x
 >
g
->x +

227 
°©e
->
brickwidth
) {

228 
°©e
->
bÆl
.
d
 = 
	`n‹mÆi£_™gÀ
((2 *

229 
M_PI
Ë- 
°©e
->
bÆl
.
d
);

231 } if(
°©e
->
bÆl
.
y
 + sèã->bÆl.
s
->
h


232 < 
g
->
y
) {

233 
°©e
->
bÆl
.
d
 = 
	`n‹mÆi£_™gÀ
(
M_PI
 -

234 
°©e
->
bÆl
.
d
);

236 } if(
°©e
->
bÆl
.
y
 >
g
->y +

237 
°©e
->
brickheight
) {

238 
°©e
->
bÆl
.
d
 = 
	`n‹mÆi£_™gÀ
(
M_PI
 -

239 
°©e
->
bÆl
.
d
);

243 
	`Ârötf
(
°dîr
, "InternalÉrror: "

249 
g
++;

253 if(
bc
)  1;

255 
	}
}

260 
	$move_bÆl
(
nb°©e
 *
°©e
)

262 
x
, 
w
, 
y
, 
h
;

265 if(
°©e
->
bÆl
.
lx
 =°©e->bÆl.
x
 && sèã->bÆl.
ly
 =°©e->bÆl.
y
)

275 if(
°©e
->
bÆl
.
x
 < sèã->bÆl.
lx
) {

276 
x
 = ()
°©e
->
bÆl
.x;

277 
w
 = 
°©e
->
bÆl
.
lx
 - 
x
 + sèã->bÆl.
s
->w;

279 
x
 = 
°©e
->
bÆl
.
lx
;

280 
w
 = ()
°©e
->
bÆl
.
x
 - x + sèã->bÆl.
s
->w;

282 if(
°©e
->
bÆl
.
y
 < sèã->bÆl.
ly
) {

283 
y
 = ()
°©e
->
bÆl
.y;

284 
h
 = 
°©e
->
bÆl
.
ly
 - 
y
 + sèã->bÆl.
s
->h;

286 
y
 = 
°©e
->
bÆl
.
ly
;

287 
h
 = ()
°©e
->
bÆl
.
y
 - y + sèã->bÆl.
s
->h;

291 
	`døw_background
(
°©e
, sèã->
bÆl
.
lx
, sèã->bÆl.
ly
,

292 
°©e
->
bÆl
.
s
->
w
, sèã->bÆl.s->
h
);

295 
	`ªdøw_powîs
(
°©e
, sèã->
bÆl
.
lx
, sèã->bÆl.
ly
, sèã->bÆl.
s
->
w
,

296 
°©e
->
bÆl
.
s
->
h
);

299 
	`døw_bÆl
(
°©e
);

302 
	`døw_ˇnvas
(
°©e
, 
x
, 
y
, 
w
, 
h
);

303 
	}
}

307 
	$ªdøw_bÆl
(
nb°©e
 *
°©e
)

310 
	`døw_background
(
°©e
, ()°©e->
bÆl
.
x
, ()°©e->bÆl.
y
,

311 
°©e
->
bÆl
.
s
->
w
, sèã->bÆl.s->
h
);

314 
	`ªdøw_powîs
(
°©e
, ()°©e->
bÆl
.
x
, ()°©e->bÆl.
y
,

315 
°©e
->
bÆl
.
s
->
w
, sèã->bÆl.s->
h
);

318 
	`døw_bÆl
(
°©e
);

321 
	`døw_ˇnvas
(
°©e
, sèã->
bÆl
.
lx
, sèã->bÆl.
ly
, sèã->bÆl.
s
->
w
,

322 
°©e
->
bÆl
.
s
->
h
);

323 
	}
}

	@demos/nbreaker/bat.c

36 
	~<°dio.h
>

37 
	~<°dlib.h
>

38 
	~<°rög.h
>

40 
	~<«no-X.h
>

41 
	~<nxcﬁ‹s.h
>

42 
	~"nbªakî.h
"

46 
	$ch™ge_b©
(
nb°©e
 *
°©e
, 
√wb©
)

48 
ox1
, 
ox2
, 
nx1
, 
nx2
, 
x
, 
w
;

51 if(
°©e
->
b©widths
[
√wb©
] > sèã->b©widths[°©e->
b©
]) {

53 
x
 = 
°©e
->
b©x
 - (°©e->
b©widths
[
√wb©
] / 2);

55 if(
x
 < 0Ë
	`move_b©
(
°©e
, sèã->
b©widths
[
√wb©
] / 2);

58 
x
 +
°©e
->
b©widths
[
√wb©
];

60 if(
x
 > 
°©e
->
ˇnvaswidth
)

61 
	`move_b©
(
°©e
, sèã->
ˇnvaswidth
 -

62 
°©e
->
b©widths
[
√wb©
] / 2);

67 
ox1
 = 
°©e
->
b©x
 - (°©e->
b©widths
[°©e->
b©
] / 2);

68 
ox2
 = 
ox1
 + 
°©e
->
b©widths
[°©e->
b©
];

69 
nx1
 = 
°©e
->
b©x
 - (°©e->
b©widths
[
√wb©
] / 2);

70 
nx2
 = 
nx1
 + 
°©e
->
b©widths
[
√wb©
];

73 
	`døw_background
(
°©e
, 
ox1
, sèã->
ˇnvasheight
 - sèã->
b©height
,

74 
°©e
->
b©widths
[°©e->
b©
], sèã->
b©height
);

77 
°©e
->
b©
 = 
√wb©
;

78 
	`døw_b©
(
°©e
);

81 if(
ox1
 < 
nx1
Ë
x
 = ox1;

82 
x
 = 
nx1
;

83 if(
ox2
 > 
nx2
Ë
w
 = ox2 - 
x
;

84 
w
 = 
nx2
 - 
x
;

87 
	`døw_ˇnvas
(
°©e
, 
x
, sèã->
ˇnvasheight
 - sèã->
b©height
, 
w
,

88 
°©e
->
b©height
);

89 
	}
}

93 
	$move_b©
(
nb°©e
 *
°©e
, 
x
)

95 
•rôe
 *
s
;

96 
powî
 *
p
, *
≤ext
;

97 
ox
, 
nx
, 
l
, 
r
, 
w
, 
h
, 
y
, 
y2
;

102 if(
°©e
->
Êags
.
∑u£d
) ;

105 
w
 = 
°©e
->
b©widths
[°©e->
b©
];

106 
y
 = 
°©e
->
ˇnvasheight
 - sèã->
b©height
;

109 if(
x
 - (
w
 / 2) < 0) x = w / 2;

110 if(
x
 + (
w
 / 2Ë> 
°©e
->
ˇnvaswidth
) x = state->canvaswidth - (w / 2);

113 if(
°©e
->
bÆl
.
∑rked
Ë°©e->bÆl.
x
 = x - (°©e->bÆl.
s
->
w
 / 2);

117 if(
°©e
->°©ê!
STATE_RUNNING
) {

118 
°©e
->
b©x
 = 
x
;

123 if(
°©e
->
b©x
 =
x
) ;

127 
ox
 = 
°©e
->
b©x
 - (
w
 / 2);

128 
°©e
->
b©x
 = 
x
;

129 
nx
 = 
°©e
->
b©x
 - (
w
 / 2);

130 if(
ox
 > 
nx
) {

131 
l
 = 
nx
;

132 
r
 = 
ox
 + 
w
;

134 
l
 = 
ox
;

135 
r
 = 
nx
 + 
w
;

137 
w
 = 
r
 - 
l
;

138 
h
 = 
°©e
->
b©height
;

142 
y2
 = 
y
;

143 if(
°©e
->
bÆl
.
∑rked
) {

144 
	`move_bÆl
(
°©e
);

145 
y2
 -
°©e
->
bÆl
.
s
->
h
;

146 
h
 +
°©e
->
bÆl
.
s
->h;

150 
p
 = 
°©e
->
powîs
;Ö;Ö = 
≤ext
) {

151 
≤ext
 = 
p
->
√xt
;

154 
s
 = 
°©e
->
powî•rôes
[
p
->
ty≥
];

157 if(
p
->
y
 + 
s
->
h
 > 
°©e
->
ˇnvasheight
 - sèã->
b©height
 &&

158 
p
->
x
 + 
s
->
w
 > 
l
 &&Ö->x < 
r
) {

161 
	`døw_background
(
°©e
, 
p
->
x
,Ö->
y
, 
s
->
w
, s->
h
);

164 
	`døw_ˇnvas
(
°©e
, 
p
->
x
,Ö->
y
 - sèã->
powîv
, 
s
->
w
,

165 
s
->
h
);

168 
	`powî_cﬁlisi⁄
(
°©e
, 
p
);

171 
	`de°roy_powî
(
°©e
, 
p
);

176 
	`døw_background
(
°©e
, 
l
, 
y
, 
w
, sèã->
b©height
);

178 
	`døw_b©
(
°©e
);

180 
	`døw_ˇnvas
(
°©e
, 
l
, 
y2
, 
w
, 
h
);

181 
	}
}

	@demos/nbreaker/brick.c

36 
	~<°dio.h
>

37 
	~<°dlib.h
>

38 
	~<°rög.h
>

40 
	~<«no-X.h
>

41 
	~<nxcﬁ‹s.h
>

42 
	~"nbªakî.h
"

48 
	$de°roy_brick
(
nb°©e
 *
°©e
, 
grid
 *
g
)

50 
immuèbÀ
;

53 
	`døw_background
(
°©e
, 
g
->
x
, g->
y
, sèã->
brickwidth
,

54 
°©e
->
brickheight
);

56 
	`ªdøw_powîs
(
°©e
, 
g
->
x
, g->
y
, sèã->
brickwidth
, sèã->
brickheight
);

58 
	`døw_ˇnvas
(
°©e
, 
g
->
x
, g->
y
, sèã->
brickwidth
,

59 
°©e
->
brickheight
);

62 if(
g
->
b
->
Êags
 & 
BRICK_FLAG_HUGE_BONUS
)

63 
	`ö¸emít_sc‹e
(
°©e
, sèã->
hugeb⁄u•oöts
);

64 if(
g
->
b
->
Êags
 & 
BRICK_FLAG_LARGE_BONUS
)

65 
	`ö¸emít_sc‹e
(
°©e
, sèã->
œrgeb⁄u•oöts
);

66 if(
g
->
b
->
Êags
 & 
BRICK_FLAG_MEDIUM_BONUS
)

67 
	`ö¸emít_sc‹e
(
°©e
, sèã->
mediumb⁄u•oöts
);

68 if(
g
->
b
->
Êags
 & 
BRICK_FLAG_SMALL_BONUS
)

69 
	`ö¸emít_sc‹e
(
°©e
, sèã->
smÆlb⁄u•oöts
);

70 
	`ö¸emít_sc‹e
(
°©e
, sèã->
n‹mÆpoöts
);

76 
immuèbÀ
 = 
g
->
b
->
Êags
 & 
BRICK_FLAG_IMMUTABLE
;

77 
g
->
b
 = 
NULL
;

81 if(!
immuèbÀ
 && !--
°©e
->
numbricks
) {

82 
	`ö¸emít_Àvñ
(
°©e
);

87 if(
g
->
powî
 !
NOPOWER
)

88 
	`√w_powî
(
°©e
, 
g
->
powî
, g->
x
 + (°©e->
brickwidth
 / 2),

89 
g
->
y
);

92 
	}
}

100 
	$brick_cﬁlisi⁄
(
nb°©e
 *
°©e
, 
grid
 *
g
)

104 if(
°©e
->
powîtimes
.
powîbÆl
 || sèã->
Êags
.
nb
)

105  
	`de°roy_brick
(
°©e
, 
g
);

109 if(
g
->
b
->
Êags
 & 
BRICK_FLAG_IMMUTABLE
)  0;

114 
g
->
hôs
++;

118 if(((
g
->
b
->
Êags
 & 
BRICK_FLAG_2_HITS
Ë&& g->
hôs
 < 2) ||

119 ((
g
->
b
->
Êags
 & 
BRICK_FLAG_3_HITS
Ë&& g->
hôs
 < 3)) {

121 
	`døw_background
(
°©e
, 
g
->
x
, g->
y
, sèã->
brickwidth
,

122 
°©e
->
brickheight
);

125 
	`døw_brick
(
°©e
, 
g
, 0, 0, sèã->
brickwidth
,

126 
°©e
->
brickheight
);

128 
	`ªdøw_powîs
(
°©e
, 
g
->
x
, g->
y
, sèã->
brickwidth
,

129 
°©e
->
brickheight
);

131 
	`døw_ˇnvas
(
°©e
, 
g
->
x
, g->
y
, sèã->
brickwidth
,

132 
°©e
->
brickheight
);

134 }  
	`de°roy_brick
(
°©e
, 
g
);

137 
	}
}

	@demos/nbreaker/cheat.c

36 
	~<°dio.h
>

37 
	~<°dlib.h
>

38 
	~<°rög.h
>

40 
	~<«no-X.h
>

41 
	~<nxcﬁ‹s.h
>

42 
	~"nbªakî.h
"

53 
	$chótcmp
(*
a
, *
b
)

55 
m
 = 0;

58 if(!
b
)  0;

62 *
a
 =*
b
) {

65 if(!*
a
)  1;

68 
m
 = 1;

70 
a
++;

71 
b
++;

77 if(!*
a
 && *
b
 && 
m
)  2;

79 
	}
}

90 
	$do_chót
(
nb°©e
 *
°©e
, 
GR_KEY
 
key
)

92 
i
, 
Àn
, 
∑πül_m©ch
 = 0;

95 if(
key
 > 127) ;

103 
Àn
 = 
	`°æí
(
°©e
->
chót°©e
);

104 
°©e
->
chót°©e
[
Àn
] = 
key
;

107 if((
i
 = 
	`chótcmp
(
°©e
->
chót°©e
, sèã->
chóts
[
SFCHEAT
]))) {

108 if(
i
 == 1) {

110 
°©e
->
Êags
.
sf
 ^= 1;

112 
	`mem£t
(
°©e
->
chót°©e
, 0, 
MAXCHEATLEN
 + 1);

114 } 
∑πül_m©ch
 = 1;

118 if((
i
 = 
	`chótcmp
(
°©e
->
chót°©e
, sèã->
chóts
[
TPCHEAT
]))) {

119 if(
i
 == 1) {

121 
	`ö¸emít_Àvñ
(
°©e
);

122 
	`mem£t
(
°©e
->
chót°©e
, 0, 
MAXCHEATLEN
 + 1);

124 } 
∑πül_m©ch
 = 1;

128 if((
i
 = 
	`chótcmp
(
°©e
->
chót°©e
, sèã->
chóts
[
NBCHEAT
]))) {

129 if(
i
 == 1) {

131 
°©e
->
Êags
.
nb
 ^= 1;

132 
	`mem£t
(
°©e
->
chót°©e
, 0, 
MAXCHEATLEN
 + 1);

134 } 
∑πül_m©ch
 = 1;

138 if((
i
 = 
	`chótcmp
(
°©e
->
chót°©e
, sèã->
chóts
[
NPDCHEAT
]))) {

139 if(
i
 == 1) {

141 
°©e
->
Êags
.
≈d
 ^= 1;

142 
	`mem£t
(
°©e
->
chót°©e
, 0, 
MAXCHEATLEN
 + 1);

144 } 
∑πül_m©ch
 = 1;

148 if((
i
 = 
	`chótcmp
(
°©e
->
chót°©e
, sèã->
chóts
[
NPUTOCHEAT
]))) {

149 if(
i
 == 1) {

151 
°©e
->
Êags
.
≈uto
 ^= 1;

152 
	`mem£t
(
°©e
->
chót°©e
, 0, 
MAXCHEATLEN
 + 1);

154 } 
∑πül_m©ch
 = 1;

159 if(!
∑πül_m©ch
Ë
	`mem£t
(
°©e
->
chót°©e
, 0, 
MAXCHEATLEN
 + 1);

160 
	}
}

	@demos/nbreaker/draw.c

36 
	~<°dio.h
>

37 
	~<°dlib.h
>

39 
	~<«no-X.h
>

40 
	~<nxcﬁ‹s.h
>

41 
	~"nbªakî.h
"

46 
	$døw_tûed_background
(
nb°©e
 *
°©e
, 
x
, 
y
, 
w
, 
h
)

48 
tûex
 = 0, 
tûey
 = 0, 
‰omx
, 
‰omy
, 
cx
, 
cy
;

49 
de°width
, 
de°height
, 
§cwidth
, 
§cheight
, 
cwidth
, 
cheight
;

50 
dwidth
 = 
°©e
->
ˇnvaswidth
;

51 
dheight
 = 
°©e
->
ˇnvasheight
;

52 
swidth
 = 
°©e
->
background
->
w
;

53 
sheight
 = 
°©e
->
background
->
h
;

57 if(
swidth
 > 
dwidth
Ë
§cwidth
 = dwidth;

58 
§cwidth
 = 
swidth
;

59 if(
sheight
 > 
dheight
Ë
§cheight
 = dheight;

60 
§cheight
 = 
sheight
;

63 ;
tûey
 < 
dheight
;Åûey +
§cheight
, 
tûex
 = 0) {

65 if(
tûey
 > (
y
 + 
h
)) ;

67 if(
y
 > (
tûey
 + 
§cheight
)) ;

69 if((
tûey
 + 
§cheight
Ë> 
dheight
Ë
de°height
 = dheight -Åiley;

70 
de°height
 = 
§cheight
;

72 ;
tûex
 < 
dwidth
;Åûex +
§cwidth
) {

75 if(
tûex
 > (
x
 + 
w
)) ;

78 if(
x
 > (
tûex
 + 
§cwidth
)) ;

81 if((
tûex
 + 
§cwidth
Ë> 
dwidth
)

82 
de°width
 = 
dwidth
 - 
tûex
;

83 
de°width
 = 
§cwidth
;

88 if((
tûex
 >
x
Ë&& (—ûex + 
de°width
Ë<(x + 
w
))) {

89 
‰omx
 = 0;

90 
cx
 = 
tûex
;

91 
cwidth
 = 
de°width
;

95 if(
x
 > 
tûex
) {

96 
‰omx
 = 
x
 - 
tûex
;

97 
cwidth
 = 
de°width
 - 
‰omx
;

101 
‰omx
 = 0;

102 
cwidth
 = 
x
 + 
w
 - 
tûex
;

105 if(
cwidth
 > 
w
) cwidth = w;

107 if(
cwidth
 > 
de°width
) cwidth = destwidth;

110 
cx
 = 
tûex
 + 
‰omx
;

114 if((
tûey
 >
y
Ë&& (—ûey + 
de°height
Ë<(y + 
h
))) {

115 
‰omy
 = 0;

116 
cy
 = 
tûey
;

117 
cheight
 = 
de°height
;

119 if(
y
 > 
tûey
) {

120 
‰omy
 = 
y
 - 
tûey
;

121 
cheight
 = 
de°height
 - 
‰omy
;

123 
‰omy
 = 0;

124 
cheight
 = 
y
 + 
h
 - 
tûey
;

126 if(
cheight
 > 
h
) cheight = h;

127 if(
cheight
 > 
de°height
) cheight = destheight;

128 
cy
 = 
tûey
 + 
‰omy
;

132 if((
cwidth
 > 0Ë&& (
cheight
 > 0)) {

133 
	`GrC›yAªa
(
°©e
->
ˇnvas
, sèã->
gc
, 
cx
, 
cy
,

134 
cwidth
, 
cheight
,

135 
°©e
->
background
->
p
,

136 
‰omx
, 
‰omy
, 0);

140 
	}
}

143 
	$fûl_ö_ª˘™gÀ
(
nb°©e
 *
°©e
, 
x
, 
y
, 
w
, 
h
,

144 
xx
, 
yy
, 
ww
, 
hh
)

146 
xxx
, 
yyy
;

149 
xxx
 = 
xx
 + 
ww
;

150 
yyy
 = 
yy
 + 
hh
;

153 if(
x
 > 
xx
) xx = x;

154 if(
y
 > 
yy
) yy = y;

155 if(
x
 + 
w
 < 
xxx
) xxx = x + w;

156 if(
y
 + 
h
 < 
yyy
) yyy = y + h;

159 
ww
 = 
xxx
 - 
xx
;

160 
hh
 = 
yyy
 - 
yy
;

163 if(
ww
 > 0 && 
hh
 > 0)

164 
	`GrFûlRe˘
(
°©e
->
ˇnvas
, sèã->
gc
, 
xx
, 
yy
, 
ww
, 
hh
);

166 
	}
}

170 
	$døw_˚¡ªd_background
(
nb°©e
 *
°©e
, 
x
, 
y
, 
w
, 
h
)

172 
bgx
, 
bgy
, 
xx
, 
yy
, 
ww
, 
hh
;

175 if(
°©e
->
background
->
w
 >°©e->
ˇnvaswidth
Ë
bgx
 = 0;

176 
bgx
 = (
°©e
->
ˇnvaswidth
 / 2Ë- (°©e->
background
->
w
 / 2);

177 if(
°©e
->
background
->
h
 >°©e->
ˇnvasheight
Ë
bgy
 = 0;

178 
bgy
 = (
°©e
->
ˇnvasheight
 / 2Ë- (°©e->
background
->
h
 / 2);

181 if(
x
 < 
bgx
 + 
°©e
->
background
->
w
 && 
y
 < bgx + sèã->background->
h
 &&

182 
x
 + 
w
 > 
bgx
 && 
y
 + 
h
 > 
bgy
) {

184 
xx
 = (
x
 > 
bgx
) ? x : bgx;

185 
yy
 = (
y
 > 
bgy
) ? y : bgy;

187 
ww
 = (
x
 + 
w
 < 
bgx
 + 
°©e
->
background
->wË? x + w - 
xx
 :

188 
bgx
 + 
°©e
->
background
->
w
 - 
xx
;

189 
hh
 = (
y
 + 
h
 < 
bgy
 + 
°©e
->
background
->hË? y + h - 
yy
 :

190 
bgy
 + 
°©e
->
background
->
h
 - 
yy
;

192 if(
ww
 > 0 && 
hh
 > 0)

193 
	`GrC›yAªa
(
°©e
->
ˇnvas
, sèã->
gc
, 
xx
, 
yy
, 
ww
, 
hh
,

194 
°©e
->
background
->
p
, 
xx
 - 
bgx
, 
yy
 - 
bgy
, 0);

198 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
GR_COLOR_BLACK
);

201 
	`fûl_ö_ª˘™gÀ
(
°©e
, 
x
, 
y
, 
w
, 
h
, 0, 0, sèã->
ˇnvaswidth
, 
bgy
);

203 
	`fûl_ö_ª˘™gÀ
(
°©e
, 
x
, 
y
, 
w
, 
h
, 0, 
bgy
, 
bgx
, sèã->
background
->h);

205 
	`fûl_ö_ª˘™gÀ
(
°©e
, 
x
, 
y
, 
w
, 
h
, 
bgx
 + sèã->
background
->w, 
bgy
,

206 
°©e
->
ˇnvaswidth
 - 
bgx
 + sèã->
background
->
w
,

207 
°©e
->
background
->
h
);

209 
	`fûl_ö_ª˘™gÀ
(
°©e
, 
x
, 
y
, 
w
, 
h
, 0, 
bgy
 + sèã->
background
->h,

210 
°©e
->
ˇnvaswidth
, sèã->
ˇnvasheight
 - 
bgy
 +

211 
°©e
->
background
->
h
);

212 
	}
}

216 
	$døw_background
(
nb°©e
 *
°©e
, 
x
, 
y
, 
w
, 
h
)

218 if(
°©e
->
backgroundtûed
Ë
	`døw_tûed_background
(°©e, 
x
, 
y
, 
w
, 
h
);

219 
	`døw_˚¡ªd_background
(
°©e
, 
x
, 
y
, 
w
, 
h
);

220 
	}
}

223 
	$døw_•œsh
(
nb°©e
 *
°©e
)

225 if(!
°©e
->
•œsh
) ;

227 
	`GrC›yAªaAÕha
(
°©e
->
ˇnvas
, sèã->
gc
, sèã->
•œsh
->
a
,

228 (
°©e
->
ˇnvaswidth
 / 2Ë- (°©e->
•œsh
->
w
 / 2),

229 (
°©e
->
ˇnvasheight
 / 2Ë- (°©e->
•œsh
->
h
 / 2),

230 
°©e
->
•œsh
->
w
, sèã->•œsh->
h
, sèã->•œsh->
p
,

231 0, 0, 
GR_ALPHA_BLEND
);

232 
	}
}

237 
	$døw_brick
(
nb°©e
 *
°©e
, 
grid
 *
g
, 
x
, 
y
, 
w
, 
h
)

239 
GR_ALPHA_ID
 
a
;

240 
Æpha
 = 0;

243 if(!
g
->
b
) ;

250 if(
g
->
b
->
Êags
 & 
BRICK_FLAG_2_HITS
 && g->
hôs
 =1Ë
Æpha
 = 155;

251 if(
g
->
b
->
Êags
 & 
BRICK_FLAG_3_HITS
) {

252 if(
g
->
hôs
 =1Ë
Æpha
 = 190;

253 if(
g
->
hôs
 =2Ë
Æpha
 = 128;

258 if(
Æpha
) {

260 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
GR_COLOR_BLACK
);

261 
	`GrFûlRe˘
(
°©e
->
brickÆpha
, sèã->
gc
, 0, 0,

262 
°©e
->
brickwidth
, sèã->
brickheight
);

265 
	`GrC›yAªa
(
°©e
->
brickÆpha
, sèã->
gc
, 0, 0,

266 
°©e
->
brickwidth
, sèã->
brickheight
,

267 
g
->
b
->
s
->
a
, 0, 0, 
GR_CONST_ADD
 | 
Æpha
);

268 
a
 = 
°©e
->
brickÆpha
;

270 } 
a
 = 
g
->
b
->
s
->a;

274 
	`GrC›yAªaAÕha
(
°©e
->
ˇnvas
, sèã->
gc
, 
a
, 
g
->
x
 + x, g->
y
 + y,

275 
w
, 
h
, 
g
->
b
->
s
->
p
, 
x
, 
y
, 
GR_ALPHA_BLEND
);

276 
	}
}

281 
	$døw_bricks
(
nb°©e
 *
°©e
, 
x
, 
y
, 
w
, 
h
)

283 
tûex
 = 0, 
tûey
 = 0, 
‰omx
, 
‰omy
;

284 
de°width
, 
de°height
, 
§cwidth
, 
§cheight
, 
cwidth
, 
cheight
;

285 
offy
 = 
°©e
->
sc‹es
.
h
 + sèã->
bÆl
.
s
->h + (
BALLS_BORDER
 * 2);

286 
dwidth
 = 
°©e
->
ˇnvaswidth
;

287 
dheight
 = 
°©e
->
height
 * sèã->
brickheight
;

288 
swidth
 = 
°©e
->
brickwidth
;

289 
sheight
 = 
°©e
->
brickheight
;

290 
grid
 *
g
 = 
°©e
->grid - 1;

292 
y
 -
offy
;

293 if(
y
 < 0) y = 0;

295 if(
swidth
 > 
dwidth
Ë
§cwidth
 = dwidth;

296 
§cwidth
 = 
swidth
;

297 if(
sheight
 > 
dheight
Ë
§cheight
 = dheight;

298 
§cheight
 = 
sheight
;

300 ;
tûey
 < 
dheight
;Åûey +
§cheight
, 
tûex
 = 0) {

301 if(
tûey
 > (
y
 + 
h
)) ;

302 if(
y
 > (
tûey
 + 
§cheight
)) {

303 
g
 +
°©e
->
width
;

306 if((
tûey
 + 
§cheight
Ë> 
dheight
Ë
de°height
 = dheight -Åiley;

307 
de°height
 = 
§cheight
;

308 ;
tûex
 < 
dwidth
;Åûex +
§cwidth
) {

309 
g
++;

310 if(
tûex
 > (
x
 + 
w
)) ;

311 if(
x
 > (
tûex
 + 
§cwidth
)) ;

312 if((
tûex
 + 
§cwidth
Ë> 
dwidth
)

313 
de°width
 = 
dwidth
 - 
tûex
;

314 
de°width
 = 
§cwidth
;

316 if((
tûex
 >
x
Ë&& (—ûex + 
de°width
Ë<(x + 
w
))) {

317 
‰omx
 = 0;

318 
cwidth
 = 
de°width
;

320 if(
x
 > 
tûex
) {

321 
‰omx
 = 
x
 - 
tûex
;

322 
cwidth
 = 
de°width
 - 
‰omx
;

324 
‰omx
 = 0;

325 
cwidth
 = 
x
 + 
w
 - 
tûex
;

327 if(
cwidth
 > 
w
) cwidth = w;

328 if(
cwidth
 > 
de°width
) cwidth = destwidth;

331 if((
tûey
 >
y
)&&(—ûey + 
de°height
)<=(y + 
h
))) {

332 
‰omy
 = 0;

333 
cheight
 = 
de°height
;

335 if(
y
 > 
tûey
) {

336 
‰omy
 = 
y
 - 
tûey
;

337 
cheight
 = 
de°height
 - 
‰omy
;

339 
‰omy
 = 0;

340 
cheight
 = 
y
 + 
h
 - 
tûey
;

342 if(
cheight
 > 
h
) cheight = h;

343 if(
cheight
 > 
de°height
) cheight = destheight;

345 if((
cwidth
 > 0Ë&& (
cheight
 > 0))

346 
	`døw_brick
(
°©e
, 
g
, 
‰omx
, 
‰omy
, 
cwidth
,

347 
cheight
);

350 
	}
}

353 
	$døw_b©
(
nb°©e
 *
°©e
)

355 
	`GrC›yAªaAÕha
(
°©e
->
ˇnvas
, sèã->
gc
, sèã->
b©s
[°©e->
b©
]->
a
,

356 
°©e
->
b©x
 - (°©e->
b©widths
[°©e->
b©
] / 2),

357 
°©e
->
ˇnvasheight
 - sèã->
b©height
,

358 
°©e
->
b©widths
[°©e->
b©
], sèã->
b©height
,

359 
°©e
->
b©s
[°©e->
b©
]->
p
, 0, 0, 
GR_ALPHA_BLEND
);

360 
	}
}

365 
	$døw_bÆl
(
nb°©e
 *
°©e
)

367 
	`GrC›yAªaAÕha
(
°©e
->
ˇnvas
, sèã->
gc
, sèã->
bÆl
.
s
->
a
,

368 
°©e
->
bÆl
.
x
, sèã->bÆl.
y
, sèã->bÆl.
s
->
w
,

369 
°©e
->
bÆl
.
s
->
w
, sèã->bÆl.s->
p
, 0, 0,

370 
GR_ALPHA_BLEND
);

371 
°©e
->
bÆl
.
lx
 = ()°©e->bÆl.
x
;

372 
°©e
->
bÆl
.
ly
 = ()°©e->bÆl.
y
;

373 
	}
}

376 
	$døw_bÆls
(
nb°©e
 *
°©e
)

378 
i
, 
s
, 
x
, 
y
;

381 
s
 = 
°©e
->
bÆl
.s->
w
;

382 
x
 = 
BALLS_BORDER
;

383 
y
 = 
°©e
->
sc‹es
.
h
 + 
BALLS_BORDER
;

385 
i
 = 0; i < 
°©e
->
numbÆls
; i++) {

388 if(
x
 + 
s
 + 
BALLS_BORDER
 > 
°©e
->
ˇnvaswidth
) ;

390 
	`GrC›yAªaAÕha
(
°©e
->
ˇnvas
, sèã->
gc
, sèã->
bÆl
.
s
->
a
,

391 
x
, 
y
, 
s
, s, 
°©e
->
bÆl
.s->
p
, 0, 0,

392 
GR_ALPHA_BLEND
);

394 
x
 +
s
 + 
BALLS_BORDER
;

396 
	}
}

405 
	$døw_sc‹es
(
nb°©e
 *
°©e
)

407 
buf
[128];

410 
	`¢¥ötf
(
buf
, 128, "Score: %d HiScore: %d Level: %d",

411 
°©e
->
sc‹es
.
s
, sèã->sc‹es.
hi
, sèã->
Àvñ
);

414 
	`døw_background
(
°©e
, 0, 0, sèã->
ˇnvaswidth
, sèã->
sc‹es
.
h
);

417 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
SCORE_BGCOLOUR
);

418 
	`GrFûlRe˘
(
°©e
->
sc‹es
.
p
, sèã->
gc
, 0, 0, sèã->
ˇnvaswidth
,

419 
°©e
->
sc‹es
.
h
);

422 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
SCORE_FGCOLOUR
);

423 
	`GrSëGCBackground
(
°©e
->
gc
, 
SCORE_BGCOLOUR
);

424 
	`GrText
(
°©e
->
sc‹es
.
p
, sèã->
gc
, 
SCORE_BORDER
, SCORE_BORDER, 
buf
,

425 -1, 
GR_TFTOP
);

429 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
SCORE_ALPHACOLOUR
);

430 
	`GrFûlRe˘
(
°©e
->
sc‹es
.
a
, sèã->
gc
, 0, 0, sèã->
ˇnvaswidth
,

431 
°©e
->
sc‹es
.
h
);

432 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
GR_COLOR_WHITE
);

433 
	`GrSëGCBackground
(
°©e
->
gc
, 
SCORE_ALPHACOLOUR
);

434 
	`GrText
(
°©e
->
sc‹es
.
a
, sèã->
gc
, 
SCORE_BORDER
, SCORE_BORDER, 
buf
,

435 -1, 
GR_TFTOP
);

439 
	`GrC›yAªaAÕha
(
°©e
->
ˇnvas
, sèã->
gc
, sèã->
sc‹es
.
a
, 0, 0,

440 
°©e
->
ˇnvaswidth
, sèã->
sc‹es
.
h
, sèã->sc‹es.
p
,

441 0, 0, 
GR_ALPHA_BLEND
);

442 
	}
}

445 
	$døw_powî
(
nb°©e
 *
°©e
, 
powî
 *
p
, 
x
, 
y
, 
w
, 
h
)

447 
•rôe
 *
s
 = 
°©e
->
powî•rôes
[
p
->
ty≥
];

448 
	`GrC›yAªaAÕha
(
°©e
->
ˇnvas
, sèã->
gc
, 
s
->
a
, 
x
,

449 
y
, 
w
, 
h
, 
s
->
p
, 
x
 -Ö->x, y -Ö->y,

450 
GR_ALPHA_BLEND
);

451 
	}
}

454 
	$døw_ˇnvas
(
nb°©e
 *
°©e
, 
x
, 
y
, 
w
, 
h
)

456 
	`GrC›yAªa
(
°©e
->
wid
, sèã->
gc
, 
x
, 
y
, 
w
, 
h
, sèã->
ˇnvas
, x, y, 0);

457 
	}
}

	@demos/nbreaker/dump.c

37 
	~<°dio.h
>

39 
	~<«no-X.h
>

40 
	~"nbªakî.h
"

42 #ifde‡
NB_DEBUG


47 *
	$‚ame
(*
f
)

49  
f
 ? f : "<unnamed>";

50 
	}
}

53 
	$dump_bricks
(
brick
 *
b
)

56 if(!
b
) {

57 
	`¥ötf
("\t<empty>\n");

62 
b
) {

65 
	`¥ötf
("\t\"%c\"", 
b
->
idítifõr
);

68 if(
b
->
s
Ë
	`¥ötf
(" (\"%s\")", 
	`‚ame
(b->s->
‚ame
));

70 if(
b
->
Êags
 & 
BRICK_FLAG_IMMUTABLE
Ë
	`¥ötf
(" Immutable");

71 if(
b
->
Êags
 & 
BRICK_FLAG_2_HITS
Ë
	`¥ötf
(" 2hits");

72 if(
b
->
Êags
 & 
BRICK_FLAG_3_HITS
Ë
	`¥ötf
(" 3hits");

73 if(
b
->
Êags
 & 
BRICK_FLAG_SMALL_BONUS
Ë
	`¥ötf
(" smallbonus");

74 if(
b
->
Êags
 & 
BRICK_FLAG_MEDIUM_BONUS
Ë
	`¥ötf
(" mediumbonus");

75 if(
b
->
Êags
 & 
BRICK_FLAG_LARGE_BONUS
Ë
	`¥ötf
("Üargebonus");

76 if(
b
->
Êags
 & 
BRICK_FLAG_HUGE_BONUS
Ë
	`¥ötf
(" hugebonus");

77 
	`¥ötf
("\n");

78 
b
 = b->
√xt
;

80 
	}
}

84 
	$dump_grid
(
nb°©e
 *
°©e
, 
grid
 *
g
)

86 
grid
 *
gp
;

87 
x
, 
y
;

89 
powîs
[] = " WSTPNFRI";

92 if(!
g
) {

93 
	`¥ötf
("\t<empty>\n");

98 
	`¥ötf
("\tbricks:\n\t\t");

99 
x
 = 0; x < 
°©e
->
width
 + 2; x++Ë
	`putch¨
('-');

100 
	`putch¨
('\n');

102 
gp
 = 
g
;

103 
y
 = 0; y < 
°©e
->
height
; y++) {

104 
	`¥ötf
("\t\t|");

105 
x
 = 0; x < 
°©e
->
width
; x++) {

108 if(!
gp
->
b
Ë
	`putch¨
(' ');

109 
	`putch¨
(
gp
->
b
->
idítifõr
);

110 
gp
++;

112 
	`¥ötf
("|\n");

115 
	`¥ötf
("\t\t");

116 
x
 = 0; x < 
°©e
->
width
 + 2; x++Ë
	`putch¨
('-');

119 
	`¥ötf
("\n\tpowers:\n\t\t");

120 
x
 = 0; x < 
°©e
->
width
 + 2; x++Ë
	`putch¨
('-');

121 
	`putch¨
('\n');

123 
gp
 = 
g
;

124 
y
 = 0; y < 
°©e
->
height
; y++) {

125 
	`¥ötf
("\t\t|");

126 
x
 = 0; x < 
°©e
->
width
; x++) {

128 
	`putch¨
(
powîs
[
gp
->
powî
 + 1]);

129 
gp
++;

131 
	`¥ötf
("|\n");

134 
	`¥ötf
("\t\t");

135 
x
 = 0; x < 
°©e
->
width
 + 2; x++Ë
	`putch¨
('-');

136 
	`putch¨
('\n');

137 
	}
}

140 
	$dump_Àvñs
(
nb°©e
 *
°©e
)

142 
Àvñ
 *
l
;

143 
num
 = 1;

146 
	`¥ötf
("Levels:\n");

147 if(!
°©e
->
Àvñs
) {

148 
	`¥ötf
("\t<empty>\n");

153 
l
 = 
°©e
->
Àvñs
;Ü;Ü =Ü->
√xt
) {

155 
	`¥ötf
("\tLevñ %d\n\éevñ bricks:\n", 
num
++);

157 
	`dump_bricks
(
l
->
bricks
);

159 
	`¥ötf
("\tbackground«mê\"%s\"\n", 
	`‚ame
(
l
->
background«me
));

160 
	`¥ötf
("\tbackgroundtûed = %s\n", 
l
->
backgroundtûed
 ?

162 
	`¥ötf
("\äumbrick†%d\n", 
l
->
numbricks
);

164 
	`dump_grid
(
°©e
, 
l
->
grid
);

166 
	}
}

169 
	$¥öt°©e
(
°©e
)

171 
°©e
) {

172 
STATE_TITLESCREEN
:

173 
	`¥ötf
("STATE_TITLESCREEN\n");

175 
STATE_FADING
:

176 
	`¥ötf
("STATE_FADING\n");

178 
STATE_RUNNING
:

179 
	`¥ötf
("STATE_RUNNING\n");

181 
STATE_GAMEWON
:

182 
	`¥ötf
("STATE_GAMEWON\n");

184 
STATE_GAMELOST
:

185 
	`¥ötf
("STATE_GAMELOST\n");

187 
STATE_FINISHED
:

188 
	`¥ötf
("STATE_FINISHED\n");

191 
	`¥ötf
("unknow¿(%d)\n", 
°©e
);

194 
	}
}

198 
	$dump_°©e
(
nb°©e
 *
°©e
)

200 
i
;

201 
powî
 *
p
;

202 
•rôe
 *
s
;

204 
powîs
[
NUMPOWERS
] = "WSTPNF";

206 *
chóts
[] = { "SolidFloor", "Teleport", "NoBounce",

210 
	`¥ötf
("Printing NanoBreaker Game State\n"

214 
	`¥ötf
("state = ");

215 
	`¥öt°©e
(
°©e
->state);

218 
	`¥ötf
("gamedú = \"%s\"\ngamefûê\"%s\"\n", 
	`‚ame
(
°©e
->
gamedú
),

219 
	`‚ame
(
°©e
->
gamefûe
));

223 
	`¥ötf
("tôÀbackground = \"%s\"\n", 
	`‚ame
(
°©e
->
tôÀbackground
));

224 
	`¥ötf
("tôÀbackgroundtûed = %s\n", 
°©e
->
tôÀbackgroundtûed
 ?

228 
	`¥ötf
("tôÀ•œsh = \"%s\"\n", 
	`‚ame
(
°©e
->
tôÀ•œsh
));

229 
	`¥ötf
("gamew⁄•œsh = \"%s\"\n", 
	`‚ame
(
°©e
->
gamew⁄•œsh
));

230 
	`¥ötf
("gamño°•œsh = \"%s\"\n", 
	`‚ame
(
°©e
->
gamño°•œsh
));

233 
	`¥ötf
("sprites = \n");

234 if(!
°©e
->
•rôñi°
Ë
	`¥ötf
("\t<empty>\n");

235 
s
 = 
°©e
->
•rôñi°
; s; s = s->
√xt
)

236 
	`¥ötf
("\t\"%s\" (%d * %d) is in use %dÅime%s\n",

237 
	`‚ame
(
s
->
‚ame
), s->
w
, s->
h
, s->
ußge
,

238 
s
->
ußge
 > 1 ? "s" : "");

242 
	`¥ötf
("background = ");

243 if(!
°©e
->
background
Ë
	`¥ötf
("none\n");

244 
	`¥ötf
("\"%s\" (%d * %d), %stiled\n",

245 
	`‚ame
(
°©e
->
background
->
‚ame
), sèã->background->
w
,

246 
°©e
->
background
->
h
, sèã->
backgroundtûed
 ? "" : "not ");

251 
	`¥ötf
("normalpoints = %d\nsmallbonuspoints = %d\nmediumbonuspoints = "

254 "√wÀvñbÆl†%d\n", 
°©e
->
n‹mÆpoöts
,

255 
°©e
->
smÆlb⁄u•oöts
, sèã->
mediumb⁄u•oöts
,

256 
°©e
->
œrgeb⁄u•oöts
, sèã->
hugeb⁄u•oöts
,

257 
°©e
->
powîuµoöts
, sèã->
powîdow≈oöts
,

258 
°©e
->
°¨tbÆls
, sèã->
√wÀvñbÆls
);

263 
	`¥ötf
("width = %d\nheight = %d\nbrickwidth = %d\nbrickheight = %d\n"

264 "brickÆph®%d\n", 
°©e
->
width
, sèã->
height
,

265 
°©e
->
brickwidth
, sèã->
brickheight
, sèã->
brickÆpha
);

266 
	`¥ötf
("bricks =\n");

267 
	`dump_bricks
(
°©e
->
bricks
);

271 
	`¥ötf
("batheight = %d\nsmall bat width = %d\nnormal bat width = %d\n"

272 "œrgêb© width = %d\n", 
°©e
->
b©height
,

273 
°©e
->
b©widths
[
SMALLBAT
], sèã->b©widths[
NORMALBAT
],

274 
°©e
->
b©widths
[
LARGEBAT
]);

275 
	`¥ötf
("small bat = ");

276 if(!
°©e
->
b©s
[
SMALLBAT
]Ë
	`¥ötf
("none\n");

277 
	`¥ötf
("\"%s\"\n", 
	`‚ame
(
°©e
->
b©s
[
SMALLBAT
]->
‚ame
));

278 
	`¥ötf
("normal bat = ");

279 if(!
°©e
->
b©s
[
NORMALBAT
]Ë
	`¥ötf
("none\n");

280 
	`¥ötf
("\"%s\"\n", 
	`‚ame
(
°©e
->
b©s
[
NORMALBAT
]->
‚ame
));

281 
	`¥ötf
("large bat = ");

282 if(!
°©e
->
b©s
[
SMALLBAT
]Ë
	`¥ötf
("none\n");

283 
	`¥ötf
("\"%s\"\n", 
	`‚ame
(
°©e
->
b©s
[
LARGEBAT
]->
‚ame
));

284 
	`¥ötf
("current bat = ");

285 
°©e
->
b©
) {

286 
NORMALBAT
:

287 
	`¥ötf
("NORMALBAT\n");

289 
SMALLBAT
:

290 
	`¥ötf
("SMALLBAT\n");

292 
LARGEBAT
:

293 
	`¥ötf
("LARGEBAT\n");

296 
	`¥ötf
("unknow¿(%d)\n", 
°©e
->
b©
);

298 
	`¥ötf
("b©x = %d\nb©v = %d\n", 
°©e
->
b©x
, sèã->
b©v
);

301 
	`¥ötf
("Power sprites:\n");

302 
i
 = 0; i < 
NUMPOWERS
; i++) {

303 
	`¥ötf
("\t%¯", 
powîs
[
i
]);

304 if(
°©e
->
powî•rôes
[
i
])

305 
	`¥ötf
("\"%s\"\n",

306 
	`‚ame
(
°©e
->
powî•rôes
[
i
]->
‚ame
));

307 
	`¥ötf
("<empty>\n");

311 
	`¥ötf
("splash = ");

312 if(!
°©e
->
•œsh
Ë
	`¥ötf
("none\n");

313 
	`¥ötf
("\"%s\" (%d * %d)\n", 
	`‚ame
(
°©e
->
•œsh
->
‚ame
),

314 
°©e
->
•œsh
->
w
, sèã->•œsh->
h
);

317 
	`¥ötf
("powîu±imê%d\≈owîdow¡imê%d\n", 
°©e
->
powîu±ime
,

318 
°©e
->
powîdow¡ime
);

321 
	`¥ötf
("Cheat sequences:\n");

322 
i
 = 0; i < 
NUMCHEATS
; i++) {

323 
	`¥ötf
("\t%†", 
chóts
[
i
]);

324 if(
°©e
->
chóts
[
i
]Ë
	`¥ötf
("\"%s\"\n", state->cheats[i]);

325 
	`¥ötf
("disabled\n");

327 
	`¥ötf
("chót°©ê\"%s\"\n", 
°©e
->
chót°©e
);

328 
	`¥ötf
("SﬁidFlo‹ fœg i†%s\n", 
°©e
->
Êags
.
sf
 ? "active" :

330 
	`¥ötf
("NoBoun˚ fœg i†%s\n", 
°©e
->
Êags
.
nb
 ? "active" :

332 
	`¥ötf
("NoPowîDow¿Êag i†%s\n", 
°©e
->
Êags
.
≈d
 ?

334 
	`¥ötf
("NoPowîUpTimeouàÊag i†%s\n", 
°©e
->
Êags
.
≈uto
 ?

338 
	`¥ötf
("Pau£d fœg i†%s\n", 
°©e
->
Êags
.
∑u£d
 ? "active" :

340 
	`¥ötf
("Le· fœg i†%s\n", 
°©e
->
Êags
.
À·
 ? "active" :

342 
	`¥ötf
("RighàÊag i†%s\n", 
°©e
->
Êags
.
right
 ? "active" :

346 
	`¥ötf
("Àvñ = %d\¬umÀvñ†%d\n", 
°©e
->
Àvñ
, sèã->
numÀvñs
);

351 
	`¥ötf
("wid = %d\nwinx = %d\ncanvas = %d\noldcanvas = %d\n"

353 "ˇnvasheighà%d\n", 
°©e
->
wid
, sèã->
wöx
, sèã->
ˇnvas
,

354 
°©e
->
ﬁdˇnvas
, sèã->
√wˇnvas
, sèã->
tid
,

355 
°©e
->
ˇnvaswidth
, sèã->
ˇnvasheight
);

358 
	`dump_grid
(
°©e
, sèã->
grid
);

361 
	`¥ötf
("numbrick†%d\n", 
°©e
->
numbricks
);

364 
	`¥ötf
("ball = ");

365 if(!
°©e
->
bÆl
.
s
Ë
	`¥ötf
("none\n");

366 
	`¥ötf
("\"%s\" (%d * %d)\n", 
	`‚ame
(
°©e
->
bÆl
.
s
->
‚ame
),

367 
°©e
->
bÆl
.
s
->
w
, sèã->bÆl.s->
h
);

368 
	`¥ötf
("ball x = %f\nball y = %f\nball d = %f\nball v = %d\n"

371 "%d\n", 
°©e
->
bÆl
.
x
, sèã->bÆl.
y
, sèã->bÆl.
d
,

372 
°©e
->
bÆl
.
v
, sèã->bÆl.
lx
, sèã->bÆl.
ly
,

373 
°©e
->
bÆl
.
∑rked
 ? "Yes" : "No", sèã->bÆl.
sv
,

374 
°©e
->
bÆl
.
nv
, sèã->bÆl.
fv
);

377 
	`¥ötf
("currentÖowers:\n");

378 if(!
°©e
->
powîs
Ë
	`¥ötf
("\t<empty>\n");

379 
p
 = 
°©e
->
powîs
;Ö;Ö =Ö->
√xt
)

380 
	`¥ötf
("\t%¯© (%d, %d)\n", 
powîs
[
p
->
ty≥
],Ö->
x
,Ö->
y
);

383 
	`¥ötf
("score = %d\nhiscore = %d\n file hiscore = %d\n"

384 "sc‹êpixm≠ = %d\n", 
°©e
->
sc‹es
.
s
,

385 
°©e
->
sc‹es
.
hi
, sèã->sc‹es.
fhi
, sèã->sc‹es.
p
);

388 
	`¥ötf
("powîv = %d\«nim©ïîiod = %d\n", 
°©e
->
powîv
,

389 
°©e
->
™im©ïîiod
);

392 
	`¥ötf
("œ°™im = %ldS %lduS\n", 
°©e
->
œ°™im
.
tv_£c
,

393 
°©e
->
œ°™im
.
tv_u£c
);

396 
	`¥ötf
("powertimes:\n"

403 
°©e
->
powîtimes
.
wideb©
,

404 
°©e
->
powîtimes
.
¶owmŸi⁄
,

405 
°©e
->
powîtimes
.
°ickyb©
,

406 
°©e
->
powîtimes
.
powîbÆl
,

407 
°©e
->
powîtimes
.
«ºowb©
,

408 
°©e
->
powîtimes
.
Á°mŸi⁄
);

411 
	`¥ötf
("Ádî©ê%d\nÁdñevñ = %d\n", 
°©e
->
Ádî©e
,

412 
°©e
->
Ádñevñ
);

415 
	`¥ötf
("nextstate = ");

416 
	`¥öt°©e
(
°©e
->
√xt°©e
);

419 
	`dump_Àvñs
(
°©e
);

420 
	}
}

	@demos/nbreaker/event.c

36 
	~<°dio.h
>

37 
	~<°dlib.h
>

39 
	~<«no-X.h
>

40 
	~<nxcﬁ‹s.h
>

41 
	~"nbªakî.h
"

47 
	$a˘i⁄_¥es£d
(
nb°©e
 *
°©e
)

49 if(
°©e
->°©ê=
STATE_TITLESCREEN
Ë
	`ö¸emít_Àvñ
(state);

50 if(
°©e
->°©ê=
STATE_GAMEWON
 ||

51 
°©e
->°©ê=
STATE_GAMELOST
)

52 
	`ª£t_game
(
°©e
);

53 
°©e
->
bÆl
.
∑rked
 = 0;

54 
	}
}

59 
	$h™dÀ_exposuª_evít
(
nb°©e
 *
°©e
, 
GR_EVENT_EXPOSURE
 *
ev
)

61 
	`døw_ˇnvas
(
°©e
, 
ev
->
x
,Év->
y
,Év->
width
,Év->
height
);

62 
	}
}

65 
	$h™dÀ_buâ⁄_evít
(
nb°©e
 *
°©e
, 
GR_EVENT_BUTTON
 *
ev
)

67 
	`a˘i⁄_¥es£d
(
°©e
);

68 
	}
}

71 
	$h™dÀ_mou£_evít
(
nb°©e
 *
°©e
, 
GR_EVENT_MOUSE
 *
ev
)

73 
	`move_b©
(
°©e
, 
ev
->
x
 - sèã->
wöx
);

74 
	}
}

77 
	$h™dÀ_key°roke_evít
(
nb°©e
 *
°©e
, 
GR_EVENT_KEYSTROKE
 *
ev
)

82 if(
ev
->
ty≥
 =
GR_EVENT_TYPE_KEY_UP
) {

83 
ev
->
ch
) {

84 
MWKEY_LEFT
:

85 
°©e
->
Êags
.
À·
 = 0;

87 
MWKEY_RIGHT
:

88 
°©e
->
Êags
.
right
 = 0;

99 
ev
->
ch
) {

101 
	`a˘i⁄_¥es£d
(
°©e
);

103 
MWKEY_F1
:

104 
°©e
->
Êags
.
∑u£d
 ^= 1;

106 
MWKEY_F2
:

107 
	`lo°_bÆl
(
°©e
);

109 #ifde‡
DEBUG_POWERS


113 
MWKEY_F3
:

114 
	`a˘iv©e_wideb©
(
°©e
);

116 
MWKEY_F4
:

117 
	`a˘iv©e_¶owmŸi⁄
(
°©e
);

119 
MWKEY_F5
:

120 
	`a˘iv©e_°ickyb©
(
°©e
);

122 
MWKEY_F6
:

123 
	`a˘iv©e_powîbÆl
(
°©e
);

125 
MWKEY_F7
:

126 
	`a˘iv©e_«ºowb©
(
°©e
);

128 
MWKEY_F8
:

129 
	`a˘iv©e_Á°mŸi⁄
(
°©e
);

132 
MWKEY_LEFT
:

135 
°©e
->
Êags
.
À·
 = 1;

136 
°©e
->
Êags
.
right
 = 0;

138 
MWKEY_RIGHT
:

141 
°©e
->
Êags
.
À·
 = 0;

142 
°©e
->
Êags
.
right
 = 1;

144 #ifde‡
NB_DEBUG


147 
MWKEY_F10
:

148 
	`dump_°©e
(
°©e
);

153 
MWKEY_ESCAPE
:

158 
	`do_chót
(
°©e
, 
ev
->
ch
);

163 
	}
}

170 
	$h™dÀ_upd©e_evít
(
nb°©e
 *
°©e
, 
GR_EVENT_UPDATE
 *
ev
)

172 
°©e
->
wöx
 = 
ev
->
roŸx
;

173 
	}
}

178 
	$h™dÀ_timî_evít
(
nb°©e
 *
°©e
, 
GR_EVENT_TIMER
 *
ev
)

180 
	`do_powî_timîs
(
°©e
);

181 
	}
}

	@demos/nbreaker/game.c

36 
	~<°dio.h
>

37 
	~<°dlib.h
>

38 
	~<°rög.h
>

40 
	~<«no-X.h
>

41 
	~<nxcﬁ‹s.h
>

42 
	~"nbªakî.h
"

45 
	$ª£t_game
(
nb°©e
 *
°©e
)

48 
°©e
->°©ê
STATE_TITLESCREEN
;

49 
°©e
->
Àvñ
 = 0;

50 
°©e
->
sc‹es
.
s
 = 0;

51 
°©e
->
numbÆls
 = sèã->
°¨tbÆls
;

52 
	`∑rk_bÆl
(
°©e
);

54 
°©e
->
powîtimes
.
wideb©
 = 0;

55 
°©e
->
powîtimes
.
¶owmŸi⁄
 = 0;

56 
°©e
->
powîtimes
.
°ickyb©
 = 0;

57 
°©e
->
powîtimes
.
powîbÆl
 = 0;

58 
°©e
->
powîtimes
.
«ºowb©
 = 0;

59 
°©e
->
powîtimes
.
Á°mŸi⁄
 = 0;

61 
°©e
->
b©
 = 
NORMALBAT
;

63 
°©e
->
bÆl
.
v
 = sèã->bÆl.
nv
;

65 
	`£t_Àvñ_a˘ive
(
°©e
);

66 
	}
}

	@demos/nbreaker/init.c

36 
	~<°dio.h
>

37 
	~<°rög.h
>

38 
	~<°dlib.h
>

40 
	~<«no-X.h
>

41 
	~<nxcﬁ‹s.h
>

42 
	~"nbªakî.h
"

45 
	$ußge
()

47 
	`Ârötf
(
°dîr
, "Usage:Çbreaker [ -d game-dir ] [ game-file ]\n");

48 
	}
}

51 
	$∑r£_cmd_¨gs
(
nb°©e
 *
°©e
, 
¨gc
, *
¨gv
[])

53 
i
;

56 
i
 = 1; i < 
¨gc
; i++) {

59 if(*
¨gv
[
i
] !'-'Ë
°©e
->
gamefûe
 =árgv[i];

60 if(
¨gv
[
i
][1] == 'd') {

64 if(++
i
 < 
¨gc
Ë
°©e
->
gamedú
 = 
¨gv
[i];

66 
	`ußge
();

72 
	`ußge
();

77 
	}
}

80 
	$£tup_deÁu…_°©e
(
nb°©e
 *
°©e
)

82 
i
;

83 
GR_FONT_ID
 
fid
;

84 
GR_FONT_INFO
 
fi
;

86 
°©e
->°©ê
STATE_TITLESCREEN
;

87 
°©e
->
gamedú
 = 
DEFAULT_GAME_DIR
;

88 
°©e
->
gamefûe
 = 
DEFAULT_GAME_FILE
;

89 
°©e
->
tôÀbackground
 = 
NULL
;

90 
°©e
->
tôÀbackgroundtûed
 = 
DEFAULT_BACKGROUND_TILED
;

91 
°©e
->
tôÀ•œsh
 = 
NULL
;

92 
°©e
->
gamew⁄•œsh
 = 
NULL
;

93 
°©e
->
gamño°•œsh
 = 
NULL
;

94 
°©e
->
•rôñi°
 = 
NULL
;

95 
°©e
->
background
 = 
NULL
;

96 
°©e
->
backgroundtûed
 = 1;

97 
°©e
->
n‹mÆpoöts
 = 
DEFAULT_NORMALPOINTS
;

98 
°©e
->
smÆlb⁄u•oöts
 = 
DEFAULT_SMALLBONUSPOINTS
;

99 
°©e
->
mediumb⁄u•oöts
 = 
DEFAULT_MEDIUMBONUSPOINTS
;

100 
°©e
->
œrgeb⁄u•oöts
 = 
DEFAULT_LARGEBONUSPOINTS
;

101 
°©e
->
hugeb⁄u•oöts
 = 
DEFAULT_HUGEBONUSPOINTS
;

102 
°©e
->
powîuµoöts
 = 
DEFAULT_POWERUPPOINTS
;

103 
°©e
->
powîdow≈oöts
 = 
DEFAULT_POWERDOWNPOINTS
;

104 
°©e
->
°¨tbÆls
 = 
DEFAULT_STARTBALLS
;

105 
°©e
->
√wÀvñbÆls
 = 
DEFAULT_NEWLEVELBALLS
;

106 
°©e
->
brickwidth
 = 
DEFAULT_BRICK_WIDTH
;

107 
°©e
->
brickheight
 = 
DEFAULT_BRICK_HEIGHT
;

108 
°©e
->
bricks
 = 
NULL
;

109 
°©e
->
brickÆpha
 = 0;

110 
°©e
->
width
 = 
DEFAULT_WIDTH
;

111 
°©e
->
height
 = 
DEFAULT_HEIGHT
;

112 
°©e
->
b©height
 = 
DEFAULT_BAT_HEIGHT
;

113 
°©e
->
b©widths
[
NORMALBAT
] = 
DEFAULT_NORMALBAT_WIDTH
;

114 
°©e
->
b©widths
[
SMALLBAT
] = 
DEFAULT_SMALLBAT_WIDTH
;

115 
°©e
->
b©widths
[
LARGEBAT
] = 
DEFAULT_LARGEBAT_WIDTH
;

116 
i
 = 0; i < 
NUMBATS
; i++Ë
°©e
->
b©s
[i] = 
NULL
;

117 
°©e
->
b©
 = 
NORMALBAT
;

118 
°©e
->
b©x
 = 0;

119 
°©e
->
b©v
 = 
DEFAULT_BAT_VELOCITY
;

120 
°©e
->
powîv
 = 
DEFAULT_POWER_VELOCITY
;

121 
°©e
->
™im©ïîiod
 = 
DEFAULT_ANIMATE_PERIOD
;

122 
i
 = 0; i < 
NUMPOWERS
; i++Ë
°©e
->
powî•rôes
[i] = 
NULL
;

123 
°©e
->
•œsh
 = 
NULL
;

124 
°©e
->
powîu±ime
 = 
DEFAULT_POWERUP_TIME
;

125 
°©e
->
powîdow¡ime
 = 
DEFAULT_POWERDOWN_TIME
;

126 
i
 = 0; i < 
NUMCHEATS
; i++Ë
°©e
->
chóts
[i] = 
NULL
;

127 
	`mem£t
(
°©e
->
chót°©e
, 0, 
MAXCHEATLEN
 + 1);

128 
°©e
->
Êags
.
sf
 = 0;

129 
°©e
->
Êags
.
nb
 = 0;

130 
°©e
->
Êags
.
≈d
 = 0;

131 
°©e
->
Êags
.
≈uto
 = 0;

132 
°©e
->
Êags
.
∑u£d
 = 0;

133 
°©e
->
Êags
.
À·
 = 0;

134 
°©e
->
Êags
.
right
 = 0;

135 
°©e
->
Àvñs
 = 
NULL
;

136 
°©e
->
Àvñ
 = 0;

137 
°©e
->
numÀvñs
 = 0;

138 
°©e
->
wid
 = 0;

139 
°©e
->
wöx
 = 0;

140 
°©e
->
ˇnvas
 = 0;

141 
°©e
->
ˇnvaswidth
 = 0;

142 
°©e
->
ˇnvasheight
 = 0;

143 
°©e
->
grid
 = 
NULL
;

144 
°©e
->
numbricks
 = 0;

145 
°©e
->
powîs
 = 
NULL
;

146 
°©e
->
sc‹es
.
s
 = 0;

147 
°©e
->
sc‹es
.
hi
 = 0;

148 
°©e
->
sc‹es
.
fhi
 = 0;

149 
°©e
->
sc‹es
.
p
 = 0;

150 
°©e
->
gc
 = 
	`GrNewGC
();

151 
fid
 = 
	`GrCª©eF⁄t
(
SCORE_FONT
, 0, 
NULL
);

152 
	`GrGëF⁄tInfo
(
fid
, &
fi
);

153 
°©e
->
sc‹es
.
h
 = (2 * 
SCORE_BORDER
Ë+ 
fi
.
height
;

154 
	`GrSëGCF⁄t
(
°©e
->
gc
, 
fid
);

155 
°©e
->
bÆl
.
x
 = 0;

156 
°©e
->
bÆl
.
y
 = 0;

157 
°©e
->
bÆl
.
d
 = 0;

158 
°©e
->
bÆl
.
v
 = 
DEFAULT_NORMAL_BALL_VELOCITY
;

159 
°©e
->
bÆl
.
lx
 = 0;

160 
°©e
->
bÆl
.
ly
 = 0;

161 
°©e
->
bÆl
.
∑rked
 = 1;

162 
°©e
->
bÆl
.
s
 = 
NULL
;

163 
°©e
->
bÆl
.
sv
 = 
DEFAULT_SLOW_BALL_VELOCITY
;

164 
°©e
->
bÆl
.
nv
 = 
DEFAULT_NORMAL_BALL_VELOCITY
;

165 
°©e
->
bÆl
.
fv
 = 
DEFAULT_FAST_BALL_VELOCITY
;

166 
°©e
->
numbÆls
 = 0;

167 
	`gëtimeofday
(&
°©e
->
œ°™im
, 
NULL
);

168 
°©e
->
powîtimes
.
wideb©
 = 0;

169 
°©e
->
powîtimes
.
¶owmŸi⁄
 = 0;

170 
°©e
->
powîtimes
.
°ickyb©
 = 0;

171 
°©e
->
powîtimes
.
powîbÆl
 = 0;

172 
°©e
->
powîtimes
.
«ºowb©
 = 0;

173 
°©e
->
powîtimes
.
Á°mŸi⁄
 = 0;

174 
°©e
->
Ádî©e
 = 
DEFAULT_FADERATE
;

175 
°©e
->
Ádñevñ
 = 0;

176 
°©e
->
√xt°©e
 = 
STATE_TITLESCREEN
;

177 
	}
}

180 
nb°©e
 *
	$öô
(
¨gc
, *
¨gv
[])

182 
GR_PROP
 *
¥›
;

183 
nb°©e
 *
°©e
;

184 
GR_SCREEN_INFO
 
si
;

185 
GR_BITMAP
 
curs‹
 = 0;

186 
GR_WM_PROPERTIES
 
¥›s
;

189 if(
	`GrO≥n
() < 1) {

190 
	`Ârötf
(
°dîr
, "Couldn't connectÅo Nano-X server\n");

191  
NULL
;

196 
	`GrGëS¸ìnInfo
(&
si
);

197 if(!
si
.
ÆphabÀnd
) {

198 
	`Ârötf
(
°dîr
, "Error: Nano-X server was built withoutálpha "

201  
NULL
;

205 if(!(
°©e
 = 
	`mÆloc
((
nb°©e
)))Ë 
NULL
;

206 
	`£tup_deÁu…_°©e
(
°©e
);

209 if(
	`∑r£_cmd_¨gs
(
°©e
, 
¨gc
, 
¨gv
)) {

210 
	`‰ì
(
°©e
);

211  
NULL
;

215 if(
	`lﬂd_game_fûe
(
°©e
)) {

216 
	`‰ì
(
°©e
);

217  
NULL
;

221 
	`lﬂd_hisc‹e
(
°©e
);

224 
°©e
->
ˇnvaswidth
 = sèã->
width
 * sèã->
brickwidth
;

225 
°©e
->
ˇnvasheight
 = sèã->
sc‹es
.
h
 + sèã->
bÆl
.
s
->h +

226 (2 * 
BALLS_BORDER
) +

227 (
°©e
->
height
 * sèã->
brickheight
) +

228 3 * 
°©e
->
brickheight
 + sèã->
b©height
;

231 
°©e
->
b©x
 = sèã->
ˇnvaswidth
 / 2;

234 
°©e
->
sc‹es
.
p
 = 
	`GrNewPixm≠
(°©e->
ˇnvaswidth
, sèã->sc‹es.
h
,

235 
NULL
);

236 
°©e
->
sc‹es
.
a
 = 
	`GrNewAÕha
(°©e->
ˇnvaswidth
, sèã->sc‹es.
h
);

237 
°©e
->
ˇnvas
 = 
	`GrNewPixm≠
(°©e->
ˇnvaswidth
, sèã->
ˇnvasheight
,

238 
NULL
);

241 if(
°©e
->
Ádî©e
) {

242 
°©e
->
√wˇnvas
 = 
	`GrNewPixm≠
(°©e->
ˇnvaswidth
,

243 
°©e
->
ˇnvasheight
, 
NULL
);

244 
°©e
->
ﬁdˇnvas
 = 
	`GrNewPixm≠
(°©e->
ˇnvaswidth
,

245 
°©e
->
ˇnvasheight
, 
NULL
);

247 
°©e
->
brickÆpha
 = 
	`GrNewAÕha
(°©e->
brickwidth
, sèã->
brickheight
);

250 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
GR_COLOR_BLACK
);

251 
	`GrFûlRe˘
(
°©e
->
ˇnvas
, sèã->
gc
, 0, 0, sèã->
ˇnvaswidth
,

252 
°©e
->
ˇnvasheight
);

258 if(
	`GrGëWödowPr›îty
(
GR_ROOT_WINDOW_ID
, "WINDOW_MANAGER", &
¥›
)) {

259 
	`‰ì
(
¥›
);

260 
°©e
->
wöx
 = 
GR_OFF_SCREEN
;

264 
°©e
->
wid
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, sèã->
wöx
, 0,

265 
°©e
->
ˇnvaswidth
, sèã->
ˇnvasheight
, 0, 0, 0);

268 
¥›s
.
Êags
 = 
GR_WM_FLAGS_TITLE
;

269 
¥›s
.
tôÀ
 = "NanoBreaker";

270 
	`GrSëWMPr›îtõs
(
°©e
->
wid
, &
¥›s
);

273 
	`GrSëCurs‹
(
°©e
->
wid
, 1, 1, 1, 1, 0, 0, &
curs‹
, &cursor);

276 
	`GrSñe˘Evíts
(
°©e
->
wid
, 
GR_EVENT_MASK_CLOSE_REQ
 |

277 
GR_EVENT_MASK_EXPOSURE
 |

278 
GR_EVENT_MASK_BUTTON_DOWN
 |

279 
GR_EVENT_MASK_KEY_DOWN
 |

280 
GR_EVENT_MASK_KEY_UP
 |

281 
GR_EVENT_MASK_UPDATE
 |

282 
GR_EVENT_MASK_TIMER
);

288 
	`GrSñe˘Evíts
(
GR_ROOT_WINDOW_ID
, 
GR_EVENT_MASK_MOUSE_POSITION
);

291 
	`GrM≠Wödow
(
°©e
->
wid
);

295 
°©e
->
tid
 = 
	`GrCª©eTimî
(°©e->
wid
, 1000, 
GR_TRUE
);

298 
	`ª£t_game
(
°©e
);

300  
°©e
;

301 
	}
}

	@demos/nbreaker/levels.c

36 
	~<°dio.h
>

37 
	~<°dlib.h
>

38 
	~<°rög.h
>

40 
	~<«no-X.h
>

41 
	~<nxcﬁ‹s.h
>

42 
	~"nbªakî.h
"

45 
	$ö¸emít_Àvñ
(
nb°©e
 *
°©e
)

48 if(
°©e
->
Àvñ
 =°©e->
numÀvñs
) {

50 
°©e
->°©ê
STATE_GAMEWON
;

52 
	`ßve_hisc‹e
(
°©e
);

55 if(
°©e
->°©ê=
STATE_TITLESCREEN
) {

56 
°©e
->°©ê
STATE_RUNNING
;

59 } 
°©e
->
numbÆls
 +°©e->
√wÀvñbÆls
;

60 
°©e
->
Àvñ
++;

63 
	`∑rk_bÆl
(
°©e
);

65 
	`£t_Àvñ_a˘ive
(
°©e
);

66 
	}
}

73 
	$£t_Àvñ_a˘ive
(
nb°©e
 *
°©e
)

75 
i
;

76 
Àvñ
 *
Àv
;

77 
grid
 *
g
, *
gg
;

78 
bgch™ged
;

79 
•rôe
 *
s
 = 
NULL
;

80 
powî
 *
p
, *
≤ext
;

81 
GR_PIXMAP_ID
 
˘mp
;

82 *
backgroundfûe
;

85 
	`de°roy_•rôe
(
°©e
, sèã->
•œsh
);

88 if(
°©e
->°©ê=
STATE_TITLESCREEN
) {

90 
backgroundfûe
 = 
°©e
->
tôÀbackground
;

92 
°©e
->
backgroundtûed
 = sèã->
tôÀbackgroundtûed
;

96 
°©e
->
•œsh
 = 
	`lﬂd_•rôe
(°©e, sèã->
tôÀ•œsh
, -1, -1);

99 
Àv
 = 
°©e
->
Àvñs
, 
i
 = 1; i < sèã->
Àvñ
;

100 
Àv
 =Üev->
√xt
, 
i
++);

102 
°©e
->
numbricks
 = 
Àv
->numbricks;

103 
backgroundfûe
 = 
Àv
->
background«me
;

104 
°©e
->
backgroundtûed
 = 
Àv
->backgroundtiled;

107 if(
°©e
->°©ê=
STATE_GAMEWON
) {

108 
°©e
->
•œsh
 = 
	`lﬂd_•rôe
(°©e, sèã->
gamew⁄•œsh
,

112 } if(
°©e
->°©ê=
STATE_GAMELOST
) {

113 
°©e
->
•œsh
 = 
	`lﬂd_•rôe
(state,

114 
°©e
->
gamño°•œsh
, -1, -1);

117 
°©e
->
•œsh
 = 
NULL
;

120 
g
 = 
°©e
->
grid
;

121 
gg
 = 
Àv
->
grid
;

122 
i
 = 0; i < 
°©e
->
width
 * sèã->
height
; i++)

123 *
g
++ = *
gg
++;

128 if(
backgroundfûe
) {

133 if(
°©e
->
background
 && sèã->background->
‚ame
 &&

134 !
	`°rcmp
(
backgroundfûe
,

135 
°©e
->
background
->
‚ame
))

136 
bgch™ged
 = 0;

137 
bgch™ged
 = 1;

140 } 
bgch™ged
 = 1;

143 if(
bgch™ged
 && !(
s
 = 
	`lﬂd_•rôe
(
°©e
, 
backgroundfûe
, -1, -1))) {

149 if(!(
s
 = 
	`make_em±y_•rôe
(
°©e
, 
backgroundfûe
, 16, 16))) {

153 
s
 = 
°©e
->
background
;

156 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
GR_COLOR_BLACK
);

157 
	`GrFûlRe˘
(
s
->
p
, 
°©e
->
gc
, 0, 0, 16, 16);

161 
°©e
->
backgroundtûed
 = 1;

166 if(
bgch™ged
 && 
s
 !
°©e
->
background
) {

168 
	`de°roy_•rôe
(
°©e
, sèã->
background
);

170 
°©e
->
background
 = 
s
;

174 
p
 = 
°©e
->
powîs
;Ö;Ö = 
≤ext
) {

175 
≤ext
 = 
p
->
√xt
;

176 
	`‰ì
(
p
);

178 
°©e
->
powîs
 = 
NULL
;

184 if(
°©e
->
Ádî©e
) {

186 
˘mp
 = 
°©e
->
ﬁdˇnvas
;

187 
°©e
->
ﬁdˇnvas
 = sèã->
ˇnvas
;

188 
°©e
->
ˇnvas
 = 
˘mp
;

191 
°©e
->
√xt°©e
 = state->state;

194 
°©e
->°©e
STATE_FADING
;

197 
°©e
->
Ádñevñ
 = 256;

201 
	`døw_background
(
°©e
, 0, 0, sèã->
ˇnvaswidth
, sèã->
ˇnvasheight
);

204 if(
°©e
->°©ê!
STATE_TITLESCREEN
 && !(°©e->°©ê=
STATE_FADING


205 && 
°©e
->
√xt°©e
 =
STATE_TITLESCREEN
)) {

207 
	`døw_bricks
(
°©e
, 0, 0, sèã->
ˇnvaswidth
,

208 
°©e
->
ˇnvasheight
);

209 
	`døw_sc‹es
(
°©e
);

210 
	`døw_bÆls
(
°©e
);

211 
	`døw_b©
(
°©e
);

213 if(
°©e
->°©ê!
STATE_GAMELOST
 &&

214 
°©e
->°©ê!
STATE_GAMEWON
)

215 
	`døw_bÆl
(
°©e
);

218 
	`døw_•œsh
(
°©e
);

222 if(
°©e
->°©ê=
STATE_FADING
) {

225 
˘mp
 = 
°©e
->
√wˇnvas
;

226 
°©e
->
√wˇnvas
 = sèã->
ˇnvas
;

227 
°©e
->
ˇnvas
 = 
˘mp
;

230 
°©e
->
Ádñevñ
 -°©e->
Ádî©e
;

233 
	`GrC›yAªa
(
°©e
->
ˇnvas
, sèã->
gc
, 0, 0, sèã->
ˇnvaswidth
,

234 
°©e
->
ˇnvasheight
, sèã->
√wˇnvas
, 0, 0, 0);

235 
	`GrC›yAªa
(
°©e
->
ˇnvas
, sèã->
gc
, 0, 0, sèã->
ˇnvaswidth
,

236 
°©e
->
ˇnvasheight
, sèã->
ﬁdˇnvas
, 0, 0,

237 
GR_CONST_BLEND
 | 
°©e
->
Ádñevñ
);

241 
	`døw_ˇnvas
(
°©e
, 0, 0, sèã->
ˇnvaswidth
, sèã->
ˇnvasheight
);

242 
	}
}

	@demos/nbreaker/loader.c

37 
	~<°dio.h
>

38 
	~<î∫o.h
>

39 
	~<˘y≥.h
>

40 
	~<°dlib.h
>

41 
	~<°rög.h
>

42 
	~<uni°d.h
>

44 
	~<«no-X.h
>

45 
	~<nxcﬁ‹s.h
>

47 
	~"nbªakî.h
"

51 
	$ªdeföew¨nög
(*
«me
, 
löe
, *
gamefûe
)

53 
	`Ârötf
(
°dîr
, "Warning:Ñedefining %s onÜine %d of game file "

54 "\"%s\"\n", 
«me
, 
löe
, 
gamefûe
);

55 
	}
}

59 
	$nŸöÀvblockîr
(*
«me
, 
löe
, *
gamefûe
)

61 
	`Ârötf
(
°dîr
, "Error: %s whileÇot ináÜevel block on "

62 "löê%d o‡gamêfûê\"%s\"\n", 
«me
, 
löe
, 
gamefûe
);

63 
	}
}

69 
	$∑r£_rows
(
nb°©e
 *
°©e
, 
Àvñ
 *
Àv
, 
FILE
 *
Â
, *
löe
)

71 
brick
 *
b
;

72 
x
, 
y
;

73 
buf
[256], *
p
;

74 
grid
 *
g
 = 
Àv
->grid;

75 
°¨éöe
 = *
löe
;

77 
y
 = 0;

80 
	`fgës
(
buf
, 256, 
Â
)) {

82 
x
 = 0;

83 *
löe
 = *line + 1;

86 if(!(
p
 = 
	`°rchr
(
buf
, '\n'))) {

89 
	`Ârötf
(
°dîr
, "TooÜongÜine onÜine %d of game file "

90 "\"%s\"\n", *
löe
, 
°©e
->
gamefûe
);

93 *
p
 = 0;

96 if(!
	`memcmp
(
buf
, "EndRows", 7))  0;

99 if(
y
 =
°©e
->
height
) {

101 
	`Ârötf
(
°dîr
, "Too manyÑows inÜevel definition on"

103 *
löe
, 
°©e
->
gamefûe
);

108 
p
 = 
buf
; *p;Ö++) {

112 if(++
x
 > 
°©e
->
width
) {

113 
	`Ârötf
(
°dîr
, "Error:ÑowÅooÜong onÜine "

115 *
löe
, 
°©e
->
gamefûe
,

116 
°©e
->
width
);

120 if(*
p
 =' 'Ë
b
 = 
NULL
;

124 
b
 = 
°©e
->
bricks
; b && b->
idítifõr
 !*
p
;

125 
b
 = b->
√xt
);

127 if(!
b
) {

131 
b
 = 
Àv
->
bricks
; b &&

132 
b
->
idítifõr
 !*
p
;

133 
b
 = b->
√xt
);

136 if(!
b
) {

139 
	`Ârötf
(
°dîr
, "Error: undefined brick"

141 "fûê\"%s\"\n", *
p
, *
löe
,

142 
°©e
->
gamefûe
);

151 if(
b
 && !(b->
Êags
 & 
BRICK_FLAG_IMMUTABLE
))

152 
Àv
->
numbricks
++;

155 
g
->
b
 = b;

156 
g
++;

158 
g
 +
°©e
->
width
 - 
x
;

159 
y
++;

166 if(
	`„of
(
Â
)) {

167 
	`Ârötf
(
°dîr
, "Error:ÖrematureÉnd of file insideÑows "

169 "\"%s\"\n", 
°¨éöe
, 
°©e
->
gamefûe
);

170 } 
	`Ârötf
(
°dîr
, "ErrorÑeading from game file \"%s\": %s\n",

171 
°©e
->
gamefûe
, 
	`°ªº‹
(
î∫o
));

173 
	}
}

175 
	$∑r£_powîs
(
nb°©e
 *
°©e
, 
Àvñ
 *
Àv
, 
FILE
 *
Â
, *
löe
)

177 
x
, 
y
, 
i
;

178 
buf
[256], *
p
;

179 
grid
 *
g
 = 
Àv
->grid;

180 
°¨éöe
 = *
löe
;

181 
powîs
[] = " WSTPNF";

183 
y
 = 0;

186 
	`fgës
(
buf
, 256, 
Â
)) {

188 
x
 = 0;

189 *
löe
 = *line + 1;

192 if(!(
p
 = 
	`°rchr
(
buf
, '\n'))) {

195 
	`Ârötf
(
°dîr
, "TooÜongÜine onÜine %d of game file "

196 "\"%s\"\n", *
löe
, 
°©e
->
gamefûe
);

199 *
p
 = 0;

202 if(!
	`memcmp
(
buf
, "EndPowers", 9))

206 if(
y
 =
°©e
->
height
) {

208 
	`Ârötf
(
°dîr
, "Too manyÑows inÜevel definition on"

210 *
löe
, 
°©e
->
gamefûe
);

215 
p
 = 
buf
; *p;Ö++) {

219 if(++
x
 > 
°©e
->
width
) {

220 
	`Ârötf
(
°dîr
, "Error:ÑowÅooÜong onÜine "

222 *
löe
, 
°©e
->
gamefûe
,

223 
°©e
->
width
);

228 
i
 = 0; 
powîs
[i] &&Öowîs[i] !*
p
; i++);

232 if(!
powîs
[
i
]) {

233 
	`Ârötf
(
°dîr
, "Error: invalidÖower \"%c\" "

235 *
p
, *
löe
, 
°©e
->
gamefûe
);

240 
g
->
powî
 = 
i
 - 1;

241 
g
++;

243 
g
 +
°©e
->
width
 - 
x
;

244 
y
++;

251 if(
	`„of
(
Â
)) {

252 
	`Ârötf
(
°dîr
, "Error:ÖrematureÉnd of file insideÖowers "

254 "\"%s\"\n", 
°¨éöe
, 
°©e
->
gamefûe
);

255 } 
	`Ârötf
(
°dîr
, "ErrorÑeading from game file \"%s\": %s\n",

256 
°©e
->
gamefûe
, 
	`°ªº‹
(
î∫o
));

258 
	}
}

261 
	$∑r£_brick
(
nb°©e
 *
°©e
, 
öÀvñ
, 
Àvñ
 *
Àv
, 
löe
,

262 *
buf
)

264 
i
;

265 *
Êags
, 
f
;

266 
brick
 *
b
 = 
NULL
;

270 
b
 = 
°©e
->
bricks
; b && b->
idítifõr
 !*
buf
; b = b->
√xt
);

274 if(!
b
 && 
öÀvñ
)

275 
b
 = 
Àv
->
bricks
; b && b->
idítifõr
 !*
buf
; b = b->
√xt
);

279 if(
b
) {

280 
	`Ârötf
(
°dîr
, "Warning: ignoring duplicate brick definition "

281 "⁄Üöê%d o‡gamêfûê\"%s\"\n", 
löe
,

282 
°©e
->
gamefûe
);

287 if(!(
b
 = 
	`mÆloc
((
brick
)))) {

288 
	`oom
();

292 
b
->
idítifõr
 = *
buf
;

294 
buf
 += 2;

301 if((
Êags
 = 
	`°rchr
(
buf
, ' '))) *flags++ = 0;

303 
b
->
Êags
 = 0;

306 if(
Êags
) {

308 (
f
 = *
Êags
++)) {

310 if(
f
 ='I'Ë
b
->
Êags
 |
BRICK_FLAG_IMMUTABLE
;

311 if(
f
 ='2'Ë
b
->
Êags
 |
BRICK_FLAG_2_HITS
;

312 if(
f
 ='3'Ë
b
->
Êags
 |
BRICK_FLAG_3_HITS
;

313 if(
f
 ='S'Ë
b
->
Êags
 |
BRICK_FLAG_SMALL_BONUS
;

314 if(
f
 ='M'Ë
b
->
Êags
 |
BRICK_FLAG_MEDIUM_BONUS
;

315 if(
f
 ='L'Ë
b
->
Êags
 |
BRICK_FLAG_LARGE_BONUS
;

316 if(
f
 ='H'Ë
b
->
Êags
 |
BRICK_FLAG_HUGE_BONUS
;

320 
	`Ârötf
(
°dîr
, "Warning: ignoring invalid "

323 "o‡gamêfûê\"%s\"\n", 
f
,

324 
b
->
idítifõr
, 
löe
,

325 
°©e
->
gamefûe
);

332 
i
 = 0;

333 if(
b
->
Êags
 & 
BRICK_FLAG_IMMUTABLE
Ë
i
++;

334 if(
b
->
Êags
 & 
BRICK_FLAG_2_HITS
Ë
i
++;

335 if(
b
->
Êags
 & 
BRICK_FLAG_3_HITS
Ë
i
++;

338 if(
i
 > 1) {

339 
	`Ârötf
(
°dîr
, "Warning: brick flags I, 2,ánd 3áre mutually "

341 "gamêfûê\"%s\")\n", 
b
->
idítifõr
, 
löe
,

342 
°©e
->
gamefûe
);

343 
b
->
Êags
 &~(
BRICK_FLAG_IMMUTABLE
 | 
BRICK_FLAG_2_HITS
 |

344 
BRICK_FLAG_3_HITS
);

349 
i
 = 0;

350 if(
b
->
Êags
 & 
BRICK_FLAG_SMALL_BONUS
Ë
i
++;

351 if(
b
->
Êags
 & 
BRICK_FLAG_MEDIUM_BONUS
Ë
i
++;

352 if(
b
->
Êags
 & 
BRICK_FLAG_LARGE_BONUS
Ë
i
++;

353 if(
b
->
Êags
 & 
BRICK_FLAG_HUGE_BONUS
Ë
i
++;

356 if(
i
 > 1) {

357 
	`Ârötf
(
°dîr
, "Warning: brick flags S, M, L,ánd Háre "

359 "%d o‡gamêfûê\"%s\")\n", 
b
->
idítifõr
,

360 
löe
, 
°©e
->
gamefûe
);

361 
b
->
Êags
 &~(
BRICK_FLAG_SMALL_BONUS
 | 
BRICK_FLAG_LARGE_BONUS
 |

362 
BRICK_FLAG_MEDIUM_BONUS
 | 
BRICK_FLAG_HUGE_BONUS
);

366 if(!(
b
->
s
 = 
	`lﬂd_•rôe
(
°©e
, 
buf
, sèã->
brickwidth
,

367 
°©e
->
brickheight
))) {

369 if(!(
b
->
s
 = 
	`make_em±y_•rôe
(
°©e
, 
buf
, sèã->
brickwidth
,

370 
°©e
->
brickheight
))) {

373 
	`Ârötf
(
°dîr
, "Error: failedÅo create brick "

375 
löe
, 
°©e
->
gamefûe
);

376 
	`‰ì
(
b
);

380 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
GR_COLOR_BLUE
);

381 
	`GrFûlRe˘
(
b
->
s
->
p
, 
°©e
->
gc
, 0, 0, sèã->
brickwidth
,

382 
°©e
->
brickheight
);

383 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
GR_COLOR_WHITE
);

384 
	`GrFûlRe˘
(
b
->
s
->
a
, 
°©e
->
gc
, 0, 0, sèã->
brickwidth
,

385 
°©e
->
brickheight
);

390 if(
öÀvñ
) {

391 
b
->
√xt
 = 
Àv
->
bricks
;

392 
Àv
->
bricks
 = 
b
;

394 
b
->
√xt
 = 
°©e
->
bricks
;

395 
°©e
->
bricks
 = 
b
;

399 
	}
}

402 
grid
 *
	$√wgrid
(
nb°©e
 *
°©e
)

404 
x
, 
xx
, 
y
, 
yy
;

405 
grid
 *
g
, *
gg
;

408 if(!(
gg
 = 
g
 = 
	`mÆloc
(
°©e
->
width
 * sèã->
height
 * (
grid
))))

409  
NULL
;

413 
yy
 = 
°©e
->
sc‹es
.
h
 + sèã->
bÆl
.
s
->h + (
BALLS_BORDER
 * 2);

416 
y
 = 0; y < 
°©e
->
height
; y++, 
yy
 +°©e->
brickheight
) {

418 
x
 = 0, 
xx
 = 0; x < 
°©e
->
width
; x++,

419 
xx
 +
°©e
->
brickwidth
) {

421 
g
->
b
 = 
NULL
;

422 
g
->
x
 = 
xx
;

423 
g
->
y
 = 
yy
;

424 
g
->
hôs
 = 0;

425 
g
->
powî
 = -1;

426 
g
++;

430  
gg
;

431 
	}
}

434 
	$∑r£_powî•rôe
(
nb°©e
 *
°©e
, *
buf
, 
löe
)

436 
•rôe
 *
s
;

437 
powî
;

440 *
buf
) {

442 
powî
 = 
POWERW
;

445 
powî
 = 
POWERS
;

448 
powî
 = 
POWERT
;

451 
powî
 = 
POWERP
;

454 
powî
 = 
POWERN
;

457 
powî
 = 
POWERF
;

460 
powî
 = 
NOPOWER
;

465 if(
powî
 =
NOPOWER
) {

466 
	`Ârötf
(
°dîr
, "InvalidÖower \"%c\" onÜine %d of game file "

467 "\"%s\"\n", *
buf
, 
löe
, 
°©e
->
gamefûe
);

473 if(
°©e
->
powî•rôes
[
powî
]) {

474 
	`ªdeföew¨nög
("PowîS¥ôe", 
löe
, 
°©e
->
gamefûe
);

475 
	`de°roy_•rôe
(
°©e
, sèã->
powî•rôes
[
powî
]);

479 if(!(
s
 = 
	`lﬂd_•rôe
(
°©e
, 
buf
 + 2, -1, -1))) {

481 if(!(
s
 = 
	`make_em±y_•rôe
(
°©e
, 
buf
 + 2, 
DEFAULT_POWER_WIDTH
,

482 
DEFAULT_POWER_HEIGHT
))) {

485 
	`Ârötf
(
°dîr
, "Error: failedÅo createÖower sprite "

487 
löe
, 
°©e
->
gamefûe
);

492 if(
powî
 =
POWERW
 ||Öowî =
POWERS
 ||Öowî =
POWERT
 ||

493 
powî
 =
POWERP
)

494 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
GR_COLOR_GREEN
);

495 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
GR_COLOR_RED
);

496 
	`GrFûlRe˘
(
s
->
p
, 
°©e
->
gc
, 0, 0, 
DEFAULT_POWER_WIDTH
,

497 
DEFAULT_POWER_HEIGHT
);

498 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
GR_COLOR_WHITE
);

499 
	`GrFûlRe˘
(
s
->
a
, 
°©e
->
gc
, 0, 0, 
DEFAULT_POWER_WIDTH
,

500 
DEFAULT_POWER_HEIGHT
);

504 
°©e
->
powî•rôes
[
powî
] = 
s
;

507 
	}
}

510 
	$lﬂd_game_fûe
(
nb°©e
 *
°©e
)

512 
FILE
 *
Â
;

513 
löe
 = 1;

514 
Àvñ
 *
l
, *
Àv
 = 
NULL
;

515 
buf
[256], *
p
;

516 
öÀvñblock
 = 0;

519 
	`¢¥ötf
(
buf
, 256, "%s/%s", 
°©e
->
gamedú
, sèã->
gamefûe
);

522 if(!(
Â
 = 
	`f›í
(
buf
, "r"))) {

524 
	`Ârötf
(
°dîr
, "FailedÅo open game file \"%s\": %s\n",

525 
buf
, 
	`°ªº‹
(
î∫o
));

530 
	`fgës
(
buf
, 256, 
Â
)) {

533 if(!(
p
 = 
	`°rchr
(
buf
, '\n'))) {

536 
	`Ârötf
(
°dîr
, "TooÜongÜine onÜine %d of game file "

537 "\"%s\"\n", 
löe
, 
°©e
->
gamefûe
);

540 *
p
 = 0;

543 if(*
buf
 == '#' || *buf == 0) {

545 } if(!
	`memcmp
(
buf
, "TitleBackground ", 16)) {

546 if(
°©e
->
tôÀbackground
) {

547 
	`ªdeföew¨nög
("TôÀBackground", 
löe
,

548 
°©e
->
gamefûe
);

549 
	`‰ì
(
°©e
->
tôÀbackground
);

551 if(!(
°©e
->
tôÀbackground
 = 
	`°rdup
(
buf
 + 16))) {

552 
	`oom
();

553 
îr
;

555 } if(!
	`memcmp
(
buf
, "TitleBackgroundTiled ", 21)) {

559 if(!
	`°rcmp
(
buf
 + 21, "Yes"))

560 
°©e
->
backgroundtûed
 = 1;

561 if(!
	`°rcmp
(
buf
 + 21, "No"))

562 
°©e
->
backgroundtûed
 = 0;

563 
∑r£îr
;

564 } if(!
	`memcmp
(
buf
, "TitleSplash ", 12)) {

565 if(
°©e
->
tôÀ•œsh
) {

566 
	`ªdeföew¨nög
("TôÀS∂ash", 
löe
,

567 
°©e
->
gamefûe
);

568 
	`‰ì
(
°©e
->
tôÀ•œsh
);

570 if(!(
°©e
->
tôÀ•œsh
 = 
	`°rdup
(
buf
 + 12))) {

571 
	`oom
();

572 
îr
;

574 } if(!
	`memcmp
(
buf
, "GameWonSplash ", 14)) {

575 if(
°©e
->
gamew⁄•œsh
) {

576 
	`ªdeföew¨nög
("GameW⁄S∂ash", 
löe
,

577 
°©e
->
gamefûe
);

578 
	`‰ì
(
°©e
->
gamew⁄•œsh
);

580 if(!(
°©e
->
gamew⁄•œsh
 = 
	`°rdup
(
buf
 + 14))) {

581 
	`oom
();

582 
îr
;

584 } if(!
	`memcmp
(
buf
, "GameLostSplash ", 15)) {

585 if(
°©e
->
gamño°•œsh
) {

586 
	`ªdeföew¨nög
("GameLo°S∂ash", 
löe
,

587 
°©e
->
gamefûe
);

588 
	`‰ì
(
°©e
->
gamño°•œsh
);

590 if(!(
°©e
->
gamño°•œsh
 = 
	`°rdup
(
buf
 + 15))) {

591 
	`oom
();

592 
îr
;

594 } if(!
	`memcmp
(
buf
, "NormalPoints ", 13)) {

597 
°©e
->
n‹mÆpoöts
 = 
	`°πﬁ
(
buf
 + 13, &
p
, 10);

598 if(*
p
Ë
∑r£îr
;

599 } if(!
	`memcmp
(
buf
, "SmallBonusPoints ", 17)) {

600 
°©e
->
smÆlb⁄u•oöts
 = 
	`°πﬁ
(
buf
 + 17, &
p
, 10);

601 if(*
p
Ë
∑r£îr
;

602 } if(!
	`memcmp
(
buf
, "MediumBonusPoints ", 18)) {

603 
°©e
->
mediumb⁄u•oöts
 = 
	`°πﬁ
(
buf
 + 18, &
p
, 10);

604 if(*
p
Ë
∑r£îr
;

605 } if(!
	`memcmp
(
buf
, "LargeBonusPoints ", 17)) {

606 
°©e
->
œrgeb⁄u•oöts
 = 
	`°πﬁ
(
buf
 + 17, &
p
, 10);

607 if(*
p
Ë
∑r£îr
;

608 } if(!
	`memcmp
(
buf
, "HugeBonusPoints ", 16)) {

609 
°©e
->
hugeb⁄u•oöts
 = 
	`°πﬁ
(
buf
 + 16, &
p
, 10);

610 if(*
p
Ë
∑r£îr
;

611 } if(!
	`memcmp
(
buf
, "PowerUpPoints ", 14)) {

612 
°©e
->
powîuµoöts
 = 
	`°πﬁ
(
buf
 + 14, &
p
, 10);

613 if(*
p
Ë
∑r£îr
;

614 } if(!
	`memcmp
(
buf
, "PowerDownPoints ", 16)) {

615 
°©e
->
powîdow≈oöts
 = 
	`°πﬁ
(
buf
 + 16, &
p
, 10);

616 if(*
p
Ë
∑r£îr
;

617 } if(!
	`memcmp
(
buf
, "StartBalls ", 11)) {

618 
°©e
->
°¨tbÆls
 = 
	`°πﬁ
(
buf
 + 11, &
p
, 10);

619 if(*
p
Ë
∑r£îr
;

620 } if(!
	`memcmp
(
buf
, "NewLevelBalls ", 14)) {

621 
°©e
->
√wÀvñbÆls
 = 
	`°πﬁ
(
buf
 + 14, &
p
, 10);

622 if(*
p
Ë
∑r£îr
;

623 } if(!
	`memcmp
(
buf
, "BallImage ", 10)) {

626 if(
°©e
->
bÆl
.
s
) {

627 
	`ªdeföew¨nög
("BÆlImage", 
löe
,

628 
°©e
->
gamefûe
);

629 
	`de°roy_•rôe
(
°©e
, sèã->
bÆl
.
s
);

632 if(!(
°©e
->
bÆl
.
s
 = 
	`lﬂd_•rôe
(°©e, 
buf
 + 10,

635 if(!(
°©e
->
bÆl
.
s
 = 
	`make_em±y_•rôe
(state,

636 
buf
 + 10,

637 
DEFAULT_BALL_SIZE
,

638 
DEFAULT_BALL_SIZE
))) {

641 
	`Ârötf
(
°dîr
, "Couldn't create "

644 "\"%s\"\n", 
löe
,

645 
°©e
->
gamefûe
);

646 
îr
;

650 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
GR_COLOR_WHITE
);

651 
	`GrFûlEŒù£
(
°©e
->
bÆl
.
s
->
p
, sèã->
gc
,

652 
DEFAULT_BALL_SIZE
 / 2,

653 
DEFAULT_BALL_SIZE
 / 2,

654 (
DEFAULT_BALL_SIZE
 / 2) - 1,

655 (
DEFAULT_BALL_SIZE
 / 2) - 1);

656 
	`GrFûlEŒù£
(
°©e
->
bÆl
.
s
->
a
, sèã->
gc
,

657 
DEFAULT_BALL_SIZE
 / 2,

658 
DEFAULT_BALL_SIZE
 / 2,

659 (
DEFAULT_BALL_SIZE
 / 2) - 1,

660 (
DEFAULT_BALL_SIZE
 / 2) - 1);

662 } if(!
	`memcmp
(
buf
, "SlowBallVelocity ", 17)) {

663 
°©e
->
bÆl
.
sv
 = 
	`°πﬁ
(
buf
 + 17, &
p
, 10);

664 if(*
p
Ë
∑r£îr
;

665 } if(!
	`memcmp
(
buf
, "NormalBallVelocity ", 19)) {

666 
°©e
->
bÆl
.
nv
 = 
	`°πﬁ
(
buf
 + 19, &
p
, 10);

667 if(*
p
Ë
∑r£îr
;

668 } if(!
	`memcmp
(
buf
, "FastBallVelocity ", 17)) {

669 
°©e
->
bÆl
.
fv
 = 
	`°πﬁ
(
buf
 + 17, &
p
, 10);

670 if(*
p
Ë
∑r£îr
;

671 } if(!
	`memcmp
(
buf
, "BatVelocity ", 12)) {

672 
°©e
->
b©v
 = 
	`°πﬁ
(
buf
 + 12, &
p
, 10);

673 if(*
p
Ë
∑r£îr
;

674 } if(!
	`memcmp
(
buf
, "PowerVelocity ", 14)) {

675 
°©e
->
powîv
 = 
	`°πﬁ
(
buf
 + 14, &
p
, 10);

676 if(*
p
Ë
∑r£îr
;

677 } if(!
	`memcmp
(
buf
, "AnimatePeriod ", 14)) {

678 
°©e
->
™im©ïîiod
 = 
	`°πﬁ
(
buf
 + 14, &
p
, 10);

679 if(*
p
Ë
∑r£îr
;

680 } if(!
	`memcmp
(
buf
, "BrickWidth ", 11)) {

681 
°©e
->
brickwidth
 = 
	`°πﬁ
(
buf
 + 11, &
p
, 10);

682 if(*
p
Ë
∑r£îr
;

683 } if(!
	`memcmp
(
buf
, "BrickHeight ", 12)) {

684 
°©e
->
brickheight
 = 
	`°πﬁ
(
buf
 + 12, &
p
, 10);

685 if(*
p
Ë
∑r£îr
;

686 } if(!
	`memcmp
(
buf
, "Brick ", 6)) {

688 if(
	`∑r£_brick
(
°©e
, 
öÀvñblock
, 
Àv
, 
löe
, 
buf
 + 6))

689 
îr
;

690 } if(!
	`memcmp
(
buf
, "Width ", 6)) {

691 if(
Àv
) {

692 
	`Ârötf
(
°dîr
, "Error: Width must be set "

695 
löe
, 
°©e
->
gamefûe
);

696 
îr
;

698 
°©e
->
width
 = 
	`°πﬁ
(
buf
 + 6, &
p
, 10);

699 if(*
p
Ë
∑r£îr
;

700 } if(!
	`memcmp
(
buf
, "Height ", 7)) {

701 if(
Àv
) {

702 
	`Ârötf
(
°dîr
, "Error: Height must be set "

705 
löe
, 
°©e
->
gamefûe
);

706 
îr
;

708 
°©e
->
height
 = 
	`°πﬁ
(
buf
 + 7, &
p
, 10);

709 if(*
p
Ë
∑r£îr
;

710 } if(!
	`memcmp
(
buf
, "BatHeight ", 10)) {

711 
°©e
->
b©height
 = 
	`°πﬁ
(
buf
 + 10, &
p
, 10);

712 if(*
p
Ë
∑r£îr
;

713 } if(!
	`memcmp
(
buf
, "NormalBatWidth ", 15)) {

714 
°©e
->
b©widths
[
NORMALBAT
] = 
	`°πﬁ
(
buf
 + 15, &
p
, 10);

715 if(*
p
Ë
∑r£îr
;

716 } if(!
	`memcmp
(
buf
, "SmallBatWidth ", 14)) {

717 
°©e
->
b©widths
[
SMALLBAT
] = 
	`°πﬁ
(
buf
 + 14, &
p
, 10);

718 if(*
p
Ë
∑r£îr
;

719 } if(!
	`memcmp
(
buf
, "LargeBatWidth ", 14)) {

720 
°©e
->
b©widths
[
LARGEBAT
] = 
	`°πﬁ
(
buf
 + 14, &
p
, 10);

721 if(*
p
Ë
∑r£îr
;

722 } if(!
	`memcmp
(
buf
, "NormalBat ", 10)) {

723 if(
°©e
->
b©s
[
NORMALBAT
]) {

724 
	`ªdeföew¨nög
("N‹mÆB©", 
löe
,

725 
°©e
->
gamefûe
);

726 
	`de°roy_•rôe
(
°©e
, sèã->
b©s
[
NORMALBAT
]);

728 if(!(
°©e
->
b©s
[
NORMALBAT
] = 
	`lﬂd_•rôe
(state,

729 
buf
 + 10, 
°©e
->
b©widths
[
NORMALBAT
],

730 
°©e
->
b©height
))) {

731 if(!(
°©e
->
b©s
[
NORMALBAT
] =

732 
	`make_em±y_•rôe
(
°©e
, 
buf
 + 10,

733 
°©e
->
b©widths
[
NORMALBAT
],

734 
°©e
->
b©height
))) {

735 
	`Ârötf
(
°dîr
, "Couldn't create "

738 "\"%s\"\n", 
löe
,

739 
°©e
->
gamefûe
);

740 
îr
;

742 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
GR_COLOR_RED
);

743 
	`GrFûlRe˘
(
°©e
->
b©s
[
NORMALBAT
]->
p
,

744 
°©e
->
gc
, 0, 0,

745 
°©e
->
b©widths
[
NORMALBAT
],

746 
°©e
->
b©height
);

747 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
GR_COLOR_WHITE
);

748 
	`GrFûlRe˘
(
°©e
->
b©s
[
NORMALBAT
]->
a
,

749 
°©e
->
gc
, 0, 0,

750 
°©e
->
b©widths
[
NORMALBAT
],

751 
°©e
->
b©height
);

753 } if(!
	`memcmp
(
buf
, "SmallBat ", 9)) {

754 if(
°©e
->
b©s
[
SMALLBAT
]) {

755 
	`ªdeföew¨nög
("SmÆlB©", 
löe
,

756 
°©e
->
gamefûe
);

757 
	`de°roy_•rôe
(
°©e
, sèã->
b©s
[
SMALLBAT
]);

759 if(!(
°©e
->
b©s
[
SMALLBAT
] = 
	`lﬂd_•rôe
(state,

760 
buf
 + 9, 
°©e
->
b©widths
[
SMALLBAT
],

761 
°©e
->
b©height
))) {

762 if(!(
°©e
->
b©s
[
SMALLBAT
] =

763 
	`make_em±y_•rôe
(
°©e
, 
buf
 + 9,

764 
°©e
->
b©widths
[
SMALLBAT
],

765 
°©e
->
b©height
))) {

766 
	`Ârötf
(
°dîr
, "Couldn't create "

769 "\"%s\"\n", 
löe
,

770 
°©e
->
gamefûe
);

771 
îr
;

773 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
GR_COLOR_RED
);

774 
	`GrFûlRe˘
(
°©e
->
b©s
[
SMALLBAT
]->
p
,

775 
°©e
->
gc
, 0, 0,

776 
°©e
->
b©widths
[
SMALLBAT
],

777 
°©e
->
b©height
);

778 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
GR_COLOR_WHITE
);

779 
	`GrFûlRe˘
(
°©e
->
b©s
[
SMALLBAT
]->
a
,

780 
°©e
->
gc
, 0, 0,

781 
°©e
->
b©widths
[
SMALLBAT
],

782 
°©e
->
b©height
);

784 } if(!
	`memcmp
(
buf
, "LargeBat ", 9)) {

785 if(
°©e
->
b©s
[
LARGEBAT
]) {

786 
	`ªdeföew¨nög
("L¨geB©", 
löe
,

787 
°©e
->
gamefûe
);

788 
	`de°roy_•rôe
(
°©e
, sèã->
b©s
[
LARGEBAT
]);

790 if(!(
°©e
->
b©s
[
LARGEBAT
] = 
	`lﬂd_•rôe
(state,

791 
buf
 + 9, 
°©e
->
b©widths
[
LARGEBAT
],

792 
°©e
->
b©height
))) {

793 if(!(
°©e
->
b©s
[
LARGEBAT
] =

794 
	`make_em±y_•rôe
(
°©e
, 
buf
 + 9,

795 
°©e
->
b©widths
[
LARGEBAT
],

796 
°©e
->
b©height
))) {

797 
	`Ârötf
(
°dîr
, "Couldn't create "

800 "\"%s\"\n", 
löe
,

801 
°©e
->
gamefûe
);

802 
îr
;

804 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
GR_COLOR_RED
);

805 
	`GrFûlRe˘
(
°©e
->
b©s
[
LARGEBAT
]->
p
,

806 
°©e
->
gc
, 0, 0,

807 
°©e
->
b©widths
[
LARGEBAT
],

808 
°©e
->
b©height
);

809 
	`GrSëGCF‹eground
(
°©e
->
gc
, 
GR_COLOR_WHITE
);

810 
	`GrFûlRe˘
(
°©e
->
b©s
[
LARGEBAT
]->
a
,

811 
°©e
->
gc
, 0, 0,

812 
°©e
->
b©widths
[
LARGEBAT
],

813 
°©e
->
b©height
);

815 } if(!
	`memcmp
(
buf
, "PowerSprite ", 12)) {

817 if(
	`∑r£_powî•rôe
(
°©e
, 
buf
 + 12, 
löe
)Ë
îr
;

818 } if(!
	`memcmp
(
buf
, "PowerUpTimeout ", 15)) {

819 
°©e
->
powîu±ime
 = 
	`°πﬁ
(
buf
 + 15, &
p
, 10);

820 if(*
p
Ë
∑r£îr
;

821 } if(!
	`memcmp
(
buf
, "PowerDownTimeout ", 17)) {

822 
°©e
->
powîdow¡ime
 = 
	`°πﬁ
(
buf
 + 17, &
p
, 10);

823 if(*
p
Ë
∑r£îr
;

824 } if(!
	`memcmp
(
buf
, "FadeRate ", 9)) {

825 
°©e
->
Ádî©e
 = 
	`°πﬁ
(
buf
 + 9, &
p
, 10);

826 if(*
p
Ë
∑r£îr
;

827 if(
°©e
->
Ádî©e
 > 255 || state->faderate < 0) {

828 
	`Ârötf
(
°dîr
, "Invalid fadeÑate onÜine "

829 "%d o‡gamêfûê\"%s\"\n", 
löe
,

830 
°©e
->
gamefûe
);

831 
îr
;

833 } if(!
	`memcmp
(
buf
, "SolidFloorCheat ", 16)) {

834 if(
°©e
->
chóts
[
SFCHEAT
]) {

835 
	`ªdeföew¨nög
("SﬁidFlo‹Chót", 
löe
,

836 
°©e
->
gamefûe
);

837 
	`‰ì
(
°©e
->
chóts
[
SFCHEAT
]);

839 if(!(
°©e
->
chóts
[
SFCHEAT
] = 
	`°rdup
(
buf
 + 16))) {

840 
	`oom
();

841 
îr
;

843 if(
	`°æí
(
°©e
->
chóts
[
SFCHEAT
]Ë> 
MAXCHEATLEN
) {

844 
	`Ârötf
(
°dîr
, "Cheat sequenceÅooÜong on "

846 
löe
, 
°©e
->
gamefûe
);

847 
îr
;

849 } if(!
	`memcmp
(
buf
, "TeleportCheat ", 14)) {

850 if(
°©e
->
chóts
[
TPCHEAT
]) {

851 
	`ªdeföew¨nög
("Tñï‹tChót", 
löe
,

852 
°©e
->
gamefûe
);

853 
	`‰ì
(
°©e
->
chóts
[
TPCHEAT
]);

855 if(!(
°©e
->
chóts
[
TPCHEAT
] = 
	`°rdup
(
buf
 + 14))) {

856 
	`oom
();

857 
îr
;

859 if(
	`°æí
(
°©e
->
chóts
[
TPCHEAT
]Ë> 
MAXCHEATLEN
) {

860 
	`Ârötf
(
°dîr
, "Cheat sequenceÅooÜong on "

862 
löe
, 
°©e
->
gamefûe
);

863 
îr
;

865 } if(!
	`memcmp
(
buf
, "NoBounceCheat ", 14)) {

866 if(
°©e
->
chóts
[
NBCHEAT
]) {

867 
	`ªdeföew¨nög
("NoBoun˚Chót", 
löe
,

868 
°©e
->
gamefûe
);

869 
	`‰ì
(
°©e
->
chóts
[
NBCHEAT
]);

871 if(!(
°©e
->
chóts
[
NBCHEAT
] = 
	`°rdup
(
buf
 + 14))) {

872 
	`oom
();

873 
îr
;

875 if(
	`°æí
(
°©e
->
chóts
[
NBCHEAT
]Ë> 
MAXCHEATLEN
) {

876 
	`Ârötf
(
°dîr
, "Cheat sequenceÅooÜong on "

878 
löe
, 
°©e
->
gamefûe
);

879 
îr
;

882 } if(!
	`memcmp
(
buf
, "NoPowerDownCheat ", 17)) {

883 if(
°©e
->
chóts
[
NPDCHEAT
]) {

884 
	`ªdeföew¨nög
("NoPowîDownChót", 
löe
,

885 
°©e
->
gamefûe
);

886 
	`‰ì
(
°©e
->
chóts
[
NPDCHEAT
]);

888 if(!(
°©e
->
chóts
[
NPDCHEAT
] = 
	`°rdup
(
buf
 + 17))) {

889 
	`oom
();

890 
îr
;

892 if(
	`°æí
(
°©e
->
chóts
[
NPDCHEAT
]Ë> 
MAXCHEATLEN
) {

893 
	`Ârötf
(
°dîr
, "Cheat sequenceÅooÜong on "

895 
löe
, 
°©e
->
gamefûe
);

896 
îr
;

899 } if(!
	`memcmp
(
buf
, "NoPowerUpTimeoutCheat ", 22)) {

900 if(
°©e
->
chóts
[
NPUTOCHEAT
]) {

901 
	`ªdeföew¨nög
("NoPowîUpTimeoutChót", 
löe
,

902 
°©e
->
gamefûe
);

903 
	`‰ì
(
°©e
->
chóts
[
NPUTOCHEAT
]);

905 if(!(
°©e
->
chóts
[
NPUTOCHEAT
] = 
	`°rdup
(
buf
 + 22))) {

906 
	`oom
();

907 
îr
;

909 if(
	`°æí
(
°©e
->
chóts
[
NPUTOCHEAT
]Ë> 
MAXCHEATLEN
) {

910 
	`Ârötf
(
°dîr
, "Cheat sequenceÅooÜong on "

912 
löe
, 
°©e
->
gamefûe
);

913 
îr
;

915 } if(!
	`memcmp
(
buf
, "BeginLevel", 10)) {

919 if(
öÀvñblock
) {

920 
	`Ârötf
(
°dîr
, "Error: BeginLevel while "

922 "o‡gamêfûê\"%s\"\n", 
löe
,

923 
°©e
->
gamefûe
);

924 
îr
;

926 
öÀvñblock
 = 1;

929 if(!(
Àv
 = 
	`mÆloc
((
Àvñ
)))) {

930 
	`oom
();

931 
îr
;

934 
Àv
->
bricks
 = 
NULL
;

935 
Àv
->
background«me
 = 
NULL
;

936 
Àv
->
backgroundtûed
 = 
DEFAULT_BACKGROUND_TILED
;

937 
Àv
->
numbricks
 = 0;

938 
Àv
->
√xt
 = 
NULL
;

941 if(!(
Àv
->
grid
 = 
	`√wgrid
(
°©e
))) {

942 
	`oom
();

943 
îr
;

948 if(!
°©e
->
Àvñs
Ë°©e->Àvñ†
Àv
;

950 
l
 = 
°©e
->
Àvñs
;Ü->
√xt
;Ü =Ü->next);

951 
l
->
√xt
 = 
Àv
;

953 } if(!
	`memcmp
(
buf
, "LevelBackground ", 16)) {

954 if(!
öÀvñblock
) {

955 
	`nŸöÀvblockîr
("LevñBackground", 
löe
,

956 
°©e
->
gamefûe
);

957 
îr
;

959 if(
Àv
->
background«me
) {

960 
	`ªdeföew¨nög
("LevñBackground", 
löe
,

961 
°©e
->
gamefûe
);

962 
	`‰ì
(
Àv
->
background«me
);

964 if(!(
Àv
->
background«me
 = 
	`°rdup
(
buf
 + 16))) {

965 
	`oom
();

966 
îr
;

968 } if(!
	`memcmp
(
buf
, "LevelBackgroundTiled ", 21)) {

969 if(!
öÀvñblock
) {

970 
	`nŸöÀvblockîr
("LevñBackgroundTûed", 
löe
,

971 
°©e
->
gamefûe
);

972 
îr
;

974 if(!
	`°rcmp
(
buf
 + 21, "Yes")Ë
Àv
->
backgroundtûed
 = 1;

975 if(!
	`°rcmp
(
buf
 + 21, "No"))

976 
Àv
->
backgroundtûed
 = 0;

977 
∑r£îr
;

978 } if(!
	`memcmp
(
buf
, "BeginRows", 9)) {

979 if(!
öÀvñblock
) {

980 
	`nŸöÀvblockîr
("BegöRows", 
löe
,

981 
°©e
->
gamefûe
);

982 
îr
;

985 if(
	`∑r£_rows
(
°©e
, 
Àv
, 
Â
, &
löe
)Ë
îr
;

986 } if(!
	`memcmp
(
buf
, "EndRows", 7)) {

989 
	`Ârötf
(
°dîr
, "Error: EndRows without corresponding "

991 "\"%s\"\n", 
löe
, 
°©e
->
gamefûe
);

992 
îr
;

993 } if(!
	`memcmp
(
buf
, "BeginPowers", 11)) {

994 if(!
öÀvñblock
) {

995 
	`nŸöÀvblockîr
("BegöPowîs", 
löe
,

996 
°©e
->
gamefûe
);

997 
îr
;

999 if(
	`∑r£_powîs
(
°©e
, 
Àv
, 
Â
, &
löe
)Ë
îr
;

1000 } if(!
	`memcmp
(
buf
, "EndPowers", 9)) {

1001 
	`Ârötf
(
°dîr
, "Error: EndPowers without "

1003 "o‡gamêfûê\"%s\"\n", 
löe
,

1004 
°©e
->
gamefûe
);

1005 
îr
;

1006 } if(!
	`memcmp
(
buf
, "EndLevel", 8)) {

1007 if(!
öÀvñblock
) {

1008 
	`Ârötf
(
°dîr
, "Error: EndLevel whileÇot in "

1010 "fûê\"%s\"\n", 
löe
, 
°©e
->
gamefûe
);

1011 
îr
;

1013 
öÀvñblock
 = 0;

1014 
°©e
->
numÀvñs
++;

1016 
	`Ârötf
(
°dîr
, "Unknown command \"%s\" onÜine %d "

1017 "o‡gamêfûê\"%s\"\n", 
buf
,

1018 
löe
, 
°©e
->
gamefûe
);

1022 
löe
++;

1027 if(
	`„º‹
(
Â
)) {

1028 
	`Ârötf
(
°dîr
, "ErrorÑeading from game file \"%s\" onÜine "

1029 "%d: %s\n", 
°©e
->
gamefûe
, 
löe
,

1030 
	`°ªº‹
(
î∫o
));

1031 
îr
;

1035 if(!(
°©e
->
grid
 = 
	`√wgrid
(state))) {

1036 
	`oom
();

1037 
îr
;

1040 
	`f˛o£
(
Â
);

1044 
∑r£îr
:

1045 
	`Ârötf
(
°dîr
, "P¨£Éº‹ o¿löê%d o‡gamêfûê\"%s\"\n", 
löe
,

1046 
°©e
->
gamefûe
);

1047 
îr
:

1048 
	`f˛o£
(
Â
);

1050 
	}
}

	@demos/nbreaker/misc.c

37 
	~<°dio.h
>

38 
	~<°dlib.h
>

39 
	~<°rög.h
>

41 
	~<«no-X.h
>

42 
	~<nxcﬁ‹s.h
>

43 
	~"nbªakî.h
"

48 
	$my‰ì
(*
p
)

50 if(
p
Ë
	`‰ì
(p);

51 
	}
}

54 
	$oom
()

56 
	`Ârötf
(
°dîr
, "Out of memory\n");

57 
	}
}

	@demos/nbreaker/nbreaker.c

36 
	~<°dio.h
>

37 
	~<°dlib.h
>

39 
	~<«no-X.h
>

40 
	~<nxcﬁ‹s.h
>

41 
	~"nbªakî.h
"

51 
	$˛ónup
(
nb°©e
 *
°©e
)

53 
i
;

54 #ifde‡
THOROUGH_CLEANUP


55 
brick
 *
b
, *
b√xt
 = 
°©e
->
bricks
;

56 
Àvñ
 *
l
, *
 ext
 = 
°©e
->
Àvñs
;

57 
powî
 *
p
, *
≤ext
 = 
°©e
->
powîs
;

60 
	`ßve_hisc‹e
(
°©e
);

62 #ifde‡
THOROUGH_CLEANUP


65 (
b
 = 
b√xt
)) {

66 
b√xt
 = 
b
->
√xt
;

67 
	`‰ì
(
b
);

70 
	`de°roy_Æl_•rôes
(
°©e
);

73 
	`GrDe°royWödow
(
°©e
->
wid
);

74 
	`GrDe°royWödow
(
°©e
->
ˇnvas
);

76 if(
°©e
->
Ádî©e
) {

77 
	`GrDe°royWödow
(
°©e
->
√wˇnvas
);

78 
	`GrDe°royWödow
(
°©e
->
ﬁdˇnvas
);

80 
	`GrDe°royWödow
(
°©e
->
sc‹es
.
p
);

81 
	`GrDe°royWödow
(
°©e
->
brickÆpha
);

82 
	`GrDe°royTimî
(
°©e
->
tid
);

85 
	`my‰ì
(
°©e
->
tôÀbackground
);

86 
	`my‰ì
(
°©e
->
tôÀ•œsh
);

87 
	`my‰ì
(
°©e
->
gamew⁄•œsh
);

88 
	`my‰ì
(
°©e
->
gamño°•œsh
);

91 
i
 = 0; i < 
NUMCHEATS
; i++Ë
	`my‰ì
(
°©e
->
chóts
[i]);

94 (
l
 = 
 ext
)) {

95 
 ext
 = 
l
->
√xt
;

96 
b√xt
 = 
l
->
bricks
;

98 (
b
 = 
b√xt
)) {

99 
b√xt
 = 
b
->
√xt
;

100 
	`‰ì
(
b
);

102 
	`my‰ì
(
l
->
grid
);

103 
	`my‰ì
(
l
->
background«me
);

104 
	`‰ì
(
l
);

107 
	`my‰ì
(
°©e
->
grid
);

110 (
p
 = 
≤ext
)) {

111 
≤ext
 = 
p
->
√xt
;

112 
	`‰ì
(
p
);

115 
	`‰ì
(
°©e
);

117 
	`GrClo£
();

118 
	}
}

124 
	$ˇlc_timeout
(
nb°©e
 *
°©e
)

126 
ñ≠£d
;

127 
timevÆ
 
tv
;

129 
	`gëtimeofday
(&
tv
, 
NULL
);

133 
ñ≠£d
 = ((
tv
.
tv_£c
 - 
°©e
->
œ°™im
.tv_sec) * 1000) +

134 ((
tv
.
tv_u£c
 - 
°©e
->
œ°™im
.tv_usec) / 1000);

137  
°©e
->
™im©ïîiod
 - 
ñ≠£d
;

138 
	}
}

143 
	$nbªakî
(
nb°©e
 *
°©e
)

145 
GR_EVENT
 
ev
;

146 
timeout
;

151 if(
°©e
->°©ê=
STATE_RUNNING
 ||

152 
°©e
->°©ê=
STATE_FADING
) {

153 if((
timeout
 = 
	`ˇlc_timeout
(
°©e
)) <= 0) {

157 
	`gëtimeofday
(&
°©e
->
œ°™im
, 
NULL
);

158 
	`™im©e
(
°©e
);

166 if((
timeout
 = 
	`ˇlc_timeout
(
°©e
)) <= 0)

167 
timeout
 = 1;

169 } 
timeout
 = 0;

173 
	`GrGëNextEvítTimeout
(&
ev
, 
timeout
);

177 
ev
.
ty≥
) {

178 
GR_EVENT_TYPE_CLOSE_REQ
:

179 
°©e
->°©ê
STATE_FINISHED
;

181 
GR_EVENT_TYPE_EXPOSURE
:

182 
	`h™dÀ_exposuª_evít
(
°©e
, &
ev
.
exposuª
);

184 
GR_EVENT_TYPE_BUTTON_DOWN
:

185 
	`h™dÀ_buâ⁄_evít
(
°©e
, &
ev
.
buâ⁄
);

187 
GR_EVENT_TYPE_MOUSE_POSITION
:

188 
	`h™dÀ_mou£_evít
(
°©e
, &
ev
.
mou£
);

190 
GR_EVENT_TYPE_KEY_UP
:

191 
GR_EVENT_TYPE_KEY_DOWN
:

192 if(
	`h™dÀ_key°roke_evít
(
°©e
, &
ev
.
key°roke
))

193 
°©e
->°©ê
STATE_FINISHED
;

195 
GR_EVENT_TYPE_UPDATE
:

196 
	`h™dÀ_upd©e_evít
(
°©e
, &
ev
.
upd©e
);

198 
GR_EVENT_TYPE_TIMER
:

199 
	`h™dÀ_timî_evít
(
°©e
, &
ev
.
timî
);

201 
GR_EVENT_TYPE_TIMEOUT
:

205 
	`Ârötf
(
°dîr
, "Got unknownÉventÅype %d\n",

206 
ev
.
ty≥
);

211 } 
°©e
->°©ê!
STATE_FINISHED
);

212 
	}
}

214 
	$maö
(
¨gc
, *
¨gv
[])

216 
nb°©e
 *
°©e
;

218 if(!(
°©e
 = 
	`öô
(
¨gc
, 
¨gv
)))  1;

219 
	`nbªakî
(
°©e
);

220 
	`˛ónup
(
°©e
);

223 
	}
}

	@demos/nbreaker/nbreaker.h

37 #i‚de‡
NBREAKER_H


38 
	#NBREAKER_H


	)

42 
	#NB_DEBUG


	)

46 
	#DEBUG_POWERS


	)

51 
	#THOROUGH_CLEANUP


	)

54 
	#DEFAULT_GAME_DIR
 "/u§/sh¨e/nbªakî"

	)

56 
	#DEFAULT_GAME_FILE
 "deÁu….nbk"

	)

58 
	#DEFAULT_BACKGROUND_TILED
 1

	)

60 
	#DEFAULT_NORMALPOINTS
 1

	)

62 
	#DEFAULT_SMALLBONUSPOINTS
 5

	)

64 
	#DEFAULT_MEDIUMBONUSPOINTS
 25

	)

66 
	#DEFAULT_LARGEBONUSPOINTS
 150

	)

68 
	#DEFAULT_HUGEBONUSPOINTS
 1000

	)

70 
	#DEFAULT_POWERUPPOINTS
 20

	)

72 
	#DEFAULT_POWERDOWNPOINTS
 -10

	)

74 
	#DEFAULT_STARTBALLS
 5

	)

76 
	#DEFAULT_NEWLEVELBALLS
 2

	)

78 
	#DEFAULT_BRICK_WIDTH
 40

	)

80 
	#DEFAULT_BRICK_HEIGHT
 20

	)

82 
	#DEFAULT_BAT_HEIGHT
 25

	)

84 
	#DEFAULT_NORMALBAT_WIDTH
 60

	)

86 
	#DEFAULT_SMALLBAT_WIDTH
 40

	)

88 
	#DEFAULT_LARGEBAT_WIDTH
 80

	)

90 
	#DEFAULT_POWERUP_TIME
 30

	)

92 
	#DEFAULT_POWERDOWN_TIME
 20

	)

94 
	#DEFAULT_WIDTH
 15

	)

96 
	#DEFAULT_HEIGHT
 15

	)

98 
	#DEFAULT_POWER_WIDTH
 80

	)

100 
	#DEFAULT_POWER_HEIGHT
 35

	)

102 
	#DEFAULT_BALL_SIZE
 20

	)

104 
	#DEFAULT_BAT_VELOCITY
 10

	)

106 
	#DEFAULT_ANIMATE_PERIOD
 20

	)

108 
	#DEFAULT_SLOW_BALL_VELOCITY
 4

	)

110 
	#DEFAULT_NORMAL_BALL_VELOCITY
 8

	)

112 
	#DEFAULT_FAST_BALL_VELOCITY
 12

	)

114 
	#DEFAULT_POWER_VELOCITY
 10

	)

116 
	#DEFAULT_FADERATE
 10

	)

119 
	#HISCORE_FILE
 "hisc‹e"

	)

121 
	#SCORE_FONT
 
GR_FONT_SYSTEM_VAR


	)

123 
	#SCORE_FGCOLOUR
 
GR_COLOR_WHITE


	)

125 
	#SCORE_BGCOLOUR
 
GR_COLOR_BLACK


	)

127 
	#SCORE_ALPHACOLOUR
 
GR_COLOR_GREY40


	)

129 
	#SCORE_BORDER
 4

	)

131 
	#BALLS_BORDER
 4

	)

133 
	#MAXCHEATLEN
 16

	)

138 
	#NUMBATS
 3

	)

140 
	#NUMPOWERS
 6

	)

142 
	#NUMCHEATS
 5

	)

146 
	mx
;

147 
	my
;

148 } 
	tco‹ds
;

151 
	s_•rôe
 {

154 *
	m‚ame
;

156 
	mw
;

157 
	mh
;

160 
GR_PIXMAP_ID
 
	mp
;

161 
GR_ALPHA_ID
 
	ma
;

165 
	mußge
;

169 
_•rôe
 *
	m√xt
;

170 
_•rôe
 *
	m¥ev
;

172 
_•rôe
 
	t•rôe
;

176 
	s_brick
 {

178 
•rôe
 *
	ms
;

181 
	midítifõr
;

183 
	mÊags
;

186 
_brick
 *
	m√xt
;

188 
_brick
 
	tbrick
;

195 
brick
 *
	mb
;

198 
	mx
;

199 
	my
;

203 
	mhôs
;

206 
	mpowî
;

207 } 
	tgrid
;

211 
	s_Àvñ
 {

213 
brick
 *
	mbricks
;

215 *
	mbackground«me
;

217 
	mbackgroundtûed
;

221 
	mnumbricks
;

223 
grid
 *
	mgrid
;

225 
_Àvñ
 *
	m√xt
;

227 
_Àvñ
 
	tÀvñ
;

232 
	s_powî
 {

234 
	mty≥
;

236 
	mx
;

237 
	my
;

239 
_powî
 *
	m√xt
;

241 
_powî
 
	tpowî
;

246 
	ms
;

248 
	mhi
;

251 
	mfhi
;

254 
GR_PIXMAP_ID
 
	mp
;

257 
GR_ALPHA_ID
 
	ma
;

260 
	mh
;

261 } 
	tsc‹es_t
;

267 
	mx
;

268 
	my
;

271 
	md
;

273 
	mv
;

276 
	mlx
;

277 
	mly
;

279 
	m∑rked
;

281 
•rôe
 *
	ms
;

283 
	msv
;

285 
	mnv
;

287 
	mfv
;

288 } 
	tbÆl_t
;

293 
	msf
 : 1;

295 
	mnb
 : 1;

297 
	m≈d
 : 1;

299 
	m≈uto
 : 1;

301 
	m∑u£d
 : 1;

303 
	mÀ·
 : 1;

305 
	mright
 : 1;

306 } 
	tÊags_t
;

311 
	mwideb©
;

312 
	m¶owmŸi⁄
;

313 
	m°ickyb©
;

314 
	mpowîbÆl
;

315 
	m«ºowb©
;

316 
	mÁ°mŸi⁄
;

317 } 
	tpowîtimes_t
;

319 
	~<sys/time.h
>

325 
	m°©e
;

327 *
	mgamedú
;

329 *
	mgamefûe
;

331 *
	mtôÀbackground
;

333 
	mtôÀbackgroundtûed
;

335 *
	mtôÀ•œsh
;

337 *
	mgamew⁄•œsh
;

339 *
	mgamño°•œsh
;

341 
•rôe
 *
	m•rôñi°
;

343 
•rôe
 *
	mbackground
;

345 
	mbackgroundtûed
;

347 
	mn‹mÆpoöts
;

349 
	msmÆlb⁄u•oöts
;

351 
	mmediumb⁄u•oöts
;

353 
	mœrgeb⁄u•oöts
;

355 
	mhugeb⁄u•oöts
;

357 
	mpowîuµoöts
;

360 
	mpowîdow≈oöts
;

362 
	m°¨tbÆls
;

364 
	m√wÀvñbÆls
;

366 
	mbrickwidth
;

368 
	mbrickheight
;

370 
brick
 *
	mbricks
;

374 
GR_ALPHA_ID
 
	mbrickÆpha
;

376 
	mwidth
;

378 
	mheight
;

380 
	mb©height
;

382 
	mb©widths
[
NUMBATS
];

384 
	mb©
;

386 
	mb©x
;

388 
	mb©v
;

390 
	mpowîv
;

392 
	m™im©ïîiod
;

394 
•rôe
 *
	mb©s
[
NUMBATS
];

396 
•rôe
 *
	mpowî•rôes
[
NUMPOWERS
];

398 
•rôe
 *
	m•œsh
;

400 
	mpowîu±ime
;

402 
	mpowîdow¡ime
;

404 *
	mchóts
[
NUMCHEATS
];

407 
	mchót°©e
[
MAXCHEATLEN
 + 1];

409 
Êags_t
 
	mÊags
;

411 
Àvñ
 *
	mÀvñs
;

413 
	mÀvñ
;

415 
	mnumÀvñs
;

417 
GR_GC_ID
 
	mgc
;

419 
GR_WINDOW_ID
 
	mwid
;

425 
GR_COORD
 
	mwöx
;

429 
GR_PIXMAP_ID
 
	mˇnvas
;

431 
GR_PIXMAP_ID
 
	mﬁdˇnvas
;

432 
GR_PIXMAP_ID
 
	m√wˇnvas
;

435 
GR_TIMER_ID
 
	mtid
;

437 
	mˇnvaswidth
;

439 
	mˇnvasheight
;

441 
grid
 *
	mgrid
;

443 
	mnumbricks
;

445 
powî
 *
	mpowîs
;

447 
bÆl_t
 
	mbÆl
;

449 
	mnumbÆls
;

451 
sc‹es_t
 
	msc‹es
;

454 
timevÆ
 
	mœ°™im
;

456 
powîtimes_t
 
	mpowîtimes
;

458 
	mÁdî©e
;

460 
	mÁdñevñ
;

462 
	m√xt°©e
;

463 } 
	tnb°©e
;

468 
	#BRICK_FLAG_IMMUTABLE
 (1 << 0)

	)

470 
	#BRICK_FLAG_2_HITS
 (1 << 1)

	)

472 
	#BRICK_FLAG_3_HITS
 (1 << 2)

	)

474 
	#BRICK_FLAG_SMALL_BONUS
 (1 << 3)

	)

476 
	#BRICK_FLAG_MEDIUM_BONUS
 (1 << 4)

	)

478 
	#BRICK_FLAG_LARGE_BONUS
 (1 << 5)

	)

480 
	#BRICK_FLAG_HUGE_BONUS
 (1 << 6)

	)

485 
	mNORMALBAT
 = 0,

487 
	mSMALLBAT
,

489 
	mLARGEBAT


495 
	mNOPOWER
 = -1,

497 
	mPOWERW
,

499 
	mPOWERS
,

501 
	mPOWERT
,

503 
	mPOWERP
,

505 
	mPOWERN
,

507 
	mPOWERF
,

513 
	mSFCHEAT
 = 0,

515 
	mTPCHEAT
,

517 
	mNBCHEAT
,

519 
	mNPDCHEAT
,

521 
	mNPUTOCHEAT


527 
	mSTATE_TITLESCREEN
,

529 
	mSTATE_FADING
,

531 
	mSTATE_RUNNING
,

533 
	mSTATE_GAMEWON
,

535 
	mSTATE_GAMELOST
,

537 
	mSTATE_FINISHED


543 
™im©e
(
nb°©e
 *
°©e
);

546 
lo°_bÆl
(
nb°©e
 *
°©e
);

547 
∑rk_bÆl
(
nb°©e
 *
°©e
);

548 
move_bÆl
(
nb°©e
 *
°©e
);

549 
ˇlc_√w_bÆl_co‹ds
(
nb°©e
 *
°©e
, 
co‹ds
 *
c
);

550 
check_bÆl_cﬁlisi⁄
(
nb°©e
 *
°©e
, 
co‹ds
 *
c
);

551 
ªdøw_bÆl
(
nb°©e
 *
°©e
);

554 
ch™ge_b©
(
nb°©e
 *
°©e
, 
√wb©
);

555 
move_b©
(
nb°©e
 *
°©e
, 
x
);

558 
brick_cﬁlisi⁄
(
nb°©e
 *
°©e
, 
grid
 *
g
);

561 
do_chót
(
nb°©e
 *
°©e
, 
GR_KEY
 
key
);

564 
døw_background
(
nb°©e
 *
°©e
, 
x
, 
y
, 
w
, 
h
);

565 
døw_•œsh
(
nb°©e
 *
°©e
);

566 
døw_brick
(
nb°©e
 *
°©e
, 
grid
 *
g
, 
x
, 
y
, 
w
, 
h
);

567 
døw_bricks
(
nb°©e
 *
°©e
, 
x
, 
y
, 
w
, 
h
);

568 
døw_b©
(
nb°©e
 *
°©e
);

569 
døw_bÆl
(
nb°©e
 *
°©e
);

570 
døw_bÆls
(
nb°©e
 *
°©e
);

571 
døw_sc‹es
(
nb°©e
 *
°©e
);

572 
døw_powî
(
nb°©e
 *
°©e
, 
powî
 *
p
, 
x
, 
y
, 
w
, 
h
);

573 
døw_ˇnvas
(
nb°©e
 *
°©e
, 
x
, 
y
, 
w
, 
h
);

575 #ifde‡
NB_DEBUG


577 
dump_°©e
(
nb°©e
 *
°©e
);

581 
h™dÀ_exposuª_evít
(
nb°©e
 *
°©e
, 
GR_EVENT_EXPOSURE
 *
ev
);

582 
h™dÀ_buâ⁄_evít
(
nb°©e
 *
°©e
, 
GR_EVENT_BUTTON
 *
ev
);

583 
h™dÀ_mou£_evít
(
nb°©e
 *
°©e
, 
GR_EVENT_MOUSE
 *
ev
);

584 
h™dÀ_key°roke_evít
(
nb°©e
 *
°©e
, 
GR_EVENT_KEYSTROKE
 *
ev
);

585 
h™dÀ_upd©e_evít
(
nb°©e
 *
°©e
, 
GR_EVENT_UPDATE
 *
ev
);

586 
h™dÀ_timî_evít
(
nb°©e
 *
°©e
, 
GR_EVENT_TIMER
 *
ev
);

589 
ª£t_game
(
nb°©e
 *
°©e
);

592 
nb°©e
 *
öô
(
¨gc
, *
¨gv
[]);

595 
ö¸emít_Àvñ
(
nb°©e
 *
°©e
);

596 
£t_Àvñ_a˘ive
(
nb°©e
 *
°©e
);

599 
lﬂd_game_fûe
(
nb°©e
 *
°©e
);

602 
my‰ì
(*
p
);

603 
oom
();

606 
a˘iv©e_wideb©
(
nb°©e
 *
°©e
);

607 
a˘iv©e_¶owmŸi⁄
(
nb°©e
 *
°©e
);

608 
a˘iv©e_°ickyb©
(
nb°©e
 *
°©e
);

609 
a˘iv©e_powîbÆl
(
nb°©e
 *
°©e
);

610 
a˘iv©e_«ºowb©
(
nb°©e
 *
°©e
);

611 
a˘iv©e_Á°mŸi⁄
(
nb°©e
 *
°©e
);

612 
do_powî_timîs
(
nb°©e
 *
°©e
);

613 
√w_powî
(
nb°©e
 *
°©e
, 
ty≥
, 
x
, 
y
);

614 
ªdøw_powîs
(
nb°©e
 *
°©e
, 
x
, 
y
, 
w
, 
h
);

615 
de°roy_powî
(
nb°©e
 *
°©e
, 
powî
 *
p
);

616 
powî_cﬁlisi⁄
(
nb°©e
 *
°©e
, 
powî
 *
p
);

617 
™im©e_powîs
(
nb°©e
 *
°©e
);

620 
ö¸emít_sc‹e
(
nb°©e
 *
°©e
, 
poöts
);

621 
lﬂd_hisc‹e
(
nb°©e
 *
°©e
);

622 
ßve_hisc‹e
(
nb°©e
 *
°©e
);

625 
•rôe
 *
make_em±y_•rôe
(
nb°©e
 *
°©e
, *
‚ame
, 
width
, 
height
);

626 
•rôe
 *
lﬂd_•rôe
(
nb°©e
 *
°©e
, *
‚ame
, 
width
, 
height
);

627 
de°roy_•rôe
(
nb°©e
 *
°©e
, 
•rôe
 *
s
);

628 
de°roy_Æl_•rôes
(
nb°©e
 *
°©e
);

	@demos/nbreaker/powers.c

36 
	~<°dio.h
>

37 
	~<°dlib.h
>

39 
	~<«no-X.h
>

40 
	~<nxcﬁ‹s.h
>

41 
	~"nbªakî.h
"

44 
	$a˘iv©e_wideb©
(
nb°©e
 *
°©e
)

47 
°©e
->
powîtimes
.
wideb©
 = sèã->
powîu±ime
;

50 
°©e
->
powîtimes
.
«ºowb©
 = 0;

53 
	`ch™ge_b©
(
°©e
, 
LARGEBAT
);

54 
	}
}

57 
	$a˘iv©e_¶owmŸi⁄
(
nb°©e
 *
°©e
)

60 
°©e
->
powîtimes
.
¶owmŸi⁄
 = sèã->
powîu±ime
;

63 
°©e
->
powîtimes
.
Á°mŸi⁄
 = 0;

66 
°©e
->
bÆl
.
v
 = sèã->bÆl.
sv
;

67 
	}
}

70 
	$a˘iv©e_°ickyb©
(
nb°©e
 *
°©e
)

73 
°©e
->
powîtimes
.
°ickyb©
 = sèã->
powîu±ime
;

74 
	}
}

77 
	$a˘iv©e_powîbÆl
(
nb°©e
 *
°©e
)

80 
°©e
->
powîtimes
.
powîbÆl
 = sèã->
powîu±ime
;

81 
	}
}

84 
	$a˘iv©e_«ºowb©
(
nb°©e
 *
°©e
)

87 
°©e
->
powîtimes
.
«ºowb©
 = sèã->
powîdow¡ime
;

90 
°©e
->
powîtimes
.
wideb©
 = 0;

93 
	`ch™ge_b©
(
°©e
, 
SMALLBAT
);

94 
	}
}

97 
	$a˘iv©e_Á°mŸi⁄
(
nb°©e
 *
°©e
)

100 
°©e
->
powîtimes
.
Á°mŸi⁄
 = sèã->
powîdow¡ime
;

103 
°©e
->
powîtimes
.
¶owmŸi⁄
 = 0;

106 
°©e
->
bÆl
.
v
 = sèã->bÆl.
fv
;

107 
	}
}

113 
	$dec_powî
(*
i
)

115 
tmp
 = *
i
 - 1;

116 if(
tmp
 >0Ë*
i
 =Åmp;

117  
tmp
;

118 
	}
}

122 
	$do_powî_timîs
(
nb°©e
 *
°©e
)

126 if(!
°©e
->
Êags
.
≈uto
) {

129 if(!
	`dec_powî
(&
°©e
->
powîtimes
.
wideb©
))

130 
	`ch™ge_b©
(
°©e
, 
NORMALBAT
);

133 if(!
	`dec_powî
(&
°©e
->
powîtimes
.
¶owmŸi⁄
))

134 
°©e
->
bÆl
.
v
 = sèã->bÆl.
nv
;

136 
	`dec_powî
(&
°©e
->
powîtimes
.
°ickyb©
);

137 
	`dec_powî
(&
°©e
->
powîtimes
.
powîbÆl
);

141 if(!
	`dec_powî
(&
°©e
->
powîtimes
.
«ºowb©
))

142 
	`ch™ge_b©
(
°©e
, 
NORMALBAT
);

145 if(!
	`dec_powî
(&
°©e
->
powîtimes
.
Á°mŸi⁄
))

146 
°©e
->
bÆl
.
v
 = sèã->bÆl.
nv
;

147 
	}
}

151 
	$√w_powî
(
nb°©e
 *
°©e
, 
ty≥
, 
x
, 
y
)

153 
powî
 *
p
, *
≤
;

154 
•rôe
 *
s
 = 
°©e
->
powî•rôes
[
ty≥
];

157 if(!(
p
 = 
	`mÆloc
((
powî
)))) {

158 
	`oom
();

163 
p
->
ty≥
 =Åype;

164 
p
->
y
 = y;

168 
p
->
x
 = x - (
s
->
w
 / 2);

172 if(
p
->
x
 < 0)Ö->x = 0;

173 if(
p
->
x
 + 
s
->
w
 > 
°©e
->
ˇnvaswidth
)

174 
p
->
x
 = 
°©e
->
ˇnvaswidth
 - 
s
->
w
;

176 
p
->
√xt
 = 
NULL
;

179 if(!
°©e
->
powîs
Ë°©e->powî†
p
;

182 
≤
 = 
°©e
->
powîs
;Ön->
√xt
;Ön =Ön->next);

183 
≤
->
√xt
 = 
p
;

187 
	`døw_powî
(
°©e
, 
p
,Ö->
x
,Ö->
y
, 
s
->
w
, s->
h
);

190 
	`døw_ˇnvas
(
°©e
, 
p
->
x
,Ö->
y
, 
s
->
w
, s->
h
);

191 
	}
}

196 
	$ªdøw_powîs
(
nb°©e
 *
°©e
, 
x
, 
y
, 
w
, 
h
)

198 
powî
 *
p
;

199 
•rôe
 *
s
;

200 
px
, 
py
, 
pxx
, 
pyy
, 
pw
, 
ph
;

203 
p
 = 
°©e
->
powîs
;Ö;Ö =Ö->
√xt
) {

206 
s
 = 
°©e
->
powî•rôes
[
p
->
ty≥
];

209 if(
x
 > 
p
->xË
px
 = x;

210 
px
 = 
p
->
x
;

213 if(
y
 > 
p
->yË
py
 = y;

214 
py
 = 
p
->
y
;

217 if(
x
 + 
w
 > 
p
->x + 
s
->wË
pxx
 =Ö->x + s->w;

218 
pxx
 = 
x
 + 
w
;

221 if(
y
 + 
h
 > 
p
->y + 
s
->hË
pyy
 =Ö->y + s->h;

222 
pyy
 = 
y
 + 
h
;

225 
pw
 = 
pxx
 - 
px
;

226 
ph
 = 
pyy
 - 
py
;

229 if(
pw
 > 0 && 
ph
 > 0Ë
	`døw_powî
(
°©e
, 
p
, 
px
, 
py
,Öw,Öh);

231 
	}
}

234 
	$de°roy_powî
(
nb°©e
 *
°©e
, 
powî
 *
p
)

236 
powî
 *
µ
;

239 if(
p
 =
°©e
->
powîs
Ë°©e->powî†p->
√xt
;

242 
µ
 = 
°©e
->
powîs
;Ö∞&&Öp->
√xt
 !
p
;Öp =Öp->next);

245 if(!
µ
) {

246 
	`Ârötf
(
°dîr
, "InternalÉrror: couldn't find "

252 
µ
->
√xt
 = 
p
->next;

256 
	`‰ì
(
p
);

257 
	}
}

261 
	$powî_cﬁlisi⁄
(
nb°©e
 *
°©e
, 
powî
 *
p
)

263 
p
->
ty≥
) {

264 
POWERW
:

265 
	`a˘iv©e_wideb©
(
°©e
);

267 
POWERS
:

268 
	`a˘iv©e_¶owmŸi⁄
(
°©e
);

270 
POWERT
:

271 
	`a˘iv©e_°ickyb©
(
°©e
);

273 
POWERP
:

274 
	`a˘iv©e_powîbÆl
(
°©e
);

276 
POWERN
:

277 
	`a˘iv©e_«ºowb©
(
°©e
);

279 
POWERF
:

280 
	`a˘iv©e_Á°mŸi⁄
(
°©e
);

283 
	}
}

288 
	$™im©e_powîs
(
nb°©e
 *
°©e
)

290 
•rôe
 *
s
;

291 
powî
 *
p
, *
≤ext
;

294 
p
 = 
°©e
->
powîs
;Ö;Ö = 
≤ext
) {

298 
≤ext
 = 
p
->
√xt
;

301 
s
 = 
°©e
->
powî•rôes
[
p
->
ty≥
];

304 
	`døw_background
(
°©e
, 
p
->
x
,Ö->
y
, 
s
->
w
, s->
h
);

307 
	`døw_bricks
(
°©e
, 
p
->
x
,Ö->
y
, 
s
->
w
, s->
h
);

310 
p
->
y
 +
°©e
->
powîv
;

313 if(
p
->
y
 + 
s
->
h
 > 
°©e
->
ˇnvasheight
) {

316 
	`døw_ˇnvas
(
°©e
, 
p
->
x
,Ö->
y
 - sèã->
powîv
,

317 
s
->
w
, s->
h
);

320 
	`de°roy_powî
(
°©e
, 
p
);

323 } if(
p
->
y
 + 
s
->
h
 > 
°©e
->
ˇnvasheight
 - sèã->
b©height


324 && 
p
->
x
 + 
s
->
w
 > 
°©e
->
b©x
 -

325 (
°©e
->
b©widths
[°©e->
b©
] / 2) &&

326 
p
->
x
 < 
°©e
->
b©x
 +

327 (
°©e
->
b©widths
[°©e->
b©
] / 2)) {

330 
	`døw_ˇnvas
(
°©e
, 
p
->
x
,Ö->
y
 - sèã->
powîv
,

331 
s
->
w
, s->
h
);

334 
	`powî_cﬁlisi⁄
(
°©e
, 
p
);

337 
	`de°roy_powî
(
°©e
, 
p
);

341 
	`døw_powî
(
°©e
, 
p
,Ö->
x
,Ö->
y
, 
s
->
w
, s->
h
);

346 
	`ªdøw_bÆl
(
°©e
);

349 
p
 = 
°©e
->
powîs
;Ö;Ö =Ö->
√xt
)

350 
	`døw_ˇnvas
(
°©e
, 
p
->
x
,Ö->
y
 - sèã->
powîv
, 
s
->
w
,

351 
s
->
h
 + 
°©e
->
powîv
);

353 
	}
}

	@demos/nbreaker/scores.c

36 
	~<î∫o.h
>

37 
	~<°dio.h
>

38 
	~<°dlib.h
>

39 
	~<°rög.h
>

41 
	~<«no-X.h
>

42 
	~<nxcﬁ‹s.h
>

43 
	~"nbªakî.h
"

46 
	$ö¸emít_sc‹e
(
nb°©e
 *
°©e
, 
poöts
)

48 
°©e
->
sc‹es
.
s
 +
poöts
;

49 
	`døw_sc‹es
(
°©e
);

51 
	`døw_ˇnvas
(
°©e
, 0, 0, sèã->
ˇnvaswidth
, sèã->
sc‹es
.
h
);

52 
	}
}

55 
	$lﬂd_hisc‹e
(
nb°©e
 *
°©e
)

57 
FILE
 *
Â
;

58 
i
, 
n
;

59 
buf
[256];

62 
	`¢¥ötf
(
buf
, 256, "%s/"
HISCORE_FILE
, 
°©e
->
gamedú
);

65 if(!(
Â
 = 
	`f›í
(
buf
, "r"))) {

70 if(
î∫o
 !
ENOENT
)

71 
	`Ârötf
(
°dîr
, "Couldn't open high score file \"%s\""

72 "f‹Ñódög: %s\n", 
buf
, 
	`°ªº‹
(
î∫o
));

74 
°©e
->
sc‹es
.
hi
 = sèã->sc‹es.
fhi
 = 0;

78 
i
 = 
	`fsˇnf
(
Â
, "%d", &
n
);

80 
	`f˛o£
(
Â
);

84 if(
i
 != 1) {

85 
	`Ârötf
(
°dîr
, "Couldn'tÑead high score file\n");

86 
n
 = 0;

91 
°©e
->
sc‹es
.
hi
 = sèã->sc‹es.
fhi
 = 
n
;

92 
	}
}

95 
	$ßve_hisc‹e
(
nb°©e
 *
°©e
)

97 
FILE
 *
Â
;

98 
buf
[256];

101 if(
°©e
->
sc‹es
.
s
 > sèã->sc‹es.
hi
)

102 
°©e
->
sc‹es
.
hi
 = sèã->sc‹es.
s
;

108 if(
°©e
->
sc‹es
.
hi
 <°©e->sc‹es.
fhi
) ;

111 
	`¢¥ötf
(
buf
, 256, "%s/"
HISCORE_FILE
, 
°©e
->
gamedú
);

115 if(!(
Â
 = 
	`f›í
(
buf
, "w"))) {

116 
	`Ârötf
(
°dîr
, "Couldn't open high score file for writing: "

117 "%s\n", 
	`°ªº‹
(
î∫o
));

123 if((
	`Ârötf
(
Â
, "%d", 
°©e
->
sc‹es
.
hi
)) == -1) {

124 
	`Ârötf
(
°dîr
, "Couldn't writeÅo high score file: %s",

125 
	`°ªº‹
(
î∫o
));

127 } 
°©e
->
sc‹es
.
fhi
 = sèã->sc‹es.
hi
;

129 
	`f˛o£
(
Â
);

130 
	}
}

	@demos/nbreaker/sprite.c

43 
	~<°dio.h
>

44 
	~<°dlib.h
>

45 
	~<°rög.h
>

47 
	~<«no-X.h
>

48 
	~"nbªakî.h
"

53 
•rôe
 *
	$make_•rôe
(
nb°©e
 *
°©e
, *
‚ame
, 
w
, 
h
,

54 
GR_PIXMAP_ID
 
p
, 
GR_ALPHA_ID
 
a
)

56 
•rôe
 *
s
;

59 if(!(
s
 = 
	`mÆloc
((
•rôe
)))) {

60 
	`oom
();

61  
NULL
;

65 if(!
‚ame
Ë
s
->‚amê
NULL
;

67 if(!(
s
->
‚ame
 = 
	`°rdup
(fname))) {

68 
	`oom
();

69 
	`‰ì
(
s
);

70  
NULL
;

75 
s
->
w
 = w;

76 
s
->
h
 = h;

77 
s
->
p
 =Ö;

78 
s
->
a
 =á;

79 
s
->
ußge
 = 1;

82 
s
->
√xt
 = 
°©e
->
•rôñi°
;

83 if(
s
->
√xt
Ës->√xt->
¥ev
 = s;

84 
s
->
¥ev
 = 
NULL
;

85 
°©e
->
•rôñi°
 = 
s
;

87  
s
;

88 
	}
}

94 
•rôe
 *
	$make_em±y_•rôe
(
nb°©e
 *
°©e
, *
‚ame
, 
width
, 
height
)

96 
•rôe
 *
s
;

97 
GR_ALPHA_ID
 
a
;

98 
GR_PIXMAP_ID
 
p
;

102 if(!(
a
 = 
	`GrNewAÕha
(
width
, 
height
)))

103  
NULL
;

104 if(!(
p
 = 
	`GrNewPixm≠
(
width
, 
height
, 
NULL
))) {

105 
	`GrDe°royWödow
(
a
);

106  
NULL
;

110 if(!(
s
 = 
	`make_•rôe
(
°©e
, 
‚ame
, 
width
, 
height
, 
p
, 
a
))) {

111 
	`GrDe°royWödow
(
a
);

112 
	`GrDe°royWödow
(
p
);

113  
NULL
;

114 }  
s
;

115 
	}
}

121 
•rôe
 *
	$lﬂd_•rôe
(
nb°©e
 *
°©e
, *
‚ame
, 
width
, 
height
)

123 
•rôe
 *
s
;

124 
buf
[256];

125 
GR_ALPHA_ID
 
a
;

126 
GR_PIXMAP_ID
 
p
;

127 
GR_IMAGE_ID
 
img
;

128 
GR_IMAGE_INFO
 
ii
;

131 if(!
‚ame
Ë 
NULL
;

136 
s
 = 
°©e
->
•rôñi°
; s; s = s->
√xt
) {

137 if((
width
 =-1 || (width =
s
->
w
 && 
height
 =s->
h
)) &&

138 
s
->
‚ame
 && !
	`°rcmp
(fname, s->fname)) {

139 
s
->
ußge
++;

140  
s
;

146 if(
	`¢¥ötf
(
buf
, 256, "%s/%s", 
°©e
->
gamedú
, 
‚ame
) >= 256){

147 
	`Ârötf
(
°dîr
, "Warning: imageÖath \"%s/%s\" isÅooÜong\n",

148 
°©e
->
gamedú
, sèã->
gamefûe
);

149  
NULL
;

153 if(!(
img
 = 
	`GrLﬂdImageFromFûe
(
buf
, 0))) {

154 
	`Ârötf
(
°dîr
, "Warning: failedÅoÜoad image \"%s\"- make "

157 "ty≥ ha†bì¿buûàötÿthê£rvî\n", 
buf
);

158  
NULL
;

163 if(
width
 =-1 || 
height
 == -1) {

164 
	`GrGëImageInfo
(
img
, &
ii
);

165 
width
 = 
ii
.width;

166 
height
 = 
ii
.height;

170 if(!(
a
 = 
	`GrNewAÕha
(
width
, 
height
))) {

171 
	`GrFªeImage
(
img
);

172  
NULL
;

174 if(!(
p
 = 
	`GrNewPixm≠
(
width
, 
height
, 
NULL
))) {

175 
	`GrFªeImage
(
img
);

176 
	`GrDe°royWödow
(
a
);

177  
NULL
;

182 
	`GrDøwImageToFô
(
p
, 
°©e
->
gc
, 0, 0, 
width
, 
height
, 
img
, 
a
);

183 
	`GrFªeImage
(
img
);

187 if(!(
s
 = 
	`make_•rôe
(
°©e
, 
‚ame
, 
width
, 
height
, 
p
, 
a
))) {

188 
	`GrDe°royWödow
(
a
);

189 
	`GrDe°royWödow
(
p
);

190  
NULL
;

191 }  
s
;

192 
	}
}

197 
	$de°roy_•rôe
(
nb°©e
 *
°©e
, 
•rôe
 *
s
)

199 if(!
s
) ;

201 if(!--
s
->
ußge
) {

203 
	`my‰ì
(
s
->
‚ame
);

204 
	`GrDe°royWödow
(
s
->
p
);

205 
	`GrDe°royWödow
(
s
->
a
);

207 if(
s
 =
°©e
->
•rôñi°
Ë°©e->•rôñi° = s->
√xt
;

208 
s
->
¥ev
->
√xt
 = s->next;

209 if(
s
->
√xt
Ës->√xt->
¥ev
 = s->prev;

210 
	`‰ì
(
s
);

212 
	}
}

216 
	$de°roy_Æl_•rôes
(
nb°©e
 *
°©e
)

218 
•rôe
 *
s
, *
¢ext
 = 
°©e
->
•rôñi°
;

220 (
s
 = 
¢ext
)) {

221 
	`my‰ì
(
s
->
‚ame
);

222 
	`GrDe°royWödow
(
s
->
p
);

223 
	`GrDe°royWödow
(
s
->
a
);

224 
¢ext
 = 
s
->
√xt
;

225 
	`‰ì
(
s
);

227 
°©e
->
•rôñi°
 = 
NULL
;

228 
	}
}

	@demos/nxkbd/keyctrl.c

2 
	~"devi˚.h
"

6 
MWPALENTRY
 
	g∑Àâe
[2] = {

7 
RGBDEF
( 0, 0, 0 ),

8 
RGBDEF
( 255, 255, 255 ),

11 
MWUCHAR
 
	gimagebôs
[] = {

75 
MWIMAGEHDR
 
	gimage_key˘æ
 = {

81 
∑Àâe
,

82 
imagebôs
,

	@demos/nxkbd/keynorm.c

2 
	~"devi˚.h
"

6 
MWPALENTRY
 
	g∑Àâe
[2] = {

7 
RGBDEF
( 0, 0, 0 ),

8 
RGBDEF
( 255, 255, 255 ),

11 
MWUCHAR
 
	gimagebôs
[] = {

75 
MWIMAGEHDR
 
	gimage_keyn‹m
 = {

81 
∑Àâe
,

82 
imagebôs
,

	@demos/nxkbd/keynum.c

2 
	~"devi˚.h
"

6 
MWPALENTRY
 
	g∑Àâe
[2] = {

7 
RGBDEF
( 0, 0, 0 ),

8 
RGBDEF
( 255, 255, 255 ),

11 
MWUCHAR
 
	gimagebôs
[] = {

75 
MWIMAGEHDR
 
	gimage_keynum
 = {

81 
∑Àâe
,

82 
imagebôs
,

	@demos/nxkbd/keyshft.c

2 
	~"devi˚.h
"

6 
MWPALENTRY
 
	g∑Àâe
[2] = {

7 
RGBDEF
( 0, 0, 0 ),

8 
RGBDEF
( 255, 255, 255 ),

11 
MWUCHAR
 
	gimagebôs
[] = {

75 
MWIMAGEHDR
 
	gimage_keysh·
 = {

81 
∑Àâe
,

82 
imagebôs
,

	@demos/nxkbd/nxkbd.c

19 
	~<°dio.h
>

20 
	~<°dlib.h
>

21 
	#MWINCLUDECOLORS


	)

22 
	~"«no-X.h
"

24 
	#TITLE
 "So· Keybﬂrd"

	)

25 
	#DISKIMAGES
 0

	)

26 
	#_SOFTKBD_DEBUG
 0

	)

29 
	#NORM
 1000

	)

30 
	#CNTRL
 1001

	)

31 
	#SHIFT
 1002

	)

32 
	#NUM
 1003

	)

33 
	#INTL
 1004

	)

36 
	#BS
 '\b'

	)

37 
	#F1
 2000

	)

38 
	#NONE
 3000

	)

41 
	#SCANCODES
 41

	)

44 
	#BM_WIDTH
 160

	)

45 
	#BM_HEIGHT
 61

	)

47 
	skeycﬁumn
 {

48 
	mxoff£t
;

49 
	msˇncode
;

52 
	skeyrow
 {

53 
	myoff£t
;

54 
	mheight
;

55 
keycﬁumn
 
	mcﬁumns
[12];

59 
keyrow
 
	gkeyrows
[4] = {

70 
	#C
(
x
Ë((x)&0x1f)

	)

73 
	gn‹mÆ
[
SCANCODES
] = {

74 'q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p', 
BS
,

76 
CNTRL
, 'z', 'x', 'c', 'v', 'b', 'n', 'm', ',', '.', ';',

77 
SHIFT
, 
INTL
, ' ', 
NUM
, '\'', '=', '\\', '/'

80 
	gc⁄åﬁ
[
SCANCODES
] = {

81 
C
('q'),C('w'),C('e'),C('r'),C('t'),C('y'),C('u'),C('i'),C('o'),C('p'),'\033',

82 
C
('a'),C('s'),C('d'),C('f'),C('g'),C('h'),C('j'),C('k'),C('l'),C('_'),'\r',

83 
CNTRL
,
C
('z'),C('x'),C('c'),C('v'),C('b'),C('n'),C('m'),C('\\'),C(']'),C('^'),

84 
SHIFT
,
INTL
,' ',
NUM
,
NONE
,NONE,NONE,'\177'

87 
	gshi·
[
SCANCODES
] = {

88 'Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P', 
BS
,

90 
CNTRL
, 'Z', 'X', 'C', 'V', 'B', 'N', 'M', '<', '>', ':',

91 
SHIFT
, 
INTL
, ' ', 
NUM
, '"', '+', '|', '?'

94 
	gnum
[
SCANCODES
] = {

95 '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', 
BS
,

97 
CNTRL
, 
F1
, F1+1, F1+2, F1+3, F1+4, F1+5, F1+6, F1+7, '`', '~',

98 
SHIFT
, 
INTL
, ' ', 
NUM
, '[', ']', '{', '}'};

100 *
	g‚key
[] = {

105 
	sœyout_°©e
 {

106 *
	mfûíame
;

107 
GR_IMAGE_HDR
 *
	mimagehdr
;

108 *
	msˇncode_å™¶©i⁄s
;

109 
	msshi·
;

110 
	m˘æ_œyout
, 
	mshi·_œyout
, 
	mnum_œyout
;

114 
GR_IMAGE_HDR
 
image_keyn‹m
;

115 
GR_IMAGE_HDR
 
image_key˘æ
;

116 
GR_IMAGE_HDR
 
image_keysh·
;

117 
GR_IMAGE_HDR
 
image_keynum
;

119 
œyout_°©e
 
	gœyout_°©es
[] = {

122 &
image_keyn‹m
,

123 
n‹mÆ
,

129 &
image_keysh·
,

130 
shi·
,

136 &
image_key˘æ
,

137 
c⁄åﬁ
,

143 &
image_keynum
,

144 
num
,

149 
	#N_LAYOUT_STATES
 ((
œyout_°©es
Ë/ ÷ayout_°©es[0]))

	)

151 
GR_WINDOW_ID
 
	gw
;

152 
GR_GC_ID
 
	ggc
;

153 
	gcuºít_œyout
 = 0;

154 #i‡
DISKIMAGES


155 
GR_IMAGE_ID
 
	gœyout_images
[
N_LAYOUT_STATES
];

156 
	gœyout_images_lﬂded
[
N_LAYOUT_STATES
];

159 
KbdWrôe
(
c
);

160 
KbdO≥n
();

161 
KbdClo£
();

164 
	$push_ch¨a˘î
(
c
)

166 #i‡
_SOFTKBD_DEBUG


167 
	`Ârötf
(
°dîr
, "pushed %d (0x%xË'%c'\n", 
c
, c, c);

169 
	`KbdWrôe
(
c
);

170 
	}
}

173 
	$di•œy_œyout
(
œyout
)

175 #i‡
DISKIMAGES


176 
	#LIBDIR
 "."

	)

177 i‡(!
œyout_images_lﬂded
[
œyout
] ) {

178 
buf
[128];

184 
	`•rötf
(
buf
, "%s/%s", 
LIBDIR
, 
œyout_°©es
[
œyout
].
fûíame
);

185 
œyout_images
[
œyout
] = 
	`GrLﬂdImageFromFûe
(
buf
, 0);

186 
œyout_images_lﬂded
[
œyout
] = 1;

188 
	`GrDøwImageToFô
(
w
, 
gc
, 0, 0, -1, -1, 
œyout_images
[
œyout
]);

190 
	`GrDøwImageBôs
(
w
, 
gc
, 0, 0, 
œyout_°©es
[
œyout
].
imagehdr
);

192 
	}
}

195 
	$¥o˚ss_sˇncode
(
sˇncode
)

197 
c
;

199 
c
 = 
œyout_°©es
[
cuºít_œyout
].
sˇncode_å™¶©i⁄s
[
sˇncode
];

200 #i‡
_SOFTKBD_DEBUG


201 
	`¥ötf
("sˇncodê%d ", 
sˇncode
);

202 
	`¥ötf
("current_layout = %d ('%s'), scancode (translated) = %d\n",

203 
cuºít_œyout
, 
œyout_°©es
[cuºít_œyout].
fûíame
, 
c
);

206 
c
) {

208 i‡(
c
 < 256)

212 i‡(
c
 >
F1
 && c < F1+10) {

213 *
p
 = 
‚key
[
c
-
F1
];

214 *
p
)

215 
	`push_ch¨a˘î
(*
p
++);

220 i‡(
c
 =
NONE
)

222 
	`Ârötf
(
°dîr
, "nxkbd: key with unknownÅranslationÖressed\n");

224 
CNTRL
:

225 
cuºít_œyout
 = 
œyout_°©es
[cuºít_œyout].
˘æ_œyout
;

226 
	`di•œy_œyout
(
cuºít_œyout
);

228 
SHIFT
:

229 
cuºít_œyout
 = 
œyout_°©es
[cuºít_œyout].
shi·_œyout
;

230 
	`di•œy_œyout
(
cuºít_œyout
);

232 
NUM
:

233 
cuºít_œyout
 = 
œyout_°©es
[cuºít_œyout].
num_œyout
;

234 
	`di•œy_œyout
(
cuºít_œyout
);

236 
INTL
:

237 #i‡
_SOFTKBD_DEBUG


238 
	`¥ötf
("INTLÇot yet implemented\n");

243 i‡(
œyout_°©es
[
cuºít_œyout
].
sshi·
) {

244 
cuºít_œyout
 = 0;

245 
	`di•œy_œyout
(
cuºít_œyout
);

248 
	`push_ch¨a˘î
(
c
);

249 
	}
}

253 
	$mou£_hô
(
x
, 
y
)

255 
row
, 
cﬁumn
;

257 
row
 = 0;Ñow < 4;Ñow++) {

258 i‡(
y
 >
keyrows
[
row
].
yoff£t
 &&

259 
y
 < 
keyrows
[
row
].
yoff£t
+keyrows[row].
height
) {

260 
cﬁumn
 = 0; column < 12; column++) {

261 i‡(
keyrows
[
row
].
cﬁumns
[
cﬁumn
].
xoff£t
 == 999) {

262 
	`Ârötf
(
°dîr
, "offÉnd ofÑow\n");

265 i‡(
x
 < 
keyrows
[
row
].
cﬁumns
[
cﬁumn
 + 1].
xoff£t
) {

266 
sˇncode
 = 
keyrows
[
row
].
cﬁumns
[
cﬁumn
].scancode;

267 
	`¥o˚ss_sˇncode
(
sˇncode
);

274 
	`Ârötf
(
°dîr
, "nxkbd: off bottom\n");

275 
	}
}

278 
	$maö
(
¨gc
, * 
¨gv
[])

280 
GR_EVENT
 
evít
;

281 
GR_WM_PROPERTIES
 
¥›s
;

283 i‡(
	`GrO≥n
() < 0) {

284 
	`Ârötf
(
°dîr
, "nxkbd: cannot open graphics\n");

285 
	`exô
(1);

288 i‡(
	`KbdO≥n
() < 0) {

289 
	`Ârötf
(
°dîr
, "nxkbd: cannot open kbdÇamedÖipe\n");

291 
	`exô
(1);

295 #i‡!
DISKIMAGES


296 
	`GrReqShmCmds
(4096);

298 
w
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
,

299 0, 0, 
BM_WIDTH
, 
BM_HEIGHT
,

300 0, 
WHITE
, 
BLACK
);

302 
	`GrSñe˘Evíts
(
w
, 
GR_EVENT_MASK_CLOSE_REQ
 |

303 
GR_EVENT_MASK_EXPOSURE
 |

306 
GR_EVENT_MASK_BUTTON_DOWN
);

309 i‡(
¥›s
.
tôÀ
)

310 
	`‰ì
(
¥›s
.
tôÀ
);

313 
¥›s
.
tôÀ
 = 
	`mÆloc
(18);

314 i‡(
¥›s
.
tôÀ
)

315 
	`°r˝y
(
¥›s
.
tôÀ
, 
TITLE
);

317 
¥›s
.
Êags
 =

318 
GR_WM_FLAG_NORESIZE
 |

319 
GR_WM_FLAG_NOBORDERS
 |

320 
GR_WM_FLAG_NOTITLEBAR
 |

321 
GR_WM_FLAG_NOFOCUS
;

324 
¥›s
.
Êags
 = 
GR_WM_FLAGS_PROPS
 | 
GR_WM_FLAGS_TITLE
;

325 
¥›s
.¥›†
GR_WM_PROPS_NOFOCUS
;

326 
¥›s
.¥›†| 
GR_WM_PROPS_NORAISE
 |

327 
GR_WM_PROPS_BORDER
 | 
GR_WM_PROPS_CAPTION
 | 
GR_WM_PROPS_CLOSEBOX
;

328 
¥›s
.
tôÀ
 = 
TITLE
;

329 
	`GrSëWMPr›îtõs
(
w
, &
¥›s
);

331 
	`GrM≠Wödow
(
w
);

333 
gc
 = 
	`GrNewGC
();

335 
cuºít_œyout
 = 0;

337 
	`GrGëNextEvít
(&
evít
);

339 
evít
.
ty≥
) {

340 
GR_EVENT_TYPE_CLOSE_REQ
:

341 #i‡
DISKIMAGES


343 
i
;

345 
i
=0; i < 
N_LAYOUT_STATES
; i++) {

346 if–!
œyout_images_lﬂded
[
i
] )

348 
	`GrFªeImage
(
œyout_images
[
i
]);

352 
	`GrClo£
();

353 
	`exô
(0);

355 
GR_EVENT_TYPE_EXPOSURE
:

356 
	`di•œy_œyout
(
cuºít_œyout
);

358 
GR_EVENT_TYPE_BUTTON_DOWN
:

359 
	`mou£_hô
(
evít
.
buâ⁄
.
x
,Évít.buâ⁄.
y
);

362 
GR_EVENT_TYPE_FOCUS_IN
:

363 i‡(
evít
.
gíîÆ
.
Ÿhîid
 != 1) {

364 
œ°focus
 = 
evít
.
gíîÆ
.
Ÿhîid
;

365 
	`GrSëFocus
(
œ°focus
);

374 
	}
}

	@demos/nxkbd/srvconn.c

6 
	~<uni°d.h
>

7 
	~<f˙é.h
>

8 
	~"«no-X.h
"

10 
	#KBDPIPE
 0

	)

12 #i‡
KBDPIPE


13 
	gKBD_NAMED_PIPE
[] = "/tmp/.nano-X-softkbd";

14 
	gkbd_fd
 = -1;

17 
	$KbdO≥n
()

19 i‡(
kbd_fd
 != -1)

20 
	`˛o£
(
kbd_fd
);

22 i‡((
kbd_fd
 = 
	`›í
(
KBD_NAMED_PIPE
, 
O_WRONLY
)) < 0)

25  
kbd_fd
;

26 
	}
}

29 
	$KbdClo£
()

31 if(
kbd_fd
 >= 0) {

32 
	`˛o£
(
kbd_fd
);

33 
kbd_fd
 = -1;

35 
	}
}

38 
	$KbdWrôe
(
c
)

40 
cc
 = 
c
 & 0xff;

42  
	`wrôe
(
kbd_fd
, &
cc
, 1);

43 
	}
}

48 
	$KbdO≥n
()

51 
	}
}

54 
	$KbdClo£
()

56 
	}
}

59 
	$KbdWrôe
(
c
)

61 
GR_WINDOW_ID
 
wö
 = 
	`GrGëFocus
();

64 
	`GrInje˘KeybﬂrdEvít
(
wö
, 
c
, 0, 0, 1);

65 
	`GrInje˘KeybﬂrdEvít
(
wö
, 
c
, 0, 0, 0);

67 
	}
}

	@demos/nxroach/nxroach.c

13 
	gC›yright
[] = "nxroach\nCopyright 1991 J.T. Anderson";

15 
	~<°dio.h
>

16 
	~<°dlib.h
>

17 
	~<°rög.h
>

18 
	~<m©h.h
>

19 
	~<sig«l.h
>

20 
	~<time.h
>

21 
	#MWINCLUDECOLORS


	)

22 
	~"«no-X.h
"

24 
	#N⁄e
 0

	)

25 
	#Pixm≠
 
GR_WINDOW_ID


	)

26 
	~"rﬂchm≠.h
"

28 
	#PIXBUFSIZ
 (48*48Ë

	)

29 
	#SCAMPER_EVENT
 99

	)

30 
	#BLACK_PIXEL
 
	`MW0RGB
(0,0,0Ë

	)

32 
	sRﬂch
 {

33 
RﬂchM≠
 *
	mΩ
;

34 
	mödex
;

35 
	mx
;

36 
	my
;

37 
	mötX
;

38 
	mötY
;

39 
	mhiddí
;

40 
	mtu∫Le·
;

41 
	m°ïs
;

42 } 
	tRﬂch
;

44 
GR_COORD
 
	gdi•œy_width
, 
	gdi•œy_height
;

45 
GR_GC_ID
 
	ggc
;

46 
GR_COLOR
 
	grﬂchCﬁ‹
 = 
BLACK_PIXEL
;

47 
GR_REGION_ID
 
	groŸVisibÀ
 = 0;

48 
GR_BOOL
 
	gd⁄e
 = 
GR_FALSE
;

49 
GR_BOOL
 
	gevítBlock
 = 
GR_FALSE
;

51 
Rﬂch
 *
	grﬂches
;

52 
	gmaxRﬂches
 = 10;

53 
	gcurRﬂches
 = 0;

54 
	grﬂchS≥ed
 = 20.0;

56 
Ußge
();

57 
SigH™dÀr
(
sig
);

58 
AddRﬂch
();

59 
MoveRﬂch
(
Rx
);

60 
DøwRﬂches
();

61 
CovîRoŸ
();

62 
CÆcRoŸVisibÀ
();

63 
M¨kHiddíRﬂches
();

66 
	$maö
(
ac
, **
av
)

68 
ax
;

69 *
¨g
;

70 
RﬂchM≠
 *
Ω
;

71 
rx
;

72 
™gÀ
;

73 
GR_EVENT
 
ev
;

74 
nVis
;

75 
√edCÆc
;

76 
GR_SCREEN_INFO
 
söfo
;

81 
ax
=1;áx<
ac
;áx++) {

82 
¨g
 = 
av
[
ax
];

83 i‡(
	`°rcmp
(
¨g
, "-rc") == 0) {

84 
rﬂchCﬁ‹
 = 
	`©oi
(
av
[++
ax
]);

86 i‡(
	`°rcmp
(
¨g
, "-speed") == 0) {

87 
rﬂchS≥ed
 = 
	`©of
(
av
[++
ax
]);

89 i‡(
	`°rcmp
(
¨g
, "-roaches") == 0) {

90 
maxRﬂches
 = 
	`°πﬁ
(
av
[++
ax
], (**)
NULL
, 0);

93 
	`Ußge
();

97 
	`§™d
(()
	`time
((*)
NULL
));

102 
	`sig«l
(
SIGKILL
, 
SigH™dÀr
);

103 
	`sig«l
(
SIGINT
, 
SigH™dÀr
);

104 
	`sig«l
(
SIGTERM
, 
SigH™dÀr
);

105 
	`sig«l
(
SIGHUP
, 
SigH™dÀr
);

107 i‡(
	`GrO≥n
() < 0) {

108 
	`Ârötf
(
°dîr
, "can't open graphics\n");

109 
	`exô
(1);

112 
	`GrGëS¸ìnInfo
(&
söfo
);

113 
di•œy_width
 = 
söfo
.
cﬁs
;

114 
di•œy_height
 = 
söfo
.
rows
;

119 
ax
=0;áx<360;áx+=
ROACH_ANGLE
) {

120 
rx
 = 
ax
 / 
ROACH_ANGLE
;

121 
™gÀ
 = 
rx
 * 0.261799387799;

122 
Ω
 = &
rﬂchPix
[
rx
];

123 
Ω
->
pixm≠
 = 
	`GrNewPixm≠FromD©a
‘p->
width
,Ñp->
height
, 
WHITE
, 
BLACK
,

124 
Ω
->
rﬂchBôs
, 
GR_BMDATA_BYTEREVERSE
|
GR_BMDATA_BYTESWAP
);

125 
Ω
->
söe
 = 
	`sö
(
™gÀ
);

126 
Ω
->
cosöe
 = 
	`cos
(
™gÀ
);

129 
rﬂches
 = (
Rﬂch
 *)
	`mÆloc
((RﬂchË* 
maxRﬂches
);

131 
gc
 = 
	`GrNewGC
();

133 
curRﬂches
 < 
maxRﬂches
)

134 
	`AddRﬂch
();

136 
	`GrSñe˘Evíts
(
GR_ROOT_WINDOW_ID
, 
GR_EVENT_MASK_EXPOSURE
 | 
GR_EVENT_MASK_CHLD_UPDATE
);

138 
√edCÆc
 = 1;

139 !
d⁄e
) {

140 i‡(
	`GrPìkEvít
(&
ev
))

141 
	`GrGëNextEvít
(&
ev
);

143 i‡(
√edCÆc
) {

144 
√edCÆc
 = 
	`CÆcRoŸVisibÀ
();

146 
nVis
 = 
	`M¨kHiddíRﬂches
();

147 i‡(
nVis
) {

148 
ev
.
ty≥
 = 
SCAMPER_EVENT
;

151 
	`DøwRﬂches
();

152 
evítBlock
 = 
GR_TRUE
;

153 
	`GrGëNextEvít
(&
ev
);

154 
evítBlock
 = 
GR_FALSE
;

158 
ev
.
ty≥
) {

159 
SCAMPER_EVENT
:

160 
rx
=0;Ñx<
curRﬂches
;Ñx++) {

161 i‡(!
rﬂches
[
rx
].
hiddí
)

162 
	`MoveRﬂch
(
rx
);

164 
	`DøwRﬂches
();

165 
	`GrDñay
(10);

168 
GR_EVENT_TYPE_EXPOSURE
:

169 
GR_EVENT_TYPE_CHLD_UPDATE
:

170 
√edCÆc
 = 1;

176 
	`CovîRoŸ
();

177 
	`GrClo£
();

179 
	}
}

182 
	$Ußge
()

184 
	`Ârötf
(
°dîr
, "Usage:Çxroach [options]\n\n");

185 
	`Ârötf
(
°dîr
, "Options:\n");

186 
	`Ârötf
(
°dîr
, " -rcÑoachcolor\n");

187 
	`Ârötf
(
°dîr
, " -roachesÇumroaches\n");

188 
	`Ârötf
(
°dîr
, " -speedÑoachspeed\n");

190 
	`exô
(1);

191 
	}
}

194 
	$SigH™dÀr
(
sig
)

201 i‡(
evítBlock
) {

202 
	`GrClo£
();

203 
	`exô
(0);

206 
d⁄e
 = 
GR_TRUE
;

208 
	}
}

214 
	$R™dI¡
(
maxVÆ
)

216  
	`ønd
(Ë% 
maxVÆ
;

217 
	}
}

223 
	$RﬂchInRe˘
(
Rﬂch
 *
rﬂch
, 
rx
, 
ry
, 
x
, 
y
,

224 
width
, 
height
)

226 i‡(
rx
 < 
x
)  0;

227 i‡((
rx
 + 
rﬂch
->
Ω
->
width
Ë> (
x
 + width))  0;

228 i‡(
ry
 < 
y
)  0;

229 i‡((
ry
 + 
rﬂch
->
Ω
->
height
Ë> (
y
 + height))  0;

232 
	}
}

238 
	$RﬂchOvîRe˘
(
Rﬂch
 *
rﬂch
, 
rx
, 
ry
, 
x
, 
y
,

239 
width
, 
height
)

241 i‡(
rx
 >(
x
 + 
width
))  0;

242 i‡((
rx
 + 
rﬂch
->
Ω
->
width
Ë<
x
)  0;

243 i‡(
ry
 >(
y
 + 
height
))  0;

244 i‡((
ry
 + 
rﬂch
->
Ω
->
height
Ë<
y
)  0;

247 
	}
}

253 
	$AddRﬂch
()

255 
Rﬂch
 *
r
;

257 i‡(
curRﬂches
 < 
maxRﬂches
) {

258 
r
 = &
rﬂches
[
curRﬂches
++];

259 
r
->
ödex
 = 
	`R™dI¡
(
ROACH_HEADINGS
);

260 
r
->
Ω
 = &
rﬂchPix
[r->
ödex
];

261 
r
->
x
 = 
	`R™dI¡
(
di•œy_width
 -Ñ->
Ω
->
width
);

262 
r
->
y
 = 
	`R™dI¡
(
di•œy_height
 -Ñ->
Ω
->
height
);

263 
r
->
ötX
 = -1;

264 
r
->
ötY
 = -1;

265 
r
->
hiddí
 = 0;

266 
r
->
°ïs
 = 
	`R™dI¡
(200);

267 
r
->
tu∫Le·
 = 
	`R™dI¡
(100) >= 50;

269 
	}
}

275 
	$Tu∫Rﬂch
(
Rﬂch
 *
rﬂch
)

277 i‡(
rﬂch
->
ödex
 !‘ﬂch->
Ω
 - 
rﬂchPix
)) ;

279 i‡(
rﬂch
->
tu∫Le·
) {

280 
rﬂch
->
ödex
 +(
	`R™dI¡
(30) / 10) + 1;

281 i‡(
rﬂch
->
ödex
 >
ROACH_HEADINGS
)

282 
rﬂch
->
ödex
 -
ROACH_HEADINGS
;

285 
rﬂch
->
ödex
 -(
	`R™dI¡
(30) / 10) + 1;

286 i‡(
rﬂch
->
ödex
 < 0)

287 
rﬂch
->
ödex
 +
ROACH_HEADINGS
;

289 
	}
}

295 
	$MoveRﬂch
(
rx
)

297 
Rﬂch
 *
rﬂch
;

298 
Rﬂch
 *
r2
;

299 
√wX
;

300 
√wY
;

301 
ii
;

303 
rﬂch
 = &
rﬂches
[
rx
];

304 
√wX
 = 
rﬂch
->
x
 + (
rﬂchS≥ed
 *Ñﬂch->
Ω
->
cosöe
);

305 
√wY
 = 
rﬂch
->
y
 - (
rﬂchS≥ed
 *Ñﬂch->
Ω
->
söe
);

307 i‡(
	`RﬂchInRe˘
(
rﬂch
, ()
√wX
, ()
√wY
,

308 0, 0, 
di•œy_width
, 
di•œy_height
)) {

310 
rﬂch
->
x
 = 
√wX
;

311 
rﬂch
->
y
 = 
√wY
;

313 i‡(
rﬂch
->
°ïs
-- <= 0) {

314 
	`Tu∫Rﬂch
(
rﬂch
);

315 
rﬂch
->
°ïs
 = 
	`R™dI¡
(200);

318 
ii
=
rx
+1; ii<
curRﬂches
; ii++) {

319 
r2
 = &
rﬂches
[
ii
];

320 i‡(
	`RﬂchOvîRe˘
(
rﬂch
, ()
√wX
, ()
√wY
,

321 
r2
->
ötX
,Ñ2->
ötY
,Ñ2->
Ω
->
width
,Ñ2->Ω->
height
)) {

323 
	`Tu∫Rﬂch
(
rﬂch
);

328 
	`Tu∫Rﬂch
(
rﬂch
);

330 
	}
}

336 
	$DøwRﬂches
()

338 
Rﬂch
 *
rﬂch
;

339 
rx
;

341 
rx
=0;Ñx<
curRﬂches
;Ñx++) {

342 
rﬂch
 = &
rﬂches
[
rx
];

344 i‡(
rﬂch
->
ötX
 >= 0) {

345 
	`GrCÀ¨Aªa
(
GR_ROOT_WINDOW_ID
, 
rﬂch
->
ötX
,Ñﬂch->
ötY
,

346 
rﬂch
->
Ω
->
width
,Ñﬂch->Ω->
height
, 
GR_FALSE
);

350 
rx
=0;Ñx<
curRﬂches
;Ñx++) {

351 
rﬂch
 = &
rﬂches
[
rx
];

353 i‡(!
rﬂch
->
hiddí
) {

354 
size
 = 
rﬂch
->
Ω
->
width
 *Ñﬂch->Ω->
height
;

355 
GR_PIXELVAL
 
rﬂchbuf
[
PIXBUFSIZ
];

356 
GR_PIXELVAL
 
s¸ìnbuf
[
PIXBUFSIZ
];

357 
i
;

359 
rﬂch
->
ötX
 =Ñﬂch->
x
;

360 
rﬂch
->
ötY
 =Ñﬂch->
y
;

361 
rﬂch
->
Ω
 = &
rﬂchPix
[rﬂch->
ödex
];

364 
	`XSëF‹eground
(
di•œy
, 
gc
, 
	`AŒocNamedCﬁ‹
(
rﬂchCﬁ‹
, 
bœck
));

365 
	`XSëFûlStyÀ
(
di•œy
, 
gc
, 
FûlStù∂ed
);

366 
	`XSëStù∂e
(
di•œy
, 
gc
, 
rﬂch
->
Ω
->
pixm≠
);

367 
	`XSëTSOrigö
(
di•œy
, 
gc
, 
rﬂch
->
ötX
,Ñﬂch->
ötY
);

368 
	`XFûlRe˘™gÀ
(
di•œy
, 
roŸWö
, 
gc
,

369 
rﬂch
->
ötX
,Ñﬂch->
ötY
,Ñﬂch->
Ω
->
width
,Ñﬂch->Ω->
height
);

373 
	`GrRódAªa
(
rﬂch
->
Ω
->
pixm≠
, 0, 0,

374 
rﬂch
->
Ω
->
width
,Ñﬂch->Ω->
height
, 
rﬂchbuf
);

377 
	`GrRódAªa
(
GR_ROOT_WINDOW_ID
, 
rﬂch
->
ötX
,Ñﬂch->
ötY
,

378 
rﬂch
->
Ω
->
width
,Ñﬂch->Ω->
height
, 
s¸ìnbuf
);

381 
i
=0; i<
size
; ++i)

382 i‡(
rﬂchbuf
[
i
] !
BLACK_PIXEL
)

383 
s¸ìnbuf
[
i
] = 
rﬂchCﬁ‹
;

386 
	`GrAªa
(
GR_ROOT_WINDOW_ID
, 
gc
, 
rﬂch
->
ötX
,Ñﬂch->
ötY
,

387 
rﬂch
->
Ω
->
width
,Ñﬂch->Ω->
height
, 
s¸ìnbuf
, 
MWPF_PIXELVAL
);

390 
rﬂch
->
ötX
 = -1;

393 
	`GrFlush
();

394 
	}
}

400 
	$CovîRoŸ
()

402 
GR_WINDOW_ID
 
rﬂchWö
;

404 
rﬂchWö
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 0, 0, 
di•œy_width
, 
di•œy_height
,

405 0, 
CYAN
, 
BLACK
);

406 
	`GrLowîWödow
(
rﬂchWö
);

407 
	`GrM≠Wödow
(
rﬂchWö
);

408 
	`GrFlush
();

409 
	}
}

415 
	$CÆcRoŸVisibÀ
()

417 
GR_REGION_ID
 
covîed
;

418 
GR_REGION_ID
 
visibÀ
;

419 
GR_WINDOW_ID
 
∑ª¡
;

420 
GR_WINDOW_ID
 *
chûdªn
;

421 
GR_COUNT
 
nChûdªn
;

422 
GR_COUNT
 
wx
;

423 
GR_RECT
 
ª˘
;

424 
GR_WINDOW_INFO
 
öfo
;

429 
	`GrQuîyTªe
(
GR_ROOT_WINDOW_ID
, &
∑ª¡
, &
chûdªn
, &
nChûdªn
);

435 
covîed
 = 
	`GrNewRegi⁄
();

436 
wx
=0; wx<
nChûdªn
; wx++) {

437 
	`GrGëWödowInfo
(
chûdªn
[
wx
], &
öfo
);

438 i‡(
öfo
.
ªÆized
) {

439 
ª˘
.
x
 = 
öfo
.x;

440 
ª˘
.
y
 = 
öfo
.y;

441 
ª˘
.
width
 = 
öfo
.width;

442 
ª˘
.
height
 = 
öfo
.height;

443 
	`GrUni⁄Re˘WôhRegi⁄
(
covîed
, &
ª˘
);

446 
	`‰ì
(
chûdªn
);

451 
visibÀ
 = 
	`GrNewRegi⁄
();

452 
ª˘
.
x
 = 0;

453 
ª˘
.
y
 = 0;

454 
ª˘
.
width
 = 
di•œy_width
;

455 
ª˘
.
height
 = 
di•œy_height
;

456 
	`GrUni⁄Re˘WôhRegi⁄
(
visibÀ
, &
ª˘
);

457 
	`GrSubåa˘Regi⁄
(
visibÀ
, visibÀ, 
covîed
);

458 
	`GrDe°royRegi⁄
(
covîed
);

463 i‡(
roŸVisibÀ
)

464 
	`GrDe°royRegi⁄
(
roŸVisibÀ
);

465 
roŸVisibÀ
 = 
visibÀ
;

470 
wx
=0; wx<
curRﬂches
; wx++)

471 
rﬂches
[
wx
].
hiddí
 = 0;

474 
	}
}

480 
	$M¨kHiddíRﬂches
()

482 
rx
;

483 
Rﬂch
 *
r
;

484 
nVisibÀ
;

486 
nVisibÀ
 = 0;

487 
rx
=0;Ñx<
curRﬂches
;Ñx++) {

488 
r
 = &
rﬂches
[
rx
];

490 i‡(!
r
->
hiddí
) {

491 i‡(
r
->
ötX
 > 0 && 
	`GrRe˘InRegi⁄
(
roŸVisibÀ
,Ñ->ötX,Ñ->
ötY
,

492 
r
->
Ω
->
width
,Ñ->Ω->
height
Ë=
MWRECT_OUT
) {

493 
r
->
hiddí
 = 1;

496 
nVisibÀ
++;

501  
nVisibÀ
;

502 
	}
}

	@demos/nxroach/roachmap.h

1 
	~"rﬂch000.xbm
"

2 
	~"rﬂch015.xbm
"

3 
	~"rﬂch030.xbm
"

4 
	~"rﬂch045.xbm
"

5 
	~"rﬂch060.xbm
"

6 
	~"rﬂch075.xbm
"

7 
	~"rﬂch090.xbm
"

8 
	~"rﬂch105.xbm
"

9 
	~"rﬂch120.xbm
"

10 
	~"rﬂch135.xbm
"

11 
	~"rﬂch150.xbm
"

12 
	~"rﬂch165.xbm
"

13 
	~"rﬂch180.xbm
"

14 
	~"rﬂch195.xbm
"

15 
	~"rﬂch210.xbm
"

16 
	~"rﬂch225.xbm
"

17 
	~"rﬂch240.xbm
"

18 
	~"rﬂch255.xbm
"

19 
	~"rﬂch270.xbm
"

20 
	~"rﬂch285.xbm
"

21 
	~"rﬂch300.xbm
"

22 
	~"rﬂch315.xbm
"

23 
	~"rﬂch330.xbm
"

24 
	~"rﬂch345.xbm
"

26 
	#ROACH_HEADINGS
 24

	)

27 
	#ROACH_ANGLE
 15

	)

29 
	sRﬂchM≠
 {

30 *
	mrﬂchBôs
;

31 
Pixm≠
 
	mpixm≠
;

32 
	mwidth
;

33 
	mheight
;

34 
	msöe
;

35 
	mcosöe
;

36 } 
	tRﬂchM≠
;

38 
RﬂchM≠
 
	grﬂchPix
[] = {

39 {
rﬂch000_bôs
, 
N⁄e
, 
rﬂch000_height
, 
rﬂch000_width
, 0.0, 0.0},

40 {
rﬂch015_bôs
, 
N⁄e
, 
rﬂch015_height
, 
rﬂch015_width
, 0.0, 0.0},

41 {
rﬂch030_bôs
, 
N⁄e
, 
rﬂch030_height
, 
rﬂch030_width
, 0.0, 0.0},

42 {
rﬂch045_bôs
, 
N⁄e
, 
rﬂch045_height
, 
rﬂch045_width
, 0.0, 0.0},

43 {
rﬂch060_bôs
, 
N⁄e
, 
rﬂch060_height
, 
rﬂch060_width
, 0.0, 0.0},

44 {
rﬂch075_bôs
, 
N⁄e
, 
rﬂch075_height
, 
rﬂch075_width
, 0.0, 0.0},

45 {
rﬂch090_bôs
, 
N⁄e
, 
rﬂch090_height
, 
rﬂch090_width
, 0.0, 0.0},

46 {
rﬂch105_bôs
, 
N⁄e
, 
rﬂch105_height
, 
rﬂch105_width
, 0.0, 0.0},

47 {
rﬂch120_bôs
, 
N⁄e
, 
rﬂch120_height
, 
rﬂch120_width
, 0.0, 0.0},

48 {
rﬂch135_bôs
, 
N⁄e
, 
rﬂch135_height
, 
rﬂch135_width
, 0.0, 0.0},

49 {
rﬂch150_bôs
, 
N⁄e
, 
rﬂch150_height
, 
rﬂch150_width
, 0.0, 0.0},

50 {
rﬂch165_bôs
, 
N⁄e
, 
rﬂch165_height
, 
rﬂch165_width
, 0.0, 0.0},

51 {
rﬂch180_bôs
, 
N⁄e
, 
rﬂch180_height
, 
rﬂch180_width
, 0.0, 0.0},

52 {
rﬂch195_bôs
, 
N⁄e
, 
rﬂch195_height
, 
rﬂch195_width
, 0.0, 0.0},

53 {
rﬂch210_bôs
, 
N⁄e
, 
rﬂch210_height
, 
rﬂch210_width
, 0.0, 0.0},

54 {
rﬂch225_bôs
, 
N⁄e
, 
rﬂch225_height
, 
rﬂch225_width
, 0.0, 0.0},

55 {
rﬂch240_bôs
, 
N⁄e
, 
rﬂch240_height
, 
rﬂch240_width
, 0.0, 0.0},

56 {
rﬂch255_bôs
, 
N⁄e
, 
rﬂch255_height
, 
rﬂch255_width
, 0.0, 0.0},

57 {
rﬂch270_bôs
, 
N⁄e
, 
rﬂch270_height
, 
rﬂch270_width
, 0.0, 0.0},

58 {
rﬂch285_bôs
, 
N⁄e
, 
rﬂch285_height
, 
rﬂch285_width
, 0.0, 0.0},

59 {
rﬂch300_bôs
, 
N⁄e
, 
rﬂch300_height
, 
rﬂch300_width
, 0.0, 0.0},

60 {
rﬂch315_bôs
, 
N⁄e
, 
rﬂch315_height
, 
rﬂch315_width
, 0.0, 0.0},

61 {
rﬂch330_bôs
, 
N⁄e
, 
rﬂch330_height
, 
rﬂch330_width
, 0.0, 0.0},

62 {
rﬂch345_bôs
, 
N⁄e
, 
rﬂch345_height
, 
rﬂch345_width
, 0.0, 0.0},

	@demos/nxscribble/bitvector.c

16 
	~"utû.h
"

17 #unde‡
BITS_PER_VECTOR


18 
	#BITS_PER_VECTOR
 128

	)

19 
	~"bôve˘‹.h
"

21 
	~<°rög.h
>

24 
	$bôcou¡
(
max
, 
bv
)

25 
max
;

26 
BôVe˘‹
 
bv
;

28 
i
, 
cou¡
;

30 
cou¡
 = 
i
 = 0; i < 
max
; i++)

31 if(
	`IS_SET
(
i
, 
bv
))

32 
cou¡
++;

33  
cou¡
;

34 
	}
}

37 
	$BôVe˘‹ToSåög
(
max
, 
bv
)

38 
BôVe˘‹
 
bv
;

40 *
°rög
 = 
	`ãmp°rög
();

41 
i
;

43 
i
 = 0; i < 
max
; i++)

44 
°rög
[
i
] = 
	`IS_SET
(i, 
bv
) ? (i % 10) + '0' : '-' ;

45 
°rög
[
i
] = '\0';

46  
°rög
;

47 
	}
}

51 
	$SåögToBôVe˘‹
(
°rög
, 
max
, 
bv
)

52 *
°rög
;

53 
max
;

54 
BôVe˘‹
 
bv
;

56 
i
;

59 if((Ë
	`°æí
(
°rög
Ë!
max
) {

60 
	`îr‹
("StringToBitVector: strlen(%s)=%d != %d",

61 
°rög
, (Ë
	`°æí
(°rög), 
max
);

65 
i
 = 0; i < 
max
; i++)

66 if(
°rög
[
i
] != '-')

67 
	`BIT_SET
(
i
, 
bv
);

69 
	`BIT_CLEAR
(
i
, 
bv
);

70 
	}
}

74 
	$SëBôVe˘‹
(
v
)

75 
BôVe˘‹
 
v
;

77 
nöts
 = 
INTS_PER_VECTOR
;

79 --
nöts
 >= 0)

80 *
v
++ = -1;

81 
	}
}

85 
	$CÀ¨BôVe˘‹
(
nöts
, 
v
)

86 
nöts
;

87 
BôVe˘‹
 
v
;

90 --
nöts
 >= 0)

91 *
v
++ = 0;

92 
	}
}

95 
	$AssignBôVe˘‹
(
nöts
, 
v1
, 
v2
)

96 
nöts
;

97 
BôVe˘‹
 
v1
, 
v2
;

100 --
nöts
 >= 0)

101 *
v1
++ = *
v2
++;

102 
	}
}

105 
	$BôVe˘‹DeQ
(
max
, 
v
)

106 
max
;

107 
BôVe˘‹
 
v
;

109 
i
;

110 
i
 = 0; i < 
max
; i++)

111 if(
	`IS_SET
(
i
, 
v
)) {

112 
	`BIT_CLEAR
(
i
, 
v
);

113  
i
;

117 
	}
}

120 
	$BôVe˘‹Or
(
v
, 
v1
, 
v2
, 
ùv
)

121 *
v
;

122 *
v1
, *
v2
;

123 
ùv
;

125 *
vv
 = 
v
;

127 *
vv
++ = *
v1
++ | *
v2
++;

128 --
ùv
 > 0);

129  
v
;

130 
	}
}

133 
	$BôVe˘‹And
(
v
, 
v1
, 
v2
, 
ùv
)

134 *
v
;

135 *
v1
, *
v2
;

136 
ùv
;

138 *
vv
 = 
v
;

140 *
vv
++ = *
v1
++ & *
v2
++;

141 --
ùv
 > 0);

142  
v
;

143 
	}
}

146 
	$BôVe˘‹NoBôsSë
(
v
, 
ùv
)

147 *
v
;

148 
ùv
;

151 if(*
v
++)  0;

152 --
ùv
 > 0);

154 
	}
}

	@demos/nxscribble/bitvector.h

55 #i‚de‡
BITS_PER_VECTOR


56 
	#BITS_PER_VECTOR
 32

	)

59 #i‡(
BITS_PER_VECTOR
 != 16) && (BITS_PER_VECTOR != 32) && (BITS_PER_VECTOR != 64) && (BITS_PER_VECTOR != 128)

61 
	~"****** ûÀgÆ vÆuêf‹ BITS_PER_VECTORÄ******
"

69 #i‚def 
BITS_PER_INT


72 #ifde‡
unix


73 
	#BITS_PER_INT
 32

	)

75 
	#BITS_PER_INT
 16

	)

78 
	#BV_CHECK_MACHINE_ASSUMPTIONS
() \

79 if(
BITS_PER_INT
 != 8*()) \

80 
	`îr‹
("BV_CHECK_ASSUMPTIONS");

	)

88 #unde‡
BV_INDEX_MASK


89 #unde‡
BV_INDEX_SHIFT


90 #unde‡
INTS_PER_VECTOR


91 #unde‡
VECTOR_SIZE_CHECK


92 #unde‡
SET_BIT_VECTOR


93 #unde‡
IS_SET


94 #unde‡
ASSIGN_BIT_VECTOR


95 #unde‡
CLEAR_BIT_VECTOR


96 #unde‡
BIT_SET


97 #unde‡
BIT_CLEAR


103 #i‡
BITS_PER_VECTOR
 < 
BITS_PER_INT


104 #unde‡
BITS_PER_VECTOR


105 
	#BITS_PER_VECTOR
 
BITS_PER_INT


	)

112 
	#BV_INDEX_MASK
 (
BITS_PER_INT
 - 1)

	)

114 #i‡
BITS_PER_INT
==16

115 
	#BV_INDEX_SHIFT
 4

	)

118 #i‡
BITS_PER_INT
==32

119 
	#BV_INDEX_SHIFT
 5

	)

122 #i‚de‡
BV_INDEX_SHIFT


123 
	~"****** bad vÆuêf‹ BITS_PER_INTÄ******
"

130 #i‡
BITS_PER_INT
==
BITS_PER_VECTOR


131 
	#INTS_PER_VECTOR
 1

	)

133 #i‡2*
BITS_PER_INT
==
BITS_PER_VECTOR


134 
	#INTS_PER_VECTOR
 2

	)

136 
	#INTS_PER_VECTOR
 (
BITS_PER_VECTOR
 / 
BITS_PER_INT
)

	)

141 
	#BV_SIZE_CHECK
(
nbôs_√eded
) \

142 if(
nbôs_√eded
 > 
BITS_PER_VECTOR
) \

143 
	`îr‹
("%sÜine %d - %d bitsÇeeded, %d is vector size", \

144 
__FILE__
, 
__LINE__
, 
nbôs_√eded
, 
BITS_PER_VECTOR
);

	)

146 #i‚de‡
BV_TYPE_NAME


147 
	#BV_TYPE_NAME
 
BôVe˘‹


	)

154 #i‡
INTS_PER_VECTOR
==1

156 
	tBV_TYPE_NAME
[1];

158 
	#CLEAR_BIT_VECTOR
(
v
Ë–(v)[0] = 0 )

	)

159 
	#SET_BIT_VECTOR
(
v
Ë–(v)[0] = -1 )

	)

160 
	#BIT_SET
(
bô
, 
v
Ë–(v)[0] |(1 << (bô)Ë)

	)

161 
	#BIT_CLEAR
(
bô
, 
v
Ë–(v)[0] &~(1 << (bô)Ë)

	)

162 
	#IS_SET
(
bô
, 
v
Ë–((v)[0] >> (bô)Ë& 01 )

	)

163 
	#ASSIGN_BIT_VECTOR
(
v1
,
v2
Ë–(v1)[0] = (v2)[0] )

	)

171 #i‡
INTS_PER_VECTOR
==2

173 
	tBV_TYPE_NAME
[2];

175 
	#CLEAR_BIT_VECTOR
(
v
Ë–(v)[0] = (v)[1] = 0 )

	)

176 
	#SET_BIT_VECTOR
(
v
Ë–(v)[0] = (v)[1] = -1 )

	)

177 
	#ASSIGN_BIT_VECTOR
(
v1
,
v2
) \

178 –(
v1
)[0] = (
v2
)[0], (v1)[1] = (v2)[1] )

	)

186 
	tBV_TYPE_NAME
[
INTS_PER_VECTOR
];

188 
	#CLEAR_BIT_VECTOR
(
v
Ë–
	`CÀ¨BôVe˘‹
(
INTS_PER_VECTOR
, vË)

	)

189 
	#SET_BIT_VECTOR
(
v
Ë–
	`SëBôVe˘‹
(
INTS_PER_VECTOR
, vË)

	)

190 
	#ASSIGN_BIT_VECTOR
(
v1
,
v2
) \

191 –
	`AssignBôVe˘‹
(
INTS_PER_VECTOR
, 
v1
, 
v2
Ë)

	)

196 
	#BIT_SET
(
bô
, 
v
) \

197 –(
v
[
bô
>>
BV_INDEX_SHIFT
]Ë|(1 << (bô&
BV_INDEX_MASK
)Ë)

	)

199 
	#BIT_CLEAR
(
bô
, 
v
) \

200 –(
v
[
bô
>>
BV_INDEX_SHIFT
]Ë&~(1 << (bô&
BV_INDEX_MASK
)Ë)

	)

202 
	#IS_SET
(
bô
, 
v
) \

203 –((
v
[
bô
>>
BV_INDEX_SHIFT
]Ë>> (bô&
BV_INDEX_MASK
)Ë& 01 )

	)

209 
	#OR
(
v
, 
v1
, 
v2
Ë–
	`BôVe˘‹Or
((v), (v1), (v2), 
INTS_PER_VECTOR
Ë)

	)

210 
	#AND
(
v
, 
v1
, 
v2
Ë–
	`BôVe˘‹And
((v), (v1), (v2), 
INTS_PER_VECTOR
Ë)

	)

211 
	#NO_BITS_SET
(
v
Ë–
	`BôVe˘‹NoBôsSë
–(v), 
INTS_PER_VECTOR
 ) )

	)

213 
bôcou¡
();

214 *
BôVe˘‹ToSåög
();

215 
SåögToBôVe˘‹
();

216 
BôVe˘‹DeQ
();

218 *
BôVe˘‹Or
();

219 *
BôVe˘‹And
();

220 
BôVe˘‹NoBôsSë
();

	@demos/nxscribble/hre.h

22 #i‚de‡
_HRE_H_


24 
	#_HRE_H_


	)

26 
	~<sys/ty≥s.h
>

27 
	~<°dlib.h
>

30 #ifde‡
ELX


31 
	twch¨_t
;

38 #i‚de‡
åue


40 
u_ch¨
 
	tboﬁ
;

42 
	#åue
 1

	)

43 
	#Ál£
 0

	)

49 (*
	gªc_‚
)();

56 
u_ch¨
 
	tªc_c⁄fidí˚
;

61 #i‚de‡
X_H


63 #i‚de‡
__osf__


64 
	tTime
;

66 
	tTime
;

85 * 
	mri_loˇÀ
;

86 * 
	mri_«me
;

87 ** 
	mri_sub£t
;

88 } 
	tªc_öfo
;

92 
	#GESTURE
 "GESTURE"

	)

93 
	#MATHSET
 "MATHSET"

	)

94 
	#MONEYSET
 "MONEYSET"

	)

95 
	#WHITESPACE
 "WHITESPACE"

	)

96 
	#KANJI_JIS1
 "KANJI_JIS1"

	)

97 
	#KANJI_JIS1_PLUS
 "KANJI_JIS1_PLUS"

	)

98 
	#KANJI_JIS2
 "KANJI_JIS2"

	)

99 
	#HIRIGANA
 "HIRIGANA"

	)

100 
	#KATAKANA
 "KATAKANA"

	)

101 
	#UPPERCASE
 "UPPERCASE"

	)

102 
	#LOWERCASE
 "LOWERCASE"

	)

103 
	#DIGITS
 "DIGITS"

	)

104 
	#PUNCTUATION
 "PUNCTUATION"

	)

105 
	#NONALPHABETIC
 "NONALPHABETIC"

	)

106 
	#ASCII
 "ASCII"

	)

107 
	#ISO_LATIN12
 "ISO_LATIN12"

	)

119 
Time
 
	mtime
;

120 
	mx
, 
	my
;

121 } 
	t≥n_poöt
;

126 
	mx
,
	my
;

127 
	mwidth
,
	mheight
;

128 } 
	t≥n_ª˘
;

132 
	#TABLET_TIP
 0x1

	)

133 
	#TABLET_BUTTON1
 0x2

	)

134 
	#TABLET_BUTTON2
 0x4

	)

135 
	#TABLET_BUTTON3
 0x8

	)

139 
	#TABLET_PROXIMITY
 0x1

	)

140 
	#TABLET_RELATIVE
 0x2

	)

141 
	#TABLET_ABSOLUTE
 0x4

	)

142 
	#TABLET_RANGE
 0x8

	)

143 
	#TABLET_INVERT
 0x10

	)

144 
	#TABLET_TOUCH
 0x20

	)

148 
	#TABLET_ANGLEX
 0x1

	)

149 
	#TABLET_ANGLEY
 0x2

	)

150 
	#TABLET_ROTATE
 0x4

	)

157 
	#TABLET_INTEGRATED
 0x1

	)

158 
	#TABLET_PRESSURE
 0x2

	)

159 
	#TABLET_HEIGHT
 0x4

	)

163 
	#TABLET_DIMENSIONLESS
 0x1

	)

164 
	#TABLET_ENGLISH
 0x2

	)

165 
	#TABLET_METRIC
 0x4

	)

169 
	#TABLET_ULEFT
 0x1

	)

170 
	#TABLET_URIGHT
 0x2

	)

171 
	#TABLET_LLEFT
 0x4

	)

172 
	#TABLET_LRIGHT
 0x8

	)

173 
	#TABLET_CENTER
 0x10

	)

181 
	mtc_id
[20];

182 
u_sh‹t
 
	mtc_buâ⁄
;

183 
u_sh‹t
 
	mtc_≥n
;

184 
u_sh‹t
 
	mtc_™gÀ
;

185 
u_öt
 
	mtc_£ns‹
 : 8;

186 
u_öt
 
	mtc_unôs
 : 8;

187 
u_öt
 
	mtc_deÁu…_unôs
 : 8;

188 
u_öt
 
	mtc_‹igö
 : 8;

189 
	mtc_x
[2];

190 
	mtc_y
[2];

191 
	mtc_¥essuª
[2];

192 
u_öt
 
	mtc_ßm∂e_øã
;

193 
u_öt
 
	mtc_ßm∂e_di°™˚
;

195 } 
	tèbÀt_ˇp
;

207 
u_sh‹t
 
	m±_buâ⁄
;

208 
u_sh‹t
 
	m±_≥n
;

209 
	m±_¥essuª
;

210 
	m±_™gÀx
;

211 
	m±_™gÀy
;

212 
	m±_b¨ªÃŸ©e
;

213 } 
	t≥n_°©e
;

220 
u_öt
 
	mps_≈ts
;

221 
≥n_poöt
* 
	mps_±s
;

222 
u_öt
 
	mps_n°©e
;

223 
u_öt
* 
	mps_å™s
;

224 
≥n_°©e
* 
	mps_°©e
;

225 } 
	t≥n_°roke
;

234 
≥n_ª˘
 
	m¥_¨ó
;

235 
	m¥_row
, 
	m¥_cﬁ
;

236 
	m¥_rowpôch
, 
	m¥_cﬁpôch
;

237 } 
	t≥n_‰ame
;

241 
	#REC_RIGHTH
 0x0

	)

242 
	#REC_LEFTH
 0x1

	)

251 
	#REC_DEFAULT
 0x0

	)

252 
	#REC_BOTTOM_TOP
 0x1

	)

253 
	#REC_LEFT_RIGHT
 0x2

	)

254 
	#REC_RIGHT_LEFT
 0x3

	)

255 
	#REC_TOP_BOTTOM
 0x4

	)

262 
	s_Àâî£t
 {

263 
	mls_ty≥
;

264 
	u_ls_£t
 {

265 * 
	mavÆ
;

266 
wch¨_t
* 
	mwvÆ
;

267 } 
	mls_£t
;

268 } 
	tÀâî£t
;

276 
u_sh‹t
 
	mrc_u¥ef
;

277 
boﬁ
 
	mrc_ge°uª
;

278 
u_sh‹t
 
	mrc_dúe˘i⁄
;

279 
ªc_c⁄fidí˚
 
	mrc_cutoff
;

280 
èbÀt_ˇp
* 
	mrc_töfo
;

281 ** 
	mrc_sub£t
;

282 
≥n_‰ame
* 
	mrc_‰ame
;

283 
w‹d£t
 
	mrc_w‹d£t
;

284 
Àâî£t
 
	mrc_Àâî£t
;

285 * 
	mrc_c⁄ãxt
;

286 } 
	trc
;

299 
	sGe°uª
 {

300 * 
	mg_«me
;

301 
u_öt
 
	mg_nhs
;

302 
≥n_poöt
* 
	mg_h•Ÿs
;

303 
≥n_ª˘
 
	mg_bbox
;

304 (*
	mg_a˘i⁄
)(
	mGe°uª
*);

305 * 
	mg_wsöfo
;

306 } 
	tge°uª
;

308 (*
	txge°uª
)(
	tge°uª
*);

312 
	#COPY
 "COPY"

	)

313 
	#CUT
 "CUT"

	)

314 
	#PASTE
 "PASTE"

	)

315 
	#UNDO
 "UNDO"

	)

316 
	#CLEAR
 "CLEAR"

	)

317 
	#EXTEND
 "EXTEND"

	)

318 
	#RETURN
 "RETURN"

	)

319 
	#SPACE
 "SPACE"

	)

320 
	#TAB
 "TAB"

	)

321 
	#KKCONVERT
 "KKCONVERT"

	)

328 
	#REC_NONE
 0x0

	)

329 
	#REC_GESTURE
 0x1

	)

330 
	#REC_ASCII
 0x2

	)

331 
	#REC_VAR
 0x4

	)

332 
	#REC_WCHAR
 0x8

	)

333 
	#REC_OTHER
 0x10

	)

334 
	#REC_CORR
 0x20

	)

346 
	#ªc_c‹ªœti⁄
 

	)

349 
ª_ty≥
;

351 
ge°uª
* 
gvÆ
;

352 * 
avÆ
;

353 
wch¨_t
* 
wvÆ
;

354 
ªc_c‹ªœti⁄
* 
rcvÆ
;

355 } 
ª_ªsu…
;

356 
ªc_c⁄fidí˚
 
ª_c⁄f
;

357 } 
	tªc_ñemít
;

366 
	s_Rec_Æã∫©ive
 {

367 
ªc_ñemít
 
ø_ñem
;

368 
u_öt
 
ø_«…î
;

369 
_Rec_Æã∫©ive
* 
ø_√xt
;

372 
_Rec_Æã∫©ive
 
	tªc_Æã∫©ive
;

384 #unde‡
ªc_c‹ªœti⁄


387 
ªc_ñemít
 
ro_ñem
;

388 
u_öt
 
ro_n°rokes
;

389 
≥n_°roke
* 
ro_°rokes
;

390 
u_öt
* 
ro_°¨t
;

391 
u_öt
* 
ro_°›
;

392 } 
	tªc_c‹ªœti⁄
;

	@demos/nxscribble/hre_api.c

23 
	~<sys/ty≥s.h
>

24 #ifde‡
ELX


25 
	~<vxW‹ks.h
>

27 
	~<sys/°©.h
>

28 
	~<î∫o.h
>

29 
	~<°dio.h
>

30 
	~<°rög.h
>

31 
	~<loˇÀ.h
>

32 
	~<°dlib.h
>

34 
	~"hª_öã∫Æ.h
"

35 
	~"utû.h
"

38 
ªcognizî
 
__ªcognizî_öã∫Æ_öôülize
(
ªc_öfo
* 
ri
);

42 * 
	gREC_VERSION
 = "2.0";

46 
	#INTL_DOMAIN
 "ªcognôi⁄_m™agî"

	)

49 
	#dgëãxt
(
domaö
, 
msg
Ë(msg)

	)

50 
	#bödãxtdomaö
(
dú«me
, 
domaö
)

	)

58 
	#REC_MAGIC
 0x„ed

	)

59 
	#REC_END_MAGIC
 0xbìf

	)

63 
	#RI_CHECK_MAGIC
(
ªc
) \

64 –(
ªc
 !
NULL
) && \

65 (((
ªcognizî
)
ªc
)->
ªcognizî_magic
 =
REC_MAGIC
) && \

66 (((
ªcognizî
)
ªc
)->
ªcognizî_íd_magic
 =
REC_END_MAGIC
) &&\

67 (((
ªcognizî
)
ªc
)->
ªcognizî_vîsi⁄
 =
REC_VERSION
Ë)

	)

74 
__ªcognizî_öã∫Æ_föÆize
(
ªcognizî
 
r
);

78 
	#HOME
 "HOME"

	)

79 
	#USERRECHOME
 ".˛assifõrs"

	)

84 * 
sh¨ed_libøry_«me
(* 
dúe˘‹y
,* 
loˇÀ
,* 
«me
);

86 
ªc_öfo
* 
make_ªc_öfo
(* 
dúe˘‹y
,* 
«me
,** 
sub£t
);

87 
dñëe_ªc_öfo
(
ªc_öfo
* 
ri
);

89 
check_f‹_u£r_home
();

91 
öé_öôülize
();

93 
˛ónup_ªc_ñemít
(
ªc_ñemít
* 
ª
,
boﬁ
 
dñëe_poöts_p
);

97 * 
	gthe_œ°_îr‹
 = 
NULL
;

99 *
	$ß„_mÆloc
 (
nbyãs
)

101 *
ªs
 = 
	`mÆloc
(
nbyãs
);

102 i‡(
ªs
 =
NULL
) {

103 
	`îr‹
("malloc failure");

104 
	`exô
(2);

106  (
ªs
);

107 
	}
}

121 
ªcognizî


122 
	$ªcognizî_lﬂd
(* 
dúe˘‹y
,* 
«me
,** 
sub£t
)

124 
ªcognizî
 
ªc
;

126 
ªcognizî_öã∫Æ_öôülize
 
rii
;

128 
ªc_öfo
* 
röf
;

129 
boﬁ
 
öé_öô
 = 
Ál£
;

131 if–
öé_öô
 =
Ál£
 ) {

132 
öé_öô
 = 
åue
;

134 
	`öé_öôülize
();

138 
röf
 = 
	`make_ªc_öfo
(
dúe˘‹y
,
«me
,
sub£t
);

139 i‡(
röf
 =
NULL
) {

140 
the_œ°_îr‹
 =

141 
	`dgëãxt
(
INTL_DOMAIN
,

143 ((
ªcognizî
)
NULL
);

148 
ªc
 = 
	`__ªcognizî_öã∫Æ_öôülize
(
röf
);

149 i‡(
ªc
 =
NULL
) {

150 ((
ªcognizî
)
NULL
);

155 if–
ªc
->
ªcognizî_lﬂd_°©e
 =
NULL
 ||

156 
ªc
->
ªcognizî_ßve_°©e
 =
NULL
 ||

157 
ªc
->
ªcognizî_lﬂd_di˘i⁄¨y
 =
NULL
 ||

158 
ªc
->
ªcognizî_ßve_di˘i⁄¨y
 =
NULL
 ||

159 
ªc
->
ªcognizî_‰ì_di˘i⁄¨y
 =
NULL
 ||

160 
ªc
->
ªcognizî_add_to_di˘i⁄¨y
 =
NULL
 ||

161 
ªc
->
ªcognizî_dñëe_‰om_di˘i⁄¨y
 =
NULL
 ||

162 
ªc
->
ªcognizî_îr‹
 =
NULL
 ||

163 
ªc
->
ªcognizî_£t_c⁄ãxt
 =
NULL
 ||

164 
ªc
->
ªcognizî_gë_c⁄ãxt
 =
NULL
 ||

165 
ªc
->
ªcognizî_˛ór
 =
NULL
 ||

166 
ªc
->
ªcognizî_gë_buf„r
 =
NULL
 ||

167 
ªc
->
ªcognizî_£t_buf„r
 =
NULL
 ||

168 
ªc
->
ªcognizî_å™¶©e
 =
NULL
 ||

169 
ªc
->
ªcognizî_gë_exãnsi⁄_fun˘i⁄s
 =
NULL
 ||

170 
ªc
->
ªcognizî_gë_ge°uª_«mes
 =
NULL
 ||

171 
ªc
->
ªcognizî_£t_ge°uª_a˘i⁄
 =
NULL


174 
	`ªcognizî_u∆ﬂd
(
ªc
);

175 
	`Ârötf
(
°dîr
, "Unloading b/cÇull functionÖointer.\n");

176 
the_œ°_îr‹
 =

177 
	`dgëãxt
(
INTL_DOMAIN
,

179 ((
ªcognizî
)
NULL
);

185 
ªc
->
ªcognizî_öfo
 = 
röf
;

202 (
ªc
);

203 
	}
}

210 
	$ªcognizî_u∆ﬂd
(
ªcognizî
 
ªc
)

213 
ªcognizî_öã∫Æ_föÆize
 
rif
;

218 if–!
	`RI_CHECK_MAGIC
(
ªc
) ) {

219 
the_œ°_îr‹
 = 
	`dgëãxt
(
INTL_DOMAIN
,"BadÑecognizer object.");

223 
	`__ªcognizî_öã∫Æ_föÆize
(
ªc
);

226 
	}
}

235 
	$ªcognizî_lﬂd_°©e
(
ªcognizî
 
ªc
,* 
dú
,* 
«me
)

239 if–!
	`RI_CHECK_MAGIC
(
ªc
) ) {

240 
the_œ°_îr‹
 = 
	`dgëãxt
(
INTL_DOMAIN
,"BadÑecognizer object.");

245 (
ªc
->
	`ªcognizî_lﬂd_°©e
‘ec,
dú
,
«me
));

246 
	}
}

255 
	$ªcognizî_ßve_°©e
(
ªcognizî
 
ªc
,* 
dú
,* 
«me
)

259 if–!
	`RI_CHECK_MAGIC
(
ªc
) ) {

260 
the_œ°_îr‹
 = 
	`dgëãxt
(
INTL_DOMAIN
,"BadÑecognizer object.");

266 (
ªc
->
	`ªcognizî_ßve_°©e
‘ec,
dú
,
«me
));

267 
	}
}

274 
w‹d£t
 
	$ªcognizî_lﬂd_di˘i⁄¨y
(
ªcognizî
 
ªc
,* 
dú
,* 
«me
)

278 if–!
	`RI_CHECK_MAGIC
(
ªc
) ) {

279 
the_œ°_îr‹
 = 
	`dgëãxt
(
INTL_DOMAIN
,"BadÑecognizer object.");

280 (
NULL
);

285 (
ªc
->
	`ªcognizî_lﬂd_di˘i⁄¨y
‘ec,
dú
,
«me
));

286 
	}
}

293 
	$ªcognizî_ßve_di˘i⁄¨y
(
ªcognizî
 
ªc
,* 
dú
,* 
«me
,
w‹d£t
 
di˘
)

297 if–!
	`RI_CHECK_MAGIC
(
ªc
) ) {

298 
the_œ°_îr‹
 = 
	`dgëãxt
(
INTL_DOMAIN
,"BadÑecognizer object.");

304 (
ªc
->
	`ªcognizî_ßve_di˘i⁄¨y
‘ec,
dú
,
«me
,
di˘
));

305 
	}
}

312 
	$ªcognizî_‰ì_di˘i⁄¨y
(
ªcognizî
 
ªc
,
w‹d£t
 
di˘
)

316 if–!
	`RI_CHECK_MAGIC
(
ªc
) ) {

317 
the_œ°_îr‹
 = 
	`dgëãxt
(
INTL_DOMAIN
,"BadÑecognizer object.");

323 (
ªc
->
	`ªcognizî_‰ì_di˘i⁄¨y
‘ec,
di˘
));

324 
	}
}

332 
	$ªcognizî_add_to_di˘i⁄¨y
(
ªcognizî
 
ªc
,
Àâî£t
* 
w‹d
,
w‹d£t
 
di˘
)

336 if–!
	`RI_CHECK_MAGIC
(
ªc
) ) {

337 
the_œ°_îr‹
 = 
	`dgëãxt
(
INTL_DOMAIN
,"BadÑecognizer object.");

343 (
ªc
->
	`ªcognizî_add_to_di˘i⁄¨y
‘ec,
w‹d
,
di˘
));

344 
	}
}

352 
	$ªcognizî_dñëe_‰om_di˘i⁄¨y
(
ªcognizî
 
ªc
,
Àâî£t
* 
w‹d
,
w‹d£t
 
di˘
)

356 if–!
	`RI_CHECK_MAGIC
(
ªc
) ) {

357 
the_œ°_îr‹
 = 
	`dgëãxt
(
INTL_DOMAIN
,"BadÑecognizer object.");

363 (
ªc
->
	`ªcognizî_dñëe_‰om_di˘i⁄¨y
‘ec,
w‹d
,
di˘
));

364 
	}
}

372 c⁄° 
ªc_öfo
*

373 
	$ªcognizî_gë_öfo
(
ªcognizî
 
ªc
)

377 if–!
	`RI_CHECK_MAGIC
(
ªc
) ) {

378 
the_œ°_îr‹
 = 
	`dgëãxt
(
INTL_DOMAIN
,"BadÑecognizer object.");

379 ((
ªc_öfo
*)
NULL
);

384 (
ªc
->
ªcognizî_öfo
);

385 
	}
}

392 c⁄° * 
	$ªcognizî_m™agî_vîsi⁄
(
ªcognizî
 
ªc
)

396 if–!
	`RI_CHECK_MAGIC
(
ªc
) ) {

397 
the_œ°_îr‹
 = 
	`dgëãxt
(
INTL_DOMAIN
,"BadÑecognizer object.");

398 (
NULL
);

401 (
ªc
->
ªcognizî_vîsi⁄
);

403 
	}
}

408 * 
	$ªcognizî_îr‹
(
ªcognizî
 
ªc
)

413 if–!
	`RI_CHECK_MAGIC
(
ªc
Ë&& 
the_œ°_îr‹
 =
NULL
 ) {

414 (
	`dgëãxt
(
INTL_DOMAIN
,"BadÑecognizer object."));

416 } if–
the_œ°_îr‹
 !
NULL
 ) {

417 * 
îr‹
 = 
the_œ°_îr‹
;

419 
the_œ°_îr‹
 = 
NULL
;

420 (
îr‹
);

425 (
ªc
->
	`ªcognizî_îr‹
(rec));

426 
	}
}

433 
	$ªcognizî_£t_c⁄ãxt
(
ªcognizî
 
ªc
,
rc
* 
ªc_xt
)

438 if–!
	`RI_CHECK_MAGIC
(
ªc
) ) {

439 
the_œ°_îr‹
 = 
	`dgëãxt
(
INTL_DOMAIN
,"BadÑecognizer object.");

445 (
ªc
->
	`ªcognizî_£t_c⁄ãxt
‘ec,
ªc_xt
));

446 
	}
}

453 
rc
* 
	$ªcognizî_gë_c⁄ãxt
(
ªcognizî
 
ªc
)

458 if–!
	`RI_CHECK_MAGIC
(
ªc
) ) {

459 
the_œ°_îr‹
 = 
	`dgëãxt
(
INTL_DOMAIN
,"BadÑecognizer object.");

460 (
NULL
);

465 (
	`ªcognizî_gë_c⁄ãxt
(
ªc
));

466 
	}
}

473 
	$ªcognizî_˛ór
(
ªcognizî
 
ªc
,
boﬁ
 
dñëe_poöts_p
)

478 if–!
	`RI_CHECK_MAGIC
(
ªc
) ) {

479 
the_œ°_îr‹
 = 
	`dgëãxt
(
INTL_DOMAIN
,"BadÑecognizer object.");

485 (
ªc
->
	`ªcognizî_˛ór
‘ec,
dñëe_poöts_p
));

486 
	}
}

491 
	$ªcognizî_gë_buf„r
(
ªcognizî
 
ªc
, 
u_öt
* 
n°rokes
,
≥n_°roke
** 
°rokes
)

496 if–!
	`RI_CHECK_MAGIC
(
ªc
) ) {

497 
the_œ°_îr‹
 = 
	`dgëãxt
(
INTL_DOMAIN
,"BadÑecognizer object.");

503 (
ªc
->
	`ªcognizî_gë_buf„r
‘ec,
n°rokes
,
°rokes
));

505 
	}
}

512 
	$ªcognizî_£t_buf„r
(
ªcognizî
 
ªc
,
u_öt
 
n°rokes
,
≥n_°roke
* 
°rokes
)

517 if–!
	`RI_CHECK_MAGIC
(
ªc
) ) {

518 
the_œ°_îr‹
 = 
	`dgëãxt
(
INTL_DOMAIN
,"BadÑecognizer object.");

524 (
ªc
->
	`ªcognizî_£t_buf„r
‘ec,
n°rokes
,
°rokes
));

526 
	}
}

534 
	$ªcognizî_å™¶©e
(
ªcognizî
 
ªc
,

535 
u_öt
 
n°rokes
,

536 
≥n_°roke
* 
°rokes
,

537 
boﬁ
 
c‹ªœã_p
,

538 * 
ƒë
,

539 
ªc_Æã∫©ive
** 
ªt
)

541 
ªtvÆ
;

542 
msg
[80];

545 if–!
	`RI_CHECK_MAGIC
(
ªc
) ) {

546 
the_œ°_îr‹
 = 
	`dgëãxt
(
INTL_DOMAIN
, 
msg
);

567 
ªtvÆ
 = 
ªc
->
	`ªcognizî_å™¶©e
(rec,

568 
n°rokes
,

569 
°rokes
,

570 
c‹ªœã_p
,

571 
ƒë
,

572 
ªt
);

573  (
ªtvÆ
);

574 
	}
}

583 
ªc_‚
* 
	$ªcognizî_gë_exãnsi⁄_fun˘i⁄s
(
ªcognizî
 
ªc
)

587 if–!
	`RI_CHECK_MAGIC
(
ªc
) ) {

588 
the_œ°_îr‹
 = 
	`dgëãxt
(
INTL_DOMAIN
,"BadÑecognizer object.");

589 ((
ªc_‚
*)
NULL
);

594 (
ªc
->
	`ªcognizî_gë_exãnsi⁄_fun˘i⁄s
(rec));

595 
	}
}

604 
	$ªcognizî_gë_ge°uª_«mes
(
ªcognizî
 
ªc
)

608 if–!
	`RI_CHECK_MAGIC
(
ªc
) ) {

609 
the_œ°_îr‹
 = 
	`dgëãxt
(
INTL_DOMAIN
,"BadÑecognizer object.");

610 (
NULL
);

615 (
ªc
->
	`ªcognizî_gë_ge°uª_«mes
(rec));

616 
	}
}

622 
xge°uª


623 
	$ªcognizî_åaö_ge°uªs
(
ªcognizî
 
ªc
,* 
«me
,
xge°uª
 
‚
,* 
wsöfo
)

627 if–!
	`RI_CHECK_MAGIC
(
ªc
) ) {

628 
the_œ°_îr‹
 = 
	`dgëãxt
(
INTL_DOMAIN
,"BadÑecognizer object.");

629 ((
xge°uª
)-1);

634 (
ªc
->
	`ªcognizî_£t_ge°uª_a˘i⁄
‘ec,
«me
,
‚
,
wsöfo
));

635 
	}
}

648 * 
	$sh¨ed_libøry_«me
(* 
dúe˘‹y
,* 
loˇÀ
,* 
«me
)

650 * 
ªt
 = 
NULL
;

651 
Àn
 = 
	`°æí
(
«me
);

655 if–
dúe˘‹y
 !
NULL
 ) {

656 
ªt
 = (*)
	`ß„_mÆloc
(
	`°æí
(
dúe˘‹y
Ë+ 
Àn
 + 2);

657 
	`°r˝y
(
ªt
,
dúe˘‹y
);

658 
	`°rˇt
(
ªt
,"/");

659 
	`°rˇt
(
ªt
,
«me
);

663 * 
dú
 = 
NULL
;

667 if–(
dú
 = 
	`gëív
(
RECHOME
)Ë=
NULL
 ) {

668 
dú
 = "REC_DEFAULT_HOME_DIR";

672 
ªt
 = (*)
	`ß„_mÆloc
(
	`°æí
(
dú
Ë+ såÀn(
loˇÀ
Ë+ 
Àn
 + 3);

674 
	`°r˝y
(
ªt
,
dú
);

675 
	`°rˇt
(
ªt
,"/");

676 
	`°rˇt
(
ªt
,
loˇÀ
);

677 
	`°rˇt
(
ªt
,"/");

678 
	`°rˇt
(
ªt
,
«me
);

682 (
ªt
);

683 
	}
}

691 
	$öé_öôülize
()

693 * 
dú«me
;

697 if–(
dú«me
 = 
	`gëív
(
RECHOME
)Ë=
NULL
 ) {

698 
dú«me
 = "REC_DEFAULT_HOME_DIR";

703 
	`bödãxtdomaö
(
dú«me
,
INTL_DOMAIN
);

704 
	}
}

709 
ªc_öfo
* 
	$make_ªc_öfo
(* 
dúe˘‹y
,* 
«me
,** 
sub£t
)

711 
i
,
Àn
;

712 
ªc_öfo
* 
ri
;

713 * 
loˇÀ
;

715 
ri
 = (
ªc_öfo
*)
	`ß„_mÆloc
((rec_info));

716 
ri
->
ri_loˇÀ
 = 
NULL
;

717 
ri
->
ri_«me
 = 
NULL
;

718 
ri
->
ri_sub£t
 = 
NULL
;

722 if–(
loˇÀ
 = 
	`gëív
(
LANG
)Ë=
NULL
 ) {

723 
loˇÀ
 = 
	`°rdup
(
REC_DEFAULT_LOCALE
);

726 if–(
ri
->
ri_loˇÀ
 = 
	`°rdup
(
loˇÀ
)Ë=
NULL
 ) {

727 
	`dñëe_ªc_öfo
(
ri
);

728 (
NULL
);

742 if–
sub£t
 !
NULL
 ) {

746  
Àn
 = 1; 
sub£t
[Àn] !
NULL
;Üen++ ) ;

750 
ri
->
ri_sub£t
 = (**)
	`ß„_mÆloc
((
Àn
 +1)*(*));

752  
i
 = 0; i < 
Àn
; i++ ) {

753 if–
sub£t
[
i
] !
NULL
 ) {

754 if–(
ri
->
ri_sub£t
[
i
] = 
	`°rdup
(
sub£t
[i])Ë=
NULL
 ) {

755 
	`dñëe_ªc_öfo
(
ri
);

756 (
NULL
);

759 
ri
->
ri_sub£t
[
i
] = 
sub£t
[i];

763 
ri
->
ri_sub£t
[
i
] = 
NULL
;

767 
ri
->
ri_sub£t
 = 
NULL
;

770 (
ri
);

771 
	}
}

773 
	$dñëe_ªc_öfo
(
ªc_öfo
* 
ri
)

775 if–
ri
 !
NULL
 ) {

776 if–
ri
->
ri_loˇÀ
 !
NULL
 ) {

777 
	`‰ì
(
ri
->
ri_loˇÀ
);

784 if–
ri
->
ri_sub£t
 !
NULL
 ) {

785 
i
;

786  
i
 = 0; 
ri
->
ri_sub£t
[i] !
NULL
; i++) {

787 
	`‰ì
(
ri
->
ri_sub£t
[
i
]);

789 
	`‰ì
(
ri
->
ri_sub£t
);

791 
	`‰ì
(
ri
);

793 
	}
}

798 
	$check_f‹_u£r_home
()

800 * 
homedú
 = 
	`gëív
(
HOME
);

801 * 
ªchome
 = 
NULL
;

803 if–
homedú
 =
NULL
 ) {

804 
the_œ°_îr‹
 = "HomeÉnvironment variable HOMEÇot set.";

808 
ªchome
 = (*)
	`ß„_mÆloc
(
	`°æí
(
homedú
Ë+ såÀn(
USERRECHOME
) + 2);

812 
	`°r˝y
(
ªchome
,
homedú
);

813 
	`°rˇt
(
ªchome
,"/");

814 
	`°rˇt
(
ªchome
,
USERRECHOME
);

818 if–
	`mkdú
(
ªchome
,
S_IRWXU
 | 
S_IRWXG
 | 
S_IRWXO
) < 0 ) {

822 if–
î∫o
 !
EEXIST
 ) {

823 
the_œ°_îr‹
 = "Error during creation of USERRECHOME.";

824 
	`‰ì
(
ªchome
);

829 
	`‰ì
(
ªchome
);

832 
	}
}

852 
ªcognizî
 
	$make_ªcognizî
(
ªc_öfo
* 
rif
)

854 
ªcognizî
 
ªc
;

858 
ªc
 = (
ªcognizî
)
	`ß„_mÆloc
((*rec));

859 
ªc
->
ªcognizî_magic
 = 
REC_MAGIC
;

860 
ªc
->
ªcognizî_vîsi⁄
 = 
REC_VERSION
;

861 
ªc
->
ªcognizî_öfo
 = 
rif
;

862 
ªc
->
ªcognizî_•ecific
 = 
NULL
;

863 
ªc
->
ªcognizî_íd_magic
 = 
REC_END_MAGIC
;

864 
ªc
->
ªcognizî_lﬂd_°©e
 = 
NULL
;

865 
ªc
->
ªcognizî_ßve_°©e
 = 
NULL
;

866 
ªc
->
ªcognizî_lﬂd_di˘i⁄¨y
 = 
NULL
;

867 
ªc
->
ªcognizî_ßve_di˘i⁄¨y
 = 
NULL
;

868 
ªc
->
ªcognizî_‰ì_di˘i⁄¨y
 = 
NULL
;

869 
ªc
->
ªcognizî_add_to_di˘i⁄¨y
 = 
NULL
;

870 
ªc
->
ªcognizî_dñëe_‰om_di˘i⁄¨y
 = 
NULL
;

871 
ªc
->
ªcognizî_îr‹
 = 
NULL
;

872 
ªc
->
ªcognizî_£t_c⁄ãxt
 = 
NULL
;

873 
ªc
->
ªcognizî_gë_c⁄ãxt
 = 
NULL
;

874 
ªc
->
ªcognizî_˛ór
 = 
NULL
;

875 
ªc
->
ªcognizî_gë_buf„r
 = 
NULL
;

876 
ªc
->
ªcognizî_£t_buf„r
 = 
NULL
;

877 
ªc
->
ªcognizî_å™¶©e
 = 
NULL
;

878 
ªc
->
ªcognizî_gë_exãnsi⁄_fun˘i⁄s
 = 
NULL
;

879 
ªc
->
ªcognizî_gë_ge°uª_«mes
 = 
NULL
;

880 
ªc
->
ªcognizî_£t_ge°uª_a˘i⁄
 = 
NULL
;

881 (
ªc
);

882 
	}
}

884 
	$dñëe_ªcognizî
(
ªcognizî
 
ªc
)

887 if–
ªc
 !
NULL
 ) {

888 if–
ªc
->
ªcognizî_öfo
 !
NULL
 ) {

889 
	`dñëe_ªc_öfo
(
ªc
->
ªcognizî_öfo
);

891 
	`‰ì
(
ªc
);

893 
	}
}

899 
ªc_Æã∫©ive
* 
	$make_ªc_Æã∫©ive_¨øy
(
u_öt
 
size
)

901 
i
;

902 
ªc_Æã∫©ive
* 
ri
;

904 
ri
 = (
ªc_Æã∫©ive
*Ë
	`ß„_mÆloc
(
size
 * (rec_alternative));

906  
i
 = 0; i < 
size
; i++ ) {

907 
ri
[
i
].
ø_ñem
.
ª_ty≥
 = 
REC_NONE
;

908 
ri
[
i
].
ø_ñem
.
ª_ªsu…
.
avÆ
 = 
NULL
;

909 
ri
[
i
].
ø_ñem
.
ª_c⁄f
 = 0;

910 
ri
[
i
].
ø_«…î
 = 0;

911 
ri
[
i
].
ø_√xt
 = 
NULL
;

914 (
ri
);

915 
	}
}

917 
ªc_Æã∫©ive
*

918 
	$öôülize_ªc_Æã∫©ive
(
ªc_Æã∫©ive
* 
ø
,

919 
u_öt
 
√Àm
)

921 if–
ø
 !
NULL
 ) {

922 if–(
ø
->
ø_√xt
 = 
	`make_ªc_Æã∫©ive_¨øy
(
√Àm
)Ë=
NULL
 ) {

923 (
NULL
);

926 
ø
->
ø_«…î
 = 
√Àm
;

929 (
ø
);

930 
	}
}

932 
	$dñëe_ªc_Æã∫©ive_¨øy
(
u_öt
 
«…î
,

933 
ªc_Æã∫©ive
* 
ø
,

934 
boﬁ
 
dñëe_poöts_p
)

936 
i
;

938 if–
ø
 !
NULL
 ) {

940  
i
 = 0; i < 
«…î
; i++ ) {

941 
	`˛ónup_ªc_ñemít
(&
ø
[
i
].
ø_ñem
,
dñëe_poöts_p
);

945 if–
ø
[
i
].
ø_«…î
 > 0 ) {

946 
	`dñëe_ªc_Æã∫©ive_¨øy
(
ø
[
i
].
ø_«…î
,

947 
ø
[
i
].
ø_√xt
,

948 
dñëe_poöts_p
);

952 
	`‰ì
(
ø
);

954 
	}
}

959 
ªc_ñemít
*

960 
	$öôülize_ªc_ñemít
(
ªc_ñemít
* 
ª
,

961 
ty≥
,

962 
u_öt
 
size
,

963 * 
å™s
,

964 
ªc_c⁄fidí˚
 
c⁄f
)

966 if–
ª
 !
NULL
 ) {

968 
ª
->
ª_ty≥
 = 
ty≥
;

969 
ª
->
ª_c⁄f
 = 
c⁄f
;

970 
ª
->
ª_ªsu…
.
avÆ
 = 
NULL
;

972 
ty≥
) {

974 
REC_GESTURE
:

975 if–
size
 > 0 && 
å™s
 !
NULL
 ) {

976 
ª
->
ª_ªsu…
.
gvÆ
 =

977 (
ge°uª
*)
	`ß„_mÆloc
((gesture));

978 
	`mem˝y
((*)
ª
->
ª_ªsu…
.
gvÆ
,
å™s
,(
ge°uª
));

982 
REC_ASCII
:

983 
REC_VAR
:

984 
REC_OTHER
:

985 if–
size
 > 0 && 
å™s
 !
NULL
 ) {

986 
ª
->
ª_ªsu…
.
avÆ
 =

987 (*)
	`ß„_mÆloc
((
size
+1)*());

988 
	`mem˝y
((*)
ª
->
ª_ªsu…
.
avÆ
,
å™s
,
size
*());

989 
ª
->
ª_ªsu…
.
avÆ
[
size
] = '\000';

993 
REC_WCHAR
:

994 if–
size
 > 0 && 
å™s
 !
NULL
 ) {

995 
ª
->
ª_ªsu…
.
wvÆ
 =

996 (
wch¨_t
*)
	`ß„_mÆloc
((
size
+1)*(wchar_t));

997 
	`mem˝y
((*)
ª
->
ª_ªsu…
.
wvÆ
,
å™s
,
size
*(
wch¨_t
));

998 
ª
->
ª_ªsu…
.
wvÆ
[
size
] = '\000';

1002 
REC_CORR
:

1003 if–
size
 > 0 && 
å™s
 !
NULL
 ) {

1004 
ª
->
ª_ªsu…
.
rcvÆ
 =

1005 (
ªc_c‹ªœti⁄
*)
	`ß„_mÆloc
((rec_correlation));

1006 
	`mem˝y
((*)
ª
->
ª_ªsu…
.
rcvÆ
,

1007 
å™s
,

1008 (
ªc_c‹ªœti⁄
));

1013 (
NULL
);

1018 (
ª
);

1019 
	}
}

1021 
	$˛ónup_ªc_ñemít
(
ªc_ñemít
* 
ª
,
boﬁ
 
dñëe_poöts_p
)

1023 
ª
->
ª_ty≥
) {

1025 
REC_NONE
:

1028 
REC_ASCII
:

1029 
REC_VAR
:

1030 
REC_WCHAR
:

1031 
REC_OTHER
:

1032 
	`‰ì
(
ª
->
ª_ªsu…
.
avÆ
);

1035 
REC_GESTURE
:

1036 
	`dñëe_ge°uª_¨øy
(1,
ª
->
ª_ªsu…
.
gvÆ
,
åue
);

1039 
REC_CORR
:

1040 
	`dñëe_ªc_c‹ªœti⁄
(
ª
->
ª_ªsu…
.
rcvÆ
,

1041 
dñëe_poöts_p
);

1046 
	}
}

1053 
ªc_c‹ªœti⁄
*

1054 
	$make_ªc_c‹ªœti⁄
(
ty≥
,

1055 
u_öt
 
size
,

1056 * 
å™s
,

1057 
ªc_c⁄fidí˚
 
c⁄f
,

1058 
u_öt
 
ps_size
)

1060 
ªc_c‹ªœti⁄
* 
rc
;

1062 
rc
 = (
ªc_c‹ªœti⁄
*)
	`ß„_mÆloc
((rec_correlation));

1064 
rc
->
ro_n°rokes
 = 
ps_size
;

1068 if–
	`öôülize_ªc_ñemít
(&(
rc
->
ro_ñem
),

1069 
ty≥
,

1070 
size
,

1071 
å™s
,

1072 
c⁄f
Ë=
NULL
 ) {

1073 (
NULL
);

1076 if–(
rc
->
ro_°rokes
 = 
	`make_≥n_°roke_¨øy
(
ps_size
)Ë=
NULL
 ) {

1077 (
NULL
);

1080 
rc
->
ro_°¨t
 = (
u_öt
*)
	`ß„_mÆloc
(
ps_size
 * ());

1081 
rc
->
ro_°›
 = (
u_öt
*)
	`ß„_mÆloc
(
ps_size
 * ());

1082 (
rc
);

1083 
	}
}

1085 
	$dñëe_ªc_c‹ªœti⁄
(
ªc_c‹ªœti⁄
* 
rc
,
boﬁ
 
dñëe_poöts_p
)

1087 if–
rc
 !
NULL
 ) {

1089 
	`˛ónup_ªc_ñemít
(&
rc
->
ro_ñem
,
dñëe_poöts_p
);

1091 
	`dñëe_≥n_°roke_¨øy
(
rc
->
ro_n°rokes
,rc->
ro_°rokes
,
dñëe_poöts_p
);

1093 if–
rc
->
ro_°¨t
 !
NULL
 ) {

1094 
	`‰ì
(
rc
->
ro_°¨t
);

1097 if–
rc
->
ro_°›
 !
NULL
 ) {

1098 
	`‰ì
(
rc
->
ro_°›
);

1101 
	`‰ì
(
rc
);

1104 
	}
}

1112 
ªc_‚
* 
	$make_ªc_‚_¨øy
(
u_öt
 
size
)

1114 
ªc_‚
* 
ri
 = (ªc_‚*)
	`ß„_mÆloc
((
size
 + 1) * (rec_fn));

1115 
i
;

1117  
i
 = 0; i < 
size
; i++ ) {

1118 
ri
[
i
] = 
NULL
;

1121 
ri
[
i
] = 
NULL
;

1123 (
ri
);

1124 
	}
}

1126 
	$dñëe_ªc_‚_¨øy
(
ªc_‚
* 
rf
)

1128 if–
rf
 !
NULL
 ) {

1129 
	`‰ì
(
rf
);

1131 
	}
}

1138 
≥n_°roke
* 
	$make_≥n_°roke_¨øy
(
u_öt
 
size
)

1140 
i
;

1141 
≥n_°roke
* 
ri
;

1143 
ri
 = (
≥n_°roke
*Ë
	`ß„_mÆloc
(
size
 * (pen_stroke));

1144  
i
 = 0; i < 
size
; i++ ) {

1145 
ri
[
i
].
ps_≈ts
 = 0;

1146 
ri
[
i
].
ps_±s
 = 
NULL
;

1147 
ri
[
i
].
ps_n°©e
 = 0;

1148 
ri
[
i
].
ps_°©e
 = 
NULL
;

1151 (
ri
);

1152 
	}
}

1154 
≥n_°roke
* 
	$öôülize_≥n_°roke
(
≥n_°roke
* 
ps
,

1155 
u_öt
 
≈ts
,

1156 
≥n_poöt
* 
±s
,

1157 
u_öt
 
n°©e
,

1158 
u_öt
* 
å™s
,

1159 
≥n_°©e
* 
°©e
)

1161 if–
ps
 !
NULL
 ) {

1162 
ps
->
ps_≈ts
 = 
≈ts
;

1163 
ps
->
ps_±s
 = 
±s
;

1164 
ps
->
ps_n°©e
 = 
n°©e
;

1165 
ps
->
ps_å™s
 = 
å™s
;

1166 
ps
->
ps_°©e
 = 
°©e
;

1168  (
ps
);

1169 
	}
}

1171 
	$dñëe_≥n_°roke_¨øy
(
u_öt
 
size
,
≥n_°roke
* 
ps
,
boﬁ
 
dñëe_poöts_p
)

1173 
i
;

1175 if–
ps
 !
NULL
 ) {

1177  
i
 = 0; i < 
size
; i++ ) {

1179 if–
ps
[
i
].
ps_°©e
 !
NULL
 ) {

1180 
	`‰ì
(
ps
[
i
].
ps_°©e
);

1183 if–
ps
[
i
].
ps_å™s
 !
NULL
 ) {

1184 
	`‰ì
(
ps
[
i
].
ps_å™s
);

1187 if–
dñëe_poöts_p
 ) {

1188 
	`dñëe_≥n_poöt_¨øy
(
ps
[
i
].
ps_±s
);

1193 
	`‰ì
(
ps
);

1195 
	}
}

1202 
≥n_poöt
* 
	$make_≥n_poöt_¨øy
(
u_öt
 
size
)

1204 
≥n_poöt
* 
µ
 = (≥n_poöt*)
	`ß„_mÆloc
(
size
 * (pen_point));

1205 
i
;

1207  
i
 = 0; i < 
size
; i++ ) {

1208 
µ
[
i
].
time
 = 0;

1209 
µ
[
i
].
x
 =Öp[i].
y
 = 0;

1212 (
µ
);

1213 
	}
}

1215 
	$dñëe_≥n_poöt_¨øy
(
≥n_poöt
* 
µ
)

1217 if–
µ
 !
NULL
 ) {

1218 
	`‰ì
(
µ
);

1220 
	}
}

1227 
≥n_°©e
* 
	$make_≥n_°©e_¨øy
(
u_öt
 
size
)

1229 
i
;

1231 
≥n_°©e
* 
ps
 = (≥n_°©e*)
	`ß„_mÆloc
(
size
*(pen_state));

1233  
i
 = 0; i < 
size
; i++ ) {

1234 
ps
[
i
].
±_buâ⁄
 = 0;

1235 
ps
[
i
].
±_≥n
 = 0;

1236 
ps
[
i
].
±_¥essuª
 = 0;

1237 
ps
[
i
].
±_™gÀx
 = 0.0;

1238 
ps
[
i
].
±_™gÀy
 = 0.0;

1239 
ps
[
i
].
±_b¨ªÃŸ©e
 = 0.0;

1242 (
ps
);

1244 
	}
}

1246 
≥n_°©e
* 
	$öôülize_≥n_°©e
(
≥n_°©e
* 
ps
,

1247 
u_sh‹t
 
buâ⁄
,

1248 
u_sh‹t
 
≥n
,

1249 
¥essuª
,

1250 
™gÀx
,

1251 
™gÀy
,

1252 
b¨ªÃŸ©e
)

1254 if–
ps
 !
NULL
 ) {

1255 
ps
->
±_buâ⁄
 = 
buâ⁄
;

1256 
ps
->
±_≥n
 = 
≥n
;

1257 
ps
->
±_¥essuª
 = 
¥essuª
;

1258 
ps
->
±_™gÀx
 = 
™gÀx
;

1259 
ps
->
±_™gÀy
 = 
™gÀy
;

1260 
ps
->
±_b¨ªÃŸ©e
 = 
b¨ªÃŸ©e
;

1263 (
ps
);

1264 
	}
}

1266 
	$dñëe_≥n_°©e_¨øy
(
≥n_°©e
* 
ps
)

1268 if–
ps
 !
NULL
 ) {

1269 
	`‰ì
(
ps
);

1271 
	}
}

1277 
ge°uª
*

1278 
	$make_ge°uª_¨øy
(
u_öt
 
size
)

1280 ((
ge°uª
*)
	`ß„_mÆloc
(
size
 * (gesture)));

1281 
	}
}

1283 
ge°uª
* 
	$öôülize_ge°uª
(
ge°uª
* 
g
,

1284 * 
«me
,

1285 
u_öt
 
nhs
,

1286 
≥n_poöt
* 
h•Ÿs
,

1287 
≥n_ª˘
 
bbox
,

1288 
xge°uª
 
‚
,

1289 * 
wsöfo
)

1291 if–
g
 !
NULL
 ) {

1295 
g
->
g_nhs
 = 
nhs
;

1296 
g
->
g_h•Ÿs
 = 
h•Ÿs
;

1298 
g
->
g_«me
 = 
	`°rdup
(
«me
);

1300 
g
->
g_bbox
.
x
 = 
bbox
.x;

1301 
g
->
g_bbox
.
y
 = 
bbox
.y;

1302 
g
->
g_bbox
.
width
 = 
bbox
.width;

1303 
g
->
g_bbox
.
height
 = 
bbox
.height;

1304 
g
->
g_a˘i⁄
 = 
‚
;

1305 
g
->
g_wsöfo
 = 
wsöfo
;

1308 (
g
);

1309 
	}
}

1312 
	$dñëe_ge°uª_¨øy
(
u_öt
 
size
,
ge°uª
* 
ga
,
boﬁ
 
dñëe_poöts_p
)

1314 
i
;

1316 if–
ga
 !
NULL
 ) {

1318  
i
 = 0; i < 
size
; i++ ) {

1320 
	`‰ì
(
ga
[
i
].
g_«me
);

1322 if–
dñëe_poöts_p
 ) {

1323 
	`dñëe_≥n_poöt_¨øy
(
ga
[
i
].
g_h•Ÿs
);

1327 
	`‰ì
(
ga
);

1329 
	}
}

1335 
≥n_°roke
*

1336 
	$c›y_≥n_°roke
(
≥n_°roke
* 
ps1
,≥n_°roke* 
ps2
)

1338 
u_öt
* 
å™s
 = 
NULL
;

1339 
≥n_°©e
* 
°©e
 = 
NULL
;

1341 if–(
å™s
 =

1342 
	`c›y_°©e_å™s_¨øy
(
ps2
->
ps_n°©e
,

1343 
ps2
->
ps_å™s
)Ë=
NULL
 ) {

1344 (
NULL
);

1347 if–(
°©e
 =

1348 
	`c›y_≥n_°©e_¨øy
(
ps2
->
ps_n°©e
,

1349 
ps2
->
ps_°©e
)Ë=
NULL
 ) {

1350 
	`‰ì
(
å™s
);

1351 (
NULL
);

1354 
	`öôülize_≥n_°roke
(
ps1
,

1355 
ps2
->
ps_≈ts
,

1356 
ps2
->
ps_±s
,

1357 
ps2
->
ps_n°©e
,

1358 
å™s
,

1359 
°©e
);

1360 (
ps1
);

1362 
	}
}

1364 
≥n_°roke
*

1365 
	$c›y_≥n_°roke_¨øy
(
u_öt
 
n°rokes
,

1366 
≥n_°roke
* 
°rokes
)

1368 
i
;

1369 
≥n_°roke
* 
ps
 = 
	`make_≥n_°roke_¨øy
(
n°rokes
);

1371 if–
ps
 !
NULL
 ) {

1373  
i
 = 0; i < 
n°rokes
; i++ ) {

1375 
	`c›y_≥n_°roke
(&
ps
[
i
],&
°rokes
[i]);

1381 (
ps
);

1382 
	}
}

1384 
≥n_°©e
*

1385 
	$c›y_≥n_°©e_¨øy
(
u_öt
 
n°©e
,
≥n_°©e
* 
°©e
)

1387 
≥n_°©e
* 
ps
 = 
	`make_≥n_°©e_¨øy
(
n°©e
);

1388 
i
;

1390 if–
ps
 !
NULL
 ) {

1392  
i
 = 0; i < 
n°©e
; i++ ) {

1394 
	`öôülize_≥n_°©e
(&
ps
[
i
],

1395 
°©e
[
i
].
±_buâ⁄
,

1396 
°©e
[
i
].
±_≥n
,

1397 
°©e
[
i
].
±_¥essuª
,

1398 
°©e
[
i
].
±_™gÀx
,

1399 
°©e
[
i
].
±_™gÀy
,

1400 
°©e
[
i
].
±_b¨ªÃŸ©e
);

1405 (
ps
);

1406 
	}
}

1408 
u_öt
*

1409 
	$c›y_°©e_å™s_¨øy
(
u_öt
 
¡øns
,u_öt* 
å™s
)

1411 
u_öt
* 
±
 = (u_öt*)
	`ß„_mÆloc
(
¡øns
*(u_int));

1412 
i
;

1414  
i
 = 0; i < 
¡øns
; i++ ) {

1415 
±
[
i
] = 
å™s
[i];

1417 (
±
);

1419 
	}
}

1421 
≥n_°roke
*

1422 
	$c⁄ˇã«ã_≥n_°rokes
(
n°rokes1
,

1423 
≥n_°roke
* 
°rokes1
,

1424 
n°rokes2
,

1425 
≥n_°roke
* 
°rokes2
,

1426 * 
n°rokes3
,

1427 
≥n_°roke
** 
°rokes3
)

1429 
i
;

1430 
ns
;

1431 
≥n_°roke
* 
ps
;

1435 
ns
 = 
n°rokes1
 + 
n°rokes2
;

1439 if–(
ps
 = 
	`make_≥n_°roke_¨øy
(
ns
)Ë=
NULL
 ) {

1440 (
NULL
);

1445  
i
 = 0; i < 
n°rokes1
; i++ ) {

1446 if–
	`c›y_≥n_°roke
(&
ps
[
i
],&
°rokes1
[i]Ë=
NULL
 ) {

1447 
	`dñëe_≥n_°roke_¨øy
(
ns
,
ps
,
Ál£
);

1448 (
NULL
);

1452  ; 
i
 < 
ns
; i++ ) {

1453 if–
	`c›y_≥n_°roke
(&
ps
[
i
],&
°rokes2
[ò- 
n°rokes1
]Ë=
NULL
 ) {

1454 
	`dñëe_≥n_°roke_¨øy
(
ns
,
ps
,
Ál£
);

1455 (
NULL
);

1459 *
n°rokes3
 = 
ns
;

1460 *
°rokes3
 = 
ps
;

1462 (
ps
);

1463 
	}
}

	@demos/nxscribble/hre_api.h

22 #i‚de‡
_HRE_API_H_


24 
	#_HRE_API_H_


	)

31 * 
	tªcognizî
;

37 * 
	tw‹d£t
;

39 
	~<hª.h
>

40 
	~<hª_≠i_öã∫Æ.h
>

	@demos/nxscribble/hre_api_internal.h

22 #i‚de‡
_HRE_API_INTERNAL_H_


24 
	#_HRE_API_INTERNAL_H_


	)

28 
	~<hª.h
>

42 
ªcognizî


43 
ªcognizî_lﬂd
(* 
dúe˘‹y
,* 
«me
,** 
sub£t
);

50 
ªcognizî_u∆ﬂd
(
ªcognizî
 
ªc
);

58 c⁄° 
ªc_öfo
*

59 
ªcognizî_gë_öfo
(
ªcognizî
 
ªc
);

67 c⁄° * 
ªcognizî_m™agî_vîsi⁄
(
ªcognizî
 
ªc
);

77 
ªcognizî_lﬂd_°©e
(
ªcognizî
 
ªc
,* 
dú
,* 
«me
);

87 
ªcognizî_ßve_°©e
(
ªcognizî
 
ªc
,* 
dú
,* 
«me
);

94 
ªcognizî_îr‹
(
ªcognizî
 
ªc
);

105 
w‹d£t


106 
ªcognizî_lﬂd_di˘i⁄¨y
(
ªcognizî
 
ªc
,* 
dúe˘‹y
,* 
«me
);

113 
ªcognizî_ßve_di˘i⁄¨y
(
ªcognizî
 
ªc
,* 
dú
,* 
«me
,
w‹d£t
 
di˘
);

121 
ªcognizî_‰ì_di˘i⁄¨y
(
ªcognizî
 
ªc
,
w‹d£t
 
di˘
);

129 
ªcognizî_add_to_di˘i⁄¨y
(
ªcognizî
 
ªc
,
Àâî£t
* 
w‹d
,
w‹d£t
 
di˘
);

137 
ªcognizî_dñëe_‰om_di˘i⁄¨y
(
ªcognizî
 
ªc
,
Àâî£t
* 
w‹d
,
w‹d£t
 
di˘
);

151 
ªcognizî_£t_c⁄ãxt
(
ªcognizî
 
ªc
,
rc
* 
ªc_xt
);

152 
rc
*

153 
ªcognizî_gë_c⁄ãxt
(
ªcognizî
 
ªc
);

162 
ªcognizî_˛ór
(
ªcognizî
 
ªc
,
boﬁ
 
dñëe_poöts_p
);

170 
ªcognizî_gë_buf„r
(
ªcognizî
 
ªc
, 
u_öt
* 
n°rokes
,
≥n_°roke
** 
°rokes
);

173 
ªcognizî_£t_buf„r
(
ªcognizî
 
ªc
,
u_öt
 
n°rokes
,
≥n_°roke
* 
°rokes
);

187 
ªcognizî_å™¶©e
(
ªcognizî
 
ªc
,

188 
u_öt
 
n°rokes
,

189 
≥n_°roke
* 
°rokes
,

190 
boﬁ
 
c‹ªœã_p
,

191 * 
ƒë
,

192 
ªc_Æã∫©ive
** 
ªt
);

200 
ªc_‚
*

201 
ªcognizî_gë_exãnsi⁄_fun˘i⁄s
(
ªcognizî
 
ªc
);

214 
ªcognizî_gë_ge°uª_«mes
(
ªcognizî
 
ªc
);

221 
xge°uª


222 
ªcognizî_£t_ge°uª_a˘i⁄
(
ªcognizî
 
ªc
,

223 * 
«me
,

224 
xge°uª
 
‚
,

225 * 
wsöof
);

234 
dñëe_ªc_Æã∫©ive_¨øy
(
u_öt
 
«…î
,

235 
ªc_Æã∫©ive
* 
ø
,

236 
boﬁ
 
dñëe_poöts_p
);

239 
dñëe_ªc_c‹ªœti⁄
(
ªc_c‹ªœti⁄
* 
c‹r
,

240 
boﬁ
 
dñëe_poöts_p
);

247 
≥n_°roke
*

248 
make_≥n_°roke_¨øy
(
u_öt
 
size
);

249 
≥n_°roke
*

250 
öôülize_≥n_°roke
(
≥n_°roke
* 
ps
,

251 
u_öt
 
≈ts
,

252 
≥n_poöt
* 
±s
,

253 
u_öt
 
n°©e
,

254 
u_öt
* 
å™s
,

255 
≥n_°©e
* 
°©e
);

257 
dñëe_≥n_°roke_¨øy
(
u_öt
 
size
,
≥n_°roke
* 
ps
,
boﬁ
 
dñëe_poöts_p
);

259 
≥n_poöt
*

260 
make_≥n_poöt_¨øy
(
u_öt
 
size
);

262 
dñëe_≥n_poöt_¨øy
(
≥n_poöt
* 
µ
);

264 
≥n_°roke
*

265 
c›y_≥n_°roke_¨øy
(
u_öt
 
n°rokes
,
≥n_°roke
* 
°rokes
);

266 
≥n_°©e
*

267 
c›y_≥n_°©e_¨øy
(
u_öt
 
n°©e
,
≥n_°©e
* 
°©e
);

268 
u_öt
*

269 
c›y_°©e_å™s_¨øy
(
u_öt
 
¡øns
,u_öt* 
å™s
);

271 
≥n_°©e
*

272 
make_≥n_°©e_¨øy
(
u_öt
 
size
);

273 
≥n_°©e
*

274 
öôülize_≥n_°©e
(
≥n_°©e
* 
ps
,

275 
u_sh‹t
 
buâ⁄
,

276 
u_sh‹t
 
≥n
,

277 
¥essuª
,

278 
™gÀx
,

279 
™gÀy
,

280 
b¨ªÃŸ©e
);

282 
dñëe_≥n_°©e_¨øy
(
≥n_°©e
* 
ps
);

	@demos/nxscribble/hre_internal.h

22 #i‚de‡
_HRE_INTERNAL_H_


24 
	#_HRE_INTERNAL_H_


	)

28 
	#w‹d£t
 *

	)

30 
	~<hª.h
>

32 #unde‡
w‹d£t


34 
	#ªcognizî
 *

	)

43 
	s_w‹d£t
 {

44 * 
	mws_∑th«me
;

45 
ªcognizî
 
	mws_ªcognizî
;

46 * 
	mws_öã∫Æ
;

47 } *
	tw‹d£t
;

49 #unde‡
ªcognizî


58 
	s_Recognizî
 {

59 
u_öt
 
	mªcognizî_magic
;

62 * 
	mªcognizî_vîsi⁄
;

64 
ªc_öfo
* 
	mªcognizî_öfo
;

65 * 
	mªcognizî_•ecific
;

67 (*
	mªcognizî_lﬂd_°©e
)(

68 
	m_Recognizî
*,

74 (*
	mªcognizî_ßve_°©e
)(

75 
	m_Recognizî
*,

81 (*
	mªcognizî_îr‹
)(

82 
	m_Recognizî
*);

83 
	mw‹d£t


84 (*
	mªcognizî_lﬂd_di˘i⁄¨y
)(

89 
	m_Recognizî
*,

92 (*
	mªcognizî_ßve_di˘i⁄¨y
)(

98 
	m_Recognizî
*,

99 *, *, 
	mw‹d£t
);

102 (*
	mªcognizî_‰ì_di˘i⁄¨y
)(

106 
	m_Recognizî
*,

107 
	mw‹d£t
);

109 (*
	mªcognizî_add_to_di˘i⁄¨y
)(

114 
	m_Recognizî
*,

115 
	mÀâî£t
*, 
	mw‹d£t
);

117 (*
	mªcognizî_dñëe_‰om_di˘i⁄¨y
)(

122 
	m_Recognizî
*,

123 
	mÀâî£t
*, 
	mw‹d£t
);

125 (*
	mªcognizî_£t_c⁄ãxt
)(

129 
	m_Recognizî
*,
	mrc
*);

130 
	mrc
*

131 (*
	mªcognizî_gë_c⁄ãxt
)(

134 
	m_Recognizî
*);

137 (*
	mªcognizî_˛ór
)(

141 
	m_Recognizî
*, 
	mboﬁ
);

143 (*
	mªcognizî_gë_buf„r
)(

148 
	m_Recognizî
*, 
	mu_öt
*, 
	m≥n_°roke
**);

151 (*
	mªcognizî_£t_buf„r
)(

156 
	m_Recognizî
*, 
	mu_öt
, 
	m≥n_°roke
*);

158 (*
	mªcognizî_å™¶©e
)(

166 
	m_Recognizî
*, 
	mu_öt
, 
	m≥n_°roke
*,

167 
	mboﬁ
, *, 
	mªc_Æã∫©ive
**);

168 
	mªc_‚
*

169 (*
	mªcognizî_gë_exãnsi⁄_fun˘i⁄s
)(

170 
	m_Recognizî
*);

172 (*
	mªcognizî_gë_ge°uª_«mes
)(

173 
	m_Recognizî
*);

174 
	mxge°uª


175 (*
	mªcognizî_£t_ge°uª_a˘i⁄
)(

176 
	m_Recognizî
*,

181 *, 
	mxge°uª
, *);

182 
u_öt
 
	mªcognizî_íd_magic
;

185 
_Recognizî
* 
	tªcognizî
;

197 
	$ªcognizî
 (*
	tªcognizî_öã∫Æ_öôülize
)(
	tªc_öfo
* 
	tri
);

203 
	#RECOGNIZER_INITIALIZE
(
_a
) \

204 
ªcognizî
 
	`__ªcognizî_öã∫Æ_öôülize
(
ªc_öfo
* 
_a
)

	)

213 (*
	tªcognizî_öã∫Æ_föÆize
)(
	tªcognizî
 
	tr
);

215 
	#RECOGNIZER_FINALIZE
(
_a
) \

216 
	`__ªcognizî_öã∫Æ_föÆize
(
ªcognizî
 
_a
)

	)

223 
ªcognizî


224 
	`make_ªcognizî
(
ªc_öfo
* 
ri
);

226 
	`dñëe_ªcognizî
(
ªcognizî
 
ªc
);

228 
ªc_Æã∫©ive
*

229 
	`make_ªc_Æã∫©ive_¨øy
(
u_öt
 
size
);

230 
ªc_c‹ªœti⁄
*

231 
	`make_ªc_c‹ªœti⁄
(
ty≥
,

232 
u_öt
 
size
,

233 * 
å™s
,

234 
ªc_c⁄fidí˚
 
c⁄f
,

235 
u_öt
 
ps_size
);

237 
ªc_‚
*

238 
	`make_ªc_‚_¨øy
(
u_öt
 
size
);

240 
	`dñëe_ªc_‚_¨øy
(
ªc_‚
* 
rf
);

242 
ge°uª
*

243 
	`öôülize_ge°uª
(
ge°uª
* 
g
,

244 * 
«me
,

245 
u_öt
 
nhs
,

246 
≥n_poöt
* 
h•Ÿs
,

247 
≥n_ª˘
 
bbox
,

248 
xge°uª
 
cback
,

249 * 
wsöfo
);

250 
ge°uª
*

251 
	`make_ge°uª_¨øy
(
u_öt
 
size
);

253 
	`dñëe_ge°uª_¨øy
(
u_öt
 
size
,
ge°uª
* 
ga
,
boﬁ
 
dñëe_poöts_p
);

255 
≥n_°roke
*

256 
	`c⁄ˇã«ã_≥n_°rokes
(
n°rokes1
,

257 
≥n_°roke
* 
°rokes1
,

258 
n°rokes2
,

259 
≥n_°roke
* 
°rokes2
,

260 * 
n°rokes3
,

261 
≥n_°roke
** 
°rokes3
);

263 
ªc_Æã∫©ive
*

264 
	`öôülize_ªc_Æã∫©ive
(
ªc_Æã∫©ive
* 
ø
,
u_öt
 
√Àm
);

265 
ªc_ñemít
*

266 
	`öôülize_ªc_ñemít
(
ªc_ñemít
* 
ª
,

267 
ty≥
,

268 
u_öt
 
size
,

269 * 
å™s
,

270 
ªc_c⁄fidí˚
 
c⁄f
);

279 
	#REC_DEFAULT_LOCALE
 "C"

	)

280 
	#RECHOME
 "RECHOME"

	)

281 
	#LANG
 "LANG"

	)

283 
	~<hª_≠i_öã∫Æ.h
>

	@demos/nxscribble/li_recognizer.c

20 
	~<sys/ty≥s.h
>

21 
	~<°dio.h
>

22 
	~<°rög.h
>

23 #i‚de‡
ELX


24 
	~<°dlib.h
>

26 
	~<m©h.h
>

27 
	~<loˇÀ.h
>

28 
	~<hª_öã∫Æ.h
>

29 
	~<£tjmp.h
>

30 
	~"utû.h
"

31 
	~"m©rix.h
"

32 
	~"sc.h
"

33 
	~"li_ªcognizî.h
"

34 
	~"li_ªcognizî_öã∫Æ.h
"

37 
	glidebug
 = 0;

41 
	#LI_MAGIC
 0xACCBADDD

	)

43 
	#CHECK_LI_MAGIC
(
_a
) \

44 ((
_a
Ë!
NULL
 && ((
li_ªcognizî
*)(_a))->
li_magic
 =
LI_MAGIC
)

	)

47 
lülg_öôülize
(
rCœssifõr
 *);

48 
lülg_ªad_˛assifõr_dige°
(
rCœssifõr
 *);

49 
lülg_ˇn⁄iˇlize_exam∂es
(
rCœssifõr
 *);

50 *
lülg_ªcognize_°roke
(
rCœssifõr
 *, 
poöt_li°
 *);

53 * 
	gli_îr_msg
 = 
NULL
;

54 
	g_zdebug_Êag
[128];

56 #i‚de‡
__ECOS


58 
	#bc›y
(
s1
,
s2
,
n
Ë
	`mem˝y
(s2,s1,n)

	)

62 *
	$°rdup
(* 
‰om
) {

63 * 
to
;

64 
Àn
 = 
	`°æí
(
‰om
) + 1;

67 
to
 = 
	`Æloˇã
(
Àn
, );

68 
	`mem˝y
(
to
, 
‰om
, 
Àn
);

69  
to
;

70 
	}
}

77 
‰ì_rCœssifõr
(
rCœssifõr
* 
rc
);

83 
poöt_li°
*

84 
	$add_exam∂e
(
poöt_li°
* 
l
,
≈ts
,
≥n_poöt
* 
±s
)

86 
≥n_poöt
* 
Õts
 = 
	`make_≥n_poöt_¨øy
(
≈ts
);

88 
poöt_li°
 *
p
 = 
	`Æloˇã
(1,Öoint_list);

90 
p
->
≈ts
 =Çpts;

91 
p
->
±s
 = 
Õts
;

92 
p
->
√xt
 = 
l
;

96 
	`bc›y
(
±s
,
Õts
,
≈ts
 * (
≥n_poöt
));

98 (
p
);

99 
	}
}

103 
	$dñëe_exam∂es
(
poöt_li°
* 
l
)

105 
poöt_li°
* 
p
;

107  ; 
l
 !
NULL
;Ü = 
p
 ) {

108 
p
 = 
l
->
√xt
;

109 
	`‰ì
(
l
->
±s
);

110 
	`‰ì
(
l
);

112 
	}
}

123 
	$ªcognize_öã∫Æ
(
rCœssifõr
* 
ªc
,
≥n_°roke
* 
°r
,* 
rc⁄f
)

125 *
ªs
 = 
NULL
;

126 
poöt_li°
 *
°roke
 = 
NULL
;

128 
°roke
 = 
	`add_exam∂e
(
NULL
, 
°r
->
ps_≈ts
, så->
ps_±s
);

129 i‡(
°roke
 =
NULL
) (NULL);

131 
ªs
 = 
	`lülg_ªcognize_°roke
(
ªc
, 
°roke
);

133 
	`dñëe_exam∂es
(
°roke
);

134 (
ªs
);

135 
	}
}

142 
	$fûe_∑th
(* 
dú
,* 
fûíame
,* 
∑th«me
)

144 * 
dŸ
;

148 
dŸ
 = 
	`°ºchr
(
fûíame
,'.');

150 if–
dŸ
 =
NULL
 ) {

156 if–
	`°rcmp
(
dŸ
,
LI_CLASSIFIER_EXTENSION
) != 0 ) {

162 
	`°r˝y
(
∑th«me
,
dú
);

163 
	`°rˇt
(
∑th«me
,"/");

164 
	`°rˇt
(
∑th«me
,
fûíame
);

167 
	}
}

172 
	$ªad_˛assifõr_poöts
(
FILE
* 
fd
,
n˛ss
,
poöt_li°
** 
ex
,** 
˙ames
)

174 
i
,
j
,
k
;

175 
buf
[
BUFSIZ
];

176 
√x
 = 0;

177 * 
«mes
[
MAXSCLASSES
];

178 
poöt_li°
* 
exam∂es
[
MAXSCLASSES
];

179 
≥n_poöt
* 
±s
;

180 
≈ts
;

184  
i
 = 0; i < 
MAXSCLASSES
; i++ ) {

185 
«mes
[
i
] = 
NULL
;

186 
exam∂es
[
i
] = 
NULL
;

194  
k
 = 0; k < 
n˛ss
; k++ ) {

198 if–
	`fsˇnf
(
fd
,"%d %s",&
√x
,
buf
) != 2 ) {

199 
	`¥ötf
("%†*FAILED* -Üöe: %d\n", 
__FUNCTION__
, 
__LINE__
);

200 
u«Œoˇã
;

205 
«mes
[
k
] = 
	`°rdup
(
buf
);

211  
i
 = 0; i < 
√x
; i++ ) {

215 if–
	`fsˇnf
(
fd
,"%d",&
≈ts
) != 1 ) {

216 
	`¥ötf
("%†*FAILED* -Üöe: %d\n", 
__FUNCTION__
, 
__LINE__
);

217 
u«Œoˇã
;

222 if–(
±s
 = 
	`make_≥n_poöt_¨øy
(
≈ts
)Ë=
NULL
 ) {

223 
	`¥ötf
("%†*FAILED* -Üöe: %d\n", 
__FUNCTION__
, 
__LINE__
);

224 
u«Œoˇã
;

229  
j
 = 0; j < 
≈ts
; j++ ) {

230 
x
,
y
;

231 
jj
;

232 if–
	`fsˇnf
(
fd
,"%d %d",&
x
,&
y
) != 2 ) {

233 
	`dñëe_≥n_poöt_¨øy
(
±s
);

234 
	`¥ötf
("%†*FAILED* -Üöe: %d\n", 
__FUNCTION__
, 
__LINE__
);

235 
	`¥ötf
("class = %d/%d/%s,Éx = %d/%d,Öt: %d/%d\n",

236 
k
, 
n˛ss
, 
«mes
[k], 
i
, 
√x
, 
j
, 
≈ts
);

237 
jj
 = 0; jj < 
j
; jj++) {

238 
	`¥ötf
("±s[%d] = %d/%d\n", 
jj
, 
±s
[jj].
x
,Öts[jj].
y
);

240 
u«Œoˇã
;

242 
±s
[
j
].
x
 = x;

243 
±s
[
j
].
y
 = y;

248 if–(
exam∂es
[
k
] = 
	`add_exam∂e
”xam∂es[k],
≈ts
,
±s
)Ë=
NULL
 ) {

249 
	`dñëe_≥n_poöt_¨øy
(
±s
);

250 
	`¥ötf
("%†*FAILED* -Üöe: %d\n", 
__FUNCTION__
, 
__LINE__
);

251 
u«Œoˇã
;

254 
	`dñëe_≥n_poöt_¨øy
(
±s
);

264 
	`bc›y
(
exam∂es
,
ex
,(examples));

265 
	`bc›y
(
«mes
,
˙ames
,(names));

271 
u«Œoˇã
:

273  ; 
k
 >= 0; k-- ) {

274 
	`dñëe_exam∂es
(
exam∂es
[
k
]);

275 
	`‰ì
(
«mes
[
k
]);

278 
	`îr‹
("Error inÑeadingÉxampleÖoints from classifier file");

280 
	}
}

284 
	$ªad_˛assifõr
(
FILE
* 
fd
,
rCœssifõr
* 
rc
)

286 
sCœssifõr
 
sc
;

288 
li_îr_msg
 = 
NULL
;

292 if–(
sc
 = 
	`sRód
(
fd
)Ë=
NULL
 ) {

298 if–
	`ªad_˛assifõr_poöts
(
fd
,
sc
->
n˛as£s
,
rc
->
ex
,rc->
˙ames
) != 0 ) {

299 
	`sFªeCœssifõr
(
sc
);

305 
rc
->
sc
 = sc;

308 
	}
}

317 
	$ªcognizî_gëCœs£s
 (
ªcognizî
 
r
, ***
li°
, *
nc
)

319 
i
, 
n˛as£s
;

320 
li_ªcognizî
* 
ªc
;

321 
sCœssifõr
 
sc
;

322 **
ªt
;

324 
ªc
 = (
li_ªcognizî
*)
r
->
ªcognizî_•ecific
;

328 if–!
	`CHECK_LI_MAGIC
(
ªc
) ) {

329 
li_îr_msg
 = "Notá LIÑecognizer";

333 
sc
 = 
ªc
->
li_rc
.sc;

334 *
nc
 = 
n˛as£s
 = 
sc
->nclasses;

336 
ªt
 = 
	`Æloˇã
(
n˛as£s
, *);

338 
i
 = 0; i < 
n˛as£s
; i++) {

339 
ªt
[
i
] = 
ªc
->
li_rc
.
˙ames
[i];

341 *
li°
 = 
ªt
;

343 
	}
}

346 
	$ªcognizî_˛órSèã
 (
ªcognizî
 
r
)

350 
li_îr_msg
 = "Clearing state isÇot supported byÅhe LIÑecognizer";

353 
	}
}

355 
boﬁ
 
	$iß_li
(
ªcognizî
 
r
)

356 { (
	`CHECK_LI_MAGIC
(
r
)); 
	}
}

359 
	$ªcognizî_åaö
(
ªcognizî
 
r
,
rc
* 
ªc_xt
,
u_öt
 
n°rokes
,

360 
≥n_°roke
* 
°rokes
,
ªc_ñemít
* 
ª
,

361 
boﬁ
 
ª∂a˚_p
)

365 
li_îr_msg
 = "Training isÇot supported byÅhe LIÑecognizer";

368 
	}
}

371 
	$li_ªcognizî_gë_exam∂e
 (
ªcognizî
 
r
,

372 
˛ass
,

373 
ö°™˚
,

374 **
«me
,

375 
≥n_poöt
 **
poöts
,

376 *
≈ts
)

378 
li_ªcognizî
 *
ªc
 = (li_ªcognizî*)
r
->
ªcognizî_•ecific
;

379 
sCœssifõr
 
sc
 = 
ªc
->
li_rc
.sc;

380 
poöt_li°
 *
∂
;

382 if–!
	`CHECK_LI_MAGIC
(
ªc
) ) {

383 
li_îr_msg
 = "Notá LIÑecognizer";

386 i‡(
˛ass
 > 
sc
->
n˛as£s
)

388 
∂
 = 
ªc
->
li_rc
.
ˇn⁄ex
[
˛ass
];

389 
ö°™˚
 && 
∂
)

391 
∂
 =Öl->
√xt
;

392 
ö°™˚
--;

394 i‡(!
∂
)

396 *
«me
 = 
ªc
->
li_rc
.
˙ames
[
˛ass
];

397 *
poöts
 = 
∂
->
±s
;

398 *
≈ts
 = 
∂
->npts;

400 
	}
}

409 
	$li_ªcognizî_lﬂd
(
ªcognizî
 
r
,* 
dú
,* 
fûíame
)

411 
FILE
 *
fd
;

412 * 
∑th«me
;

413 
li_ªcognizî
* 
ªc
;

414 
rCœssifõr
* 
rc
;

416 
ªc
 = (
li_ªcognizî
*)
r
->
ªcognizî_•ecific
;

420 if–!
	`CHECK_LI_MAGIC
(
ªc
) ) {

421 
li_îr_msg
 = "Notá LIÑecognizer";

425 
rc
 = &(
ªc
->
li_rc
);

429 if–
fûíame
 =
NULL
 ) {

430 
li_îr_msg
 = "InvalidÖarameters";

436 if–
dú
 =
NULL
 || ()
	`°æí
(dir) <= 0 ) {

437 
dú
 = ".";

444 
∑th«me
 = 
	`Æloˇã
(
	`°æí
(
dú
Ë+ såÀn(
fûíame
) + 2, );

445 if–
	`fûe_∑th
(
dú
,
fûíame
,
∑th«me
) == -1 ) {

446 
	`‰ì
(
∑th«me
);

447 
li_îr_msg
 = "Notá LIÑecognizer classifier file";

452 
rc
->
fûe_«me
 = 
∑th«me
;

453 i‡(
	`lülg_ªad_˛assifõr_dige°
(
rc
) == 0)

455 
rc
->
fûe_«me
 = 
NULL
;

459 if–(
fd
 = 
	`f›í
(
∑th«me
,"r")Ë=
NULL
 ) {

460 
	`‰ì
(
∑th«me
);

461 
li_îr_msg
 = "Can't open classifier file";

470 if–
rc
->
fûe_«me
 !
NULL
 ) {

471 
	`‰ì_rCœssifõr
(
rc
);

476 if–
	`ªad_˛assifõr
(
fd
,
rc
) < 0 ) {

477 
	`‰ì
(
∑th«me
);

483 
	`f˛o£
(
fd
);

487 
rc
->
fûe_«me
 = 
∑th«me
;

490 i‡(
	`lülg_ˇn⁄iˇlize_exam∂es
(
rc
) != 0) {

491 
	`‰ì
(
∑th«me
);

492 
rc
->
fûe_«me
 = 
NULL
;

497 
	}
}

501 
	$li_ªcognizî_ßve
(
ªcognizî
 
r
,* 
dú
,* 
fûíame
)

505 
li_îr_msg
 = "Saving isÇot supported byÅhe LIÑecognizer";

508 
	}
}

510 
w‹d£t


511 
	$li_ªcognizî_lﬂd_di˘i⁄¨y
(
ªcognizî
 
ªc
,* 
dúe˘‹y
,* 
«me
)

515 
li_îr_msg
 = "DictionariesáreÇot supported byÅhe LIÑecognizer";

517 (
NULL
);

519 
	}
}

522 
	$li_ªcognizî_ßve_di˘i⁄¨y
(
ªcognizî
 
ªc
,

523 * 
dúe˘‹y
,

524 * 
«me
,

525 
w‹d£t
 
di˘
)

529 
li_îr_msg
 = "DictionariesáreÇot supported byÅhe LIÑecognizer";

533 
	}
}

536 
	$li_ªcognizî_‰ì_di˘i⁄¨y
(
ªcognizî
 
ªc
,
w‹d£t
 
di˘
)

540 
li_îr_msg
 = "DictionariesáreÇot supported byÅhe LIÑecognizer";

544 
	}
}

547 
	$li_ªcognizî_add_to_di˘i⁄¨y
(
ªcognizî
 
ªc
,
Àâî£t
* 
w‹d
,
w‹d£t
 
di˘
)

551 
li_îr_msg
 = "DictionariesáreÇot supported byÅhe LIÑecognizer";

555 
	}
}

558 
	$li_ªcognizî_dñëe_‰om_di˘i⁄¨y
(
ªcognizî
 
ªc
,

559 
Àâî£t
* 
w‹d
,

560 
w‹d£t
 
di˘
)

564 
li_îr_msg
 = "DictionariesáreÇot supported byÅhe LIÑecognizer";

568 
	}
}

571 
	$li_ªcognizî_îr‹
(
ªcognizî
 
ªc
)

573 * 
ªt
 = 
li_îr_msg
;

577 if–!
	`CHECK_LI_MAGIC
(
ªc
->
ªcognizî_•ecific
) ) {

578 
li_îr_msg
 = "Notá LIÑecognizer";

579 (
NULL
);

582 
li_îr_msg
 = 
NULL
;

584 (
ªt
);

585 
	}
}

588 
	$li_ªcognizî_˛ór
(
ªcognizî
 
r
,
boﬁ
 
dñëe_poöts_p
)

590 
li_ªcognizî
* 
ªc
;

592 
ªc
 = (
li_ªcognizî
*)
r
->
ªcognizî_•ecific
;

596 if–!
	`CHECK_LI_MAGIC
(
ªc
) ) {

597 
li_îr_msg
 = "Notá LIÑecognizer";

602 
	}
}

605 
	$li_ªcognizî_£t_c⁄ãxt
(
ªcognizî
 
r
,
rc
* 
ªc_xt
)

609 
li_îr_msg
 = "ContextsáreÇot supported byÅhe LIÑecognizer";

612 
	}
}

614 
rc
*

615 
	$li_ªcognizî_gë_c⁄ãxt
(
ªcognizî
 
r
)

619 
li_îr_msg
 = "ContextsáreÇot supported byÅhe LIÑecognizer";

621 (
NULL
);

622 
	}
}

625 
	$li_ªcognizî_gë_buf„r
(
ªcognizî
 
r
, 
u_öt
* 
n°rokes
,
≥n_°roke
** 
°rokes
)

629 
li_îr_msg
 = "Buffer get/setáreÇot supported byÅhe LIÑecognizer";

632 
	}
}

635 
	$li_ªcognizî_£t_buf„r
(
ªcognizî
 
r
,
u_öt
 
n°rokes
,
≥n_°roke
* 
°rokes
)

639 
li_îr_msg
 = "Buffer get/setáreÇot supported byÅhe LIÑecognizer";

642 
	}
}

645 
	$li_ªcognizî_å™¶©e
(
ªcognizî
 
r
,

646 
u_öt
 
ncs
,

647 
≥n_°roke
* 
çs
,

648 
boﬁ
 
c‹ªœã_p
,

649 * 
ƒë
,

650 
ªc_Æã∫©ive
** 
ªt
)

652 * 
˛ss
 = 
NULL
;

653 
li_ªcognizî
* 
ªc
;

654 
c⁄f
;

655 
rCœssifõr
* 
rc
;

657 
ªc
 = (
li_ªcognizî
*)
r
->
ªcognizî_•ecific
;

659 *
ƒë
 = 0;

660 *
ªt
 = 
NULL
;

664 if–!
	`CHECK_LI_MAGIC
(
ªc
) ) {

665 
li_îr_msg
 = "Notá LIÑecognizer";

669 
rc
 = &(
ªc
->
li_rc
);

672 i‡(
ncs
 < 1) {

673 
li_îr_msg
 = "InvalidÖarameters:Çcs";

676 if–
çs
 =
NULL
) {

677 
li_îr_msg
 = "InvalidÖarameters:Åps";

680 if–
ƒë
 =
NULL
) {

681 
li_îr_msg
 = "InvalidÖarameters:Çret";

684 if–
ªt
 =
NULL
) {

685 
li_îr_msg
 = "InvalidÖarameters:Ñet";

710 
˛ss
 = 
	`ªcognize_öã∫Æ
(
rc
,
çs
,&
c⁄f
);

711 i‡(
˛ss
 =
NULL
) {

716 *
ƒë
 = 1;

721 *
ƒë
 = 1;

722 (*
˛ss
);

723 
	}
}

726 
ªc_‚
*

727 
	$li_ªcognizî_gë_exãnsi⁄_fun˘i⁄s
(
ªcognizî
 
ªc
)

729 
ªc_‚
* 
ªt
;

733 if–!
	`CHECK_LI_MAGIC
(
ªc
->
ªcognizî_•ecific
) ) {

734 
li_îr_msg
 = "Notá LIÑecognizer";

735 (
NULL
);

738 
ªt
 = 
	`make_ªc_‚_¨øy
(
LI_NUM_EX_FNS
);

741 
ªt
[
LI_GET_CLASSES
] = (
ªc_‚
)
ªcognizî_gëCœs£s
;

742 
ªt
[
LI_CLEAR
] = (
ªc_‚
)
ªcognizî_˛órSèã
;

743 
ªt
[
LI_ISA_LI
] = (
ªc_‚
)
iß_li
;

744 
ªt
[
LI_TRAIN
] = (
ªc_‚
)
ªcognizî_åaö
;

746 (
ªt
);

747 
	}
}

750 
	$li_ªcognizî_gë_ge°uª_«mes
(
ªcognizî
 
r
)

754 
li_îr_msg
 = "GesturesáreÇot supported byÅhe LIÑecognizer";

756 (
NULL
);

757 
	}
}

759 
xge°uª


760 
	$li_ªcognizî_£t_ge°uª_a˘i⁄
(
ªcognizî
 
r
,

761 * 
«me
,

762 
xge°uª
 
‚
,

763 * 
wsöfo
)

767 
li_îr_msg
 = "GesturesáreÇot supported byÅhe LIÑecognizer";

769 (
NULL
);

770 
	}
}

783 
	$RECOGNIZER_INITIALIZE
(
ri
)

785 
ªcognizî
 
r
;

786 
li_ªcognizî
* 
ªc
;

787 
i
;

791 if–
	`°rcmp
(
ri
->
ri_loˇÀ
,
LI_SUPPORTED_LOCALE
) != 0 ) {

792 
li_îr_msg
 = "Notá supportedÜocale";

793 
	`Ârötf
(
°dîr
, "LocaleÉrror.\n");

795 (
NULL
);

804 if–
ri
->
ri_sub£t
 !
NULL
 ) {

805 
i
 = 0; 
ri
->
ri_sub£t
[i] !
NULL
; i++ ) {

807 if–
	`°rcmp
(
ri
->
ri_sub£t
[
i
],
UPPERCASE
) != 0 &&

808 
	`°rcmp
(
ri
->
ri_sub£t
[
i
],
LOWERCASE
) != 0 &&

809 
	`°rcmp
(
ri
->
ri_sub£t
[
i
],
DIGITS
) != 0 &&

810 
	`°rcmp
(
ri
->
ri_sub£t
[
i
],
GESTURE
) != 0 ) {

811 
li_îr_msg
 = "Notá supported character set";

812 
	`Ârötf
(
°dîr
, "charsetÉrror.\n");

814 (
NULL
);

820 
r
 = 
	`make_ªcognizî
(
ri
);

823 if–
r
 =
NULL
 ) {

824 
li_îr_msg
 = "Can'tállocate storage";

826 (
NULL
);

834 
ªc
 = 
	`Æloˇã
(1, 
li_ªcognizî
);

836 
r
->
ªcognizî_•ecific
 = 
ªc
;

838 
ªc
->
li_rc
.
fûe_«me
 = 
NULL
;

839 
ªc
->
li_rc
.
sc
 = 
NULL
;

843 
r
->
ªcognizî_lﬂd_°©e
 = 
li_ªcognizî_lﬂd
;

844 
r
->
ªcognizî_ßve_°©e
 = 
li_ªcognizî_ßve
;

845 
r
->
ªcognizî_lﬂd_di˘i⁄¨y
 = 
li_ªcognizî_lﬂd_di˘i⁄¨y
;

846 
r
->
ªcognizî_ßve_di˘i⁄¨y
 = 
li_ªcognizî_ßve_di˘i⁄¨y
;

847 
r
->
ªcognizî_‰ì_di˘i⁄¨y
 = 
li_ªcognizî_‰ì_di˘i⁄¨y
;

848 
r
->
ªcognizî_add_to_di˘i⁄¨y
 = 
li_ªcognizî_add_to_di˘i⁄¨y
;

849 
r
->
ªcognizî_dñëe_‰om_di˘i⁄¨y
 = 
li_ªcognizî_dñëe_‰om_di˘i⁄¨y
;

850 
r
->
ªcognizî_îr‹
 = 
li_ªcognizî_îr‹
;

851 
r
->
ªcognizî_å™¶©e
 = 
li_ªcognizî_å™¶©e
;

852 
r
->
ªcognizî_gë_c⁄ãxt
 = 
li_ªcognizî_gë_c⁄ãxt
;

853 
r
->
ªcognizî_£t_c⁄ãxt
 = 
li_ªcognizî_£t_c⁄ãxt
;

854 
r
->
ªcognizî_gë_buf„r
 = 
li_ªcognizî_gë_buf„r
;

855 
r
->
ªcognizî_£t_buf„r
 = 
li_ªcognizî_£t_buf„r
;

856 
r
->
ªcognizî_˛ór
 = 
li_ªcognizî_˛ór
;

857 
r
->
ªcognizî_gë_exãnsi⁄_fun˘i⁄s
 =

858 
li_ªcognizî_gë_exãnsi⁄_fun˘i⁄s
;

859 
r
->
ªcognizî_gë_ge°uª_«mes
 = 
li_ªcognizî_gë_ge°uª_«mes
;

860 
r
->
ªcognizî_£t_ge°uª_a˘i⁄
 =

861 
li_ªcognizî_£t_ge°uª_a˘i⁄
;

865 
ªc
->
li_magic
 = 
LI_MAGIC
;

869 
ªc
->
li_rc
.
fûe_«me
 = 
NULL
;

871  
i
 = 0; i < 
MAXSCLASSES
; i++ ) {

872 
ªc
->
li_rc
.
ex
[
i
] = 
NULL
;

873 
ªc
->
li_rc
.
˙ames
[
i
] = 
NULL
;

876 
	`lülg_öôülize
(&
ªc
->
li_rc
);

879 
li_îr_msg
 = 
NULL
;

881 (
r
);

882 
	}
}

887 
	$‰ì_rCœssifõr
(
rCœssifõr
* 
rc
)

889 
i
;

891 if–
rc
->
fûe_«me
 !
NULL
) {

892 
	`‰ì
(
rc
->
fûe_«me
);

895  
i
 = 0; 
rc
->
ex
[i] !
NULL
; i++) {

896 
	`dñëe_exam∂es
(
rc
->
ex
[
i
]);

897 
	`‰ì
(
rc
->
˙ames
[
i
]);

900 if(
rc
->
sc
 !
NULL
 ) {

901 
	`sFªeCœssifõr
(
rc
->
sc
);

903 
	}
}

907 
	$RECOGNIZER_FINALIZE
(
r
)

909 
li_ªcognizî
* 
ªc
 = (li_ªcognizî*)
r
->
ªcognizî_•ecific
;

913 if–!
	`CHECK_LI_MAGIC
(
ªc
) ) {

914 
li_îr_msg
 = "Notá LIÑecognizer";

920 
	`‰ì_rCœssifõr
(&(
ªc
->
li_rc
));

924 
	`‰ì
(
ªc
);

928 
	`dñëe_ªcognizî
(
r
);

931 
	}
}

941 #i‡
deföed
(
__ECOS
Ë|| deföed(
__CYGWIN__
)

942 
	#MAXINT
 0x7FFFFFFF

	)

944 
	~<vÆues.h
>

946 
	~<sys/time.h
>

948 #ifdef 
__u…rix


950 
röt
();

951 
expf
();

954 #ifdef 
ELX


955 
röt
 ();

956 
expf
 ();

959 
	#WORST_SCORE
 
MAXINT


	)

962 
	#DP_BAND
 3

	)

963 
	#MIN_SIM
 0

	)

964 
	#MAX_DIST
 
MAXINT


	)

965 
	#SIM_THLD
 60

	)

966 
	#DIST_THLD
 3200

	)

969 
	#LP_FILTER_WIDTH
 6

	)

970 
	#LP_FILTER_ITERS
 8

	)

971 
	#LP_FILTER_THLD
 250

	)

972 
	#LP_FILTER_MIN
 5

	)

975 
	#PE_AL_THLD
 1500

	)

976 
	#PE_ATCR_THLD
 135

	)

979 
	#T_ONE
 1

	)

980 
	#T_TWO
 20

	)

983 
	#CANONICAL_X
 108

	)

984 
	#CANONICAL_Y
 128

	)

985 
	#DIST_SQ_THRESHOLD
 (3*3Ë

	)

986 
	#NCANONICAL
 50

	)

989 
	#TAP_CHAR
 "."

	)

990 
	#TAP_TIME_THLD
 150

	)

991 
	#TAP_DIST_THLD
 75

	)

992 
	#TAP_PATHLEN
 1000

	)

996 
	#chaöcode
 
time


	)

999 
	#RGN_CONVEX
 0

	)

1000 
	#RGN_CONCAVE
 1

	)

1001 
	#RGN_PLAIN
 2

	)

1002 
	#RGN_PSEUDO
 3

	)

1005 
	sRegi⁄Li°
 {

1006 
	m°¨t
;

1007 
	míd
;

1008 
	mty≥
;

1009 
Regi⁄Li°
 *
	m√xt
;

1010 } 
	tªgi⁄_li°
;

1014 
	glülg_d˘bl
[3][3] = {{1, 0, 7}, {2, 0x7FFFFFFF, 6}, {3, 4, 5}};

1017 
	glülg_Õfwts
[2 * 
LP_FILTER_WIDTH
 + 1];

1018 
	glülg_Õfc⁄°
 = -1;

1021 
lülg_¥ïro˚ss_°roke
(
poöt_li°
 *);

1022 
poöt_li°
 *
lülg_compuã_domö™t_poöts
(point_list *);

1023 
poöt_li°
 *
lülg_öãΩﬁ©e_poöts
(point_list *);

1024 
lülg_bª¶öe
(
≥n_poöt
 *,Öí_poöà*, 
poöt_li°
 *, *);

1025 
lülg_compuã_chaö_code
(
poöt_li°
 *);

1026 
lülg_compuã_unô_chaö_code
(
poöt_li°
 *);

1027 
ªgi⁄_li°
 *
lülg_compuã_ªgi⁄s
(
poöt_li°
 *);

1028 
poöt_li°
 *
lülg_compuã_dom±s
’oöt_li° *, 
ªgi⁄_li°
 *);

1029 *
lülg_compuã_c⁄tour_™gÀ_£t
(
poöt_li°
 *, 
ªgi⁄_li°
 *);

1030 
lülg_sc‹e_°roke
(
poöt_li°
 *,Öoint_list *, *, *);

1031 
lülg_compuã_simû¨ôy
(
poöt_li°
 *,Öoint_list *);

1032 
lülg_compuã_di°™˚
(
poöt_li°
 *,Öoint_list *);

1034 
lülg_ªad_˛assifõr_dige°
(
rCœssifõr
 *);

1036 
lülg_ˇn⁄iˇlize_exam∂es
(
rCœssifõr
 *);

1037 
lülg_ˇn⁄iˇlize_exam∂e_°roke
(
poöt_li°
 *);

1038 
lülg_compuã_equùoöts
(
poöt_li°
 *);

1040 
lülg_compuã_∑thÀn
(
poöt_li°
 *);

1041 
lülg_compuã_∑thÀn_sub£t
(
poöt_li°
 *, , );

1042 
lülg_fûãr_poöts
(
poöt_li°
 *);

1043 
lülg_å™¶©e_poöts
(
poöt_li°
 *, , , , );

1044 
lülg_gë_boundög_box
(
poöt_li°
 *, *, *, *, *);

1045 
lülg_compuã_Õf_∑ømëîs
();

1046 
isqπ
();

1047 
likóèn
(, );

1048 
quadr
();

1057 
	$lülg_öôülize
(
rCœssifõr
 *
ªc
) {

1058 
i
;

1061 
i
 = 0; i < 
MAXSCLASSES
; i++) {

1062 
ªc
->
dom±s
[
i
] = 
NULL
;

1064 
	}
}

1070 *
	$lülg_ªcognize_°roke
(
rCœssifõr
 *
ªc
, 
poöt_li°
 *
°roke
) {

1071 
i
;

1072 *
«me
 = 
NULL
;

1073 
poöt_li°
 *
öput_dom±s
 = 
NULL
;

1074 *
be°_«me
 = 
NULL
;

1075 
be°_sc‹e
 = 
WORST_SCORE
;

1076 *
cuº_«me
;

1077 
poöt_li°
 *
cuº_dom±s
 = 
NULL
;

1083 i‡(
°roke
->
≈ts
 < 1Ë
d⁄e
;

1097 i‡(
	`lülg_fûãr_poöts
(
°roke
Ë!0Ë(
NULL
);

1102 i‡(
°roke
->
≈ts
 =1 || 
	`lülg_compuã_∑thÀn
(°rokeË< 
TAP_PATHLEN
)

1103 (
TAP_CHAR
);

1107 i‡(
	`lülg_¥ïro˚ss_°roke
(
°roke
Ë!0Ë
d⁄e
;

1110 
öput_dom±s
 = 
	`lülg_compuã_domö™t_poöts
(
°roke
);

1111 i‡(
öput_dom±s
 =
NULL
Ë
d⁄e
;

1114 
i
 = 0, 
cuº_«me
 = 
ªc
->
˙ames
[i], 
cuº_dom±s
 =Ñec->
dom±s
[i];

1115 
i
 < 
MAXSCLASSES
 && 
cuº_«me
 !
NULL
 && 
cuº_dom±s
 != NULL;

1116 
i
++, 
cuº_«me
 = 
ªc
->
˙ames
[i], 
cuº_dom±s
 =Ñec->
dom±s
[i]) {

1117 
sim
;

1118 
di°
;

1119 
cuº_sc‹e
;

1121 
	`lülg_sc‹e_°roke
(
öput_dom±s
, 
cuº_dom±s
, &
sim
, &
di°
);

1122 
cuº_sc‹e
 = 
di°
;

1124 i‡(
lidebug
 && 
cuº_sc‹e
 < 
DIST_THLD
)

1125 
	`Ârötf
(
°dîr
, "(%s, %d, %dË", 
cuº_«me
, 
sim
, 
di°
);

1128 i‡(
cuº_sc‹e
 < 
be°_sc‹e
 && cuº_sc‹ê<
DIST_THLD
) {

1129 
be°_sc‹e
 = 
cuº_sc‹e
;

1130 
be°_«me
 = 
cuº_«me
;

1134 i‡(
lidebug
)

1135 
	`Ârötf
(
°dîr
, "\n");

1138 
«me
 = 
be°_«me
;

1140 
d⁄e
:

1141 
	`dñëe_exam∂es
(
öput_dom±s
);

1146 (
«me
);

1147 
	}
}

1150 
	$lülg_¥ïro˚ss_°roke
(
poöt_li°
 *
poöts
) {

1151 
möx
, 
möy
, 
maxx
, 
maxy
, 
xønge
, 
yønge
, 
sˇÀ
, 
xoff
, 
yoff
;

1162 
	`lülg_gë_boundög_box
(
poöts
, &
möx
, &
möy
, &
maxx
, &
maxy
);

1163 
xønge
 = 
maxx
 - 
möx
;

1164 
yønge
 = 
maxy
 - 
möy
;

1165 
sˇÀ
 = ( ((100 * 
xønge
 + 
CANONICAL_X
 / 2) / CANONICAL_X) >

1166 ((100 * 
yønge
 + 
CANONICAL_Y
 / 2) / CANONICAL_Y))

1167 ? (100 * 
CANONICAL_X
 + 
xønge
 / 2) / xrange

1168 : (100 * 
CANONICAL_Y
 + 
yønge
 / 2) / yrange;

1169 i‡(
	`lülg_å™¶©e_poöts
(
poöts
, 
möx
, 
möy
, 
sˇÀ
, scale) != 0)

1173 
	`lülg_gë_boundög_box
(
poöts
, &
möx
, &
möy
, &
maxx
, &
maxy
);

1174 
xønge
 = 
maxx
 - 
möx
;

1175 
yønge
 = 
maxy
 - 
möy
;

1176 
xoff
 = -((
CANONICAL_X
 - 
xønge
 + 1) / 2);

1177 
yoff
 = -((
CANONICAL_Y
 - 
yønge
 + 1) / 2);

1178 i‡(
	`lülg_å™¶©e_poöts
(
poöts
, 
xoff
, 
yoff
, 100, 100) != 0) (-1);

1181 
xønge
 = 
maxx
 - 
möx
;

1182 
yønge
 = 
maxy
 - 
möy
;

1183 
poöts
->
xønge
 = xrange;

1184 
poöts
->
yønge
 = yrange;

1186 i‡(
lidebug
) {

1187 
i
;

1188 
	`Ârötf
(
°dîr
, "AfterÖre-processing: %d %d %d %d\n",

1189 
möx
, 
möy
, 
maxx
, 
maxy
);

1190 
i
 = 0; i < 
poöts
->
≈ts
; i++)

1191 
	`Ârötf
(
°dîr
, " (%d %d)\n",

1192 
poöts
->
±s
[
i
].
x
,Öoöts->±s[i].
y
);

1193 
	`fÊush
(
°dîr
);

1197 
	}
}

1200 
poöt_li°
 *
	$lülg_compuã_domö™t_poöts
(
poöt_li°
 *
poöts
) {

1201 
poöt_li°
 *
ùts
 = 
NULL
;

1202 
ªgi⁄_li°
 *
ªgi⁄s
 = 
NULL
;

1203 
poöt_li°
 *
d±s
 = 
NULL
;

1206 
ùts
 = 
	`lülg_öãΩﬁ©e_poöts
(
poöts
);

1207 i‡(
ùts
 =
NULL
) (NULL);

1208 i‡(
lidebug
) {

1209 
j
;

1210 
	`Ârötf
(
°dîr
, "A·î i¡îpﬁ©i⁄: %d i±s\n", 
ùts
->
≈ts
);

1211 
j
 = 0; j < 
ùts
->
≈ts
; j++) {

1212 
	`Ârötf
(
°dîr
, " (%d, %d), %ld\n",

1213 
ùts
->
±s
[
j
].
x
, i±s->±s[j].
y
, i±s->±s[j].
chaöcode
);

1215 
	`fÊush
(
°dîr
);

1219 
ªgi⁄s
 = 
	`lülg_compuã_ªgi⁄s
(
ùts
);

1223 
d±s
 = 
	`lülg_compuã_dom±s
(
ùts
, 
ªgi⁄s
);

1224 i‡(
lidebug
) {

1225 
j
;

1226 
	`Ârötf
(
°dîr
, "DominantÖoints: ");

1227 
j
 = 0; j < 
d±s
->
≈ts
; j++) {

1228 
	`Ârötf
(
°dîr
, "%d %d (%ld) ",

1229 
d±s
->
±s
[
j
].
x
, d±s->±s[j].
y
, d±s->±s[j].
chaöcode
);

1231 
	`Ârötf
(
°dîr
, "\n");

1232 
	`fÊush
(
°dîr
);

1237 
ªgi⁄_li°
 *
cuº
, *
√xt
;

1238 
cuº
 = 
ªgi⁄s
; cuº !
NULL
; ) {

1239 
√xt
 = 
cuº
->next;

1240 
	`‰ì
(
cuº
);

1241 
cuº
 = 
√xt
;

1244 
	`dñëe_exam∂es
(
ùts
);

1245 (
d±s
);

1246 
	}
}

1250 
poöt_li°
 *
	$lülg_öãΩﬁ©e_poöts
(
poöt_li°
 *
poöts
) {

1251 
i
, 
j
;

1252 
max±s
;

1253 
poöt_li°
 *
√w±s
;

1256 
max±s
 = 0;

1257 
i
 = 0; i < (
poöts
->
≈ts
 - 1); i++) {

1258 
≥n_poöt
 *
±a
 = &(
poöts
->
±s
[
i
]);

1259 
≥n_poöt
 *
±b
 = &(
poöts
->
±s
[
i
+1]);

1260 
max±s
 +
	`abs
(
±a
->
x
 - 
±b
->xË+ábs’è->
y
 -Ötb->y);

1264 
max±s
 +
poöts
->
≈ts
;

1266 
√w±s
 = 
	`Æloˇã
(1, 
poöt_li°
);

1267 
√w±s
->
±s
 = 
	`make_≥n_poöt_¨øy
(
max±s
);

1268 i‡(
√w±s
->
±s
 =
NULL
) {

1269 
	`‰ì
(
√w±s
);

1270 (
NULL
);

1272 
√w±s
->
≈ts
 = 
max±s
;

1273 
√w±s
->
√xt
 = 
NULL
;

1276 
j
 = 0;

1277 
i
 = 0; i < (
poöts
->
≈ts
 - 1); i++) {

1278 
≥n_poöt
 *
°¨çt
 = &(
poöts
->
±s
[
i
]);

1279 
≥n_poöt
 *
íd±
 = &(
poöts
->
±s
[
i
+1]);

1281 
	`lülg_bª¶öe
(
°¨çt
, 
íd±
, 
√w±s
, &
j
);

1283 
j
--;

1287 
√w±s
->
±s
[
j
++] = 
poöts
->±s[poöts->
≈ts
 - 1];

1288 
√w±s
->
≈ts
 = 
j
;

1291 
	`lülg_compuã_unô_chaö_code
(
√w±s
);

1293 (
√w±s
);

1294 
	}
}

1298 
	$lülg_bª¶öe
(
≥n_poöt
 *
°¨çt
,Öí_poöà*
íd±
,

1299 
poöt_li°
 *
√w±s
, *
j
) {

1300 
Ax
, 
Ay
, 
Bx
, 
By
, 
dX
, 
dY
, 
Xö¸
, 
Yö¸
;

1302 
Ax
 = 
°¨çt
->
x
;

1303 
Ay
 = 
°¨çt
->
y
;

1304 
Bx
 = 
íd±
->
x
;

1305 
By
 = 
íd±
->
y
;

1309 
dX
 = 
	`abs
(
Bx
-
Ax
);

1310 
dY
 = 
	`abs
(
By
-
Ay
);

1313 i‡(
Ax
 > 
Bx
Ë{ 
Xö¸
=-1; } { Xincr=1; }

1314 i‡(
Ay
 > 
By
Ë{ 
Yö¸
=-1; } { Yincr=1; }

1319 i‡(
dX
 >
dY
) {

1320 
dPr
 = 
dY
<<1;

1321 
dPru
 = 
dPr
 - (
dX
<<1);

1322 
P
 = 
dPr
 - 
dX
;

1325 ; 
dX
>=0; dX--) {

1326 
√w±s
->
±s
[*
j
].
x
 = 
Ax
;

1327 
√w±s
->
±s
[*
j
].
y
 = 
Ay
;

1328 (*
j
)++;

1330 i‡(
P
 > 0) {

1331 
Ax
+=
Xö¸
;

1332 
Ay
+=
Yö¸
;

1333 
P
+=
dPru
;

1336 
Ax
+=
Xö¸
;

1337 
P
+=
dPr
;

1342 
dPr
 = 
dX
<<1;

1343 
dPru
 = 
dPr
 - (
dY
<<1);

1344 
P
 = 
dPr
 - 
dY
;

1347 ; 
dY
>=0; dY--) {

1348 
√w±s
->
±s
[*
j
].
x
 = 
Ax
;

1349 
√w±s
->
±s
[*
j
].
y
 = 
Ay
;

1350 (*
j
)++;

1352 i‡(
P
 > 0) {

1353 
Ax
+=
Xö¸
;

1354 
Ay
+=
Yö¸
;

1355 
P
+=
dPru
;

1358 
Ay
+=
Yö¸
;

1359 
P
+=
dPr
;

1363 
	}
}

1366 
	$lülg_compuã_chaö_code
(
poöt_li°
 *
±s
) {

1367 
i
;

1369 
i
 = 0; i < (
±s
->
≈ts
 - 1); i++) {

1370 
≥n_poöt
 *
°¨çt
 = &(
±s
->±s[
i
]);

1371 
≥n_poöt
 *
íd±
 = &(
±s
->±s[
i
+1]);

1372 
dx
 = 
íd±
->
x
 - 
°¨çt
->x;

1373 
dy
 = 
íd±
->
y
 - 
°¨çt
->y;

1378 
tmp
 = 
	`quadr
(
	`likóèn
(
dy
, 
dx
));

1379 
dúcode
 = (12 - 
tmp
) % 8;

1381 
°¨çt
->
chaöcode
 = 
dúcode
;

1383 
	}
}

1386 
	$lülg_compuã_unô_chaö_code
(
poöt_li°
 *
±s
) {

1387 
i
;

1389 
i
 = 0; i < (
±s
->
≈ts
 - 1); i++) {

1390 
≥n_poöt
 *
°¨çt
 = &(
±s
->±s[
i
]);

1391 
≥n_poöt
 *
íd±
 = &(
±s
->±s[
i
+1]);

1392 
dx
 = 
íd±
->
x
 - 
°¨çt
->x;

1393 
dy
 = 
íd±
->
y
 - 
°¨çt
->y;

1394 
dúcode
 = 
lülg_d˘bl
[
dx
+1][
dy
+1];

1397 
°¨çt
->
chaöcode
 = 
dúcode
;

1399 
	}
}

1402 
ªgi⁄_li°
 *
	$lülg_compuã_ªgi⁄s
(
poöt_li°
 *
±s
) {

1403 
ªgi⁄_li°
 *
ªgi⁄s
 = 
NULL
;

1404 
ªgi⁄_li°
 *
cuº_ªg
 = 
NULL
;

1405 *
R
[2 + 
LP_FILTER_ITERS
];

1406 *
junk
;

1407 *
cuº
, *
√xt
;

1408 
i
, 
j
;

1411 i‡(
lülg_Õfc⁄°
 == -1)

1412 
	`lülg_compuã_Õf_∑ømëîs
();

1416 
junk
 = 
	`Æloˇã
((2 + 
LP_FILTER_ITERS
Ë* 
±s
->
≈ts
, );

1417 
i
 = 0; i < (2 + 
LP_FILTER_ITERS
); i++)

1418 
R
[
i
] = 
junk
 + (ò* 
±s
->
≈ts
);

1419 
cuº
 = 
R
[0];

1423 
cuº
[0] = 18000;

1424 
i
 = 1; i < (
±s
->
≈ts
 - 1); i++) {

1425 
d_i
 = 
±s
->±s[
i
].
chaöcode
;

1426 
d_imöus⁄e
 = 
±s
->±s[
i
-1].
chaöcode
;

1427 
a_i
;

1429 i‡(
d_imöus⁄e
 < 
d_i
)

1430 
d_imöus⁄e
 += 8;

1432 
a_i
 = (
d_imöus⁄e
 - 
d_i
) % 8;

1435 
cuº
[
i
] = ((12 - 
a_i
) % 8) * 45 * 100;

1437 
cuº
[
±s
->
≈ts
 - 1] = 18000;

1440 
√xt
 = 
R
[1];

1441 
j
 = 0; j < 
LP_FILTER_ITERS
; j++, 
cuº
 = 
R
[j], 
√xt
 = R[j+1]) {

1442 
i
 = 0; i < 
±s
->
≈ts
; i++) {

1443 
k
;

1445 
√xt
[
i
] = 0;

1447 
k
 = 
i
 - 
LP_FILTER_WIDTH
; k <= i + LP_FILTER_WIDTH; k++) {

1448 
ﬁdvÆ
 = (
k
 < 0 || k >
±s
->
≈ts
Ë? 18000 : 
cuº
[k];

1449 
√xt
[
i
] +
ﬁdvÆ
 * 
lülg_Õfwts
[
k
 - (ò- 
LP_FILTER_WIDTH
)];

1452 
√xt
[
i
] /
lülg_Õfc⁄°
;

1458 
i
 = 0; i < 
±s
->
≈ts
; i++) {

1459 
√xt
[
i
] = (
	`abs
(
cuº
[i] - 18000Ë< 
LP_FILTER_THLD
)

1461 : 
cuº
[
i
];

1463 
cuº
 = 
√xt
;

1466 i‡(
lidebug
 > 1) {

1467 
i
 = 0; i < 
±s
->
≈ts
; i++) {

1468 
	`Ârötf
(
°dîr
, "%3d: (%3d, %3d) %ld ",

1469 
i
, 
±s
->±s[i].
x
,Öts->±s[i].
y
,Öts->±s[i].
chaöcode
);

1470 
j
 = 0; j < 2 + 
LP_FILTER_ITERS
; j++)

1471 
	`Ârötf
(
°dîr
, "%d ", 
R
[
j
][
i
]);

1472 
	`Ârötf
(
°dîr
, "\n");

1478 
°¨t
, 
íd
;

1479 
cuºty≥
;

1481 
	#RGN_TYPE
(
vÆ
)\

1482 (((
vÆ
) == 18000)\

1483 ? 
RGN_PLAIN
\

1484 : ((
vÆ
Ë< 18000 ? 
RGN_CONCAVE
 : 
RGN_CONVEX
))

	)

1486 
°¨t
 = 0;

1487 
cuºty≥
 = 
	`RGN_TYPE
(
cuº
[0]);

1489 
ªgi⁄s
 = 
	`Æloˇã
(1, 
ªgi⁄_li°
);

1490 
cuº_ªg
 = 
ªgi⁄s
;

1491 
cuº_ªg
->
°¨t
 = start;

1492 
cuº_ªg
->
íd
 = 0;

1493 
cuº_ªg
->
ty≥
 = 
cuºty≥
;

1494 
cuº_ªg
->
√xt
 = 
NULL
;

1495 
i
 = 1; i < 
±s
->
≈ts
; i++) {

1496 
√xây≥
 = 
	`RGN_TYPE
(
cuº
[
i
]);

1498 i‡(
√xây≥
 !
cuºty≥
) {

1499 
ªgi⁄_li°
 *
√xt_ªg
 = 
NULL
;

1501 
íd
 = 
i
 - 1;

1502 
cuº_ªg
->
íd
 =Énd;

1503 i‡(
lidebug
 > 1)

1504 
	`Ârötf
(
°dîr
, " (%d, %d), %d\n", 
°¨t
, 
íd
, 
cuºty≥
);

1506 
°¨t
 = 
i
;

1507 
cuºty≥
 = 
√xây≥
;

1509 
√xt_ªg
 = 
	`Æloˇã
(1, 
ªgi⁄_li°
);

1510 
√xt_ªg
->
°¨t
 = start;

1511 
√xt_ªg
->
íd
 = 0;

1512 
√xt_ªg
->
ty≥
 = 
√xây≥
;

1513 
√xt_ªg
->
√xt
 = 
NULL
;

1515 
cuº_ªg
->
√xt
 = 
√xt_ªg
;

1516 
cuº_ªg
 = 
√xt_ªg
;

1519 
íd
 = 
i
 - 1;

1520 
cuº_ªg
->
íd
 =Énd;

1521 i‡(
lidebug
 > 1)

1522 
	`Ârötf
(
°dîr
, " (%d, %d), %d\n", 
°¨t
, 
íd
, 
cuºty≥
);

1525 
cuº_ªg
 = 
ªgi⁄s
; cuº_ªg; cuº_ªg = cuº_ªg->
√xt
)

1526 i‡(
cuº_ªg
->
ty≥
 =
RGN_PLAIN
) {

1527 
ªgi⁄_li°
 *
√xt_ªg
;

1529 
√xt_ªg
 = 
cuº_ªg
->
√xt
;

1530 
√xt_ªg
 !
NULL
 &&

1531 (
√xt_ªg
->
íd
 -Çext_ªg->
°¨t
Ë< 
LP_FILTER_MIN
;

1532 
√xt_ªg
 = 
cuº_ªg
->
√xt
) {

1537 
cuº_ªg
->
√xt
 = (
√xt_ªg
->next)->next;

1538 
cuº_ªg
->
íd
 = (
√xt_ªg
->
√xt
)->end;

1540 
	`‰ì
(
√xt_ªg
->
√xt
);

1541 
	`‰ì
(
√xt_ªg
);

1547 
ªgi⁄_li°
 *
tmp
, *
¥ev_ªg
;

1549 
tmp
 = 
ªgi⁄s
;

1550 
ªgi⁄s
 = 
NULL
;

1551 
¥ev_ªg
 = 
NULL
;

1552 
cuº_ªg
 = 
tmp
; cuº_ªg; cuº_ªg = cuº_ªg->
√xt
) {

1553 i‡(
cuº_ªg
->
ty≥
 =
RGN_PLAIN
) {

1554 
¨˛í
 = 
	`lülg_compuã_∑thÀn_sub£t
(
±s
,

1555 
cuº_ªg
->
°¨t
,

1556 
cuº_ªg
->
íd
);

1557 
dx
 = 
±s
->±s[
cuº_ªg
->
íd
].
x
 -

1558 
±s
->±s[
cuº_ªg
->
°¨t
].
x
;

1559 
dy
 = 
±s
->±s[
cuº_ªg
->
íd
].
y
 -

1560 
±s
->±s[
cuº_ªg
->
°¨t
].
y
;

1561 
ch‹dÀn
 = 
	`isqπ
(10000 * (
dx
 * dx + 
dy
 * dy));

1562 
©¸
 = (
ch‹dÀn
 =0Ë? 0 : (100 * 
¨˛í
 + chordlen / 2) / chordlen;

1564 i‡(
lidebug
)

1565 
	`Ârötf
(
°dîr
, "%d, %d, %d\n", 
¨˛í
, 
ch‹dÀn
, 
©¸
);

1568 i‡(
¨˛í
 >
PE_AL_THLD
 && 
©¸
 >
PE_ATCR_THLD
) {

1569 
mid
 = 
cuº_ªg
->
°¨t
 + (cuº_ªg->
íd
 - curr_reg->start) / 2;

1570 
íd
 = 
cuº_ªg
->end;

1571 
ªgi⁄_li°
 *
ßved_√xt
 = 
cuº_ªg
->
√xt
;

1573 
cuº_ªg
->
íd
 = 
mid
 - 1;

1574 i‡(
¥ev_ªg
 =
NULL
)

1575 
ªgi⁄s
 = 
cuº_ªg
;

1577 
¥ev_ªg
->
√xt
 = 
cuº_ªg
;

1578 
¥ev_ªg
 = 
cuº_ªg
;

1581 
cuº_ªg
 = 
	`Æloˇã
(1, 
ªgi⁄_li°
);

1582 
cuº_ªg
->
°¨t
 = 
mid
;

1583 
cuº_ªg
->
íd
 = 
mid
;

1584 
cuº_ªg
->
ty≥
 = 
RGN_PSEUDO
;

1585 
cuº_ªg
->
√xt
 = 
NULL
;

1586 
¥ev_ªg
->
√xt
 = 
cuº_ªg
;

1587 
¥ev_ªg
 = 
cuº_ªg
;

1590 
cuº_ªg
 = 
	`Æloˇã
(1, 
ªgi⁄_li°
);

1591 
cuº_ªg
->
°¨t
 = 
mid
 + 1;

1592 
cuº_ªg
->
íd
 =Énd;

1593 
cuº_ªg
->
ty≥
 = 
RGN_PLAIN
;

1594 
cuº_ªg
->
√xt
 = 
NULL
;

1595 
¥ev_ªg
->
√xt
 = 
cuº_ªg
;

1596 
¥ev_ªg
 = 
cuº_ªg
;

1598 
cuº_ªg
->
√xt
 = 
ßved_√xt
;

1603 i‡(
¥ev_ªg
 =
NULL
)

1604 
ªgi⁄s
 = 
cuº_ªg
;

1606 
¥ev_ªg
->
√xt
 = 
cuº_ªg
;

1607 
¥ev_ªg
 = 
cuº_ªg
;

1612 
	`‰ì
(
junk
);

1613 (
ªgi⁄s
);

1614 
	}
}

1617 
poöt_li°
 *
	$lülg_compuã_dom±s
(
poöt_li°
 *
±s
, 
ªgi⁄_li°
 *
ªgi⁄s
) {

1618 
poöt_li°
 *
d±s
 = 
NULL
;

1619 
nd±s
;

1620 *
ˇs
 = 
NULL
;

1621 
n⁄∂aö
;

1622 
ªgi⁄_li°
 *
r
;

1625 
ˇs
 = 
	`lülg_compuã_c⁄tour_™gÀ_£t
(
±s
, 
ªgi⁄s
);

1629 
n⁄∂aö
 = 0;

1630 
r
 = 
ªgi⁄s
;Ñ !
NULL
;Ñ =Ñ->
√xt
)

1631 i‡(
r
->
ty≥
 !
RGN_PLAIN
Ë
n⁄∂aö
++;

1632 
nd±s
 = 2 * (2 + 
n⁄∂aö
) - 1;

1634 
d±s
 = 
	`Æloˇã
(1, 
poöt_li°
);

1635 
d±s
->
±s
 = 
	`make_≥n_poöt_¨øy
(
nd±s
);

1636 i‡(
d±s
->
±s
 =
NULL
) {

1637 
	`‰ì
(
d±s
);

1638 (
NULL
);

1640 
d±s
->
≈ts
 = 
nd±s
;

1641 
d±s
->
√xt
 = 
NULL
;

1645 
ªgi⁄_li°
 *
cuº
;

1646 
dp
;

1647 
¥evix
;

1648 
cuºix
;

1651 
dp
 = 0;

1652 
¥evix
 = 0;

1653 
d±s
->
±s
[
dp
++] =Öts->±s[
¥evix
];

1655 
cuº
 = 
ªgi⁄s
; cuº !
NULL
; cuº = cuº->
√xt
)

1656 i‡(
cuº
->
ty≥
 !
RGN_PLAIN
) {

1657 
max_v
 = 0;

1658 
mö_v
 = 
MAXINT
;

1659 
max_ix
 = -1;

1660 
mö_ix
 = -1;

1661 
i
;

1663 
i
 = 
cuº
->
°¨t
; i <cuº->
íd
; i++) {

1664 
v
 = 
ˇs
[
i
];

1665 i‡(
v
 > 
max_v
Ë{ max_v = v; 
max_ix
 = 
i
; }

1666 i‡(
v
 < 
mö_v
Ë{ mö_v = v; 
mö_ix
 = 
i
; }

1667 i‡(
lidebug
 > 1)

1668 
	`Ârötf
(
°dîr
, " %d\n", 
v
);

1671 
cuºix
 = (
cuº
->
ty≥
 =
RGN_CONVEX
 ? 
max_ix
 : 
mö_ix
);

1674 
d±s
->
±s
[
dp
++] =Öts->±s[
¥evix
 + (
cuºix
 -Örevix) / 2];

1677 
d±s
->
±s
[
dp
++] =Öts->±s[
cuºix
];

1679 
¥evix
 = 
cuºix
;

1683 
cuºix
 = 
±s
->
≈ts
 - 1;

1684 
d±s
->
±s
[
dp
++] =Öts->±s[
¥evix
 + (
cuºix
 -Örevix) / 2];

1685 
d±s
->
±s
[
dp
++] =Öts->±s[
cuºix
];

1689 
	`lülg_compuã_chaö_code
(
d±s
);

1691 
	`‰ì
(
ˇs
);

1692 (
d±s
);

1693 
	}
}

1696 *
	$lülg_compuã_c⁄tour_™gÀ_£t
(
poöt_li°
 *
±s
,

1697 
ªgi⁄_li°
 *
ªgi⁄s
) {

1698 *
V
 = 
NULL
;

1699 
ªgi⁄_li°
 *
cuº_ªg
, *
¥ev_ªg
;

1700 
i
;

1703 
V
 = 
	`Æloˇã
(
±s
->
≈ts
, );

1705 
V
[0] = 18000;

1706 
cuº_ªg
 = 
ªgi⁄s
; cuº_ªg !
NULL
;

1707 
¥ev_ªg
 = 
cuº_ªg
, cuº_ªg = cuº_ªg->
√xt
) {

1708 
i
 = 
cuº_ªg
->
°¨t
; i <cuº_ªg->
íd
; i++) {

1709 i‡(
cuº_ªg
->
ty≥
 =
RGN_PLAIN
) {

1710 
V
[
i
] = 18000;

1713 #ifdef 
nŸdef


1715 
ªgi⁄_li°
 *
√xt_ªg
 = 
cuº_ªg
->
√xt
;

1716 
b
 = 
cuº_ªg
->
°¨t
;

1717 
h
 = 
¥ev_ªg
->
°¨t
;

1718 
t
 = 
√xt_ªg
->
íd
;

1719 
±s_bef‹e
 = 
i
 - 
h
;

1720 
±s_a·î
 = 
t
 - 
i
;

1721 
mö_±s
 = (
±s_bef‹e
 < 
±s_a·î
)

1722 ? 
±s_bef‹e


1723 : 
±s_a·î
;

1724 
k
 = (
mö_±s
 < 
T_ONE
)

1725 ? 
T_ONE


1726 : (
mö_±s
 > 
T_TWO
)

1727 ? 
T_TWO


1728 : 
mö_±s
;

1729 
sum
 = 0.0;

1731 
j
 = 1; j <
k
; j++) {

1732 
±A
 = 
i
 - 
j
;

1733 
±B
 = 
i
 + 
j
 - 1;

1734 
d_A
 = 
±s
->±s[
±A
].
chaöcode
;

1735 
d_B
 = 
±s
->±s[
±B
].
chaöcode
;

1736 
a_i
;

1738 i‡(
d_A
 < 
d_B
)

1739 
d_A
 += 8;

1741 
a_i
 = (
d_A
 - 
d_B
) % 8;

1744 i‡(
a_i
 =4 && 
cuº_ªg
->
ty≥
 =
RGN_CONVEX
)

1745 
sum
 +
M_2_PI
;

1747 
sum
 +()((12 - 
a_i
Ë% 8Ë/ 4.0 * 
M_PI
;

1749 
V
[
i
] = 
sum
 / ()
k
;

1752 
isMidPt
 = (
i
 =(
cuº_ªg
->
°¨t
 +

1753 (
cuº_ªg
->
íd
 - cuº_ªg->
°¨t
) / 2));

1754 
V
[
i
] = (
cuº_ªg
->
ty≥
 =
RGN_CONVEX
)

1755 ? (
isMidPt
 ? 18000 : 0)

1756 : (
isMidPt
 ? 0 : 18000);

1761 
V
[
±s
->
≈ts
 - 1] = 18000;

1763 (
V
);

1764 
	}
}

1774 
	$lülg_sc‹e_°roke
(
poöt_li°
 *
öput_dom±s
,Öoöt_li° *
cuº_dom±s
, *
sim
, *
di°
) {

1775 *
sim
 = 
MIN_SIM
;

1776 *
di°
 = 
MAX_DIST
;

1778 *
sim
 = 
	`lülg_compuã_simû¨ôy
(
öput_dom±s
, 
cuº_dom±s
);

1779 i‡(*
sim
 < 
SIM_THLD
Ë
d⁄e
;

1781 *
di°
 = 
	`lülg_compuã_di°™˚
(
öput_dom±s
, 
cuº_dom±s
);

1783 
d⁄e
:

1784 i‡(
lidebug
)

1785 
	`Ârötf
(
°dîr
, "%d, %d\n", *
sim
, *
di°
);

1786 
	}
}

1789 
	$lülg_compuã_simû¨ôy
(
poöt_li°
 *
öput_dom±s
,

1790 
poöt_li°
 *
cuº_dom±s
) {

1791 
sim
 = 0;

1792 
poöt_li°
 *
A
, *
B
;

1793 
N
, 
M
;

1794 **
G
 = 
NULL
;

1795 *
junk
 = 
NULL
;

1796 
i
, 
j
;

1800 i‡(
öput_dom±s
->
≈ts
 >
cuº_dom±s
->npts) {

1801 
A
 = 
öput_dom±s
;

1802 
N
 = 
öput_dom±s
->
≈ts
;

1803 
B
 = 
cuº_dom±s
;

1804 
M
 = 
cuº_dom±s
->
≈ts
;

1807 
A
 = 
cuº_dom±s
;

1808 
N
 = 
cuº_dom±s
->
≈ts
;

1809 
B
 = 
öput_dom±s
;

1810 
M
 = 
öput_dom±s
->
≈ts
;

1819 
G
 = 
	`Æloˇã
(
M
, *);

1821 
junk
 = 
	`Æloˇã
(
M
 * (
N
 + 1), );

1822 
i
 = 0; i < 
M
; i++)

1823 
G
[
i
] = 
junk
 + (ò* (
N
 + 1));

1825 
i
 = 1; i < 
M
; i++) {

1826 
bvÆ
 = 
B
->
±s
[
i
-1].
chaöcode
;

1829 
G
[
i
][0] = 0;

1831 
j
 = 1; j < 
N
; j++) {

1832 
avÆ
 = 
A
->
±s
[
j
-1].
chaöcode
;

1833 
diff
 = 
	`abs
(
bvÆ
 - 
avÆ
);

1834 i‡(
diff
 > 4) diff = 8 - diff;

1836 
G
[
i
][
j
] = (
diff
 == 0)

1838 : (
diff
 == 1)

1844 
G
[
i
][
N
] = 0;

1853 
j
 = 
N
 - 1; j >= 0; j--)

1854 
i
 = 
M
 - 1; i > 0; i--) {

1855 
max
 = 
G
[
i
][
j
 + 1];

1857 i‡(
i
 < (
M
 - 1)) {

1858 
tmp
 = 
G
[
i
 + 1][
j
 + 1];

1859 i‡(
tmp
 > 
max
) max =Åmp;

1862 
G
[
i
][
j
] +
max
;

1865 
sim
 = (10 * 
G
[1][0] + (
N
 - 1) / 2) / (N - 1);

1868 i‡(
G
 !
NULL
Ë
	`‰ì
(G);

1869 i‡(
junk
 !
NULL
Ë
	`‰ì
(junk);

1870 (
sim
);

1871 
	}
}

1874 
	$lülg_compuã_di°™˚
(
poöt_li°
 *
öput_dom±s
,

1875 
poöt_li°
 *
cuº_dom±s
) {

1876 
di°
 = 
MAX_DIST
;

1877 
poöt_li°
 *
A
, *
B
;

1878 
N
, 
M
;

1879 **
C
 = 
NULL
;

1880 *
junk
 = 
NULL
;

1881 *
BE
 = 
NULL
;

1882 *
TE
 = 
NULL
;

1883 
i
, 
j
;

1887 i‡(
öput_dom±s
->
≈ts
 >
cuº_dom±s
->npts) {

1888 
A
 = 
öput_dom±s
;

1889 
N
 = 
öput_dom±s
->
≈ts
;

1890 
B
 = 
cuº_dom±s
;

1891 
M
 = 
cuº_dom±s
->
≈ts
;

1894 
A
 = 
cuº_dom±s
;

1895 
N
 = 
cuº_dom±s
->
≈ts
;

1896 
B
 = 
öput_dom±s
;

1897 
M
 = 
öput_dom±s
->
≈ts
;

1904 
BE
 = 
	`Æloˇã
((
N
 + 1), );

1906 
TE
 = 
	`Æloˇã
((
N
 + 1), );

1908 
j
 = 1; j <
N
; j++) {

1909 
bŸ
, 
t›
;

1911 
bŸ
 = 
j
 + (
M
 - 
DP_BAND
);

1912 i‡(
bŸ
 > 
M
) bot = M;

1913 
BE
[
j
] = 
bŸ
;

1915 
t›
 = 
j
 - (
N
 - 
DP_BAND
);

1916 i‡(
t›
 < 1)Åop = 1;

1917 
TE
[
j
] = 
t›
;

1927 
C
 = 
	`Æloˇã
((
M
 + 1), *);

1929 
junk
 = 
	`Æloˇã
((
M
 + 1Ë* (
N
 + 1), );

1930 
i
 = 0; i <
M
; i++)

1931 
C
[
i
] = 
junk
 + (ò* (
N
 + 1));

1933 
i
 = 1; i <
M
; i++) {

1934 
bx
 = 
B
->
±s
[
i
-1].
x
;

1935 
by
 = 
B
->
±s
[
i
-1].
y
;

1937 
j
 = 1; j <
N
; j++) {

1938 
ax
 = 
A
->
±s
[
j
-1].
x
;

1939 
ay
 = 
A
->
±s
[
j
-1].
y
;

1940 
dx
 = 
bx
 - 
ax
;

1941 
dy
 = 
by
 - 
ay
;

1942 
di°
 = 
	`isqπ
(10000 * (
dx
 * dx + 
dy
 * dy));

1944 
C
[
i
][
j
] = 
di°
;

1953 
j
 = 
N
; j > 0; j--)

1954 
i
 = 
M
; i > 0; i--) {

1955 
mö
 = 
MAX_DIST
;

1957 i‡(
i
 > 
BE
[
j
] || i < 
TE
[j] || (j =
N
 && i =
M
))

1960 i‡(
j
 < 
N
) {

1961 i‡(
i
 >
TE
[
j
+1]) {

1962 
tmp
 = 
C
[
i
][
j
+1];

1963 i‡(
tmp
 < 
mö
) min =Åmp;

1966 i‡(
i
 < 
M
) {

1967 
tmp
 = 
C
[
i
+1][
j
+1];

1968 i‡(
tmp
 < 
mö
) min =Åmp;

1972 i‡(
i
 < 
BE
[
j
]) {

1973 
tmp
 = 
C
[
i
+1][
j
];

1974 i‡(
tmp
 < 
mö
) min =Åmp;

1977 
C
[
i
][
j
] +
mö
;

1980 
di°
 = (
C
[1][1] + 
N
 / 2) / N;

1983 i‡(
C
 !
NULL
Ë
	`‰ì
(C);

1984 i‡(
junk
 !
NULL
Ë
	`‰ì
(junk);

1985 i‡(
BE
 !
NULL
Ë
	`‰ì
(BE);

1986 i‡(
TE
 !
NULL
Ë
	`‰ì
(TE);

1987 (
di°
);

1988 
	}
}

1997 
	$lülg_ªad_˛assifõr_dige°
(
rCœssifõr
 *
ªc
) {

1998 
n˛as£s
;

1999 
FILE
 *
Â
 = 
NULL
;

2003 *
˛x_∑th
;

2004 *
dŸ
;

2008 
˛x_∑th
 = 
	`Æloˇã
(
	`°æí
(
ªc
->
fûe_«me
) + 5, );

2009 
	`°r˝y
(
˛x_∑th
, 
ªc
->
fûe_«me
);

2012 
dŸ
 = 
	`°ºchr
(
˛x_∑th
, '.');

2013 i‡(
dŸ
 =
NULL
Ë{ 
	`‰ì
(
˛x_∑th
); (-1); }

2014 *(
dŸ
 + 1) = 0;

2017 
	`°rˇt
(
˛x_∑th
, "clx");

2019 
Â
 = 
	`f›í
(
˛x_∑th
, "r");

2020 i‡(
Â
 =
NULL
Ë{ 
	`‰ì
(
˛x_∑th
); (-1); }

2022 
	`‰ì
(
˛x_∑th
);

2026 
n˛as£s
 = 0; !
	`„of
(
Â
);Çclasses++) {

2027 
poöt_li°
 *
d±s
 = 
NULL
;

2028 
˛ass
[
BUFSIZ
];

2029 
≈ts
;

2030 
j
;

2032 i‡(
	`fsˇnf
(
Â
, "%†%d", 
˛ass
, &
≈ts
) != 2) {

2033 i‡(
	`„of
(
Â
)) ;

2035 
Áûed
;

2037 
ªc
->
˙ames
[
n˛as£s
] = 
	`°rdup
(
˛ass
);

2041 
d±s
 = 
	`Æloˇã
(1, 
poöt_li°
);

2042 
d±s
->
±s
 = 
	`make_≥n_poöt_¨øy
(
≈ts
);

2043 i‡(
d±s
->
±s
 =
NULL
Ë
Áûed
;

2044 
d±s
->
≈ts
 =Çpts;

2045 
d±s
->
√xt
 = 
NULL
;

2048 
j
 = 0; j < 
≈ts
; j++) {

2049 
x
, 
y
;

2051 i‡(
	`fsˇnf
(
Â
, "%d %d", &
x
, &
y
Ë!2Ë
Áûed
;

2052 
d±s
->
±s
[
j
].
x
 = x;

2053 
d±s
->
±s
[
j
].
y
 = y;

2057 
	`lülg_compuã_chaö_code
(
d±s
);

2060 
ªc
->
dom±s
[
n˛as£s
] = 
d±s
;

2064 
Áûed
:

2065 
	`Ârötf
(
°dîr
, "read_classifier_digest failed...\n");

2066 ; 
n˛as£s
 >= 0;Çclasses--) {

2067 i‡(
ªc
->
˙ames
[
n˛as£s
] !
NULL
) {

2068 
	`‰ì
(
ªc
->
˙ames
[
n˛as£s
]);

2069 
ªc
->
˙ames
[
n˛as£s
] = 
NULL
;

2071 i‡(
ªc
->
dom±s
[
n˛as£s
] !
NULL
) {

2072 
	`dñëe_exam∂es
(
ªc
->
dom±s
[
n˛as£s
]);

2073 
ªc
->
dom±s
[
n˛as£s
] = 
NULL
;

2076 i‡(
d±s
 !
NULL
)

2077 
	`dñëe_exam∂es
(
d±s
);

2078 
	`f˛o£
(
Â
);

2082 
	`f˛o£
(
Â
);

2084 
	}
}

2093 
	$lülg_ˇn⁄iˇlize_exam∂es
(
rCœssifõr
 *
ªc
) {

2094 
i
;

2095 
n˛as£s
;

2097 i‡(
lidebug
) {

2098 
	`Ârötf
(
°dîr
, "lialg_canonicalize_examples working on %s\n",

2099 
ªc
->
fûe_«me
);

2102 
i
 = 0; i < 
MAXSCLASSES
; i++) {

2103 
ªc
->
ˇn⁄ex
[
i
] = 
NULL
;

2107 
n˛as£s
 = 0;

2108 
n˛as£s
 < 
MAXSCLASSES
 && 
ªc
->
˙ames
[n˛as£s] !
NULL
;

2109 
n˛as£s
++)

2113 
i
 = 0; i < 
n˛as£s
; i++) {

2114 
j
, 
k
;

2115 
√x
;

2116 
poöt_li°
 *
±s
, *
tmp
, *
avg
;

2117 
maxxønge
, 
maxyønge
;

2118 
möx
, 
möy
, 
maxx
, 
maxy
;

2119 
avgxønge
, 
avgyønge
, 
avgxoff
, 
avgyoff
, 
avgsˇÀ
;

2122 i‡(
lidebug
) {

2123 
	`Ârötf
(
°dîr
, "lialg_canonicalize_examples working on class %s\n",

2124 
ªc
->
˙ames
[
i
]);

2127 
±s
 = 
NULL
;

2128 
tmp
 = 
ªc
->
ex
[
i
];

2129 
√x
 = 0; 
tmp
 !
NULL
;Çex++,Åm∞tmp->
√xt
) {

2130 i‡((
±s
 = 
	`add_exam∂e
’ts, 
tmp
->
≈ts
,Åmp->±s)Ë=
NULL
) {

2131 
	`dñëe_exam∂es
(
±s
);

2137 
maxxønge
 = 0;

2138 
maxyønge
 = 0;

2139 
j
 = 0, 
tmp
 = 
±s
; j < 
√x
; j++,Åm∞tmp->
√xt
) {

2140 i‡(
	`lülg_ˇn⁄iˇlize_exam∂e_°roke
(
tmp
) != 0) {

2141 i‡(
lidebug
) {

2142 
	`Ârötf
(
°dîr
, "lialg_canonicalize_example_strokeÑeturnedÉrror\n");

2147 i‡(
tmp
->
xønge
 > 
maxxønge
) maxxrange =Åmp->xrange;

2148 i‡(
tmp
->
yønge
 > 
maxyønge
) maxyrange =Åmp->yrange;

2152 i‡(((100 * 
maxxønge
 + 
CANONICAL_X
 / 2) / CANONICAL_X) >

2153 ((100 * 
maxyønge
 + 
CANONICAL_Y
 / 2) / CANONICAL_Y)) {

2154 
maxyønge
 = (maxyøngê* 
CANONICAL_X
 + 
maxxønge
 / 2) / maxxrange;

2155 
maxxønge
 = 
CANONICAL_X
;

2158 
maxxønge
 = (maxxøngê* 
CANONICAL_Y
 + 
maxyønge
 / 2) / maxyrange;

2159 
maxyønge
 = 
CANONICAL_Y
;

2163 
j
 = 0, 
tmp
 = 
±s
; j < 
√x
; j++,Åm∞tmp->
√xt
) {

2164 
sˇÀx
 = (
tmp
->
xønge
 =0Ë? 100 : (100 * 
maxxønge
 +Åmp->xrange / 2) /Åmp->xrange;

2165 
sˇÀy
 = (
tmp
->
yønge
 =0Ë? 100 : (100 * 
maxyønge
 +Åmp->yrange / 2) /Åmp->yrange;

2166 i‡(
	`lülg_å™¶©e_poöts
(
tmp
, 0, 0, 
sˇÀx
, 
sˇÀy
) != 0) {

2167 
	`dñëe_exam∂es
(
±s
);

2173 
avg
 = 
±s
;

2174 
k
 = 0; k < 
NCANONICAL
; k++) {

2175 
xsum
 = 0;

2176 
ysum
 = 0;

2178 
j
 = 0, 
tmp
 = 
±s
; j < 
√x
; j++,Åm∞tmp->
√xt
) {

2179 
xsum
 +
tmp
->
±s
[
k
].
x
;

2180 
ysum
 +
tmp
->
±s
[
k
].
y
;

2183 
avg
->
±s
[
k
].
x
 = (
xsum
 + 
j
 / 2) / j;

2184 
avg
->
±s
[
k
].
y
 = (
ysum
 + 
j
 / 2) / j;

2188 
	`lülg_gë_boundög_box
(
avg
, &
möx
, &
möy
, &
maxx
, &
maxy
);

2189 
avgxønge
 = 
maxx
 - 
möx
;

2190 
avgyønge
 = 
maxy
 - 
möy
;

2191 
avgsˇÀ
 = (((100 * 
avgxønge
 + 
CANONICAL_X
 / 2) / CANONICAL_X) >

2192 ((100 * 
avgyønge
 + 
CANONICAL_Y
 / 2) / CANONICAL_Y))

2193 ? (100 * 
CANONICAL_X
 + 
avgxønge
 / 2) /ávgxrange

2194 : (100 * 
CANONICAL_Y
 + 
avgyønge
 / 2) /ávgyrange;

2195 i‡(
	`lülg_å™¶©e_poöts
(
avg
, 
möx
, 
möy
, 
avgsˇÀ
,ávgscale) != 0) {

2196 
	`dñëe_exam∂es
(
±s
);

2201 
	`lülg_gë_boundög_box
(
avg
, &
möx
, &
möy
, &
maxx
, &
maxy
);

2202 
avgxønge
 = 
maxx
 - 
möx
;

2203 
avgyønge
 = 
maxy
 - 
möy
;

2204 
avgxoff
 = -((
CANONICAL_X
 - 
avgxønge
 + 1) / 2);

2205 
avgyoff
 = -((
CANONICAL_Y
 - 
avgyønge
 + 1) / 2);

2206 i‡(
	`lülg_å™¶©e_poöts
(
avg
, 
avgxoff
, 
avgyoff
, 100, 100) != 0) {

2207 
	`dñëe_exam∂es
(
±s
);

2212 i‡((
ªc
->
ˇn⁄ex
[
i
] = 
	`add_exam∂e
(
NULL
, 
avg
->
≈ts
,ávg->
±s
)) == NULL) {

2213 
	`dñëe_exam∂es
(
±s
);

2216 (
ªc
->
ˇn⁄ex
[
i
])->
xønge
 = 
maxx
 - 
möx
;

2217 (
ªc
->
ˇn⁄ex
[
i
])->
yønge
 = 
maxy
 - 
möy
;

2219 i‡(
lidebug
) {

2220 
	`Ârötf
(
°dîr
, "%s,ávg±†%d\n", 
ªc
->
˙ames
[
i
], 
avg
->
≈ts
);

2221 
j
 = 0; j < 
avg
->
≈ts
; j++) {

2222 
	`Ârötf
(
°dîr
, " (%d, %d)\n",

2223 
avg
->
±s
[
j
].
x
,ávg->±s[j].
y
);

2228 
ªc
->
dom±s
[
i
] = 
	`lülg_compuã_domö™t_poöts
(
avg
);

2231 
	`dñëe_exam∂es
(
±s
);

2235 
i
 = 0; i < 
n˛as£s
; i++) {

2236 *
be°_«me
 = 
	`lülg_ªcognize_°roke
(
ªc
,Ñec->
ˇn⁄ex
[
i
]);

2238 i‡(
be°_«me
 !
ªc
->
˙ames
[
i
])

2239 
	`Ârötf
(
°dîr
, "%s, be° = %s\n", 
ªc
->
˙ames
[
i
], 
be°_«me
);

2243 
	}
}

2246 
	$lülg_ˇn⁄iˇlize_exam∂e_°roke
(
poöt_li°
 *
poöts
) {

2247 
möx
, 
möy
, 
maxx
, 
maxy
, 
xønge
, 
yønge
, 
sˇÀ
;

2250 i‡(
	`lülg_fûãr_poöts
(
poöts
) != 0) (-1);

2253 i‡(
poöts
->
≈ts
 < 2) {

2254 i‡(
lidebug
) {

2255 
	`Ârötf
(
°dîr
, "lialg_canonicalize_example_stroke:Çpts=%d\n",

2256 
poöts
->
≈ts
);

2262 
	`lülg_gë_boundög_box
(
poöts
, &
möx
, &
möy
, &
maxx
, &
maxy
);

2263 
xønge
 = 
maxx
 - 
möx
;

2264 
yønge
 = 
maxy
 - 
möy
;

2265 
sˇÀ
 = (((100 * 
xønge
 + 
CANONICAL_X
 / 2) / CANONICAL_X) >

2266 ((100 * 
yønge
 + 
CANONICAL_Y
 / 2) / CANONICAL_Y))

2267 ? (100 * 
CANONICAL_X
 + 
xønge
 / 2) / xrange

2268 : (100 * 
CANONICAL_Y
 + 
yønge
 / 2) / yrange;

2269 i‡(
	`lülg_å™¶©e_poöts
(
poöts
, 
möx
, 
möy
, 
sˇÀ
, scale) != 0) {

2270 i‡(
lidebug
) {

2271 
	`Ârötf
(
°dîr
, "lülg_å™¶©e_poöt†(möx=%d,möy=%d,sˇÀ=%dËªtu∫edÉº‹\n", 
möx
, 
möy
, 
sˇÀ
);

2277 i‡(
	`lülg_compuã_equùoöts
(
poöts
) != 0) (-1);

2280 
	`lülg_gë_boundög_box
(
poöts
, &
möx
, &
möy
, &
maxx
, &
maxy
);

2281 i‡(
	`lülg_å™¶©e_poöts
(
poöts
, 
möx
, 
möy
, 100, 100) != 0) {

2282 i‡(
lidebug
) {

2283 
	`Ârötf
(
°dîr
, "lülg_å™¶©e_poöt†(möx=%d,möy=%dËªtu∫edÉº‹\n", 
möx
, 
möy
);

2289 
xønge
 = 
maxx
 - 
möx
;

2290 
yønge
 = 
maxy
 - 
möy
;

2291 
poöts
->
xønge
 = xrange;

2292 
poöts
->
yønge
 = yrange;

2294 i‡(
lidebug
) {

2295 
i
;

2296 
	`Ârötf
(
°dîr
, "C™⁄iˇlized: %d, %d, %d, %d\n", 
möx
, 
möy
, 
maxx
, 
maxy
);

2297 
i
 = 0; i < 
poöts
->
≈ts
; i++)

2298 
	`Ârötf
(
°dîr
, " (%d %d)\n",

2299 
poöts
->
±s
[
i
].
x
,Öoöts->±s[i].
y
);

2300 
	`fÊush
(
°dîr
);

2304 
	}
}

2307 
	$lülg_compuã_equùoöts
(
poöt_li°
 *
poöts
) {

2308 
≥n_poöt
 *
equùoöts
 = 
	`make_≥n_poöt_¨øy
(
NCANONICAL
);

2309 
√quùoöts
 = 0;

2310 
∑thÀn
 = 
	`lülg_compuã_∑thÀn
(
poöts
);

2311 
equidi°
 = (
∑thÀn
 + (
NCANONICAL
 - 1) / 2) / (NCANONICAL - 1);

2312 
i
;

2313 
di°_sö˚_œ°_eq±
;

2314 
ªmaöög_£gÀn
;

2315 
di°_to_√xt_eq±
;

2317 i‡(
equùoöts
 =
NULL
) {

2318 
	`îr‹
("can'tállocate memory inÜialg_compute_equipoints");

2322 i‡(
lidebug
) {

2323 
	`Ârötf
(
°dîr
, "compute_equipoints:Çpts = %d,Öathlen = %d,Équidist = %d\n",

2324 
poöts
->
≈ts
, 
∑thÀn
, 
equidi°
);

2325 
	`fÊush
(
°dîr
);

2329 
equùoöts
[0] = 
poöts
->
±s
[0];

2330 
√quùoöts
++;

2331 
di°_sö˚_œ°_eq±
 = 0;

2333 
i
 = 1; i < 
poöts
->
≈ts
; i++) {

2334 
dx1
 = 
poöts
->
±s
[
i
].
x
 -Öoints->pts[i-1].x;

2335 
dy1
 = 
poöts
->
±s
[
i
].
y
 -Öoints->pts[i-1].y;

2336 
ídx
 = 100 * 
poöts
->
±s
[
i
-1].
x
;

2337 
ídy
 = 100 * 
poöts
->
±s
[
i
-1].
y
;

2338 
ªmaöög_£gÀn
 = 
	`isqπ
(10000 * (
dx1
 * dx1 + 
dy1
 * dy1));

2339 
di°_to_√xt_eq±
 = 
equidi°
 - 
di°_sö˚_œ°_eq±
;

2341 
ªmaöög_£gÀn
 >
di°_to_√xt_eq±
) {

2342 i‡(
dx1
 == 0) {

2344 i‡(
dy1
 >= 0)

2345 
ídy
 +
di°_to_√xt_eq±
;

2347 
ídy
 -
di°_to_√xt_eq±
;

2350 
¶›e
 = (100 * 
dy1
 + 
dx1
 / 2) / dx1;

2351 
tmp
 = 
	`isqπ
(10000 + 
¶›e
 * slope);

2352 
dx
 = (100 * 
di°_to_√xt_eq±
 + 
tmp
 / 2) /Åmp;

2353 
dy
 = (
¶›e
 * 
dx
 + 50) / 100;

2355 i‡(
dy
 < 0) dy = -dy;

2356 i‡(
dx1
 >= 0)

2357 
ídx
 +
dx
;

2359 
ídx
 -
dx
;

2360 i‡(
dy1
 >= 0)

2361 
ídy
 +
dy
;

2363 
ídy
 -
dy
;

2366 
equùoöts
[
√quùoöts
].
x
 = (
ídx
 + 50) / 100;

2367 
equùoöts
[
√quùoöts
].
y
 = (
ídy
 + 50) / 100;

2368 
√quùoöts
++;

2370 
di°_sö˚_œ°_eq±
 = 0;

2371 
ªmaöög_£gÀn
 -
di°_to_√xt_eq±
;

2372 
di°_to_√xt_eq±
 = 
equidi°
;

2375 
di°_sö˚_œ°_eq±
 +
ªmaöög_£gÀn
;

2379 i‡(
√quùoöts
 =
NCANONICAL
) {

2381 } i‡(
√quùoöts
 =(
NCANONICAL
 - 1)) {

2383 
equùoöts
[
√quùoöts
] = 
poöts
->
±s
[poöts->
≈ts
 - 1];

2385 i‡(
lidebug
) {

2386 
	`Ârötf
(
°dîr
,"lialg_compute_equipoints:Çequipoints = %d\n",

2387 
√quùoöts
);

2393 
poöts
->
≈ts
 = 
NCANONICAL
;

2394 
	`dñëe_≥n_poöt_¨øy
(
poöts
->
±s
);

2395 
poöts
->
±s
 = 
equùoöts
;

2397 
	}
}

2407 
	$lülg_compuã_∑thÀn
(
poöt_li°
 *
poöts
) {

2408 (
	`lülg_compuã_∑thÀn_sub£t
(
poöts
, 0,Öoöts->
≈ts
 - 1));

2409 
	}
}

2413 
	$lülg_compuã_∑thÀn_sub£t
(
poöt_li°
 *
poöts
,

2414 
°¨t
, 
íd
) {

2415 
∑thÀn
;

2416 
i
;

2418 
∑thÀn
 = 0;

2419 
i
 = 
°¨t
 + 1; i <
íd
; i++) {

2420 
dx
 = 
poöts
->
±s
[
i
].
x
 -Öoints->pts[i-1].x;

2421 
dy
 = 
poöts
->
±s
[
i
].
y
 -Öoints->pts[i-1].y;

2422 
di°
 = 
	`isqπ
(10000 * (
dx
 * dx + 
dy
 * dy));

2423 
∑thÀn
 +
di°
;

2426 (
∑thÀn
);

2427 
	}
}

2431 
	$lülg_fûãr_poöts
(
poöt_li°
 *
poöts
) {

2432 
fûãªd_≈ts
;

2433 
≥n_poöt
 *
fûãªd_±s
 = 
	`make_≥n_poöt_¨øy
(
poöts
->
≈ts
);

2434 
i
;

2436 i‡(
fûãªd_±s
 =
NULL
) {

2437 
	`îr‹
("can'tállocate memory inÜialg_filter_points");

2441 
fûãªd_±s
[0] = 
poöts
->
±s
[0];

2442 
fûãªd_≈ts
 = 1;

2443 
i
 = 1; i < 
poöts
->
≈ts
; i++) {

2444 
j
 = 
fûãªd_≈ts
 - 1;

2445 
dx
 = 
poöts
->
±s
[
i
].
x
 - 
fûãªd_±s
[
j
].x;

2446 
dy
 = 
poöts
->
±s
[
i
].
y
 - 
fûãªd_±s
[
j
].y;

2447 
magsq
 = 
dx
 * dx + 
dy
 * dy;

2449 i‡(
magsq
 >
DIST_SQ_THRESHOLD
) {

2450 
fûãªd_±s
[
fûãªd_≈ts
] = 
poöts
->
±s
[
i
];

2451 
fûãªd_≈ts
++;

2455 
poöts
->
≈ts
 = 
fûãªd_≈ts
;

2456 
	`dñëe_≥n_poöt_¨øy
(
poöts
->
±s
);

2457 
poöts
->
±s
 = 
fûãªd_±s
;

2459 
	}
}

2464 
	$lülg_å™¶©e_poöts
(
poöt_li°
 *
poöts
,

2465 
möx
, 
möy
,

2466 
sˇÀx
, 
sˇÀy
) {

2467 
i
;

2469 
i
 = 0; i < 
poöts
->
≈ts
; i++) {

2470 
poöts
->
±s
[
i
].
x
 = (’oöts->±s[i].x - 
möx
Ë* 
sˇÀx
 + 50) / 100;

2471 
poöts
->
±s
[
i
].
y
 = (’oöts->±s[i].y - 
möy
Ë* 
sˇÀy
 + 50) / 100;

2475 
	}
}

2478 
	$lülg_gë_boundög_box
(
poöt_li°
 *
poöts
,

2479 *
pmöx
, *
pmöy
,

2480 *
pmaxx
, *
pmaxy
) {

2481 
möx
, 
möy
, 
maxx
, 
maxy
;

2482 
i
;

2484 
möx
 = 
maxx
 = 
poöts
->
±s
[0].
x
;

2485 
möy
 = 
maxy
 = 
poöts
->
±s
[0].
y
;

2486 
i
 = 1; i < 
poöts
->
≈ts
; i++) {

2487 
≥n_poöt
 *
±
 = &(
poöts
->
±s
[
i
]);

2488 i‡(
±
->
x
 < 
möx
) minx =Öt->x;

2489 i‡(
±
->
x
 > 
maxx
) maxx =Öt->x;

2490 i‡(
±
->
y
 < 
möy
) miny =Öt->y;

2491 i‡(
±
->
y
 > 
maxy
) maxy =Öt->y;

2494 *
pmöx
 = 
möx
;

2495 *
pmöy
 = 
möy
;

2496 *
pmaxx
 = 
maxx
;

2497 *
pmaxy
 = 
maxy
;

2498 
	}
}

2500 
	$lülg_compuã_Õf_∑ømëîs
() {

2501 
i
;

2503 
i
 = 
LP_FILTER_WIDTH
; i >= 0; i--) {

2504 
x
 = 0.04 * (
i
 * i);

2505 #i‡
	`deföed
(
ARM_LINUX
Ë|| !deföed(
__GLIBC__
Ë|| deföed(
__ECOS
Ë|| deföed(
__UCLIBC__
)

2506 
tmp
 = 100.0 * 
	`exp
(()
x
);

2508 
tmp
 = 100.0 * 
	`expf
(
x
);

2510 
wt
 = 
	`röt
(()
tmp
);

2512 
lülg_Õfwts
[
LP_FILTER_WIDTH
 - 
i
] = 
wt
;

2513 
lülg_Õfwts
[
LP_FILTER_WIDTH
 + 
i
] = 
wt
;

2515 
lülg_Õfc⁄°
 = 0;

2516 
i
 = 0; i < (2 * 
LP_FILTER_WIDTH
 + 1); i++) {

2517 
lülg_Õfc⁄°
 +
lülg_Õfwts
[
i
];

2519 
	}
}

2523 
	$isqπ
(
n
) {

2524 
i
;

2525 
k0
, 
k1
, 
¬
;

2527 
¬
 = 
i
 = 
n
, 
k0
 = 2; i > 0; i >>= 2, k0 <<= 1)

2529 
¬
 <<= 2;

2531 
k1
 = (
¬
 / 
k0
 + k0) >> 1;

2532 i‡(((
k0
 ^ 
k1
) & ~1) == 0)

2534 
k0
 = 
k1
;

2536  (Ë((
k1
 + 1) >> 1);

2537 
	}
}

2541 
	$likóèn
(
è¡›
, 
ènbŸ
) {

2542 
t
;

2546 i‡((
è¡›
 =0Ë&& (
ènbŸ
 == 0))

2547 
t
 = 0;

2550 
t
 = (
è¡›
 << 16Ë/ (
	`abs
—™t›Ë+ábs(
ènbŸ
));

2551 i‡(
ènbŸ
 < 0)

2552 
t
 = 0x20000 -Å;

2554 i‡(
è¡›
 < 0Ë
t
 = 0x40000 +Å;

2556  
t
;

2557 
	}
}

2560 
	$quadr
(
t
) {

2561  (8 - (((
t
 + 0x4000) >> 15) & 7)) & 7;

2562 
	}
}

	@demos/nxscribble/li_recognizer.h

8 #i‚de‡
_LI_RECOGNIZER_H_


10 
	#_LI_RECOGNIZER_H_


	)

14 
	#LI_ISA_LI
 0

	)

16 
	$boﬁ
 (*
	tli_iß_li
)(
	tªcognizî
 
	tr
);

18 
	#LI_TRAIN
 1

	)

20 (*
	tli_ªcognizî_åaö
)(
	tªcognizî
 
	tr
,

21 
	trc
* 
	tªc_xt
,

22 
	tu_öt
 
	tn°rokes
,

23 
	t≥n_°roke
* 
	t°rokes
,

24 
	tªc_ñemít
* 
	tª
,

25 
	tboﬁ
 
	tª∂a˚_p
);

27 
	#LI_CLEAR
 2

	)

29 (*
	tli_ªcognizî_˛órSèã
)(
	tªcognizî
 
	tr
);

31 
	#LI_GET_CLASSES
 3

	)

33 (*
	tli_ªcognizî_gëCœs£s
)(
	tªcognizî
 
	tr
, ***
	tli°
, *
	tnc
);

35 
	#LI_NUM_EX_FNS
 4

	)

	@demos/nxscribble/li_recognizer_internal.h

8 #i‚de‡
_LI_RECOGNIZER_INTERNAL_H_


10 
	#_LI_RECOGNIZER_INTERNAL_H_


	)

12 
	~<hª_öã∫Æ.h
>

13 
	~"sc.h
"

15 
	sPoötLi°
 {

16 
	m≈ts
;

17 
	mxønge
, 
	myønge
;

18 
≥n_poöt
* 
	m±s
;

19 
PoötLi°
* 
	m√xt
;

20 } 
	tpoöt_li°
;

23 * 
	mfûe_«me
;

24 
sCœssifõr
 
	msc
;

25 
poöt_li°
* 
	mex
[
MAXSCLASSES
];

26 * 
	m˙ames
[
MAXSCLASSES
];

27 
poöt_li°
* 
	mˇn⁄ex
[
MAXSCLASSES
];

28 
poöt_li°
* 
	mdom±s
[
MAXSCLASSES
];

29 } 
	trCœssifõr
;

36 
u_öt
 
	mli_magic
;

37 
rCœssifõr
 
	mli_rc
;

38 } 
	tli_ªcognizî
;

42 
	#LI_DEFAULT_CLASSIFIER_FILE
 "deÁu….˛"

	)

45 
	#LI_CLASSIFIER_EXTENSION
 ".˛"

	)

48 
	#LI_SUPPORTED_LOCALE
 
REC_DEFAULT_LOCALE


	)

	@demos/nxscribble/matrix.c

18 #unde‡
PIQ_DEBUG


20 
	~<°dio.h
>

21 
	~<°dlib.h
>

22 
	~<m©h.h
>

23 
	~"utû.h
"

24 
	~"m©rix.h
"

27 
¨øy_hódî
 *
	tAºay
;

29 
	#EPSILON
 (1.0e-10Ë

	)

36 
Ve˘‹


37 
	$NewVe˘‹
(
r
)

38 
r
;

40 
¨øy_hódî
 *
a
;

41 
Ve˘‹
 
v
;

43 
a
 = (
¨øy_hódî
 *)

44 
	`Æloˇã
((
¨øy_hódî
Ë+ 
r
 * (), );

45 
a
->
ndims
 = 1;

46 
a
->
ƒows
 = 
r
;

47 
a
->
ncﬁs
 = 1;

48 
v
 = (
Ve˘‹
Ë(
a
 + 1);

50 
	#CHECK


	)

51 #ifde‡
CHECK


52 if(
	`HEADER
(
v
Ë!(
¨øy_hódî
 *Ë
a
 ||

53 
	`NDIMS
(
v
Ë!1 || 
	`NROWS
(vË!
r
 || 
	`NCOLS
(v) != 1) {

54 
	`exô_îr‹
("NewVe˘‹Éº‹: v=%x H: %x,%x D:%d,%d R:%d,%d C:%d,%d\n", 
v
, 
	`HEADER
(v), 
a
, 
	`NDIMS
(v), 1, 
	`NROWS
(v), 
r
, 
	`NCOLS
(v), 1);

58  
v
;

59 
	}
}

61 
M©rix


62 
	$NewM©rix
(
r
, 
c
)

63 
r
, 
c
;

65 
¨øy_hódî
 *
a
 = (array_header *)

66 
	`Æloˇã
((
¨øy_hódî
Ë+ 
r
 * (*), );

67 
i
;

68 
M©rix
 
m
;

70 
m
 = (
M©rix
Ë(
a
 + 1);

71 
i
 = 0; i < 
r
; i++)

72 
m
[
i
] = 
	`Æloˇã
(
c
, );

73 
a
->
ndims
 = 2;

74 
a
->
ƒows
 = 
r
;

75 
a
->
ncﬁs
 = 
c
;

76  
m
;

77 
	}
}

80 
	$FªeVe˘‹
(
v
)

81 
Ve˘‹
 
v
;

83 
	`‰ì
(
	`HEADER
(
v
));

84 
	}
}

87 
	$FªeM©rix
(
m
)

88 
M©rix
 
m
;

90 
i
;

92 
i
 = 0; i < 
	`NROWS
(
m
); i++)

93 
	`‰ì
(
m
[
i
]);

94 
	`‰ì
(
	`HEADER
(
m
));

95 
	}
}

97 
Ve˘‹


98 
	$Ve˘‹C›y
(
v
)

99 
Ve˘‹
 
v
;

101 
Ve˘‹
 
r
 = 
	`NewVe˘‹
(
	`NROWS
(
v
));

102 
i
;

104 
i
 = 0; i < 
	`NROWS
(
v
); i++)

105 
r
[
i
] = 
v
[i];

106  
r
;

107 
	}
}

109 
M©rix


110 
	$M©rixC›y
(
m
)

111 
M©rix
 
m
;

113 
M©rix
 
r
 = 
	`NewM©rix
(
	`NROWS
(
m
), 
	`NCOLS
(m));

114 
i
, 
j
;

116 
i
 = 0; i < 
	`NROWS
(
m
); i++)

117 
j
 = 0; j < 
	`NROWS
(
m
); j++)

118 
r
[
i
][
j
] = 
m
[i][j];

119  
r
;

120 
	}
}

126 
	$ZîoVe˘‹
(
v
)

127 
Ve˘‹
 
v
;

129 
i
;

130 
i
 = 0; i < 
	`NROWS
(
v
); i++) v[i] = 0.0;

131 
	}
}

135 
	$ZîoM©rix
(
m
)

136 
M©rix
 
m
;

138 
i
, 
j
;

139 
i
 = 0; i < 
	`NROWS
(
m
); i++)

140 
j
 = 0; j < 
	`NCOLS
(
m
); j++)

141 
m
[
i
][
j
] = 0.0;

142 
	}
}

145 
	$FûlM©rix
(
m
, 
fûl
)

146 
M©rix
 
m
;

147 
fûl
;

149 
i
, 
j
;

150 
i
 = 0; i < 
	`NROWS
(
m
); i++)

151 
j
 = 0; j < 
	`NCOLS
(
m
); j++)

152 
m
[
i
][
j
] = 
fûl
;

153 
	}
}

156 
	$I¬îProdu˘
(
v1
, 
v2
)

157 
Ve˘‹
 
v1
, 
v2
;

159 
ªsu…
 = 0;

160 
n
 = 
	`NROWS
(
v1
);

161 if(
n
 !
	`NROWS
(
v2
)) {

162 
	`exô_îr‹
("I¬îProdu˘ %d x %d ", 
n
, 
	`NROWS
(
v2
));

164 --
n
 >= 0)

165 
ªsu…
 +*
v1
++ * *
v2
++;

166  
ªsu…
;

167 
	}
}

170 
	$M©rixMu…ùly
(
m1
, 
m2
, 
¥od
)

171 
M©rix
 
m1
, 
m2
, 
¥od
;

173 
i
, 
j
, 
k
;

174 
sum
;

176 if(
	`NCOLS
(
m1
Ë!
	`NROWS
(
m2
)) {

177 
	`îr‹
("MatrixMultiply: Can't multiply %dx%dánd %dx%d matrices",

178 
	`NROWS
(
m1
), 
	`NCOLS
(m1), NROWS(
m2
), NCOLS(m2));

181 if(
	`NROWS
(
¥od
Ë!NROWS(
m1
Ë|| 
	`NCOLS
’rodË!NCOLS(
m2
)) {

182 
	`îr‹
("MatrixMultiply: %dx%dÅimes %dx%d doesÇot give %dx%dÖroduct",

183 
	`NROWS
(
m1
), 
	`NCOLS
(m1), NROWS(
m2
), NCOLS(m2),

184 
	`NROWS
(
¥od
), 
	`NCOLS
(prod));

188 
i
 = 0; i < 
	`NROWS
(
m1
); i++)

189 
j
 = 0; j < 
	`NCOLS
(
m2
); j++) {

190 
sum
 = 0;

191 
k
 = 0; k < 
	`NCOLS
(
m1
); k++)

192 
sum
 +
m1
[
i
][
k
] * 
m2
[k][
j
];

193 
¥od
[
i
][
j
] = 
sum
;

195 
	}
}

205 
	$Ve˘‹TimesM©rix
(
v
, 
m
, 
¥od
)

206 
Ve˘‹
 
v
;

207 
M©rix
 
m
;

208 
Ve˘‹
 
¥od
;

210 
i
, 
j
;

212 if(
	`NROWS
(
v
Ë!NROWS(
m
)) {

213 
	`îr‹
("VectorTimesMatrix: Can't multiply %d vector by %dx%d",

214 
	`NROWS
(
v
), NROWS(
m
), 
	`NCOLS
(m));

217 if(
	`NROWS
(
¥od
Ë!
	`NCOLS
(
m
)) {

218 
	`îr‹
("VectorTimesMatrix: %d vectorÅimes %dx%d mat doesÇot fit in %dÖroduct" ,

219 
	`NROWS
(
v
), NROWS(
m
), 
	`NCOLS
(m), NROWS(
¥od
));

223 
j
 = 0; j < 
	`NCOLS
(
m
); j++) {

224 
¥od
[
j
] = 0;

225 
i
 = 0; i < 
	`NROWS
(
m
); i++)

226 
¥od
[
j
] +
v
[
i
] * 
m
[i][j];

228 
	}
}

231 
	$SˇœrTimesVe˘‹
(
s
, 
v
, 
¥odu˘
)

232 
s
;

233 
Ve˘‹
 
v
, 
¥odu˘
;

235 
n
 = 
	`NROWS
(
v
);

237 if(
	`NROWS
(
v
Ë!NROWS(
¥odu˘
)) {

238 
	`îr‹
("ScalarTimesVector:Ñesult wrong size (%d!=%d)",

239 
	`NROWS
(
v
), NROWS(
¥odu˘
));

243 --
n
 >= 0)

244 *
¥odu˘
++ = 
s
 * *
v
++;

245 
	}
}

248 
	$SˇœrTimesM©rix
(
s
, 
m
, 
¥odu˘
)

249 
s
;

250 
M©rix
 
m
, 
¥odu˘
;

252 
i
, 
j
;

254 if(
	`NROWS
(
m
Ë!NROWS(
¥odu˘
) ||

255 
	`NCOLS
(
m
Ë!NCOLS(
¥odu˘
)) {

256 
	`îr‹
("ScalarTimesMatrix:Ñesult wrong size (%d!=%d)or(%d!=%d)",

257 
	`NROWS
(
m
), NROWS(
¥odu˘
),

258 
	`NCOLS
(
m
), NCOLS(
¥odu˘
));

262 
i
 = 0; i < 
	`NROWS
(
m
); i++)

263 
j
 = 0; j < 
	`NCOLS
(
m
); j++)

264 
¥odu˘
[
i
][
j
] = 
s
 * 
m
[i][j];

265 
	}
}

272 
	$QuadøticF‹m
(
v
, 
m
)

273 
Ve˘‹
 
v
;

274 
M©rix
 
m
;

276 
i
, 
j
, 
n
;

277 
ªsu…
 = 0;

279 
n
 = 
	`NROWS
(
v
);

281 if(
n
 !
	`NROWS
(
m
Ë||Ç !
	`NCOLS
(m)) {

282 
	`exô_îr‹
("QuadraticForm: bad matrix size (%dx%dÇot %dx%d)",

283 
	`NROWS
(
m
), 
	`NCOLS
(m), 
n
,Ç);

285 
i
 = 0; i < 
n
; i++)

286 
j
 = 0; j < 
n
; j++) {

288 #ifde‡
PIQ_DEBUG


289 
	`¥ötf
("%g*%g*%g [%g] %s ",

290 
m
[
i
][
j
],
v
[i],v[j],

291 
m
[
i
][
j
] * 
v
[i] * v[j],

292 
i
==
n
-1&&
j
==n-1? "=" : "+");

295 
ªsu…
 +
m
[
i
][
j
] * 
v
[i] * v[j];

297  
ªsu…
;

298 
	}
}

314 
	gDebugInvîtM©rix
 = 0;

316 
	#PERMBUFSIZE
 200

	)

318 
	#_abs
(
x
Ë((x)>=0 ? (xË: -(x))

	)

321 
	$InvîtM©rix
(
ym
, 
rm
)

322 
M©rix
 
ym
, 
rm
;

324 
i
, 
j
, 
k
;

325 
dë
, 
biga
, 
ªcù_biga
, 
hﬁd
;

326 
l
[
PERMBUFSIZE
], 
m
[PERMBUFSIZE];

327 
n
;

329 if(
	`NROWS
(
ym
Ë!
	`NCOLS
(ym)) {

330 
	`exô_îr‹
("InvertMatrix:Çot square");

333 
n
 = 
	`NROWS
(
ym
);

335 if(
n
 !
	`NROWS
(
rm
Ë||Ç !
	`NCOLS
(rm)) {

336 
	`exô_îr‹
("InvertMatrix:Ñesult wrong size");

341 if(
ym
 !
rm
)

342 
i
 = 0; i < 
n
; i++)

343 
j
 = 0; j < 
n
; j++)

344 
rm
[
i
][
j
] = 
ym
[i][j];

351 i‡(
n
 >
PERMBUFSIZE
) {

352 
	`exô_îr‹
("InvertMatrix: PERMBUFSIZE");

355 
dë
 = 1.0;

356 
k
 = 0; k < 
n
; k++) {

357 
l
[
k
] = k; 
m
[k] = k;

358 
biga
 = 
rm
[
k
][k];

361 
i
 = 
k
; i < 
n
; i++)

362 
j
 = 
k
; j < 
n
; j++)

363 i‡(
	`_abs
(
rm
[
i
][
j
]Ë> _abs(
biga
)) {

364 
biga
 = 
rm
[
i
][
j
];

365 
l
[
k
] = 
i
;

366 
m
[
k
] = 
j
;

369 if(
DebugInvîtM©rix
)

370 if(
biga
 == 0.0)

371 
	`PrötM©rix
(
m
, "found zîÿbig®%g\n", 
biga
);

374 
i
 = 
l
[
k
];

375 i‡(
i
 > 
k
)

376 
j
 = 0; j < 
n
; j++) {

377 
hﬁd
 = -
rm
[
k
][
j
];

378 
rm
[
k
][
j
] =Ñm[
i
][j];

379 
rm
[
i
][
j
] = 
hﬁd
;

383 
j
 = 
m
[
k
];

384 i‡(
j
 > 
k
)

385 
i
 = 0; i < 
n
; i++) {

386 
hﬁd
 = -
rm
[
i
][
k
];

387 
rm
[
i
][
k
] =Ñm[i][
j
];

388 
rm
[
i
][
j
] = 
hﬁd
;

393 i‡(
biga
 == 0.0) {

397 if(
DebugInvîtM©rix
Ë
	`¥ötf
("big®%g\n", 
biga
);

398 
ªcù_biga
 = 1/
biga
;

399 
i
 = 0; i < 
n
; i++)

400 i‡(
i
 !
k
)

401 
rm
[
i
][
k
] *-
ªcù_biga
;

404 
i
 = 0; i < 
n
; i++)

405 i‡(
i
 !
k
) {

406 
hﬁd
 = 
rm
[
i
][
k
];

407 
j
 = 0; j < 
n
; j++)

408 i‡(
j
 !
k
)

409 
rm
[
i
][
j
] +
hﬁd
 *Ñm[
k
][j];

413 
j
 = 0; j < 
n
; j++)

414 i‡(
j
 !
k
)

415 
rm
[
k
][
j
] *
ªcù_biga
;

417 
dë
 *
biga
;

418 if(
DebugInvîtM©rix
Ë
	`¥ötf
("dë = %g\n", 
dë
);

419 
rm
[
k
][k] = 
ªcù_biga
;

424 
k
 = 
n
 - 1; k >= 0; k--) {

425 
i
 = 
l
[
k
];

426 i‡(
i
 > 
k
)

427 
j
 = 0; j < 
n
; j++) {

428 
hﬁd
 = 
rm
[
j
][
k
];

429 
rm
[
j
][
k
] = -rm[j][
i
];

430 
rm
[
j
][
i
] = 
hﬁd
;

432 
j
 = 
m
[
k
];

433 i‡(
j
 > 
k
)

434 
i
 = 0; i < 
n
; i++) {

435 
hﬁd
 = 
rm
[
k
][
i
];

436 
rm
[
k
][
i
] = -rm[
j
][i];

437 
rm
[
j
][
i
] = 
hﬁd
;

441 if(
DebugInvîtM©rix
Ë
	`¥ötf
("ªtu∫ög, dë = %g\n", 
dë
);

443  
dë
;

444 
	}
}

447 
	~"bôve˘‹.h
"

449 
Ve˘‹


450 
	$Sli˚Ve˘‹
(
v
, 
rowmask
)

451 
Ve˘‹
 
v
;

452 
BôVe˘‹
 
rowmask
;

454 
i
, 
ri
;

456 
Ve˘‹
 
r
 = 
	`NewVe˘‹
(
	`bôcou¡
(
	`NROWS
(
v
), 
rowmask
));

457 
i
 = 
ri
 = 0; i < 
	`NROWS
(
v
); i++)

458 if(
	`IS_SET
(
i
, 
rowmask
) )

459 
r
[
ri
++] = 
v
[
i
];

460  
r
;

461 
	}
}

463 
M©rix


464 
	$Sli˚M©rix
(
m
, 
rowmask
, 
cﬁmask
)

465 
M©rix
 
m
;

466 
BôVe˘‹
 
rowmask
, 
cﬁmask
;

468 
i
, 
ri
, 
j
, 
rj
;

470 
M©rix
 
r
;

472 
r
 = 
	`NewM©rix
(
	`bôcou¡
(
	`NROWS
(
m
), 
rowmask
),

473 
	`bôcou¡
(
	`NCOLS
(
m
), 
cﬁmask
));

474 
i
 = 
ri
 = 0; i < 
	`NROWS
(
m
); i++)

475 if(
	`IS_SET
(
i
, 
rowmask
) ) {

476 
j
 = 
rj
 = 0; j < 
	`NCOLS
(
m
); j++)

477 if(
	`IS_SET
(
j
, 
cﬁmask
))

478 
r
[
ri
][
rj
++] = 
m
[
i
][
j
];

479 
ri
++;

482  
r
;

483 
	}
}

485 
M©rix


486 
	$DeSli˚M©rix
(
m
, 
fûl
, 
rowmask
, 
cﬁmask
, 
r
)

487 
M©rix
 
m
;

488 
fûl
;

489 
BôVe˘‹
 
rowmask
, 
cﬁmask
;

490 
M©rix
 
r
;

492 
i
, 
ri
, 
j
, 
rj
;

494 
	`FûlM©rix
(
r
, 
fûl
);

496 
i
 = 
ri
 = 0; i < 
	`NROWS
(
r
); i++) {

497 if(
	`IS_SET
(
i
, 
rowmask
) ) {

498 
j
 = 
rj
 = 0; j < 
	`NCOLS
(
r
); j++)

499 if(
	`IS_SET
(
j
, 
cﬁmask
))

500 
r
[
i
][
j
] = 
m
[
ri
][
rj
++];

501 
ri
++;

505  
r
;

506 
	}
}

509 
	$OuçutVe˘‹
(
f
, 
v
)

510 
FILE
 *
f
;

511 
Ve˘‹
 
v
;

513 
i
;

514 
	`Ârötf
(
f
, " V %d ", 
	`NROWS
(
v
));

515 
i
 = 0; i < 
	`NROWS
(
v
); i++)

516 
	`Ârötf
(
f
, " %g", 
v
[
i
]);

517 
	`Ârötf
(
f
, "\n");

518 
	}
}

520 
Ve˘‹


521 
	$I≈utVe˘‹
(
f
)

522 
FILE
 *
f
;

524 
Ve˘‹
 
v
;

525 
i
;

526 
check
[4];

527 
ƒows
;

529 if(
	`fsˇnf
(
f
, "%1†%d", 
check
, &
ƒows
) != 2) {

530 
	`exô_îr‹
("InputVector fscanf 1");

532 if(
check
[0] != 'V') {

533 
	`exô_îr‹
("InputVector check");

535 
v
 = 
	`NewVe˘‹
(
ƒows
);

536 
i
 = 0; i < 
ƒows
; i++) {

537 if(
	`fsˇnf
(
f
, "%lf", &
v
[
i
]) != 1) {

538 
	`exô_îr‹
("InputVector fscanf 2");

541  
v
;

542 
	}
}

545 
	$OuçutM©rix
(
f
, 
m
)

546 
FILE
* 
f
;

547 
M©rix
 
m
;

549 
i
, 
j
;

550 
	`Ârötf
(
f
, " M %d %d\n", 
	`NROWS
(
m
), 
	`NCOLS
(m));

551 
i
 = 0; i < 
	`NROWS
(
m
); i++) {

552 
j
 = 0; j < 
	`NCOLS
(
m
); j++)

553 
	`Ârötf
(
f
, " %g", 
m
[
i
][
j
]);

554 
	`Ârötf
(
f
, "\n");

556 
	}
}

558 
M©rix


559 
	$I≈utM©rix
(
f
)

560 
FILE
 *
f
;

562 
M©rix
 
m
;

563 
i
, 
j
;

564 
check
[4];

565 
ƒows
, 
ncﬁs
;

567 if(
	`fsˇnf
(
f
, "%1†%d %d", 
check
, &
ƒows
, &
ncﬁs
) != 3) {

568 
	`exô_îr‹
("InputMatrix fscanf 1");

570 if(
check
[0] != 'M') {

571 
	`exô_îr‹
("InputMatrix check");

573 
m
 = 
	`NewM©rix
(
ƒows
, 
ncﬁs
);

574 
i
 = 0; i < 
ƒows
; i++)

575 
j
 = 0; j < 
ncﬁs
; j++) {

576 if(
	`fsˇnf
(
f
, "%lf", &
m
[
i
][
j
]) != 1) {

577 
	`exô_îr‹
("InputMatrix fscanf 2");

581  
m
;

582 
	}
}

585 
	$InvîtSöguœrM©rix
(
m
, 
öv
)

586 
M©rix
 
m
, 
öv
;

588 
i
, 
j
, 
k
;

589 
BôVe˘‹
 
mask
;

590 
M©rix
 
sm
;

591 
dë
, 
maxdë
;

592 
mi
 = -1, 
mj
 = -1, 
mk
 = -1;

594 
maxdë
 = 0.0;

595 
i
 = 0; i < 
	`NROWS
(
m
); i++) {

596 
	`¥ötf
("r&c%d, ", 
i
);

597 
	`SET_BIT_VECTOR
(
mask
);

598 
	`BIT_CLEAR
(
i
, 
mask
);

599 
sm
 = 
	`Sli˚M©rix
(
m
, 
mask
, mask);

600 
dë
 = 
	`InvîtM©rix
(
sm
, sm);

601 if(
dë
 == 0.0)

602 
	`¥ötf
("det still 0\n");

604 
	`¥ötf
("dë = %g\n", 
dë
);

606 if(
	`_abs
(
dë
Ë> _abs(
maxdë
))

607 
maxdë
 = 
dë
, 
mi
 = 
i
;

608 
	`FªeM©rix
(
sm
);

610 
	`¥ötf
("\n");

612 
	`¥ötf
("maxdë=%g whíÑow %dÜe· out\n", 
maxdë
, 
mi
);

613 if(
	`Ábs
(
maxdë
) > 1.0e-6) {

614 
found
;

617 
maxdë
 = 0.0;

618 
i
 = 0; i < 
	`NROWS
(
m
); i++) {

619 
j
 = 
i
+1; j < 
	`NROWS
(
m
); j++) {

621 
	`SET_BIT_VECTOR
(
mask
);

622 
	`BIT_CLEAR
(
i
, 
mask
);

623 
	`BIT_CLEAR
(
j
, 
mask
);

624 
sm
 = 
	`Sli˚M©rix
(
m
, 
mask
, mask);

625 
dë
 = 
	`InvîtM©rix
(
sm
, sm);

633 if(
	`abs
(
dë
Ë>ábs(
maxdë
))

634 
maxdë
 = 
dë
, 
mi
 = 
i
, 
mj
 = 
j
;

635 
	`FªeM©rix
(
sm
);

639 
	`¥ötf
("maxdë=%g whíÑow†%d,%dÜe· out\n", 
maxdë
, 
mi
, 
mj
);

640 if(
	`_abs
(
maxdë
) > 1.0e-6) {

641 
found
;

644 
maxdë
 = 0.0;

645 
i
 = 0; i < 
	`NROWS
(
m
); i++) {

646 
j
 = 
i
+1; j < 
	`NROWS
(
m
); j++) {

647 
k
 = 
j
+1; k < 
	`NROWS
(
m
); k++) {

649 
	`SET_BIT_VECTOR
(
mask
);

650 
	`BIT_CLEAR
(
i
, 
mask
);

651 
	`BIT_CLEAR
(
j
, 
mask
);

652 
	`BIT_CLEAR
(
k
, 
mask
);

653 
sm
 = 
	`Sli˚M©rix
(
m
, 
mask
, mask);

654 
dë
 = 
	`InvîtM©rix
(
sm
, sm);

662 if(
	`_abs
(
dë
Ë> _abs(
maxdë
))

663 
maxdë
 = 
dë
, 
mi
 = 
i
, 
mj
 = 
j
, 
mk
 = 
k
;

664 
	`FªeM©rix
(
sm
);

668 
	`¥ötf
("maxdë=%g whíÑow†%d,%d&%dÜe· out\n", 
maxdë
, 
mi
, 
mj
, 
mk
);

669 if(
mk
 == -1)

672 
found
:

674 
	`SET_BIT_VECTOR
(
mask
);

675 if(
mi
 >0Ë
	`BIT_CLEAR
(mi, 
mask
);

676 if(
mj
 >0Ë
	`BIT_CLEAR
(mj, 
mask
);

677 if(
mk
 >0Ë
	`BIT_CLEAR
(mk, 
mask
);

678 
sm
 = 
	`Sli˚M©rix
(
m
, 
mask
, mask);

679 
dë
 = 
	`InvîtM©rix
(
sm
, sm);

680 
	`DeSli˚M©rix
(
sm
, 0.0, 
mask
, mask, 
öv
);

681 
	`FªeM©rix
(
sm
);

682 
	`PrötM©rix
(
öv
, "desliced:\n");

683  
dë
;

684 
	}
}

689 
	$PrötVe˘‹
(
v
, 
s
,
a1
,
a2
,
a3
,
a4
,
a5
,
a6
,
a7
,
a8
)

690 
Ve˘‹
 
v
;

691 *
s
; 
a1
,
a2
,
a3
,
a4
,
a5
,
a6
,
a7
,
a8
;

693 
i
;

694 
	`¥ötf
(
s
,
a1
,
a2
,
a3
,
a4
,
a5
,
a6
,
a7
,
a8
);

696 
i
 = 0; i < 
	`NROWS
(
v
); i++Ë
	`¥ötf
(" %8.4f", v[i]);

697 
	`¥ötf
("\n");

698 
	}
}

701 
	$PrötM©rix
(
m
, 
s
,
a1
,
a2
,
a3
,
a4
,
a5
,
a6
,
a7
,
a8
)

702 
M©rix
 
m
;

703 *
s
; 
a1
,
a2
,
a3
,
a4
,
a5
,
a6
,
a7
,
a8
;

705 
i
, 
j
;

706 
	`¥ötf
(
s
,
a1
,
a2
,
a3
,
a4
,
a5
,
a6
,
a7
,
a8
);

707 
i
 = 0; i < 
	`NROWS
(
m
); i++) {

708 
j
 = 0; j < 
	`NCOLS
(
m
); j++)

709 
	`¥ötf
(" %8.4f", 
m
[
i
][
j
]);

710 
	`¥ötf
("\n");

712 
	}
}

715 
	$PrötAºay
(
a
, 
s
,
a1
,
a2
,
a3
,
a4
,
a5
,
a6
,
a7
,
a8
)

716 
Aºay
 
a
;

717 *
s
; 
a1
,
a2
,
a3
,
a4
,
a5
,
a6
,
a7
,
a8
;

719 
	`NDIMS
(
a
)) {

720 1: 
	`PrötVe˘‹
((
Ve˘‹
Ë
a
, 
s
,
a1
,
a2
,
a3
,
a4
,
a5
,
a6
,
a7
,
a8
); ;

721 2: 
	`PrötM©rix
((
M©rix
Ë
a
, 
s
,
a1
,
a2
,
a3
,
a4
,
a5
,
a6
,
a7
,
a8
); ;

722 : 
	`îr‹
("PrintArray");

724 
	}
}

	@demos/nxscribble/matrix.h

35 
	#HEADER
(
a
Ë–((
¨øy_hódî
 *ËaË- 1 )

	)

37 
	#NDIMS
(
a
Ë()(
	`HEADER
◊)->
ndims
)

	)

38 
	#NROWS
(
a
Ë()(
	`HEADER
◊)->
ƒows
)

	)

39 
	#NCOLS
(
a
Ë()(
	`HEADER
◊)->
ncﬁs
)

	)

40 
	#ISVECTOR
(
a
Ë(
	`NDIMS
◊Ë=1)

	)

41 
	#ISMATRIX
(
a
Ë(
	`NDIMS
◊Ë=2)

	)

48 
	s¨øy_hódî
 {

49 
	mndims
;

50 
	mƒows
;

51 
	mncﬁs
;

52 
	mfûÀr
;

55 **
	tM©rix
;

56 *
	tVe˘‹
;

58 
Ve˘‹
 
NewVe˘‹
();

59 
M©rix
 
NewM©rix
();

60 
FªeVe˘‹
();

61 
FªeM©rix
();

62 
PrötVe˘‹
();

63 
PrötM©rix
();

64 
I¬îProdu˘
();

65 
M©rixMu…ùly
();

66 
Ve˘‹TimesM©rix
();

67 
SˇœrTimesVe˘‹
();

68 
QuadøticF‹m
();

69 
InvîtM©rix
();

70 
Ve˘‹
 
Sli˚Ve˘‹
();

71 
M©rix
 
Sli˚M©rix
();

72 
Ve˘‹
 
Ve˘‹C›y
();

73 
M©rix
 
M©rixC›y
();

74 
Ve˘‹
 
I≈utVe˘‹
();

75 
M©rix
 
I≈utM©rix
();

77 
InvîtSöguœrM©rix
();

78 
M©rix
 
DeSli˚M©rix
();

80 
OuçutVe˘‹
();

81 
OuçutM©rix
();

82 
ZîoVe˘‹
();

83 
ZîoM©rix
();

84 
FûlM©rix
();

	@demos/nxscribble/nxscribble.c

7 
	~<°dio.h
>

8 
	~<°rög.h
>

9 
	~<°dlib.h
>

10 
	#MWINCLUDECOLORS


	)

11 
	~"«no-X.h
"

12 
	~"s¸ib.h
"

14 
	#TEXTWIN_WIDTH
 200

	)

15 
	#TEXTWIN_HEIGHT
 150

	)

17 
S¸ibbÀWidgë
 
	gw
;

19 
GR_BOOL
 
	gbTextwö
 = 
GR_FALSE
;

20 
GR_WINDOW_ID
 
	gwt
 = 0;

21 
GR_GC_ID
 
	gg˘
 = 0;

22 
GR_GC_ID
 
	gg˘b
 = 0;

23 
GR_COORD
 
	gxpos
 = 0;

24 
GR_COORD
 
	gypos
 = 0;

25 
GR_SIZE
 
	gwidth
;

26 
GR_SIZE
 
	gheight
;

27 
GR_SIZE
 
	gba£
;

28 
ch¨_out
(
GR_CHAR
 
ch
);

29 
ch¨_dñ
(
GR_COORD
 
x
, GR_COORD 
y
);

31 
do_buâ⁄down
(
GR_EVENT_BUTTON
 *
bp
);

32 
do_buâ⁄up
(
GR_EVENT_BUTTON
 *
bp
);

33 
do_mŸi⁄
(
GR_EVENT_MOUSE
 *
mp
);

34 
do_focusö
(
GR_EVENT_GENERAL
 *
gp
);

35 
do_key°roke
(
GR_EVENT_KEYSTROKE
 *
kp
);

36 
do_exposuª
(
GR_EVENT_EXPOSURE
 *
ï
);

39 
	$maö
(
¨gc
, **
¨gv
)

41 
t
 = 1;

42 
GR_EVENT
 
evít
;

44 
t
 < 
¨gc
) {

45 i‡(!
	`°rcmp
("-t", 
¨gv
[
t
])) {

46 
bTextwö
 = 
GR_TRUE
;

47 ++
t
;

52 i‡(
	`GrO≥n
() < 0) {

53 
	`Ârötf
(
°dîr
, "cannot open graphics\n");

54 
	`exô
(1);

57 i‡(
bTextwö
) {

59 
wt
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 50, 20,

60 
TEXTWIN_WIDTH
, 
TEXTWIN_HEIGHT
, 5, 
BLACK
, 
GREEN
);

61 
	`GrSñe˘Evíts
(
wt
,

62 
GR_EVENT_MASK_CLOSE_REQ
 | 
GR_EVENT_MASK_KEY_DOWN


63 | 
GR_EVENT_MASK_EXPOSURE
);

64 
	`GrM≠Wödow
(
wt
);

65 
g˘
 = 
	`GrNewGC
();

66 
	`GrSëGCF‹eground
(
g˘
, 
GREEN
);

67 
	`GrGëGCTextSize
(
g˘
, "A",1, 
GR_TFASCII
, &
width
, &
height
, &
ba£
);

68 
	`GrSëGCF⁄t
(
g˘
, 
	`GrCª©eF⁄t
(
GR_FONT_SYSTEM_FIXED
, 0, 
NULL
));

69 
g˘b
 = 
	`GrNewGC
();

70 
	`GrSëGCF‹eground
(
g˘b
, 
BLACK
);

74 
w
 = 
	`¸óã_s¸ibbÀ
();

77 
	`GrGëNextEvít
(&
evít
);

79 
evít
.
ty≥
) {

80 
GR_EVENT_TYPE_BUTTON_DOWN
:

81 
	`do_buâ⁄down
(&
evít
.
buâ⁄
);

84 
GR_EVENT_TYPE_BUTTON_UP
:

85 
	`do_buâ⁄up
(&
evít
.
buâ⁄
);

88 
GR_EVENT_TYPE_MOUSE_POSITION
:

89 
GR_EVENT_TYPE_MOUSE_MOTION
:

90 
	`do_mŸi⁄
(&
evít
.
mou£
);

93 
GR_EVENT_TYPE_FOCUS_IN
:

94 
	`do_focusö
(&
evít
.
gíîÆ
);

97 
GR_EVENT_TYPE_KEY_DOWN
:

98 
	`do_key°roke
(&
evít
.
key°roke
);

101 
GR_EVENT_TYPE_EXPOSURE
:

102 
	`do_exposuª
(&
evít
.
exposuª
);

105 
GR_EVENT_TYPE_CLOSE_REQ
:

106 
	`GrClo£
();

107 
	`exô
(0);

110 
	}
}

117 
	$do_buâ⁄down
(
GR_EVENT_BUTTON
 *
bp
)

119 
	`A˘i⁄Sèπ
(
w
, 
bp
->
x
, bp->
y
);

120 
	}
}

127 
	$do_buâ⁄up
(
GR_EVENT_BUTTON
 *
bp
)

129 
	`A˘i⁄End
(
w
, 
bp
->
x
, bp->
y
);

130 
	}
}

137 
	$do_mŸi⁄
(
GR_EVENT_MOUSE
 *
mp
)

139 
	`A˘i⁄Move
(
w
, 
mp
->
x
, mp->
y
);

140 
	}
}

147 
	$do_focusö
(
GR_EVENT_GENERAL
 *
gp
)

151 i‡(
gp
->
wid
 =
w
->
wö
 && gp->wid != 1)

152 
w
->
œ°focusid
 = 
gp
->
Ÿhîid
;

154 
	}
}

161 
	$do_exposuª
(
GR_EVENT_EXPOSURE
 *
ï
)

163 i‡(
ï
->
wid
 =
w
->
wö
)

164 
	`Redi•œy
(
w
);

165 
	}
}

172 
	$do_key°roke
(
GR_EVENT_KEYSTROKE
 *
kp
)

174 i‡(
bTextwö
)

175 
	`ch¨_out
(
kp
->
ch
);

176 
	}
}

179 
	$ch¨_dñ
(
GR_COORD
 
x
, GR_COORD 
y
)

181 
xpos
 -
width
;

182 
	`GrFûlRe˘
(
wt
, 
g˘b
, 
x
+1, 
y
 , 
width
, 
height
);

183 
	}
}

186 
	$ch¨_out
(
GR_CHAR
 
ch
)

188 
ch
) {

191 
xpos
 = 0;

192 
ypos
 +
height
;

193 if(
ypos
 >
TEXTWIN_HEIGHT
 - 
height
) {

194 
ypos
 -
height
;

198 
ypos
 = 0;

199 
	`GrCÀ¨Wödow
(
wt
, 
GR_FALSE
);

205 
xpos
 +
width
;

206 (
xpos
/
width
) & 7)

207 
	`ch¨_out
(' ');

210 i‡(
xpos
 <= 0)

212 
	`ch¨_dñ
(
xpos
, 
ypos
);

213 
	`ch¨_out
(' ');

214 
	`ch¨_dñ
(
xpos
, 
ypos
);

217 
	`GrText
(
wt
, 
g˘
, 
xpos
+1, 
ypos
, &
ch
, 1, 
GR_TFTOP
);

218 
xpos
 +
width
;

220 i‡(
xpos
 >
TEXTWIN_WIDTH
-
width
)

221 
	`ch¨_out
('\n');

222 
	}
}

	@demos/nxscribble/sc.c

24 
	~<°rög.h
>

25 
	~"bôve˘‹.h
"

26 
	~"m©rix.h
"

27 
	~"utû.h
"

28 
	~"sc.h
"

29 
	~"°dio.h
"

30 
	~"°dlib.h
"

31 
	~"m©h.h
"

32 
	~"zdebug.h
"

34 
	#EPS
 (1.0e-6Ë

	)

35 
sCœssifõr


36 
	$sNewCœssifõr
()

38 
sCœssifõr
 
sc
 = 
	`Æloˇã
(1, 
s˛assifõr
);

39 
sc
->
n„©uªs
 = -1;

40 
sc
->
n˛as£s
 = 0;

41 
sc
->
˛assd›e
 = 
	`Æloˇã
(
MAXSCLASSES
, 
sCœssD›e
);

42 
sc
->
w
 = 
NULL
;

43  
sc
;

44 
	}
}

47 
	$sFªeCœssifõr
(
sc
)

48 
sCœssifõr
 
sc
;

50 
i
;

51 
sCœssD›e
 
scd
;

53 
i
 = 0; i < 
sc
->
n˛as£s
; i++) {

54 
scd
 = 
sc
->
˛assd›e
[
i
];

55 if(
scd
->
«me
Ë
	`‰ì
(scd->name);

56 if(
scd
->
sumcov
Ë
	`FªeM©rix
(scd->sumcov);

57 if(
scd
->
avîage
Ë
	`FªeVe˘‹
(scd->average);

58 
	`‰ì
(
scd
);

59 if(
sc
->
w
 && sc->w[
i
]Ë
	`FªeVe˘‹
(sc->w[i]);

61 
	`‰ì
(
sc
->
˛assd›e
);

62 if(
sc
->
w
Ë
	`‰ì
(sc->w);

63 if(
sc
->
˙°
Ë
	`FªeVe˘‹
(sc->cnst);

64 if(
sc
->
övavgcov
Ë
	`FªeM©rix
(sc->invavgcov);

65 
	`‰ì
(
sc
);

66 
	}
}

68 
sCœssD›e


69 
	$sCœssNameLookup
(
sc
, 
˛as¢ame
)

70 
sCœssifõr
 
sc
;

71 *
˛as¢ame
;

73 
i
;

74 
sCœssD›e
 
scd
;

75 
sCœssifõr
 
œ°sc
 = 
NULL
;

76 
sCœssD›e
 
œ°scd
 = 
NULL
;

79 if(
œ°sc
 =
sc
 && 
œ°scd
 !
NULL
 && 
	`STREQ
÷a°scd->
«me
, 
˛as¢ame
))

80  
œ°scd
;

83 
i
 = 0; i < 
sc
->
n˛as£s
; i++) {

84 
scd
 = 
sc
->
˛assd›e
[
i
];

85 if(
	`STREQ
(
scd
->
«me
, 
˛as¢ame
))

86  
œ°sc
 = 
sc
, 
œ°scd
 = 
scd
;

88 
œ°sc
 = 
NULL
;

89 
œ°scd
 = 
NULL
;

90  
NULL
;

91 
	}
}

93 
sCœssD›e


94 
	$sAddCœss
(
sc
, 
˛as¢ame
)

95 
sCœssifõr
 
sc
;

96 *
˛as¢ame
;

98 
sCœssD›e
 
scd
;

100 
sc
->
˛assd›e
[sc->
n˛as£s
] = 
scd
 = 
	`Æloˇã
(1, 
s˛assd›e
);

101 
scd
->
«me
 = 
	`sc›y
(
˛as¢ame
);

102 
scd
->
numbî
 = 
sc
->
n˛as£s
;

103 
scd
->
√xam∂es
 = 0;

104 
scd
->
sumcov
 = 
NULL
;

105 ++
sc
->
n˛as£s
;

106  
scd
;

107 
	}
}

110 
	$sAddExam∂e
(
sc
, 
˛as¢ame
, 
y
)

111 
sCœssifõr
 
sc
;

112 *
˛as¢ame
;

113 
Ve˘‹
 
y
;

115 
sCœssD›e
 
scd
;

116 
i
, 
j
;

117 
nfv
[50];

118 
nm1⁄
, 
ªcùn
;

120 
scd
 = 
	`sCœssNameLookup
(
sc
, 
˛as¢ame
);

121 if(
scd
 =
NULL
) {

123 
scd
 = 
	`sAddCœss
(
sc
, 
˛as¢ame
);

126 if(
sc
->
n„©uªs
 == -1) {

127 
sc
->
n„©uªs
 = 
	`NROWS
(
y
);

131 if(
scd
->
√xam∂es
 == 0) {

133 
scd
->
avîage
 = 
	`NewVe˘‹
(
sc
->
n„©uªs
);

134 
	`ZîoVe˘‹
(
scd
->
avîage
);

135 
scd
->
sumcov
 = 
	`NewM©rix
(
sc
->
n„©uªs
, sc->nfeatures);

136 
	`ZîoM©rix
(
scd
->
sumcov
);

140 if(
sc
->
n„©uªs
 !
	`NROWS
(
y
)) {

141 
	`PrötVe˘‹
(
y
, "sAddExample: funny feature vectorÇrows!=%d",

142 
sc
->
n„©uªs
);

146 
scd
->
√xam∂es
++;

147 
nm1⁄
 = ((Ë
scd
->
√xam∂es
-1)/scd->nexamples;

148 
ªcùn
 = 1.0/
scd
->
√xam∂es
;

151 
i
 = 0; i < 
sc
->
n„©uªs
; i++)

152 
nfv
[
i
] = 
y
[i] - 
scd
->
avîage
[i];

155 
i
 = 0; i < 
sc
->
n„©uªs
; i++)

156 
j
 = 
i
; j < 
sc
->
n„©uªs
; j++)

157 
scd
->
sumcov
[
i
][
j
] +
nm1⁄
 * 
nfv
[i] *Çfv[j];

160 
i
 = 0; i < 
sc
->
n„©uªs
; i++)

161 
scd
->
avîage
[
i
] = 
nm1⁄
 * scd->avîage[i] + 
ªcùn
 * 
y
[i];

163 
	}
}

166 
	$sD⁄eAddög
(
sc
)

167 
sCœssifõr
 
sc
;

169 
i
, 
j
;

170 
c
;

171 
√
, 
díom
;

172 
⁄eovîdíom
;

173 
M©rix
 
s
;

174 
M©rix
 
avgcov
;

175 
dë
;

176 
sCœssD›e
 
scd
;

178 if(
sc
->
n˛as£s
 == 0) {

179 
	`îr‹
("No classes foráddingÅo classifier");

186 
avgcov
 = 
	`NewM©rix
(
sc
->
n„©uªs
, sc->nfeatures);

187 
	`ZîoM©rix
(
avgcov
);

188 
√
 = 0;

189 
c
 = 0; c < 
sc
->
n˛as£s
; c++) {

190 
scd
 = 
sc
->
˛assd›e
[
c
];

191 
√
 +
scd
->
√xam∂es
;

192 
s
 = 
scd
->
sumcov
;

193 
i
 = 0; i < 
sc
->
n„©uªs
; i++)

194 
j
 = 
i
; j < 
sc
->
n„©uªs
; j++)

195 
avgcov
[
i
][
j
] +
s
[i][j];

198 
díom
 = 
√
 - 
sc
->
n˛as£s
;

199 if(
díom
 <= 0) {

200 
	`îr‹
("Number of classes must beÜessÅhanÇumber ofÉxamples");

204 
⁄eovîdíom
 = 1.0 / 
díom
;

205 
i
 = 0; i < 
sc
->
n„©uªs
; i++)

206 
j
 = 
i
; j < 
sc
->
n„©uªs
; j++)

207 
avgcov
[
j
][
i
] =ávgcov[i][j] *
⁄eovîdíom
;

209 
	`Z
('a'Ë
	`PrötM©rix
(
avgcov
, "Average Covariance Matrix\n");

212 
sc
->
övavgcov
 = 
	`NewM©rix
(sc->
n„©uªs
, sc->nfeatures);

213 
dë
 = 
	`InvîtM©rix
(
avgcov
, 
sc
->
övavgcov
);

214 if(
	`Ábs
(
dë
Ë<
EPS
)

215 
	`FixCœssifõr
(
sc
, 
avgcov
);

218 
sc
->
w
 = 
	`Æloˇã
(sc->
n˛as£s
, 
Ve˘‹
);

219 
sc
->
˙°
 = 
	`NewVe˘‹
(sc->
n˛as£s
);

220 
c
 = 0; c < 
sc
->
n˛as£s
; c++) {

221 
scd
 = 
sc
->
˛assd›e
[
c
];

222 
sc
->
w
[
c
] = 
	`NewVe˘‹
(sc->
n„©uªs
);

223 
	`Ve˘‹TimesM©rix
(
scd
->
avîage
, 
sc
->
övavgcov
, sc->
w
[
c
]);

224 
sc
->
˙°
[
c
] = -0.5 * 
	`I¬îProdu˘
(sc->
w
[c], 
scd
->
avîage
);

228 
	`FªeM©rix
(
avgcov
);

230 
	}
}

232 
sCœssD›e


233 
	$sCœssify
(
sc
, 
fv
) {

234  
	`sCœssifyAD
(
sc
, 
fv
, 
NULL
, NULL);

235 
	}
}

237 
sCœssD›e


238 
	$sCœssifyAD
(
sc
, 
fv
, 
≠
, 
dp
)

239 
sCœssifõr
 
sc
;

240 
Ve˘‹
 
fv
;

241 *
≠
;

242 *
dp
;

244 
disc
[
MAXSCLASSES
];

245 
i
, 
max˛ass
;

246 
díom
, 
	`exp
();

247 
sCœssD›e
 
scd
;

248 
d
;

250 if(
sc
->
w
 =
NULL
) {

251 
	`îr‹
("%xÇŸáÅøöed cœssifõr", 
sc
);

252 (
NULL
);

255 
i
 = 0; i < 
sc
->
n˛as£s
; i++) {

257 
IP
;

258 
IP
 = 
	`I¬îProdu˘
(
sc
->
w
[
i
], 
fv
);

261 
disc
[
i
] = 
IP
 + 
sc
->
˙°
[i];

267 
max˛ass
 = 0;

268 
i
 = 1; i < 
sc
->
n˛as£s
; i++)

269 if(
disc
[
i
] > disc[
max˛ass
])

270 
max˛ass
 = 
i
;

307 
	`ZZ
('C') {

308 
scd
 = 
sc
->
˛assd›e
[
max˛ass
];

309 
	`PrötVe˘‹
(
fv
, "%10.10† ", 
scd
->
«me
);

310 
	`ZZZ
('C') {

311 
i
 = 0; i < 
sc
->
n˛as£s
; i++) {

312 
scd
 = 
sc
->
˛assd›e
[
i
];

313 
	`PrötVe˘‹
(
scd
->
avîage
, "%5.5s %5g ",

314 
scd
->
«me
, 
disc
[
i
]);

319 
scd
 = 
sc
->
˛assd›e
[
max˛ass
];

330 if(
≠
) {

331 
díom
 = 0, 
i
 = 0; i < 
sc
->
n˛as£s
; i++)

333 if((
d
 = 
disc
[
i
] - disc[
max˛ass
]) > -7.0)

334 
díom
 +
	`exp
(
d
);

335 *
≠
 = 1.0 / 
díom
;

338 if(
dp
)

339 *
dp
 = 
	`MahÆ™obisDi°™˚
(
fv
, 
scd
->
avîage
, 
sc
->
övavgcov
);

341  
scd
;

342 
	}
}

349 
	$MahÆ™obisDi°™˚
(
v
, 
u
, 
sigma
)

350 
Ve˘‹
 
v
, 
u
;

351 
M©rix
 
sigma
;

353 
i
;

354 
Ve˘‹
 
•a˚
;

355 
ªsu…
;

357 if(
•a˚
 =
NULL
 || 
	`NROWS
(•a˚Ë!NROWS(
v
)) {

358 if(
•a˚
Ë
	`FªeVe˘‹
(space);

359 
•a˚
 = 
	`NewVe˘‹
(
	`NROWS
(
v
));

361 
i
 = 0; i < 
	`NROWS
(
v
); i++)

362 
•a˚
[
i
] = 
v
[i] - 
u
[i];

363 
ªsu…
 = 
	`QuadøticF‹m
(
•a˚
, 
sigma
);

364  
ªsu…
;

365 
	}
}

368 
	$FixCœssifõr
(
sc
, 
avgcov
)

369 
sCœssifõr
 
sc
;

370 
M©rix
 
avgcov
;

372 
i
;

373 
dë
;

374 
BôVe˘‹
 
bv
;

375 
M©rix
 
m
, 
r
;

380 
	`CLEAR_BIT_VECTOR
(
bv
);

381 
i
 = 0; i < 
sc
->
n„©uªs
; i++) {

382 
	`BIT_SET
(
i
, 
bv
);

383 
m
 = 
	`Sli˚M©rix
(
avgcov
, 
bv
, bv);

384 
r
 = 
	`NewM©rix
(
	`NROWS
(
m
), 
	`NCOLS
(m));

385 
dë
 = 
	`InvîtM©rix
(
m
, 
r
);

386 if(
	`Ábs
(
dë
Ë<
EPS
)

387 
	`BIT_CLEAR
(
i
, 
bv
);

388 
	`FªeM©rix
(
m
);

389 
	`FªeM©rix
(
r
);

392 
m
 = 
	`Sli˚M©rix
(
avgcov
, 
bv
, bv);

393 
r
 = 
	`NewM©rix
(
	`NROWS
(
m
), 
	`NCOLS
(m));

394 
dë
 = 
	`InvîtM©rix
(
m
, 
r
);

395 if(
	`Ábs
(
dë
Ë<
EPS
) {

396 
	`îr‹
("Can't fix classifier!");

399 
	`DeSli˚M©rix
(
r
, 0.0, 
bv
, bv, 
sc
->
övavgcov
);

401 
	`FªeM©rix
(
m
);

402 
	`FªeM©rix
(
r
);

404 
	}
}

407 
	$sDumpCœssifõr
(
sc
)

408 
sCœssifõr
 
sc
;

410 
sCœssIndex
 
c
;

412 
	`¥ötf
("\n----Cœssifõ∏%x, %d fótuªs:-----\n", ()
sc
, sc->
n„©uªs
);

413 
	`¥ötf
("%d cœs£s: ", 
sc
->
n˛as£s
);

414 
c
 = 0; c < 
sc
->
n˛as£s
; c++)

415 
	`¥ötf
("%† ", 
sc
->
˛assd›e
[
c
]->
«me
);

416 
	`¥ötf
("Discrimination functions:\n");

417 
c
 = 0; c < 
sc
->
n˛as£s
; c++) {

418 
	`PrötVe˘‹
(
sc
->
w
[
c
], "%s: %g + ", sc->
˛assd›e
[c]->
«me
, sc->
˙°
[c]);

419 
	`¥ötf
("Mean vectors:\n");

420 
	`PrötVe˘‹
(
sc
->
˛assd›e
[
c
]->
avîage
, "%s: ", sc->˛assd›e[c]->
«me
);

422 if–
sc
->
övavgcov
 !
NULL
 ) {

423 
	`PrötM©rix
(
sc
->
övavgcov
, "Inverseáverage covariance matrix:\n");

425 
	`¥ötf
("\n---------\n\n");

426 
	}
}

429 
	$sWrôe
(
outfûe
, 
sc
)

430 
FILE
 *
outfûe
;

431 
sCœssifõr
 
sc
;

433 
i
;

434 
sCœssD›e
 
scd
;

436 
	`Ârötf
(
outfûe
, "%d cœs£s\n", 
sc
->
n˛as£s
);

437 
i
 = 0; i < 
sc
->
n˛as£s
; i++) {

438 
scd
 = 
sc
->
˛assd›e
[
i
];

439 
	`Ârötf
(
outfûe
, "%s\n", 
scd
->
«me
);

441 
i
 = 0; i < 
sc
->
n˛as£s
; i++) {

442 
scd
 = 
sc
->
˛assd›e
[
i
];

443 
	`OuçutVe˘‹
(
outfûe
, 
scd
->
avîage
);

444 
	`OuçutM©rix
(
outfûe
, 
scd
->
sumcov
);

445 
	`OuçutVe˘‹
(
outfûe
, 
sc
->
w
[
i
]);

447 
	`OuçutVe˘‹
(
outfûe
, 
sc
->
˙°
);

448 
	`OuçutM©rix
(
outfûe
, 
sc
->
övavgcov
);

449 
	}
}

451 
sCœssifõr


452 
	$sRód
(
öfûe
)

453 
FILE
 *
öfûe
;

455 
i
, 
n
;

456 
sCœssifõr
 
sc
;

457 
sCœssD›e
 
scd
;

458 
buf
[100];

461 
	`Z
('a'Ë
	`¥ötf
("Reading classifier \n");

462 
sc
 = 
	`sNewCœssifõr
();

463 
	`fgës
(
buf
, 100, 
öfûe
);

464 if(
	`ssˇnf
(
buf
, "%d", &
n
) != 1) {

465 
	`îr‹
("InputÉrror in classifier file");

466 
	`sFªeCœssifõr
(
sc
);

467 (
NULL
);

469 
	`Z
('a'Ë
	`¥ötf
(" %d cœs£†\n", 
n
);

470 
i
 = 0; i < 
n
; i++) {

471 
	`fsˇnf
(
öfûe
, "%s", 
buf
);

472 
scd
 = 
	`sAddCœss
(
sc
, 
buf
);

473 
	`Z
('a'Ë
	`¥ötf
(" %†\n", 
scd
->
«me
);

475 
sc
->
w
 = 
	`Æloˇã
(sc->
n˛as£s
, 
Ve˘‹
);

476 
i
 = 0; i < 
sc
->
n˛as£s
; i++) {

477 
scd
 = 
sc
->
˛assd›e
[
i
];

478 
scd
->
avîage
 = 
	`I≈utVe˘‹
(
öfûe
);

479 
scd
->
sumcov
 = 
	`I≈utM©rix
(
öfûe
);

480 
sc
->
w
[
i
] = 
	`I≈utVe˘‹
(
öfûe
);

482 
sc
->
˙°
 = 
	`I≈utVe˘‹
(
öfûe
);

483 
sc
->
övavgcov
 = 
	`I≈utM©rix
(
öfûe
);

484 
	`Z
('a'Ë
	`¥ötf
("\n");

485  
sc
;

486 
	}
}

490 
	$sDi°™˚s
(
sc
, 
n˛o£°
)

491 
sCœssifõr
 
sc
;

493 
M©rix
 
d
 = 
	`NewM©rix
(
sc
->
n˛as£s
, sc->nclasses);

494 
i
, 
j
;

495 
mö
, 
max
 = 0;

496 
n
, 
mi
, 
mj
;

498 
	`¥ötf
("-----------\n");

499 
	`¥ötf
("Computög %d clo£°Öaú†o‡˛as£s\n", 
n˛o£°
);

500 
i
 = 0; i < 
	`NROWS
(
d
); i++) {

501 
j
 = 
i
+1; j < 
	`NCOLS
(
d
); j++) {

502 
d
[
i
][
j
] = 
	`MahÆ™obisDi°™˚
(

503 
sc
->
˛assd›e
[
i
]->
avîage
,

504 
sc
->
˛assd›e
[
j
]->
avîage
,

505 
sc
->
övavgcov
);

506 if(
d
[
i
][
j
] > 
max
) max = d[i][j];

510 
n
 = 1;Ç <
n˛o£°
;Ç++) {

511 
mö
 = 
max
;

512 
mi
 = 
mj
 = -1;

513 
i
 = 0; i < 
	`NROWS
(
d
); i++) {

514 
j
 = 
i
+1; j < 
	`NCOLS
(
d
); j++) {

515 if(
d
[
i
][
j
] < 
mö
)

516 
mö
 = 
d
[
mi
=
i
][
mj
=
j
];

519 if(
mi
 == -1)

522 
	`¥ötf
("%2d) %10.10sÅo %10.10s d=%gÇstd=%g\n",

523 
n
,

524 
sc
->
˛assd›e
[
mi
]->
«me
,

525 
sc
->
˛assd›e
[
mj
]->
«me
,

526 
d
[
mi
][
mj
],

527 
	`sqπ
(
d
[
mi
][
mj
]));

529 
d
[
mi
][
mj
] = 
max
+1;

531 
	`¥ötf
("-----------\n");

532 
	`FªeM©rix
(
d
);

533 
	}
}

	@demos/nxscribble/sc.h

29 #i‚de‡
_SC_H_


31 
	#_SC_H_


	)

33 
	#MAXSCLASSES
 100

	)

35 
s˛assifõr
 *
	tsCœssifõr
;

36 
	tsCœssIndex
;

37 
s˛assd›e
 *
	tsCœssD›e
;

39 
	ss˛assd›e
 {

40 *
	m«me
;

41 
sCœssIndex
 
	mnumbî
;

42 
Ve˘‹
 
	mavîage
;

43 
M©rix
 
	msumcov
;

44 
	m√xam∂es
;

47 
	ss˛assifõr
 {

48 
	mn„©uªs
;

49 
	mn˛as£s
;

50 
sCœssD›e
 *
	m˛assd›e
;

52 
Ve˘‹
 
	m˙°
;

53 
Ve˘‹
 *
	mw
;

54 
M©rix
 
	mövavgcov
;

57 
sCœssifõr
 
sNewCœssifõr
();

58 
sCœssifõr
 
sRód
();

59 
sWrôe
();

60 
sFªeCœssifõr
();

61 
sAddExam∂e
();

62 
sRemoveExam∂e
();

63 
sD⁄eAddög
();

64 
sCœssD›e
 
sCœssify
();

65 
sCœssD›e
 
sCœssifyAD
();

66 
sCœssD›e
 
sCœssNameLookup
();

67 
MahÆ™obisDi°™˚
();

68 
FixCœssifõr
();

69 
sDumpCœssifõr
();

70 
sDi°™˚s
();

	@demos/nxscribble/scrib.h

25 
	#MWINCLUDECOLORS


	)

26 
	~"«no-X.h
"

27 
	~"hª_≠i.h
"

28 
	~"li_ªcognizî.h
"

30 
	#CS_LETTERS
 0

	)

31 
	#CS_DIGITS
 1

	)

32 
	#CS_PUNCTUATION
 2

	)

34 
	#NUM_RECS
 3

	)

35 
	#DEFAULT_REC_DIR
 "˛assifõrs"

	)

36 #i‚de‡
REC_DEFAULT_USER_DIR


37 
	#REC_DEFAULT_USER_DIR
 "bö"

	)

41 
	#DEFAULT_LETTERS_FILE
 "Àâîs.˛"

	)

42 
	#DEFAULT_DIGITS_FILE
 "digôs.˛"

	)

43 
	#DEFAULT_PUNC_FILE
 "punc.˛"

	)

44 
	#ªc_«me
 "libli_ªcog.so"

	)

46 
	sgøffôi
 {

47 
ªcognizî
 
	mªc
[3];

49 
	m˛dú
[200];

51 
li_ªcognizî_åaö
 
	mªc_åaö
;

52 
li_ªcognizî_gëCœs£s
 
	mªc_gëCœs£s
;

60 
GR_WINDOW_ID
 
	mwö
;

61 
GR_GC_ID
 
	mgc
;

62 
GR_BOOL
 
	mdown
;

64 
GR_POINT
 *
	m±
;

65 
	mµasize
;

66 
≥n_°roke
 
	mps
;

67 
gøffôi
 
	mgøf
;

68 
	mˇpsLock
;

69 
	mpuncShi·
;

70 
	mtmpShi·
;

71 
	m˘æShi·
;

72 
	mcurCh¨Së
;

73 
	mœ°ch¨
;

74 } 
	tS¸ibbÀRec
, *
	tS¸ibbÀWidgë
;

76 
S¸ibbÀWidgë
 
¸óã_s¸ibbÀ
();

77 
de°roy_s¸ibbÀ
(
S¸ibbÀWidgë
 
w
);

78 
A˘i⁄Sèπ
(
S¸ibbÀWidgë
 
w
, 
x
, 
y
);

79 
A˘i⁄Move
(
S¸ibbÀWidgë
 
w
, 
x
, 
y
);

80 
A˘i⁄End
(
S¸ibbÀWidgë
 
w
, 
x
, 
y
);

81 
Redi•œy
 (
S¸ibbÀWidgë
 
w
);

	@demos/nxscribble/scribwidget.c

28 
	~<°dio.h
>

29 
	~<°rög.h
>

30 
	~"s¸ib.h
"

32 
S¸ibbÀRec
 
	gs¸ib
;

33 *
	gcurmsg
 = 
NULL
;

35 *
	g˛_«me
[3] = {
DEFAULT_LETTERS_FILE
,

36 
DEFAULT_DIGITS_FILE
,

37 
DEFAULT_PUNC_FILE
};

39 
gøffôi_lﬂd_ªcognizîs
(
gøffôi
 *
pg
);

40 
Recognize
 (
S¸ibbÀWidgë
 
w
);

41 
ShowMode
 (
S¸ibbÀWidgë
 
w
);

44 
	$Re£tSåoke
 (
S¸ibbÀWidgë
 
w
)

46 
w
->
ps
.
ps_≈ts
 = 0;

47 
w
->
ps
.
ps_n°©e
 = 0;

48 
w
->
ps
.
ps_å™s
 = 0;

49 
w
->
ps
.
ps_°©e
 = 0;

50 
w
->
œ°ch¨
 = 0;

51 
curmsg
 = 
NULL
;

52 
	`ShowMode
(
w
);

53 
	}
}

64 
	$Di•œyLa°
 (
S¸ibbÀWidgë
 
w
)

66 
≈t
;

68 
≈t
 = 
w
->
ps
.
ps_≈ts
;

69 i‡(
≈t
 > 2)

70 
≈t
 = 2;

71 
	`GrDøwLöes
(
w
->
wö
, w->
gc
, w->
±
 + (w->
ps
.
ps_≈ts
 - 
≈t
),Çpt);

72 
	}
}

75 
	$AddPoöt
 (
S¸ibbÀWidgë
 
w
, 
x
, 
y
)

77 
≥n_poöt
 *
µa
;

78 
GR_POINT
 *
±
;

79 
µasize
;

81 i‡(
w
->
ps
.
ps_≈ts
 =w->
µasize
)

83 
µasize
 = 
w
->ppasize + 100;

84 
µa
 = 
	`mÆloc
 (( (
≥n_poöt
Ë+  (
GR_POINT
)Ë* 
µasize
);

85 i‡(!
µa
)

87 
±
 = (
GR_POINT
 *Ë(
µa
 + 
µasize
);

88 
	`mem˝y
 (
µa
, 
w
->
ps
.
ps_±s
, w->
µasize
 *  (
≥n_poöt
));

89 
	`mem˝y
 (
±
, 
w
->±, w->
µasize
 *  (
GR_POINT
));

90 
	`‰ì
 (
w
->
ps
.
ps_±s
);

91 
w
->
ps
.
ps_±s
 = 
µa
;

92 
w
->
±
 =Öt;

93 
w
->
µasize
 =Öpasize;

95 
µa
 = &
w
->
ps
.
ps_±s
[w->ps.
ps_≈ts
];

96 
µa
->
x
 = x;

97 
µa
->
y
 = y;

99 
±
 = &
w
->±[w->
ps
.
ps_≈ts
];

100 
±
->
x
 = x;

101 
±
->
y
 = y;

103 
w
->
ps
.
ps_≈ts
++;

105 
	`Di•œyLa°
 (
w
);

106 
	}
}

108 
S¸ibbÀWidgë


109 
	$¸óã_s¸ibbÀ
()

111 
S¸ibbÀWidgë
 
√w
 = (S¸ibbÀWidgë)&
s¸ib
;

112 
GR_WM_PROPERTIES
 
¥›s
;

114 
√w
->
ˇpsLock
 = 0;

115 
√w
->
puncShi·
 = 0;

116 
√w
->
tmpShi·
 = 0;

117 
√w
->
˘æShi·
 = 0;

118 
√w
->
curCh¨Së
 = 
CS_LETTERS
;

119 
√w
->
œ°ch¨
 = 0;

120 
√w
->
down
 = 
GR_FALSE
;

123 
	`gøffôi_lﬂd_ªcognizîs
 (&
√w
->
gøf
);

125 
√w
->
µasize
 = 0;

126 
√w
->
ps
.
ps_±s
 = 0;

127 
√w
->
±
 = 0;

129 
√w
->
wö
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
,

131 0, 
	`GrGëSysCﬁ‹
(
GR_COLOR_APPWINDOW
), 
BLACK
);

133 
¥›s
.
Êags
 = 
GR_WM_FLAGS_TITLE
 | 
GR_WM_FLAGS_PROPS
;

134 
¥›s
.¥›†
GR_WM_PROPS_NOFOCUS
 | 
GR_WM_PROPS_BORDER
 |

135 
GR_WM_PROPS_CAPTION
 | 
GR_WM_PROPS_CLOSEBOX
;

136 
¥›s
.
tôÀ
 = "nxScribble";

137 
	`GrSëWMPr›îtõs
(
√w
->
wö
, &
¥›s
);

139 
	`GrSñe˘Evíts
(
√w
->
wö
, 
GR_EVENT_MASK_BUTTON_DOWN
 |

140 
GR_EVENT_MASK_BUTTON_UP
 | 
GR_EVENT_MASK_MOUSE_MOTION
 |

141 
GR_EVENT_MASK_KEY_DOWN
 |

142 
GR_EVENT_MASK_EXPOSURE
 | 
GR_EVENT_MASK_CLOSE_REQ
);

143 
	`GrM≠Wödow
(
√w
->
wö
);

145 
√w
->
gc
 = 
	`GrNewGC
();

146 
	`GrSëGCF‹eground
(
√w
->
gc
, 
	`GrGëSysCﬁ‹
(
GR_COLOR_APPTEXT
));

147 
	`GrSëGCBackground
(
√w
->
gc
, 
	`GrGëSysCﬁ‹
(
GR_COLOR_APPWINDOW
));

148 
	`GrSëGCF⁄t
(
√w
->
gc
, 
	`GrCª©eF⁄t
(
GR_FONT_SYSTEM_FIXED
, 0, 
NULL
));

150 
	`Re£tSåoke
 (
√w
);

151  
√w
;

152 
	}
}

155 
	$de°roy_s¸ibbÀ
(
S¸ibbÀWidgë
 
w
)

157 
	`GrDe°royWödow
(
w
->
wö
);

158 
	`GrDe°royGC
(
w
->
gc
);

159 
	`‰ì
 (
w
->
ps
.
ps_±s
);

160 
	}
}

163 
	$Redi•œy
 (
S¸ibbÀWidgë
 
w
)

166 
	`ShowMode
(
w
);

167 
	}
}

170 
	$A˘i⁄Sèπ
 (
S¸ibbÀWidgë
 
w
, 
x
, 
y
)

172 
	`GrRai£Wödow
(
w
->
wö
);

173 
	`Re£tSåoke
 (
w
);

174 
w
->
down
 = 
GR_TRUE
;

175 
	`AddPoöt
 (
w
, 
x
, 
y
);

176 
	}
}

179 
	$A˘i⁄Move
 (
S¸ibbÀWidgë
 
w
, 
x
, 
y
)

181 i‡(
w
->
down
)

182 
	`AddPoöt
 (
w
, 
x
, 
y
);

183 
	}
}

186 
	$A˘i⁄End
 (
S¸ibbÀWidgë
 
w
, 
x
, 
y
)

188 
	`AddPoöt
 (
w
, 
x
, 
y
);

189 
w
->
down
 = 
GR_FALSE
;

190 
	`Recognize
 (
w
);

191 
	}
}

195 
	$SídKey
(
S¸ibbÀWidgë
 
w
, 
ch
)

197 
GR_WINDOW_ID
 
wö
 = 
	`GrGëFocus
();

200 
	`GrInje˘KeybﬂrdEvít
(
wö
, 
ch
, 0, 0, 1);

201 
	`GrInje˘KeybﬂrdEvít
(
wö
, 
ch
, 0, 0, 0);

202 
	}
}

214 
	$gøffôi_lﬂd_ªcognizîs
(
gøffôi
 *
pg
)

216 
boﬁ
 
usögDeÁu…
;

218 * 
homedú
;

220 
i
;

221 
ªc_‚
 *
‚s
;

225 
i
 = 0; i < 
NUM_RECS
; i++) {

227 
pg
->
ªc
[
i
] = 
	`ªcognizî_lﬂd
(
DEFAULT_REC_DIR
, 
ªc_«me
, 
NULL
);

228 i‡(
pg
->
ªc
[
i
] =
NULL
) {

229 
	`Ârötf
(
°dîr
,"Eº‹ÜﬂdögÑecognizî from %s.", 
DEFAULT_REC_DIR
);

232 i‡((* (*)(
pg
->
ªc
[
i
])) != 0xfeed) {

233 
	`Ârötf
(
°dîr
,"Error inÑecognizer_magic.");

240 i‡–(
homedú
 = (*)
	`gëív
("HOME")Ë=
NULL
 ) {

242 
	`°r˝y
(
pg
->
˛dú
, 
REC_DEFAULT_USER_DIR
);

243 
usögDeÁu…
 = 
åue
;

246 
	`°r˝y
(
pg
->
˛dú
, 
homedú
);

247 
	`°rˇt
(
pg
->
˛dú
, "/");

248 
	`°rˇt
(
pg
->
˛dú
, 
CLASSIFIER_DIR
);

249 
usögDeÁu…
 = 
Ál£
;

254 
i
 = 0; i < 
NUM_RECS
; i++) {

255 
ªc_ªtu∫
;

256 *
s
;

258 
ªc_ªtu∫
 = 
	`ªcognizî_lﬂd_°©e
(
pg
->
ªc
[
i
],Ög->
˛dú
, 
˛_«me
[i]);

259 i‡((
ªc_ªtu∫
 =-1Ë&& (
usögDeÁu…
 =
Ál£
)) {

260 
	`Ârötf
(
°dîr
,

262 
pg
->
˛dú
, 
˛_«me
[
i
],

263 (
s
 = 
	`ªcognizî_îr‹
(
pg
->
ªc
[
i
])) ? s : "(none)");

264 
ªc_ªtu∫
 = 
	`ªcognizî_lﬂd_°©e
(
pg
->
ªc
[
i
],

265 
REC_DEFAULT_USER_DIR
, 
˛_«me
[
i
]);

267 i‡(
ªc_ªtu∫
 == -1) {

268 
	`Ârötf
(
°dîr
, "UnableÅoÜoad default classifier file %s.\nOriginalÉrror: %s\n",

269 
˛_«me
[
i
],

270 (
s
 = 
	`ªcognizî_îr‹
(
pg
->
ªc
[
i
])) ? s : "(none)");

277 
‚s
 = 
	`ªcognizî_gë_exãnsi⁄_fun˘i⁄s
(
pg
->
ªc
[
CS_LETTERS
]);

278 i‡(
‚s
 =
NULL
) {

279 
	`Ârötf
(
°dîr
, "LI Recognizer Training:NoÉxtension functions!");

284 if–(
pg
->
ªc_åaö
 = (
li_ªcognizî_åaö
)
‚s
[
LI_TRAIN
]Ë=
NULL
 ) {

285 
	`Ârötf
(
°dîr
,

287 i‡(
‚s
 !
NULL
) {

288 
	`‰ì
(
‚s
);

293 if–(
pg
->
ªc_gëCœs£s
 = (
li_ªcognizî_gëCœs£s
)
‚s
[
LI_GET_CLASSES
]Ë=
NULL
 ) {

294 
	`Ârötf
(
°dîr
,

296 i‡(
‚s
 !
NULL
) {

297 
	`‰ì
(
‚s
);

301 
	`‰ì
(
‚s
);

303 
	}
}

306 
	$msg
(*
°r
)

308 
curmsg
 = 
°r
;

309 
	}
}

312 
	$ShowMode
 (
S¸ibbÀWidgë
 
w
)

314 *
mode
;

315 
buf
[32];

317 i‡(
w
->
˘æShi·
)

318 
mode
 = "^C";

319 i‡(
w
->
puncShi·
)

320 
mode
 = "#&^";

321 i‡(
w
->
curCh¨Së
 =
CS_DIGITS
)

322 
mode
 = "123";

323 i‡(
w
->
ˇpsLock
)

324 
mode
 = "ABC";

325 i‡(
w
->
tmpShi·
)

326 
mode
 = "Abc";

328 
mode
 = "abc";

330 i‡(
curmsg
)

331 
	`•rötf
(
buf
, "%† %s", 
mode
, 
curmsg
);

332 i‡(
w
->
œ°ch¨
 > ' ')

333 
	`•rötf
(
buf
, "%† %c", 
mode
, 
w
->
œ°ch¨
);

334 
	`•rötf
(
buf
, "%s", 
mode
);

335 
	`GrCÀ¨Wödow
(
w
->
wö
, 
GR_FALSE
);

336 
	`GrText
(
w
->
wö
, w->
gc
, 70, 0, 
buf
, 
	`°æí
(buf), 
GR_TFTOP
);

337 
	}
}

340 
	$do_ªcognize
(
gøffôi
 *
pg
, 
≥n_°roke
 *
ps
, 
ch¨£t
)

342 
ªc_ch¨
;

343 
ƒë
;

344 
ªc_Æã∫©ive
 *
ªt
;

346 
ªc_ch¨
 = 
	`ªcognizî_å™¶©e
(
pg
->
ªc
[
ch¨£t
], 1, 
ps
, 
Ál£
,

347 &
ƒë
, &
ªt
);

348 i‡(
ªc_ch¨
 != -1) {

349 
	`dñëe_ªc_Æã∫©ive_¨øy
(
ƒë
, 
ªt
, 
Ál£
);

351  
ªc_ch¨
;

352 
	}
}

354 
	tKeySym
;

357 
	$Recognize
 (
S¸ibbÀWidgë
 
w
)

359 
gøffôi
 *
gøf
 = &
w
->graf;

360 
≥n_°roke
 *
ps
 = &
w
->ps;

361 
KeySym
 
keysym
;

362 
GR_BOOL
 
c⁄åﬁ
;

363 
c
;

365 i‡(
ps
->
ps_≈ts
 == 0)

368 
w
->
œ°ch¨
 = 0;

370 
c
 = 
	`do_ªcognize
(
gøf
, 
ps
, 
w
->
puncShi·
 ? 
CS_PUNCTUATION
 : w->
curCh¨Së
);

374 
c
) {

376 
	`msg
("[Error]");

377 
w
->
tmpShi·
 = 0;

378 
w
->
puncShi·
 = 0;

379 
w
->
˘æShi·
 = 0;

380 
	`ShowMode
 (
w
);

383 
	`msg
("[Capslock]");

384 
w
->
ˇpsLock
 = !w->capsLock;

385 
	`ShowMode
 (
w
);

388 i‡(
w
->
curCh¨Së
 =
CS_DIGITS
) {

389 
w
->
curCh¨Së
 = 
CS_LETTERS
;

390 
	`msg
("[Letters]");

392 
w
->
curCh¨Së
 = 
CS_DIGITS
;

393 
	`msg
("[Digits]");

395 
w
->
tmpShi·
 = 0;

396 
w
->
puncShi·
 = 0;

397 
w
->
˘æShi·
 = 0;

398 
	`ShowMode
 (
w
);

401 
	`msg
("[Ctrlshift]");

402 
w
->
˘æShi·
 = !w->ctrlShift;

403 
w
->
tmpShi·
 = 0;

404 
w
->
puncShi·
 = 0;

405 
	`ShowMode
 (
w
);

408 
w
->
tmpShi·
 = !w->tmpShift;

409 i‡(
w
->
tmpShi·
Ë
	`msg
("[Shift]"); msg("[Unshift]");

410 
w
->
puncShi·
 = 0;

411 
w
->
˘æShi·
 = 0;

412 
	`ShowMode
 (
w
);

415 
c⁄åﬁ
 = 
GR_FALSE
;

416 
c
) {

418 
	`msg
("[Space]");

419 
keysym
 = ' ';

422 
	`msg
("[Backspace]");

423 
keysym
 = '\b';

426 
	`msg
("[Return]");

427 
keysym
 = '\r';

430 i‡(! 
w
->
puncShi·
) {

431 
	`msg
("[Puncshift]");

432 
w
->
puncShi·
 = 1;

433 
w
->
˘æShi·
 = 0;

434 
w
->
tmpShi·
 = 0;

435 
	`ShowMode
 (
w
);

438 
w
->
puncShi·
 = 0;

439 
	`ShowMode
 (
w
);

441 
keysym
 = '.';

444 i‡('A' <
c
 && c <= 'Z') {

445 
	`msg
("[Notimp]");

446 
	`ShowMode
 (
w
);

449 
keysym
 = (
KeySym
Ë
c
;

450 i‡(
w
->
˘æShi·
)

452 
c⁄åﬁ
 = 
GR_TRUE
;

453 
w
->
˘æShi·
 = 0;

454 i‡(
c
 < 'a' || 'z' < c)

456 
	`ShowMode
 (
w
);

460 i‡((
w
->
ˇpsLock
 && !w->
tmpShi·
) ||

461 (!
w
->
ˇpsLock
 && w->
tmpShi·
))

463 
keysym
 = keysym-'a'+'A';

465 
w
->
tmpShi·
 = 0;

466 
w
->
puncShi·
 = 0;

467 
	`ShowMode
(
w
);

470 i‡(
c⁄åﬁ
)

471 
keysym
 &= 0x1f;

472 
w
->
œ°ch¨
 = 
keysym
;

473 
	`ShowMode
(
w
);

474 
	`SídKey
(
w
, 
keysym
);

477 
	}
}

	@demos/nxscribble/util.c

19 
	~"utû.h
"

20 
	~<°dio.h
>

21 
	~<˘y≥.h
>

22 
	~<£tjmp.h
>

23 
	~<°rög.h
>

26 * 
li_îr_msg
;

27 
	gîr_msg
[
BUFSIZ
];

34 
	$myÆloc
(
nôems
, 
ôemsize
, 
ty≥«me
)

35 *
ty≥«me
;

37 
byãs
 = 
nôems
 * 
ôemsize
;

38 *
p
 = 
	`mÆloc
(
byãs
);

39 if(
p
 =
NULL
)

40 
	`îr‹
("Can't get mem for %d %s's (each %d bytes, %dÅotal bytes)",

41 
nôems
, 
ty≥«me
, 
ôemsize
, 
byãs
);

42  
p
;

43 
	}
}

50 
	$sc›y
(
s
)

51 *
s
;

53 *
p
 = 
	`Æloˇã
(
	`°æí
(
s
) + 1, );

54 (Ë
	`°r˝y
(
p
, 
s
);

55  
p
;

56 
	}
}

64 
	$îr‹
(
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
)

65 *
a
;

67 
	`•rötf
(
îr_msg
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
);

68 
li_îr_msg
 = 
îr_msg
;

69 
	}
}

78 
	$exô_îr‹
(
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
)

79 *
a
;

81 
	`Ârötf
(
°dîr
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
, 
j
);

82 
	`exô
(1);

83 
	}
}

90 
	gDebugFœg
 = 1;

93 
	$debug
(
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
)

94 *
a
;

96 if(
DebugFœg
)

97 
	`Ârötf
(
°dîr
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
);

98 
	}
}

100 
	#uµî
(
c
Ë(
	`i¶owî
(cË? 
	`touµî
(cË: (c))

	)

103 
	$uc°rcmp
(
s1
, 
s2
)

104 *
s1
, *
s2
;

106 
i
;

108 ; *
s1
 && *
s2
; s1++, s2++)

109 if–(
i
 = (
	`uµî
(*
s1
Ë- uµî(*
s2
))) != 0)

110  
i
;

111  (
	`uµî
(*
s1
Ë- uµî(*
s2
));

112 
	}
}

114 
	#NSTRINGS
 3

	)

117 
	$ãmp°rög
()

119 
°rögs
[
NSTRINGS
][100];

120 
ödex
;

121 if(
ödex
 >
NSTRINGS
) index = 0;

122  
°rögs
[
ödex
++];

123 
	}
}

	@demos/nxscribble/util.h

30 
	#Æloˇã
(
n
, 
ty≥
) \

31 ((
ty≥
 *Ë
	`myÆloc
(
n
, —y≥), "ty≥"))

	)

37 
	#STREQ
(
a
,
b
Ë–! 
	`°rcmp
◊,bË)

	)

39 *
myÆloc
();

40 *
sc›y
();

41 
debug
();

43 
îr‹
();

44 
exô_îr‹
();

45 
uc°rcmp
();

46 *
ãmp°rög
();

53 #ifde‡
unix


54 
	#GRAPHICS


	)

57 #i‚de‡
unix


61 #ifde‡
__ECOS


62 *
°rdup
(*);

64 
	#bc›y
 
movmem


	)

66 
	#ödex
 
°rchr


	)

67 
	#rödex
 
°ºchr


	)

	@demos/nxscribble/zdebug.h

13 
_zdebug_Êag
[];

15 
	#Z
(
f
Ëif(
_zdebug_Êag
[f] > 0)

	)

16 
	#ZZ
(
f
Ëif(
_zdebug_Êag
[f] >2)

	)

17 
	#ZZZ
(
f
Ëif(
_zdebug_Êag
[f] >3)

	)

18 
	#ZZZZ
(
f
Ëif(
_zdebug_Êag
[f] >4)

	)

20 
kludge
[];

	@demos/test/test.c

6 
	~<°dio.h
>

7 
	~<°dlib.h
>

9 #i‚de‡
__PACIFIC__


10 
	~<î∫o.h
>

11 
	~<sys/ty≥s.h
>

14 #i‡
UNIX


15 
	~<uni°d.h
>

16 
	~<sys/time.h
>

18 #i‡
ELKS


19 
	~<löuxmt/posix_ty≥s.h
>

20 
	~<löuxmt/time.h
>

22 
	~"wödows.h
"

23 
	~"wöã∫.h
"

25 
	gkeyb_fd
;

26 
	gmou£_fd
;

29 
	$maö
(
ac
,**
av
)

31 i‡((
keyb_fd
 = 
	`GdO≥nKeybﬂrd
()) < 0) {

32 
	`PRINT_ERROR
("Cannot initialise keyboard");

36 i‡((
mou£_fd
 = 
	`GdO≥nMou£
()) < 0) {

37 
	`PRINT_ERROR
("Cannot initialise mouse");

38 
	`GdClo£Keybﬂrd
();

43 
	`GsSñe˘
();

46 
	}
}

49 
	$GsTîmö©e
()

51 
	`GdClo£Mou£
();

52 
	`GdClo£Keybﬂrd
();

53 
	`exô
(0);

54 
	}
}

56 #i‡
MSDOS


58 
	$GsSñe˘
()

61 if(
mou£dev
.
	`Pﬁl
())

62 
	`GsCheckMou£Evít
();

65 if(
kbddev
.
	`Pﬁl
())

66 
	`GsCheckKeybﬂrdEvít
();

68 
	}
}

71 #i‡
UNIX
 && 
deföed
(
HAVESELECT
)

73 
	$GsSñe˘
()

75 
fd_£t
 
rfds
;

76 
e
;

77 
timevÆ
 
to
;

78 
n
;

81 
	`FD_ZERO
(&
rfds
);

82 
	`FD_SET
(
mou£_fd
, &
rfds
);

83 
n
 = 
mou£_fd
;

84 
	`FD_SET
(
keyb_fd
, &
rfds
);

85 if(
keyb_fd
 > 
n
)

86 
n
 = 
keyb_fd
;

93 
to
.
tv_£c
 = 0L;

94 
to
.
tv_£c
 = 1L;

95 
to
.
tv_u£c
 = 0L;

96 
to
.
tv_u£c
 = 10000L;

99 if((
e
 = 
	`£À˘
(
n
+1, &
rfds
, 
NULL
, NULL, &
to
)) > 0) {

102 if(
	`FD_ISSET
(
mou£_fd
, &
rfds
))

103 
	`GsCheckMou£Evít
();

106 if(
	`FD_ISSET
(
keyb_fd
, &
rfds
))

107 
	`GsCheckKeybﬂrdEvít
();

110 if(!
e
) {

111 
	`¥ötf
("select()Åimeout\n");

113 if(
î∫o
 !
EINTR
)

114 
	`PRINT_ERROR
("Select() call in main failed");

115 
	}
}

123 
BOOL
 
	$GsCheckMou£Evít
()

125 
COORD
 
roŸx
;

126 
COORD
 
roŸy
;

127 
BUTTON
 
√wbuâ⁄s
;

128 
mou£°©us
;

131 
mou£°©us
 = 
	`GdRódMou£
(&
roŸx
, &
roŸy
, &
√wbuâ⁄s
);

132 if(
mou£°©us
 < 0) {

133 
	`¥ötf
("MouseÉrror\n");

134  
FALSE
;

135 } if(
mou£°©us
) {

136 
	`¥ötf
("mou£ %d,%d,%d\n", 
roŸx
, 
roŸy
, 
√wbuâ⁄s
);

137  
TRUE
;

139  
FALSE
;

140 
	}
}

147 
BOOL
 
	$GsCheckKeybﬂrdEvít
()

149 
ch
;

150 
MODIFIER
 
modifõrs
;

151 
key°©us
;

154 
key°©us
 = 
	`GdRódKeybﬂrd
(&
ch
, &
modifõrs
);

155 if(
key°©us
 < 0) {

156 if(
key°©us
 == -2)

157 
	`GsTîmö©e
();

158 
	`¥ötf
("KbdÉrror\n");

159  
FALSE
;

160 } if(
key°©us
) {

161 
	`¥ötf
("kbd '%c',%d\n", 
ch
, 
modifõrs
);

162  
TRUE
;

164  
FALSE
;

165 
	}
}

	@demos/tuxchess/board.c

9 
	~"defs.h
"

10 
	~"d©a.h
"

11 
	~"¥Ÿos.h
"

16 
	$öô
()

18 
i
;

20 
i
 = 0; i < 64; ++i) {

21 
cﬁ‹
[
i
] = 
öô_cﬁ‹
[i];

22 
põ˚
[
i
] = 
öô_põ˚
[i];

24 
side
 = 
LIGHT
;

25 
xside
 = 
DARK
;

26 
ˇ°À
 = 15;

27 
ï
 = -1;

28 
fi·y
 = 0;

29 
∂y
 = 0;

30 
h∂y
 = 0;

31 
fú°_move
[0] = 0;

32 
	}
}

39 
BOOL
 
	$ö_check
(
s
)

41 
i
;

43 
i
 = 0; i < 64; ++i)

44 i‡(
põ˚
[
i
] =
KING
 && 
cﬁ‹
[i] =
s
)

45  
	`©èck
(
i
, 
s
 ^ 1);

46  
TRUE
;

47 
	}
}

53 
BOOL
 
	$©èck
(
sq
, 
s
)

55 
i
, 
j
, 
n
;

57 
i
 = 0; i < 64; ++i)

58 i‡(
cﬁ‹
[
i
] =
s
) {

59 i‡(
põ˚
[
i
] =
PAWN
) {

60 i‡(
s
 =
LIGHT
) {

61 i‡(
	`COL
(
i
Ë!0 && i - 9 =
sq
)

62  
TRUE
;

63 i‡(
	`COL
(
i
Ë!7 && i - 7 =
sq
)

64  
TRUE
;

67 i‡(
	`COL
(
i
Ë!0 && i + 7 =
sq
)

68  
TRUE
;

69 i‡(
	`COL
(
i
Ë!7 && i + 9 =
sq
)

70  
TRUE
;

74 
j
 = 0; j < 
off£ts
[
põ˚
[
i
]]; ++j)

75 
n
 = 
i
;;) {

76 
n
 = 
maûbox
[
maûbox64
[n] + 
off£t
[
põ˚
[
i
]][
j
]];

77 i‡(
n
 == -1)

79 i‡(
n
 =
sq
)

80  
TRUE
;

81 i‡(
cﬁ‹
[
n
] !
EMPTY
)

83 i‡(!
¶ide
[
põ˚
[
i
]])

87  
FALSE
;

88 
	}
}

97 
	$gí
()

99 
i
, 
j
, 
n
;

102 
fú°_move
[
∂y
 + 1] = first_move[ply];

104 
i
 = 0; i < 64; ++i)

105 i‡(
cﬁ‹
[
i
] =
side
) {

106 i‡(
põ˚
[
i
] =
PAWN
) {

107 i‡(
side
 =
LIGHT
) {

108 i‡(
	`COL
(
i
Ë!0 && 
cﬁ‹
[ò- 9] =
DARK
)

109 
	`gí_push
(
i
, i - 9, 17);

110 i‡(
	`COL
(
i
Ë!7 && 
cﬁ‹
[ò- 7] =
DARK
)

111 
	`gí_push
(
i
, i - 7, 17);

112 i‡(
cﬁ‹
[
i
 - 8] =
EMPTY
) {

113 
	`gí_push
(
i
, i - 8, 16);

114 i‡(
i
 >48 && 
cﬁ‹
[ò- 16] =
EMPTY
)

115 
	`gí_push
(
i
, i - 16, 24);

119 i‡(
	`COL
(
i
Ë!0 && 
cﬁ‹
[ò+ 7] =
LIGHT
)

120 
	`gí_push
(
i
, i + 7, 17);

121 i‡(
	`COL
(
i
Ë!7 && 
cﬁ‹
[ò+ 9] =
LIGHT
)

122 
	`gí_push
(
i
, i + 9, 17);

123 i‡(
cﬁ‹
[
i
 + 8] =
EMPTY
) {

124 
	`gí_push
(
i
, i + 8, 16);

125 i‡(
i
 <15 && 
cﬁ‹
[ò+ 16] =
EMPTY
)

126 
	`gí_push
(
i
, i + 16, 24);

131 
j
 = 0; j < 
off£ts
[
põ˚
[
i
]]; ++j)

132 
n
 = 
i
;;) {

133 
n
 = 
maûbox
[
maûbox64
[n] + 
off£t
[
põ˚
[
i
]][
j
]];

134 i‡(
n
 == -1)

136 i‡(
cﬁ‹
[
n
] !
EMPTY
) {

137 i‡(
cﬁ‹
[
n
] =
xside
)

138 
	`gí_push
(
i
, 
n
, 1);

141 
	`gí_push
(
i
, 
n
, 0);

142 i‡(!
¶ide
[
põ˚
[
i
]])

148 i‡(
side
 =
LIGHT
) {

149 i‡(
ˇ°À
 & 1)

150 
	`gí_push
(
E1
, 
G1
, 2);

151 i‡(
ˇ°À
 & 2)

152 
	`gí_push
(
E1
, 
C1
, 2);

155 i‡(
ˇ°À
 & 4)

156 
	`gí_push
(
E8
, 
G8
, 2);

157 i‡(
ˇ°À
 & 8)

158 
	`gí_push
(
E8
, 
C8
, 2);

162 i‡(
ï
 != -1) {

163 i‡(
side
 =
LIGHT
) {

164 i‡(
	`COL
(
ï
Ë!0 && 
cﬁ‹
[ï + 7] =
LIGHT
 && 
põ˚
[ï + 7] =
PAWN
)

165 
	`gí_push
(
ï
 + 7,Ép, 21);

166 i‡(
	`COL
(
ï
Ë!7 && 
cﬁ‹
[ï + 9] =
LIGHT
 && 
põ˚
[ï + 9] =
PAWN
)

167 
	`gí_push
(
ï
 + 9,Ép, 21);

170 i‡(
	`COL
(
ï
Ë!0 && 
cﬁ‹
[ï - 9] =
DARK
 && 
põ˚
[ï - 9] =
PAWN
)

171 
	`gí_push
(
ï
 - 9,Ép, 21);

172 i‡(
	`COL
(
ï
Ë!7 && 
cﬁ‹
[ï - 7] =
DARK
 && 
põ˚
[ï - 7] =
PAWN
)

173 
	`gí_push
(
ï
 - 7,Ép, 21);

176 
	}
}

183 
	$gí_ˇps
()

185 
i
, 
j
, 
n
;

187 
fú°_move
[
∂y
 + 1] = first_move[ply];

188 
i
 = 0; i < 64; ++i)

189 i‡(
cﬁ‹
[
i
] =
side
) {

190 i‡(
põ˚
[
i
]==
PAWN
) {

191 i‡(
side
 =
LIGHT
) {

192 i‡(
	`COL
(
i
Ë!0 && 
cﬁ‹
[ò- 9] =
DARK
)

193 
	`gí_push
(
i
, i - 9, 17);

194 i‡(
	`COL
(
i
Ë!7 && 
cﬁ‹
[ò- 7] =
DARK
)

195 
	`gí_push
(
i
, i - 7, 17);

196 i‡(
i
 <15 && 
cﬁ‹
[ò- 8] =
EMPTY
)

197 
	`gí_push
(
i
, i - 8, 16);

199 i‡(
side
 =
DARK
) {

200 i‡(
	`COL
(
i
Ë!0 && 
cﬁ‹
[ò+ 7] =
LIGHT
)

201 
	`gí_push
(
i
, i + 7, 17);

202 i‡(
	`COL
(
i
Ë!7 && 
cﬁ‹
[ò+ 9] =
LIGHT
)

203 
	`gí_push
(
i
, i + 9, 17);

204 i‡(
i
 >48 && 
cﬁ‹
[ò+ 8] =
EMPTY
)

205 
	`gí_push
(
i
, i + 8, 16);

209 
j
 = 0; j < 
off£ts
[
põ˚
[
i
]]; ++j)

210 
n
 = 
i
;;) {

211 
n
 = 
maûbox
[
maûbox64
[n] + 
off£t
[
põ˚
[
i
]][
j
]];

212 i‡(
n
 == -1)

214 i‡(
cﬁ‹
[
n
] !
EMPTY
) {

215 i‡(
cﬁ‹
[
n
] =
xside
)

216 
	`gí_push
(
i
, 
n
, 1);

219 i‡(!
¶ide
[
põ˚
[
i
]])

223 i‡(
ï
 != -1) {

224 i‡(
side
 =
LIGHT
) {

225 i‡(
	`COL
(
ï
Ë!0 && 
cﬁ‹
[ï + 7] =
LIGHT
 && 
põ˚
[ï + 7] =
PAWN
)

226 
	`gí_push
(
ï
 + 7,Ép, 21);

227 i‡(
	`COL
(
ï
Ë!7 && 
cﬁ‹
[ï + 9] =
LIGHT
 && 
põ˚
[ï + 9] =
PAWN
)

228 
	`gí_push
(
ï
 + 9,Ép, 21);

231 i‡(
	`COL
(
ï
Ë!0 && 
cﬁ‹
[ï - 9] =
DARK
 && 
põ˚
[ï - 9] =
PAWN
)

232 
	`gí_push
(
ï
 - 9,Ép, 21);

233 i‡(
	`COL
(
ï
Ë!7 && 
cﬁ‹
[ï - 7] =
DARK
 && 
põ˚
[ï - 7] =
PAWN
)

234 
	`gí_push
(
ï
 - 7,Ép, 21);

237 
	}
}

249 
	$gí_push
(
‰om
, 
to
, 
bôs
)

251 
gí_t
 *
g
;

253 i‡(
bôs
 & 16) {

254 i‡(
side
 =
LIGHT
) {

255 i‡(
to
 <
H8
) {

256 
	`gí_¥omŸe
(
‰om
, 
to
, 
bôs
);

261 i‡(
to
 >
A1
) {

262 
	`gí_¥omŸe
(
‰om
, 
to
, 
bôs
);

267 
g
 = &
gí_d©
[
fú°_move
[
∂y
 + 1]++];

268 
g
->
m
.
b
.
‰om
 = ()from;

269 
g
->
m
.
b
.
to
 = ()to;

270 
g
->
m
.
b
.
¥omŸe
 = 0;

271 
g
->
m
.
b
.
bôs
 = ()bits;

272 i‡(
cﬁ‹
[
to
] !
EMPTY
)

273 
g
->
sc‹e
 = 1000000 + (
põ˚
[
to
] * 10Ë-Öõ˚[
‰om
];

275 
g
->
sc‹e
 = 
hi°‹y
[
‰om
][
to
];

276 
	}
}

282 
	$gí_¥omŸe
(
‰om
, 
to
, 
bôs
)

284 
i
;

285 
gí_t
 *
g
;

287 
i
 = 
KNIGHT
; i <
QUEEN
; ++i) {

288 
g
 = &
gí_d©
[
fú°_move
[
∂y
 + 1]++];

289 
g
->
m
.
b
.
‰om
 = ()from;

290 
g
->
m
.
b
.
to
 = ()to;

291 
g
->
m
.
b
.
¥omŸe
 = ()
i
;

292 
g
->
m
.
b
.
bôs
 = ()(bits | 32);

293 
g
->
sc‹e
 = 1000000 + (
i
 * 10);

295 
	}
}

302 
BOOL
 
	$makemove
(
move_byãs
 
m
)

307 i‡(
m
.
bôs
 & 2) {

308 
‰om
, 
to
;

310 i‡(
	`ö_check
(
side
))

311  
FALSE
;

312 
m
.
to
) {

314 i‡(
cﬁ‹
[
F1
] !
EMPTY
 || cﬁ‹[
G1
] != EMPTY ||

315 
	`©èck
(
F1
, 
xside
Ë||áâack(
G1
, xside))

316  
FALSE
;

317 
‰om
 = 
H1
;

318 
to
 = 
F1
;

321 i‡(
cﬁ‹
[
B1
] !
EMPTY
 || cﬁ‹[
C1
] !EMPTY || cﬁ‹[
D1
] != EMPTY ||

322 
	`©èck
(
C1
, 
xside
Ë||áâack(
D1
, xside))

323  
FALSE
;

324 
‰om
 = 
A1
;

325 
to
 = 
D1
;

328 i‡(
cﬁ‹
[
F8
] !
EMPTY
 || cﬁ‹[
G8
] != EMPTY ||

329 
	`©èck
(
F8
, 
xside
Ë||áâack(
G8
, xside))

330  
FALSE
;

331 
‰om
 = 
H8
;

332 
to
 = 
F8
;

335 i‡(
cﬁ‹
[
B8
] !
EMPTY
 || cﬁ‹[
C8
] !EMPTY || cﬁ‹[
D8
] != EMPTY ||

336 
	`©èck
(
C8
, 
xside
Ë||áâack(
D8
, xside))

337  
FALSE
;

338 
‰om
 = 
A8
;

339 
to
 = 
D8
;

342 
‰om
 = -1;

343 
to
 = -1;

346 
cﬁ‹
[
to
] = cﬁ‹[
‰om
];

347 
põ˚
[
to
] =Öõ˚[
‰om
];

348 
cﬁ‹
[
‰om
] = 
EMPTY
;

349 
põ˚
[
‰om
] = 
EMPTY
;

353 
hi°_d©
[
h∂y
].
m
.
b
 = m;

354 
hi°_d©
[
h∂y
].
ˇ±uª
 = 
põ˚
[()
m
.
to
];

355 
hi°_d©
[
h∂y
].
ˇ°À
 = castle;

356 
hi°_d©
[
h∂y
].
ï
 =Ép;

357 
hi°_d©
[
h∂y
].
fi·y
 = fifty;

358 ++
∂y
;

359 ++
h∂y
;

363 
ˇ°À
 &
ˇ°À_mask
[()
m
.
‰om
] & ca°À_mask[()m.
to
];

364 i‡(
m
.
bôs
 & 8) {

365 i‡(
side
 =
LIGHT
)

366 
ï
 = 
m
.
to
 + 8;

368 
ï
 = 
m
.
to
 - 8;

371 
ï
 = -1;

372 i‡(
m
.
bôs
 & 17)

373 
fi·y
 = 0;

375 ++
fi·y
;

378 
cﬁ‹
[()
m
.
to
] = 
side
;

379 i‡(
m
.
bôs
 & 32)

380 
põ˚
[()
m
.
to
] = m.
¥omŸe
;

382 
põ˚
[()
m
.
to
] =Öõ˚[()m.
‰om
];

383 
cﬁ‹
[()
m
.
‰om
] = 
EMPTY
;

384 
põ˚
[()
m
.
‰om
] = 
EMPTY
;

387 i‡(
m
.
bôs
 & 4) {

388 i‡(
side
 =
LIGHT
) {

389 
cﬁ‹
[
m
.
to
 + 8] = 
EMPTY
;

390 
põ˚
[
m
.
to
 + 8] = 
EMPTY
;

393 
cﬁ‹
[
m
.
to
 - 8] = 
EMPTY
;

394 
põ˚
[
m
.
to
 - 8] = 
EMPTY
;

401 
side
 ^= 1;

402 
xside
 ^= 1;

403 i‡(
	`ö_check
(
xside
)) {

404 
	`èkeback
();

405  
FALSE
;

407  
TRUE
;

408 
	}
}

413 
	$èkeback
()

415 
move_byãs
 
m
;

417 
side
 ^= 1;

418 
xside
 ^= 1;

419 --
∂y
;

420 --
h∂y
;

421 
m
 = 
hi°_d©
[
h∂y
].m.
b
;

422 
ˇ°À
 = 
hi°_d©
[
h∂y
].castle;

423 
ï
 = 
hi°_d©
[
h∂y
].ep;

424 
fi·y
 = 
hi°_d©
[
h∂y
].fifty;

425 
cﬁ‹
[()
m
.
‰om
] = 
side
;

426 i‡(
m
.
bôs
 & 32)

427 
põ˚
[()
m
.
‰om
] = 
PAWN
;

429 
põ˚
[()
m
.
‰om
] =Öõ˚[()m.
to
];

430 i‡(
hi°_d©
[
h∂y
].
ˇ±uª
 =
EMPTY
) {

431 
cﬁ‹
[()
m
.
to
] = 
EMPTY
;

432 
põ˚
[()
m
.
to
] = 
EMPTY
;

435 
cﬁ‹
[()
m
.
to
] = 
xside
;

436 
põ˚
[()
m
.
to
] = 
hi°_d©
[
h∂y
].
ˇ±uª
;

438 i‡(
m
.
bôs
 & 2) {

439 
‰om
, 
to
;

441 
m
.
to
) {

443 
‰om
 = 
F1
;

444 
to
 = 
H1
;

447 
‰om
 = 
D1
;

448 
to
 = 
A1
;

451 
‰om
 = 
F8
;

452 
to
 = 
H8
;

455 
‰om
 = 
D8
;

456 
to
 = 
A8
;

459 
‰om
 = -1;

460 
to
 = -1;

463 
cﬁ‹
[
to
] = 
side
;

464 
põ˚
[
to
] = 
ROOK
;

465 
cﬁ‹
[
‰om
] = 
EMPTY
;

466 
põ˚
[
‰om
] = 
EMPTY
;

468 i‡(
m
.
bôs
 & 4) {

469 i‡(
side
 =
LIGHT
) {

470 
cﬁ‹
[
m
.
to
 + 8] = 
xside
;

471 
põ˚
[
m
.
to
 + 8] = 
PAWN
;

474 
cﬁ‹
[
m
.
to
 - 8] = 
xside
;

475 
põ˚
[
m
.
to
 - 8] = 
PAWN
;

478 
	}
}

	@demos/tuxchess/data.c

9 
	~"defs.h
"

13 
	gcﬁ‹
[64];

14 
	gpõ˚
[64];

15 
	gside
;

16 
	gxside
;

17 
	gˇ°À
;

20 
	gï
;

23 
	gfi·y
;

25 
	g∂y
;

27 
	gh∂y
;

33 
gí_t
 
	ggí_d©
[
GEN_STACK
];

34 
	gfú°_move
[
MAX_PLY
];

37 
	ghi°‹y
[64][64];

41 
hi°_t
 
	ghi°_d©
[
HIST_STACK
];

45 
	gmax_time
;

46 
	gmax_dïth
;

49 
	g°¨t_time
;

50 
	g°›_time
;

52 
	gnodes
;

55 
move
 
	gpv
[
MAX_PLY
][MAX_PLY];

56 
	gpv_Àngth
[
MAX_PLY
];

57 
BOOL
 
	gfﬁlow_pv
;

72 
	gmaûbox
[120] = {

87 
	gmaûbox64
[64] = {

105 
BOOL
 
	g¶ide
[6] = {

106 
FALSE
, FALSE, 
TRUE
, TRUE, TRUE, FALSE

109 
	goff£ts
[6] = {

113 
	goff£t
[6][8] = {

132 
	gˇ°À_mask
[64] = {

145 
	gpõ˚_ch¨
[6] = {

152 
	göô_cﬁ‹
[64] = {

163 
	göô_põ˚
[64] = {

	@demos/tuxchess/data.h

12 
cﬁ‹
[64];

13 
põ˚
[64];

14 
side
;

15 
xside
;

16 
ˇ°À
;

17 
ï
;

18 
fi·y
;

19 
∂y
;

20 
h∂y
;

21 
gí_t
 
gí_d©
[
GEN_STACK
];

22 
fú°_move
[
MAX_PLY
];

23 
hi°‹y
[64][64];

24 
hi°_t
 
hi°_d©
[
HIST_STACK
];

25 
max_time
;

26 
max_dïth
;

27 
°¨t_time
;

28 
°›_time
;

29 
nodes
;

30 
move
 
pv
[
MAX_PLY
][MAX_PLY];

31 
pv_Àngth
[
MAX_PLY
];

32 
BOOL
 
fﬁlow_pv
;

33 
maûbox
[120];

34 
maûbox64
[64];

35 
BOOL
 
¶ide
[6];

36 
off£ts
[6];

37 
off£t
[6][8];

38 
ˇ°À_mask
[64];

39 
põ˚_ch¨
[6];

40 
öô_cﬁ‹
[64];

41 
öô_põ˚
[64];

	@demos/tuxchess/defs.h

9 
	#BOOL
 

	)

10 
	#TRUE
 1

	)

11 
	#FALSE
 0

	)

13 
	#GEN_STACK
 1120

	)

14 
	#MAX_PLY
 32

	)

15 
	#HIST_STACK
 400

	)

17 
	#LIGHT
 0

	)

18 
	#DARK
 1

	)

20 
	#PAWN
 0

	)

21 
	#KNIGHT
 1

	)

22 
	#BISHOP
 2

	)

23 
	#ROOK
 3

	)

24 
	#QUEEN
 4

	)

25 
	#KING
 5

	)

27 
	#EMPTY
 6

	)

30 
	#A1
 56

	)

31 
	#B1
 57

	)

32 
	#C1
 58

	)

33 
	#D1
 59

	)

34 
	#E1
 60

	)

35 
	#F1
 61

	)

36 
	#G1
 62

	)

37 
	#H1
 63

	)

38 
	#A8
 0

	)

39 
	#B8
 1

	)

40 
	#C8
 2

	)

41 
	#D8
 3

	)

42 
	#E8
 4

	)

43 
	#F8
 5

	)

44 
	#G8
 6

	)

45 
	#H8
 7

	)

47 
	#ROW
(
x
Ë(x >> 3)

	)

48 
	#COL
(
x
Ë(x & 7)

	)

67 
	m‰om
;

68 
	mto
;

69 
	m¥omŸe
;

70 
	mbôs
;

71 } 
	tmove_byãs
;

74 
move_byãs
 
	mb
;

75 
	mu
;

76 } 
	tmove
;

81 
move
 
	mm
;

82 
	msc‹e
;

83 } 
	tgí_t
;

88 
move
 
	mm
;

89 
	mˇ±uª
;

90 
	mˇ°À
;

91 
	mï
;

92 
	mfi·y
;

93 } 
	thi°_t
;

	@demos/tuxchess/eval.c

9 
	~<°rög.h
>

10 
	~"defs.h
"

11 
	~"d©a.h
"

12 
	~"¥Ÿos.h
"

15 
	#DOUBLED_PAWN_PENALTY
 10

	)

16 
	#ISOLATED_PAWN_PENALTY
 20

	)

17 
	#BACKWARDS_PAWN_PENALTY
 8

	)

18 
	#PASSED_PAWN_BONUS
 20

	)

19 
	#ROOK_SEMI_OPEN_FILE_BONUS
 10

	)

20 
	#ROOK_OPEN_FILE_BONUS
 15

	)

21 
	#ROOK_ON_SEVENTH_BONUS
 20

	)

25 
	gpõ˚_vÆue
[6] = {

33 
	g∑wn_pcsq
[64] = {

44 
	gknight_pcsq
[64] = {

55 
	gbish›_pcsq
[64] = {

66 
	gkög_pcsq
[64] = {

77 
	gkög_ídgame_pcsq
[64] = {

92 
	gÊù
[64] = {

108 
	g∑wn_ønk
[2][10];

110 
	gpõ˚_m©
[2];

111 
	g∑wn_m©
[2];

113 
	$evÆ
()

115 
i
;

116 
f
;

117 
sc‹e
[2];

120 
i
 = 0; i < 10; ++i) {

121 
∑wn_ønk
[
LIGHT
][
i
] = 0;

122 
∑wn_ønk
[
DARK
][
i
] = 7;

124 
põ˚_m©
[
LIGHT
] = 0;

125 
põ˚_m©
[
DARK
] = 0;

126 
∑wn_m©
[
LIGHT
] = 0;

127 
∑wn_m©
[
DARK
] = 0;

128 
i
 = 0; i < 64; ++i) {

129 i‡(
cﬁ‹
[
i
] =
EMPTY
)

131 i‡(
põ˚
[
i
] =
PAWN
) {

132 
∑wn_m©
[
cﬁ‹
[
i
]] +
põ˚_vÆue
[
PAWN
];

133 
f
 = 
	`COL
(
i
) + 1;

134 i‡(
cﬁ‹
[
i
] =
LIGHT
) {

135 i‡(
∑wn_ønk
[
LIGHT
][
f
] < 
	`ROW
(
i
))

136 
∑wn_ønk
[
LIGHT
][
f
] = 
	`ROW
(
i
);

139 i‡(
∑wn_ønk
[
DARK
][
f
] > 
	`ROW
(
i
))

140 
∑wn_ønk
[
DARK
][
f
] = 
	`ROW
(
i
);

144 
põ˚_m©
[
cﬁ‹
[
i
]] +
põ˚_vÆue
[
põ˚
[i]];

148 
sc‹e
[
LIGHT
] = 
põ˚_m©
[LIGHT] + 
∑wn_m©
[LIGHT];

149 
sc‹e
[
DARK
] = 
põ˚_m©
[DARK] + 
∑wn_m©
[DARK];

150 
i
 = 0; i < 64; ++i) {

151 i‡(
cﬁ‹
[
i
] =
EMPTY
)

153 i‡(
cﬁ‹
[
i
] =
LIGHT
) {

154 
põ˚
[
i
]) {

155 
PAWN
:

156 
sc‹e
[
LIGHT
] +
	`evÆ_light_∑wn
(
i
);

158 
KNIGHT
:

159 
sc‹e
[
LIGHT
] +
knight_pcsq
[
i
];

161 
BISHOP
:

162 
sc‹e
[
LIGHT
] +
bish›_pcsq
[
i
];

164 
ROOK
:

165 i‡(
∑wn_ønk
[
LIGHT
][
	`COL
(
i
) + 1] == 0) {

166 i‡(
∑wn_ønk
[
DARK
][
	`COL
(
i
) + 1] == 7)

167 
sc‹e
[
LIGHT
] +
ROOK_OPEN_FILE_BONUS
;

169 
sc‹e
[
LIGHT
] +
ROOK_SEMI_OPEN_FILE_BONUS
;

171 i‡(
	`ROW
(
i
) == 1)

172 
sc‹e
[
LIGHT
] +
ROOK_ON_SEVENTH_BONUS
;

174 
KING
:

175 i‡(
põ˚_m©
[
DARK
] <= 1200)

176 
sc‹e
[
LIGHT
] +
kög_ídgame_pcsq
[
i
];

178 
sc‹e
[
LIGHT
] +
	`evÆ_light_kög
(
i
);

183 
põ˚
[
i
]) {

184 
PAWN
:

185 
sc‹e
[
DARK
] +
	`evÆ_d¨k_∑wn
(
i
);

187 
KNIGHT
:

188 
sc‹e
[
DARK
] +
knight_pcsq
[
Êù
[
i
]];

190 
BISHOP
:

191 
sc‹e
[
DARK
] +
bish›_pcsq
[
Êù
[
i
]];

193 
ROOK
:

194 i‡(
∑wn_ønk
[
DARK
][
	`COL
(
i
) + 1] == 7) {

195 i‡(
∑wn_ønk
[
LIGHT
][
	`COL
(
i
) + 1] == 0)

196 
sc‹e
[
DARK
] +
ROOK_OPEN_FILE_BONUS
;

198 
sc‹e
[
DARK
] +
ROOK_SEMI_OPEN_FILE_BONUS
;

200 i‡(
	`ROW
(
i
) == 6)

201 
sc‹e
[
DARK
] +
ROOK_ON_SEVENTH_BONUS
;

203 
KING
:

204 i‡(
põ˚_m©
[
LIGHT
] <= 1200)

205 
sc‹e
[
DARK
] +
kög_ídgame_pcsq
[
Êù
[
i
]];

207 
sc‹e
[
DARK
] +
	`evÆ_d¨k_kög
(
i
);

215 i‡(
side
 =
LIGHT
)

216  
sc‹e
[
LIGHT
] - sc‹e[
DARK
];

217  
sc‹e
[
DARK
] - sc‹e[
LIGHT
];

218 
	}
}

220 
	$evÆ_light_∑wn
(
sq
)

222 
r
;

223 
f
;

225 
r
 = 0;

226 
f
 = 
	`COL
(
sq
) + 1;

228 
r
 +
∑wn_pcsq
[
sq
];

231 i‡(
∑wn_ønk
[
LIGHT
][
f
] > 
	`ROW
(
sq
))

232 
r
 -
DOUBLED_PAWN_PENALTY
;

236 i‡((
∑wn_ønk
[
LIGHT
][
f
 - 1] == 0) &&

237 (
∑wn_ønk
[
LIGHT
][
f
 + 1] == 0))

238 
r
 -
ISOLATED_PAWN_PENALTY
;

241 i‡((
∑wn_ønk
[
LIGHT
][
f
 - 1] < 
	`ROW
(
sq
)) &&

242 (
∑wn_ønk
[
LIGHT
][
f
 + 1] < 
	`ROW
(
sq
)))

243 
r
 -
BACKWARDS_PAWN_PENALTY
;

246 i‡((
∑wn_ønk
[
DARK
][
f
 - 1] >
	`ROW
(
sq
)) &&

247 (
∑wn_ønk
[
DARK
][
f
] >
	`ROW
(
sq
)) &&

248 (
∑wn_ønk
[
DARK
][
f
 + 1] >
	`ROW
(
sq
)))

249 
r
 +(7 - 
	`ROW
(
sq
)Ë* 
PASSED_PAWN_BONUS
;

251  
r
;

252 
	}
}

254 
	$evÆ_d¨k_∑wn
(
sq
)

256 
r
;

257 
f
;

259 
r
 = 0;

260 
f
 = 
	`COL
(
sq
) + 1;

262 
r
 +
∑wn_pcsq
[
Êù
[
sq
]];

265 i‡(
∑wn_ønk
[
DARK
][
f
] < 
	`ROW
(
sq
))

266 
r
 -
DOUBLED_PAWN_PENALTY
;

270 i‡((
∑wn_ønk
[
DARK
][
f
 - 1] == 7) &&

271 (
∑wn_ønk
[
DARK
][
f
 + 1] == 7))

272 
r
 -
ISOLATED_PAWN_PENALTY
;

275 i‡((
∑wn_ønk
[
DARK
][
f
 - 1] > 
	`ROW
(
sq
)) &&

276 (
∑wn_ønk
[
DARK
][
f
 + 1] > 
	`ROW
(
sq
)))

277 
r
 -
BACKWARDS_PAWN_PENALTY
;

280 i‡((
∑wn_ønk
[
LIGHT
][
f
 - 1] <
	`ROW
(
sq
)) &&

281 (
∑wn_ønk
[
LIGHT
][
f
] <
	`ROW
(
sq
)) &&

282 (
∑wn_ønk
[
LIGHT
][
f
 + 1] <
	`ROW
(
sq
)))

283 
r
 +
	`ROW
(
sq
Ë* 
PASSED_PAWN_BONUS
;

285  
r
;

286 
	}
}

288 
	$evÆ_light_kög
(
sq
)

290 
r
;

291 
i
;

293 
r
 = 
kög_pcsq
[
sq
];

297 i‡(
	`COL
(
sq
) < 3) {

298 
r
 +
	`evÆ_lkp
(1);

299 
r
 +
	`evÆ_lkp
(2);

300 
r
 +
	`evÆ_lkp
(3) / 2;

303 i‡(
	`COL
(
sq
) > 4) {

304 
r
 +
	`evÆ_lkp
(8);

305 
r
 +
	`evÆ_lkp
(7);

306 
r
 +
	`evÆ_lkp
(6) / 2;

312 
i
 = 
	`COL
(
sq
); i <= COL(sq) + 2; ++i)

313 i‡((
∑wn_ønk
[
LIGHT
][
i
] == 0) &&

314 (
∑wn_ønk
[
DARK
][
i
] == 7))

315 
r
 -= 10;

321 
r
 *
põ˚_m©
[
DARK
];

322 
r
 /= 3100;

324  
r
;

325 
	}
}

329 
	$evÆ_lkp
(
f
)

331 
r
 = 0;

333 i‡(
∑wn_ønk
[
LIGHT
][
f
] == 6);

334 i‡(
∑wn_ønk
[
LIGHT
][
f
] == 5)

335 
r
 -= 10;

336 i‡(
∑wn_ønk
[
LIGHT
][
f
] != 0)

337 
r
 -= 20;

339 
r
 -= 25;

341 i‡(
∑wn_ønk
[
DARK
][
f
] == 7)

342 
r
 -= 15;

343 i‡(
∑wn_ønk
[
DARK
][
f
] == 5)

344 
r
 -= 10;

345 i‡(
∑wn_ønk
[
DARK
][
f
] == 4)

346 
r
 -= 5;

348  
r
;

349 
	}
}

351 
	$evÆ_d¨k_kög
(
sq
)

353 
r
;

354 
i
;

356 
r
 = 
kög_pcsq
[
Êù
[
sq
]];

357 i‡(
	`COL
(
sq
) < 3) {

358 
r
 +
	`evÆ_dkp
(1);

359 
r
 +
	`evÆ_dkp
(2);

360 
r
 +
	`evÆ_dkp
(3) / 2;

362 i‡(
	`COL
(
sq
) > 4) {

363 
r
 +
	`evÆ_dkp
(8);

364 
r
 +
	`evÆ_dkp
(7);

365 
r
 +
	`evÆ_dkp
(6) / 2;

368 
i
 = 
	`COL
(
sq
); i <= COL(sq) + 2; ++i)

369 i‡((
∑wn_ønk
[
LIGHT
][
i
] == 0) &&

370 (
∑wn_ønk
[
DARK
][
i
] == 7))

371 
r
 -= 10;

373 
r
 *
põ˚_m©
[
LIGHT
];

374 
r
 /= 3100;

375  
r
;

376 
	}
}

378 
	$evÆ_dkp
(
f
)

380 
r
 = 0;

382 i‡(
∑wn_ønk
[
DARK
][
f
] == 1);

383 i‡(
∑wn_ønk
[
DARK
][
f
] == 2)

384 
r
 -= 10;

385 i‡(
∑wn_ønk
[
DARK
][
f
] != 7)

386 
r
 -= 20;

388 
r
 -= 25;

390 i‡(
∑wn_ønk
[
LIGHT
][
f
] == 0)

391 
r
 -= 15;

392 i‡(
∑wn_ønk
[
LIGHT
][
f
] == 2)

393 
r
 -= 10;

394 i‡(
∑wn_ønk
[
LIGHT
][
f
] == 3)

395 
r
 -= 5;

397  
r
;

398 
	}
}

	@demos/tuxchess/images.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~<°rög.h
>

4 
	~"«no-X.h
"

6 
	#IMAGE_PATH
 "demos/tuxchess/images"

	)

8 
GR_IMAGE_ID
 
bﬂrd_image_id
;

9 
GR_IMAGE_INFO
 
bﬂrd_öfo
;

10 
bﬂrd_w
,
bﬂrd_h
;

12 
GR_IMAGE_ID
 
w_p_image_id
;

13 
GR_IMAGE_INFO
 
w_p_öfo
;

14 
w_p_w
,
w_p_h
;

16 
GR_IMAGE_ID
 
w_n_image_id
;

17 
GR_IMAGE_INFO
 
w_n_öfo
;

18 
w_n_w
,
w_n_h
;

20 
GR_IMAGE_ID
 
w_b_image_id
;

21 
GR_IMAGE_INFO
 
w_b_öfo
;

22 
w_b_w
,
w_b_h
;

24 
GR_IMAGE_ID
 
w_r_image_id
;

25 
GR_IMAGE_INFO
 
w_r_öfo
;

26 
w_r_w
,
w_r_h
;

28 
GR_IMAGE_ID
 
w_q_image_id
;

29 
GR_IMAGE_INFO
 
w_q_öfo
;

30 
w_q_w
,
w_q_h
;

32 
GR_IMAGE_ID
 
w_k_image_id
;

33 
GR_IMAGE_INFO
 
w_k_öfo
;

34 
w_k_w
,
w_k_h
;

36 
GR_IMAGE_ID
 
b_p_image_id
;

37 
GR_IMAGE_INFO
 
b_p_öfo
;

38 
b_p_w
,
b_p_h
;

40 
GR_IMAGE_ID
 
b_n_image_id
;

41 
GR_IMAGE_INFO
 
b_n_öfo
;

42 
b_n_w
,
b_n_h
;

44 
GR_IMAGE_ID
 
b_b_image_id
;

45 
GR_IMAGE_INFO
 
b_b_öfo
;

46 
b_b_w
,
b_b_h
;

48 
GR_IMAGE_ID
 
b_r_image_id
;

49 
GR_IMAGE_INFO
 
b_r_öfo
;

50 
b_r_w
,
b_r_h
;

52 
GR_IMAGE_ID
 
b_q_image_id
;

53 
GR_IMAGE_INFO
 
b_q_öfo
;

54 
b_q_w
,
b_q_h
;

56 
GR_IMAGE_ID
 
b_k_image_id
;

57 
GR_IMAGE_INFO
 
b_k_öfo
;

58 
b_k_w
,
b_k_h
;

61 
	$lﬂd_images
()

63 
buf
[128];

65 
	`•rötf
(
buf
,"%s/bﬂrd.gif",
IMAGE_PATH
);

66 i‡(!(
bﬂrd_image_id
 = 
	`GrLﬂdImageFromFûe
(
buf
, 0))) {

67 
	`Ârötf
(
°dîr
, "Can'tÜoad board image file\n");

68 
	`exô
(-1);

70 
	`GrGëImageInfo
(
bﬂrd_image_id
, &
bﬂrd_öfo
);

71 
bﬂrd_w
 = 
bﬂrd_öfo
.
width
;

72 
bﬂrd_h
 = 
bﬂrd_öfo
.
height
;

75 
	`•rötf
(
buf
,"%s/w_p.gif",
IMAGE_PATH
);

76 i‡(!(
w_p_image_id
 = 
	`GrLﬂdImageFromFûe
(
buf
, 0))) {

77 
	`Ârötf
(
°dîr
, "Can'tÜoad whiteÖawn image file\n");

78 
	`exô
(-1);

80 
	`GrGëImageInfo
(
w_p_image_id
, &
w_p_öfo
);

81 
w_p_w
 = 
w_p_öfo
.
width
;

82 
w_p_h
 = 
w_p_öfo
.
height
;

85 
	`•rötf
(
buf
,"%s/w_n.gif",
IMAGE_PATH
);

86 i‡(!(
w_n_image_id
 = 
	`GrLﬂdImageFromFûe
(
buf
, 0))) {

87 
	`Ârötf
(
°dîr
, "Can'tÜoad white knight image file\n");

88 
	`exô
(-1);

90 
	`GrGëImageInfo
(
w_n_image_id
, &
w_n_öfo
);

91 
w_n_w
 = 
w_n_öfo
.
width
;

92 
w_n_h
 = 
w_n_öfo
.
height
;

96 
	`•rötf
(
buf
,"%s/w_b.gif",
IMAGE_PATH
);

97 i‡(!(
w_b_image_id
 = 
	`GrLﬂdImageFromFûe
(
buf
, 0))) {

98 
	`Ârötf
(
°dîr
, "Can'tÜoad white bishop image file\n");

99 
	`exô
(-1);

101 
	`GrGëImageInfo
(
w_b_image_id
, &
w_b_öfo
);

102 
w_b_w
 = 
w_b_öfo
.
width
;

103 
w_b_h
 = 
w_b_öfo
.
height
;

107 
	`•rötf
(
buf
,"%s/w_r.gif",
IMAGE_PATH
);

108 i‡(!(
w_r_image_id
 = 
	`GrLﬂdImageFromFûe
(
buf
, 0))) {

109 
	`Ârötf
(
°dîr
, "Can'tÜoad whiteÑook image file\n");

110 
	`exô
(-1);

112 
	`GrGëImageInfo
(
w_r_image_id
, &
w_r_öfo
);

113 
w_r_w
 = 
w_r_öfo
.
width
;

114 
w_r_h
 = 
w_r_öfo
.
height
;

118 
	`•rötf
(
buf
,"%s/w_k.gif",
IMAGE_PATH
);

119 i‡(!(
w_k_image_id
 = 
	`GrLﬂdImageFromFûe
(
buf
, 0))) {

120 
	`Ârötf
(
°dîr
, "Can'tÜoad white king image file\n");

121 
	`exô
(-1);

123 
	`GrGëImageInfo
(
w_k_image_id
, &
w_k_öfo
);

124 
w_k_w
 = 
w_k_öfo
.
width
;

125 
w_k_h
 = 
w_k_öfo
.
height
;

129 
	`•rötf
(
buf
,"%s/w_q.gif",
IMAGE_PATH
);

130 i‡(!(
w_q_image_id
 = 
	`GrLﬂdImageFromFûe
(
buf
, 0))) {

131 
	`Ârötf
(
°dîr
, "Can'tÜoad white queen image file\n");

132 
	`exô
(-1);

134 
	`GrGëImageInfo
(
w_q_image_id
, &
w_q_öfo
);

135 
w_q_w
 = 
w_q_öfo
.
width
;

136 
w_q_h
 = 
w_q_öfo
.
height
;

140 
	`•rötf
(
buf
,"%s/b_p.gif",
IMAGE_PATH
);

141 i‡(!(
b_p_image_id
 = 
	`GrLﬂdImageFromFûe
(
buf
, 0))) {

142 
	`Ârötf
(
°dîr
, "Can'tÜoad blackÖawn image file\n");

143 
	`exô
(-1);

145 
	`GrGëImageInfo
(
b_p_image_id
, &
b_p_öfo
);

146 
b_p_w
 = 
b_p_öfo
.
width
;

147 
b_p_h
 = 
b_p_öfo
.
height
;

150 
	`•rötf
(
buf
,"%s/b_n.gif",
IMAGE_PATH
);

151 i‡(!(
b_n_image_id
 = 
	`GrLﬂdImageFromFûe
(
buf
, 0))) {

152 
	`Ârötf
(
°dîr
, "Can'tÜoad black knight image file\n");

153 
	`exô
(-1);

155 
	`GrGëImageInfo
(
b_n_image_id
, &
b_n_öfo
);

156 
b_n_w
 = 
b_n_öfo
.
width
;

157 
b_n_h
 = 
b_n_öfo
.
height
;

161 
	`•rötf
(
buf
,"%s/b_b.gif",
IMAGE_PATH
);

162 i‡(!(
b_b_image_id
 = 
	`GrLﬂdImageFromFûe
(
buf
, 0))) {

163 
	`Ârötf
(
°dîr
, "Can'tÜoad black bishop image file\n");

164 
	`exô
(-1);

166 
	`GrGëImageInfo
(
b_b_image_id
, &
b_b_öfo
);

167 
b_b_w
 = 
b_b_öfo
.
width
;

168 
b_b_h
 = 
b_b_öfo
.
height
;

172 
	`•rötf
(
buf
,"%s/b_r.gif",
IMAGE_PATH
);

173 i‡(!(
b_r_image_id
 = 
	`GrLﬂdImageFromFûe
(
buf
, 0))) {

174 
	`Ârötf
(
°dîr
, "Can'tÜoad blackÑook image file\n");

175 
	`exô
(-1);

177 
	`GrGëImageInfo
(
b_r_image_id
, &
b_r_öfo
);

178 
b_r_w
 = 
b_r_öfo
.
width
;

179 
b_r_h
 = 
b_r_öfo
.
height
;

183 
	`•rötf
(
buf
,"%s/b_k.gif",
IMAGE_PATH
);

184 i‡(!(
b_k_image_id
 = 
	`GrLﬂdImageFromFûe
(
buf
, 0))) {

185 
	`Ârötf
(
°dîr
, "Can'tÜoad black king image file\n");

186 
	`exô
(-1);

188 
	`GrGëImageInfo
(
b_k_image_id
, &
b_k_öfo
);

189 
b_k_w
 = 
b_k_öfo
.
width
;

190 
b_k_h
 = 
b_k_öfo
.
height
;

194 
	`•rötf
(
buf
,"%s/b_q.gif",
IMAGE_PATH
);

195 i‡(!(
b_q_image_id
 = 
	`GrLﬂdImageFromFûe
(
buf
, 0))) {

196 
	`Ârötf
(
°dîr
, "Can'tÜoad black queen image file\n");

197 
	`exô
(-1);

199 
	`GrGëImageInfo
(
b_q_image_id
, &
b_q_öfo
);

200 
b_q_w
 = 
b_q_öfo
.
width
;

201 
b_q_h
 = 
b_q_öfo
.
height
;

204 
	}
}

	@demos/tuxchess/main.c

6 
	~<°dio.h
>

7 
	~<°dlib.h
>

8 
	~<°rög.h
>

9 
	~<sig«l.h
>

10 
	~<sys/timeb.h
>

11 
	~"defs.h
"

12 
	~"d©a.h
"

13 
	~"¥Ÿos.h
"

15 
	#MWINCLUDECOLORS


	)

16 
	~"«no-X.h
"

17 
	#TITLE
 "TuxChess"

	)

18 
	#SCANCODES
 64

	)

19 
	#BM_WIDTH
 394

	)

20 
	#BM_HEIGHT
 413

	)

23 
	skeycﬁumn
 {

24 
	mxoff£t
;

25 
	msˇncode
;

28 
	skeyrow
 {

29 
	myoff£t
;

30 
	mheight
;

31 
keycﬁumn
 
	mcﬁumns
[9];

34 
keyrow
 
	gkeyrows
[8] = {

53 *
	gbﬂrd_posôi⁄
[
SCANCODES
] = {

64 
GR_WINDOW_ID
 
	gma°î
;

65 
GR_WINDOW_ID
 
	gbﬂrd
;

66 
GR_WINDOW_ID
 
	gãxt
;

68 
GR_GC_ID
 
	ggc
;

69 
GR_GC_ID
 
	gãxt_gc
;

71 
GR_IMAGE_ID
 
	gbﬂrd_image_id
;

72 
GR_IMAGE_INFO
 
	gbﬂrd_öfo
;

73 
	gbﬂrd_w
,
	gbﬂrd_h
;

75 
GR_IMAGE_ID
 
	gw_p_image_id
;

76 
GR_IMAGE_INFO
 
	gw_p_öfo
;

77 
	gw_p_w
,
	gw_p_h
;

79 
GR_IMAGE_ID
 
	gw_n_image_id
;

80 
GR_IMAGE_INFO
 
	gw_n_öfo
;

81 
	gw_n_w
,
	gw_n_h
;

83 
GR_IMAGE_ID
 
	gw_b_image_id
;

84 
GR_IMAGE_INFO
 
	gw_b_öfo
;

85 
	gw_b_w
,
	gw_b_h
;

87 
GR_IMAGE_ID
 
	gw_r_image_id
;

88 
GR_IMAGE_INFO
 
	gw_r_öfo
;

89 
	gw_r_w
,
	gw_r_h
;

91 
GR_IMAGE_ID
 
	gw_q_image_id
;

92 
GR_IMAGE_INFO
 
	gw_q_öfo
;

93 
	gw_q_w
,
	gw_q_h
;

95 
GR_IMAGE_ID
 
	gw_k_image_id
;

96 
GR_IMAGE_INFO
 
	gw_k_öfo
;

97 
	gw_k_w
,
	gw_k_h
;

99 
GR_IMAGE_ID
 
	gb_p_image_id
;

100 
GR_IMAGE_INFO
 
	gb_p_öfo
;

101 
	gb_p_w
,
	gb_p_h
;

103 
GR_IMAGE_ID
 
	gb_n_image_id
;

104 
GR_IMAGE_INFO
 
	gb_n_öfo
;

105 
	gb_n_w
,
	gb_n_h
;

107 
GR_IMAGE_ID
 
	gb_b_image_id
;

108 
GR_IMAGE_INFO
 
	gb_b_öfo
;

109 
	gb_b_w
,
	gb_b_h
;

111 
GR_IMAGE_ID
 
	gb_r_image_id
;

112 
GR_IMAGE_INFO
 
	gb_r_öfo
;

113 
	gb_r_w
,
	gb_r_h
;

115 
GR_IMAGE_ID
 
	gb_q_image_id
;

116 
GR_IMAGE_INFO
 
	gb_q_öfo
;

117 
	gb_q_w
,
	gb_q_h
;

119 
GR_IMAGE_ID
 
	gb_k_image_id
;

120 
GR_IMAGE_INFO
 
	gb_k_öfo
;

121 
	gb_k_w
,
	gb_k_h
;

124 
lﬂd_images
();

125 
	g°¨t_squ¨e
 = 1;

126 
	g°_sq
[3];

127 
	g‰om
 = 999;

128 
	gto
 = 999;

133 
BOOL
 
	g·ime_ok
 = 
FALSE
;

134 
	$gë_ms
()

136 
timeb
 
timebuf„r
;

137 
	`·ime
(&
timebuf„r
);

138 i‡(
timebuf„r
.
mûlôm
 != 0)

139 
·ime_ok
 = 
TRUE
;

140  (
timebuf„r
.
time
 * 1000Ë+Åimebuf„r.
mûlôm
;

141 
	}
}

145 
	$g¥ötf
(
s
[])

147 
œ°ãxt
[128];

149 
	`GrSëGCF‹eground
(
ãxt_gc
,
BLACK
);

150 
	`GrFûlRe˘
(
ãxt
, 
ãxt_gc
, 0, 0, 394,20);

151 
	`GrSëGCF‹eground
(
ãxt_gc
,
WHITE
);

152 
	`GrSëGCBackground
(
ãxt_gc
,
BLACK
);

153 i‡(!
s
)

154 
s
 = 
œ°ãxt
;

155 
	`GrText
(
ãxt
, 
ãxt_gc
, 5, 14, 
s
, 
	`°æí
(s),0);

156 i‡(
s
 !
œ°ãxt
)

157 
	`°r˝y
(
œ°ãxt
, 
s
);

158 
	}
}

162 
	$¥o˚ss_sˇncode
(
sˇncode
)

164 
sq
[3];

165 
fö_sq
[3];

166 
i
;

167 
ãmp
[5];

169 
	`°r˝y
(
sq
,"");

170 
i
=0;i<
SCANCODES
;i++)

172 i‡(
i
 =
sˇncode
)

174 
	`°r˝y
(
sq
,
bﬂrd_posôi⁄
[
i
]);

180 i‡(
°¨t_squ¨e
)

182 
	`g¥ötf
(
sq
);

183 
	`°r˝y
(
°_sq
,
sq
);

184 
°¨t_squ¨e
 = 0;

185 
‰om
 = 
sˇncode
;

186 
to
 = 999;

190 
	`°r˝y
(
fö_sq
,
sq
);

191 
°¨t_squ¨e
 = 1;

192 
to
 = 
sˇncode
;

193 
	`•rötf
(
ãmp
,"%s%s",
°_sq
,
fö_sq
);

194 
	`g¥ötf
(
ãmp
);

196 
	}
}

200 
	$mou£_hô
(
x
, 
y
)

202 
row
, 
cﬁumn
;

204 
row
 = 0;Ñow < 8;Ñow++) {

205 i‡(
y
 >
keyrows
[
row
].
yoff£t
 &&

206 
y
 < 
keyrows
[
row
].
yoff£t
+keyrows[row].
height
) {

207 
cﬁumn
 = 0; column < 8; column++) {

208 i‡(
keyrows
[
row
].
cﬁumns
[
cﬁumn
].
xoff£t
 == 999) {

209 
	`Ârötf
(
°dîr
, "offÉnd ofÑow\n");

212 i‡(
x
 < 
keyrows
[
row
].
cﬁumns
[
cﬁumn
 + 1].
xoff£t
) {

213 
sˇncode
 = 
keyrows
[
row
].
cﬁumns
[
cﬁumn
].scancode;

214 
	`¥o˚ss_sˇncode
(
sˇncode
);

220 
	`Ârötf
(
°dîr
, "off bottom\n");

221 
	}
}

225 
	$maö
(
¨gc
, * 
¨gv
[])

227 
GR_EVENT
 
evít
;

228 
GR_WM_PROPERTIES
 
¥›s
;

230 
compuãr_side
;

231 
s
[256];

232 
i
;

233 
BOOL
 
found
;

234 
ãmp
[50];

236 i‡(
	`GrO≥n
() < 0) {

237 
	`Ârötf
(
°dîr
, "tuxchess: cannot open graphics\n");

238 
	`exô
(1);

241 
	`lﬂd_images
();

243 
ma°î
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 0, 0, 
BM_WIDTH
, 
BM_HEIGHT
, 0, 
WHITE
, WHITE);

244 
bﬂrd
 = 
	`GrNewWödow
((
GR_WINDOW_ID
Ë
ma°î
, 0, 0, 394, 394, 0, 
WHITE
, WHITE);

245 
ãxt
 = 
	`GrNewWödow
((
GR_WINDOW_ID
Ë
ma°î
, 0, 393, 394, 20, 0, 
WHITE
, 
BLACK
);

247 
	`GrSñe˘Evíts
(
ma°î
, 
GR_EVENT_MASK_CLOSE_REQ
 | 
GR_EVENT_MASK_EXPOSURE
 | 
GR_EVENT_MASK_BUTTON_DOWN
);

249 
¥›s
.
Êags
 = 
GR_WM_FLAGS_PROPS
 | 
GR_WM_FLAGS_TITLE
;

250 
¥›s
.¥›†
GR_WM_PROPS_BORDER
 | 
GR_WM_PROPS_CAPTION
 | 
GR_WM_PROPS_CLOSEBOX
;

251 
¥›s
.
tôÀ
 = 
TITLE
;

252 
	`GrSëWMPr›îtõs
(
ma°î
, &
¥›s
);

254 
	`GrM≠Wödow
(
ma°î
);

255 
	`GrM≠Wödow
(
bﬂrd
);

256 
	`GrM≠Wödow
(
ãxt
);

258 
gc
 = 
	`GrNewGC
();

259 
ãxt_gc
 = 
	`GrNewGC
();

261 
	`öô
();

262 
	`gí
();

263 
max_time
 = 1 << 25;

264 
max_dïth
 = 4;

266 i‡(
¨gc
 > 1)

267 
compuãr_side
 = 
side
;

270 
compuãr_side
 = 
EMPTY
;

271 
	`g¥ötf
("Makeá move...");

277 i‡(
side
 =
compuãr_side
)

280 
	`thök
(0);

281 i‡(!
pv
[0][0].
u
) {

282 
	`g¥ötf
("NoÜegal moves");

283 
compuãr_side
 = 
EMPTY
;

287 
	`•rötf
(
ãmp
,"Compuãr'†move: %s\n", 
	`move_°r
(
pv
[0][0].
b
));

288 
	`g¥ötf
(
ãmp
);

289 
	`makemove
(
pv
[0][0].
b
);

290 
∂y
 = 0;

291 
	`gí
();

292 
	`¥öt_bﬂrd
();

293 
	`¥öt_ªsu…
();

297 
	`GrGëNextEvít
(&
evít
);

298 
evít
.
ty≥
)

300 
GR_EVENT_TYPE_CLOSE_REQ
:

301 
	`GrClo£
();

302 
	`exô
(0);

304 
GR_EVENT_TYPE_EXPOSURE
:

305 
	`¥öt_bﬂrd
();

306 
	`g¥ötf
(
NULL
);

308 
GR_EVENT_TYPE_BUTTON_DOWN
:

309 
	`mou£_hô
(
evít
.
buâ⁄
.
x
,Évít.buâ⁄.
y
);

313 i‡(
to
 != 999)

317 
found
 = 
FALSE
;

318 
i
 = 0; i < 
fú°_move
[1]; ++i)

319 i‡(
gí_d©
[
i
].
m
.
b
.
‰om
 =‰om && gí_d©[i].m.b.
to
 ==Åo)

321 
found
 = 
TRUE
;

324 i‡(
gí_d©
[
i
].
m
.
b
.
bôs
 & 32)

325 
s
[4])

330 
i
 += 1;

333 
i
 += 2;

336 
i
 += 3;

342 i‡(!
found
 || !
	`makemove
(
gí_d©
[
i
].
m
.
b
))

343 
	`g¥ötf
("Illegal move.\n");

346 
∂y
 = 0;

347 
	`gí
();

348 
	`¥öt_bﬂrd
();

349 
	`¥öt_ªsu…
();

350 
compuãr_side
 = 
side
;

351 
to
 = 999;

357 
	}
}

363 *
	$move_°r
(
move_byãs
 
m
)

365 
°r
[6];

366 
c
;

368 i‡(
m
.
bôs
 & 32) {

369 
m
.
¥omŸe
) {

370 
KNIGHT
:

371 
c
 = 'n';

373 
BISHOP
:

374 
c
 = 'b';

376 
ROOK
:

377 
c
 = 'r';

380 
c
 = 'q';

383 
	`•rötf
(
°r
, "%c%d%c%d%c",

384 
	`COL
(
m
.
‰om
) + 'A',

385 8 - 
	`ROW
(
m
.
‰om
),

386 
	`COL
(
m
.
to
) + 'A',

387 8 - 
	`ROW
(
m
.
to
),

388 
c
);

391 
	`•rötf
(
°r
, "%c%d%c%d",

392 
	`COL
(
m
.
‰om
) + 'A',

393 8 - 
	`ROW
(
m
.
‰om
),

394 
	`COL
(
m
.
to
) + 'A',

395 8 - 
	`ROW
(
m
.
to
));

396  
°r
;

397 
	}
}

401 
	$¥öt_bﬂrd
()

403 
row
,
cﬁumn
,
i
,
x
,
y
;

405 
	`GrDøwImageToFô
(
bﬂrd
, 
gc
, 1, 0, 
bﬂrd_w
, 
bﬂrd_h
, 
bﬂrd_image_id
);

407 
row
=0;row<8;row++)

409 
cﬁumn
=0;column<8;column++)

411 
i
 = 
keyrows
[
row
].
cﬁumns
[
cﬁumn
].
sˇncode
;

412 
cﬁ‹
[
i
])

414 
LIGHT
:

415 
põ˚_ch¨
[
põ˚
[
i
]])

418 
x
 = 
keyrows
[
row
].
cﬁumns
[
cﬁumn
].
xoff£t
;

419 
y
 = 
keyrows
[
row
].
yoff£t
;

420 
	`GrDøwImageToFô
(
bﬂrd
, 
gc
, 
x
+10, 
y
+13, 
w_p_w
, 
w_p_h
, 
w_p_image_id
);

423 
x
 = 
keyrows
[
row
].
cﬁumns
[
cﬁumn
].
xoff£t
;

424 
y
 = 
keyrows
[
row
].
yoff£t
;

425 
	`GrDøwImageToFô
(
bﬂrd
, 
gc
, 
x
+9, 
y
+9, 
w_n_w
, 
w_n_h
, 
w_n_image_id
);

428 
x
 = 
keyrows
[
row
].
cﬁumns
[
cﬁumn
].
xoff£t
;

429 
y
 = 
keyrows
[
row
].
yoff£t
;

430 
	`GrDøwImageToFô
(
bﬂrd
, 
gc
, 
x
+9, 
y
+9, 
w_b_w
, 
w_b_h
, 
w_b_image_id
);

433 
x
 = 
keyrows
[
row
].
cﬁumns
[
cﬁumn
].
xoff£t
;

434 
y
 = 
keyrows
[
row
].
yoff£t
;

435 
	`GrDøwImageToFô
(
bﬂrd
, 
gc
, 
x
+9, 
y
+12, 
w_r_w
, 
w_r_h
, 
w_r_image_id
);

438 
x
 = 
keyrows
[
row
].
cﬁumns
[
cﬁumn
].
xoff£t
;

439 
y
 = 
keyrows
[
row
].
yoff£t
;

440 
	`GrDøwImageToFô
(
bﬂrd
, 
gc
, 
x
+8, 
y
+8, 
w_q_w
, 
w_q_h
, 
w_q_image_id
);

443 
x
 = 
keyrows
[
row
].
cﬁumns
[
cﬁumn
].
xoff£t
;

444 
y
 = 
keyrows
[
row
].
yoff£t
;

445 
	`GrDøwImageToFô
(
bﬂrd
, 
gc
, 
x
+8, 
y
+5, 
w_k_w
, 
w_k_h
, 
w_k_image_id
);

450 
DARK
:

451 
põ˚_ch¨
[
põ˚
[
i
]])

454 
x
 = 
keyrows
[
row
].
cﬁumns
[
cﬁumn
].
xoff£t
;

455 
y
 = 
keyrows
[
row
].
yoff£t
;

456 
	`GrDøwImageToFô
(
bﬂrd
, 
gc
, 
x
+10, 
y
+13, 
b_p_w
, 
b_p_h
, 
b_p_image_id
);

459 
x
 = 
keyrows
[
row
].
cﬁumns
[
cﬁumn
].
xoff£t
;

460 
y
 = 
keyrows
[
row
].
yoff£t
;

461 
	`GrDøwImageToFô
(
bﬂrd
, 
gc
, 
x
+9, 
y
+9, 
b_n_w
, 
b_n_h
, 
b_n_image_id
);

464 
x
 = 
keyrows
[
row
].
cﬁumns
[
cﬁumn
].
xoff£t
;

465 
y
 = 
keyrows
[
row
].
yoff£t
;

466 
	`GrDøwImageToFô
(
bﬂrd
, 
gc
, 
x
+9, 
y
+9, 
b_b_w
, 
b_b_h
, 
b_b_image_id
);

469 
x
 = 
keyrows
[
row
].
cﬁumns
[
cﬁumn
].
xoff£t
;

470 
y
 = 
keyrows
[
row
].
yoff£t
;

471 
	`GrDøwImageToFô
(
bﬂrd
, 
gc
, 
x
+9, 
y
+12, 
b_r_w
, 
b_r_h
, 
b_r_image_id
);

474 
x
 = 
keyrows
[
row
].
cﬁumns
[
cﬁumn
].
xoff£t
;

475 
y
 = 
keyrows
[
row
].
yoff£t
;

476 
	`GrDøwImageToFô
(
bﬂrd
, 
gc
, 
x
+8, 
y
+8, 
b_q_w
, 
b_q_h
, 
b_q_image_id
);

479 
x
 = 
keyrows
[
row
].
cﬁumns
[
cﬁumn
].
xoff£t
;

480 
y
 = 
keyrows
[
row
].
yoff£t
;

481 
	`GrDøwImageToFô
(
bﬂrd
, 
gc
, 
x
+8, 
y
+5, 
b_k_w
, 
b_k_h
, 
b_k_image_id
);

488 
	}
}

493 
	$¥öt_ªsu…
()

495 
i
;

498 
i
 = 0; i < 
fú°_move
[1]; ++i)

499 i‡(
	`makemove
(
gí_d©
[
i
].
m
.
b
)) {

500 
	`èkeback
();

503 i‡(
i
 =
fú°_move
[1]) {

504 i‡(
	`ö_check
(
side
)) {

505 i‡(
side
 =
LIGHT
)

506 
	`g¥ötf
("Black mates");

508 
	`g¥ötf
("White mates");

511 
	`g¥ötf
("Stalemate");

513 i‡(
	`ªps
() == 3)

514 
	`g¥ötf
("Draw byÑepetition");

515 i‡(
fi·y
 >= 100)

516 
	`g¥ötf
("Draw by fifty moveÑule");

517 
	}
}

	@demos/tuxchess/protos.h

12 
öô
();

13 
BOOL
 
ö_check
(
s
);

14 
BOOL
 
©èck
(
sq
, 
s
);

15 
gí
();

16 
gí_ˇps
();

17 
gí_push
(
‰om
, 
to
, 
bôs
);

18 
gí_¥omŸe
(
‰om
, 
to
, 
bôs
);

19 
BOOL
 
makemove
(
move_byãs
 
m
);

20 
èkeback
();

23 
thök
(
ouçut
);

24 
£¨ch
(
Æpha
, 
bëa
, 
dïth
);

25 
quõs˚
(
Æpha
, 
bëa
);

26 
ªps
();

27 
s‹t_pv
();

28 
s‹t
(
‰om
);

29 
checkup
();

32 
evÆ
();

33 
evÆ_light_∑wn
(
sq
);

34 
evÆ_d¨k_∑wn
(
sq
);

35 
evÆ_light_kög
(
sq
);

36 
evÆ_lkp
(
f
);

37 
evÆ_d¨k_kög
(
sq
);

38 
evÆ_dkp
(
f
);

41 
gë_ms
();

42 
maö
();

43 *
move_°r
(
move_byãs
 
m
);

44 
¥öt_bﬂrd
();

45 
xbﬂrd
();

46 
¥öt_ªsu…
();

47 
bích
();

	@demos/tuxchess/search.c

9 
	~<°dio.h
>

10 
	~<°rög.h
>

11 
	~"defs.h
"

12 
	~"d©a.h
"

13 
	~"¥Ÿos.h
"

17 
	~<£tjmp.h
>

18 
jmp_buf
 
	gív
;

19 
BOOL
 
	g°›_£¨ch
;

28 
	$thök
(
ouçut
)

30 
i
, 
j
, 
x
;

34 
°›_£¨ch
 = 
FALSE
;

35 
	`£tjmp
(
ív
);

36 i‡(
°›_£¨ch
) {

39 
∂y
)

40 
	`èkeback
();

44 
°¨t_time
 = 
	`gë_ms
();

45 
°›_time
 = 
°¨t_time
 + 
max_time
;

47 
∂y
 = 0;

48 
nodes
 = 0;

49 
	`mem£t
(
pv
, 0, (pv));

50 
	`mem£t
(
hi°‹y
, 0, (history));

51 i‡(
ouçut
 == 1)

52 
	`¥ötf
("plyÇodes scoreÖv\n");

53 
i
 = 1; i <
max_dïth
; ++i) {

54 
fﬁlow_pv
 = 
TRUE
;

55 
x
 = 
	`£¨ch
(-10000, 10000, 
i
);

56 i‡(
ouçut
 == 1)

57 
	`¥ötf
("%3d %9d %5d ", 
i
, 
nodes
, 
x
);

58 i‡(
ouçut
 == 2)

59 
	`¥ötf
("%d %d %d %d",

60 
i
, 
x
, (
	`gë_ms
(Ë- 
°¨t_time
Ë/ 10, 
nodes
);

61 i‡(
ouçut
) {

62 
j
 = 0; j < 
pv_Àngth
[0]; ++j)

63 
	`¥ötf
(" %s", 
	`move_°r
(
pv
[0][
j
].
b
));

64 
	`¥ötf
("\n");

65 
	`fÊush
(
°dout
);

67 i‡(
x
 > 9000 || x < -9000)

70 
	}
}

75 
	$£¨ch
(
Æpha
, 
bëa
, 
dïth
)

77 
i
, 
j
, 
x
;

78 
BOOL
 
c
, 
f
;

82 i‡(!
dïth
)

83  
	`quõs˚
(
Æpha
,
bëa
);

84 ++
nodes
;

87 i‡((
nodes
 & 1023) == 0)

88 
	`checkup
();

90 
pv_Àngth
[
∂y
] =Öly;

96 i‡(
∂y
 && 
	`ªps
())

100 i‡(
∂y
 >
MAX_PLY
 - 1)

101  
	`evÆ
();

102 i‡(
h∂y
 >
HIST_STACK
 - 1)

103  
	`evÆ
();

106 
c
 = 
	`ö_check
(
side
);

107 i‡(
c
)

108 ++
dïth
;

109 
	`gí
();

110 i‡(
fﬁlow_pv
)

111 
	`s‹t_pv
();

112 
f
 = 
FALSE
;

115 
i
 = 
fú°_move
[
∂y
]; i < first_move[ply + 1]; ++i) {

116 
	`s‹t
(
i
);

117 i‡(!
	`makemove
(
gí_d©
[
i
].
m
.
b
))

119 
f
 = 
TRUE
;

120 
x
 = -
	`£¨ch
(-
bëa
, -
Æpha
, 
dïth
 - 1);

121 
	`èkeback
();

122 i‡(
x
 > 
Æpha
) {

127 
hi°‹y
[()
gí_d©
[
i
].
m
.
b
.
‰om
][()gí_d©[i].m.b.
to
] +
dïth
;

128 i‡(
x
 >
bëa
)

129  
bëa
;

130 
Æpha
 = 
x
;

133 
pv
[
∂y
][∂y] = 
gí_d©
[
i
].
m
;

134 
j
 = 
∂y
 + 1; j < 
pv_Àngth
[ply + 1]; ++j)

135 
pv
[
∂y
][
j
] =Öv[ply + 1][j];

136 
pv_Àngth
[
∂y
] =Öv_length[ply + 1];

141 i‡(!
f
) {

142 i‡(
c
)

143  -10000 + 
∂y
;

149 i‡(
fi·y
 >= 100)

151  
Æpha
;

152 
	}
}

162 
	$quõs˚
(
Æpha
,
bëa
)

164 
i
, 
j
, 
x
;

166 ++
nodes
;

169 i‡((
nodes
 & 1023) == 0)

170 
	`checkup
();

172 
pv_Àngth
[
∂y
] =Öly;

175 i‡(
∂y
 >
MAX_PLY
 - 1)

176  
	`evÆ
();

177 i‡(
h∂y
 >
HIST_STACK
 - 1)

178  
	`evÆ
();

181 
x
 = 
	`evÆ
();

182 i‡(
x
 >
bëa
)

183  
bëa
;

184 i‡(
x
 > 
Æpha
)

185 
Æpha
 = 
x
;

187 
	`gí_ˇps
();

188 i‡(
fﬁlow_pv
)

189 
	`s‹t_pv
();

192 
i
 = 
fú°_move
[
∂y
]; i < first_move[ply + 1]; ++i) {

193 
	`s‹t
(
i
);

194 i‡(!
	`makemove
(
gí_d©
[
i
].
m
.
b
))

196 
x
 = -
	`quõs˚
(-
bëa
, -
Æpha
);

197 
	`èkeback
();

198 i‡(
x
 > 
Æpha
) {

199 i‡(
x
 >
bëa
)

200  
bëa
;

201 
Æpha
 = 
x
;

204 
pv
[
∂y
][∂y] = 
gí_d©
[
i
].
m
;

205 
j
 = 
∂y
 + 1; j < 
pv_Àngth
[ply + 1]; ++j)

206 
pv
[
∂y
][
j
] =Öv[ply + 1][j];

207 
pv_Àngth
[
∂y
] =Öv_length[ply + 1];

210  
Æpha
;

211 
	}
}

218 
	$ªps
()

220 
i
;

221 
b
[64];

222 
c
 = 0;

224 
r
 = 0;

227 i‡(
fi·y
 <= 3)

230 
	`mem£t
(
b
, 0, (b));

233 
i
 = 
h∂y
 - 1; i >h∂y - 
fi·y
 - 1; --i) {

234 i‡(++
b
[()
hi°_d©
[
i
].
m
.b.
‰om
] == 0)

235 --
c
;

237 ++
c
;

238 i‡(--
b
[()
hi°_d©
[
i
].
m
.b.
to
] == 0)

239 --
c
;

241 ++
c
;

242 i‡(
c
 == 0)

243 ++
r
;

246  
r
;

247 
	}
}

257 
	$s‹t_pv
()

259 
i
;

261 
fﬁlow_pv
 = 
FALSE
;

262 
i
 = 
fú°_move
[
∂y
]; i < first_move[ply + 1]; ++i)

263 i‡(
gí_d©
[
i
].
m
.
u
 =
pv
[0][
∂y
].u) {

264 
fﬁlow_pv
 = 
TRUE
;

265 
gí_d©
[
i
].
sc‹e
 += 10000000;

268 
	}
}

277 
	$s‹t
(
‰om
)

279 
i
;

280 
bs
;

281 
bi
;

282 
gí_t
 
g
;

284 
bs
 = -1;

285 
bi
 = 
‰om
;

286 
i
 = 
‰om
; i < 
fú°_move
[
∂y
 + 1]; ++i)

287 i‡(
gí_d©
[
i
].
sc‹e
 > 
bs
) {

288 
bs
 = 
gí_d©
[
i
].
sc‹e
;

289 
bi
 = 
i
;

291 
g
 = 
gí_d©
[
‰om
];

292 
gí_d©
[
‰om
] = gí_d©[
bi
];

293 
gí_d©
[
bi
] = 
g
;

294 
	}
}

299 
	$checkup
()

303 i‡(
	`gë_ms
(Ë>
°›_time
) {

304 
°›_£¨ch
 = 
TRUE
;

305 
	`l⁄gjmp
(
ív
, 0);

307 
	}
}

	@demos/vnc/include/rfbproto.h

58 
CARD16
 
	mx
;

59 
CARD16
 
	my
;

60 
CARD16
 
	mw
;

61 
CARD16
 
	mh
;

62 } 
	trfbRe˘™gÀ
;

64 
	#sz_rfbRe˘™gÀ
 8

	)

73 
CARD8
 
	mbôsPîPixñ
;

75 
CARD8
 
	mdïth
;

77 
CARD8
 
	mbigEndün
;

83 
CARD8
 
	måueCﬁour
;

90 
CARD16
 
	mªdMax
;

94 
CARD16
 
	mgªíMax
;

96 
CARD16
 
	mblueMax
;

98 
CARD8
 
	mªdShi·
;

110 
CARD8
 
	mgªíShi·
;

112 
CARD8
 
	mblueShi·
;

114 
CARD8
 
	m∑d1
;

115 
CARD16
 
	m∑d2
;

117 } 
	trfbPixñF‹m©
;

119 
	#sz_rfbPixñF‹m©
 16

	)

154 
	#rfbPrŸocﬁVîsi⁄F‹m©
 "RFB %03d.%03d\n"

	)

155 
	#rfbPrŸocﬁMaj‹Vîsi⁄
 3

	)

156 
	#rfbPrŸocﬁMö‹Vîsi⁄
 3

	)

158 
	trfbPrŸocﬁVîsi⁄Msg
[13];

160 
	#sz_rfbPrŸocﬁVîsi⁄Msg
 12

	)

172 
	#rfbC⁄nFaûed
 0

	)

173 
	#rfbNoAuth
 1

	)

174 
	#rfbVncAuth
 2

	)

198 
	#rfbVncAuthOK
 0

	)

199 
	#rfbVncAuthFaûed
 1

	)

200 
	#rfbVncAuthTooM™y
 2

	)

214 
CARD8
 
	msh¨ed
;

215 } 
	trfbClõ¡InôMsg
;

217 
	#sz_rfbClõ¡InôMsg
 1

	)

229 
CARD16
 
	m‰amebuf„rWidth
;

230 
CARD16
 
	m‰amebuf„rHeight
;

231 
rfbPixñF‹m©
 
	mf‹m©
;

232 
CARD32
 
	m«meLígth
;

234 } 
	trfbSîvîInôMsg
;

236 
	#sz_rfbSîvîInôMsg
 (8 + 
sz_rfbPixñF‹m©
)

	)

262 
	#rfbFømebuf„rUpd©e
 0

	)

263 
	#rfbSëCﬁourM≠E¡rõs
 1

	)

264 
	#rfbBñl
 2

	)

265 
	#rfbSîvîCutText
 3

	)

270 
	#rfbSëPixñF‹m©
 0

	)

271 
	#rfbFixCﬁourM≠E¡rõs
 1

	)

272 
	#rfbSëEncodögs
 2

	)

273 
	#rfbFømebuf„rUpd©eReque°
 3

	)

274 
	#rfbKeyEvít
 4

	)

275 
	#rfbPoöãrEvít
 5

	)

276 
	#rfbClõ¡CutText
 6

	)

287 
	#rfbEncodögRaw
 0

	)

288 
	#rfbEncodögC›yRe˘
 1

	)

289 
	#rfbEncodögRRE
 2

	)

290 
	#rfbEncodögCoRRE
 4

	)

291 
	#rfbEncodögHextûe
 5

	)

312 
CARD8
 
	mty≥
;

313 
CARD8
 
	m∑d
;

314 
CARD16
 
	mnRe˘s
;

316 } 
	trfbFømebuf„rUpd©eMsg
;

318 
	#sz_rfbFømebuf„rUpd©eMsg
 4

	)

329 
rfbRe˘™gÀ
 
	mr
;

330 
CARD32
 
	mícodög
;

331 } 
	trfbFømebuf„rUpd©eRe˘Hódî
;

333 
	#sz_rfbFømebuf„rUpd©eRe˘Hódî
 (
sz_rfbRe˘™gÀ
 + 4)

	)

348 
CARD16
 
	m§cX
;

349 
CARD16
 
	m§cY
;

350 } 
	trfbC›yRe˘
;

352 
	#sz_rfbC›yRe˘
 4

	)

363 
CARD32
 
	mnSubª˘s
;

364 } 
	trfbRREHódî
;

366 
	#sz_rfbRREHódî
 4

	)

378 
CARD8
 
	mx
;

379 
CARD8
 
	my
;

380 
CARD8
 
	mw
;

381 
CARD8
 
	mh
;

382 } 
	trfbCoRRERe˘™gÀ
;

384 
	#sz_rfbCoRRERe˘™gÀ
 4

	)

426 
	#rfbHextûeRaw
 (1 << 0)

	)

427 
	#rfbHextûeBackgroundS≥cifõd
 (1 << 1)

	)

428 
	#rfbHextûeF‹egroundS≥cifõd
 (1 << 2)

	)

429 
	#rfbHextûeAnySubª˘s
 (1 << 3)

	)

430 
	#rfbHextûeSubª˘sCﬁouªd
 (1 << 4)

	)

432 
	#rfbHextûePackXY
(
x
,
y
Ë(((xË<< 4Ë| (y))

	)

433 
	#rfbHextûePackWH
(
w
,
h
Ë((((w)-1Ë<< 4Ë| ((h)-1))

	)

434 
	#rfbHextûeExåa˘X
(
byã
Ë((byãË>> 4)

	)

435 
	#rfbHextûeExåa˘Y
(
byã
Ë((byãË& 0xf)

	)

436 
	#rfbHextûeExåa˘W
(
byã
Ë(((byãË>> 4Ë+ 1)

	)

437 
	#rfbHextûeExåa˘H
(
byã
Ë(((byãË& 0xfË+ 1)

	)

450 
CARD8
 
	mty≥
;

451 
CARD8
 
	m∑d
;

452 
CARD16
 
	mfú°Cﬁour
;

453 
CARD16
 
	mnCﬁours
;

458 } 
	trfbSëCﬁourM≠E¡rõsMsg
;

460 
	#sz_rfbSëCﬁourM≠E¡rõsMsg
 6

	)

469 
CARD8
 
	mty≥
;

470 } 
	trfbBñlMsg
;

472 
	#sz_rfbBñlMsg
 1

	)

481 
CARD8
 
	mty≥
;

482 
CARD8
 
	m∑d1
;

483 
CARD16
 
	m∑d2
;

484 
CARD32
 
	mÀngth
;

486 } 
	trfbSîvîCutTextMsg
;

488 
	#sz_rfbSîvîCutTextMsg
 8

	)

496 
CARD8
 
	mty≥
;

497 
rfbFømebuf„rUpd©eMsg
 
	mfu
;

498 
rfbSëCﬁourM≠E¡rõsMsg
 
	mscme
;

499 
rfbBñlMsg
 
	mb
;

500 
rfbSîvîCutTextMsg
 
	ms˘
;

501 } 
	trfbSîvîToClõ¡Msg
;

518 
CARD8
 
	mty≥
;

519 
CARD8
 
	m∑d1
;

520 
CARD16
 
	m∑d2
;

521 
rfbPixñF‹m©
 
	mf‹m©
;

522 } 
	trfbSëPixñF‹m©Msg
;

524 
	#sz_rfbSëPixñF‹m©Msg
 (
sz_rfbPixñF‹m©
 + 4)

	)

535 
CARD8
 
	mty≥
;

536 
CARD8
 
	m∑d
;

537 
CARD16
 
	mfú°Cﬁour
;

538 
CARD16
 
	mnCﬁours
;

543 } 
	trfbFixCﬁourM≠E¡rõsMsg
;

545 
	#sz_rfbFixCﬁourM≠E¡rõsMsg
 6

	)

555 
CARD8
 
	mty≥
;

556 
CARD8
 
	m∑d
;

557 
CARD16
 
	mnEncodögs
;

559 } 
	trfbSëEncodögsMsg
;

561 
	#sz_rfbSëEncodögsMsg
 4

	)

571 
CARD8
 
	mty≥
;

572 
CARD8
 
	mö¸emíèl
;

573 
CARD16
 
	mx
;

574 
CARD16
 
	my
;

575 
CARD16
 
	mw
;

576 
CARD16
 
	mh
;

577 } 
	trfbFømebuf„rUpd©eReque°Msg
;

579 
	#sz_rfbFømebuf„rUpd©eReque°Msg
 10

	)

614 
CARD8
 
	mty≥
;

615 
CARD8
 
	mdown
;

616 
CARD16
 
	m∑d
;

617 
CARD32
 
	mkey
;

618 } 
	trfbKeyEvítMsg
;

620 
	#sz_rfbKeyEvítMsg
 8

	)

628 
CARD8
 
	mty≥
;

629 
CARD8
 
	mbuâ⁄Mask
;

630 
CARD16
 
	mx
;

631 
CARD16
 
	my
;

632 } 
	trfbPoöãrEvítMsg
;

634 
	#rfbBuâ⁄1Mask
 1

	)

635 
	#rfbBuâ⁄2Mask
 2

	)

636 
	#rfbBuâ⁄3Mask
 4

	)

638 
	#sz_rfbPoöãrEvítMsg
 6

	)

647 
CARD8
 
	mty≥
;

648 
CARD8
 
	m∑d1
;

649 
CARD16
 
	m∑d2
;

650 
CARD32
 
	mÀngth
;

652 } 
	trfbClõ¡CutTextMsg
;

654 
	#sz_rfbClõ¡CutTextMsg
 8

	)

663 
CARD8
 
	mty≥
;

664 
rfbSëPixñF‹m©Msg
 
	m•f
;

665 
rfbFixCﬁourM≠E¡rõsMsg
 
	mfcme
;

666 
rfbSëEncodögsMsg
 
	m£
;

667 
rfbFømebuf„rUpd©eReque°Msg
 
	mfur
;

668 
rfbKeyEvítMsg
 
	mke
;

669 
rfbPoöãrEvítMsg
 
	m≥
;

670 
rfbClõ¡CutTextMsg
 
	mc˘
;

671 } 
	trfbClõ¡ToSîvîMsg
;

	@demos/vnc/include/vncauth.h

24 
	#MAXPWLEN
 8

	)

25 
	#CHALLENGESIZE
 16

	)

27 
vncEn¸y±AndSt‹ePasswd
(*
∑sswd
, *
‚ame
);

28 *
vncDe¸y±PasswdFromFûe
(*
‚ame
);

29 
vncR™domByãs
(*
byãs
);

30 
vncEn¸y±Byãs
(*
byãs
, *
∑sswd
);

	@demos/vnc/libvncauth/d3des.c

28 
	~"d3des.h
"

30 
s¸unch
(*, *);

31 
uns¸un
(*, *);

32 
desfunc
(*, *);

33 
cookey
(*);

35 
	gKnL
[32] = { 0L };

43 
	gbyãbô
[8] = {

46 
	gbigbyã
[24] = {

56 
	gpc1
[56] = {

62 
	gtŸrŸ
[16] = {

65 
	gpc2
[48] = {

72 
	$deskey
(*
key
, 
edf
)

74 
i
, 
j
, 
l
, 
m
, 
n
;

75 
pc1m
[56], 
p¸
[56];

76 
kn
[32];

78  
j
 = 0; j < 56; j++ ) {

79 
l
 = 
pc1
[
j
];

80 
m
 = 
l
 & 07;

81 
pc1m
[
j
] = (
key
[
l
 >> 3] & 
byãbô
[
m
]) ? 1 : 0;

83  
i
 = 0; i < 16; i++ ) {

84 if–
edf
 =
DE1
 ) 
m
 = (15 - 
i
) << 1;

85 
m
 = 
i
 << 1;

86 
n
 = 
m
 + 1;

87 
kn
[
m
] = kn[
n
] = 0L;

88  
j
 = 0; j < 28; j++ ) {

89 
l
 = 
j
 + 
tŸrŸ
[
i
];

90 if–
l
 < 28 ) 
p¸
[
j
] = 
pc1m
[l];

91 
p¸
[
j
] = 
pc1m
[
l
 - 28];

93  
j
 = 28; j < 56; j++ ) {

94 
l
 = 
j
 + 
tŸrŸ
[
i
];

95 if–
l
 < 56 ) 
p¸
[
j
] = 
pc1m
[l];

96 
p¸
[
j
] = 
pc1m
[
l
 - 28];

98  
j
 = 0; j < 24; j++ ) {

99 if–
p¸
[
pc2
[
j
]] ) 
kn
[
m
] |
bigbyã
[j];

100 if–
p¸
[
pc2
[
j
+24]] ) 
kn
[
n
] |
bigbyã
[j];

103 
	`cookey
(
kn
);

105 
	}
}

107 
	$cookey
(*
øw1
)

109 *
cook
, *
øw0
;

110 
dough
[32];

111 
i
;

113 
cook
 = 
dough
;

114  
i
 = 0; i < 16; i++, 
øw1
++ ) {

115 
øw0
 = 
øw1
++;

116 *
cook
 = (*
øw0
 & 0x00fc0000L) << 6;

117 *
cook
 |(*
øw0
 & 0x00000fc0L) << 10;

118 *
cook
 |(*
øw1
 & 0x00fc0000L) >> 10;

119 *
cook
++ |(*
øw1
 & 0x00000fc0L) >> 6;

120 *
cook
 = (*
øw0
 & 0x0003f000L) << 12;

121 *
cook
 |(*
øw0
 & 0x0000003fL) << 16;

122 *
cook
 |(*
øw1
 & 0x0003f000L) >> 4;

123 *
cook
++ |(*
øw1
 & 0x0000003fL);

125 
	`u£key
(
dough
);

127 
	}
}

129 
	$˝key
(*
öto
)

131 *
‰om
, *
ídp
;

133 
‰om
 = 
KnL
, 
ídp
 = &KnL[32];

134  
‰om
 < 
ídp
 ) *
öto
++ = *from++;

136 
	}
}

138 
	$u£key
(*
‰om
)

140 *
to
, *
ídp
;

142 
to
 = 
KnL
, 
ídp
 = &KnL[32];

143  
to
 < 
ídp
 ) *to++ = *
‰om
++;

145 
	}
}

147 
	$des
(*
öblock
, *
outblock
)

149 
w‹k
[2];

151 
	`s¸unch
(
öblock
, 
w‹k
);

152 
	`desfunc
(
w‹k
, 
KnL
);

153 
	`uns¸un
(
w‹k
, 
outblock
);

155 
	}
}

157 
	$s¸unch
(*
outof
, *
öto
)

159 *
öto
 = (*
outof
++ & 0xffL) << 24;

160 *
öto
 |(*
outof
++ & 0xffL) << 16;

161 *
öto
 |(*
outof
++ & 0xffL) << 8;

162 *
öto
++ |(*
outof
++ & 0xffL);

163 *
öto
 = (*
outof
++ & 0xffL) << 24;

164 *
öto
 |(*
outof
++ & 0xffL) << 16;

165 *
öto
 |(*
outof
++ & 0xffL) << 8;

166 *
öto
 |(*
outof
 & 0xffL);

168 
	}
}

170 
	$uns¸un
(*
outof
, *
öto
)

172 *
öto
++ = (*
outof
 >> 24) & 0xffL;

173 *
öto
++ = (*
outof
 >> 16) & 0xffL;

174 *
öto
++ = (*
outof
 >> 8) & 0xffL;

175 *
öto
++ = *
outof
++ & 0xffL;

176 *
öto
++ = (*
outof
 >> 24) & 0xffL;

177 *
öto
++ = (*
outof
 >> 16) & 0xffL;

178 *
öto
++ = (*
outof
 >> 8) & 0xffL;

179 *
öto
 = *
outof
 & 0xffL;

181 
	}
}

183 
	gSP1
[64] = {

201 
	gSP2
[64] = {

219 
	gSP3
[64] = {

237 
	gSP4
[64] = {

255 
	gSP5
[64] = {

273 
	gSP6
[64] = {

291 
	gSP7
[64] = {

309 
	gSP8
[64] = {

327 
	$desfunc
(*
block
, *
keys
)

329 
fvÆ
, 
w‹k
, 
right
, 
À·t
;

330 
round
;

332 
À·t
 = 
block
[0];

333 
right
 = 
block
[1];

334 
w‹k
 = ((
À·t
 >> 4Ë^ 
right
) & 0x0f0f0f0fL;

335 
right
 ^
w‹k
;

336 
À·t
 ^(
w‹k
 << 4);

337 
w‹k
 = ((
À·t
 >> 16Ë^ 
right
) & 0x0000ffffL;

338 
right
 ^
w‹k
;

339 
À·t
 ^(
w‹k
 << 16);

340 
w‹k
 = ((
right
 >> 2Ë^ 
À·t
) & 0x33333333L;

341 
À·t
 ^
w‹k
;

342 
right
 ^(
w‹k
 << 2);

343 
w‹k
 = ((
right
 >> 8Ë^ 
À·t
) & 0x00ff00ffL;

344 
À·t
 ^
w‹k
;

345 
right
 ^(
w‹k
 << 8);

346 
right
 = ((right << 1) | ((right >> 31) & 1L)) & 0xffffffffL;

347 
w‹k
 = (
À·t
 ^ 
right
) & 0xaaaaaaaaL;

348 
À·t
 ^
w‹k
;

349 
right
 ^
w‹k
;

350 
À·t
 = ((leftt << 1) | ((leftt >> 31) & 1L)) & 0xffffffffL;

352  
round
 = 0;Ñound < 8;Ñound++ ) {

353 
w‹k
 = (
right
 << 28) | (right >> 4);

354 
w‹k
 ^*
keys
++;

355 
fvÆ
 = 
SP7
[ 
w‹k
 & 0x3fL];

356 
fvÆ
 |
SP5
[(
w‹k
 >> 8) & 0x3fL];

357 
fvÆ
 |
SP3
[(
w‹k
 >> 16) & 0x3fL];

358 
fvÆ
 |
SP1
[(
w‹k
 >> 24) & 0x3fL];

359 
w‹k
 = 
right
 ^ *
keys
++;

360 
fvÆ
 |
SP8
[ 
w‹k
 & 0x3fL];

361 
fvÆ
 |
SP6
[(
w‹k
 >> 8) & 0x3fL];

362 
fvÆ
 |
SP4
[(
w‹k
 >> 16) & 0x3fL];

363 
fvÆ
 |
SP2
[(
w‹k
 >> 24) & 0x3fL];

364 
À·t
 ^
fvÆ
;

365 
w‹k
 = (
À·t
 << 28) | (leftt >> 4);

366 
w‹k
 ^*
keys
++;

367 
fvÆ
 = 
SP7
[ 
w‹k
 & 0x3fL];

368 
fvÆ
 |
SP5
[(
w‹k
 >> 8) & 0x3fL];

369 
fvÆ
 |
SP3
[(
w‹k
 >> 16) & 0x3fL];

370 
fvÆ
 |
SP1
[(
w‹k
 >> 24) & 0x3fL];

371 
w‹k
 = 
À·t
 ^ *
keys
++;

372 
fvÆ
 |
SP8
[ 
w‹k
 & 0x3fL];

373 
fvÆ
 |
SP6
[(
w‹k
 >> 8) & 0x3fL];

374 
fvÆ
 |
SP4
[(
w‹k
 >> 16) & 0x3fL];

375 
fvÆ
 |
SP2
[(
w‹k
 >> 24) & 0x3fL];

376 
right
 ^
fvÆ
;

379 
right
 = (right << 31) | (right >> 1);

380 
w‹k
 = (
À·t
 ^ 
right
) & 0xaaaaaaaaL;

381 
À·t
 ^
w‹k
;

382 
right
 ^
w‹k
;

383 
À·t
 = (leftt << 31) | (leftt >> 1);

384 
w‹k
 = ((
À·t
 >> 8Ë^ 
right
) & 0x00ff00ffL;

385 
right
 ^
w‹k
;

386 
À·t
 ^(
w‹k
 << 8);

387 
w‹k
 = ((
À·t
 >> 2Ë^ 
right
) & 0x33333333L;

388 
right
 ^
w‹k
;

389 
À·t
 ^(
w‹k
 << 2);

390 
w‹k
 = ((
right
 >> 16Ë^ 
À·t
) & 0x0000ffffL;

391 
À·t
 ^
w‹k
;

392 
right
 ^(
w‹k
 << 16);

393 
w‹k
 = ((
right
 >> 4Ë^ 
À·t
) & 0x0f0f0f0fL;

394 
À·t
 ^
w‹k
;

395 
right
 ^(
w‹k
 << 4);

396 *
block
++ = 
right
;

397 *
block
 = 
À·t
;

399 
	}
}

	@demos/vnc/libvncauth/d3des.h

21 
	#EN0
 0

	)

22 
	#DE1
 1

	)

24 
deskey
(*, );

31 
u£key
(*);

36 
˝key
(*);

42 
des
(*, *);

	@demos/vnc/libvncauth/vncauth.c

24 
	~<°dio.h
>

25 
	~<°dlib.h
>

26 
	~<°rög.h
>

27 
	~<time.h
>

28 
	~<sys/ty≥s.h
>

29 
	~<sys/°©.h
>

30 
	~<vnˇuth.h
>

31 
	~<d3des.h
>

40 
	gfixedkey
[8] = {23,82,107,6,35,78,88,7};

49 
	$vncEn¸y±AndSt‹ePasswd
(*
∑sswd
, *
‚ame
)

51 
FILE
 *
Â
;

52 
i
;

53 
í¸y±edPasswd
[8];

55 i‡((
Â
 = 
	`f›í
(
‚ame
,"w")Ë=
NULL
)  1;

57 
	`chmod
(
‚ame
, 
S_IRUSR
|
S_IWUSR
);

61 
i
 = 0; i < 8; i++) {

62 i‡(
i
 < 
	`°æí
(
∑sswd
)) {

63 
í¸y±edPasswd
[
i
] = 
∑sswd
[i];

65 
í¸y±edPasswd
[
i
] = 0;

72 
	`deskey
(
fixedkey
, 
EN0
);

73 
	`des
(
í¸y±edPasswd
,ÉncryptedPasswd);

75 
i
 = 0; i < 8; i++) {

76 
	`putc
(
í¸y±edPasswd
[
i
], 
Â
);

79 
	`f˛o£
(
Â
);

81 
	}
}

91 
	$vncDe¸y±PasswdFromFûe
(*
‚ame
)

93 
FILE
 *
Â
;

94 
i
, 
ch
;

95 *
∑sswd
 = (*)
	`mÆloc
(9);

97 i‡((
Â
 = 
	`f›í
(
‚ame
,"r")Ë=
NULL
)  NULL;

99 
i
 = 0; i < 8; i++) {

100 
ch
 = 
	`gëc
(
Â
);

101 i‡(
ch
 =
EOF
) {

102 
	`f˛o£
(
Â
);

103  
NULL
;

105 
∑sswd
[
i
] = 
ch
;

108 
	`f˛o£
(
Â
);

110 
	`deskey
(
fixedkey
, 
DE1
);

111 
	`des
(
∑sswd
,Öasswd);

113 
∑sswd
[8] = 0;

115  (*)
∑sswd
;

116 
	}
}

125 
	$vncR™domByãs
(*
byãs
)

127 
i
;

128 
£ed
 = (Ë
	`time
(0);

130 
	`§™dom
(
£ed
);

131 
i
 = 0; i < 
CHALLENGESIZE
; i++) {

132 
byãs
[
i
] = ()(
	`øndom
() & 255);

134 
	}
}

142 
	$vncEn¸y±Byãs
(*
byãs
, *
∑sswd
)

144 
key
[8];

145 
i
;

149 
i
 = 0; i < 8; i++) {

150 i‡(
i
 < 
	`°æí
(
∑sswd
)) {

151 
key
[
i
] = 
∑sswd
[i];

153 
key
[
i
] = 0;

157 
	`deskey
(
key
, 
EN0
);

159 
i
 = 0; i < 
CHALLENGESIZE
; i += 8) {

160 
	`des
(
byãs
+
i
, bytes+i);

162 
	}
}

	@demos/vnc/vncviewer/args.c

24 
	~<sys/ut¢ame.h
>

25 
	~<vncvõwî.h
>

27 
	#FLASHPORT
 (5400Ë

	)

28 
	#CLIENTPORT
 (5500Ë

	)

29 
	#SERVERPORT
 (5900Ë

	)

31 *
	g¥ogømName
;

33 
	gho°«me
[256];

34 
	gp‹t
;

36 
Boﬁ
 
	gli°íS≥cifõd
 = 
FÆ£
;

37 
	gli°íP‹t
 = 0, 
	gÊashP‹t
 = 0;

39 *
	gdi•œy«me
 = 
NULL
;

41 
Boﬁ
 
	gsh¨eDeskt›
 = 
FÆ£
;

42 
Boﬁ
 
	gvõwO∆y
 = 
FÆ£
;

44 
CARD32
 
	gex∂icôEncodögs
[
MAX_ENCODINGS
];

45 
	gnEx∂icôEncodögs
 = 0;

46 
Boﬁ
 
	gaddC›yRe˘
 = 
True
;

47 
Boﬁ
 
	gaddRRE
 = 
True
;

48 
Boﬁ
 
	gaddCoRRE
 = 
True
;

49 
Boﬁ
 
	gaddHextûe
 = 
True
;

51 
Boﬁ
 
	gu£BGR233
 = 
FÆ£
;

52 
Boﬁ
 
	gf‹˚OwnCm≠
 = 
FÆ£
;

53 
Boﬁ
 
	gf‹˚Truecﬁour
 = 
FÆ£
;

54 
	gªque°edDïth
 = 0;

56 *
	ggeomëry
 = 
NULL
;

58 
	gwmDec‹©i⁄Width
 = 4;

59 
	gwmDec‹©i⁄Height
 = 24;

61 *
	g∑sswdFûe
 = 
NULL
;

63 
	gupd©eReque°Pîiodms
 = 0;

65 
	gupd©eReque°X
 = 0;

66 
	gupd©eReque°Y
 = 0;

67 
	gupd©eReque°W
 = 0;

68 
	gupd©eReque°H
 = 0;

70 
	gøwDñay
 = 0;

71 
	gc›yRe˘Dñay
 = 0;

73 
Boﬁ
 
	gdebug
 = 
FÆ£
;

77 
	$ußge
()

79 
	`Ârötf
(
°dîr
,"\n"

83 "<›ti⁄s>áª:\n" ,
¥ogømName
,programName);

84 
	`Ârötf
(
°dîr
,

96 
	`exô
(1);

97 
	}
}

101 
	$¥o˚ssArgs
(
¨gc
, **
¨gv
)

103 
i
;

104 
Boﬁ
 
¨gumítS≥cifõd
 = 
FÆ£
;

106 
¥ogømName
 = 
¨gv
[0];

108 
i
 = 1; i < 
¨gc
; i++) {

110 i‡(
	`°rcmp
(
¨gv
[
i
],"-display") == 0) {

112 i‡(++
i
 >
¨gc
Ë
	`ußge
();

113 
di•œy«me
 = 
¨gv
[
i
];

115 } i‡(
	`°rcmp
(
¨gv
[
i
],"-shared") == 0) {

117 
sh¨eDeskt›
 = 
True
;

119 } i‡(
	`°rcmp
(
¨gv
[
i
],"-viewonly") == 0) {

121 
võwO∆y
 = 
True
;

123 } i‡(
	`°rcmp
(
¨gv
[
i
],"-rre") == 0) {

125 
ex∂icôEncodögs
[
nEx∂icôEncodögs
++] = 
rfbEncodögRRE
;

126 
addRRE
 = 
FÆ£
;

128 } i‡(
	`°rcmp
(
¨gv
[
i
],"-corre") == 0) {

130 
ex∂icôEncodögs
[
nEx∂icôEncodögs
++] = 
rfbEncodögCoRRE
;

131 
addCoRRE
 = 
FÆ£
;

133 } i‡(
	`°rcmp
(
¨gv
[
i
],"-hextile") == 0) {

135 
ex∂icôEncodögs
[
nEx∂icôEncodögs
++] = 
rfbEncodögHextûe
;

136 
addHextûe
 = 
FÆ£
;

138 } i‡(
	`°rcmp
(
¨gv
[
i
],"-copyrect") == 0) {

140 
ex∂icôEncodögs
[
nEx∂icôEncodögs
++] = 
rfbEncodögC›yRe˘
;

141 
addC›yRe˘
 = 
FÆ£
;

143 } i‡(
	`°rcmp
(
¨gv
[
i
],"-raw") == 0) {

145 
ex∂icôEncodögs
[
nEx∂icôEncodögs
++] = 
rfbEncodögRaw
;

147 } i‡(
	`°rcmp
(
¨gv
[
i
],"-norre") == 0) {

149 
addRRE
 = 
FÆ£
;

151 } i‡(
	`°rcmp
(
¨gv
[
i
],"-nocorre") == 0) {

153 
addCoRRE
 = 
FÆ£
;

155 } i‡(
	`°rcmp
(
¨gv
[
i
],"-nohextile") == 0) {

157 
addHextûe
 = 
FÆ£
;

159 } i‡(
	`°rcmp
(
¨gv
[
i
],"-nocopyrect") == 0) {

161 
addC›yRe˘
 = 
FÆ£
;

163 } i‡(
	`°rcmp
(
¨gv
[
i
],"-bgr233") == 0) {

165 
u£BGR233
 = 
True
;

167 } i‡(
	`°rcmp
(
¨gv
[
i
],"-owncmap") == 0) {

169 
f‹˚OwnCm≠
 = 
True
;

171 } i‡(
	`°rcmp
(
¨gv
[
i
],"-truecolour") == 0) {

173 
f‹˚Truecﬁour
 = 
True
;

175 } i‡(
	`°rcmp
(
¨gv
[
i
],"-depth") == 0) {

177 i‡(++
i
 >
¨gc
Ë
	`ußge
();

178 
ªque°edDïth
 = 
	`©oi
(
¨gv
[
i
]);

180 } i‡(
	`°rcmp
(
¨gv
[
i
],"-geometry") == 0) {

182 i‡(++
i
 >
¨gc
Ë
	`ußge
();

183 
geomëry
 = 
¨gv
[
i
];

185 } i‡(
	`°rcmp
(
¨gv
[
i
],"-wmdecoration") == 0) {

187 i‡(++
i
 >
¨gc
Ë
	`ußge
();

188 i‡(
	`ssˇnf
(
¨gv
[
i
], "%dx%d",

189 &
wmDec‹©i⁄Width
, &
wmDec‹©i⁄Height
Ë!2Ë
	`ußge
();

191 } i‡(
	`°rcmp
(
¨gv
[
i
],"-passwd") == 0) {

193 i‡(++
i
 >
¨gc
Ë
	`ußge
();

194 
∑sswdFûe
 = 
¨gv
[
i
];

196 } i‡(
	`°rcmp
(
¨gv
[
i
],"-period") == 0) {

198 i‡(++
i
 >
¨gc
Ë
	`ußge
();

199 
upd©eReque°Pîiodms
 = 
	`©oi
(
¨gv
[
i
]);

201 } i‡(
	`°rcmp
(
¨gv
[
i
],"-region") == 0) {

203 i‡((
i
+4Ë>
¨gc
Ë
	`ußge
();

204 
upd©eReque°X
 = 
	`©oi
(
¨gv
[
i
+1]);

205 
upd©eReque°Y
 = 
	`©oi
(
¨gv
[
i
+2]);

206 
upd©eReque°W
 = 
	`©oi
(
¨gv
[
i
+3]);

207 
upd©eReque°H
 = 
	`©oi
(
¨gv
[
i
+4]);

208 i‡((
upd©eReque°X
 < 0Ë|| (
upd©eReque°Y
 < 0) ||

209 (
upd©eReque°W
 < 0Ë|| (
upd©eReque°H
 < 0))

210 
	`ußge
();

211 
i
 += 4;

213 } i‡(
	`°rcmp
(
¨gv
[
i
],"-rawdelay") == 0) {

215 i‡(++
i
 >
¨gc
Ë
	`ußge
();

216 
øwDñay
 = 
	`©oi
(
¨gv
[
i
]);

218 } i‡(
	`°rcmp
(
¨gv
[
i
],"-copyrectdelay") == 0) {

220 i‡(++
i
 >
¨gc
Ë
	`ußge
();

221 
c›yRe˘Dñay
 = 
	`©oi
(
¨gv
[
i
]);

223 } i‡(
	`°rcmp
(
¨gv
[
i
],"-debug") == 0) {

225 
debug
 = 
True
;

227 } i‡(
	`°rcmp
(
¨gv
[
i
],"-listen") == 0) {

229 i‡(
¨gumítS≥cifõd
Ë
	`ußge
();

231 
li°íS≥cifõd
 = 
True
;

232 i‡(++
i
 < 
¨gc
) {

233 
li°íP‹t
 = 
CLIENTPORT
+
	`©oi
(
¨gv
[
i
]);

234 
ÊashP‹t
 = 
FLASHPORT
+
	`©oi
(
¨gv
[
i
]);

237 } i‡(
¨gv
[
i
][0] != '-') {

239 i‡(
¨gumítS≥cifõd
 || 
li°íS≥cifõd
Ë
	`ußge
();

241 
¨gumítS≥cifõd
 = 
True
;

243 i‡(
	`ssˇnf
(
¨gv
[
i
], "%[^:]:%d", 
ho°«me
, &
p‹t
Ë!2Ë
	`ußge
();

245 i‡(
p‹t
 < 100)

246 
p‹t
 +
SERVERPORT
;

250 
	`ußge
();

255 i‡(
li°íS≥cifõd
) {

256 i‡(
li°íP‹t
 == 0) {

257 *
di•œy
;

258 *
cﬁ⁄Pos
;

259 
ut¢ame
 
ho°öfo
;

261 
di•œy
 = 
	`XDi•œyName
(
di•œy«me
);

262 
cﬁ⁄Pos
 = 
	`°rchr
(
di•œy
, ':');

264 
	`u«me
(&
ho°öfo
);

266 i‡(
cﬁ⁄Pos
 && ((cﬁ⁄Po†=
di•œy
) ||

267 (
	`°∫cmp
(
ho°öfo
.
nodíame
, 
di•œy
,

268 
	`°æí
(
ho°öfo
.
nodíame
)) == 0))) {

270 
li°íP‹t
 = 
CLIENTPORT
+
	`©oi
(
cﬁ⁄Pos
+1);

271 
ÊashP‹t
 = 
FLASHPORT
+
	`©oi
(
cﬁ⁄Pos
+1);

274 
	`Ârötf
(
°dîr
,"%s: cannot work out which displayÇumberÅo "

275 "li°í on.\n", 
¥ogømName
);

276 
	`Ârötf
(
°dîr
,

278 
	`exô
(1);

282 } i‡(!
¨gumítS≥cifõd
) {

284 
	`ußge
();

287 
	}
}

	@demos/vnc/vncviewer/listen.c

24 
	~<uni°d.h
>

25 
	~<sys/ty≥s.h
>

26 
	~<sys/waô.h
>

27 
	~<sys/time.h
>

28 
	~<vncvõwî.h
>

30 
	#FLASHWIDTH
 50

	)

31 
	#FLASHDELAY
 1

	)

33 
F⁄t
 
	gÊashF⁄t
;

35 
gëFœshF⁄t
(
Di•œy
 *
d
);

36 
ÊashDi•œy
(
Di•œy
 *
d
, *
u£r
);

39 
	$li°íF‹IncomögC⁄√˘i⁄s
()

41 
Di•œy
 *
d
;

42 
XEvít
 
ev
;

43 
li°íSockë
, 
ÊashSockë
, 
sock
;

44 
fd_£t
 
fds
;

45 
ÊashU£r
[256];

46 
n
;

48 i‡(!(
d
 = 
	`XO≥nDi•œy
(
di•œy«me
))) {

49 
	`Ârötf
(
°dîr
,"%s: unableÅo open display %s\n",

50 
¥ogømName
, 
	`XDi•œyName
(
di•œy«me
));

51 
	`exô
(1);

54 
	`gëFœshF⁄t
(
d
);

56 
li°íSockë
 = 
	`Li°íAtT˝P‹t
(
li°íP‹t
);

57 
ÊashSockë
 = 
	`Li°íAtT˝P‹t
(
ÊashP‹t
);

59 i‡((
li°íSockë
 < 0Ë|| (
ÊashSockë
 < 0)Ë
	`exô
(1);

61 
	`Ârötf
(
°dîr
,"%s: Listening onÖort %d (flashÖort %d)\n",

62 
¥ogømName
,
li°íP‹t
,
ÊashP‹t
);

64 
True
) {

67 
°©us
, 
pid
;

68 (
pid

	`waô3
(&
°©us
, 
WNOHANG
, (
rußge
 *)0))>0);

71 
	`XCheckIfEvít
(
d
, &
ev
, 
AŒXEvítsPªdiˇã
, 
NULL
))

74 
	`FD_ZERO
(&
fds
);

76 
	`FD_SET
(
ÊashSockë
, &
fds
);

77 
	`FD_SET
(
li°íSockë
, &
fds
);

78 
	`FD_SET
(
	`C⁄√˘i⁄Numbî
(
d
), &
fds
);

80 
	`£À˘
(
FD_SETSIZE
, &
fds
, 
NULL
, NULL, NULL);

82 i‡(
	`FD_ISSET
(
ÊashSockë
, &
fds
)) {

84 
sock
 = 
	`Ac˚±T˝C⁄√˘i⁄
(
ÊashSockë
);

85 i‡(
sock
 < 0Ë
	`exô
(1);

86 
n
 = 
	`ªad
(
sock
, 
ÊashU£r
, 255);

87 i‡(
n
 > 0) {

88 
ÊashU£r
[
n
] = 0;

89 
	`ÊashDi•œy
(
d
, 
ÊashU£r
);

91 
	`ÊashDi•œy
(
d
, 
NULL
);

93 
	`˛o£
(
sock
);

96 i‡(
	`FD_ISSET
(
li°íSockë
, &
fds
)) {

97 
rfbsock
 = 
	`Ac˚±T˝C⁄√˘i⁄
(
li°íSockë
);

98 i‡(
rfbsock
 < 0Ë
	`exô
(1);

100 
	`XClo£Di•œy
(
d
);

104 
	`f‹k
()) {

107 
	`≥º‹
("fork");

108 
	`exô
(1);

112 
	`˛o£
(
li°íSockë
);

113 
	`˛o£
(
ÊashSockë
);

118 
	`˛o£
(
rfbsock
);

119 i‡(!(
d
 = 
	`XO≥nDi•œy
(
di•œy«me
))) {

120 
	`Ârötf
(
°dîr
,"%s: unableÅo open display \"%s\"\r\n",

121 
¥ogømName
, 
	`XDi•œyName
 (
di•œy«me
));

122 
	`exô
(1);

124 
	`gëFœshF⁄t
(
d
);

129 
	}
}

137 
	$gëFœshF⁄t
(
Di•œy
 *
d
)

139 
f⁄tName
[256];

140 **
f⁄tNames
;

141 
nF⁄tNames
;

143 
	`•rötf
(
f⁄tName
,"-*-courier-bold-r-*-*-%d-*-*-*-*-*-iso8859-1",

144 
FLASHWIDTH
);

145 
f⁄tNames
 = 
	`XLi°F⁄ts
(
d
, 
f⁄tName
, 1, &
nF⁄tNames
);

146 i‡(
nF⁄tNames
 == 1) {

147 
	`XFªeF⁄tNames
(
f⁄tNames
);

149 
	`•rötf
(
f⁄tName
,"fixed");

151 
ÊashF⁄t
 = 
	`XLﬂdF⁄t
(
d
, 
f⁄tName
);

152 
	}
}

160 
	$ÊashDi•œy
(
Di•œy
 *
d
, *
u£r
)

162 
Wödow
 
w1
, 
w2
, 
w3
, 
w4
;

163 
XSëWödowAâribuãs
 
©å
;

165 
	`XBñl
(
d
, 100);

167 
	`XF‹˚S¸ìnSavî
(
d
, 
S¸ìnSavîRe£t
);

169 
©å
.
background_pixñ
 = 
	`BœckPixñ
(
d
, 
	`DeÁu…S¸ìn
(d));

170 
©å
.
ovîride_ªdúe˘
 = 1;

171 
©å
.
ßve_undî
 = 
True
;

173 
w1
 = 
	`XCª©eWödow
(
d
, 
	`DeÁu…RoŸWödow
(d), 0, 0,

174 
	`WidthOfS¸ìn
(
	`DeÁu…S¸ìnOfDi•œy
(
d
)),

175 
FLASHWIDTH
, 0,

176 
C›yFromP¨ít
, CopyFromParent, CopyFromParent,

177 
CWBackPixñ
|
CWOvîrideRedúe˘
|
CWSaveUndî
,

178 &
©å
);

180 
w2
 = 
	`XCª©eWödow
(
d
, 
	`DeÁu…RoŸWödow
(d), 0, 0, 
FLASHWIDTH
,

181 
	`HeightOfS¸ìn
(
	`DeÁu…S¸ìnOfDi•œy
(
d
)), 0,

182 
C›yFromP¨ít
, CopyFromParent, CopyFromParent,

183 
CWBackPixñ
|
CWOvîrideRedúe˘
|
CWSaveUndî
,

184 &
©å
);

186 
w3
 = 
	`XCª©eWödow
(
d
, 
	`DeÁu…RoŸWödow
(d),

187 
	`WidthOfS¸ìn
(
	`DeÁu…S¸ìnOfDi•œy
(
d
))-
FLASHWIDTH
,

188 0, 
FLASHWIDTH
,

189 
	`HeightOfS¸ìn
(
	`DeÁu…S¸ìnOfDi•œy
(
d
)), 0,

190 
C›yFromP¨ít
, CopyFromParent, CopyFromParent,

191 
CWBackPixñ
|
CWOvîrideRedúe˘
|
CWSaveUndî
,

192 &
©å
);

194 
w4
 = 
	`XCª©eWödow
(
d
, 
	`DeÁu…RoŸWödow
(d), 0,

195 
	`HeightOfS¸ìn
(
	`DeÁu…S¸ìnOfDi•œy
(
d
))-
FLASHWIDTH
,

196 
	`WidthOfS¸ìn
(
	`DeÁu…S¸ìnOfDi•œy
(
d
)),

197 
FLASHWIDTH
, 0,

198 
C›yFromP¨ít
, CopyFromParent, CopyFromParent,

199 
CWBackPixñ
|
CWOvîrideRedúe˘
|
CWSaveUndî
,

200 &
©å
);

202 
	`XM≠Wödow
(
d
, 
w1
);

203 
	`XM≠Wödow
(
d
, 
w2
);

204 
	`XM≠Wödow
(
d
, 
w3
);

205 
	`XM≠Wödow
(
d
, 
w4
);

207 i‡(
u£r
) {

208 
GC
 
gc
;

209 
XGCVÆues
 
gcv
;

211 
gcv
.
f‹eground
 = 
	`WhôePixñ
(
d
, 
	`DeÁu…S¸ìn
(d));

212 
gcv
.
f⁄t
 = 
ÊashF⁄t
;

213 
gc
 = 
	`XCª©eGC
(
d
, 
w1
, 
GCF‹eground
|
GCF⁄t
, &
gcv
);

214 
	`XDøwSåög
(
d
, 
w1
, 
gc
,

215 
	`WidthOfS¸ìn
(
	`DeÁu…S¸ìnOfDi•œy
(
d
)Ë/ 2 - 
FLASHWIDTH
,

216 (
FLASHWIDTH
 * 3 / 4), 
u£r
, 
	`°æí
(user));

218 
	`XFlush
(
d
);

220 
	`¶ìp
(
FLASHDELAY
);

222 
	`XDe°royWödow
(
d
, 
w1
);

223 
	`XDe°royWödow
(
d
, 
w2
);

224 
	`XDe°royWödow
(
d
, 
w3
);

225 
	`XDe°royWödow
(
d
, 
w4
);

226 
	`XFlush
(
d
);

227 
	}
}

	@demos/vnc/vncviewer/nanox.c

36 
	~<vncvõwî.h
>

37 
	~<uni°d.h
>

39 
	#VW_WIDTH
 1024

	)

40 
	#VW_HEIGHT
 768

	)

41 
	#VW_X
 0

	)

42 
	#VW_Y
 0

	)

44 
	#SCROLLBAR_SIZE
 10

	)

45 
	#SCROLLBAR_BG_SIZE
 (
SCROLLBAR_SIZE
 + 2)

	)

47 
	#INVALID_PIXEL
 0xffffffff

	)

48 
	#COLORMAP_SIZE
 256

	)

53 
Cﬁ‹m≠
 
	gcm≠
;

54 
Di•œy
 *
	gdpy
;

55 
Wödow
 
	gˇnvas
;

56 
GR_GC_ID
 
	ggc
;

57 
GR_GC_ID
 
	g§cGC
;

58 
GR_GC_ID
 
	gd°GC
;

61 
	gBGR233ToPixñ
[
COLORMAP_SIZE
] = { \

76 
GR_PALETTE
 
	g§v_∑l
;

82 
CARD32
 
	gkm≠
[] = {0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0xff51, 0xff53, \

99 
Di•œy
 
	gnx_dpy
;

100 
GR_WINDOW_ID
 
	gwid
;

101 
	gpixty≥
;

103 
C›yBGR233ToS¸ìn
(
CARD8
 *
buf
, 
x
, 
y
, 
width
, 
height
);

105 
MWPIXELVAL
 
gr_f‹eground
;

110 
Boﬁ


111 
	$Cª©eXWödow
()

113 
fd
;

114 
GR_SIZE
 
w
, 
h
;

115 
GR_SCREEN_INFO
 
si
;

117 i‡((
fd
 = 
	`GrO≥n
()) < 0)

118 (
FÆ£
);

119 
nx_dpy
.
fd
 = fd;

120 
dpy
 = &
nx_dpy
;

122 
	`GrGëS¸ìnInfo
(&
si
);

124 
myF‹m©
.
bôsPîPixñ
 = 
si
.
bµ
;

125 
myF‹m©
.
dïth
 = 
si
.
bµ
;

126 
myF‹m©
.
bigEndün
 = 0;

127 
myF‹m©
.
åueCﬁour
 = (myF‹m©.
dïth
 =8 && !
u£BGR233
) ? 0 : 1;

128 i‡(
myF‹m©
.
åueCﬁour
) {

129 
myF‹m©
.
ªdMax
 = myF‹m©.
gªíMax
 = 7;

130 
myF‹m©
.
blueMax
 = 3;

131 
myF‹m©
.
ªdShi·
 = 0;

132 
myF‹m©
.
gªíShi·
 = 3;

133 
myF‹m©
.
blueShi·
 = 6;

135 
pixty≥
 = 
si
.pixtype;

137 
	`GrGëSy°emPÆëã
(&
§v_∑l
);

140 
i
 = 0; i < 
§v_∑l
.
cou¡
; i++) {

141 
	`¥ötf
("0x%02x %03d %03d %03d\n", 
i
, \

142 
§v_∑l
.
∑Àâe
[
i
].
r
, srv_∑l.∑Àâe[i].
g
, \

143 
§v_∑l
.
∑Àâe
[
i
].
b
 );

147 
w
 = (
VW_WIDTH
 > (
si
.
cﬁs
 - 
VW_X
)) ? (si.cols - VW_X) : VW_WIDTH;

148 
h
 = (
VW_HEIGHT
 > (
si
.
rows
 - 
VW_Y
)) ? (si.rows - VW_Y) : VW_HEIGHT;

149 i‡((
wid
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 
VW_X
, 
VW_Y
, 
w
, 
h
,

150 2, 
LTGRAY
, 
BLACK
)) == 0) {

151 
	`Ârötf
(
°dîr
, "UnableÅo createÅop-level window\n");

152 
	`GrClo£
();

153  
FÆ£
;

156 
	`GrSñe˘Evíts
(
wid
, 
GR_EVENT_MASK_BUTTON_DOWN
 |

157 
GR_EVENT_MASK_BUTTON_UP
 | 
GR_EVENT_MASK_KEY_DOWN
 |

158 
GR_EVENT_MASK_KEY_UP
 | 
GR_EVENT_MASK_MOUSE_POSITION
);

160 
	`GrM≠Wödow
(
wid
);

161 
ˇnvas
 = 
wid
;

163 
gc
 = 
	`GrNewGC
();

164 
§cGC
 = 
	`GrNewGC
();

165 
d°GC
 = 
	`GrNewGC
();

167  
True
;

168 
	}
}

175 
	$XSt‹eCﬁ‹
(
Di•œy
 *
dpy
, 
Cﬁ‹m≠
 
cm≠
, 
XCﬁ‹
 *
xc
)

177 
öd
;

179 
öd
 = 
xc
->
pixñ
 & 0xff;

184 
§v_∑l
.
∑Àâe
[0].
r
 = (
xc
->
ªd
 / 256) & 0xff;

185 
§v_∑l
.
∑Àâe
[0].
g
 = (
xc
->
gªí
 / 256) & 0xff;

186 
§v_∑l
.
∑Àâe
[0].
b
 = (
xc
->
blue
 / 256) & 0xff;

187 
§v_∑l
.
cou¡
 = 1;

190 
	`¥ötf
("XSt‹eCﬁ‹: ind=%d,Ñ=%02x, g=%02x, b=%02x\n", 
öd
, \

191 
§v_∑l
.
∑Àâe
[0].
r
, srv_∑l.∑Àâe[0].
g
, \

192 
§v_∑l
.
∑Àâe
[0].
b
);

194 
	`GrSëSy°emPÆëã
(
öd
, &
§v_∑l
);

197 
	}
}

203 
	$XC›yAªa
(
Di•œy
 *
dpy
, 
Wödow
 
§c
, Wödow 
d°
, 
GR_GC_ID
 
gc
,

204 
x1
, 
y1
, 
w
, 
h
, 
x2
, 
y2
)

207 
	`GrC›yAªa
(
d°
, 
gc
, 
x2
, 
y2
, 
w
, 
h
, 
§c
, 
x1
, 
y1
, 
MWROP_SRCCOPY
);

209 
	}
}

215 
	$XFûlRe˘™gÀ
(
Di•œy
 *
dpy
, 
Wödow
 
ˇnvas
, 
GR_GC_ID
 
gc
,

216 
x
, 
y
, 
w
, 
h
)

218 
	`GrFûlRe˘
(
ˇnvas
, 
gc
, 
x
, 
y
, 
w
, 
h
);

221 
	}
}

227 
	$XDi•œyName
(*
di•œy
)

229 ((*)
NULL
);

230 
	}
}

237 
	$XCh™geGC
(
Di•œy
 *
dpy
, 
GR_GC_ID
 
gc
, 
vmask
, 
GR_GC_INFO
 *
gcv
)

242 i‡(
pixty≥
 =
MWPF_PALETTE
) {

246 
	`GrSëGCF‹egroundPixñVÆ
(
gc
, 
gcv
->
f‹eground
);

248 
	`GrSëGCF‹eground
(
gc
, 
gcv
->
f‹eground
);

251 
	}
}

257 
	$XBñl
(
Di•œy
 *
dpy
, 
pc
)

260 
	}
}

266 
	$XSync
(
Di•œy
 *
dpy
, 
Boﬁ
 
disc
)

269 
	}
}

275 
	$XSñe˘I≈ut
(
Di•œy
 *
dpy
, 
Wödow
 
wö
, 
evmask
)

278 
	}
}

284 
	$XSt‹eByãs
(
Di•œy
 *
dpy
, *
byãs
, 
nbyãs
)

287 
	}
}

293 
	$XSëSñe˘i⁄Ow√r
(
Di•œy
 *
dpy
, 
Atom
 
£l
, 
Wödow
 
own
, 
Time
 
t
)

296 
	}
}

302 
	$C›yD©aToS¸ìn
(
CARD8
 *
buf
, 
x
, 
y
, 
width
, 
height
)

306 
	`¥ötf
("CDTS ");

307 
	`fÊush
(
°dout
);

309 i‡(
øwDñay
 != 0) {

311 
	`XFûlRe˘™gÀ
(
dpy
, 
ˇnvas
, 
	`DeÁu…GC
(dpy,
	`DeÁu…S¸ìn
(dpy)),

312 
x
, 
y
, 
width
, 
height
);

314 
	`XSync
(
dpy
,
FÆ£
);

315 
	`u¶ìp
(
øwDñay
 * 1000);

317 i‡(!
u£BGR233
) {

318 
	`GrAªa
(
ˇnvas
, 
gc
, 
x
, 
y
, 
width
, 
height
, 
buf
, 
MWPF_PALETTE
);

320 
	`C›yBGR233ToS¸ìn
(
buf
, 
x
, 
y
, 
width
, 
height
);

322 
	}
}

328 
	$C›yBGR233ToS¸ìn
(
CARD8
 *
buf
, 
x
, 
y
, 
width
, 
height
)

331 
	}
}

336 
Boﬁ


337 
	$H™dÀXEvíts
(
GR_EVENT
 *
ev
)

339 
GR_BOOL
 
ªt
 = 
GR_TRUE
;

340 
buâ⁄s
;

343 
	`¥ötf
("H");

344 
	`fÊush
(
°dout
);

346 
ev
->
ty≥
) {

347 
GR_EVENT_TYPE_NONE
:

348 
ªt
 = 
GR_TRUE
;

350 
GR_EVENT_TYPE_MOUSE_POSITION
:

351 
buâ⁄s
 = (
ev
->
mou£
.buâ⁄†& 
GR_BUTTON_R
) << 2;

352 
buâ⁄s
 |
ev
->
mou£
.buâ⁄†& 
GR_BUTTON_M
;

353 
buâ⁄s
 |(
ev
->
mou£
.buâ⁄†& 
GR_BUTTON_L
) >> 2;

354 
ªt
 = 
	`SídPoöãrEvít
(
ev
->
mou£
.
x
,Év->mou£.
y
,

355 
buâ⁄s
);

357 
GR_EVENT_TYPE_BUTTON_DOWN
:

358 
GR_EVENT_TYPE_BUTTON_UP
:

359 
buâ⁄s
 = (
ev
->
buâ⁄
.buâ⁄†& 
GR_BUTTON_R
) << 2;

360 
buâ⁄s
 |
ev
->
buâ⁄
.buâ⁄†& 
GR_BUTTON_M
;

361 
buâ⁄s
 |(
ev
->
buâ⁄
.buâ⁄†& 
GR_BUTTON_L
) >> 2;

362 
ªt
 = 
	`SídPoöãrEvít
(
ev
->
buâ⁄
.
x
,Év->buâ⁄.
y
,

363 
buâ⁄s
);

365 
GR_EVENT_TYPE_KEY_DOWN
:

366 
GR_EVENT_TYPE_KEY_UP
:

367 
ªt
 = 
	`SídKeyEvít
(
km≠
[
ev
->
key°roke
.
ch
 & 0x7f],

368 (
ev
->
ty≥
 =
GR_EVENT_TYPE_KEY_DOWN
));

373 (
ªt
);

374 
	}
}

380 
	$ShutdownX
()

382 
	`GrClo£
();

383 
	}
}

	@demos/vnc/vncviewer/rfbproto.c

24 
	~<uni°d.h
>

25 
	~<î∫o.h
>

26 
	~<pwd.h
>

27 
	~<vncvõwî.h
>

28 #i‚de‡
NANOX


29 
	~<X11/X©om.h
>

31 
	~<vnˇuth.h
>

33 
Boﬁ
 
H™dÀHextûeEncodög8
(
x
, 
y
, 
w
, 
h
);

34 
Boﬁ
 
H™dÀHextûeEncodög16
(
x
, 
y
, 
w
, 
h
);

35 
Boﬁ
 
H™dÀHextûeEncodög32
(
x
, 
y
, 
w
, 
h
);

37 
	grfbsock
;

38 *
	gdeskt›Name
;

39 
rfbPixñF‹m©
 
	gmyF‹m©
;

40 
rfbSîvîInôMsg
 
	gsi
;

41 
timevÆ
 
	gupd©eReque°Time
;

42 
Boﬁ
 
	g£ndUpd©eReque°
;

44 
	gídünTe°
 = 1;

51 
	#BUFFER_SIZE
 (640*480)

	)

52 
	gbuf„r
[
BUFFER_SIZE
];

55 
PrötPixñF‹m©
(
rfbPixñF‹m©
 *
f‹m©
);

62 
Boﬁ


63 
	$C⁄√˘ToRFBSîvî
(c⁄° *
ho°«me
, 
p‹t
)

65 
ho°
;

67 i‡(!
	`SåögToIPAddr
(
ho°«me
, &
ho°
)) {

68 
	`Ârötf
(
°dîr
,"%s: couldn't convert '%s'Åo hostáddress\n",

69 
¥ogømName
,
ho°«me
);

70  
FÆ£
;

73 
rfbsock
 = 
	`C⁄√˘ToT˝Addr
(
ho°
, 
p‹t
);

75 i‡(
rfbsock
 < 0) {

76 
	`Ârötf
(
°dîr
,"%s: unableÅo connectÅo VNC server\n",

77 
¥ogømName
);

78  
FÆ£
;

81  
True
;

82 
	}
}

89 
Boﬁ


90 
	$Inôüli£RFBC⁄√˘i⁄
(
sock
)

92 
rfbPrŸocﬁVîsi⁄Msg
 
pv
;

93 
maj‹
,
mö‹
;

94 
Boﬁ
 
authWûlW‹k
 = 
True
;

95 
CARD32
 
authScheme
, 
ªas⁄Lí
, 
authResu…
;

96 *
ªas⁄
;

97 
CARD8
 
chÆÀnge
[
CHALLENGESIZE
];

98 *
∑sswd
;

99 
i
;

100 
rfbClõ¡InôMsg
 
ci
;

105 i‡(
li°íS≥cifõd
)

106 
îr‹MesßgeFromRódExa˘
 = 
FÆ£
;

108 i‡(!
	`RódExa˘
(
sock
, 
pv
, 
sz_rfbPrŸocﬁVîsi⁄Msg
)Ë 
FÆ£
;

110 
îr‹MesßgeFromRódExa˘
 = 
True
;

112 
pv
[
sz_rfbPrŸocﬁVîsi⁄Msg
] = 0;

114 i‡(
	`ssˇnf
(
pv
,
rfbPrŸocﬁVîsi⁄F‹m©
,&
maj‹
,&
mö‹
) != 2) {

115 
	`Ârötf
(
°dîr
,"%s: NŸá vÆid VNC sîvî\n",
¥ogømName
);

116  
FÆ£
;

119 
	`Ârötf
(
°dîr
,"%s: VNC server supportsÖrotocol version %d.%d "

121 
¥ogømName
,
maj‹
,
mö‹
,
rfbPrŸocﬁMaj‹Vîsi⁄
,

122 
rfbPrŸocﬁMö‹Vîsi⁄
);

124 i‡((
maj‹
 =3Ë&& (
mö‹
 < 3)) {

126 
authWûlW‹k
 = 
FÆ£
;

129 
maj‹
 = 
rfbPrŸocﬁMaj‹Vîsi⁄
;

130 
mö‹
 = 
rfbPrŸocﬁMö‹Vîsi⁄
;

133 
	`•rötf
(
pv
,
rfbPrŸocﬁVîsi⁄F‹m©
,
maj‹
,
mö‹
);

135 i‡(!
	`WrôeExa˘
(
sock
, 
pv
, 
sz_rfbPrŸocﬁVîsi⁄Msg
)Ë 
FÆ£
;

137 i‡(!
	`RódExa˘
(
sock
, (*)&
authScheme
, 4)Ë 
FÆ£
;

139 
authScheme
 = 
	`Sw≠32IfLE
(authScheme);

141 
authScheme
) {

143 
rfbC⁄nFaûed
:

144 i‡(!
	`RódExa˘
(
sock
, (*)&
ªas⁄Lí
, 4)Ë 
FÆ£
;

145 
ªas⁄Lí
 = 
	`Sw≠32IfLE
(reasonLen);

147 
ªas⁄
 = 
	`mÆloc
(
ªas⁄Lí
);

149 i‡(!
	`RódExa˘
(
sock
, 
ªas⁄
, 
ªas⁄Lí
)Ë 
FÆ£
;

151 
	`Ârötf
(
°dîr
,"%s: VNC connection failed: %.*s\n",

152 
¥ogømName
, ()
ªas⁄Lí
, 
ªas⁄
);

153  
FÆ£
;

155 
rfbNoAuth
:

156 
	`Ârötf
(
°dîr
,"%s: Nÿauthítiˇti⁄Çìded\n",
¥ogømName
);

159 
rfbVncAuth
:

160 i‡(!
authWûlW‹k
) {

161 
	`Ârötf
(
°dîr
,

166 
¥ogømName
);

167  
FÆ£
;

170 i‡(!
	`RódExa˘
(
sock
, (*)
chÆÀnge
, 
CHALLENGESIZE
)Ë 
FÆ£
;

172 i‡(
∑sswdFûe
) {

173 
∑sswd
 = 
	`vncDe¸y±PasswdFromFûe
(
∑sswdFûe
);

175 
∑ss
[32] = {"password"};

176 
∑sswd
 = 
∑ss
;

178 i‡(
	`°æí
(
∑sswd
) == 0) {

179 
	`Ârötf
(
°dîr
,"%s: RódögÖassw‹d faûed\n",
¥ogømName
);

180  
FÆ£
;

182 i‡(
	`°æí
(
∑sswd
) > 8) {

183 
∑sswd
[8] = '\0';

187 
	`vncEn¸y±Byãs
(
chÆÀnge
, 
∑sswd
);

190 
i
=0; i<
	`°æí
(
∑sswd
); i++) {

191 
∑sswd
[
i
] = '\0';

194 i‡(!
	`WrôeExa˘
(
sock
, (*)
chÆÀnge
, 
CHALLENGESIZE
)Ë 
FÆ£
;

196 i‡(!
	`RódExa˘
(
sock
, (*)&
authResu…
, 4)Ë 
FÆ£
;

198 
authResu…
 = 
	`Sw≠32IfLE
(authResult);

200 
authResu…
) {

201 
rfbVncAuthOK
:

202 
	`Ârötf
(
°dîr
,"%s: VNCáuthítiˇti⁄ suc˚eded\n",
¥ogømName
);

204 
rfbVncAuthFaûed
:

205 
	`Ârötf
(
°dîr
,"%s: VNCáuthítiˇti⁄ faûed\n",
¥ogømName
);

206  
FÆ£
;

207 
rfbVncAuthTooM™y
:

208 
	`Ârötf
(
°dîr
,"%s: VNCáuthentication failed -Åoo manyÅries\n",

209 
¥ogømName
);

210  
FÆ£
;

212 
	`Ârötf
(
°dîr
,"%s: Unknown VNCáuthenticationÑesult: %d\n",

213 
¥ogømName
,()
authResu…
);

214  
FÆ£
;

219 
	`Ârötf
(
°dîr
,

221 
¥ogømName
,()
authScheme
);

222  
FÆ£
;

225 
ci
.
sh¨ed
 = (
sh¨eDeskt›
 ? 1 : 0);

227 i‡(!
	`WrôeExa˘
(
sock
, (*)&
ci
, 
sz_rfbClõ¡InôMsg
)Ë 
FÆ£
;

229 i‡(!
	`RódExa˘
(
sock
, (*)&
si
, 
sz_rfbSîvîInôMsg
)Ë 
FÆ£
;

231 
si
.
‰amebuf„rWidth
 = 
	`Sw≠16IfLE
(si.framebufferWidth);

232 
si
.
‰amebuf„rHeight
 = 
	`Sw≠16IfLE
(si.framebufferHeight);

233 
si
.
f‹m©
.
ªdMax
 = 
	`Sw≠16IfLE
(si.format.redMax);

234 
si
.
f‹m©
.
gªíMax
 = 
	`Sw≠16IfLE
(si.format.greenMax);

235 
si
.
f‹m©
.
blueMax
 = 
	`Sw≠16IfLE
(si.format.blueMax);

236 
si
.
«meLígth
 = 
	`Sw≠32IfLE
(si.nameLength);

238 i‡(((
upd©eReque°X
 + 
upd©eReque°W
Ë> 
si
.
‰amebuf„rWidth
) ||

239 ((
upd©eReque°Y
 + 
upd©eReque°H
Ë> 
si
.
‰amebuf„rHeight
))

241 
	`Ârötf
(
°dîr
,

243 
¥ogømName
);

244  
FÆ£
;

246 i‡(
upd©eReque°W
 == 0)

247 
upd©eReque°W
 = 
si
.
‰amebuf„rWidth
 - 
upd©eReque°X
;

248 i‡(
upd©eReque°H
 == 0)

249 
upd©eReque°H
 = 
si
.
‰amebuf„rHeight
 - 
upd©eReque°Y
;

251 
deskt›Name
 = 
	`mÆloc
(
si
.
«meLígth
 + 1);

253 i‡(!
	`RódExa˘
(
sock
, 
deskt›Name
, 
si
.
«meLígth
)Ë 
FÆ£
;

255 
deskt›Name
[
si
.
«meLígth
] = 0;

257 
	`Ârötf
(
°dîr
,"%s: Deskt›Çamê\"%s\"\n",
¥ogømName
,
deskt›Name
);

259 
	`Ârötf
(
°dîr
,

261 
¥ogømName
, 
rfbPrŸocﬁMaj‹Vîsi⁄
, 
rfbPrŸocﬁMö‹Vîsi⁄
);

263 
	`Ârötf
(
°dîr
,"%s: VNC sîvî deÁu… f‹m©:\n",
¥ogømName
);

264 
	`PrötPixñF‹m©
(&
si
.
f‹m©
);

266  
True
;

267 
	}
}

274 
Boﬁ


275 
	$SëF‹m©AndEncodögs
()

277 
rfbSëPixñF‹m©Msg
 
•f
;

278 
buf
[
sz_rfbSëEncodögsMsg
 + 
MAX_ENCODINGS
 * 4];

279 
rfbSëEncodögsMsg
 *
£
 = (rfbSëEncodögsMsg *)
buf
;

280 
CARD32
 *
ícs
 = (CARD32 *)(&
buf
[
sz_rfbSëEncodögsMsg
]);

281 
Àn
 = 0;

282 
i
;

284 
•f
.
ty≥
 = 
rfbSëPixñF‹m©
;

285 
•f
.
f‹m©
 = 
myF‹m©
;

286 
•f
.
f‹m©
.
ªdMax
 = 
	`Sw≠16IfLE
(spf.format.redMax);

287 
•f
.
f‹m©
.
gªíMax
 = 
	`Sw≠16IfLE
(spf.format.greenMax);

288 
•f
.
f‹m©
.
blueMax
 = 
	`Sw≠16IfLE
(spf.format.blueMax);

290 i‡(!
	`WrôeExa˘
(
rfbsock
, (*)&
•f
, 
sz_rfbSëPixñF‹m©Msg
))

291  
FÆ£
;

293 
£
->
ty≥
 = 
rfbSëEncodögs
;

294 
£
->
nEncodögs
 = 0;

296 
i
 = 0; i < 
nEx∂icôEncodögs
; i++) {

297 
ícs
[
£
->
nEncodögs
++] = 
	`Sw≠32IfLE
(
ex∂icôEncodögs
[
i
]);

300 i‡(
	`SameMachöe
(
rfbsock
)) {

301 
ícs
[
£
->
nEncodögs
++] = 
	`Sw≠32IfLE
(
rfbEncodögRaw
);

304 i‡(
addC›yRe˘
)

305 
ícs
[
£
->
nEncodögs
++] = 
	`Sw≠32IfLE
(
rfbEncodögC›yRe˘
);

306 i‡(
addHextûe
)

307 
ícs
[
£
->
nEncodögs
++] = 
	`Sw≠32IfLE
(
rfbEncodögHextûe
);

308 i‡(
addCoRRE
)

309 
ícs
[
£
->
nEncodögs
++] = 
	`Sw≠32IfLE
(
rfbEncodögCoRRE
);

310 i‡(
addRRE
)

311 
ícs
[
£
->
nEncodögs
++] = 
	`Sw≠32IfLE
(
rfbEncodögRRE
);

313 
Àn
 = 
sz_rfbSëEncodögsMsg
 + 
£
->
nEncodögs
 * 4;

315 
£
->
nEncodögs
 = 
	`Sw≠16IfLE
(se->nEncodings);

317 i‡(!
	`WrôeExa˘
(
rfbsock
, 
buf
, 
Àn
)Ë 
FÆ£
;

319  
True
;

320 
	}
}

327 
Boﬁ


328 
	$SídIn¸emíèlFømebuf„rUpd©eReque°
()

330  
	`SídFømebuf„rUpd©eReque°
(
upd©eReque°X
, 
upd©eReque°Y
,

331 
upd©eReque°W
, 
upd©eReque°H
, 
True
);

332 
	}
}

339 
Boﬁ


340 
	$SídFømebuf„rUpd©eReque°
(
x
, 
y
, 
w
, 
h
, 
Boﬁ
 
ö¸emíèl
)

342 
rfbFømebuf„rUpd©eReque°Msg
 
fur
;

344 
fur
.
ty≥
 = 
rfbFømebuf„rUpd©eReque°
;

345 
fur
.
ö¸emíèl
 = incremental ? 1 : 0;

346 
fur
.
x
 = 
	`Sw≠16IfLE
(x);

347 
fur
.
y
 = 
	`Sw≠16IfLE
(y);

348 
fur
.
w
 = 
	`Sw≠16IfLE
(w);

349 
fur
.
h
 = 
	`Sw≠16IfLE
(h);

351 i‡(!
	`WrôeExa˘
(
rfbsock
, (*)&
fur
, 
sz_rfbFømebuf„rUpd©eReque°Msg
))

352  
FÆ£
;

354 
	`gëtimeofday
(&
upd©eReque°Time
, 
NULL
);

356 
£ndUpd©eReque°
 = 
FÆ£
;

358  
True
;

359 
	}
}

366 
Boﬁ


367 
	$SídPoöãrEvít
(
x
, 
y
, 
buâ⁄Mask
)

369 
rfbPoöãrEvítMsg
 
≥
;

371 
≥
.
ty≥
 = 
rfbPoöãrEvít
;

372 
≥
.
buâ⁄Mask
 = buttonMask;

373 i‡(
x
 < 0) x = 0;

374 i‡(
y
 < 0) y = 0;

375 
≥
.
x
 = 
	`Sw≠16IfLE
(x);

376 
≥
.
y
 = 
	`Sw≠16IfLE
(y);

377  
	`WrôeExa˘
(
rfbsock
, (*)&
≥
, 
sz_rfbPoöãrEvítMsg
);

378 
	}
}

385 
Boﬁ


386 
	$SídKeyEvít
(
CARD32
 
key
, 
Boﬁ
 
down
)

388 
rfbKeyEvítMsg
 
ke
;

390 
ke
.
ty≥
 = 
rfbKeyEvít
;

391 
ke
.
down
 = down ? 1 : 0;

392 
ke
.
key
 = 
	`Sw≠32IfLE
(key);

393  
	`WrôeExa˘
(
rfbsock
, (*)&
ke
, 
sz_rfbKeyEvítMsg
);

394 
	}
}

401 
Boﬁ


402 
	$SídClõ¡CutText
(*
°r
, 
Àn
)

404 
rfbClõ¡CutTextMsg
 
c˘
;

406 
c˘
.
ty≥
 = 
rfbClõ¡CutText
;

407 
c˘
.
Àngth
 = 
	`Sw≠32IfLE
(
Àn
);

408  (
	`WrôeExa˘
(
rfbsock
, (*)&
c˘
, 
sz_rfbClõ¡CutTextMsg
) &&

409 
	`WrôeExa˘
(
rfbsock
, 
°r
, 
Àn
));

410 
	}
}

418 
Boﬁ


419 
	$H™dÀRFBSîvîMesßge
()

421 
rfbSîvîToClõ¡Msg
 
msg
;

423 i‡(!
	`RódExa˘
(
rfbsock
, (*)&
msg
, 1))

424  
FÆ£
;

426 
msg
.
ty≥
) {

428 
rfbSëCﬁourM≠E¡rõs
:

430 
i
;

431 
CARD16
 
rgb
[3];

432 
XCﬁ‹
 
xc
;

434 i‡(!
	`RódExa˘
(
rfbsock
, ((*)&
msg
) + 1,

435 
sz_rfbSëCﬁourM≠E¡rõsMsg
 - 1))

436  
FÆ£
;

438 
msg
.
scme
.
fú°Cﬁour
 = 
	`Sw≠16IfLE
(msg.scme.firstColour);

439 
msg
.
scme
.
nCﬁours
 = 
	`Sw≠16IfLE
(msg.scme.nColours);

441 
i
 = 0; i < 
msg
.
scme
.
nCﬁours
; i++) {

442 i‡(!
	`RódExa˘
(
rfbsock
, (*)
rgb
, 6))

443  
FÆ£
;

444 
xc
.
pixñ
 = 
msg
.
scme
.
fú°Cﬁour
 + 
i
;

445 
xc
.
ªd
 = 
	`Sw≠16IfLE
(
rgb
[0]);

446 
xc
.
gªí
 = 
	`Sw≠16IfLE
(
rgb
[1]);

447 
xc
.
blue
 = 
	`Sw≠16IfLE
(
rgb
[2]);

448 
xc
.
Êags
 = 
DoRed
|
DoGªí
|
DoBlue
;

450 
	`XSt‹eCﬁ‹
(
dpy
, 
cm≠
, &
xc
);

456 
rfbFømebuf„rUpd©e
:

458 
rfbFømebuf„rUpd©eRe˘Hódî
 
ª˘
;

459 
löesToRód
;

460 
byãsPîLöe
;

461 
i
;

463 i‡(!
	`RódExa˘
(
rfbsock
, ((*)&
msg
.
fu
) + 1,

464 
sz_rfbFømebuf„rUpd©eMsg
 - 1))

465  
FÆ£
;

467 
msg
.
fu
.
nRe˘s
 = 
	`Sw≠16IfLE
(msg.fu.nRects);

469 
i
 = 0; i < 
msg
.
fu
.
nRe˘s
; i++) {

470 i‡(!
	`RódExa˘
(
rfbsock
, (*)&
ª˘
,

471 
sz_rfbFømebuf„rUpd©eRe˘Hódî
))

472  
FÆ£
;

474 
ª˘
.
r
.
x
 = 
	`Sw≠16IfLE
(rect.r.x);

475 
ª˘
.
r
.
y
 = 
	`Sw≠16IfLE
(rect.r.y);

476 
ª˘
.
r
.
w
 = 
	`Sw≠16IfLE
(rect.r.w);

477 
ª˘
.
r
.
h
 = 
	`Sw≠16IfLE
(rect.r.h);

479 
ª˘
.
ícodög
 = 
	`Sw≠32IfLE
(rect.encoding);

481 i‡((
ª˘
.
r
.
x
 +Ñe˘.r.
w
 > 
si
.
‰amebuf„rWidth
) ||

482 (
ª˘
.
r
.
y
 +Ñe˘.r.
h
 > 
si
.
‰amebuf„rHeight
))

484 
	`Ârötf
(
°dîr
,"%s:ÑectÅooÜarge: %dx%dát (%d, %d)\n",

485 
¥ogømName
, 
ª˘
.
r
.
w
,Ñe˘.r.
h
,Ñe˘.r.
x
,Ñe˘.r.
y
);

486  
FÆ£
;

489 i‡((
ª˘
.
r
.
h
 *Ñe˘.r.
w
) == 0) {

490 
	`Ârötf
(
°dîr
,"%s: zîÿsizêª˘ - ign‹ög\n",
¥ogømName
);

494 
ª˘
.
ícodög
) {

496 
rfbEncodögRaw
:

498 
byãsPîLöe
 = 
ª˘
.
r
.
w
 * 
myF‹m©
.
bôsPîPixñ
 / 8;

499 
löesToRód
 = 
BUFFER_SIZE
 / 
byãsPîLöe
;

501 
ª˘
.
r
.
h
 > 0) {

502 i‡(
löesToRód
 > 
ª˘
.
r
.
h
)

503 
löesToRód
 = 
ª˘
.
r
.
h
;

505 i‡(!
	`RódExa˘
(
rfbsock
, 
buf„r
,
byãsPîLöe
 * 
löesToRód
))

506  
FÆ£
;

508 
	`C›yD©aToS¸ìn
((
CARD8
 *)
buf„r
, 
ª˘
.
r
.
x
,Ñe˘.r.
y
,

509 
ª˘
.
r
.
w
, 
löesToRód
);

511 
ª˘
.
r
.
h
 -
löesToRód
;

512 
ª˘
.
r
.
y
 +
löesToRód
;

517 
rfbEncodögC›yRe˘
:

519 
rfbC›yRe˘
 
¸
;

521 i‡(!
	`RódExa˘
(
rfbsock
, (*)&
¸
, 
sz_rfbC›yRe˘
))

522  
FÆ£
;

524 
¸
.
§cX
 = 
	`Sw≠16IfLE
(cr.srcX);

525 
¸
.
§cY
 = 
	`Sw≠16IfLE
(cr.srcY);

527 i‡(
c›yRe˘Dñay
 != 0) {

528 
	`XFûlRe˘™gÀ
(
dpy
, 
ˇnvas
, 
§cGC
, 
¸
.
§cX
, cr.
§cY
,

529 
ª˘
.
r
.
w
,Ñe˘.r.
h
);

530 
	`XFûlRe˘™gÀ
(
dpy
, 
ˇnvas
, 
d°GC
, 
ª˘
.
r
.
x
,Ñe˘.r.
y
,

531 
ª˘
.
r
.
w
,Ñe˘.r.
h
);

532 
	`XSync
(
dpy
,
FÆ£
);

533 
	`u¶ìp
(
c›yRe˘Dñay
 * 1000);

534 
	`XFûlRe˘™gÀ
(
dpy
, 
ˇnvas
, 
d°GC
, 
ª˘
.
r
.
x
,Ñe˘.r.
y
,

535 
ª˘
.
r
.
w
,Ñe˘.r.
h
);

536 
	`XFûlRe˘™gÀ
(
dpy
, 
ˇnvas
, 
§cGC
, 
¸
.
§cX
, cr.
§cY
,

537 
ª˘
.
r
.
w
,Ñe˘.r.
h
);

540 
	`XC›yAªa
(
dpy
, 
ˇnvas
, c™vas, 
gc
, 
¸
.
§cX
, cr.
§cY
,

541 
ª˘
.
r
.
w
,Ñe˘.r.
h
,Ñe˘.r.
x
,Ñe˘.r.
y
);

546 
rfbEncodögRRE
:

548 
rfbRREHódî
 
hdr
;

549 
CARD8
 
pix8
;

550 
CARD16
 
pix16
;

551 
CARD32
 
pix32
;

552 
XGCVÆues
 
gcv
;

553 
rfbRe˘™gÀ
 
subª˘
;

554 
j
;

556 i‡(!
	`RódExa˘
(
rfbsock
, (*)&
hdr
, 
sz_rfbRREHódî
))

557  
FÆ£
;

559 
hdr
.
nSubª˘s
 = 
	`Sw≠32IfLE
(hdr.nSubrects);

561 
myF‹m©
.
bôsPîPixñ
) {

564 i‡(!
	`RódExa˘
(
rfbsock
, (*)&
pix8
, 1))

565  
FÆ£
;

567 
gcv
.
f‹eground
 = (
u£BGR233
 ? 
BGR233ToPixñ
[
pix8
]

568 : 
pix8
);

569 
	`XCh™geGC
(
dpy
, 
gc
, 
GCF‹eground
, &
gcv
);

570 
	`XFûlRe˘™gÀ
(
dpy
, 
ˇnvas
, 
gc
, 
ª˘
.
r
.
x
,Ñe˘.r.
y
,

571 
ª˘
.
r
.
w
,Ñe˘.r.
h
);

573 
j
 = 0; j < 
hdr
.
nSubª˘s
; j++) {

574 i‡(!
	`RódExa˘
(
rfbsock
, (*)&
pix8
, 1))

575  
FÆ£
;

577 i‡(!
	`RódExa˘
(
rfbsock
, (*)&
subª˘
,

578 
sz_rfbRe˘™gÀ
))

579  
FÆ£
;

581 
subª˘
.
x
 = 
	`Sw≠16IfLE
(subrect.x);

582 
subª˘
.
y
 = 
	`Sw≠16IfLE
(subrect.y);

583 
subª˘
.
w
 = 
	`Sw≠16IfLE
(subrect.w);

584 
subª˘
.
h
 = 
	`Sw≠16IfLE
(subrect.h);

586 
gcv
.
f‹eground
 = (
u£BGR233
 ? 
BGR233ToPixñ
[
pix8
]

587 : 
pix8
);

588 
	`XCh™geGC
(
dpy
, 
gc
, 
GCF‹eground
, &
gcv
);

589 
	`XFûlRe˘™gÀ
(
dpy
, 
ˇnvas
, 
gc
, 
ª˘
.
r
.
x
 + 
subª˘
.x,

590 
ª˘
.
r
.
y
 + 
subª˘
.y, subª˘.
w
,

591 
subª˘
.
h
);

596 i‡(!
	`RódExa˘
(
rfbsock
, (*)&
pix16
, 2))

597  
FÆ£
;

599 
gcv
.
f‹eground
 = 
pix16
;

600 
	`XCh™geGC
(
dpy
, 
gc
, 
GCF‹eground
, &
gcv
);

601 
	`XFûlRe˘™gÀ
(
dpy
, 
ˇnvas
, 
gc
, 
ª˘
.
r
.
x
,Ñe˘.r.
y
,

602 
ª˘
.
r
.
w
,Ñe˘.r.
h
);

604 
j
 = 0; j < 
hdr
.
nSubª˘s
; j++) {

605 i‡(!
	`RódExa˘
(
rfbsock
, (*)&
pix16
, 2))

606  
FÆ£
;

608 i‡(!
	`RódExa˘
(
rfbsock
, (*)&
subª˘
,

609 
sz_rfbRe˘™gÀ
))

610  
FÆ£
;

612 
subª˘
.
x
 = 
	`Sw≠16IfLE
(subrect.x);

613 
subª˘
.
y
 = 
	`Sw≠16IfLE
(subrect.y);

614 
subª˘
.
w
 = 
	`Sw≠16IfLE
(subrect.w);

615 
subª˘
.
h
 = 
	`Sw≠16IfLE
(subrect.h);

617 
gcv
.
f‹eground
 = 
pix16
;

618 
	`XCh™geGC
(
dpy
, 
gc
, 
GCF‹eground
, &
gcv
);

619 
	`XFûlRe˘™gÀ
(
dpy
, 
ˇnvas
, 
gc
, 
ª˘
.
r
.
x
 + 
subª˘
.x,

620 
ª˘
.
r
.
y
 + 
subª˘
.y, subª˘.
w
,

621 
subª˘
.
h
);

626 i‡(!
	`RódExa˘
(
rfbsock
, (*)&
pix32
, 4))

627  
FÆ£
;

629 
gcv
.
f‹eground
 = 
pix32
;

630 
	`XCh™geGC
(
dpy
, 
gc
, 
GCF‹eground
, &
gcv
);

631 
	`XFûlRe˘™gÀ
(
dpy
, 
ˇnvas
, 
gc
, 
ª˘
.
r
.
x
,Ñe˘.r.
y
,

632 
ª˘
.
r
.
w
,Ñe˘.r.
h
);

634 
j
 = 0; j < 
hdr
.
nSubª˘s
; j++) {

635 i‡(!
	`RódExa˘
(
rfbsock
, (*)&
pix32
, 4))

636  
FÆ£
;

638 i‡(!
	`RódExa˘
(
rfbsock
, (*)&
subª˘
,

639 
sz_rfbRe˘™gÀ
))

640  
FÆ£
;

642 
subª˘
.
x
 = 
	`Sw≠16IfLE
(subrect.x);

643 
subª˘
.
y
 = 
	`Sw≠16IfLE
(subrect.y);

644 
subª˘
.
w
 = 
	`Sw≠16IfLE
(subrect.w);

645 
subª˘
.
h
 = 
	`Sw≠16IfLE
(subrect.h);

647 
gcv
.
f‹eground
 = 
pix32
;

648 
	`XCh™geGC
(
dpy
, 
gc
, 
GCF‹eground
, &
gcv
);

649 
	`XFûlRe˘™gÀ
(
dpy
, 
ˇnvas
, 
gc
, 
ª˘
.
r
.
x
 + 
subª˘
.x,

650 
ª˘
.
r
.
y
 + 
subª˘
.y, subª˘.
w
,

651 
subª˘
.
h
);

658 
rfbEncodögCoRRE
:

660 
rfbRREHódî
 
hdr
;

661 
CARD8
 
pix8
;

662 
CARD16
 
pix16
;

663 
CARD32
 
pix32
;

664 
XGCVÆues
 
gcv
;

665 
j
;

666 
CARD8
 *
±r
;

667 
x
, 
y
, 
w
, 
h
;

669 i‡(!
	`RódExa˘
(
rfbsock
, (*)&
hdr
, 
sz_rfbRREHódî
))

670  
FÆ£
;

672 
hdr
.
nSubª˘s
 = 
	`Sw≠32IfLE
(hdr.nSubrects);

674 
myF‹m©
.
bôsPîPixñ
) {

677 i‡(!
	`RódExa˘
(
rfbsock
, (*)&
pix8
, 1))

678  
FÆ£
;

680 
gcv
.
f‹eground
 = (
u£BGR233
 ? 
BGR233ToPixñ
[
pix8
]

681 : 
pix8
);

682 
	`XCh™geGC
(
dpy
, 
gc
, 
GCF‹eground
, &
gcv
);

683 
	`XFûlRe˘™gÀ
(
dpy
, 
ˇnvas
, 
gc
, 
ª˘
.
r
.
x
,Ñe˘.r.
y
,

684 
ª˘
.
r
.
w
,Ñe˘.r.
h
);

686 i‡(!
	`RódExa˘
(
rfbsock
, 
buf„r
, 
hdr
.
nSubª˘s
 * 5))

687  
FÆ£
;

689 
±r
 = (
CARD8
 *)
buf„r
;

691 
j
 = 0; j < 
hdr
.
nSubª˘s
; j++) {

692 
pix8
 = *
±r
++;

693 
x
 = *
±r
++;

694 
y
 = *
±r
++;

695 
w
 = *
±r
++;

696 
h
 = *
±r
++;

697 
gcv
.
f‹eground
 = (
u£BGR233
 ? 
BGR233ToPixñ
[
pix8
]

698 : 
pix8
);

699 
	`XCh™geGC
(
dpy
, 
gc
, 
GCF‹eground
, &
gcv
);

700 
	`XFûlRe˘™gÀ
(
dpy
, 
ˇnvas
, 
gc
, 
ª˘
.
r
.
x
 + x,

701 
ª˘
.
r
.
y
 + y, 
w
, 
h
);

706 i‡(!
	`RódExa˘
(
rfbsock
, (*)&
pix16
, 2))

707  
FÆ£
;

709 
gcv
.
f‹eground
 = 
pix16
;

710 
	`XCh™geGC
(
dpy
, 
gc
, 
GCF‹eground
, &
gcv
);

711 
	`XFûlRe˘™gÀ
(
dpy
, 
ˇnvas
, 
gc
, 
ª˘
.
r
.
x
,Ñe˘.r.
y
,

712 
ª˘
.
r
.
w
,Ñe˘.r.
h
);

714 i‡(!
	`RódExa˘
(
rfbsock
, 
buf„r
, 
hdr
.
nSubª˘s
 * 6))

715  
FÆ£
;

717 
±r
 = (
CARD8
 *)
buf„r
;

719 
j
 = 0; j < 
hdr
.
nSubª˘s
; j++) {

720 
pix16
 = *(
CARD16
 *)
±r
;

721 
±r
 += 2;

722 
x
 = *
±r
++;

723 
y
 = *
±r
++;

724 
w
 = *
±r
++;

725 
h
 = *
±r
++;

726 
gcv
.
f‹eground
 = 
pix16
;

727 
	`XCh™geGC
(
dpy
, 
gc
, 
GCF‹eground
, &
gcv
);

728 
	`XFûlRe˘™gÀ
(
dpy
, 
ˇnvas
, 
gc
, 
ª˘
.
r
.
x
 + x,

729 
ª˘
.
r
.
y
 + y, 
w
, 
h
);

734 i‡(!
	`RódExa˘
(
rfbsock
, (*)&
pix32
, 4))

735  
FÆ£
;

737 
gcv
.
f‹eground
 = 
pix32
;

738 
	`XCh™geGC
(
dpy
, 
gc
, 
GCF‹eground
, &
gcv
);

739 
	`XFûlRe˘™gÀ
(
dpy
, 
ˇnvas
, 
gc
, 
ª˘
.
r
.
x
,Ñe˘.r.
y
,

740 
ª˘
.
r
.
w
,Ñe˘.r.
h
);

742 i‡(!
	`RódExa˘
(
rfbsock
, 
buf„r
, 
hdr
.
nSubª˘s
 * 8))

743  
FÆ£
;

745 
±r
 = (
CARD8
 *)
buf„r
;

747 
j
 = 0; j < 
hdr
.
nSubª˘s
; j++) {

748 
pix32
 = *(
CARD32
 *)
±r
;

749 
±r
 += 4;

750 
x
 = *
±r
++;

751 
y
 = *
±r
++;

752 
w
 = *
±r
++;

753 
h
 = *
±r
++;

754 
gcv
.
f‹eground
 = 
pix32
;

755 
	`XCh™geGC
(
dpy
, 
gc
, 
GCF‹eground
, &
gcv
);

756 
	`XFûlRe˘™gÀ
(
dpy
, 
ˇnvas
, 
gc
, 
ª˘
.
r
.
x
 + x,

757 
ª˘
.
r
.
y
 + y, 
w
, 
h
);

764 
rfbEncodögHextûe
:

766 
myF‹m©
.
bôsPîPixñ
) {

768 i‡(!
	`H™dÀHextûeEncodög8
(
ª˘
.
r
.
x
,Ñe˘.r.
y
,

769 
ª˘
.
r
.
w
,Ñe˘.r.
h
))

770  
FÆ£
;

773 i‡(!
	`H™dÀHextûeEncodög16
(
ª˘
.
r
.
x
,Ñe˘.r.
y
,

774 
ª˘
.
r
.
w
,Ñe˘.r.
h
))

775  
FÆ£
;

778 i‡(!
	`H™dÀHextûeEncodög32
(
ª˘
.
r
.
x
,Ñe˘.r.
y
,

779 
ª˘
.
r
.
w
,Ñe˘.r.
h
))

780  
FÆ£
;

787 
	`Ârötf
(
°dîr
,"%s: unknow¿ª˘Éncodög %d\n",
¥ogømName
,

788 ()
ª˘
.
ícodög
);

789  
FÆ£
;

793 
£ndUpd©eReque°
 = 
True
;

798 
rfbBñl
:

799 
	`XBñl
(
dpy
,100);

802 
rfbSîvîCutText
:

804 #i‚de‡
NANOX


805 *
°r
;

807 i‡(!
	`RódExa˘
(
rfbsock
, ((*)&
msg
) + 1,

808 
sz_rfbSîvîCutTextMsg
 - 1))

809  
FÆ£
;

811 
msg
.
s˘
.
Àngth
 = 
	`Sw≠32IfLE
(msg.sct.length);

813 
°r
 = 
	`mÆloc
(
msg
.
s˘
.
Àngth
);

815 i‡(!
	`RódExa˘
(
rfbsock
, 
°r
, 
msg
.
s˘
.
Àngth
))

816  
FÆ£
;

818 
	`XSñe˘I≈ut
(
dpy
, 
	`DeÁu…RoŸWödow
(dpy), 0);

819 
	`XSt‹eByãs
(
dpy
, 
°r
, 
msg
.
s˘
.
Àngth
);

820 
	`XSëSñe˘i⁄Ow√r
(
dpy
, 
XA_PRIMARY
, 
N⁄e
, 
CuºítTime
);

821 
	`XSñe˘I≈ut
(
dpy
, 
	`DeÁu…RoŸWödow
(dpy), 
Pr›îtyCh™geMask
);

823 
	`‰ì
(
°r
);

829 
	`Ârötf
(
°dîr
,"%s: unknown messageÅype %d from VNC server\n",

830 
¥ogømName
,
msg
.
ty≥
);

831  
FÆ£
;

834  
True
;

835 
	}
}

838 
	#GET_PIXEL8
(
pix
, 
±r
Ë(’ixË*’å)++)

	)

840 
	#GET_PIXEL16
(
pix
, 
±r
Ë(((
CARD8
*)&(pix))[0] = *(ptr)++, \

841 ((
CARD8
*)&(
pix
))[1] = *(
±r
)++)

	)

843 
	#GET_PIXEL32
(
pix
, 
±r
Ë(((
CARD8
*)&(pix))[0] = *(ptr)++, \

844 ((
CARD8
*)&(
pix
))[1] = *(
±r
)++, \

845 ((
CARD8
*)&(
pix
))[2] = *(
±r
)++, \

846 ((
CARD8
*)&(
pix
))[3] = *(
±r
)++)

	)

848 
	#DEFINE_HEXTILE
(
bµ
) \

849 
Boﬁ
 \

850 
H™dÀHextûeEncodög
##
	`bµ
(
rx
, 
ry
, 
rw
, 
rh
) \

852 
CARD
##
bµ
 
bg
, 
fg
; \

853 
XGCVÆues
 
gcv
; \

854 
i
; \

855 
CARD8
 *
±r
; \

856 
x
, 
y
, 
w
, 
h
; \

857 
sx
, 
sy
, 
sw
, 
sh
; \

858 
CARD8
 
subícodög
; \

859 
CARD8
 
nSubª˘s
; \

861 
y
 = 
ry
; y <Ñy+
rh
; y += 16) { \

862 
x
 = 
rx
; x <Ñx+
rw
; x += 16) { \

863 
w
 = 
h
 = 16; \

864 i‡(
rx
+
rw
 - 
x
 < 16) \

865 
w
 = 
rx
+
rw
 - 
x
; \

866 i‡(
ry
+
rh
 - 
y
 < 16) \

867 
h
 = 
ry
+
rh
 - 
y
; \

869 i‡(!
	`RódExa˘
(
rfbsock
, (*)&
subícodög
, 1)) \

870  
FÆ£
; \

872 i‡(
subícodög
 & 
rfbHextûeRaw
) { \

873 i‡(!
	`RódExa˘
(
rfbsock
, 
buf„r
, 
w
 * 
h
 * (
bµ
 / 8))) \

874  
FÆ£
; \

876 
	`C›yD©aToS¸ìn
((
CARD8
 *)
buf„r
, 
x
, 
y
, 
w
, 
h
); \

880 i‡(
subícodög
 & 
rfbHextûeBackgroundS≥cifõd
) \

881 i‡(!
	`RódExa˘
(
rfbsock
, (*)&
bg
, (
bµ
/8))) \

882  
FÆ£
; \

884 i‡((
bµ
 =8Ë&& 
u£BGR233
) \

885 
gcv
.
f‹eground
 = 
BGR233ToPixñ
[
bg
]; \

887 
gcv
.
f‹eground
 = 
bg
; \

889 
	`XCh™geGC
(
dpy
, 
gc
, 
GCF‹eground
, &
gcv
); \

890 
	`XFûlRe˘™gÀ
(
dpy
, 
ˇnvas
, 
gc
, 
x
, 
y
, 
w
, 
h
); \

892 i‡(
subícodög
 & 
rfbHextûeF‹egroundS≥cifõd
) \

893 i‡(!
	`RódExa˘
(
rfbsock
, (*)&
fg
, (
bµ
/8))) \

894  
FÆ£
; \

896 i‡(!(
subícodög
 & 
rfbHextûeAnySubª˘s
)) { \

900 i‡(!
	`RódExa˘
(
rfbsock
, (*)&
nSubª˘s
, 1)) \

901  
FÆ£
; \

903 
±r
 = (
CARD8
 *)
buf„r
; \

905 i‡(
subícodög
 & 
rfbHextûeSubª˘sCﬁouªd
) { \

906 i‡(!
	`RódExa˘
(
rfbsock
, 
buf„r
, 
nSubª˘s
 * (2 + (
bµ
 / 8)))) \

907  
FÆ£
; \

909 
i
 = 0; i < 
nSubª˘s
; i++) { \

910 
GET_PIXEL
##
	`bµ
(
fg
, 
±r
); \

911 
sx
 = 
	`rfbHextûeExåa˘X
(*
±r
); \

912 
sy
 = 
	`rfbHextûeExåa˘Y
(*
±r
); \

913 
±r
++; \

914 
sw
 = 
	`rfbHextûeExåa˘W
(*
±r
); \

915 
sh
 = 
	`rfbHextûeExåa˘H
(*
±r
); \

916 
±r
++; \

917 i‡((
bµ
 =8Ë&& 
u£BGR233
) \

918 
gcv
.
f‹eground
 = 
BGR233ToPixñ
[
fg
]; \

920 
gcv
.
f‹eground
 = 
fg
; \

922 
	`XCh™geGC
(
dpy
, 
gc
, 
GCF‹eground
, &
gcv
); \

923 
	`XFûlRe˘™gÀ
(
dpy
, 
ˇnvas
, 
gc
, 
x
+
sx
, 
y
+
sy
, 
sw
, 
sh
); \

927 i‡(!
	`RódExa˘
(
rfbsock
, 
buf„r
, 
nSubª˘s
 * 2)) \

928  
FÆ£
; \

930 i‡((
bµ
 =8Ë&& 
u£BGR233
) \

931 
gcv
.
f‹eground
 = 
BGR233ToPixñ
[
fg
]; \

933 
gcv
.
f‹eground
 = 
fg
; \

935 
	`XCh™geGC
(
dpy
, 
gc
, 
GCF‹eground
, &
gcv
); \

937 
i
 = 0; i < 
nSubª˘s
; i++) { \

938 
sx
 = 
	`rfbHextûeExåa˘X
(*
±r
); \

939 
sy
 = 
	`rfbHextûeExåa˘Y
(*
±r
); \

940 
±r
++; \

941 
sw
 = 
	`rfbHextûeExåa˘W
(*
±r
); \

942 
sh
 = 
	`rfbHextûeExåa˘H
(*
±r
); \

943 
±r
++; \

944 
	`XFûlRe˘™gÀ
(
dpy
, 
ˇnvas
, 
gc
, 
x
+
sx
, 
y
+
sy
, 
sw
, 
sh
); \

950  
True
; \

951 }

	)

953 
	$DEFINE_HEXTILE
(8)

954 
	$DEFINE_HEXTILE
(16)

955 
	$DEFINE_HEXTILE
(32)

963 
	$PrötPixñF‹m©
(
rfbPixñF‹m©
 *
f‹m©
)

965 i‡(
f‹m©
->
bôsPîPixñ
 == 1) {

966 
	`Ârötf
(
°dîr
,"Single bitÖerÖixel.\n");

967 
	`Ârötf
(
°dîr
,

969 (
f‹m©
->
bigEndün
 ? "Most" : "Least"));

971 
	`Ârötf
(
°dîr
,"%d bô†≥∏pixñ.\n",
f‹m©
->
bôsPîPixñ
);

972 i‡(
f‹m©
->
bôsPîPixñ
 != 8) {

973 
	`Ârötf
(
°dîr
,"%s significant byte first inÉachÖixel.\n",

974 (
f‹m©
->
bigEndün
 ? "Most" : "Least"));

976 i‡(
f‹m©
->
åueCﬁour
) {

977 
	`Ârötf
(
°dîr
,"True colour: maxÑed %d green %d blue %d\n",

978 
f‹m©
->
ªdMax
, f‹m©->
gªíMax
, f‹m©->
blueMax
);

979 
	`Ârötf
(
°dîr
," shiftÑed %d green %d blue %d\n",

980 
f‹m©
->
ªdShi·
, f‹m©->
gªíShi·
, f‹m©->
blueShi·
);

982 
	`Ârötf
(
°dîr
,"Usesá colour map (notÅrue colour).\n");

985 
	}
}

	@demos/vnc/vncviewer/sockets.c

24 
	~<uni°d.h
>

25 
	~<sys/sockë.h
>

26 
	~<î∫o.h
>

27 
	~<√töë/ö.h
>

28 
	~<√töë/t˝.h
>

29 
	~<¨∑/öë.h
>

30 
	~<√tdb.h
>

31 
	~<vncvõwî.h
>

34 #i‚de‡
SOCK_STREAM


35 
	#SOCK_STREAM
 2

	)

38 
PrötInHex
(*
buf
, 
Àn
);

40 
Boﬁ
 
	gîr‹MesßgeFromRódExa˘
 = 
True
;

46 
Boﬁ


47 
	$RódExa˘
(
sock
, *
buf
, 
n
)

49 
i
 = 0;

50 
j
;

52 
i
 < 
n
) {

53 
j
 = 
	`ªad
(
sock
, 
buf
 + 
i
, (
n
 - i));

54 i‡(
j
 <= 0) {

55 i‡(
j
 < 0) {

56 
	`Ârötf
(
°dîr
,
¥ogømName
);

57 
	`≥º‹
(":Ñead");

59 i‡(
îr‹MesßgeFromRódExa˘
) {

60 
	`Ârötf
(
°dîr
,"%s:Ñód faûed\n",
¥ogømName
);

63  
FÆ£
;

65 
i
 +
j
;

67 i‡(
debug
)

68 
	`PrötInHex
(
buf
,
n
);

69  
True
;

70 
	}
}

77 
Boﬁ


78 
	$WrôeExa˘
(
sock
, *
buf
, 
n
)

80 
i
 = 0;

81 
j
;

83 
i
 < 
n
) {

84 
j
 = 
	`wrôe
(
sock
, 
buf
 + 
i
, (
n
 - i));

85 i‡(
j
 <= 0) {

86 i‡(
j
 < 0) {

87 
	`Ârötf
(
°dîr
,
¥ogømName
);

88 
	`≥º‹
(": write");

90 
	`Ârötf
(
°dîr
,"%s: wrôêÁûed\n",
¥ogømName
);

92  
FÆ£
;

94 
i
 +
j
;

96  
True
;

97 
	}
}

105 
	$C⁄√˘ToT˝Addr
(
ho°
, 
p‹t
)

107 
sock
;

108 
sockaddr_ö
 
addr
;

109 
⁄e
 = 1;

111 
addr
.
sö_Ámûy
 = 
AF_INET
;

112 
addr
.
sö_p‹t
 = 
	`ht⁄s
(
p‹t
);

113 
addr
.
sö_addr
.
s_addr
 = 
ho°
;

115 
sock
 = 
	`sockë
(
AF_INET
, 
SOCK_STREAM
, 0);

116 i‡(
sock
 < 0) {

117 
	`Ârötf
(
°dîr
,
¥ogømName
);

118 
	`≥º‹
(": ConnectToTcpAddr: socket");

122 i‡(
	`c⁄√˘
(
sock
, (
sockaddr
 *)&
addr
, (addr)) < 0) {

123 
	`Ârötf
(
°dîr
,
¥ogømName
);

124 
	`≥º‹
(": ConnectToTcpAddr: connect");

125 
	`˛o£
(
sock
);

129 i‡(
	`£tsock›t
(
sock
, 
IPPROTO_TCP
, 
TCP_NODELAY
,

130 (*)&
⁄e
, (one)) < 0) {

131 
	`Ârötf
(
°dîr
,
¥ogømName
);

132 
	`≥º‹
(": ConnectToTcpAddr: setsockopt");

133 
	`˛o£
(
sock
);

137  
sock
;

138 
	}
}

147 
	$Li°íAtT˝P‹t
(
p‹t
)

149 
sock
;

150 
sockaddr_ö
 
addr
;

151 
⁄e
 = 1;

153 
addr
.
sö_Ámûy
 = 
AF_INET
;

154 
addr
.
sö_p‹t
 = 
	`ht⁄s
(
p‹t
);

155 
addr
.
sö_addr
.
s_addr
 = 
INADDR_ANY
;

157 
sock
 = 
	`sockë
(
AF_INET
, 
SOCK_STREAM
, 0);

158 i‡(
sock
 < 0) {

159 
	`Ârötf
(
°dîr
,
¥ogømName
);

160 
	`≥º‹
(": ListenAtTcpPort: socket");

164 i‡(
	`£tsock›t
(
sock
, 
SOL_SOCKET
, 
SO_REUSEADDR
,

165 (c⁄° *)&
⁄e
, (one)) < 0) {

166 
	`Ârötf
(
°dîr
,
¥ogømName
);

167 
	`≥º‹
(": ListenAtTcpPort: setsockopt");

168 
	`˛o£
(
sock
);

172 i‡(
	`böd
(
sock
, (
sockaddr
 *)&
addr
, (addr)) < 0) {

173 
	`Ârötf
(
°dîr
,
¥ogømName
);

174 
	`≥º‹
(": ListenAtTcpPort: bind");

175 
	`˛o£
(
sock
);

179 i‡(
	`li°í
(
sock
, 5) < 0) {

180 
	`Ârötf
(
°dîr
,
¥ogømName
);

181 
	`≥º‹
(": ListenAtTcpPort:Üisten");

182 
	`˛o£
(
sock
);

186  
sock
;

187 
	}
}

195 
	$Ac˚±T˝C⁄√˘i⁄
(
li°íSock
)

197 
sock
;

198 
sockaddr_ö
 
addr
;

199 
addæí
 = (
addr
);

200 
⁄e
 = 1;

202 
sock
 = 
	`ac˚±
(
li°íSock
, (
sockaddr
 *Ë&
addr
, &
addæí
);

203 i‡(
sock
 < 0) {

204 
	`Ârötf
(
°dîr
,
¥ogømName
);

205 
	`≥º‹
(": AcceptTcpConnection:áccept");

209 i‡(
	`£tsock›t
(
sock
, 
IPPROTO_TCP
, 
TCP_NODELAY
,

210 (*)&
⁄e
, (one)) < 0) {

211 
	`Ârötf
(
°dîr
,
¥ogømName
);

212 
	`≥º‹
(": AcceptTcpConnection: setsockopt");

213 
	`˛o£
(
sock
);

217  
sock
;

218 
	}
}

226 
	$SåögToIPAddr
(c⁄° *
°r
, *
addr
)

228 
ho°ít
 *
hp
;

230 i‡((*
addr
 = 
	`öë_addr
(
°r
)) == -1)

232 i‡(!(
hp
 = 
	`gëho°by«me
(
°r
)))

235 *
addr
 = *(*)
hp
->
h_addr
;

239 
	}
}

246 
Boﬁ


247 
	$SameMachöe
(
sock
)

249 
sockaddr_ö
 
≥îaddr
, 
myaddr
;

250 
addæí
 = (
sockaddr_ö
);

252 
	`gë≥î«me
(
sock
, (
sockaddr
 *)&
≥îaddr
, &
addæí
);

253 
	`gësock«me
(
sock
, (
sockaddr
 *)&
myaddr
, &
addæí
);

255  (
≥îaddr
.
sö_addr
.
s_addr
 =
myaddr
.sin_addr.s_addr);

256 
	}
}

264 
	$PrötInHex
(*
buf
, 
Àn
)

266 
i
, 
j
;

267 
c
, 
°r
[17];

269 
°r
[16] = 0;

271 
	`Ârötf
(
°dîr
,"ReadExact: ");

273 
i
 = 0; i < 
Àn
; i++)

275 i‡((
i
 % 16 == 0) && (i != 0)) {

276 
	`Ârötf
(
°dîr
," ");

278 
c
 = 
buf
[
i
];

279 
°r
[
i
 % 16] = (((
c
 > 31) && (c < 127)) ? c : '.');

280 
	`Ârötf
(
°dîr
,"%02x ",()
c
);

281 i‡((
i
 % 4) == 3)

282 
	`Ârötf
(
°dîr
," ");

283 i‡((
i
 % 16) == 15)

285 
	`Ârötf
(
°dîr
,"%s\n",
°r
);

288 i‡((
i
 % 16) != 0)

290 
j
 = 
i
 % 16; j < 16; j++)

292 
	`Ârötf
(
°dîr
," ");

293 i‡((
j
 % 4Ë=3Ë
	`Ârötf
(
°dîr
," ");

295 
°r
[
i
 % 16] = 0;

296 
	`Ârötf
(
°dîr
,"%s\n",
°r
);

299 
	`fÊush
(
°dîr
);

300 
	}
}

	@demos/vnc/vncviewer/vncviewer.c

24 
	~<vncvõwî.h
>

26 
H™dÀEvíts
(
GR_EVENT
 *
ev
);

29 
	$maö
(
¨gc
, **
¨gv
)

31 #i‚de‡
NANOX


32 
fd_£t
 
fds
;

33 
timevÆ
 
tv
, *
tvp
;

34 
msWaô
;

36 
	`¥o˚ssArgs
(
¨gc
, 
¨gv
);

38 i‡(
li°íS≥cifõd
) {

40 #i‚de‡
NANOX


41 
	`li°íF‹IncomögC⁄√˘i⁄s
();

46 i‡(!
	`C⁄√˘ToRFBSîvî
(
ho°«me
, 
p‹t
)Ë
	`exô
(1);

49 i‡(!
	`Inôüli£RFBC⁄√˘i⁄
(
rfbsock
)Ë
	`exô
(1);

51 i‡(!
	`Cª©eXWödow
()Ë
	`exô
(1);

53 i‡(!
	`SëF‹m©AndEncodögs
()) {

54 
	`ShutdownX
();

55 
	`exô
(1);

58 i‡(!
	`SídFømebuf„rUpd©eReque°
(
upd©eReque°X
, 
upd©eReque°Y
,

59 
upd©eReque°W
, 
upd©eReque°H
, 
FÆ£
)) {

60 
	`ShutdownX
();

61 
	`exô
(1);

64 
	`¥ötf
("«nox fd = %d,Ñfbsock = %d\n", 
	`C⁄√˘i⁄Numbî
(
dpy
), 
rfbsock
);

65 #ifde‡
NANOX


67 
	`GrRegi°îI≈ut
(
rfbsock
);

69 
True
) {

70 
	`GrMaöLo›
(
H™dÀEvíts
);

74 
True
) {

81 i‡(!
	`H™dÀXEvíts
()) {

82 
	`ShutdownX
();

83 
	`exô
(1);

86 
tvp
 = 
NULL
;

88 i‡(
£ndUpd©eReque°
) {

89 
	`gëtimeofday
(&
tv
, 
NULL
);

91 
msWaô
 = (
upd©eReque°Pîiodms
 +

92 ((
upd©eReque°Time
.
tv_£c
 - 
tv
.tv_sec) * 1000) +

93 ((
upd©eReque°Time
.
tv_u£c
 - 
tv
.tv_usec) / 1000));

95 i‡(
msWaô
 > 0) {

96 
tv
.
tv_£c
 = 
msWaô
 / 1000;

97 
tv
.
tv_u£c
 = (
msWaô
 % 1000) * 1000;

99 
tvp
 = &
tv
;

101 i‡(!
	`SídIn¸emíèlFømebuf„rUpd©eReque°
()) {

102 
	`ShutdownX
();

103 
	`exô
(1);

108 
	`FD_ZERO
(&
fds
);

109 
	`FD_SET
(
	`C⁄√˘i⁄Numbî
(
dpy
),&
fds
);

110 
	`FD_SET
(
rfbsock
,&
fds
);

112 i‡(
	`£À˘
(
FD_SETSIZE
, &
fds
, 
NULL
, NULL, 
tvp
) < 0) {

113 
	`≥º‹
("select");

114 
	`ShutdownX
();

115 
	`exô
(1);

118 i‡(
	`FD_ISSET
(
rfbsock
, &
fds
)) {

119 i‡(!
	`H™dÀRFBSîvîMesßge
()) {

120 
	`ShutdownX
();

121 
	`exô
(1);

128 
	}
}

130 #ifde‡
NANOX


135 
	$H™dÀEvíts
(
GR_EVENT
 *
ev
)

137 
timevÆ
 
tv
, *
tvp
;

138 
msWaô
;

143 i‡(
ev
->
ty≥
 =
GR_EVENT_TYPE_FDINPUT
) {

144 i‡(!
	`H™dÀRFBSîvîMesßge
()) {

145 
	`ShutdownX
();

146 
	`exô
(1);

149 i‡(!
	`H™dÀXEvíts
(
ev
)) {

150 
	`ShutdownX
();

151 
	`exô
(1);

154 i‡(
£ndUpd©eReque°
) {

155 
	`gëtimeofday
(&
tv
, 
NULL
);

157 
msWaô
 = (
upd©eReque°Pîiodms
 +

158 ((
upd©eReque°Time
.
tv_£c
 - 
tv
.tv_sec) * 1000) +

159 ((
upd©eReque°Time
.
tv_u£c
 - 
tv
.tv_usec) / 1000));

161 i‡(
msWaô
 > 0) {

162 
tv
.
tv_£c
 = 
msWaô
 / 1000;

163 
tv
.
tv_u£c
 = (
msWaô
 % 1000) * 1000;

165 
tvp
 = &
tv
;

167 i‡(!
	`SídIn¸emíèlFømebuf„rUpd©eReque°
()) {

168 
	`ShutdownX
();

169 
	`exô
(1);

173 
	}
}

	@demos/vnc/vncviewer/vncviewer.h

24 
	~<°dio.h
>

25 
	~<°dlib.h
>

26 
	~<°rög.h
>

27 
	~<sys/time.h
>

28 #ifde‡
NANOX


29 
	#MWINCLUDECOLORS


	)

30 
	~"«no-X.h
"

32 
	tCARD32
;

33 
	tCARD16
;

34 
	tCARD8
;

36 
	~<X11/Xlib.h
>

37 
	~<X11/Xmd.h
>

39 
	~<rfb¥Ÿo.h
>

41 #ifde‡
NANOX


43 
	#Boﬁ
 
GR_BOOL


	)

44 
	#True
 
GR_TRUE


	)

45 
	#FÆ£
 
GR_FALSE


	)

46 
	#XGCVÆues
 
GR_GC_INFO


	)

48 
GR_ID
 
	tWödow
;

49 
GR_ID
 
	tCﬁ‹m≠
;

50 
CARD32
 
	tAtom
;

51 
CARD32
 
	tTime
;

53 
	#N⁄e
 0L

	)

54 
	#CuºítTime
 0L

	)

55 
	#Pr›îtyCh™geMask
 (1L<<22Ë

	)

56 
	#XA_PRIMARY
 ((
Atom
Ë1Ë

	)

59 
	#DoRed
 (1<<0)

	)

60 
	#DoGªí
 (1<<1)

	)

61 
	#DoBlue
 (1<<2)

	)

63 
	#C⁄√˘i⁄Numbî
(
dpy
Ë((dpy)->
fd
)

	)

64 
	#S¸ìnOfDi•œy
(
dpy
, 
s¸
Ë(&(dpy)->
s¸ìns
[s¸])

	)

65 
	#DeÁu…S¸ìn
(
dpy
Ë((dpy)->
deÁu…_s¸ìn
)

	)

66 
	#DeÁu…RoŸWödow
(
dpy
Ë(
	`S¸ìnOfDi•œy
(dpy,
	`DeÁu…S¸ìn
(dpy))->
roŸ
)

	)

67 
	#DeÁu…GC
(
dpy
, 
s¸
Ë(
	`S¸ìnOfDi•œy
(dpy,s¸)->
deÁu…_gc
)

	)

71 
	mpixñ
;

72 
	mªd
, 
	mgªí
, 
	mblue
;

73 
	mÊags
;

74 
	m∑d
;

75 } 
	tXCﬁ‹
;

77 
	#GCF‹eground
 (1L<<2)

	)

78 
	#GCBackground
 (1L<<3)

	)

84 
Wödow
 
	mroŸ
;

85 } 
	tS¸ìn
;

90 
	mfd
;

91 
	mdeÁu…_s¸ìn
;

92 
S¸ìn
 *
	ms¸ìns
;

93 } 
	tDi•œy
;

99 
	mdummy
;

100 } 
	tXEvít
;

105 
ídünTe°
;

107 
	#Sw≠16IfLE
(
s
) \

108 (*(*)&
ídünTe°
 ? ((((
s
Ë& 0xffË<< 8Ë| (((sË>> 8Ë& 0xff)Ë: (s))

	)

110 
	#Sw≠32IfLE
(
l
) \

111 (*(*)&
ídünTe°
 ? ((((
l
) & 0xff000000) >> 24) | \

112 (((
l
) & 0x00ff0000) >> 8) | \

113 (((
l
) & 0x0000ff00) << 8) | \

114 (((
l
Ë& 0x000000ffË<< 24)Ë: (l))

	)

116 
	#MAX_ENCODINGS
 10

	)

121 *
¥ogømName
;

122 
ho°«me
[];

123 
p‹t
;

124 
Boﬁ
 
li°íS≥cifõd
;

125 
li°íP‹t
, 
ÊashP‹t
;

126 *
di•œy«me
;

127 
Boﬁ
 
sh¨eDeskt›
;

128 
Boﬁ
 
võwO∆y
;

129 
CARD32
 
ex∂icôEncodögs
[];

130 
nEx∂icôEncodögs
;

131 
Boﬁ
 
addC›yRe˘
;

132 
Boﬁ
 
addRRE
;

133 
Boﬁ
 
addCoRRE
;

134 
Boﬁ
 
addHextûe
;

135 
Boﬁ
 
u£BGR233
;

136 
Boﬁ
 
f‹˚OwnCm≠
;

137 
Boﬁ
 
f‹˚Truecﬁour
;

138 
ªque°edDïth
;

139 *
geomëry
;

140 
wmDec‹©i⁄Width
;

141 
wmDec‹©i⁄Height
;

142 *
∑sswdFûe
;

143 
upd©eReque°Pîiodms
;

144 
upd©eReque°X
;

145 
upd©eReque°Y
;

146 
upd©eReque°W
;

147 
upd©eReque°H
;

148 
øwDñay
;

149 
c›yRe˘Dñay
;

150 
Boﬁ
 
debug
;

152 
¥o˚ssArgs
(
¨gc
, **
¨gv
);

153 
ußge
();

158 
rfbsock
;

159 
Boﬁ
 
ˇnU£CoRRE
;

160 
Boﬁ
 
ˇnU£Hextûe
;

161 *
deskt›Name
;

162 
rfbPixñF‹m©
 
myF‹m©
;

163 
rfbSîvîInôMsg
 
si
;

164 
timevÆ
 
upd©eReque°Time
;

165 
Boﬁ
 
£ndUpd©eReque°
;

167 
Boﬁ
 
C⁄√˘ToRFBSîvî
(c⁄° *
ho°«me
, 
p‹t
);

168 
Boﬁ
 
Inôüli£RFBC⁄√˘i⁄
();

169 
Boﬁ
 
SëF‹m©AndEncodögs
();

170 
Boﬁ
 
SídIn¸emíèlFømebuf„rUpd©eReque°
();

171 
Boﬁ
 
SídFømebuf„rUpd©eReque°
(
x
, 
y
, 
w
, 
h
,

172 
Boﬁ
 
ö¸emíèl
);

173 
Boﬁ
 
SídPoöãrEvít
(
x
, 
y
, 
buâ⁄Mask
);

174 
Boﬁ
 
SídKeyEvít
(
CARD32
 
key
, Boﬁ 
down
);

175 
Boﬁ
 
SídClõ¡CutText
(*
°r
, 
Àn
);

176 
Boﬁ
 
H™dÀRFBSîvîMesßge
();

178 #ifde‡
NANOX


182 
Di•œy
 *
dpy
;

183 
Wödow
 
ˇnvas
;

184 
Cﬁ‹m≠
 
cm≠
;

185 
GR_GC_ID
 
gc
;

186 
GR_GC_ID
 
§cGC
, 
d°GC
;

187 
BGR233ToPixñ
[];

189 
Boﬁ
 
Cª©eXWödow
();

190 
ShutdownX
();

191 
Boﬁ
 
H™dÀXEvíts
(
GR_EVENT
 *
ev
);

192 
Boﬁ
 
AŒXEvítsPªdiˇã
(
Di•œy
 *
dpy
, 
XEvít
 *
ev
, *
¨g
);

193 
C›yD©aToS¸ìn
(
CARD8
 *
buf
, 
x
, 
y
, 
width
, 
height
);

196 *
XDi•œyName
(*
di•œy
);

197 
XCh™geGC
(
Di•œy
 *
dpy
, 
GR_GC_ID
 
gc
, 
vmask
,

198 
GR_GC_INFO
 *
gcv
);

199 
XSt‹eCﬁ‹
(
Di•œy
 *
dpy
, 
Cﬁ‹m≠
 
cm≠
, 
XCﬁ‹
 *
xc
);

200 
XFûlRe˘™gÀ
(
Di•œy
 *
dpy
, 
Wödow
 
ˇnvas
, 
GR_GC_ID
 
gc
,

201 
x
, 
y
, 
w
, 
h
);

202 
XSync
(
Di•œy
 *
dpy
, 
Boﬁ
 
disˇrd
);

203 
XC›yAªa
(
Di•œy
 *
dpy
, 
Wödow
 
§c
, Wödow 
d°
, 
GR_GC_ID
 
gc
, \

204 
x1
, 
y1
, 
w
, 
h
, 
x2
, 
y2
);

205 
XBñl
(
Di•œy
 *
dpy
, 
≥r˚¡
);

206 
XSñe˘I≈ut
(
Di•œy
 *
dpy
, 
Wödow
 
wö
, 
evmask
);

207 
XSt‹eByãs
(
Di•œy
 *
dpy
, *
byãs
, 
nbyãs
);

208 
XSëSñe˘i⁄Ow√r
(
Di•œy
 *
dpy
, 
Atom
 
£l
, 
Wödow
 
own
, 
Time
 
t
);

214 
Di•œy
 *
dpy
;

215 
Wödow
 
ˇnvas
;

216 
Cﬁ‹m≠
 
cm≠
;

217 
GC
 
gc
;

218 
GC
 
§cGC
, 
d°GC
;

219 
BGR233ToPixñ
[];

221 
Boﬁ
 
Cª©eXWödow
();

222 
ShutdownX
();

223 
Boﬁ
 
H™dÀXEvíts
();

224 
Boﬁ
 
AŒXEvítsPªdiˇã
(
Di•œy
 *
dpy
, 
XEvít
 *
ev
, *
¨g
);

225 
C›yD©aToS¸ìn
(
CARD8
 *
buf
, 
x
, 
y
, 
width
, 
height
);

231 
Boﬁ
 
îr‹MesßgeFromRódExa˘
;

233 
Boﬁ
 
RódExa˘
(
sock
, *
buf
, 
n
);

234 
Boﬁ
 
WrôeExa˘
(
sock
, *
buf
, 
n
);

235 
Li°íAtT˝P‹t
(
p‹t
);

236 
C⁄√˘ToT˝Addr
(
ho°
, 
p‹t
);

237 
Ac˚±T˝C⁄√˘i⁄
(
li°íSock
);

238 
SåögToIPAddr
(c⁄° *
°r
, *
addr
);

239 
Boﬁ
 
SameMachöe
(
sock
);

244 
li°íF‹IncomögC⁄√˘i⁄s
();

	@drivers/SubRepl.h

3 
ölöe
 
T8p
 
	$sd
(
T8p
 
d1
, 
s1
, T8∞
d2
, 
s2
)

5 { ((
d1
<<
s1
)|(
d2
>>
s2
)); 
	}
}

7 
ölöe
 
T8p
 
	$sdm
(
T8p
 
d1
, 
s1
, T8∞
d2
, 
s2
, T8∞
m
)

9 { (((
d1
<<
s1
)|(
d2
>>
s2
))&
m
); 
	}
}

11 
ölöe
 
T8p
 
	$sdml
(
T8p
 
d
, 
s
, T8∞
m
)

13 { (
m
&(
d
<<
s
)); 
	}
}

15 
ölöe
 
T8p
 
	$sdmr
(
T8p
 
d
, 
s
, T8∞
m
)

17 { (
m
&(
d
>>
s
)); 
	}
}

32 
ölöe
 
	$B…_Shi·_Posôif_w0
(
P8p
 
s
, P8∞
d
, 
ss
, 
ds
, 
S
, 
T8p
 
M1
, T8∞
M2
, 
w
, 
h
)

34 
M1

M2
&~M1;

37 *
d
(*d&~
M1
Ë| 
	`sdml
(*
s
, 
S
, M1);

38 
d
+
ds
; 
s
+
ss
;

39 } --
h
!=0);

41 
	}
}

43 
ölöe
 
	$B…_Shi·_Posôif_w1
(
P8p
 
s
, P8∞
d
, 
ss
, 
ds
, 
S
, 
T8p
 
M1
, T8∞
M2
, 
w
, 
h
)

45 
S2
32-
S
;

46 
M1
= ~M1;

49 
T8p
 
d1
*
s
++;

50 *
d
++(*d&~
M1
)|
	`sdml
(
d1
, 
S
, M1);

51 *
d
(*d&~
M2
)| 
	`sdm
(*
s
, 
S
, 
d1
, 
S2
, M2);

52 
d
+
ds
; 
s
+
ss
;

53 } --
h
!=0);

55 
	}
}

57 
ölöe
 
	$B…_Shi·_Posôif_w2
(
P8p
 
s
, P8∞
d
, 
ss
, 
ds
, 
S
, 
T8p
 
M1
, T8∞
M2
, 
w
, 
h
)

59 
S2
32- 
S
;

60 
M1
= ~M1;

63 
T8p
 
d2
, 
d1
*
s
++; *
d
++(*d&~
M1
)|
	`sdml
(d1, 
S
, M1);

64 
d2
*
s
++; *
d
++
	`sd
(d2, 
S
, 
d1
, 
S2
);

65 *
d
(*d&~
M2
)|
	`sdm
(*
s
, 
S
, 
d2
, 
S2
, M2);

66 
d
+
ds
; 
s
+
ss
;

67 } --
h
!=0);

69 
	}
}

71 
ölöe
 
	$B…_Shi·_Posôif
(
P8p
 
s
, P8∞
d
, 
ss
, 
ds
, 
S
, 
T8p
 
M1
, T8∞
M2
, 
w
, 
h
)

73 
S2
32- 
S
;

74 
M1
= ~M1;

78 
i
;

80 
T8p
 
d1
*
s
++;

82 *
d
++(*d&~
M1
)|
	`sdml
(
d1
, 
S
, M1);

84 
i

w
;

86 dÿ{ 
T8p
 
d2
*
s
++; *
d
++
	`sd
(d2, 
S
, 
d1
, 
S2
); d1d2; } --
i
!=0);

88 *
d
(*d&~
M2
)|
	`sdm
(*
s
, 
S
, 
d1
, 
S2
, M2);

90 
d
+
ds
; 
s
+
ss
;

91 } --
h
!=0);

93 
	}
}

95 
ölöe
 
	$B…_Shi·_NuŒ_w0
(
P8p
 
s
, P8∞
d
, 
ss
, 
ds
, 
S
, 
T8p
 
M1
, T8∞
M2
, 
w
, 
h
)

97 
M1
|~
M2
;

100 *
d
(*d&
M1
Ë| (*
s
&~M1);

101 
d
+
ds
; 
s
+
ss
;

102 } --
h
!=0);

103 
	}
}

105 
ölöe
 
	$B…_Shi·_NuŒ_w1
(
P8p
 
s
, P8∞
d
, 
ss
, 
ds
, 
S
, 
T8p
 
M1
, T8∞
M2
, 
w
, 
h
)

109 *
d
++(*d&
M1
)|(*
s
++&~M1);

110 *
d
(*d&~
M2
)|(*
s
&M2);

111 
d
+
ds
; 
s
+
ss
;

112 } --
h
!=0);

114 
	}
}

116 
ölöe
 
	$B…_Shi·_NuŒ_w2
(
P8p
 
s
, P8∞
d
, 
ss
, 
ds
, 
S
, 
T8p
 
M1
, T8∞
M2
, 
w
, 
h
)

120 *
d
++(*d&
M1
)|(*
s
++&~M1);

121 *
d
++*
s
++;

122 *
d
(*d&~
M2
)|(*
s
&M2);

123 
d
+
ds
; 
s
+
ss
;

124 } --
h
!=0);

126 
	}
}

128 
ölöe
 
	$B…_Shi·_NuŒ_w3
(
P8p
 
s
, P8∞
d
, 
ss
, 
ds
, 
S
, 
T8p
 
M1
, T8∞
M2
, 
w
, 
h
)

132 *
d
++(*d&
M1
)|(*
s
++&~M1);

133 *
d
++*
s
++;

134 *
d
++*
s
++;

135 *
d
(*d&~
M2
)|(*
s
&M2);

136 
d
+
ds
; 
s
+
ss
;

137 } --
h
!=0);

139 
	}
}

141 
ölöe
 
	$B…_Shi·_NuŒ
(
P8p
 
s
, P8∞
d
, 
ss
, 
ds
, 
S
, 
T8p
 
M1
, T8∞
M2
, 
w
, 
h
)

145 
i
;

146 *
d
++(*d&
M1
)|(*
s
++&~M1);

147 
w
&7)

149 7: *
d
++*
s
++; 6: *d++= *s++; 5: *d++= *s++; 4: *d++= *s++;

150 3: *
d
++*
s
++; 2: *d++= *s++; 1: *d++= *s++; 0: :;

152 
i

w
>>3; i!=0; i--)

154 *
d
++*
s
++; *d++= *s++; *d++= *s++; *d++= *s++;

155 *
d
++*
s
++; *d++= *s++; *d++= *s++; *d++= *s++;

157 *
d
(*d&~
M2
)|(*
s
&M2);

158 
d
+
ds
; 
s
+
ss
;

159 } --
h
!=0);

161 
	}
}

163 
ölöe
 
	$B…_Shi·_Neg©if_w0
(
P8p
 
s
, P8∞
d
, 
ss
, 
ds
, 
S
, 
T8p
 
M1
, T8∞
M2
, 
w
, 
h
)

165 
S2
32+ 
S
;

166 
S
= -S;

167 
M1

M2
&~M1;

170 *
d
(*d&~
M1
Ë| 
	`sdm
(*(
s
+1), 
S2
, *s, 
S
, M1);

171 
d
+
ds
; 
s
+
ss
;

172 } --
h
!=0);

174 
	}
}

176 
ölöe
 
	$B…_Shi·_Neg©if_w1
(
P8p
 
s
, P8∞
d
, 
ss
, 
ds
, 
S
, 
T8p
 
M1
, T8∞
M2
, 
w
, 
h
)

178 
S2
32+ 
S
;

179 
M1
= ~M1;

180 
S
= -S;

183 
T8p
 
d1
*
s
++; T8∞
d2
= *s;

184 *
d
++(*d&~
M1
)|
	`sdm
(
d2
, 
S2
, 
d1
, 
S
, M1);

185 *
d
(*d&~
M2
)|
	`sdm
(*(
s
+1), 
S2
, *s, 
S
, M2);

186 
d
+
ds
; 
s
+
ss
;

187 } --
h
!=0);

189 
	}
}

191 
ölöe
 
	$B…_Shi·_Neg©if_w2
(
P8p
 
s
, P8∞
d
, 
ss
, 
ds
, 
S
, 
T8p
 
M1
, T8∞
M2
, 
w
, 
h
)

193 
S2
32+
S
;

194 
M1
= ~M1;

195 
ss
--;

196 
S
= -S;

199 
T8p
 
d1
*
s
++; T8∞
d2
= *s++;

200 *
d
++(*d&~
M1
)|
	`sdm
(
d2
, 
S2
, 
d1
, 
S
, M1);

201 
d1
*
s
++; *
d
++
	`sd
(d1, 
S2
, 
d2
, 
S
);

202 *
d
(*d&~
M2
)|
	`sdm
(*
s
, 
S2
, 
d1
, 
S
, M2);

203 
d
+
ds
; 
s
+
ss
;

204 } --
h
!=0);

206 
	}
}

208 
ölöe
 
	$B…_Shi·_Neg©if
(
P8p
 
s
, P8∞
d
, 
ss
, 
ds
, 
S
, 
T8p
 
M1
, T8∞
M2
, 
w
, 
h
)

210 
S2
32+
S
;

211 
M1
= ~M1;

212 
ss
--;

213 
S
= -S;

216 
i
;

217 
T8p
 
d1
*
s
++; T8∞
d2
= *s++;

218 *
d
++(*d&~
M1
)|
	`sdm
(
d2
, 
S2
, 
d1
, 
S
, M1);

219 
i

w
;

220 dÿ{ 
d1

d2
; d2*
s
++; *
d
++
	`sd
(d2, 
S2
, d1, 
S
); } --
i
!=0);

221 *
d
(*d&~
M2
)|
	`sdm
(*
s
, 
S2
, 
d2
, 
S
, M2);

222 
d
+
ds
; 
s
+
ss
;

223 } --
h
!=0);

225 
	}
}

	@drivers/asm.h

1 ; 26 
	gJul
 92

2 ; 
C›yright
 (
c
Ë1999 
Gªg
 
	gH´º
 <
	ggªg
@
	g˚nso·
.
	gcom
>

3 ; 
	gasm
.
	gh
 - 
Æl
ásm*.
s
 
	gTC
/
	gMC
/
Azãc
 
as£mbly
 
ö˛ude
 
	gfûe


5 ; 7/26/92 
	gv6
.3 
TSC
 
	gsuµ‹t


6 ; 11/17/92 
‹igöÆ
 
	gvîsi⁄


8 #deföê
	#__LARGE__
, 
__MEDIUM__
, 
__SMALL__
 
modñ


	)

9 #deföê
	#AZTEC
, 
TURBOC
, 
‹
 
MSC
 
C
 
Compûî


	)

11 ; 
Routöes
 
	gö˛uded
:

13 ; 
ö˛ude
 
	gasm
.
	gh
 - 
°¨t
 
the
 
as£mbly
 
	gfûe


14 ; .
	ghódî
 - 
¸óã
 
the
 
code
 
™d
 
d©a
 
	g£gs


15 ; .
	gc£g
 - 
°¨t
 
the
 
code
 
	g£gmít


16 ; .
	g˚nd
 - 
íd
 
the
 
code
 
	g£gmít


17 ; .
	gd£g
 - 
°¨t
 
the
 
d©a
 
	g£gmít


18 ; .
	gdíd
 - 
íd
 
the
 
d©a
 
	g£gmít


19 ; .
dsym
 
	g«me
,
	gty≥
 - 
de˛¨e
 
globÆ
 
C
 
d©a
 (
ty≥
=
w‹d
,
byã
)

20 ; .
˚xç
 
	g«me
 - 
ª„ªn˚
 
™
 
exã∫Æ
 
C
 
	g¥o˚duª
, 
u£
 
modñ
 
as
 
	gty≥


21 ; .
˚xån
 
	g«me
,
	gty≥
- 
ª„ªn˚
 
exã∫Æ
 
C
 
v¨übÀ
 
™d
 
ty≥
(
w‹d
,
byã
)

22 ; .
˝roc
 
	g«me
 - 
de˛¨e
 
a
 
	gC
-
ac˚ssibÀ
 
	g¥o˚duª
, 
u£
 
modñ
 
as
 
	gty≥


23 ; .
˚ndp
 
	g«me
 - 
íd
 
C
 
	g¥o˚duª


24 ; .
	g˚¡î
 - 
íãr
 
C
 
¥o˚duª
 (
£t
 
up
 
BP
 
ëc
)

25 ; .
	g˚xô
 - 
exô
 
C
 
¥o˚duª
 (
ª°‹e
 
BP
 
ëc
)

28 ; 
Check
 
Modñ
 
Symbﬁ


29 
IFNDEF
 
__LARGE__


30 
IFNDEF
 
__MEDIUM__


31 
IFNDEF
 
	g__SMALL__


32 %
OUT
 
You
 
mu°
 
suµly
 
a
 
modñ
 
	gsymbﬁ
, 
	g__LARGE__
, 
	g__SMALL__
, 
‹
 
__MEDIUM__


33 
ENDIF


34 
ENDIF


35 
	gENDIF


37 ; 
Check
 
Compûî
 
Symbﬁ


38 
IFDEF
 
AZTEC


39 
ö˛ude
 
	gasmaz
.
h


40 
ELSE


41 
IFDEF
 
TURBOC


42 
ö˛ude
 
	gasmtc
.
h


43 
ELSE


44 
IFDEF
 
MSC


45 
ö˛ude
 
	gasmmsc
.
h


46 
ELSE


47 
IFDEF
 
TSC


48 
ö˛ude
 
	gasmtsc
.
h


49 
	gELSE


50 %
OUT
 
You
 
mu°
 
suµly
 
a
 
Compûî
 
	gsymbﬁ
, 
	gAZTEC
, 
	gTURBOC
, 
MSC
 
‹
 
	gTSC
.

51 .
ERR


52 
ENDIF


53 
ENDIF


54 
ENDIF


55 
	gENDIF


57 ; 
Deföe
 
Ÿhî
 
globÆ
 
symbﬁs


58 
IFDEF
 
__LARGE__


59 
LPROG
 
	gequ
 1

60 
LDATA
 
	gequ
 1

61 
ifdef
 
AZTEC


62 
PROCP
 
equ
 
Ár


64 
PROCPTR
 
equ
 
Ár
 
±r


65 
ídif


66 
ENDIF


68 
IFDEF
 
__MEDIUM__


69 
LPROG
 
	gequ
 1

70 
LDATA
 
	gequ
 0

71 
ifdef
 
AZTEC


72 
PROCP
 
equ
 
Ár


74 
PROCPTR
 
equ
 
Ár
 
±r


75 
ídif


76 
ENDIF


78 
IFDEF
 
__SMALL__


79 
LPROG
 
	gequ
 0

80 
LDATA
 
	gequ
 0

81 
ifdef
 
AZTEC


82 
PROCP
 
equ
 
√¨


84 
PROCPTR
 
equ
 
√¨
 
±r


85 
ídif


86 
	gENDIF


	@drivers/asmmsc.h

1 ; 30 
	gAug
 92

2 ; 
C›yright
 (
c
Ë1999 
Gªg
 
	gH´º
 <
	ggªg
@
	g˚nso·
.
	gcom
>

3 ; 
	gmsc
.
	gh
 - 
	gasm
.
h
 
ö˛ude
 
MSC
 
	gCompûî


5 ; 8/30/92 
ch™ged
 
smÆl
 
modñ
 
to
 
u£
 
_TEXT
 
⁄ly
 
fixup
 
	govîÊows


6 ; 7/26/92 
	gv6
.3 .
	g˚¡î
/.
˚xô
 
ma¸os
 
	gTSC


7 ; 11/17/90 
‹igöÆ
 
	gvîsi⁄


9 ; .
	ghódî
 - 
°¨t
 
™
 
as£mbly
 
	gfûe


10 .
hódî
 
ma¸o


11 
ifdef
 
__SMALL__


12 
_TEXT
 
SEGMENT
 
WORD
 
	gPUBLIC
 'CODE'

13 
_TEXT
 
ENDS


15 
ASM_TEXT
 
SEGMENT
 
WORD
 
	gPUBLIC
 'CODE'

16 
ASM_TEXT
 
ENDS


17 
ídif


18 
_DATA
 
SEGMENT
 
WORD
 
	gPUBLIC
 'DATA'

19 
_DATA
 
ENDS


20 
CONST
 
SEGMENT
 
WORD
 
	gPUBLIC
 'CONST'

21 
CONST
 
ENDS


22 
_BSS
 
SEGMENT
 
WORD
 
	gPUBLIC
 'BSS'

23 
_BSS
 
ENDS


24 
DGROUP
 
GROUP
 
	gCONST
, 
	g_BSS
, 
_DATA


25 
ifdef
 
__LARGE__


26 
ASSUME
 
	gCS
: 
ASM_TEXT
, 
	gDS
: 
DGROUP
, 
	gSS
: DGROUP

27 
ídif


28 
ifdef
 
__MEDIUM__


29 
ASSUME
 
CS
: 
ASM_TEXT
, 
	gDS
: 
DGROUP
 ; 
smÆl
 
d©a


30 
ídif


31 
ifdef
 
__SMALL__


32 
ASSUME
 
	gCS
: 
_TEXT
, 
	gDS
: 
DGROUP
 ; 
smÆl
 
d©a


33 
ídif


34 
_BSS
 
SEGMENT


35 
_BSS
 
ENDS


36 
	gídm


38 ; .
	gc£g
 - 
°¨t
 
a
 
code
 
	g£gmít


39 .
c£g
 
ma¸o


40 
ifdef
 
__SMALL__


41 
_TEXT
 
SEGMENT


42 
ASSUME
 
	gCS
: 
_TEXT


44 
ASM_TEXT
 
SEGMENT


45 
ASSUME
 
CS
: 
ASM_TEXT


46 
ídif


47 
ídm


49 ; .
	g˚nd
 - 
íd
 
a
 
code
 
	g£gmít


50 .
˚nd
 
ma¸o


51 
ifdef
 
__SMALL__


52 
_TEXT
 
ENDS


54 
ASM_TEXT
 
ENDS


55 
ídif


56 
	gídm


58 ; .
	gd£g
 - 
°¨t
 
a
 
d©a
 
	g£gmít


59 .
d£g
 
ma¸o


60 
_DATA
 
£gmít
 
w‹d
 
	gpublic
 'DATA'

61 
	gídm


63 ; .
	gdsym
 - 
deföe
 
	gd©a


64 .
dsym
 
ma¸o
 
	g«me
,
ty≥


65 
public
 
	g_
&
«me


66 
	g_
&
«me
 
œbñ
 
ty≥


67 
	gídm


69 ; .
	gdíd
 - 
íd
 
a
 
d©a
 
	g£gmít


70 .
díd
 
ma¸o


71 
_DATA
 
íds


72 
	gídm


74 ; .
˚xç
 
	g«me
 - 
de˛¨e
 
™
 
exã∫Æ
 
	g¥o˚duª
, 
u£
 
cuºít
 
modñ
 
	g√¨
/
	gÁr


75 .
˚xç
 
ma¸o
 
«me


76 
LPROG


77 
exån
 
	g_
&
	g«me
:
Ár


79 
exån
 
_
&
«me
:
√¨


80 
ídif


81 
«me
&@ 
equ
 
_
&name

82 
ídm


84 ; .
˚xån
 
	g«me
,
	gty≥
 - 
de˛¨e
 
exã∫Æ
 
C
 
v¨übÀ
 
™d
Åype

85 .
˚xån
 
ma¸o
 
	g«me
,
ty≥


86 
exån
 
	g_
&
	g«me
:
ty≥


87 
«me
&@ 
equ
 
DGROUP
:
_
&name

88 
ídm


90 ; .
˝roc
 
	g«me
 - 
u£d
 
to
 
°¨t
 
a
 
C
 
	g¥o˚duª


91 .
˝roc
 
ma¸o
 
«me


92 
public
 
	g_
&
«me


93 
LPROG


94 
	g¨g1
 = 6

95 
_
&
«me
 
¥oc
 
Ár


97 
¨g1
 = 4

98 
_
&
«me
 
¥oc
 
√¨


99 
ídif


100 
«me
&@ 
equ
 
_
&name

101 
ídm


103 ; .
	g˚ndp
 - 
íd
 
a
 
C
 
	g¥o˚duª


104 .
˚ndp
 
ma¸o
 
«me


105 
	g_
&
«me
 
ídp


106 
	gídm


108 ; .
	g˚¡î
 - 
íãr
 
C
 
	g¥o˚duª


109 .
˚¡î
 
ma¸o


110 
push
 
bp


111 
mov
 
	gbp
,
•


112 
	gídm


114 ; .
	g˚xô
 - 
exô
 
C
 
	g¥o˚duª


115 .
˚xô
 
ma¸o


116 
p›
 
bp


117 
ªt


118 
	gídm


	@drivers/dynacal.c

7 
	~<°dio.h
>

8 
	~<uni°d.h
>

9 
	~<f˙é.h
>

10 
	~<î∫o.h
>

12 
	~<sys/ãrmios.h
>

13 
	~<«no-X.h
>

16 
	ms¸X
;

17 
	ms¸Y
;

18 
	møwX
;

19 
	møwY
;

20 } 
	gd©aPoöts
[4];

23 
ãrmios
 
	gios_ßved
;

24 
ãrmios
 
	gios_cuºít
;

26 
	#BGCOLOR
 
	`GR_RGB
(0,0,0)

	)

27 
	#FGCOLOR
 
	`GR_RGB
(255,255,255)

	)

29 *
	gö°ru˘i⁄s
[4] = {

36 
	$ˇlInôSîül
(*
dev
) {

39 
fd
 = 
	`›í
(
dev
, 
O_NONBLOCK
);

41 i‡(
fd
 <= 0) {

42 
	`≥º‹
("open serial");

46 
	`tcgë©å
(
fd
, &
ios_ßved
);

47 
ios_cuºít
 = 
ios_ßved
;

49 
	`cfmakîaw
(&
ios_cuºít
);

53 
	`cf£ti•ìd
(&
ios_cuºít
, 
B2400
);

54 
	`cf£to•ìd
(&
ios_cuºít
, 
B2400
);

57 
ios_cuºít
.
c_cÊag
 &~(
CSIZE
 | 
PARENB
);

58 
ios_cuºít
.
c_cÊag
 |
CS8
;

60 
ios_cuºít
.
c_cc
[
VMIN
] = 3;

61 
ios_cuºít
.
c_cc
[
VTIME
] = 1;

63 
	`tc£èâr
(
fd
, 
TCSANOW
, &
ios_cuºít
);

64 
	`tcÊush
(
fd
, 
TCIOFLUSH
);

66 (
fd
);

67 
	}
}

69 
	$ˇlClo£Sîül
(
fd
) {

70 
	`tc£èâr
(
fd
, 
TCSANOW
, &
ios_ßved
);

71 
	`tcÊush
(
fd
, 
TCIOFLUSH
);

73 
	`˛o£
(
fd
);

74 
	}
}

76 
	$ˇlRódSîül
(
fd
) {

78 
f
;

79 
vÆ
 = 
	`ªad
(
fd
, &
f
, (f));

81 i‡(
vÆ
 <= 0) (val);

83 ((Ë
f
);

84 
	}
}

88 
	$ˇlGëI≈ut
(
fd
, *
d©a
) {

90 
cou¡
 = 0;

91 
°©e
 = 0;

97 
c
 = 
	`ˇlRódSîül
(
fd
);

99 i‡(
c
 < 0 && 
î∫o
 !
EAGAIN
) (-1);

101 i‡(
cou¡
++ > 500) (0);

102 i‡(
c
 <= 0) ;

104 
°©e
) {

107 i‡(
c
 & 0x80) {

108 
d©a
[0] = (Ë
c
;

109 
°©e
 = 1;

112 
	`Ârötf
(
°dîr
, "N⁄ sèπ byãÑecõved (%2.2x)\n", 
c
);

117 i‡(!(
c
 & 0x80)) {

118 
d©a
[1] = (Ë
c
;

119 
°©e
 = 2;

122 
	`Ârötf
(
°dîr
, "Gotá start byte inÅhe middle ofÅheÖacket\n");

123 
d©a
[0] = (Ë
c
;

125 
°©e
 = 0;

132 i‡(!(
c
 & 0x80)) {

133 
d©a
[2] = (Ë
c
;

137 
	`Ârötf
(
°dîr
, "Gotá start byte inÅhe middle ofÅheÖacket\n");

138 
d©a
[0] = (Ë
c
;

140 
°©e
 = 0;

148 
	}
}

151 
	$døwText
(
GR_WINDOW_ID
 
id
, **
ãxt
, 
cou¡
) {

153 
tw
, 
th
, 
tb
;

154 
xpos
, 
ypos
;

155 
i
;

157 
GR_GC_ID
 
gc
 = 
	`GrNewGC
();

158 
GR_WINDOW_INFO
 
öfo
;

160 
	`GrGëWödowInfo
(
id
, &
öfo
);

162 
	`GrSëGCF‹eground
(
gc
, 
FGCOLOR
);

163 
	`GrSëGCBackground
(
gc
, 
BGCOLOR
);

166 
	`GrGëGCTextSize
(
gc
, 
ãxt
[0], -1, 
GR_TFTOP
, &
tw
, &
th
, &
tb
);

168 
ypos
 = (
öfo
.
height
 - ((
cou¡
 * 
th
)+ 3)) / 2;

172 
i
 = 0; i < 
cou¡
; i++) {

173 
	`GrGëGCTextSize
(
gc
, 
ãxt
[
i
], -1, 
GR_TFTOP
, &
tw
, &
th
, &
tb
);

174 
xpos
 = (
öfo
.
width
 - 
tw
) / 2;

175 
	`GrText
(
id
, 
gc
, 
xpos
, 
ypos
, 
ãxt
[
i
], -1, 
GR_TFTOP
);

177 
ypos
 +
th
 + 3;

180 
	`GrDe°royGC
(
gc
);

181 
	}
}

183 
	$doPoöts
(
GR_WINDOW_ID
 
id
, 
fd
) {

185 
d©a
[4];

186 
îr
 = 0, 
i
;

187 
fd_£t
 
fd£t
;

189 
GR_GC_ID
 
gc
 = 
	`GrNewGC
();

191 
i
 = 0; i < 4; i++) {

193 
tŸÆx
 = 0, 
tŸÆy
 = 0;

194 
p
;

198 i‡(
i
 - 1 >= 0) {

199 
	`GrSëGCF‹eground
(
gc
, 
BGCOLOR
);

200 
	`GrFûlRe˘
(
id
, 
gc
, 
d©aPoöts
[
i
 - 1].
s¸X
 - 10,

201 
d©aPoöts
[
i
 - 1].
s¸Y
 - 10, 20, 20);

205 
	`GrSëGCF‹eground
(
gc
, 
	`GR_RGB
(255,0,0));

207 
	`GrFûlRe˘
(
id
, 
gc
, 
d©aPoöts
[
i
].
s¸X
 - 10, d©aPoöts[i].
s¸Y
 - 1,

210 
	`GrFûlRe˘
(
id
, 
gc
, 
d©aPoöts
[
i
].
s¸X
 - 1, d©aPoöts[i].
s¸Y
 - 10,

213 
	`GrFlush
();

217 
	`FD_SET
(
fd
, &
fd£t
);

219 i‡(
	`£À˘
(
fd
 + 1, &
fd£t
, 0, 0, 0) != -1) {

220 
vÆ
;

221 
ödex
 = 0;

224 
vÆ
 = 
	`ˇlGëI≈ut
(
fd
, 
d©a
);

225 i‡(
vÆ
 < 0) ;

226 i‡(
vÆ
 == 0) ;

228 
tŸÆy
 +(
d©a
[2] | ((data[0] & 0x07) << 7));

229 
tŸÆx
 +(
d©a
[1] | ((data[0] & 0x38) << 4));

231 
ödex
++;

232 i‡(!(
d©a
[0] & 0x40)) ;

235 i‡(
ödex
 > 0) {

236 
d©aPoöts
[
i
].
øwX
 = 
tŸÆx
 / 
ödex
;

237 
d©aPoöts
[
i
].
øwY
 = 
tŸÆy
 / 
ödex
;

242 
	`GrDe°royGC
(
gc
);

243 (
îr
);

244 
	}
}

247 
	$maö
(
¨gc
, **
¨gv
) {

249 
£rülFd
;

250 
outFd
;

252 
GR_SCREEN_INFO
 
öfo
;

253 
GR_WINDOW_ID
 
ˇlWödow
;

254 
GR_EVENT
 
evít
;

258 i‡(
	`GrO≥n
() == -1) {

259 
	`Ârötf
(
°dîr
, "Error! UnableÅo openÅhe graphicsÉngine\n");

265 
£rülFd
 = 
	`ˇlInôSîül
("/dev/ttyS1");

266 i‡(
£rülFd
 == -1) {

267 
	`Ârötf
(
°dîr
, "Error! UnableÅo openÅheÅouchscreen device\n");

271 
	`GrGëS¸ìnInfo
(&
öfo
);

275 
d©aPoöts
[0].
s¸X
 = 10;

276 
d©aPoöts
[0].
s¸Y
 = 10;

278 
d©aPoöts
[1].
s¸X
 = 10;

279 
d©aPoöts
[1].
s¸Y
 = 
öfo
.
rows
 - 10;

281 
d©aPoöts
[2].
s¸X
 = 
öfo
.
cﬁs
 - 10;

282 
d©aPoöts
[2].
s¸Y
 = 
öfo
.
rows
 - 10;

284 
d©aPoöts
[3].
s¸X
 = 
öfo
.
cﬁs
 - 10;

285 
d©aPoöts
[3].
s¸Y
 = 10;

288 
ˇlWödow
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 0, 0, 
öfo
.
cﬁs
, info.
rows
, 0, 
BGCOLOR
, 
FGCOLOR
);

289 
	`GrSñe˘Evíts
(
ˇlWödow
, 
GR_EVENT_MASK_EXPOSURE
);

290 
	`GrM≠Wödow
(
ˇlWödow
);

292 
	`GrPìkEvít
(&
evít
Ë!
GR_EVENT_TYPE_EXPOSURE
);

295 
	`døwText
(
ˇlWödow
, 
ö°ru˘i⁄s
, 4);

297 i‡(!
	`doPoöts
(
ˇlWödow
, 
£rülFd
)) {

299 
s¸XDñè
, 
øwXDñè
;

300 
s¸YDñè
, 
øwYDñè
;

302 
dñèX
, 
dñèY
;

304 
s¸XDñè
 = (Ë
d©aPoöts
[2].
s¸X
 - dataPoints[0].scrX;

305 
øwXDñè
 = (Ë
d©aPoöts
[2].
øwX
 - dataPoints[0].rawX;

307 
s¸YDñè
 = (Ë
d©aPoöts
[1].
s¸Y
 - dataPoints[0].scrY;

308 
øwYDñè
 = (Ë
d©aPoöts
[1].
øwY
 - dataPoints[0].rawY;

314 
dñèX
 = 
	`abs
–(
øwXDñè
 / 
s¸XDñè
Ë* ((Ë
d©aPoöts
[0].
s¸X
));

315 
dñèY
 = 
	`abs
–(
øwYDñè
 / 
s¸YDñè
Ë* ((Ë
d©aPoöts
[0].
s¸Y
));

324 i‡(
d©aPoöts
[0].
øwX
 > dataPoints[2].rawX) {

325 
	`¥ötf
("%d ", (Ë(
d©aPoöts
[0].
øwX
 + 
dñèX
));

326 
	`¥ötf
("%d ", (Ë(
d©aPoöts
[2].
øwX
 - 
dñèX
));

329 
	`¥ötf
("%d ", (Ë(
d©aPoöts
[0].
øwX
 - 
dñèX
));

330 
	`¥ötf
("%d ", (Ë(
d©aPoöts
[2].
øwX
 + 
dñèX
));

333 i‡(
d©aPoöts
[0].
øwY
 >dataPoints[1].rawY) {

334 
	`¥ötf
("%d ", (Ë(
d©aPoöts
[0].
øwY
 + 
dñèY
));

335 
	`¥ötf
("%d\n", (Ë(
d©aPoöts
[1].
øwY
 - 
dñèY
));

338 
	`¥ötf
("%d ", (Ë(
d©aPoöts
[0].
øwY
 - 
dñèY
));

339 
	`¥ötf
("%d\n", (Ë(
d©aPoöts
[1].
øwY
 + 
dñèY
));

343 
	`Ârötf
(
°dîr
, "Error - UnableÅoÑeadÅheÅouchscreen\n");

347 
	`ˇlClo£Sîül
(
£rülFd
);

348 
	`GrClo£
();

352 
	}
}

	@drivers/elkplan4.c

9 
	~"devi˚.h
"

10 
	~"vg≠œn4.h
"

13 
	#SCREENSEG
 
$0a000


	)

14 
	#SCREENBASE
 
	`MK_FP
(0xa000, 0)

	)

15 
	#BYTESPERLINE
 80

	)

18 
gr_mode
;

20 
	gmode_èbÀ
[
MWMODE_MAX
 + 1] = {

28 
	$ega_öô
(
PSD
 
psd
)

31 
psd
->
addr
 = 
SCREENBASE
;

32 
psd
->
löñí
 = 
BYTESPERLINE
;

35 
	`£t_íabÀ_§
 (0x0f);

36 
	`£t_›
 (0);

37 
	`£t_mode
 (0);

40 
	}
}

53 
	$ega_døwh‹zlöe
(
PSD
 
psd
, 
x1
, 
x2
, 
y
, 
cﬁ‹
)

56 
push
 
bp
 ; 
£tup
 
°ack
 
‰ame
 
™d
 
¥e£rve
 
ªgi°îs


57 
mov
 
bp
, 
•


58 
push
 
si


59 
push
 
di


60 
push
 
es


62 ; 
c⁄figuª
 
the
 
gøphics
 
c⁄åﬁÀr


64 
mov
 
dx
, #$03˚ ; 
DX
 :
Gøphics
 
C⁄åﬁÀr
 
p‹t
 
addªss


66 
mov
 
Æ
, #3 ; 
£t
 
d©a
 
rŸ©e
 

67 
Àa
 
bx
, 
_mode_èbÀ


68 
add
 
bx
, 
_gr_mode


69 
mov
 
ah
, [
bx
]

70 
out
 
dx
, 
ax


72 
mov
 
ah
, [
bp
+12] ; 
pixñ
 
vÆue


73 
x‹
 
Æ
,á»; 
Së
/
Re£t
 
	`numbî
 (0)

74 
out
 
dx
, 
ax


76 
mov
 
ax
, #$0f01 ; 
AH
 :
bô
 
∂™e
 
mask
 
E«bÀ
 
Së
/
Re£t


77 
out
 
dx
, 
ax
 ; 
AL
 :
E«bÀ
 
Së
/
Re£t
 
numbî


79 
push
 
ds
 ; 
¥e£rve
 
DS


81 
mov
 
ax
, [
bp
+10] ; 
y


82 
mov
 
bx
, [
bp
+6] ; 
x1


84 ; 
compuã
 
pixñ
 
addªss


85 
mov
 
dx
, #BYTESPERLINE ; 
AX
 :[
row
 * 
BYTESPERLINE
]

86 
mul
 
dx


87 
mov
 
˛
, 
bl
 ; 
ßve
 
low
 
‹dî
 
cﬁumn
 
bôs


88 
shr
 
bx
, #1 ; 
BX
 :[
cﬁ
 / 8]

89 
shr
 
bx
, #1

90 
shr
 
bx
, #1

91 
add
 
bx
, 
ax
 ; 
BX
 :[
row
 * 
BYTESPERLINE
] + [
cﬁ
 / 8]

92 
™d
 
˛
, #$07 ; 
CL
 :[
cﬁ
 % 8]

93 
x‹
 
˛
, #$07 ; 
CL
 :7 - [
cﬁ
 % 8]

94 
mov
 
ah
, #$01 ; 
AH
 :1 << [7 - [
cﬁ
 % 8]] [
mask
]

95 
mov
 
dx
, #SCREENSEG ; 
ES
 :
EGA
 
buf„r
 
£gmít
 
addªss


96 
mov
 
es
, 
dx


97 ; 
AH
 :
bô
 
mask


98 ; 
ES
:
BX
 -> 
video
 
buf„r


99 ; 
CL
 :
numbî
 
bôs
 
to
 
shi·
 
À·


100 
mov
 
di
, 
bx
 ; 
ES
:
DI
 -> 
buf„r


101 
mov
 
dh
, 
ah
 ; 
DH
 :
unshi·ed
 
bô
 
mask
 
À·
 
byã


103 
nŸ
 
dh


104 
shl
 
dh
, 
˛
 ; 
DH
 :
ªvî£
 
bô
 
mask
 
fú°
 
byã


105 
nŸ
 
dh
 ; 
DH
 :
bô
 
mask
 
fú°
 
byã


107 
mov
 
cx
, [
bp
+8] ; 
x2


108 
™d
 
˛
, #7

109 
x‹
 
˛
, #7 ; 
CL
 :
numbî
 
of
 
bôs
 
to
 
shi·
 
À·


110 
mov
 
dl
, #$0f‡; 
DL
 :
unshi·ed
 
bô
 
mask
 
right
 
byã


111 
shl
 
dl
, 
˛
 ; 
DL
 :
bô
 
mask
 
œ°
 
byã


113 ; 
dëîmöe
 
byã
 
off£t
 
of
 
fú°
 
™d
 
œ°
 
pixñ
 
ö
 
the
 
löe


115 
mov
 
ax
, [
bp
+8] ; 
AX
 :
x2


116 
mov
 
bx
, [
bp
+6] ; 
BX
 :
x1


118 
mov
 
˛
, #3 ; 
bôs
 
to
 
c⁄vît
 
pixñs
Åÿ
byãs


120 
shr
 
ax
, 
˛
 ; 
AX
 :
byã
 
off£t
 
of
 
X2


121 
shr
 
bx
, 
˛
 ; 
BX
 :
byã
 
off£t
 
of
 
X1


122 
mov
 
cx
, 
ax


123 
sub
 
cx
, 
bx
 ; 
CX
 :[
numbî
 
of
 
byãs
 
ö
 
löe
] - 1

125 ; 
gë
 
Gøphics
 
C⁄åﬁÀr
 
p‹t
 
addªss
 
öto
 
DX


127 
mov
 
bx
, 
dx
 ; 
BH
 :
bô
 
mask
 
fú°
 
byã


128 ; 
BL
 :
bô
 
mask
 
œ°
 
byã


129 
mov
 
dx
, #$03˚ ; 
DX
 :
Gøphics
 
C⁄åﬁÀr
 
p‹t


130 
mov
 
Æ
, #8 ; 
AL
 :
Bô
 
mask
 
Regi°î
 
numbî


132 ; 
make
 
video
 
buf„r
 
addªsßbÀ
 
through
 
DS
:
SI


134 
push
 
es


135 
p›
 
ds


136 
mov
 
si
, 
di
 ; 
DS
:
SI
 -> 
video
 
buf„r


138 ; 
£t
 
pixñs
 
ö
 
À·mo°
 
byã
 
of
 
the
 
löe


140 
‹
 
bh
, bh

141 
js
 
L43
 ; 
jump
 
byã
-
Æig√d
 [
x1
 
is
 
À·mo°
]

143 
‹
 
cx
, cx

144 
jnz
 
L42
 ; 
jump
 
m‹e
 
th™
 
⁄e
 
byã
 
ö
 
the
 
löe


146 
™d
 
bl
, 
bh
 ; 
BL
 :
bô
 
mask
 
the
 
löe


147 
jmp
 
√¨
 
L44


149 
L42
: 
mov
 
ah
, 
bh
 ; 
AH
 :
bô
 
mask
 
fú°
 
byã


150 
out
 
dx
, 
ax
 ; 
upd©e
 
gøphics
 
c⁄åﬁÀr


152 
movsb
 ; 
upd©e
 
bô
 
∂™es


153 
dec
 
cx


155 ; 
u£
 
a
 
Á°
 8086 
machöe
 
ö°ru˘i⁄
 
to
 
døw
 
the
 
ªmaödî
 
of
Åhê
löe


157 
L43
: 
mov
 
ah
, #$0f‡; 
AH
 :
bô
 
mask


158 
out
 
dx
, 
ax
 ; 
upd©e
 
Bô
 
Mask
 

159 
ªp


160 
movsb
 ; 
upd©e
 
Æl
 
pixñs
 
ö
 
the
 
löe


162 ; 
£t
 
pixñs
 
ö
 
the
 
rightmo°
 
byã
 
of
Åhê
löe


164 
L44
: 
mov
 
ah
, 
bl
 ; 
AH
 :
bô
 
mask
 
œ°
 
byã


165 
out
 
dx
, 
ax
 ; 
upd©e
 
Gøphics
 
C⁄åﬁÀr


166 
movsb
 ; 
upd©e
 
bô
 
∂™es


168 
p›
 
ds
 ; 
ª°‹e
 ds

170 ; 
ª°‹e
  
Gøphics
 
C⁄åﬁÀr
 
°©e
 
™d
  
to
 
ˇŒî


171 ;;
x‹
 
ax
,áx ; 
AH
 :0, 
AL
 := 0

172 ;;
out
 
dx
, 
ax
 ; 
ª°‹e
 
Së
/
Re£t
 

173 ;;
öc
 
ax
 ; 
AH
 :0, 
AL
 := 1

174 ;;
out
 
dx
, 
ax
 ; 
ª°‹e
 
E«bÀ
 
Së
/
Re£t
 

175 ;;
mov
 
ax
, #$0ff08 ; 
AH
 :0xff, 
AL
 := 0

176 ;;
out
 
dx
, 
ax
 ; 
ª°‹e
 
Bô
 
Mask
 

178 
p›
 
es


179 
p›
 
di


180 
p›
 
si


181 
p›
 
bp


183 
	}
}

197 
	$ega_døwvîéöe
(
PSD
 
psd
, 
x
,
y1
, 
y2
, 
cﬁ‹
)

200 
push
 
bp
 ; 
£tup
 
°ack
 
‰ame
 
™d
 
¥e£rve
 
ªgi°îs


201 
mov
 
bp
, 
•


202 
push
 
ds


204 ; 
c⁄figuª
 
the
 
gøphics
 
c⁄åﬁÀr


206 
mov
 
dx
, #$03˚ ; 
DX
 :
Gøphics
 
C⁄åﬁÀr
 
p‹t
 
addªss


208 
mov
 
Æ
, #3 ; 
£t
 
d©a
 
rŸ©e
 

209 
Àa
 
bx
, 
_mode_èbÀ


210 
add
 
bx
, 
_gr_mode


211 
mov
 
ah
, [
bx
]

212 
out
 
dx
, 
ax


214 
mov
 
ah
, [
bp
+12] ; 
cﬁ‹
 
pixñ
 
vÆue


215 
x‹
 
Æ
,á»; 
Së
/
Re£t
 
	`numbî
 (0)

216 
out
 
dx
, 
ax


218 
mov
 
ax
, #$0f01 ; 
AH
 :
bô
 
∂™e
 
mask
 
E«bÀ
 
Së
/
Re£t


219 
out
 
dx
, 
ax
 ; 
AL
 :
E«bÀ
 
Së
/
Re£t
 
numbî


221 ; 
¥ï¨e
 
to
 
døw
 
vîtiˇl
 
löe


223 
mov
 
ax
, [
bp
+8] ; 
AX
 :
y1


224 
mov
 
cx
, [
bp
+10] ; 
BX
 :
y2


225 ;;
mov
 
cx
, 
bx


226 
sub
 
cx
, 
ax
 ; 
CX
 :
dy


227 ;;
jge
 
L311
 ; 
jump
 
dy
 >= 0

228 ;;
√g
 
cx
 ; 
f‹˚
 
dy
 >= 0

229 ;;
mov
 
ax
, 
bx
 ; 
AX
 :
y2


231 
L311
: 
öc
 
cx
 ; 
CX
 :
numbî
 
of
 
pixñs
 
to
 
døw


232 
mov
 
bx
, [
bp
+6] ; 
BX
 :
x


233 
push
 
cx
 ; 
ßve
 

235 ; 
compuã
 
pixñ
 
addªss


236 
push
 
dx


237 
mov
 
dx
, #BYTESPERLINE ; 
AX
 :[
row
 * 
BYTESPERLINE
]

238 
mul
 
dx


239 
mov
 
˛
, 
bl
 ; 
ßve
 
low
 
‹dî
 
cﬁumn
 
bôs


240 
shr
 
bx
, #1 ; 
BX
 :[
cﬁ
 / 8]

241 
shr
 
bx
, #1

242 
shr
 
bx
, #1

243 
add
 
bx
, 
ax
 ; 
BX
 :[
row
 * 
BYTESPERLINE
] + [
cﬁ
 / 8]

244 
™d
 
˛
, #$07 ; 
CL
 :[
cﬁ
 % 8]

245 
x‹
 
˛
, #$07 ; 
CL
 :7 - [
cﬁ
 % 8]

246 
mov
 
ah
, #$01 ; 
AH
 :1 << [7 - [
cﬁ
 % 8]] [
mask
]

247 
mov
 
dx
, #SCREENSEG ; 
DS
 :
EGA
 
buf„r
 
£gmít
 
addªss


248 
mov
 
ds
, 
dx


249 
p›
 
dx


250 ; 
AH
 :
bô
 
mask


251 ; 
DS
:
BX
 -> 
video
 
buf„r


252 ; 
CL
 :
numbî
 
bôs
 
to
 
shi·
 
À·


254 ; 
£t
 
up
 
Gøphics
 
c⁄åﬁÀr


256 
shl
 
ah
, 
˛
 ; 
AH
 :
bô
 
mask
 
ö
 
¥›î
 
posôi⁄


257 
mov
 
Æ
, #$08 ; 
AL
 :
Bô
 
Mask
 
numbî


258 
out
 
dx
, 
ax


260 
p›
 
cx
 ; 
ª°‹e
 

262 ; 
døw
 
the
 
löe


264 
mov
 
dx
, #BYTESPERLINE ; 
ö¸emít
 
video
 
buf„r


265 
L1111
: 
‹
 [
bx
], 
Æ
 ; 
£t
 
pixñ


266 
add
 
bx
, 
dx
 ; 
ö¸emít
 
to
 
√xt
 
löe


267 
lo›
 
L1111


269 ; 
ª°‹e
  
Gøphics
 
C⁄åﬁÀr
 
°©e
 
™d
  
to
 
ˇŒî


270 ;;
x‹
 
ax
,áx ; 
AH
 :0, 
AL
 := 0

271 ;;
out
 
dx
, 
ax
 ; 
ª°‹e
 
Së
/
Re£t
 

272 ;;
öc
 
ax
 ; 
AH
 :0, 
AL
 := 1

273 ;;
out
 
dx
, 
ax
 ; 
ª°‹e
 
E«bÀ
 
Së
/
Re£t
 

274 ;;
mov
 
ax
, #$0ff08 ; 
AH
 :0xff, 
AL
 := 0

275 ;;
out
 
dx
, 
ax
 ; 
ª°‹e
 
Bô
 
Mask
 

277 
p›
 
ds


278 
p›
 
bp


280 
	}
}

288 
	$ega_døwpixñ
(
PSD
 
psd
, 
x
, 
y
, 
cﬁ‹
)

291 
push
 
bp


292 
mov
 
bp
, 
•


294 
mov
 
dx
, #$03˚ ; 
gøphics
 
c⁄åﬁÀr
 
p‹t
 
addªss


295 
mov
 
Æ
, #3 ; 
£t
 
d©a
 
rŸ©e
 

296 
Àa
 
bx
, 
_mode_èbÀ


297 
add
 
bx
, 
_gr_mode


298 
mov
 
ah
, [
bx
]

299 
out
 
dx
, 
ax


301 
mov
 
cx
, [
bp
+6] ; 
ECX
 :
x


302 
mov
 
ax
, [
bp
+8] ; 
EAX
 :
y


304 
mov
 
dx
, #BYTESPERLINE ; 
AX
 :[
y
 * 
BYTESPERLINE
]

305 
mul
 
dx


307 
mov
 
bx
, 
cx
 ; 
BX
 :[
x
 / 8]

308 
shr
 
bx
, #1

309 
shr
 
bx
, #1

310 
shr
 
bx
, #1

312 
add
 
bx
, 
ax
 ; 
BX
 :[
y
 * 
BYTESPERLINE
] + [
x
 / 8]

314 
™d
 
˛
, #$07 ; 
CL
 :[
x
 % 8]

315 
x‹
 
˛
, #$07 ; 
CL
 :7 - [
x
 % 8]

316 
mov
 
ch
, #$01 ; 
CH
 :1 << [7 - [
x
 % 8]] [
mask
]

317 
shl
 
ch
, 
˛


319 
mov
 
dx
, #$03˚ ; 
gøphics
 
c⁄åﬁÀr
 
p‹t
 
addªss


321 ;;
ªquúed
 
ﬁd
 
code


322 
mov
 
ax
, #$0205 ; 
£À˘
 
wrôe
 
mode
 2

323 
out
 
dx
, 
ax
 ; [
lﬂd
 
vÆue
 2 
öto
 
mode
 5]

325 ; 
√w
 
code


326 ;;
x‹
 
ax
,ax ; 
£t
 
cﬁ‹
 0

327 ;;
mov
 
ah
,[
bp
+10] ; 
cﬁ‹
 
pixñ
 
vÆue


328 ;;
out
 
dx
,
ax


330 ; 
‹igöÆ
 
code


331 
mov
 
Æ
, #$08 ; 
£t
 
the
 
bô
 
mask
 

332 
mov
 
ah
, 
ch
 ; [
lﬂd
 
bô
 
mask
 
öto
 8]

333 
out
 
dx
, 
ax


335 
push
 
ds


336 
mov
 
ax
, #SCREENSEG ; 
DS
 :
EGA
 
buf„r
 
£gmít
 
addªss


337 
mov
 
ds
, 
ax


339 ; 
√w
 
code


340 ;;
‹
 [
bx
],
Æ
 ; 
quick
 
rmw
 
to
 
£t
 
pixñ


342 ;;
the
 
fﬁlowög
 
Áûs
 
undî
 
ELKS
 
wôhout
 
˛i
/
°i


343 ;;
usög
 
ES
 
w‹ks
 
though
. 
Code
 
ch™ged
 
to
 
u£
 
sögÀ


344 ;;
rmw
 
above
 
øthî
 
th™
 
wrôe
 
mode
 2, 
but
 
the


345 ;;
ªas⁄
 
this
 
Áûuª
 
is
 
°ûl
 
unknown
...

346 ;;
˛i


347 
mov
 
Æ
, [
bx
] ; 
dummy
 
ªad
 
to
 
œtch
 
bô
 
∂™es


348 
mov
 
Æ
, [
bp
+10] ; 
pixñ
 
vÆue


349 
mov
 [
bx
], 
Æ
 ; 
wrôe
 
pixñ
 
back
 
to
 
bô
 
∂™es


350 ;;
°i


352 
p›
 
ds
 ; 
ª°‹e
 
ªgi°îs
 
™d
 

354 
mov
 
ax
, #$0005 ; 
ª°‹e
  
wrôe
 
mode
 0

355 
out
 
dx
, 
ax
 ; [
lﬂd
 
vÆue
 0 
öto
 
mode
 5]

357 ;;
mov
 
ax
, #$0ff08 ; 
ª°‹e
  
bô
 
mask


358 ;;
out
 
dx
, 
ax
 ; [
lﬂd
 
vÆue
 
ff
 
öto
 8]

360 
p›
 
bp


362 
	}
}

369 
PIXELVAL


370 
	$ega_ªadpixñ
(
PSD
 
psd
, 
x
, 
y
)

373 
push
 
bp


374 
mov
 
bp
, 
•


375 
push
 
si


376 
push
 
ds


378 
mov
 
ax
, [
bp
+8] ; 
EAX
 :
y


379 
mov
 
bx
, [
bp
+6] ; 
EBX
 :
x


380 
mov
 
dx
, #BYTESPERLINE ; 
AX
 :[
y
 * 
BYTESPERLINE
]

381 
mul
 
dx


383 
mov
 
˛
, 
bl
 ; 
ßve
 
low
 
‹dî
 
cﬁumn
 
bôs


384 
shr
 
bx
, #1 ; 
BX
 :[
x
 / 8]

385 
shr
 
bx
, #1

386 
shr
 
bx
, #1

388 
add
 
bx
, 
ax
 ; 
BX
 :[
y
 * 
BYTESPERLINE
] + [
x
 / 8]

390 
™d
 
˛
, #$07 ; 
CL
 :[
x
 % 8]

391 
x‹
 
˛
, #$07 ; 
CL
 :7 - [
x
 % 8]

393 
mov
 
dx
, #SCREENSEG ; 
DS
 :
EGA
 
buf„r
 
£gmít
 
addªss


394 
mov
 
ds
, 
dx


396 
mov
 
ch
, #$01 ; 
CH
 :1 << [7 - [
cﬁ
 % 8]] [
mask
]

397 
shl
 
ch
, 
˛
 ; 
CH
 :
bô
 
mask
 
ö
 
¥›î
 
posôi⁄


399 
mov
 
si
, 
bx
 ; 
DS
:
SI
 -> 
ªgi⁄
 
buf„r
 
byã


400 
x‹
 
bl
, b»; 
BL
 
is
 
u£d
 
to
 
accumuœã
 
the
 
pixñ
 
vÆue


402 
mov
 
dx
, #$03˚ ; 
DX
 :
Gøphics
 
C⁄åﬁÀr
 
p‹t


403 
mov
 
ax
, #$0304 ; 
AH
 :
öôül
 
bô
 
∂™e
 
numbî


404 ; 
AL
 :
Ród
 
M≠
 
Sñe˘
 
numbî


406 
L112
: 
out
 
dx
, 
ax
 ; 
£À˘
 
bô
 
∂™e


407 
mov
 
bh
, [
si
] ; 
BH
 :
byã
 
‰om
 
cuºít
 
bô
 
∂™e


408 
™d
 
bh
, 
ch
 ; 
mask
 
⁄e
 
bô


409 
√g
 
bh
 ; 
bô
 7 
of
 
BH
 :1 
masked
 bit = 1

410 ; 
bô
 7 
of
 
BH
 :0 
masked
 bit = 0

411 
rﬁ
 
bx
, #1 ; 
bô
 0 
of
 
BL
 :
√xt
 bô 
‰om
 
pixñ
 
vÆue


412 
dec
 
ah
 ; 
AH
 :
√xt
 
bô
 
∂™e
 
numbî


413 
jge
 
L112


415 
x‹
 
ax
,áx ; 
AL
 :
pixñ
 
vÆue


416 
mov
 
Æ
, 
bl


418 
p›
 
ds


419 
p›
 
si


420 
p›
 
bp


422 
	}
}

	@drivers/elksutil.c

6 
	~"devi˚.h
"

7 
	~"vg≠œn4.h
"

13 
	$GETBYTE_FP
(
FARADDR
 
addr
)

16 
push
 
bp


17 
mov
 
bp
,
•


18 
push
 
ds


20 
mov
 
bx
,[
bp
+4] ! bx = 
lo
 
addr


21 
mov
 
ax
,[
bp
+6] ! 
ds
 = 
hi
 
addr


22 
mov
 
ds
,
ax


23 
mov
 
Æ
,[
bx
] ! 
gë
 
byã
 
©
 
ds
:bx

24 
x‹
 
ah
,ah

26 
p›
 
ds


27 
p›
 
bp


29 
	}
}

35 
	$PUTBYTE_FP
(
FARADDR
 
addr
,
vÆ
)

38 
push
 
bp


39 
mov
 
bp
,
•


40 
push
 
ds


42 
mov
 
bx
,[
bp
+4] ! bx = 
lo
 
addr


43 
mov
 
ax
,[
bp
+6] ! 
ds
 = 
hi
 
addr


44 
mov
 
ds
,
ax


45 
mov
 
Æ
,[
bp
+8] !á»
vÆ


46 
mov
 [
bx
],
Æ
 ! 
put
 
byã
 
©
 
ds
:bx

48 
p›
 
ds


49 
p›
 
bp


51 
	}
}

57 
	$RMW_FP
(
FARADDR
 
addr
)

60 
push
 
bp


61 
mov
 
bp
,
•


62 
push
 
ds


64 
mov
 
bx
,[
bp
+4] ! bx = 
lo
 
addr


65 
mov
 
ax
,[
bp
+6] ! 
ds
 = 
hi
 
addr


66 
mov
 
ds
,
ax


67 
‹
 [
bx
],
Æ
 ! 
rmw
 
byã
 
©
 
ds
:bx,á»
vÆue
 
d€¢t
 
m©ãr


69 
p›
 
ds


70 
p›
 
bp


72 
	}
}

78 
	$ORBYTE_FP
(
FARADDR
 
addr
,
vÆ
)

81 
push
 
bp


82 
mov
 
bp
,
•


83 
push
 
ds


85 
mov
 
bx
,[
bp
+4] ! bx = 
lo
 
addr


86 
mov
 
ax
,[
bp
+6] ! 
ds
 = 
hi
 
addr


87 
mov
 
ds
,
ax


88 
mov
 
Æ
,[
bp
+8] !á»
vÆ


89 
‹
 [
bx
],
Æ
 ! o∏
byã
 
©
 
ds
:bx

91 
p›
 
ds


92 
p›
 
bp


94 
	}
}

100 
	$ANDBYTE_FP
(
FARADDR
 
addr
,
vÆ
)

103 
push
 
bp


104 
mov
 
bp
,
•


105 
push
 
ds


107 
mov
 
bx
,[
bp
+4] ! bx = 
lo
 
addr


108 
mov
 
ax
,[
bp
+6] ! 
ds
 = 
hi
 
addr


109 
mov
 
ds
,
ax


110 
mov
 
Æ
,[
bp
+8] !á»
vÆ


111 
™d
 [
bx
],
Æ
 !ánd 
byã
 
©
 
ds
:bx

113 
p›
 
ds


114 
p›
 
bp


116 
	}
}

122 
	$öp‹tb
(
p‹t
)

125 
push
 
bp


126 
mov
 
bp
,
•


128 
mov
 
dx
,[
bp
+4] ! dx = 
p‹t


129 
ö
 
Æ
,
dx
 ! 
öput
 
byã


130 
x‹
 
ah
,ah

132 
p›
 
bp


134 
	}
}

140 
	$ouç‹tb
(
p‹t
,
d©a
)

143 
push
 
bp


144 
mov
 
bp
,
•


146 
mov
 
dx
,[
bp
+4] ! dx = 
p‹t


147 
mov
 
Æ
,[
bp
+6] !á»
d©a


148 
out
 
dx
,
Æ


150 
p›
 
bp


152 
	}
}

158 
	$ouç‹t
(
p‹t
,
d©a
)

161 
push
 
bp


162 
mov
 
bp
,
•


164 
mov
 
dx
,[
bp
+4] ! dx = 
p‹t


165 
mov
 
ax
,[
bp
+6] !áx = 
d©a


166 
out
 
dx
,
ax


168 
p›
 
bp


170 
	}
}

176 
FARADDR


177 
	$öt10
(
ax
,
bx
)

180 
push
 
bp


181 
mov
 
bp
,
•


182 
push
 
es


183 
push
 
ds


184 
push
 
si


185 
push
 
di


187 
mov
 
ax
,[
bp
+4] ! 
gë
 
fú°
 
¨g


188 
mov
 
bx
,[
bp
+6] ! 
gë
 
£c⁄d
 
¨g


189 
$10


190 
mov
 
dx
,
es
 ! És:
bp


191 
mov
 
ax
,
bp


193 
p›
 
di


194 
p›
 
si


195 
p›
 
ds


196 
p›
 
es


197 
p›
 
bp


199 
	}
}

203 
	$kbpﬁl
()

206 
mov
 
ah
,1 ! 
ªad
, 
no
 
ªmove


207 
$16


208 
jz
 
n‹dy
 ! 
no
 
ch¨s
 
ªady


209 
mov
 
ax
,1 ! 
ch¨s
 
ªady


210 
ªt


211 
n‹dy
: 
x‹
 
ax
,ax ! 
no
 
ch¨s
 
ªady


213 
	}
}

217 
	$kbªad
()

220 
x‹
 
ah
,ah ! 
ªad
 
™d
 
ªmove


221 
$16
 !  
ax


223 
	}
}

227 
	$kbÊags
()

230 
mov
 
ah
,2 ! 
gë
 
shi·
 
°©us


231 
$16


232 
mov
 
ah
,0 ! 
low
 
bôs
 
⁄ly
 
now
...

234 
	}
}

	@drivers/fb.c

12 
	~<as£π.h
>

13 
	~<°dio.h
>

14 
	~<°dlib.h
>

15 
	~"devi˚.h
"

16 
	~"gímem.h
"

17 
	~"fb.h
"

21 
PSUBDRIVER


22 
	$£À˘_fb_subdrivî
(
PSD
 
psd
)

24 
PSUBDRIVER
 
drivî
 = 
NULL
;

25 
SUBDRIVER
 
fblöór1
;

26 
SUBDRIVER
 
fblöór2
;

27 
SUBDRIVER
 
fblöór4
;

28 
SUBDRIVER
 
fblöór8
;

29 
SUBDRIVER
 
fblöór16
;

30 
SUBDRIVER
 
fblöór24
;

31 
SUBDRIVER
 
fblöór32
;

32 
SUBDRIVER
 
fblöór32Æpha
;

33 #i‡
FBVGA


34 
SUBDRIVER
 
vg≠œn4
;

35 
SUBDRIVER
 
mem∂™4
;

38 if(
psd
->
∂™es
 =4 &&Ösd->
bµ
 == 4) {

39 if(
psd
->
Êags
 & 
PSF_MEMORY
)

40 
drivî
 = &
mem∂™4
;

41 
drivî
 = &
vg≠œn4
;

47 if(
psd
->
∂™es
 == 1) {

48 
psd
->
bµ
) {

50 
drivî
 = &
fblöór1
;

53 
drivî
 = &
fblöór2
;

56 
drivî
 = &
fblöór4
;

59 
drivî
 = &
fblöór8
;

62 
drivî
 = &
fblöór16
;

65 
drivî
 = &
fblöór24
;

68 i‡(
psd
->
pixty≥
 =
MWPF_TRUECOLOR8888
 ||Ösd->pixty≥ =
MWPF_TRUECOLORABGR
) {

69 
drivî
 = &
fblöór32Æpha
;

71 
drivî
 = &
fblöór32
;

78  
drivî
;

79 
	}
}

86 
MWBOOL


87 
	$fb_m≠memgc
(
PSD
 
mempsd
,
MWCOORD
 
w
,MWCOORD 
h
,
∂™es
,
bµ
,
löñí
,

88 
size
,*
addr
)

90 
PSUBDRIVER
 
subdrivî
;

93 
	`öômemgc
(
mempsd
, 
w
, 
h
, 
∂™es
, 
bµ
, 
löñí
, 
size
, 
addr
);

96 if(
mempsd
->
p‹åaô
 !
MWPORTRAIT_NONE
)  1;

99 
subdrivî
 = 
	`£À˘_fb_subdrivî
(
mempsd
);

100 if(!
subdrivî
)

104 if(!
	`£t_subdrivî
(
mempsd
, 
subdrivî
, 
TRUE
))

108 
	}
}

	@drivers/fb.h

16 #i‡
VTSWITCH


17 vﬁ©ûê
mwdøwög
;

18 
	#DRAWON
 ++
mwdøwög


	)

19 
	#DRAWOFF
 --
mwdøwög


	)

21 
	#DRAWON


	)

22 
	#DRAWOFF


	)

25 * 
	tADDR8
;

26 * 
	tADDR16
;

27 * 
	tADDR32
;

36 
	#CHECK
(
f
,
d
)

	)

39 
	#≠∂yOp
(
›
, 
§c
, 
pd°
, 
ty≥
) \

41 
ty≥
 
d
 = (
pd°
); \

42 
›
) { \

43 
MWMODE_XOR
: \

44 *
d
 ^(
§c
); \

45 
	`CHECK
("XOR", *
d
); \

47 
MWMODE_AND
: \

48 *
d
 &(
§c
); \

49 
	`CHECK
("AND", *
d
); \

51 
MWMODE_OR
: \

52 *
d
 |(
§c
); \

53 
	`CHECK
("OR", *
d
); \

55 
MWMODE_SRC_OUT
: \

56 
MWMODE_DST_OUT
: \

57 
MWMODE_PORTERDUFF_XOR
: \

58 
MWMODE_CLEAR
: \

59 *
d
 = 0; \

60 
	`CHECK
("CLEAR", *
d
); \

62 
MWMODE_SETTO1
: \

63 *
d
 = ~0; \

64 
	`CHECK
("SETTO1", *
d
); \

66 
MWMODE_EQUIV
: \

67 *
d
 = ~(*d ^ (
§c
)); \

68 
	`CHECK
("EQUIV", *
d
); \

70 
MWMODE_NOR
: \

71 *
d
 = ~(*d | (
§c
)); \

72 
	`CHECK
("NOR", *
d
); \

74 
MWMODE_NAND
: \

75 *
d
 = ~(*d & (
§c
)); \

76 
	`CHECK
("NAND", *
d
); \

78 
MWMODE_INVERT
: \

79 *
d
 = ~*d; \

80 
	`CHECK
("INVERT", *
d
); \

82 
MWMODE_COPYINVERTED
: \

83 *
d
 = ~(
§c
); \

84 
	`CHECK
("COPYINVERTED", *
d
); \

86 
MWMODE_ORINVERTED
: \

87 *
d
 |~(
§c
); \

88 
	`CHECK
("ORINVERTED", *
d
); \

90 
MWMODE_ANDINVERTED
: \

91 *
d
 &~(
§c
); \

92 
	`CHECK
("ANDINVERTED", *
d
); \

94 
MWMODE_ORREVERSE
: \

95 *
d
 = ~*d | (
§c
); \

96 
	`CHECK
("ORREVERSE", *
d
); \

98 
MWMODE_ANDREVERSE
: \

99 *
d
 = ~*d & (
§c
); \

100 
	`CHECK
("ANDREVERSE", *
d
); \

102 
MWMODE_SRC_OVER
: \

103 
MWMODE_SRC_IN
: \

104 
MWMODE_SRC_ATOP
: \

105 
MWMODE_COPY
: \

106 *
d
 = (
§c
); \

107 
	`CHECK
("COPY", *
d
); \

109 
MWMODE_DST_OVER
: \

110 
MWMODE_DST_IN
: \

111 
MWMODE_DST_ATOP
: \

112 
MWMODE_NOOP
: \

113 
	`CHECK
("NOOP", *
d
); \

115 
MWMODE_XOR_FGBG
: \

116 *
d
 ^(
§c
Ë^ 
gr_background
; \

117 
	`CHECK
("XOR_FGBG", *
d
); \

120 }

	)

123 
	#DEFINE_≠∂yOpR
 \

124 
ölöe
 
	`≠∂yOpR
(
›
, 
§c
, 
d°
) \

126 
›
) { \

127 
MWMODE_XOR
: \

128  (
§c
Ë^ (
d°
); \

129 
MWMODE_AND
: \

130  (
§c
Ë& (
d°
); \

131 
MWMODE_OR
: \

132  (
§c
Ë| (
d°
); \

133 
MWMODE_SRC_OUT
: \

134 
MWMODE_DST_OUT
: \

135 
MWMODE_PORTERDUFF_XOR
: \

136 
MWMODE_CLEAR
: \

138 
MWMODE_SETTO1
: \

140 
MWMODE_EQUIV
: \

141  ~((
§c
Ë^ (
d°
)); \

142 
MWMODE_NOR
: \

143  ~((
§c
Ë| (
d°
)); \

144 
MWMODE_NAND
: \

145  ~((
§c
Ë& (
d°
)); \

146 
MWMODE_INVERT
: \

147  ~(
d°
); \

148 
MWMODE_COPYINVERTED
: \

149  ~(
§c
); \

150 
MWMODE_ORINVERTED
: \

151  ~(
§c
Ë| (
d°
); \

152 
MWMODE_ANDINVERTED
: \

153  ~(
§c
Ë& (
d°
); \

154 
MWMODE_ORREVERSE
: \

155  (
§c
Ë| ~(
d°
); \

156 
MWMODE_ANDREVERSE
: \

157  (
§c
Ë& ~(
d°
); \

158 
MWMODE_SRC_OVER
: \

159 
MWMODE_SRC_IN
: \

160 
MWMODE_SRC_ATOP
: \

161 
MWMODE_COPY
: \

162  (
§c
); \

163 
MWMODE_XOR_FGBG
: \

164  (
§c
Ë^ (
d°
Ë^ 
gr_background
; \

165 
MWMODE_DST_OVER
: \

166 
MWMODE_DST_IN
: \

167 
MWMODE_DST_ATOP
: \

168 
MWMODE_NOOP
: \

170  (
d°
); \

172 }

	)

175 
gr_mode
;

176 
MWPIXELVAL
 
gr_background
;

180 
io˘l_gë∑Àâe
(
°¨t
, 
Àn
, *
ªd
, *
gªí
,*
blue
);

181 
io˘l_£çÆëã
(
°¨t
, 
Àn
, *
ªd
, *
gªí
,*
blue
);

184 
gí_fûÃe˘
(
PSD
 
psd
,
MWCOORD
 
x1
,MWCOORD 
y1
,MWCOORD 
x2
,MWCOORD 
y2
,

185 
MWPIXELVAL
 
c
);

186 
MWBOOL
 
£t_subdrivî
(
PSD
 
psd
, 
PSUBDRIVER
 
subdrivî
, MWBOOL 
öô
);

187 
gë_subdrivî
(
PSD
 
psd
, 
PSUBDRIVER
 
subdrivî
);

190 
PSUBDRIVER
 
£À˘_fb_subdrivî
(
PSD
 
psd
);

	@drivers/fblin1.c

9 
	~<as£π.h
>

10 
	~<°rög.h
>

11 
	~"devi˚.h
"

12 
	~"fb.h
"

18 
	gnŸmask
[8] = {

23 
	$löór1_öô
(
PSD
 
psd
)

25 i‡(!
psd
->
size
)

26 
psd
->
size
 =Ösd->
yªs
 *Ösd->
löñí
;

29 
	}
}

33 
	$löór1_døwpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

35 
ADDR8
 
addr
 = 
psd
->addr;

37 
	`as£π
 (
addr
 != 0);

38 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

39 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

40 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

42 
DRAWON
;

43 
addr
 +(
x
>>3Ë+ 
y
 * 
psd
->
löñí
;

44 if(
gr_mode
 =
MWMODE_XOR
)

45 *
addr
 ^
c
 << (7-(
x
&7));

47 *
addr
 = (*add∏& 
nŸmask
[
x
&7]Ë| (
c
 << (7-(x&7)));

48 
DRAWOFF
;

49 
	}
}

52 
MWPIXELVAL


53 
	$löór1_ªadpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

55 
ADDR8
 
addr
 = 
psd
->addr;

57 
	`as£π
 (
addr
 != 0);

58 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

59 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

61  (
addr
[(
x
>>3Ë+ 
y
 * 
psd
->
löñí
] >> (7-(x&7)) ) & 0x01;

62 
	}
}

66 
	$löór1_døwh‹zlöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

68 
ADDR8
 
addr
 = 
psd
->addr;

70 
	`as£π
 (
addr
 != 0);

71 
	`as£π
 (
x1
 >0 && x1 < 
psd
->
xªs
);

72 
	`as£π
 (
x2
 >0 && x2 < 
psd
->
xªs
);

73 
	`as£π
 (
x2
 >
x1
);

74 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

75 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

77 
DRAWON
;

78 
addr
 +(
x1
>>3Ë+ 
y
 * 
psd
->
löñí
;

79 if(
gr_mode
 =
MWMODE_XOR
) {

80 
x1
 <
x2
) {

81 *
addr
 ^
c
 << (7-(
x1
&7));

82 if((++
x1
 & 7) == 0)

83 ++
addr
;

86 
x1
 <
x2
) {

87 *
addr
 = (*add∏& 
nŸmask
[
x1
&7]Ë| (
c
 << (7-(x1&7)));

88 if((++
x1
 & 7) == 0)

89 ++
addr
;

92 
DRAWOFF
;

93 
	}
}

97 
	$löór1_døwvîéöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

99 
ADDR8
 
addr
 = 
psd
->addr;

100 
löñí
 = 
psd
->linelen;

102 
	`as£π
 (
addr
 != 0);

103 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

104 
	`as£π
 (
y1
 >0 && y1 < 
psd
->
yªs
);

105 
	`as£π
 (
y2
 >0 && y2 < 
psd
->
yªs
);

106 
	`as£π
 (
y2
 >
y1
);

107 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

109 
DRAWON
;

110 
addr
 +(
x
>>3Ë+ 
y1
 * 
löñí
;

111 if(
gr_mode
 =
MWMODE_XOR
)

112 
y1
++ <
y2
) {

113 *
addr
 ^
c
 << (7-(
x
&7));

114 
addr
 +
löñí
;

117 
y1
++ <
y2
) {

118 *
addr
 = (*add∏& 
nŸmask
[
x
&7]Ë| (
c
 << (7-(x&7)));

119 
addr
 +
löñí
;

121 
DRAWOFF
;

122 
	}
}

126 
	$löór1_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

127 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

129 
ADDR8
 
d°
;

130 
ADDR8
 
§c
;

131 
i
;

132 
dlöñí
 = 
d°psd
->
löñí
;

133 
¶öñí
 = 
§˝sd
->
löñí
;

135 
	`as£π
 (
d°psd
->
addr
 != 0);

136 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

137 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

138 
	`as£π
 (
w
 > 0);

139 
	`as£π
 (
h
 > 0);

140 
	`as£π
 (
§˝sd
->
addr
 != 0);

141 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

142 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

143 
	`as£π
 (
d°x
+
w
 <
d°psd
->
xªs
);

144 
	`as£π
 (
d°y
+
h
 <
d°psd
->
yªs
);

145 
	`as£π
 (
§cx
+
w
 <
§˝sd
->
xªs
);

146 
	`as£π
 (
§cy
+
h
 <
§˝sd
->
yªs
);

148 
DRAWON
;

149 
d°
 = ((
ADDR8
)
d°psd
->
addr
Ë+ (
d°x
>>3Ë+ 
d°y
 * 
dlöñí
;

150 
§c
 = ((
ADDR8
)
§˝sd
->
addr
Ë+ (
§cx
>>3Ë+ 
§cy
 * 
¶öñí
;

151 --
h
 >= 0) {

152 
ADDR8
 
d
 = 
d°
;

153 
ADDR8
 
s
 = 
§c
;

154 
MWCOORD
 
dx
 = 
d°x
;

155 
MWCOORD
 
sx
 = 
§cx
;

156 
i
=0; i<
w
; ++i) {

157 *
d
 = (*d & 
nŸmask
[
dx
&7]) |

158 ((*
s
 >> (7-(
sx
&7)Ë& 0x01Ë<< (7-(
dx
&7)));

159 if((++
dx
 & 7) == 0)

160 ++
d
;

161 if((++
sx
 & 7) == 0)

162 ++
s
;

164 
d°
 +
dlöñí
;

165 
§c
 +
¶öñí
;

167 
DRAWOFF
;

168 
	}
}

170 
SUBDRIVER
 
	gfblöór1
 = {

171 
löór1_öô
,

172 
löór1_døwpixñ
,

173 
löór1_ªadpixñ
,

174 
löór1_døwh‹zlöe
,

175 
löór1_døwvîéöe
,

176 
gí_fûÃe˘
,

177 
löór1_blô


	@drivers/fblin12.c

11 
	~<as£π.h
>

12 
	~<°rög.h
>

13 
	~"devi˚.h
"

14 
	~"fb.h
"

16 
	ggr_mode
=
MWMODE_XOR
;

20 
	$löór12_öô
(
PSD
 
psd
)

22 i‡(!
psd
->
size
) {

23 
psd
->
size
 = 960*240/2;

25 
psd
->
löñí
 *= 2;

26 
psd
->
löñí
 /= 3;

29 
	}
}

31 
ölöe
 
	$£çix
(*
˝å
,
x
, 
y
, 
c
)

33 
adr
;

35 
adr
=(
x
>>1Ë+ (
y
*480);

37 if(
gr_mode
 =
MWMODE_XOR
)

39 if(
x
 & 0x01Ë
˝å
[
adr
]^=((
c
 << 4) & 0xf0);

40 
˝å
[
adr
]^=(
c
 & 0x0f);

44 if(
x
 & 0x01)

46 
˝å
[
adr
]&=0x0f;

47 
˝å
[
adr
]|=((
c
 << 4) & 0xf0);

51 
˝å
[
adr
]&=0xf0;

52 
˝å
[
adr
]|=(
c
 & 0x0f);

55 
	}
}

57 
ölöe
 
	$gëpix
(*
˝å
,
x
, 
y
)

59 
adr
;

60 
adr
=(
x
>>1Ë+ (
y
*480);

62 if(
x
 & 0x01Ë (
˝å
[
adr
] >> 4) & 0x0f;

63  
˝å
[
adr
] & 0x0f;

64 
	}
}

69 
	$löór12_døwpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

71 
ADDR8
 
addr
 = 
psd
->addr;

72 
MWUCHAR
 
r
, 
g
, 
b
;

74 
	`as£π
 (
addr
 != 0);

75 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

76 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

77 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

79 
r
 = 
	`PIXEL444RED
(
c
);

80 
g
 = 
	`PIXEL444GREEN
(
c
);

81 
b
 = 
	`PIXEL444BLUE
(
c
);

82 
x
=x+(x<<1);

83 
DRAWON
;

84 
	`£çix
(
addr
,
x
,
y
,
r
);

85 
	`£çix
(
addr
,
x
+1,
y
,
g
);

86 
	`£çix
(
addr
,
x
+2,
y
,
b
);

87 
DRAWOFF
;

88 
	}
}

91 
MWPIXELVAL


92 
	$löór12_ªadpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

94 
ADDR8
 
addr
 = 
psd
->addr;

96 
	`as£π
 (
addr
 != 0);

97 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

98 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

99 
x
=x+(x<<1);

100  
	`RGB2PIXEL444
(
	`gëpix
(
addr
,
x
,
y
),getpix(addr,x+1,y),getpix(addr,x+2,y));

101 
	}
}

105 
	$löór12_døwh‹zlöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

107 
ADDR8
 
addr
 = 
psd
->addr;

108 
MWUCHAR
 
r
, 
g
, 
b
;

110 
	`as£π
 (
addr
 != 0);

111 
	`as£π
 (
x1
 >0 && x1 < 
psd
->
xªs
);

112 
	`as£π
 (
x2
 >0 && x2 < 
psd
->
xªs
);

113 
	`as£π
 (
x2
 >
x1
);

114 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

115 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

117 
r
 = 
	`PIXEL444RED
(
c
);

118 
g
 = 
	`PIXEL444GREEN
(
c
);

119 
b
 = 
	`PIXEL444BLUE
(
c
);

120 
DRAWON
;

121 
x1
*=3;

122 
x2
*=3;

123 (
x1
+=3Ë<
x2
) {

124 
	`£çix
(
addr
,
x1
,
y
,
r
);

125 
	`£çix
(
addr
,
x1
+1,
y
,
g
);

126 
	`£çix
(
addr
,
x1
+2,
y
,
b
);

128 
DRAWOFF
;

129 
	}
}

133 
	$löór12_døwvîéöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

135 
ADDR8
 
addr
 = 
psd
->addr;

136 
löñí
 = 
psd
->linelen * 3;

137 
MWUCHAR
 
r
, 
g
, 
b
;

138 
löñí
/=2;

139 
	`as£π
 (
addr
 != 0);

140 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

141 
	`as£π
 (
y1
 >0 && y1 < 
psd
->
yªs
);

142 
	`as£π
 (
y2
 >0 && y2 < 
psd
->
yªs
);

143 
	`as£π
 (
y2
 >
y1
);

144 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

145 
x
=x+(x<<1);

146 
r
 = 
	`PIXEL444RED
(
c
);

147 
g
 = 
	`PIXEL444GREEN
(
c
);

148 
b
 = 
	`PIXEL444BLUE
(
c
);

150 
DRAWON
;

151 
y1
++ <
y2
)

153 
	`£çix
(
addr
,
x
,
y1
,
r
);

154 
	`£çix
(
addr
,
x
+1,
y1
,
g
);

155 
	`£çix
(
addr
,
x
+2,
y1
,
b
);

157 
DRAWOFF
;

158 
	}
}

163 
	$xlöór12_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

164 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

166 
ADDR8
 
d°
 = 
d°psd
->
addr
;

167 
ADDR8
 
§c
 = 
§˝sd
->
addr
;

168 
i
;

169 
dlöñí
 = 
d°psd
->
löñí
 * 3;

170 
¶öñí
 = 
§˝sd
->
löñí
 * 3;

171 
dlöñí_möus_w
 = (
d°psd
->
löñí
 - 
w
) * 3;

172 
¶öñí_möus_w
 = (
§˝sd
->
löñí
 - 
w
) * 3;

173 #i‡
ALPHABLEND


174 
Æpha
;

177 
	`as£π
 (
d°
 != 0);

178 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

179 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

180 
	`as£π
 (
w
 > 0);

181 
	`as£π
 (
h
 > 0);

182 
	`as£π
 (
§c
 != 0);

183 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

184 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

185 
	`as£π
 (
d°x
+
w
 <
d°psd
->
xªs
);

186 
	`as£π
 (
d°y
+
h
 <
d°psd
->
yªs
);

187 
	`as£π
 (
§cx
+
w
 <
§˝sd
->
xªs
);

188 
	`as£π
 (
§cy
+
h
 <
§˝sd
->
yªs
);

190 
DRAWON
;

191 
d°
 +(
d°x
 + 
d°y
 * 
d°psd
->
löñí
) * 3;

192 
§c
 +(
§cx
 + 
§cy
 * 
§˝sd
->
löñí
) * 3;

194 #i‡
ALPHABLEND


195 if((
›
 & 
MWROP_EXTENSION
Ë!
MWROP_BLENDCONSTANT
)

196 
°dblô
;

197 
Æpha
 = 
›
 & 0xff;

199 --
h
 >= 0) {

200 
i
=0; i<
w
; ++i) {

201 
s
 = *
§c
++;

202 
d
 = *
d°
;

203 *
d°
++ = ()(((
s
 - 
d
)*
Æpha
)>>8) + d;

204 
s
 = *
§c
++;

205 
d
 = *
d°
;

206 *
d°
++ = ()(((
s
 - 
d
)*
Æpha
)>>8) + d;

207 
s
 = *
§c
++;

208 
d
 = *
d°
;

209 *
d°
++ = ()(((
s
 - 
d
)*
Æpha
)>>8) + d;

211 
d°
 +
dlöñí_möus_w
;

212 
§c
 +
¶öñí_möus_w
;

214 
DRAWOFF
;

216 
°dblô
:

218 --
h
 >= 0) {

221 
	`mem˝y
(
d°
, 
§c
, 
w
*3);

222 
d°
 +
dlöñí
;

223 
§c
 +
¶öñí
;

225 
i
=0; i<
w
; ++i) {

226 *
d°
++ = *
§c
++;

227 *
d°
++ = *
§c
++;

228 *
d°
++ = *
§c
++;

230 
d°
 +
dlöñí_möus_w
;

231 
§c
 +
¶öñí_möus_w
;

234 
DRAWOFF
;

235 
	}
}

240 
	$löór12_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

241 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

243 
ADDR8
 
d°
 = 
d°psd
->
addr
;

244 
ADDR8
 
§c
 = 
§˝sd
->
addr
;

249 
DRAWON
;

250 
d°
+=((
d°x
*3+1)/2)+480*
d°y
;

251 
§c
+=((
§cx
*3+1)/2)+480*srcx;

253 
	`as£π
 (
d°
 != 0);

254 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

255 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

256 
	`as£π
 (
w
 > 0);

257 
	`as£π
 (
h
 > 0);

258 
	`as£π
 (
§c
 != 0);

259 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

260 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

261 
	`as£π
 (
d°x
+
w
 <
d°psd
->
xªs
);

262 
	`as£π
 (
d°y
+
h
 <
d°psd
->
yªs
);

263 
	`as£π
 (
§cx
+
w
 <
§˝sd
->
xªs
);

264 
	`as£π
 (
§cy
+
h
 <
§˝sd
->
yªs
);

267 if((
§cx
 & 0x01Ë&& !(
d°x
 & 0x01))

269 
§c
+=1;

273 if(!(
§cx
 & 0x01Ë&& (
d°x
 & 0x01))

275 
d°
+=1;

279 if((
§cx
 & 0x01Ë&& (
d°x
 & 0x01))

285 --
h
 >= 0) {

287 
	`mem˝y
(
d°
, 
§c
, (
w
*3+1)/2);

288 
d°
 += 480;

289 
§c
 += 480;

291 
DRAWOFF
;

292 
	}
}

295 
SUBDRIVER
 
	gfblöór12
 = {

296 
löór12_öô
,

297 
löór12_døwpixñ
,

298 
löór12_ªadpixñ
,

299 
löór12_døwh‹zlöe
,

300 
löór12_døwvîéöe
,

301 
gí_fûÃe˘
,

302 
löór12_blô


	@drivers/fblin16.c

10 
	~<as£π.h
>

11 
	~<°dlib.h
>

14 #i‚de‡
__OPTIMIZE__


15 
	#__OPTIMIZE__


	)

17 
	~<°rög.h
>

19 
	~"devi˚.h
"

20 
	~"fb.h
"

22 
	#USE_16BIT_ACCESS
 0

	)

24 #i‡
USE_16BIT_ACCESS


25 
	#mem˝y
(
d
,
s
,
nbyãs
Ë
	`mem˝y16
(d,s,“byãs)>>1)

	)

26 
	#memmove
(
d
,
s
,
nbyãs
Ë
	`mem˝y16
(d,s,“byãs)>>1)

	)

28 
	$mem˝y16
(*
d°
, *
§c
, 
nw‹ds
)

30 --
nw‹ds
 >= 0)

31 *
d°
++ = *
§c
++;

32 
	}
}

37 
	$löór16_öô
(
PSD
 
psd
)

39 i‡(!
psd
->
size
) {

40 
psd
->
size
 =Ösd->
yªs
 *Ösd->
löñí
;

42 
psd
->
löñí
 /= 2;

45 
	}
}

49 
	$löór16_døwpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

51 
ADDR16
 
addr
 = 
psd
->addr;

53 
	`as£π
 (
addr
 != 0);

54 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

55 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

56 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

58 
DRAWON
;

59 if(
gr_mode
 =
MWMODE_COPY
)

60 
addr
[
x
 + 
y
 * 
psd
->
löñí
] = 
c
;

62 
	`≠∂yOp
(
gr_mode
, 
c
, &
addr
[
x
 + 
y
 * 
psd
->
löñí
], 
ADDR16
);

63 
DRAWOFF
;

64 
	}
}

67 
MWPIXELVAL


68 
	$löór16_ªadpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

70 
ADDR16
 
addr
 = 
psd
->addr;

72 
	`as£π
 (
addr
 != 0);

73 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

74 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

76  
addr
[
x
 + 
y
 * 
psd
->
löñí
];

77 
	}
}

81 
	$löór16_døwh‹zlöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

83 
ADDR16
 
addr
 = 
psd
->addr;

85 
	`as£π
 (
addr
 != 0);

86 
	`as£π
 (
x1
 >0 && x1 < 
psd
->
xªs
);

87 
	`as£π
 (
x2
 >0 && x2 < 
psd
->
xªs
);

88 
	`as£π
 (
x2
 >
x1
);

89 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

90 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

92 
DRAWON
;

93 
addr
 +
x1
 + 
y
 * 
psd
->
löñí
;

94 if(
gr_mode
 =
MWMODE_COPY
) {

96 
x1
++ <
x2
)

97 *
addr
++ = 
c
;

99 
x1
++ <
x2
) {

100 
	`≠∂yOp
(
gr_mode
, 
c
, 
addr
, 
ADDR16
);

101 ++
addr
;

104 
DRAWOFF
;

105 
	}
}

109 
	$löór16_døwvîéöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

111 
ADDR16
 
addr
 = 
psd
->addr;

112 
löñí
 = 
psd
->linelen;

114 
	`as£π
 (
addr
 != 0);

115 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

116 
	`as£π
 (
y1
 >0 && y1 < 
psd
->
yªs
);

117 
	`as£π
 (
y2
 >0 && y2 < 
psd
->
yªs
);

118 
	`as£π
 (
y2
 >
y1
);

119 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

121 
DRAWON
;

122 
addr
 +
x
 + 
y1
 * 
löñí
;

123 if(
gr_mode
 =
MWMODE_COPY
) {

124 
y1
++ <
y2
) {

125 *
addr
 = 
c
;

126 
addr
 +
löñí
;

129 
y1
++ <
y2
) {

130 
	`≠∂yOp
(
gr_mode
, 
c
, 
addr
, 
ADDR16
);

131 
addr
 +
löñí
;

134 
DRAWOFF
;

135 
	}
}

139 
	$löór16_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

140 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

142 
ADDR16
 
d°
 = 
d°psd
->
addr
;

143 
ADDR16
 
§c
 = 
§˝sd
->
addr
;

144 
i
;

145 
dlöñí
 = 
d°psd
->
löñí
;

146 
¶öñí
 = 
§˝sd
->
löñí
;

147 #i‡
ALPHABLEND


148 
Æpha
;

151 
	`as£π
 (
d°
 != 0);

152 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

153 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

154 
	`as£π
 (
w
 > 0);

155 
	`as£π
 (
h
 > 0);

156 
	`as£π
 (
§c
 != 0);

157 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

158 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

159 
	`as£π
 (
d°x
+
w
 <
d°psd
->
xªs
);

160 
	`as£π
 (
d°y
+
h
 <
d°psd
->
yªs
);

161 
	`as£π
 (
§cx
+
w
 <
§˝sd
->
xªs
);

162 
	`as£π
 (
§cy
+
h
 <
§˝sd
->
yªs
);

164 
DRAWON
;

165 
d°
 +
d°x
 + 
d°y
 * 
dlöñí
;

166 
§c
 +
§cx
 + 
§cy
 * 
¶öñí
;

168 #i‡
ALPHABLEND


169 if((
›
 & 
MWROP_EXTENSION
Ë!
MWROP_BLENDCONSTANT
)

170 
°dblô
;

171 
Æpha
 = 
›
 & 0xff;

173 i‡(
d°psd
->
pixty≥
 =
MWPF_TRUECOLOR565
) {

174 --
h
 >= 0) {

175 
i
=0; i<
w
; ++i) {

176 
s
 = *
§c
++;

177 
d
 = *
d°
;

178 
t
 = 
d
 & 0xf800;

179 
m1
, 
m2
, 
m3
;

180 
m1
 = (((((
s
 & 0xf800Ë- 
t
)*
Æpha
)>>8) & 0xf800) +Å;

181 
t
 = 
d
 & 0x07e0;

182 
m2
 = (((((
s
 & 0x07e0Ë- 
t
)*
Æpha
)>>8) & 0x07e0) +Å;

183 
t
 = 
d
 & 0x001f;

184 
m3
 = (((((
s
 & 0x001fË- 
t
)*
Æpha
)>>8) & 0x001f) +Å;

185 *
d°
++ = 
m1
 | 
m2
 | 
m3
;

187 
d°
 +
dlöñí
 - 
w
;

188 
§c
 +
¶öñí
 - 
w
;

192 --
h
 >= 0) {

193 
i
=0; i<
w
; ++i) {

194 
s
 = *
§c
++;

195 
d
 = *
d°
;

196 
t
 = 
d
 & 0x7c00;

197 
m1
, 
m2
, 
m3
;

198 
m1
 = (((((
s
 & 0x7c00Ë- 
t
)*
Æpha
)>>8) & 0x7c00) +Å;

199 
t
 = 
d
 & 0x03e0;

200 
m2
 = (((((
s
 & 0x03e0Ë- 
t
)*
Æpha
)>>8) & 0x03e0) +Å;

201 
t
 = 
d
 & 0x001f;

202 
m3
 = (((((
s
 & 0x001fË- 
t
)*
Æpha
)>>8) & 0x001f) +Å;

203 *
d°
++ = 
m1
 | 
m2
 | 
m3
;

205 
d°
 +
dlöñí
 - 
w
;

206 
§c
 +
¶öñí
 - 
w
;

209 
DRAWOFF
;

211 
°dblô
:

214 i‡(
›
 =
MWROP_COPY
) {

217 i‡(
§cy
 < 
d°y
) {

218 
§c
 +(
h
-1Ë* 
¶öñí
;

219 
d°
 +(
h
-1Ë* 
dlöñí
;

220 
¶öñí
 *= -1;

221 
dlöñí
 *= -1;

223 --
h
 >= 0) {

225 
	`memmove
(
d°
, 
§c
, 
w
<<1);

226 
d°
 +
dlöñí
;

227 
§c
 +
¶öñí
;

230 --
h
 >= 0) {

231 
i
=0; i<
w
; i++) {

232 
	`≠∂yOp
(
	`MWROP_TO_MODE
(
›
), *
§c
, 
d°
, 
ADDR16
);

233 ++
§c
;

234 ++
d°
;

236 
d°
 +
dlöñí
 - 
w
;

237 
§c
 +
¶öñí
 - 
w
;

240 
DRAWOFF
;

241 
	}
}

244 
g_row_öc
, 
g_cﬁ_öc
;

248 
	$löór16_°ªtchblô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
d°w
,

249 
MWCOORD
 
d°h
, 
PSD
 
§˝sd
, MWCOORD 
§cx
, MWCOORD 
§cy
, MWCOORD 
§cw
,

250 
MWCOORD
 
§ch
, 
›
)

252 
ADDR16
 
d°
;

253 
ADDR16
 
§c
;

254 
dlöñí
 = 
d°psd
->
löñí
;

255 
¶öñí
 = 
§˝sd
->
löñí
;

256 
i
, 
ymax
;

257 
row_pos
, 
row_öc
;

258 
cﬁ_pos
, 
cﬁ_öc
;

259 
pixñ
 = 0;

261 
	`as£π
 (
d°psd
->
addr
 != 0);

262 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

263 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

264 
	`as£π
 (
d°w
 > 0);

265 
	`as£π
 (
d°h
 > 0);

266 
	`as£π
 (
§˝sd
->
addr
 != 0);

267 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

268 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

269 
	`as£π
 (
§cw
 > 0);

270 
	`as£π
 (
§ch
 > 0);

271 
	`as£π
 (
d°x
+
d°w
 <
d°psd
->
xªs
);

272 
	`as£π
 (
d°y
+
d°h
 <
d°psd
->
yªs
);

273 
	`as£π
 (
§cx
+
§cw
 <
§˝sd
->
xªs
);

274 
	`as£π
 (
§cy
+
§ch
 <
§˝sd
->
yªs
);

276 
DRAWON
;

277 
row_pos
 = 0x10000;

278 i‡(
g_row_öc
Ë
row_öc
 = g_row_inc; 

279 
row_öc
 = (
§ch
 << 16Ë/ 
d°h
;

282 
ymax
 = 
d°y
+
d°h
; dsty<ymax; ++dsty) {

285 
row_pos
 >= 0x10000L) {

286 ++
§cy
;

287 
row_pos
 -= 0x10000L;

290 
d°
 = (
ADDR16
)
d°psd
->
addr
 + 
d°x
 + 
d°y
*
dlöñí
;

291 
§c
 = (
ADDR16
)
§˝sd
->
addr
 + 
§cx
 + (
§cy
-1)*
¶öñí
;

294 
cﬁ_pos
 = 0x10000;

295 i‡(
g_cﬁ_öc
Ë
cﬁ_öc
 = g_col_inc; 

296 
cﬁ_öc
 = (
§cw
 << 16Ë/ 
d°w
;

297 
i
=0; i<
d°w
; ++i) {

299 
cﬁ_pos
 >= 0x10000L) {

300 
pixñ
 = *
§c
++;

301 
cﬁ_pos
 -= 0x10000L;

303 *
d°
++ = 
pixñ
;

304 
cﬁ_pos
 +
cﬁ_öc
;

307 
row_pos
 +
row_öc
;

309 
DRAWOFF
;

310 
	}
}

323 #i‚de‡
RESTRICT


324 
	#RESTRICT


	)

326 #i‚de‡
SIGN


327 
	#SIGN
(
x
Ë(((xË> 0Ë? 1 : (((xË=0Ë? 0 : -1))

	)

329 #i‚de‡
ABS


330 
	#ABS
(
x
Ë(((xË>0Ë? (xË: -(x))

	)

366 
	$löór16_°ªtchblôex
(
PSD
 
d°psd
,

367 
PSD
 
§˝sd
,

368 
MWCOORD
 
de°_x_°¨t
,

369 
MWCOORD
 
de°_y_°¨t
,

370 
MWCOORD
 
width
,

371 
MWCOORD
 
height
,

372 
x_díomö©‹
,

373 
y_díomö©‹
,

374 
§c_x_‰a˘i⁄
,

375 
§c_y_‰a˘i⁄
,

376 
x_°ï_‰a˘i⁄
,

377 
y_°ï_‰a˘i⁄
,

378 
›
)

381 *
RESTRICT
 
§c_±r
;

384 *
RESTRICT
 
√xt_§c_±r
;

387 *
RESTRICT
 
de°_±r
;

390 *
√xt_de°_±r
;

393 
x_îr‹
;

394 
y_îr‹
;

399 
§c_x_°ï_⁄e
;

400 
§c_y_°ï_⁄e
;

405 
§c_x_°ï_n‹mÆ
;

406 
§c_y_°ï_n‹mÆ
;

411 
x_îr‹_°ï_n‹mÆ
;

412 
y_îr‹_°ï_n‹mÆ
;

415 
x_cou¡
;

416 
y_cou¡
;

419 
§c_x_°¨t
;

420 
§c_y_°¨t
;

423 
x_îr‹_°¨t
;

426 
de°_y_°ï
;

434 
§c_x_‰a˘i⁄
 +(
x_°ï_‰a˘i⁄
 >> 1);

435 
§c_y_‰a˘i⁄
 +(
y_°ï_‰a˘i⁄
 >> 1);

443 
§c_x_°¨t
 = 
§c_x_‰a˘i⁄
 / 
x_díomö©‹
;

444 
§c_y_°¨t
 = 
§c_y_‰a˘i⁄
 / 
y_díomö©‹
;

445 
x_îr‹_°¨t
 = 
§c_x_‰a˘i⁄
 - (
§c_x_°¨t
 + 1Ë* 
x_díomö©‹
;

446 
y_îr‹
 = 
§c_y_‰a˘i⁄
 - (
§c_y_°¨t
 + 1Ë* 
y_díomö©‹
;

450 
§c_x_°ï_n‹mÆ
 = 
x_°ï_‰a˘i⁄
 / 
x_díomö©‹
;

451 
§c_x_°ï_⁄e
 = 
	`SIGN
(
x_°ï_‰a˘i⁄
);

452 
x_îr‹_°ï_n‹mÆ
 =

453 
	`ABS
(
x_°ï_‰a˘i⁄
Ë- ABS(
§c_x_°ï_n‹mÆ
Ë* 
x_díomö©‹
;

455 
§c_y_°ï_n‹mÆ
 = 
y_°ï_‰a˘i⁄
 / 
y_díomö©‹
;

456 
§c_y_°ï_⁄e
 = 
	`SIGN
(
y_°ï_‰a˘i⁄
Ë* 
§˝sd
->
löñí
;

457 
y_îr‹_°ï_n‹mÆ
 =

458 
	`ABS
(
y_°ï_‰a˘i⁄
Ë- ABS(
§c_y_°ï_n‹mÆ
Ë* 
y_díomö©‹
;

459 
§c_y_°ï_n‹mÆ
 *
§˝sd
->
löñí
;

467 
√xt_§c_±r
 =

468 ((*Ë
§˝sd
->
addr
) +

469 
§c_y_°¨t
 * 
§˝sd
->
löñí
 + 
§c_x_°¨t
;

472 
de°_y_°ï
 = 
d°psd
->
löñí
;

475 
√xt_de°_±r
 =

476 ((*Ë
d°psd
->
addr
) +

477 (
de°_y_°¨t
 * 
de°_y_°ï
Ë+ 
de°_x_°¨t
;

487 
›
 & 
MWROP_EXTENSION
) {

488 
MWROP_SRC
:

492 
y_cou¡
 = 
height
;

493 
y_cou¡
-- > 0) {

494 
§c_±r
 = 
√xt_§c_±r
;

495 
de°_±r
 = 
√xt_de°_±r
;

497 
x_îr‹
 = 
x_îr‹_°¨t
;

499 
x_cou¡
 = 
width
;

500 
x_cou¡
-- > 0) {

501 *
de°_±r
++ = *
§c_±r
;

503 
§c_±r
 +
§c_x_°ï_n‹mÆ
;

504 
x_îr‹
 +
x_îr‹_°ï_n‹mÆ
;

506 i‡(
x_îr‹
 >= 0) {

507 
§c_±r
 +
§c_x_°ï_⁄e
;

508 
x_îr‹
 -
x_díomö©‹
;

512 
√xt_de°_±r
 +
de°_y_°ï
;

514 
√xt_§c_±r
 +
§c_y_°ï_n‹mÆ
;

515 
y_îr‹
 +
y_îr‹_°ï_n‹mÆ
;

517 i‡(
y_îr‹
 >= 0) {

518 
√xt_§c_±r
 +
§c_y_°ï_⁄e
;

519 
y_îr‹
 -
y_díomö©‹
;

524 
MWROP_CLEAR
:

525 
y_cou¡
 = 
height
;

526 
y_cou¡
-- > 0) {

527 
de°_±r
 = 
√xt_de°_±r
;

528 
x_cou¡
 = 
width
;

529 
x_cou¡
-- > 0) {

530 *
de°_±r
++ = 0;

532 
√xt_de°_±r
 +
de°_y_°ï
;

537 
y_cou¡
 = 
height
;

538 
y_cou¡
-- > 0) {

539 
§c_±r
 = 
√xt_§c_±r
;

540 
de°_±r
 = 
√xt_de°_±r
;

542 
x_îr‹
 = 
x_îr‹_°¨t
;

544 
x_cou¡
 = 
width
;

545 
x_cou¡
-- > 0) {

546 
	`≠∂yOp
(
	`MWROP_TO_MODE
(
›
), *
§c_±r
, 
de°_±r
, 
ADDR16
);

547 
de°_±r
++;

549 
§c_±r
 +
§c_x_°ï_n‹mÆ
;

550 
x_îr‹
 +
x_îr‹_°ï_n‹mÆ
;

552 i‡(
x_îr‹
 >= 0) {

553 
§c_±r
 +
§c_x_°ï_⁄e
;

554 
x_îr‹
 -
x_díomö©‹
;

558 
√xt_de°_±r
 +
de°_y_°ï
;

560 
√xt_§c_±r
 +
§c_y_°ï_n‹mÆ
;

561 
y_îr‹
 +
y_îr‹_°ï_n‹mÆ
;

563 i‡(
y_îr‹
 >= 0) {

564 
√xt_§c_±r
 +
§c_y_°ï_⁄e
;

565 
y_îr‹
 -
y_díomö©‹
;

571 
	}
}

573 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_LSB_FIRST


577 
	$öô_w‹dmask_lookup
(**
byã2w‹dmask
)

579 *
maskp
, *
b2wm
;

580 
t
, 
x
, 
u
;

582 
b2wm
 = *
byã2w‹dmask
 = 
	`mÆloc
(256*8*2);

583 i‡–
b2wm
 == 0 )

584 
	`exô
(17);

585  
t
=0;Å < 256;Å++ ) {

586 
maskp
 = 
b2wm
 + 8 * 
t
;

587 
x
 = 
t
;

588  
u
=1; u < 256; u <<= 1 )

589 i‡–
x
 & 
u
 )

590 *
maskp
++ = 0xffff;

592 *
maskp
++ = 0x0000;

594 
	}
}

618 
	$löór16_døw¨ó_bôm≠_byãs_lsb_fú°
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
)

620 
fú°_byã
, 
œ°_byã
;

621 
h¨d_¥efix
, 
h¨d_po°fix
;

622 
¥efixbôs
, 
po°fixbôs
, *
maskp
;

623 
x‹_cﬁ‹
, 
m
;

624 
¥efix_mask
 = 0, 
¥efix_œ°
 = 0;

625 
po°fix_mask
 = 0, 
po°fix_œ°
 = 0;

626 
fg_cﬁ‹
 = 
gc
->fg_color;

627 
bg_cﬁ‹
 = 
gc
->bg_color;

628 
size_maö
, 
t
, 
y
;

629 
adv™˚_§c
, 
adv™˚_d°
;

630 
bôm≠_byã
;

631 
ADDR8
 
§c
;

632 
ADDR16
 
d°
;

634 *
byã2w‹dmask
 = 0;

636 
¥efixbôs
 = 
gc
->
§cx
 & 7;

637 
po°fixbôs
 = (
gc
->
§cx
 + gc->
d°w
 - 1) & 7;

638 
fú°_byã
 = 
gc
->
§cx
 >> 3;

639 
œ°_byã
 = (
gc
->
§cx
 + gc->
d°w
 - 1) >> 3;

641 
§c
 = ((
ADDR8
Ë
gc
->
pixñs
Ë+ gc->
§c_löñí
 * gc->
§cy
 + 
fú°_byã
;

642 
d°
 = ((
ADDR16
Ë
psd
->
addr
Ë+Ösd->
löñí
 * 
gc
->
d°y
 + gc->
d°x
;

643 
x‹_cﬁ‹
 = 
fg_cﬁ‹
 ^ 
bg_cﬁ‹
;

645 
size_maö
 = 
œ°_byã
 - 
fú°_byã
 + 1;

646 
h¨d_¥efix
 = 0;

647 
h¨d_po°fix
 = 0;

649 i‡(
fú°_byã
 !
œ°_byã
) {

650 i‡(
¥efixbôs
 != 0) {

652 
h¨d_¥efix
 = 1;

653 
size_maö
--;

654 
¥efix_mask
 = 1 << 
¥efixbôs
;

655 
¥efix_œ°
 = 0x100;

657 i‡–
po°fixbôs
 != 7 ) {

659 
h¨d_po°fix
 = 1;

660 
po°fix_mask
 = 1;

661 
po°fix_œ°
 = 2 << 
po°fixbôs
;

662 
size_maö
--;

666 
h¨d_¥efix
 = 1;

667 
h¨d_po°fix
 = 0;

668 
size_maö
 = 0;

669 
¥efix_mask
 = 1 << 
¥efixbôs
;

670 
¥efix_œ°
 = 1 << (
¥efixbôs
 + 
gc
->
d°w
);

673 
adv™˚_§c
 = 
gc
->
§c_löñí
 - 
œ°_byã
 + 
fú°_byã
 - 1;

674 
adv™˚_d°
 = 
psd
->
löñí
 - 
gc
->
d°w
;

676 i‡–
byã2w‹dmask
 == 0 )

677 
	`öô_w‹dmask_lookup
(&
byã2w‹dmask
);

679 
DRAWON
;

680 i‡(
gc
->
gr_u£bg
) {

681 
y
 = 0; y < 
gc
->
d°h
; y++) {

684 i‡(
h¨d_¥efix
) {

685 
m
 = 
¥efix_mask
; m < 
¥efix_œ°
;

686 
m
 <<= 1) {

687 *
d°
++ = (
m
 & *
§c
Ë? 
fg_cﬁ‹
 :

688 
bg_cﬁ‹
;

690 
§c
++;

694 
t
 = 0;Å < 
size_maö
;Å++) {

695 
maskp
 = 
byã2w‹dmask
 + 8 * (*
§c
++);

697 *
d°
++ = 
gc
->

698 
bg_cﬁ‹
 ^ (*
maskp
++ & 
x‹_cﬁ‹
);

699 *
d°
++ = 
gc
->

700 
bg_cﬁ‹
 ^ (*
maskp
++ & 
x‹_cﬁ‹
);

701 *
d°
++ = 
gc
->

702 
bg_cﬁ‹
 ^ (*
maskp
++ & 
x‹_cﬁ‹
);

703 *
d°
++ = 
gc
->

704 
bg_cﬁ‹
 ^ (*
maskp
++ & 
x‹_cﬁ‹
);

705 *
d°
++ = 
gc
->

706 
bg_cﬁ‹
 ^ (*
maskp
++ & 
x‹_cﬁ‹
);

707 *
d°
++ = 
gc
->

708 
bg_cﬁ‹
 ^ (*
maskp
++ & 
x‹_cﬁ‹
);

709 *
d°
++ = 
gc
->

710 
bg_cﬁ‹
 ^ (*
maskp
++ & 
x‹_cﬁ‹
);

711 *
d°
++ = 
gc
->

712 
bg_cﬁ‹
 ^ (*
maskp
++ & 
x‹_cﬁ‹
);

716 i‡(
h¨d_po°fix
) {

717 
m
 = 
po°fix_mask
; m < 
po°fix_œ°
;

718 
m
 <<= 1) {

719 *
d°
++ = (
m
 & *
§c
Ë? 
fg_cﬁ‹
 :

720 
bg_cﬁ‹
;

722 
§c
++;

725 
§c
 +
adv™˚_§c
;

726 
d°
 +
adv™˚_d°
;

729 
y
 = 0; y < 
gc
->
d°h
; y++) {

732 i‡(
h¨d_¥efix
) {

733 
bôm≠_byã
 = *
§c
++;

734 
m
 = 
¥efix_mask
; m < 
¥efix_œ°
;

735 
m
 <<= 1) {

736 i‡(
m
 & 
bôm≠_byã
)

737 *
d°
 = 
fg_cﬁ‹
;

738 
d°
++;

743 
t
 = 0;Å < 
size_maö
;Å++) {

744 
bôm≠_byã
 = *
§c
++;

746 i‡(0x01 & 
bôm≠_byã
)

747 
d°
[0] = 
fg_cﬁ‹
;

748 i‡(0x02 & 
bôm≠_byã
)

749 
d°
[1] = 
fg_cﬁ‹
;

750 i‡(0x04 & 
bôm≠_byã
)

751 
d°
[2] = 
fg_cﬁ‹
;

752 i‡(0x08 & 
bôm≠_byã
)

753 
d°
[3] = 
fg_cﬁ‹
;

754 i‡(0x10 & 
bôm≠_byã
)

755 
d°
[4] = 
fg_cﬁ‹
;

756 i‡(0x20 & 
bôm≠_byã
)

757 
d°
[5] = 
fg_cﬁ‹
;

758 i‡(0x40 & 
bôm≠_byã
)

759 
d°
[6] = 
fg_cﬁ‹
;

760 i‡(0x80 & 
bôm≠_byã
)

761 
d°
[7] = 
fg_cﬁ‹
;

763 
d°
 += 8;

767 i‡(
h¨d_po°fix
) {

768 
bôm≠_byã
 = *
§c
++;

769 
m
 = 
po°fix_mask
; m < 
po°fix_œ°
;

770 
m
 <<= 1) {

771 i‡(
m
 & 
bôm≠_byã
)

772 *
d°
 = 
fg_cﬁ‹
;

773 
d°
++;

777 
§c
 +
adv™˚_§c
;

778 
d°
 +
adv™˚_d°
;

781 
DRAWOFF
;

782 
	}
}

786 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_MSB_FIRST


806 
	$löór16_døw¨ó_bôm≠_byãs_msb_fú°
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
)

820 
	#MWI_IS_BIT_BEFORE_OR_EQUAL
(
a
,
b
Ë(◊Ë>(b))

	)

821 
	#MWI_ADVANCE_BIT
(
èrgë
Ë(—¨gëË>>1)

	)

822 
	#MWI_BIT_NO
(
n
Ë(0x80 >> (n))

	)

828 
	#MWI_FIRST_BIT
 
	`MWI_BIT_NO
(0)

	)

829 
	#MWI_LAST_BIT
 
	`MWI_BIT_NO
(7)

	)

831 
¥efix_fú°_bô
;

832 
po°fix_fú°_bô
 = 
MWI_FIRST_BIT
;

833 
po°fix_œ°_bô
;

834 
bôm≠_byã
;

835 
mask
;

836 
fg
, 
bg
;

837 
fú°_byã
, 
œ°_byã
;

838 
size_maö
;

839 
t
, 
y
;

840 
adv™˚_§c
, 
adv™˚_d°
;

841 
ADDR8
 
§c
;

842 
ADDR16
 
d°
;

845 
¥efix_fú°_bô
 = 
	`MWI_BIT_NO
(
gc
->
§cx
 & 7);

848 
po°fix_œ°_bô
 = 
	`MWI_BIT_NO
((
gc
->
§cx
 + gc->
d°w
 - 1) & 7);

851 
fú°_byã
 = 
gc
->
§cx
 >> 3;

854 
œ°_byã
 = (
gc
->
§cx
 + gc->
d°w
 - 1) >> 3;

856 
§c
 = ((
ADDR8
Ë
gc
->
pixñs
Ë+ gc->
§c_löñí
 * gc->
§cy
 + 
fú°_byã
;

857 
d°
 = ((
ADDR16
Ë
psd
->
addr
Ë+Ösd->
löñí
 * 
gc
->
d°y
 + gc->
d°x
;

858 
fg
 = 
gc
->
fg_cﬁ‹
;

859 
bg
 = 
gc
->
bg_cﬁ‹
;

861 
adv™˚_§c
 = 
gc
->
§c_löñí
 - 
œ°_byã
 + 
fú°_byã
 - 1;

862 
adv™˚_d°
 = 
psd
->
löñí
 - 
gc
->
d°w
;

864 i‡(
fú°_byã
 !
œ°_byã
) {

868 
size_maö
 = 
œ°_byã
 - 
fú°_byã
 + 1 - 2;

870 i‡(
¥efix_fú°_bô
 =
MWI_FIRST_BIT
) {

872 
¥efix_fú°_bô
 = 0;

873 
size_maö
++;

875 i‡(
po°fix_œ°_bô
 =
MWI_LAST_BIT
) {

877 
po°fix_œ°_bô
 = 0;

878 
size_maö
++;

880 } i‡((
¥efix_fú°_bô
 =
MWI_FIRST_BIT
)

881 && (
po°fix_œ°_bô
 =
MWI_LAST_BIT
)) {

883 
¥efix_fú°_bô
 = 0;

884 
po°fix_œ°_bô
 = 0;

885 
size_maö
 = 1;

889 
po°fix_fú°_bô
 = 
¥efix_fú°_bô
;

890 
¥efix_fú°_bô
 = 0;

891 
size_maö
 = 0;

894 
DRAWON
;

896 i‡(
gc
->
gr_u£bg
) {

897 
y
 = 0; y < 
gc
->
d°h
; y++) {

900 i‡(
¥efix_fú°_bô
) {

901 
bôm≠_byã
 = *
§c
++;

902 
mask
 = 
¥efix_fú°_bô
; mask;

903 
	`MWI_ADVANCE_BIT
(
mask
)) {

904 *
d°
++ = (
mask
 & 
bôm≠_byã
Ë? 
fg
 :

905 
bg
;

910 
t
 = 
size_maö
;Å != 0;Å--) {

911 
bôm≠_byã
 = *
§c
++;

913 *
d°
++ = (
	`MWI_BIT_NO
(0Ë& 
bôm≠_byã
Ë? 
fg
 :

914 
bg
;

915 *
d°
++ = (
	`MWI_BIT_NO
(1Ë& 
bôm≠_byã
Ë? 
fg
 :

916 
bg
;

917 *
d°
++ = (
	`MWI_BIT_NO
(2Ë& 
bôm≠_byã
Ë? 
fg
 :

918 
bg
;

919 *
d°
++ = (
	`MWI_BIT_NO
(3Ë& 
bôm≠_byã
Ë? 
fg
 :

920 
bg
;

921 *
d°
++ = (
	`MWI_BIT_NO
(4Ë& 
bôm≠_byã
Ë? 
fg
 :

922 
bg
;

923 *
d°
++ = (
	`MWI_BIT_NO
(5Ë& 
bôm≠_byã
Ë? 
fg
 :

924 
bg
;

925 *
d°
++ = (
	`MWI_BIT_NO
(6Ë& 
bôm≠_byã
Ë? 
fg
 :

926 
bg
;

927 *
d°
++ = (
	`MWI_BIT_NO
(7Ë& 
bôm≠_byã
Ë? 
fg
 :

928 
bg
;

932 i‡(
po°fix_œ°_bô
) {

933 
bôm≠_byã
 = *
§c
++;

934 
mask
 = 
po°fix_fú°_bô
;

935 
	`MWI_IS_BIT_BEFORE_OR_EQUAL
(
mask
,

936 
po°fix_œ°_bô
);

937 
	`MWI_ADVANCE_BIT
(
mask
)) {

938 *
d°
++ = (
mask
 & 
bôm≠_byã
Ë? 
fg
 :

939 
bg
;

943 
§c
 +
adv™˚_§c
;

944 
d°
 +
adv™˚_d°
;

947 
y
 = 0; y < 
gc
->
d°h
; y++) {

950 i‡(
¥efix_fú°_bô
) {

951 
bôm≠_byã
 = *
§c
++;

952 
mask
 = 
¥efix_fú°_bô
; mask;

953 
	`MWI_ADVANCE_BIT
(
mask
)) {

954 i‡(
mask
 & 
bôm≠_byã
)

955 *
d°
 = 
fg
;

956 
d°
++;

961 
t
 = 
size_maö
;Å != 0;Å--) {

962 
bôm≠_byã
 = *
§c
++;

964 i‡(
	`MWI_BIT_NO
(0Ë& 
bôm≠_byã
)

965 
d°
[0] = 
fg
;

966 i‡(
	`MWI_BIT_NO
(1Ë& 
bôm≠_byã
)

967 
d°
[1] = 
fg
;

968 i‡(
	`MWI_BIT_NO
(2Ë& 
bôm≠_byã
)

969 
d°
[2] = 
fg
;

970 i‡(
	`MWI_BIT_NO
(3Ë& 
bôm≠_byã
)

971 
d°
[3] = 
fg
;

972 i‡(
	`MWI_BIT_NO
(4Ë& 
bôm≠_byã
)

973 
d°
[4] = 
fg
;

974 i‡(
	`MWI_BIT_NO
(5Ë& 
bôm≠_byã
)

975 
d°
[5] = 
fg
;

976 i‡(
	`MWI_BIT_NO
(6Ë& 
bôm≠_byã
)

977 
d°
[6] = 
fg
;

978 i‡(
	`MWI_BIT_NO
(7Ë& 
bôm≠_byã
)

979 
d°
[7] = 
fg
;

981 
d°
 += 8;

985 i‡(
po°fix_œ°_bô
) {

986 
bôm≠_byã
 = *
§c
++;

987 
mask
 = 
po°fix_fú°_bô
;

988 
	`MWI_IS_BIT_BEFORE_OR_EQUAL
(
mask
,

989 
po°fix_œ°_bô
);

990 
	`MWI_ADVANCE_BIT
(
mask
)) {

991 i‡(
mask
 & 
bôm≠_byã
)

992 *
d°
 = 
fg
;

993 
d°
++;

997 
§c
 +
adv™˚_§c
;

998 
d°
 +
adv™˚_d°
;

1002 
DRAWOFF
;

1004 #unde‡
MWI_IS_BIT_BEFORE_OR_EQUAL


1005 #unde‡
MWI_ADVANCE_BIT


1006 #unde‡
MWI_BIT_NO


1007 #unde‡
MWI_FIRST_BIT


1008 #unde‡
MWI_LAST_BIT


1009 
	}
}

1013 #i‡
MW_FEATURE_PSDOP_ALPHAMAP


1018 #i‡
MWPIXEL_FORMAT
 =
MWPF_TRUECOLOR555


1019 #îr‹ 
PSDOP_ALPHAMAP
 
d€s
 
nŸ
 
w‹k
 
ö
 5/5/5 
mode
!!

1022 *
	glow2sˇÀ
 = 0, *
	ghigh2sˇÀ
 = 0;

1025 
	$öô_Æpha_lookup
()

1027 
a
, 
x
;

1028 
r
, 
g
, 
b
;

1029 
idx
;

1031 
low2sˇÀ
 = 
	`mÆloc
(32 * 256 * (low2scale[0]));

1032 
high2sˇÀ
 = 
	`mÆloc
(32 * 256 * (high2scale[0]));

1034 i‡(
high2sˇÀ
 =0 || 
low2sˇÀ
 == 0)

1035 
	`exô
(17);

1037  
a
=0;á < 32;á++ )

1038  
x
=0; x < 256; x++ ) {

1039 
idx
 = (
a
 << 8Ë| 
x
;

1041 
r
 = (
x
 >> 3Ë* 
a
 / 31;

1042 
g
 = ((
x
 << 3Ë& 0x38Ë* 
a
 / 31;

1043 
high2sˇÀ
[
idx
] = (
r
 << 11Ë| (
g
 << 5);

1045 
b
 = (
x
 & 0x1fË* 
a
 / 31;

1046 
g
 = ((
x
 >> 5Ë& 0x7Ë* 
a
 / 31;

1047 
low2sˇÀ
[
idx
] = (
g
 << 5Ë| 
b
;

1049 
	}
}

1052 
	$löór16_døw¨ó_Æpham≠
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
)

1054 
ADDR16
 
§c
, 
d°
;

1055 
ADDR8
 
Æpha
;

1056 
ps
, 
pd
;

1057 
as
, 
ad
;

1058 
x
, 
y
;

1059 
§c_row_°ï
, 
d°_row_°ï
;

1061 i‡–
low2sˇÀ
 == 0 )

1062 
	`öô_Æpha_lookup
();

1064 
§c
 = ((
ADDR16
Ë
gc
->
pixñs
Ë+ gc->
§cx
 + gc->
§c_löñí
 * gc->
§cy
;

1065 
Æpha
 = ((
ADDR8
Ë
gc
->
misc
Ë+ gc->
§c_löñí
 * gc->
§cy
 + gc->
§cx
;

1066 
d°
 = ((
ADDR16
Ë
psd
->
addr
Ë+Ösd->
löñí
 * 
gc
->
d°y
 + gc->
d°x
;

1068 
§c_row_°ï
 = 
gc
->
§c_löñí
 - gc->
d°w
;

1069 
d°_row_°ï
 = 
psd
->
löñí
 - 
gc
->
d°w
;

1071 
DRAWON
;

1072 
y
 = 0; y < 
gc
->
d°h
; y++) {

1073 
x
 = 0; x < 
gc
->
d°w
; x++) {

1074 
as
 = (((Ë((*
Æpha
++) >> 3)) << 8);

1075 
ad
 = (31 << 8Ë- 
as
;

1076 
ps
 = *
§c
++;

1077 
pd
 = *
d°
++;

1078 *
d°
++ = ((
as
 =0Ë? 
pd
 :

1079 ((
ad
 =0Ë? 
ps
 :

1080 
low2sˇÀ
[
as
 | (
ps
 >> 8)] +

1081 
high2sˇÀ
[
as
 | (
ps
 & 0xFF)] +

1082 
low2sˇÀ
[
ad
 | (
pd
 >> 8)] +

1083 
high2sˇÀ
[
ad
 | (
pd
 & 0xFF)]));

1085 
Æpha
 +
§c_row_°ï
;

1086 
§c
 +
§c_row_°ï
;

1087 
d°
 +
d°_row_°ï
;

1089 
DRAWOFF
;

1090 
	}
}

1094 #i‡
MW_FEATURE_PSDOP_ALPHACOL


1096 
	$löór16_døw¨ó_Æphacﬁ
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
)

1098 
ADDR16
 
d°
;

1099 
ADDR8
 
Æpha
;

1100 
ps
, 
pd
;

1101 
as
;

1102 
p§
, 
psg
, 
psb
;

1103 
x
, 
y
;

1104 
§c_row_°ï
, 
d°_row_°ï
;

1106 
Æpha
 = ((
ADDR8
Ë
gc
->
misc
Ë+ gc->
§c_löñí
 * gc->
§cy
 + gc->
§cx
;

1107 
d°
 = ((
ADDR16
Ë
psd
->
addr
Ë+Ösd->
löñí
 * 
gc
->
d°y
 + gc->
d°x
;

1108 
ps
 = 
gc
->
fg_cﬁ‹
;

1110 
§c_row_°ï
 = 
gc
->
§c_löñí
 - gc->
d°w
;

1111 
d°_row_°ï
 = 
psd
->
löñí
 - 
gc
->
d°w
;

1113 
	#COLOR_MASK_R_565
 0xF800U

	)

1114 
	#COLOR_MASK_G_565
 0x07E0U

	)

1115 
	#COLOR_MASK_B_565
 0x001FU

	)

1117 
	#COLOR_MASK_R_555
 0x7C00U

	)

1118 
	#COLOR_MASK_G_555
 0x03E0U

	)

1119 
	#COLOR_MASK_B_555
 0x001FU

	)

1121 
DRAWON
;

1122 i‡(
psd
->
pixty≥
 =
MWPF_TRUECOLOR565
) {

1123 
p§
 = (Ë(
ps
 & 
COLOR_MASK_R_565
);

1124 
psg
 = (Ë(
ps
 & 
COLOR_MASK_G_565
);

1125 
psb
 = (Ë(
ps
 & 
COLOR_MASK_B_565
);

1127 
y
 = 0; y < 
gc
->
d°h
; y++) {

1128 
x
 = 0; x < 
gc
->
d°w
; x++) {

1129 
as
 = *
Æpha
++;

1130 i‡(
as
 == 255) {

1131 *
d°
++ = 
ps
;

1132 } i‡(
as
 != 0) {

1144 
as
 = 256 - (as + (as >> 7));

1145 
pd
 = *
d°
;

1147 *
d°
++ = (()

1149 (
pd
 & 
COLOR_MASK_R_565
)

1150 - 
p§
Ë* 
as
) >> 8) +

1151 
p§
Ë& 
COLOR_MASK_R_565
)

1155 (
pd
 & 
COLOR_MASK_G_565
) -

1156 
psg
Ë* 
as
) >> 8) +

1157 
psg
Ë& 
COLOR_MASK_G_565
)

1161 (
pd
 & 
COLOR_MASK_B_565
) -

1162 
psb
Ë* 
as
) >> 8) +

1163 
psb
Ë& 
COLOR_MASK_B_565
);

1165 
d°
++;

1168 
Æpha
 +
§c_row_°ï
;

1169 
d°
 +
d°_row_°ï
;

1172 
p§
 = (Ë(
ps
 & 
COLOR_MASK_R_555
);

1173 
psg
 = (Ë(
ps
 & 
COLOR_MASK_G_555
);

1174 
psb
 = (Ë(
ps
 & 
COLOR_MASK_B_555
);

1176 
y
 = 0; y < 
gc
->
d°h
; y++) {

1177 
x
 = 0; x < 
gc
->
d°w
; x++) {

1178 
as
 = *
Æpha
++;

1179 i‡(
as
 == 255) {

1180 *
d°
++ = 
ps
;

1181 } i‡(
as
 != 0) {

1193 
as
 = 256 - (as + (as >> 7));

1194 
pd
 = *
d°
;

1196 *
d°
++ = (()

1198 (
pd
 & 
COLOR_MASK_R_555
)

1199 - 
p§
Ë* 
as
) >> 8) +

1200 
p§
Ë& 
COLOR_MASK_R_555
)

1204 (
pd
 & 
COLOR_MASK_G_555
) -

1205 
psg
Ë* 
as
) >> 8) +

1206 
psg
Ë& 
COLOR_MASK_G_555
)

1210 (
pd
 & 
COLOR_MASK_B_555
) -

1211 
psb
Ë* 
as
) >> 8) +

1212 
psb
Ë& 
COLOR_MASK_B_555
);

1214 
d°
++;

1217 
Æpha
 +
§c_row_°ï
;

1218 
d°
 +
d°_row_°ï
;

1221 
DRAWOFF
;

1222 
	}
}

1225 #i‡
MW_FEATURE_PSDOP_COPY


1227 
	$löór16_døw¨ó_c›yÆl
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
)

1229 
ADDR16
 
§c16
, 
d°
;

1230 
löesize
, 
x
, 
y
;

1231 
pcﬁ
;

1233 
löesize
 = 2 * 
gc
->
d°w
;

1234 
§c16
 = ((
ADDR16
Ë
gc
->
pixñs
Ë+ gc->
§cx
 + gc->
§c_löñí
 * gc->
§cy
;

1235 
d°
 = ((
ADDR16
Ë
psd
->
addr
Ë+ 
gc
->
d°x
 +Ösd->
löñí
 * gc->
d°y
;

1237 
DRAWON
;

1238 
y
 = 1; y < 
gc
->
d°h
; y++) {

1239 
	`mem˝y
(
d°
, 
§c16
, 
löesize
);

1240 
§c16
 +
gc
->
§c_löñí
;

1241 
d°
 +
psd
->
löñí
;

1243 
	`mem˝y
(
d°
, 
§c16
, 
löesize
);

1244 
DRAWOFF
;

1245 
	}
}

1248 
	$löór16_døw¨ó_c›yå™s
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
)

1250 
ADDR16
 
§c16
, 
d°
, 
r§c
, 
rd°
;

1251 
löesize
, 
x
, 
y
;

1252 
pcﬁ
;

1254 
§c16
 = ((
ADDR16
Ë
gc
->
pixñs
Ë+ gc->
§cx
 + gc->
§c_löñí
 * gc->
§cy
;

1255 
d°
 = ((
ADDR16
Ë
psd
->
addr
Ë+ 
gc
->
d°x
 +Ösd->
löñí
 * gc->
d°y
;

1257 
DRAWON
;

1258 
y
 = 0; y < 
gc
->
d°h
; y++) {

1259 
rd°
 = 
d°
;

1260 
r§c
 = 
§c16
;

1261 
x
 = 0; x < 
gc
->
d°w
; x++) {

1262 
pcﬁ
 = *
r§c
++;

1263 i‡(
pcﬁ
 =
gc
->
bg_cﬁ‹
)

1264 
rd°
++;

1266 *
rd°
++ = 
pcﬁ
;

1268 
d°
 +
psd
->
löñí
;

1269 
§c16
 +
gc
->
§c_löñí
;

1271 
DRAWOFF
;

1272 
	}
}

1276 
	$löór16_døw¨ó
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
, 
›
)

1278 
	`as£π
(
psd
->
addr
 != 0);

1280 
	`as£π
(
gc
->
d°x
 >0 && gc->d°x+gc->
d°w
 <
psd
->
xªs
);

1283 
	`as£π
(
gc
->
§cy
 >= 0);

1286 
›
) {

1288 #i‡
MW_FEATURE_PSDOP_COPY


1289 
PSDOP_COPY
:

1290 i‡(
gc
->
gr_u£bg
) {

1291 
	`löór16_døw¨ó_c›yÆl
(
psd
, 
gc
);

1293 
	`löór16_døw¨ó_c›yå™s
(
psd
, 
gc
);

1297 
PSDOP_COPYALL
:

1298 
	`löór16_døw¨ó_c›yÆl
(
psd
, 
gc
);

1301 
PSDOP_COPYTRANS
:

1302 
	`löór16_døw¨ó_c›yå™s
(
psd
, 
gc
);

1306 #i‡
MW_FEATURE_PSDOP_ALPHAMAP


1307 
PSDOP_ALPHAMAP
:

1308 
	`löór16_døw¨ó_Æpham≠
(
psd
, 
gc
);

1312 #i‡
MW_FEATURE_PSDOP_ALPHACOL


1313 
PSDOP_ALPHACOL
:

1314 
	`löór16_døw¨ó_Æphacﬁ
(
psd
, 
gc
);

1318 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_LSB_FIRST


1319 
PSDOP_BITMAP_BYTES_LSB_FIRST
:

1320 
	`löór16_døw¨ó_bôm≠_byãs_lsb_fú°
(
psd
, 
gc
);

1324 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_MSB_FIRST


1325 
PSDOP_BITMAP_BYTES_MSB_FIRST
:

1326 
	`löór16_døw¨ó_bôm≠_byãs_msb_fú°
(
psd
, 
gc
);

1331 
	}
}

1333 
SUBDRIVER
 
	gfblöór16
 = {

1334 
löór16_öô
,

1335 
löór16_døwpixñ
,

1336 
löór16_ªadpixñ
,

1337 
löór16_døwh‹zlöe
,

1338 
löór16_døwvîéöe
,

1339 
gí_fûÃe˘
,

1340 
löór16_blô
,

1341 
löór16_døw¨ó
,

1342 
löór16_°ªtchblô
,

1343 
löór16_°ªtchblôex
,

	@drivers/fblin1rev.c

10 
	~<as£π.h
>

11 
	~<°rög.h
>

12 
	~"devi˚.h
"

13 
	~"fb.h
"

15 
	gnŸmask
[8] = {

20 
	$löór1_öô
(
PSD
 
psd
)

22 i‡(!
psd
->
size
)

23 
psd
->
size
 =Ösd->
yªs
 *Ösd->
löñí
;

26 
	}
}

30 
	$löór1_døwpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

32 
ADDR8
 
addr
 = 
psd
->addr;

34 
	`as£π
 (
addr
 != 0);

35 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

36 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

37 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

39 
DRAWON
;

40 
addr
 +(
x
>>3Ë+ 
y
 * 
psd
->
löñí
;

41 if(
gr_mode
 =
MWMODE_XOR
)

42 *
addr
 ^
c
 << (
x
&7);

44 *
addr
 = (*add∏& 
nŸmask
[
x
&7]Ë| (
c
 << (x&7));

45 
DRAWOFF
;

46 
	}
}

49 
MWPIXELVAL


50 
	$löór1_ªadpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

52 
ADDR8
 
addr
 = 
psd
->addr;

54 
	`as£π
 (
addr
 != 0);

55 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

56 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

58  (
addr
[(
x
>>3Ë+ 
y
 * 
psd
->
löñí
] >> (x&7) ) & 0x01;

59 
	}
}

63 
	$löór1_døwh‹zlöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

65 
ADDR8
 
addr
 = 
psd
->addr;

67 
	`as£π
 (
addr
 != 0);

68 
	`as£π
 (
x1
 >0 && x1 < 
psd
->
xªs
);

69 
	`as£π
 (
x2
 >0 && x2 < 
psd
->
xªs
);

70 
	`as£π
 (
x2
 >
x1
);

71 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

72 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

74 
DRAWON
;

75 
addr
 +(
x1
>>3Ë+ 
y
 * 
psd
->
löñí
;

76 if(
gr_mode
 =
MWMODE_XOR
) {

77 
x1
 <
x2
) {

78 *
addr
 ^
c
 << (
x1
&7);

79 if((++
x1
 & 7) == 0)

80 ++
addr
;

83 
x1
 <
x2
) {

84 *
addr
 = (*add∏& 
nŸmask
[
x1
&7]Ë| (
c
 << (x1&7));

85 if((++
x1
 & 7) == 0)

86 ++
addr
;

89 
DRAWOFF
;

90 
	}
}

94 
	$löór1_døwvîéöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

96 
ADDR8
 
addr
 = 
psd
->addr;

97 
löñí
 = 
psd
->linelen;

99 
	`as£π
 (
addr
 != 0);

100 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

101 
	`as£π
 (
y1
 >0 && y1 < 
psd
->
yªs
);

102 
	`as£π
 (
y2
 >0 && y2 < 
psd
->
yªs
);

103 
	`as£π
 (
y2
 >
y1
);

104 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

106 
DRAWON
;

107 
addr
 +(
x
>>3Ë+ 
y1
 * 
löñí
;

108 if(
gr_mode
 =
MWMODE_XOR
)

109 
y1
++ <
y2
) {

110 *
addr
 ^
c
 << (
x
&7);

111 
addr
 +
löñí
;

114 
y1
++ <
y2
) {

115 *
addr
 = (*add∏& 
nŸmask
[
x
&7]Ë| (
c
 << (x&7));

116 
addr
 +
löñí
;

118 
DRAWOFF
;

119 
	}
}

123 
	$löór1_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

124 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

126 
ADDR8
 
d°
;

127 
ADDR8
 
§c
;

128 
i
;

129 
dlöñí
 = 
d°psd
->
löñí
;

130 
¶öñí
 = 
§˝sd
->
löñí
;

132 
	`as£π
 (
d°psd
->
addr
 != 0);

133 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

134 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

135 
	`as£π
 (
w
 > 0);

136 
	`as£π
 (
h
 > 0);

137 
	`as£π
 (
§˝sd
->
addr
 != 0);

138 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

139 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

140 
	`as£π
 (
d°x
+
w
 <
d°psd
->
xªs
);

141 
	`as£π
 (
d°y
+
h
 <
d°psd
->
yªs
);

142 
	`as£π
 (
§cx
+
w
 <
§˝sd
->
xªs
);

143 
	`as£π
 (
§cy
+
h
 <
§˝sd
->
yªs
);

145 
DRAWON
;

146 
d°
 = 
d°psd
->
addr
 + (
d°x
>>3Ë+ 
d°y
 * 
dlöñí
;

147 
§c
 = 
§˝sd
->
addr
 + (
§cx
>>3Ë+ 
§cy
 * 
¶öñí
;

148 --
h
 >= 0) {

149 
ADDR8
 
d
 = 
d°
;

150 
ADDR8
 
s
 = 
§c
;

151 
MWCOORD
 
dx
 = 
d°x
;

152 
MWCOORD
 
sx
 = 
§cx
;

153 
i
=0; i<
w
; ++i) {

154 *
d
 = (*d & 
nŸmask
[
dx
&7]) |

155 ((*
s
 >> (
sx
&7Ë& 0x01Ë<< (
dx
&7));

156 if((++
dx
 & 7) == 0)

157 ++
d
;

158 if((++
sx
 & 7) == 0)

159 ++
s
;

161 
d°
 +
dlöñí
;

162 
§c
 +
¶öñí
;

164 
DRAWOFF
;

165 
	}
}

167 
SUBDRIVER
 
	gfblöór1
 = {

168 
löór1_öô
,

169 
löór1_døwpixñ
,

170 
löór1_ªadpixñ
,

171 
löór1_døwh‹zlöe
,

172 
löór1_døwvîéöe
,

173 
gí_fûÃe˘
,

174 
löór1_blô


	@drivers/fblin2.c

11 
	~<as£π.h
>

12 
	~<°rög.h
>

13 
	~"devi˚.h
"

14 
	~"fb.h
"

16 
	gnŸmask
[4] = { 0x3f, 0xcf, 0xf3, 0xfc};

20 
	$löór2_öô
(
PSD
 
psd
)

22 i‡(!
psd
->
size
)

23 
psd
->
size
 =Ösd->
yªs
 *Ösd->
löñí
;

26 
	}
}

30 
	$löór2_døwpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

32 
ADDR8
 
addr
 = 
psd
->addr;

34 
	`as£π
 (
addr
 != 0);

35 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

36 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

37 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

39 
DRAWON
;

40 
addr
 +(
x
>>2Ë+ 
y
 * 
psd
->
löñí
;

41 if(
gr_mode
 =
MWMODE_XOR
)

42 *
addr
 ^
c
 << ((3-(
x
&3))<<1);

44 *
addr
 = (*add∏& 
nŸmask
[
x
&3]Ë| (
c
 << ((3-(x&3))<<1));

45 
DRAWOFF
;

46 
	}
}

49 
MWPIXELVAL


50 
	$löór2_ªadpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

52 
ADDR8
 
addr
 = 
psd
->addr;

54 
	`as£π
 (
addr
 != 0);

55 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

56 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

58  (
addr
[(
x
>>2Ë+ 
y
 * 
psd
->
löñí
] >> ((3-(x&3))<<1) ) & 0x03;

59 
	}
}

63 
	$löór2_døwh‹zlöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

65 
ADDR8
 
addr
 = 
psd
->addr;

67 
	`as£π
 (
addr
 != 0);

68 
	`as£π
 (
x1
 >0 && x1 < 
psd
->
xªs
);

69 
	`as£π
 (
x2
 >0 && x2 < 
psd
->
xªs
);

70 
	`as£π
 (
x2
 >
x1
);

71 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

72 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

74 
DRAWON
;

75 
addr
 +(
x1
>>2Ë+ 
y
 * 
psd
->
löñí
;

76 if(
gr_mode
 =
MWMODE_XOR
) {

77 
x1
 <
x2
) {

78 *
addr
 ^
c
 << ((3-(
x1
&3))<<1);

79 if((++
x1
 & 3) == 0)

80 ++
addr
;

83 
x1
 <
x2
) {

84 *
addr
 = (*add∏& 
nŸmask
[
x1
&3]Ë| (
c
 << ((3-(x1&3))<<1));

85 if((++
x1
 & 3) == 0)

86 ++
addr
;

89 
DRAWOFF
;

90 
	}
}

94 
	$löór2_døwvîéöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

96 
ADDR8
 
addr
 = 
psd
->addr;

97 
löñí
 = 
psd
->linelen;

99 
	`as£π
 (
addr
 != 0);

100 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

101 
	`as£π
 (
y1
 >0 && y1 < 
psd
->
yªs
);

102 
	`as£π
 (
y2
 >0 && y2 < 
psd
->
yªs
);

103 
	`as£π
 (
y2
 >
y1
);

104 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

106 
DRAWON
;

107 
addr
 +(
x
>>2Ë+ 
y1
 * 
löñí
;

108 if(
gr_mode
 =
MWMODE_XOR
)

109 
y1
++ <
y2
) {

110 *
addr
 ^
c
 << ((3-(
x
&3))<<1);

111 
addr
 +
löñí
;

114 
y1
++ <
y2
) {

115 *
addr
 = (*add∏& 
nŸmask
[
x
&3]Ë| (
c
 << ((3-(x&3))<<1));

116 
addr
 +
löñí
;

118 
DRAWOFF
;

119 
	}
}

123 
	$löór2_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

124 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

126 
ADDR8
 
d°
;

127 
ADDR8
 
§c
;

128 
i
;

129 
dlöñí
 = 
d°psd
->
löñí
;

130 
¶öñí
 = 
§˝sd
->
löñí
;

132 
	`as£π
 (
d°psd
->
addr
 != 0);

133 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

134 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

135 
	`as£π
 (
w
 > 0);

136 
	`as£π
 (
h
 > 0);

137 
	`as£π
 (
§˝sd
->
addr
 != 0);

138 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

139 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

140 
	`as£π
 (
d°x
+
w
 <
d°psd
->
xªs
);

141 
	`as£π
 (
d°y
+
h
 <
d°psd
->
yªs
);

142 
	`as£π
 (
§cx
+
w
 <
§˝sd
->
xªs
);

143 
	`as£π
 (
§cy
+
h
 <
§˝sd
->
yªs
);

145 
DRAWON
;

146 
d°
 = ((
ADDR8
)
d°psd
->
addr
Ë+ (
d°x
>>2Ë+ 
d°y
 * 
dlöñí
;

147 
§c
 = ((
ADDR8
)
§˝sd
->
addr
Ë+ (
§cx
>>2Ë+ 
§cy
 * 
¶öñí
;

148 --
h
 >= 0) {

149 
ADDR8
 
d
 = 
d°
;

150 
ADDR8
 
s
 = 
§c
;

151 
MWCOORD
 
dx
 = 
d°x
;

152 
MWCOORD
 
sx
 = 
§cx
;

153 
i
=0; i<
w
; ++i) {

154 *
d
 = (*d & 
nŸmask
[
dx
&3]) |

155 ((*
s
 >> ((3-(
sx
&3))<<1Ë& 0x03Ë<< ((3-(
dx
&3))<<1));

156 if((++
dx
 & 3) == 0)

157 ++
d
;

158 if((++
sx
 & 3) == 0)

159 ++
s
;

161 
d°
 +
dlöñí
;

162 
§c
 +
¶öñí
;

164 
DRAWOFF
;

165 
	}
}

167 
SUBDRIVER
 
	gfblöór2
 = {

168 
löór2_öô
,

169 
löór2_døwpixñ
,

170 
löór2_ªadpixñ
,

171 
löór2_døwh‹zlöe
,

172 
löór2_døwvîéöe
,

173 
gí_fûÃe˘
,

174 
löór2_blô


	@drivers/fblin24.c

8 
	~<as£π.h
>

9 
	~<°rög.h
>

10 
	~"devi˚.h
"

11 
	~"fb.h
"

15 
	$löór24_öô
(
PSD
 
psd
)

17 i‡(!
psd
->
size
) {

18 
psd
->
size
 =Ösd->
yªs
 *Ösd->
löñí
;

20 
psd
->
löñí
 /= 3;

23 
	}
}

27 
	$löór24_døwpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

29 
ADDR8
 
addr
 = 
psd
->addr;

30 
MWUCHAR
 
r
, 
g
, 
b
;

32 
	`as£π
 (
addr
 != 0);

33 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

34 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

35 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

37 
r
 = 
	`PIXEL888RED
(
c
);

38 
g
 = 
	`PIXEL888GREEN
(
c
);

39 
b
 = 
	`PIXEL888BLUE
(
c
);

40 
addr
 +(
x
 + 
y
 * 
psd
->
löñí
) * 3;

41 
DRAWON
;

42 if(
gr_mode
 =
MWMODE_COPY
) {

43 *
addr
++ = 
b
;

44 *
addr
++ = 
g
;

45 *
addr
 = 
r
;

47 
	`≠∂yOp
(
gr_mode
, 
b
, 
addr
, 
ADDR8
); ++addr;

48 
	`≠∂yOp
(
gr_mode
, 
g
, 
addr
, 
ADDR8
); ++addr;

49 
	`≠∂yOp
(
gr_mode
, 
r
, 
addr
, 
ADDR8
);

51 
DRAWOFF
;

52 
	}
}

55 
MWPIXELVAL


56 
	$löór24_ªadpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

58 
ADDR8
 
addr
 = 
psd
->addr;

60 
	`as£π
 (
addr
 != 0);

61 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

62 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

64 
addr
 +(
x
 + 
y
 * 
psd
->
löñí
) * 3;

65  
	`RGB2PIXEL888
(
addr
[2],áddr[1],áddr[0]);

66 
	}
}

70 
	$löór24_døwh‹zlöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

72 
ADDR8
 
addr
 = 
psd
->addr;

73 
MWUCHAR
 
r
, 
g
, 
b
;

75 
	`as£π
 (
addr
 != 0);

76 
	`as£π
 (
x1
 >0 && x1 < 
psd
->
xªs
);

77 
	`as£π
 (
x2
 >0 && x2 < 
psd
->
xªs
);

78 
	`as£π
 (
x2
 >
x1
);

79 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

80 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

82 
r
 = 
	`PIXEL888RED
(
c
);

83 
g
 = 
	`PIXEL888GREEN
(
c
);

84 
b
 = 
	`PIXEL888BLUE
(
c
);

85 
addr
 +(
x1
 + 
y
 * 
psd
->
löñí
) * 3;

86 
DRAWON
;

87 if(
gr_mode
 =
MWMODE_COPY
) {

88 
x1
++ <
x2
) {

89 *
addr
++ = 
b
;

90 *
addr
++ = 
g
;

91 *
addr
++ = 
r
;

94 
x1
++ <
x2
) {

95 
	`≠∂yOp
(
gr_mode
, 
b
, 
addr
, 
ADDR8
); ++addr;

96 
	`≠∂yOp
(
gr_mode
, 
g
, 
addr
, 
ADDR8
); ++addr;

97 
	`≠∂yOp
(
gr_mode
, 
r
, 
addr
, 
ADDR8
); ++addr;

100 
DRAWOFF
;

101 
	}
}

105 
	$löór24_døwvîéöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

107 
ADDR8
 
addr
 = 
psd
->addr;

108 
löñí
 = 
psd
->linelen * 3;

109 
MWUCHAR
 
r
, 
g
, 
b
;

111 
	`as£π
 (
addr
 != 0);

112 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

113 
	`as£π
 (
y1
 >0 && y1 < 
psd
->
yªs
);

114 
	`as£π
 (
y2
 >0 && y2 < 
psd
->
yªs
);

115 
	`as£π
 (
y2
 >
y1
);

116 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

118 
r
 = 
	`PIXEL888RED
(
c
);

119 
g
 = 
	`PIXEL888GREEN
(
c
);

120 
b
 = 
	`PIXEL888BLUE
(
c
);

121 
addr
 +(
x
 + 
y1
 * 
psd
->
löñí
) * 3;

122 
DRAWON
;

123 if(
gr_mode
 =
MWMODE_COPY
) {

124 
y1
++ <
y2
) {

125 
addr
[0] = 
b
;

126 
addr
[1] = 
g
;

127 
addr
[2] = 
r
;

128 
addr
 +
löñí
;

131 
y1
++ <
y2
) {

132 
	`≠∂yOp
(
gr_mode
, 
b
, &
addr
[0], 
ADDR8
);

133 
	`≠∂yOp
(
gr_mode
, 
g
, &
addr
[1], 
ADDR8
);

134 
	`≠∂yOp
(
gr_mode
, 
r
, &
addr
[2], 
ADDR8
);

135 
addr
 +
löñí
;

138 
DRAWOFF
;

139 
	}
}

143 
	$löór24_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

144 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

146 
ADDR8
 
d°
 = 
d°psd
->
addr
;

147 
ADDR8
 
§c
 = 
§˝sd
->
addr
;

148 
i
;

149 
dlöñí
 = 
d°psd
->
löñí
 * 3;

150 
¶öñí
 = 
§˝sd
->
löñí
 * 3;

151 
dlöñí_möus_w
 = (
d°psd
->
löñí
 - 
w
) * 3;

152 
¶öñí_möus_w
 = (
§˝sd
->
löñí
 - 
w
) * 3;

153 #i‡
ALPHABLEND


154 
Æpha
;

157 
	`as£π
 (
d°
 != 0);

158 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

159 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

160 
	`as£π
 (
w
 > 0);

161 
	`as£π
 (
h
 > 0);

162 
	`as£π
 (
§c
 != 0);

163 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

164 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

165 
	`as£π
 (
d°x
+
w
 <
d°psd
->
xªs
);

166 
	`as£π
 (
d°y
+
h
 <
d°psd
->
yªs
);

167 
	`as£π
 (
§cx
+
w
 <
§˝sd
->
xªs
);

168 
	`as£π
 (
§cy
+
h
 <
§˝sd
->
yªs
);

170 
DRAWON
;

171 
d°
 +(
d°x
 + 
d°y
 * 
d°psd
->
löñí
) * 3;

172 
§c
 +(
§cx
 + 
§cy
 * 
§˝sd
->
löñí
) * 3;

174 #i‡
ALPHABLEND


175 if((
›
 & 
MWROP_EXTENSION
Ë!
MWROP_BLENDCONSTANT
)

176 
°dblô
;

177 
Æpha
 = 
›
 & 0xff;

179 --
h
 >= 0) {

180 
i
=0; i<
w
; ++i) {

181 
s
 = *
§c
++;

182 
d
 = *
d°
;

183 *
d°
++ = ()(((
s
 - 
d
)*
Æpha
)>>8) + d;

184 
s
 = *
§c
++;

185 
d
 = *
d°
;

186 *
d°
++ = ()(((
s
 - 
d
)*
Æpha
)>>8) + d;

187 
s
 = *
§c
++;

188 
d
 = *
d°
;

189 *
d°
++ = ()(((
s
 - 
d
)*
Æpha
)>>8) + d;

191 
d°
 +
dlöñí_möus_w
;

192 
§c
 +
¶öñí_möus_w
;

194 
DRAWOFF
;

196 
°dblô
:

199 i‡(
›
 =
MWROP_COPY
) {

202 i‡(
§cy
 < 
d°y
) {

203 
§c
 +(
h
-1Ë* 
¶öñí
;

204 
d°
 +(
h
-1Ë* 
dlöñí
;

205 
¶öñí
 *= -1;

206 
dlöñí
 *= -1;

208 --
h
 >= 0) {

210 
	`memmove
(
d°
, 
§c
, 
w
*3);

211 
d°
 +
dlöñí
;

212 
§c
 +
¶öñí
;

215 
i
=
w
*3; i>=0; --i) {

216 
	`≠∂yOp
(
	`MWROP_TO_MODE
(
›
), *
§c
, 
d°
, 
ADDR8
);

217 ++
§c
;

218 ++
d°
;

220 
d°
 +
dlöñí_möus_w
;

221 
§c
 +
¶öñí_möus_w
;

223 
DRAWOFF
;

224 
	}
}

228 
	$löór24_°ªtchblô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
d°w
,

229 
MWCOORD
 
d°h
, 
PSD
 
§˝sd
, MWCOORD 
§cx
, MWCOORD 
§cy
, MWCOORD 
§cw
,

230 
MWCOORD
 
§ch
, 
›
)

232 
ADDR8
 
d°
;

233 
ADDR8
 
§c
;

234 
dlöñí
 = 
d°psd
->
löñí
;

235 
¶öñí
 = 
§˝sd
->
löñí
;

236 
i
, 
ymax
;

237 
row_pos
, 
row_öc
;

238 
cﬁ_pos
, 
cﬁ_öc
;

239 
r
 = 0;

240 
g
 = 0;

241 
b
 = 0;

243 
	`as£π
 (
d°psd
->
addr
 != 0);

244 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

245 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

246 
	`as£π
 (
d°w
 > 0);

247 
	`as£π
 (
d°h
 > 0);

248 
	`as£π
 (
§˝sd
->
addr
 != 0);

249 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

250 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

251 
	`as£π
 (
§cw
 > 0);

252 
	`as£π
 (
§ch
 > 0);

253 
	`as£π
 (
d°x
+
d°w
 <
d°psd
->
xªs
);

254 
	`as£π
 (
d°y
+
d°h
 <
d°psd
->
yªs
);

255 
	`as£π
 (
§cx
+
§cw
 <
§˝sd
->
xªs
);

256 
	`as£π
 (
§cy
+
§ch
 <
§˝sd
->
yªs
);

258 
DRAWON
;

259 
row_pos
 = 0x10000;

260 
row_öc
 = (
§ch
 << 16Ë/ 
d°h
;

263 
ymax
 = 
d°y
+
d°h
; dsty<ymax; ++dsty) {

266 
row_pos
 >= 0x10000L) {

267 ++
§cy
;

268 
row_pos
 -= 0x10000L;

271 
d°
 = ((
ADDR8
)
d°psd
->
addr
Ë+ (
d°x
 + 
d°y
*
dlöñí
) * 3;

272 
§c
 = ((
ADDR8
)
§˝sd
->
addr
Ë+ (
§cx
 + (
§cy
-1)*
¶öñí
) * 3;

275 
cﬁ_pos
 = 0x10000;

276 
cﬁ_öc
 = (
§cw
 << 16Ë/ 
d°w
;

277 
i
=0; i<
d°w
; ++i) {

279 
cﬁ_pos
 >= 0x10000L) {

280 
b
 = *
§c
++;

281 
g
 = *
§c
++;

282 
r
 = *
§c
++;

283 
cﬁ_pos
 -= 0x10000L;

285 *
d°
++ = 
b
;

286 *
d°
++ = 
g
;

287 *
d°
++ = 
r
;

288 
cﬁ_pos
 +
cﬁ_öc
;

291 
row_pos
 +
row_öc
;

293 
DRAWOFF
;

294 
	}
}

307 #i‚de‡
RESTRICT


308 
	#RESTRICT


	)

310 #i‚de‡
SIGN


311 
	#SIGN
(
x
Ë(((xË> 0Ë? 1 : (((xË=0Ë? 0 : -1))

	)

313 #i‚de‡
ABS


314 
	#ABS
(
x
Ë(((xË>0Ë? (xË: -(x))

	)

350 
	$löór24_°ªtchblôex
(
PSD
 
d°psd
,

351 
PSD
 
§˝sd
,

352 
MWCOORD
 
de°_x_°¨t
,

353 
MWCOORD
 
de°_y_°¨t
,

354 
MWCOORD
 
width
,

355 
MWCOORD
 
height
,

356 
x_díomö©‹
,

357 
y_díomö©‹
,

358 
§c_x_‰a˘i⁄
,

359 
§c_y_‰a˘i⁄
,

360 
x_°ï_‰a˘i⁄
,

361 
y_°ï_‰a˘i⁄
,

362 
›
)

365 *
RESTRICT
 
§c_±r
;

368 *
RESTRICT
 
√xt_§c_±r
;

371 *
RESTRICT
 
de°_±r
;

374 *
√xt_de°_±r
;

377 
x_îr‹
;

378 
y_îr‹
;

383 
§c_x_°ï_⁄e
;

384 
§c_y_°ï_⁄e
;

389 
§c_x_°ï_n‹mÆ
;

390 
§c_y_°ï_n‹mÆ
;

395 
x_îr‹_°ï_n‹mÆ
;

396 
y_îr‹_°ï_n‹mÆ
;

399 
x_cou¡
;

400 
y_cou¡
;

403 
§c_x_°¨t
;

404 
§c_y_°¨t
;

407 
x_îr‹_°¨t
;

410 
de°_y_°ï
;

418 
§c_x_‰a˘i⁄
 +(
x_°ï_‰a˘i⁄
 >> 1);

419 
§c_y_‰a˘i⁄
 +(
y_°ï_‰a˘i⁄
 >> 1);

427 
§c_x_°¨t
 = 
§c_x_‰a˘i⁄
 / 
x_díomö©‹
;

428 
§c_y_°¨t
 = 
§c_y_‰a˘i⁄
 / 
y_díomö©‹
;

429 
x_îr‹_°¨t
 = 
§c_x_‰a˘i⁄
 - (
§c_x_°¨t
 + 1Ë* 
x_díomö©‹
;

430 
y_îr‹
 = 
§c_y_‰a˘i⁄
 - (
§c_y_°¨t
 + 1Ë* 
y_díomö©‹
;

434 
§c_x_°ï_n‹mÆ
 = 
x_°ï_‰a˘i⁄
 / 
x_díomö©‹
;

435 
§c_x_°ï_⁄e
 = 
	`SIGN
(
x_°ï_‰a˘i⁄
);

436 
x_îr‹_°ï_n‹mÆ
 =

437 
	`ABS
(
x_°ï_‰a˘i⁄
Ë- ABS(
§c_x_°ï_n‹mÆ
Ë* 
x_díomö©‹
;

439 
§c_y_°ï_n‹mÆ
 = 
y_°ï_‰a˘i⁄
 / 
y_díomö©‹
;

440 
§c_y_°ï_⁄e
 = 
	`SIGN
(
y_°ï_‰a˘i⁄
Ë* 
§˝sd
->
löñí
;

441 
y_îr‹_°ï_n‹mÆ
 =

442 
	`ABS
(
y_°ï_‰a˘i⁄
Ë- ABS(
§c_y_°ï_n‹mÆ
Ë* 
y_díomö©‹
;

443 
§c_y_°ï_n‹mÆ
 *
§˝sd
->
löñí
;

451 
√xt_§c_±r
 =

452 ((*Ë
§˝sd
->
addr
) +

453 3 * (
§c_y_°¨t
 * 
§˝sd
->
löñí
 + 
§c_x_°¨t
);

456 
de°_y_°ï
 = 
d°psd
->
löñí
;

459 
√xt_de°_±r
 =

460 ((*Ë
d°psd
->
addr
) +

461 3 * (
de°_y_°¨t
 * 
de°_y_°ï
 + 
de°_x_°¨t
);

464 
§c_x_°ï_n‹mÆ
 *= 3;

465 
§c_x_°ï_⁄e
 *= 3;

466 
§c_y_°ï_n‹mÆ
 *= 3;

467 
§c_y_°ï_⁄e
 *= 3;

477 
›
 & 
MWROP_EXTENSION
) {

478 
MWROP_SRC
:

482 
y_cou¡
 = 
height
;

483 
y_cou¡
-- > 0) {

484 
§c_±r
 = 
√xt_§c_±r
;

485 
de°_±r
 = 
√xt_de°_±r
;

487 
x_îr‹
 = 
x_îr‹_°¨t
;

489 
x_cou¡
 = 
width
;

490 
x_cou¡
-- > 0) {

491 *
de°_±r
++ = 
§c_±r
[0];

492 *
de°_±r
++ = 
§c_±r
[1];

493 *
de°_±r
++ = 
§c_±r
[2];

495 
§c_±r
 +
§c_x_°ï_n‹mÆ
;

496 
x_îr‹
 +
x_îr‹_°ï_n‹mÆ
;

498 i‡(
x_îr‹
 >= 0) {

499 
§c_±r
 +
§c_x_°ï_⁄e
;

500 
x_îr‹
 -
x_díomö©‹
;

504 
√xt_de°_±r
 +
de°_y_°ï
;

506 
√xt_§c_±r
 +
§c_y_°ï_n‹mÆ
;

507 
y_îr‹
 +
y_îr‹_°ï_n‹mÆ
;

509 i‡(
y_îr‹
 >= 0) {

510 
√xt_§c_±r
 +
§c_y_°ï_⁄e
;

511 
y_îr‹
 -
y_díomö©‹
;

516 
MWROP_CLEAR
:

517 
y_cou¡
 = 
height
;

518 
y_cou¡
-- > 0) {

519 
de°_±r
 = 
√xt_de°_±r
;

520 
x_cou¡
 = 
width
 * 3;

521 
x_cou¡
-- > 0) {

522 *
de°_±r
++ = 0;

524 
√xt_de°_±r
 +
de°_y_°ï
;

529 
y_cou¡
 = 
height
;

530 
y_cou¡
-- > 0) {

531 
§c_±r
 = 
√xt_§c_±r
;

532 
de°_±r
 = 
√xt_de°_±r
;

534 
x_îr‹
 = 
x_îr‹_°¨t
;

536 
x_cou¡
 = 
width
;

537 
x_cou¡
-- > 0) {

538 
	`≠∂yOp
(
	`MWROP_TO_MODE
(
›
), 
§c_±r
[0], 
de°_±r
, 
ADDR8
);

539 
de°_±r
++;

540 
	`≠∂yOp
(
	`MWROP_TO_MODE
(
›
), 
§c_±r
[1], 
de°_±r
, 
ADDR8
);

541 
de°_±r
++;

542 
	`≠∂yOp
(
	`MWROP_TO_MODE
(
›
), 
§c_±r
[2], 
de°_±r
, 
ADDR8
);

543 
de°_±r
++;

545 
§c_±r
 +
§c_x_°ï_n‹mÆ
;

546 
x_îr‹
 +
x_îr‹_°ï_n‹mÆ
;

548 i‡(
x_îr‹
 >= 0) {

549 
§c_±r
 +
§c_x_°ï_⁄e
;

550 
x_îr‹
 -
x_díomö©‹
;

554 
√xt_de°_±r
 +
de°_y_°ï
;

556 
√xt_§c_±r
 +
§c_y_°ï_n‹mÆ
;

557 
y_îr‹
 +
y_îr‹_°ï_n‹mÆ
;

559 i‡(
y_îr‹
 >= 0) {

560 
√xt_§c_±r
 +
§c_y_°ï_⁄e
;

561 
y_îr‹
 -
y_díomö©‹
;

567 
	}
}

569 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_LSB_FIRST


592 
	$löór24_døw¨ó_bôm≠_byãs_lsb_fú°
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
)

606 
	#MWI_IS_BIT_BEFORE_OR_EQUAL
(
a
,
b
Ë(◊Ë<(b))

	)

607 
	#MWI_ADVANCE_BIT
(
èrgë
Ë(—¨gëË<<1)

	)

608 
	#MWI_BIT_NO
(
n
Ë(0x01 << (n))

	)

614 
	#MWI_FIRST_BIT
 
	`MWI_BIT_NO
(0)

	)

615 
	#MWI_LAST_BIT
 
	`MWI_BIT_NO
(7)

	)

617 
¥efix_fú°_bô
;

618 
po°fix_fú°_bô
 = 
MWI_FIRST_BIT
;

619 
po°fix_œ°_bô
;

620 
bôm≠_byã
;

621 
mask
;

622 
fg
, 
bg
;

623 
fg_r
, 
fg_g
, 
fg_b
, 
bg_r
, 
bg_g
, 
bg_b
;

624 
fú°_byã
, 
œ°_byã
;

625 
size_maö
;

626 
t
, 
y
;

627 
adv™˚_§c
, 
adv™˚_d°
;

628 
ADDR8
 
§c
;

629 
ADDR8
 
d°
;

632 
¥efix_fú°_bô
 = 
	`MWI_BIT_NO
(
gc
->
§cx
 & 7);

635 
po°fix_œ°_bô
 = 
	`MWI_BIT_NO
((
gc
->
§cx
 + gc->
d°w
 - 1) & 7);

638 
fú°_byã
 = 
gc
->
§cx
 >> 3;

641 
œ°_byã
 = (
gc
->
§cx
 + gc->
d°w
 - 1) >> 3;

643 
§c
 = ((
ADDR8
Ë
gc
->
pixñs
Ë+ gc->
§c_löñí
 * gc->
§cy
 + 
fú°_byã
;

644 
d°
 = ((
ADDR8
Ë
psd
->
addr
Ë+ (psd->
löñí
 * 
gc
->
d°y
 + gc->
d°x
) * 3;

645 
fg
 = 
gc
->
fg_cﬁ‹
;

646 
fg_r
 = 
	`PIXEL888RED
(
fg
);

647 
fg_g
 = 
	`PIXEL888GREEN
(
fg
);

648 
fg_b
 = 
	`PIXEL888BLUE
(
fg
);

649 
bg
 = 
gc
->
bg_cﬁ‹
;

650 
bg_r
 = 
	`PIXEL888RED
(
bg
);

651 
bg_g
 = 
	`PIXEL888GREEN
(
bg
);

652 
bg_b
 = 
	`PIXEL888BLUE
(
bg
);

654 
adv™˚_§c
 = 
gc
->
§c_löñí
 - 
œ°_byã
 + 
fú°_byã
 - 1;

655 
adv™˚_d°
 = (
psd
->
löñí
 - 
gc
->
d°w
) * 3;

657 i‡(
fú°_byã
 !
œ°_byã
) {

661 
size_maö
 = 
œ°_byã
 - 
fú°_byã
 + 1 - 2;

663 i‡(
¥efix_fú°_bô
 =
MWI_FIRST_BIT
) {

665 
¥efix_fú°_bô
 = 0;

666 
size_maö
++;

668 i‡(
po°fix_œ°_bô
 =
MWI_LAST_BIT
) {

670 
po°fix_œ°_bô
 = 0;

671 
size_maö
++;

673 } i‡((
¥efix_fú°_bô
 =
MWI_FIRST_BIT
)

674 && (
po°fix_œ°_bô
 =
MWI_LAST_BIT
)) {

676 
¥efix_fú°_bô
 = 0;

677 
po°fix_œ°_bô
 = 0;

678 
size_maö
 = 1;

682 
po°fix_fú°_bô
 = 
¥efix_fú°_bô
;

683 
¥efix_fú°_bô
 = 0;

684 
size_maö
 = 0;

687 
DRAWON
;

689 i‡(
gc
->
gr_u£bg
) {

690 
y
 = 0; y < 
gc
->
d°h
; y++) {

693 i‡(
¥efix_fú°_bô
) {

694 
bôm≠_byã
 = *
§c
++;

695 
mask
 = 
¥efix_fú°_bô
; mask;

696 
	`MWI_ADVANCE_BIT
(
mask
)) {

697 i‡(
mask
 & 
bôm≠_byã
) {

698 *
d°
++ = 
fg_b
;

699 *
d°
++ = 
fg_g
;

700 *
d°
++ = 
fg_r
;

702 *
d°
++ = 
bg_b
;

703 *
d°
++ = 
bg_g
;

704 *
d°
++ = 
bg_r
;

710 
t
 = 
size_maö
;Å != 0;Å--) {

711 
bôm≠_byã
 = *
§c
++;

713 i‡(
	`MWI_BIT_NO
(0Ë& 
bôm≠_byã
) {

714 *
d°
++ = 
fg_b
;

715 *
d°
++ = 
fg_g
;

716 *
d°
++ = 
fg_r
;

718 *
d°
++ = 
bg_b
;

719 *
d°
++ = 
bg_g
;

720 *
d°
++ = 
bg_r
;

722 i‡(
	`MWI_BIT_NO
(1Ë& 
bôm≠_byã
) {

723 *
d°
++ = 
fg_b
;

724 *
d°
++ = 
fg_g
;

725 *
d°
++ = 
fg_r
;

727 *
d°
++ = 
bg_b
;

728 *
d°
++ = 
bg_g
;

729 *
d°
++ = 
bg_r
;

731 i‡(
	`MWI_BIT_NO
(2Ë& 
bôm≠_byã
) {

732 *
d°
++ = 
fg_b
;

733 *
d°
++ = 
fg_g
;

734 *
d°
++ = 
fg_r
;

736 *
d°
++ = 
bg_b
;

737 *
d°
++ = 
bg_g
;

738 *
d°
++ = 
bg_r
;

740 i‡(
	`MWI_BIT_NO
(3Ë& 
bôm≠_byã
) {

741 *
d°
++ = 
fg_b
;

742 *
d°
++ = 
fg_g
;

743 *
d°
++ = 
fg_r
;

745 *
d°
++ = 
bg_b
;

746 *
d°
++ = 
bg_g
;

747 *
d°
++ = 
bg_r
;

749 i‡(
	`MWI_BIT_NO
(4Ë& 
bôm≠_byã
) {

750 *
d°
++ = 
fg_b
;

751 *
d°
++ = 
fg_g
;

752 *
d°
++ = 
fg_r
;

754 *
d°
++ = 
bg_b
;

755 *
d°
++ = 
bg_g
;

756 *
d°
++ = 
bg_r
;

758 i‡(
	`MWI_BIT_NO
(5Ë& 
bôm≠_byã
) {

759 *
d°
++ = 
fg_b
;

760 *
d°
++ = 
fg_g
;

761 *
d°
++ = 
fg_r
;

763 *
d°
++ = 
bg_b
;

764 *
d°
++ = 
bg_g
;

765 *
d°
++ = 
bg_r
;

767 i‡(
	`MWI_BIT_NO
(6Ë& 
bôm≠_byã
) {

768 *
d°
++ = 
fg_b
;

769 *
d°
++ = 
fg_g
;

770 *
d°
++ = 
fg_r
;

772 *
d°
++ = 
bg_b
;

773 *
d°
++ = 
bg_g
;

774 *
d°
++ = 
bg_r
;

776 i‡(
	`MWI_BIT_NO
(7Ë& 
bôm≠_byã
) {

777 *
d°
++ = 
fg_b
;

778 *
d°
++ = 
fg_g
;

779 *
d°
++ = 
fg_r
;

781 *
d°
++ = 
bg_b
;

782 *
d°
++ = 
bg_g
;

783 *
d°
++ = 
bg_r
;

788 i‡(
po°fix_œ°_bô
) {

789 
bôm≠_byã
 = *
§c
++;

790 
mask
 = 
po°fix_fú°_bô
;

791 
	`MWI_IS_BIT_BEFORE_OR_EQUAL
(
mask
,

792 
po°fix_œ°_bô
);

793 
	`MWI_ADVANCE_BIT
(
mask
)) {

794 i‡(
mask
 & 
bôm≠_byã
) {

795 *
d°
++ = 
fg_b
;

796 *
d°
++ = 
fg_g
;

797 *
d°
++ = 
fg_r
;

799 *
d°
++ = 
bg_b
;

800 *
d°
++ = 
bg_g
;

801 *
d°
++ = 
bg_r
;

806 
§c
 +
adv™˚_§c
;

807 
d°
 +
adv™˚_d°
;

810 
y
 = 0; y < 
gc
->
d°h
; y++) {

813 i‡(
¥efix_fú°_bô
) {

814 
bôm≠_byã
 = *
§c
++;

815 
mask
 = 
¥efix_fú°_bô
; mask;

816 
	`MWI_ADVANCE_BIT
(
mask
)) {

817 i‡(
mask
 & 
bôm≠_byã
) {

818 
d°
[0] = 
fg_b
;

819 
d°
[1] = 
fg_g
;

820 
d°
[2] = 
fg_r
;

822 
d°
 += 3;

827 
t
 = 
size_maö
;Å != 0;Å--) {

828 
bôm≠_byã
 = *
§c
++;

830 i‡(
	`MWI_BIT_NO
(0Ë& 
bôm≠_byã
) {

831 
d°
[0 * 3 + 0] = 
fg_b
;

832 
d°
[0 * 3 + 1] = 
fg_g
;

833 
d°
[0 * 3 + 2] = 
fg_r
;

835 i‡(
	`MWI_BIT_NO
(1Ë& 
bôm≠_byã
) {

836 
d°
[1 * 3 + 0] = 
fg_b
;

837 
d°
[1 * 3 + 1] = 
fg_g
;

838 
d°
[1 * 3 + 2] = 
fg_r
;

840 i‡(
	`MWI_BIT_NO
(2Ë& 
bôm≠_byã
) {

841 
d°
[2 * 3 + 0] = 
fg_b
;

842 
d°
[2 * 3 + 1] = 
fg_g
;

843 
d°
[2 * 3 + 2] = 
fg_r
;

845 i‡(
	`MWI_BIT_NO
(3Ë& 
bôm≠_byã
) {

846 
d°
[3 * 3 + 0] = 
fg_b
;

847 
d°
[3 * 3 + 1] = 
fg_g
;

848 
d°
[3 * 3 + 2] = 
fg_r
;

850 i‡(
	`MWI_BIT_NO
(4Ë& 
bôm≠_byã
) {

851 
d°
[4 * 3 + 0] = 
fg_b
;

852 
d°
[4 * 3 + 1] = 
fg_g
;

853 
d°
[4 * 3 + 2] = 
fg_r
;

855 i‡(
	`MWI_BIT_NO
(5Ë& 
bôm≠_byã
) {

856 
d°
[5 * 3 + 0] = 
fg_b
;

857 
d°
[5 * 3 + 1] = 
fg_g
;

858 
d°
[5 * 3 + 2] = 
fg_r
;

860 i‡(
	`MWI_BIT_NO
(6Ë& 
bôm≠_byã
) {

861 
d°
[6 * 3 + 0] = 
fg_b
;

862 
d°
[6 * 3 + 1] = 
fg_g
;

863 
d°
[6 * 3 + 2] = 
fg_r
;

865 i‡(
	`MWI_BIT_NO
(7Ë& 
bôm≠_byã
) {

866 
d°
[7 * 3 + 0] = 
fg_b
;

867 
d°
[7 * 3 + 1] = 
fg_g
;

868 
d°
[7 * 3 + 2] = 
fg_r
;

870 
d°
 += 8 * 3;

874 i‡(
po°fix_œ°_bô
) {

875 
bôm≠_byã
 = *
§c
++;

876 
mask
 = 
po°fix_fú°_bô
;

877 
	`MWI_IS_BIT_BEFORE_OR_EQUAL
(
mask
,

878 
po°fix_œ°_bô
);

879 
	`MWI_ADVANCE_BIT
(
mask
)) {

880 i‡(
mask
 & 
bôm≠_byã
) {

881 
d°
[0] = 
fg_b
;

882 
d°
[1] = 
fg_g
;

883 
d°
[2] = 
fg_r
;

885 
d°
 += 3;

889 
§c
 +
adv™˚_§c
;

890 
d°
 +
adv™˚_d°
;

894 
DRAWOFF
;

896 #unde‡
MWI_IS_BIT_BEFORE_OR_EQUAL


897 #unde‡
MWI_ADVANCE_BIT


898 #unde‡
MWI_BIT_NO


899 #unde‡
MWI_FIRST_BIT


900 #unde‡
MWI_LAST_BIT


901 
	}
}

904 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_MSB_FIRST


924 
	$löór24_døw¨ó_bôm≠_byãs_msb_fú°
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
)

938 
	#MWI_IS_BIT_BEFORE_OR_EQUAL
(
a
,
b
Ë(◊Ë>(b))

	)

939 
	#MWI_ADVANCE_BIT
(
èrgë
Ë(—¨gëË>>1)

	)

940 
	#MWI_BIT_NO
(
n
Ë(0x80 >> (n))

	)

946 
	#MWI_FIRST_BIT
 
	`MWI_BIT_NO
(0)

	)

947 
	#MWI_LAST_BIT
 
	`MWI_BIT_NO
(7)

	)

949 
¥efix_fú°_bô
;

950 
po°fix_fú°_bô
 = 
MWI_FIRST_BIT
;

951 
po°fix_œ°_bô
;

952 
bôm≠_byã
;

953 
mask
;

954 
fg
, 
bg
;

955 
fg_r
, 
fg_g
, 
fg_b
, 
bg_r
, 
bg_g
, 
bg_b
;

956 
fú°_byã
, 
œ°_byã
;

957 
size_maö
;

958 
t
, 
y
;

959 
adv™˚_§c
, 
adv™˚_d°
;

960 
ADDR8
 
§c
;

961 
ADDR8
 
d°
;

964 
¥efix_fú°_bô
 = 
	`MWI_BIT_NO
(
gc
->
§cx
 & 7);

967 
po°fix_œ°_bô
 = 
	`MWI_BIT_NO
((
gc
->
§cx
 + gc->
d°w
 - 1) & 7);

970 
fú°_byã
 = 
gc
->
§cx
 >> 3;

973 
œ°_byã
 = (
gc
->
§cx
 + gc->
d°w
 - 1) >> 3;

975 
§c
 = ((
ADDR8
Ë
gc
->
pixñs
Ë+ gc->
§c_löñí
 * gc->
§cy
 + 
fú°_byã
;

976 
d°
 = ((
ADDR8
Ë
psd
->
addr
Ë+ (psd->
löñí
 * 
gc
->
d°y
 + gc->
d°x
) * 3;

977 
fg
 = 
gc
->
fg_cﬁ‹
;

978 
fg_r
 = 
	`PIXEL888RED
(
fg
);

979 
fg_g
 = 
	`PIXEL888GREEN
(
fg
);

980 
fg_b
 = 
	`PIXEL888BLUE
(
fg
);

981 
bg
 = 
gc
->
bg_cﬁ‹
;

982 
bg_r
 = 
	`PIXEL888RED
(
bg
);

983 
bg_g
 = 
	`PIXEL888GREEN
(
bg
);

984 
bg_b
 = 
	`PIXEL888BLUE
(
bg
);

986 
adv™˚_§c
 = 
gc
->
§c_löñí
 - 
œ°_byã
 + 
fú°_byã
 - 1;

987 
adv™˚_d°
 = (
psd
->
löñí
 - 
gc
->
d°w
) * 3;

989 i‡(
fú°_byã
 !
œ°_byã
) {

993 
size_maö
 = 
œ°_byã
 - 
fú°_byã
 + 1 - 2;

995 i‡(
¥efix_fú°_bô
 =
MWI_FIRST_BIT
) {

997 
¥efix_fú°_bô
 = 0;

998 
size_maö
++;

1000 i‡(
po°fix_œ°_bô
 =
MWI_LAST_BIT
) {

1002 
po°fix_œ°_bô
 = 0;

1003 
size_maö
++;

1005 } i‡((
¥efix_fú°_bô
 =
MWI_FIRST_BIT
)

1006 && (
po°fix_œ°_bô
 =
MWI_LAST_BIT
)) {

1008 
¥efix_fú°_bô
 = 0;

1009 
po°fix_œ°_bô
 = 0;

1010 
size_maö
 = 1;

1014 
po°fix_fú°_bô
 = 
¥efix_fú°_bô
;

1015 
¥efix_fú°_bô
 = 0;

1016 
size_maö
 = 0;

1019 
DRAWON
;

1021 i‡(
gc
->
gr_u£bg
) {

1022 
y
 = 0; y < 
gc
->
d°h
; y++) {

1025 i‡(
¥efix_fú°_bô
) {

1026 
bôm≠_byã
 = *
§c
++;

1027 
mask
 = 
¥efix_fú°_bô
; mask;

1028 
	`MWI_ADVANCE_BIT
(
mask
)) {

1029 i‡(
mask
 & 
bôm≠_byã
) {

1030 *
d°
++ = 
fg_b
;

1031 *
d°
++ = 
fg_g
;

1032 *
d°
++ = 
fg_r
;

1034 *
d°
++ = 
bg_b
;

1035 *
d°
++ = 
bg_g
;

1036 *
d°
++ = 
bg_r
;

1042 
t
 = 
size_maö
;Å != 0;Å--) {

1043 
bôm≠_byã
 = *
§c
++;

1045 i‡(
	`MWI_BIT_NO
(0Ë& 
bôm≠_byã
) {

1046 *
d°
++ = 
fg_b
;

1047 *
d°
++ = 
fg_g
;

1048 *
d°
++ = 
fg_r
;

1050 *
d°
++ = 
bg_b
;

1051 *
d°
++ = 
bg_g
;

1052 *
d°
++ = 
bg_r
;

1054 i‡(
	`MWI_BIT_NO
(1Ë& 
bôm≠_byã
) {

1055 *
d°
++ = 
fg_b
;

1056 *
d°
++ = 
fg_g
;

1057 *
d°
++ = 
fg_r
;

1059 *
d°
++ = 
bg_b
;

1060 *
d°
++ = 
bg_g
;

1061 *
d°
++ = 
bg_r
;

1063 i‡(
	`MWI_BIT_NO
(2Ë& 
bôm≠_byã
) {

1064 *
d°
++ = 
fg_b
;

1065 *
d°
++ = 
fg_g
;

1066 *
d°
++ = 
fg_r
;

1068 *
d°
++ = 
bg_b
;

1069 *
d°
++ = 
bg_g
;

1070 *
d°
++ = 
bg_r
;

1072 i‡(
	`MWI_BIT_NO
(3Ë& 
bôm≠_byã
) {

1073 *
d°
++ = 
fg_b
;

1074 *
d°
++ = 
fg_g
;

1075 *
d°
++ = 
fg_r
;

1077 *
d°
++ = 
bg_b
;

1078 *
d°
++ = 
bg_g
;

1079 *
d°
++ = 
bg_r
;

1081 i‡(
	`MWI_BIT_NO
(4Ë& 
bôm≠_byã
) {

1082 *
d°
++ = 
fg_b
;

1083 *
d°
++ = 
fg_g
;

1084 *
d°
++ = 
fg_r
;

1086 *
d°
++ = 
bg_b
;

1087 *
d°
++ = 
bg_g
;

1088 *
d°
++ = 
bg_r
;

1090 i‡(
	`MWI_BIT_NO
(5Ë& 
bôm≠_byã
) {

1091 *
d°
++ = 
fg_b
;

1092 *
d°
++ = 
fg_g
;

1093 *
d°
++ = 
fg_r
;

1095 *
d°
++ = 
bg_b
;

1096 *
d°
++ = 
bg_g
;

1097 *
d°
++ = 
bg_r
;

1099 i‡(
	`MWI_BIT_NO
(6Ë& 
bôm≠_byã
) {

1100 *
d°
++ = 
fg_b
;

1101 *
d°
++ = 
fg_g
;

1102 *
d°
++ = 
fg_r
;

1104 *
d°
++ = 
bg_b
;

1105 *
d°
++ = 
bg_g
;

1106 *
d°
++ = 
bg_r
;

1108 i‡(
	`MWI_BIT_NO
(7Ë& 
bôm≠_byã
) {

1109 *
d°
++ = 
fg_b
;

1110 *
d°
++ = 
fg_g
;

1111 *
d°
++ = 
fg_r
;

1113 *
d°
++ = 
bg_b
;

1114 *
d°
++ = 
bg_g
;

1115 *
d°
++ = 
bg_r
;

1120 i‡(
po°fix_œ°_bô
) {

1121 
bôm≠_byã
 = *
§c
++;

1122 
mask
 = 
po°fix_fú°_bô
;

1123 
	`MWI_IS_BIT_BEFORE_OR_EQUAL
(
mask
,

1124 
po°fix_œ°_bô
);

1125 
	`MWI_ADVANCE_BIT
(
mask
)) {

1126 i‡(
mask
 & 
bôm≠_byã
) {

1127 *
d°
++ = 
fg_b
;

1128 *
d°
++ = 
fg_g
;

1129 *
d°
++ = 
fg_r
;

1131 *
d°
++ = 
bg_b
;

1132 *
d°
++ = 
bg_g
;

1133 *
d°
++ = 
bg_r
;

1138 
§c
 +
adv™˚_§c
;

1139 
d°
 +
adv™˚_d°
;

1142 
y
 = 0; y < 
gc
->
d°h
; y++) {

1145 i‡(
¥efix_fú°_bô
) {

1146 
bôm≠_byã
 = *
§c
++;

1147 
mask
 = 
¥efix_fú°_bô
; mask;

1148 
	`MWI_ADVANCE_BIT
(
mask
)) {

1149 i‡(
mask
 & 
bôm≠_byã
) {

1150 
d°
[0] = 
fg_b
;

1151 
d°
[1] = 
fg_g
;

1152 
d°
[2] = 
fg_r
;

1154 
d°
 += 3;

1159 
t
 = 
size_maö
;Å != 0;Å--) {

1160 
bôm≠_byã
 = *
§c
++;

1162 i‡(
	`MWI_BIT_NO
(0Ë& 
bôm≠_byã
) {

1163 
d°
[0 * 3 + 0] = 
fg_b
;

1164 
d°
[0 * 3 + 1] = 
fg_g
;

1165 
d°
[0 * 3 + 2] = 
fg_r
;

1167 i‡(
	`MWI_BIT_NO
(1Ë& 
bôm≠_byã
) {

1168 
d°
[1 * 3 + 0] = 
fg_b
;

1169 
d°
[1 * 3 + 1] = 
fg_g
;

1170 
d°
[1 * 3 + 2] = 
fg_r
;

1172 i‡(
	`MWI_BIT_NO
(2Ë& 
bôm≠_byã
) {

1173 
d°
[2 * 3 + 0] = 
fg_b
;

1174 
d°
[2 * 3 + 1] = 
fg_g
;

1175 
d°
[2 * 3 + 2] = 
fg_r
;

1177 i‡(
	`MWI_BIT_NO
(3Ë& 
bôm≠_byã
) {

1178 
d°
[3 * 3 + 0] = 
fg_b
;

1179 
d°
[3 * 3 + 1] = 
fg_g
;

1180 
d°
[3 * 3 + 2] = 
fg_r
;

1182 i‡(
	`MWI_BIT_NO
(4Ë& 
bôm≠_byã
) {

1183 
d°
[4 * 3 + 0] = 
fg_b
;

1184 
d°
[4 * 3 + 1] = 
fg_g
;

1185 
d°
[4 * 3 + 2] = 
fg_r
;

1187 i‡(
	`MWI_BIT_NO
(5Ë& 
bôm≠_byã
) {

1188 
d°
[5 * 3 + 0] = 
fg_b
;

1189 
d°
[5 * 3 + 1] = 
fg_g
;

1190 
d°
[5 * 3 + 2] = 
fg_r
;

1192 i‡(
	`MWI_BIT_NO
(6Ë& 
bôm≠_byã
) {

1193 
d°
[6 * 3 + 0] = 
fg_b
;

1194 
d°
[6 * 3 + 1] = 
fg_g
;

1195 
d°
[6 * 3 + 2] = 
fg_r
;

1197 i‡(
	`MWI_BIT_NO
(7Ë& 
bôm≠_byã
) {

1198 
d°
[7 * 3 + 0] = 
fg_b
;

1199 
d°
[7 * 3 + 1] = 
fg_g
;

1200 
d°
[7 * 3 + 2] = 
fg_r
;

1202 
d°
 += 8 * 3;

1206 i‡(
po°fix_œ°_bô
) {

1207 
bôm≠_byã
 = *
§c
++;

1208 
mask
 = 
po°fix_fú°_bô
;

1209 
	`MWI_IS_BIT_BEFORE_OR_EQUAL
(
mask
,

1210 
po°fix_œ°_bô
);

1211 
	`MWI_ADVANCE_BIT
(
mask
)) {

1212 i‡(
mask
 & 
bôm≠_byã
) {

1213 
d°
[0] = 
fg_b
;

1214 
d°
[1] = 
fg_g
;

1215 
d°
[2] = 
fg_r
;

1217 
d°
 += 3;

1221 
§c
 +
adv™˚_§c
;

1222 
d°
 +
adv™˚_d°
;

1226 
DRAWOFF
;

1228 #unde‡
MWI_IS_BIT_BEFORE_OR_EQUAL


1229 #unde‡
MWI_ADVANCE_BIT


1230 #unde‡
MWI_BIT_NO


1231 #unde‡
MWI_FIRST_BIT


1232 #unde‡
MWI_LAST_BIT


1233 
	}
}

1236 #i‡
MW_FEATURE_PSDOP_ALPHACOL


1238 
	$löór24_døw¨ó_Æphacﬁ
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
)

1240 
ADDR8
 
d°
;

1241 
ADDR8
 
Æpha
;

1242 
ps
, 
pd
;

1243 
as
;

1244 
p§
, 
psg
, 
psb
;

1245 
x
, 
y
;

1246 
§c_row_°ï
, 
d°_row_°ï
;

1248 
Æpha
 = ((
ADDR8
Ë
gc
->
misc
Ë+ gc->
§c_löñí
 * gc->
§cy
 + gc->
§cx
;

1249 
d°
 = ((
ADDR8
Ë
psd
->
addr
Ë+ (psd->
löñí
 * 
gc
->
d°y
 + gc->
d°x
) * 3;

1250 
ps
 = 
gc
->
fg_cﬁ‹
;

1251 
p§
 = 
	`PIXEL888RED
(
ps
);

1252 
psg
 = 
	`PIXEL888GREEN
(
ps
);

1253 
psb
 = 
	`PIXEL888BLUE
(
ps
);

1255 
§c_row_°ï
 = 
gc
->
§c_löñí
 - gc->
d°w
;

1256 
d°_row_°ï
 = (
psd
->
löñí
 - 
gc
->
d°w
) * 3;

1258 
DRAWON
;

1259 
y
 = 0; y < 
gc
->
d°h
; y++) {

1260 
x
 = 0; x < 
gc
->
d°w
; x++) {

1261 
as
 = *
Æpha
++;

1262 i‡(
as
 == 255) {

1263 *
d°
++ = 
psb
;

1264 *
d°
++ = 
psg
;

1265 *
d°
++ = 
p§
;

1266 } i‡(
as
 != 0) {

1271 
as
 += (as >> 7);

1273 
pd
 = *
d°
;

1274 *
d°
++ = (

1275 Ë((((
psb
 - 
pd
Ë* 
as
) >> 8) +

1276 
pd
);

1277 
pd
 = *
d°
;

1278 *
d°
++ = (

1279 Ë((((
psg
 - 
pd
Ë* 
as
) >> 8) +

1280 
pd
);

1281 
pd
 = *
d°
;

1282 *
d°
++ = (

1283 Ë((((
p§
 - 
pd
Ë* 
as
) >> 8) +

1284 
pd
);

1286 
d°
 += 3;

1289 
Æpha
 +
§c_row_°ï
;

1290 
d°
 +
d°_row_°ï
;

1292 
DRAWOFF
;

1293 
	}
}

1297 
	$löór24_døw¨ó
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
, 
›
)

1299 
	`as£π
(
psd
->
addr
 != 0);

1301 
	`as£π
(
gc
->
d°x
 >0 && gc->d°x + gc->
d°w
 <
psd
->
xªs
);

1304 
	`as£π
(
gc
->
§cy
 >= 0);

1307 
›
) {

1309 #i‡
MW_FEATURE_PSDOP_ALPHACOL


1310 
PSDOP_ALPHACOL
:

1311 
	`löór24_døw¨ó_Æphacﬁ
(
psd
, 
gc
);

1315 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_LSB_FIRST


1316 
PSDOP_BITMAP_BYTES_LSB_FIRST
:

1317 
	`löór24_døw¨ó_bôm≠_byãs_lsb_fú°
(
psd
, 
gc
);

1321 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_MSB_FIRST


1322 
PSDOP_BITMAP_BYTES_MSB_FIRST
:

1323 
	`löór24_døw¨ó_bôm≠_byãs_msb_fú°
(
psd
, 
gc
);

1328 
	}
}

1330 
SUBDRIVER
 
	gfblöór24
 = {

1331 
löór24_öô
,

1332 
löór24_døwpixñ
,

1333 
löór24_ªadpixñ
,

1334 
löór24_døwh‹zlöe
,

1335 
löór24_døwvîéöe
,

1336 
gí_fûÃe˘
,

1337 
löór24_blô
,

1338 
löór24_døw¨ó
,

1339 
löór24_°ªtchblô
,

1340 
löór24_°ªtchblôex
,

	@drivers/fblin2rev.c

10 
	~<as£π.h
>

11 
	~<°rög.h
>

12 
	~"devi˚.h
"

13 
	~"fb.h
"

15 
	gnŸmask
[4] = { 0xfc, 0xf3, 0xcf, 0x3f };

19 
	$löór2_öô
(
PSD
 
psd
)

21 i‡(!
psd
->
size
)

22 
psd
->
size
 =Ösd->
yªs
 *Ösd->
löñí
;

25 
	}
}

29 
	$löór2_døwpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

31 
ADDR8
 
addr
 = 
psd
->addr;

33 
	`as£π
 (
addr
 != 0);

34 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

35 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

36 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

38 
DRAWON
;

39 
addr
 +(
x
>>2Ë+ 
y
 * 
psd
->
löñí
;

40 if(
gr_mode
 =
MWMODE_XOR
)

41 *
addr
 ^
c
 << ((
x
&3)<<1);

43 *
addr
 = (*add∏& 
nŸmask
[
x
&3]Ë| (
c
 << ((x&3)<<1));

44 
DRAWOFF
;

45 
	}
}

48 
MWPIXELVAL


49 
	$löór2_ªadpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

51 
ADDR8
 
addr
 = 
psd
->addr;

53 
	`as£π
 (
addr
 != 0);

54 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

55 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

57  (
addr
[(
x
>>2Ë+ 
y
 * 
psd
->
löñí
] >> ((x&3)<<1) ) & 0x03;

58 
	}
}

62 
	$löór2_døwh‹zlöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

64 
ADDR8
 
addr
 = 
psd
->addr;

66 
	`as£π
 (
addr
 != 0);

67 
	`as£π
 (
x1
 >0 && x1 < 
psd
->
xªs
);

68 
	`as£π
 (
x2
 >0 && x2 < 
psd
->
xªs
);

69 
	`as£π
 (
x2
 >
x1
);

70 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

71 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

73 
DRAWON
;

74 
addr
 +(
x1
>>2Ë+ 
y
 * 
psd
->
löñí
;

75 if(
gr_mode
 =
MWMODE_XOR
) {

76 
x1
 <
x2
) {

77 *
addr
 ^
c
 << ((
x1
&3)<<1);

78 if((++
x1
 & 3) == 0)

79 ++
addr
;

82 
x1
 <
x2
) {

83 *
addr
 = (*add∏& 
nŸmask
[
x1
&3]Ë| (
c
 << ((x1&3)<<1));

84 if((++
x1
 & 3) == 0)

85 ++
addr
;

88 
DRAWOFF
;

89 
	}
}

93 
	$löór2_døwvîéöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

95 
ADDR8
 
addr
 = 
psd
->addr;

96 
löñí
 = 
psd
->linelen;

98 
	`as£π
 (
addr
 != 0);

99 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

100 
	`as£π
 (
y1
 >0 && y1 < 
psd
->
yªs
);

101 
	`as£π
 (
y2
 >0 && y2 < 
psd
->
yªs
);

102 
	`as£π
 (
y2
 >
y1
);

103 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

105 
DRAWON
;

106 
addr
 +(
x
>>2Ë+ 
y1
 * 
löñí
;

107 if(
gr_mode
 =
MWMODE_XOR
)

108 
y1
++ <
y2
) {

109 *
addr
 ^
c
 << ((
x
&3)<<1);

110 
addr
 +
löñí
;

113 
y1
++ <
y2
) {

114 *
addr
 = (*add∏& 
nŸmask
[
x
&3]Ë| (
c
 << ((x&3)<<1));

115 
addr
 +
löñí
;

117 
DRAWOFF
;

118 
	}
}

122 
	$löór2_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

123 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

125 
ADDR8
 
d°
;

126 
ADDR8
 
§c
;

127 
i
;

128 
dlöñí
 = 
d°psd
->
löñí
;

129 
¶öñí
 = 
§˝sd
->
löñí
;

131 
	`as£π
 (
d°psd
->
addr
 != 0);

132 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

133 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

134 
	`as£π
 (
w
 > 0);

135 
	`as£π
 (
h
 > 0);

136 
	`as£π
 (
§˝sd
->
addr
 != 0);

137 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

138 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

139 
	`as£π
 (
d°x
+
w
 <
d°psd
->
xªs
);

140 
	`as£π
 (
d°y
+
h
 <
d°psd
->
yªs
);

141 
	`as£π
 (
§cx
+
w
 <
§˝sd
->
xªs
);

142 
	`as£π
 (
§cy
+
h
 <
§˝sd
->
yªs
);

144 
DRAWON
;

145 
d°
 = 
d°psd
->
addr
 + (
d°x
>>2Ë+ 
d°y
 * 
dlöñí
;

146 
§c
 = 
§˝sd
->
addr
 + (
§cx
>>2Ë+ 
§cy
 * 
¶öñí
;

147 --
h
 >= 0) {

148 
ADDR8
 
d
 = 
d°
;

149 
ADDR8
 
s
 = 
§c
;

150 
MWCOORD
 
dx
 = 
d°x
;

151 
MWCOORD
 
sx
 = 
§cx
;

152 
i
=0; i<
w
; ++i) {

153 *
d
 = (*d & 
nŸmask
[
dx
&3]) |

154 ((*
s
 >> ((
sx
&3)<<1Ë& 0x03Ë<< ((
dx
&3)<<1));

155 if((++
dx
 & 3) == 0)

156 ++
d
;

157 if((++
sx
 & 3) == 0)

158 ++
s
;

160 
d°
 +
dlöñí
;

161 
§c
 +
¶öñí
;

163 
DRAWOFF
;

164 
	}
}

166 
SUBDRIVER
 
	gfblöór2
 = {

167 
löór2_öô
,

168 
löór2_døwpixñ
,

169 
löór2_ªadpixñ
,

170 
löór2_døwh‹zlöe
,

171 
löór2_døwvîéöe
,

172 
gí_fûÃe˘
,

173 
löór2_blô


	@drivers/fblin32.c

10 
	~<as£π.h
>

11 
	~<°rög.h
>

12 
	~"devi˚.h
"

13 
	~"fb.h
"

17 
	$löór32_öô
(
PSD
 
psd
)

19 i‡(!
psd
->
size
) {

20 
psd
->
size
 =Ösd->
yªs
 *Ösd->
löñí
;

22 
psd
->
löñí
 /= 4;

25 
	}
}

29 
	$löór32_døwpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

31 
ADDR32
 
addr
 = 
psd
->addr;

33 
	`as£π
 (
addr
 != 0);

34 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

35 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

36 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

38 
DRAWON
;

39 i‡(
gr_mode
 =
MWMODE_COPY
)

40 
addr
[
x
 + 
y
 * 
psd
->
löñí
] = 
c
;

42 
	`≠∂yOp
(
gr_mode
, 
c
, &
addr
[
x
 + 
y
 * 
psd
->
löñí
], 
ADDR32
);

43 
DRAWOFF
;

44 
	}
}

47 
MWPIXELVAL


48 
	$löór32_ªadpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

50 
ADDR32
 
addr
 = 
psd
->addr;

52 
	`as£π
 (
addr
 != 0);

53 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

54 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

56  
addr
[
x
 + 
y
 * 
psd
->
löñí
];

57 
	}
}

61 
	$löór32_døwh‹zlöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

63 
ADDR32
 
addr
 = 
psd
->addr;

65 
	`as£π
 (
addr
 != 0);

66 
	`as£π
 (
x1
 >0 && x1 < 
psd
->
xªs
);

67 
	`as£π
 (
x2
 >0 && x2 < 
psd
->
xªs
);

68 
	`as£π
 (
x2
 >
x1
);

69 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

70 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

72 
DRAWON
;

73 
addr
 +
x1
 + 
y
 * 
psd
->
löñí
;

74 if(
gr_mode
 =
MWMODE_COPY
) {

76 
x1
++ <
x2
)

77 *
addr
++ = 
c
;

79 
x1
++ <
x2
) {

80 
	`≠∂yOp
(
gr_mode
, 
c
, 
addr
, 
ADDR32
);

81 ++
addr
;

84 
DRAWOFF
;

85 
	}
}

89 
	$löór32_døwvîéöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

91 
ADDR32
 
addr
 = 
psd
->addr;

92 
löñí
 = 
psd
->linelen;

94 
	`as£π
 (
addr
 != 0);

95 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

96 
	`as£π
 (
y1
 >0 && y1 < 
psd
->
yªs
);

97 
	`as£π
 (
y2
 >0 && y2 < 
psd
->
yªs
);

98 
	`as£π
 (
y2
 >
y1
);

99 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

101 
DRAWON
;

102 
addr
 +
x
 + 
y1
 * 
löñí
;

103 if(
gr_mode
 =
MWMODE_COPY
) {

104 
y1
++ <
y2
) {

105 *
addr
 = 
c
;

106 
addr
 +
löñí
;

109 
y1
++ <
y2
) {

110 
	`≠∂yOp
(
gr_mode
, 
c
, 
addr
, 
ADDR32
);

111 
addr
 +
löñí
;

114 
DRAWOFF
;

115 
	}
}

119 
	$löór32_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

120 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

122 
ADDR8
 
d°8
, 
§c8
;

123 
ADDR32
 
d°
 = 
d°psd
->
addr
;

124 
ADDR32
 
§c
 = 
§˝sd
->
addr
;

125 
i
;

126 
dlöñí
 = 
d°psd
->
löñí
;

127 
¶öñí
 = 
§˝sd
->
löñí
;

128 
dlöñí_möus_w4
;

129 
¶öñí_möus_w4
;

130 #i‡
ALPHABLEND


131 
Æpha
;

134 
	`as£π
 (
d°
 != 0);

135 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

136 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

137 
	`as£π
 (
w
 > 0);

138 
	`as£π
 (
h
 > 0);

139 
	`as£π
 (
§c
 != 0);

140 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

141 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

142 
	`as£π
 (
d°x
+
w
 <
d°psd
->
xªs
);

143 
	`as£π
 (
d°y
+
h
 <
d°psd
->
yªs
);

144 
	`as£π
 (
§cx
+
w
 <
§˝sd
->
xªs
);

145 
	`as£π
 (
§cy
+
h
 <
§˝sd
->
yªs
);

147 
DRAWON
;

148 
d°
 +
d°x
 + 
d°y
 * 
dlöñí
;

149 
§c
 +
§cx
 + 
§cy
 * 
¶öñí
;

151 #i‡
ALPHABLEND


152 if((
›
 & 
MWROP_EXTENSION
Ë!
MWROP_BLENDCONSTANT
)

153 
°dblô
;

154 
Æpha
 = 
›
 & 0xff;

156 
§c8
 = (
ADDR8
)
§c
;

157 
d°8
 = (
ADDR8
)
d°
;

158 
dlöñí_möus_w4
 = (
dlöñí
 - 
w
) * 4;

159 
¶öñí_möus_w4
 = (
¶öñí
 - 
w
) * 4;

160 --
h
 >= 0) {

161 
i
=0; i<
w
; ++i) {

166 
s
 = *
§c8
++;

167 
d
 = *
d°8
;

168 *
d°8
++ = ()(((
s
 - 
d
)*
Æpha
)>>8) + d;

169 
s
 = *
§c8
++;

170 
d
 = *
d°8
;

171 *
d°8
++ = ()(((
s
 - 
d
)*
Æpha
)>>8) + d;

172 
s
 = *
§c8
;

173 
d
 = *
d°8
;

174 *
d°8
 = ()(((
s
 - 
d
)*
Æpha
)>>8) + d;

175 
d°8
 += 2;

176 
§c8
 += 2;

178 
d°8
 +
dlöñí_möus_w4
;

179 
§c8
 +
¶öñí_möus_w4
;

181 
DRAWOFF
;

183 
°dblô
:

186 i‡(
›
 =
MWROP_COPY
) {

189 i‡(
§cy
 < 
d°y
) {

190 
§c
 +(
h
-1Ë* 
¶öñí
;

191 
d°
 +(
h
-1Ë* 
dlöñí
;

192 
¶öñí
 *= -1;

193 
dlöñí
 *= -1;

195 --
h
 >= 0) {

197 
	`memmove
(
d°
, 
§c
, 
w
<<2);

198 
d°
 +
dlöñí
;

199 
§c
 +
¶öñí
;

202 
i
=0; i < 
w
; ++i) {

203 
	`≠∂yOp
(
	`MWROP_TO_MODE
(
›
), *
§c
, 
d°
, 
ADDR32
);

204 ++
§c
;

205 ++
d°
;

207 
d°
 +
dlöñí
 - 
w
;

208 
§c
 +
¶öñí
 - 
w
;

210 
DRAWOFF
;

211 
	}
}

215 
	$löór32_°ªtchblô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
d°w
,

216 
MWCOORD
 
d°h
, 
PSD
 
§˝sd
, MWCOORD 
§cx
, MWCOORD 
§cy
, MWCOORD 
§cw
,

217 
MWCOORD
 
§ch
, 
›
)

219 
ADDR32
 
d°
;

220 
ADDR32
 
§c
;

221 
dlöñí
 = 
d°psd
->
löñí
;

222 
¶öñí
 = 
§˝sd
->
löñí
;

223 
i
, 
ymax
;

224 
row_pos
, 
row_öc
;

225 
cﬁ_pos
, 
cﬁ_öc
;

226 
pixñ
 = 0;

228 
	`as£π
 (
d°psd
->
addr
 != 0);

229 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

230 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

231 
	`as£π
 (
d°w
 > 0);

232 
	`as£π
 (
d°h
 > 0);

233 
	`as£π
 (
§˝sd
->
addr
 != 0);

234 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

235 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

236 
	`as£π
 (
§cw
 > 0);

237 
	`as£π
 (
§ch
 > 0);

238 
	`as£π
 (
d°x
+
d°w
 <
d°psd
->
xªs
);

239 
	`as£π
 (
d°y
+
d°h
 <
d°psd
->
yªs
);

240 
	`as£π
 (
§cx
+
§cw
 <
§˝sd
->
xªs
);

241 
	`as£π
 (
§cy
+
§ch
 <
§˝sd
->
yªs
);

243 
DRAWON
;

244 
row_pos
 = 0x10000;

245 
row_öc
 = (
§ch
 << 16Ë/ 
d°h
;

248 
ymax
 = 
d°y
+
d°h
; dsty<ymax; ++dsty) {

251 
row_pos
 >= 0x10000L) {

252 ++
§cy
;

253 
row_pos
 -= 0x10000L;

256 
d°
 = (
ADDR32
)
d°psd
->
addr
 + 
d°x
 + 
d°y
*
dlöñí
;

257 
§c
 = (
ADDR32
)
§˝sd
->
addr
 + 
§cx
 + (
§cy
-1)*
¶öñí
;

260 
cﬁ_pos
 = 0x10000;

261 
cﬁ_öc
 = (
§cw
 << 16Ë/ 
d°w
;

262 
i
=0; i<
d°w
; ++i) {

264 
cﬁ_pos
 >= 0x10000L) {

265 
pixñ
 = *
§c
++;

266 
cﬁ_pos
 -= 0x10000L;

268 *
d°
++ = 
pixñ
;

269 
cﬁ_pos
 +
cﬁ_öc
;

272 
row_pos
 +
row_öc
;

274 
DRAWOFF
;

275 
	}
}

289 #i‚de‡
RESTRICT


290 
	#RESTRICT


	)

292 #i‚de‡
SIGN


293 
	#SIGN
(
x
Ë(((xË> 0Ë? 1 : (((xË=0Ë? 0 : -1))

	)

295 #i‚de‡
ABS


296 
	#ABS
(
x
Ë(((xË>0Ë? (xË: -(x))

	)

332 
	$löór32_°ªtchblôex
(
PSD
 
d°psd
,

333 
PSD
 
§˝sd
,

334 
MWCOORD
 
de°_x_°¨t
,

335 
MWCOORD
 
de°_y_°¨t
,

336 
MWCOORD
 
width
,

337 
MWCOORD
 
height
,

338 
x_díomö©‹
,

339 
y_díomö©‹
,

340 
§c_x_‰a˘i⁄
,

341 
§c_y_‰a˘i⁄
,

342 
x_°ï_‰a˘i⁄
,

343 
y_°ï_‰a˘i⁄
,

344 
›
)

347 *
RESTRICT
 
§c_±r
;

350 *
RESTRICT
 
√xt_§c_±r
;

353 *
RESTRICT
 
de°_±r
;

356 *
√xt_de°_±r
;

359 
x_îr‹
;

360 
y_îr‹
;

365 
§c_x_°ï_⁄e
;

366 
§c_y_°ï_⁄e
;

371 
§c_x_°ï_n‹mÆ
;

372 
§c_y_°ï_n‹mÆ
;

377 
x_îr‹_°ï_n‹mÆ
;

378 
y_îr‹_°ï_n‹mÆ
;

381 
x_cou¡
;

382 
y_cou¡
;

385 
§c_x_°¨t
;

386 
§c_y_°¨t
;

389 
x_îr‹_°¨t
;

392 
de°_y_°ï
;

400 
§c_x_‰a˘i⁄
 +(
x_°ï_‰a˘i⁄
 >> 1);

401 
§c_y_‰a˘i⁄
 +(
y_°ï_‰a˘i⁄
 >> 1);

409 
§c_x_°¨t
 = 
§c_x_‰a˘i⁄
 / 
x_díomö©‹
;

410 
§c_y_°¨t
 = 
§c_y_‰a˘i⁄
 / 
y_díomö©‹
;

411 
x_îr‹_°¨t
 = 
§c_x_‰a˘i⁄
 - (
§c_x_°¨t
 + 1Ë* 
x_díomö©‹
;

412 
y_îr‹
 = 
§c_y_‰a˘i⁄
 - (
§c_y_°¨t
 + 1Ë* 
y_díomö©‹
;

416 
§c_x_°ï_n‹mÆ
 = 
x_°ï_‰a˘i⁄
 / 
x_díomö©‹
;

417 
§c_x_°ï_⁄e
 = 
	`SIGN
(
x_°ï_‰a˘i⁄
);

418 
x_îr‹_°ï_n‹mÆ
 =

419 
	`ABS
(
x_°ï_‰a˘i⁄
Ë- ABS(
§c_x_°ï_n‹mÆ
Ë* 
x_díomö©‹
;

421 
§c_y_°ï_n‹mÆ
 = 
y_°ï_‰a˘i⁄
 / 
y_díomö©‹
;

422 
§c_y_°ï_⁄e
 = 
	`SIGN
(
y_°ï_‰a˘i⁄
Ë* 
§˝sd
->
löñí
;

423 
y_îr‹_°ï_n‹mÆ
 =

424 
	`ABS
(
y_°ï_‰a˘i⁄
Ë- ABS(
§c_y_°ï_n‹mÆ
Ë* 
y_díomö©‹
;

425 
§c_y_°ï_n‹mÆ
 *
§˝sd
->
löñí
;

433 
√xt_§c_±r
 =

434 ((*Ë
§˝sd
->
addr
) +

435 
§c_y_°¨t
 * 
§˝sd
->
löñí
 + 
§c_x_°¨t
;

438 
de°_y_°ï
 = 
d°psd
->
löñí
;

441 
√xt_de°_±r
 =

442 ((*Ë
d°psd
->
addr
) +

443 (
de°_y_°¨t
 * 
de°_y_°ï
Ë+ 
de°_x_°¨t
;

453 
›
 & 
MWROP_EXTENSION
) {

454 
MWROP_SRC
:

458 
y_cou¡
 = 
height
;

459 
y_cou¡
-- > 0) {

460 
§c_±r
 = 
√xt_§c_±r
;

461 
de°_±r
 = 
√xt_de°_±r
;

463 
x_îr‹
 = 
x_îr‹_°¨t
;

465 
x_cou¡
 = 
width
;

466 
x_cou¡
-- > 0) {

467 *
de°_±r
++ = *
§c_±r
;

469 
§c_±r
 +
§c_x_°ï_n‹mÆ
;

470 
x_îr‹
 +
x_îr‹_°ï_n‹mÆ
;

472 i‡(
x_îr‹
 >= 0) {

473 
§c_±r
 +
§c_x_°ï_⁄e
;

474 
x_îr‹
 -
x_díomö©‹
;

478 
√xt_de°_±r
 +
de°_y_°ï
;

480 
√xt_§c_±r
 +
§c_y_°ï_n‹mÆ
;

481 
y_îr‹
 +
y_îr‹_°ï_n‹mÆ
;

483 i‡(
y_îr‹
 >= 0) {

484 
√xt_§c_±r
 +
§c_y_°ï_⁄e
;

485 
y_îr‹
 -
y_díomö©‹
;

490 
MWROP_CLEAR
:

491 
y_cou¡
 = 
height
;

492 
y_cou¡
-- > 0) {

493 
de°_±r
 = 
√xt_de°_±r
;

494 
x_cou¡
 = 
width
;

495 
x_cou¡
-- > 0) {

496 *
de°_±r
++ = 0;

498 
√xt_de°_±r
 +
de°_y_°ï
;

503 
y_cou¡
 = 
height
;

504 
y_cou¡
-- > 0) {

505 
§c_±r
 = 
√xt_§c_±r
;

506 
de°_±r
 = 
√xt_de°_±r
;

508 
x_îr‹
 = 
x_îr‹_°¨t
;

510 
x_cou¡
 = 
width
;

511 
x_cou¡
-- > 0) {

512 
	`≠∂yOp
(
	`MWROP_TO_MODE
(
›
), *
§c_±r
, 
de°_±r
, 
ADDR32
);

513 
de°_±r
++;

515 
§c_±r
 +
§c_x_°ï_n‹mÆ
;

516 
x_îr‹
 +
x_îr‹_°ï_n‹mÆ
;

518 i‡(
x_îr‹
 >= 0) {

519 
§c_±r
 +
§c_x_°ï_⁄e
;

520 
x_îr‹
 -
x_díomö©‹
;

524 
√xt_de°_±r
 +
de°_y_°ï
;

526 
√xt_§c_±r
 +
§c_y_°ï_n‹mÆ
;

527 
y_îr‹
 +
y_îr‹_°ï_n‹mÆ
;

529 i‡(
y_îr‹
 >= 0) {

530 
√xt_§c_±r
 +
§c_y_°ï_⁄e
;

531 
y_îr‹
 -
y_díomö©‹
;

537 
	}
}

539 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_LSB_FIRST


562 
	$löór32_døw¨ó_bôm≠_byãs_lsb_fú°
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
)

576 
	#MWI_IS_BIT_BEFORE_OR_EQUAL
(
a
,
b
Ë(◊Ë<(b))

	)

577 
	#MWI_ADVANCE_BIT
(
èrgë
Ë(—¨gëË<<1)

	)

578 
	#MWI_BIT_NO
(
n
Ë(0x01 << (n))

	)

584 
	#MWI_FIRST_BIT
 
	`MWI_BIT_NO
(0)

	)

585 
	#MWI_LAST_BIT
 
	`MWI_BIT_NO
(7)

	)

587 
¥efix_fú°_bô
;

588 
po°fix_fú°_bô
 = 
MWI_FIRST_BIT
;

589 
po°fix_œ°_bô
;

590 
bôm≠_byã
;

591 
mask
;

592 
fg
, 
bg
;

593 
fú°_byã
, 
œ°_byã
;

594 
size_maö
;

595 
t
, 
y
;

596 
adv™˚_§c
, 
adv™˚_d°
;

597 
ADDR8
 
§c
;

598 
ADDR32
 
d°
;

601 
¥efix_fú°_bô
 = 
	`MWI_BIT_NO
(
gc
->
§cx
 & 7);

604 
po°fix_œ°_bô
 = 
	`MWI_BIT_NO
((
gc
->
§cx
 + gc->
d°w
 - 1) & 7);

607 
fú°_byã
 = 
gc
->
§cx
 >> 3;

610 
œ°_byã
 = (
gc
->
§cx
 + gc->
d°w
 - 1) >> 3;

612 
§c
 = ((
ADDR8
Ë
gc
->
pixñs
Ë+ gc->
§c_löñí
 * gc->
§cy
 + 
fú°_byã
;

613 
d°
 = ((
ADDR32
Ë
psd
->
addr
Ë+Ösd->
löñí
 * 
gc
->
d°y
 + gc->
d°x
;

614 
fg
 = 
gc
->
fg_cﬁ‹
;

615 
bg
 = 
gc
->
bg_cﬁ‹
;

617 
adv™˚_§c
 = 
gc
->
§c_löñí
 - 
œ°_byã
 + 
fú°_byã
 - 1;

618 
adv™˚_d°
 = 
psd
->
löñí
 - 
gc
->
d°w
;

620 i‡(
fú°_byã
 !
œ°_byã
) {

624 
size_maö
 = 
œ°_byã
 - 
fú°_byã
 + 1 - 2;

626 i‡(
¥efix_fú°_bô
 =
MWI_FIRST_BIT
) {

628 
¥efix_fú°_bô
 = 0;

629 
size_maö
++;

631 i‡(
po°fix_œ°_bô
 =
MWI_LAST_BIT
) {

633 
po°fix_œ°_bô
 = 0;

634 
size_maö
++;

636 } i‡((
¥efix_fú°_bô
 =
MWI_FIRST_BIT
)

637 && (
po°fix_œ°_bô
 =
MWI_LAST_BIT
)) {

639 
¥efix_fú°_bô
 = 0;

640 
po°fix_œ°_bô
 = 0;

641 
size_maö
 = 1;

645 
po°fix_fú°_bô
 = 
¥efix_fú°_bô
;

646 
¥efix_fú°_bô
 = 0;

647 
size_maö
 = 0;

650 
DRAWON
;

652 i‡(
gc
->
gr_u£bg
) {

653 
y
 = 0; y < 
gc
->
d°h
; y++) {

656 i‡(
¥efix_fú°_bô
) {

657 
bôm≠_byã
 = *
§c
++;

658 
mask
 = 
¥efix_fú°_bô
; mask;

659 
	`MWI_ADVANCE_BIT
(
mask
)) {

660 *
d°
++ = (
mask
 & 
bôm≠_byã
Ë? 
fg
 :

661 
bg
;

666 
t
 = 
size_maö
;Å != 0;Å--) {

667 
bôm≠_byã
 = *
§c
++;

669 *
d°
++ = (
	`MWI_BIT_NO
(0Ë& 
bôm≠_byã
Ë? 
fg
 :

670 
bg
;

671 *
d°
++ = (
	`MWI_BIT_NO
(1Ë& 
bôm≠_byã
Ë? 
fg
 :

672 
bg
;

673 *
d°
++ = (
	`MWI_BIT_NO
(2Ë& 
bôm≠_byã
Ë? 
fg
 :

674 
bg
;

675 *
d°
++ = (
	`MWI_BIT_NO
(3Ë& 
bôm≠_byã
Ë? 
fg
 :

676 
bg
;

677 *
d°
++ = (
	`MWI_BIT_NO
(4Ë& 
bôm≠_byã
Ë? 
fg
 :

678 
bg
;

679 *
d°
++ = (
	`MWI_BIT_NO
(5Ë& 
bôm≠_byã
Ë? 
fg
 :

680 
bg
;

681 *
d°
++ = (
	`MWI_BIT_NO
(6Ë& 
bôm≠_byã
Ë? 
fg
 :

682 
bg
;

683 *
d°
++ = (
	`MWI_BIT_NO
(7Ë& 
bôm≠_byã
Ë? 
fg
 :

684 
bg
;

688 i‡(
po°fix_œ°_bô
) {

689 
bôm≠_byã
 = *
§c
++;

690 
mask
 = 
po°fix_fú°_bô
;

691 
	`MWI_IS_BIT_BEFORE_OR_EQUAL
(
mask
,

692 
po°fix_œ°_bô
);

693 
	`MWI_ADVANCE_BIT
(
mask
)) {

694 *
d°
++ = (
mask
 & 
bôm≠_byã
Ë? 
fg
 :

695 
bg
;

699 
§c
 +
adv™˚_§c
;

700 
d°
 +
adv™˚_d°
;

703 
y
 = 0; y < 
gc
->
d°h
; y++) {

706 i‡(
¥efix_fú°_bô
) {

707 
bôm≠_byã
 = *
§c
++;

708 
mask
 = 
¥efix_fú°_bô
; mask;

709 
	`MWI_ADVANCE_BIT
(
mask
)) {

710 i‡(
mask
 & 
bôm≠_byã
)

711 *
d°
 = 
fg
;

712 
d°
++;

717 
t
 = 
size_maö
;Å != 0;Å--) {

718 
bôm≠_byã
 = *
§c
++;

720 i‡(
	`MWI_BIT_NO
(0Ë& 
bôm≠_byã
)

721 
d°
[0] = 
fg
;

722 i‡(
	`MWI_BIT_NO
(1Ë& 
bôm≠_byã
)

723 
d°
[1] = 
fg
;

724 i‡(
	`MWI_BIT_NO
(2Ë& 
bôm≠_byã
)

725 
d°
[2] = 
fg
;

726 i‡(
	`MWI_BIT_NO
(3Ë& 
bôm≠_byã
)

727 
d°
[3] = 
fg
;

728 i‡(
	`MWI_BIT_NO
(4Ë& 
bôm≠_byã
)

729 
d°
[4] = 
fg
;

730 i‡(
	`MWI_BIT_NO
(5Ë& 
bôm≠_byã
)

731 
d°
[5] = 
fg
;

732 i‡(
	`MWI_BIT_NO
(6Ë& 
bôm≠_byã
)

733 
d°
[6] = 
fg
;

734 i‡(
	`MWI_BIT_NO
(7Ë& 
bôm≠_byã
)

735 
d°
[7] = 
fg
;

737 
d°
 += 8;

741 i‡(
po°fix_œ°_bô
) {

742 
bôm≠_byã
 = *
§c
++;

743 
mask
 = 
po°fix_fú°_bô
;

744 
	`MWI_IS_BIT_BEFORE_OR_EQUAL
(
mask
,

745 
po°fix_œ°_bô
);

746 
	`MWI_ADVANCE_BIT
(
mask
)) {

747 i‡(
mask
 & 
bôm≠_byã
)

748 *
d°
 = 
fg
;

749 
d°
++;

753 
§c
 +
adv™˚_§c
;

754 
d°
 +
adv™˚_d°
;

758 
DRAWOFF
;

760 #unde‡
MWI_IS_BIT_BEFORE_OR_EQUAL


761 #unde‡
MWI_ADVANCE_BIT


762 #unde‡
MWI_BIT_NO


763 #unde‡
MWI_FIRST_BIT


764 #unde‡
MWI_LAST_BIT


765 
	}
}

769 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_MSB_FIRST


789 
	$löór32_døw¨ó_bôm≠_byãs_msb_fú°
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
)

803 
	#MWI_IS_BIT_BEFORE_OR_EQUAL
(
a
,
b
Ë(◊Ë>(b))

	)

804 
	#MWI_ADVANCE_BIT
(
èrgë
Ë(—¨gëË>>1)

	)

805 
	#MWI_BIT_NO
(
n
Ë(0x80 >> (n))

	)

811 
	#MWI_FIRST_BIT
 
	`MWI_BIT_NO
(0)

	)

812 
	#MWI_LAST_BIT
 
	`MWI_BIT_NO
(7)

	)

814 
¥efix_fú°_bô
;

815 
po°fix_fú°_bô
 = 
MWI_FIRST_BIT
;

816 
po°fix_œ°_bô
;

817 
bôm≠_byã
;

818 
mask
;

819 
fg
, 
bg
;

820 
fú°_byã
, 
œ°_byã
;

821 
size_maö
;

822 
t
, 
y
;

823 
adv™˚_§c
, 
adv™˚_d°
;

824 
ADDR8
 
§c
;

825 
ADDR32
 
d°
;

828 
¥efix_fú°_bô
 = 
	`MWI_BIT_NO
(
gc
->
§cx
 & 7);

831 
po°fix_œ°_bô
 = 
	`MWI_BIT_NO
((
gc
->
§cx
 + gc->
d°w
 - 1) & 7);

834 
fú°_byã
 = 
gc
->
§cx
 >> 3;

837 
œ°_byã
 = (
gc
->
§cx
 + gc->
d°w
 - 1) >> 3;

839 
§c
 = ((
ADDR8
Ë
gc
->
pixñs
Ë+ gc->
§c_löñí
 * gc->
§cy
 + 
fú°_byã
;

840 
d°
 = ((
ADDR32
Ë
psd
->
addr
Ë+Ösd->
löñí
 * 
gc
->
d°y
 + gc->
d°x
;

841 
fg
 = 
gc
->
fg_cﬁ‹
;

842 
bg
 = 
gc
->
bg_cﬁ‹
;

844 
adv™˚_§c
 = 
gc
->
§c_löñí
 - 
œ°_byã
 + 
fú°_byã
 - 1;

845 
adv™˚_d°
 = 
psd
->
löñí
 - 
gc
->
d°w
;

847 i‡(
fú°_byã
 !
œ°_byã
) {

851 
size_maö
 = 
œ°_byã
 - 
fú°_byã
 + 1 - 2;

853 i‡(
¥efix_fú°_bô
 =
MWI_FIRST_BIT
) {

855 
¥efix_fú°_bô
 = 0;

856 
size_maö
++;

858 i‡(
po°fix_œ°_bô
 =
MWI_LAST_BIT
) {

860 
po°fix_œ°_bô
 = 0;

861 
size_maö
++;

863 } i‡((
¥efix_fú°_bô
 =
MWI_FIRST_BIT
)

864 && (
po°fix_œ°_bô
 =
MWI_LAST_BIT
)) {

866 
¥efix_fú°_bô
 = 0;

867 
po°fix_œ°_bô
 = 0;

868 
size_maö
 = 1;

872 
po°fix_fú°_bô
 = 
¥efix_fú°_bô
;

873 
¥efix_fú°_bô
 = 0;

874 
size_maö
 = 0;

877 
DRAWON
;

879 i‡(
gc
->
gr_u£bg
) {

880 
y
 = 0; y < 
gc
->
d°h
; y++) {

883 i‡(
¥efix_fú°_bô
) {

884 
bôm≠_byã
 = *
§c
++;

885 
mask
 = 
¥efix_fú°_bô
; mask;

886 
	`MWI_ADVANCE_BIT
(
mask
)) {

887 *
d°
++ = (
mask
 & 
bôm≠_byã
Ë? 
fg
 :

888 
bg
;

893 
t
 = 
size_maö
;Å != 0;Å--) {

894 
bôm≠_byã
 = *
§c
++;

896 *
d°
++ = (
	`MWI_BIT_NO
(0Ë& 
bôm≠_byã
Ë? 
fg
 :

897 
bg
;

898 *
d°
++ = (
	`MWI_BIT_NO
(1Ë& 
bôm≠_byã
Ë? 
fg
 :

899 
bg
;

900 *
d°
++ = (
	`MWI_BIT_NO
(2Ë& 
bôm≠_byã
Ë? 
fg
 :

901 
bg
;

902 *
d°
++ = (
	`MWI_BIT_NO
(3Ë& 
bôm≠_byã
Ë? 
fg
 :

903 
bg
;

904 *
d°
++ = (
	`MWI_BIT_NO
(4Ë& 
bôm≠_byã
Ë? 
fg
 :

905 
bg
;

906 *
d°
++ = (
	`MWI_BIT_NO
(5Ë& 
bôm≠_byã
Ë? 
fg
 :

907 
bg
;

908 *
d°
++ = (
	`MWI_BIT_NO
(6Ë& 
bôm≠_byã
Ë? 
fg
 :

909 
bg
;

910 *
d°
++ = (
	`MWI_BIT_NO
(7Ë& 
bôm≠_byã
Ë? 
fg
 :

911 
bg
;

915 i‡(
po°fix_œ°_bô
) {

916 
bôm≠_byã
 = *
§c
++;

917 
mask
 = 
po°fix_fú°_bô
;

918 
	`MWI_IS_BIT_BEFORE_OR_EQUAL
(
mask
,

919 
po°fix_œ°_bô
);

920 
	`MWI_ADVANCE_BIT
(
mask
)) {

921 *
d°
++ = (
mask
 & 
bôm≠_byã
Ë? 
fg
 :

922 
bg
;

926 
§c
 +
adv™˚_§c
;

927 
d°
 +
adv™˚_d°
;

930 
y
 = 0; y < 
gc
->
d°h
; y++) {

933 i‡(
¥efix_fú°_bô
) {

934 
bôm≠_byã
 = *
§c
++;

935 
mask
 = 
¥efix_fú°_bô
; mask;

936 
	`MWI_ADVANCE_BIT
(
mask
)) {

937 i‡(
mask
 & 
bôm≠_byã
)

938 *
d°
 = 
fg
;

939 
d°
++;

944 
t
 = 
size_maö
;Å != 0;Å--) {

945 
bôm≠_byã
 = *
§c
++;

947 i‡(
	`MWI_BIT_NO
(0Ë& 
bôm≠_byã
)

948 
d°
[0] = 
fg
;

949 i‡(
	`MWI_BIT_NO
(1Ë& 
bôm≠_byã
)

950 
d°
[1] = 
fg
;

951 i‡(
	`MWI_BIT_NO
(2Ë& 
bôm≠_byã
)

952 
d°
[2] = 
fg
;

953 i‡(
	`MWI_BIT_NO
(3Ë& 
bôm≠_byã
)

954 
d°
[3] = 
fg
;

955 i‡(
	`MWI_BIT_NO
(4Ë& 
bôm≠_byã
)

956 
d°
[4] = 
fg
;

957 i‡(
	`MWI_BIT_NO
(5Ë& 
bôm≠_byã
)

958 
d°
[5] = 
fg
;

959 i‡(
	`MWI_BIT_NO
(6Ë& 
bôm≠_byã
)

960 
d°
[6] = 
fg
;

961 i‡(
	`MWI_BIT_NO
(7Ë& 
bôm≠_byã
)

962 
d°
[7] = 
fg
;

964 
d°
 += 8;

968 i‡(
po°fix_œ°_bô
) {

969 
bôm≠_byã
 = *
§c
++;

970 
mask
 = 
po°fix_fú°_bô
;

971 
	`MWI_IS_BIT_BEFORE_OR_EQUAL
(
mask
,

972 
po°fix_œ°_bô
);

973 
	`MWI_ADVANCE_BIT
(
mask
)) {

974 i‡(
mask
 & 
bôm≠_byã
)

975 *
d°
 = 
fg
;

976 
d°
++;

980 
§c
 +
adv™˚_§c
;

981 
d°
 +
adv™˚_d°
;

985 
DRAWOFF
;

987 #unde‡
MWI_IS_BIT_BEFORE_OR_EQUAL


988 #unde‡
MWI_ADVANCE_BIT


989 #unde‡
MWI_BIT_NO


990 #unde‡
MWI_FIRST_BIT


991 #unde‡
MWI_LAST_BIT


992 
	}
}

996 #i‡
MW_FEATURE_PSDOP_ALPHACOL


998 
	$löór32_døw¨ó_Æphacﬁ
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
)

1000 
ADDR32
 
d°
;

1001 
ADDR8
 
Æpha
;

1002 
ps
, 
pd
;

1003 
as
;

1004 
p§
, 
psg
, 
psb
;

1005 
x
, 
y
;

1006 
§c_row_°ï
, 
d°_row_°ï
;

1008 
Æpha
 = ((
ADDR8
Ë
gc
->
misc
Ë+ gc->
§c_löñí
 * gc->
§cy
 + gc->
§cx
;

1009 
d°
 = ((
ADDR32
Ë
psd
->
addr
Ë+Ösd->
löñí
 * 
gc
->
d°y
 + gc->
d°x
;

1010 
ps
 = 
gc
->
fg_cﬁ‹
;

1011 
p§
 = (Ë(
ps
 & 0x00FF0000UL);

1012 
psg
 = (Ë(
ps
 & 0x0000FF00UL);

1013 
psb
 = (Ë(
ps
 & 0x000000FFUL);

1015 
§c_row_°ï
 = 
gc
->
§c_löñí
 - gc->
d°w
;

1016 
d°_row_°ï
 = 
psd
->
löñí
 - 
gc
->
d°w
;

1018 
DRAWON
;

1019 
y
 = 0; y < 
gc
->
d°h
; y++) {

1020 
x
 = 0; x < 
gc
->
d°w
; x++) {

1021 
as
 = *
Æpha
++;

1022 i‡(
as
 == 255) {

1023 *
d°
++ = 
ps
;

1024 } i‡(
as
 != 0) {

1036 
as
 = 256 - (as + (as >> 7));

1037 
pd
 = *
d°
;

1039 *
d°
++ = ((

1041 (
pd
 & 0x00FF0000UL) -

1042 
p§
Ë* 
as
) >> 8) +

1043 
p§
) & 0x00FF0000UL)

1046 Ë(((((Ë(
pd
 & 0x0000FF00UL)

1047 - 
psg
Ë* 
as
) >> 8) +

1048 
psg
) & 0x0000FF00UL)

1051 Ë(((((Ë(
pd
 & 0x000000FFUL)

1052 - 
psb
Ë* 
as
) >> 8) +

1053 
psb
) & 0x000000FFUL);

1055 
d°
++;

1058 
Æpha
 +
§c_row_°ï
;

1059 
d°
 +
d°_row_°ï
;

1061 
DRAWOFF
;

1062 
	}
}

1066 
	$löór32_døw¨ó
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
, 
›
)

1068 
	`as£π
(
psd
->
addr
 != 0);

1070 
	`as£π
(
gc
->
d°x
 >0 && gc->d°x + gc->
d°w
 <
psd
->
xªs
);

1073 
	`as£π
(
gc
->
§cy
 >= 0);

1076 
›
) {

1078 #i‡
MW_FEATURE_PSDOP_ALPHACOL


1079 
PSDOP_ALPHACOL
:

1080 
	`löór32_døw¨ó_Æphacﬁ
(
psd
, 
gc
);

1084 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_LSB_FIRST


1085 
PSDOP_BITMAP_BYTES_LSB_FIRST
:

1086 
	`löór32_døw¨ó_bôm≠_byãs_lsb_fú°
(
psd
, 
gc
);

1090 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_MSB_FIRST


1091 
PSDOP_BITMAP_BYTES_MSB_FIRST
:

1092 
	`löór32_døw¨ó_bôm≠_byãs_msb_fú°
(
psd
, 
gc
);

1097 
	}
}

1099 
SUBDRIVER
 
	gfblöór32
 = {

1100 
löór32_öô
,

1101 
löór32_døwpixñ
,

1102 
löór32_ªadpixñ
,

1103 
löór32_døwh‹zlöe
,

1104 
löór32_døwvîéöe
,

1105 
gí_fûÃe˘
,

1106 
löór32_blô
,

1107 
löór32_døw¨ó
,

1108 
löór32_°ªtchblô
,

1109 
löór32_°ªtchblôex
,

	@drivers/fblin32alpha.c

18 
	~<as£π.h
>

19 
	~<°rög.h
>

20 
	~"devi˚.h
"

21 
	~"fb.h
"

23 
	tMW_U32
;

24 
	tMW_S32
;

34 #i‡
PSP


35 
	#MWI_BYTE_OFFSET_ALPHA
 3

	)

36 
	#MWI_BYTE_OFFSET_R
 0

	)

37 
	#MWI_BYTE_OFFSET_G
 1

	)

38 
	#MWI_BYTE_OFFSET_B
 2

	)

39 
	#COLOR2PIXEL
 
COLOR2PIXELABGR


	)

41 
	#COLOR2PIXEL
 
COLOR2PIXEL8888


	)

43 #i‡
MW_CPU_BIG_ENDIAN


44 
	#MWI_BYTE_OFFSET_ALPHA
 0

	)

45 
	#MWI_BYTE_OFFSET_R
 1

	)

46 
	#MWI_BYTE_OFFSET_G
 2

	)

47 
	#MWI_BYTE_OFFSET_B
 3

	)

49 
	#MWI_BYTE_OFFSET_ALPHA
 3

	)

50 
	#MWI_BYTE_OFFSET_R
 2

	)

51 
	#MWI_BYTE_OFFSET_G
 1

	)

52 
	#MWI_BYTE_OFFSET_B
 0

	)

59 
	$löór32a_öô
(
PSD
 
psd
)

61 #i‚de‡
NDEBUG


69 
ídün_check
 = 
	`COLOR2PIXEL
(
	`MWARGB
(1, 2, 3, 4));

70 
	`as£π
(((*Ë(&
ídün_check
))[
MWI_BYTE_OFFSET_ALPHA
] == 1);

71 
	`as£π
(((*Ë(&
ídün_check
))[
MWI_BYTE_OFFSET_R
] == 2);

72 
	`as£π
(((*Ë(&
ídün_check
))[
MWI_BYTE_OFFSET_G
] == 3);

73 
	`as£π
(((*Ë(&
ídün_check
))[
MWI_BYTE_OFFSET_B
] == 4);

76 i‡(!
psd
->
size
) {

77 
psd
->
size
 =Ösd->
yªs
 *Ösd->
löñí
;

79 
psd
->
löñí
 /= 4;

82 
	}
}

102 
	$löór32a_døwpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

104 
ADDR32
 
addr
 = 
psd
->addr;

106 
	`as£π
(
addr
 != 0);

107 
	`as£π
(
x
 >0 && x < 
psd
->
xªs
);

108 
	`as£π
(
y
 >0 && y < 
psd
->
yªs
);

110 
addr
 +
x
 + 
y
 * 
psd
->
löñí
;

112 
DRAWON
;

113 i‡(
gr_mode
 =
MWMODE_COPY
) {

114 *
addr
 = 
c
;

115 } i‡(
gr_mode
 <
MWMODE_SIMPLE_MAX
) {

116 
	`≠∂yOp
(
gr_mode
, 
c
, 
addr
, 
ADDR32
);

118 
MW_S32
 
p§
, 
psg
, 
psb
;

119 
MW_S32
 
pß
, 
pß_öv
;

120 
MW_U32
 
pd
;

122 
pß
 = (((
MW_U32
Ë
c
) >> 24);

124 
gr_mode
) {

125 
MWMODE_SRC_OVER
:

126 i‡(
pß
 == 255) {

127 *
addr
 = 
c
;

128 } i‡(
pß
 != 0) {

129 
pß_öv
 = 256 - 
pß
;

130 
p§
 = (
MW_S32
Ë(
c
 & 0x00FF0000UL);

131 
psg
 = (
MW_S32
Ë(
c
 & 0x0000FF00UL);

132 
psb
 = (
MW_S32
Ë(
c
 & 0x000000FFUL);

134 
pd
 = *
addr
;

135 *
addr
 = ((
MW_U32
)

136 (((((
MW_S32
Ë(
pd
 & 0x00FF0000UL) -

137 
p§
Ë* 
pß_öv
) >> 8) +

138 
p§
) & 0x00FF0000UL)

139 | ((
MW_U32
)

140 (((((
MW_S32
Ë(
pd
 & 0x0000FF00UL) -

141 
psg
Ë* 
pß_öv
) >> 8) +

142 
psg
) & 0x0000FF00UL)

143 | ((
MW_U32
)

144 (((((
MW_S32
Ë(
pd
 & 0x000000FFUL) -

145 
psb
Ë* 
pß_öv
) >> 8) +

146 
psb
) & 0x000000FFUL)

148 (((
pß
 << 24) +

149 ((
pd
 & 0xFF000000UL) >> 8) *

150 (
MW_U32
Ë
pß_öv
) & 0xFF000000UL);

153 
MWMODE_SRC_IN
:

154 
MWMODE_SRC_ATOP
:

155 
MWMODE_DST_OVER
:

156 
MWMODE_DST_IN
:

157 
MWMODE_DST_ATOP
:

158 
MWMODE_SRC_OUT
:

159 
MWMODE_DST_OUT
:

160 
MWMODE_PORTERDUFF_XOR
:

164 
	`as£π
(0);

168 
DRAWOFF
;

169 
	}
}

172 
MWPIXELVAL


173 
	$löór32a_ªadpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

175 
ADDR32
 
addr
 = 
psd
->addr;

177 
	`as£π
(
addr
 != 0);

178 
	`as£π
(
x
 >0 && x < 
psd
->
xªs
);

179 
	`as£π
(
y
 >0 && y < 
psd
->
yªs
);

181  
addr
[
x
 + 
y
 * 
psd
->
löñí
];

182 
	}
}

186 
	$löór32a_døwh‹zlöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
,

187 
MWPIXELVAL
 
c
)

189 
ADDR32
 
addr
 = 
psd
->addr;

191 
	`as£π
(
addr
 != 0);

192 
	`as£π
(
x1
 >0 && x1 < 
psd
->
xªs
);

193 
	`as£π
(
x2
 >0 && x2 < 
psd
->
xªs
);

194 
	`as£π
(
x2
 >
x1
);

195 
	`as£π
(
y
 >0 && y < 
psd
->
yªs
);

197 
addr
 +
x1
 + 
y
 * 
psd
->
löñí
;

199 
DRAWON
;

200 i‡(
gr_mode
 =
MWMODE_COPY
) {

202 
x1
++ <
x2
)

203 *
addr
++ = 
c
;

204 } i‡(
gr_mode
 <
MWMODE_SIMPLE_MAX
) {

205 
x1
++ <
x2
) {

206 
	`≠∂yOp
(
gr_mode
, 
c
, 
addr
, 
ADDR32
);

207 ++
addr
;

210 
MW_S32
 
p§
, 
psg
, 
psb
;

211 
MW_S32
 
pß
, 
pß_öv
;

212 
MW_U32
 
pd
;

213 
MW_U32
 
ˇche_öput
, 
ˇche_ouçut
;

215 
pß
 = (((
MW_U32
Ë
c
) >> 24);

217 
gr_mode
) {

218 
MWMODE_SRC_OVER
:

219 i‡(
pß
 == 255) {

220 
x1
++ <
x2
)

221 *
addr
++ = 
c
;

222 } i‡(
pß
 != 0) {

223 
pß_öv
 = 256 - 
pß
;

224 
p§
 = (
MW_S32
Ë(
c
 & 0x00FF0000UL);

225 
psg
 = (
MW_S32
Ë(
c
 & 0x0000FF00UL);

226 
psb
 = (
MW_S32
Ë(
c
 & 0x000000FFUL);

228 
pd
 = *
addr
;

229 
ˇche_öput
 = 
pd
;

230 
ˇche_ouçut
 = ((
MW_U32
)

231 (((((
MW_S32
)

232 (
pd
 & 0x00FF0000UL) -

233 
p§
Ë* 
pß_öv
) >> 8) +

234 
p§
) & 0x00FF0000UL)

235 | ((
MW_U32
)

236 (((((
MW_S32
Ë(
pd
 & 0x0000FF00UL) -

237 
psg
Ë* 
pß_öv
) >> 8) +

238 
psg
) & 0x0000FF00UL)

239 | ((
MW_U32
)

240 (((((
MW_S32
Ë(
pd
 & 0x000000FFUL) -

241 
psb
Ë* 
pß_öv
) >> 8) +

242 
psb
) & 0x000000FFUL)

244 (((
pß
 << 24) +

245 ((
pd
 & 0xFF000000UL) >> 8) *

246 ((
MW_U32
Ë
pß_öv
)) & 0xFF000000UL);

247 *
addr
++ = 
ˇche_ouçut
;

249 ++
x1
 <
x2
) {

250 
pd
 = *
addr
;

251 i‡(
ˇche_öput
 !
pd
) {

252 
ˇche_öput
 = 
pd
;

253 
ˇche_ouçut
 = ((
MW_U32
)

254 (((((
MW_S32
)

255 (
pd
 &

258 
p§
) *

259 
pß_öv
) >>

261 
p§
) &

263 | ((
MW_U32
)

264 (((((
MW_S32
)

265 (
pd
 &

268 
psg
) *

269 
pß_öv
) >> 8) +

270 
psg
) &

272 | ((
MW_U32
)

273 (((((
MW_S32
)

274 (
pd
 &

277 
psb
) *

278 
pß_öv
) >> 8) +

279 
psb
) &

282 (((
pß
 << 24) +

283 ((
pd
 & 0xFF000000UL)

285 ((
MW_U32
Ë
pß_öv
))

288 *
addr
++ = 
ˇche_ouçut
;

292 
MWMODE_SRC_IN
:

293 
MWMODE_SRC_ATOP
:

294 
MWMODE_DST_OVER
:

295 
MWMODE_DST_IN
:

296 
MWMODE_DST_ATOP
:

297 
MWMODE_SRC_OUT
:

298 
MWMODE_DST_OUT
:

299 
MWMODE_PORTERDUFF_XOR
:

303 
	`as£π
(0);

306 
DRAWOFF
;

307 
	}
}

311 
	$löór32a_døwvîéöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
,

312 
MWPIXELVAL
 
c
)

314 
ADDR32
 
addr
 = 
psd
->addr;

315 
löñí
 = 
psd
->linelen;

317 
	`as£π
(
addr
 != 0);

318 
	`as£π
(
x
 >0 && x < 
psd
->
xªs
);

319 
	`as£π
(
y1
 >0 && y1 < 
psd
->
yªs
);

320 
	`as£π
(
y2
 >0 && y2 < 
psd
->
yªs
);

321 
	`as£π
(
y2
 >
y1
);

323 
DRAWON
;

324 
addr
 +
x
 + 
y1
 * 
löñí
;

325 i‡(
gr_mode
 =
MWMODE_COPY
) {

326 
y1
++ <
y2
) {

327 *
addr
 = 
c
;

328 
addr
 +
löñí
;

330 } i‡(
gr_mode
 <
MWMODE_SIMPLE_MAX
) {

331 
y1
++ <
y2
) {

332 
	`≠∂yOp
(
gr_mode
, 
c
, 
addr
, 
ADDR32
);

333 
addr
 +
löñí
;

336 
MW_S32
 
p§
, 
psg
, 
psb
;

337 
MW_S32
 
pß
, 
pß_öv
;

338 
MW_U32
 
pd
;

339 
MW_U32
 
ˇche_öput
, 
ˇche_ouçut
;

341 
pß
 = (((
MW_U32
Ë
c
) >> 24);

343 
gr_mode
) {

344 
MWMODE_SRC_OVER
:

345 i‡(
pß
 == 255) {

346 
y1
++ <
y2
) {

347 *
addr
 = 
c
;

348 
addr
 +
löñí
;

350 } i‡(
pß
 != 0) {

351 
pß_öv
 = 256 - 
pß
;

352 
p§
 = (
MW_S32
Ë(
c
 & 0x00FF0000UL);

353 
psg
 = (
MW_S32
Ë(
c
 & 0x0000FF00UL);

354 
psb
 = (
MW_S32
Ë(
c
 & 0x000000FFUL);

356 
pd
 = *
addr
;

357 
ˇche_öput
 = 
pd
;

358 
ˇche_ouçut
 = ((
MW_U32
)

359 (((((
MW_S32
)

360 (
pd
 & 0x00FF0000UL) -

361 
p§
Ë* 
pß_öv
) >> 8) +

362 
p§
) & 0x00FF0000UL)

363 | ((
MW_U32
)

364 (((((
MW_S32
Ë(
pd
 & 0x0000FF00UL) -

365 
psg
Ë* 
pß_öv
) >> 8) +

366 
psg
) & 0x0000FF00UL)

367 | ((
MW_U32
)

368 (((((
MW_S32
Ë(
pd
 & 0x000000FFUL) -

369 
psb
Ë* 
pß_öv
) >> 8) +

370 
psb
) & 0x000000FFUL)

372 (((
pß
 << 24) +

373 ((
pd
 & 0xFF000000UL) >> 8) *

374 ((
MW_U32
Ë
pß_öv
)) & 0xFF000000UL);

375 *
addr
 = 
ˇche_ouçut
;

376 
addr
 +
löñí
;

378 ++
y1
 <
y2
) {

379 
pd
 = *
addr
;

380 i‡(
ˇche_öput
 !
pd
) {

381 
ˇche_öput
 = 
pd
;

382 
ˇche_ouçut
 = ((
MW_U32
)

383 (((((
MW_S32
)

384 (
pd
 &

387 
p§
) *

388 
pß_öv
) >>

390 
p§
) &

392 | ((
MW_U32
)

393 (((((
MW_S32
)

394 (
pd
 &

397 
psg
) *

398 
pß_öv
) >> 8) +

399 
psg
) &

401 | ((
MW_U32
)

402 (((((
MW_S32
)

403 (
pd
 &

406 
psb
) *

407 
pß_öv
) >> 8) +

408 
psb
) &

411 (((
pß
 << 24) +

412 ((
pd
 & 0xFF000000UL)

414 ((
MW_U32
Ë
pß_öv
))

417 *
addr
 = 
ˇche_ouçut
;

418 
addr
 +
löñí
;

422 
MWMODE_SRC_IN
:

423 
MWMODE_SRC_ATOP
:

424 
MWMODE_DST_OVER
:

425 
MWMODE_DST_IN
:

426 
MWMODE_DST_ATOP
:

427 
MWMODE_SRC_OUT
:

428 
MWMODE_DST_OUT
:

429 
MWMODE_PORTERDUFF_XOR
:

433 
	`as£π
(0);

436 
DRAWOFF
;

437 
	}
}

441 
	$löór32a_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

442 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

444 
ADDR8
 
d°8
, 
§c8
;

445 
ADDR32
 
d°
 = 
d°psd
->
addr
;

446 
ADDR32
 
§c
 = 
§˝sd
->
addr
;

447 
i
;

448 
dlöñí
 = 
d°psd
->
löñí
;

449 
¶öñí
 = 
§˝sd
->
löñí
;

450 
dlöñí_möus_w4
;

451 
¶öñí_möus_w4
;

452 #i‡
ALPHABLEND


453 
Æpha
;

456 
	`as£π
(
d°
 != 0);

457 
	`as£π
(
d°x
 >0 && d°x < 
d°psd
->
xªs
);

458 
	`as£π
(
d°y
 >0 && d°y < 
d°psd
->
yªs
);

459 
	`as£π
(
w
 > 0);

460 
	`as£π
(
h
 > 0);

461 
	`as£π
(
§c
 != 0);

462 
	`as£π
(
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

463 
	`as£π
(
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

464 
	`as£π
(
d°x
 + 
w
 <
d°psd
->
xªs
);

465 
	`as£π
(
d°y
 + 
h
 <
d°psd
->
yªs
);

466 
	`as£π
(
§cx
 + 
w
 <
§˝sd
->
xªs
);

467 
	`as£π
(
§cy
 + 
h
 <
§˝sd
->
yªs
);

469 
DRAWON
;

470 
d°
 +
d°x
 + 
d°y
 * 
dlöñí
;

471 
§c
 +
§cx
 + 
§cy
 * 
¶öñí
;

473 #i‡
ALPHABLEND


474 i‡((
›
 & 
MWROP_EXTENSION
Ë!
MWROP_BLENDCONSTANT
)

475 
°dblô
;

476 
Æpha
 = 
›
 & 0xff;

478 
§c8
 = (
ADDR8
Ë
§c
;

479 
d°8
 = (
ADDR8
Ë
d°
;

480 
dlöñí_möus_w4
 = (
dlöñí
 - 
w
) * 4;

481 
¶öñí_möus_w4
 = (
¶öñí
 - 
w
) * 4;

482 --
h
 >= 0) {

483 
i
 = 0; i < 
w
; ++i) {

484 
s
;

485 
d
;

486 
s
 = 
§c8
[
MWI_BYTE_OFFSET_R
];

487 
d
 = 
d°8
[
MWI_BYTE_OFFSET_R
];

488 
d°8
[
MWI_BYTE_OFFSET_R
] =

489 (Ë(((
s
 - 
d
Ë* 
Æpha
) >> 8) + d;

490 
s
 = 
§c8
[
MWI_BYTE_OFFSET_G
];

491 
d
 = 
d°8
[
MWI_BYTE_OFFSET_G
];

492 
d°8
[
MWI_BYTE_OFFSET_G
] =

493 (Ë(((
s
 - 
d
Ë* 
Æpha
) >> 8) + d;

494 
s
 = 
§c8
[
MWI_BYTE_OFFSET_B
];

495 
d
 = 
d°8
[
MWI_BYTE_OFFSET_B
];

496 
d°8
[
MWI_BYTE_OFFSET_B
] =

497 (Ë(((
s
 - 
d
Ë* 
Æpha
) >> 8) + d;

498 
s
 = 
§c8
[
MWI_BYTE_OFFSET_ALPHA
];

499 
d
 = 
d°8
[
MWI_BYTE_OFFSET_ALPHA
];

500 
d°8
[
MWI_BYTE_OFFSET_ALPHA
] =

501 (Ë(((
s
 - 
d
Ë* 
Æpha
) >> 8) + d;

502 
d°8
 += 4;

503 
§c8
 += 4;

505 
d°8
 +
dlöñí_möus_w4
;

506 
§c8
 +
¶öñí_möus_w4
;

508 
DRAWOFF
;

510 
°dblô
:

513 i‡(
›
 =
MWROP_COPY
) {

516 i‡(
§cy
 < 
d°y
) {

517 
§c
 +(
h
 - 1Ë* 
¶öñí
;

518 
d°
 +(
h
 - 1Ë* 
dlöñí
;

519 
¶öñí
 *= -1;

520 
dlöñí
 *= -1;

522 --
h
 >= 0) {

524 
	`memmove
(
d°
, 
§c
, 
w
 << 2);

525 
d°
 +
dlöñí
;

526 
§c
 +
¶öñí
;

528 } i‡(
	`MWROP_TO_MODE
(
›
Ë<
MWMODE_SIMPLE_MAX
) {

529 
i
 = 0; i < 
w
; ++i) {

530 
	`≠∂yOp
(
	`MWROP_TO_MODE
(
›
), *
§c
, 
d°
, 
ADDR32
);

531 ++
§c
;

532 ++
d°
;

534 
d°
 +
dlöñí
 - 
w
;

535 
§c
 +
¶öñí
 - 
w
;

536 } i‡(
	`MWROP_TO_MODE
(
›
Ë=
MWMODE_SRC_OVER
) {

538 
§c8
 = (
ADDR8
Ë
§c
;

539 
d°8
 = (
ADDR8
Ë
d°
;

540 
h
--) {

541 
i
 = 
w
; --i >= 0;) {

542 
a
;

543 
s
;

544 
d
;

545 
a
 = () ()

546 
§c8
[
MWI_BYTE_OFFSET_ALPHA
];

547 i‡(
a
 == 255) {

548 
d°8
[0] = 
§c8
[0];

549 
d°8
[1] = 
§c8
[1];

550 
d°8
[2] = 
§c8
[2];

551 
d°8
[
MWI_BYTE_OFFSET_ALPHA
] = 
a
;

552 } i‡(
a
 != 0) {

553 
s
 = () ()

554 
§c8
[
MWI_BYTE_OFFSET_R
];

555 
d
 = () ()

556 
d°8
[
MWI_BYTE_OFFSET_R
];

557 
d°8
[
MWI_BYTE_OFFSET_R
] =

559 Ë((((
s
 - 
d
Ë* 
a
) >> 8) +

560 
d
);

562 
s
 = () ()

563 
§c8
[
MWI_BYTE_OFFSET_G
];

564 
d
 = () ()

565 
d°8
[
MWI_BYTE_OFFSET_G
];

566 
d°8
[
MWI_BYTE_OFFSET_G
] =

568 Ë((((
s
 - 
d
Ë* 
a
) >> 8) +

569 
d
);

571 
s
 = () ()

572 
§c8
[
MWI_BYTE_OFFSET_B
];

573 
d
 = () ()

574 
d°8
[
MWI_BYTE_OFFSET_B
];

575 
d°8
[
MWI_BYTE_OFFSET_B
] =

577 Ë((((
s
 - 
d
Ë* 
a
) >> 8) +

578 
d
);

580 
d
 = () ()

581 
d°8
[
MWI_BYTE_OFFSET_ALPHA
];

582 
d°8
[
MWI_BYTE_OFFSET_ALPHA
] =

583 (
a
 + ((
d
 * (256 -á)) >> 8));

585 
§c8
 += 4;

586 
d°8
 += 4;

588 
d°8
 +(
dlöñí
 - 
w
) * 4;

589 
§c8
 +(
¶öñí
 - 
w
) * 4;

594 
DRAWOFF
;

595 
	}
}

599 
	$löór32a_°ªtchblô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
d°w
,

600 
MWCOORD
 
d°h
, 
PSD
 
§˝sd
, MWCOORD 
§cx
, MWCOORD 
§cy
,

601 
MWCOORD
 
§cw
, MWCOORD 
§ch
, 
›
)

603 
ADDR32
 
d°
;

604 
ADDR32
 
§c
;

605 
dlöñí
 = 
d°psd
->
löñí
;

606 
¶öñí
 = 
§˝sd
->
löñí
;

607 
i
, 
ymax
;

608 
row_pos
, 
row_öc
;

609 
cﬁ_pos
, 
cﬁ_öc
;

610 
pixñ
 = 0;

612 
	`as£π
(
d°psd
->
addr
 != 0);

613 
	`as£π
(
d°x
 >0 && d°x < 
d°psd
->
xªs
);

614 
	`as£π
(
d°y
 >0 && d°y < 
d°psd
->
yªs
);

615 
	`as£π
(
d°w
 > 0);

616 
	`as£π
(
d°h
 > 0);

617 
	`as£π
(
§˝sd
->
addr
 != 0);

618 
	`as£π
(
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

619 
	`as£π
(
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

620 
	`as£π
(
§cw
 > 0);

621 
	`as£π
(
§ch
 > 0);

622 
	`as£π
(
d°x
 + 
d°w
 <
d°psd
->
xªs
);

623 
	`as£π
(
d°y
 + 
d°h
 <
d°psd
->
yªs
);

624 
	`as£π
(
§cx
 + 
§cw
 <
§˝sd
->
xªs
);

625 
	`as£π
(
§cy
 + 
§ch
 <
§˝sd
->
yªs
);

627 
DRAWON
;

628 
row_pos
 = 0x10000;

629 
row_öc
 = (
§ch
 << 16Ë/ 
d°h
;

632 
ymax
 = 
d°y
 + 
d°h
; dsty < ymax; ++dsty) {

635 
row_pos
 >= 0x10000L) {

636 ++
§cy
;

637 
row_pos
 -= 0x10000L;

640 
d°
 = (
ADDR32
Ë
d°psd
->
addr
 + 
d°x
 + 
d°y
 * 
dlöñí
;

641 
§c
 = (
ADDR32
Ë
§˝sd
->
addr
 + 
§cx
 + (
§cy
 - 1Ë* 
¶öñí
;

644 
cﬁ_pos
 = 0x10000;

645 
cﬁ_öc
 = (
§cw
 << 16Ë/ 
d°w
;

646 
i
 = 0; i < 
d°w
; ++i) {

648 
cﬁ_pos
 >= 0x10000L) {

649 
pixñ
 = *
§c
++;

650 
cﬁ_pos
 -= 0x10000L;

652 *
d°
++ = 
pixñ
;

653 
cﬁ_pos
 +
cﬁ_öc
;

656 
row_pos
 +
row_öc
;

658 
DRAWOFF
;

659 
	}
}

672 #i‚de‡
RESTRICT


673 
	#RESTRICT


	)

675 #i‚de‡
SIGN


676 
	#SIGN
(
x
Ë(((xË> 0Ë? 1 : (((xË=0Ë? 0 : -1))

	)

678 #i‚de‡
ABS


679 
	#ABS
(
x
Ë(((xË>0Ë? (xË: -(x))

	)

715 
	$löór32a_°ªtchblôex
(
PSD
 
d°psd
,

716 
PSD
 
§˝sd
,

717 
MWCOORD
 
de°_x_°¨t
,

718 
MWCOORD
 
de°_y_°¨t
,

719 
MWCOORD
 
width
,

720 
MWCOORD
 
height
,

721 
x_díomö©‹
,

722 
y_díomö©‹
,

723 
§c_x_‰a˘i⁄
,

724 
§c_y_‰a˘i⁄
,

725 
x_°ï_‰a˘i⁄
, 
y_°ï_‰a˘i⁄
, 
›
)

728 *
RESTRICT
 
§c_±r
;

731 *
RESTRICT
 
√xt_§c_±r
;

734 *
RESTRICT
 
de°_±r
;

737 *
√xt_de°_±r
;

740 
x_îr‹
;

741 
y_îr‹
;

746 
§c_x_°ï_⁄e
;

747 
§c_y_°ï_⁄e
;

752 
§c_x_°ï_n‹mÆ
;

753 
§c_y_°ï_n‹mÆ
;

758 
x_îr‹_°ï_n‹mÆ
;

759 
y_îr‹_°ï_n‹mÆ
;

762 
x_cou¡
;

763 
y_cou¡
;

766 
§c_x_°¨t
;

767 
§c_y_°¨t
;

770 
x_îr‹_°¨t
;

773 
de°_y_°ï
;

781 
§c_x_‰a˘i⁄
 +(
x_°ï_‰a˘i⁄
 >> 1);

782 
§c_y_‰a˘i⁄
 +(
y_°ï_‰a˘i⁄
 >> 1);

790 
§c_x_°¨t
 = 
§c_x_‰a˘i⁄
 / 
x_díomö©‹
;

791 
§c_y_°¨t
 = 
§c_y_‰a˘i⁄
 / 
y_díomö©‹
;

792 
x_îr‹_°¨t
 = 
§c_x_‰a˘i⁄
 - (
§c_x_°¨t
 + 1Ë* 
x_díomö©‹
;

793 
y_îr‹
 = 
§c_y_‰a˘i⁄
 - (
§c_y_°¨t
 + 1Ë* 
y_díomö©‹
;

797 
§c_x_°ï_n‹mÆ
 = 
x_°ï_‰a˘i⁄
 / 
x_díomö©‹
;

798 
§c_x_°ï_⁄e
 = 
	`SIGN
(
x_°ï_‰a˘i⁄
);

799 
x_îr‹_°ï_n‹mÆ
 =

800 
	`ABS
(
x_°ï_‰a˘i⁄
Ë- ABS(
§c_x_°ï_n‹mÆ
Ë* 
x_díomö©‹
;

802 
§c_y_°ï_n‹mÆ
 = 
y_°ï_‰a˘i⁄
 / 
y_díomö©‹
;

803 
§c_y_°ï_⁄e
 = 
	`SIGN
(
y_°ï_‰a˘i⁄
Ë* 
§˝sd
->
löñí
;

804 
y_îr‹_°ï_n‹mÆ
 =

805 
	`ABS
(
y_°ï_‰a˘i⁄
Ë- ABS(
§c_y_°ï_n‹mÆ
Ë* 
y_díomö©‹
;

806 
§c_y_°ï_n‹mÆ
 *
§˝sd
->
löñí
;

814 
√xt_§c_±r
 =

815 ((*Ë
§˝sd
->
addr
) +

816 
§c_y_°¨t
 * 
§˝sd
->
löñí
 + 
§c_x_°¨t
;

819 
de°_y_°ï
 = 
d°psd
->
löñí
;

822 
√xt_de°_±r
 =

823 ((*Ë
d°psd
->
addr
) +

824 (
de°_y_°¨t
 * 
de°_y_°ï
Ë+ 
de°_x_°¨t
;

839 
›
 & 
MWROP_EXTENSION
) {

840 
MWROP_SRC
:

844 
y_cou¡
 = 
height
;

845 
y_cou¡
-- > 0) {

846 
§c_±r
 = 
√xt_§c_±r
;

847 
de°_±r
 = 
√xt_de°_±r
;

849 
x_îr‹
 = 
x_îr‹_°¨t
;

851 
x_cou¡
 = 
width
;

852 
x_cou¡
-- > 0) {

853 *
de°_±r
++ = *
§c_±r
;

855 
§c_±r
 +
§c_x_°ï_n‹mÆ
;

856 
x_îr‹
 +
x_îr‹_°ï_n‹mÆ
;

858 i‡(
x_îr‹
 >= 0) {

859 
§c_±r
 +
§c_x_°ï_⁄e
;

860 
x_îr‹
 -
x_díomö©‹
;

864 
√xt_de°_±r
 +
de°_y_°ï
;

866 
√xt_§c_±r
 +
§c_y_°ï_n‹mÆ
;

867 
y_îr‹
 +
y_îr‹_°ï_n‹mÆ
;

869 i‡(
y_îr‹
 >= 0) {

870 
√xt_§c_±r
 +
§c_y_°ï_⁄e
;

871 
y_îr‹
 -
y_díomö©‹
;

876 
MWROP_SRC_OVER
:

880 
y_cou¡
 = 
height
;

881 
y_cou¡
-- > 0) {

882 
§c_±r
 = 
√xt_§c_±r
;

883 
de°_±r
 = 
√xt_de°_±r
;

885 
x_îr‹
 = 
x_îr‹_°¨t
;

887 
x_cou¡
 = 
width
;

888 
x_cou¡
-- > 0) {

889 
c
;

890 
‹ig
;

891 
a
;

892 
c
 = *
§c_±r
;

893 
a
 = (
c
 >> 24) & 0xFF;

894 i‡(
a
 == 255) {

895 *
de°_±r
 = 
c
;

896 } i‡(
a
 != 0) {

897 
s
;

898 
d
;

899 
ªsu…
;

901 
‹ig
 = *
de°_±r
;

903 
s
 = ()(
c
 >> 16) & 0xFF;

904 
d
 = ()(
‹ig
 >> 16) & 0xFF;

905 
ªsu…
 = (()((((
s
 - 
d
Ë* 
a
) >> 8) + d) << 16);

907 
s
 = ()(
c
 >> 8) & 0xFF;

908 
d
 = ()(
‹ig
 >> 8) & 0xFF;

909 
ªsu…
 |(()((((
s
 - 
d
Ë* 
a
) >> 8) + d) << 8);

911 
s
 = ()
c
 & 0xFF;

912 
d
 = ()
‹ig
 & 0xFF;

913 
ªsu…
 |(()(((
s
 - 
d
Ë* 
a
) >> 8) + d);

915 
d
 = ()(
‹ig
 >> 24) & 0xFF;

916 
ªsu…
 |(()(
a
 + ((
d
 * (256 -á)) >> 8)) << 24);

917 *
de°_±r
 = 
ªsu…
;

920 
de°_±r
++;

922 
§c_±r
 +
§c_x_°ï_n‹mÆ
;

923 
x_îr‹
 +
x_îr‹_°ï_n‹mÆ
;

925 i‡(
x_îr‹
 >= 0) {

926 
§c_±r
 +
§c_x_°ï_⁄e
;

927 
x_îr‹
 -
x_díomö©‹
;

931 
√xt_de°_±r
 +
de°_y_°ï
;

933 
√xt_§c_±r
 +
§c_y_°ï_n‹mÆ
;

934 
y_îr‹
 +
y_îr‹_°ï_n‹mÆ
;

936 i‡(
y_îr‹
 >= 0) {

937 
√xt_§c_±r
 +
§c_y_°ï_⁄e
;

938 
y_îr‹
 -
y_díomö©‹
;

943 
MWROP_XOR_FGBG
:

944 
y_cou¡
 = 
height
;

945 
y_cou¡
-- > 0) {

946 
§c_±r
 = 
√xt_§c_±r
;

947 
de°_±r
 = 
√xt_de°_±r
;

949 
x_îr‹
 = 
x_îr‹_°¨t
;

951 
x_cou¡
 = 
width
;

952 
x_cou¡
-- > 0) {

953 *
de°_±r
++ ^*
§c_±r
 ^ 
gr_background
;

955 
§c_±r
 +
§c_x_°ï_n‹mÆ
;

956 
x_îr‹
 +
x_îr‹_°ï_n‹mÆ
;

958 i‡(
x_îr‹
 >= 0) {

959 
§c_±r
 +
§c_x_°ï_⁄e
;

960 
x_îr‹
 -
x_díomö©‹
;

964 
√xt_de°_±r
 +
de°_y_°ï
;

966 
√xt_§c_±r
 +
§c_y_°ï_n‹mÆ
;

967 
y_îr‹
 +
y_îr‹_°ï_n‹mÆ
;

969 i‡(
y_îr‹
 >= 0) {

970 
√xt_§c_±r
 +
§c_y_°ï_⁄e
;

971 
y_îr‹
 -
y_díomö©‹
;

976 
MWROP_CLEAR
:

977 
y_cou¡
 = 
height
;

978 
y_cou¡
-- > 0) {

979 
de°_±r
 = 
√xt_de°_±r
;

980 
x_cou¡
 = 
width
;

981 
x_cou¡
-- > 0) {

982 *
de°_±r
++ = 0;

984 
√xt_de°_±r
 +
de°_y_°ï
;

989 
y_cou¡
 = 
height
;

990 
y_cou¡
-- > 0) {

991 
§c_±r
 = 
√xt_§c_±r
;

992 
de°_±r
 = 
√xt_de°_±r
;

994 
x_îr‹
 = 
x_îr‹_°¨t
;

996 
x_cou¡
 = 
width
;

997 
x_cou¡
-- > 0) {

998 
	`≠∂yOp
(
	`MWROP_TO_MODE
(
›
), *
§c_±r
, 
de°_±r
,

999 
ADDR32
);

1000 
de°_±r
++;

1002 
§c_±r
 +
§c_x_°ï_n‹mÆ
;

1003 
x_îr‹
 +
x_îr‹_°ï_n‹mÆ
;

1005 i‡(
x_îr‹
 >= 0) {

1006 
§c_±r
 +
§c_x_°ï_⁄e
;

1007 
x_îr‹
 -
x_díomö©‹
;

1011 
√xt_de°_±r
 +
de°_y_°ï
;

1013 
√xt_§c_±r
 +
§c_y_°ï_n‹mÆ
;

1014 
y_îr‹
 +
y_îr‹_°ï_n‹mÆ
;

1016 i‡(
y_îr‹
 >= 0) {

1017 
√xt_§c_±r
 +
§c_y_°ï_⁄e
;

1018 
y_îr‹
 -
y_díomö©‹
;

1024 
	}
}

1026 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_LSB_FIRST


1049 
	$löór32a_døw¨ó_bôm≠_byãs_lsb_fú°
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
)

1063 
	#MWI_IS_BIT_BEFORE_OR_EQUAL
(
a
,
b
Ë(◊Ë<(b))

	)

1064 
	#MWI_ADVANCE_BIT
(
èrgë
Ë(—¨gëË<<1)

	)

1065 
	#MWI_BIT_NO
(
n
Ë(0x01 << (n))

	)

1071 
	#MWI_FIRST_BIT
 
	`MWI_BIT_NO
(0)

	)

1072 
	#MWI_LAST_BIT
 
	`MWI_BIT_NO
(7)

	)

1074 
¥efix_fú°_bô
;

1075 
po°fix_fú°_bô
 = 
MWI_FIRST_BIT
;

1076 
po°fix_œ°_bô
;

1077 
bôm≠_byã
;

1078 
mask
;

1079 
fg
, 
bg
;

1080 
fú°_byã
, 
œ°_byã
;

1081 
size_maö
;

1082 
t
, 
y
;

1083 
adv™˚_§c
, 
adv™˚_d°
;

1084 
ADDR8
 
§c
;

1085 
ADDR32
 
d°
;

1088 
¥efix_fú°_bô
 = 
	`MWI_BIT_NO
(
gc
->
§cx
 & 7);

1091 
po°fix_œ°_bô
 = 
	`MWI_BIT_NO
((
gc
->
§cx
 + gc->
d°w
 - 1) & 7);

1094 
fú°_byã
 = 
gc
->
§cx
 >> 3;

1097 
œ°_byã
 = (
gc
->
§cx
 + gc->
d°w
 - 1) >> 3;

1099 
§c
 = ((
ADDR8
Ë
gc
->
pixñs
Ë+ gc->
§c_löñí
 * gc->
§cy
 + 
fú°_byã
;

1100 
d°
 = ((
ADDR32
Ë
psd
->
addr
Ë+Ösd->
löñí
 * 
gc
->
d°y
 + gc->
d°x
;

1101 
fg
 = 
gc
->
fg_cﬁ‹
;

1102 
bg
 = 
gc
->
bg_cﬁ‹
;

1104 
adv™˚_§c
 = 
gc
->
§c_löñí
 - 
œ°_byã
 + 
fú°_byã
 - 1;

1105 
adv™˚_d°
 = 
psd
->
löñí
 - 
gc
->
d°w
;

1107 i‡(
fú°_byã
 !
œ°_byã
) {

1111 
size_maö
 = 
œ°_byã
 - 
fú°_byã
 + 1 - 2;

1113 i‡(
¥efix_fú°_bô
 =
MWI_FIRST_BIT
) {

1115 
¥efix_fú°_bô
 = 0;

1116 
size_maö
++;

1118 i‡(
po°fix_œ°_bô
 =
MWI_LAST_BIT
) {

1120 
po°fix_œ°_bô
 = 0;

1121 
size_maö
++;

1123 } i‡((
¥efix_fú°_bô
 =
MWI_FIRST_BIT
)

1124 && (
po°fix_œ°_bô
 =
MWI_LAST_BIT
)) {

1126 
¥efix_fú°_bô
 = 0;

1127 
po°fix_œ°_bô
 = 0;

1128 
size_maö
 = 1;

1132 
po°fix_fú°_bô
 = 
¥efix_fú°_bô
;

1133 
¥efix_fú°_bô
 = 0;

1134 
size_maö
 = 0;

1137 
DRAWON
;

1139 i‡(
gc
->
gr_u£bg
) {

1140 
y
 = 0; y < 
gc
->
d°h
; y++) {

1143 i‡(
¥efix_fú°_bô
) {

1144 
bôm≠_byã
 = *
§c
++;

1145 
mask
 = 
¥efix_fú°_bô
; mask;

1146 
	`MWI_ADVANCE_BIT
(
mask
)) {

1147 *
d°
++ = (
mask
 & 
bôm≠_byã
Ë? 
fg
 :

1148 
bg
;

1153 
t
 = 
size_maö
;Å != 0;Å--) {

1154 
bôm≠_byã
 = *
§c
++;

1156 *
d°
++ = (
	`MWI_BIT_NO
(0Ë& 
bôm≠_byã
Ë? 
fg
 :

1157 
bg
;

1158 *
d°
++ = (
	`MWI_BIT_NO
(1Ë& 
bôm≠_byã
Ë? 
fg
 :

1159 
bg
;

1160 *
d°
++ = (
	`MWI_BIT_NO
(2Ë& 
bôm≠_byã
Ë? 
fg
 :

1161 
bg
;

1162 *
d°
++ = (
	`MWI_BIT_NO
(3Ë& 
bôm≠_byã
Ë? 
fg
 :

1163 
bg
;

1164 *
d°
++ = (
	`MWI_BIT_NO
(4Ë& 
bôm≠_byã
Ë? 
fg
 :

1165 
bg
;

1166 *
d°
++ = (
	`MWI_BIT_NO
(5Ë& 
bôm≠_byã
Ë? 
fg
 :

1167 
bg
;

1168 *
d°
++ = (
	`MWI_BIT_NO
(6Ë& 
bôm≠_byã
Ë? 
fg
 :

1169 
bg
;

1170 *
d°
++ = (
	`MWI_BIT_NO
(7Ë& 
bôm≠_byã
Ë? 
fg
 :

1171 
bg
;

1175 i‡(
po°fix_œ°_bô
) {

1176 
bôm≠_byã
 = *
§c
++;

1177 
mask
 = 
po°fix_fú°_bô
;

1178 
	`MWI_IS_BIT_BEFORE_OR_EQUAL
(
mask
,

1179 
po°fix_œ°_bô
);

1180 
	`MWI_ADVANCE_BIT
(
mask
)) {

1181 *
d°
++ = (
mask
 & 
bôm≠_byã
Ë? 
fg
 :

1182 
bg
;

1186 
§c
 +
adv™˚_§c
;

1187 
d°
 +
adv™˚_d°
;

1190 
y
 = 0; y < 
gc
->
d°h
; y++) {

1193 i‡(
¥efix_fú°_bô
) {

1194 
bôm≠_byã
 = *
§c
++;

1195 
mask
 = 
¥efix_fú°_bô
; mask;

1196 
	`MWI_ADVANCE_BIT
(
mask
)) {

1197 i‡(
mask
 & 
bôm≠_byã
)

1198 *
d°
 = 
fg
;

1199 
d°
++;

1204 
t
 = 
size_maö
;Å != 0;Å--) {

1205 
bôm≠_byã
 = *
§c
++;

1207 i‡(
	`MWI_BIT_NO
(0Ë& 
bôm≠_byã
)

1208 
d°
[0] = 
fg
;

1209 i‡(
	`MWI_BIT_NO
(1Ë& 
bôm≠_byã
)

1210 
d°
[1] = 
fg
;

1211 i‡(
	`MWI_BIT_NO
(2Ë& 
bôm≠_byã
)

1212 
d°
[2] = 
fg
;

1213 i‡(
	`MWI_BIT_NO
(3Ë& 
bôm≠_byã
)

1214 
d°
[3] = 
fg
;

1215 i‡(
	`MWI_BIT_NO
(4Ë& 
bôm≠_byã
)

1216 
d°
[4] = 
fg
;

1217 i‡(
	`MWI_BIT_NO
(5Ë& 
bôm≠_byã
)

1218 
d°
[5] = 
fg
;

1219 i‡(
	`MWI_BIT_NO
(6Ë& 
bôm≠_byã
)

1220 
d°
[6] = 
fg
;

1221 i‡(
	`MWI_BIT_NO
(7Ë& 
bôm≠_byã
)

1222 
d°
[7] = 
fg
;

1224 
d°
 += 8;

1228 i‡(
po°fix_œ°_bô
) {

1229 
bôm≠_byã
 = *
§c
++;

1230 
mask
 = 
po°fix_fú°_bô
;

1231 
	`MWI_IS_BIT_BEFORE_OR_EQUAL
(
mask
,

1232 
po°fix_œ°_bô
);

1233 
	`MWI_ADVANCE_BIT
(
mask
)) {

1234 i‡(
mask
 & 
bôm≠_byã
)

1235 *
d°
 = 
fg
;

1236 
d°
++;

1240 
§c
 +
adv™˚_§c
;

1241 
d°
 +
adv™˚_d°
;

1245 
DRAWOFF
;

1247 #unde‡
MWI_IS_BIT_BEFORE_OR_EQUAL


1248 #unde‡
MWI_ADVANCE_BIT


1249 #unde‡
MWI_BIT_NO


1250 #unde‡
MWI_FIRST_BIT


1251 #unde‡
MWI_LAST_BIT


1252 
	}
}

1256 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_MSB_FIRST


1276 
	$löór32a_døw¨ó_bôm≠_byãs_msb_fú°
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
)

1290 
	#MWI_IS_BIT_BEFORE_OR_EQUAL
(
a
,
b
Ë(◊Ë>(b))

	)

1291 
	#MWI_ADVANCE_BIT
(
èrgë
Ë(—¨gëË>>1)

	)

1292 
	#MWI_BIT_NO
(
n
Ë(0x80 >> (n))

	)

1298 
	#MWI_FIRST_BIT
 
	`MWI_BIT_NO
(0)

	)

1299 
	#MWI_LAST_BIT
 
	`MWI_BIT_NO
(7)

	)

1301 
¥efix_fú°_bô
;

1302 
po°fix_fú°_bô
 = 
MWI_FIRST_BIT
;

1303 
po°fix_œ°_bô
;

1304 
bôm≠_byã
;

1305 
mask
;

1306 
fg
, 
bg
;

1307 
fú°_byã
, 
œ°_byã
;

1308 
size_maö
;

1309 
t
, 
y
;

1310 
adv™˚_§c
, 
adv™˚_d°
;

1311 
ADDR8
 
§c
;

1312 
ADDR32
 
d°
;

1315 
¥efix_fú°_bô
 = 
	`MWI_BIT_NO
(
gc
->
§cx
 & 7);

1318 
po°fix_œ°_bô
 = 
	`MWI_BIT_NO
((
gc
->
§cx
 + gc->
d°w
 - 1) & 7);

1321 
fú°_byã
 = 
gc
->
§cx
 >> 3;

1324 
œ°_byã
 = (
gc
->
§cx
 + gc->
d°w
 - 1) >> 3;

1326 
§c
 = ((
ADDR8
Ë
gc
->
pixñs
Ë+ gc->
§c_löñí
 * gc->
§cy
 + 
fú°_byã
;

1327 
d°
 = ((
ADDR32
Ë
psd
->
addr
Ë+Ösd->
löñí
 * 
gc
->
d°y
 + gc->
d°x
;

1328 
fg
 = 
gc
->
fg_cﬁ‹
;

1329 
bg
 = 
gc
->
bg_cﬁ‹
;

1331 
adv™˚_§c
 = 
gc
->
§c_löñí
 - 
œ°_byã
 + 
fú°_byã
 - 1;

1332 
adv™˚_d°
 = 
psd
->
löñí
 - 
gc
->
d°w
;

1334 i‡(
fú°_byã
 !
œ°_byã
) {

1338 
size_maö
 = 
œ°_byã
 - 
fú°_byã
 + 1 - 2;

1340 i‡(
¥efix_fú°_bô
 =
MWI_FIRST_BIT
) {

1342 
¥efix_fú°_bô
 = 0;

1343 
size_maö
++;

1345 i‡(
po°fix_œ°_bô
 =
MWI_LAST_BIT
) {

1347 
po°fix_œ°_bô
 = 0;

1348 
size_maö
++;

1350 } i‡((
¥efix_fú°_bô
 =
MWI_FIRST_BIT
)

1351 && (
po°fix_œ°_bô
 =
MWI_LAST_BIT
)) {

1353 
¥efix_fú°_bô
 = 0;

1354 
po°fix_œ°_bô
 = 0;

1355 
size_maö
 = 1;

1359 
po°fix_fú°_bô
 = 
¥efix_fú°_bô
;

1360 
¥efix_fú°_bô
 = 0;

1361 
size_maö
 = 0;

1364 
DRAWON
;

1366 i‡(
gc
->
gr_u£bg
) {

1367 
y
 = 0; y < 
gc
->
d°h
; y++) {

1370 i‡(
¥efix_fú°_bô
) {

1371 
bôm≠_byã
 = *
§c
++;

1372 
mask
 = 
¥efix_fú°_bô
; mask;

1373 
	`MWI_ADVANCE_BIT
(
mask
)) {

1374 *
d°
++ = (
mask
 & 
bôm≠_byã
Ë? 
fg
 :

1375 
bg
;

1380 
t
 = 
size_maö
;Å != 0;Å--) {

1381 
bôm≠_byã
 = *
§c
++;

1383 *
d°
++ = (
	`MWI_BIT_NO
(0Ë& 
bôm≠_byã
Ë? 
fg
 :

1384 
bg
;

1385 *
d°
++ = (
	`MWI_BIT_NO
(1Ë& 
bôm≠_byã
Ë? 
fg
 :

1386 
bg
;

1387 *
d°
++ = (
	`MWI_BIT_NO
(2Ë& 
bôm≠_byã
Ë? 
fg
 :

1388 
bg
;

1389 *
d°
++ = (
	`MWI_BIT_NO
(3Ë& 
bôm≠_byã
Ë? 
fg
 :

1390 
bg
;

1391 *
d°
++ = (
	`MWI_BIT_NO
(4Ë& 
bôm≠_byã
Ë? 
fg
 :

1392 
bg
;

1393 *
d°
++ = (
	`MWI_BIT_NO
(5Ë& 
bôm≠_byã
Ë? 
fg
 :

1394 
bg
;

1395 *
d°
++ = (
	`MWI_BIT_NO
(6Ë& 
bôm≠_byã
Ë? 
fg
 :

1396 
bg
;

1397 *
d°
++ = (
	`MWI_BIT_NO
(7Ë& 
bôm≠_byã
Ë? 
fg
 :

1398 
bg
;

1402 i‡(
po°fix_œ°_bô
) {

1403 
bôm≠_byã
 = *
§c
++;

1404 
mask
 = 
po°fix_fú°_bô
;

1405 
	`MWI_IS_BIT_BEFORE_OR_EQUAL
(
mask
,

1406 
po°fix_œ°_bô
);

1407 
	`MWI_ADVANCE_BIT
(
mask
)) {

1408 *
d°
++ = (
mask
 & 
bôm≠_byã
Ë? 
fg
 :

1409 
bg
;

1413 
§c
 +
adv™˚_§c
;

1414 
d°
 +
adv™˚_d°
;

1417 
y
 = 0; y < 
gc
->
d°h
; y++) {

1420 i‡(
¥efix_fú°_bô
) {

1421 
bôm≠_byã
 = *
§c
++;

1422 
mask
 = 
¥efix_fú°_bô
; mask;

1423 
	`MWI_ADVANCE_BIT
(
mask
)) {

1424 i‡(
mask
 & 
bôm≠_byã
)

1425 *
d°
 = 
fg
;

1426 
d°
++;

1431 
t
 = 
size_maö
;Å != 0;Å--) {

1432 
bôm≠_byã
 = *
§c
++;

1434 i‡(
	`MWI_BIT_NO
(0Ë& 
bôm≠_byã
)

1435 
d°
[0] = 
fg
;

1436 i‡(
	`MWI_BIT_NO
(1Ë& 
bôm≠_byã
)

1437 
d°
[1] = 
fg
;

1438 i‡(
	`MWI_BIT_NO
(2Ë& 
bôm≠_byã
)

1439 
d°
[2] = 
fg
;

1440 i‡(
	`MWI_BIT_NO
(3Ë& 
bôm≠_byã
)

1441 
d°
[3] = 
fg
;

1442 i‡(
	`MWI_BIT_NO
(4Ë& 
bôm≠_byã
)

1443 
d°
[4] = 
fg
;

1444 i‡(
	`MWI_BIT_NO
(5Ë& 
bôm≠_byã
)

1445 
d°
[5] = 
fg
;

1446 i‡(
	`MWI_BIT_NO
(6Ë& 
bôm≠_byã
)

1447 
d°
[6] = 
fg
;

1448 i‡(
	`MWI_BIT_NO
(7Ë& 
bôm≠_byã
)

1449 
d°
[7] = 
fg
;

1451 
d°
 += 8;

1455 i‡(
po°fix_œ°_bô
) {

1456 
bôm≠_byã
 = *
§c
++;

1457 
mask
 = 
po°fix_fú°_bô
;

1458 
	`MWI_IS_BIT_BEFORE_OR_EQUAL
(
mask
,

1459 
po°fix_œ°_bô
);

1460 
	`MWI_ADVANCE_BIT
(
mask
)) {

1461 i‡(
mask
 & 
bôm≠_byã
)

1462 *
d°
 = 
fg
;

1463 
d°
++;

1467 
§c
 +
adv™˚_§c
;

1468 
d°
 +
adv™˚_d°
;

1472 
DRAWOFF
;

1474 #unde‡
MWI_IS_BIT_BEFORE_OR_EQUAL


1475 #unde‡
MWI_ADVANCE_BIT


1476 #unde‡
MWI_BIT_NO


1477 #unde‡
MWI_FIRST_BIT


1478 #unde‡
MWI_LAST_BIT


1479 
	}
}

1483 #i‡
MW_FEATURE_PSDOP_ALPHACOL


1485 
	$löór32a_døw¨ó_Æphacﬁ
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
)

1487 
ADDR32
 
d°
;

1488 
ADDR8
 
Æpha
;

1489 
ps
, 
pd
;

1490 
as
;

1491 
p§
, 
psg
, 
psb
, 
pß
;

1492 
x
, 
y
;

1493 
§c_row_°ï
, 
d°_row_°ï
;

1495 
Æpha
 = ((
ADDR8
Ë
gc
->
misc
Ë+ gc->
§c_löñí
 * gc->
§cy
 + gc->
§cx
;

1496 
d°
 = ((
ADDR32
Ë
psd
->
addr
Ë+Ösd->
löñí
 * 
gc
->
d°y
 + gc->
d°x
;

1497 
ps
 = 
gc
->
fg_cﬁ‹
;

1498 
p§
 = (Ë(
ps
 & 0x00FF0000UL);

1499 
psg
 = (Ë(
ps
 & 0x0000FF00UL);

1500 
psb
 = (Ë(
ps
 & 0x000000FFUL);

1501 
pß
 = (Ë((
ps
 >> 8) & 0x00FF0000UL);

1503 
§c_row_°ï
 = 
gc
->
§c_löñí
 - gc->
d°w
;

1504 
d°_row_°ï
 = 
psd
->
löñí
 - 
gc
->
d°w
;

1506 
DRAWON
;

1507 
y
 = 0; y < 
gc
->
d°h
; y++) {

1508 
x
 = 0; x < 
gc
->
d°w
; x++) {

1509 
as
 = *
Æpha
++;

1510 i‡(
as
 == 255) {

1511 *
d°
++ = 
ps
;

1512 } i‡(
as
 != 0) {

1524 
as
 = 256 - (as + (as >> 7));

1525 
pd
 = *
d°
;

1527 *
d°
++ = (() ((((()

1528 (
pd
 &

1530 
p§
) *

1531 
as
) >> 8) +

1532 
p§
) &

1536 Ë(((((Ë(
pd
 & 0x0000FF00UL)

1537 - 
psg
Ë* 
as
) >> 8) +

1538 
psg
) & 0x0000FF00UL)

1541 Ë(((((Ë(
pd
 & 0x000000FFUL)

1542 - 
psb
Ë* 
as
) >> 8) +

1543 
psb
) & 0x000000FFUL)

1545 ((
pd
 >> 8) &

1547 - 
pß
Ë* 
as
) +

1548 (
pß
 << 8)) &

1551 
d°
++;

1554 
Æpha
 +
§c_row_°ï
;

1555 
d°
 +
d°_row_°ï
;

1557 
DRAWOFF
;

1558 
	}
}

1562 
	$löór32a_døw¨ó
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
, 
›
)

1564 
	`as£π
(
psd
->
addr
 != 0);

1566 
	`as£π
(
gc
->
d°x
 >0 && gc->d°x + gc->
d°w
 <
psd
->
xªs
);

1569 
	`as£π
(
gc
->
§cy
 >= 0);

1572 
›
) {

1574 #i‡
MW_FEATURE_PSDOP_ALPHACOL


1575 
PSDOP_ALPHACOL
:

1576 
	`löór32a_døw¨ó_Æphacﬁ
(
psd
, 
gc
);

1580 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_LSB_FIRST


1581 
PSDOP_BITMAP_BYTES_LSB_FIRST
:

1582 
	`löór32a_døw¨ó_bôm≠_byãs_lsb_fú°
(
psd
, 
gc
);

1586 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_MSB_FIRST


1587 
PSDOP_BITMAP_BYTES_MSB_FIRST
:

1588 
	`löór32a_døw¨ó_bôm≠_byãs_msb_fú°
(
psd
, 
gc
);

1593 
	}
}

1595 
SUBDRIVER
 
	gfblöór32Æpha
 = {

1596 
löór32a_öô
,

1597 
löór32a_døwpixñ
,

1598 
löór32a_ªadpixñ
,

1599 
löór32a_døwh‹zlöe
,

1600 
löór32a_døwvîéöe
,

1601 
gí_fûÃe˘
,

1602 
löór32a_blô
,

1603 
löór32a_døw¨ó
,

1604 
löór32a_°ªtchblô
,

1605 
löór32a_°ªtchblôex
,

	@drivers/fblin4.c

14 
	~<as£π.h
>

15 
	~<°rög.h
>

16 
	~"devi˚.h
"

17 
	~"fb.h
"

19 #i‡
INVERT4BPP


20 
	#INVERT
(
c
Ë((cË(~¯& 0x0f))

	)

22 
	#INVERT
(
c
)

	)

25 
	gnŸmask
[2] = { 0x0f, 0xf0};

29 
	$löór4_öô
(
PSD
 
psd
)

31 i‡(!
psd
->
size
)

32 
psd
->
size
 =Ösd->
yªs
 *Ösd->
löñí
;

35 
	}
}

39 
	$löór4_døwpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

41 
ADDR8
 
addr
 = 
psd
->addr;

43 
	`as£π
 (
addr
 != 0);

44 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

45 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

46 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

48 
	`INVERT
(
c
);

49 
DRAWON
;

50 
addr
 +(
x
>>1Ë+ 
y
 * 
psd
->
löñí
;

51 if(
gr_mode
 =
MWMODE_XOR
)

52 *
addr
 ^
c
 << ((1-(
x
&1))<<2);

54 *
addr
 = (*add∏& 
nŸmask
[
x
&1]Ë| (
c
 << ((1-(x&1))<<2));

55 
DRAWOFF
;

56 
	}
}

59 
MWPIXELVAL


60 
	$löór4_ªadpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

62 
ADDR8
 
addr
 = 
psd
->addr;

63 
MWPIXELVAL
 
c
;

65 
	`as£π
 (
addr
 != 0);

66 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

67 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

69 
c
 = (
addr
[(
x
>>1Ë+ 
y
 * 
psd
->
löñí
] >> ((1-(x&1))<<2) ) & 0x0f;

70 
	`INVERT
(
c
);

71  
c
;

73 
	}
}

77 
	$löór4_døwh‹zlöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

79 
ADDR8
 
addr
 = 
psd
->addr;

81 
	`as£π
 (
addr
 != 0);

82 
	`as£π
 (
x1
 >0 && x1 < 
psd
->
xªs
);

83 
	`as£π
 (
x2
 >0 && x2 < 
psd
->
xªs
);

84 
	`as£π
 (
x2
 >
x1
);

85 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

86 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

88 
	`INVERT
(
c
);

89 
DRAWON
;

90 
addr
 +(
x1
>>1Ë+ 
y
 * 
psd
->
löñí
;

91 if(
gr_mode
 =
MWMODE_XOR
) {

92 
x1
 <
x2
) {

93 *
addr
 ^
c
 << ((1-(
x1
&1))<<2);

94 if((++
x1
 & 1) == 0)

95 ++
addr
;

98 
x1
 <
x2
) {

99 *
addr
 = (*add∏& 
nŸmask
[
x1
&1]Ë| (
c
 << ((1-(x1&1))<<2));

100 if((++
x1
 & 1) == 0)

101 ++
addr
;

104 
DRAWOFF
;

105 
	}
}

109 
	$löór4_døwvîéöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

111 
ADDR8
 
addr
 = 
psd
->addr;

112 
löñí
 = 
psd
->linelen;

114 
	`as£π
 (
addr
 != 0);

115 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

116 
	`as£π
 (
y1
 >0 && y1 < 
psd
->
yªs
);

117 
	`as£π
 (
y2
 >0 && y2 < 
psd
->
yªs
);

118 
	`as£π
 (
y2
 >
y1
);

119 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

121 
	`INVERT
(
c
);

122 
DRAWON
;

123 
addr
 +(
x
>>1Ë+ 
y1
 * 
löñí
;

124 if(
gr_mode
 =
MWMODE_XOR
)

125 
y1
++ <
y2
) {

126 *
addr
 ^
c
 << ((1-(
x
&1))<<2);

127 
addr
 +
löñí
;

130 
y1
++ <
y2
) {

131 *
addr
 = (*add∏& 
nŸmask
[
x
&1]Ë| (
c
 << ((1-(x&1))<<2));

132 
addr
 +
löñí
;

134 
DRAWOFF
;

135 
	}
}

139 
	$löór4_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

140 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

142 
ADDR8
 
d°
;

143 
ADDR8
 
§c
;

144 
i
;

145 
dlöñí
 = 
d°psd
->
löñí
;

146 
¶öñí
 = 
§˝sd
->
löñí
;

148 
	`as£π
 (
d°psd
->
addr
 != 0);

149 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

150 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

151 
	`as£π
 (
w
 > 0);

152 
	`as£π
 (
h
 > 0);

153 
	`as£π
 (
§˝sd
->
addr
 != 0);

154 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

155 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

156 
	`as£π
 (
d°x
+
w
 <
d°psd
->
xªs
);

157 
	`as£π
 (
d°y
+
h
 <
d°psd
->
yªs
);

158 
	`as£π
 (
§cx
+
w
 <
§˝sd
->
xªs
);

159 
	`as£π
 (
§cy
+
h
 <
§˝sd
->
yªs
);

161 
DRAWON
;

162 
d°
 = ((
ADDR8
)
d°psd
->
addr
Ë+ (
d°x
>>1Ë+ 
d°y
 * 
dlöñí
;

163 
§c
 = ((
ADDR8
)
§˝sd
->
addr
Ë+ (
§cx
>>1Ë+ 
§cy
 * 
¶öñí
;

164 --
h
 >= 0) {

165 
ADDR8
 
d
 = 
d°
;

166 
ADDR8
 
s
 = 
§c
;

167 
MWCOORD
 
dx
 = 
d°x
;

168 
MWCOORD
 
sx
 = 
§cx
;

169 
i
=0; i<
w
; ++i) {

170 #i‡
INVERT4BPP


171 
c
 = *
s
;

172 
	`INVERT
(
c
);

173 *
d
 = (*d & 
nŸmask
[
dx
&1]) |

174 ((
c
 >> ((1-(
sx
&1))<<2Ë& 0x0fË<< ((1-(
dx
&1))<<2));

176 *
d
 = (*d & 
nŸmask
[
dx
&1]) |

177 ((*
s
 >> ((1-(
sx
&1))<<2Ë& 0x0fË<< ((1-(
dx
&1))<<2));

179 if((++
dx
 & 1) == 0)

180 ++
d
;

181 if((++
sx
 & 1) == 0)

182 ++
s
;

184 
d°
 +
dlöñí
;

185 
§c
 +
¶öñí
;

187 
DRAWOFF
;

188 
	}
}

190 
SUBDRIVER
 
	gfblöór4
 = {

191 
löór4_öô
,

192 
löór4_døwpixñ
,

193 
löór4_ªadpixñ
,

194 
löór4_døwh‹zlöe
,

195 
löór4_døwvîéöe
,

196 
gí_fûÃe˘
,

197 
löór4_blô


	@drivers/fblin4hp.c

11 
	~<as£π.h
>

12 
	~<°rög.h
>

13 
	~"devi˚.h
"

14 
	~"fb.h
"

17 
	gnŸmask
[2] = { 0xf0, 0x0f };

18 
	gªvnŸmask
[2] = { 0xf0, 0x0f};

22 
	$löór4_öô
(
PSD
 
psd
)

24 i‡(!
psd
->
size
)

25 
psd
->
size
 =Ösd->
yªs
 *Ösd->
löñí
;

28 
	}
}

32 
MWPIXELVAL


33 
	$löór4_ªadpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

35 
ADDR8
 
addr
 = 
psd
->addr;

37 
	`as£π
 (
addr
 != 0);

38 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

39 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

41  (
addr
[(
x
>>1Ë+ 
y
 * 
psd
->
löñí
] >> (((x&1))<<2) ) & 0x0f;

42 
	}
}

46 
	$löór4_døwvîéöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

48 
ADDR8
 
addr
 = 
psd
->addr;

49 
löñí
 = 
psd
->linelen;

51 
	`as£π
 (
addr
 != 0);

52 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

53 
	`as£π
 (
y1
 >0 && y1 < 
psd
->
yªs
);

54 
	`as£π
 (
y2
 >0 && y2 < 
psd
->
yªs
);

55 
	`as£π
 (
y2
 >
y1
);

56 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

58 
DRAWON
;

59 
addr
 +(
x
>>1Ë+ 
y1
 * 
löñí
;

60 
y1
++ <
y2
) {

61 *
addr
 = (*add∏& 
nŸmask
[
x
&1]Ë| (
c
 << (((x&1))<<2));

62 
addr
 +
löñí
;

64 
DRAWOFF
;

65 
	}
}

71 
	$löór4_døwpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

73 
ADDR8
 
addr
 = 
psd
->addr;

75 
	`as£π
 (
addr
 != 0);

76 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

77 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

78 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

80 
DRAWON
;

81 
addr
 +(
x
>>1Ë+ 
y
 * 
psd
->
löñí
;

85 *
addr
 = (*add∏& 
nŸmask
[
x
&1]Ë| (
c
 << (((x&1))<<2) );

86 
DRAWOFF
;

87 
	}
}

90 
MWPIXELVAL


91 
	$löór4_ªadpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

93 
ADDR8
 
addr
 = 
psd
->addr;

95 
	`as£π
 (
addr
 != 0);

96 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

97 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

99  (
addr
[(
x
>>1Ë+ 
y
 * 
psd
->
löñí
] >> (((x&1))<<2) ) & 0x0f;

100 
	}
}

104 
	$löór4_døwh‹zlöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

106 
ADDR8
 
addr
 = 
psd
->addr;

108 
	`as£π
 (
addr
 != 0);

109 
	`as£π
 (
x1
 >0 && x1 < 
psd
->
xªs
);

110 
	`as£π
 (
x2
 >0 && x2 < 
psd
->
xªs
);

111 
	`as£π
 (
x2
 >
x1
);

112 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

113 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

115 
DRAWON
;

116 
addr
 +(
x1
>>1Ë+ 
y
 * 
psd
->
löñí
;

125 
x1
 <
x2
) {

126 *
addr
 = (*add∏& 
nŸmask
[
x1
&1]Ë| (
c
 << (((x1&1))<<2));

127 if((++
x1
 & 1) == 0)

128 ++
addr
;

131 
DRAWOFF
;

132 
	}
}

136 
	$löór4_døwvîéöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

138 
ADDR8
 
addr
 = 
psd
->addr;

139 
löñí
 = 
psd
->linelen;

141 
	`as£π
 (
addr
 != 0);

142 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

143 
	`as£π
 (
y1
 >0 && y1 < 
psd
->
yªs
);

144 
	`as£π
 (
y2
 >0 && y2 < 
psd
->
yªs
);

145 
	`as£π
 (
y2
 >
y1
);

146 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

148 
DRAWON
;

149 
addr
 +(
x
>>1Ë+ 
y1
 * 
löñí
;

150 
y1
++ <
y2
) {

151 *
addr
 = (*add∏& 
nŸmask
[
x
&1]Ë| (
c
 << (((x&1))<<2));

152 
addr
 +
löñí
;

154 
DRAWOFF
;

155 
	}
}

159 
	$löór4_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

160 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

162 
ADDR8
 
d°
;

163 
ADDR8
 
§c
;

164 
i
;

165 
dlöñí
 = 
d°psd
->
löñí
;

166 
¶öñí
 = 
§˝sd
->
löñí
;

168 
	`as£π
 (
d°psd
->
addr
 != 0);

169 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

170 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

171 
	`as£π
 (
w
 > 0);

172 
	`as£π
 (
h
 > 0);

173 
	`as£π
 (
§˝sd
->
addr
 != 0);

174 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

175 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

176 
	`as£π
 (
d°x
+
w
 <
d°psd
->
xªs
);

177 
	`as£π
 (
d°y
+
h
 <
d°psd
->
yªs
);

178 
	`as£π
 (
§cx
+
w
 <
§˝sd
->
xªs
);

179 
	`as£π
 (
§cy
+
h
 <
§˝sd
->
yªs
);

181 
DRAWON
;

182 
d°
 = 
d°psd
->
addr
 + (
d°x
>>1Ë+ 
d°y
 * 
dlöñí
;

183 
§c
 = 
§˝sd
->
addr
 + (
§cx
>>1Ë+ 
§cy
 * 
¶öñí
;

184 --
h
 >= 0) {

185 
ADDR8
 
d
 = 
d°
;

186 
ADDR8
 
s
 = 
§c
;

187 
MWCOORD
 
dx
 = 
d°x
;

188 
MWCOORD
 
sx
 = 
§cx
;

189 
i
=0; i<
w
; ++i) {

190 *
d
 = (*d & 
nŸmask
[
dx
&1]) |

191 ((*
s
 >> (((
sx
&1))<<2Ë& 0x0fË<< (((
dx
&1))<<2));

192 if((++
dx
 & 1) == 0)

193 ++
d
;

194 if((++
sx
 & 1) == 0)

195 ++
s
;

197 
d°
 +
dlöñí
;

198 
§c
 +
¶öñí
;

200 
DRAWOFF
;

201 
	}
}

213 
	tT8p
;

214 * 
	tP8p
;

217 c⁄° 
T8p
 
	gMasks
[]=

223 c⁄° 
T8p
 
	gMasks2
[]=

228 
ölöe
 
T8p
 
	$ECﬁ‹
(
T8p
 
c
)

230 
c
|= c<<4; c|= c<<8; c|= c<<16;

231 (
c
);

232 
	}
}

237 
ölöe
 
P8p
 
	$PPoöãr
(
P8p
 
m
, 
LöeSize
, 
x
, 
y
)

239 –(
P8p
Ë((()
m
+((
x
>>1)+
y
*
LöeSize
))&~3) );

240 
	}
}

243 
öt£t
(*
d
, 
vÆue
, 
nbI¡s
);

245 
	#sw≠
(
t
, 
a
, 
b
Ë{Å 
ãmp
a;áb; bãmp; }

	)

248 
	$löór41_døwpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

250 
P8p
 
p

	`PPoöãr
(
psd
->
addr
,Ösd->
löñí
, 
x
, 
y
);

251 
DRAWON
;

252 
x
= (x&0x7)<<2;

253 *
p
((*p)&~(0xf<<
x
))|(
c
<<x);

254 
DRAWOFF
;

255 
	}
}

289 
	$öt£t2
(*
p
, 
v
, 
c
Ë{ c>0Ë{ c--; *p++v; } 
	}
}

292 
	$löór41_døwh‹zlöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

294 
T8p
 
Mask1
, 
Mask2
;

295 
P8p
 
p
;

296 
DRAWON
;

297 i‡(
x1
>
x2
Ë
	`sw≠
(, x1, x2);

299 
x2
x2-
x1
+1;

300 
p

	`PPoöãr
(
psd
->
addr
,Ösd->
löñí
, 
x1
, 
y
);

301 
x1
&= 7;

302 
Mask1

Masks
[
x1
];

303 
Mask2

Masks2
[(
x1
+
x2
)&7];

304 
x2
(
x1
+x2+7)>>3;

305 
c

	`ECﬁ‹
(c);

306 
x2
)

309 1: 
Mask1
Mask1|~
Mask2
; *
p
(*p&Mask1)|(
c
&~Mask1); ;

310 2: *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p(*p&~
Mask2
)|(c&Mask2); ;

311 3: *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p(*p&~
Mask2
)|(c&Mask2); ;

312 4: *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2); ;

313 5: *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2); ;

314 6: *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2); ;

315 7: *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2); ;

316 8: *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2); ;

317 9: *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2); ;

318 10: *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2); ;

319 11: *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2); ;

320 12: *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2); ;

321 13: *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2); ;

322 14: *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2); ;

323 15: *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2); ;

325 
x2
-= 2;

326 *
p
++(*p&
Mask1
)|(
c
&~Mask1);

327 
	`öt£t
(
p
, 
c
, 
x2
);

328 *(
p
+
x2
)(*’+x2)&~
Mask2
)|(
c
&Mask2);

331 
DRAWOFF
;

332 
	}
}

335 
	$löór41_døwvîéöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

337 
P8p
 
p
; 
T8p
 
m
; 
d
;

338 
DRAWON
;

339 i‡(
y1
>
y2
Ë
	`sw≠
(, y1, y2);

340 
y2
y2-
y1
+1;

341 
p

	`PPoöãr
(
psd
->
addr
,Ösd->
löñí
, 
x
, 
y1
);

342 
c
<<(
x
&7)<<2;

343 
m
(0xf<<((
x
&7)<<2));

344 
d

psd
->
löñí
 >> 2;

345 ;
y2
!=0; y2--Ë{ *
p
(*p&~
m
)|
c
;Ö+
d
; }

346 
DRAWOFF
;

347 
	}
}

350 
	$löór41_fûÃe˘
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
y1
, MWCOORD 
x2
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

352 
d
;

353 
T8p
 
Mask1
, 
Mask2
;

354 
P8p
 
p
;

355 i‡(
x1
>
x2
Ë
	`sw≠
(, x1, x2);

356 i‡(
y1
>
y2
Ë
	`sw≠
(, y1, y2);

357 
DRAWON
;

358 
x2
x2-
x1
+1;

359 
p

	`PPoöãr
(
psd
->
addr
,Ösd->
löñí
, 
x1
, 
y1
);

360 
d
(
psd
->
löñí
)>>2;

361 
x1
&= 7;

362 
Mask1

Masks
[
x1
];

363 
Mask2

Masks2
[(
x1
+
x2
)&7];

364 
x2
(
x1
+x2+7)>>3;

365 
c

	`ECﬁ‹
(c);

366 
y2
-
y1
-1;

368 
x2
)

371 1: 
Mask1
Mask1|~
Mask2
; ; 
y2
!=0; y2--Ë{ *
p
(*p&Mask1)|(
c
&~Mask1);Ö+=
d
; } ;

372 2: 
d
d-
x2
+1; ; 
y2
!=0; y2--Ë{ *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p(*p&~
Mask2
)|(c&Mask2);Ö+=d; } ;

373 3: 
d
d-
x2
+1; ; 
y2
!=0; y2--Ë{ *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p(*p&~
Mask2
)|(c&Mask2);Ö+=d; } ;

374 4: 
d
d-
x2
+1; ; 
y2
!=0; y2--Ë{ *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2);Ö+=d; } ;

375 5: 
d
d-
x2
+1; ; 
y2
!=0; y2--Ë{ *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2);Ö+=d; } ;

376 6: 
d
d-
x2
+1; ; 
y2
!=0; y2--Ë{ *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2);Ö+=d; } ;

377 7: 
d
d-
x2
+1; ; 
y2
!=0; y2--Ë{ *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2);Ö+=d; } ;

378 8: 
d
d-
x2
+1; ; 
y2
!=0; y2--Ë{ *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2);Ö+=d; } ;

379 9: 
d
d-
x2
+1; ; 
y2
!=0; y2--Ë{ *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2);Ö+=d; } ;

380 10: 
d
d-
x2
+1; ; 
y2
!=0; y2--Ë{ *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2);Ö+=d; } ;

381 11: 
d
d-
x2
+1; ; 
y2
!=0; y2--Ë{ *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2);Ö+=d; } ;

382 12: 
d
d-
x2
+1; ; 
y2
!=0; y2--Ë{ *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2);Ö+=d; } ;

383 13: 
d
d-
x2
+1; ; 
y2
!=0; y2--Ë{ *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2);Ö+=d; } ;

384 14: 
d
d-
x2
+1; ; 
y2
!=0; y2--Ë{ *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2);Ö+=d; } ;

385 15: 
d
d-
x2
+1; ; 
y2
!=0; y2--Ë{ *
p
++(*p&
Mask1
)|(
c
&~Mask1); *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p++c; *p(*p&~
Mask2
)|(c&Mask2);Ö+=d; } ;

387 
d
--; 
x2
-= 2;

388 ; 
y2
!=0; y2--)

390 *
p
++(*p&
Mask1
)|(
c
&~Mask1);

391 
	`öt£t
(
p
, 
c
, 
x2
);

392 *(
p
+
x2
)(*’+x2)&~
Mask2
)|(
c
&Mask2);

393 
p
+
d
;

397 
DRAWOFF
;

398 
	}
}

400 
	~"SubRïl.h
"

403 
	$löór41_blô
(
PSD
 
d°psd
, 
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
w
, MWCOORD 
h
, PSD 
§˝sd
, MWCOORD 
sx
, MWCOORD 
sy
, 
›
)

405 
ds
, 
ss
, 
shi·
;

406 
T8p
 
Mask1
, 
Mask2
;

408 
P8p
 
dD©a

	`PPoöãr
(
d°psd
->
addr
, d°psd->
löñí
, 
x
, 
y
);

409 
P8p
 
sD©a

	`PPoöãr
(
§˝sd
->
addr
, sr˝sd->
löñí
, 
sx
, 
sy
);

411 
x
&=7; 
sx
&=7;

412 
shi·
(
x
-
sx
)<<2;

413 
Mask1

Masks
[
x
];

414 
Mask2

Masks2
[(
x
+
w
)&7];

416 
w
-1+((w+
x
+7)>>3);

418 
ds
(
d°psd
->
löñí
>>2)-
w
;

419 
ss
(
§˝sd
->
löñí
>>2)-
w
;

423 i‡(
shi·
!=0)

425 (4&(
shi·
>>28))|(
w
>2?3:w))

427 0: 
	`B…_Shi·_Posôif_w0
(
sD©a
, 
dD©a
, 
ss
, 
ds
, 
shi·
, 
Mask1
, 
Mask2
, 
w
-1, 
h
); ;

428 1: 
	`B…_Shi·_Posôif_w1
(
sD©a
, 
dD©a
, 
ss
, 
ds
, 
shi·
, 
Mask1
, 
Mask2
, 
w
-1, 
h
); ;

429 2: 
	`B…_Shi·_Posôif_w2
(
sD©a
, 
dD©a
, 
ss
, 
ds
, 
shi·
, 
Mask1
, 
Mask2
, 
w
-1, 
h
); ;

430 3: 
	`B…_Shi·_Posôif
 (
sD©a
, 
dD©a
, 
ss
, 
ds
, 
shi·
, 
Mask1
, 
Mask2
, 
w
-1, 
h
); ;

431 4: 
	`B…_Shi·_Neg©if_w0
(
sD©a
, 
dD©a
, 
ss
, 
ds
, 
shi·
, 
Mask1
, 
Mask2
, 
w
-1, 
h
); ;

432 5: 
	`B…_Shi·_Neg©if_w1
(
sD©a
, 
dD©a
, 
ss
, 
ds
, 
shi·
, 
Mask1
, 
Mask2
, 
w
-1, 
h
); ;

433 6: 
	`B…_Shi·_Neg©if_w2
(
sD©a
, 
dD©a
, 
ss
, 
ds
, 
shi·
, 
Mask1
, 
Mask2
, 
w
-1, 
h
); ;

434 7: 
	`B…_Shi·_Neg©if
 (
sD©a
, 
dD©a
, 
ss
, 
ds
, 
shi·
, 
Mask1
, 
Mask2
, 
w
-1, 
h
); ;

438 
w
)

440 0: 
	`B…_Shi·_NuŒ_w0
 (
sD©a
, 
dD©a
, 
ss
, 
ds
, 
shi·
, 
Mask1
, 
Mask2
, 
w
-1, 
h
); ;

441 1: 
	`B…_Shi·_NuŒ_w1
 (
sD©a
, 
dD©a
, 
ss
, 
ds
, 
shi·
, 
Mask1
, 
Mask2
, 
w
-1, 
h
); ;

442 2: 
	`B…_Shi·_NuŒ_w2
 (
sD©a
, 
dD©a
, 
ss
, 
ds
, 
shi·
, 
Mask1
, 
Mask2
, 
w
-1, 
h
); ;

443 3: 
	`B…_Shi·_NuŒ_w3
 (
sD©a
, 
dD©a
, 
ss
, 
ds
, 
shi·
, 
Mask1
, 
Mask2
, 
w
-1, 
h
); ;

444 : 
	`B…_Shi·_NuŒ
 (
sD©a
, 
dD©a
, 
ss
, 
ds
, 
shi·
, 
Mask1
, 
Mask2
, 
w
-1, 
h
); ;

447 
	}
}

451 
	$löór4_°ªtchblô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
d°w
,

452 
MWCOORD
 
d°h
, 
PSD
 
§˝sd
, MWCOORD 
§cx
, MWCOORD 
§cy
, MWCOORD 
§cw
,

453 
MWCOORD
 
§ch
, 
›
)

455 
ADDR8
 
d°
;

456 
ADDR8
 
§c
;

457 
dlöñí
 = 
d°psd
->
löñí
;

458 
¶öñí
 = 
§˝sd
->
löñí
;

459 
i
, 
ymax
;

460 
row_pos
, 
row_öc
;

461 
cﬁ_pos
, 
cﬁ_öc
;

462 
pixñ
 = 0;

464 
	`as£π
 (
d°psd
->
addr
 != 0);

465 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

466 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

467 
	`as£π
 (
d°w
 > 0);

468 
	`as£π
 (
d°h
 > 0);

469 
	`as£π
 (
§˝sd
->
addr
 != 0);

470 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

471 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

472 
	`as£π
 (
§cw
 > 0);

473 
	`as£π
 (
§ch
 > 0);

474 
	`as£π
 (
d°x
+
d°w
 <
d°psd
->
xªs
);

475 
	`as£π
 (
d°y
+
d°h
 <
d°psd
->
yªs
);

476 
	`as£π
 (
§cx
+
§cw
 <
§˝sd
->
xªs
);

477 
	`as£π
 (
§cy
+
§ch
 <
§˝sd
->
yªs
);

479 
DRAWON
;

480 
row_pos
 = 0x10000;

481 
row_öc
 = (
§ch
 << 16Ë/ 
d°h
;

484 
ymax
 = 
d°y
+
d°h
; dsty<ymax; ++dsty) {

485 
MWCOORD
 
dx
;

486 
MWCOORD
 
sx
;

489 
row_pos
 >= 0x10000L) {

490 ++
§cy
;

491 
row_pos
 -= 0x10000L;

494 
d°
 = 
d°psd
->
addr
 + (
d°x
>>1Ë+ 
d°y
*
dlöñí
;

495 
§c
 = 
§˝sd
->
addr
 + (
§cx
>>1Ë+ (
§cy
-1)*
¶öñí
;

498 
cﬁ_pos
 = 0x10000;

499 
cﬁ_öc
 = (
§cw
 << 16Ë/ 
d°w
;

500 
sx
 = 
§cx
;

501 
dx
 = 
d°x
;

502 
i
=0; i<
d°w
; ++i) {

504 
cﬁ_pos
 >= 0x10000L) {

506 
pixñ
 = (*
§c
 >> ((1-(
sx
&1))<<2) ) & 0x0f;

507 i‡(++
sx
 & 1)

508 ++
§c
;

509 
cﬁ_pos
 -= 0x10000L;

511 *
d°
 = (*d° & 
nŸmask
[
dx
&1]Ë| (
pixñ
 << (((dx&1))<<2) );

513 i‡(++
dx
 & 1)

514 ++
d°
;

515 
cﬁ_pos
 +
cﬁ_öc
;

518 
row_pos
 +
row_öc
;

520 
DRAWOFF
;

521 
	}
}

524 
SUBDRIVER
 
	gfblöór4
 = {

525 
löór4_öô
,

526 
löór41_døwpixñ
,

527 
löór4_ªadpixñ
,

528 
löór41_døwh‹zlöe
,

529 
löór4_døwvîéöe
,

530 
löór41_fûÃe˘
,

531 
löór41_blô
,

532 
NULL
,

533 
löór4_°ªtchblô


536 
SUBDRIVER
 
	gfblöór4
 = {

537 
löór4_öô
,

538 
löór4_døwpixñ
,

539 
löór4_ªadpixñ
,

540 
löór4_døwh‹zlöe
,

541 
löór4_døwvîéöe
,

542 
gí_fûÃe˘
,

543 
löór4_blô
,

544 
NULL
,

545 
löór4_°ªtchblô


	@drivers/fblin4orion.c

17 
	~<°dio.h
>

18 
	~<as£π.h
>

19 
	~<°rög.h
>

20 
	~"devi˚.h
"

21 
	~"fb.h
"

24 
	#REMAP
(
c
Ë((cË(~¯& 0x0f))

	)

25 
	gªm≠
[16] = { 15,13,11,9,7,5,3,1,14,12,10,8,6,4,2,0 };

28 
	#REMAP_BACK
(
c
Ë((cË(~¯& 0x0f))

	)

29 
	gªm≠_back
[16] = { 15,7,14,6,13,5,12,4,11,3,10,2,9,1,8,0 };

31 
	gnŸmask
[2] = { 0x0f, 0xf0};

35 
	$löór4_öô
(
PSD
 
psd
)

37 i‡(!
psd
->
size
)

38 
psd
->
size
 =Ösd->
yªs
 *Ösd->
löñí
;

41 
	}
}

45 
	$löór4_døwpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

47 
ADDR8
 
addr
 = 
psd
->addr;

49 
	`as£π
 (
addr
 != 0);

50 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

51 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

52 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

54 
	`REMAP
(
c
);

55 
DRAWON
;

56 
addr
 +(
x
>>1Ë+ 
y
 * 
psd
->
löñí
;

57 if(
gr_mode
 =
MWMODE_XOR
)

58 *
addr
 ^
c
 << ((1-(
x
&1))<<2);

60 *
addr
 = (*add∏& 
nŸmask
[!(
x
&1)]Ë| (
c
 << ((1-(!(x&1)))<<2));

61 
DRAWOFF
;

62 
	}
}

65 
MWPIXELVAL


66 
	$löór4_ªadpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

68 
ADDR8
 
addr
 = 
psd
->addr;

69 
MWPIXELVAL
 
c
;

71 
	`as£π
 (
addr
 != 0);

72 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

73 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

75 
c
 = (
addr
[(
x
>>1Ë+ 
y
 * 
psd
->
löñí
] >> ((1-(!(x&1)))<<2) ) & 0x0f;

76 
	`REMAP_BACK
(
c
);

77  
c
;

79 
	}
}

83 
	$löór4_døwh‹zlöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

85 
ADDR8
 
addr
 = 
psd
->addr;

87 
	`as£π
 (
addr
 != 0);

88 
	`as£π
 (
x1
 >0 && x1 < 
psd
->
xªs
);

89 
	`as£π
 (
x2
 >0 && x2 < 
psd
->
xªs
);

90 
	`as£π
 (
x2
 >
x1
);

91 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

92 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

95 
	`REMAP
(
c
);

96 
DRAWON
;

97 
addr
 +(
x1
>>1Ë+ 
y
 * 
psd
->
löñí
;

98 if(
gr_mode
 =
MWMODE_XOR
) {

99 
x1
 <
x2
) {

100 *
addr
 ^
c
 << ((1-(
x1
&1))<<2);

101 if((++
x1
 & 1) == 0)

102 ++
addr
;

105 
x1
 <
x2
) {

106 *
addr
 = (*add∏& 
nŸmask
[!(
x1
&1)]Ë| (
c
 << ((1-(!(x1&1)))<<2));

107 if((++
x1
 & 1) == 0)

108 ++
addr
;

111 
DRAWOFF
;

112 
	}
}

116 
	$löór4_døwvîéöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

118 
ADDR8
 
addr
 = 
psd
->addr;

119 
löñí
 = 
psd
->linelen;

121 
	`as£π
 (
addr
 != 0);

122 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

123 
	`as£π
 (
y1
 >0 && y1 < 
psd
->
yªs
);

124 
	`as£π
 (
y2
 >0 && y2 < 
psd
->
yªs
);

125 
	`as£π
 (
y2
 >
y1
);

126 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

128 
	`REMAP
(
c
);

129 
DRAWON
;

130 
addr
 +(
x
>>1Ë+ 
y1
 * 
löñí
;

131 if(
gr_mode
 =
MWMODE_XOR
)

132 
y1
++ <
y2
) {

133 *
addr
 ^
c
 << ((1-(
x
&1))<<2);

134 
addr
 +
löñí
;

137 
y1
++ <
y2
) {

138 *
addr
 = (*add∏& 
nŸmask
[!(
x
&1)]Ë| (
c
 << ((1-(!(x&1)))<<2));

139 
addr
 +
löñí
;

141 
DRAWOFF
;

142 
	}
}

146 
	$löór4_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

147 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

149 
ADDR8
 
d°
;

150 
ADDR8
 
§c
;

151 
i
;

152 
dlöñí
 = 
d°psd
->
löñí
;

153 
¶öñí
 = 
§˝sd
->
löñí
;

155 
	`as£π
 (
d°psd
->
addr
 != 0);

156 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

157 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

158 
	`as£π
 (
w
 > 0);

159 
	`as£π
 (
h
 > 0);

160 
	`as£π
 (
§˝sd
->
addr
 != 0);

161 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

162 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

163 
	`as£π
 (
d°x
+
w
 <
d°psd
->
xªs
);

164 
	`as£π
 (
d°y
+
h
 <
d°psd
->
yªs
);

165 
	`as£π
 (
§cx
+
w
 <
§˝sd
->
xªs
);

166 
	`as£π
 (
§cy
+
h
 <
§˝sd
->
yªs
);

168 
DRAWON
;

169 
d°
 = 
d°psd
->
addr
 + (
d°x
>>1Ë+ 
d°y
 * 
dlöñí
;

170 
§c
 = 
§˝sd
->
addr
 + (
§cx
>>1Ë+ 
§cy
 * 
¶öñí
;

171 --
h
 >= 0) {

172 
ADDR8
 
d
 = 
d°
;

173 
ADDR8
 
s
 = 
§c
;

174 
MWCOORD
 
dx
 = 
d°x
;

175 
MWCOORD
 
sx
 = 
§cx
;

176 
i
=0; i<
w
; ++i) {

177 
c
 = *
s
;

178 
	`REMAP
(
c
);

179 *
d
 = (*d & 
nŸmask
[!(
dx
&1)]) |

180 ((
c
 >> ((1-(!(
sx
&1)))<<2Ë& 0x0fË<< ((1-(!(
dx
&1)))<<2));

181 if((++
dx
 & 1) == 0)

182 ++
d
;

183 if((++
sx
 & 1) == 0)

184 ++
s
;

186 
d°
 +
dlöñí
;

187 
§c
 +
¶öñí
;

189 
DRAWOFF
;

190 
	}
}

192 
SUBDRIVER
 
	gfblöór4
 = {

193 
löór4_öô
,

194 
löór4_døwpixñ
,

195 
löór4_ªadpixñ
,

196 
löór4_døwh‹zlöe
,

197 
löór4_døwvîéöe
,

198 
gí_fûÃe˘
,

199 
löór4_blô


	@drivers/fblin4rev.c

12 
	~<as£π.h
>

13 
	~<°rög.h
>

14 
	~"devi˚.h
"

15 
	~"fb.h
"

17 #i‡
INVERT4BPP


18 
	#INVERT
(
c
Ë((cË(~¯& 0x0f))

	)

20 
	#INVERT
(
c
)

	)

23 
	gnŸmask
[2] = { 0xf0, 0x0f};

27 
	$löór4_öô
(
PSD
 
psd
)

29 i‡(!
psd
->
size
)

30 
psd
->
size
 =Ösd->
yªs
 *Ösd->
löñí
;

33 
	}
}

37 
	$löór4_døwpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

39 
ADDR8
 
addr
 = 
psd
->addr;

41 
	`as£π
 (
addr
 != 0);

42 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

43 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

44 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

46 
	`INVERT
(
c
);

47 
DRAWON
;

48 
addr
 +(
x
>>1Ë+ 
y
 * 
psd
->
löñí
;

49 if(
gr_mode
 =
MWMODE_XOR
)

50 *
addr
 ^
c
 << ((
x
&1)<<2);

52 *
addr
 = (*add∏& 
nŸmask
[
x
&1]Ë| (
c
 << ((x&1)<<2));

53 
DRAWOFF
;

54 
	}
}

57 
MWPIXELVAL


58 
	$löór4_ªadpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

60 
ADDR8
 
addr
 = 
psd
->addr;

61 
MWPIXELVAL
 
c
;

63 
	`as£π
 (
addr
 != 0);

64 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

65 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

67 
c
 = (
addr
[(
x
>>1Ë+ 
y
 * 
psd
->
löñí
] >> ((x&1)<<2) ) & 0x0f;

68 
	`INVERT
(
c
);

69  
c
;

71 
	}
}

75 
	$löór4_døwh‹zlöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

77 
ADDR8
 
addr
 = 
psd
->addr;

79 
	`as£π
 (
addr
 != 0);

80 
	`as£π
 (
x1
 >0 && x1 < 
psd
->
xªs
);

81 
	`as£π
 (
x2
 >0 && x2 < 
psd
->
xªs
);

82 
	`as£π
 (
x2
 >
x1
);

83 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

84 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

86 
	`INVERT
(
c
);

87 
DRAWON
;

88 
addr
 +(
x1
>>1Ë+ 
y
 * 
psd
->
löñí
;

89 if(
gr_mode
 =
MWMODE_XOR
) {

90 
x1
 <
x2
) {

91 *
addr
 ^
c
 << ((
x1
&1)<<2);

92 if((++
x1
 & 1) == 0)

93 ++
addr
;

96 
x1
 <
x2
) {

97 *
addr
 = (*add∏& 
nŸmask
[
x1
&1]Ë| (
c
 << ((x1&1)<<2));

98 if((++
x1
 & 1) == 0)

99 ++
addr
;

102 
DRAWOFF
;

103 
	}
}

107 
	$löór4_døwvîéöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

109 
ADDR8
 
addr
 = 
psd
->addr;

110 
löñí
 = 
psd
->linelen;

112 
	`as£π
 (
addr
 != 0);

113 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

114 
	`as£π
 (
y1
 >0 && y1 < 
psd
->
yªs
);

115 
	`as£π
 (
y2
 >0 && y2 < 
psd
->
yªs
);

116 
	`as£π
 (
y2
 >
y1
);

117 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

119 
	`INVERT
(
c
);

120 
DRAWON
;

121 
addr
 +(
x
>>1Ë+ 
y1
 * 
löñí
;

122 if(
gr_mode
 =
MWMODE_XOR
)

123 
y1
++ <
y2
) {

124 *
addr
 ^
c
 << ((
x
&1)<<2);

125 
addr
 +
löñí
;

128 
y1
++ <
y2
) {

129 *
addr
 = (*add∏& 
nŸmask
[
x
&1]Ë| (
c
 << ((x&1)<<2));

130 
addr
 +
löñí
;

132 
DRAWOFF
;

133 
	}
}

137 
	$löór4_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

138 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

140 
ADDR8
 
d°
;

141 
ADDR8
 
§c
;

142 
i
;

143 
dlöñí
 = 
d°psd
->
löñí
;

144 
¶öñí
 = 
§˝sd
->
löñí
;

146 
	`as£π
 (
d°psd
->
addr
 != 0);

147 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

148 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

149 
	`as£π
 (
w
 > 0);

150 
	`as£π
 (
h
 > 0);

151 
	`as£π
 (
§˝sd
->
addr
 != 0);

152 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

153 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

154 
	`as£π
 (
d°x
+
w
 <
d°psd
->
xªs
);

155 
	`as£π
 (
d°y
+
h
 <
d°psd
->
yªs
);

156 
	`as£π
 (
§cx
+
w
 <
§˝sd
->
xªs
);

157 
	`as£π
 (
§cy
+
h
 <
§˝sd
->
yªs
);

159 
DRAWON
;

160 
d°
 = 
d°psd
->
addr
 + (
d°x
>>1Ë+ 
d°y
 * 
dlöñí
;

161 
§c
 = 
§˝sd
->
addr
 + (
§cx
>>1Ë+ 
§cy
 * 
¶öñí
;

162 --
h
 >= 0) {

163 
ADDR8
 
d
 = 
d°
;

164 
ADDR8
 
s
 = 
§c
;

165 
MWCOORD
 
dx
 = 
d°x
;

166 
MWCOORD
 
sx
 = 
§cx
;

167 
i
=0; i<
w
; ++i) {

168 #i‡
INVERT4BPP


169 
c
 = *
s
;

170 
	`INVERT
(
c
);

171 *
d
 = (*d & 
nŸmask
[
dx
&1]) |

172 ((
c
 >> ((
sx
&1)<<2Ë& 0x0fË<< ((
dx
&1)<<2));

174 *
d
 = (*d & 
nŸmask
[
dx
&1]) |

175 ((*
s
 >> ((
sx
&1)<<2Ë& 0x0fË<< ((
dx
&1)<<2));

177 if((++
dx
 & 1) == 0)

178 ++
d
;

179 if((++
sx
 & 1) == 0)

180 ++
s
;

182 
d°
 +
dlöñí
;

183 
§c
 +
¶öñí
;

185 
DRAWOFF
;

186 
	}
}

188 
SUBDRIVER
 
	gfblöór4
 = {

189 
löór4_öô
,

190 
löór4_døwpixñ
,

191 
löór4_ªadpixñ
,

192 
löór4_døwh‹zlöe
,

193 
löór4_døwvîéöe
,

194 
gí_fûÃe˘
,

195 
löór4_blô


	@drivers/fblin4sa1100.c

11 
	~<as£π.h
>

12 
	~<°rög.h
>

13 
	~"devi˚.h
"

14 
	~"fb.h
"

16 
	gnŸmask
[4] = { 0x0fff, 0xf0ff, 0xff0f, 0xfff0};

20 
	$löór4_öô
(
PSD
 
psd
)

22 i‡(!
psd
->
size
)

23 
psd
->
size
 =Ösd->
yªs
 *Ösd->
löñí
;

26 
	}
}

31 
	$löór4_døwpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

33 
ADDR8
 
addr
 = 
psd
->addr;

35 
	`as£π
 (
addr
 != 0);

36 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

37 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

38 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

40 
DRAWON
;

41 
addr
 +(
x
>>1Ë+ 
y
 * 
psd
->
löñí
;

42 if(
gr_mode
 =
MWMODE_XOR
)

43 *(
ADDR16
)
addr
 ^
c
 << ((3-(
x
&3))<<2);

45 *(
ADDR16
)
addr
 = (*(ADDR16Ôdd∏& 
nŸmask
[
x
&3]Ë| (
c
 << ((3-(x&3))<<2));

46 
DRAWOFF
;

47 
	}
}

50 
MWPIXELVAL


51 
	$löór4_ªadpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

53 
ADDR8
 
addr
 = 
psd
->addr;

55 
	`as£π
 (
addr
 != 0);

56 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

57 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

59  (
addr
[(
x
>>1Ë+ 
y
 * 
psd
->
löñí
] >> ((1-(x&1))<<2) ) & 0x0f;

60 
	}
}

64 
	$löór4_døwh‹zlöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

66 
ADDR8
 
addr
 = 
psd
->addr;

68 
	`as£π
 (
addr
 != 0);

69 
	`as£π
 (
x1
 >0 && x1 < 
psd
->
xªs
);

70 
	`as£π
 (
x2
 >0 && x2 < 
psd
->
xªs
);

71 
	`as£π
 (
x2
 >
x1
);

72 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

73 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

75 
DRAWON
;

76 
addr
 +(
x1
>>1Ë+ 
y
 * 
psd
->
löñí
;

77 if(
gr_mode
 =
MWMODE_XOR
) {

78 
x1
 <
x2
) {

79 *(
ADDR16
)
addr
 ^
c
 << ((3-(
x1
&3))<<2);

80 if((++
x1
 & 1) == 0)

81 ++
addr
;

84 
x1
 <
x2
) {

85 *(
ADDR16
)
addr
 = (*(ADDR16Ôdd∏& 
nŸmask
[
x1
&3]Ë| (
c
 << ((3-(x1&3))<<2));

86 if((++
x1
 & 1) == 0)

87 ++
addr
;

90 
DRAWOFF
;

91 
	}
}

95 
	$löór4_døwvîéöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

97 
ADDR8
 
addr
 = 
psd
->addr;

98 
löñí
 = 
psd
->linelen;

100 
	`as£π
 (
addr
 != 0);

101 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

102 
	`as£π
 (
y1
 >0 && y1 < 
psd
->
yªs
);

103 
	`as£π
 (
y2
 >0 && y2 < 
psd
->
yªs
);

104 
	`as£π
 (
y2
 >
y1
);

105 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

107 
DRAWON
;

108 
addr
 +(
x
>>1Ë+ 
y1
 * 
löñí
;

109 if(
gr_mode
 =
MWMODE_XOR
)

110 
y1
++ <
y2
) {

111 *(
ADDR16
)
addr
 ^
c
 << ((3-(
x
&3))<<2);

112 
addr
 +
löñí
;

115 
y1
++ <
y2
) {

116 *(
ADDR16
)
addr
 = (*(ADDR16Ôdd∏& 
nŸmask
[
x
&3]Ë| (
c
 << ((3-(x&3))<<2));

117 
addr
 +
löñí
;

119 
DRAWOFF
;

120 
	}
}

124 
	$löór4_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

125 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

127 
ADDR8
 
d°
;

128 
ADDR8
 
§c
;

129 
i
;

130 
dlöñí
 = 
d°psd
->
löñí
;

131 
¶öñí
 = 
§˝sd
->
löñí
;

133 
	`as£π
 (
d°psd
->
addr
 != 0);

134 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

135 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

136 
	`as£π
 (
w
 > 0);

137 
	`as£π
 (
h
 > 0);

138 
	`as£π
 (
§˝sd
->
addr
 != 0);

139 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

140 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

141 
	`as£π
 (
d°x
+
w
 <
d°psd
->
xªs
);

142 
	`as£π
 (
d°y
+
h
 <
d°psd
->
yªs
);

143 
	`as£π
 (
§cx
+
w
 <
§˝sd
->
xªs
);

144 
	`as£π
 (
§cy
+
h
 <
§˝sd
->
yªs
);

146 
DRAWON
;

147 
d°
 = 
d°psd
->
addr
 + (
d°x
>>1Ë+ 
d°y
 * 
dlöñí
;

148 
§c
 = 
§˝sd
->
addr
 + (
§cx
>>1Ë+ 
§cy
 * 
¶öñí
;

149 --
h
 >= 0) {

150 
ADDR8
 
d
 = 
d°
;

151 
ADDR8
 
s
 = 
§c
;

152 
MWCOORD
 
dx
 = 
d°x
;

153 
MWCOORD
 
sx
 = 
§cx
;

154 
i
=0; i<
w
; ++i) {

155 *(
ADDR16
)
d
 = (*(ADDR16)d & 
nŸmask
[
dx
&3]) |

156 ((*(
ADDR16
)
s
 >> ((3-(
sx
&3))<<2Ë& 0x000fË<< ((3-(
dx
&3))<<2));

157 if((++
dx
 & 1) == 0)

158 ++
d
;

159 if((++
sx
 & 1) == 0)

160 ++
s
;

162 
d°
 +
dlöñí
;

163 
§c
 +
¶öñí
;

165 
DRAWOFF
;

166 
	}
}

168 
SUBDRIVER
 
	gfblöór4
 = {

169 
löór4_öô
,

170 
löór4_døwpixñ
,

171 
löór4_ªadpixñ
,

172 
löór4_døwh‹zlöe
,

173 
löór4_døwvîéöe
,

174 
gí_fûÃe˘
,

175 
löór4_blô


	@drivers/fblin4sh3.c

21 
	~<as£π.h
>

22 
	~<°rög.h
>

23 
	~"devi˚.h
"

24 
	~"fb.h
"

26 
	gnŸmask
[2] = { 0x0f, 0xf0};

30 
	$löór4_öô
(
PSD
 
psd
)

32 i‡(!
psd
->
size
)

33 
psd
->
size
 =Ösd->
yªs
 *Ösd->
löñí
;

36 
	}
}

40 
	$löór4_døwpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

42 
ADDR8
 
addr
 = 
psd
->addr;

44 
	`as£π
 (
addr
 != 0);

45 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

46 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

47 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

49 
DRAWON
;

50 
addr
 +((
x
>>1)^3Ë+ 
y
 * 
psd
->
löñí
;

51 if(
gr_mode
 =
MWMODE_XOR
)

52 *
addr
 ^
c
 << ((1-(
x
&1))<<2);

54 *
addr
 = (*add∏& 
nŸmask
[
x
&1]Ë| (
c
 << ((1-(x&1))<<2));

55 
DRAWOFF
;

56 
	}
}

59 
MWPIXELVAL


60 
	$löór4_ªadpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

62 
ADDR8
 
addr
 = 
psd
->addr;

64 
	`as£π
 (
addr
 != 0);

65 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

66 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

68  (
addr
[((
x
>>1)^3Ë+ 
y
 * 
psd
->
löñí
] >> ((1-(x&1))<<2) ) & 0x0f;

69 
	}
}

73 
	$löór4_døwh‹zlöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

75 
ADDR8
 
addr
 = 
psd
->addr;

77 
	`as£π
 (
addr
 != 0);

78 
	`as£π
 (
x1
 >0 && x1 < 
psd
->
xªs
);

79 
	`as£π
 (
x2
 >0 && x2 < 
psd
->
xªs
);

80 
	`as£π
 (
x2
 >
x1
);

81 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

82 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

84 
DRAWON
;

85 
addr
 +–(
x1
>>1)^3 ) + 
y
 * 
psd
->
löñí
;

86 if(
gr_mode
 =
MWMODE_XOR
) {

87 
x1
 <
x2
) {

88 *
addr
 ^
c
 << ((1-(
x1
&1))<<2);

89 if((++
x1
 & 1) == 0) {

91 
addr
 = 
psd
->add∏+ ( (
x1
>>1)^3 ) + 
y
 *Ösd->
löñí
;

95 
x1
 <
x2
) {

96 *
addr
 = (*add∏& 
nŸmask
[
x1
&1]Ë| (
c
 << ((1-(x1&1))<<2));

97 if((++
x1
 & 1) == 0) {

99 
addr
 = 
psd
->add∏+ ( (
x1
>>1)^3 ) + 
y
 *Ösd->
löñí
;

103 
DRAWOFF
;

104 
	}
}

108 
	$löór4_døwvîéöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

110 
ADDR8
 
addr
 = 
psd
->addr;

111 
löñí
 = 
psd
->linelen;

113 
	`as£π
 (
addr
 != 0);

114 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

115 
	`as£π
 (
y1
 >0 && y1 < 
psd
->
yªs
);

116 
	`as£π
 (
y2
 >0 && y2 < 
psd
->
yªs
);

117 
	`as£π
 (
y2
 >
y1
);

118 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

120 
DRAWON
;

121 
addr
 +–(
x
>>1)^3 ) + 
y1
 * 
löñí
;

122 if(
gr_mode
 =
MWMODE_XOR
)

123 
y1
++ <
y2
) {

124 *
addr
 ^
c
 << ((1-(
x
&1))<<2);

125 
addr
 +
löñí
;

128 
y1
++ <
y2
) {

129 *
addr
 = (*add∏& 
nŸmask
[
x
&1]Ë| (
c
 << ((1-(x&1))<<2));

130 
addr
 +
löñí
;

132 
DRAWOFF
;

133 
	}
}

137 
	$löór4_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

138 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

140 
ADDR8
 
d°
;

141 
ADDR8
 
§c
;

142 
i
;

143 
dlöñí
 = 
d°psd
->
löñí
;

144 
¶öñí
 = 
§˝sd
->
löñí
;

146 
	`as£π
 (
d°psd
->
addr
 != 0);

147 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

148 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

149 
	`as£π
 (
w
 > 0);

150 
	`as£π
 (
h
 > 0);

151 
	`as£π
 (
§˝sd
->
addr
 != 0);

152 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

153 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

154 
	`as£π
 (
d°x
+
w
 <
d°psd
->
xªs
);

155 
	`as£π
 (
d°y
+
h
 <
d°psd
->
yªs
);

156 
	`as£π
 (
§cx
+
w
 <
§˝sd
->
xªs
);

157 
	`as£π
 (
§cy
+
h
 <
§˝sd
->
yªs
);

159 
DRAWON
;

160 #ifde‡
SH3_LITTLE_ENDIAN


161 
d°
 = 
d°psd
->
addr
 + ( (
d°x
>>1)^3 ) + 
d°y
 * 
dlöñí
;

162 
§c
 = 
§˝sd
->
addr
 + ( (
§cx
>>1)^3 ) + 
§cy
 * 
¶öñí
;

163 --
h
 >= 0) {

164 
ADDR8
 
d
 = 
d°
;

165 
ADDR8
 
s
 = 
§c
;

166 
MWCOORD
 
dx
 = 
d°x
;

167 
MWCOORD
 
sx
 = 
§cx
;

168 
i
=0; i<
w
; ++i) {

169 *
d
 = (*d & 
nŸmask
[
dx
&1]) |

170 ((*
s
 >> ((1-(
sx
&1))<<2Ë& 0x0fË<< ((1-(
dx
&1))<<2));

171 if((++
dx
 & 1) == 0)

172 ++
d
;

173 if((++
sx
 & 1) == 0)

174 ++
s
;

176 
d°
 +
dlöñí
;

177 
§c
 +
¶öñí
;

180 
d°
 = 
d°psd
->
addr
 + 
d°y
 * 
dlöñí
;

181 
§c
 = 
§˝sd
->
addr
 + 
§cy
 * 
¶öñí
;

182 --
h
 >= 0) {

183 
ADDR8
 
d
 = 
d°
 + ( (
d°x
>>1)^3 );

184 
ADDR8
 
s
 = 
§c
 + ( (
§cx
>>1)^3 );

185 
MWCOORD
 
dx
 = 
d°x
;

186 
MWCOORD
 
sx
 = 
§cx
;

187 
i
=0; i<
w
; ++i) {

188 *
d
 = (*d & 
nŸmask
[
dx
&1]) |

189 ((*
s
 >> ((1-(
sx
&1))<<2Ë& 0x0fË<< ((1-(
dx
&1))<<2));

190 if((++
dx
 & 1) == 0)

191 
d
 = 
d°
 + ( (
dx
 >> 1)^3 );

192 if((++
sx
 & 1) == 0)

193 
s
 = 
§c
 + ( (
sx
 >> 1)^3 );

195 
d°
 +
dlöñí
;

196 
§c
 +
¶öñí
;

199 
DRAWOFF
;

200 
	}
}

202 
SUBDRIVER
 
	gfblöór4
 = {

203 
löór4_öô
,

204 
löór4_døwpixñ
,

205 
löór4_ªadpixñ
,

206 
löór4_døwh‹zlöe
,

207 
löór4_døwvîéöe
,

208 
gí_fûÃe˘
,

209 
löór4_blô


	@drivers/fblin8.c

11 
	~<as£π.h
>

14 #i‚de‡
__OPTIMIZE__


15 
	#__OPTIMIZE__


	)

17 
	~<°rög.h
>

19 
	~"devi˚.h
"

20 
	~"fb.h
"

22 #i‡
ALPHABLEND


33 *
	gÆpha_to_rgb
 = 
NULL
;

34 *
	grgb_to_∑lödex
 = 
NULL
;

35 
öô_Æpha_lookup
();

40 
	$löór8_öô
(
PSD
 
psd
)

42 i‡(!
psd
->
size
)

43 
psd
->
size
 =Ösd->
yªs
 *Ösd->
löñí
;

46 
	}
}

50 
	$löór8_døwpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

52 
ADDR8
 
addr
 = 
psd
->addr;

54 
	`as£π
 (
addr
 != 0);

55 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

56 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

57 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

59 
DRAWON
;

60 if(
gr_mode
 =
MWMODE_COPY
)

61 
addr
[
x
 + 
y
 * 
psd
->
löñí
] = 
c
;

63 
	`≠∂yOp
(
gr_mode
, 
c
, &
addr
[ 
x
 + 
y
 * 
psd
->
löñí
], 
ADDR8
);

64 
DRAWOFF
;

65 
	}
}

68 
MWPIXELVAL


69 
	$löór8_ªadpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

71 
ADDR8
 
addr
 = 
psd
->addr;

73 
	`as£π
 (
addr
 != 0);

74 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

75 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

77  
addr
[
x
 + 
y
 * 
psd
->
löñí
];

78 
	}
}

82 
	$löór8_døwh‹zlöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

84 
ADDR8
 
addr
 = 
psd
->addr;

86 
	`as£π
 (
addr
 != 0);

87 
	`as£π
 (
x1
 >0 && x1 < 
psd
->
xªs
);

88 
	`as£π
 (
x2
 >0 && x2 < 
psd
->
xªs
);

89 
	`as£π
 (
x2
 >
x1
);

90 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

91 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

93 
DRAWON
;

94 
addr
 +
x1
 + 
y
 * 
psd
->
löñí
;

95 if(
gr_mode
 =
MWMODE_COPY
)

96 
	`mem£t
(
addr
, 
c
, 
x2
 - 
x1
 + 1);

98 
x1
++ <
x2
) {

99 
	`≠∂yOp
(
gr_mode
, 
c
, 
addr
, 
ADDR8
);

100 ++
addr
;

103 
DRAWOFF
;

104 
	}
}

108 
	$löór8_døwvîéöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

110 
ADDR8
 
addr
 = 
psd
->addr;

111 
löñí
 = 
psd
->linelen;

113 
	`as£π
 (
addr
 != 0);

114 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

115 
	`as£π
 (
y1
 >0 && y1 < 
psd
->
yªs
);

116 
	`as£π
 (
y2
 >0 && y2 < 
psd
->
yªs
);

117 
	`as£π
 (
y2
 >
y1
);

118 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

120 
DRAWON
;

121 
addr
 +
x
 + 
y1
 * 
löñí
;

122 if(
gr_mode
 =
MWMODE_COPY
) {

123 
y1
++ <
y2
) {

124 *
addr
 = 
c
;

125 
addr
 +
löñí
;

128 
y1
++ <
y2
) {

129 
	`≠∂yOp
(
gr_mode
, 
c
, 
addr
, 
ADDR8
);

130 
addr
 +
löñí
;

133 
DRAWOFF
;

134 
	}
}

138 
	$löór8_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

139 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

141 
ADDR8
 
d°
;

142 
ADDR8
 
§c
;

143 
dlöñí
 = 
d°psd
->
löñí
;

144 
¶öñí
 = 
§˝sd
->
löñí
;

145 #i‡
ALPHABLEND


146 
§ˇÕha
, 
d°Æpha
;

149 
	`as£π
 (
d°psd
->
addr
 != 0);

150 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

151 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

152 
	`as£π
 (
w
 > 0);

153 
	`as£π
 (
h
 > 0);

154 
	`as£π
 (
§˝sd
->
addr
 != 0);

155 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

156 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

157 
	`as£π
 (
d°x
+
w
 <
d°psd
->
xªs
);

158 
	`as£π
 (
d°y
+
h
 <
d°psd
->
yªs
);

159 
	`as£π
 (
§cx
+
w
 <
§˝sd
->
xªs
);

160 
	`as£π
 (
§cy
+
h
 <
§˝sd
->
yªs
);

162 
DRAWON
;

163 
d°
 = ((
ADDR8
)
d°psd
->
addr
Ë+ 
d°x
 + 
d°y
 * 
dlöñí
;

164 
§c
 = ((
ADDR8
)
§˝sd
->
addr
Ë+ 
§cx
 + 
§cy
 * 
¶öñí
;

166 #i‡
ALPHABLEND


167 if((
›
 & 
MWROP_EXTENSION
Ë!
MWROP_BLENDCONSTANT
)

168 
°dblô
;

169 
§ˇÕha
 = 
›
 & 0xff;

172 if(!
rgb_to_∑lödex
 || !
Æpha_to_rgb
) {

173 
	`öô_Æpha_lookup
();

174 if(!
rgb_to_∑lödex
 || !
Æpha_to_rgb
)

175 
°dblô
;

181 
d°Æpha
 = ((
§ˇÕha
>>3) ^ 31) << 8;

182 
§ˇÕha
 = (srcalpha>>3) << 8;

184 --
h
 >= 0) {

185 
i
;

186 
i
=0; i<
w
; ++i) {

188 
s
 = 
Æpha_to_rgb
[
§ˇÕha
 + *
§c
++];

191 
d
 = 
Æpha_to_rgb
[
d°Æpha
 + *
d°
];

194 *
d°
++ = 
rgb_to_∑lödex
[
s
 + 
d
];

196 
d°
 +
dlöñí
 - 
w
;

197 
§c
 +
¶öñí
 - 
w
;

199 
DRAWOFF
;

201 
°dblô
:

203 i‡(
›
 =
MWROP_COPY
) {

206 i‡(
§cy
 < 
d°y
) {

207 
§c
 +(
h
-1Ë* 
¶öñí
;

208 
d°
 +(
h
-1Ë* 
dlöñí
;

209 
¶öñí
 *= -1;

210 
dlöñí
 *= -1;

213 --
h
 >= 0) {

215 
	`memmove
(
d°
, 
§c
, 
w
);

216 
d°
 +
dlöñí
;

217 
§c
 +
¶öñí
;

220 --
h
 >= 0) {

221 
i
;

222 
i
=0; i<
w
; i++) {

223 
	`≠∂yOp
(
	`MWROP_TO_MODE
(
›
), *
§c
, 
d°
, 
ADDR8
);

224 ++
§c
;

225 ++
d°
;

227 
d°
 +
dlöñí
 - 
w
;

228 
§c
 +
¶öñí
 - 
w
;

231 
DRAWOFF
;

232 
	}
}

236 
	$löór8_°ªtchblô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
d°w
,

237 
MWCOORD
 
d°h
, 
PSD
 
§˝sd
, MWCOORD 
§cx
, MWCOORD 
§cy
, MWCOORD 
§cw
,

238 
MWCOORD
 
§ch
, 
›
)

240 
ADDR8
 
d°
;

241 
ADDR8
 
§c
;

242 
dlöñí
 = 
d°psd
->
löñí
;

243 
¶öñí
 = 
§˝sd
->
löñí
;

244 
i
, 
ymax
;

245 
row_pos
, 
row_öc
;

246 
cﬁ_pos
, 
cﬁ_öc
;

247 
pixñ
 = 0;

249 
	`as£π
 (
d°psd
->
addr
 != 0);

250 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

251 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

252 
	`as£π
 (
d°w
 > 0);

253 
	`as£π
 (
d°h
 > 0);

254 
	`as£π
 (
§˝sd
->
addr
 != 0);

255 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

256 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

257 
	`as£π
 (
§cw
 > 0);

258 
	`as£π
 (
§ch
 > 0);

259 
	`as£π
 (
d°x
+
d°w
 <
d°psd
->
xªs
);

260 
	`as£π
 (
d°y
+
d°h
 <
d°psd
->
yªs
);

261 
	`as£π
 (
§cx
+
§cw
 <
§˝sd
->
xªs
);

262 
	`as£π
 (
§cy
+
§ch
 <
§˝sd
->
yªs
);

264 
DRAWON
;

265 
row_pos
 = 0x10000;

266 
row_öc
 = (
§ch
 << 16Ë/ 
d°h
;

269 
ymax
 = 
d°y
+
d°h
; dsty<ymax; ++dsty) {

272 
row_pos
 >= 0x10000L) {

273 ++
§cy
;

274 
row_pos
 -= 0x10000L;

277 
d°
 = ((
ADDR8
)
d°psd
->
addr
Ë+ 
d°x
 + 
d°y
*
dlöñí
;

278 
§c
 = ((
ADDR8
)
§˝sd
->
addr
Ë+ 
§cx
 + (
§cy
-1)*
¶öñí
;

281 
cﬁ_pos
 = 0x10000;

282 
cﬁ_öc
 = (
§cw
 << 16Ë/ 
d°w
;

283 
i
=0; i<
d°w
; ++i) {

285 
cﬁ_pos
 >= 0x10000L) {

286 
pixñ
 = *
§c
++;

287 
cﬁ_pos
 -= 0x10000L;

289 *
d°
++ = 
pixñ
;

290 
cﬁ_pos
 +
cﬁ_öc
;

293 
row_pos
 +
row_öc
;

295 
DRAWOFF
;

296 
	}
}

298 #i‡
ALPHABLEND


300 
	$öô_Æpha_lookup
()

302 
i
, 
a
;

303 
r
, 
g
, 
b
;

304 
MWPALENTRY
 
gr_∑Àâe
[256];

306 if(!
Æpha_to_rgb
)

307 
Æpha_to_rgb
 = (*)
	`mÆloc
(

309 if(!
rgb_to_∑lödex
)

310 
rgb_to_∑lödex
 = (*)
	`mÆloc
(

312 if(!
rgb_to_∑lödex
 || !
Æpha_to_rgb
)

320 
i
=0; i<256; ++i) {

321 
MWPALENTRY
 *
p
 = &
gr_∑Àâe
[
i
];

322 
a
=0;á<32; ++a) {

323 
Æpha_to_rgb
[(
a
<<8)+
i
] =

324 (((
p
->
r
 * 
a
 / 31)>>3) << 10) |

325 (((
p
->
g
 * 
a
 / 31)>>3) << 5) |

326 ((
p
->
b
 * 
a
 / 31)>>3);

334 
r
=0;Ñ<32; ++r) {

335 
g
=0; g<32; ++g)

336 
b
=0; b<32; ++b)

337 
rgb_to_∑lödex
[ (
r
<<10)|(
g
<<5)|
b
] =

338 
	`GdFödNóª°Cﬁ‹
(
gr_∑Àâe
, 256,

339 
	`MWRGB
(
r
<<3, 
g
<<3, 
b
<<3));

341 
	}
}

344 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_LSB_FIRST


367 
	$löór8_døw¨ó_bôm≠_byãs_lsb_fú°
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
)

381 
	#MWI_IS_BIT_BEFORE_OR_EQUAL
(
a
,
b
Ë(◊Ë<(b))

	)

382 
	#MWI_ADVANCE_BIT
(
èrgë
Ë(—¨gëË<<1)

	)

383 
	#MWI_BIT_NO
(
n
Ë(0x01 << (n))

	)

389 
	#MWI_FIRST_BIT
 
	`MWI_BIT_NO
(0)

	)

390 
	#MWI_LAST_BIT
 
	`MWI_BIT_NO
(7)

	)

392 
¥efix_fú°_bô
;

393 
po°fix_fú°_bô
 = 
MWI_FIRST_BIT
;

394 
po°fix_œ°_bô
;

395 
bôm≠_byã
;

396 
mask
;

397 
fg
, 
bg
;

398 
fú°_byã
, 
œ°_byã
;

399 
size_maö
;

400 
t
, 
y
;

401 
adv™˚_§c
, 
adv™˚_d°
;

402 
ADDR8
 
§c
;

403 
ADDR8
 
d°
;

406 
¥efix_fú°_bô
 = 
	`MWI_BIT_NO
(
gc
->
§cx
 & 7);

409 
po°fix_œ°_bô
 = 
	`MWI_BIT_NO
((
gc
->
§cx
 + gc->
d°w
 - 1) & 7);

412 
fú°_byã
 = 
gc
->
§cx
 >> 3;

415 
œ°_byã
 = (
gc
->
§cx
 + gc->
d°w
 - 1) >> 3;

417 
§c
 = ((
ADDR8
Ë
gc
->
pixñs
Ë+ gc->
§c_löñí
 * gc->
§cy
 + 
fú°_byã
;

418 
d°
 = ((
ADDR8
Ë
psd
->
addr
Ë+Ösd->
löñí
 * 
gc
->
d°y
 + gc->
d°x
;

419 
fg
 = 
gc
->
fg_cﬁ‹
;

420 
bg
 = 
gc
->
bg_cﬁ‹
;

422 
adv™˚_§c
 = 
gc
->
§c_löñí
 - 
œ°_byã
 + 
fú°_byã
 - 1;

423 
adv™˚_d°
 = 
psd
->
löñí
 - 
gc
->
d°w
;

425 i‡(
fú°_byã
 !
œ°_byã
) {

429 
size_maö
 = 
œ°_byã
 - 
fú°_byã
 + 1 - 2;

431 i‡(
¥efix_fú°_bô
 =
MWI_FIRST_BIT
) {

433 
¥efix_fú°_bô
 = 0;

434 
size_maö
++;

436 i‡(
po°fix_œ°_bô
 =
MWI_LAST_BIT
) {

438 
po°fix_œ°_bô
 = 0;

439 
size_maö
++;

441 } i‡((
¥efix_fú°_bô
 =
MWI_FIRST_BIT
)

442 && (
po°fix_œ°_bô
 =
MWI_LAST_BIT
)) {

444 
¥efix_fú°_bô
 = 0;

445 
po°fix_œ°_bô
 = 0;

446 
size_maö
 = 1;

450 
po°fix_fú°_bô
 = 
¥efix_fú°_bô
;

451 
¥efix_fú°_bô
 = 0;

452 
size_maö
 = 0;

455 
DRAWON
;

457 i‡(
gc
->
gr_u£bg
) {

458 
y
 = 0; y < 
gc
->
d°h
; y++) {

461 i‡(
¥efix_fú°_bô
) {

462 
bôm≠_byã
 = *
§c
++;

463 
mask
 = 
¥efix_fú°_bô
; mask;

464 
	`MWI_ADVANCE_BIT
(
mask
)) {

465 *
d°
++ = (
mask
 & 
bôm≠_byã
Ë? 
fg
 :

466 
bg
;

471 
t
 = 
size_maö
;Å != 0;Å--) {

472 
bôm≠_byã
 = *
§c
++;

474 *
d°
++ = (
	`MWI_BIT_NO
(0Ë& 
bôm≠_byã
Ë? 
fg
 :

475 
bg
;

476 *
d°
++ = (
	`MWI_BIT_NO
(1Ë& 
bôm≠_byã
Ë? 
fg
 :

477 
bg
;

478 *
d°
++ = (
	`MWI_BIT_NO
(2Ë& 
bôm≠_byã
Ë? 
fg
 :

479 
bg
;

480 *
d°
++ = (
	`MWI_BIT_NO
(3Ë& 
bôm≠_byã
Ë? 
fg
 :

481 
bg
;

482 *
d°
++ = (
	`MWI_BIT_NO
(4Ë& 
bôm≠_byã
Ë? 
fg
 :

483 
bg
;

484 *
d°
++ = (
	`MWI_BIT_NO
(5Ë& 
bôm≠_byã
Ë? 
fg
 :

485 
bg
;

486 *
d°
++ = (
	`MWI_BIT_NO
(6Ë& 
bôm≠_byã
Ë? 
fg
 :

487 
bg
;

488 *
d°
++ = (
	`MWI_BIT_NO
(7Ë& 
bôm≠_byã
Ë? 
fg
 :

489 
bg
;

493 i‡(
po°fix_œ°_bô
) {

494 
bôm≠_byã
 = *
§c
++;

495 
mask
 = 
po°fix_fú°_bô
;

496 
	`MWI_IS_BIT_BEFORE_OR_EQUAL
(
mask
,

497 
po°fix_œ°_bô
);

498 
	`MWI_ADVANCE_BIT
(
mask
)) {

499 *
d°
++ = (
mask
 & 
bôm≠_byã
Ë? 
fg
 :

500 
bg
;

504 
§c
 +
adv™˚_§c
;

505 
d°
 +
adv™˚_d°
;

508 
y
 = 0; y < 
gc
->
d°h
; y++) {

511 i‡(
¥efix_fú°_bô
) {

512 
bôm≠_byã
 = *
§c
++;

513 
mask
 = 
¥efix_fú°_bô
; mask;

514 
	`MWI_ADVANCE_BIT
(
mask
)) {

515 i‡(
mask
 & 
bôm≠_byã
)

516 *
d°
 = 
fg
;

517 
d°
++;

522 
t
 = 
size_maö
;Å != 0;Å--) {

523 
bôm≠_byã
 = *
§c
++;

525 i‡(
	`MWI_BIT_NO
(0Ë& 
bôm≠_byã
)

526 
d°
[0] = 
fg
;

527 i‡(
	`MWI_BIT_NO
(1Ë& 
bôm≠_byã
)

528 
d°
[1] = 
fg
;

529 i‡(
	`MWI_BIT_NO
(2Ë& 
bôm≠_byã
)

530 
d°
[2] = 
fg
;

531 i‡(
	`MWI_BIT_NO
(3Ë& 
bôm≠_byã
)

532 
d°
[3] = 
fg
;

533 i‡(
	`MWI_BIT_NO
(4Ë& 
bôm≠_byã
)

534 
d°
[4] = 
fg
;

535 i‡(
	`MWI_BIT_NO
(5Ë& 
bôm≠_byã
)

536 
d°
[5] = 
fg
;

537 i‡(
	`MWI_BIT_NO
(6Ë& 
bôm≠_byã
)

538 
d°
[6] = 
fg
;

539 i‡(
	`MWI_BIT_NO
(7Ë& 
bôm≠_byã
)

540 
d°
[7] = 
fg
;

542 
d°
 += 8;

546 i‡(
po°fix_œ°_bô
) {

547 
bôm≠_byã
 = *
§c
++;

548 
mask
 = 
po°fix_fú°_bô
;

549 
	`MWI_IS_BIT_BEFORE_OR_EQUAL
(
mask
,

550 
po°fix_œ°_bô
);

551 
	`MWI_ADVANCE_BIT
(
mask
)) {

552 i‡(
mask
 & 
bôm≠_byã
)

553 *
d°
 = 
fg
;

554 
d°
++;

558 
§c
 +
adv™˚_§c
;

559 
d°
 +
adv™˚_d°
;

563 
DRAWOFF
;

565 #unde‡
MWI_IS_BIT_BEFORE_OR_EQUAL


566 #unde‡
MWI_ADVANCE_BIT


567 #unde‡
MWI_BIT_NO


568 #unde‡
MWI_FIRST_BIT


569 #unde‡
MWI_LAST_BIT


570 
	}
}

574 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_MSB_FIRST


594 
	$löór8_døw¨ó_bôm≠_byãs_msb_fú°
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
)

608 
	#MWI_IS_BIT_BEFORE_OR_EQUAL
(
a
,
b
Ë(◊Ë>(b))

	)

609 
	#MWI_ADVANCE_BIT
(
èrgë
Ë(—¨gëË>>1)

	)

610 
	#MWI_BIT_NO
(
n
Ë(0x80 >> (n))

	)

616 
	#MWI_FIRST_BIT
 
	`MWI_BIT_NO
(0)

	)

617 
	#MWI_LAST_BIT
 
	`MWI_BIT_NO
(7)

	)

619 
¥efix_fú°_bô
;

620 
po°fix_fú°_bô
 = 
MWI_FIRST_BIT
;

621 
po°fix_œ°_bô
;

622 
bôm≠_byã
;

623 
mask
;

624 
fg
, 
bg
;

625 
fú°_byã
, 
œ°_byã
;

626 
size_maö
;

627 
t
, 
y
;

628 
adv™˚_§c
, 
adv™˚_d°
;

629 
ADDR8
 
§c
;

630 
ADDR8
 
d°
;

633 
¥efix_fú°_bô
 = 
	`MWI_BIT_NO
(
gc
->
§cx
 & 7);

636 
po°fix_œ°_bô
 = 
	`MWI_BIT_NO
((
gc
->
§cx
 + gc->
d°w
 - 1) & 7);

639 
fú°_byã
 = 
gc
->
§cx
 >> 3;

642 
œ°_byã
 = (
gc
->
§cx
 + gc->
d°w
 - 1) >> 3;

644 
§c
 = ((
ADDR8
Ë
gc
->
pixñs
Ë+ gc->
§c_löñí
 * gc->
§cy
 + 
fú°_byã
;

645 
d°
 = ((
ADDR8
Ë
psd
->
addr
Ë+Ösd->
löñí
 * 
gc
->
d°y
 + gc->
d°x
;

646 
fg
 = 
gc
->
fg_cﬁ‹
;

647 
bg
 = 
gc
->
bg_cﬁ‹
;

649 
adv™˚_§c
 = 
gc
->
§c_löñí
 - 
œ°_byã
 + 
fú°_byã
 - 1;

650 
adv™˚_d°
 = 
psd
->
löñí
 - 
gc
->
d°w
;

652 i‡(
fú°_byã
 !
œ°_byã
) {

656 
size_maö
 = 
œ°_byã
 - 
fú°_byã
 + 1 - 2;

658 i‡(
¥efix_fú°_bô
 =
MWI_FIRST_BIT
) {

660 
¥efix_fú°_bô
 = 0;

661 
size_maö
++;

663 i‡(
po°fix_œ°_bô
 =
MWI_LAST_BIT
) {

665 
po°fix_œ°_bô
 = 0;

666 
size_maö
++;

668 } i‡((
¥efix_fú°_bô
 =
MWI_FIRST_BIT
)

669 && (
po°fix_œ°_bô
 =
MWI_LAST_BIT
)) {

671 
¥efix_fú°_bô
 = 0;

672 
po°fix_œ°_bô
 = 0;

673 
size_maö
 = 1;

677 
po°fix_fú°_bô
 = 
¥efix_fú°_bô
;

678 
¥efix_fú°_bô
 = 0;

679 
size_maö
 = 0;

682 
DRAWON
;

684 i‡(
gc
->
gr_u£bg
) {

685 
y
 = 0; y < 
gc
->
d°h
; y++) {

688 i‡(
¥efix_fú°_bô
) {

689 
bôm≠_byã
 = *
§c
++;

690 
mask
 = 
¥efix_fú°_bô
; mask;

691 
	`MWI_ADVANCE_BIT
(
mask
)) {

692 *
d°
++ = (
mask
 & 
bôm≠_byã
Ë? 
fg
 :

693 
bg
;

698 
t
 = 
size_maö
;Å != 0;Å--) {

699 
bôm≠_byã
 = *
§c
++;

701 *
d°
++ = (
	`MWI_BIT_NO
(0Ë& 
bôm≠_byã
Ë? 
fg
 :

702 
bg
;

703 *
d°
++ = (
	`MWI_BIT_NO
(1Ë& 
bôm≠_byã
Ë? 
fg
 :

704 
bg
;

705 *
d°
++ = (
	`MWI_BIT_NO
(2Ë& 
bôm≠_byã
Ë? 
fg
 :

706 
bg
;

707 *
d°
++ = (
	`MWI_BIT_NO
(3Ë& 
bôm≠_byã
Ë? 
fg
 :

708 
bg
;

709 *
d°
++ = (
	`MWI_BIT_NO
(4Ë& 
bôm≠_byã
Ë? 
fg
 :

710 
bg
;

711 *
d°
++ = (
	`MWI_BIT_NO
(5Ë& 
bôm≠_byã
Ë? 
fg
 :

712 
bg
;

713 *
d°
++ = (
	`MWI_BIT_NO
(6Ë& 
bôm≠_byã
Ë? 
fg
 :

714 
bg
;

715 *
d°
++ = (
	`MWI_BIT_NO
(7Ë& 
bôm≠_byã
Ë? 
fg
 :

716 
bg
;

720 i‡(
po°fix_œ°_bô
) {

721 
bôm≠_byã
 = *
§c
++;

722 
mask
 = 
po°fix_fú°_bô
;

723 
	`MWI_IS_BIT_BEFORE_OR_EQUAL
(
mask
,

724 
po°fix_œ°_bô
);

725 
	`MWI_ADVANCE_BIT
(
mask
)) {

726 *
d°
++ = (
mask
 & 
bôm≠_byã
Ë? 
fg
 :

727 
bg
;

731 
§c
 +
adv™˚_§c
;

732 
d°
 +
adv™˚_d°
;

735 
y
 = 0; y < 
gc
->
d°h
; y++) {

738 i‡(
¥efix_fú°_bô
) {

739 
bôm≠_byã
 = *
§c
++;

740 
mask
 = 
¥efix_fú°_bô
; mask;

741 
	`MWI_ADVANCE_BIT
(
mask
)) {

742 i‡(
mask
 & 
bôm≠_byã
)

743 *
d°
 = 
fg
;

744 
d°
++;

749 
t
 = 
size_maö
;Å != 0;Å--) {

750 
bôm≠_byã
 = *
§c
++;

752 i‡(
	`MWI_BIT_NO
(0Ë& 
bôm≠_byã
)

753 
d°
[0] = 
fg
;

754 i‡(
	`MWI_BIT_NO
(1Ë& 
bôm≠_byã
)

755 
d°
[1] = 
fg
;

756 i‡(
	`MWI_BIT_NO
(2Ë& 
bôm≠_byã
)

757 
d°
[2] = 
fg
;

758 i‡(
	`MWI_BIT_NO
(3Ë& 
bôm≠_byã
)

759 
d°
[3] = 
fg
;

760 i‡(
	`MWI_BIT_NO
(4Ë& 
bôm≠_byã
)

761 
d°
[4] = 
fg
;

762 i‡(
	`MWI_BIT_NO
(5Ë& 
bôm≠_byã
)

763 
d°
[5] = 
fg
;

764 i‡(
	`MWI_BIT_NO
(6Ë& 
bôm≠_byã
)

765 
d°
[6] = 
fg
;

766 i‡(
	`MWI_BIT_NO
(7Ë& 
bôm≠_byã
)

767 
d°
[7] = 
fg
;

769 
d°
 += 8;

773 i‡(
po°fix_œ°_bô
) {

774 
bôm≠_byã
 = *
§c
++;

775 
mask
 = 
po°fix_fú°_bô
;

776 
	`MWI_IS_BIT_BEFORE_OR_EQUAL
(
mask
,

777 
po°fix_œ°_bô
);

778 
	`MWI_ADVANCE_BIT
(
mask
)) {

779 i‡(
mask
 & 
bôm≠_byã
)

780 *
d°
 = 
fg
;

781 
d°
++;

785 
§c
 +
adv™˚_§c
;

786 
d°
 +
adv™˚_d°
;

790 
DRAWOFF
;

792 #unde‡
MWI_IS_BIT_BEFORE_OR_EQUAL


793 #unde‡
MWI_ADVANCE_BIT


794 #unde‡
MWI_BIT_NO


795 #unde‡
MWI_FIRST_BIT


796 #unde‡
MWI_LAST_BIT


797 
	}
}

802 
	$löór8_døw¨ó
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
, 
›
)

804 
	`as£π
(
psd
->
addr
 != 0);

806 
	`as£π
(
gc
->
d°x
 >0 && gc->d°x + gc->
d°w
 <
psd
->
xªs
);

809 
	`as£π
(
gc
->
§cy
 >= 0);

812 
	`¥ötf
("löór32_døw¨ó op=%d d°x=%d d°y=%d\n", 
›
, 
gc
->
d°x
,

813 
gc
->
d°y
);

816 
›
) {

819 #i‡
MW_FEATURE_PSDOP_ALPHACOL


820 
PSDOP_ALPHACOL
:

821 
	`löór8_døw¨ó_Æphacﬁ
(
psd
, 
gc
);

826 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_LSB_FIRST


827 
PSDOP_BITMAP_BYTES_LSB_FIRST
:

828 
	`löór8_døw¨ó_bôm≠_byãs_lsb_fú°
(
psd
, 
gc
);

832 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_MSB_FIRST


833 
PSDOP_BITMAP_BYTES_MSB_FIRST
:

834 
	`löór8_døw¨ó_bôm≠_byãs_msb_fú°
(
psd
, 
gc
);

839 
	}
}

842 
SUBDRIVER
 
	gfblöór8
 = {

843 
löór8_öô
,

844 
löór8_døwpixñ
,

845 
löór8_ªadpixñ
,

846 
löór8_døwh‹zlöe
,

847 
löór8_døwvîéöe
,

848 
gí_fûÃe˘
,

849 
löór8_blô
,

850 
löór8_døw¨ó
,

851 
löór8_°ªtchblô


	@drivers/fbportrait_down.c

6 
	~<as£π.h
>

7 
	~<°dio.h
>

8 
	~<°dlib.h
>

9 
	~"devi˚.h
"

10 
	~"fb.h
"

13 
	$fbp‹åaô_døwpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

15 
x
 = 
psd
->
xvúåes
-x-1;

16 
psd
->
‹gsubdrivî
->
	`DøwPixñ
’sd, 
x
,Ösd->
yvúåes
-
y
-1, 
c
);

17 
	}
}

19 
MWPIXELVAL


20 
	$fbp‹åaô_ªadpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
)

22 
x
 = 
psd
->
xvúåes
-x-1;

23  
psd
->
‹gsubdrivî
->
	`RódPixñ
’sd, 
x
,Ösd->
yvúåes
-
y
-1);

24 
	}
}

27 
	$fbp‹åaô_døwh‹zlöe
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

29 
x1
 = 
psd
->
xvúåes
-x1-1;

30 
x2
 = 
psd
->
xvúåes
-x2-1;

31 
psd
->
‹gsubdrivî
->
	`DøwH‹zLöe
’sd, 
x2
, 
x1
,Ösd->
yvúåes
-
y
-1, 
c
);

32 
	}
}

35 
	$fbp‹åaô_døwvîéöe
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

37 
x
 = 
psd
->
xvúåes
-x-1;

38 
psd
->
‹gsubdrivî
->
	`DøwVîtLöe
’sd, 
x
,Ösd->
yvúåes
-
y2
-1,

39 
psd
->
yvúåes
-
y1
-1, 
c
);

40 
	}
}

43 
	$fbp‹åaô_fûÃe˘
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
y1
, MWCOORD 
x2
, MWCOORD 
y2
,

44 
MWPIXELVAL
 
c
)

46 
y2
 = 
psd
->
yvúåes
-y2-1;

47 
y1
 = 
psd
->
yvúåes
-y1-1;

48 
x1
 = 
psd
->
xvúåes
-
x2
-1;

49 
x2
 = 
psd
->
xvúåes
-
x1
-1;

50 
y2
 <
y1
)

51 
psd
->
	`DøwH‹zLöe
’sd, 
x1
, 
x2
, 
y2
++, 
c
);

52 
	}
}

55 
	$fbp‹åaô_blô
(
PSD
 
d°psd
,
MWCOORD
 
de°x
,MWCOORD 
de°y
,MWCOORD 
w
,MWCOORD 
h
,

56 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
,MWCOORD 
§cy
,
›
)

58 
d°psd
->
‹gsubdrivî
->
	`Blô
(d°psd, d°psd->
xvúåes
-
de°x
-
w
, d°psd->
yvúåes
-
de°y
-
h
,

59 
w
, 
h
, 
§˝sd
, sr˝sd->
xvúåes
-
§cx
-w, sr˝sd->
yvúåes
-
§cy
-h, 
›
);

61 
	}
}

64 
	$fbp‹åaô_°ªtchblô
(
PSD
 
d°psd
, 
MWCOORD
 
de°x
, MWCOORD 
de°y
, MWCOORD 
d°w
,

65 
MWCOORD
 
d°h
, 
PSD
 
§˝sd
, MWCOORD 
§cx
, MWCOORD 
§cy
, MWCOORD 
§cw
,

66 
MWCOORD
 
§ch
, 
›
)

71 
	}
}

73 
SUBDRIVER
 
	gfbp‹åaô_down
 = {

74 
NULL
,

75 
fbp‹åaô_døwpixñ
,

76 
fbp‹åaô_ªadpixñ
,

77 
fbp‹åaô_døwh‹zlöe
,

78 
fbp‹åaô_døwvîéöe
,

79 
gí_fûÃe˘
,

80 
fbp‹åaô_blô
,

81 
NULL
,

82 
fbp‹åaô_°ªtchblô


	@drivers/fbportrait_left.c

6 
	~<as£π.h
>

7 
	~<°dio.h
>

8 
	~<°dlib.h
>

9 
	~"devi˚.h
"

10 
	~"fb.h
"

13 
	$fbp‹åaô_døwpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

15 
psd
->
‹gsubdrivî
->
	`DøwPixñ
’sd, 
y
,Ösd->
xvúåes
-
x
-1, 
c
);

16 
	}
}

18 
MWPIXELVAL


19 
	$fbp‹åaô_ªadpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
)

21  
psd
->
‹gsubdrivî
->
	`RódPixñ
’sd, 
y
,Ösd->
xvúåes
-
x
-1);

22 
	}
}

25 
	$fbp‹åaô_døwh‹zlöe
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

27 
psd
->
‹gsubdrivî
->
	`DøwVîtLöe
’sd, 
y
,Ösd->
xvúåes
-
x2
-1,

28 
psd
->
xvúåes
-
x1
-1, 
c
);

36 
	}
}

39 
	$fbp‹åaô_døwvîéöe
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

41 
psd
->
‹gsubdrivî
->
	`DøwH‹zLöe
’sd, 
y1
, 
y2
,Ösd->
xvúåes
-
x
-1, 
c
);

48 
	}
}

51 
	$fbp‹åaô_fûÃe˘
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
y1
, MWCOORD 
x2
, MWCOORD 
y2
,

52 
MWPIXELVAL
 
c
)

54 
x1
 = 
psd
->
xvúåes
-x1-1;

55 
x2
 = 
psd
->
xvúåes
-x2-1;

56 
x2
 <
x1
)

57 
psd
->
‹gsubdrivî
->
	`DøwH‹zLöe
’sd, 
y1
, 
y2
, 
x2
++, 
c
);

58 
	}
}

61 
	$fbp‹åaô_blô
(
PSD
 
d°psd
,
MWCOORD
 
de°x
,MWCOORD 
de°y
,MWCOORD 
w
,MWCOORD 
h
,

62 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
,MWCOORD 
§cy
,
›
)

64 
d°psd
->
‹gsubdrivî
->
	`Blô
(d°psd, 
de°y
, d°psd->
xvúåes
-
de°x
-
w
,

65 
h
, 
w
, 
§˝sd
, 
§cy
, sr˝sd->
xvúåes
-
§cx
-w, 
›
);

66 
	}
}

69 
	$fbp‹åaô_°ªtchblô
(
PSD
 
d°psd
, 
MWCOORD
 
de°x
, MWCOORD 
de°y
, MWCOORD 
d°w
,

70 
MWCOORD
 
d°h
, 
PSD
 
§˝sd
, MWCOORD 
§cx
, MWCOORD 
§cy
, MWCOORD 
§cw
,

71 
MWCOORD
 
§ch
, 
›
)

76 
	}
}

78 
SUBDRIVER
 
	gfbp‹åaô_À·
 = {

79 
NULL
,

80 
fbp‹åaô_døwpixñ
,

81 
fbp‹åaô_ªadpixñ
,

82 
fbp‹åaô_døwh‹zlöe
,

83 
fbp‹åaô_døwvîéöe
,

84 
gí_fûÃe˘
,

85 
fbp‹åaô_blô
,

86 
NULL
,

87 
fbp‹åaô_°ªtchblô


	@drivers/fbportrait_right.c

6 
	~<as£π.h
>

7 
	~<°dio.h
>

8 
	~<°dlib.h
>

9 
	~"devi˚.h
"

10 
	~"fb.h
"

13 
	$fbp‹åaô_døwpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

15 
psd
->
‹gsubdrivî
->
	`DøwPixñ
’sd,Ösd->
yvúåes
-
y
-1, 
x
, 
c
);

16 
	}
}

18 
MWPIXELVAL


19 
	$fbp‹åaô_ªadpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
)

21  
psd
->
‹gsubdrivî
->
	`RódPixñ
’sd,Ösd->
yvúåes
-
y
-1, 
x
);

22 
	}
}

25 
	$fbp‹åaô_døwh‹zlöe
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

27 
psd
->
‹gsubdrivî
->
	`DøwVîtLöe
’sd,Ösd->
yvúåes
-
y
-1, 
x1
,

28 
x2
, 
c
);

36 
	}
}

39 
	$fbp‹åaô_døwvîéöe
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

41 
psd
->
‹gsubdrivî
->
	`DøwH‹zLöe
’sd,Ösd->
yvúåes
-
y2
-1,Ösd->yvúåes-
y1
-1,

42 
x
, 
c
);

49 
	}
}

52 
	$fbp‹åaô_fûÃe˘
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
y1
, MWCOORD 
x2
, MWCOORD 
y2
,

53 
MWPIXELVAL
 
c
)

55 
x2
 <
x1
)

56 
psd
->
‹gsubdrivî
->
	`DøwH‹zLöe
’sd,Ösd->
yvúåes
-
y2
-1,

57 
psd
->
yvúåes
-
y1
-1, 
x2
++, 
c
);

58 
	}
}

61 
	$fbp‹åaô_blô
(
PSD
 
d°psd
,
MWCOORD
 
de°x
,MWCOORD 
de°y
,MWCOORD 
w
,MWCOORD 
h
,

62 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
,MWCOORD 
§cy
,
›
)

64 
d°psd
->
‹gsubdrivî
->
	`Blô
(d°psd, d°psd->
yvúåes
-
de°y
-
h
, 
de°x
,

65 
h
, 
w
, 
§˝sd
, sr˝sd->
yvúåes
-
§cy
-h, 
§cx
, 
›
);

66 
	}
}

69 
	$fbp‹åaô_°ªtchblô
(
PSD
 
d°psd
, 
MWCOORD
 
de°x
, MWCOORD 
de°y
, MWCOORD 
d°w
,

70 
MWCOORD
 
d°h
, 
PSD
 
§˝sd
, MWCOORD 
§cx
, MWCOORD 
§cy
, MWCOORD 
§cw
,

71 
MWCOORD
 
§ch
, 
›
)

76 
	}
}

78 
SUBDRIVER
 
	gfbp‹åaô_right
 = {

79 
NULL
,

80 
fbp‹åaô_døwpixñ
,

81 
fbp‹åaô_ªadpixñ
,

82 
fbp‹åaô_døwh‹zlöe
,

83 
fbp‹åaô_døwvîéöe
,

84 
gí_fûÃe˘
,

85 
fbp‹åaô_blô
,

86 
NULL
,

87 
fbp‹åaô_°ªtchblô


	@drivers/genfont.c

15 
	~<°dio.h
>

16 
	~"devi˚.h
"

17 
	~"gíf⁄t.h
"

20 
MWCFONT
 
f⁄t_wöFªeS™sSîif11x13
;

21 
MWCFONT
 
f⁄t_X6x13
;

27 
MWFONTPROCS
 
	gf⁄çrocs
 = {

28 
MWTF_ASCII
,

29 
gí_gëf⁄töfo
,

30 
gí_gëãxtsize
,

31 
gí_gëãxtbôs
,

32 
gí_u∆ﬂdf⁄t
,

33 
c‹ef⁄t_døwãxt
,

34 
NULL
,

35 
NULL
,

36 
NULL
,

58 
MWCOREFONT
 
	ggí_f⁄ts
[
NUMBER_FONTS
] = {

59 {&
f⁄çrocs
, 0, 0, 0, 
MWFONT_SYSTEM_VAR
, &
f⁄t_wöFªeS™sSîif11x13
},

60 {&
f⁄çrocs
, 0, 0, 0, 
MWFONT_SYSTEM_FIXED
, &
f⁄t_X6x13
},

62 {&
f⁄çrocs
, 0, 0, 0, "Hñvëiˇ", &
f⁄t_wöFªeS™sSîif11x13
},

63 {&
f⁄çrocs
, 0, 0, 0, "TîmöÆ", &
f⁄t_X6x13
}

70 
MWBOOL


71 
	$gí_gëf⁄töfo
(
PMWFONT
 
pf⁄t
, 
PMWFONTINFO
 
pf⁄töfo
)

73 
PMWCFONT
 
pf
 = ((
PMWCOREFONT
)
pf⁄t
)->
cf⁄t
;

74 
i
;

76 
pf⁄töfo
->
maxwidth
 = 
pf
->maxwidth;

77 
pf⁄töfo
->
height
 = 
pf
->height;

78 
pf⁄töfo
->
ba£löe
 = 
pf
->
as˚¡
;

79 
pf⁄töfo
->
fú°ch¨
 = 
pf
->firstchar;

80 
pf⁄töfo
->
œ°ch¨
 = 
pf
->
fú°ch¨
 +Öf->
size
 - 1;

81 
pf⁄töfo
->
fixed
 = 
pf
->
width
 =
NULL
? 
TRUE
: 
FALSE
;

82 
i
=0; i<256; ++i) {

83 if(
pf
->
width
 =
NULL
)

84 
pf⁄töfo
->
widths
[
i
] = 
pf
->
maxwidth
;

86 if(
i
<
pf
->
fú°ch¨
 || i >pf->fú°ch¨+pf->
size
)

87 
pf⁄töfo
->
widths
[
i
] = 0;

88 
pf⁄töfo
->
widths
[
i
] = 
pf
->
width
[i-pf->
fú°ch¨
];

91  
TRUE
;

92 
	}
}

99 
	$gí_gëãxtsize
(
PMWFONT
 
pf⁄t
, c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
,

100 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
, MWCOORD *
pba£
)

102 
PMWCFONT
 
pf
 = ((
PMWCOREFONT
)
pf⁄t
)->
cf⁄t
;

103 c⁄° * 
°r
 = 
ãxt
;

104 
c
;

105 
width
;

107 if(
pf
->
width
 =
NULL
)

108 
width
 = 
cc
 * 
pf
->
maxwidth
;

110 
width
 = 0;

111 --
cc
 >= 0) {

112 
c
 = *
°r
++;

113 if(
c
 >
pf
->
fú°ch¨
 && c <Öf->fú°ch¨+pf->
size
)

114 
width
 +
pf
->width[
c
 -Öf->
fú°ch¨
];

117 *
pwidth
 = 
width
;

118 *
pheight
 = 
pf
->
height
;

119 *
pba£
 = 
pf
->
as˚¡
;

120 
	}
}

122 #i‡
HAVE_FNT_SUPPORT
 | 
HAVE_PCF_SUPPORT


128 
	$gí16_gëãxtsize
(
PMWFONT
 
pf⁄t
, c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
,

129 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
, MWCOORD *
pba£
)

131 
PMWCFONT
 
pf
 = ((
PMWCOREFONT
Ë
pf⁄t
)->
cf⁄t
;

132 c⁄° * 
°r
 = 
ãxt
;

133 
c
;

134 
width
;

136 i‡(
pf
->
width
 =
NULL
)

137 
width
 = 
cc
 * 
pf
->
maxwidth
;

139 
width
 = 0;

140 --
cc
 >= 0) {

141 
c
 = *
°r
++;

142 i‡(
c
 >
pf
->
fú°ch¨
 && c <Öf->fú°ch¨ +Öf->
size
)

143 
width
 +
pf
->width[
c
 -Öf->
fú°ch¨
];

146 *
pwidth
 = 
width
;

147 *
pheight
 = 
pf
->
height
;

148 *
pba£
 = 
pf
->
as˚¡
;

149 
	}
}

157 
	$gí_gëãxtbôs
(
PMWFONT
 
pf⁄t
, 
ch
, c⁄° 
MWIMAGEBITS
 **
ªtm≠
,

158 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
, MWCOORD *
pba£
)

160 
PMWCFONT
 
pf
 = ((
PMWCOREFONT
)
pf⁄t
)->
cf⁄t
;

161 
cou¡
, 
width
;

162 c⁄° 
MWIMAGEBITS
 * 
bôs
;

165 if(
ch
 < 
pf
->
fú°ch¨
 || ch >pf->fú°ch¨+pf->
size
)

166 
ch
 = 
pf
->
fú°ch¨
;

168 
ch
 -
pf
->
fú°ch¨
;

171 
bôs
 = 
pf
->bô†+ (pf->
off£t
?Öf->off£t[
ch
]: (pf->
height
 * ch));

172 
width
 = 
pf
->width ?Öf->width[
ch
] :Öf->
maxwidth
;

173 
cou¡
 = 
	`MWIMAGE_WORDS
(
width
Ë* 
pf
->
height
;

175 *
ªtm≠
 = 
bôs
;

178 *
pwidth
 = 
width
;

179 *
pheight
 = 
pf
->
height
;

180 *
pba£
 = 
pf
->
as˚¡
;

181 
	}
}

184 
	$gí_u∆ﬂdf⁄t
(
PMWFONT
 
pf⁄t
)

187 
	}
}

189 #i‡
NOTUSED


195 
	$gí_døwãxt
(
PMWFONT
 
pf⁄t
,
PSD
 
psd
,
MWCOORD
 
x
,MWCOORD 
y
,c⁄° *
ãxt
,

196 
n
,
MWPIXELVAL
 
fg
)

198 
PMWCFONT
 
pf
 = ((
PMWCOREFONT
)
pf⁄t
)->
cf⁄t
;

199 c⁄° * 
°r
 = 
ãxt
;

200 
MWCOORD
 
width
;

201 
MWCOORD
 
height
;

202 c⁄° 
MWIMAGEBITS
 * 
bôm≠
;

205 
y
 -
pf
->
height
 - 1;

206 
n
-- > 0) {

207 
pf⁄t
->
	`GëTextBôs
’f⁄t, *
s
++, &
bôm≠
, &
width
, &
height
);

208 
	`gí_døwbôm≠
(
psd
, 
x
, 
y
, 
width
, 
height
, 
bôm≠
, 
fg
);

209 
x
 +
width
;

211 
	}
}

219 
	$gí_døwbôm≠
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
width
, MWCOORD 
height
,

220 
MWIMAGEBITS
 *
èbÀ
, 
PIXELVAL
 
fgcﬁ‹
)

222 
MWCOORD
 
möx
;

223 
MWCOORD
 
maxx
;

224 
MWIMAGEBITS
 
bôvÆue
;

225 
bôcou¡
;

227 
möx
 = 
x
;

228 
maxx
 = 
x
 + 
width
 - 1;

229 
bôcou¡
 = 0;

230 
height
 > 0) {

231 i‡(
bôcou¡
 <= 0) {

232 
bôcou¡
 = 
MWIMAGE_BITSPERIMAGE
;

233 
bôvÆue
 = *
èbÀ
++;

235 i‡(
	`MWIMAGE_TESTBIT
(
bôvÆue
))

236 
psd
->
	`DøwPixñ
’sd, 
x
, 
y
, 
fgcﬁ‹
);

237 
bôvÆue
 = 
	`MWIMAGE_SHIFTBIT
(bitvalue);

238 --
bôcou¡
;

239 i‡(
x
++ =
maxx
) {

240 
x
 = 
möx
;

241 ++
y
;

242 --
height
;

243 
bôcou¡
 = 0;

246 
	}
}

	@drivers/genfont.h

11 
	#NUMBER_FONTS
 4

	)

14 
MWBOOL
 
gí_gëf⁄töfo
(
PMWFONT
 
pf⁄t
, 
PMWFONTINFO
 
pf⁄töfo
);

15 
gí_gëãxtsize
(
PMWFONT
 
pf⁄t
, c⁄° *
ãxt
, 
cc
,

16 
MWTEXTFLAGS
 
Êags
, 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
,

17 
MWCOORD
 *
pba£
);

18 
gí_gëãxtbôs
(
PMWFONT
 
pf⁄t
, 
ch
, c⁄° 
MWIMAGEBITS
 **
ªtm≠
,

19 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
, MWCOORD *
pba£
);

20 
gí_u∆ﬂdf⁄t
(
PMWFONT
 
pf⁄t
);

22 
gí16_døwãxt
(
PMWFONT
 
pf⁄t
, 
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
,

23 c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
);

24 
gí16_gëãxtsize
(
PMWFONT
 
pf⁄t
, c⁄° *
ãxt
, 
cc
,

25 
MWTEXTFLAGS
 
Êags
, 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
,

26 
MWCOORD
 *
pba£
);

28 
c‹ef⁄t_døwãxt
(
PMWFONT
 
pf⁄t
, 
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
,

29 c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
);

32 
MWCOREFONT
 
gí_f⁄ts
[
NUMBER_FONTS
];

35 
gí_døwãxt
(
PMWFONT
 
pf⁄t
, 
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
,

36 c⁄° *
ãxt
, 
n
, 
MWPIXELVAL
 
fg
);

37 
gí_døwbôm≠
(
PSD
 
psd
,
MWCOORD
 
x
,MWCOORD 
y
,MWCOORD 
width
,MWCOORD 
height
,

38 
MWIMAGEBITS
 *
èbÀ
, 
MWPIXELVAL
 
fgcﬁ‹
);

	@drivers/genmem.c

9 
	~<as£π.h
>

10 
	~<°dio.h
>

11 
	~<°dlib.h
>

12 
	~"devi˚.h
"

13 
	~"fb.h
"

14 
	~"gímem.h
"

17 
PSD


18 
	$gí_Æloˇãmemgc
(
PSD
 
psd
)

20 
PSD
 
mempsd
;

23 if((
psd
->
Êags
 & 
PSF_HAVEBLIT
) == 0)

24  
NULL
;

26 
mempsd
 = 
	`mÆloc
((
SCREENDEVICE
));

27 i‡(!
mempsd
)

28  
NULL
;

31 *
mempsd
 = *
psd
;

34 
mempsd
->
Êags
 |
PSF_MEMORY
;

35 
mempsd
->
Êags
 &~
PSF_SCREEN
;

36 
mempsd
->
addr
 = 
NULL
;

38  
mempsd
;

39 
	}
}

43 
	$öômemgc
(
PSD
 
mempsd
,
MWCOORD
 
w
,MWCOORD 
h
,
∂™es
,
bµ
,
löñí
,

44 
size
,*
addr
)

46 
	`as£π
(
mempsd
->
Êags
 & 
PSF_MEMORY
);

49 i‡(
mempsd
->
p‹åaô
 & (
MWPORTRAIT_LEFT
|
MWPORTRAIT_RIGHT
)) {

50 
mempsd
->
yªs
 = 
w
;

51 
mempsd
->
xªs
 = 
h
;

53 
mempsd
->
xªs
 = 
w
;

54 
mempsd
->
yªs
 = 
h
;

56 
mempsd
->
xvúåes
 = 
w
;

57 
mempsd
->
yvúåes
 = 
h
;

58 
mempsd
->
∂™es
 =Ölanes;

59 
mempsd
->
bµ
 = bpp;

60 
mempsd
->
löñí
 =Üinelen;

61 
mempsd
->
size
 = size;

62 
mempsd
->
addr
 =áddr;

63 
	}
}

66 
	$gí_‰ìmemgc
(
PSD
 
mempsd
)

68 
	`as£π
(
mempsd
->
Êags
 & 
PSF_MEMORY
);

72 
	`‰ì
(
mempsd
);

73 
	}
}

76 
	$gí_fûÃe˘
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
y1
, MWCOORD 
x2
, MWCOORD 
y2
,

77 
MWPIXELVAL
 
c
)

79 
y1
 <
y2
)

80 
psd
->
	`DøwH‹zLöe
’sd, 
x1
, 
x2
, 
y1
++, 
c
);

81 
	}
}

88 
MWBOOL


89 
	$£t_subdrivî
(
PSD
 
psd
, 
PSUBDRIVER
 
subdrivî
, 
MWBOOL
 
öô
)

92 
psd
->
DøwPixñ
 = 
subdrivî
->DrawPixel;

93 
psd
->
RódPixñ
 = 
subdrivî
->ReadPixel;

94 
psd
->
DøwH‹zLöe
 = 
subdrivî
->DrawHorzLine;

95 
psd
->
DøwVîtLöe
 = 
subdrivî
->DrawVertLine;

96 
psd
->
FûlRe˘
 = 
subdrivî
->FillRect;

97 
psd
->
Blô
 = 
subdrivî
->Blit;

98 
psd
->
DøwAªa
 = 
subdrivî
->DrawArea;

99 
psd
->
SåëchBlô
 = 
subdrivî
->StretchBlit;

100 
psd
->
SåëchBlôEx
 = 
subdrivî
->StretchBlitEx;

103 i‡(
öô
 && !
subdrivî
->
	`Inô
(
psd
))

106 
	}
}

110 
	$gë_subdrivî
(
PSD
 
psd
, 
PSUBDRIVER
 
subdrivî
)

113 
subdrivî
->
DøwPixñ
 = 
psd
->DrawPixel;

114 
subdrivî
->
RódPixñ
 = 
psd
->ReadPixel;

115 
subdrivî
->
DøwH‹zLöe
 = 
psd
->DrawHorzLine;

116 
subdrivî
->
DøwVîtLöe
 = 
psd
->DrawVertLine;

117 
subdrivî
->
FûlRe˘
 = 
psd
->FillRect;

118 
subdrivî
->
Blô
 = 
psd
->Blit;

119 
subdrivî
->
DøwAªa
 = 
psd
->DrawArea;

120 
subdrivî
->
SåëchBlô
 = 
psd
->StretchBlit;

121 
subdrivî
->
SåëchBlôEx
 = 
psd
->StretchBlitEx;

122 
	}
}

	@drivers/genmem.h

12 
PSD
 
gí_Æloˇãmemgc
(PSD 
psd
);

13 
gí_‰ìmemgc
(
PSD
 
mempsd
);

14 
öômemgc
(
PSD
 
mempsd
,
MWCOORD
 
w
,MWCOORD 
h
,
∂™es
,
bµ
,

15 
löñí
,
size
,*
addr
);

18 
MWBOOL
 
fb_m≠memgc
(
PSD
 
mempsd
,
MWCOORD
 
w
,MWCOORD 
h
,
∂™es
,
bµ
,

19 
löñí
,
size
,*
addr
);

	@drivers/int10_pc.c

7 
	~"devi˚.h
"

8 
	~"vg≠œn4.h
"

14 
FARADDR


15 
	$öt10
(
ax
, 
bx
)

17 
REGPACK
 
ªg
;

19 
ªg
.
x
.
ax
 =áx;

20 
ªg
.
x
.
bx
 = bx;

21 
	`öå
(0x10, &
ªg
);

23  ((
FARADDR
Ë
	`MK_FP
(
ªg
.
x
.
es
,Ñeg.x.
bp
));

24 
	}
}

	@drivers/kbd_bios.c

6 
	~"devi˚.h
"

8 
KBD_O≥n
(
KBDDEVICE
 *
pkd
);

9 
KBD_Clo£
();

10 
KBD_GëModifõrInfo
(*
modifõrs
);

11 
KBD_Ród
(
MWUCHAR
 *
buf
, *
modifõrs
);

12 
KBD_Pﬁl
();

15 
kbpﬁl
();

16 
kbªad
();

17 
kbÊags
();

19 
KBDDEVICE
 
	gkbddev
 = {

20 
KBD_O≥n
,

21 
KBD_Clo£
,

22 
KBD_GëModifõrInfo
,

23 
KBD_Ród
,

24 
KBD_Pﬁl


31 
	$KBD_O≥n
(
KBDDEVICE
 *
pkd
)

35 
	}
}

41 
	$KBD_Clo£
()

43 
	}
}

49 
	$KBD_GëModifõrInfo
(*
modifõrs
)

51 *
modifõrs
 = 0;

52 
	}
}

60 
	$KBD_Ród
(
MWUCHAR
 *
buf
, *
modifõrs
)

63 if(!
	`kbpﬁl
())

67 *
modifõrs
 = 
	`kbÊags
();

70 *
buf
 = 
	`kbªad
();

72 if(*
buf
 == 0x1b)

75 
	}
}

78 
	$KBD_Pﬁl
()

80  
	`kbpﬁl
();

81 
	}
}

	@drivers/kbd_djgr.c

9 
	~"devi˚.h
"

11 
	~<bios.h
>

14 
KBD_O≥n
(
KBDDEVICE
 *
pkd
);

15 
KBD_Clo£
();

16 
KBD_GëModifõrInfo
(*
modifõrs
);

17 
KBD_Ród
(
MWUCHAR
 *
buf
, *
modifõrs
);

18 
KBD_Pﬁl
();

21 
KBDDEVICE
 
	gkbddev
 = {

22 
KBD_O≥n
,

23 
KBD_Clo£
,

24 
KBD_GëModifõrInfo
,

25 
KBD_Ród
,

26 
KBD_Pﬁl


34 
	$KBD_O≥n
(
KBDDEVICE
 *
pkd
)

38 
	}
}

44 
	$KBD_Clo£
()

46 
	}
}

52 
	$KBD_GëModifõrInfo
(*
modifõrs
)

54 *
modifõrs
 = 
	`bioskey
(2);

55 
	}
}

63 
	$KBD_Ród
(
MWUCHAR
 *
buf
, *
modifõrs
)

66 if(!
	`bioskey
(1))

70 *
modifõrs
 = 
	`bioskey
(2);

73 *
buf
 = 
	`bioskey
(0);

75 if(*
buf
 == 0x1b)

78 
	}
}

84 
	$KBD_Pﬁl
()

86 i‡(
	`bioskey
(1)==0)

90 
	}
}

	@drivers/kbd_fbsd.c

1 
	~<sys/time.h
>

2 
	~<machöe/c⁄sﬁe.h
>

3 
	~<vgl.h
>

5 
	~"devi˚.h
"

7 
	#KBLEN
 30

	)

8 
	gkbuf„r
[
KBLEN
];

9 
	gkÀn
=0;

10 
	g°©es
[256];

12 c⁄° 
	gquîtycodes
[48+1]={41, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13,\

16 c⁄° 
	gch¨s
[48] = {'`','1','2','3','4','5','6','7','8','9','0','-','=',\

22 
öôkeyb
(
KBDDEVICE
 *
pkd
);

23 
ª°‹ekeyb
();

24 
TTY_GëModifõrInfo
(*
modifõrs
);

25 
gëkey
(
MWUCHAR
 *
buf
, *
modifõrs
);

26 
kbhô
();

28 
KBDDEVICE
 
	gkbddev
 = {

29 
öôkeyb
,

30 
ª°‹ekeyb
,

31 
TTY_GëModifõrInfo
,

32 
gëkey
,

33 
kbhô


40 
	$TTY_GëModifõrInfo
(*
modifõrs
)

42 *
modifõrs
 = 0;

43 
	}
}

45 
	$öôkeyb
(
KBDDEVICE
 *
pkd
)

47 
	`VGLKeybﬂrdInô
(
VGL_CODEKEYS
);

48 
	`mem£t
(
°©es
, 
FALSE
, ( states));

51 
	}
}

53 
	$ª°‹ekeyb
()

55 
	`VGLKeybﬂrdEnd
();

56 
	}
}

58 
	$Pro˚ssKbd
()

60 
ªsu…
, 
i
;

61 
ißsymbﬁ
;

62 
°©e
;

64 (
ªsu…
 = 
	`VGLKeybﬂrdGëCh
()) != 0) {

66 if(
ªsu…
 < 128)

67 
°©e
 = 
TRUE
;

69 
°©e
 = 
FALSE
;

70 
ªsu…
 -= 128;

73 
ißsymbﬁ
 = 
FALSE
;

74 
i
=0;
quîtycodes
[i]!=0;i++)

75 if(
ªsu…
 =
quîtycodes
[
i
]) {

76 
ªsu…
 = 
ch¨s
[
i
];

77 
ißsymbﬁ
 = 
TRUE
;

81 i‡(
ißsymbﬁ
 =
FALSE
)

82 
ªsu…
+=128;

84 
°©es
[
ªsu…
] = 
°©e
;

86 if(
°©e
 =
TRUE
)

89 if(
kÀn
 =
KBLEN
)

90 
	`mem˝y
(
kbuf„r
, kbuf„∏+ 1, --
kÀn
);

91 
kbuf„r
[
kÀn
++] = 
ªsu…
;

93 
	}
}

95 
	$GëAsyncKeySèã
(
key
)

97 
	`Pro˚ssKbd
();

98 (
°©es
[
key
]);

99 
	}
}

101 
	$gëkey
(
MWUCHAR
 *
buf
, *
modifõrs
)

103 
MWUCHAR
 
ªsu…
;

105 
	`kbhô
(Ë!
TRUE
);

106 
ªsu…
 = 
kbuf„r
[0];

107 
	`mem˝y
(
kbuf„r
, kbuf„∏+ 1, --
kÀn
);

109 *
buf
=
ªsu…
;

111 
	}
}

113 
	$kbhô
()

115 
	`Pro˚ssKbd
();

117 i‡(
kÀn
 > 0)

121 
	}
}

	@drivers/kbd_ipaq.c

7 
	~<°dio.h
>

8 
	~<sys/ty≥s.h
>

9 
	~<f˙é.h
>

10 
	~<uni°d.h
>

11 
	~<î∫o.h
>

12 
	~"devi˚.h
"

14 
	#IPAQ_SCANCODE_RECORD
 129

	)

15 
	#IPAQ_SCANCODE_CALENDAR
 130

	)

16 
	#IPAQ_SCANCODE_CONTACTS
 131

	)

17 
	#IPAQ_SCANCODE_Q
 132

	)

18 
	#IPAQ_SCANCODE_START
 133

	)

19 
	#IPAQ_SCANCODE_UP
 134

	)

20 
	#IPAQ_SCANCODE_RIGHT
 135

	)

21 
	#IPAQ_SCANCODE_LEFT
 136

	)

22 
	#IPAQ_SCANCODE_DOWN
 137

	)

23 
	#IPAQ_SCANCODE_ACTION
 138

	)

24 
	#IPAQ_SCANCODE_SUSPEND
 139

	)

26 #ifde‡
__ECOS


27 
	#KEYBOARD
 "/dev/kbd"

	)

29 
	#KEYBOARD
 "/dev/h3600_key"

	)

32 
IPAQ_O≥n
(
KBDDEVICE
 *
pkd
);

33 
IPAQ_Clo£
();

34 
IPAQ_GëModifõrInfo
(
MWKEYMOD
 *
modifõrs
, MWKEYMOD *
curmodifõrs
);

35 
IPAQ_Ród
(
MWKEY
 *
kbuf
, 
MWKEYMOD
 *
modifõrs
, 
MWSCANCODE
 *
sˇncode
);

37 
KBDDEVICE
 
	gkbddev
 = {

38 
IPAQ_O≥n
,

39 
IPAQ_Clo£
,

40 
IPAQ_GëModifõrInfo
,

41 
IPAQ_Ród
,

42 
NULL


45 
	gfd
;

49 
	gsˇncodes
[] = {

51 
IPAQ_SCANCODE_RECORD
,

52 
IPAQ_SCANCODE_CALENDAR
,

53 
IPAQ_SCANCODE_CONTACTS
,

54 
IPAQ_SCANCODE_Q
,

55 
IPAQ_SCANCODE_START
,

56 
IPAQ_SCANCODE_UP
,

57 
IPAQ_SCANCODE_RIGHT
,

58 
IPAQ_SCANCODE_LEFT
,

59 
IPAQ_SCANCODE_DOWN
,

60 
IPAQ_SCANCODE_ACTION
,

61 
IPAQ_SCANCODE_SUSPEND


65 
	$IPAQ_O≥n
(
KBDDEVICE
 * 
pkd
)

68 
fd
 = 
	`›í
(
KEYBOARD
, 
O_RDONLY
 | 
O_NONBLOCK
);

70 i‡(
fd
 < 0) {

71 
	`DPRINTF
("%†- C™'à›í keybﬂrd!\n", 
__FUNCTION__
);

75  
fd
;

76 
	}
}

79 
	$IPAQ_Clo£
()

81 
	`˛o£
(
fd
);

82 
fd
 = -1;

83 
	}
}

86 
	$IPAQ_GëModifõrInfo
(
MWKEYMOD
 * 
modifõrs
, MWKEYMOD * 
curmodifõrs
)

88 i‡(
modifõrs
)

89 *
modifõrs
 = 0;

90 i‡(
curmodifõrs
)

91 *
curmodifõrs
 = 0;

92 
	}
}

96 
	$IPAQ_Ród
(
MWKEY
 * 
kbuf
, 
MWKEYMOD
 * 
modifõrs
, 
MWSCANCODE
 * 
sˇncode
)

98 
keydown
 = 0;

99 
cc
 = 0;

100 
buf
[1];

102 
cc
 = 
	`ªad
(
fd
, &
buf
, 1);

104 i‡(
cc
 < 0) {

105 i‡((
î∫o
 !
EINTR
Ë&& (î∫ÿ!
EAGAIN
)

106 && (
î∫o
 !
EINVAL
)) {

107 
	`≥º‹
("IPAQ KEY");

113 i‡(
cc
 == 0)

119 *
modifõrs
 = 0;

121 i‡(*
buf
 < 127) {

122 
keydown
 = 1;

124 i‡(*
buf
 > 9)

127 *
sˇncode
 = 
sˇncodes
[(Ë*
buf
];

129 
keydown
 = 2;

130 *
sˇncode
 = *
buf
;

133 *
sˇncode
) {

134 
IPAQ_SCANCODE_RECORD
:

135 *
kbuf
 = 
MWKEY_RECORD
;

138 
IPAQ_SCANCODE_CALENDAR
:

139 *
kbuf
 = 
MWKEY_APP1
;

142 
IPAQ_SCANCODE_CONTACTS
:

143 *
kbuf
 = 
MWKEY_APP2
;

146 
IPAQ_SCANCODE_Q
:

147 *
kbuf
 = 
MWKEY_MENU
;

150 
IPAQ_SCANCODE_START
:

152 *
kbuf
 = 
MWKEY_CANCEL
;

155 
IPAQ_SCANCODE_UP
:

156 *
kbuf
 = 
MWKEY_UP
;

159 
IPAQ_SCANCODE_DOWN
:

160 *
kbuf
 = 
MWKEY_DOWN
;

163 
IPAQ_SCANCODE_LEFT
:

164 *
kbuf
 = 
MWKEY_LEFT
;

167 
IPAQ_SCANCODE_RIGHT
:

168 *
kbuf
 = 
MWKEY_RIGHT
;

171 
IPAQ_SCANCODE_ACTION
:

172 *
kbuf
 = 
MWKEY_ENTER
;

175 
IPAQ_SCANCODE_SUSPEND
:

176 *
kbuf
 = 
MWKEY_SUSPEND
;

180 
	`DPRINTF
("I∑q - Unknow¿sˇncodê%d\n", *
sˇncode
);

184  
keydown
;

185 
	}
}

	@drivers/kbd_lirc.c

27 
	~<°dio.h
>

28 
	~<°dlib.h
>

29 
	~<uni°d.h
>

30 
	~<sys/ty≥s.h
>

31 
	~<f˙é.h
>

32 
	~<î∫o.h
>

33 
	~<°rög.h
>

34 
	~<sys/io˘l.h
>

35 
	~"mwty≥s.h
"

36 
	~"devi˚.h
"

37 
	~"mwlúc.h
"

39 
LIRC_O≥n
(
KBDDEVICE
 * 
pkd
);

40 
LIRC_Clo£
();

41 
LIRC_GëModifõrInfo
(
MWKEYMOD
 * 
modifõrs
,

42 
MWKEYMOD
 * 
curmodifõrs
);

43 
LIRC_Ród
(
MWKEY
 * 
kbuf
, 
MWKEYMOD
 * 
modifõrs
,

44 
MWSCANCODE
 * 
sˇncode
);

46 #ifde‡
MW_LIRC_MOUSE


47 
LIRC_Mou£O≥n
(
MOUSEDEVICE
 * 
pkd
);

48 
LIRC_Mou£Clo£
();

49 
LIRC_Mou£GëBuâ⁄Info
();

50 
LIRC_Mou£Ród
(
MWCOORD
 * 
dx
, MWCOORD * 
dy
, MWCOORD * 
dz
,

51 *
b±r
);

52 
LIRC_Mou£GëDeÁu…Ac˚l
(*
psˇÀ
, *
±hªsh
);

55 
LIRC_mou£MovedPﬁ¨
(
•ìd
, 
dúe˘i⁄
);

56 
LIRC_mou£MovedC¨ãsün
(
xdñè
, 
ydñè
);

57 
LIRC_mou£Buâ⁄
(
buâ⁄
, 
MWBOOL
 
isDown
);

59 
LIRC_Upd©eKeySèã
(
MWBOOL
 
isDown
, 
MWKEY
 
mwkey
);

61 
ªmŸeMou£H™dÀr
(
mwlúc_key°roke
 * 
evít
, 
MWKEY
 * 
kbuf
,

62 
MWSCANCODE
 * 
psˇncode
);

63 
ªmŸeKeybﬂrdH™dÀr
(
mwlúc_key°roke
 * 
evít
, 
MWKEY
 * 
kbuf
,

64 
MWSCANCODE
 * 
psˇncode
);

65 
ªmŸeC⁄åﬁH™dÀr
(
mwlúc_key°roke
 * 
evít
, 
MWKEY
 * 
kbuf
,

66 
MWSCANCODE
 * 
psˇncode
);

69 
	gKBDDEVICE


70 #ifde‡
MW_FEATURE_TWO_KEYBOARDS


71 
	gkbddev2


73 
	gkbddev


76 
LIRC_O≥n
,

77 
LIRC_Clo£
,

78 
LIRC_GëModifõrInfo
,

79 
LIRC_Ród
,

80 
NULL


84 #ifde‡
MW_LIRC_MOUSE


85 
MOUSEDEVICE
 
	gmou£dev
 = {

86 
LIRC_Mou£O≥n
,

87 
LIRC_Mou£Clo£
,

88 
LIRC_Mou£GëBuâ⁄Info
,

89 
LIRC_Mou£GëDeÁu…Ac˚l
,

90 
LIRC_Mou£Ród
,

91 
NULL
,

92 
MOUSE_NORMAL


99 
MWKEY
 
	gLIRC_≥ndög_keyªÀa£_ch
 = 0;

100 
MWSCANCODE
 
	gLIRC_≥ndög_keyªÀa£_sˇn
 = 0;

103 
MWKEYMOD
 
	gLIRC_keymod
 = 0;

106 (*
	tªmŸeH™dÀr_t
Ë(
	tmwlúc_key°roke
 * 
	tevít
, 
	tMWKEY
 * 
	tkbuf
,

107 
	tMWSCANCODE
 * 
	tpsˇncode
);

109 
	sªmŸeDrivî_t_


111 c⁄° *
«me
;

112 
ªmŸeH™dÀr_t
 
h™dÀr
;

114 
	tªmŸeDrivî_t
;

119 
ªmŸeDrivî_t
 
ªmŸeDrivîs
[] = {

120 {"mhp_rc", 
ªmŸeC⁄åﬁH™dÀr
},

121 {"rcmm_kb", 
ªmŸeKeybﬂrdH™dÀr
},

122 {"rcmm_mou£", 
ªmŸeMou£H™dÀr
},

123 {
NULL
, NULL}

124 
	}
};

126 
	gLIRC_fd
 = -1;

128 #ifde‡
MW_LIRC_MOUSE


135 sig√d 
	gpﬁ¨_to_ˇπesün_èbÀ
[256] = {

157 
	#POLAR_TO_CARTESIAN_X
(
•ìd
,
™gÀ
Ë
pﬁ¨_to_ˇπesün_èbÀ
[◊ngÀË| ((•ìdË<< 4)]

	)

158 
	#POLAR_TO_CARTESIAN_Y
(
•ìd
,
™gÀ
Ë
	`POLAR_TO_CARTESIAN_X
((•ìd), (◊ngÀË+ 4Ë& 15)

	)

160 
	#SCALE
 3

	)

161 
	#THRESH
 5

	)

163 
	gLIRC_mou£DñèX
 = 0;

164 
	gLIRC_mou£DñèY
 = 0;

165 
	gLIRC_mou£Buâ⁄sRï‹ãd
 = 0;

166 
	gLIRC_mou£Buâ⁄s
 = 0;

169 
	$LIRC_Mou£GëBuâ⁄Info
()

171  
MWBUTTON_L
 | 
MWBUTTON_R
;

172 
	}
}

175 
	$LIRC_Mou£Ród
(
MWCOORD
 * 
dx
, MWCOORD * 
dy
, MWCOORD * 
dz
, *
b±r
)

177 
buâ⁄ch™ge
 = 
LIRC_mou£Buâ⁄s
 ^ 
LIRC_mou£Buâ⁄sRï‹ãd
;

178 
LIRC_mou£Buâ⁄sRï‹ãd
 = 
LIRC_mou£Buâ⁄s
;

179 *
b±r
 = 
LIRC_mou£Buâ⁄s
;

181 *
dx
 = 
LIRC_mou£DñèX
 / 8;

182 
LIRC_mou£DñèX
 -*
dx
 * 8;

184 *
dy
 = 
LIRC_mou£DñèY
 / 8;

185 
LIRC_mou£DñèY
 -*
dy
 * 8;

187 *
dz
 = 0;

189  ((*
dx
 =0Ë&& (*
dy
 =0Ë&& (
buâ⁄ch™ge
 == 0)) ? 0 : 1;

190 
	}
}

193 
	$LIRC_Mou£GëDeÁu…Ac˚l
(*
psˇÀ
, *
±hªsh
)

195 *
psˇÀ
 = 
SCALE
;

196 *
±hªsh
 = 
THRESH
;

197 
	}
}

200 
	$LIRC_Mou£O≥n
(
MOUSEDEVICE
 * 
pkd
)

202  
LIRC_fd
;

203 
	}
}

206 
	$LIRC_Mou£Clo£
()

208 
	}
}

213 
	$LIRC_mou£MovedPﬁ¨
(
•ìd
, 
dúe˘i⁄
)

215 #ifde‡
MW_LIRC_MOUSE


216 
xdñè
 = 
	`POLAR_TO_CARTESIAN_X
(
•ìd
, 
dúe˘i⁄
);

217 
ydñè
 = 
	`POLAR_TO_CARTESIAN_Y
(
•ìd
, 
dúe˘i⁄
);

221  
	`LIRC_mou£MovedC¨ãsün
(
xdñè
, 
ydñè
);

225 
	}
}

229 
	$LIRC_mou£MovedC¨ãsün
(
xdñè
, 
ydñè
)

232 #ifde‡
MW_LIRC_MOUSE


233 
LIRC_mou£DñèX
 +
xdñè
;

234 
LIRC_mou£DñèY
 +
ydñè
;

236 i‡(
LIRC_mou£DñèX
 >= 8

237 || 
LIRC_mou£DñèX
 <= -8

238 || 
LIRC_mou£DñèY
 >= 8 || LIRC_mouseDeltaY <= -8) {

243 
	}
}

248 
	$LIRC_mou£Buâ⁄
(
buâ⁄
, 
MWBOOL
 
isDown
)

251 #ifde‡
MW_LIRC_MOUSE


252 i‡(
isDown
) {

253 i‡(!(
LIRC_mou£Buâ⁄s
 & 
buâ⁄
)) {

254 
LIRC_mou£Buâ⁄s
 |
buâ⁄
;

258 i‡(
LIRC_mou£Buâ⁄s
 & 
buâ⁄
) {

259 
LIRC_mou£Buâ⁄s
 &~
buâ⁄
;

265 
	}
}

272 
	$LIRC_O≥n
(
KBDDEVICE
 * 
pkd
)

274 
fd
 = 
	`mwlúc_öô
(
MWLIRC_NONBLOCK
);

276 
LIRC_≥ndög_keyªÀa£_ch
 = 0;

277 
LIRC_≥ndög_keyªÀa£_sˇn
 = 0;

278 
LIRC_keymod
 = 0;

280 #ifde‡
MW_LIRC_MOUSE


281 
LIRC_mou£DñèX
 = 0;

282 
LIRC_mou£DñèY
 = 0;

283 
LIRC_mou£Buâ⁄sRï‹ãd
 = 0;

284 
LIRC_mou£Buâ⁄s
 = 0;

287 
LIRC_fd
 = 
fd
;

288  
fd
;

289 
	}
}

297 
	$LIRC_Clo£
()

299 
LIRC_fd
 = -1;

300 
	`mwlúc_˛o£
();

301 
	}
}

306 
	$LIRC_Upd©eKeySèã
(
MWBOOL
 
isDown
, 
MWKEY
 
mwkey
)

308 
MWKEYMOD
 
ch™gebô
 = 0;

310 
mwkey
) {

311 
MWKEY_NUMLOCK
:

312 i‡(!
isDown
)

313 
LIRC_keymod
 ^
MWKMOD_NUM
;

315 
MWKEY_CAPSLOCK
:

316 i‡(!
isDown
)

317 
LIRC_keymod
 ^
MWKMOD_CAPS
;

319 
MWKEY_LCTRL
:

320 
ch™gebô
 = 
MWKMOD_LCTRL
;

322 
MWKEY_RCTRL
:

323 
ch™gebô
 = 
MWKMOD_RCTRL
;

325 
MWKEY_LSHIFT
:

326 
ch™gebô
 = 
MWKMOD_LSHIFT
;

328 
MWKEY_RSHIFT
:

329 
ch™gebô
 = 
MWKMOD_RSHIFT
;

331 
MWKEY_LALT
:

332 
ch™gebô
 = 
MWKMOD_LALT
;

334 
MWKEY_RALT
:

335 
ch™gebô
 = 
MWKMOD_RALT
;

337 
MWKEY_LMETA
:

338 
ch™gebô
 = 
MWKMOD_LMETA
;

340 
MWKEY_RMETA
:

341 
ch™gebô
 = 
MWKMOD_RMETA
;

343 
MWKEY_ALTGR
:

344 
ch™gebô
 = 
MWKMOD_ALTGR
;

350 i‡(
isDown
)

351 
LIRC_keymod
 |
ch™gebô
;

353 
LIRC_keymod
 &~
ch™gebô
;

354 
	}
}

361 
	$LIRC_GëModifõrInfo
(
MWKEYMOD
 * 
modifõrs
, MWKEYMOD * 
curmodifõrs
)

363 i‡(
modifõrs
)

364 *
modifõrs
 = 
MWKMOD_NUM
 | 
MWKMOD_CAPS


365 | 
MWKMOD_LCTRL


366 | 
MWKMOD_LSHIFT
 | 
MWKMOD_RSHIFT


367 | 
MWKMOD_LALT
 | 
MWKMOD_RALT


368 | 
MWKMOD_LMETA
 | 
MWKMOD_RMETA
;

369 i‡(
curmodifõrs
)

370 *
curmodifõrs
 = 
LIRC_keymod
;

371 
	}
}

381 
	$LIRC_Ród
(
MWKEY
 * 
kbuf
, 
MWKEYMOD
 * 
modifõrs
, 
MWSCANCODE
 * 
psˇncode
)

383 
mwlúc_key°roke
 
evít
[1];

384 
îr
;

385 c⁄° 
ªmŸeDrivî_t
 *
drivî
;

386 
ªsu…
 = 0;

388 i‡(
LIRC_≥ndög_keyªÀa£_ch
 != 0) {

389 *
kbuf
 = 
LIRC_≥ndög_keyªÀa£_ch
;

390 *
modifõrs
 = 
LIRC_keymod
;

391 *
psˇncode
 = 
LIRC_≥ndög_keyªÀa£_sˇn
;

392 
LIRC_≥ndög_keyªÀa£_ch
 = 0;

393 
LIRC_≥ndög_keyªÀa£_sˇn
 = 0;

399 
îr
 = 
	`mwlúc_ªad_key°roke_n‹ïót
(
evít
);

401 i‡(
îr
 != 0) {

402 i‡(
îr
 =
MWLIRC_ERROR_AGAIN
) {

405 
	`EPRINTF
("Eº‹Ñëu∫ed by mwlúc_ªad_key°roke(Ë- %d\n", 
îr
);

410 
drivî
 = 
ªmŸeDrivîs
;

411 (
drivî
->
«me
)

412 && (0 !
	`°rcmp
(
drivî
->
«me
, 
evít
->
rc
))) {

413 
drivî
++;

415 i‡(
drivî
->
«me
) {

417 
ªsu…
 = 
drivî
->
	`h™dÀr
(
evít
, 
kbuf
, 
psˇncode
);

419 
	`EPRINTF
("LIRC_Ród(Ë- UƒecognizedÑemŸêc⁄åﬁ '%s'. (Key '%s')\n", 
evít
->
rc
,Évít->
«me
);

422 
ªsu…
 == 0);

424 *
modifõrs
 = 
LIRC_keymod
;

425  (
ªsu…
 == 3 ? 0 :Ñesult);

426 
	}
}

453 
	$ªmŸeMou£H™dÀr
(
mwlúc_key°roke
 * 
evít
, 
MWKEY
 * 
kbuf
,

454 
MWSCANCODE
 * 
psˇncode
)

456 
•ìd
;

457 
dú
;

458 
Àn
 = 0;

460 i‡((
	`ssˇnf
(
evít
->
«me
, "m_%u_%u%n", &
•ìd
, &
dú
, &
Àn
) < 2)

461 || (
Àn
 !
	`°æí
(
evít
->
«me
))

462 || (
dú
 > 15)

463 || (
•ìd
 > 15)) {

464 
	`EPRINTF
("LIRC_Read() - Invalid mouseÉvent '%s'\n",

465 
evít
->
«me
);

469  
	`LIRC_mou£MovedPﬁ¨
(
•ìd
, 
dú
);

470 
	}
}

497 
	skeybﬂrdKey_t_


499 
MWBOOL
 
	misDown
;

500 c⁄° *
	m«me
;

501 c⁄° 
MWKEY
 
	mn‹mÆ
;

502 c⁄° 
MWKEY
 
	mshi·
;

503 c⁄° 
MWKEY
 
	mnum
;

504 c⁄° 
MWKEY
 
	m‚
;

506 
	tkeybﬂrdKey_t
;

508 
keybﬂrdKey_t
 
	gkeybﬂrdKeys
[] = {

511 {0, "ESCAPE", 
MWKEY_ESCAPE
, MWKEY_ESCAPE, MWKEY_ESCAPE, 0},

512 {0, "F1", 
MWKEY_F1
, MWKEY_F1, MWKEY_F1, 
MWKEY_F11
},

513 {0, "F2", 
MWKEY_F2
, MWKEY_F2, MWKEY_F2, 
MWKEY_F12
},

514 {0, "F3", 
MWKEY_F3
, MWKEY_F3, MWKEY_F3, 0},

515 {0, "F4", 
MWKEY_F4
, MWKEY_F4, MWKEY_F4, 0},

516 {0, "F5", 
MWKEY_F5
, MWKEY_F5, MWKEY_F5, 0},

517 {0, "F6", 
MWKEY_F6
, MWKEY_F6, MWKEY_F6, 0},

518 {0, "F7", 
MWKEY_F7
, MWKEY_F7, MWKEY_F7, 0},

519 {0, "F8", 
MWKEY_F8
, MWKEY_F8, MWKEY_F8, 0},

520 {0, "F9", 
MWKEY_F9
, MWKEY_F9, MWKEY_F9, 0},

521 {0, "F10", 
MWKEY_F10
, MWKEY_F10, MWKEY_F10, 0},

522 {0, "NUMLOCK", 
MWKEY_NUMLOCK
, MWKEY_NUMLOCK, MWKEY_NUMLOCK,

523 
MWKEY_NUMLOCK
},

524 {0, "PRINT", 
MWKEY_PRINT
, MWKEY_PRINT, MWKEY_PRINT, 0},

525 {0, "SCROLLOCK", 
MWKEY_SCROLLOCK
, MWKEY_SCROLLOCK, MWKEY_SCROLLOCK,

527 {0, "PAUSE", 
MWKEY_PAUSE
, MWKEY_PAUSE, MWKEY_PAUSE, 0},

528 {0, "INSERT", 
MWKEY_INSERT
, MWKEY_INSERT, MWKEY_INSERT, 0},

544 {0, "BACKSPACE", 
MWKEY_BACKSPACE
, MWKEY_BACKSPACE, MWKEY_BACKSPACE,

548 {0, "TAB", 
MWKEY_TAB
, MWKEY_TAB, MWKEY_TAB, 0},

564 {0, "CAPSLOCK", 
MWKEY_CAPSLOCK
, MWKEY_CAPSLOCK, MWKEY_CAPSLOCK,

565 
MWKEY_CAPSLOCK
},

577 {0, "ENTER", 
MWKEY_ENTER
, MWKEY_ENTER, MWKEY_ENTER, 0},

580 {0, "LSHIFT", 
MWKEY_LSHIFT
, MWKEY_LSHIFT, MWKEY_LSHIFT, MWKEY_LSHIFT},

590 {0, "RSHIFT", 
MWKEY_RSHIFT
, MWKEY_RSHIFT, MWKEY_RSHIFT, MWKEY_RSHIFT},

591 {0, "UP", 
MWKEY_UP
, MWKEY_UP, MWKEY_UP, 
MWKEY_PAGEUP
},

595 {0, "LCTRL", 
MWKEY_LCTRL
, MWKEY_LCTRL, MWKEY_LCTRL, MWKEY_LCTRL},

596 {0, "LMETA", 
MWKEY_LMETA
, MWKEY_LMETA, MWKEY_LMETA, MWKEY_LMETA},

597 {0, "LALT", 
MWKEY_LALT
, MWKEY_LALT, MWKEY_LALT, MWKEY_LALT},

600 {0, "RALT", 
MWKEY_RALT
, MWKEY_RALT, MWKEY_RALT, MWKEY_RALT},

601 {0, "RMETA", 
MWKEY_RMETA
, MWKEY_RMETA, MWKEY_RMETA, MWKEY_RMETA},

602 {0, "LEFT", 
MWKEY_LEFT
, MWKEY_LEFT, MWKEY_LEFT, 
MWKEY_HOME
},

603 {0, "DOWN", 
MWKEY_DOWN
, MWKEY_DOWN, MWKEY_DOWN, 
MWKEY_PAGEDOWN
},

604 {0, "RIGHT", 
MWKEY_RIGHT
, MWKEY_RIGHT, MWKEY_RIGHT, 
MWKEY_END
},

607 {0, 
NULL
, 0, 0, 0, 0}

610 
	gLIRC_‚
 = 0;

613 
	$ªmŸeKeybﬂrdH™dÀr
(
mwlúc_key°roke
 * 
evít
, 
MWKEY
 * 
kbuf
,

614 
MWSCANCODE
 * 
psˇncode
)

616 
MWKEY
 
ch
;

617 
MWSCANCODE
 
sˇn
;

618 
keybﬂrdKey_t
 *
k
;

619 
MWBOOL
 
isDown
;

621 
Àn
 = 
	`°æí
(
evít
->
«me
);

622 i‡(
Àn
 < 2) {

623 
	`EPRINTF
("LIRC_Ród(Ë- InvÆid key '%s' -Åoÿsh‹t. (Mu° bê©Üó° 2 ch¨a˘îs!)\n", 
evít
->
«me
);

626 
Àn
--;

627 
evít
->
«me
[
Àn
]) {

629 
isDown
 = 1;

632 
isDown
 = 0;

635 
	`EPRINTF
("LIRC_Ród(Ë- InvÆid key '%s' -Çÿup/dow¿(^ o∏\\Ëödiˇt‹\n", 
evít
->
«me
);

638 
evít
->
«me
[
Àn
] = '\0';

640 i‡(0 =
	`°rcmp
(
evít
->
«me
, "fn")) {

641 
LIRC_‚
 = 
isDown
;

643 } i‡(0 =
	`°rcmp
(
evít
->
«me
, "lmb")) {

644  
	`LIRC_mou£Buâ⁄
(
MWBUTTON_L
, 
isDown
);

645 } i‡(0 =
	`°rcmp
(
evít
->
«me
, "rmb")) {

646  
	`LIRC_mou£Buâ⁄
(
MWBUTTON_R
, 
isDown
);

649 
k
 = 
keybﬂrdKeys
;

651 0 !
	`°rcmp
(
k
->
«me
, 
evít
->name)) {

652 
k
++;

653 i‡(
NULL
 =
k
->
«me
) {

654 
	`EPRINTF
("LIRC_Read() - Unrecognized key '%s'\n",

655 
evít
->
«me
);

660 i‡(
isDown
 =
k
->isDown)

663 
k
->
isDown
 = isDown;

665 
sˇn
 = 
k
->
n‹mÆ
;

666 
ch
 = ((
LIRC_‚
Ë? 
k
->
‚
 :

667 ((
LIRC_keymod
 & 
MWKMOD_NUM
Ë? 
k
->
num
 :

668 ((
LIRC_keymod
 & 
MWKMOD_SHIFT
Ë? 
k
->
shi·
 : (k->
n‹mÆ
))));

670 i‡(
ch
 == 0)

673 i‡(
LIRC_keymod
 & 
MWKMOD_CAPS
) {

675 i‡((
ch
 >= 'a') && (ch <= 'z')) {

676 
ch
 -= 'a' - 'A';

677 } i‡((
ch
 >= 'A') && (ch <= 'Z')) {

678 
ch
 += 'a' - 'A';

682 
	`LIRC_Upd©eKeySèã
(
isDown
, 
ch
);

685 *
kbuf
 = 
ch
;

686 *
psˇncode
 = 
sˇn
;

688  (
isDown
 ? 1 : 2 );

689 
	}
}

711 
	sªmŸeKey_t_


713 
	mcode
;

714 c⁄° *
	m«me
;

716 
	tªmŸeKey_t
;

718 c⁄° 
ªmŸeKey_t
 
	gªmŸeKeys
[] = {

719 {
MWKEY_ACCEPT
, "ACCEPT"},

720 {
MWKEY_BACKSPACE
, "BACKSPACE"},

721 {
MWKEY_BALANCE_LEFT
, "BALANCE_LEFT"},

722 {
MWKEY_BALANCE_RIGHT
, "BALANCE_RIGHT"},

723 {
MWKEY_BASS_BOOST_DOWN
, "BASS_BOOST_DOWN"},

724 {
MWKEY_BASS_BOOST_UP
, "BASS_BOOST_UP"},

725 {
MWKEY_CANCEL
, "CANCEL"},

726 {
MWKEY_CHANNEL_DOWN
, "CHANNEL_DOWN"},

727 {
MWKEY_CHANNEL_UP
, "CHANNEL_UP"},

728 {
MWKEY_CLEAR_FAVORITE_0
, "CLEAR_FAVORITE_0"},

729 {
MWKEY_CLEAR_FAVORITE_1
, "CLEAR_FAVORITE_1"},

730 {
MWKEY_CLEAR_FAVORITE_2
, "CLEAR_FAVORITE_2"},

731 {
MWKEY_CLEAR_FAVORITE_3
, "CLEAR_FAVORITE_3"},

732 {
MWKEY_COLORED_KEY_0
, "COLORED_KEY_0"},

733 {
MWKEY_COLORED_KEY_1
, "COLORED_KEY_1"},

734 {
MWKEY_COLORED_KEY_2
, "COLORED_KEY_2"},

735 {
MWKEY_COLORED_KEY_3
, "COLORED_KEY_3"},

736 {
MWKEY_COLORED_KEY_4
, "COLORED_KEY_4"},

737 {
MWKEY_COLORED_KEY_5
, "COLORED_KEY_5"},

738 {
MWKEY_DELETE
, "DELETE"},

739 {
MWKEY_DOWN
, "DOWN"},

740 {
MWKEY_DIMMER
, "DIMMER"},

741 {
MWKEY_DISPLAY_SWAP
, "DISPLAY_SWAP"},

742 {
MWKEY_EJECT_TOGGLE
, "EJECT_TOGGLE"},

743 {
MWKEY_END
, "END"},

744 {
MWKEY_ENTER
, "ENTER"},

745 {
MWKEY_ESCAPE
, "ESCAPE"},

746 {
MWKEY_F1
, "F1"},

747 {
MWKEY_F2
, "F2"},

748 {
MWKEY_F3
, "F3"},

749 {
MWKEY_F4
, "F4"},

750 {
MWKEY_F5
, "F5"},

751 {
MWKEY_F6
, "F6"},

752 {
MWKEY_F7
, "F7"},

753 {
MWKEY_F8
, "F8"},

754 {
MWKEY_F9
, "F9"},

755 {
MWKEY_F10
, "F10"},

756 {
MWKEY_F11
, "F11"},

757 {
MWKEY_F12
, "F12"},

758 {
MWKEY_FADER_FRONT
, "FADER_FRONT"},

759 {
MWKEY_FADER_REAR
, "FADER_REAR"},

760 {
MWKEY_FAST_FWD
, "FAST_FWD"},

761 {
MWKEY_GO_TO_END
, "GO_TO_END"},

762 {
MWKEY_GO_TO_START
, "GO_TO_START"},

763 {
MWKEY_GUIDE
, "GUIDE"},

764 {
MWKEY_HOME
, "HOME"},

765 {
MWKEY_INFO
, "INFO"},

767 {
MWKEY_LEFT
, "LEFT"},

768 {
MWKEY_MUTE
, "MUTE"},

769 {
MWKEY_PAGEDOWN
, "PAGEDOWN"},

770 {
MWKEY_PAGEUP
, "PAGEUP"},

771 {
MWKEY_PAUSE
, "PAUSE"},

772 {
MWKEY_PINP_TOGGLE
, "PINP_TOGGLE"},

773 {
MWKEY_PLAY
, "PLAY"},

774 {
MWKEY_PLAY_SPEED_DOWN
, "PLAY_SPEED_DOWN"},

775 {
MWKEY_PLAY_SPEED_RESET
, "PLAY_SPEED_RESET"},

776 {
MWKEY_PLAY_SPEED_UP
, "PLAY_SPEED_UP"},

777 {
MWKEY_POWER
, "POWER"},

778 {
MWKEY_PRINT
, "PRINT"},

779 {
MWKEY_RANDOM_TOGGLE
, "RANDOM_TOGGLE"},

780 {
MWKEY_RECALL_FAVORITE_0
, "RECALL_FAVORITE_0"},

781 {
MWKEY_RECALL_FAVORITE_1
, "RECALL_FAVORITE_1"},

782 {
MWKEY_RECALL_FAVORITE_2
, "RECALL_FAVORITE_2"},

783 {
MWKEY_RECALL_FAVORITE_3
, "RECALL_FAVORITE_3"},

784 {
MWKEY_RECORD
, "RECORD"},

785 {
MWKEY_RECORD_SPEED_NEXT
, "RECORD_SPEED_NEXT"},

786 {
MWKEY_REWIND
, "REWIND"},

787 {
MWKEY_RIGHT
, "RIGHT"},

788 {
MWKEY_SCAN_CHANNELS_TOGGLE
,"SCAN_CHANNELS_TOGGLE"},

789 {
MWKEY_SCREEN_MODE_NEXT
, "SCREEN_MODE_NEXT"},

792 {
MWKEY_SPLIT_SCREEN_TOGGLE
, "SPLIT_SCREEN_TOGGLE"},

793 {
MWKEY_STOP
, "STOP"},

794 {
MWKEY_STORE_FAVORITE_0
, "STORE_FAVORITE_0"},

795 {
MWKEY_STORE_FAVORITE_1
, "STORE_FAVORITE_1"},

796 {
MWKEY_STORE_FAVORITE_2
, "STORE_FAVORITE_2"},

797 {
MWKEY_STORE_FAVORITE_3
, "STORE_FAVORITE_3"},

798 {
MWKEY_SUBTITLE
, "SUBTITLE"},

799 {
MWKEY_SURROUND_MODE_NEXT
, "SURROUND_MODE_NEXT"},

800 {
MWKEY_TAB
, "TAB"},

801 {
MWKEY_TELETEXT
, "TELETEXT"},

802 {
MWKEY_TRACK_NEXT
, "TRACK_NEXT"},

803 {
MWKEY_TRACK_PREV
, "TRACK_PREV"},

804 {
MWKEY_UP
, "UP"},

805 {
MWKEY_VIDEO_MODE_NEXT
, "VIDEO_MODE_NEXT"},

806 {
MWKEY_VOLUME_DOWN
, "VOLUME_DOWN"},

807 {
MWKEY_VOLUME_UP
, "VOLUME_UP"},

808 {
MWKEY_WINK
, "WINK"},

809 {0, 
NULL
}

813 
	$ªmŸeC⁄åﬁH™dÀr
(
mwlúc_key°roke
 * 
evít
, 
MWKEY
 * 
kbuf
,

814 
MWSCANCODE
 * 
psˇncode
)

816 
MWKEY
 
ch
;

817 
Àn
 = 
	`°æí
(
evít
->
«me
);

819 i‡(
Àn
 == 1) {

821 
ch
 = 
evít
->
«me
[0];

825 c⁄° 
ªmŸeKey_t
 *
k
 = 
ªmŸeKeys
;

826 0 !
	`°rcmp
(
k
->
«me
, 
evít
->name)) {

827 
k
++;

828 i‡(
NULL
 =
k
->
«me
) {

829 
	`EPRINTF
("LIRC_Ród(Ë- Uƒecognized key '%s'\n", 
evít
->
«me
);

833 
ch
 = 
k
->
code
;

837 *
kbuf
 = 
ch
;

838 *
psˇncode
 = 
ch
;

841 
LIRC_≥ndög_keyªÀa£_ch
 = 
ch
;

842 
LIRC_≥ndög_keyªÀa£_sˇn
 = 
ch
;

844 
	}
}

	@drivers/kbd_null.c

6 
	~<°dio.h
>

7 
	~"devi˚.h
"

9 
NUL_O≥n
(
KBDDEVICE
 *
pkd
);

10 
NUL_Clo£
();

11 
NUL_GëModifõrInfo
(
MWKEYMOD
 *
modifõrs
, MWKEYMOD *
curmodifõrs
);

12 
NUL_Ród
(
MWKEY
 *
buf
, 
MWKEYMOD
 *
modifõrs
, 
MWSCANCODE
 *
sˇncode
);

13 
NUL_Pﬁl
();

15 
KBDDEVICE
 
	gkbddev
 = {

16 
NUL_O≥n
,

17 
NUL_Clo£
,

18 
NUL_GëModifõrInfo
,

19 
NUL_Ród
,

20 
NUL_Pﬁl


27 
	$NUL_Pﬁl
()

30 
	}
}

36 
	$NUL_O≥n
(
KBDDEVICE
 *
pkd
)

39 
	}
}

45 
	$NUL_Clo£
()

47 
	}
}

53 
	$NUL_GëModifõrInfo
(
MWKEYMOD
 *
modifõrs
, MWKEYMOD *
curmodifõrs
)

55 i‡(
modifõrs
)

56 *
modifõrs
 = 0;

57 i‡(
curmodifõrs
)

58 *
curmodifõrs
 = 0;

59 
	}
}

68 
	$NUL_Ród
(
MWKEY
 *
buf
, 
MWKEYMOD
 *
modifõrs
, 
MWSCANCODE
 *
sˇncode
)

71 
	}
}

	@drivers/kbd_pac.c

9 
	~"devi˚.h
"

10 
	~<dos.h
>

11 
	~<c⁄io.h
>

14 
KBD_O≥n
(
KBDDEVICE
 *
pkd
);

15 
KBD_Clo£
();

16 
KBD_GëModifõrInfo
(*
modifõrs
);

17 
KBD_Ród
(
MWUCHAR
 *
buf
, *
modifõrs
);

18 
KBD_Pﬁl
();

21 
KBDDEVICE
 
	gkbddev
 = {

22 
KBD_O≥n
,

23 
KBD_Clo£
,

24 
KBD_GëModifõrInfo
,

25 
KBD_Ród
,

26 
KBD_Pﬁl


34 
	$KBD_O≥n
(
KBDDEVICE
 *
pkd
)

37 
	}
}

43 
	$KBD_Clo£
()

45 
	}
}

51 
	$KBD_GëModifõrInfo
(*
modifõrs
)

53 *
modifõrs
 = 0;

54 
	}
}

62 
	$KBD_Ród
(
MWUCHAR
 *
buf
, *
modifõrs
)

64 
REGS
 
ªg
;

67 i‡(!
	`kbhô
())

71 
ªg
.
x
.
ax
 = 0x0200;

72 
	`öt86
(0x16, &
ªg
, &reg);

73 *
modifõrs
 = 
ªg
.
x
.
ax
;

76 
ªg
.
x
.
ax
 = 0x1000;

77 
	`öt86
(0x16, &
ªg
, &reg);

78 *
buf
 = (
ªg
.
x
.
ax
 & 0x00ff);

80 if(*
buf
 == 0x1b)

83 
	}
}

89 
	$KBD_Pﬁl
()

91 i‡(
	`kbhô
())

95 
	}
}

	@drivers/kbd_pipe.c

11 
	~<°dio.h
>

12 
	~<°ddef.h
>

13 
	~<°dlib.h
>

14 
	~<uni°d.h
>

15 
	~<î∫o.h
>

16 
	~<°rög.h
>

17 
	~<f˙é.h
>

18 
	~<sys/°©.h
>

19 
	~<sys/ty≥s.h
>

20 
	~"devi˚.h
"

22 
	gkbdName
[] = "/tmp/.nano-X-softkbd";

23 
	#KBD_NAMED_PIPE
 
kbdName


	)

25 
	#_SOFT_DEBUG
 0

	)

27 
	gkbd_fd
 = -1;

29 
so·_O≥n
(
KBDDEVICE
* 
pkd
);

30 
so·_Clo£
();

31 
so·_GëModifõrInfo
(
MWKEYMOD
* 
modifõrs
, MWKEYMOD* 
curmodifõrs
);

32 
so·_Ród
(
MWKEY
* 
buf
, 
MWKEYMOD
* 
modifõrs
, 
MWSCANCODE
* 
sˇncode
);

34 
KBDDEVICE
 
	gkbddev
 = {

35 
so·_O≥n
,

36 
so·_Clo£
,

37 
so·_GëModifõrInfo
,

38 
so·_Ród
,

39 
NULL


46 
	$so·_O≥n
(
KBDDEVICE
* 
pkd
)

48 
°©
 
s
;

51 i‡(!
	`°©
(
KBD_NAMED_PIPE
, &
s
)) {

52 i‡(
	`u∆ök
(
KBD_NAMED_PIPE
) < 0)

55 i‡(
	`mkfifo
(
KBD_NAMED_PIPE
, 0600) < 0) {

56 
	`EPRINTF
("mkfifo()Érror %d ('%s')\n", \

57 
î∫o
, 
sys_îæi°
[errno]);

62 i‡((
kbd_fd
 = 
	`›í
(
KBD_NAMED_PIPE
, 
O_RDONLY
 | 
O_NONBLOCK
)) < 0) {

63 
	`EPRINTF
("open()Érror %d ('%s')\n", \

64 
î∫o
, 
sys_îæi°
[errno]);

68  
kbd_fd
;

69 
	}
}

75 
	$so·_Clo£
()

77 #i‡
_SOFT_DEBUG


78 
	`EPRINTF
("kbd_so·.c: so·_Clo£(): closögÇamedÖùê%d\n", 
kbd_fd
);

80 i‡(
kbd_fd
 >= 0)

81 
	`˛o£
(
kbd_fd
);

82 
kbd_fd
 = -1;

84 
	`u∆ök
(
KBD_NAMED_PIPE
);

85 
	}
}

91 
	$so·_GëModifõrInfo
(
MWKEYMOD
* 
modifõrs
, MWKEYMOD* 
curmodifõrs
)

93 #i‡
_SOFT_DEBUG


94 
	`EPRINTF
("kbd_soft.c: soft_GetModifierInfo(): beingáskedábout modifiers\n");

96 i‡(
modifõrs
)

97 *
modifõrs
 = 0;

98 i‡(
curmodifõrs
)

99 *
curmodifõrs
 = 0;

100 
	}
}

109 
	$so·_Ród
(
MWKEY
* 
buf
, 
MWKEYMOD
* 
modifõrs
, 
MWSCANCODE
* 
sˇncode
)

111 
cc
;

112 *
modifõrs
 = 0;

113 *
sˇncode
 = 0;

115 
cc
 = 
	`ªad
(
kbd_fd
, 
buf
, 1);

117 i‡(
cc
 > 0) {

118 if(*
buf
 == 0x1b)

120 #i‡
_SOFT_DEBUG


121 
	`EPRINTF
("kbd_soft.c: soft_Read():Ñead '%c', cc = %d\n",

122 
buf
[0], 
cc
);

123 
	`fÊush
(
NULL
);

129 
	}
}

	@drivers/kbd_psp.c

7 
	~<p•utûs.h
>

8 
	~<p•kî√l.h
>

9 
	~<p•debug.h
>

11 
	~"devi˚.h
"

13 
KBD_O≥n
(
KBDDEVICE
 *
pkd
);

14 
KBD_Clo£
();

16 
KBD_GëModifõrInfo
(
MWKEYMOD
 *
modifõrs
, MWKEYMOD *
curmodifõrs
);

18 
KBD_Ród
(
MWKEY
 *
buf
, 
MWKEYMOD
 *
modifõrs
, 
MWSCANCODE
 *
sˇncode
);

19 
KBD_Pﬁl
();

21 
KBDDEVICE
 
	gkbddev
 = {

22 
KBD_O≥n
,

23 
KBD_Clo£
,

24 
KBD_GëModifõrInfo
,

25 
KBD_Ród
,

26 
KBD_Pﬁl


29 
p•_key¥ess
;

35 
	$KBD_O≥n
(
KBDDEVICE
 *
pkd
)

38 
	}
}

44 
	$KBD_Clo£
()

46 
	}
}

52 
	$KBD_GëModifõrInfo
(
MWKEYMOD
 *
modifõrs
, MWKEYMOD *
curmodifõrs
)

54 if(
modifõrs
)

55 *
modifõrs
 = 0;

56 if(
curmodifõrs
)

57 *
curmodifõrs
 = 0;

58 
	}
}

66 
	$KBD_Ród
(
MWKEY
 *
buf
, 
MWKEYMOD
 *
modifõrs
, 
MWSCANCODE
 *
sˇncode
)

68 *
modifõrs
 = 0;

70 if(
p•_key¥ess
 > 0) {

71 *
buf
 = 
p•_key¥ess
;

72 
p•_key¥ess
 = -psp_keypress;

78 
	}
}

80 
	#timîdiff
(
a
,
b
Ë(()(◊).
tv_£c
 - (b).tv_sec) + \

81 ()((
a
).
tv_u£c
 - (
b
).tv_u£c)/1e6)

	)

84 
	$KBD_Pﬁl
()

86 if(
p•_key¥ess
 > 0)

90 
	}
}

	@drivers/kbd_rtems.c

25 
	~<°dio.h
>

26 
	~<°dlib.h
>

27 
	~<f˙é.h
>

28 
	~<sys/io˘l.h
>

29 
	~<î∫o.h
>

31 
	~<πems/mw_uid.h
>

32 
	~"devi˚.h
"

34 
˛o£
 (
fd
);

36 
	#SCALE
 3

	)

37 
	#THRESH
 5

	)

40 
MWKbd_O≥n
 (
KBDDEVICE
 *
pkd
);

41 
MWKbd_Clo£
 ();

42 
MWKbd_GëModifõrInfo
 (
MWKEYMOD
 *
modifõrs
, MWKEYMOD *
curmodifõrs
);

43 
MWKbd_Ród
 (
MWKEY
 *
buf
, 
MWKEYMOD
 *
modifõrs
, 
MWSCANCODE
 *
sˇncode
);

45 
KBDDEVICE
 
	gkbddev
 = {

46 
MWKbd_O≥n
,

47 
MWKbd_Clo£
,

48 
MWKbd_GëModifõrInfo
,

49 
MWKbd_Ród
,

50 
NULL


53 
MW_UID_MESSAGE
 
	gm_kbd
 = { 0 };

54 
	gkbd_fd
 = -1;

55 c⁄° *
	gQ_NAME
 = "MWQ";

56 
	#Q_MAX_MSGS
 20

	)

63 
	$MWKbd_O≥n
 (
KBDDEVICE
 *
pkd
)

65 
rc
;

66 
m_kbd
.
ty≥
 = 
MV_UID_INVALID
;

67 
kbd_fd
 = 
	`fûío
 (
°dö
);

68 
rc
 = 
	`uid_›í_queue
 (
Q_NAME
, 
O_CREAT
 | 
O_RDWR
, 
Q_MAX_MSGS
);

69 
	`uid_ªgi°î_devi˚
 (
kbd_fd
, 
Q_NAME
);

71 
	}
}

77 
	$MWKbd_Clo£
 ()

79 
	`uid_uƒegi°î_devi˚
 (
kbd_fd
);

80 
	`uid_˛o£_queue
 ();

81 
	`˛o£
 (
kbd_fd
);

82 
	}
}

88 
	$MWKbd_GëModifõrInfo
 (
MWKEYMOD
 *
modifõrs
, MWKEYMOD *
curmodifõrs
)

90 *
modifõrs
 = 0;

91 
	}
}

99 
	$MWKbd_Ród
 (
MWKEY
 *
buf
, 
MWKEYMOD
 *
modifõrs
, 
MWSCANCODE
 *
sˇncode
)

102 if–
m_kbd
.
ty≥
 !
MV_UID_INVALID
 )

104 *
buf
 = 
m_kbd
.
m
.
kbd
.
code
;

106 *
modifõrs
 = 0;

109 
m_kbd
.
ty≥
 = 
MV_UID_INVALID
;

113 
	}
}

	@drivers/kbd_tc.c

9 
	~"devi˚.h
"

10 
	~<bios.h
>

12 
KBD_O≥n
(
KBDDEVICE
 *
pkd
);

13 
KBD_Clo£
();

14 
KBD_GëModifõrInfo
(*
modifõrs
);

15 
KBD_Ród
(
MWUCHAR
 *
buf
, *
modifõrs
);

16 
KBD_Pﬁl
();

18 
KBDDEVICE
 
	gkbddev
 = {

19 
KBD_O≥n
,

20 
KBD_Clo£
,

21 
KBD_GëModifõrInfo
,

22 
KBD_Ród
,

23 
KBD_Pﬁl


30 
	$KBD_O≥n
(
KBDDEVICE
 *
pkd
)

33 
	}
}

39 
	$KBD_Clo£
()

41 
	}
}

47 
	$KBD_GëModifõrInfo
(*
modifõrs
)

49 *
modifõrs
 = 
	`bioskey
(2);

50 
	}
}

58 
	$KBD_Ród
(
MWUCHAR
 *
buf
, *
modifõrs
)

61 if(!
	`bioskey
(1))

65 *
modifõrs
 = 
	`bioskey
(2);

68 *
buf
 = 
	`bioskey
(0);

70 if(*
buf
 == 0x1b)

73 
	}
}

76 
	$KBD_Pﬁl
()

78 i‡(
	`bioskey
(1)!=0)

82 
	}
}

	@drivers/kbd_tty.c

12 
	~<°dlib.h
>

13 
	~<sys/ty≥s.h
>

14 
	~<f˙é.h
>

15 
	~<uni°d.h
>

16 
	~<î∫o.h
>

17 
	~<ãrmios.h
>

18 
	~"devi˚.h
"

22 #i‡
ELKS


23 
	#KEYBOARD
 "/dev/ây1"

	)

25 
	#KEYBOARD
 "/dev/ây"

	)

28 
	#CTRL
(
x
Ë((xË& 0x1f)

	)

30 
esˇ≥_quôs
;

32 
TTY_O≥n
(
KBDDEVICE
 *
pkd
);

33 
TTY_Clo£
();

34 
TTY_GëModifõrInfo
(
MWKEYMOD
 *
modifõrs
, MWKEYMOD *
curmodifõrs
);

35 
TTY_Ród
(
MWKEY
 *
kbuf
, 
MWKEYMOD
 *
modifõrs
, 
MWSCANCODE
 *
sˇncode
);

36 
TTY_Pﬁl
();

38 
KBDDEVICE
 
	gkbddev
 = {

39 
TTY_O≥n
,

40 
TTY_Clo£
,

41 
TTY_GëModifõrInfo
,

42 
TTY_Ród
,

43 #i‡
_MINIX


44 
TTY_Pﬁl


46 
NULL


50 
	gfd
;

51 
ãrmios
 
	gﬁd
;

60 
	$TTY_O≥n
(
KBDDEVICE
 *
pkd
)

62 * 
kbd
;

63 
ãrmios
 
√w
;

66 i‡(!(
kbd
 = 
	`gëív
("CONSOLE")))

67 
kbd
 = 
KEYBOARD
;

68 
fd
 = 
	`›í
(
kbd
, 
O_NONBLOCK
);

69 i‡(
fd
 < 0)

72 i‡(
	`tcgë©å
(
fd
, &
ﬁd
) < 0)

73 
îr
;

75 
√w
 = 
ﬁd
;

77 
√w
.
c_lÊag
 &~(
ECHO
 | 
ICANON
 | 
IEXTEN
 );

78 
√w
.
c_iÊag
 &~(
ICRNL
 | 
INPCK
 | 
ISTRIP
 | 
IXON
 );

79 
√w
.
c_cÊag
 &~(
CSIZE
 | 
PARENB
);

80 
√w
.
c_cÊag
 |
CS8
;

81 
√w
.
c_cc
[
VMIN
] = 0;

82 
√w
.
c_cc
[
VTIME
] = 0;

84 if(
	`tc£èâr
(
fd
, 
TCSAFLUSH
, &
√w
) < 0)

85 
îr
;

86  
fd
;

88 
îr
:

89 
	`˛o£
(
fd
);

90 
fd
 = 0;

92 
	}
}

99 
	$TTY_Clo£
()

101 
	`tc£èâr
(
fd
, 
TCSANOW
, &
ﬁd
);

102 
	`˛o£
(
fd
);

103 
fd
 = 0;

104 
	}
}

110 
	$TTY_GëModifõrInfo
(
MWKEYMOD
 *
modifõrs
, MWKEYMOD *
curmodifõrs
)

112 i‡(
modifõrs
)

113 *
modifõrs
 = 0;

114 i‡(
curmodifõrs
)

115 *
curmodifõrs
 = 0;

116 
	}
}

125 
	$TTY_Ród
(
MWKEY
 *
kbuf
, 
MWKEYMOD
 *
modifõrs
, 
MWSCANCODE
 *
sˇncode
)

127 #i‡
TRANSLATE_ESCAPE_SEQUENCES


128 
buf
[5];

129 
buÊí
 = 0;

131 
buf
[1];

132 c⁄° 
buÊí
 = 0;

134 
cc
;

135 
MWKEY
 
mwkey
;

137 
cc
 = 
	`ªad
(
fd
, 
buf
 + 
buÊí
, 1);

138 i‡((
cc
 < 0Ë&& (
î∫o
 !
EINTR
Ë&& (î∫ÿ!
EAGAIN
)) {

141 i‡(
cc
 <= 0) {

145 
mwkey
 = 
buf
[0];

146 #i‡
TRANSLATE_ESCAPE_SEQUENCES


147 i‡(
mwkey
 == 27) {

148 
mwkey
 = 0;

149 
buÊí
 +
cc
;

150 i‡(
buÊí
 < 3) {

153 
cc
 = 
	`ªad
(
fd
, 
buf
 + 
buÊí
, 3 - buflen);

154 } (
cc
 < 0Ë&& ((
î∫o
 =
EINTR
Ë|| (î∫ÿ=
EAGAIN
)));

155 i‡(
cc
 < 0) {

158 
buÊí
 +
cc
;

159 i‡(
buÊí
 < 3) {

165 
buf
[1]) {

167 
buf
[2]) {

168 'P': 
mwkey
 = 
MWKEY_F1
; ;

169 'Q': 
mwkey
 = 
MWKEY_F2
; ;

170 'R': 
mwkey
 = 
MWKEY_F3
; ;

171 'S': 
mwkey
 = 
MWKEY_F4
; ;

175 
buf
[2]) {

176 '5': i‡(
buÊí
 < 4)  0;

177 i‡(
buf
[3] ='~'Ë
mwkey
 = 
MWKEY_F5
;

179 '7': i‡(
buÊí
 < 4)  0;

180 i‡(
buf
[3] ='~'Ë
mwkey
 = 
MWKEY_F6
;

182 '8': i‡(
buÊí
 < 4)  0;

183 i‡(
buf
[3] ='~'Ë
mwkey
 = 
MWKEY_F7
;

185 '9': i‡(
buÊí
 < 4)  0;

186 i‡(
buf
[3] ='~'Ë
mwkey
 = 
MWKEY_F8
;

191 
buf
[2]) {

192 '0': i‡(
buÊí
 < 4)  0;

193 i‡(
buf
[3] ='~'Ë
mwkey
 = 
MWKEY_F9
;

195 '1': i‡(
buÊí
 < 4)  0;

196 i‡(
buf
[3] ='~'Ë
mwkey
 = 
MWKEY_F10
;

198 '3': i‡(
buÊí
 < 4)  0;

199 i‡(
buf
[3] ='~'Ë
mwkey
 = 
MWKEY_F11
;

201 '4': i‡(
buÊí
 < 4)  0;

202 i‡(
buf
[3] ='~'Ë
mwkey
 = 
MWKEY_F12
;

207 
buf
[2]) {

209 i‡(
buÊí
 < 4)

211 
buf
[3]) {

212 '~': 
mwkey
 = 
MWKEY_HOME
;

214 '5': i‡(
buÊí
 < 5)  0;

215 i‡(
buf
[4] ='~'Ë
mwkey
 = 
MWKEY_F5
;

217 '7': i‡(
buÊí
 < 5)  0;

218 i‡(
buf
[4] ='~'Ë
mwkey
 = 
MWKEY_F6
;

220 '8': i‡(
buÊí
 < 5)  0;

221 i‡(
buf
[4] ='~'Ë
mwkey
 = 
MWKEY_F7
;

223 '9': i‡(
buÊí
 < 5)  0;

224 i‡(
buf
[4] ='~'Ë
mwkey
 = 
MWKEY_F8
;

229 i‡(
buÊí
 < 4)

231 
buf
[3]) {

232 '~': 
mwkey
 = 
MWKEY_INSERT
; ;

233 '0': i‡(
buÊí
 < 5)  0;

234 i‡(
buf
[4] ='~'Ë
mwkey
 = 
MWKEY_F9
;

236 '1': i‡(
buÊí
 < 5)  0;

237 i‡(
buf
[4] ='~'Ë
mwkey
 = 
MWKEY_F10
;

239 '3': i‡(
buÊí
 < 5)  0;

240 i‡(
buf
[4] ='~'Ë
mwkey
 = 
MWKEY_F11
;

242 '4': i‡(
buÊí
 < 5)  0;

243 i‡(
buf
[4] ='~'Ë
mwkey
 = 
MWKEY_F12
;

247 '3': i‡(
buÊí
 < 4)  0;

248 i‡(
buf
[3] ='~'Ë
mwkey
 = 
MWKEY_DELETE
;

250 '4': i‡(
buÊí
 < 4)  0;

251 i‡(
buf
[3] ='~'Ë
mwkey
 = 
MWKEY_END
;

253 '5': i‡(
buÊí
 < 4)  0;

254 i‡(
buf
[3] ='~'Ë
mwkey
 = 
MWKEY_PAGEUP
;

256 '6': i‡(
buÊí
 < 4)  0;

257 i‡(
buf
[3] ='~'Ë
mwkey
 = 
MWKEY_PAGEDOWN
;

259 'A': 
mwkey
 = 
MWKEY_UP
; ;

260 'B': 
mwkey
 = 
MWKEY_DOWN
; ;

261 'C': 
mwkey
 = 
MWKEY_RIGHT
; ;

262 'D': 
mwkey
 = 
MWKEY_LEFT
; ;

263 'F': 
mwkey
 = 
MWKEY_END
; ;

264 'H': 
mwkey
 = 
MWKEY_HOME
; ;

266 i‡(
buÊí
 < 4)

268 
buf
[3]) {

269 '7': i‡(
buÊí
 < 5)  0;

270 i‡(
buf
[4] ='~'Ë
mwkey
 = 
MWKEY_F6
;

272 '8': i‡(
buÊí
 < 5)  0;

273 i‡(
buf
[4] ='~'Ë
mwkey
 = 
MWKEY_F7
;

275 '9': i‡(
buÊí
 < 5)  0;

276 i‡(
buf
[4] ='~'Ë
mwkey
 = 
MWKEY_F8
;

278 'A': 
mwkey
 = 
MWKEY_F1
; ;

279 'B': 
mwkey
 = 
MWKEY_F2
; ;

280 'C': 
mwkey
 = 
MWKEY_F3
; ;

281 'D': 
mwkey
 = 
MWKEY_F4
; ;

282 'E': 
mwkey
 = 
MWKEY_F5
; ;

288 i‡(
buf
[2] =27Ë
mwkey
 = 
MWKEY_ESCAPE
;

291 i‡(
mwkey
 == 0) {

292 i‡(
buÊí
 >= 5) {

293 
	`EPRINTF
("WARNING: UnknownÉscape sequence ESC '%c' '%c' '%c' '%c'.\n"

295 
buf
[1], buf[2], buf[3], buf[4]);

296 } i‡(
buÊí
 == 4) {

297 
	`EPRINTF
("WARNING: UnknownÉscape sequence ESC '%c' '%c' '%c'.\n"

299 
buf
[1], buf[2], buf[3]);

301 
	`EPRINTF
("WARNING: UnknownÉscape sequence ESC '%c' '%c'.\n"

303 
buf
[1], buf[2]);

305 
buÊí
 = 0;

308 #ifde‡
DEBUG_ESCAPE_SEQUENCES


309 i‡(
buÊí
 >= 5) {

310 
	`EPRINTF
("Got chars: ESC '%c' '%c' '%c' '%c'.\n",

311 
buf
[1], buf[2], buf[3], buf[4]);

312 } i‡(
buÊí
 == 4) {

313 
	`EPRINTF
("Got chars: ESC '%c' '%c' '%c'.\n",

314 
buf
[1], buf[2], buf[3]);

316 
	`EPRINTF
("Got chars: ESC '%c' '%c'.\n",

317 
buf
[1], buf[2]);

321 
buÊí
 = 0;

325 i‡(
mwkey
 =
	`CTRL
('P'))

326 
mwkey
 = 
MWKEY_PRINT
;

330 i‡((
mwkey
 =
MWKEY_ESCAPE
Ë&& 
esˇ≥_quôs
)

331 
mwkey
 = 
MWKEY_QUIT
;

333 #ifde‡
DEBUG_ESCAPE_SEQUENCES


334 i‡(
buf
[0] != 27) {

335 
	`EPRINTF
("GŸ ch¨: '%c'.\n", 
buf
[0]);

337 
	`EPRINTF
("GŸ key: %d\n", 
mwkey
);

340 *
kbuf
 = 
mwkey
;

341 *
modifõrs
 = 0;

342 *
sˇncode
 = 0;

344 
	}
}

347 
	$TTY_Pﬁl
()

350 
	}
}

	@drivers/kbd_ttyscan.c

6 
	~<°dio.h
>

7 
	~<°dlib.h
>

8 
	~<°rög.h
>

9 
	~<uni°d.h
>

10 
	~<sys/ty≥s.h
>

11 
	~<f˙é.h
>

12 
	~<î∫o.h
>

13 
	~<ãrmios.h
>

14 
	~<sys/io˘l.h
>

15 
	~<löux/keybﬂrd.h
>

16 
	~<löux/kd.h
>

17 
	~<löux/vt.h
>

18 
	~"devi˚.h
"

19 
	~"fb.h
"

21 
	#KEYBOARD
 "/dev/ây"

	)

23 
TTY_O≥n
(
KBDDEVICE
 *
pkd
);

24 
TTY_Clo£
();

25 
TTY_GëModifõrInfo
(
MWKEYMOD
 *
modifõrs
, MWKEYMOD *
curmodifõrs
);

26 
TTY_Ród
(
MWKEY
 *
kbuf
, 
MWKEYMOD
 *
modifõrs
, 
MWSCANCODE
 *
sˇncode
);

28 
KBDDEVICE
 
	gkbddev
 = {

29 
TTY_O≥n
,

30 
TTY_Clo£
,

31 
TTY_GëModifõrInfo
,

32 
TTY_Ród
,

33 
NULL


36 
	#RELEASED
 0

	)

37 
	#PRESSED
 1

	)

39 
	gfd
;

40 
ãrmios
 
	gﬁd
;

41 
	gﬁd_kbd_mode
;

42 
	gkey_°©e
[
MWKEY_LAST
];

43 
MWKEYMOD
 
	gkey_mod°©e
;

46 
	#NUM_VGAKEYMAPS
 (1<<
KG_CAPSSHIFT
Ë

	)

47 
	gos_keym≠
[
NUM_VGAKEYMAPS
][
NR_KEYS
];

51 #i‡
KBD_ZAURUS


52 
	~"keym≠_zaurus.h
"

54 
	~"keym≠_°™d¨d.h
"

57 
MWBOOL
 
Upd©eKeySèã
(
¥es£d
, 
MWKEY
 
mwkey
);

58 
Upd©eLEDSèã
(
MWKEYMOD
 
mod°©e
);

59 
MWKEY
 
Tøn¶©eSˇncode
(
sˇncode
, 
MWKEYMOD
 
mod°©e
);

60 
LﬂdKî√lKeym≠s
(
fd
);

61 
MWBOOL
 
swôch_vt
(
which
);

70 
	$TTY_O≥n
(
KBDDEVICE
 *
pkd
)

72 
i
;

73 
Àd°©e
 = 0;

74 * 
kbd
;

75 
ãrmios
 
√w
;

78 if(!(
kbd
 = 
	`gëív
("CONSOLE")))

79 
kbd
 = 
KEYBOARD
;

80 
fd
 = 
	`›í
(
kbd
, 
O_NONBLOCK
);

81 i‡(
fd
 < 0)

85 i‡(
	`io˘l
(
fd
, 
KDGKBMODE
, &
ﬁd_kbd_mode
) < 0) {

86 
	`≥º‹
("KDGKMODE");

87 
îr
;

89 i‡(
	`tcgë©å
(
fd
, &
ﬁd
) < 0)

90 
îr
;

93 
√w
 = 
ﬁd
;

95 
√w
.
c_lÊag
 &~(
ICANON
 | 
ECHO
 | 
ISIG
);

96 
√w
.
c_iÊag
 &~(
ISTRIP
 | 
IGNCR
 | 
ICRNL
 | 
INLCR
 | 
IXOFF
 | 
IXON


97 | 
BRKINT
);

98 
√w
.
c_cc
[
VMIN
] = 0;

99 
√w
.
c_cc
[
VTIME
] = 0;

101 i‡(
	`tc£èâr
(
fd
, 
TCSAFLUSH
, &
√w
) < 0) {

102 
	`TTY_Clo£
();

105 i‡(
	`io˘l
(
fd
, 
KDSKBMODE
, 
K_MEDIUMRAW
) < 0) {

106 
	`TTY_Clo£
();

111 
	`LﬂdKî√lKeym≠s
(
fd
);

114 
key_mod°©e
 = 
MWKMOD_NONE
;

115 
i
=0; i<
MWKEY_LAST
; ++i)

116 
key_°©e
[
i
] = 
RELEASED
;

119 i‡(
	`io˘l
(
fd
, 
KDGETLED
, &
Àd°©e
) == 0) {

120 i‡(
Àd°©e
 & 
LED_CAP
) {

121 
key_mod°©e
 |
MWKMOD_CAPS
;

122 
key_°©e
[
MWKEY_CAPSLOCK
] = 
PRESSED
;

124 i‡(
Àd°©e
 & 
LED_NUM
) {

125 
key_mod°©e
 |
MWKMOD_NUM
;

126 
key_°©e
[
MWKEY_NUMLOCK
] = 
PRESSED
;

129 
	`Upd©eLEDSèã
(
key_mod°©e
);

131  
fd
;

133 
îr
:

134 
	`˛o£
(
fd
);

135 
fd
 = -1;

137 
	}
}

144 
	$TTY_Clo£
()

146 
Àd°©e
 = 0x80000000L;

148 i‡(
fd
 >= 0) {

150 i‡(
	`io˘l
(
fd
, 
KDSETLED
, 
Àd°©e
) < 0)

151 
	`≥º‹
("KDSETLED");

154 i‡(
	`io˘l
(
fd
, 
KDSKBMODE
, 
ﬁd_kbd_mode
) < 0)

155 
	`≥º‹
("KDSKBMODE");

156 
	`tc£èâr
(
fd
, 
TCSAFLUSH
, &
ﬁd
);

158 
	`˛o£
(
fd
);

160 
fd
 = -1;

161 
	}
}

167 
	$TTY_GëModifõrInfo
(
MWKEYMOD
 *
modifõrs
, MWKEYMOD *
curmodifõrs
)

169 i‡(
modifõrs
)

170 *
modifõrs
 = 
MWKMOD_CTRL
 | 
MWKMOD_SHIFT
 | 
MWKMOD_ALT
 |

171 
MWKMOD_META
 | 
MWKMOD_ALTGR
 | 
MWKMOD_CAPS
 | 
MWKMOD_NUM
;

172 i‡(
curmodifõrs
)

173 *
curmodifõrs
 = 
key_mod°©e
;

174 
	}
}

183 
	$TTY_Ród
(
MWKEY
 *
kbuf
, 
MWKEYMOD
 *
modifõrs
, 
MWSCANCODE
 *
psˇncode
)

185 
cc
;

186 
¥es£d
;

187 
sˇncode
;

188 
MWKEY
 
mwkey
;

189 
buf
[128];

191 
cc
 = 
	`ªad
(
fd
, 
buf
, 1);

192 i‡(
cc
 > 0) {

193 
¥es£d
 = (*
buf
 & 0x80Ë? 
RELEASED
: 
PRESSED
;

194 
sˇncode
 = *
buf
 & 0x7f;

195 
mwkey
 = 
keym≠
[
sˇncode
];

203 
mwkey
) {

204 
MWKEY_F1
:

205 
MWKEY_F2
:

206 
MWKEY_F3
:

207 
MWKEY_F4
:

208 
MWKEY_F5
:

209 
MWKEY_F6
:

210 
MWKEY_F7
:

211 
MWKEY_F8
:

212 
MWKEY_F9
:

213 
MWKEY_F10
:

214 
MWKEY_F11
:

215 
MWKEY_F12
:

216 i‡(
key_mod°©e
 & 
MWKMOD_ALT
) {

217 i‡(
	`swôch_vt
(
mwkey
-
MWKEY_F1
+1)) {

218 
mwkey
 = 
MWKEY_REDRAW
;

225 i‡(!
	`Upd©eKeySèã
(
¥es£d
, 
mwkey
))

229 if(
mwkey
 !
MWKEY_LCTRL
 &&

230 
mwkey
 !
MWKEY_RCTRL
 &&

231 
mwkey
 !
MWKEY_LALT
 &&

232 
mwkey
 !
MWKEY_RALT
 &&

233 
mwkey
 !
MWKEY_RSHIFT
 &&

234 
mwkey
 !
MWKEY_LSHIFT
) {

236 
mwkey
 = 
	`Tøn¶©eSˇncode
(
sˇncode
, 
key_mod°©e
);

245 
sˇncode
) {

276 
sˇncode
 += 8;

280 
sˇncode
 -= 0x4;

284 
sˇncode
 -= 0x5;

290 
sˇncode
 -= 0x4;

295 
sˇncode
 -= 0x5;

300 
sˇncode
 -= 0x4;

309 *
kbuf
 = 
mwkey
;

310 *
modifõrs
 = 
key_mod°©e
;

311 *
psˇncode
 = 
sˇncode
;

317  
¥es£d
 ? 1 : 2;

320 i‡((
cc
 < 0Ë&& (
î∫o
 !
EINTR
Ë&& (î∫ÿ!
EAGAIN
))

323 
	}
}

326 
MWBOOL


327 
	$Upd©eKeySèã
(
¥es£d
, 
MWKEY
 
mwkey
)

329 
MWKEYMOD
 
mod°©e
 = 
key_mod°©e
;

332 i‡(
¥es£d
 =
PRESSED
) {

333 
mwkey
) {

334 
MWKEY_NUMLOCK
:

335 
MWKEY_CAPSLOCK
:

337  
FALSE
;

338 
MWKEY_LCTRL
:

339 
mod°©e
 |
MWKMOD_LCTRL
;

341 
MWKEY_RCTRL
:

342 
mod°©e
 |
MWKMOD_RCTRL
;

344 
MWKEY_LSHIFT
:

345 
mod°©e
 |
MWKMOD_LSHIFT
;

347 
MWKEY_RSHIFT
:

348 
mod°©e
 |
MWKMOD_RSHIFT
;

350 
MWKEY_LALT
:

351 
mod°©e
 |
MWKMOD_LALT
;

353 
MWKEY_RALT
:

354 
mod°©e
 |
MWKMOD_RALT
;

356 
MWKEY_LMETA
:

357 
mod°©e
 |
MWKMOD_LMETA
;

359 
MWKEY_RMETA
:

360 
mod°©e
 |
MWKMOD_RMETA
;

362 
MWKEY_ALTGR
:

363 
mod°©e
 |
MWKMOD_ALTGR
;

369 
mwkey
) {

370 
MWKEY_NUMLOCK
:

371 
key_mod°©e
 ^
MWKMOD_NUM
;

372 
key_°©e
[
MWKEY_NUMLOCK
] ^
PRESSED
;

373 
	`Upd©eLEDSèã
(
key_mod°©e
);

374  
TRUE
;

375 
MWKEY_CAPSLOCK
:

376 
key_mod°©e
 ^
MWKMOD_CAPS
;

377 
key_°©e
[
MWKEY_CAPSLOCK
] ^
PRESSED
;

378 
	`Upd©eLEDSèã
(
key_mod°©e
);

379  
TRUE
;

380 
MWKEY_LCTRL
:

381 
mod°©e
 &~
MWKMOD_LCTRL
;

383 
MWKEY_RCTRL
:

384 
mod°©e
 &~
MWKMOD_RCTRL
;

386 
MWKEY_LSHIFT
:

387 
mod°©e
 &~
MWKMOD_LSHIFT
;

389 
MWKEY_RSHIFT
:

390 
mod°©e
 &~
MWKMOD_RSHIFT
;

392 
MWKEY_LALT
:

393 
mod°©e
 &~
MWKMOD_LALT
;

395 
MWKEY_RALT
:

396 
mod°©e
 &~
MWKMOD_RALT
;

398 
MWKEY_LMETA
:

399 
mod°©e
 &~
MWKMOD_LMETA
;

401 
MWKEY_RMETA
:

402 
mod°©e
 &~
MWKMOD_RMETA
;

404 
MWKEY_ALTGR
:

405 
mod°©e
 &~
MWKMOD_ALTGR
;

414 i‡(
key_°©e
[
mwkey
] =
¥es£d
)

415  
FALSE
;

418 
key_°©e
[
mwkey
] = ()
¥es£d
;

419 
key_mod°©e
 = 
mod°©e
;

420  
TRUE
;

421 
	}
}

424 
	$Upd©eLEDSèã
(
MWKEYMOD
 
mod°©e
)

426 
Àd°©e
 = 0;

428 i‡(
mod°©e
 & 
MWKMOD_CAPS
)

429 
Àd°©e
 |
LED_CAP
;

430 i‡(
mod°©e
 & 
MWKMOD_NUM
)

431 
Àd°©e
 |
LED_NUM
;

432 
	`io˘l
(
fd
, 
KDSETLED
, 
Àd°©e
);

433 
	}
}

436 
MWKEY


437 
	$Tøn¶©eSˇncode
(
sˇncode
, 
MWKEYMOD
 
mod°©e
)

439 
mwkey
 = 0;

440 
m≠
 = 0;

445 i‡(
mod°©e
 & 
MWKMOD_SHIFT
)

446 
m≠
 |(1<<
KG_SHIFT
);

447 i‡(
mod°©e
 & 
MWKMOD_CTRL
)

448 
m≠
 |(1<<
KG_CTRL
);

449 i‡(
mod°©e
 & 
MWKMOD_ALT
)

450 
m≠
 |(1<<
KG_ALT
);

451 i‡(
mod°©e
 & 
MWKMOD_ALTGR
)

452 
m≠
 |(1<<
KG_ALTGR
);

453 i‡(
	`KTYP
(
os_keym≠
[
m≠
][
sˇncode
]Ë=
KT_LETTER
) {

454 i‡(
mod°©e
 & 
MWKMOD_CAPS
)

455 
m≠
 |(1<<
KG_SHIFT
);

457 i‡(
	`KTYP
(
os_keym≠
[
m≠
][
sˇncode
]Ë=
KT_PAD
) {

458 i‡(
mod°©e
 & 
MWKMOD_NUM
) {

459 
keym≠
[
sˇncode
]) {

460 
MWKEY_KP0
:

461 
MWKEY_KP1
:

462 
MWKEY_KP2
:

463 
MWKEY_KP3
:

464 
MWKEY_KP4
:

465 
MWKEY_KP5
:

466 
MWKEY_KP6
:

467 
MWKEY_KP7
:

468 
MWKEY_KP8
:

469 
MWKEY_KP9
:

470 
mwkey
 = 
keym≠
[
sˇncode
] - 
MWKEY_KP0
 + '0';

472 
MWKEY_KP_PERIOD
:

473 
mwkey
 = '.';

475 
MWKEY_KP_DIVIDE
:

476 
mwkey
 = '/';

478 
MWKEY_KP_MULTIPLY
:

479 
mwkey
 = '*';

481 
MWKEY_KP_MINUS
:

482 
mwkey
 = '-';

484 
MWKEY_KP_PLUS
:

485 
mwkey
 = '+';

487 
MWKEY_KP_ENTER
:

488 
mwkey
 = 
MWKEY_ENTER
;

490 
MWKEY_KP_EQUALS
:

491 
mwkey
 = '-';

496 
mwkey
 = 
	`KVAL
(
os_keym≠
[
m≠
][
sˇncode
]);

498 i‡(!
mwkey
)

499 
mwkey
 = 
keym≠
[
sˇncode
];

502 
mwkey
) {

504 
mwkey
 = 
MWKEY_BACKSPACE
;

506 
MWKEY_BREAK
:

507 
MWKEY_PAUSE
:

508 
mwkey
 = 
MWKEY_QUIT
;

511 
MWKEY_SYSREQ
:

512 
mwkey
 = 
MWKEY_PRINT
;

517  
mwkey
;

518 
	}
}

522 
	$LﬂdKî√lKeym≠s
(
fd
)

524 
m≠
, 
i
;

525 
kbíåy
 
íåy
;

528 
m≠
=0; m≠<
NUM_VGAKEYMAPS
; ++map) {

529 
	`mem£t
(
os_keym≠
[
m≠
], 0, 
NR_KEYS
*());

530 
i
=0; i<
NR_KEYS
; ++i) {

531 
íåy
.
kb_èbÀ
 = 
m≠
;

532 
íåy
.
kb_ödex
 = 
i
;

533 i‡(
	`io˘l
(
fd
, 
KDGKBENT
, &
íåy
) == 0) {

535 i‡(
íåy
.
kb_vÆue
 =
K_ENTER
)

536 
íåy
.
kb_vÆue
 = 
	`K
(
KT_ASCII
,13);

538 i‡((
	`KTYP
(
íåy
.
kb_vÆue
Ë=
KT_LATIN
) ||

539 (
	`KTYP
(
íåy
.
kb_vÆue
Ë=
KT_ASCII
) ||

540 (
	`KTYP
(
íåy
.
kb_vÆue
Ë=
KT_PAD
) ||

541 (
	`KTYP
(
íåy
.
kb_vÆue
Ë=
KT_LETTER
)

543 
os_keym≠
[
m≠
][
i
] = 
íåy
.
kb_vÆue
;

548 
	}
}

550 
MWBOOL


551 
	$swôch_vt
(
which
)

553 
vt_°©
 
vt°©e
;

554 
cuºít
;

555 
r
[16], 
g
[16], 
b
[16];

558 i‡((
	`io˘l
(
fd
, 
VT_GETSTATE
, &
vt°©e
) < 0) ||

559 (
which
 =
vt°©e
.
v_a˘ive
)) {

560  
FALSE
;

562 
cuºít
 = 
vt°©e
.
v_a˘ive
;

565 
	`io˘l_gë∑Àâe
(0, 16, 
r
, 
g
, 
b
);

566 
	`io˘l
(
fd
, 
KDSETMODE
, 
KD_TEXT
);

569 i‡(
	`io˘l
(
fd
, 
VT_ACTIVATE
, 
which
) == 0) {

571 
	`io˘l
(
fd
, 
VT_WAITACTIVE
, 
which
);

572 
	`io˘l
(
fd
, 
VT_WAITACTIVE
, 
cuºít
) < 0) {

573 i‡((
î∫o
 !
EINTR
Ë&& (î∫ÿ!
EAGAIN
)) {

577 
	`u¶ìp
(100000);

582 
	`io˘l
(
fd
, 
KDSETMODE
, 
KD_GRAPHICS
);

583 
	`io˘l_£çÆëã
(0, 16, 
r
, 
g
, 
b
);

584  
TRUE
;

585 
	}
}

	@drivers/kbd_x11.c

10 
	~<°dio.h
>

11 
	~<uni°d.h
>

12 
	~<î∫o.h
>

13 
	~<X11/Xlib.h
>

14 
	~<X11/Xutû.h
>

15 
	~<X11/keysym.h
>

16 
	~<X11/XKBlib.h
>

17 
	~"devi˚.h
"

19 
X11_O≥n
(
KBDDEVICE
 *
pkd
);

20 
X11_Clo£
();

21 
X11_GëModifõrInfo
(
MWKEYMOD
 *
modifõrs
, MWKEYMOD *
curmodifõrs
);

22 
X11_Ród
(
MWKEY
 *
kbuf
, 
MWKEYMOD
 *
modifõrs
, 
MWSCANCODE
 *
sˇncode
);

24 
öô_mod°©e
();

26 
MWKEYMOD
 
	gkey_mod°©e
;

27 
esˇ≥_quôs
;

29 
Di•œy
* 
x11_dpy
;

30 
x11_s¸
;

31 
VisuÆ
* 
x11_vis
;

32 
Wödow
 
x11_wö
;

33 
GC
 
x11_gc
;

34 
x11_£tup_di•œy
();

36 
	#X_SCR_MASK
 0x80

	)

37 
	#X_CAP_MASK
 0x2

	)

38 
	#X_NUM_MASK
 0x10

	)

40 
KBDDEVICE
 
	gkbddev
 = {

41 
X11_O≥n
,

42 
X11_Clo£
,

43 
X11_GëModifõrInfo
,

44 
X11_Ród
,

45 
NULL


55 
	$X11_O≥n
(
KBDDEVICE
 *
pkd
)

57 i‡(
	`x11_£tup_di•œy
() < 0) {

58 
	`Ârötf
(
°dîr
, "nano-X: Can't connectÅo X11 server\n");

62 if(
	`öô_mod°©e
() < 0)

66  
	`C⁄√˘i⁄Numbî
(
x11_dpy
);

67 
	}
}

74 
	$X11_Clo£
()

77 
	}
}

83 
	$X11_GëModifõrInfo
(
MWKEYMOD
 *
modifõrs
, MWKEYMOD *
curmodifõrs
)

85 i‡(
modifõrs
)

86 *
modifõrs
 = 
MWKMOD_SHIFT
 | 
MWKMOD_CTRL
 | 
MWKMOD_ALT
;

87 i‡(
curmodifõrs
)

88 *
curmodifõrs
 = 
key_mod°©e
;

89 
	}
}

98 
	$X11_Ród
(
MWKEY
 *
kbuf
, 
MWKEYMOD
 *
modifõrs
, 
MWSCANCODE
 *
sˇncode
)

100 
XEvít
 
ev
;

101 
MWKEY
 
mwkey
;

102 
ign‹ed_ch¨
;

104 
gøbbed
 = 0;

105 
x11_ac˚l_num
;

106 
x11_ac˚l_dí
;

107 
x11_thªs
;

110 i‡(
	`XCheckMaskEvít
(
x11_dpy
, 
KeyPªssMask
|
KeyRñó£Mask
, &
ev
)) {

111 
KeySym
 
sym
 = 
	`XKeycodeToKeysym
(
x11_dpy
, 
ev
.
xkey
.
keycode
, 0);

113 i‡(
sym
 =
NoSymbﬁ
)

117 
key_mod°©e
 &(
MWKMOD_NUM
|
MWKMOD_CAPS
|
MWKMOD_SCR
);

118 i‡(
ev
.
xkey
.
°©e
 & 
C⁄åﬁMask
)

119 
key_mod°©e
 |
MWKMOD_CTRL
;

120 i‡(
ev
.
xkey
.
°©e
 & 
Shi·Mask
)

121 
key_mod°©e
 |
MWKMOD_SHIFT
;

122 i‡(
ev
.
xkey
.
°©e
 & 
Mod1Mask
)

123 
key_mod°©e
 |
MWKMOD_ALT
;

124 i‡(
ev
.
xkey
.
°©e
 & 
X_CAP_MASK
)

125 
key_mod°©e
 |
MWKMOD_CAPS
;

126 i‡(
ev
.
xkey
.
°©e
 & 
X_SCR_MASK
)

127 
key_mod°©e
 |
MWKMOD_SCR
;

128 i‡(
ev
.
xkey
.
°©e
 & 
X_NUM_MASK
)

129 
key_mod°©e
 |
MWKMOD_NUM
;

131 i‡(
sym
 =
XK_Esˇ≥
) {

132 
mwkey
 = 
MWKEY_ESCAPE
;

134 i‡(
ev
.
xkey
.
°©e
 & 
C⁄åﬁMask
) {

136 i‡(
gøbbed
) {

137 
	`XUngøbPoöãr
(
x11_dpy
, 
CuºítTime
);

138 
	`XUngøbKeybﬂrd
(
x11_dpy
, 
CuºítTime
);

139 
	`XCh™gePoöãrC⁄åﬁ
(
x11_dpy
, 
True
, 
FÆ£
, 
x11_ac˚l_num
,

140 
x11_ac˚l_dí
, 0);

141 
gøbbed
 = 0;

145 
	`XGëPoöãrC⁄åﬁ
(
x11_dpy
, &
x11_ac˚l_num
, &
x11_ac˚l_dí
,

146 &
x11_thªs
);

147 
	`XCh™gePoöãrC⁄åﬁ
(
x11_dpy
, 
True
, 
FÆ£
, 1, 1, 0);

148 
	`XGøbKeybﬂrd
(
x11_dpy
, 
x11_wö
,

149 
True
,

150 
GøbModeAsync
, GøbModeAsync, 
CuºítTime
);

151 
	`XGøbPoöãr
(
x11_dpy
, 
x11_wö
, 
FÆ£
,

152 
PoöãrMŸi⁄Mask
 | 
Buâ⁄PªssMask
,

153 
GøbModeAsync
, GøbModeAsync, 
N⁄e
, None,

154 
CuºítTime
);

155 
gøbbed
 = 1;

158 } i‡(
gøbbed
)

159 
	`XCh™gePoöãrC⁄åﬁ
(
x11_dpy
, 
True
, 
FÆ£
, 
x11_ac˚l_num
,

160 
x11_ac˚l_dí
, 0);

161 *
kbuf
 = 
mwkey
;

162 *
modifõrs
 = 
key_mod°©e
;

163 *
sˇncode
 = 
ev
.
xkey
.
keycode
;

164  (
ev
.
xkey
.
ty≥
 =
KeyPªss
)? 1: 2;

166 
sym
) {

167 
XK_Dñëe
:

168 
mwkey
 = 
MWKEY_DELETE
;

170 
XK_Home
:

171 
mwkey
 = 
MWKEY_HOME
;

173 
XK_Le·
:

174 
mwkey
 = 
MWKEY_LEFT
;

176 
XK_Up
:

177 
mwkey
 = 
MWKEY_UP
;

179 
XK_Right
:

180 
mwkey
 = 
MWKEY_RIGHT
;

182 
XK_Down
:

183 
mwkey
 = 
MWKEY_DOWN
;

185 
XK_Page_Up
:

186 
mwkey
 = 
MWKEY_PAGEUP
;

188 
XK_Page_Down
:

189 
mwkey
 = 
MWKEY_PAGEDOWN
;

191 
XK_End
:

192 
mwkey
 = 
MWKEY_END
;

194 
XK_In£π
:

195 
mwkey
 = 
MWKEY_INSERT
;

197 
XK_Pau£
:

198 
XK_Bªak
:

199 
mwkey
 = 
MWKEY_QUIT
;

201 
XK_Pröt
:

202 
XK_Sys_Req
:

203 
mwkey
 = 
MWKEY_PRINT
;

205 
XK_Míu
:

206 
mwkey
 = 
MWKEY_MENU
;

208 
XK_C™˚l
:

209 
mwkey
 = 
MWKEY_CANCEL
;

211 
XK_KP_E¡î
:

212 
mwkey
 = 
MWKEY_KP_ENTER
;

214 
XK_KP_Home
:

215 
mwkey
 = 
MWKEY_KP7
;

217 
XK_KP_Le·
:

218 
mwkey
 = 
MWKEY_KP4
;

220 
XK_KP_Up
:

221 
mwkey
 = 
MWKEY_KP8
;

223 
XK_KP_Right
:

224 
mwkey
 = 
MWKEY_KP6
;

226 
XK_KP_Down
:

227 
mwkey
 = 
MWKEY_KP2
;

229 
XK_KP_Page_Up
:

230 
mwkey
 = 
MWKEY_KP9
;

232 
XK_KP_Page_Down
:

233 
mwkey
 = 
MWKEY_KP3
;

235 
XK_KP_End
:

236 
mwkey
 = 
MWKEY_KP1
;

238 
XK_KP_In£π
:

239 
mwkey
 = 
MWKEY_KP0
;

241 
XK_KP_Dñëe
:

242 
mwkey
 = 
MWKEY_KP_PERIOD
;

244 
XK_KP_EquÆ
:

245 
mwkey
 = 
MWKEY_KP_EQUALS
;

247 
XK_KP_Mu…ùly
:

248 
mwkey
 = 
MWKEY_KP_MULTIPLY
;

250 
XK_KP_Add
:

251 
mwkey
 = 
MWKEY_KP_PLUS
;

253 
XK_KP_Subåa˘
:

254 
mwkey
 = 
MWKEY_KP_MINUS
;

256 
XK_KP_DecimÆ
:

257 
mwkey
 = 
MWKEY_KP_PERIOD
;

259 
XK_KP_Divide
:

260 
mwkey
 = 
MWKEY_KP_DIVIDE
;

262 
XK_KP_5
:

263 
XK_KP_Begö
:

264 
mwkey
 = 
MWKEY_KP5
;

266 
XK_F1
:

267 
mwkey
 = 
MWKEY_F1
;

269 
XK_F2
:

270 
mwkey
 = 
MWKEY_F2
;

272 
XK_F3
:

273 
mwkey
 = 
MWKEY_F3
;

275 
XK_F4
:

276 
mwkey
 = 
MWKEY_F4
;

278 
XK_F5
:

279 
mwkey
 = 
MWKEY_F5
;

281 
XK_F6
:

282 
mwkey
 = 
MWKEY_F6
;

284 
XK_F7
:

285 
mwkey
 = 
MWKEY_F7
;

287 
XK_F8
:

288 
mwkey
 = 
MWKEY_F8
;

290 
XK_F9
:

291 
mwkey
 = 
MWKEY_F9
;

293 
XK_F10
:

294 
mwkey
 = 
MWKEY_F10
;

296 
XK_F11
:

297 
mwkey
 = 
MWKEY_F11
;

299 
XK_F12
:

300 
mwkey
 = 
MWKEY_F12
;

304 
XK_Num_Lock
:

306 i‡(
ev
.
xkey
.
ty≥
 =
KeyRñó£
)

307 
key_mod°©e
 ^
MWKMOD_NUM
;

309 
XK_Shi·_Lock
:

310 
XK_C≠s_Lock
:

312 i‡(
ev
.
xkey
.
ty≥
 =
KeyRñó£
)

313 
key_mod°©e
 ^
MWKMOD_CAPS
;

315 
XK_S¸ﬁl_Lock
:

317 i‡(
ev
.
xkey
.
ty≥
 =
KeyRñó£
)

318 
key_mod°©e
 ^
MWKMOD_SCR
;

321 
XK_Shi·_L
:

322 
mwkey
 = 
MWKEY_LSHIFT
;

324 
XK_Shi·_R
:

325 
mwkey
 = 
MWKEY_RSHIFT
;

327 
XK_C⁄åﬁ_L
:

328 
mwkey
 = 
MWKEY_LCTRL
;

330 
XK_C⁄åﬁ_R
:

331 
mwkey
 = 
MWKEY_RCTRL
;

333 
XK_A…_L
:

334 
mwkey
 = 
MWKEY_LALT
;

336 
XK_A…_R
:

337 
mwkey
 = 
MWKEY_RALT
;

339 
XK_Mëa_L
:

340 
XK_Su≥r_L
:

341 
XK_Hy≥r_L
:

342 
mwkey
 = 
MWKEY_LMETA
;

344 
XK_Mëa_R
:

345 
XK_Su≥r_R
:

346 
XK_Hy≥r_R
:

347 
mwkey
 = 
MWKEY_RMETA
;

350 
sym
) {

351 
XK_BackS∑˚
:

352 
XK_Tab
:

353 
XK_Rëu∫
:

356 i‡(
sym
 & 0xFF00)

357 
	`Ârötf
(
°dîr
, "Unh™dÀd X11 keysym: %04x\n", ()
sym
);

360 
	`XLookupSåög
(&
ev
.
xkey
, &
ign‹ed_ch¨
, 1, &
sym
, 
NULL
 );

362 i‡(
key_mod°©e
 & 
MWKMOD_CTRL
)

363 
mwkey
 = 
sym
 & 0x1f;

365 
mwkey
 = 
sym
 & 0xff;

370 i‡(
key_mod°©e
 & 
MWKMOD_NUM
) {

371 
mwkey
) {

372 
MWKEY_KP0
:

373 
MWKEY_KP1
:

374 
MWKEY_KP2
:

375 
MWKEY_KP3
:

376 
MWKEY_KP4
:

377 
MWKEY_KP5
:

378 
MWKEY_KP6
:

379 
MWKEY_KP7
:

380 
MWKEY_KP8
:

381 
MWKEY_KP9
:

382 
mwkey
 = mwkey - 
MWKEY_KP0
 + '0';

384 
MWKEY_KP_PERIOD
:

385 
mwkey
 = '.';

387 
MWKEY_KP_DIVIDE
:

388 
mwkey
 = '/';

390 
MWKEY_KP_MULTIPLY
:

391 
mwkey
 = '*';

393 
MWKEY_KP_MINUS
:

394 
mwkey
 = '-';

396 
MWKEY_KP_PLUS
:

397 
mwkey
 = '+';

399 
MWKEY_KP_ENTER
:

400 
mwkey
 = 
MWKEY_ENTER
;

402 
MWKEY_KP_EQUALS
:

403 
mwkey
 = '-';

407 *
modifõrs
 = 
key_mod°©e
;

408 *
sˇncode
 = 
ev
.
xkey
.
keycode
;

409 *
kbuf
 = 
mwkey
;

412  (
ev
.
xkey
.
ty≥
 =
KeyPªss
)? 1 : 2;

416 
	}
}

418 
	#NUM_LOCK_MASK
 0x00000002

	)

419 
	#CAPS_LOCK_MASK
 0x00000001

	)

420 
	#SCROLL_LOCK_MASK
 0x00000004

	)

423 
	$öô_mod°©e
 ()

425 
°©e
;

426 
ˇp¶
, 
numl
, 
s¸ﬁŒ
;

428 if(
	`XkbGëIndiˇt‹Sèã
 (
x11_dpy
, 
XkbU£C‹eKbd
, &
°©e
Ë!
Suc˚ss
) {

429 
	`Ârötf
(
°dîr
, "nano-X: ErrorÑeading kbd indicator status\n");

432 
ˇp¶
 = 
°©e
 & 
CAPS_LOCK_MASK
;

433 
numl
 = 
°©e
 & 
NUM_LOCK_MASK
;

434 
s¸ﬁŒ
 = 
°©e
 & 
SCROLL_LOCK_MASK
;

436 if(
numl
 != 0)

437 
key_mod°©e
 |
MWKMOD_NUM
;

439 if(
ˇp¶
 != 0)

440 
key_mod°©e
 |
MWKMOD_CAPS
;

442 if(
s¸ﬁŒ
 != 0)

443 
key_mod°©e
 |
MWKMOD_SCR
;

446 
	}
}

	@drivers/keymap_standard.h

3 
MWKEY
 
	gkeym≠
[128] = {

4 
MWKEY_UNKNOWN
, 
MWKEY_ESCAPE
, '1', '2', '3',

6 '9', '0', '-', '=', 
MWKEY_BACKSPACE
,

7 
MWKEY_TAB
, 'q', 'w', 'e', 'r',

9 'o', '[', ']', 
MWKEY_ENTER
, 
MWKEY_LCTRL
,

12 '\'', '`', 
MWKEY_LSHIFT
, '\\', 'z',

14 'm', ',', '.', '/', 
MWKEY_RSHIFT
,

15 
MWKEY_KP_MULTIPLY
, 
MWKEY_LALT
, ' ', 
MWKEY_CAPSLOCK
, 
MWKEY_F1
,

16 
MWKEY_F2
, 
MWKEY_F3
, 
MWKEY_F4
, 
MWKEY_F5
, 
MWKEY_F6
,

17 
MWKEY_F7
, 
MWKEY_F8
, 
MWKEY_F9
, 
MWKEY_F10
, 
MWKEY_NUMLOCK
,

18 
MWKEY_SCROLLOCK
, 
MWKEY_KP7
, 
MWKEY_KP8
, 
MWKEY_KP9
, 
MWKEY_KP_MINUS
,

19 
MWKEY_KP4
, 
MWKEY_KP5
, 
MWKEY_KP6
, 
MWKEY_KP_PLUS
, 
MWKEY_KP1
,

20 
MWKEY_KP2
, 
MWKEY_KP3
, 
MWKEY_KP0
, 
MWKEY_KP_PERIOD
, 
MWKEY_UNKNOWN
,

21 
MWKEY_UNKNOWN
, MWKEY_UNKNOWN, 
MWKEY_F11
, 
MWKEY_F12
, MWKEY_UNKNOWN,

22 
MWKEY_UNKNOWN
,MWKEY_UNKNOWN,MWKEY_UNKNOWN,MWKEY_UNKNOWN,MWKEY_UNKNOWN,

23 
MWKEY_UNKNOWN
, 
MWKEY_KP_ENTER
, 
MWKEY_RCTRL
, 
MWKEY_KP_DIVIDE
,
MWKEY_PRINT
,

24 
MWKEY_RALT
, 
MWKEY_BREAK
, 
MWKEY_HOME
, 
MWKEY_UP
, 
MWKEY_PAGEUP
,

25 
MWKEY_LEFT
, 
MWKEY_RIGHT
, 
MWKEY_END
, 
MWKEY_DOWN
, 
MWKEY_PAGEDOWN
,

26 
MWKEY_INSERT
, 
MWKEY_DELETE
, 
MWKEY_UNKNOWN
,MWKEY_UNKNOWN,MWKEY_UNKNOWN,

27 
MWKEY_UNKNOWN
,MWKEY_UNKNOWN,MWKEY_UNKNOWN,MWKEY_UNKNOWN,
MWKEY_PAUSE
,

28 
MWKEY_UNKNOWN
,MWKEY_UNKNOWN,MWKEY_UNKNOWN,MWKEY_UNKNOWN,MWKEY_UNKNOWN,

29 
MWKEY_LMETA
, 
MWKEY_RMETA
, 
MWKEY_MENU


	@drivers/keymap_zaurus.h

22 
MWKEY
 
	gkeym≠
[128] = {

26 'x', 'y', 'z', 
MWKEY_LSHIFT
, 
MWKEY_ENTER
, 
MWKEY_MENU
, 0x0, 
MWKEY_BACKSPACE
,

27 0x0, 0x0, 
MWKEY_ESCAPE
, 
MWKEY_LEFT
, 
MWKEY_UP
, 
MWKEY_DOWN
, 
MWKEY_RIGHT
, 
MWKEY_ENTER
,

30 0x0, 0x0, '-', '+', 
MWKEY_CAPSLOCK
, '@', '?', ',',

31 '.', 
MWKEY_TAB
, 
MWKEY_F5
, 
MWKEY_F6
, 
MWKEY_F7
, '/', '\'', ';',

33 '(', 
MWKEY_BACKSPACE
, 
MWKEY_F10
, '=', ')', '~', '<', '>',

34 
MWKEY_APP1
, 
MWKEY_APP2
, 
MWKEY_APP4
, 
MWKEY_ACCEPT
, ' ', 0x0, '!', 0x0,

35 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 
MWKEY_RSHIFT
,

36 
MWKEY_LCTRL
, 
MWKEY_RCTRL
, 
MWKEY_LALT
, 
MWKEY_RALT
, 
MWKEY_ALTGR
, 0x0, 0x0, 0x0,

	@drivers/memplan4.c

13 
	~<as£π.h
>

14 
	~<°dio.h
>

15 
	~<°rög.h
>

16 
	~"devi˚.h
"

17 
	~"vg≠œn4.h
"

18 
	~"fb.h
"

20 #i‡
HAVEBLIT


22 #i‡
MSDOS
 | 
ELKS
 | 
__πems__


24 
	#SCREENBASE
(
psd
Ë
EGA_BASE


	)

25 
	#BYTESPERLINE
(
psd
Ë80

	)

28 
	#SCREENBASE
(
psd
Ë((*)(’sd)->
addr
))

	)

29 
	#BYTESPERLINE
(
psd
Ë(’sd)->
löñí
)

	)

33 
gr_mode
;

35 
	gnŸmask
[2] = { 0x0f, 0xf0};

36 
	gmask
[8] = {

42 
	$mem∂4_öô
(
PSD
 
psd
)

44 i‡(!
psd
->
size
)

45 
psd
->
size
 =Ösd->
yªs
 *Ösd->
löñí
;

48 
	}
}

52 
	$mem∂4_døwpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

54 
ADDR8
 
addr
 = 
psd
->addr;

56 
	`as£π
 (
addr
 != 0);

57 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

58 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

59 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

61 
addr
 +(
x
>>1Ë+ 
y
 * 
psd
->
löñí
;

62 if(
gr_mode
 =
MWMODE_XOR
)

63 *
addr
 ^
c
 << ((1-(
x
&1))<<2);

65 *
addr
 = (*add∏& 
nŸmask
[
x
&1]Ë| (
c
 << ((1-(x&1))<<2));

66 
	}
}

69 
MWPIXELVAL


70 
	$mem∂4_ªadpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

72 
ADDR8
 
addr
 = 
psd
->addr;

74 
	`as£π
 (
addr
 != 0);

75 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

76 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

78  (
addr
[(
x
>>1Ë+ 
y
 * 
psd
->
löñí
] >> ((1-(x&1))<<2) ) & 0x0f;

79 
	}
}

83 
	$mem∂4_døwh‹zlöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

85 
ADDR8
 
addr
 = 
psd
->addr;

87 
	`as£π
 (
addr
 != 0);

88 
	`as£π
 (
x1
 >0 && x1 < 
psd
->
xªs
);

89 
	`as£π
 (
x2
 >0 && x2 < 
psd
->
xªs
);

90 
	`as£π
 (
x2
 >
x1
);

91 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

92 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

94 
addr
 +(
x1
>>1Ë+ 
y
 * 
psd
->
löñí
;

95 if(
gr_mode
 =
MWMODE_XOR
) {

96 
x1
 <
x2
) {

97 *
addr
 ^
c
 << ((1-(
x1
&1))<<2);

98 if((++
x1
 & 1) == 0)

99 ++
addr
;

102 
x1
 <
x2
) {

103 *
addr
 = (*add∏& 
nŸmask
[
x1
&1]Ë| (
c
 << ((1-(x1&1))<<2));

104 if((++
x1
 & 1) == 0)

105 ++
addr
;

108 
	}
}

112 
	$mem∂4_døwvîéöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

114 
ADDR8
 
addr
 = 
psd
->addr;

115 
löñí
 = 
psd
->linelen;

117 
	`as£π
 (
addr
 != 0);

118 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

119 
	`as£π
 (
y1
 >0 && y1 < 
psd
->
yªs
);

120 
	`as£π
 (
y2
 >0 && y2 < 
psd
->
yªs
);

121 
	`as£π
 (
y2
 >
y1
);

122 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

124 
addr
 +(
x
>>1Ë+ 
y1
 * 
löñí
;

125 if(
gr_mode
 =
MWMODE_XOR
)

126 
y1
++ <
y2
) {

127 *
addr
 ^
c
 << ((1-(
x
&1))<<2);

128 
addr
 +
löñí
;

131 
y1
++ <
y2
) {

132 *
addr
 = (*add∏& 
nŸmask
[
x
&1]Ë| (
c
 << ((1-(x&1))<<2));

133 
addr
 +
löñí
;

135 
	}
}

140 
	$mem∂4_to_mem∂4_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

141 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

143 
ADDR8
 
d°
;

144 
ADDR8
 
§c
;

145 
i
;

146 
dlöñí
 = 
d°psd
->
löñí
;

147 
¶öñí
 = 
§˝sd
->
löñí
;

149 
	`as£π
 (
d°psd
->
addr
 != 0);

150 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

151 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

152 
	`as£π
 (
w
 > 0);

153 
	`as£π
 (
h
 > 0);

154 
	`as£π
 (
§˝sd
->
addr
 != 0);

155 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

156 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

157 
	`as£π
 (
d°x
+
w
 <
d°psd
->
xªs
);

158 
	`as£π
 (
d°y
+
h
 <
d°psd
->
yªs
);

159 
	`as£π
 (
§cx
+
w
 <
§˝sd
->
xªs
);

160 
	`as£π
 (
§cy
+
h
 <
§˝sd
->
yªs
);

162 
d°
 = (*)
d°psd
->
addr
 + (
d°x
>>1Ë+ 
d°y
 * 
dlöñí
;

163 
§c
 = (*)
§˝sd
->
addr
 + (
§cx
>>1Ë+ 
§cy
 * 
¶öñí
;

164 --
h
 >= 0) {

165 
ADDR8
 
d
 = 
d°
;

166 
ADDR8
 
s
 = 
§c
;

167 
MWCOORD
 
dx
 = 
d°x
;

168 
MWCOORD
 
sx
 = 
§cx
;

169 
i
=0; i<
w
; ++i) {

170 *
d
 = (*d & 
nŸmask
[
dx
&1]) |

171 ((*
s
 >> ((1-(
sx
&1))<<2Ë& 0x0fË<< ((1-(
dx
&1))<<2));

172 if((++
dx
 & 1) == 0)

173 ++
d
;

174 if((++
sx
 & 1) == 0)

175 ++
s
;

177 
d°
 +
dlöñí
;

178 
§c
 +
¶öñí
;

180 
	}
}

185 
	$vga_to_vga_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

186 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

188 
FARADDR
 
d°
;

189 
FARADDR
 
§c
;

190 
i
, 
∂™e
;

191 
x1
, 
x2
;

193 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

194 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

195 
	`as£π
 (
w
 > 0);

196 
	`as£π
 (
h
 > 0);

197 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

198 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

199 
	`as£π
 (
d°x
+
w
 <
d°psd
->
xªs
);

200 
	`as£π
 (
d°y
+
h
 <
d°psd
->
yªs
);

201 
	`as£π
 (
§cx
+
w
 <
§˝sd
->
xªs
);

202 
	`as£π
 (
§cy
+
h
 <
§˝sd
->
yªs
);

204 
DRAWON
;

205 
	`£t_íabÀ_§
(0);

206 
d°
 = 
	`SCREENBASE
(
d°psd
Ë+ (
d°x
>>3Ë+ 
d°y
 * 
	`BYTESPERLINE
(dstpsd);

207 
§c
 = 
	`SCREENBASE
(
§˝sd
Ë+ (
§cx
>>3Ë+ 
§cy
 * 
	`BYTESPERLINE
(srcpsd);

208 
x1
 = 
d°x
>>3;

209 
x2
 = (
d°x
 + 
w
 - 1) >> 3;

210 --
h
 >= 0) {

211 
∂™e
=0;Ölane<4; ++plane) {

212 
FARADDR
 
d
 = 
d°
;

213 
FARADDR
 
s
 = 
§c
;

215 
	`£t_ªad_∂™e
(
∂™e
);

216 
	`£t_wrôe_∂™es
(1 << 
∂™e
);

219 if(
x1
 =
x2
) {

220 
	`£À˘_™d_£t_mask
((0xf‡>> (
x1
 & 7)Ë& (0xf‡<< (7 - (
x2
 & 7))));

221 
	`PUTBYTE_FP
(
d
, 
	`GETBYTE_FP
(
s
));

223 
	`£À˘_™d_£t_mask
(0xf‡>> (
x1
 & 7));

224 
	`PUTBYTE_FP
(
d
++, 
	`GETBYTE_FP
(
s
++));

226 
	`£t_mask
(0xff);

227 
i
=
x1
+1; i<
x2
; ++i)

228 
	`PUTBYTE_FP
(
d
++, 
	`GETBYTE_FP
(
s
++));

230 
	`£t_mask
(0xf‡<< (7 - (
x2
 & 7)));

231 
	`PUTBYTE_FP
(
d
, 
	`GETBYTE_FP
(
s
));

234 
d°
 +
	`BYTESPERLINE
(
d°psd
);

235 
§c
 +
	`BYTESPERLINE
(
§˝sd
);

237 
	`£t_wrôe_∂™es
(0x0f);

238 
	`£t_íabÀ_§
(0x0f);

239 
DRAWOFF
;

240 
	}
}

245 
	$mem∂4_to_vga_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

246 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

248 
FARADDR
 
d°
;

249 
ADDR8
 
§c
;

250 
i
;

251 
¶öñí
 = 
§˝sd
->
löñí
;

252 
cﬁ‹
, 
œ°cﬁ‹
 = -1;

254 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

255 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

256 
	`as£π
 (
w
 > 0);

257 
	`as£π
 (
h
 > 0);

258 
	`as£π
 (
§˝sd
->
addr
 != 0);

259 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

260 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

261 
	`as£π
 (
d°x
+
w
 <
d°psd
->
xªs
);

262 
	`as£π
 (
d°y
+
h
 <
d°psd
->
yªs
);

263 
	`as£π
 (
§cx
+
w
 <
§˝sd
->
xªs
);

264 
	`as£π
 (
§cy
+
h
 <
§˝sd
->
yªs
);

266 
DRAWON
;

267 
	`£t_›
(0);

268 
d°
 = 
	`SCREENBASE
(
d°psd
Ë+ (
d°x
>>3Ë+ 
d°y
 * 
	`BYTESPERLINE
(dstpsd);

269 
§c
 = (*)
§˝sd
->
addr
 + (
§cx
>>1Ë+ 
§cy
 * 
¶öñí
;

270 --
h
 >= 0) {

271 
FARADDR
 
d
 = 
d°
;

272 
ADDR8
 
s
 = 
§c
;

273 
MWCOORD
 
dx
 = 
d°x
;

274 
MWCOORD
 
sx
 = 
§cx
;

275 
i
=0; i<
w
; ++i) {

276 
cﬁ‹
 = *
s
 >> ((1-(
sx
&1))<<2) & 0x0f;

277 if(
cﬁ‹
 !
œ°cﬁ‹
)

278 
	`£t_cﬁ‹
(
œ°cﬁ‹
 = 
cﬁ‹
);

279 
	`£À˘_™d_£t_mask
 (
mask
[
dx
&7]);

280 
	`RMW_FP
(
d
);

282 if((++
dx
 & 7) == 0)

283 ++
d
;

284 if((++
sx
 & 1) == 0)

285 ++
s
;

287 
d°
 +
	`BYTESPERLINE
(
d°psd
);

288 
§c
 +
¶öñí
;

290 
DRAWOFF
;

291 
	}
}

296 
	$vga_to_mem∂4_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

297 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

299 
x
, 
y
;

300 
∂™e
;

301 
ADDR8
 
d
, 
d°
;

302 
FARADDR
 
s
, 
§c
;

303 
MWCOORD
 
sx
, 
dx
;

304 
cﬁ‹
;

305 
dlöñí
 = 
d°psd
->
löñí
;

307 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

308 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

309 
	`as£π
 (
d°psd
->
addr
 != 0);

310 
	`as£π
 (
w
 > 0);

311 
	`as£π
 (
h
 > 0);

312 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

313 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

314 
	`as£π
 (
d°x
+
w
 <
d°psd
->
xªs
);

315 
	`as£π
 (
d°y
+
h
 <
d°psd
->
yªs
);

316 
	`as£π
 (
§cx
+
w
 <
§˝sd
->
xªs
);

317 
	`as£π
 (
§cy
+
h
 <
§˝sd
->
yªs
);

319 
DRAWON
;

320 
§c
 = 
	`SCREENBASE
(
§˝sd
Ë+ (
§cx
 >> 3Ë+ 
§cy
 * 
	`BYTESPERLINE
(srcpsd);

321 
d°
 = (*)
d°psd
->
addr
 + (
d°x
 >> 1Ë+ 
d°y
 * 
dlöñí
;

323 
y
 = 0; y < 
h
; y++) {

324 
s
 = 
§c
;

325 
d
 = 
d°
;

326 
dx
 = 
d°x
;

327 
sx
 = 
§cx
;

328 
cﬁ‹
 = 0;

329 
x
 = 0; x < 
w
; x++) {

330 
∂™e
 = 0;Ölane < 4; ++plane) {

331 
	`£t_ªad_∂™e
(
∂™e
);

332 if(
	`GETBYTE_FP
(
s
Ë& 
mask
[
sx
 & 7])

333 
cﬁ‹
 |= 1 <<

334 (
∂™e
 + ((
dx
 & 1) ? 0 : 4));

336 if((++
sx
 & 7Ë=0Ë++
s
;

337 if((++
dx
 & 1) == 0) {

338 *
d
++ = 
cﬁ‹
;

339 
cﬁ‹
 = 0;

342 
d°
 +
dlöñí
;

343 
§c
 +
	`BYTESPERLINE
(
§˝sd
);

345 
DRAWOFF
;

346 
	}
}

349 
	$ega_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

350 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

352 
MWBOOL
 
§cvga
, 
d°vga
;

355 
§cvga
 = 
§˝sd
->
Êags
 & 
PSF_SCREEN
;

356 
d°vga
 = 
d°psd
->
Êags
 & 
PSF_SCREEN
;

358 if(
§cvga
) {

359 if(
d°vga
)

360 
	`vga_to_vga_blô
(
d°psd
, 
d°x
, 
d°y
, 
w
, 
h
,

361 
§˝sd
, 
§cx
, 
§cy
, 
›
);

363 
	`vga_to_mem∂4_blô
(
d°psd
, 
d°x
, 
d°y
, 
w
, 
h
,

364 
§˝sd
, 
§cx
, 
§cy
, 
›
);

366 if(
d°vga
)

367 
	`mem∂4_to_vga_blô
(
d°psd
, 
d°x
, 
d°y
, 
w
, 
h
,

368 
§˝sd
, 
§cx
, 
§cy
, 
›
);

370 
	`mem∂4_to_mem∂4_blô
(
d°psd
, 
d°x
, 
d°y
, 
w
, 
h
,

371 
§˝sd
, 
§cx
, 
§cy
, 
›
);

373 
	}
}

375 
SUBDRIVER
 
	gmem∂™4
 = {

376 
mem∂4_öô
,

377 
mem∂4_døwpixñ
,

378 
mem∂4_ªadpixñ
,

379 
mem∂4_døwh‹zlöe
,

380 
mem∂4_døwvîéöe
,

381 
gí_fûÃe˘
,

382 
ega_blô


	@drivers/mou_dos.c

7 
	~<dos.h
>

9 #i‚de‡
__PACIFIC__


10 
	~<bios.h
>

13 
	~"devi˚.h
"

15 
	#SCALE
 1

	)

16 
	#THRESH
 10

	)

18 
MOU_O≥n
(
MOUSEDEVICE
 *
pmd
);

19 
MOU_Clo£
();

20 
MOU_GëBuâ⁄Info
();

21 
MOU_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
);

22 
MOU_Ród
(
MWCOORD
 *
dx
, MWCOORD *
dy
, MWCOORD *
dz
,*
bp
);

23 
MOU_Pﬁl
();

25 
MOUSEDEVICE
 
	gmou£dev
 = {

26 
MOU_O≥n
,

27 
MOU_Clo£
,

28 
MOU_GëBuâ⁄Info
,

29 
MOU_GëDeÁu…Ac˚l
,

30 
MOU_Ród
,

31 
MOU_Pﬁl


34 
	gmou£_fd
;

40 
	$MOU_O≥n
(
MOUSEDEVICE
 *
pmd
)

42 
REGS
 
ªg£t
;

45 
ªg£t
.
x
.
ax
 = 0;

46 
	`öt86
(0x33, &
ªg£t
, &regset);

49 
ªg£t
.
x
.
ax
 = 0x0f;

50 
ªg£t
.
x
.
cx
 = 16;

51 
ªg£t
.
x
.
dx
 = 32;

52 
	`öt86
(0x33, &
ªg£t
, &regset);

55 
ªg£t
.
x
.
ax
 = 0x0b;

56 
	`öt86
(0x33, &
ªg£t
, &regset);

59 
	}
}

65 
	$MOU_Clo£
()

67 
	}
}

73 
	$MOU_GëBuâ⁄Info
()

75  
MWBUTTON_L
 | 
MWBUTTON_M
 | 
MWBUTTON_R
;

76 
	}
}

82 
	$MOU_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
)

84 *
psˇÀ
 = 
SCALE
;

85 *
±hªsh
 = 
THRESH
;

86 
	}
}

96 
	$MOU_Ród
(
MWCOORD
 *
dx
, MWCOORD *
dy
, MWCOORD *
dz
, *
bp
)

98 
REGS
 
ªg£t
;

99 
buâ⁄s
;

102 
ªg£t
.
x
.
ax
 = 0x0b;

103 
	`öt86
(0x33, &
ªg£t
, &regset);

105 *
dx
 = ()
ªg£t
.
x
.
cx
;

106 *
dy
 = ()
ªg£t
.
x
.
dx
;

107 *
dz
 = 0;

110 
ªg£t
.
x
.
ax
 = 3;

111 
	`öt86
(0x33, &
ªg£t
, &regset);

113 
buâ⁄s
 = 0;

114 if(
ªg£t
.
x
.
bx
 & 01)

115 
buâ⁄s
 |
MWBUTTON_L
;

116 if(
ªg£t
.
x
.
bx
 & 02)

117 
buâ⁄s
 |
MWBUTTON_R
;

118 if(
ªg£t
.
x
.
bx
 & 04)

119 
buâ⁄s
 |
MWBUTTON_M
;

120 *
bp
 = 
buâ⁄s
;

123 
	}
}

126 
	$MOU_Pﬁl
()

129 
	}
}

	@drivers/mou_dynapro.c

11 
	~<°dio.h
>

12 
	~<°dlib.h
>

13 
	~<uni°d.h
>

14 
	~<î∫o.h
>

15 
	~<f˙é.h
>

16 
	~<m©h.h
>

17 
	~<sys/io˘l.h
>

18 
	~<sys/ãrmios.h
>

19 
	~"devi˚.h
"

22 
ãrmios
 
	gios_ßved
, 
	gios_cuºít
;

25 
	gmouFd
 = 0;

31 
	gˇlD©a
[4] = { 73, 956, 883, 167 };

36 
	gövX
 = 0, 
	gövY
 = 0;

38 
SCREENDEVICE
 
s¸dev
;

40 
	$öôSîül
(*
dev
) {

43 
fd
 = 
	`›í
(
dev
, 
O_NONBLOCK
);

45 i‡(
fd
 <= 0) {

46 
	`EPRINTF
("Eº‹ o≥nög %s\n", 
dev
);

52 
	`tcgë©å
(
fd
, &
ios_ßved
);

53 
ios_cuºít
 = 
ios_ßved
;

55 
	`cfmakîaw
(&
ios_cuºít
);

59 
	`cf£ti•ìd
(&
ios_cuºít
, 
B2400
);

60 
	`cf£to•ìd
(&
ios_cuºít
, 
B2400
);

64 
ios_cuºít
.
c_cÊag
 &~(
CSIZE
 | 
PARENB
);

65 
ios_cuºít
.
c_cÊag
 |
CS8
;

67 
ios_cuºít
.
c_cc
[
VMIN
] = 3;

68 
ios_cuºít
.
c_cc
[
VTIME
] = 1;

70 
	`tc£èâr
(
fd
, 
TCSANOW
, &
ios_cuºít
);

71 
	`tcÊush
(
fd
, 
TCIOFLUSH
);

73 (
fd
);

74 
	}
}

76 
	$˛o£Sîül
(
fd
) {

80 
	`tc£èâr
(
fd
, 
TCSANOW
, &
ios_ßved
);

81 
	`tcÊush
(
fd
, 
TCIOFLUSH
);

83 
	`˛o£
(
fd
);

84 
	}
}

88 
	$ªadSîül
(
fd
) {

90 
f
;

91 
vÆ
 = 
	`ªad
(
fd
, &
f
, (f));

93 i‡(
vÆ
 <= 0) (val);

95 ((Ë
f
);

96 
	}
}

100 
	$gëI≈ut
(
fd
, *
d©a
) {

102 
cou¡
 = 0;

103 
°©e
 = 0;

108 
c
;

110 
c
 = 
	`ªadSîül
(
fd
);

112 i‡(
c
 < 0) {

113 i‡(
î∫o
 =
EAGAIN
 ||Éºnÿ=
EINTR
) (0);

117 i‡(
cou¡
++ > 150) (0);

120 
°©e
) {

123 i‡(
c
 & 0x80) {

124 
d©a
[0] = (Ë
c
;

125 
°©e
 = 1;

130 #ifde‡
NOTUSED


132 
	`Ârötf
(
°dîr
, "N⁄ sèπ byãÑecõved (%2.2x)\n", 
c
);

138 i‡(!(
c
 & 0x80)) {

139 
d©a
[1] = (Ë
c
;

140 
°©e
 = 2;

143 #ifde‡
NOTUSED


144 
	`Ârötf
(
°dîr
, "Gotá start byte inÅhe middle ofÅheÖacket\n");

147 
d©a
[0] = (Ë
c
;

149 
°©e
 = 0;

156 i‡(!(
c
 & 0x80)) {

157 
d©a
[2] = (Ë
c
;

161 #ifde‡
NOTUSED


162 
	`Ârötf
(
°dîr
, "Gotá start byte inÅhe middle ofÅheÖacket\n");

164 
d©a
[0] = (Ë
c
;

166 
°©e
 = 0;

174 
	}
}

178 
	$ªadCÆibøti⁄
(*
fûíame
) {

180 
buf„r
[128];

182 
ˇlfd
 = 
	`›í
(
fûíame
, 
O_RDONLY
);

185 i‡(
ˇlfd
 < 0) (0);

191 i‡(
	`ªad
(
ˇlfd
, 
buf„r
, (buffer)) <= 0) {

192 
	`˛o£
(
ˇlfd
);

196 
	`ssˇnf
(
buf„r
, "%d %d %d %d\n", &
ˇlD©a
[0], &calData[1], &calData[2], &calData[3]);

198 
	`˛o£
(
ˇlfd
);

202 i‡(
ˇlD©a
[1] < calData[0]) {

203 
tmp
 = 
ˇlD©a
[1];

205 
ˇlD©a
[1] = calData[0];

206 
ˇlD©a
[0] = 
tmp
;

208 
övX
 = 1;

211 i‡(
ˇlD©a
[3] < calData[2]) {

212 
tmp
 = 
ˇlD©a
[3];

213 
ˇlD©a
[3] = calData[2];

214 
ˇlD©a
[2] = 
tmp
;

216 
övY
 = 1;

220 
	}
}

222 
	$doSˇÀ
(
x
, 
y
, *
dx
, *
dy
) {

226 *
dx
 = ((
x
 - 
ˇlD©a
[0]Ë* 
s¸dev
.
xªs
) / (calData[1] - calData[0]);

227 *
dy
 = ((
y
 - 
ˇlD©a
[2]Ë* 
s¸dev
.
yªs
) / (calData[3] - calData[2]);

228 
	}
}

230 
	$MOU_O≥n
(
MOUSEDEVICE
 *
pmd
) {

232 
ˇlfd
;

234 
mouFd
 = 
	`öôSîül
("/dev/ttyS1");

236 i‡(
mouFd
 == -1) {

237 
	`EPRINTF
("UnableÅo open /dev/ttyS1 forÑeading\n");

241 i‡(
	`ªadCÆibøti⁄
("/etc/caldata") == -1) {

242 
	`˛o£Sîül
(
mouFd
);

243 
	`EPRINTF
("UnableÅo getÅhe calibration data\n");

249 
	`GdHideCurs‹
(&
s¸dev
);

250 (
mouFd
);

251 
	}
}

253 
	$MOU_GëBuâ⁄Info
() {

254 (
MWBUTTON_L
);

255 
	}
}

257 
	$MOU_GëDeÁu…Ac˚l
(*
psˇÀ
, *
±hªsh
) {

258 *
psˇÀ
 = 3;

259 *
±hªsh
 = 5;

260 
	}
}

262 
	$MOU_Clo£
() {

264 i‡(
mouFd
 >= 0)

265 
	`˛o£Sîül
(
mouFd
);

267 
mouFd
 = -1;

268 
	}
}

270 
	$MOU_Ród
(
MWCOORD
 *
px
, MWCOORD *
py
, MWCOORD *
pz
, *
pb
) {

272 
i
;

274 
tŸÆx
 = 0, 
tŸÆy
 = 0;

275 
d©a
[4];

280 
i
 = 0; i < 1; i++) {

281 
x
, 
y
, 
sx
, 
sy
;

282 
vÆ
;

284 
vÆ
 = 
	`gëI≈ut
(
mouFd
, 
d©a
);

286 i‡(
vÆ
 == -1) (0);

287 i‡(
vÆ
 == 0) ;

289 
x
 = 
d©a
[1] | ((data[0] & 0x38) << 4);

290 
y
 = 
d©a
[2] | ((data[0] & 0x07) << 7);

293 
	`doSˇÀ
(
x
, 
y
, &
sx
, &
sy
);

297 i‡(
övX
)

298 
sx
 = 
s¸dev
.
xªs
 - sx;

299 i‡(
övY
)

300 
sy
 = 
s¸dev
.
yªs
 - sy;

302 
tŸÆx
 +
sx
;

303 
tŸÆy
 +
sy
;

306 i‡(
i
 == 0) (0);

308 *
px
 = 
tŸÆx
 / (
i
);

309 *
py
 = 
tŸÆy
 / (
i
);

313 *
pb
 = ( (
d©a
[0] & 0x40Ë? 
MWBUTTON_L
 : 0 );

314 *
pz
 = 0;

316 i‡(!*
pb
) (3); (2);

317 
	}
}

319 
MOUSEDEVICE
 
	gmou£dev
 = {

320 
MOU_O≥n
,

321 
MOU_Clo£
,

322 
MOU_GëBuâ⁄Info
,

323 
MOU_GëDeÁu…Ac˚l
,

324 
MOU_Ród
,

325 
NULL


	@drivers/mou_fbsd.c

2 
	~<sys/ty≥s.h
>

3 
	~<sys/uio.h
>

4 
	~<uni°d.h
>

5 
	~<f˙é.h
>

6 
	~<î∫o.h
>

8 
	~<machöe/mou£.h
>

9 
	~<machöe/c⁄sﬁe.h
>

13 
	~"devi˚.h
"

15 
	#SCALE
 3

	)

16 
	#THRESH
 5

	)

19 
FBSD_O≥n
(
MOUSEDEVICE
 *
pmd
);

20 
FBSD_Clo£
();

21 
FBSD_GëBuâ⁄Info
();

22 
FBSD_GëDeÁu…Ac˚l
(*
psˇÀ
, *
±hªsh
);

23 
FBSD_Ród
(
MWCOORD
 *
dx
, MWCOORD *
dy
, MWCOORD *
dz
,*
bp
);

24 
MOUSEDEVICE
 
	gmou£dev
 = {

25 
FBSD_O≥n
,

26 
FBSD_Clo£
,

27 
FBSD_GëBuâ⁄Info
,

28 
FBSD_GëDeÁu…Ac˚l
,

29 
FBSD_Ród
,

30 
NULL


33 
	gmou£_fd
=0;

35 
	$FBSD_O≥n
(
MOUSEDEVICE
 *
pmd
)

38 
mou£mode_t
 
theMou£Mode
;

40 
mou£_fd
=
	`›í
("/dev/sysmou£",
O_RDONLY
);

41 if(
mou£_fd
 < 0)

45 
	`io˘l
(
mou£_fd
, 
MOUSE_GETMODE
, &
theMou£Mode
);

46 
theMou£Mode
.
Àvñ
=1;

47 
	`io˘l
(
mou£_fd
, 
MOUSE_SETMODE
, &
theMou£Mode
);

48  
mou£_fd
;

50 
	}
}

52 
	$FBSD_Clo£
()

54 i‡(
mou£_fd
 > 0)

56 
	`˛o£
(
mou£_fd
);

58 
mou£_fd
=0;

60 
	}
}

62 
	$FBSD_GëBuâ⁄Info
()

64  
MWBUTTON_L
 | 
MWBUTTON_M
 | 
MWBUTTON_R
;

65 
	}
}

67 
	$FBSD_GëDeÁu…Ac˚l
(*
psˇÀ
, *
±hªsh
)

69 *
psˇÀ
 = 
SCALE
;

70 *
±hªsh
 = 
THRESH
;

71 
	}
}

73 
FBSD_h™dÀ_evít
();

75 
	$FBSD_Ród
(
MWCOORD
 *
dx
, MWCOORD *
dy
, MWCOORD *
dz
,

76 *
bp
)

79 
mou£°©us_t
 
theSètus
;

80 
butSèt
=0;

81 
ªtVÆ
=0;

83 
	`FBSD_h™dÀ_evít
();

85 
	`io˘l
(
mou£_fd
,
MOUSE_GETSTATUS
, &
theSètus
);

87 if(
theSètus
.
Êags
 | 
MOUSE_POSCHANGED
)

89 *
dx
=
theSètus
.dx;

90 *
dy
=
theSètus
.dy;

91 *
dz
=
theSètus
.dz;

92 
ªtVÆ
|=1;

95 if(
theSètus
.
buâ⁄
 & 0x1)

97 
butSèt
|=
MWBUTTON_L
;

98 
ªtVÆ
|=1;

100 if(
theSètus
.
buâ⁄
 & 0x2)

102 
butSèt
|=
MWBUTTON_M
;

103 
ªtVÆ
|=1;

105 if(
theSètus
.
buâ⁄
 & 0x4)

107 
butSèt
|=
MWBUTTON_R
;

108 
ªtVÆ
|=1;

111 *
bp
=
butSèt
;

112  
ªtVÆ
;

113 
	}
}

	@drivers/mou_gpm.c

15 
	~<°dio.h
>

16 
	~<î∫o.h
>

17 
	~<uni°d.h
>

18 
	~<f˙é.h
>

19 
	~"devi˚.h
"

21 
	#SCALE
 2

	)

22 
	#THRESH
 5

	)

24 
	#GPM_DEV_FILE
 "/dev/gpmd©a"

	)

26 
GPM_O≥n
(
MOUSEDEVICE
 *
pmd
);

27 
GPM_Clo£
();

28 
GPM_GëBuâ⁄Info
();

29 
MOU_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
);

30 
GPM_Ród
(
MWCOORD
 *
dx
, MWCOORD *
dy
, MWCOORD *
dz
, *
bp
);

32 
MOUSEDEVICE
 
	gmou£dev
 = {

33 
GPM_O≥n
,

34 
GPM_Clo£
,

35 
GPM_GëBuâ⁄Info
,

36 
MOU_GëDeÁu…Ac˚l
,

37 
GPM_Ród
,

38 
NULL
,

39 
MOUSE_NORMAL


42 
	gmou£_fd
;

49 
	$GPM_O≥n
(
MOUSEDEVICE
 *
pmd
)

51 
mou£_fd
 = 
	`›í
(
GPM_DEV_FILE
, 
O_NONBLOCK
);

52 i‡(
mou£_fd
 < 0)

54  
mou£_fd
;

55 
	}
}

61 
	$GPM_Clo£
()

63 i‡(
mou£_fd
 > 0)

64 
	`˛o£
(
mou£_fd
);

65 
mou£_fd
 = -1;

66 
	}
}

72 
	$GPM_GëBuâ⁄Info
()

74  
MWBUTTON_L
 | 
MWBUTTON_M
 | 
MWBUTTON_R
;

75 
	}
}

81 
	$MOU_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
)

83 *
psˇÀ
 = 
SCALE
;

84 *
±hªsh
 = 
THRESH
;

85 
	}
}

95 
	$GPM_Ród
(
MWCOORD
 *
dx
, MWCOORD *
dy
, MWCOORD *
dz
, *
bp
)

97 
buf
[5];

98 
nbyãs
;

99 
n
;

101 (
n
 = 
	`ªad
(
mou£_fd
, &
buf
[
nbyãs
], 5 -Çbytes))) {

102 if(
n
 < 0) {

103 i‡((
î∫o
 =
EINTR
Ë|| (î∫ÿ=
EAGAIN
))

108 
nbyãs
 +
n
;

110 if(
nbyãs
 == 5) {

112 *
bp
 = (~
buf
[0]) & 0x07;

113 *
dx
 = (sig√d )(
buf
[1]) + (signed )(buf[3]);

114 *
dy
 = -((sig√d )(
buf
[2]) + (signed )(buf[4]));

115 *
dz
 = 0;

116 
nbyãs
 = 0;

121 
	}
}

	@drivers/mou_harrier.c

8 
	~<°dio.h
>

9 
	~<°dlib.h
>

10 
	~<uni°d.h
>

11 
	~<î∫o.h
>

12 
	~<f˙é.h
>

13 
	~<m©h.h
>

14 
	~<sys/io˘l.h
>

15 
	~<löux/ç™ñ.h
>

16 
	~"devi˚.h
"

17 
	~"mou_ç.h
"

27 
	#TP_STATUS_HARDDATALOST
 0x1000

	)

28 
	#TP_STATUS_SOFTDATALOST
 0x2000

	)

29 
	#TP_STATUS_PENCONTACT
 0x4000

	)

30 
	#TP_STATUS_DATAVALID
 0x8000

	)

34 
	#TP_MIN_X_SIZE
 291

	)

35 
	#TP_MIN_Y_SIZE
 355

	)

37 
	#TP_MAX_X_SIZE
 3839

	)

38 
	#TP_MAX_Y_SIZE
 3711

	)

40 
	#DATA_STATUS
 0

	)

41 
	#DATA_YPLUS
 1

	)

42 
	#DATA_YMINUS
 2

	)

43 
	#DATA_XPLUS
 3

	)

44 
	#DATA_XMINUS
 4

	)

45 
	#DATA_Z
 5

	)

48 #ifde‡
USE_FILTER


49 
	#MOU_SAMPLE_RATE
 1

	)

51 
	#MOU_SAMPLE_RATE
 10

	)

54 
	#MOU_READ_INTERVAL
 5000

	)

64 
	gpd_fd
 = -1;

65 
	gíabÀ_poötög_co‹dö©e_å™sf‹m
 = 1;

67 
TRANSFORMATION_COEFFICIENTS
 
	gtc
;

69 #i‚de‡
TEST


70 
SCREENDEVICE
 
s¸dev
;

73 #ifde‡
TEST


74 #unde‡
EPRINTF


75 #unde‡
DPRINTF


77 
	#EPRINTF
 
¥ötf


	)

78 
	#DPRINTF
 
¥ötf


	)

81 
	$GëPoöãrCÆibøti⁄D©a
()

89 c⁄° 
ˇl_fûíame
[] = "/etc/pointercal";

91 
ôems
;

93 
FILE
* 
f
 = 
	`f›í
(
ˇl_fûíame
, "r");

94 i‡–
f
 =
NULL
 )

96 
	`EPRINTF
("Error %d openingÖointer calibration file %s.\n",

97 
î∫o
, 
ˇl_fûíame
);

98 
	`EPRINTF
("PleaseÅype \"/usr/bin/tpcal > %s\"Åo calibrate\n",

99 
ˇl_fûíame
);

103 
ôems
 = 
	`fsˇnf
(
f
, "%d %d %d %d %d %d %d",

104 &
tc
.
a
, &tc.
b
, &tc.
c
, &tc.
d
, &tc.
e
, &tc.
f
, &tc.
s
);

105 i‡–
ôems
 != 7 )

107 
	`EPRINTF
("Improperly formattedÖointer calibration file %s.\n",

108 
ˇl_fûíame
);

112 #i‡
TEST


113 
	`EPRINTF
("a=%d b=%d c=%d d=%dÉ=%d f=%d s=%d\n",

114 
tc
.
a
,Åc.
b
,Åc.
c
,Åc.
d
,Åc.
e
,Åc.
f
,Åc.
s
);

118 
	}
}

120 
ölöe
 
MWPOINT
 
	$Devi˚ToS¸ìn
(
MWPOINT
 
p
)

131 
MWPOINT
 
¥ev
;

133 c⁄° 
¶›
 = 
TRANSFORMATION_UNITS_PER_PIXEL
 * 3 / 4;

134 
MWPOINT
 
√w
, 
out
;

137 
√w
.
x
 = (
tc
.
a
 * 
p
.x +Åc.
b
 *Ö.
y
 +Åc.
c
Ë/Åc.
s
;

138 
√w
.
y
 = (
tc
.
d
 * 
p
.
x
 +Åc.
e
 *Ö.y +Åc.
f
Ë/Åc.
s
;

141 i‡–
	`abs
(
√w
.
x
 - 
¥ev
.xË>
¶›
 )

142 
out
.
x
 = (
√w
.x | 0x3) ^ 0x3;

144 
out
.
x
 = 
¥ev
.x;

146 i‡–
	`abs
(
√w
.
y
 - 
¥ev
.yË>
¶›
 )

147 
out
.
y
 = (
√w
.y | 0x3) ^ 0x3;

149 
out
.
y
 = 
¥ev
.y;

151 
¥ev
 = 
out
;

153  
out
;

154 
	}
}

156 
	$PD_O≥n
(
MOUSEDEVICE
 *
pmd
)

158 
sˇ≈¨am
 
s
;

159 
£âÀ_uµî_limô
;

160 
ªsu…
;

163 
pd_fd
 = 
	`›í
("/dev/ç™ñ", 
O_NONBLOCK
);

165 i‡(
pd_fd
 < 0)

167 
	`EPRINTF
("Eº‹ %d o≥nögÅouchÖ™ñ\n", 
î∫o
);

171 
s
.
öãrvÆ
 = 
MOU_READ_INTERVAL
;

180 
£âÀ_uµî_limô
 = (
s
.
öãrvÆ
 / 5) - 60;

181 
s
.
£âÀtime
 = 
£âÀ_uµî_limô
 * 50 / 100;

182 
ªsu…
 = 
	`io˘l
(
pd_fd
, 
TPSETSCANPARM
, &
s
);

184 i‡–
ªsu…
 < 0 )

185 
	`EPRINTF
("Error %d,Ñesult %d setting scanÖarameters.\n",

186 
ªsu…
, 
î∫o
);

188 i‡(
íabÀ_poötög_co‹dö©e_å™sf‹m
)

190 i‡(
	`GëPoöãrCÆibøti⁄D©a
() < 0)

192 
	`˛o£
(
pd_fd
);

199 #ifde‡
NOTUSED


200 #i‚de‡
TEST


202 
	`GdHideCurs‹
(&
s¸dev
);

206 (
pd_fd
);

207 
	}
}

209 
	$PD_Clo£
()

212 i‡(
pd_fd
 >= 0)

213 
	`˛o£
(
pd_fd
);

214 
pd_fd
 = -1;

215 
	}
}

217 
	$PD_GëBuâ⁄Info
()

220  
MWBUTTON_L
;

221 
	}
}

223 
	$PD_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
)

230 *
psˇÀ
 = 3;

231 *
±hªsh
 = 5;

232 
	}
}

234 
	#MAX_DEVICE_READS
 10

	)

235 
	$ªad_ç
(*
x
, *
y
,

236 *
z
, *
b
, *
°©us
, 
block
)

238 
ªad_cou¡
 = 0;

239 
ãmpx
, 
ãmpy
;

240 
byãs_ªad
;

241 
d©a
[6];

246 
ªad_cou¡
 < 
MAX_DEVICE_READS
)

248 
byãs_ªad
 = 
	`ªad
(
pd_fd
, 
d©a
, (data));

250 i‡(
byãs_ªad
 !(
d©a
))

252 i‡(
î∫o
 !
EAGAIN
)

254 
	`EPRINTF
("Eº‹ÑódögÅouchÖ™ñ.Éºnÿ%d\n", 
î∫o
);

255 (
î∫o
);

258 i‡(
block
)

260 i‡(
ªad_cou¡
++ =
MAX_DEVICE_READS
)

261 (
EAGAIN
);

263 
	`u¶ìp
(
MOU_READ_INTERVAL
 / 
MAX_DEVICE_READS
);

266 (
EAGAIN
);

272 
ãmpx
 = 
d©a
[
DATA_XPLUS
];

273 
ãmpy
 = 
d©a
[
DATA_YPLUS
];

279 i‡((
d©a
[
DATA_STATUS
] & 
TP_STATUS_DATAVALID
) == TP_STATUS_DATAVALID)

281 i‡(
íabÀ_poötög_co‹dö©e_å™sf‹m
)

283 i‡(
ãmpx
 < 
TP_MIN_X_SIZE
 ||Åempx > 
TP_MAX_X_SIZE
)

285 #ifde‡
TEST


286 
	`EPRINTF
("Gotán out ofÑange X value. X=%d,Y=%d,B=%d\n",

287 
ãmpx
, 
ãmpy
,

288 ((
d©a
[
DATA_STATUS
] & 
TP_STATUS_PENCONTACT
Ë? 
MWBUTTON_L
 : 0));

290 (
EAGAIN
);

293 i‡(
ãmpy
 < 
TP_MIN_Y_SIZE
 ||Åempy > 
TP_MAX_Y_SIZE
)

295 #ifde‡
TEST


296 
	`EPRINTF
("Gotán out ofÑange Y value. X=%d,Y=%d,B=%d\n",

297 
ãmpx
, 
ãmpy
,

298 ((
d©a
[
DATA_STATUS
] & 
TP_STATUS_PENCONTACT
Ë? 
MWBUTTON_L
 : 0));

300 (
EAGAIN
);

304 *
x
 = 
ãmpx
;

305 *
y
 = 
ãmpy
;

306 *
z
 = 
d©a
[
DATA_Z
];

310 *
x
 = 0;

311 *
y
 = 0;

312 *
z
 = 0;

315 *
b
 = ((
d©a
[
DATA_STATUS
] & 
TP_STATUS_PENCONTACT
Ë? 
MWBUTTON_L
 : 0);

316 *
°©us
 = 
d©a
[
DATA_STATUS
];

319 
	}
}

322 
	$PD_Ród
(
MWCOORD
 *
px
, MWCOORD *
py
, MWCOORD *
pz
, *
pb
)

324 #ifde‡
USE_FILTER


326 c⁄° 
iú_shi·_bôs
 = 3;

327 c⁄° 
iú_ßm∂e_dïth
 = (1 << 
iú_shi·_bôs
);

329 
iú_accum_x
 = 0;

330 
iú_accum_y
 = 0;

331 
iú_accum_z
 = 0;

332 
iú_cou¡
 = 0;

334 
cx
, 
cy
, 
cz
;

338 
MWPOINT
 
å™sf‹med
;

339 
îr
 = 0;

340 
ßm∂es
 = 0;

341 
xpos
 = 0;

342 
ypos
 = 0;

343 
zpos
 = 0;

344 
°©us
 = 0;

346 *
pb
 = 0;

347 *
px
 = 0;

348 *
py
 = 0;

349 *
pz
 = 0;

351 #i‚de‡
USE_FILTER


352 
cx
 = 0;

353 
cy
 = 0;

354 
cz
 = 0;

357 i‡((
îr
 = 
	`ªad_ç
(&
xpos
, &
ypos
, &
zpos
, 
pb
, &
°©us
, 0)))

359 i‡(
îr
 =
EAGAIN
)

367 i‡–(
°©us
 & 
TP_STATUS_DATAVALID
) != TP_STATUS_DATAVALID)

369 i‡(*
pb
)

372 
buâ⁄_up
;

375 (
°©us
 & 
TP_STATUS_DATAVALID
) == TP_STATUS_DATAVALID)

377 
ãmpb
 = 0;

379 
îr
 = 
	`ªad_ç
(&
xpos
, &
ypos
, &
zpos
, &
ãmpb
, &
°©us
, 1);

381 i‡(
îr
 =
EAGAIN
)

383 i‡(!
ßm∂es
)

388 i‡(
îr
)

394 i‡–(
°©us
 & 
TP_STATUS_DATAVALID
) != TP_STATUS_DATAVALID)

396 i‡(
ãmpb
)

400 *
pb
 = 
ãmpb
;

401 
buâ⁄_up
;

405 #ifde‡
USE_FILTER


409 i‡–
iú_cou¡
 =
iú_ßm∂e_dïth
 )

412 
iú_accum_x
 -iú_accum_x >> 
iú_shi·_bôs
;

413 
iú_accum_y
 -iú_accum_y >> 
iú_shi·_bôs
;

414 
iú_accum_z
 -iú_accum_z >> 
iú_shi·_bôs
;

417 
iú_accum_x
 +
xpos
;

418 
iú_accum_y
 +
ypos
;

419 
iú_accum_z
 +
zpos
;

423 
iú_accum_x
 +
xpos
;

424 
iú_accum_y
 +
ypos
;

425 
iú_accum_z
 +
zpos
;

426 
iú_cou¡
 += 1;

430 
cx
 +
xpos
;

431 
cy
 +
ypos
;

432 
cz
 +
zpos
;

435 
ßm∂es
++;

438 i‡(
ßm∂es
 >
MOU_SAMPLE_RATE
)

442 i‡(!
ßm∂es
)

445 #ifde‡
USE_FILTER


447 i‡(
iú_cou¡
 < 
iú_ßm∂e_dïth
)

450 i‡(
íabÀ_poötög_co‹dö©e_å™sf‹m
)

453 
å™sf‹med
.
x
 = 
iú_accum_x
;

454 
å™sf‹med
.
y
 = 
iú_accum_y
;

455 
å™sf‹med
 = 
	`Devi˚ToS¸ìn
(transformed);

457 *
px
 = 
å™sf‹med
.
x
 >> 2;

458 *
py
 = 
å™sf‹med
.
y
 >> 2;

462 *
px
 = (
MWCOORD
Ë
	`abs
(
iú_accum_x
);

463 *
py
 = (
MWCOORD
Ë
	`abs
(
iú_accum_y
);

467 i‡(
íabÀ_poötög_co‹dö©e_å™sf‹m
)

469 
å™sf‹med
.
x
 = (
cx
 / 
ßm∂es
);

470 
å™sf‹med
.
y
 = (
cy
 / 
ßm∂es
);

472 
å™sf‹med
 = 
	`Devi˚ToS¸ìn
(transformed);

474 *
px
 = (
MWCOORD
Ë
å™sf‹med
.
x
 >> 2;

475 *
py
 = (
MWCOORD
Ë
å™sf‹med
.
y
 >> 2;

479 *
px
 = (
MWCOORD
Ë
	`abs
(
cx
 / 
ßm∂es
);

480 *
py
 = (
MWCOORD
Ë
	`abs
(
cy
 / 
ßm∂es
);

484 
buâ⁄_up
:

485 i‡(! *
pb
)

487 #ifde‡
USE_FILTER


489 
iú_cou¡
 = 0;

490 
iú_accum_x
 = 0;

491 
iú_accum_y
 = 0;

492 
iú_accum_z
 = 0;

499 
	}
}

501 #i‚de‡
TEST


502 
MOUSEDEVICE
 
	gmou£dev
 = {

503 
PD_O≥n
,

504 
PD_Clo£
,

505 
PD_GëBuâ⁄Info
,

506 
PD_GëDeÁu…Ac˚l
,

507 
PD_Ród
,

508 
NULL


512 #ifde‡
TEST


513 
	$maö
(
¨gc
, ** 
v
)

515 
x
, 
y
, 
z
;

517 
b
;

518 
ªsu…
;

520 
	`DPRINTF
("OpeningÅouchÖanel...\n");

522 if((
ªsu…
=
	`PD_O≥n
(0)) < 0)

525 
	`DPRINTF
("Eº‹ %d,Ñesu… %d o≥nögÅouch-∑√l\n", 
î∫o
, 
ªsu…
);

526 
	`exô
(0);

529 
	`DPRINTF
("ReadingÅouchÖanel...\n");

533 
ªsu…
 = 
	`PD_Ród
(&
x
, &
y
, &
z
, &
b
);

535 if–
ªsu…
 > 0)

537 
	`DPRINTF
("(%d,%d,%dËb = %d\n",
x
, 
y
, 
z
, 
b
);

540 
	}
}

	@drivers/mou_mt.c

11 
	~<°dio.h
>

12 
	~<°dlib.h
>

13 
	~<uni°d.h
>

14 
	~<f˙é.h
>

15 
	~<ãrmios.h
>

16 
	~"devi˚.h
"

18 
MT_O≥n
(
MOUSEDEVICE
 *
pmd
);

19 
MT_Clo£
();

20 
MT_GëBuâ⁄Info
();

21 
MT_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
);

22 
MT_Ród
(
MWCOORD
 *
dx
, MWCOORD *
dy
, MWCOORD *
dz
, *
bp
);

24 
MOUSEDEVICE
 
	gmou£dev
 = {

25 
MT_O≥n
,

26 
MT_Clo£
,

27 
MT_GëBuâ⁄Info
,

28 
MT_GëDeÁu…Ac˚l
,

29 
MT_Ród
,

30 
NULL


33 
	gmt_fd
;

36 
	#CMD
(
fd
,
x
) \

38 
	`wrôe
 (
fd
, "\001" 
x
 "\r", 
	`°æí
(x) + 2); \

39 
	`tcdøö
(
fd
); \

40 } 0)

	)

48 
	$MT_O≥n
(
MOUSEDEVICE
 *
pmd
)

50 *
dev«me
 = "/dev/ttyS0";

51 
ãrmios
Åermios;

53 i‡((
mt_fd
 = 
	`›í
 (
dev«me
, 
O_RDWR
 | 
O_NONBLOCK
)) < 0) {

54 
	`Ârötf
 (
°dîr
, "îr‹ o≥nög '%s'\n", 
dev«me
);

55 
	`exô
 (-1);

58 
	`tcgë©å
 (
mt_fd
, &
ãrmios
);

60 
	`cf£ti•ìd
 (&
ãrmios
, 
B9600
);

61 
	`cf£to•ìd
 (&
ãrmios
, 
B9600
);

63 
	`cfmakîaw
 (&
ãrmios
);

64 
ãrmios
.
c_cÊag
 &~
CBAUD
;

65 
ãrmios
.
c_cÊag
 = 
B9600
;

66 
ãrmios
.
c_cÊag
 |
CS8
 | 
CREAD
;

67 
ãrmios
.
c_oÊag
 = 0;

68 
ãrmios
.
c_oÊag
 &~(
OCRNL
 | 
ONLRET
);

70 
	`tc£èâr
 (
mt_fd
, 
TCSAFLUSH
, &
ãrmios
);

72 
	`CMD
(
mt_fd
,"R");

73 
	`CMD
(
mt_fd
,"AD");

74 
	`CMD
(
mt_fd
,"PN812");

75 
	`CMD
(
mt_fd
,"FT");

76 
	`CMD
(
mt_fd
,"MS");

77 
	`CMD
(
mt_fd
,"PL");

84 
	`u¶ìp
 (250000);

85 
	`tcÊush
 (
mt_fd
, 
TCIOFLUSH
);

88 
	}
}

94 
	$MT_Clo£
()

96 i‡(
mt_fd
 > 0)

97 
	`˛o£
 (
mt_fd
);

99 
mt_fd
 = 0;

100 
	}
}

106 
	$MT_GëBuâ⁄Info
()

108  
MWBUTTON_L
;

109 
	}
}

116 
	$MT_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
)

118 *
psˇÀ
 = 3;

119 *
±hªsh
 = 5;

120 
	}
}

124 
	gbuf
 [5];

125 
	gbyãs_ö_buf
 = 0;

136 
	$MT_Ród
(
MWCOORD
 *
dx
, MWCOORD *
dy
, MWCOORD *
dz
, *
bp
)

138 i‡(
byãs_ö_buf
 == 5) {

139 
byãs_ö_buf
 = 0;

141 *
dx
 = ((
buf
[1] & 0x7f) | ((buf[2] & 0x7f) << 7));

142 *
dy
 = ((
buf
[3] & 0x7f) | ((buf[4] & 0x7f) << 7));

143 *
dx
 = (*dx * 
s¸dev
.
xvúåes
) >> 14;

144 *
dy
 = 
s¸dev
.
yvúåes
 - ((*dy * scrdev.yvirtres) >> 14);

145 *
dz
 = 1;

147 i‡(!(
buf
[0] & (1 << 6)))

148 *
bp
 = 0;

150 *
bp
 = 
MWBUTTON_L
;

155 i‡(
	`ªad
 (
mt_fd
, 
buf
 + 
byãs_ö_buf
, 1) == 1)

156 
byãs_ö_buf
++;

158 i‡((
buf
[
byãs_ö_buf
-1] & 0x80) != 0) {

159 
buf
 [0] = bu‡[
byãs_ö_buf
-1];

160 
byãs_ö_buf
 = 1;

164 
	}
}

	@drivers/mou_null.c

6 
	~<°dio.h
>

7 
	~"devi˚.h
"

9 
	#SCALE
 3

	)

10 
	#THRESH
 5

	)

12 
NUL_O≥n
(
MOUSEDEVICE
 *
pmd
);

13 
NUL_Clo£
();

14 
NUL_GëBuâ⁄Info
();

15 
NUL_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
);

16 
NUL_Ród
(
MWCOORD
 *
dx
, MWCOORD *
dy
, MWCOORD *
dz
, *
bp
);

17 
NUL_Pﬁl
();

19 
MOUSEDEVICE
 
	gmou£dev
 = {

20 
NUL_O≥n
,

21 
NUL_Clo£
,

22 
NUL_GëBuâ⁄Info
,

23 
NUL_GëDeÁu…Ac˚l
,

24 
NUL_Ród
,

25 
NUL_Pﬁl


33 
	$NUL_Pﬁl
()

36 
	}
}

42 
	$NUL_O≥n
(
MOUSEDEVICE
 *
pmd
)

45 
	}
}

51 
	$NUL_Clo£
()

53 
	}
}

59 
	$NUL_GëBuâ⁄Info
()

62 
	}
}

68 
	$NUL_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
)

70 *
psˇÀ
 = 
SCALE
;

71 *
±hªsh
 = 
THRESH
;

72 
	}
}

82 
	$NUL_Ród
(
MWCOORD
 *
dx
, MWCOORD *
dy
, MWCOORD *
dz
, *
bp
)

85 
	}
}

	@drivers/mou_ps5.c

4 
	~<°dio.h
>

5 
	~<°dlib.h
>

6 
	~<uni°d.h
>

7 
	~<î∫o.h
>

8 
	~<f˙é.h
>

9 
	~<m©h.h
>

10 
	~<sys/io˘l.h
>

11 
	#_LINUX_TYPES_H


	)

12 
	~<löux/fb.h
>

13 
	~</löux/ö˛ude/asm-¨m/¨ch/touch_psi⁄.h
>

15 
	~"devi˚.h
"

18 
	gpd_fd
;

23 
SCREENDEVICE
 
s¸dev
;

25 
	$PD_O≥n
(
MOUSEDEVICE
 *
pmd
)

32 
pd_fd
 = 
	`›í
("/dev/touch_psi⁄", 
O_NONBLOCK
);

33 i‡(
pd_fd
 < 0) {

34 
	`Ârötf
(
°dîr
, "Eº‹ %d o≥nögÅouchÖ™ñ\n", 
î∫o
);

38 
	`GdHideCurs‹
(&
s¸dev
);

39  
pd_fd
;

40 
	}
}

42 
	$PD_Clo£
()

45 
	`Ârötf
(
°dîr
,"PD_Close called\n");

46 i‡(
pd_fd
 > 0)

47 
	`˛o£
(
pd_fd
);

48 
pd_fd
 = 0;

49 
	}
}

51 
	$PD_GëBuâ⁄Info
()

54  
MWBUTTON_L
;

55 
	}
}

57 
	$PD_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
)

64 *
psˇÀ
 = 3;

65 *
±hªsh
 = 5;

66 
	}
}

68 
	$PD_Ród
(
MWCOORD
 *
px
, MWCOORD *
py
, MWCOORD *
pz
, *
pb
)

71 
touch_psi⁄_evít
 
d©a
;

72 
byãs_ªad
;

74 
byãs_ªad
 = 
	`ªad
(
pd_fd
, &
d©a
, (data));

76 i‡(
byãs_ªad
 !(
d©a
)) {

77 i‡(
î∫o
 =
EINTR
 ||Éºnÿ=
EAGAIN
)

82 *
px
 = (
MWCOORD
)
d©a
.
x_c
;

83 *
py
 = (
MWCOORD
)
d©a
.
y_c
;

85 *
pb
 = (
d©a
.
down
>0?
MWBUTTON_L
:0);

86 *
pz
 = 0;

88 if((*
px
 =-1 || *
py
 =-1Ë&& *
pb
 >= 0)

90 if((*
px
 =-1 || *
py
 =-1Ë&& *
pb
 < 0)

93 
	}
}

95 
MOUSEDEVICE
 
	gmou£dev
 = {

96 
PD_O≥n
,

97 
PD_Clo£
,

98 
PD_GëBuâ⁄Info
,

99 
PD_GëDeÁu…Ac˚l
,

100 
PD_Ród
,

101 
NULL


104 #ifde‡
TEST


105 
	$maö
(
¨gc
, ** 
v
)

107 
MWCOORD
 
x
, 
y
, 
z
;

108 
MWBUTTON
 
b
;

109 
ªsu…
;

110 
mou£
 = -1;

111 
	`¥ötf
("OpeningÅouchÖanel...\n");

113 if((
ªsu…
=
	`PD_O≥n
(0)) < 0)

114 
	`¥ötf
("Eº‹ %d,Ñesu… %d o≥nögÅouch-∑√l\n", 
î∫o
, 
ªsu…
);

121 if(
¨gc
 > 1) {

122 
	`io˘l
(
ªsu…
,1,
	`©oi
(
v
[1]));

123 
	`Ârötf
(
°dîr
,"SëtögÖªssuªÅÿ%d\n",
	`©oi
(
v
[1]));

125 if(
¨gc
 > 2) {

126 
	`io˘l
(
ªsu…
,2,
	`©oi
(
v
[2]));

127 
	`Ârötf
(
°dîr
,"Sëtög updñayÅÿ%d\n",
	`©oi
(
v
[2]));

129 if(
¨gc
 > 3) {

130 
	`io˘l
(
ªsu…
,3,
	`©oi
(
v
[3]));

131 
	`Ârötf
(
°dîr
,"SëtögÑaw xÅÿ%d\n",
	`©oi
(
v
[3]));

133 if(
¨gc
 > 4) {

134 
	`io˘l
(
ªsu…
,4,
	`©oi
(
v
[4]));

135 
	`Ârötf
(
°dîr
,"SëtögÑaw yÅÿ%d\n",
	`©oi
(
v
[4]));

137 if(
¨gc
 > 5) {

138 
	`io˘l
(
ªsu…
,5,
	`©oi
(
v
[5]));

139 
	`Ârötf
(
°dîr
,"SëtögÑe†xÅÿ%d\n",
	`©oi
(
v
[5]));

141 if(
¨gc
 > 6) {

142 
	`io˘l
(
ªsu…
,6,
	`©oi
(
v
[6]));

143 
	`Ârötf
(
°dîr
,"SëtögÑe†yÅÿ%d\n",
	`©oi
(
v
[6]));

145 if(
¨gc
 > 7) {

146 
	`io˘l
(
ªsu…
,7,
	`©oi
(
v
[7]));

147 
	`Ârötf
(
°dîr
,"Sëtög fudgêxÅÿ%d\n",
	`©oi
(
v
[7]));

149 if(
¨gc
 > 8) {

150 
	`io˘l
(
ªsu…
,8,
	`©oi
(
v
[8]));

151 
	`Ârötf
(
°dîr
,"Sëtög fudgêyÅÿ%d\n",
	`©oi
(
v
[8]));

153 if(
¨gc
 > 9) {

154 
	`io˘l
(
ªsu…
,9,
	`©oi
(
v
[9]));

155 
	`Ârötf
(
°dîr
,"Sëtögávîagêßm∂êtÿ%d\n",
	`©oi
(
v
[9]));

157 if(
¨gc
 > 10) {

158 
	`io˘l
(
ªsu…
,10,
	`©oi
(
v
[10]));

159 
	`Ârötf
(
°dîr
,"SëtögÑaw mö xÅÿ%d\n",
	`©oi
(
v
[10]));

161 if(
¨gc
 > 11) {

162 
	`io˘l
(
ªsu…
,11,
	`©oi
(
v
[11]));

163 
	`Ârötf
(
°dîr
,"SëtögÑaw mö yÅÿ%d\n",
	`©oi
(
v
[11]));

166 
	`¥ötf
("ReadingÅouchÖanel...\n");

169 
ªsu…
 = 
	`PD_Ród
(&
x
, &
y
, &
z
, &
b
);

170 if–
ªsu…
 > 0) {

171 if(
mou£
 !
b
) {

172 
mou£
 = 
b
;

173 if(
mou£
)

174 
	`¥ötf
("Pen Down\n");

176 
	`¥ötf
("Pen Up\n");

179 
	`¥ötf
("%d,%d,%d,%d,%d\n", 
ªsu…
, 
x
, 
y
, 
z
, 
b
);

183 
	}
}

	@drivers/mou_psp.c

5 
	~<p•utûs.h
>

6 
	~<p•kî√l.h
>

7 
	~<p•debug.h
>

8 
	~<p•˘æ.h
>

10 
	~"devi˚.h
"

12 
	#SCALE
 2

	)

13 
	#THRESH
 8

	)

15 
MOU_O≥n
(
MOUSEDEVICE
 *
pmd
);

16 
MOU_Clo£
();

17 
MOU_GëBuâ⁄Info
();

18 
MOU_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
);

19 
MOU_Ród
(
MWCOORD
 *
dx
, MWCOORD *
dy
, MWCOORD *
dz
,*
bp
);

20 
MOU_Pﬁl
();

22 
MOUSEDEVICE
 
	gmou£dev
 = {

23 
MOU_O≥n
,

24 
MOU_Clo£
,

25 
MOU_GëBuâ⁄Info
,

26 
MOU_GëDeÁu…Ac˚l
,

27 
MOU_Ród
,

28 
MOU_Pﬁl


31 
	gp•_key¥ess
;

37 
	$MOU_O≥n
(
MOUSEDEVICE
 *
pmd
)

39 
	`s˚CålSëSam∂ögCy˛e
(0);

40 
	`s˚CålSëSam∂ögMode
(1);

42 
p•_key¥ess
 = 0;

44 
	}
}

50 
	$MOU_Clo£
()

52 
	}
}

58 
	$MOU_GëBuâ⁄Info
()

60  
MWBUTTON_L
 | 
MWBUTTON_M
 | 
MWBUTTON_R
;

61 
	}
}

67 
	$MOU_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
)

69 *
psˇÀ
 = 
SCALE
;

70 *
±hªsh
 = 
THRESH
;

71 
	}
}

81 
	$MOU_Ród
(
MWCOORD
 *
dx
, MWCOORD *
dy
, MWCOORD *
dz
, *
bp
)

83 
S˚CålD©a
 
∑d
;

84 
√w_key¥ess
 = 0;

85 
MWCOORD
 
c‹d_x
=0, 
c‹d_y
 = 0;

87 
	`s˚CålRódBuf„rPosôive
(&
∑d
, 1);

89 *
dx
 = 
c‹d_x
 + ((
MWCOORD
)
∑d
.
Lx
 - 128) / 32;

90 *
dy
 = 
c‹d_y
 + ((
MWCOORD
)
∑d
.
Ly
 - 128) / 32;

91 *
dz
 = 0;

93 *
bp
 = 0;

94 if(
∑d
.
Buâ⁄s
 & 
PSP_CTRL_RTRIGGER
)

95 *
bp
 |
MWBUTTON_M
;

97 if(
∑d
.
Buâ⁄s
 & 
PSP_CTRL_SQUARE
)

98 *
bp
 |
MWBUTTON_L
;

100 if(
∑d
.
Buâ⁄s
 & 
PSP_CTRL_CROSS
)

101 *
bp
 |
MWBUTTON_R
;

103 if(
∑d
.
Buâ⁄s
 & 
PSP_CTRL_SQUARE
Ë
√w_key¥ess
 = 
MWKEY_HOME
;

104 if(
∑d
.
Buâ⁄s
 & 
PSP_CTRL_CROSS
Ë
√w_key¥ess
 = 
MWKEY_END
;

105 if(
∑d
.
Buâ⁄s
 & 
PSP_CTRL_LEFT
)

107 
√w_key¥ess
 = 
MWKEY_LEFT
;

108 *
dx
 -= 1;

110 if(
∑d
.
Buâ⁄s
 & 
PSP_CTRL_RIGHT
)

112 
√w_key¥ess
 = 
MWKEY_RIGHT
;

113 *
dx
 += 1;

115 if(
∑d
.
Buâ⁄s
 & 
PSP_CTRL_UP
)

117 
√w_key¥ess
 = 
MWKEY_UP
;

118 *
dy
 -= 1;

120 if(
∑d
.
Buâ⁄s
 & 
PSP_CTRL_DOWN
)

122 
√w_key¥ess
 = 
MWKEY_DOWN
;

123 *
dy
 += 1;

125 if(
∑d
.
Buâ⁄s
 & 
PSP_CTRL_TRIANGLE
Ë
√w_key¥ess
 = 
MWKEY_PAGEUP
;

126 if(
∑d
.
Buâ⁄s
 & 
PSP_CTRL_CIRCLE
Ë
√w_key¥ess
 = 
MWKEY_PAGEDOWN
;

131 if(
p•_key¥ess
 < 0 && (-p•_key¥essË!
√w_key¥ess
)

132 
p•_key¥ess
=0;

134 if(
p•_key¥ess
==0)

135 
p•_key¥ess
 = 
√w_key¥ess
;

138 
	}
}

140 
	#timîdiff
(
a
,
b
Ë(()(◊).
tv_£c
 - (b).tv_sec) + \

141 ()((
a
).
tv_u£c
 - (
b
).tv_u£c)/1e6)

	)

144 
	$MOU_Pﬁl
()

146 
timevÆ
 
tv
, 
ﬁdtv
;

147 
ªt
;

149 
	`gëtimeofday
(&
tv
, 
NULL
);

151 
ªt
 = 0;

153 if(
	`timîdiff
(
tv
, 
ﬁdtv
) > 0.01) {

154 
ªt
 = 1;

155 
ﬁdtv
 = 
tv
;

158  
ªt
;

159 
	}
}

	@drivers/mou_rtems.c

26 
	~<°dio.h
>

27 
	~<°dlib.h
>

28 
	~<f˙é.h
>

29 
	~<sys/io˘l.h
>

30 
	~<î∫o.h
>

32 
	~<πems/mw_uid.h
>

33 
	~"devi˚.h
"

35 
˛o£
 (
fd
);

37 
	#SCALE
 3

	)

38 
	#THRESH
 5

	)

41 
MWMou_O≥n
 (
MOUSEDEVICE
 *
pmd
);

42 
MWMou_Clo£
 ();

43 
MWMou_GëBuâ⁄Info
 ();

44 
MWMou_GëDeÁu…Ac˚l
 (*
psˇÀ
,*
±hªsh
);

45 
MWMou_Ród
 (
MWCOORD
 *
dx
, MWCOORD *
dy
, MWCOORD *
dz
, *
bp
);

47 
MOUSEDEVICE
 
	gmou£dev
 =

49 
MWMou_O≥n
,

50 
MWMou_Clo£
,

51 
MWMou_GëBuâ⁄Info
,

52 
MWMou_GëDeÁu…Ac˚l
,

53 
MWMou_Ród
,

54 
NULL
,

55 
MOUSE_NORMAL


59 
	gmou_fd
 = -1;

60 
MW_UID_MESSAGE
 
	gm_mou
 = { 0 };

61 c⁄° *
	gQ_NAME
 = "MWQ";

62 
	#Q_MAX_MSGS
 20

	)

63 
	#MOUSE_DEVICE
 "/dev/mou£"

	)

70 
	$MWMou_O≥n
 (
MOUSEDEVICE
 *
pmd
)

72 
rc
;

73 
m_mou
.
ty≥
 = 
MV_UID_INVALID
;

74 
rc
 = 
	`uid_›í_queue
 (
Q_NAME
, 
O_CREAT
 | 
O_RDWR
, 
Q_MAX_MSGS
);

75 
mou_fd
 = 
	`›í
 (
MOUSE_DEVICE
, 
O_NONBLOCK
);

76 
	`uid_ªgi°î_devi˚
 (
mou_fd
, 
Q_NAME
);

78 
	}
}

84 
	$MWMou_Clo£
 ()

86 
	`uid_uƒegi°î_devi˚
 (
mou_fd
);

87 
	`uid_˛o£_queue
 ();

88 
	`˛o£
 (
mou_fd
);

89 
	}
}

95 
	$MWMou_GëBuâ⁄Info
 ()

98 
	}
}

104 
	$MWMou_GëDeÁu…Ac˚l
 (*
psˇÀ
,*
±hªsh
)

106 *
psˇÀ
 = 
SCALE
;

107 *
±hªsh
 = 
THRESH
;

108 
	}
}

118 
	$MWMou_Ród
 (
MWCOORD
 *
dx
, MWCOORD *
dy
, MWCOORD *
dz
, *
bp
)

121 i‡(
m_mou
.
ty≥
 !
MV_UID_INVALID
)

124 
rc
 = (
m_mou
.
ty≥
 =
MV_UID_REL_POS
) ? 1 : 2;

126 *
bp
 = 
m_mou
.
m
.
pos
.
bäs
;

127 *
dx
 = 
m_mou
.
m
.
pos
.
x
;

128 *
dy
 = 
m_mou
.
m
.
pos
.
y
;

129 *
dz
 = 
m_mou
.
m
.
pos
.
z
;

131 
m_mou
.
ty≥
 = 
MV_UID_INVALID
;

132  
rc
;

135 
	}
}

	@drivers/mou_ser.c

20 
	~<°dio.h
>

21 
	~<°dlib.h
>

22 
	~<uni°d.h
>

23 
	~<î∫o.h
>

24 
	~<f˙é.h
>

25 
	~<°rög.h
>

26 
	~"devi˚.h
"

28 
	#TERMIOS
 1

	)

29 
	#SGTTY
 0

	)

31 
	#SCALE
 3

	)

32 
	#THRESH
 5

	)

34 #i‡
TERMIOS


35 
	~<ãrmios.h
>

37 #i‡
SGTTY


38 
	~<sgây.h
>

42 #i‡
_MINIX


43 
	#MOUSE_PORT
 "/dev/mou£"

	)

44 
	#MOUSE_TYPE
 "ms"

	)

46 #i‡
ELKS


47 
	#MOUSE_PORT
 "/dev/âys0"

	)

50 
	#MOUSE_PORT
 "/dev/pßux"

	)

54 
	#MOUSE_TYPE
 "ps2"

	)

58 
	#MAX_BYTES
 128

	)

61 
	#IDLE
 0

	)

62 
	#XSET
 1

	)

63 
	#YSET
 2

	)

64 
	#XADD
 3

	)

65 
	#YADD
 4

	)

68 
	#PC_LEFT_BUTTON
 4

	)

69 
	#PC_MIDDLE_BUTTON
 2

	)

70 
	#PC_RIGHT_BUTTON
 1

	)

72 
	#MS_LEFT_BUTTON
 2

	)

73 
	#MS_RIGHT_BUTTON
 1

	)

75 
	#PS2_CTRL_BYTE
 0x08

	)

76 
	#PS2_LEFT_BUTTON
 1

	)

77 
	#PS2_RIGHT_BUTTON
 2

	)

80 
	#TOP_FIVE_BITS
 0xf8

	)

81 
	#BOTTOM_THREE_BITS
 0x07

	)

82 
	#TOP_BIT
 0x80

	)

83 
	#SIXTH_BIT
 0x40

	)

84 
	#BOTTOM_TWO_BITS
 0x03

	)

85 
	#THIRD_FOURTH_BITS
 0x0c

	)

86 
	#BOTTOM_SIX_BITS
 0x3f

	)

89 
	gmou£_fd
;

90 
	g°©e
;

91 
	gbuâ⁄s
;

92 
	gavaûbuâ⁄s
;

93 
MWCOORD
 
	gxd
;

94 
MWCOORD
 
	gyd
;

96 
	gÀ·
;

97 
	gmiddÀ
;

98 
	gright
;

100 *
	gbp
;

101 
	gnbyãs
;

102 
	gbuf„r
[
MAX_BYTES
];

103 (*
	g∑r£
)();

106 
MOU_O≥n
(
MOUSEDEVICE
 *
pmd
);

107 
MOU_Clo£
();

108 
MOU_GëBuâ⁄Info
();

109 
MOU_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
);

110 
MOU_Ród
(
MWCOORD
 *
dx
, MWCOORD *
dy
, MWCOORD *
dz
, *
b±r
);

111 
MOU_Pﬁl
();

112 
P¨£PC
();

113 
P¨£MS
();

114 
P¨£PS2
();

116 
MOUSEDEVICE
 
	gmou£dev
 = {

117 
MOU_O≥n
,

118 
MOU_Clo£
,

119 
MOU_GëBuâ⁄Info
,

120 
MOU_GëDeÁu…Ac˚l
,

121 
MOU_Ród
,

122 #i‡
_MINIX


123 
MOU_Pﬁl
,

125 
NULL
,

127 
MOUSE_NORMAL


135 
	$MOU_O≥n
(
MOUSEDEVICE
 *
pmd
)

137 *
ty≥
;

138 *
p‹t
;

139 
ãrmios
Åermios;

142 if–!(
ty≥
 = 
	`gëív
("MOUSE_TYPE")))

143 
ty≥
 = 
MOUSE_TYPE
;

145 if–!(
p‹t
 = 
	`gëív
("MOUSE_PORT")))

146 
p‹t
 = 
MOUSE_PORT
;

149 if(!
	`°rcmp
(
ty≥
, "pc") || !strcmp(type, "logi")) {

151 
À·
 = 
PC_LEFT_BUTTON
;

152 
middÀ
 = 
PC_MIDDLE_BUTTON
;

153 
right
 = 
PC_RIGHT_BUTTON
;

154 
∑r£
 = 
P¨£PC
;

155 } i‡(
	`°rcmp
(
ty≥
, "ms") == 0) {

157 
À·
 = 
MS_LEFT_BUTTON
;

158 
right
 = 
MS_RIGHT_BUTTON
;

159 
middÀ
 = 0;

160 
∑r£
 = 
P¨£MS
;

161 } i‡(
	`°rcmp
(
ty≥
, "ps2") == 0) {

163 
À·
 = 
PS2_LEFT_BUTTON
;

164 
right
 = 
PS2_RIGHT_BUTTON
;

165 
middÀ
 = 0;

166 
∑r£
 = 
P¨£PS2
;

171 
mou£_fd
 = 
	`›í
(
p‹t
, 
O_NONBLOCK
);

172 i‡(
mou£_fd
 < 0) {

173 
	`EPRINTF
("Error %d opening serial mouseÅype %s onÖort %s.\n",

174 
î∫o
, 
ty≥
, 
p‹t
);

178 #i‡
SGTTY


180 
sgâyb
 sgttyb;

182 i‡(
	`io˘l
(
fd
, 
TIOCGETP
, &
sgâyb
) == -1)

183 
îr
;

184 
sgâyb
.
sg_Êags
 |
RAW
;

185 
sgâyb
.
sg_Êags
 &~(
EVENP
 | 
ODDP
 | 
ECHO
 | 
XTABS
 | 
CRMOD
);

187 i‡(
	`io˘l
(
fd
, 
TIOCSETP
, &
sgâyb
) == -1)

188 
îr
;

189 i‡(
	`io˘l
(
fd
, 
TIOCFLUSH
, 0) < 0)

190 
îr
;

193 #i‡
TERMIOS


201 
	`tcgë©å
(
mou£_fd
, &
ãrmios
);

204 if(
	`cfgëi•ìd
(&
ãrmios
Ë!
B1200
)

205 
	`cf£ti•ìd
(&
ãrmios
, 
B1200
);

206 #i‡
_MINIX


207 if(
	`cfgëo•ìd
(&
ãrmios
Ë!
B1200
)

208 
	`cf£to•ìd
(&
ãrmios
, 
B1200
);

211 #i‡!
_MINIX


212 
ãrmios
.
c_cÊag
 &~
CBAUD
;

213 
ãrmios
.
c_cÊag
 |
B1200
;

215 
ãrmios
.
c_lÊag
 &~(
ECHO
 | 
ECHONL
 | 
ICANON
 | 
IEXTEN
 | 
ISIG
);

216 
ãrmios
.
c_iÊag
 &~(
ICRNL
 | 
INPCK
 | 
ISTRIP
 | 
IXON
 | 
BRKINT
 | 
IGNBRK
);

217 
ãrmios
.
c_cÊag
 &~(
CSIZE
 | 
PARENB
);

219 i‡(!
	`°rcmp
(
ty≥
, "ps2") || !strcmp(type, "pc"))

220 
ãrmios
.
c_cÊag
 |
CS8
;

222 
ãrmios
.
c_cÊag
 |
CS7
;

223 
ãrmios
.
c_cc
[
VMIN
] = 0;

224 
ãrmios
.
c_cc
[
VTIME
] = 0;

226 
	`tc£èâr
(
mou£_fd
, 
TCSAFLUSH
, &
ãrmios
);

230 
avaûbuâ⁄s
 = 
À·
 | 
middÀ
 | 
right
;

231 
°©e
 = 
IDLE
;

232 
nbyãs
 = 0;

233 
buâ⁄s
 = 0;

234 
xd
 = 0;

235 
yd
 = 0;

236  
mou£_fd
;

237 
îr
:

238 
	`˛o£
(
mou£_fd
);

239 
mou£_fd
 = 0;

241 
	}
}

247 
	$MOU_Clo£
()

249 i‡(
mou£_fd
 > 0)

250 
	`˛o£
(
mou£_fd
);

251 
mou£_fd
 = -1;

252 
	}
}

258 
	$MOU_GëBuâ⁄Info
()

260  
avaûbuâ⁄s
;

261 
	}
}

267 
	$MOU_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
)

269 *
psˇÀ
 = 
SCALE
;

270 *
±hªsh
 = 
THRESH
;

271 
	}
}

281 
	$MOU_Ród
(
MWCOORD
 *
dx
, MWCOORD *
dy
, MWCOORD *
dz
, *
b±r
)

283 
b
;

290 i‡(
nbyãs
 <= 0) {

291 
bp
 = 
buf„r
;

292 
nbyãs
 = 
	`ªad
(
mou£_fd
, 
bp
, 
MAX_BYTES
);

293 i‡(
nbyãs
 < 0) {

294 i‡(
î∫o
 =
EINTR
 ||Éºnÿ=
EAGAIN
)

296 #i‡
_MINIX


309 
nbyãs
-- > 0) {

310 i‡((*
∑r£
)((Ë*
bp
++)) {

311 *
dx
 = 
xd
;

312 *
dy
 = 
yd
;

313 *
dz
 = 0;

314 
b
 = 0;

315 if(
buâ⁄s
 & 
À·
)

316 
b
 |
MWBUTTON_L
;

317 if(
buâ⁄s
 & 
right
)

318 
b
 |
MWBUTTON_R
;

319 if(
buâ⁄s
 & 
middÀ
)

320 
b
 |
MWBUTTON_M
;

321 *
b±r
 = 
b
;

326 
	}
}

333 
	$P¨£PC
(
byã
)

335 
sign
;

337 
°©e
) {

338 
IDLE
:

339 i‡((
byã
 & 
TOP_FIVE_BITS
Ë=
TOP_BIT
) {

340 
buâ⁄s
 = ~
byã
 & 
BOTTOM_THREE_BITS
;

341 
°©e
 = 
XSET
;

345 
XSET
:

346 
sign
 = 1;

347 i‡(
byã
 > 127) {

348 
byã
 = 256 - byte;

349 
sign
 = -1;

351 
xd
 = 
byã
 * 
sign
;

352 
°©e
 = 
YSET
;

355 
YSET
:

356 
sign
 = 1;

357 i‡(
byã
 > 127) {

358 
byã
 = 256 - byte;

359 
sign
 = -1;

361 
yd
 = -
byã
 * 
sign
;

362 
°©e
 = 
XADD
;

365 
XADD
:

366 
sign
 = 1;

367 i‡(
byã
 > 127) {

368 
byã
 = 256 - byte;

369 
sign
 = -1;

371 
xd
 +
byã
 * 
sign
;

372 
°©e
 = 
YADD
;

375 
YADD
:

376 
sign
 = 1;

377 i‡(
byã
 > 127) {

378 
byã
 = 256 - byte;

379 
sign
 = -1;

381 
yd
 -
byã
 * 
sign
;

382 
°©e
 = 
IDLE
;

386 
	}
}

394 
	$P¨£MS
(
byã
)

396 
°©e
) {

397 
IDLE
:

398 i‡(
byã
 & 
SIXTH_BIT
) {

399 
buâ⁄s
 = (
byã
 >> 4Ë& 
BOTTOM_TWO_BITS
;

400 
yd
 = ((
byã
 & 
THIRD_FOURTH_BITS
) << 4);

401 
xd
 = ((
byã
 & 
BOTTOM_TWO_BITS
) << 6);

402 
°©e
 = 
XADD
;

406 
XADD
:

407 
xd
 |(
byã
 & 
BOTTOM_SIX_BITS
);

408 
°©e
 = 
YADD
;

411 
YADD
:

412 
yd
 |(
byã
 & 
BOTTOM_SIX_BITS
);

413 
°©e
 = 
IDLE
;

414 i‡(
xd
 > 127)

415 
xd
 -= 256;

416 i‡(
yd
 > 127)

417 
yd
 -= 256;

421 
	}
}

428 
	$P¨£PS2
(
byã
)

430 
°©e
) {

431 
IDLE
:

432 i‡(
byã
 & 
PS2_CTRL_BYTE
) {

433 
buâ⁄s
 = 
byã
 &

434 (
PS2_LEFT_BUTTON
|
PS2_RIGHT_BUTTON
);

435 
°©e
 = 
XSET
;

439 
XSET
:

440 if(
byã
 > 127)

441 
byã
 -= 256;

442 
xd
 = 
byã
;

443 
°©e
 = 
YSET
;

446 
YSET
:

447 if(
byã
 > 127)

448 
byã
 -= 256;

449 
yd
 = -
byã
;

450 
°©e
 = 
IDLE
;

454 
	}
}

457 
	$MOU_Pﬁl
()

460 
	}
}

463 #i‡
TEST


464 
	$maö
()

466 
MWCOORD
 
x
, 
y
, 
z
;

467 
b
;

469 
	`DPRINTF
("Open Mouse\n");

470 if–
	`MOU_O≥n
(0) < 0)

471 
	`DPRINTF
("open failed mouse\n" );

475 if(
	`MOU_Ród
(&
x
, &
y
, &
z
, &
b
) == 1)

477 
	`DPRINTF
("%d,%d,%d\n", 
x
, 
y
, 
b
);

480 
	}
}

	@drivers/mou_sun.c

9 
	~<°dio.h
>

10 
	~<î∫o.h
>

11 
	~<uni°d.h
>

12 
	~<ãrmios.h
>

13 
	~<f˙é.h
>

14 
	~"devi˚.h
"

16 
	#SCALE
 3

	)

17 
	#THRESH
 5

	)

19 
	#SUN_DEV_FILE
 "/dev/sunmou£"

	)

21 
SUN_O≥n
(
MOUSEDEVICE
 *
pmd
);

22 
SUN_Clo£
();

23 
SUN_GëBuâ⁄Info
();

24 
MOU_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
);

25 
SUN_Ród
(
MWCOORD
 *
dx
, MWCOORD *
dy
, MWCOORD *
dz
, *
bp
);

27 
MOUSEDEVICE
 
	gmou£dev
 = {

28 
SUN_O≥n
,

29 
SUN_Clo£
,

30 
SUN_GëBuâ⁄Info
,

31 
MOU_GëDeÁu…Ac˚l
,

32 
SUN_Ród
,

33 
NULL


36 
	gmou£_fd
;

43 
	$SUN_O≥n
(
MOUSEDEVICE
 *
pmd
)

45 
ãrmios
Åermios;

47 
mou£_fd
 = 
	`›í
(
SUN_DEV_FILE
, 
O_NONBLOCK
);

48 i‡(
mou£_fd
 < 0)

51 
	`tcgë©å
(
mou£_fd
, &
ãrmios
);

53 if(
	`cfgëi•ìd
(&
ãrmios
Ë!
B1200
)

54 
	`cf£ti•ìd
(&
ãrmios
, 
B1200
);

56 
ãrmios
.
c_iÊag
 = 
IGNBRK
 | 
IGNPAR
;

57 
ãrmios
.
c_oÊag
 = 0;

58 
ãrmios
.
c_lÊag
 = 0;

59 
ãrmios
.
c_löe
 = 0;

60 
ãrmios
.
c_cc
[
VTIME
] = 0;

61 
ãrmios
.
c_cc
[
VMIN
] = 1;

62 
ãrmios
.
c_cÊag
 = 
CS8
 | 
CSTOPB
 | 
CREAD
 | 
CLOCAL
 | 
HUPCL
 | 
B1200
;

64 
	`tc£èâr
(
mou£_fd
, 
TCSAFLUSH
, &
ãrmios
);

66  
mou£_fd
;

67 
	}
}

73 
	$SUN_Clo£
()

75 i‡(
mou£_fd
 > 0)

76 
	`˛o£
(
mou£_fd
);

77 
mou£_fd
 = -1;

78 
	}
}

84 
	$SUN_GëBuâ⁄Info
()

86  
MWBUTTON_L
 | 
MWBUTTON_M
 | 
MWBUTTON_R
;

87 
	}
}

93 
	$MOU_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
)

95 *
psˇÀ
 = 
SCALE
;

96 *
±hªsh
 = 
THRESH
;

97 
	}
}

107 
	$SUN_Ród
(
MWCOORD
 *
dx
, MWCOORD *
dy
, MWCOORD *
dz
, *
bp
)

109 
buf
[3];

110 
nbyãs
;

111 
n
;

113 (
n
 = 
	`ªad
(
mou£_fd
, &
buf
[0], 1))) {

114 if(
n
 < 0) {

115 i‡((
î∫o
 =
EINTR
Ë|| (î∫ÿ=
EAGAIN
))

121 if((
buf
[0]&0xf8) != 0x80)

123 
nbyãs
 = 1;

124 (
n
 = 
	`ªad
(
mou£_fd
, &
buf
[
nbyãs
], 3 -Çbytes))) {

125 if(
n
 < 0) {

126 i‡((
î∫o
 =
EINTR
Ë|| (î∫ÿ=
EAGAIN
))

131 
nbyãs
 +
n
;

133 if(
nbyãs
 == 3) {

135 *
bp
 = (~
buf
[0]) & 0x07;

136 *
dx
 = (sig√d )(
buf
[1]);

137 *
dy
 = -(sig√d )(
buf
[2]);

138 *
dz
 = 0;

139 
nbyãs
 = 0;

144 
	}
}

	@drivers/mou_touchscreen.c

22 
	~<°dio.h
>

23 
	~<î∫o.h
>

24 
	~<uni°d.h
>

25 
	~<f˙é.h
>

26 
	~"devi˚.h
"

28 #ifde‡
TOUCHSCREEN_ZAURUS


29 
	~"touchs¸ìn_zaurus.h
"

32 #ifde‡
TOUCHSCREEN_IPAQ


33 
	~"touchs¸ìn_ùaq.h
"

36 #ifde‡
TOUCHSCREEN_ADS


37 
	~"touchs¸ìn_ads.h
"

40 #ifde‡
TOUCHSCREEN_ADS7846


41 
	~"touchs¸ìn_ads7846.h
"

45 #ifde‡
TOUCHSCREEN_TUXSCREEN


46 
	~"touchs¸ìn_ucb1x00.h
"

49 #i‚de‡
TS_DEVICE


53 
	gpd_fd
 = -1;

54 
SCREENDEVICE
 
s¸dev
;

56 
	$PD_O≥n
(
MOUSEDEVICE
 *
pmd
)

58 if((
pd_fd
 = 
	`›í
(
TS_DEVICE_FILE
, 
O_NONBLOCK
)) < 0) {

59 
	`EPRINTF
("Error %d opening %sÅouchscreen device [%s]\n",

60 
î∫o
, 
TS_DEVICE
, 
TS_DEVICE_FILE
);

64 
	`GdHideCurs‹
(&
s¸dev
);

65  
pd_fd
;

66 
	}
}

68 
	$PD_Clo£
()

72 if(
pd_fd
 < 0) ;

74 
	`˛o£
(
pd_fd
);

75 
pd_fd
 = -1;

76 
	}
}

78 
	$PD_GëBuâ⁄Info
()

81  
MWBUTTON_L
;

82 
	}
}

84 
	$PD_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
)

86 *
psˇÀ
 = 3;

87 *
±hªsh
 = 5;

88 
	}
}

90 
	$PD_Ród
(
MWCOORD
 *
px
, MWCOORD *
py
, MWCOORD *
pz
, *
pb
, 
mode
)

92 
ts_evít
 
evít
;

93 
byãs_ªad
;

96 
byãs_ªad
 = 
	`ªad
(
pd_fd
, &
evít
, (event));

98 if(
byãs_ªad
 !(
evít
)) {

99 if(
byãs_ªad
 == -1) {

100 if(
î∫o
 =
EINTR
 ||Éºnÿ=
EAGAIN
)  0;

101 
	`EPRINTF
("[%s] Eº‹ %dÑódög fromÅouchÖ™ñ\n", 
TS_DEVICE
, 
î∫o
);

105 
	`EPRINTF
("[%s] WrongÇumber of bytes %dÑead fromÅouchÖanel "

106 "”x≥˘ed %d)\n", 
TS_DEVICE
, 
byãs_ªad
, (
evít
));

110 *
px
 = 
evít
.
x
;

111 *
py
 = 
evít
.
y
;

113 #i‡
	`deföed
(
TOUCHSCREEN_IPAQ
Ë|| deföed(
TOUCHSCREEN_ADS7846
)

114 *
pb
 = (
evít
.
¥essuª
Ë? 
MWBUTTON_L
 : 0;

116 *
pb
 = (
evít
.
¥essuª
 > 50Ë? 
MWBUTTON_L
 : 0;

119 *
pz
 = 
evít
.
¥essuª
;

121 if(!*
pb
)

124 
	}
}

126 
MOUSEDEVICE
 
	gmou£dev
 = {

127 
PD_O≥n
,

128 
PD_Clo£
,

129 
PD_GëBuâ⁄Info
,

130 
PD_GëDeÁu…Ac˚l
,

131 
PD_Ród
,

132 
NULL
,

133 
MOUSE_TRANSFORM


	@drivers/mou_vrlinux.c

10 
	~<°dio.h
>

11 
	~<°dlib.h
>

12 
	~<uni°d.h
>

13 
	~<î∫o.h
>

14 
	~<f˙é.h
>

15 
	~<m©h.h
>

16 
	~<sys/io˘l.h
>

17 
	~"devi˚.h
"

24 #ifde‡
TOUCHSCREEN_HELIO


25 
	#TS_DEVICE
 "Hñio"

	)

26 
	#TS_DEVICE_FILE
 "/dev/ç™ñ"

	)

29 #ifde‡
TOUCHSCREEN_EPLANET


30 
	#TS_DEVICE
 "Embedded Pœ√t"

	)

31 
	#TS_DEVICE_FILE
 "/dev/ç™ñ"

	)

32 
	~<löux/ç™ñ.h
>

35 #i‚de‡
TS_DEVICE


39 
	$PD_O≥n
(
MOUSEDEVICE
 *
pmd
)

41 #ifde‡
TOUCHSCREEN_EPLANET


42 
sˇ≈¨am
 
s
;

43 
£âÀ_uµî_limô
;

44 
ªsu…
;

47 if((
pd_fd
 = 
	`›í
(
TS_DEVICE_FILE
, 
O_NONBLOCK
)) < 0) {

48 
	`EPRINTF
("[%s} Error %d openingÅouchscreen device [%s]\n",

49 
TS_DEVICE
, 
î∫o
, 
TS_DEVICE_FILE
);

53 #ifde‡
TOUCHSCREEN_EPLANET


55 
s
.
öãrvÆ
 = 5000;

63 
£âÀ_uµî_limô
 = (
s
.
öãrvÆ
 / 5) - 60;

64 
s
.
£âÀtime
 = 
£âÀ_uµî_limô
 * 50 / 100;

65 
ªsu…
 = 
	`io˘l
(
pd_fd
, 
TPSETSCANPARM
, &
s
);

66 i‡–
ªsu…
 < 0 )

67 
	`EPRINTF
("Error %d,Ñesult %d setting scanÖarameters.\n",

68 
ªsu…
, 
î∫o
);

71 
	`GdHideCurs‹
(&
s¸dev
);

72  
pd_fd
;

73 
	}
}

75 
	$PD_Clo£
()

78 i‡(
pd_fd
 > 0)

79 
	`˛o£
(
pd_fd
);

80 
pd_fd
 = 0;

81 
	}
}

83 
	$PD_GëBuâ⁄Info
()

86  
MWBUTTON_L
;

87 
	}
}

89 
	$PD_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
)

96 *
psˇÀ
 = 3;

97 *
±hªsh
 = 5;

98 
	}
}

100 
	$PD_Ród
(
MWCOORD
 *
px
, MWCOORD *
py
, MWCOORD *
pz
, *
pb
) {

102 #ifde‡
TOUCHSCREEN_HELIO


103 
d©a
[3];

105 
d©a
[6];

107 
byãs_ªad
;

109 
byãs_ªad
 = 
	`ªad
(
pd_fd
, &
evít
, (event));

111 if(
byãs_ªad
 !(
evít
)) {

112 if(
byãs_ªad
 == -1) {

113 if(
î∫o
 =
EINTR
 ||Éºnÿ=
EAGAIN
)  0;

114 
	`EPRINTF
("[%s] Eº‹ %dÑódög fromÅouchÖ™ñ\n", 
TS_DEVICE
, 
î∫o
);

118 
	`EPRINTF
("[%s] WrongÇumber of bytes %dÑead fromÅouchÖanel "

119 "”x≥˘ed %d)\n", 
TS_DEVICE
, 
byãs_ªad
, (
evít
));

123 #i‚de‡
TOUCHSCREEN_HELIO


125 i‡(
d©a
[0] & 0x2000)  0;

127 i‡((
d©a
[0] & 0x8000) == 0) {

128 i‡((
d©a
[0] & 0x4000) == 0) {

129 *
pb
 = 0;

136 *
px
 = 
d©a
[2] - data[1];

137 *
py
 = 
d©a
[4] - data[3];

138 *
pz
 = 
d©a
[5];

140 *
pb
 = 
MWBUTTON_L
;

142 *
px
 = 
d©a
[1];

143 *
py
 = 
d©a
[2];

144 *
pz
 = 
d©a
[0] ? 2000 : 0;

148 
	}
}

150 
MOUSEDEVICE
 
	gmou£dev
 = {

151 
PD_O≥n
,

152 
PD_Clo£
,

153 
PD_GëBuâ⁄Info
,

154 
PD_GëDeÁu…Ac˚l
,

155 
PD_Ród
,

156 
NULL


157 
MOUSE_TRANSFORM


	@drivers/mou_x11.c

5 
	~<°dio.h
>

6 
	~<î∫o.h
>

7 
	~<uni°d.h
>

8 
	~<X11/Xlib.h
>

9 
	~"devi˚.h
"

11 
	#SCALE
 3

	)

12 
	#THRESH
 5

	)

14 
X11_O≥n
(
MOUSEDEVICE
 *
pmd
);

15 
X11_Clo£
();

16 
X11_GëBuâ⁄Info
();

17 
X11_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
);

18 
X11_Ród
(
MWCOORD
 *
dx
, MWCOORD *
dy
, MWCOORD *
dz
, *
bp
);

20 
Di•œy
* 
x11_dpy
;

21 
x11_s¸
;

22 
VisuÆ
* 
x11_vis
;

23 
Wödow
 
x11_wö
;

24 
GC
 
x11_gc
;

25 
x11_evít_mask
;

26 
x11_£tup_di•œy
();

27 
x11_h™dÀ_evít
(
XEvít
*);

29 
MOUSEDEVICE
 
	gmou£dev
 = {

30 
X11_O≥n
,

31 
X11_Clo£
,

32 
X11_GëBuâ⁄Info
,

33 
X11_GëDeÁu…Ac˚l
,

34 
X11_Ród
,

35 
NULL
,

36 
MOUSE_NORMAL


43 
	$X11_O≥n
(
MOUSEDEVICE
 *
pmd
)

45 i‡(
	`x11_£tup_di•œy
() < 0)

48  
	`C⁄√˘i⁄Numbî
(
x11_dpy
);

49 
	}
}

55 
	$X11_Clo£
()

58 
	}
}

64 
	$X11_GëBuâ⁄Info
()

66  
MWBUTTON_L
 | 
MWBUTTON_M
 | 
MWBUTTON_R
;

67 
	}
}

73 
	$X11_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
)

75 *
psˇÀ
 = 
SCALE
;

76 *
±hªsh
 = 
THRESH
;

77 
	}
}

87 
	$X11_Ród
(
MWCOORD
 *
dx
, MWCOORD *
dy
, MWCOORD *
dz
, *
bp
)

89 
n€vít_cou¡
 = 0;

90 
XEvít
 
ev
;

91 
evíts
 = 0;

92 
mask
 =

93 #ifde‡
USE_EXPOSURE


94 
Buâ⁄PªssMask
 | 
Buâ⁄Rñó£Mask
 | 
PoöãrMŸi⁄Mask
 | 
ExposuªMask
;

96 
Buâ⁄PªssMask
 | 
Buâ⁄Rñó£Mask
 | 
PoöãrMŸi⁄Mask
;

99 
	`XCheckMaskEvít
(
x11_dpy
, 
mask
, &
ev
)) {

100 i‡(
ev
.
ty≥
 =
MŸi⁄NŸify
) {

101 i‡(
ev
.
xmŸi⁄
.
wödow
 =
x11_wö
) {

102 
buâ⁄
 = 0;

103 *
dx
 = 
ev
.
xmŸi⁄
.
x
;

104 *
dy
 = 
ev
.
xmŸi⁄
.
y
;

105 *
dz
 = 0;

106 i‡(
ev
.
xmŸi⁄
.
°©e
 & 
Buâ⁄1Mask
)

107 
buâ⁄
 |
MWBUTTON_L
;

108 i‡(
ev
.
xmŸi⁄
.
°©e
 & 
Buâ⁄2Mask
)

109 
buâ⁄
 |
MWBUTTON_M
;

110 i‡(
ev
.
xmŸi⁄
.
°©e
 & 
Buâ⁄3Mask
)

111 
buâ⁄
 |
MWBUTTON_R
;

112 *
bp
 = 
buâ⁄
;

113 
evíts
++;

116 i‡(
ev
.
ty≥
 =
Buâ⁄Pªss
) {

117 i‡(
ev
.
xbuâ⁄
.
wödow
 =
x11_wö
) {

118 
buâ⁄
 = 0;

121 if(
ev
.
xbuâ⁄
.
buâ⁄
 == 1)

122 
buâ⁄
 = 
MWBUTTON_L
;

123 if(
ev
.
xbuâ⁄
.
buâ⁄
 == 2)

124 
buâ⁄
 = 
MWBUTTON_M
;

125 if(
ev
.
xbuâ⁄
.
buâ⁄
 == 3)

126 
buâ⁄
 = 
MWBUTTON_R
;

129 i‡(
ev
.
xbuâ⁄
.
°©e
 & 
Buâ⁄1Mask
)

130 
buâ⁄
 |
MWBUTTON_L
;

131 i‡(
ev
.
xbuâ⁄
.
°©e
 & 
Buâ⁄2Mask
)

132 
buâ⁄
 |
MWBUTTON_M
;

133 i‡(
ev
.
xbuâ⁄
.
°©e
 & 
Buâ⁄3Mask
)

134 
buâ⁄
 |
MWBUTTON_R
;

138 *
bp
 = 
buâ⁄
;

139 *
dx
 = 
ev
.
xbuâ⁄
.
x
;

140 *
dy
 = 
ev
.
xbuâ⁄
.
y
;

141 *
dz
 = 0;

142 
evíts
++;

145 i‡(
ev
.
ty≥
 =
Buâ⁄Rñó£
) {

146 i‡(
ev
.
xbuâ⁄
.
wödow
 =
x11_wö
) {

147 
buâ⁄
 = 0;

148 
ªÀa£d
 = 0;

151 if(
ev
.
xbuâ⁄
.
buâ⁄
 == 1)

152 
ªÀa£d
 = 
MWBUTTON_L
;

153 if(
ev
.
xbuâ⁄
.
buâ⁄
 == 2)

154 
ªÀa£d
 = 
MWBUTTON_M
;

155 if(
ev
.
xbuâ⁄
.
buâ⁄
 == 3)

156 
ªÀa£d
 = 
MWBUTTON_R
;

159 i‡(
ev
.
xbuâ⁄
.
°©e
 & 
Buâ⁄1Mask
)

160 
buâ⁄
 |
MWBUTTON_L
;

161 i‡(
ev
.
xbuâ⁄
.
°©e
 & 
Buâ⁄2Mask
)

162 
buâ⁄
 |
MWBUTTON_M
;

163 i‡(
ev
.
xbuâ⁄
.
°©e
 & 
Buâ⁄3Mask
)

164 
buâ⁄
 |
MWBUTTON_R
;

167 
buâ⁄
 &~
ªÀa£d
;

169 *
bp
 = 
buâ⁄
;

170 *
dx
 = 
ev
.
xbuâ⁄
.
x
;

171 *
dy
 = 
ev
.
xbuâ⁄
.
y
;

172 *
dz
 = 0;

173 
evíts
++;

177 
	`x11_h™dÀ_evít
(&
ev
);

180 i‡(
evíts
 == 0) {

185 i‡(++
n€vít_cou¡
 >= 50) {

186 
	`XNextEvít
(
x11_dpy
, &
ev
)) {

189 
	`XPutBackEvít
(
x11_dpy
, &
ev
);

191 
n€vít_cou¡
 = 0;

195 
n€vít_cou¡
 = 0;

197 
	}
}

	@drivers/mou_yopy.c

8 
	~<°dio.h
>

9 
	~<°dlib.h
>

10 
	~<uni°d.h
>

11 
	~<î∫o.h
>

12 
	~<f˙é.h
>

13 
	~<m©h.h
>

14 
	~<sys/io˘l.h
>

15 
	~"devi˚.h
"

18 
	gpd_fd
 = -1;

23 
SCREENDEVICE
 
s¸dev
;

25 
	gˇl
[7];

28 
	mx
, 
	my
;

29 } 
	tXYPOINT
;

31 
	#TRANSFORMATION_UNITS_PER_PIXEL
 4

	)

32 
	$GëPoöãrCÆibøti⁄D©a
()

40 c⁄° 
ˇl_fûíame
[] = "/etc/ts.conf";

42 
ôems
;

44 
FILE
* 
f
 = 
	`f›í
(
ˇl_fûíame
, "r");

45 i‡–
f
 =
NULL
 )

47 
	`EPRINTF
("Error %d openingÖointer calibration file %s.\n",

48 
î∫o
, 
ˇl_fûíame
);

52 
ôems
 = 
	`fsˇnf
(
f
, "%d %d %d %d %d %d %d",

53 &
ˇl
[0], &cal[1], &cal[2], &cal[3], &cal[4], &cal[5], &cal[6]);

54 i‡–
ôems
 != 7 )

56 
	`EPRINTF
("Improperly formattedÖointer calibration file %s.\n",

57 
ˇl_fûíame
);

61 #ifde‡
TEST


62 
	`EPRINTF
("a=%d b=%d c=%d d=%dÉ=%d f=%d s=%d\n",

63 
ˇl
[0], cal[1], cal[2], cal[3], cal[4], cal[5], cal[6]);

67 
	}
}

69 
XYPOINT
 
	$Devi˚ToS¸ìn
(
XYPOINT
 
p
)

79 
XYPOINT
 
¥ev
;

81 c⁄° 
¶›
 = 
TRANSFORMATION_UNITS_PER_PIXEL
 * 3 / 4;

82 
XYPOINT
 
√w
, 
out
;

85 
√w
.
x
 = (
ˇl
[0] * 
p
.x + cÆ[1] *Ö.
y
 + cal[2]) / cal[6];

86 
√w
.
y
 = (
ˇl
[3] * 
p
.
x
 + cal[4] *Ö.y + cal[5]) / cal[6];

89 i‡–
	`abs
(
√w
.
x
 - 
¥ev
.xË>
¶›
 )

90 
out
.
x
 = (
√w
.x | 0x3) ^ 0x3;

92 
out
.
x
 = 
¥ev
.x;

94 i‡–
	`abs
(
√w
.
y
 - 
¥ev
.yË>
¶›
 )

95 
out
.
y
 = (
√w
.y | 0x3) ^ 0x3;

97 
out
.
y
 = 
¥ev
.y;

99 
¥ev
 = 
out
;

101  
out
;

102 
	}
}

104 
	$PD_O≥n
(
MOUSEDEVICE
 *
pmd
)

111 
pd_fd
 = 
	`›í
("/dev/y›y-ts", 
O_NONBLOCK
);

112 i‡(
pd_fd
 < 0) {

113 
	`EPRINTF
("Eº‹ %d o≥nögÅouchÖ™ñ\n", 
î∫o
);

117 
	`GëPoöãrCÆibøti⁄D©a
();

118 
	`GdHideCurs‹
(&
s¸dev
);

120  
pd_fd
;

121 
	}
}

123 
	$PD_Clo£
()

126 i‡(
pd_fd
 >= 0)

127 
	`˛o£
(
pd_fd
);

128 
pd_fd
 = -1;

129 
	}
}

131 
	$PD_GëBuâ⁄Info
()

134  
MWBUTTON_L
;

135 
	}
}

137 
	$PD_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
)

144 *
psˇÀ
 = 3;

145 *
±hªsh
 = 5;

146 
	}
}

149 
	$PD_Ród
(
MWCOORD
 *
px
, MWCOORD *
py
, MWCOORD *
pz
, *
pb
)

153 
d©a
;

154 
byãs_ªad
;

156 
XYPOINT
 
å™sf‹med
;

158 
byãs_ªad
 = 
	`ªad
(
pd_fd
, &
d©a
, (data));

160 i‡(
byãs_ªad
 !(
d©a
)) {

161 i‡(
î∫o
 =
EINTR
 ||Éºnÿ=
EAGAIN
) {

167 
å™sf‹med
.
x
 = (
d©a
 & 0x3ff);

168 
å™sf‹med
.
y
 = (
d©a
 >> 10) & 0x3ff;

170 
å™sf‹med
 = 
	`Devi˚ToS¸ìn
(transformed);

172 
å™sf‹med
.
x
 >>= 2;

173 
å™sf‹med
.
y
 >>= 2;

175 *
px
 = 
å™sf‹med
.
x
;

176 *
py
 = 
å™sf‹med
.
y
;

178 *
pb
 = (((
d©a
 >> 31Ë& 0x1Ë? 
MWBUTTON_L
 : 0);

180 *
pz
 = 0;

182 if(! *
pb
 )

186 
	}
}

188 
MOUSEDEVICE
 
	gmou£dev
 = {

189 
PD_O≥n
,

190 
PD_Clo£
,

191 
PD_GëBuâ⁄Info
,

192 
PD_GëDeÁu…Ac˚l
,

193 
PD_Ród
,

194 
NULL


197 #ifde‡
TEST


198 
	$maö
(
¨gc
, ** 
v
)

200 
MWCOORD
 
x
, 
y
, 
z
;

201 
b
;

202 
ªsu…
;

203 
mou£
 = -1;

204 
	`DPRINTF
("OpeningÅouchÖanel...\n");

206 if((
ªsu…
=
	`PD_O≥n
(0)) < 0)

207 
	`DPRINTF
("Eº‹ %d,Ñesu… %d o≥nögÅouch-∑√l\n", 
î∫o
, 
ªsu…
);

210 
ªsu…
 = 
	`PD_Ród
(&
x
, &
y
, &
z
, &
b
);

211 if–
ªsu…
 > 0) {

212 if(
mou£
 !
b
) {

213 
mou£
 = 
b
;

214 if(
mou£
)

215 
	`DPRINTF
("Pen Down\n");

217 
	`DPRINTF
("Pen Up\n");

219 
	`DPRINTF
("%d,%d,%d,%d,%d\n", 
ªsu…
, 
x
, 
y
, 
z
, 
b
);

222 
	}
}

	@drivers/mwlirc.c

19 
	~<°dio.h
>

20 
	~<°dlib.h
>

21 
	~<as£π.h
>

22 
	~<°rög.h
>

23 
	~<sys/ty≥s.h
>

24 
	~<sys/°©.h
>

25 
	~<f˙é.h
>

26 
	~<î∫o.h
>

27 
	~<sys/sockë.h
>

28 
	~<sys/un.h
>

29 
	~<uni°d.h
>

31 
	~"mwlúc.h
"

32 
	~"mwsy°em.h
"

37 
	gmwlúc_fd
 = -1;

40 
	#MWLIRC_BUF_SIZE_MIN
 100

	)

42 *
	gmwlúc_buf
 = 
NULL
;

43 
	gmwlúc_buf_size
 = 0;

44 
	gmwlúc_buf_u£d
 = 0;

45 
	gmwlúc_buf_löe_Àn
 = 0;

47 
	#MWLIRC_EXPECT_BEGIN
 -1

	)

48 
	#MWLIRC_EXPECT_COMMAND
 -2

	)

49 
	#MWLIRC_EXPECT_SUCCESS_ERROR
 -3

	)

50 
	#MWLIRC_EXPECT_DATA
 -4

	)

51 
	#MWLIRC_EXPECT_DATACOUNT
 -5

	)

52 
	#MWLIRC_EXPECT_END
 0

	)

54 
	gmwlúc_∑ckë_°©e
 = 
MWLIRC_EXPECT_BEGIN
;

57 #ifde‡
TRIMEDIA


58 * 
	$my_°rchr
(* 
buf
, 
ch
)

60 (*
buf
 !'\0'Ë& (*bu‡!
ch
)) buf++;

61  (*
buf
 ? bu‡: 
NULL
);

62 
	}
}

63 #unde‡
°rchr


64 
	#°rchr
 
my_°rchr


	)

73 
	$mwlúc_öô
(
n⁄blockög
)

75 
fd
;

77 i‡(
mwlúc_fd
 != -1) {

82 
mwlúc_∑ckë_°©e
 = 
MWLIRC_EXPECT_BEGIN
;

83 
mwlúc_buf_u£d
 = 0;

84 
mwlúc_buf_löe_Àn
 = 0;

86 
mwlúc_buf
 = 
	`mÆloc
(
MWLIRC_BUF_SIZE_MIN
);

87 i‡(
mwlúc_buf
 =
NULL
) {

88 
mwlúc_buf_size
 = 0;

92 
mwlúc_buf_size
 = 
MWLIRC_BUF_SIZE_MIN
;

93 
mwlúc_buf
[0] = '\0';

96 
sockaddr_un
 
addr
;

98 
fd
 = 
	`sockë
(
PF_UNIX
, 
SOCK_STREAM
, 0);

99 i‡(
fd
 == -1) {

100 
	`‰ì
(
mwlúc_buf
);

101 
mwlúc_buf
 = 
NULL
;

102 
mwlúc_buf_size
 = 0;

106 
addr
.
sun_Ámûy
 = 
AF_UNIX
;

107 
	`°r˝y
(
addr
.
sun_∑th
, "/dev/lircd");

109 i‡(0 !
	`c⁄√˘
(
fd
, (
sockaddr
 *Ë&
addr
, (addr))) {

110 
	`‰ì
(
mwlúc_buf
);

111 
mwlúc_buf
 = 
NULL
;

112 
mwlúc_buf_size
 = 0;

113 
	`˛o£
(
fd
);

117 i‡(
n⁄blockög
) {

118 
	`f˙é
(
fd
, 
F_SETFL
, 
O_NONBLOCK
);

122 
mwlúc_fd
 = 
fd
;

123  
fd
;

124 
	}
}

131 
	$mwlúc_˛o£
()

133 i‡(
mwlúc_fd
 != -1) {

134 
	`˛o£
(
mwlúc_fd
);

135 
mwlúc_fd
 = -1;

138 i‡(
mwlúc_buf
 !
NULL
) {

139 
	`‰ì
(
mwlúc_buf
);

140 
mwlúc_buf
 = 
NULL
;

143 
mwlúc_buf_size
 = 0;

144 
mwlúc_buf_u£d
 = 0;

145 
mwlúc_buf_löe_Àn
 = 0;

146 
mwlúc_∑ckë_°©e
 = 
MWLIRC_EXPECT_BEGIN
;

147 
	}
}

158 
	$mwlúc_ªad_löe
()

160 *
eﬁ
;

161 
n
;

163 i‡(
mwlúc_buf_löe_Àn
 != 0) {

164 
mwlúc_buf_u£d
 -
mwlúc_buf_löe_Àn
;

165 
	`memmove
(
mwlúc_buf
, mwlúc_bu‡+ 
mwlúc_buf_löe_Àn
,

166 
mwlúc_buf_u£d
 + 1);

167 
mwlúc_buf_löe_Àn
 = 0;

170 
NULL
 =(
eﬁ
 = 
	`°rchr
(
mwlúc_buf
, '\n'))) {

171 
•a˚
 = 
mwlúc_buf_size
 - 
mwlúc_buf_u£d
 - 1;

176 i‡(
•a˚
 < 30) {

177 *
p
 =

178 
	`GdRóŒoc
(
mwlúc_buf
, 
mwlúc_buf_size
, mwlirc_buf_size * 2);

179 i‡(
p
 =
NULL
) {

180  
MWLIRC_ERROR_MEMORY
;

182 
mwlúc_buf
 = 
p
;

183 
mwlúc_buf_size
 = mwlirc_buf_size * 2;

187 
n
 = 
	`ªad
(
mwlúc_fd
,

188 
mwlúc_buf
 + 
mwlúc_buf_u£d
, 
•a˚
);

189 } (
n
 < 0Ë&& (
î∫o
 =
EINTR
));

190 i‡(
n
 < 0) {

191 i‡(
î∫o
 =
EAGAIN
) {

193  
MWLIRC_ERROR_AGAIN
;

195 
	`EPRINTF
("mwlirc_read_line(): Error inÑead\n");

196  
MWLIRC_ERROR_SOCKET
;

198 i‡(
n
 == 0) {

199 
	`EPRINTF
("mwlirc_read_line(): EOF\n");

200  
MWLIRC_ERROR_SOCKET
;

202 
mwlúc_buf_u£d
 +
n
;

203 
mwlúc_buf
[
mwlúc_buf_u£d
] = '\0';

204 
mwlúc_buf_u£d
 !(
n
 = 
	`°æí
(
mwlúc_buf
))) {

205 
	`EPRINTF
("mwlirc_read_line(): Error: Embedded NUL in input string! SkippingÖast it. (Context: '%s' NUL '%s') (buf_used=%d != strlen()=%d)\n",

206 
mwlúc_buf
, mwlúc_bu‡+ 
n
 + 1, 
mwlúc_buf_u£d
,Ç);

207 
mwlúc_buf_u£d
 -(
n
 + 1);

208 
	`memmove
(
mwlúc_buf
, mwlúc_bu‡+ 
n
 + 1,

209 
mwlúc_buf_u£d
 + 1);

213 *
eﬁ
 = '\0';

214 
mwlúc_buf_löe_Àn
 = 
eﬁ
 - 
mwlúc_buf
 + 1;

219 
	}
}

230 
	$mwlúc_ªad_key
()

232 
îr
;

236 
îr
 = 
	`mwlúc_ªad_löe
();

238 i‡(
îr
) {

239  
îr
;

241 
mwlúc_∑ckë_°©e
) {

242 
MWLIRC_EXPECT_BEGIN
:

243 i‡(0 =
	`°rcmp
(
mwlúc_buf
, "BEGIN")) {

244 
mwlúc_∑ckë_°©e
 =

245 
MWLIRC_EXPECT_COMMAND
;

251 
MWLIRC_EXPECT_COMMAND
:

254 
mwlúc_∑ckë_°©e
 = 
MWLIRC_EXPECT_SUCCESS_ERROR
;

257 
MWLIRC_EXPECT_SUCCESS_ERROR
:

258 i‡((0 =
	`°rcmp
(
mwlúc_buf
, "SUCCESS"))

259 || (0 =
	`°rcmp
(
mwlúc_buf
, "ERROR"))) {

260 
mwlúc_∑ckë_°©e
 = 
MWLIRC_EXPECT_DATA
;

264 
MWLIRC_EXPECT_DATA
:

265 i‡(0 =
	`°rcmp
(
mwlúc_buf
, "DATA")) {

266 
mwlúc_∑ckë_°©e
 =

267 
MWLIRC_EXPECT_DATACOUNT
;

271 
MWLIRC_EXPECT_END
:

272 i‡(0 =
	`°rcmp
(
mwlúc_buf
, "END")) {

273 
mwlúc_∑ckë_°©e
 = 
MWLIRC_EXPECT_BEGIN
;

276 
mwlúc_∑ckë_°©e
 = 
MWLIRC_EXPECT_BEGIN
;

277  
MWLIRC_ERROR_PROTOCOL
;

279 
MWLIRC_EXPECT_DATACOUNT
:

280 
mwlúc_∑ckë_°©e
 = 
	`©oi
(
mwlúc_buf
);

281 i‡(
mwlúc_∑ckë_°©e
 <= 0) {

282 
mwlúc_∑ckë_°©e
 = 
MWLIRC_EXPECT_BEGIN
;

283  
MWLIRC_ERROR_PROTOCOL
;

287 
	`as£π
(
mwlúc_∑ckë_°©e
 > 0);

288 
	`as£π
(
MWLIRC_EXPECT_END
 == 0);

290 
mwlúc_∑ckë_°©e
--;

294 
	}
}

303 
	$mwlúc_ªad_key°roke
(
mwlúc_key°roke
 * 
key
)

305 *
ª≥©cou¡°r
;

306 *
key«me
;

307 *
ªmŸe
;

308 *
p
;

309 
ª≥©cou¡
;

311 
îr
 = 
	`mwlúc_ªad_key
();

313 i‡(
îr
) {

314  
îr
;

317 
ª≥©cou¡°r
 = 
	`°rchr
(
mwlúc_buf
, ' ');

318 i‡(
NULL
 =
ª≥©cou¡°r
) {

319  
MWLIRC_ERROR_PROTOCOL
;

321 *
ª≥©cou¡°r
++ = '\0';

323 
key«me
 = 
	`°rchr
(
ª≥©cou¡°r
, ' ');

324 i‡(
NULL
 =
key«me
) {

325  
MWLIRC_ERROR_PROTOCOL
;

327 *
key«me
++ = '\0';

329 
ªmŸe
 = 
	`°rchr
(
key«me
, ' ');

330 i‡(
NULL
 =
ªmŸe
) {

331  
MWLIRC_ERROR_PROTOCOL
;

333 *
ªmŸe
++ = '\0';

335 i‡((*
key«me
 == '\0')

336 || (*
ª≥©cou¡°r
 == '\0')) {

337  
MWLIRC_ERROR_PROTOCOL
;

340 
p
 = 
ª≥©cou¡°r
;

341 
ª≥©cou¡
 = 
	`°πﬁ
(
ª≥©cou¡°r
, &
p
, 16);

342 i‡(*
p
 != '\0') {

344  
MWLIRC_ERROR_PROTOCOL
;

346 i‡(
ª≥©cou¡
 < 0) {

347  
MWLIRC_ERROR_PROTOCOL
;

350 
key
->
ª≥©cou¡
 =Ñepeatcount;

351 
	`°∫˝y
(
key
->
«me
, 
key«me
, 
MWLIRC_KEY_NAME_LENGTH
 - 1);

352 
	`°∫˝y
(
key
->
rc
, 
ªmŸe
, 
MWLIRC_RC_NAME_LENGTH
 - 1);

353 
key
->
«me
[
MWLIRC_KEY_NAME_LENGTH
 - 1] = '\0';

354 
key
->
rc
[
MWLIRC_RC_NAME_LENGTH
 - 1] = '\0';

359 
	}
}

369 
	$mwlúc_ªad_key°roke_n‹ïót
(
mwlúc_key°roke
 * 
key
)

372 
îr
 = 
	`mwlúc_ªad_key°roke
(
key
);

373 i‡(
îr
) {

374  
îr
;

377 
key
->
ª≥©cou¡
 != 0);

380 
	}
}

	@drivers/mwlirc.h

19 #i‚de‡
MWLIRC_H_INCLUDED


20 
	#MWLIRC_H_INCLUDED


	)

22 #ifde‡
__˝lu•lus


27 
	#MWLIRC_ERROR_AGAIN
 1

	)

28 
	#MWLIRC_ERROR_SOCKET
 2

	)

29 
	#MWLIRC_ERROR_PROTOCOL
 3

	)

30 
	#MWLIRC_ERROR_MEMORY
 4

	)

32 
	#MWLIRC_BLOCK
 0

	)

33 
	#MWLIRC_NONBLOCK
 1

	)

35 
	#MWLIRC_KEY_NAME_LENGTH
 28

	)

36 
	#MWLIRC_RC_NAME_LENGTH
 16

	)

38 
	smwlúc_key°roke_


40 
ª≥©cou¡
;

41 
«me
[
MWLIRC_KEY_NAME_LENGTH
];

42 
rc
[
MWLIRC_RC_NAME_LENGTH
];

44 
	tmwlúc_key°roke
;

47 
mwlúc_fd
;

49 
mwlúc_öô
(
n⁄blockög
);

50 
mwlúc_˛o£
();

51 
mwlúc_ªad_key°roke
(
mwlúc_key°roke
 * 
key
);

52 
mwlúc_ªad_key°roke_n‹ïót
(
mwlúc_key°roke
 * 
key
);

54 #ifde‡
__˝lu•lus


	@drivers/nofont.c

8 
	~<°dio.h
>

9 
	~"devi˚.h
"

10 
	~"gíf⁄t.h
"

14 
MWCFONT
 
	gnuŒf⁄t
 = {

15 "", 0, 0, 0, 0, 0, 
NULL
, NULL, NULL

19 
MWFONTPROCS
 
	gf⁄çrocs
 = {

20 
MWTF_ASCII
,

21 
NULL
,

22 
NULL
,

23 
NULL
,

24 
NULL
,

25 
NULL
,

26 
NULL
,

27 
NULL
,

28 
NULL
,

32 
MWCOREFONT
 
	ggí_f⁄ts
[
NUMBER_FONTS
] = {

33 {&
f⁄çrocs
, 0, 0, 0, 
MWFONT_SYSTEM_VAR
, &
nuŒf⁄t
},

34 {&
f⁄çrocs
, 0, 0, 0, 
MWFONT_SYSTEM_VAR
, &
nuŒf⁄t
},

35 {&
f⁄çrocs
, 0, 0, 0, 
MWFONT_SYSTEM_VAR
, &
nuŒf⁄t
},

36 {&
f⁄çrocs
, 0, 0, 0, 
MWFONT_SYSTEM_VAR
, &
nuŒf⁄t
},

	@drivers/obsolete.c

26 
	ggr_w¨nög_libmwdrivîs_is_obsﬁëe
[] =

	@drivers/old/mou_ads.c

8 
	~<°dio.h
>

9 
	~<°dlib.h
>

10 
	~<uni°d.h
>

11 
	~<î∫o.h
>

12 
	~<f˙é.h
>

13 
	~<m©h.h
>

14 
	~<sys/io˘l.h
>

15 
	~"devi˚.h
"

18 
	gpd_fd
 = -1;

23 
SCREENDEVICE
 
s¸dev
;

25 
	$PD_O≥n
(
MOUSEDEVICE
 *
pmd
)

32 
pd_fd
 = 
	`›í
("/dev/ts", 
O_NONBLOCK
);

33 i‡(
pd_fd
 < 0) {

34 
	`EPRINTF
("Eº‹ %d o≥nögÅouchÖ™ñ\n", 
î∫o
);

38 
	`GdHideCurs‹
(&
s¸dev
);

39  
pd_fd
;

40 
	}
}

42 
	$PD_Clo£
()

45 
	`EPRINTF
("PD_Close called\n");

46 i‡(
pd_fd
 >= 0)

47 
	`˛o£
(
pd_fd
);

48 
pd_fd
 = -1;

49 
	}
}

51 
	$PD_GëBuâ⁄Info
()

54  
MWBUTTON_L
;

55 
	}
}

57 
	$PD_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
)

64 *
psˇÀ
 = 3;

65 *
±hªsh
 = 5;

66 
	}
}

68 
	$PD_Ród
(
MWCOORD
 *
px
, MWCOORD *
py
, MWCOORD *
pz
, *
pb
)

71 
d©a
[3];

72 
byãs_ªad
;

74 
byãs_ªad
 = 
	`ªad
(
pd_fd
, 
d©a
, (data));

76 i‡(
byãs_ªad
 !(
d©a
)) {

77 i‡(
î∫o
 =
EINTR
 ||Éºnÿ=
EAGAIN
)

88 *
px
 = (
MWCOORD
)
d©a
[0];

89 *
py
 = (
MWCOORD
)
d©a
[1];

91 *
pb
 = (
d©a
[2]>0?
MWBUTTON_L
:0);

92 *
pz
 = 0;

94 if((*
px
 =-1 || *
py
 =-1Ë&& *
pb
 >= 0)

96 if((*
px
 =-1 || *
py
 =-1Ë&& *
pb
 < 0)

100 
	}
}

102 
MOUSEDEVICE
 
	gmou£dev
 = {

103 
PD_O≥n
,

104 
PD_Clo£
,

105 
PD_GëBuâ⁄Info
,

106 
PD_GëDeÁu…Ac˚l
,

107 
PD_Ród
,

108 
NULL


111 #ifde‡
TEST


112 
	$maö
(
¨gc
, ** 
v
)

114 
MWCOORD
 
x
, 
y
, 
z
;

115 
b
;

116 
ªsu…
;

117 
mou£
 = -1;

118 
	`DPRINTF
("OpeningÅouchÖanel...\n");

120 if((
ªsu…
=
	`PD_O≥n
(0)) < 0)

121 
	`DPRINTF
("Eº‹ %d,Ñesu… %d o≥nögÅouch-∑√l\n", 
î∫o
, 
ªsu…
);

128 if(
¨gc
 > 1) {

129 
	`io˘l
(
ªsu…
,1,
	`©oi
(
v
[1]));

130 
	`DPRINTF
("SëtögÖªssuªÅÿ%d\n",
	`©oi
(
v
[1]));

132 if(
¨gc
 > 2) {

133 
	`io˘l
(
ªsu…
,2,
	`©oi
(
v
[2]));

134 
	`DPRINTF
("Sëtög updñayÅÿ%d\n",
	`©oi
(
v
[2]));

136 if(
¨gc
 > 3) {

137 
	`io˘l
(
ªsu…
,3,
	`©oi
(
v
[3]));

138 
	`DPRINTF
("SëtögÑaw xÅÿ%d\n",
	`©oi
(
v
[3]));

140 if(
¨gc
 > 4) {

141 
	`io˘l
(
ªsu…
,4,
	`©oi
(
v
[4]));

142 
	`DPRINTF
("SëtögÑaw yÅÿ%d\n",
	`©oi
(
v
[4]));

144 if(
¨gc
 > 5) {

145 
	`io˘l
(
ªsu…
,5,
	`©oi
(
v
[5]));

146 
	`DPRINTF
("SëtögÑe†xÅÿ%d\n",
	`©oi
(
v
[5]));

148 if(
¨gc
 > 6) {

149 
	`io˘l
(
ªsu…
,6,
	`©oi
(
v
[6]));

150 
	`DPRINTF
("SëtögÑe†yÅÿ%d\n",
	`©oi
(
v
[6]));

152 if(
¨gc
 > 7) {

153 
	`io˘l
(
ªsu…
,7,
	`©oi
(
v
[7]));

154 
	`DPRINTF
("Sëtög fudgêxÅÿ%d\n",
	`©oi
(
v
[7]));

156 if(
¨gc
 > 8) {

157 
	`io˘l
(
ªsu…
,8,
	`©oi
(
v
[8]));

158 
	`DPRINTF
("Sëtög fudgêyÅÿ%d\n",
	`©oi
(
v
[8]));

160 if(
¨gc
 > 9) {

161 
	`io˘l
(
ªsu…
,9,
	`©oi
(
v
[9]));

162 
	`DPRINTF
("Sëtögávîagêßm∂êtÿ%d\n",
	`©oi
(
v
[9]));

164 if(
¨gc
 > 10) {

165 
	`io˘l
(
ªsu…
,10,
	`©oi
(
v
[10]));

166 
	`DPRINTF
("SëtögÑaw mö xÅÿ%d\n",
	`©oi
(
v
[10]));

168 if(
¨gc
 > 11) {

169 
	`io˘l
(
ªsu…
,11,
	`©oi
(
v
[11]));

170 
	`DPRINTF
("SëtögÑaw mö yÅÿ%d\n",
	`©oi
(
v
[11]));

173 
	`DPRINTF
("ReadingÅouchÖanel...\n");

176 
ªsu…
 = 
	`PD_Ród
(&
x
, &
y
, &
z
, &
b
);

177 if–
ªsu…
 > 0) {

178 if(
mou£
 !
b
) {

179 
mou£
 = 
b
;

180 if(
mou£
)

181 
	`DPRINTF
("Pen Down\n");

183 
	`DPRINTF
("Pen Up\n");

186 
	`DPRINTF
("%d,%d,%d,%d,%d\n", 
ªsu…
, 
x
, 
y
, 
z
, 
b
);

190 
	}
}

	@drivers/old/mou_ipaq.c

10 
	~<°dio.h
>

11 
	~<°dlib.h
>

12 
	~<uni°d.h
>

13 
	~<î∫o.h
>

14 
	~<f˙é.h
>

15 
	~<m©h.h
>

16 
	~<sys/io˘l.h
>

17 
	~"devi˚.h
"

19 #ifde‡
__ECOS


20 
	#TOUCHDEVICE
 "/dev/ts"

	)

22 
	#TOUCHDEVICE
 "/dev/h3600_t§aw"

	)

27 
	gpd_fd
 = -1;

33 
SCREENDEVICE
 
s¸dev
;

35 
	$PD_O≥n
(
MOUSEDEVICE
 *
pmd
)

41 
pd_fd
 = 
	`›í
(
TOUCHDEVICE
, 
O_RDONLY
 | 
O_NONBLOCK
);

42 i‡(
pd_fd
 < 0) {

43 
	`EPRINTF
("Eº‹ %d o≥nögÅouchÖ™ñ\n", 
î∫o
);

46 
	`GdHideCurs‹
(&
s¸dev
);

47  
pd_fd
;

48 
	}
}

50 
	$PD_Clo£
()

53 i‡(
pd_fd
 < 0)

56 
	`˛o£
(
pd_fd
);

57 
pd_fd
 = -1;

58 
	}
}

60 
	$PD_GëBuâ⁄Info
()

63  
MWBUTTON_L
;

64 
	}
}

66 
	$PD_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
)

73 *
psˇÀ
 = 3;

74 *
±hªsh
 = 5;

75 
	}
}

77 
	$PD_Ród
(
MWCOORD
 *
px
, MWCOORD *
py
, MWCOORD *
pz
, *
pb
)

80 
d©a
[4];

81 
byãs_ªad
;

83 
byãs_ªad
 = 
	`ªad
(
pd_fd
, 
d©a
, (data));

85 i‡(
byãs_ªad
 !(
d©a
)) {

86 i‡(
î∫o
 =
EINTR
 ||Éºnÿ=
EAGAIN
)

97 *
px
 = (
MWCOORD
)
d©a
[1];

98 *
py
 = (
MWCOORD
)
d©a
[2];

99 *
pz
 = 0;

100 *
pb
 = (
d©a
[0] ? 
MWBUTTON_L
 : 0);

102 #ifde‡
NOTUSED


103 *
px
 = ((
ˇlibøã
[0] * *px) >> 8) + calibrate[2];

104 *
py
 = ((
ˇlibøã
[1] * *py) >> 8) + calibrate[3];

107 if–!*
pb
)

111 
	}
}

113 
MOUSEDEVICE
 
	gmou£dev
 = {

114 
PD_O≥n
,

115 
PD_Clo£
,

116 
PD_GëBuâ⁄Info
,

117 
PD_GëDeÁu…Ac˚l
,

118 
PD_Ród
,

119 
NULL
,

120 
MOUSE_TRANSFORM


123 #ifde‡
TEST


124 
	$maö
(
¨gc
, ** 
v
)

126 
MWCOORD
 
x
, 
y
, 
z
;

127 
b
;

128 
ªsu…
;

129 
mou£
 = -1;

130 
	`DPRINTF
("OpeningÅouchÖanel...\n");

132 if((
ªsu…
=
	`PD_O≥n
(0)) < 0)

133 
	`DPRINTF
("Eº‹ %d,Ñesu… %d o≥nögÅouch-∑√l\n", 
î∫o
, 
ªsu…
);

140 if(
¨gc
 > 1) {

141 
	`io˘l
(
ªsu…
,1,
	`©oi
(
v
[1]));

142 
	`DPRINTF
("SëtögÖªssuªÅÿ%d\n",
	`©oi
(
v
[1]));

144 if(
¨gc
 > 2) {

145 
	`io˘l
(
ªsu…
,2,
	`©oi
(
v
[2]));

146 
	`DPRINTF
("Sëtög updñayÅÿ%d\n",
	`©oi
(
v
[2]));

148 if(
¨gc
 > 3) {

149 
	`io˘l
(
ªsu…
,3,
	`©oi
(
v
[3]));

150 
	`DPRINTF
("SëtögÑaw xÅÿ%d\n",
	`©oi
(
v
[3]));

152 if(
¨gc
 > 4) {

153 
	`io˘l
(
ªsu…
,4,
	`©oi
(
v
[4]));

154 
	`DPRINTF
("SëtögÑaw yÅÿ%d\n",
	`©oi
(
v
[4]));

156 if(
¨gc
 > 5) {

157 
	`io˘l
(
ªsu…
,5,
	`©oi
(
v
[5]));

158 
	`DPRINTF
("SëtögÑe†xÅÿ%d\n",
	`©oi
(
v
[5]));

160 if(
¨gc
 > 6) {

161 
	`io˘l
(
ªsu…
,6,
	`©oi
(
v
[6]));

162 
	`DPRINTF
("SëtögÑe†yÅÿ%d\n",
	`©oi
(
v
[6]));

164 if(
¨gc
 > 7) {

165 
	`io˘l
(
ªsu…
,7,
	`©oi
(
v
[7]));

166 
	`DPRINTF
("Sëtög fudgêxÅÿ%d\n",
	`©oi
(
v
[7]));

168 if(
¨gc
 > 8) {

169 
	`io˘l
(
ªsu…
,8,
	`©oi
(
v
[8]));

170 
	`DPRINTF
("Sëtög fudgêyÅÿ%d\n",
	`©oi
(
v
[8]));

172 if(
¨gc
 > 9) {

173 
	`io˘l
(
ªsu…
,9,
	`©oi
(
v
[9]));

174 
	`DPRINTF
("Sëtögávîagêßm∂êtÿ%d\n",
	`©oi
(
v
[9]));

176 if(
¨gc
 > 10) {

177 
	`io˘l
(
ªsu…
,10,
	`©oi
(
v
[10]));

178 
	`DPRINTF
("SëtögÑaw mö xÅÿ%d\n",
	`©oi
(
v
[10]));

180 if(
¨gc
 > 11) {

181 
	`io˘l
(
ªsu…
,11,
	`©oi
(
v
[11]));

182 
	`DPRINTF
("SëtögÑaw mö yÅÿ%d\n",
	`©oi
(
v
[11]));

185 
	`DPRINTF
("ReadingÅouchÖanel...\n");

188 
ªsu…
 = 
	`PD_Ród
(&
x
, &
y
, &
z
, &
b
);

189 if–
ªsu…
 > 0) {

190 if(
mou£
 !
b
) {

191 
mou£
 = 
b
;

192 if(
mou£
)

193 
	`DPRINTF
("Pen Down\n");

195 
	`DPRINTF
("Pen Up\n");

198 
	`DPRINTF
("%d,%d,%d,%d,%d\n", 
ªsu…
, 
x
, 
y
, 
z
, 
b
);

202 
	}
}

	@drivers/old/mou_tp.c

36 
	~<°dio.h
>

37 
	~<°dlib.h
>

38 
	~<uni°d.h
>

39 
	~<î∫o.h
>

40 
	~<f˙é.h
>

41 
	~<m©h.h
>

42 
	~<sys/io˘l.h
>

43 #i‡!
deföed
(
TPHELIO
Ë&& !deföed(
YOPY
)

44 
	~<löux/ç™ñ.h
>

46 
	~"devi˚.h
"

47 
	~"mou_ç.h
"

49 
	#EMBEDDEDPLANET
 0

	)

50 #i‡
EMBEDDEDPLANET


51 
	#DATACHANGELIMIT
 50

	)

53 
	#DATACHANGELIMIT
 100

	)

63 
	gíabÀ_poötög_co‹dö©e_å™sf‹m
 = 1;

65 
TRANSFORMATION_COEFFICIENTS
 
	gtc
;

68 
	gpd_fd
;

70 
	$GëPoöãrCÆibøti⁄D©a
()

78 c⁄° 
ˇl_fûíame
[] = "/etc/pointercal";

80 
ôems
;

82 
FILE
* 
f
 = 
	`f›í
(
ˇl_fûíame
, "r");

83 i‡–
f
 =
NULL
 )

85 
	`EPRINTF
("Error %d openingÖointer calibration file %s.\n",

86 
î∫o
, 
ˇl_fûíame
);

90 
ôems
 = 
	`fsˇnf
(
f
, "%d %d %d %d %d %d %d",

91 &
tc
.
a
, &tc.
b
, &tc.
c
, &tc.
d
, &tc.
e
, &tc.
f
, &tc.
s
);

92 i‡–
ôems
 != 7 )

94 
	`EPRINTF
("Improperly formattedÖointer calibration file %s.\n",

95 
ˇl_fûíame
);

99 #i‡
TEST


100 
	`EPRINTF
("a=%d b=%d c=%d d=%dÉ=%d f=%d s=%d\n",

101 
tc
.
a
,Åc.
b
,Åc.
c
,Åc.
d
,Åc.
e
,Åc.
f
,Åc.
s
);

105 
	}
}

107 
ölöe
 
MWPOINT
 
	$Devi˚ToS¸ìn
(
MWPOINT
 
p
)

118 
MWPOINT
 
¥ev
;

120 c⁄° 
¶›
 = 
TRANSFORMATION_UNITS_PER_PIXEL
 * 3 / 4;

121 
MWPOINT
 
√w
, 
out
;

124 
√w
.
x
 = (
tc
.
a
 * 
p
.x +Åc.
b
 *Ö.
y
 +Åc.
c
Ë/Åc.
s
;

125 
√w
.
y
 = (
tc
.
d
 * 
p
.
x
 +Åc.
e
 *Ö.y +Åc.
f
Ë/Åc.
s
;

128 i‡–
	`abs
(
√w
.
x
 - 
¥ev
.xË>
¶›
 )

129 
out
.
x
 = (
√w
.x | 0x3) ^ 0x3;

131 
out
.
x
 = 
¥ev
.x;

133 i‡–
	`abs
(
√w
.
y
 - 
¥ev
.yË>
¶›
 )

134 
out
.
y
 = (
√w
.y | 0x3) ^ 0x3;

136 
out
.
y
 = 
¥ev
.y;

138 
¥ev
 = 
out
;

140  
out
;

141 
	}
}

143 #i‚def 
YOPY


144 
	$PD_O≥n
(
MOUSEDEVICE
 *
pmd
)

150 #i‚de‡
TPHELIO


151 
sˇ≈¨am
 
s
;

152 
£âÀ_uµî_limô
;

153 
ªsu…
;

156 
pd_fd
 = 
	`›í
("/dev/ç™ñ", 
O_NONBLOCK
);

157 i‡(
pd_fd
 < 0) {

158 
	`EPRINTF
("Eº‹ %d o≥nögÅouchÖ™ñ\n", 
î∫o
);

162 #i‚de‡
TPHELIO


164 
s
.
öãrvÆ
 = 5000;

172 
£âÀ_uµî_limô
 = (
s
.
öãrvÆ
 / 5) - 60;

173 
s
.
£âÀtime
 = 
£âÀ_uµî_limô
 * 50 / 100;

174 
ªsu…
 = 
	`io˘l
(
pd_fd
, 
TPSETSCANPARM
, &
s
);

175 i‡–
ªsu…
 < 0 )

176 
	`EPRINTF
("Error %d,Ñesult %d setting scanÖarameters.\n",

177 
ªsu…
, 
î∫o
);

180 i‡(
íabÀ_poötög_co‹dö©e_å™sf‹m
)

182 i‡(
	`GëPoöãrCÆibøti⁄D©a
() < 0)

184 
	`˛o£
(
pd_fd
);

189  
pd_fd
;

190 
	}
}

193 
TRANSFORMATION_COEFFICIENTS
 
	gdeÁu…_tc
 = {

197 
	$PD_O≥n
(
MOUSEDEVICE
 *
pmd
)

205 
pd_fd
 = 
	`›í
("/dev/y›y-ts", 
O_NONBLOCK
);

206 i‡(
pd_fd
 < 0) {

207 
	`EPRINTF
("Eº‹ %d o≥nögÅouchÖ™ñ\n", 
î∫o
);

211 i‡(
íabÀ_poötög_co‹dö©e_å™sf‹m
)

213 i‡(
	`GëPoöãrCÆibøti⁄D©a
() < 0)

217 
	`mem˝y
–&
tc
, &
deÁu…_tc
, (
TRANSFORMATION_COEFFICIENTS
) );

222 
	`EPRINTF
("a=%d b=%d c=%d d=%dÉ=%d f=%d s=%d\n",

223 
tc
.
a
,Åc.
b
,Åc.
c
,Åc.
d
,Åc.
e
,Åc.
f
,Åc.
s
);

226  
pd_fd
;

227 
	}
}

230 
	$PD_Clo£
()

233 i‡(
pd_fd
 > 0)

234 
	`˛o£
(
pd_fd
);

235 
pd_fd
 = 0;

236 
	}
}

238 
	$PD_GëBuâ⁄Info
()

241  
MWBUTTON_L
;

242 
	}
}

244 
	$PD_GëDeÁu…Ac˚l
(*
psˇÀ
,*
±hªsh
)

251 *
psˇÀ
 = 3;

252 *
±hªsh
 = 5;

253 
	}
}

255 #i‚def 
YOPY


256 
	$PD_Ród
(
MWCOORD
 *
px
, MWCOORD *
py
, MWCOORD *
pz
, *
pb
)

273 #i‚de‡
TPHELIO


274 c⁄° 
low_z_limô
 = 815;

283 #i‚de‡
TPHELIO


284 c⁄° 
d©a_ch™ge_limô
 = 
DATACHANGELIMIT
;

286 
have_œ°_d©a
 = 0;

287 
œ°_d©a_x
 = 0;

288 
œ°_d©a_y
 = 0;

308 c⁄° 
iú_shi·_bôs
 = 3;

309 c⁄° 
iú_ßm∂e_dïth
 = (1 << 
iú_shi·_bôs
);

310 
iú_accum_x
 = 0;

311 
iú_accum_y
 = 0;

312 
iú_accum_z
 = 0;

313 
iú_cou¡
 = 0;

314 
d©a_x
, 
d©a_y
, 
d©a_z
;

317 #i‡
TPHELIO


318 
d©a
[3];

320 
d©a
[6];

322 
byãs_ªad
;

323 
byãs_ªad
 = 
	`ªad
(
pd_fd
, 
d©a
, (data));

324 i‡(
byãs_ªad
 !(
d©a
)) {

325 i‡(
î∫o
 =
EINTR
 ||Éºnÿ=
EAGAIN
) {

330 #i‚de‡
TPHELIO


332 i‡–(
d©a
[0] & 0x2000) )

333 
	`EPRINTF
("LostÅouchÖanel data\n");

336 i‡–(
d©a
[0] & 0x8000) == 0 )

339 i‡–(
d©a
[0] & 0x4000) == 0 )

342 
have_œ°_d©a
 = 0;

345 
iú_cou¡
 = 0;

346 
iú_accum_x
 = 0;

347 
iú_accum_y
 = 0;

348 
iú_accum_z
 = 0;

352 *
pb
 = 0;

361 #i‡
TPHELIO


362 
d©a_x
 = 
d©a
[1];

363 
d©a_y
 = 
d©a
[2];

364 
d©a_z
 = 
d©a
[0] ? 2000 : 0;

374 
d©a_x
 = 
d©a
[2] - data[1];

375 
d©a_y
 = 
d©a
[4] - data[3];

376 
d©a_z
 = 
d©a
[5];

379 i‡–
d©a_z
 <
low_z_limô
 ) {

384 i‡–
have_œ°_d©a
 )

385 i‡–(
	`abs
(
d©a_x
 - 
œ°_d©a_x
Ë> 
d©a_ch™ge_limô
)

386 || ( 
	`abs
(
d©a_y
 - 
œ°_d©a_y
Ë> 
d©a_ch™ge_limô
 ) ) {

392 
œ°_d©a_x
 = 
d©a_x
;

393 
œ°_d©a_y
 = 
d©a_y
;

394 
have_œ°_d©a
 = 1;

397 i‡–
iú_cou¡
 =
iú_ßm∂e_dïth
 )

399 #i‡
TPHELIO


400 i‡(
íabÀ_poötög_co‹dö©e_å™sf‹m
) {

401 
MWPOINT
 
å™sf‹med
 = {
d©a_x
, 
d©a_y
};

402 
å™sf‹med
 = 
	`Devi˚ToS¸ìn
(transformed);

404 *
px
 = 
å™sf‹med
.
x
 >> 2;

405 *
py
 = 
å™sf‹med
.
y
 >> 2;

407 *
px
 = 
d©a_x
;

408 *
py
 = 
d©a_y
;

410 *
pb
 = 
d©a
[0] ? 
MWBUTTON_L
 : 0;

413 
iú_accum_x
 -iú_accum_x >> 
iú_shi·_bôs
;

414 
iú_accum_y
 -iú_accum_y >> 
iú_shi·_bôs
;

415 
iú_accum_z
 -iú_accum_z >> 
iú_shi·_bôs
;

418 
iú_accum_x
 +
d©a_x
;

419 
iú_accum_y
 +
d©a_y
;

420 
iú_accum_z
 +
d©a_z
;

423 i‡(
íabÀ_poötög_co‹dö©e_å™sf‹m
)

426 
MWPOINT
 
å™sf‹med
 = {
iú_accum_x
, 
iú_accum_y
};

427 
å™sf‹med
 = 
	`Devi˚ToS¸ìn
(transformed);

434 *
px
 = 
å™sf‹med
.
x
 >> 2;

435 *
py
 = 
å™sf‹med
.
y
 >> 2;

440 *
px
 = 
iú_accum_x
;

441 *
py
 = 
iú_accum_y
;

443 *
pb
 = 
MWBUTTON_L
;

446 *
pz
 = 
iú_accum_z
;

448 #ifde‡
TEST


449 
	`EPRINTF
("In: %hd, %hd, %hd Filtered: %d %d %d Out: %d, %d, %d\n",

450 
d©a_x
, 
d©a_y
, 
d©a_z
, 
iú_accum_x
, 
iú_accum_y
,

451 
iú_accum_z
, *
px
, *
py
, *
pz
);

457 
iú_accum_x
 +
d©a_x
;

458 
iú_accum_y
 +
d©a_y
;

459 
iú_accum_z
 +
d©a_z
;

460 
iú_cou¡
 += 1;

463 
	}
}

465 
	$PD_Ród
(
MWCOORD
 *
px
, MWCOORD *
py
, MWCOORD *
pz
, *
pb
)

491 
d©a_x
, 
d©a_y
;

494 
byãs_ªad
;

495 
mou_d©a
;

497 
byãs_ªad
 = 
	`ªad
(
pd_fd
, &
mou_d©a
, (mou_data));

498 i‡(
byãs_ªad
 !(
mou_d©a
)) {

499 i‡(
î∫o
 =
EINTR
 ||Éºnÿ=
EAGAIN
) {

505 
d©a_x
 = ((
MWCOORD
)(
mou_d©a
 & 0x3ff));

506 
d©a_y
 = (
MWCOORD
)(–
mou_d©a
>>10 ) & 0x3ff );

509 i‡(
íabÀ_poötög_co‹dö©e_å™sf‹m
)

512 
MWPOINT
 
å™sf‹med
 = {
d©a_x
, 
d©a_y
};

513 
å™sf‹med
 = 
	`Devi˚ToS¸ìn
(transformed);

520 *
px
 = 
å™sf‹med
.
x
 >> 2;

521 *
py
 = 
å™sf‹med
.
y
 >> 2;

526 *
px
 = 
d©a_x
;

527 *
py
 = 
d©a_y
;

530 *
pz
 = 0;

531 *
pb
 = ( 
mou_d©a
 & (1<<31Ë)? 
MWBUTTON_L
: 0;

533 i‡–! *
pb
 )

537 
	}
}

540 
MOUSEDEVICE
 
	gmou£dev
 = {

541 
PD_O≥n
,

542 
PD_Clo£
,

543 
PD_GëBuâ⁄Info
,

544 
PD_GëDeÁu…Ac˚l
,

545 
PD_Ród
,

546 
NULL


549 #ifde‡
TEST


550 
	$maö
()

552 
MWCOORD
 
x
, 
y
, 
z
;

553 
b
;

554 
ªsu…
;

556 
íabÀ_poötög_co‹dö©e_å™sf‹m
 = 1;

558 
	`DPRINTF
("OpeningÅouchÖanel...\n");

560 if((
ªsu…
=
	`PD_O≥n
(0)) < 0)

561 
	`DPRINTF
("Eº‹ %d,Ñesu… %d o≥nögÅouch-∑√l\n", 
î∫o
, 
ªsu…
);

563 
	`DPRINTF
("ReadingÅouchÖanel...\n");

566 
ªsu…
 = 
	`PD_Ród
(&
x
, &
y
, &
z
, &
b
);

567 if–
ªsu…
 > 0) {

571 
	}
}

	@drivers/old/mou_tp.h

3 
	#TRANSFORMATION_UNITS_PER_PIXEL
 4

	)

18 
	ma
, 
	mb
, 
	mc
, 
	md
, 
	me
, 
	mf
, 
	ms
;

19 } 
	tTRANSFORMATION_COEFFICIENTS
;

	@drivers/old/mou_ucb1x00.c

9 
	~<°dio.h
>

10 
	~<°dlib.h
>

11 
	~<uni°d.h
>

12 
	~<î∫o.h
>

13 
	~<f˙é.h
>

14 
	~<m©h.h
>

15 
	~<sig«l.h
>

16 
	~<sys/time.h
>

17 
	~<sys/io˘l.h
>

18 
	~"devi˚.h
"

21 
	gpd_fd
 = -1;

24 
	#DEVICE
 "/dev/ucb1x00-ts"

	)

29 
MWTRANSFORM
 
	gdeÁu…_å™sf‹m
 = {

33 
SCREENDEVICE
 
s¸dev
;

35 
	sts_evít
 {

36 
	m¥essuª
;

37 
	mx
;

38 
	my
;

39 
	m∑d
;

40 
timevÆ
 
	m°amp
;

44 
	$PD_O≥n
(
MOUSEDEVICE
 * 
pmd
)

50 i‡((
pd_fd
 = 
	`›í
(
DEVICE
, 
O_NONBLOCK
)) < 0) {

51 
	`EPRINTF
("Eº‹ %d o≥nögÅouchÖ™ñ\n", 
î∫o
);

57 
	`GdSëTønsf‹m
(&
deÁu…_å™sf‹m
);

62  
pd_fd
;

63 
	}
}

66 
	$PD_Clo£
()

69 i‡(
pd_fd
 < 0)

72 
	`˛o£
(
pd_fd
);

73 
pd_fd
 = -1;

74 
	}
}

77 
	$PD_GëBuâ⁄Info
()

80  
MWBUTTON_L
;

81 
	}
}

84 
	$PD_GëDeÁu…Ac˚l
(*
psˇÀ
, *
±hªsh
)

86 *
psˇÀ
 = 3;

87 *
±hªsh
 = 5;

88 
	}
}

91 
	$PD_Ród
(
MWCOORD
 * 
px
, MWCOORD * 
py
, MWCOORD * 
pz
, *
pb
, 
mode
)

94 
ts_evít
 
evít
;

95 
byãs_ªad
;

97 
byãs_ªad
 = 
	`ªad
(
pd_fd
, &
evít
, (event));

99 i‡(
byãs_ªad
 !(
evít
)) {

100 i‡(
byãs_ªad
 == -1) {

101 i‡(
î∫o
 =
EINTR
 ||Éºnÿ=
EAGAIN
)

103 
	`EPRINTF
("Eº‹ %dÑódög fromÅouchÖ™ñ\n", 
î∫o
);

107 
	`EPRINTF
("WrongÇumber of bytes %dÑead fromÅouchÖanel "

108 "”x≥˘ed %d)\n", 
byãs_ªad
, (
evít
));

112 *
px
 = 
evít
.
x
;

113 *
py
 = 
evít
.
y
;

114 *
pz
 = 
evít
.
¥essuª
;

115 *
pb
 = (
evít
.
¥essuª
 > 50Ë? 
MWBUTTON_L
 : 0;

117 i‡(!*
pb
)

120 
	}
}

122 
MOUSEDEVICE
 
	gmou£dev
 = {

123 
PD_O≥n
,

124 
PD_Clo£
,

125 
PD_GëBuâ⁄Info
,

126 
PD_GëDeÁu…Ac˚l
,

127 
PD_Ród
,

128 
NULL
,

129 
MOUSE_TRANSFORM


	@drivers/romfont.c

15 
	~<°dlib.h
>

16 
	~"devi˚.h
"

17 
	~"vg≠œn4.h
"

18 
	~"romf⁄t.h
"

21 
	gROM_CHAR_HEIGHT
 = 14;

22 
FARADDR
 
	grom_ch¨_addr
;

25 
MWFONTPROCS
 
	gf⁄çrocs
 = {

26 
MWTF_ASCII
,

27 
p¸om_gëf⁄töfo
,

28 
p¸om_gëãxtsize
,

29 
p¸om_gëãxtbôs
,

30 
p¸om_u∆ﬂdf⁄t
,

31 
c‹ef⁄t_døwãxt
,

32 
NULL
,

33 
NULL
,

34 
NULL
,

38 
MWCOREFONT
 
	gp¸om_f⁄ts
[
NUMBER_FONTS
] = {

39 {&
f⁄çrocs
, 0, 0, 0, 
MWFONT_OEM_FIXED
, 
NULL
}

44 
	$p¸om_öô
(
PSD
 
psd
)

46 * 
p
;

49 
rom_ch¨_addr
 = 
	`öt10
(
FNGETROMADDR
, 
GETROM8x14
);

54 
ROM_CHAR_HEIGHT
 = 
	`GETBYTE_FP
(
	`MK_FP
(0x0040, 0x0085));

55 if(
ROM_CHAR_HEIGHT
 > 
MAX_ROM_HEIGHT
)

56 
ROM_CHAR_HEIGHT
 = 
MAX_ROM_HEIGHT
;

58 
p
 = 
	`gëív
("CHARHEIGHT");

59 if(
p
)

60 
ROM_CHAR_HEIGHT
 = 
	`©oi
(
p
);

61 
	}
}

67 
MWBOOL


68 
	$p¸om_gëf⁄töfo
(
PMWFONT
 
pf⁄t
,
PMWFONTINFO
 
pf⁄töfo
)

70 
i
;

72 
pf⁄töfo
->
maxwidth
 = 
ROM_CHAR_WIDTH
;

73 
pf⁄töfo
->
height
 = 
ROM_CHAR_HEIGHT
;

74 
pf⁄töfo
->
ba£löe
 = 
ROM_CHAR_HEIGHT
;

75 
pf⁄töfo
->
fú°ch¨
 = 0;

76 
pf⁄töfo
->
œ°ch¨
 = 255;

77 
pf⁄töfo
->
fixed
 = 
TRUE
;

78 
i
 = 0; i < 256; i++)

79 
pf⁄töfo
->
widths
[
i
] = 
ROM_CHAR_WIDTH
;

80  
TRUE
;

81 
	}
}

88 
	$p¸om_gëãxtsize
(
PMWFONT
 
pf⁄t
, c⁄° *
°r
, 
cc
, 
MWTEXTFLAGS
 
Êags
,

89 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
, MWCOORD *
pba£
)

91 *
pwidth
 = 
ROM_CHAR_WIDTH
 * 
cc
;

92 *
pheight
 = 
ROM_CHAR_HEIGHT
;

93 *
pba£
 = 
ROM_CHAR_HEIGHT
;

94 
	}
}

101 
	$p¸om_gëãxtbôs
(
PMWFONT
 
pf⁄t
, 
ch
, c⁄° 
MWIMAGEBITS
 **
ªtm≠
,

102 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
, MWCOORD *
pba£
)

104 
FARADDR
 
bôs
;

105 
n
;

106 
MWIMAGEBITS
 
m≠
[
MAX_ROM_HEIGHT
 * 
ROM_CHAR_WIDTH
 / 
MWIMAGE_BITSPERIMAGE
];

107 
MWIMAGEBITS
 *
bôm≠
 = 
m≠
;

110 
bôs
 = 
rom_ch¨_addr
 + 
ch
 * 
ROM_CHAR_HEIGHT
;

111 
n
=0;Ç<
ROM_CHAR_HEIGHT
; ++n)

112 *
bôm≠
++ = 
	`GETBYTE_FP
(
bôs
++) << 8;

114 *
ªtm≠
 = 
m≠
;

115 *
pwidth
 = 
ROM_CHAR_WIDTH
;

116 *
pheight
 = 
ROM_CHAR_HEIGHT
;

117 *
pba£
 = 
ROM_CHAR_HEIGHT
;

118 
	}
}

121 
	$p¸om_u∆ﬂdf⁄t
(
PMWFONT
 
pf⁄t
)

124 
	}
}

126 #i‡
NOTUSED


132 
	$p¸om_døwãxt
(
PMWFONT
 
pf⁄t
, 
PSD
 
psd
, 
COORD
 
x
, COORD 
y
,

133 c⁄° *
ãxt
, 
n
, 
PIXELVAL
 
fg
)

135 c⁄° * 
°r
 = 
ãxt
;

136 
COORD
 
width
;

137 
COORD
 
height
;

138 c⁄° 
MWIMAGEBITS
 * 
bôm≠
;

141 
y
 -(
ROM_CHAR_HEIGHT
 - 1);

142 
n
-- > 0) {

143 
pf⁄t
->
	`GëTextBôs
’f⁄t, *
s
++, &
bôm≠
, &
width
, &
height
);

144 
	`gí_døwbôm≠
(
psd
, 
x
, 
y
, 
width
, 
height
, 
bôm≠
, 
fg
);

145 
x
 +
width
;

147 
	}
}

155 
	$gí_døwbôm≠
(
PSD
 
psd
,
COORD
 
x
, COORD 
y
, COORD 
width
, COORD 
height
,

156 c⁄° 
IMAGEBITS
 *
èbÀ
, 
PIXELVAL
 
fgcﬁ‹
)

158 
COORD
 
möx
;

159 
COORD
 
maxx
;

160 
IMAGEBITS
 
bôvÆue
;

161 
bôcou¡
;

163 
möx
 = 
x
;

164 
maxx
 = 
x
 + 
width
 - 1;

165 
bôcou¡
 = 0;

166 
height
 > 0) {

167 i‡(
bôcou¡
 <= 0) {

168 
bôcou¡
 = 
IMAGE_BITSPERIMAGE
;

169 
bôvÆue
 = *
èbÀ
++;

171 i‡(
	`IMAGE_TESTBIT
(
bôvÆue
))

172 
psd
->
	`DøwPixñ
’sd, 
x
, 
y
, 
fgcﬁ‹
);

173 
bôvÆue
 = 
	`IMAGE_SHIFTBIT
(bitvalue);

174 --
bôcou¡
;

175 i‡(
x
++ =
maxx
) {

176 
x
 = 
möx
;

177 ++
y
;

178 --
height
;

179 
bôcou¡
 = 0;

182 
	}
}

	@drivers/romfont.h

12 
	#NUMBER_FONTS
 1

	)

14 
	#ROM_CHAR_WIDTH
 8

	)

15 
	#MAX_ROM_HEIGHT
 16

	)

16 
	#FONT_CHARS
 256

	)

19 
	#FNGETROMADDR
 0x1130

	)

20 
	#GETROM8x14
 0x0200

	)

23 
p¸om_öô
(
PSD
 
psd
);

24 
MWBOOL
 
p¸om_gëf⁄töfo
(
PMWFONT
 
pf⁄t
,
PMWFONTINFO
 
pf⁄töfo
);

25 
p¸om_gëãxtsize
(
PMWFONT
 
pf⁄t
, c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
,

26 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
, MWCOORD *
pba£
);

27 
p¸om_gëãxtbôs
(
PMWFONT
 
pf⁄t
, 
ch
, c⁄° 
MWIMAGEBITS
 **
ªtm≠
,

28 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
, MWCOORD *
pba£
);

29 
p¸om_u∆ﬂdf⁄t
(
PMWFONT
 
pf⁄t
);

31 
c‹ef⁄t_døwãxt
(
PMWFONT
 
pf⁄t
, 
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
,

32 c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
);

35 
ROM_CHAR_HEIGHT
;

36 
FARADDR
 
rom_ch¨_addr
;

37 
MWCOREFONT
 
p¸om_f⁄ts
[
NUMBER_FONTS
];

40 
p¸om_døwãxt
(
PMWFONT
 
pf⁄t
, 
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
,

41 c⁄° *
ãxt
, 
n
, 
MWPIXELVAL
 
fg
);

42 
gí_døwbôm≠
(
PSD
 
psd
,
MWCOORD
 
x
,MWCOORD 
y
,MWCOORD 
width
,MWCOORD 
height
,

43 
MWIMAGEBITS
 *
èbÀ
, 
MWPIXELVAL
 
fgcﬁ‹
);

	@drivers/scr_bios.c

40 #i‡
_MINIX


41 
	~<f˙é.h
>

42 
	~<uni°d.h
>

43 
	~<°rög.h
>

44 
	~<ibm/öt86.h
>

45 
	~<sys/io˘l.h
>

46 
	#HWINIT
 0

	)

47 
	#ROMFONT
 0

	)

49 #ifde‡
__πems__


50 
	#HWINIT
 1

	)

51 
	#ROMFONT
 0

	)

53 
	#HWINIT
 0

	)

54 
	#ROMFONT
 1

	)

58 #i‡
ELKS


59 
	~<löuxmt/¡ty.h
>

61 
	~<°dio.h
>

62 
	~<°dlib.h
>

63 
	~"devi˚.h
"

64 
	~"vg≠œn4.h
"

65 #i‡
ROMFONT


66 
	~"romf⁄t.h
"

68 
	~"gíf⁄t.h
"

70 
	~"gímem.h
"

71 
	~"fb.h
"

74 
PSD
 
VGA_›í
(PSD 
psd
);

75 
VGA_˛o£
(
PSD
 
psd
);

76 #i‡
_MINIX


77 
VGA_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
);

79 
VGA_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
);;

81 
VGA_£çÆëã
(
PSD
 
psd
,
fú°
,
cou¡
,
MWPALENTRY
 *
∑l
);

82 
MWBOOL
 
VGA_m≠memgc
(
PSD
 
mempsd
,
MWCOORD
 
w
,MWCOORD 
h
,
∂™es
,
bµ
,

83 
löñí
,
size
,*
addr
);

84 
	$NULL_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
,

85 
MWCOORD
 
h
, 
PSD
 
§˝sd
, MWCOORD 
§cx
, MWCOORD 
§cy
, 
›
Ë{
	}
}

86 
PSD
 
	$NULL_Æloˇãmemgc
(
PSD
 
psd
Ë{  
NULL
; 
	}
}

87 
MWBOOL
 
	$NULL_m≠memgc
(
PSD
 
mempsd
,
MWCOORD
 
w
,MWCOORD 
h
,
∂™es
,
bµ
,

88 
löñí
,
size
,*
addr
Ë{  0; 
	}
}

89 
	$NULL_‰ìmemgc
(
PSD
 
mempsd
Ë{
	}
}

91 
SCREENDEVICE
 
	gs¸dev
 = {

92 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
NULL
,

93 
VGA_›í
,

94 
VGA_˛o£
,

95 
VGA_gës¸ìnöfo
,

96 
VGA_£çÆëã
,

97 
ega_døwpixñ
,

98 
ega_ªadpixñ
,

99 
ega_døwh‹zlöe
,

100 
ega_døwvîéöe
,

101 
gí_fûÃe˘
,

102 #i‡
ROMFONT


103 
p¸om_f⁄ts
,

105 
gí_f⁄ts
,

107 #i‡
HAVEBLIT


108 
ega_blô
,

110 
NULL_blô
,

112 
NULL
,

113 
NULL
,

114 
NULL
,

115 
gí_Æloˇãmemgc
,

116 
VGA_m≠memgc
,

117 
gí_‰ìmemgc


121 
MWBOOL
 
	gVGAMODE
 = 
TRUE
;

124 
	#FNGR640x480
 0x0012

	)

125 
	#FNGR640x350
 0x0010

	)

126 
	#FNTEXT
 0x0003

	)

128 #i‡
_MINIX


129 
FARADDR
 
	$öt10
(
mode
, 
z
)

131 
fd
;

132 
mio_öt86
 
möt86
;

134 
fd
 = 
	`›í
("/dev/mem", 
O_RDONLY
);

135 
	`mem£t
(&
möt86
, 0, (mint86));

136 
	`io˘l
(
fd
, 
MIOCINT86
, &
möt86
);

137 
möt86
.
ªg86
.
b
.
öäo
 = 0x10;

138 
möt86
.
ªg86
.
b
.
Æ
 = 
mode
 & 0xFF;

139 
	`io˘l
(
fd
, 
MIOCINT86
, &
möt86
);

140 
	`˛o£
(
fd
);

141 
	}
}

144 
PSD


145 
	$VGA_›í
(
PSD
 
psd
)

147 #i‡
_MINIX


148 
s
;

149 
mio_ldt86
 
mldt86
;

150 
	s£gdesc_s
 {

151 
u16_t
 
limô_low
;

152 
u16_t
 
ba£_low
;

153 
u8_t
 
ba£_middÀ
;

154 
u8_t
 
ac˚ss
;

155 
u8_t
 
gønuœrôy
;

156 
u8_t
 
ba£_high
;

157 } *
dp
;

158 
fd
;

159 
vidmem
 = 0xA0000;

161 
fd
 = 
	`›í
("/dev/mem", 
O_RDONLY
);

162 
dp
 = (
£gdesc_s
 *Ë
mldt86
.
íåy
;

163 
mldt86
.
idx
 = 1;

164 
s
 = 
	`io˘l
(
fd
, 
MIOCGLDT86
, &
mldt86
);

165 
dp
->
limô_low
 = 0xFFFF;

166 
dp
->
ba£_low
 = (
vidmem
 >> 0) & 0xFFFF;

167 
dp
->
ba£_middÀ
 = (
vidmem
 >> 16) & 0xFF;

168 
dp
->
ba£_high
 = (
vidmem
 >> 24) & 0xFF;

169 
dp
->
gønuœrôy
 |= 0x80;

170 
mldt86
.
idx
 = 2;

171 
s
 = 
	`io˘l
(
fd
, 
MIOCSLDT86
, &
mldt86
);

172 
	`˛o£
(
fd
);

175 if(
	`gëív
("EGAMODE"))

176 
VGAMODE
 = 
FALSE
;

177 
VGAMODE
 = 
TRUE
;

179 #i‡
ELKS


181 if(
	`io˘l
(0, 
DCGET_GRAPH
) != 0)

182  
NULL
;

185 #i‡
HWINIT


187 
	`ega_hwöô
();

190 
	`öt10
(
VGAMODE
? 
FNGR640x480
: 
FNGR640x350
, 0);

194 
psd
->
xªs
 =Ösd->
xvúåes
 = 640;

195 
psd
->
yªs
 =Ösd->
yvúåes
 = 
VGAMODE
? 480: 350;

196 
psd
->
∂™es
 = 4;

197 
psd
->
bµ
 = 4;

198 
psd
->
ncﬁ‹s
 = 16;

199 
psd
->
pixty≥
 = 
MWPF_PALETTE
;

200 #i‡
HAVEBLIT


201 
psd
->
Êags
 = 
PSF_SCREEN
 | 
PSF_HAVEBLIT
;

203 
psd
->
Êags
 = 
PSF_SCREEN
;

207 
	`ega_öô
(
psd
);

209 #i‡
ROMFONT


211 
	`p¸om_öô
(
psd
);

214 
ROM_CHAR_HEIGHT
 = 
VGAMODE
? 16: 14;

217  
psd
;

218 
	}
}

221 
	$VGA_˛o£
(
PSD
 
psd
)

223 #i‡
ELKS


225 
	`io˘l
(0, 
DCREL_GRAPH
);

227 #i‡
HWINIT


228 
	`ega_hwãrm
();

231 
	`öt10
(
FNTEXT
, 0);

233 
	}
}

236 
	$VGA_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
)

238 
psi
->
rows
 = 
psd
->
yvúåes
;

239 
psi
->
cﬁs
 = 
psd
->
xvúåes
;

240 
psi
->
∂™es
 = 
psd
->planes;

241 
psi
->
bµ
 = 
psd
->bpp;

242 
psi
->
ncﬁ‹s
 = 
psd
->ncolors;

243 
psi
->
pixty≥
 = 
psd
->pixtype;

244 
psi
->
f⁄ts
 = 
NUMBER_FONTS
;

246 if(
VGAMODE
) {

248 
psi
->
xdpcm
 = 27;

249 
psi
->
ydpcm
 = 27;

252 
psi
->
xdpcm
 = 27;

253 
psi
->
ydpcm
 = 19;

256 #i‡
ETA4000


258 
psi
->
xdpcm
 = 33;

259 
psi
->
ydpcm
 = 33;

261 
	}
}

264 
	$VGA_£çÆëã
(
PSD
 
psd
,
fú°
,
cou¡
,
MWPALENTRY
 *
∑l
)

267 
	}
}

269 #i‡
HAVEBLIT


271 
MWBOOL


272 
	$VGA_m≠memgc
(
PSD
 
mempsd
,
MWCOORD
 
w
,MWCOORD 
h
,
∂™es
,
bµ
,
löñí
,

273 
size
,*
addr
)

275 
SUBDRIVER
 
mem∂™4
;

278 
	`öômemgc
(
mempsd
, 
w
, 
h
, 
∂™es
, 
bµ
, 
löñí
, 
size
, 
addr
);

281 i‡(!
	`£t_subdrivî
(
mempsd
, &
mem∂™4
, 
TRUE
))

285 
	}
}

	@drivers/scr_debug.c

12 
	~<°dio.h
>

13 
	~<°dlib.h
>

14 
	~"devi˚.h
"

15 
	~"gíf⁄t.h
"

16 
	~"gímem.h
"

19 
PSD
 
DBG_›í
(PSD 
psd
);

20 
DBG_˛o£
(
PSD
 
psd
);

21 
DBG_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
);;

22 
DBG_£çÆëã
(
PSD
 
psd
,
fú°
,
cou¡
,
MWPALENTRY
 *
∑l
);

23 
DBG_døwpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
);

24 
MWPIXELVAL
 
DBG_ªadpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
);

25 
DBG_døwhlöe
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
);

26 
DBG_døwvlöe
(
PSD
 
psd
,
MWCOORD
 
x
,MWCOORD 
y1
,MWCOORD 
y2
,
MWPIXELVAL
 
c
);

27 
DBG_fûÃe˘
(
PSD
 
psd
,
MWCOORD
 
x1
,MWCOORD 
y1
,MWCOORD 
x2
,MWCOORD 
y2
,

28 
MWPIXELVAL
 
c
);

29 
DBG_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

30 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
);

32 
SCREENDEVICE
 
	gs¸dev
 = {

33 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
NULL
,

34 
DBG_›í
,

35 
DBG_˛o£
,

36 
DBG_gës¸ìnöfo
,

37 
DBG_£çÆëã
,

38 
DBG_døwpixñ
,

39 
DBG_ªadpixñ
,

40 
DBG_døwhlöe
,

41 
DBG_døwvlöe
,

42 
DBG_fûÃe˘
,

43 
gí_f⁄ts
,

44 
DBG_blô
,

45 
NULL
,

46 
NULL
,

47 
NULL
,

48 
gí_Æloˇãmemgc
,

49 
NULL
,

50 
NULL


53 
	#¥ötd
(
_a
)

	)

55 
PSD


56 
	$DBG_›í
(
PSD
 
psd
)

59 
psd
->
xªs
 =Ösd->
xvúåes
 = 640;

60 
psd
->
yªs
 =Ösd->
yvúåes
 = 480;

61 
psd
->
∂™es
 = 4;

62 
psd
->
bµ
 = 4;

63 
psd
->
ncﬁ‹s
 = 16;

64 
psd
->
pixty≥
 = 
MWPF_PALETTE
;

65 
psd
->
Êags
 = 
PSF_SCREEN
;

67  
psd
;

68 
	}
}

71 
	$DBG_˛o£
(
PSD
 
psd
)

73 
	`¥ötd
("DBG_close()\n");

74 
	}
}

77 
	$DBG_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
)

79 
psi
->
rows
 = 
psd
->
yvúåes
;

80 
psi
->
cﬁs
 = 
psd
->
xvúåes
;

81 
psi
->
∂™es
 = 
psd
->planes;

82 
psi
->
bµ
 = 
psd
->bpp;

83 
psi
->
ncﬁ‹s
 = 
psd
->ncolors;

84 
psi
->
pixty≥
 = 
psd
->pixtype;

85 
psi
->
f⁄ts
 = 1;

88 
psi
->
xdpcm
 = 27;

89 
psi
->
ydpcm
 = 27;

90 
	`¥ötd
("DBG_getscreeninfo()\n");

91 
	}
}

94 
	$DBG_£çÆëã
(
PSD
 
psd
,
fú°
,
cou¡
,
MWPALENTRY
 *
∑l
)

96 
	`¥ötd
("DBG_setpalette()\n");

97 
	}
}

100 
	$DBG_døwpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

102 
	`¥ötd
("DBG_drawpixel()\n");

103 
	}
}

105 
MWPIXELVAL


106 
	$DBG_ªadpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
)

108 
	`¥ötd
("DBG_readpixel()\n");

109 
	}
}

113 
	$DBG_døwhlöe
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

115 
	`¥ötd
("DBG_drawhline()\n");

116 
	}
}

120 
	$DBG_døwvlöe
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

122 
	`¥ötd
("DBG_drawvline()\n");

123 
	}
}

126 
	$DBG_fûÃe˘
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
y1
, MWCOORD 
x2
, MWCOORD 
y2
,

127 
MWPIXELVAL
 
c
)

129 
	`¥ötd
("DBG_fillrect()\n");

130 
	}
}

132 
	$DBG_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

133 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

135 
	`¥ötd
("DBG_blit()\n");

136 
	}
}

	@drivers/scr_djgr.c

17 
	~<°dio.h
>

18 
	~"devi˚.h
"

19 
	~"gíf⁄t.h
"

21 
	~<grx20.h
>

24 
PSD
 
DJGR_›í
(PSD 
psd
);

25 
DJGR_˛o£
(
PSD
 
psd
);

26 
DJGR_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
);

27 
DJGR_£çÆëã
(
PSD
 
psd
,
fú°
,
cou¡
,
MWPALENTRY
 *
∑l
);

28 
DJGR_døwpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
);

29 
MWPIXELVAL
 
DJGR_ªadpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
);

30 
DJGR_døwhlöe
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
);

31 
DJGR_døwvlöe
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
);

32 
DJGR_fûÃe˘
(
PSD
 
psd
,
MWCOORD
 
x1
,MWCOORD 
y1
,MWCOORD 
x2
,MWCOORD 
y2
,
MWPIXELVAL
 
c
);

33 
DJGR_blô
(
PSD
 
d°psd
,
MWCOORD
 
de°x
,MWCOORD 
de°y
,MWCOORD 
w
,

34 
MWCOORD
 
h
,
PSD
 
§˝sd
,MWCOORD 
§cx
,MWCOORD 
§cy
,
›
);

35 
PSD
 
DJGR_Æloˇãmemgc
(PSD 
psd
);

37 
SCREENDEVICE
 
	gs¸dev
 = {

38 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
NULL
,

39 
DJGR_›í
,

40 
DJGR_˛o£
,

41 
DJGR_gës¸ìnöfo
,

42 
DJGR_£çÆëã
,

43 
DJGR_døwpixñ
,

44 
DJGR_ªadpixñ
,

45 
DJGR_døwhlöe
,

46 
DJGR_døwvlöe
,

47 
DJGR_fûÃe˘
,

48 
gí_f⁄ts
,

49 
DJGR_blô
,

50 
NULL
,

51 
NULL
,

52 
NULL
,

53 
DJGR_Æloˇãmemgc
,

54 
NULL
,

55 
NULL


58 
gr_mode
;

64 
PSD


65 
	$DJGR_›í
(
PSD
 
psd
)

67 
x
;

68 
y
;

69 
c
;

70 
GrVideoMode
 *
md_öfo
;

72 
x
 = 640;

73 
y
 = 480;

74 
c
 = 256;

76 
	`GrSëMode
(
GR_width_height_cﬁ‹_gøphics
,
x
,
y
,
c
);

78 
md_öfo
 = (
GrVideoMode
 *Ë
	`GrCuºítVideoMode
();

80 
psd
->
xªs
 =Ösd->
xvúåes
 = 
	`GrS¸ìnX
();

81 
psd
->
yªs
 =Ösd->
yvúåes
 = 
	`GrS¸ìnY
();

82 
psd
->
löñí
 = 
md_öfo
->
löeoff£t
;

83 
psd
->
∂™es
 = 1;

84 
psd
->
bµ
 = 
md_öfo
->bpp;

85 
psd
->
ncﬁ‹s
 = 
	`GrNumCﬁ‹s
();

86 
psd
->
Êags
 = 
PSF_SCREEN
;

87 
psd
->
addr
 = 0;

90 
psd
->
pixty≥
 = 
MWPF_PALETTE
;

92  
psd
;

93 
	}
}

99 
	$DJGR_˛o£
(
PSD
 
psd
)

101 
	`GrSëMode
(
GR_deÁu…_ãxt
);

102 
	}
}

108 
	$DJGR_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
)

110 
psi
->
rows
 = 
psd
->
yvúåes
;

111 
psi
->
cﬁs
 = 
psd
->
xvúåes
;

112 
psi
->
∂™es
 = 
psd
->planes;

113 
psi
->
bµ
 = 
psd
->bpp;

114 
psi
->
ncﬁ‹s
 = 
psd
->ncolors;

115 
psi
->
pixty≥
 = 
psd
->pixtype;

116 
psi
->
f⁄ts
 = 
NUMBER_FONTS
;

118 if(
s¸dev
.
yvúåes
 > 480) {

120 
psi
->
xdpcm
 = 33;

121 
psi
->
ydpcm
 = 33;

122 } if(
s¸dev
.
yvúåes
 > 350) {

124 
psi
->
xdpcm
 = 27;

125 
psi
->
ydpcm
 = 27;

128 
psi
->
xdpcm
 = 27;

129 
psi
->
ydpcm
 = 19;

131 
	}
}

137 
	$DJGR_£çÆëã
(
PSD
 
psd
,
fú°
,
cou¡
,
MWPALENTRY
 *
∑l
)

139 
fú°
 < 256 && 
cou¡
-- > 0) {

140 
	`GrSëCﬁ‹
(
fú°
++, 
∑l
->
r
,ÖÆ->
g
,ÖÆ->
b
);

141 ++
∑l
;

143 
	}
}

149 
	$DJGR_døwpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

151 
	`GrPlŸ
(
x
, 
y
, 
c
);

152 
	}
}

157 
MWPIXELVAL


158 
	$DJGR_ªadpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
)

160  
	`GrPixñ
(
x
, 
y
);

161 
	}
}

167 
	$DJGR_døwhlöe
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

169 
	`GrHLöe
(
x1
, 
x2
, 
y
, 
c
);

170 
	}
}

176 
	$DJGR_døwvlöe
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

178 
	`GrVLöe
(
x
, 
y1
, 
y2
, 
c
);

179 
	}
}

185 
	$DJGR_fûÃe˘
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
y1
, MWCOORD 
x2
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

187 
	`GrFûÀdBox
(
x1
, 
y1
, 
x2
, 
y2
, 
c
);

188 
	}
}

194 
	$DJGR_blô
(
PSD
 
d°psd
,
MWCOORD
 
de°x
,MWCOORD 
de°y
,MWCOORD 
w
,MWCOORD 
h
,

195 
PSD
 
§˝sd
,
MWCOORD
 
§cx
,MWCOORD 
§cy
,
›
)

198 
	}
}

201 
PSD


202 
	$DJGR_Æloˇãmemgc
(
PSD
 
psd
)

205  
NULL
;

206 
	}
}

	@drivers/scr_ecos.c

14 
	#_GNU_SOURCE
 1

	)

15 
	~<as£π.h
>

16 
	~<f˙é.h
>

17 
	~<limôs.h
>

18 
	~<cyg/hÆ/drv_≠i.h
>

19 
	~<cyg/io/io.h
>

20 
	~<°d¨g.h
>

21 
	~<°dio.h
>

22 
	~<°dlib.h
>

23 
	~<sys/°©.h
>

24 
	~<sys/ty≥s.h
>

25 
	~<uni°d.h
>

26 
	~"devi˚.h
"

27 
	~"gíf⁄t.h
"

28 
	~"gímem.h
"

29 
	~"fb.h
"

30 
	~<cyg/hÆ/lcd_suµ‹t.h
>

31 
	~<cyg/ö‰a/düg.h
>

33 
PSD
 
fb_›í
(PSD 
psd
);

34 
fb_˛o£
(
PSD
 
psd
);

35 
fb_£çÆëã
(
PSD
 
psd
,
fú°
, 
cou¡
, 
MWPALENTRY
 *
∑Àâe
);

36 
gí_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
);

38 
SCREENDEVICE
 
	gs¸dev
 = {

39 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
NULL
,

40 
fb_›í
,

41 
fb_˛o£
,

42 
gí_gës¸ìnöfo
,

43 
fb_£çÆëã
,

44 
NULL
,

45 
NULL
,

46 
NULL
,

47 
NULL
,

48 
NULL
,

49 
gí_f⁄ts
,

50 
NULL
,

51 
NULL
,

52 
NULL
,

53 
NULL
,

54 
gí_Æloˇãmemgc
,

55 
fb_m≠memgc
,

56 
gí_‰ìmemgc


60 
	g°©us
;

62 
	gßved_ªd
[256];

63 
	gßved_gªí
[256];

64 
	gßved_blue
[256];

66 #i‡
PORTRAIT


67 
	ggr_p‹åaômode
 = 
PORTRAIT
;

71 
£t_dúe˘cﬁ‹_∑Àâe
(
PSD
 
psd
);

74 
PSD


75 
	$fb_›í
(
PSD
 
psd
)

77 
PSUBDRIVER
 
subdrivî
;

78 
lcd_öfo
 
li
;

80 
	`as£π
(
°©us
 < 2);

83 
	`lcd_öô
(16);

84 
	`lcd_gëöfo
(&
li
);

86 
psd
->
xªs
 =Ösd->
xvúåes
 = 
li
.
width
;

87 
psd
->
yªs
 =Ösd->
yvúåes
 = 
li
.
height
;

88 #i‡
PORTRAIT


96 
psd
->
∂™es
 = 1;

97 
psd
->
∂™es
 = 0;

99 
psd
->
bµ
 = 
li
.bpp;

100 
psd
->
ncﬁ‹s
 = (psd->
bµ
 >= 24)? (1 << 24): (1 <<Ösd->bpp);

103 
psd
->
löñí
 = 
li
.
æí
;

104 
psd
->
size
 = 0;

106 
psd
->
Êags
 = 
PSF_SCREEN
 | 
PSF_HAVEBLIT
;

107 i‡(
psd
->
bµ
 == 16)

108 
psd
->
Êags
 |
PSF_HAVEOP_COPY
;

110 #i‡
PORTRAIT


113 
psd
->
Êags
 |
PSF_PORTRAIT
;

116 
psd
->
xvúåes
 =Ösd->
yªs
;

117 
psd
->
yvúåes
 =Ösd->
xªs
;

122 
li
.
ty≥
) {

123 
FB_TRUE_RGB565
:

124 
psd
->
pixty≥
 = 
MWPF_TRUECOLOR565
;

127 
	`EPRINTF
("Unsuµ‹ãd di•œyÅy≥: %d\n", 
li
.
ty≥
);

128 
Áû
;

132 
psd
->
bµ
) {

134 
psd
->
pixty≥
 = 
MWPF_TRUECOLOR332
;

137 
psd
->
pixty≥
 = 
MWPF_TRUECOLOR565
;

140 
psd
->
pixty≥
 = 
MWPF_TRUECOLOR888
;

143 
psd
->
pixty≥
 = 
MWPF_TRUECOLOR0888
;

146 
	`EPRINTF
(

148 
psd
->
ncﬁ‹s
,Ösd->
bµ
);

149 
Áû
;

151 } 
psd
->
pixty≥
 = 
MWPF_PALETTE
;

154 
	`düg_¥ötf
("%dx%dx%dÜöñí %dÅy≥ %d bµ %d\n", 
psd
->
xªs
,

155 
psd
->
yªs
,Ösd->
ncﬁ‹s
,Ösd->
löñí
, 
li
.
ty≥
,Ösd->
bµ
);

158 
subdrivî
 = 
	`£À˘_fb_subdrivî
(
psd
);

159 i‡(!
subdrivî
) {

160 
	`EPRINTF
("Nÿdrivî f‹ s¸ìn\n", 
psd
->
bµ
);

161 
Áû
;

168 if(!
	`£t_subdrivî
(
psd
, 
subdrivî
, 
TRUE
)) {

169 
	`EPRINTF
("Drivî inôülizêÁûed\n", 
psd
->
bµ
);

170 
Áû
;

173 #i‡
PORTRAIT


174 if(
psd
->
Êags
 & 
PSF_PORTRAIT
) {

176 
_subdrivî
 = 
subdrivî
;

179 
	`£t_subdrivî
(
psd
, &
fbp‹åaô
, 
FALSE
);

183 
psd
->
addr
 = 
li
.
fb
;

184 if(
psd
->
addr
 =
NULL
 ||Ösd->addr == (*)-1) {

186 
Áû
;

191 
	`io˘l_gë∑Àâe
(0, 16, 
ßved_ªd
, 
ßved_gªí
, 
ßved_blue
);

194 if(
visuÆ
 =
FB_VISUAL_DIRECTCOLOR
)

195 
	`£t_dúe˘cﬁ‹_∑Àâe
(
psd
);

198 
°©us
 = 2;

199  
psd
;

201 
Áû
:

202  
NULL
;

203 
	}
}

207 
	$fb_˛o£
(
PSD
 
psd
)

209 
	`¥ötf
("%†- NOT IMPLEMENTED\n", 
__FUNCTION__
);

211 
ây
;

214 if(
°©us
 != 2)

216 
°©us
 = 1;

219 
	`io˘l_£çÆëã
(0, 256, 
ßved_ªd
, 
ßved_gªí
, 
ßved_blue
);

225 
	`˛o£
(
fb
);

227 
	}
}

231 
	$£t_dúe˘cﬁ‹_∑Àâe
(
PSD
 
psd
)

233 
	`¥ötf
("%†- NOT IMPLEMENTED\n", 
__FUNCTION__
); 1) ;

235 
i
;

236 
r
[256], 
g
[256], 
b
[256];

239 if(
psd
->
bµ
 == 16) {

241 
i
=0; i<32; ++i) {

246 
r
[
i
] = 
g
[i] = 
b
[i] = (i<<11);

251 
	`io˘l_£çÆëã
(0, 32, 
r
, 
g
, 
b
);

254 
i
=0; i<256; ++i)

255 
r
[
i
] = i<<8;

256 
	`io˘l_£çÆëã
(0, 256, 
r
,Ñ,Ñ);

259 
	}
}

261 
	gÁde
 = 100;

265 
	$fb_£çÆëã
(
PSD
 
psd
,
fú°
, 
cou¡
, 
MWPALENTRY
 *
∑Àâe
)

267 
	`¥ötf
("%†- NOT IMPLEMENTED\n", 
__FUNCTION__
); 1) ;

269 
i
;

270 
ªd
[
cou¡
];

271 
gªí
[
cou¡
];

272 
blue
[
cou¡
];

275 
i
=0; i < 
cou¡
; i++) {

276 
MWPALENTRY
 *
p
 = &
∑Àâe
[
i
];

282 
ªd
[
i
] = (
p
->
r
 * 
Áde
 / 100) << 8;

283 
gªí
[
i
] = (
p
->
g
 * 
Áde
 / 100) << 8;

284 
blue
[
i
] = (
p
->
b
 * 
Áde
 / 100) << 8;

286 
	`io˘l_£çÆëã
(
fú°
, 
cou¡
, 
ªd
, 
gªí
, 
blue
);

288 
	}
}

292 
	$io˘l_gë∑Àâe
(
°¨t
, 
Àn
, *
ªd
, *
gªí
, *
blue
)

294 
	`¥ötf
("%†- NOT IMPLEMENTED\n", 
__FUNCTION__
); 1) ;

296 
fb_cm≠
 
cm≠
;

297 
cyg_uöt32
 
sz
 = (
cm≠
);

299 
cm≠
.
°¨t
 = start;

300 
cm≠
.
Àn
 =Üen;

301 
cm≠
.
ªd
 =Ñed;

302 
cm≠
.
gªí
 = green;

303 
cm≠
.
blue
 = blue;

304 
cm≠
.
å™•
 = 
NULL
;

306 
	`cyg_io_gë_c⁄fig
–
fb_h™dÀ
, 
CYG_IO_GET_CONFIG_FB_PALETTE
, &
cm≠
, &
sz
 );

309 
	}
}

313 
	$io˘l_£çÆëã
(
°¨t
, 
Àn
, *
ªd
, *
gªí
, *
blue
)

315 
	`¥ötf
("%†- NOT IMPLEMENTED\n", 
__FUNCTION__
); 1) ;

317 
fb_cm≠
 
cm≠
;

318 
cyg_uöt32
 
sz
 = (
cm≠
);

320 
cm≠
.
°¨t
 = start;

321 
cm≠
.
Àn
 =Üen;

322 
cm≠
.
ªd
 =Ñed;

323 
cm≠
.
gªí
 = green;

324 
cm≠
.
blue
 = blue;

325 
cm≠
.
å™•
 = 
NULL
;

327 
	`cyg_io_£t_c⁄fig
–
fb_h™dÀ
, 
CYG_IO_SET_CONFIG_FB_PALETTE
, &
cm≠
, &
sz
 );

330 
	}
}

334 
	$£tÁdñevñ
(
PSD
 
psd
, 
f
)

336 
	`¥ötf
("%†- NOT IMPLEMENTED\n", 
__FUNCTION__
); 1) ;

338 
i
;

339 
r
[256], 
g
[256], 
b
[256];

340 
MWPALENTRY
 
gr_∑Àâe
[256];

342 if(
psd
->
pixty≥
 !
MWPF_PALETTE
)

345 
Áde
 = 
f
;

346 if(
Áde
 > 100)

347 
Áde
 = 100;

348 
i
=0; i<256; ++i) {

349 
r
[
i
] = (
gr_∑Àâe
[i].∏* 
Áde
 / 100) << 8;

350 
g
[
i
] = (
gr_∑Àâe
[i].g * 
Áde
 / 100) << 8;

351 
b
[
i
] = (
gr_∑Àâe
[i].b * 
Áde
 / 100) << 8;

353 
	`io˘l_£çÆëã
(0, 256, 
r
, 
g
, 
b
);

355 
	}
}

358 
	$gí_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
)

360 
psi
->
rows
 = 
psd
->
yvúåes
;

361 
psi
->
cﬁs
 = 
psd
->
xvúåes
;

362 
psi
->
∂™es
 = 
psd
->planes;

363 
psi
->
bµ
 = 
psd
->bpp;

364 
psi
->
ncﬁ‹s
 = 
psd
->ncolors;

365 
psi
->
pixty≥
 = 
psd
->pixtype;

366 
psi
->
f⁄ts
 = 
NUMBER_FONTS
;

369 if(
psd
->
yvúåes
 > 480) {

371 
psi
->
xdpcm
 = 33;

372 
psi
->
ydpcm
 = 33;

373 } if(
psd
->
yvúåes
 > 350) {

375 
psi
->
xdpcm
 = 27;

376 
psi
->
ydpcm
 = 27;

379 
psi
->
xdpcm
 = 27;

380 
psi
->
ydpcm
 = 19;

383 
psi
->
ydpcm
 = 42;

384 
psi
->
xdpcm
 = 38;

386 
	}
}

	@drivers/scr_em84xx.c

21 
	~<°dio.h
>

22 
	~<°dlib.h
>

23 
	~<°rög.h
>

24 
	~<±hªad.h
>

25 
	~<uni°d.h
>

27 
	~"devi˚.h
"

28 
	~"gíf⁄t.h
"

29 
	~"gímem.h
"

31 
	#_DEFINE_FMP_TYPES_


	)

32 
	~"fmp.h
"

34 
	#WIDTH
 720

	)

35 
	#HEIGHT
 480

	)

36 
	tLONG
;

37 
	tULONG
;

38 * 
	tPBYTE
;

40 
	#IID_IOSD
 0x00000000

	)

42 
	sègOSD_WND


44 
LONG
 
	mx
;

45 
LONG
 
	my
;

46 
LONG
 
	mw
;

47 
LONG
 
	mh
;

48 } 
	tOSD_WND
;

50 
	sègIOsd


52 
ègIOsdVtbl
 *
	mÕVtbl
;

53 } 
	tIOsd
;

55 
	sègIOsdVtbl


57 
ULONG
 (*
On
)(
IOsd
 *
	mThis
);

58 
ULONG
 (*
Off
)(
IOsd
 *
	mThis
);

59 
ULONG
 (*
Flush
)(
IOsd
 *
	mThis
);

60 
ULONG
 (*
Wrôe
)(
IOsd
 *
	mThis
, 
BYTE
 *
	mpBuf
, ULONG 
	mBufLí
);

61 
ULONG
 (*
SëDe°
)(
IOsd
 *
	mThis
, 
OSD_WND
 *
	mpWnd
);

62 
ULONG
 (*
SëHli
)(
IOsd
 *
	mThis
, 
OSD_WND
 *
	mpWnd
);

63 
ULONG
 (*
ShowS∂ash
)(
IOsd
 *
	mThis
, 
PBYTE
 
	mbuf
, 
DWORD
 
	mwidth
, DWORD 
	mheight
);

64 
ULONG
 (*
SëFømeBuf„r
)(
IOsd
 *
	mThis
, 
DWORD
 
	mPhysiˇlAddªss
, DWORD 
	mLígth
);

65 
ULONG
 (*
ShowS∂ashEx
)(
IOsd
 *
	mThis
, 
PBYTE
 
	mbuf
, 
DWORD
 
	mwidth
, DWORD 
	mheight
, 
	mx
, 
	my
);

66 } 
	tIOsdVtbl
;

68 * 
	tADDR8
;

70 
IOsd
 *
	gpIOsd
 = 
NULL
;

71 
	gyuv_d©a
[
WIDTH
*
HEIGHT
*3/2];

72 
	grgb_d©a
[
WIDTH
*
HEIGHT
*3];

75 
PSD
 
EM8400_›í
(PSD 
psd
);

76 
EM8400_˛o£
(
PSD
 
psd
);

77 
EM8400_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
);;

78 
EM8400_£çÆëã
(
PSD
 
psd
,
fú°
,
cou¡
,
MWPALENTRY
 *
∑l
);

79 
EM8400_døwpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
);

80 
MWPIXELVAL
 
EM8400_ªadpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
);

81 
EM8400_døwhlöe
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
);

82 
EM8400_døwvlöe
(
PSD
 
psd
,
MWCOORD
 
x
,MWCOORD 
y1
,MWCOORD 
y2
,
MWPIXELVAL
 
c
);

83 
EM8400_fûÃe˘
(
PSD
 
psd
,
MWCOORD
 
x1
,MWCOORD 
y1
,MWCOORD 
x2
,MWCOORD 
y2
,

84 
MWPIXELVAL
 
c
);

85 
EM8400_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

86 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
);

87 
MWBOOL
 
EM8400_m≠memgc
(
PSD
 
mempsd
,
MWCOORD
 
w
,MWCOORD 
h
,
∂™es
,
bµ
,

88 
löñí
,
size
,*
addr
);

90 
SCREENDEVICE
 
	gs¸dev
 = {

91 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
NULL
,

92 
EM8400_›í
,

93 
EM8400_˛o£
,

94 
EM8400_gës¸ìnöfo
,

95 
EM8400_£çÆëã
,

96 
EM8400_døwpixñ
,

97 
EM8400_ªadpixñ
,

98 
EM8400_døwhlöe
,

99 
EM8400_døwvlöe
,

100 
EM8400_fûÃe˘
,

101 
gí_f⁄ts
,

102 
EM8400_blô
,

103 
NULL
,

104 
NULL
,

105 
NULL
,

106 
gí_Æloˇãmemgc
,

107 
EM8400_m≠memgc
,

108 
gí_‰ìmemgc


111 
	#¥ötd
(
_a
)

	)

113 
	#DRAWON
 
døw_lock
++;if(
debug
)
	`Ârötf
(
°dîr
, "ENTER %s\n", 
__PRETTY_FUNCTION__
);

	)

114 
	#DRAWOFF
 
døw_lock
--;if(
debug
)
	`Ârötf
(
°dîr
, "LEAVE %s\n", 
__PRETTY_FUNCTION__
);

	)

116 #i‚de‡
USE_FAST_UPDATE


117 
±hªad_t
 
	gdi•œy_thªad
;

118 
±hªad_c⁄d_t
 
	gdi•œy_upd©e_c⁄d
 = 
PTHREAD_COND_INITIALIZER
;

119 
±hªad_muãx_t
 
	gdi•œy_upd©e_muãx
 = 
PTHREAD_MUTEX_INITIALIZER
;

121 
	gquô
 = 0;

122 
	gdebug
 = 0;

123 
	gdøw_lock
 = 0;

125 
	$show_•œsh
(
ux
, 
uy
, 
uw
, 
uh
)

127 
x
, 
y
;

128 *
ùå
, *
›åy
, *
›åuv
;

129 
r1
, 
g1
, 
b1
, 
y1
, 
y2
=0, 
u
=0, 
v
=0, 
u0
=0, 
u1
, 
u2
, 
v0
=0, 
v1
, 
v2
;

130 
r2
, 
g2
, 
b2
;

132 i‡(
pIOsd
 =
NULL
) ;

134 #ifde‡
USE_FAST_UPDATE


135 i‡(
døw_lock
 != 1) ;

138 
uw
+=1; 
uh
+=1;

139 i‡(
uw
 + 
ux
 > 
WIDTH
) uw = WIDTH-ux;

140 i‡(
uh
 + 
uy
 > 
HEIGHT
) uh = HEIGHT-uy;

141 
›åy
 = 
yuv_d©a
;

142 
›åuv
 = 
yuv_d©a
 + 
uw
*
uh
;

143 
ùå
 = 
rgb_d©a
 + (
ux
+
uy
*
WIDTH
)*3;

145 
y
 = 
uy
; y < uy+
uh
; y++) {

146 
x
 = 
ux
; x < ux+
uw
; x+=2) {

147 
r1
 = *
ùå
++;

148 
g1
 = *
ùå
++;

149 
b1
 = *
ùå
++;

150 
r2
 = *
ùå
++;

151 
g2
 = *
ùå
++;

152 
b2
 = *
ùå
++;

154 
y1
 = 16829 * 
r1
 + 33039 * 
g1
 + 6416 * 
b1
 + (0xfff‡& 
y2
);

155 
y2
 = 16829 * 
r2
 + 33039 * 
g2
 + 6416 * 
b2
 + (0xfff‡& 
y1
);

157 *
›åy
++ = (
y1
 >> 16) + 16;

158 *
›åy
++ = (
y2
 >> 16) + 16;

160 i‡(!(
y
 % 2)) {

161 
u1
 = -4853 * 
r1
 - 9530 * 
g1
 + 14383 * 
b1
;

162 
v1
 = 14386 * 
r1
 - 12046 * 
g1
 - 2340 * 
b1
;

163 
u2
 = -2426 * 
r2
 - 4765 * 
g2
 + 7191 * 
b2
;

164 
v2
 = 7193 * 
r2
 - 6023 * 
g2
 - 1170 * 
b2
;

165 
u
 = 
u0
 + 
u1
 + 
u2
 + (0xffff & u);

166 
v
 = 
v0
 + 
v1
 + 
v2
 + (0xffff & v);

167 
u0
 = 
u2
;

168 
v0
 = 
v2
;

171 *
›åuv
++ = (
u
 >> 16) + 128;

172 *
›åuv
++ = (
v
 >> 16) + 128;

175 
ùå
 +(
WIDTH
-
uw
)*6;

177 
pIOsd
->
ÕVtbl
->
	`ShowS∂ashEx
’IOsd, 
yuv_d©a
, 
uw
, 
uh
, 
ux
, 
uy
);

178 
	}
}

180 *
	$thªad_lo›
(*
d©a
)

182 !
quô
) {

183 
	`±hªad_c⁄d_waô
(&
di•œy_upd©e_c⁄d
, &
di•œy_upd©e_muãx
);

184 
	`show_•œsh
(0,0,
WIDTH
-1,
HEIGHT
-1);

185 
	`u¶ìp
(10);

188 
	}
}

190 
PSD


191 
	$EM8400_›í
(
PSD
 
psd
)

193 
DWORD
 
tv_£âög
, 
ﬁd_£âög
;

196 
psd
->
xªs
 =Ösd->
xvúåes
 = 
WIDTH
;

197 
psd
->
yªs
 =Ösd->
yvúåes
 = 
HEIGHT
;

198 
psd
->
∂™es
 = 1;

199 
psd
->
bµ
 = 24;

200 
psd
->
ncﬁ‹s
 = 1<<24;

201 
psd
->
pixty≥
 = 
MWPF_TRUECOLOR888
;

202 
psd
->
Êags
 = 
PSF_SCREEN
 | 
PSF_HAVEBLIT
;

203 
psd
->
löñí
 = 
WIDTH
;

204 
psd
->
addr
 = 
rgb_d©a
;

206 
	`mem£t
(
rgb_d©a
, 0x00, 
WIDTH
*
HEIGHT
*3);

207 
	`mem£t
(
yuv_d©a
, 0x00, 
WIDTH
*
HEIGHT
*3/2);

208 
	`MPEGDrivîE¡ry
(
NO_DRIVE
);

213 
	`FMPO≥n
(
FMPF_SYSTEM
, 32767, 8, 
NULL
, 0);

215 
ﬁd_£âög
 = 
	`FMPGë
(
FMPI_VIDEOOUT
);

216 
tv_£âög
 = 
ﬁd_£âög
&(~
FMPV_VIDEOOUT_STANDARDTV_MASK
);

217 
tv_£âög
 |
FMPV_VIDEOOUT_PAL
;

218 
	`FMPSë
(
FMPI_VIDEOOUT
,
tv_£âög
);

219 
	`FMPClo£
();

221 i‡(
	`FMPQuîyI¡îÁ˚
(
IID_IOSD
, (**)&
pIOsd
)) {

222 
	`Ârötf
(
°dîr
, "not open\n");

223 
pIOsd
 = 
NULL
;

226 #ifde‡
USE_FAST_UPDATE


227 
	`show_•œsh
(0,0,
WIDTH
,
HEIGHT
);

229 
	`±hªad_¸óã
(&
di•œy_thªad
, 
NULL
, 
thªad_lo›
, NULL);

230 
	`±hªad_c⁄d_sig«l
(&
di•œy_upd©e_c⁄d
);

232  
psd
;

233 
	}
}

236 
	$EM8400_˛o£
(
PSD
 
psd
)

238 
quô
 = 1;

239 #i‚de‡
USE_FAST_UPDATE


240 
	`±hªad_c⁄d_sig«l
(&
di•œy_upd©e_c⁄d
);

241 
	`±hªad_joö
(
di•œy_thªad
, 
NULL
);

243 
	`MPEGDrivîU∆ﬂd
();

244 
	`¥ötd
("EM8400_close()\n");

245 
	}
}

248 
	$EM8400_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
)

250 
psi
->
rows
 = 
psd
->
yvúåes
;

251 
psi
->
cﬁs
 = 
psd
->
xvúåes
;

252 
psi
->
∂™es
 = 
psd
->planes;

253 
psi
->
bµ
 = 
psd
->bpp;

254 
psi
->
ncﬁ‹s
 = 
psd
->ncolors;

255 
psi
->
pixty≥
 = 
psd
->pixtype;

256 
psi
->
f⁄ts
 = 1;

259 
psi
->
xdpcm
 = 27;

260 
psi
->
ydpcm
 = 27;

261 
	`¥ötd
("EM8400_getscreeninfo()\n");

262 
	}
}

265 
	$EM8400_£çÆëã
(
PSD
 
psd
,
fú°
,
cou¡
,
MWPALENTRY
 *
∑l
)

267 
	`¥ötd
("EM8400_setpalette()\n");

268 
	}
}

271 
	$EM8400_døwpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

273 
ADDR8
 
addr
 = 
psd
->addr;

274 
MWUCHAR
 
r
, 
g
, 
b
;

276 
DRAWON
;

277 
r
 = 
	`PIXEL888RED
(
c
);

278 
g
 = 
	`PIXEL888GREEN
(
c
);

279 
b
 = 
	`PIXEL888BLUE
(
c
);

281 
addr
 +(
x
+
y
*
psd
->
löñí
) * 3;

283 *
addr
++ = 
r
;

284 *
addr
++ = 
g
;

285 *
addr
++ = 
b
;

286 #ifde‡
USE_FAST_UPDATE


287 
	`show_•œsh
(
x
, 
y
, 1, 1);

289 
	`±hªad_c⁄d_sig«l
(&
di•œy_upd©e_c⁄d
);

291 
DRAWOFF
;

292 
	}
}

294 
MWPIXELVAL


295 
	$EM8400_ªadpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
)

297 
ADDR8
 
addr
 = 
psd
->addr;

299 
addr
 +(
x
+
y
*
psd
->
löñí
) * 3;

300  
	`RGB2PIXEL
(
addr
[0],áddr[1],áddr[2]);

301 
	}
}

305 
	$EM8400_døwhlöe
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

307 
ADDR8
 
addr
 = 
psd
->addr;

308 
MWUCHAR
 
r
, 
g
, 
b
;

309 #ifde‡
USE_FAST_UPDATE


310 
x
 = 
x1
;

313 
DRAWON
;

314 
r
 = 
	`PIXEL888RED
(
c
);

315 
g
 = 
	`PIXEL888GREEN
(
c
);

316 
b
 = 
	`PIXEL888BLUE
(
c
);

318 
addr
 +(
x1
+
y
*
psd
->
löñí
)*3;

320 
x1
++ <
x2
) {

321 *
addr
++ = 
r
;

322 *
addr
++ = 
g
;

323 *
addr
++ = 
b
;

325 #ifde‡
USE_FAST_UPDATE


326 
	`show_•œsh
(
x
, 
y
, 
x2
 - x, 1);

328 
	`±hªad_c⁄d_sig«l
(&
di•œy_upd©e_c⁄d
);

330 
DRAWOFF
;

331 
	}
}

336 
	$EM8400_døwvlöe
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

338 
ADDR8
 
addr
 = 
psd
->addr;

339 
löñí
 = 
psd
->linelen * 3;

340 
MWUCHAR
 
r
, 
g
, 
b
;

341 #ifde‡
USE_FAST_UPDATE


342 
y
 = 
y1
;

345 
DRAWON
;

346 
r
 = 
	`PIXEL888RED
(
c
);

347 
g
 = 
	`PIXEL888GREEN
(
c
);

348 
b
 = 
	`PIXEL888BLUE
(
c
);

350 
addr
 +(
x
+
y1
*
psd
->
löñí
)*3;

352 
y1
++ <
y2
) {

353 
addr
[0] = 
r
;

354 
addr
[1] = 
g
;

355 
addr
[2] = 
b
;

356 
addr
 +
löñí
;

358 #ifde‡
USE_FAST_UPDATE


359 
	`show_•œsh
(
x
, 
y
, 1, 
y2
 - y);

361 
	`±hªad_c⁄d_sig«l
(&
di•œy_upd©e_c⁄d
);

363 
DRAWOFF
;

364 
	}
}

367 
	$EM8400_fûÃe˘
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
y1
, MWCOORD 
x2
, MWCOORD 
y2
,

368 
MWPIXELVAL
 
c
)

370 #ifde‡
USE_FAST_UPDATE


371 
y
 = 
y1
;

373 
DRAWON
;

374 
y1
 <
y2
)

375 
psd
->
	`DøwH‹zLöe
’sd, 
x1
, 
x2
, 
y1
++, 
c
);

376 #ifde‡
USE_FAST_UPDATE


377 
	`show_•œsh
(
x1
, 
y
, 
x2
-x1, 
y2
-y);

379 
	`±hªad_c⁄d_sig«l
(&
di•œy_upd©e_c⁄d
);

381 
DRAWOFF
;

383 
	}
}

386 
	$EM8400_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

387 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

389 
ADDR8
 
d°
 = 
d°psd
->
addr
;

390 
ADDR8
 
§c
 = 
§˝sd
->
addr
;

391 
dlöñí
 = 
d°psd
->
löñí
 * 3;

392 
¶öñí
 = 
§˝sd
->
löñí
 * 3;

394 
DRAWON
;

395 
d°
 +(
d°x
+
d°y
*
d°psd
->
löñí
)*3;

396 
§c
 +(
§cx
+
§cy
*
§˝sd
->
löñí
)*3;

398 i‡(
§cy
 < 
d°y
) {

399 
§c
 +(
h
 - 1Ë* 
¶öñí
;

400 
d°
 +(
h
 - 1Ë* 
dlöñí
;

401 
¶öñí
 *= -1;

402 
dlöñí
 *= -1;

405 --
h
 >=0) {

406 
	`memmove
(
d°
, 
§c
, 
w
*3);

407 
d°
 +
dlöñí
;

408 
§c
 +
¶öñí
;

410 #ifde‡
USE_FAST_UPDATE


411 
	`show_•œsh
(
d°x
, 
d°y
, 
w
, 
h
);

413 
	`±hªad_c⁄d_sig«l
(&
di•œy_upd©e_c⁄d
);

415 
DRAWOFF
;

416 
	}
}

418 
MWBOOL


419 
	$EM8400_m≠memgc
(
PSD
 
mempsd
,
MWCOORD
 
w
,MWCOORD 
h
,
∂™es
,
bµ
,

420 
löñí
,
size
,*
addr
)

422 
SUBDRIVER
 
fblöór24
;

424 
	`öômemgc
(
mempsd
, 
w
, 
h
, 
∂™es
, 
bµ
, 
löñí
, 
size
, 
addr
);

427 i‡(!
	`£t_subdrivî
(
mempsd
, &
fblöór24
, 
TRUE
))

431 
	}
}

	@drivers/scr_fb.c

11 
	#_GNU_SOURCE
 1

	)

12 
	~<as£π.h
>

13 
	~<f˙é.h
>

14 
	~<limôs.h
>

15 
	~<löux/fb.h
>

16 
	~<löux/kd.h
>

17 
	~<löux/vt.h
>

18 
	~<°d¨g.h
>

19 
	~<°dio.h
>

20 
	~<°dlib.h
>

21 
	~<sys/io˘l.h
>

22 
	~<sys/mm™.h
>

23 
	~<sys/°©.h
>

24 
	~<sys/time.h
>

25 
	~<sys/ty≥s.h
>

26 
	~<uni°d.h
>

27 
	~"devi˚.h
"

28 
	~"gíf⁄t.h
"

29 
	~"gímem.h
"

30 
	~"fb.h
"

32 #ifde‡
ARCH_LINUX_SPARC


35 
	#EMBEDDEDPLANET
 0

	)

37 #i‚de‡
FB_TYPE_VGA_PLANES


38 
	#FB_TYPE_VGA_PLANES
 4

	)

41 
PSD
 
fb_›í
(PSD 
psd
);

42 
fb_˛o£
(
PSD
 
psd
);

43 
fb_£ç‹åaô
(
PSD
 
psd
, 
p‹åaômode
);

44 
fb_£çÆëã
(
PSD
 
psd
,
fú°
, 
cou¡
, 
MWPALENTRY
 *
∑Àâe
);

45 
gí_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
);

48 
SCREENDEVICE
 
	gs¸dev
 = {

49 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
NULL
,

50 
fb_›í
,

51 
fb_˛o£
,

52 
gí_gës¸ìnöfo
,

53 
fb_£çÆëã
,

54 
NULL
,

55 
NULL
,

56 
NULL
,

57 
NULL
,

58 
NULL
,

59 
gí_f⁄ts
,

60 
NULL
,

61 
NULL
,

62 
NULL
,

63 
NULL
,

64 
gí_Æloˇãmemgc
,

65 
fb_m≠memgc
,

66 
gí_‰ìmemgc
,

67 
NULL
,

68 
fb_£ç‹åaô


72 
	gfb
;

73 
	g°©us
;

74 
	gßved_ªd
[16];

75 
	gßved_gªí
[16];

76 
	gßved_blue
[16];

78 
SUBDRIVER
 
fbp‹åaô_À·
, 
fbp‹åaô_right
, 
fbp‹åaô_down
;

79 
PSUBDRIVER
 
	gpdrivîs
[4] = {

80 
NULL
, &
fbp‹åaô_À·
, &
fbp‹åaô_right
, &
fbp‹åaô_down


84 
£t_dúe˘cﬁ‹_∑Àâe
(
PSD
 
psd
);

87 
PSD


88 
	$fb_›í
(
PSD
 
psd
)

90 * 
ív
;

91 
ty≥
, 
visuÆ
;

92 
PSUBDRIVER
 
subdrivî
;

93 #i‡
HAVETEXTMODE


94 
ây
;

96 #i‡
EMBEDDEDPLANET


97 
ív
 = "/dev/lcd";

98 
fb
 = 
	`›í
(
ív
, 
O_RDWR
);

99 if(
fb
 < 0) {

100 
	`EPRINTF
("Eº‹ o≥nög %s: %m", 
ív
);

101  
NULL
;

104 
ty≥
 = 
FB_TYPE_PACKED_PIXELS
;

105 
visuÆ
 = 
FB_VISUAL_PSEUDOCOLOR
;

106 
psd
->
xªs
 =Ösd->
xvúåes
 = 640;

107 
psd
->
yªs
 =Ösd->
yvúåes
 = 480;

108 
psd
->
∂™es
 = 1;

109 
psd
->
bµ
 = 8;

111 
psd
->
löñí
 =Ösd->
xvúåes
;

112 
psd
->
ncﬁ‹s
 = (psd->
bµ
 >= 24)? (1 << 24): (1 <<Ösd->bpp);

113 
psd
->
size
 = 0;

115 i‡(
	`io˘l
(
fb
, 1, 0) < 0) {

116 
	`EPRINTF
("Error: can'tÉnable LCD");

117 
Áû
;

120 
fb_fix_s¸ìnöfo
 
fb_fix
;

121 
fb_v¨_s¸ìnöfo
 
fb_v¨
;

123 
	`as£π
(
°©us
 < 2);

126 if(!(
ív
 = 
	`gëív
("FRAMEBUFFER")))

127 
ív
 = "/dev/fb0";

128 
fb
 = 
	`›í
(
ív
, 
O_RDWR
);

129 if(
fb
 < 0) {

130 
	`EPRINTF
("Eº‹ o≥nög %s: %m. Check kî√»c⁄fig\n", 
ív
);

131  
NULL
;

133 if(
	`io˘l
(
fb
, 
FBIOGET_FSCREENINFO
, &
fb_fix
) == -1 ||

134 
	`io˘l
(
fb
, 
FBIOGET_VSCREENINFO
, &
fb_v¨
) == -1) {

135 
	`EPRINTF
("ErrorÑeading screen info: %m\n");

136 
Áû
;

139 
ty≥
 = 
fb_fix
.type;

140 
visuÆ
 = 
fb_fix
.visual;

142 
psd
->
p‹åaô
 = 
MWPORTRAIT_NONE
;

143 #ifde‡
ARCH_LINUX_SPARC


144 
psd
->
xªs
 =Ösd->
xvúåes
 = 
fb_v¨
.
xªs_vútuÆ
;

145 
psd
->
yªs
 =Ösd->
yvúåes
 = 
fb_v¨
.
yªs_vútuÆ
;

147 
psd
->
xªs
 =Ösd->
xvúåes
 = 
fb_v¨
.xres;

148 
psd
->
yªs
 =Ösd->
yvúåes
 = 
fb_v¨
.yres;

152 i‡(
ty≥
 =
FB_TYPE_VGA_PLANES
)

153 
psd
->
∂™es
 = 4;

154 i‡(
ty≥
 =
FB_TYPE_PACKED_PIXELS
)

155 
psd
->
∂™es
 = 1;

156 
psd
->
∂™es
 = 0;

158 
psd
->
bµ
 = 
fb_v¨
.
bôs_≥r_pixñ
;

159 
psd
->
ncﬁ‹s
 = (psd->
bµ
 >= 24)? (1 << 24): (1 <<Ösd->bpp);

162 
psd
->
löñí
 = 
fb_fix
.
löe_Àngth
;

163 
psd
->
size
 = 0;

166 
psd
->
Êags
 = 
PSF_SCREEN
 | 
PSF_HAVEBLIT
;

167 i‡(
psd
->
bµ
 == 16)

168 
psd
->
Êags
 |
PSF_HAVEOP_COPY
;

171 #i‚de‡
TPHELIO


172 if(
visuÆ
 =
FB_VISUAL_TRUECOLOR
 || visuÆ =
FB_VISUAL_DIRECTCOLOR
) {

173 
psd
->
bµ
) {

175 
psd
->
pixty≥
 = 
MWPF_TRUECOLOR332
;

178 i‡(
fb_v¨
.
gªí
.
Àngth
 == 5)

179 
psd
->
pixty≥
 = 
MWPF_TRUECOLOR555
;

181 
psd
->
pixty≥
 = 
MWPF_TRUECOLOR565
;

184 
psd
->
pixty≥
 = 
MWPF_TRUECOLOR888
;

187 
psd
->
pixty≥
 = 
MWPF_TRUECOLOR0888
;

188 #i‡!
EMBEDDEDPLANET


190 i‡(
fb_v¨
.
å™•
.
Àngth
 == 8)

191 
psd
->
pixty≥
 = 
MWPF_TRUECOLOR8888
;

195 
	`EPRINTF
(

197 
psd
->
ncﬁ‹s
,Ösd->
bµ
);

198 
Áû
;

202 
psd
->
pixty≥
 = 
MWPF_PALETTE
;

209 
subdrivî
 = 
	`£À˘_fb_subdrivî
(
psd
);

210 i‡(!
subdrivî
) {

211 
	`EPRINTF
("No driver for screenÅype %d visual %d bpp %d\n",

212 
ty≥
, 
visuÆ
, 
psd
->
bµ
);

213 
Áû
;

220 if(!
	`£t_subdrivî
(
psd
, 
subdrivî
, 
TRUE
)) {

221 
	`EPRINTF
("Driver initialize failedÅype %d visual %d bpp %d\n",

222 
ty≥
, 
visuÆ
, 
psd
->
bµ
);

223 
Áû
;

227 
pdrivîs
[0] = 
psd
->
‹gsubdrivî
 = 
subdrivî
;

229 #i‡
HAVETEXTMODE


231 
ây
 = 
	`›í
 ("/dev/ây0", 
O_RDWR
);

232 if(
ây
 < 0) {

233 
	`EPRINTF
("Error can't open /dev/tty0: %m\n");

234 
Áû
;

236 if(
	`io˘l
 (
ây
, 
KDSETMODE
, 
KD_GRAPHICS
) == -1) {

237 
	`EPRINTF
("Error setting graphics mode: %m\n");

238 
	`˛o£
(
ây
);

239 
Áû
;

241 
	`˛o£
(
ây
);

244 
psd
->
size
 = (psd->sizê+ 
	`gë∑gesize
 () - 1)

245 / 
	`gë∑gesize
 () * getpagesize ();

246 #ifde‡
ARCH_LINUX_SPARC


247 
	#CG3_MMAP_OFFSET
 0x4000000

	)

248 
	#CG6_RAM
 0x70016000

	)

249 
	#TCX_RAM8BIT
 0x00000000

	)

250 
	#TCX_RAM24BIT
 0x01000000

	)

251 
fb_fix
.
ac˚l
) {

252 
FB_ACCEL_SUN_CGTHREE
:

253 
psd
->
addr
 = 
	`mm≠
(
NULL
,Ösd->
size
, 
PROT_READ
|
PROT_WRITE
,
MAP_SHARED
,
fb
,
CG3_MMAP_OFFSET
);

255 
FB_ACCEL_SUN_CGSIX
:

256 
psd
->
addr
 = 
	`mm≠
(
NULL
,Ösd->
size
, 
PROT_READ
|
PROT_WRITE
,
MAP_SHARED
,
fb
,
CG6_RAM
);

258 
FB_ACCEL_SUN_TCX
:

259 
psd
->
addr
 = 
	`mm≠
(
NULL
,Ösd->
size
, 
PROT_READ
|
PROT_WRITE
,
MAP_SHARED
,
fb
,
TCX_RAM24BIT
);

262 
	`EPRINTF
("D⁄;àknow howÅÿmm≠ %†wôhác˚»%d\n", 
ív
, 
fb_fix
.
ac˚l
);

263 
Áû
;

266 
psd
->
addr
 = 
	`mm≠
(
NULL
,Ösd->
size
, 
PROT_READ
|
PROT_WRITE
,
MAP_SHARED
,
fb
,0);

268 if(
psd
->
addr
 =
NULL
 ||Ösd->addr == (*)-1) {

269 
	`EPRINTF
("Eº‹ mm≠ög %s: %m\n", 
ív
);

270 
Áû
;

274 
	`io˘l_gë∑Àâe
(0, 16, 
ßved_ªd
, 
ßved_gªí
, 
ßved_blue
);

277 if(
visuÆ
 =
FB_VISUAL_DIRECTCOLOR
)

278 
	`£t_dúe˘cﬁ‹_∑Àâe
(
psd
);

280 
°©us
 = 2;

281  
psd
;

283 
Áû
:

284 
	`˛o£
(
fb
);

285  
NULL
;

286 
	}
}

290 
	$fb_˛o£
(
PSD
 
psd
)

292 #i‡
HAVETEXTMODE


293 
ây
;

297 if(
°©us
 != 2)

299 
°©us
 = 1;

302 
	`io˘l_£çÆëã
(0, 16, 
ßved_ªd
, 
ßved_gªí
, 
ßved_blue
);

305 
	`munm≠
(
psd
->
addr
,Ösd->
size
);

307 #i‡
HAVETEXTMODE


309 
ây
 = 
	`›í
 ("/dev/ây0", 
O_RDWR
);

310 
	`io˘l
(
ây
, 
KDSETMODE
, 
KD_TEXT
);

311 
	`˛o£
(
ây
);

314 
	`˛o£
(
fb
);

315 
	}
}

318 
	$fb_£ç‹åaô
(
PSD
 
psd
, 
p‹åaômode
)

320 
psd
->
p‹åaô
 = 
p‹åaômode
;

323 i‡(
p‹åaômode
 & (
MWPORTRAIT_LEFT
|
MWPORTRAIT_RIGHT
)) {

325 
psd
->
xvúåes
 =Ösd->
yªs
;

326 
psd
->
yvúåes
 =Ösd->
xªs
;

329 
psd
->
xvúåes
 =Ösd->
xªs
;

330 
psd
->
yvúåes
 =Ösd->
yªs
;

333 i‡(
p‹åaômode
 =
MWPORTRAIT_DOWN
)

334 
p‹åaômode
 = 3;

335 
	`£t_subdrivî
(
psd
, 
pdrivîs
[
p‹åaômode
], 
FALSE
);

336 
	}
}

340 
	$£t_dúe˘cﬁ‹_∑Àâe
(
PSD
 
psd
)

342 
i
;

343 
r
[256];

346 if(
psd
->
bµ
 == 16) {

347 
i
=0; i<32; ++i)

348 
r
[
i
] = i<<11;

349 
	`io˘l_£çÆëã
(0, 32, 
r
,Ñ,Ñ);

352 
i
=0; i<256; ++i)

353 
r
[
i
] = i<<8;

354 
	`io˘l_£çÆëã
(0, 256, 
r
,Ñ,Ñ);

356 
	}
}

358 
	gÁde
 = 100;

362 
	$fb_£çÆëã
(
PSD
 
psd
,
fú°
, 
cou¡
, 
MWPALENTRY
 *
∑Àâe
)

364 
i
;

365 
ªd
[256];

366 
gªí
[256];

367 
blue
[256];

369 i‡(
cou¡
 > 256)

370 
cou¡
 = 256;

373 
i
=0; i < 
cou¡
; i++) {

374 
MWPALENTRY
 *
p
 = &
∑Àâe
[
i
];

380 
ªd
[
i
] = (
p
->
r
 * 
Áde
 / 100) << 8;

381 
gªí
[
i
] = (
p
->
g
 * 
Áde
 / 100) << 8;

382 
blue
[
i
] = (
p
->
b
 * 
Áde
 / 100) << 8;

384 
	`io˘l_£çÆëã
(
fú°
, 
cou¡
, 
ªd
, 
gªí
, 
blue
);

385 
	}
}

389 
	$io˘l_gë∑Àâe
(
°¨t
, 
Àn
, *
ªd
, *
gªí
, *
blue
)

391 #i‡
EMBEDDEDPLANET


392 
i
;

393 
cﬁ‹s
[256];

395 
	`io˘l
(
fb
, 4, 
cﬁ‹s
);

396 
i
 = 
°¨t
; ((ò- sèπË< 
Àn
) && (i < 256); i++) {

397 
ªd
[
i
 - 
°¨t
] = (
cﬁ‹s
[i] & 0xf00) << 4;

398 
gªí
[
i
 - 
°¨t
] = (
cﬁ‹s
[i] & 0x0f0) << 8;

399 
blue
[
i
 - 
°¨t
] = (
cﬁ‹s
[i] & 0x00f) << 12;

402 
fb_cm≠
 
cm≠
;

404 
cm≠
.
°¨t
 = start;

405 
cm≠
.
Àn
 =Üen;

406 
cm≠
.
ªd
 =Ñed;

407 
cm≠
.
gªí
 = green;

408 
cm≠
.
blue
 = blue;

409 
cm≠
.
å™•
 = 
NULL
;

411 
	`io˘l
(
fb
, 
FBIOGETCMAP
, &
cm≠
);

413 
	}
}

417 
	$io˘l_£çÆëã
(
°¨t
, 
Àn
, *
ªd
, *
gªí
, *
blue
)

419 #i‡
EMBEDDEDPLANET


420 
i
;

421 
cﬁ‹s
[256];

423 
	`io˘l
(
fb
, 4, 
cﬁ‹s
);

424 
i
 = 
°¨t
; ((ò- sèπË< 
Àn
) && (i < 256); i++) {

425 
cﬁ‹s
[
i
] = ((
ªd
[ò- 
°¨t
] & 0xf000) >> 4)

426 | ((
gªí
[
i
 - 
°¨t
] & 0xf000) >> 8)

427 | ((
blue
[
i
 - 
°¨t
] & 0xf000) >> 12);

429 
	`io˘l
(
fb
, 3, 
cﬁ‹s
);

431 
fb_cm≠
 
cm≠
;

433 
cm≠
.
°¨t
 = start;

434 
cm≠
.
Àn
 =Üen;

435 
cm≠
.
ªd
 =Ñed;

436 
cm≠
.
gªí
 = green;

437 
cm≠
.
blue
 = blue;

438 
cm≠
.
å™•
 = 
NULL
;

440 
	`io˘l
(
fb
, 
FBIOPUTCMAP
, &
cm≠
);

442 
	}
}

446 
	$£tÁdñevñ
(
PSD
 
psd
, 
f
)

448 
i
;

449 
r
[256], 
g
[256], 
b
[256];

450 
MWPALENTRY
 
gr_∑Àâe
[256];

452 if(
psd
->
pixty≥
 !
MWPF_PALETTE
)

455 
Áde
 = 
f
;

456 if(
Áde
 > 100)

457 
Áde
 = 100;

458 
i
=0; i<256; ++i) {

459 
r
[
i
] = (
gr_∑Àâe
[i].∏* 
Áde
 / 100) << 8;

460 
g
[
i
] = (
gr_∑Àâe
[i].g * 
Áde
 / 100) << 8;

461 
b
[
i
] = (
gr_∑Àâe
[i].b * 
Áde
 / 100) << 8;

463 
	`io˘l_£çÆëã
(0, 256, 
r
, 
g
, 
b
);

464 
	}
}

467 
	$gí_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
)

469 
psi
->
rows
 = 
psd
->
yvúåes
;

470 
psi
->
cﬁs
 = 
psd
->
xvúåes
;

471 
psi
->
∂™es
 = 
psd
->planes;

472 
psi
->
bµ
 = 
psd
->bpp;

473 
psi
->
ncﬁ‹s
 = 
psd
->ncolors;

474 
psi
->
f⁄ts
 = 
NUMBER_FONTS
;

475 
psi
->
p‹åaô
 = 
psd
->portrait;

476 
psi
->
fbdrivî
 = 
TRUE
;

478 
psi
->
pixty≥
 = 
psd
->pixtype;

479 
psd
->
pixty≥
) {

480 
MWPF_TRUECOLOR8888
:

481 
MWPF_TRUECOLOR0888
:

482 
MWPF_TRUECOLOR888
:

483 
psi
->
rmask
 = 0xff0000;

484 
psi
->
gmask
 = 0x00ff00;

485 
psi
->
bmask
 = 0x0000ff;

487 
MWPF_TRUECOLOR565
:

488 
psi
->
rmask
 = 0xf800;

489 
psi
->
gmask
 = 0x07e0;

490 
psi
->
bmask
 = 0x001f;

492 
MWPF_TRUECOLOR555
:

493 
psi
->
rmask
 = 0x7c00;

494 
psi
->
gmask
 = 0x03e0;

495 
psi
->
bmask
 = 0x001f;

497 
MWPF_TRUECOLOR332
:

498 
psi
->
rmask
 = 0xe0;

499 
psi
->
gmask
 = 0x1c;

500 
psi
->
bmask
 = 0x03;

502 
MWPF_PALETTE
:

504 
psi
->
rmask
 = 0xff;

505 
psi
->
gmask
 = 0xff;

506 
psi
->
bmask
 = 0xff;

510 if(
psd
->
yvúåes
 > 480) {

512 
psi
->
xdpcm
 = 33;

513 
psi
->
ydpcm
 = 33;

514 } if(
psd
->
yvúåes
 > 350) {

516 
psi
->
xdpcm
 = 27;

517 
psi
->
ydpcm
 = 27;

518 } if(
psd
->
yvúåes
 <= 240) {

520 
psi
->
xdpcm
 = 14;

521 
psi
->
ydpcm
 = 5;

524 
psi
->
xdpcm
 = 27;

525 
psi
->
ydpcm
 = 19;

527 
	}
}

	@drivers/scr_fbsd.c

10 
	~<°dio.h
>

11 
	~<machöe/c⁄sﬁe.h
>

12 
	~<vgl.h
>

13 
	~<sig«l.h
>

14 
	~<o§ñd©e.h
>

20 
	~"devi˚.h
"

21 
	~"fb.h
"

22 
	~"gímem.h
"

23 
	~"gíf⁄t.h
"

25 #i‚de‡
SCREEN_WIDTH


26 
	#SCREEN_WIDTH
 800

	)

29 #i‚de‡
SCREEN_HEIGHT


30 
	#SCREEN_HEIGHT
 600

	)

33 #i‚de‡
SCREEN_DEPTH


34 
	#SCREEN_DEPTH
 8

	)

38 #i‚de‡
MWPIXEL_FORMAT


39 
	#MWPIXEL_FORMAT
 
MWPF_PALETTE


	)

42 #i‡
ALPHABLEND


53 *
	gÆpha_to_rgb
 = 
NULL
;

54 *
	grgb_to_∑lödex
 = 
NULL
;

55 
öô_Æpha_lookup
();

58 
SCREENDEVICE
 
	gßvebôs
;

60 
PSD
 
FBSD_›í
(PSD 
psd
);

61 
FBSD_˛o£
(
PSD
 
psd
);

62 
FBSD_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
);

63 
FBSD_£çÆëã
(
PSD
 
psd
,
fú°
,
cou¡
,
MWPALENTRY
 *
∑l
);

64 
FBSD_døwpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
);

65 
MWPIXELVAL
 
FBSD_ªadpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
);

66 
FBSD_døwhlöe
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
);

67 
FBSD_døwvlöe
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
);

68 
FBSD_fûÃe˘
(
PSD
 
psd
,
MWCOORD
 
x1
,MWCOORD 
y1
,MWCOORD 
x2
,MWCOORD 
y2
,
MWPIXELVAL
 
c
);

70 
FBSD_¥e£À˘
(
PSD
 
psd
);

71 
FBSD_blô
(
PSD
 
d°psd
,
MWCOORD
 
de°x
,MWCOORD 
de°y
,

72 
MWCOORD
 
w
,MWCOORD 
h
,

73 
PSD
 
§˝sd
,
MWCOORD
 
§cx
,MWCOORD 
§cy
, 
›
);

75 
FBSD_blô2
(
PSD
 
d°psd
,
MWCOORD
 
de°x
,MWCOORD 
de°y
,

76 
MWCOORD
 
w
,MWCOORD 
h
,

77 
PSD
 
§˝sd
,
MWCOORD
 
§cx
,MWCOORD 
§cy
, 
›
);

80 
SCREENDEVICE
 
	gs¸dev
 = {

81 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
NULL
,

82 
FBSD_›í
,

83 
FBSD_˛o£
,

84 
FBSD_gës¸ìnöfo
,

85 
FBSD_£çÆëã
,

86 
FBSD_døwpixñ
,

87 
FBSD_ªadpixñ
,

88 
FBSD_døwhlöe
,

89 
FBSD_døwvlöe
,

90 
FBSD_fûÃe˘
,

91 
gí_f⁄ts
,

92 
FBSD_blô2
,

93 
FBSD_¥e£À˘
,

94 
NULL
,

95 
NULL
,

96 
gí_Æloˇãmemgc
,

97 
fb_m≠memgc
,

98 
gí_‰ìmemgc


101 
	$FBSD_h™dÀ_evít
()

103 
	`VGLCheckSwôch
();

104 
	}
}

106 
	$FBSD_˛o£
(
PSD
 
psd
)

108 
	`VGLEnd
();

109 
	}
}

111 
PSD
 
	$FBSD_›í
(
PSD
 
psd
)

113 
PSUBDRIVER
 
subdrivî
;

114 
size
, 
löñí
;

116 i‡(
	`gëeuid
() != 0)

118 
	`Ârötf
(
°dîr
, "The current graphics consoleárchitecture ");

119 
	`Ârötf
(
°dîr
, "onlyÖermits super-userÅoáccess it, ");

120 
	`Ârötf
(
°dîr
, "therefore youÉither haveÅo obtain such ");

121 
	`Ârötf
(
°dîr
, "permissions orásk your sysadminÅoÖut ");

122 
	`Ârötf
(
°dîr
, "set-user-id on");

123 
	`exô
(1);

128 i‡(
	`VGLInô
(
SW_VESA_CG800x600
) != 0)

130 
	`Ârötf
(
°dîr
, "WARNING! CouldÇot initialise VESA mode. ");

131 
	`Ârötf
(
°dîr
, "TryingÅo fallbackÅoÅhe VGA 640x480 mode\n");

132 
	`≥º‹
("microwin");

134 i‡(
	`VGLInô
(
SW_CG640x480
) != 0)

136 
	`Ârötf
(
°dîr
, "WARNING! CouldÇot initialise VGA mode ");

137 
	`Ârötf
(
°dîr
, "either. Please check your kernel.\n");

138 
	`≥º‹
("microwin");

139  
NULL
;

144 
psd
 -> 
xªs
 =Ösd->
xvúåes
 = 
VGLDi•œy
->
Xsize
;

145 
psd
 -> 
yªs
 =Ösd->
yvúåes
 = 
VGLDi•œy
->
Ysize
;

146 
psd
 -> 
löñí
 = 
VGLDi•œy
->
Xsize
;

147 
psd
 -> 
∂™es
 = 1;

148 
psd
 -> 
pixty≥
 = 
MWPIXEL_FORMAT
;

149 
psd
 -> 
bµ
 = 8;

172 
psd
->
ncﬁ‹s
 = 256;

173 
psd
->
size
 = 0;

174 
psd
->
addr
 = 
NULL
;

175 
psd
->
Êags
 = 
PSF_SCREEN
|
PSF_HAVEBLIT
;

177 
ßvebôs
=*
psd
;

178 
ßvebôs
.
Êags
=
PSF_MEMORY
 | 
PSF_HAVEBLIT
;

180 
subdrivî
 = 
	`£À˘_fb_subdrivî
(&
ßvebôs
);

181 i‡(!
subdrivî
)

183 
	`Ârötf
(
°dîr
,"Subdriverállocation failed!\n");

184  
NULL
;

187 
	`GdCÆcMemGCAŒoc
(&
ßvebôs
, savebôs.
xvúåes
, savebôs.
yvúåes
,

188 0, 0, &
size
, &
löñí
);

190 
ßvebôs
.
löñí
 =Üinelen;

191 
ßvebôs
.
size
 = size;

192 i‡((
ßvebôs
.
addr
 = 
	`mÆloc
(
size
)Ë=
NULL
)

194 
	`Ârötf
(
°dîr
,"MÆlo¯f‹ %d Faûed!\n",
size
);

195  
NULL
;

198 
	`£t_subdrivî
(&
ßvebôs
, 
subdrivî
, 
TRUE
);

199  
psd
;

200 
	}
}

202 
	$FBSD_gës¸ìnöfo
(
PSD
 
psd
, 
PMWSCREENINFO
 
psi
)

204 
psi
->
rows
 = 
psd
->
yvúåes
;

205 
psi
->
cﬁs
 = 
psd
->
xvúåes
;

206 
psi
->
∂™es
 = 
psd
->planes;

207 
psi
->
bµ
 = 
psd
->bpp;

208 
psi
->
ncﬁ‹s
 = 
psd
->ncolors;

209 
psi
->
pixty≥
 = 
psd
->pixtype;

210 
psi
->
f⁄ts
 = 
NUMBER_FONTS
;

211 if(
psd
->
yvúåes
 > 480)

214 
psi
->
xdpcm
 = 33;

215 
psi
->
ydpcm
 = 33;

217 if(
psd
->
yvúåes
 > 350)

220 
psi
->
xdpcm
 = 27;

221 
psi
->
ydpcm
 = 27;

226 
psi
->
xdpcm
 = 27;

227 
psi
->
ydpcm
 = 19;

229 
	}
}

231 
	$FBSD_£çÆëã
(
PSD
 
psd
, 
fú°
, 
cou¡
,

232 
MWPALENTRY
 *
∑l
)

234 
fú°
 < 256 && 
cou¡
-- > 0)

236 
	`VGLSëPÆëãIndex
(
fú°
++, 
∑l
->
r
>>2,ÖÆ->
g
>>2,ÖÆ->
b
>>2);

237 ++
∑l
;

240 
	}
}

242 
	$FBSD_døwpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

244 
	`VGLSëXY
(
VGLDi•œy
, 
x
, 
y
, ()
c
);

245 
ßvebôs
.
	`DøwPixñ
(&ßvebôs, 
x
, 
y
, 
c
);

246 
	}
}

248 
MWPIXELVAL
 
	$FBSD_ªadpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

250  
ßvebôs
.
	`RódPixñ
(&ßvebôs,
x
,
y
);

252 
	}
}

254 
	$FBSD_døwhlöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
,

255 
MWCOORD
 
y
, 
MWPIXELVAL
 
c
)

257 
	`VGLLöe
(
VGLDi•œy
, 
x1
, 
y
, 
x2
, y, 
c
);

258 
ßvebôs
.
	`DøwH‹zLöe
(&ßvebôs,
x1
,
x2
,
y
,
c
);

259 
	}
}

261 
	$FBSD_døwvlöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
,

262 
MWCOORD
 
y2
, 
MWPIXELVAL
 
c
)

264 
	`VGLLöe
(
VGLDi•œy
, 
x
, 
y1
, x, 
y2
, ()
c
);

265 
ßvebôs
.
	`DøwVîtLöe
(&ßvebôs,
x
, 
y1
, 
y2
, 
c
);

266 
	}
}

268 
	$FBSD_fûÃe˘
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
y1
, MWCOORD 
x2
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

270 
	`VGLFûÀdBox
(
VGLDi•œy
,
x1
, 
y1
, 
x2
, 
y2
, ()
c
);

271 
ßvebôs
.
	`FûlRe˘
(&ßvebôs,
x1
, 
y1
, 
x2
, 
y2
, 
c
);

272 
	}
}

274 
	$FBSD_¥e£À˘
(
PSD
 
psd
)

276 
	`VGLCheckSwôch
();

277 
	}
}

282 
	$FBSD_blô
(
PSD
 
d°psd
,
MWCOORD
 
de°x
,MWCOORD 
de°y
,

283 
MWCOORD
 
w
,MWCOORD 
h
,

284 
PSD
 
§˝sd
,
MWCOORD
 
§cx
,MWCOORD 
§cy
, 
›
)

287 
x
, 
y
;

289 i‡(
d°psd
 =
§˝sd
)

291 if(
d°psd
->
Êags
 & 
PSF_SCREEN
)

293 
	`VGLBôm≠C›y
(
VGLDi•œy
, 
§cx
, 
§cy
, VGLDisplay,

294 
de°x
, 
de°y
, 
w
, 
h
);

295 
ßvebôs
.
	`Blô
(&ßvebôs, 
de°x
, 
de°y
, 
w
, 
h
,

296 &
ßvebôs
, 
§cx
, 
§cy
, 
›
);

301 
d°psd
->
	`Blô
(d°psd, 
de°x
, 
de°y
, 
w
, 
h
, 
§˝sd
, 
§cx
, 
§cy
, 
›
);

304 i‡(
d°psd
->
Êags
 & 
PSF_SCREEN
)

306 
VGLBôm≠
 *
bôm≠
;

308 
bôm≠
=
	`VGLBôm≠Cª©e
(
MEMBUF
 , 
w
, 
h
, 
NULL
);

309 
	`VGLBôm≠AŒoˇãBôs
(
bôm≠
);

310 
y
 = 0; y < 
h
; y++)

312 
x
 = 0; x < 
w
; x++)

314 
MWPIXELVAL
 
c
 = 
§˝sd
->
	`RódPixñ
(§˝sd,
§cx
+
x
,
§cy
+
y
);

315 
	`VGLSëXY
(
bôm≠
, 
x
, 
y
, 
c
);

317 
ßvebôs
.
	`DøwPixñ
(&ßvebôs, 
de°x
+
x
, 
de°y
+
y
, 
c
);

320 
	`VGLBôm≠C›y
(
bôm≠
, 
§cx
, 
§cy
, 
VGLDi•œy
,

321 
de°x
, 
de°y
, 
w
, 
h
);

322 
	`VGLBôm≠De°roy
(
bôm≠
);

324 i‡(
§˝sd
->
Êags
 & 
PSF_SCREEN
)

326 
y
 = 0; y < 
h
; y++)

328 
x
 = 0; x < 
w
; x++)

330 
MWPIXELVAL
 
c
 = 
§˝sd
->
	`RódPixñ
(§˝sd,
§cx
+
x
,
§cy
+
y
);

331 
d°psd
->
	`DøwPixñ
(d°psd, 
de°x
+
x
, 
de°y
+
y
, 
c
);

335 
	}
}

339 
	$FBSD_blô2
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

340 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

342 #i‡
ALPHABLEND


344 
§ˇÕha
, 
d°Æpha
;

346 if((
›
 & 
MWROP_EXTENSION
Ë!
MWROP_BLENDCONSTANT
)

347 
°dblô
;

348 
§ˇÕha
 = 
›
 & 0xff;

351 if(!
rgb_to_∑lödex
 || !
Æpha_to_rgb
)

353 
	`öô_Æpha_lookup
();

354 if(!
rgb_to_∑lödex
 || !
Æpha_to_rgb
)

355 
°dblô
;

361 
d°Æpha
 = ((
§ˇÕha
>>3) ^ 31) << 8;

362 
§ˇÕha
 = (srcalpha>>3) << 8;

364 --
h
 >= 0)

366 
i
;

367 
i
=0; i<
w
; ++i)

369 
c
;

371 
s
 = 
Æpha_to_rgb
[
§ˇÕha
 +

372 
§˝sd
->
	`RódPixñ
(

373 
§˝sd
,
§cx
+
i
,
§cy
+
h
)];

376 
d
 = 
Æpha_to_rgb
[
d°Æpha
 +

377 
d°psd
->
	`RódPixñ
(

378 
§˝sd
,
d°x
+
i
,
d°y
+
h
)];

381 
	`VGLSëXY
(
VGLDi•œy
, 
d°x
+
i
, 
d°y
+
h
,

382 
c
=
rgb_to_∑lödex
[
s
 + 
d
]);

383 
ßvebôs
.
	`DøwPixñ
(&ßvebôs, 
d°x
+
i
, 
d°y
+
h
, 
c
);

387 
°dblô
:

389 
	`FBSD_blô
(
d°psd
, 
d°x
, 
d°y
, 
w
, 
h
, 
§˝sd
, 
§cx
, 
§cy
, 
›
);

390 
	}
}

393 #i‡
ALPHABLEND


394 
	$öô_Æpha_lookup
()

396 
i
, 
a
;

397 
r
, 
g
, 
b
;

398 
MWPALENTRY
 
gr_∑Àâe
[256];

400 if(!
Æpha_to_rgb
)

401 
Æpha_to_rgb
 = (*)
	`mÆloc
(

403 if(!
rgb_to_∑lödex
)

404 
rgb_to_∑lödex
 = (*)
	`mÆloc
(

406 if(!
rgb_to_∑lödex
 || !
Æpha_to_rgb
)

414 
i
=0; i<256; ++i) {

415 
MWPALENTRY
 *
p
 = &
gr_∑Àâe
[
i
];

416 
a
=0;á<32; ++a) {

417 
Æpha_to_rgb
[(
a
<<8)+
i
] =

418 (((
p
->
r
 * 
a
 / 31)>>3) << 10) |

419 (((
p
->
g
 * 
a
 / 31)>>3) << 5) |

420 ((
p
->
b
 * 
a
 / 31)>>3);

428 
r
=0;Ñ<32; ++r) {

429 
g
=0; g<32; ++g)

430 
b
=0; b<32; ++b)

431 
rgb_to_∑lödex
[ (
r
<<10)|(
g
<<5)|
b
] =

432 
	`GdFödNóª°Cﬁ‹
(
gr_∑Àâe
, 256,

433 
	`MWRGB
(
r
<<3, 
g
<<3, 
b
<<3));

435 
	}
}

	@drivers/scr_herc.c

17 #i‡
ELKS


18 
	~<löuxmt/¡ty.h
>

20 
	~<°dio.h
>

21 
	~"devi˚.h
"

22 
	~"vg≠œn4.h
"

23 
	~"romf⁄t.h
"

26 
	#SCREENADDR
(
off£t
Ë
	`MK_FP
(0xb000, (off£t))

	)

28 
	#SCREEN_ON
 8

	)

29 
	#BLINKER_ON
 0x20

	)

32 
PSD
 
HERC_›í
(PSD 
psd
);

33 
HERC_˛o£
(
PSD
 
psd
);

34 
HERC_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
);;

35 
HERC_£çÆëã
(
PSD
 
psd
,
fú°
,
cou¡
,
MWPALENTRY
 *
∑l
);

36 
HERC_døwpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
);

37 
MWPIXELVAL
 
HERC_ªadpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
);

38 
HERC_døwhlöe
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
);

39 
HERC_døwvlöe
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
);

40 
HERC_fûÃe˘
(
PSD
 
psd
,
MWCOORD
 
x1
,MWCOORD 
y1
,MWCOORD 
x2
,MWCOORD 
y2
,

41 
MWPIXELVAL
 
c
);

42 
HERC_blô
(
PSD
 
d°psd
,
MWCOORD
 
de°x
,MWCOORD 
de°y
,MWCOORD 
w
,MWCOORD 
h
,

43 
PSD
 
§˝sd
,
MWCOORD
 
§cx
,MWCOORD 
§cy
,
›
);

44 
PSD
 
HERC_Æloˇãmemgc
(PSD 
psd
);

46 
SCREENDEVICE
 
	gs¸dev
 = {

47 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
NULL
,

48 
HERC_›í
,

49 
HERC_˛o£
,

50 
HERC_gës¸ìnöfo
,

51 
HERC_£çÆëã
,

52 
HERC_døwpixñ
,

53 
HERC_ªadpixñ
,

54 
HERC_døwhlöe
,

55 
HERC_døwvlöe
,

56 
HERC_fûÃe˘
,

57 
p¸om_f⁄ts
,

58 
HERC_blô
,

59 
NULL
,

60 
NULL
,

61 
NULL
,

62 
HERC_Æloˇãmemgc
,

63 
NULL
,

64 
NULL


67 
PSD


68 
	$HERC_›í
(
PSD
 
psd
)

70 #i‡
HAVEIOPERM


72 if(
	`i›îm
(0x3b4, 0x0d, 1))

73  
NULL
;

75 #i‡
ELKS


77 if(
	`io˘l
(0, 
DCGET_GRAPH
) != 0)

78  
NULL
;

82 
	`ouç‹tb
(0x3bf, 1+2);

83 
	`ouç‹tb
(0x3b8, 0);

84 
	`ouç‹t
(0x3b4, 0x3500);

85 
	`ouç‹t
(0x3b4, 0x2d01);

86 
	`ouç‹t
(0x3b4, 0x2e02);

87 
	`ouç‹t
(0x3b4, 0x0703);

88 
	`ouç‹t
(0x3b4, 0x5b04);

89 
	`ouç‹t
(0x3b4, 0x0205);

90 
	`ouç‹t
(0x3b4, 0x5706);

91 
	`ouç‹t
(0x3b4, 0x5707);

92 
	`ouç‹t
(0x3b4, 0x0309);

93 
	`ouç‹tb
(0x3b8, 2+8);

96 
psd
->
xªs
 =Ösd->
xvúåes
 = 720;

97 
psd
->
yªs
 =Ösd->
yvúåes
 = 350;

98 
psd
->
∂™es
 = 1;

99 
psd
->
bµ
 = 1;

100 
psd
->
ncﬁ‹s
 = 2;

101 
psd
->
pixty≥
 = 
MWPF_PALETTE
;

102 
psd
->
Êags
 = 
PSF_SCREEN
;

103 
psd
->
addr
 = 
	`SCREENADDR
(0);

104 
psd
->
löñí
 = 90;

107 
	`p¸om_öô
(
psd
);

109  
psd
;

110 
	}
}

113 
	$HERC_˛o£
(
PSD
 
psd
)

115 
i
;

116 vﬁ©ûê
FARADDR
 
d°
;

117 
hîc_txt_tbl
[12]= {

121 #i‡
ELKS


123 
	`io˘l
(0, 
DCREL_GRAPH
);

127 
	`ouç‹tb
(0x3bf, 0);

128 
	`ouç‹tb
(0x3b8, 0);

130 
i
 = 0; i < 12; ++i) {

131 
	`ouç‹tb
(0x3b4, 
i
);

132 
	`ouç‹tb
(0x3b5, 
hîc_txt_tbl
[
i
]);

136 
d°
 = 
	`SCREENADDR
(0);

137 
i
 = 0; i <= 0x3fff; ++i) {

138 
	`PUTBYTE_FP
(
d°
++, 0x00);

139 
	`PUTBYTE_FP
(
d°
++, 0x07);

141 
	`ouç‹tb
(0x3b8, 
BLINKER_ON
 | 
SCREEN_ON
);

142 
	}
}

145 
	$HERC_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
)

147 
psi
->
rows
 = 
psd
->
yvúåes
;

148 
psi
->
cﬁs
 = 
psd
->
xvúåes
;

149 
psi
->
∂™es
 = 
psd
->planes;

150 
psi
->
bµ
 = 
psd
->bpp;

151 
psi
->
ncﬁ‹s
 = 
psd
->ncolors;

152 
psi
->
pixty≥
 = 
psd
->pixtype;

153 
psi
->
f⁄ts
 = 
NUMBER_FONTS
;

154 
psi
->
xdpcm
 = 30;

155 
psi
->
ydpcm
 = 19;

156 
	}
}

159 
	$HERC_£çÆëã
(
PSD
 
psd
,
fú°
,
cou¡
,
MWPALENTRY
 *
∑l
)

162 
	}
}

165 
	$HERC_døwpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

167 
off£t
;

168 
mask
 = 128;

169 vﬁ©ûê
FARADDR
 
d°
;

171 
off£t
 = 0x2000 * (
y
&3);

172 
off£t
 +90*(
y
/4Ë+ 
x
/8;

173 
d°
 = 
	`SCREENADDR
(
off£t
);

174 
mask
 >>
x
 & 7;

175 if(
c
)

176 
	`ORBYTE_FP
(
d°
, 
mask
);

177 
	`ANDBYTE_FP
(
d°
, ~
mask
);

178 
	}
}

180 
MWPIXELVAL


181 
	$HERC_ªadpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
)

183 
off£t
;

184 
mask
 = 128;

185 vﬁ©ûê
FARADDR
 
d°
;

187 
off£t
 = 0x2000 * (
y
&3);

188 
off£t
 +90*(
y
/4Ë+ 
x
/8;

189 
d°
 = 
	`SCREENADDR
(
off£t
);

190 
mask
 >>
x
 & 7;

191  
	`GETBYTE_FP
(
d°
Ë& 
mask
? 1: 0;

192 
	}
}

195 
	$HERC_døwhlöe
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

198 
rowoff£t
, 
x1yoff£t
, 
x2yoff£t
;

199 
°¨tbyã
, 
ídbyã
;

200 vﬁ©ûê
FARADDR
 
d°
;

203 
rowoff£t
 = 8192 * (
y
 % 4) + (y / 4) * 90;

206 
x1yoff£t
 = 
rowoff£t
 + (
x1
 / 8);

209 
x2yoff£t
 = 
rowoff£t
 + (
x2
 / 8);

213 
°¨tbyã
 = 0xf‡>> (
x1
 % 8);

218 
d°
 = 
	`SCREENADDR
(
x1yoff£t
);

220 if(
c
)

221 
	`ORBYTE_FP
(
d°
, 
°¨tbyã
);

222 
	`ANDBYTE_FP
(
d°
, ~
°¨tbyã
);

224 
x1yoff£t
++;

225 
x1yoff£t
 < 
x2yoff£t
) {

226 
d°
 = 
	`SCREENADDR
(
x1yoff£t
);

227 if(
c
)

228 
	`ORBYTE_FP
(
d°
, 0xff);

229 
	`ANDBYTE_FP
(
d°
, ~0xff);

230 
x1yoff£t
++;

233 
d°
 = 
	`SCREENADDR
(
x2yoff£t
);

234 if(
c
)

235 
	`ORBYTE_FP
(
d°
, 
ídbyã
);

236 
	`ANDBYTE_FP
(
d°
, ~
ídbyã
);

243 
	}
}

246 
	$HERC_døwvlöe
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

252 
y1
 <
y2
)

253 
	`HERC_døwpixñ
(
x
, 
y1
++, 
c
);

254 
	}
}

257 
	$HERC_fûÃe˘
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
y1
, MWCOORD 
x2
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

259 
y1
 <
y2
)

260 
	`HERC_døwhlöe
(
x1
, 
x2
, 
y1
++, 
c
);

261 
	}
}

264 
	$HERC_blô
(
PSD
 
d°psd
,
MWCOORD
 
de°x
,MWCOORD 
de°y
,MWCOORD 
w
,MWCOORD 
h
,

265 
PSD
 
§˝sd
,
MWCOORD
 
§cx
,MWCOORD 
§cy
,
›
)

268 
	}
}

271 
PSD


272 
	$HERC_Æloˇãmemgc
(
PSD
 
psd
)

275  
NULL
;

276 
	}
}

	@drivers/scr_prsm.c

24 
	~<°dio.h
>

25 
	~<°dlib.h
>

26 
	~"devi˚.h
"

27 #ifde‡
_MINIX


28 
	~<sys/ty≥s.h
>

30 
	~"gíf⁄t.h
"

31 
	~"gímem.h
"

33 
	#MY_PSD_ADDR
 0x01000000

	)

36 
PSD
 
VB_›í
(PSD 
psd
);

37 
VB_˛o£
(
PSD
 
psd
);

38 
VB_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
);;

39 
VB_£çÆëã
(
PSD
 
psd
,
fú°
,
cou¡
,
MWPALENTRY
 *
∑l
);

40 
VB_døwpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
);

41 
MWPIXELVAL
 
VB_ªadpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
);

42 
VB_døwhlöe
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
,

43 
MWPIXELVAL
 
c
);

44 
VB_døwvlöe
(
PSD
 
psd
,
MWCOORD
 
x
,MWCOORD 
y1
,MWCOORD 
y2
,
MWPIXELVAL
 
c
);

45 
VB_fûÃe˘
(
PSD
 
psd
,
MWCOORD
 
x1
,MWCOORD 
y1
,MWCOORD 
x2
,MWCOORD 
y2
,

46 
MWPIXELVAL
 
c
);

47 
VB_blô
(
PSD
 
de°psd
,
MWCOORD
 
de°x
,MWCOORD 
de°y
,MWCOORD 
w
,MWCOORD 
h
,

48 
PSD
 
§˝sd
,
MWCOORD
 
§cx
,MWCOORD 
§cy
,
›
);

51 
öô_s¸
();

52 
c_pcm≠
(
˙t
, *
m≠
);

53 
c_ldøw4
(
x1
, 
y1
, 
x2
, 
y2
, 
öãn
, 
£l
);

55 
c_ldøw5y
(
x1
, 
y1
, 
x2
, 
y2
, 
öãn
);

56 
c_ldøw5x
(
x1
, 
y1
, 
x2
, 
y2
, 
öãn
);

57 
r1pix3
(
x
, 
y
, 
£lmask
);

58 
rd_ª˘2
(
x1
, 
x2
, 
y1
, 
y2
, *
buf
);

59 
w1pix3
(
x
, 
y
, 
£lmask
, 
pixd©a
);

60 
wr_ª˘2
(
x1
, 
x2
, 
y1
, 
y2
, *
buf
);

63 
MWBOOL
 
VB_m≠memgc
(
PSD
 
mempsd
,
MWCOORD
 
w
,MWCOORD 
h
,
∂™es
,
bµ
,

64 
löñí
,
size
,*
addr
);

67 
SCREENDEVICE
 
	gs¸dev
 = {

68 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
NULL
,

69 
VB_›í
,

70 
VB_˛o£
,

71 
VB_gës¸ìnöfo
,

72 
VB_£çÆëã
,

73 
VB_døwpixñ
,

74 
VB_ªadpixñ
,

75 
VB_døwhlöe
,

76 
VB_døwvlöe
,

77 
VB_fûÃe˘
,

78 
gí_f⁄ts
,

79 
VB_blô
,

80 
NULL
,

81 
NULL
,

82 
NULL
,

83 
gí_Æloˇãmemgc
,

84 
VB_m≠memgc
,

85 
gí_‰ìmemgc


88 *
	g¥_cm≠
;

90 
PSD


91 
	$VB_›í
(
PSD
 
psd
)

94 i‡((
¥_cm≠
 = (*)
	`mÆloc
((
size_t
)(256 * ()))Ë=
NULL
) {

95 
	`≥º‹
("malloc cmap");

98 
	`mem£t
(
¥_cm≠
, 0, (256 * ()));

101 
psd
->
xªs
 =Ösd->
xvúåes
 = 1280;

102 
psd
->
yªs
 =Ösd->
yvúåes
 = 1024;

103 
psd
->
∂™es
 = 1;

104 
psd
->
bµ
 = 8;

105 
psd
->
ncﬁ‹s
 = 256;

106 
psd
->
pixty≥
 = 
MWPF_PALETTE
;

107 #i‡
HAVEBLIT


108 
psd
->
Êags
 = 
PSF_SCREEN
 | 
PSF_HAVEBLIT
;

110 
psd
->
Êags
 = 
PSF_SCREEN
;

112 
psd
->
addr
 = (*)
MY_PSD_ADDR
;

113 
psd
->
löñí
 = 1280;

114 
	`öô_s¸
();

115 
	`¥ötf
("VB_open: finished open\n");

116  
psd
;

117 
	}
}

120 
	$VB_˛o£
(
PSD
 
psd
)

124 
	}
}

127 
	$VB_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
)

129 
psi
->
rows
 = 
psd
->
yvúåes
;

130 
psi
->
cﬁs
 = 
psd
->
xvúåes
;

131 
psi
->
∂™es
 = 
psd
->planes;

132 
psi
->
bµ
 = 
psd
->bpp;

133 
psi
->
ncﬁ‹s
 = 
psd
->ncolors;

134 
psi
->
pixty≥
 = 
psd
->pixtype;

135 
psi
->
f⁄ts
 = 1;

138 
psi
->
xdpcm
 = 40;

139 
psi
->
ydpcm
 = 43;

140 
	}
}

143 
	$VB_£çÆëã
(
PSD
 
psd
,
fú°
,
cou¡
,
MWPALENTRY
 *
∑l
)

145 
i
, 
öd
;

146 
MWPALENTRY
 *
p
;

148 
öd
 = 
fú°
;

149 
i
 = 0; i < 
cou¡
; i++) {

150 
p
 = &
∑l
[
i
];

151 i‡(
öd
 > 255) {

152 
	`Ârötf
(
°dîr
, "VB_£çÆëã: index ouào‡ønge: %d\n", 
öd
);

155 *(
¥_cm≠
 + 
öd
Ë(öd << 24Ë| (
p
->
r
 << 16Ë| (p->
g
 << 8) |

156 (
p
->
b
);

157 
öd
++;

168 
öd
 = 
fú°
;

169 
cou¡
) {

170 i‡(
cou¡
 >= 16) {

171 
	`c_pcm≠
(16, (
¥_cm≠
 + 
öd
));

172 
cou¡
 -= 16;

173 
öd
 += 16;

175 
	`c_pcm≠
(
cou¡
, (
¥_cm≠
 + 
öd
));

176 
cou¡
 = 0;

180 
	}
}

183 
	$VB_døwpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

185 
	`w1pix3
(
x
, 
y
, 255, ()
c
);

186 
	}
}

188 
MWPIXELVAL


189 
	$VB_ªadpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
)

191 ((
MWPIXELVAL
)
	`r1pix3
(
x
, 
y
, 255));

192 
	}
}

196 
	$VB_døwhlöe
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

199 
y
 = 1023 - y;

200 
	`c_ldøw4
(
x1
, 
y
, 
x2
, y, ()
c
, 255);

201 
	}
}

205 
	$VB_døwvlöe
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

208 
y1
 = 1023 - y1;

209 
y2
 = 1023 - y2;

210 
	`c_ldøw4
(
x
, 
y1
, x, 
y2
, ()
c
, 255);

211 
	}
}

214 
	$VB_fûÃe˘
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
y1
, MWCOORD 
x2
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

216 
w
, 
h
;

218 
w
 = ((
x2
 - 
x1
) >= 0) ? (x2 - x1) : (x1 - x2);

219 
h
 = ((
y2
 - 
y1
) >= 0) ? (y2 - y1) : (y1 - y2);

221 i‡((
w
 > 1279Ë|| (
h
 > 1023))

223 
y1
 = 1023 - y1;

224 
y2
 = 1023 - y2;

225 i‡(
w
 >
h
) {

228 
y2
 <
y1
) {

229 
	`c_ldøw4
(
x1
, 
y2
, 
x2
, y2, ()
c
, 255);

230 
y2
++;

233 
	`c_ldøw5y
(
x1
, 
y2
, 
x2
, 
y1
, ()
c
);

237 
x1
 <
x2
) {

238 
	`c_ldøw4
(
x1
, 
y2
, x1, 
y1
, ()
c
, 255);

239 
x1
++;

242 
	`c_ldøw5x
(
x1
, 
y2
, 
x2
, 
y1
, ()
c
);

244 
	}
}

250 
	$VB_blô
(
PSD
 
de°psd
,
MWCOORD
 
de°x
,MWCOORD 
de°y
,MWCOORD 
w
,MWCOORD 
h
,

251 
PSD
 
§˝sd
,
MWCOORD
 
§cx
,MWCOORD 
§cy
,
›
)

253 
x1s
, 
x1e
, 
x2s
, 
x2e
, 
y1s
, 
y1e
, 
y2s
, 
y2e
;

254 *
ª˘
;

257 i‡((
ª˘
 = (*)
	`mÆloc
((
size_t
)(
w
 * 
h
 * ())))

258 =
NULL
) {

259 
	`≥º‹
("mallocÑect");

263 
x1s
 = (
w
 >0Ë? 
§cx
 : (srcx + w);

264 
x2s
 = (
w
 >0Ë? 
de°x
 : (destx + w);

265 
x1e
 = (
w
 >0Ë? (
§cx
 + w) : srcx;

266 
x2e
 = (
w
 >0Ë? (
de°x
 + w) : destx;

267 
y1s
 = (
h
 >0Ë? 
§cy
 : (srcy + h);

268 
y2s
 = (
h
 >0Ë? 
de°y
 : (desty + h);

269 
y1e
 = (
h
 >0Ë? (
§cy
 + h) : srcy;

270 
y2e
 = (
h
 >0Ë? (
de°y
 + h) : desty;

273 i‡((
§˝sd
->
addr
 =
MY_PSD_ADDR
Ë&& (
de°psd
->addr == MY_PSD_ADDR)) {

276 
	`rd_ª˘2
(
x1s
, 
y1s
, 
x1e
, 
y1e
, 
ª˘
);

278 
	`wr_ª˘2
(
x2s
, 
y2s
, 
x2e
, 
y2e
, 
ª˘
);

279 } i‡(
§˝sd
->
addr
 =
MY_PSD_ADDR
) {

281 } i‡(
de°psd
->
addr
 =
MY_PSD_ADDR
) {

285 
	`¥ötf
("VB_blit withÇo screen!\n");

287 
	`‰ì
(
ª˘
);

288 
	}
}

290 
MWBOOL


291 
	$VB_m≠memgc
(
PSD
 
mempsd
,
MWCOORD
 
w
,MWCOORD 
h
,
∂™es
,
bµ
,
löñí
,

292 
size
,*
addr
)

295 
	}
}

	@drivers/scr_psp.c

10 
	~<p•kî√l.h
>

11 
	~<p•ge.h
>

12 
	~<p•debug.h
>

13 
	~<°dlib.h
>

14 
	~<°rög.h
>

17 
PSP_MODULE_INFO
("MWINTEST", 0, 1, 1);

20 
PSP_MAIN_THREAD_ATTR
(
THREAD_ATTR_USER
 | 
THREAD_ATTR_VFPU
);

22 
	~"devi˚.h
"

23 
	~"gíf⁄t.h
"

24 
	~"gímem.h
"

25 
	~"fb.h
"

27 
PSD
 
fb_›í
(PSD 
psd
);

28 
fb_˛o£
(
PSD
 
psd
);

29 
gí_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
);

32 
	$°ub_£çÆëã
(
PSD
 
psd
,
fú°
,
cou¡
,
MWPALENTRY
 *
∑l
)

35 
	}
}

38 
SCREENDEVICE
 
	gs¸dev
 = {

39 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
NULL
,

40 
fb_›í
,

41 
fb_˛o£
,

42 
gí_gës¸ìnöfo
,

43 
°ub_£çÆëã
,

44 
NULL
,

45 
NULL
,

46 
NULL
,

47 
NULL
,

48 
NULL
,

49 
gí_f⁄ts
,

50 
NULL
,

51 
NULL
,

52 
NULL
,

53 
NULL
,

54 
gí_Æloˇãmemgc
,

55 
fb_m≠memgc
,

56 
gí_‰ìmemgc


60 
PSD


61 
	$fb_›í
(
PSD
 
psd
)

63 
PSUBDRIVER
 
subdrivî
;

65 
	`p•DebugS¸ìnInô
();

67 
psd
->
xªs
 =Ösd->
xvúåes
 = 480;

68 
psd
->
yªs
 =Ösd->
yvúåes
 = 272;

69 
psd
->
∂™es
 = 1;

70 
psd
->
bµ
 = 32;

71 
psd
->
ncﬁ‹s
 = 1 <<Ösd->
bµ
;

72 
psd
->
size
 = 0;

73 
psd
->
löñí
 = 512 * 4;

74 
psd
->
Êags
 = 
PSF_SCREEN
;

75 
psd
->
pixty≥
 = 
MWPF_TRUECOLORABGR
;

77 
subdrivî
 = 
	`£À˘_fb_subdrivî
(
psd
);

78 i‡(!
subdrivî
) {

79 
	`EPRINTF
("No driver for screen\n");

80  
NULL
;

83 if(!
	`£t_subdrivî
(
psd
, 
subdrivî
, 
TRUE
)) {

84 
	`EPRINTF
("Driver initialize failed\n");

85  
NULL
;

88 
psd
->
addr
 = (*)(0x40000000 | ()
	`s˚GeEdømGëAddr
());

90  
psd
;

91 
	}
}

95 
	$fb_˛o£
(
PSD
 
psd
)

97 
	}
}

100 
	$gí_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
)

102 
psi
->
rows
 = 
psd
->
yvúåes
;

103 
psi
->
cﬁs
 = 
psd
->
xvúåes
;

104 
psi
->
∂™es
 = 
psd
->planes;

105 
psi
->
bµ
 = 
psd
->bpp;

106 
psi
->
ncﬁ‹s
 = 
psd
->ncolors;

107 
psi
->
pixty≥
 = 
psd
->pixtype;

108 
psi
->
f⁄ts
 = 
NUMBER_FONTS
;

109 
psi
->
ydpcm
 = 120;

110 
psi
->
xdpcm
 = 120;

111 
	}
}

	@drivers/scr_rtems.c

10 
	#_GNU_SOURCE
 1

	)

11 
	~<as£π.h
>

12 
	~<sys/time.h
>

13 
	~<sys/ty≥s.h
>

14 
	~<uni°d.h
>

15 
	~<°dio.h
>

16 
	~<f˙é.h
>

17 
	~<limôs.h
>

18 
	~<°d¨g.h
>

19 
	~<°dlib.h
>

20 
	~"devi˚.h
"

21 
	~"gíf⁄t.h
"

22 
	~"gímem.h
"

23 
	~"fb.h
"

24 
	~<πems/mw_fb.h
>

26 #i‚de‡
FB_TYPE_VGA_PLANES


27 
	#FB_TYPE_VGA_PLANES
 4

	)

30 
PSD
 
fb_›í
(PSD 
psd
);

31 
fb_˛o£
(
PSD
 
psd
);

32 
fb_£çÆëã
(
PSD
 
psd
,
fú°
, 
cou¡
, 
MWPALENTRY
 *
∑Àâe
);

33 
gí_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
);

35 
SCREENDEVICE
 
	gs¸dev
 = {

36 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
NULL
,

37 
fb_›í
,

38 
fb_˛o£
,

39 
gí_gës¸ìnöfo
,

40 
fb_£çÆëã
,

41 
NULL
,

42 
NULL
,

43 
NULL
,

44 
NULL
,

45 
NULL
,

46 
gí_f⁄ts
,

47 
NULL
,

48 
NULL
,

49 
NULL
,

50 
NULL
,

51 
gí_Æloˇãmemgc
,

52 
fb_m≠memgc
,

53 
gí_‰ìmemgc


57 
	gfb
;

58 
	g°©us
;

59 
	gßved_ªd
[16];

60 
	gßved_gªí
[16];

61 
	gßved_blue
[16];

64 
£t_dúe˘cﬁ‹_∑Àâe
(
PSD
 
psd
);

66 
io˘l_gë∑Àâe
(
°¨t
, 
Àn
, *
ªd
, *
gªí
,

67 *
blue
);

68 
io˘l_£çÆëã
(
°¨t
, 
Àn
, *
ªd
, *
gªí
,

69 *
blue
);

73 
PSD


74 
	$fb_›í
(
PSD
 
psd
)

76 * 
ív
;

77 
ty≥
, 
visuÆ
;

78 
ây
;

79 
PSUBDRIVER
 
subdrivî
;

80 
fb_s¸ìnöfo
 
fb_öfo
;

82 
	`as£π
(
°©us
 < 2);

85 if(!(
ív
 = 
	`gëív
("FRAMEBUFFER")))

86 
ív
 = "/dev/fb0";

87 
fb
 = 
	`›í
–
ív
, 
O_RDWR
);

88 if(
fb
 < 0) {

89 
	`EPRINTF
("Eº‹ o≥nög %s: %m\n", 
ív
);

90  
NULL
;

93 if–
	`ufb_gë_s¸ìn_öfo
–
fb
, &
fb_öfo
 ) )

95 
	`EPRINTF
("Error getting screen info\n" );

96  
NULL
;

99 
ty≥
 = 
fb_öfo
.type;

100 
visuÆ
 = 
fb_öfo
.visual;

102 
psd
->
xªs
 =Ösd->
xvúåes
 = 
fb_öfo
.xres;

103 
psd
->
yªs
 =Ösd->
yvúåes
 = 
fb_öfo
.yres;

106 i‡(
ty≥
 =
FB_TYPE_VGA_PLANES
)

107 
psd
->
∂™es
 = 4;

108 i‡(
ty≥
 =
FB_TYPE_PACKED_PIXELS
)

109 
psd
->
∂™es
 = 1;

110 
psd
->
∂™es
 = 0;

112 
psd
->
bµ
 = 
fb_öfo
.
bôs_≥r_pixñ
;

113 
psd
->
ncﬁ‹s
 = (psd->
bµ
 >= 24)? (1 << 24): (1 <<Ösd->bpp);

116 
psd
->
löñí
 = 
fb_öfo
.
löe_Àngth
;

117 
psd
->
size
 = 0;

119 #i‡
HAVEBLIT


120 
psd
->
Êags
 = 
PSF_SCREEN
 | 
PSF_HAVEBLIT
;

122 
psd
->
Êags
 = 
PSF_SCREEN
;

124 i‡(
psd
->
bµ
 == 16)

125 
psd
->
Êags
 |
PSF_HAVEOP_COPY
;

128 if(
visuÆ
 =
FB_VISUAL_TRUECOLOR
 || visuÆ =
FB_VISUAL_DIRECTCOLOR
) {

129 
psd
->
bµ
) {

131 
psd
->
pixty≥
 = 
MWPF_TRUECOLOR332
;

134 
psd
->
pixty≥
 = 
MWPF_TRUECOLOR565
;

137 
psd
->
pixty≥
 = 
MWPF_TRUECOLOR888
;

140 
psd
->
pixty≥
 = 
MWPF_TRUECOLOR0888
;

143 
	`EPRINTF
(

145 
psd
->
ncﬁ‹s
,Ösd->
bµ
);

146 
Áû
;

148 } 
psd
->
pixty≥
 = 
MWPF_PALETTE
;

150 
psd
->
size
 = 
fb_öfo
.
smem_Àn
;

153 if–
	`ufb_mm≠_to_u£r_•a˚
–
fb
, &
psd
->
addr
,

154 –*)
fb_öfo
.
smem_°¨t
, fb_öfo.
smem_Àn
 ) )

156 
	`EPRINTF
("Error mapping FB memoryÅo user space\n" );

157 
Áû
;

165 
subdrivî
 = 
	`£À˘_fb_subdrivî
(
psd
);

166 i‡(!
subdrivî
) {

167 
	`EPRINTF
("No driver for screenÅype %d visual %d bpp %d\n",

168 
ty≥
, 
visuÆ
, 
psd
->
bµ
);

169 
Áû
;

172 if–
	`ufb_íãr_gøphics
–
fb
, 0 ) )

174 
	`EPRINTF
("ErrorÉntering graphics\n");

175  
NULL
;

182 if(!
	`£t_subdrivî
(
psd
, 
subdrivî
, 
TRUE
 ))

184 
	`EPRINTF
("Driver initialize failedÅype %d visual %d bpp %d\n",

185 
ty≥
, 
visuÆ
, 
psd
->
bµ
);

186 
Áû
;

190 
	`io˘l_gë∑Àâe
(0, 16, 
ßved_ªd
, 
ßved_gªí
, 
ßved_blue
);

193 if(
visuÆ
 =
FB_VISUAL_DIRECTCOLOR
)

194 
	`£t_dúe˘cﬁ‹_∑Àâe
(
psd
);

196 
°©us
 = 2;

197  
psd
;

199 
Áû
:

200 
	`˛o£
–
fb
 );

201  
NULL
;

202 
	}
}

206 
	$fb_˛o£
(
PSD
 
psd
)

209 if(
°©us
 != 2)

211 
°©us
 = 1;

214 
	`io˘l_£çÆëã
(0, 16, 
ßved_ªd
, 
ßved_gªí
, 
ßved_blue
);

217 
	`ufb_unmm≠_‰om_u£r_•a˚
–
fb
, 
psd
->
addr
 );

220 
	`ufb_exô_gøphics
–
fb
 );

223 
	`˛o£
–
fb
 );

224 
	}
}

228 
	$£t_dúe˘cﬁ‹_∑Àâe
(
PSD
 
psd
)

230 
i
;

231 
r
[256], 
g
[256], 
b
[256];

234 if(
psd
->
bµ
 == 16) {

236 
i
=0; i<32; ++i) {

238 
r
[
i
] = 
g
[i] = 
b
[i] = ((i<<11)|(i<<6)|i)<<8;

239 
r
[
i
] = 
g
[i] = 
b
[i] = ((i<<5)|i)<<10;

240 
r
[
i
] = 
g
[i] = 
b
[i] = i<<11;

242 
r
[
i
] = 
g
[i] = 
b
[i] = (i<<11) | (i<<3);

244 
	`io˘l_£çÆëã
(0, 32, 
r
, 
g
, 
b
);

247 
i
=0; i<256; ++i)

248 
r
[
i
] = i<<8;

249 
	`io˘l_£çÆëã
(0, 256, 
r
,Ñ,Ñ);

251 
	}
}

253 
	gÁde
 = 100;

257 
	$fb_£çÆëã
(
PSD
 
psd
,
fú°
, 
cou¡
, 
MWPALENTRY
 *
∑Àâe
)

259 
i
;

260 
ªd
[
cou¡
];

261 
gªí
[
cou¡
];

262 
blue
[
cou¡
];

265 
i
=0; i < 
cou¡
; i++) {

266 
MWPALENTRY
 *
p
 = &
∑Àâe
[
i
];

272 
ªd
[
i
] = (
p
->
r
 * 
Áde
 / 100) << 8;

273 
gªí
[
i
] = (
p
->
g
 * 
Áde
 / 100) << 8;

274 
blue
[
i
] = (
p
->
b
 * 
Áde
 / 100) << 8;

276 
	`io˘l_£çÆëã
(
fú°
, 
cou¡
, 
ªd
, 
gªí
, 
blue
);

277 
	}
}

281 
	$io˘l_gë∑Àâe
(
°¨t
, 
Àn
, *
ªd
, *
gªí
, *
blue
)

283 
fb_cm≠
 
cm≠
;

285 
cm≠
.
°¨t
 = start;

286 
cm≠
.
Àn
 =Üen;

287 
cm≠
.
ªd
 =Ñed;

288 
cm≠
.
gªí
 = green;

289 
cm≠
.
blue
 = blue;

290 
cm≠
.
å™•
 = 
NULL
;

292 
	`ufb_gë_∑Àâe
–
fb
, &
cm≠
 );

293 
	}
}

297 
	$io˘l_£çÆëã
(
°¨t
, 
Àn
, *
ªd
, *
gªí
, *
blue
)

299 
fb_cm≠
 
cm≠
;

301 
cm≠
.
°¨t
 = start;

302 
cm≠
.
Àn
 =Üen;

303 
cm≠
.
ªd
 =Ñed;

304 
cm≠
.
gªí
 = green;

305 
cm≠
.
blue
 = blue;

306 
cm≠
.
å™•
 = 
NULL
;

308 
	`ufb_£t_∑Àâe
–
fb
, &
cm≠
 );

309 
	}
}

312 
	$gí_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
)

314 
psi
->
rows
 = 
psd
->
yvúåes
;

315 
psi
->
cﬁs
 = 
psd
->
xvúåes
;

316 
psi
->
∂™es
 = 
psd
->planes;

317 
psi
->
bµ
 = 
psd
->bpp;

318 
psi
->
ncﬁ‹s
 = 
psd
->ncolors;

319 
psi
->
pixty≥
 = 
psd
->pixtype;

320 
psi
->
f⁄ts
 = 
NUMBER_FONTS
;

322 if(
psd
->
yvúåes
 > 480) {

324 
psi
->
xdpcm
 = 33;

325 
psi
->
ydpcm
 = 33;

326 } if(
psd
->
yvúåes
 > 350) {

328 
psi
->
xdpcm
 = 27;

329 
psi
->
ydpcm
 = 27;

332 
psi
->
xdpcm
 = 27;

333 
psi
->
ydpcm
 = 19;

335 
	}
}

339 
	$£tÁdñevñ
(
PSD
 
psd
, 
f
)

341 
i
;

342 
r
[256], 
g
[256], 
b
[256];

343 
MWPALENTRY
 
gr_∑Àâe
[256];

345 if(
psd
->
pixty≥
 !
MWPF_PALETTE
)

348 
Áde
 = 
f
;

349 if(
Áde
 > 100)

350 
Áde
 = 100;

351 
i
=0; i<256; ++i) {

352 
r
[
i
] = (
gr_∑Àâe
[i].∏* 
Áde
 / 100) << 8;

353 
g
[
i
] = (
gr_∑Àâe
[i].g * 
Áde
 / 100) << 8;

354 
b
[
i
] = (
gr_∑Àâe
[i].b * 
Áde
 / 100) << 8;

356 
	`io˘l_£çÆëã
(0, 256, 
r
, 
g
, 
b
);

357 
	}
}

	@drivers/scr_svga.c

15 
	~<as£π.h
>

16 
	~<°dio.h
>

17 
	~<vga.h
>

18 
	~"devi˚.h
"

19 
	~"gíf⁄t.h
"

20 
	~"gímem.h
"

22 
	#MAXLINELEN
 800

	)

25 
PSD
 
SVGA_›í
(PSD 
psd
);

26 
SVGA_˛o£
(
PSD
 
psd
);

27 
SVGA_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
);

28 
SVGA_£çÆëã
(
PSD
 
psd
,
fú°
,
cou¡
,
MWPALENTRY
 *
∑l
);

29 
SVGA_døwpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
);

30 
MWPIXELVAL
 
SVGA_ªadpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
);

31 
SVGA_døwhlöe
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
);

32 
SVGA_døwvlöe
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
);

33 
SVGA_fûÃe˘
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
y1
, MWCOORD 
x2
,

34 
MWCOORD
 
y2
, 
MWPIXELVAL
 
c
);

35 
SVGA_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
,

36 
MWCOORD
 
h
, 
PSD
 
§˝sd
, MWCOORD 
§cx
, MWCOORD 
§cy
, 
›
);

38 
SCREENDEVICE
 
	gs¸dev
 = {

39 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
NULL
,

40 
SVGA_›í
,

41 
SVGA_˛o£
,

42 
SVGA_gës¸ìnöfo
,

43 
SVGA_£çÆëã
,

44 
SVGA_døwpixñ
,

45 
SVGA_ªadpixñ
,

46 
SVGA_døwhlöe
,

47 
SVGA_døwvlöe
,

48 
SVGA_fûÃe˘
,

49 
gí_f⁄ts
,

50 
SVGA_blô
,

51 
NULL
,

52 
NULL
,

53 
NULL
,

54 
gí_Æloˇãmemgc
,

55 
NULL
,

56 
NULL
,

57 
NULL
,

58 
NULL


61 
gr_mode
;

63 
PSD


64 
	$SVGA_›í
(
PSD
 
psd
)

66 
mode
;

67 
vga_modeöfo
 * 
modeöfo
;

69 
	`vga_öô
();

71 
mode
 = 
G800x600x256
;

72 if(!
	`vga_hasmode
(
mode
))

73 
mode
 = 
G640x480x256
;

74 if(!
	`vga_hasmode
(
mode
))

75 
mode
 = 
G640x480x16
;

76 if(
	`vga_£tmode
(
mode
) == -1)

77  
NULL
;

78 
modeöfo
 = 
	`vga_gëmodeöfo
(
mode
);

80 
psd
->
xªs
 =Ösd->
xvúåes
 = 
modeöfo
->
width
;

81 
psd
->
yªs
 =Ösd->
yvúåes
 = 
modeöfo
->
height
;

82 
psd
->
löñí
 = 
modeöfo
->
löewidth
;

83 
psd
->
ncﬁ‹s
 = 
modeöfo
->
cﬁ‹s
;

84 if(
psd
->
ncﬁ‹s
 == 256) {

85 
psd
->
∂™es
 = 1;

86 
psd
->
bµ
 = 8;

88 
psd
->
∂™es
 = 4;

89 
psd
->
bµ
 = 4;

92 
psd
->
pixty≥
 = 
MWPF_PALETTE
;

93 
psd
->
Êags
 = 
PSF_SCREEN
;

94 
psd
->
size
 = 0;

95 
psd
->
addr
 = 
NULL
;

100  
psd
;

101 
	}
}

104 
	$SVGA_˛o£
(
PSD
 
psd
)

106 
	`vga_£tmode
(
TEXT
);

107 
	}
}

110 
	$SVGA_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
)

112 
psi
->
rows
 = 
psd
->
yvúåes
;

113 
psi
->
cﬁs
 = 
psd
->
xvúåes
;

114 
psi
->
∂™es
 = 
psd
->planes;

115 
psi
->
bµ
 = 
psd
->bpp;

116 
psi
->
ncﬁ‹s
 = 
psd
->ncolors;

117 
psi
->
f⁄ts
 = 
NUMBER_FONTS
;

118 
psi
->
p‹åaô
 = 
MWPORTRAIT_NONE
;

119 
psi
->
fbdrivî
 = 
FALSE
;

120 
psi
->
pixty≥
 = 
psd
->pixtype;

121 
psi
->
rmask
 = 0xff;

122 
psi
->
gmask
 = 0xff;

123 
psi
->
bmask
 = 0xff;

125 if(
psd
->
yvúåes
 > 480) {

127 
psi
->
xdpcm
 = 33;

128 
psi
->
ydpcm
 = 33;

129 } if(
psd
->
yvúåes
 > 350) {

131 
psi
->
xdpcm
 = 27;

132 
psi
->
ydpcm
 = 27;

135 
psi
->
xdpcm
 = 27;

136 
psi
->
ydpcm
 = 19;

138 
	}
}

141 
	$SVGA_£çÆëã
(
PSD
 
psd
,
fú°
,
cou¡
,
MWPALENTRY
 *
∑l
)

143 
fú°
 < 256 && 
cou¡
-- > 0) {

144 
	`vga_£çÆëã
(
fú°
++, 
∑l
->
r
>>2,ÖÆ->
g
>>2,ÖÆ->
b
>>2);

145 ++
∑l
;

147 
	}
}

150 
	$SVGA_døwpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

152 
glöe
, 
löe
 = 
c
;

154 if(
gr_mode
 =
MWMODE_COPY
) {

159 
	`vga_døwsˇn£gmít
(&
löe
, 
x
, 
y
, 1);

166 
	`vga_gësˇn£gmít
(&
glöe
, 
x
, 
y
, 1);

167 
löe
 ^
glöe
;

168 
	`vga_døwsˇn£gmít
(&
löe
, 
x
, 
y
, 1);

169 
	}
}

171 
MWPIXELVAL


172 
	$SVGA_ªadpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
)

174  
	`vga_gëpixñ
(
x
, 
y
);

175 
	}
}

178 
	$SVGA_døwhlöe
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

180 
i
, 
width
;

181 
gëlöe
[
MAXLINELEN
];

182 
œ°cﬁ‹
 = -1;

183 
œ°width
 = -1;

184 
löe
[
MAXLINELEN
];

194 
width
 = 
x2
-
x1
+1;

197 if(
width
 !
œ°width
 || 
c
 !
œ°cﬁ‹
) {

198 
œ°width
 = 
width
;

199 
œ°cﬁ‹
 = 
c
;

200 
i
=0; i<
width
; ++i)

201 
löe
[
i
] = 
c
;

203 if(
gr_mode
 =
MWMODE_XOR
) {

204 
	`vga_gësˇn£gmít
(
gëlöe
, 
x1
, 
y
, 
width
);

205 
i
=0; i<
width
; ++i)

206 
löe
[
i
] ^
gëlöe
[i];

207 
œ°width
 = -1;

209 
	`vga_døwsˇn£gmít
(
löe
, 
x1
, 
y
, 
width
);

216 
	}
}

219 
	$SVGA_døwvlöe
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

221 if(
gr_mode
 =
MWMODE_COPY
) {

222 
	`vga_£ãgacﬁ‹
(
c
);

223 
	`vga_døwlöe
(
x
, 
y1
, x, 
y2
);

227 
y1
 <
y2
)

228 
	`SVGA_døwpixñ
(
psd
, 
x
, 
y1
++, 
c
);

229 
	}
}

232 
	$SVGA_fûÃe˘
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
y1
, MWCOORD 
x2
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

234 
y1
 <
y2
)

235 
	`SVGA_døwhlöe
(
psd
, 
x1
, 
x2
, 
y1
++, 
c
);

236 
	}
}

241 
	$SVGA_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
, MWCOORD 
h
,

242 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

244 
löe
[
MAXLINELEN
];

246 
	`as£π
 (
d°x
 >0 && d°x < 
d°psd
->
xªs
);

247 
	`as£π
 (
d°y
 >0 && d°y < 
d°psd
->
yªs
);

248 
	`as£π
 (
w
 > 0);

249 
	`as£π
 (
h
 > 0);

250 
	`as£π
 (
§cx
 >0 && srcx < 
§˝sd
->
xªs
);

251 
	`as£π
 (
§cy
 >0 && srcy < 
§˝sd
->
yªs
);

252 
	`as£π
 (
d°x
+
w
 <
d°psd
->
xªs
);

253 
	`as£π
 (
d°y
+
h
 <
d°psd
->
yªs
);

254 
	`as£π
 (
§cx
+
w
 <
§˝sd
->
xªs
);

255 
	`as£π
 (
§cy
+
h
 <
§˝sd
->
yªs
);

257 if(!(
§˝sd
->
Êags
 & 
PSF_SCREEN
Ë|| !(
d°psd
->flags & PSF_SCREEN))

260 --
h
 >= 0) {

261 
	`vga_gësˇn£gmít
(
löe
, 
§cx
, 
§cy
, 
w
);

262 
	`vga_døwsˇn£gmít
(
löe
, 
d°x
, 
d°y
, 
w
);

263 ++
d°y
;

264 ++
§cy
;

266 
	}
}

268 
	gÁde
 = 100;

271 
	$£tÁdñevñ
(
PSD
 
psd
, 
f
)

273 
i
;

274 
MWPALENTRY
 
gr_∑Àâe
[256];

275 
MWPALENTRY
 
loˇl_∑Àâe
[256];

277 if(
psd
->
pixty≥
 !
MWPF_PALETTE
)

280 
Áde
 = 
f
;

281 if(
Áde
 > 100)

282 
Áde
 = 100;

283 
i
=0; i<256; ++i) {

285 
loˇl_∑Àâe
[
i
].
r
 = (
gr_∑Àâe
[i].∏* 
Áde
 / 100);

286 
loˇl_∑Àâe
[
i
].
g
 = (
gr_∑Àâe
[i].g * 
Áde
 / 100);

287 
loˇl_∑Àâe
[
i
].
b
 = (
gr_∑Àâe
[i].b * 
Áde
 / 100);

289 
	`SVGA_£çÆëã
–
psd
, 0,256,
loˇl_∑Àâe
 );

290 
	}
}

	@drivers/scr_tc.c

21 
	~<°dio.h
>

22 
	~<gøphics.h
>

23 
	~"devi˚.h
"

24 
	~"gíf⁄t.h
"

27 
PSD
 
BGI_›í
(PSD 
psd
);

28 
BGI_˛o£
(
PSD
 
psd
);

29 
BGI_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
);

30 
BGI_£çÆëã
(
PSD
 
psd
,
fú°
,
cou¡
,
MWPALENTRY
 *
∑l
);

31 
BGI_døwpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
);

32 
MWPIXELVAL
 
BGI_ªadpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
);

33 
BGI_døwhlöe
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
);

34 
BGI_døwvlöe
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
);

35 
BGI_fûÃe˘
(
PSD
 
psd
,
MWCOORD
 
x1
,MWCOORD 
y1
,MWCOORD 
x2
,MWCOORD 
y2
,
MWPIXELVAL
 
c
);

36 
BGI_blô
(
PSD
 
d°psd
,
MWCOORD
 
de°x
,MWCOORD 
de°y
,MWCOORD 
w
,MWCOORD 
h
,

37 
PSD
 
§˝sd
,
MWCOORD
 
§cx
,MWCOORD 
§cy
,
›
);

38 
PSD
 
BGI_Æloˇãmemgc
(PSD 
psd
);

40 
SCREENDEVICE
 
	gs¸dev
 = {

41 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
NULL
,

42 
BGI_›í
,

43 
BGI_˛o£
,

44 
BGI_gës¸ìnöfo
,

45 
BGI_£çÆëã
,

46 
BGI_døwpixñ
,

47 
BGI_ªadpixñ
,

48 
BGI_døwhlöe
,

49 
BGI_døwvlöe
,

50 
BGI_fûÃe˘
,

51 
gí_f⁄ts
,

52 
BGI_blô
,

53 
NULL
,

54 
NULL
,

55 
NULL
,

56 
BGI_Æloˇãmemgc
,

57 
NULL
,

58 
NULL


62 
gr_mode
;

63 
löe£âög°y≥
 
	glöeöfo
;

64 
∑Àâëy≥
 
	gbgi_∑l
;

66 
PSD


67 
	$BGI_›í
(
PSD
 
psd
)

69 
gd
=
VGA
;

70 
gm
=
VGAHI
;

72 
	`ªgi°îbgidrivî
(
EGAVGA_drivî
);

73 
	`öôgøph
(&
gd
,&
gm
,"");

75 
	`gëlöe£âögs
(&
löeöfo
);

77 
psd
->
xªs
 =Ösd->
xvúåes
 = 
	`gëmaxx
()+1;

78 
psd
->
yªs
 =Ösd->
yvúåes
 = 
	`gëmaxy
()+1;

79 
psd
->
löñí
 = 
löeöfo
.
thick√ss
;

80 
psd
->
∂™es
 = 1;

81 
psd
->
bµ
 = 4;

82 
psd
->
ncﬁ‹s
 = 
	`gëmaxcﬁ‹
() + 1;

83 
psd
->
Êags
 = 
PSF_SCREEN
;

84 
psd
->
addr
 = 0;

87 
psd
->
pixty≥
 = 
MWPF_PALETTE
;

88  
psd
;

89 
	}
}

92 
	$BGI_˛o£
(
PSD
 
psd
)

94 
	`˛o£gøph
();

95 
	}
}

98 
	$BGI_gës¸ìnöfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
)

100 
psi
->
rows
 = 
psd
->
yvúåes
;

101 
psi
->
cﬁs
 = 
psd
->
xvúåes
;

102 
psi
->
∂™es
 = 
psd
->planes;

103 
psi
->
bµ
 = 
psd
->bpp;

104 
psi
->
ncﬁ‹s
 = 
psd
->ncolors;

105 
psi
->
pixty≥
 = 
psd
->pixtype;

106 
psi
->
f⁄ts
 = 
NUMBER_FONTS
;

108 if(
s¸dev
.
yvúåes
 > 480) {

110 
psi
->
xdpcm
 = 33;

111 
psi
->
ydpcm
 = 33;

112 } if(
s¸dev
.
yvúåes
 > 350) {

114 
psi
->
xdpcm
 = 27;

115 
psi
->
ydpcm
 = 27;

118 
psi
->
xdpcm
 = 27;

119 
psi
->
ydpcm
 = 19;

121 
	}
}

124 
	$BGI_£çÆëã
(
PSD
 
psd
,
fú°
,
cou¡
,
MWPALENTRY
 *
∑l
)

127 
	}
}

130 
	$BGI_døwpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

132 
gr_mode
) {

133 
MWMODE_COPY
: ;

134 
MWMODE_XOR
: 
c
 ^
	`gëpixñ
(
x
, 
y
); ;

135 
MWMODE_OR
: 
c
 |
	`gëpixñ
(
x
, 
y
); ;

136 
MWMODE_AND
: 
c
 &
	`gëpixñ
(
x
, 
y
); ;

138 
	`puçixñ
(
x
, 
y
, 
c
);

139 
	}
}

141 
MWPIXELVAL


142 
	$BGI_ªadpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
)

144  
	`gëpixñ
(
x
, 
y
);

145 
	}
}

148 
	$BGI_døwhlöe
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

150 
MWCOORD
 
x
;

152 i‡(
x1
 > 
x2
) {

153 
x
 = 
x1
;

154 
x1
 = 
x2
;

155 
x2
 = 
x
;

158 
	`£tcﬁ‹
(
c
);

159 
gr_mode
) {

160 
MWMODE_COPY
:

161 
	`£twrôemode
(
COPY_PUT
);

163 
MWMODE_XOR
:

164 
	`£twrôemode
(
XOR_PUT
);

166 
MWMODE_OR
:

167 
x
 = 
x1
; x <
x2
; x++)

168 
	`puçixñ
(
x
, 
y
, 
c
 | 
	`gëpixñ
(x, y));

170 
MWMODE_AND
:

171 
x
 = 
x1
; x <
x2
; x++)

172 
	`puçixñ
(
x
, 
y
, 
c
 & 
	`gëpixñ
(x, y));

175 
	`löe
(
x1
, 
y
, 
x2
, y);

176 
	}
}

179 
	$BGI_døwvlöe
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

181 
MWCOORD
 
y
;

183 i‡(
y1
 > 
y2
) {

184 
y
 = 
y1
;

185 
y1
 = 
y2
;

186 
y2
 = 
y
;

189 
	`£tcﬁ‹
(
c
);

190 
gr_mode
) {

191 
MWMODE_COPY
:

192 
	`£twrôemode
(
COPY_PUT
);

194 
MWMODE_XOR
:

195 
	`£twrôemode
(
XOR_PUT
);

197 
MWMODE_OR
:

198 
y
 = 
y1
; y <
y2
; y++)

199 
	`puçixñ
(
x
, 
y
, 
c
 | 
	`gëpixñ
(x, y));

201 
MWMODE_AND
:

202 
y
 = 
y1
; y <
y2
; y++)

203 
	`puçixñ
(
x
, 
y
, 
c
 & 
	`gëpixñ
(x, y));

206 
	`löe
(
x
, 
y1
, x, 
y2
);

207 
	}
}

210 
	$BGI_fûÃe˘
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
y1
, MWCOORD 
x2
, MWCOORD 
y2
,

211 
MWPIXELVAL
 
c
)

213 
MWCOORD
 
x
, 
y
;

215 i‡(
x1
 > 
x2
) {

216 
x
 = 
x1
;

217 
x1
 = 
x2
;

218 
x2
 = 
x
;

220 i‡(
y1
 > 
y2
) {

221 
y
 = 
y1
;

222 
y1
 = 
y2
;

223 
y2
 = 
y
;

226 
gr_mode
) {

227 
MWMODE_COPY
:

228 
	`£tfûl°yÀ
(1,
c
);

229 
	`b¨
(
x1
, 
y1
, 
x2
, 
y2
);

232 
MWMODE_XOR
:

233 
x
 = 
x1
; x <
x2
; x++)

234 
y
 = 
y1
; y <
y2
; y++)

235 
	`puçixñ
(
x
, 
y
, 
c
 ^ 
	`gëpixñ
(x, y));

238 
MWMODE_OR
:

239 
x
 = 
x1
; x <
x2
; x++)

240 
y
 = 
y1
; y <
y2
; y++)

241 
	`puçixñ
(
x
, 
y
, 
c
 | 
	`gëpixñ
(x, y));

244 
MWMODE_AND
:

245 
x
 = 
x1
; x <
x2
; x++)

246 
y
 = 
y1
; y <
y2
; y++)

247 
	`puçixñ
(
x
, 
y
, 
c
 & 
	`gëpixñ
(x, y));

253 
	}
}

256 
	$BGI_blô
(
PSD
 
d°psd
,
MWCOORD
 
de°x
,MWCOORD 
de°y
,MWCOORD 
w
,MWCOORD 
h
,

257 
PSD
 
§˝sd
,
MWCOORD
 
§cx
,MWCOORD 
§cy
,
›
)

260 
	}
}

263 
PSD


264 
	$BGI_Æloˇãmemgc
(
PSD
 
psd
)

267  
NULL
;

268 
	}
}

	@drivers/scr_x11.c

12 
	~<°dio.h
>

13 
	~<°rög.h
>

14 
	~<°dlib.h
>

15 
	~<X11/Xlib.h
>

16 
	~<X11/Xutû.h
>

17 
	~<as£π.h
>

18 
	~"devi˚.h
"

19 
	~"fb.h
"

20 
	~"gímem.h
"

21 
	~"gíf⁄t.h
"

24 #i‚de‡
SCREEN_WIDTH


25 #îr‹ 
SCREEN_WIDTH
 
nŸ
 
deföed


28 #i‚de‡
SCREEN_HEIGHT


29 #îr‹ 
SCREEN_HEIGHT
 
nŸ
 
deföed


32 #i‚de‡
MWPIXEL_FORMAT


33 #îr‹ 
MWPIXEL_FORMAT
 
nŸ
 
deföed


37 #i‡!
deföed
(
SCREEN_DEPTH
Ë&& (
MWPIXEL_FORMAT
 =
MWPF_PALETTE
)

38 #îr‹ 
SCREEN_DEPTH
 
nŸ
 
deföed
 - 
mu°
 
be
 
£t
 
∑Àâe
 
modes


42 
MWCOORD
 
	gnxªs
;

43 
MWCOORD
 
	gnyªs
;

46 
PSD
 
X11_›í
(PSD 
psd
);

47 
X11_˛o£
(
PSD
 
psd
);

48 
X11_gës¸ìnöfo
(
PSD
 
psd
, 
PMWSCREENINFO
 
psi
);

49 
X11_£çÆëã
(
PSD
 
psd
, 
fú°
, 
cou¡
, 
MWPALENTRY
 * 
∑l
);

50 
X11_døwpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
);

51 
MWPIXELVAL
 
X11_ªadpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
);

52 
X11_døwhlöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
,

53 
MWPIXELVAL
 
c
);

54 
X11_døwvlöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
,

55 
MWPIXELVAL
 
c
);

56 
X11_fûÃe˘
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
y1
, MWCOORD 
x2
,

57 
MWCOORD
 
y2
, 
MWPIXELVAL
 
c
);

58 
X11_blô
(
PSD
 
d°psd
, 
MWCOORD
 
de°x
, MWCOORD 
de°y
, MWCOORD 
w
,

59 
MWCOORD
 
h
, 
PSD
 
§˝sd
, MWCOORD 
§cx
, MWCOORD 
§cy
, 
›
);

60 
X11_¥e£À˘
(
PSD
 
psd
);

61 
X11_døw¨ó
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
, 
›
);

62 
X11_°ªtchblôex
(
PSD
 
d°psd
, PSD 
§˝sd
, 
MWCOORD
 
de°_x_°¨t
,

63 
MWCOORD
 
de°_y_°¨t
, MWCOORD 
width
, MWCOORD 
height
, 
x_díomö©‹
,

64 
y_díomö©‹
, 
§c_x_‰a˘i⁄
, 
§c_y_‰a˘i⁄
,

65 
x_°ï_‰a˘i⁄
, 
y_°ï_‰a˘i⁄
, 
›
);

67 
SCREENDEVICE
 
	gs¸dev
 = {

68 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
NULL
,

69 
X11_›í
,

70 
X11_˛o£
,

71 
X11_gës¸ìnöfo
,

72 
X11_£çÆëã
,

73 
X11_døwpixñ
,

74 
X11_ªadpixñ
,

75 
X11_døwhlöe
,

76 
X11_døwvlöe
,

77 
X11_fûÃe˘
,

78 
gí_f⁄ts
,

79 
X11_blô
,

80 
X11_¥e£À˘
,

81 
X11_døw¨ó
,

82 
NULL
,

83 
gí_Æloˇãmemgc
,

84 
fb_m≠memgc
,

85 
gí_‰ìmemgc
,

86 
NULL
,

87 
NULL
,

89 
NULL
,

90 
X11_°ªtchblôex
,

94 
Di•œy
 *
	gx11_dpy
;

95 
	gx11_s¸
;

96 
VisuÆ
 *
	gx11_vis
;

97 
Cﬁ‹m≠
 
	gx11_cﬁ‹m≠
;

98 
Wödow
 
	gx11_wö
;

99 
GC
 
	gx11_gc
;

100 
	gx11_evít_mask
;

102 
	gx11_width
, 
	gx11_height
;

103 
	gx11_dïth
;

105 
	gx11_is_∑Àâe
;

108 
	gx11_r_shi·
;

109 
	gx11_r_mask
;

110 
	gx11_g_shi·
;

111 
	gx11_g_mask
;

112 
	gx11_b_shi·
;

113 
	gx11_b_mask
;

115 
	gx11_cﬁ‹m≠_ö°ÆÀd
 = 0;

116 
SCREENDEVICE
 
	gßvebôs
;

119 
XCﬁ‹
 
	gx11_∑Àâe
[256];

120 
	gx11_∑l_max
 = 0;

122 #i‡
MWPIXEL_FORMAT
 !
MWPF_PALETTE


124 
	#COLOR_CACHE_SIZE
 1001

	)

125 
	scﬁ‹_ˇche
 {

126 
	möô
;

127 
	mr
;

128 
	mg
;

129 
	mb
;

130 
XCﬁ‹
 
	mc
;

132 
cﬁ‹_ˇche
 
	gcˇche
[
COLOR_CACHE_SIZE
];

135 
	$lookup_cﬁ‹
(
r
, 
g
, 
b
)

137 
ix
 = ((
r
 << 16Ë+ (
g
 << 8Ë+ 
b
Ë% 
COLOR_CACHE_SIZE
;

139 i‡(
cˇche
[
ix
].
öô
 || (cˇche[ix].
r
 !rË|| (cˇche[ix].
g
 != g)

140 || (
cˇche
[
ix
].
b
 != b)) {

141 
•ec
[20];

142 
XCﬁ‹
 
exa˘
;

143 
XCﬁ‹
 
def
;

145 
cˇche
[
ix
].
öô
 = 0;

146 
cˇche
[
ix
].
r
 =Ñ;

147 
cˇche
[
ix
].
g
 = g;

148 
cˇche
[
ix
].
b
 = b;

149 
	`•rötf
(
•ec
, "#%02x%02x%02x", 
r
, 
g
, 
b
);

150 
	`XLookupCﬁ‹
(
x11_dpy
, 
x11_cﬁ‹m≠
, 
•ec
, &
exa˘
, &
def
);

151 
	`XAŒocCﬁ‹
(
x11_dpy
, 
x11_cﬁ‹m≠
, &
def
);

152 
cˇche
[
ix
].
c
 = 
def
;

158  (Ë
cˇche
[
ix
].
c
.
pixñ
;

159 
	}
}

163 #i‡
MWPIXEL_FORMAT
 !
MWPF_PALETTE


165 #i‡(
MWPIXEL_FORMAT
 =
MWPF_TRUECOLOR888
Ë|| (MWPIXEL_FORMAT =
MWPF_TRUECOLOR0888
Ë|| (MWPIXEL_FORMAT =
MWPF_TRUECOLOR8888
)

166 
	#PIXEL2RED8
(
p
Ë
	`PIXEL888RED8
’)

	)

167 
	#PIXEL2GREEN8
(
p
Ë
	`PIXEL888GREEN8
’)

	)

168 
	#PIXEL2BLUE8
(
p
Ë
	`PIXEL888BLUE8
’)

	)

169 
	#PIXEL2RED32
(
p
Ë
	`PIXEL888RED32
’)

	)

170 
	#PIXEL2GREEN32
(
p
Ë
	`PIXEL888GREEN32
’)

	)

171 
	#PIXEL2BLUE32
(
p
Ë
	`PIXEL888BLUE32
’)

	)

172 #ñi‡
MWPIXEL_FORMAT
 =
MWPF_TRUECOLOR565


173 
	#PIXEL2RED8
(
p
Ë
	`PIXEL565RED8
’)

	)

174 
	#PIXEL2GREEN8
(
p
Ë
	`PIXEL565GREEN8
’)

	)

175 
	#PIXEL2BLUE8
(
p
Ë
	`PIXEL565BLUE8
’)

	)

176 
	#PIXEL2RED32
(
p
Ë
	`PIXEL565RED32
’)

	)

177 
	#PIXEL2GREEN32
(
p
Ë
	`PIXEL565GREEN32
’)

	)

178 
	#PIXEL2BLUE32
(
p
Ë
	`PIXEL565BLUE32
’)

	)

179 #ñi‡
MWPIXEL_FORMAT
 =
MWPF_TRUECOLOR555


180 
	#PIXEL2RED8
(
p
Ë
	`PIXEL555RED8
’)

	)

181 
	#PIXEL2GREEN8
(
p
Ë
	`PIXEL555GREEN8
’)

	)

182 
	#PIXEL2BLUE8
(
p
Ë
	`PIXEL555BLUE8
’)

	)

183 
	#PIXEL2RED32
(
p
Ë
	`PIXEL555RED32
’)

	)

184 
	#PIXEL2GREEN32
(
p
Ë
	`PIXEL555GREEN32
’)

	)

185 
	#PIXEL2BLUE32
(
p
Ë
	`PIXEL555BLUE32
’)

	)

186 #ñi‡
MWPIXEL_FORMAT
 =
MWPF_TRUECOLOR332


187 
	#PIXEL2RED8
(
p
Ë
	`PIXEL332RED8
’)

	)

188 
	#PIXEL2GREEN8
(
p
Ë
	`PIXEL332GREEN8
’)

	)

189 
	#PIXEL2BLUE8
(
p
Ë
	`PIXEL332BLUE8
’)

	)

190 
	#PIXEL2RED32
(
p
Ë
	`PIXEL332RED32
’)

	)

191 
	#PIXEL2GREEN32
(
p
Ë
	`PIXEL332GREEN32
’)

	)

192 
	#PIXEL2BLUE32
(
p
Ë
	`PIXEL332BLUE32
’)

	)

196 
	#PIXELVAL_to_pixñ
(
c
Ë(
x11_is_∑Àâe
 \

197 ? 
	`lookup_cﬁ‹
(
	`PIXEL2RED8
(
c
), 
	`PIXEL2GREEN8
(c), 
	`PIXEL2BLUE8
(c)) \

198 : ( ((
	`PIXEL2RED32
(
c
Ë>> 
x11_r_shi·
Ë& 
x11_r_mask
) \

199 | ((
	`PIXEL2GREEN32
(
c
Ë>> 
x11_g_shi·
Ë& 
x11_g_mask
) \

200 | ((
	`PIXEL2BLUE32
(
c
Ë>> 
x11_b_shi·
Ë& 
x11_b_mask
ËË)

	)

203 
	#PIXELVAL_to_pixñ
(
c
Ë(()(cË> ()
x11_∑l_max
 ? 0 : 
x11_∑Àâe
[c].
pixñ
)

	)

208 
	$£t_cﬁ‹
(
MWPIXELVAL
 
c
)

210 
ﬁdc
 = 0x80000001;

212 i‡(
c
 !
ﬁdc
) {

213 
ﬁdc
 = 
c
;

214 
	`XSëF‹eground
(
x11_dpy
, 
x11_gc
, 
	`PIXELVAL_to_pixñ
(
c
));

216 
	}
}

219 
	gx11_ﬁd_mode
 = -1;

221 
	#£t_mode
(
√w_mode
) do { \

222 i‡(
√w_mode
 !
x11_ﬁd_mode
) { \

223 
	`£t_mode_2
(
√w_mode
); \

225 } 0)

	)

228 
	$£t_mode_2
(
√w_mode
)

230 
func
 = 
GXc›y
;

231 
√w_mode
) {

232 
MWMODE_COPY
:

233 
func
 = 
GXc›y
;

235 
MWMODE_XOR
:

236 
func
 = 
GXx‹
;

238 
MWMODE_OR
:

239 
func
 = 
GX‹
;

241 
MWMODE_AND
:

242 
func
 = 
GX™d
;

244 
MWMODE_CLEAR
:

245 
func
 = 
GX˛ór
;

247 
MWMODE_SETTO1
:

248 
func
 = 
GX£t
;

250 
MWMODE_EQUIV
:

251 
func
 = 
GXequiv
;

253 
MWMODE_NOR
:

254 
func
 = 
GXn‹
;

256 
MWMODE_NAND
:

257 
func
 = 
GX«nd
;

259 
MWMODE_INVERT
:

260 
func
 = 
GXövît
;

262 
MWMODE_COPYINVERTED
:

263 
func
 = 
GXc›yInvîãd
;

265 
MWMODE_ORINVERTED
:

266 
func
 = 
GX‹Invîãd
;

268 
MWMODE_ANDINVERTED
:

269 
func
 = 
GX™dInvîãd
;

271 
MWMODE_ORREVERSE
:

272 
func
 = 
GX‹Revî£
;

274 
MWMODE_ANDREVERSE
:

275 
func
 = 
GX™dRevî£
;

277 
MWMODE_NOOP
:

278 
func
 = 
GXno›
;

283 
	`XSëFun˘i⁄
(
x11_dpy
, 
x11_gc
, 
func
);

284 
x11_ﬁd_mode
 = 
√w_mode
;

285 
	}
}

288 
	$upd©e_‰om_ßvebôs
(
de°x
, 
de°y
, 
w
, 
h
)

290 
XImage
 *
img
;

291 
x
, 
y
;

292 *
d©a
;

295 i‡(
x11_dïth
 >= 24)

296 
d©a
 = 
	`mÆloc
(
w
 * 4 * 
h
);

297 i‡(
x11_dïth
 > 8)

298 
d©a
 = 
	`mÆloc
(
w
 * 2 * 
h
);

300 
d©a
 = 
	`mÆloc
((
w
 * 
x11_dïth
 + 7Ë/ 8 * 
h
);

303 
img
 = 
	`XCª©eImage
(
x11_dpy
, 
x11_vis
, 
x11_dïth
, 
ZPixm≠
,

304 0, 
d©a
, 
w
, 
h
, 8, 0);

308 #i‡
MWPIXEL_FORMAT
 =
MWPF_TRUECOLOR332


310 
ADDR8
 
dbuf
 = ((ADDR8Ë
ßvebôs
.
addr
)

311 + 
de°x
 + 
de°y
 * 
ßvebôs
.
löñí
;

312 
löedñè
 = 
ßvebôs
.
löñí
 - 
w
;

313 
y
 = 0; y < 
h
; y++) {

314 
x
 = 0; x < 
w
; x++) {

315 
MWPIXELVAL
 
c
 = *
dbuf
++;

316 
pixñ
 = 
	`PIXELVAL_to_pixñ
(
c
);

317 
	`XPutPixñ
(
img
, 
x
, 
y
, 
pixñ
);

319 
dbuf
 +
löedñè
;

322 #ñi‡(
MWPIXEL_FORMAT
 =
MWPF_TRUECOLOR565
Ë|| (MWPIXEL_FORMAT =
MWPF_TRUECOLOR555
)

324 
ADDR16
 
dbuf
 = ((ADDR16Ë
ßvebôs
.
addr
)

325 + 
de°x
 + 
de°y
 * 
ßvebôs
.
löñí
;

326 
löedñè
 = 
ßvebôs
.
löñí
 - 
w
;

327 
y
 = 0; y < 
h
; y++) {

328 
x
 = 0; x < 
w
; x++) {

329 
MWPIXELVAL
 
c
 = *
dbuf
++;

330 
pixñ
 = 
	`PIXELVAL_to_pixñ
(
c
);

331 
	`XPutPixñ
(
img
, 
x
, 
y
, 
pixñ
);

333 
dbuf
 +
löedñè
;

336 #ñi‡
MWPIXEL_FORMAT
 =
MWPF_TRUECOLOR888


338 
ADDR8
 
dbuf
 = ((ADDR8Ë
ßvebôs
.
addr
)

339 + 3 * (
de°x
 + 
de°y
 * 
ßvebôs
.
löñí
);

340 
löedñè
 = 3 * (
ßvebôs
.
löñí
 - 
w
);

341 
y
 = 0; y < 
h
; y++) {

342 
x
 = 0; x < 
w
; x++) {

343 
MWPIXELVAL
 
c
 = 
	`RGB2PIXEL888
(
dbuf
[2], dbuf[1],

344 
dbuf
[0]);

345 
pixñ
 = 
	`PIXELVAL_to_pixñ
(
c
);

346 
	`XPutPixñ
(
img
, 
x
, 
y
, 
pixñ
);

347 
dbuf
 += 3;

349 
dbuf
 +
löedñè
;

352 #ñi‡(
MWPIXEL_FORMAT
 =
MWPF_TRUECOLOR0888
Ë|| (MWPIXEL_FORMAT =
MWPF_TRUECOLOR8888
)

354 
ADDR32
 
dbuf
 = ((ADDR32Ë
ßvebôs
.
addr
)

355 + 
de°x
 + 
de°y
 * 
ßvebôs
.
löñí
;

356 
löedñè
 = 
ßvebôs
.
löñí
 - 
w
;

357 
y
 = 0; y < 
h
; y++) {

358 
x
 = 0; x < 
w
; x++) {

359 
MWPIXELVAL
 
c
 = *
dbuf
++;

360 
pixñ
 = 
	`PIXELVAL_to_pixñ
(
c
);

361 
	`XPutPixñ
(
img
, 
x
, 
y
, 
pixñ
);

363 
dbuf
 +
löedñè
;

368 
y
 = 0; y < 
h
; y++) {

369 
x
 = 0; x < 
w
; x++) {

370 
MWPIXELVAL
 
c
 = 
ßvebôs
.
	`RódPixñ
(&savebits,

371 
de°x
 + 
x
,

372 
de°y
 + 
y
);

373 
pixñ
 = 
	`PIXELVAL_to_pixñ
(
c
);

374 
	`XPutPixñ
(
img
, 
x
, 
y
, 
pixñ
);

380 
	`£t_mode
(
MWMODE_COPY
);

381 
	`XPutImage
(
x11_dpy
, 
x11_wö
, 
x11_gc
, 
img
, 0, 0, 
de°x
, 
de°y
, 
w
, 
h
);

383 
	`XDe°royImage
(
img
);

384 
	}
}

388 
	$x11_h™dÀ_evít
(
XEvít
 * 
ev
)

390 
öôed
 = 0;

392 i‡(
ev
->
ty≥
 =
Cﬁ‹m≠NŸify
) {

393 i‡(
ev
->
xcﬁ‹m≠
.
wödow
 =
x11_wö
) {

394 i‡(
ev
->
xcﬁ‹m≠
.
°©e
 =
Cﬁ‹m≠In°ÆÀd
) {

395 
	`DPRINTF
("colormap uninstalled\n");

396 
x11_cﬁ‹m≠_ö°ÆÀd
 = 0;

397 } i‡(
ev
->
xcﬁ‹m≠
.
°©e
 =
Cﬁ‹m≠In°ÆÀd
) {

398 
x11_cﬁ‹m≠_ö°ÆÀd
 = 1;

399 
	`DPRINTF
("colormap installed\n");

402 } i‡(
ev
->
ty≥
 =
FocusIn
) {

403 i‡(!
x11_cﬁ‹m≠_ö°ÆÀd
) {

404 
	`DPRINTF
("setting colormap\n");

405 
	`XIn°ÆlCﬁ‹m≠
(
x11_dpy
, 
x11_cﬁ‹m≠
);

406 
öôed
 = 1;

408 } i‡(
ev
->
ty≥
 =
M≠pögNŸify
) {

409 
	`DPRINTF
("Refreshing keyboard mapping\n");

410 
	`XRe‰eshKeybﬂrdM≠pög
(&
ev
->
xm≠pög
);

413 i‡(
ev
->
ty≥
 =
E¡îNŸify
) {

414 i‡(
öôed
)

415 
	`GdShowCurs‹
(&
s¸dev
);

416 } i‡(
ev
->
ty≥
 =
LóveNŸify
) {

417 i‡(
öôed
)

418 
	`GdHideCurs‹
(&
s¸dev
);

422 #ifde‡
USE_EXPOSURE


423 i‡(
ev
->
ty≥
 =
Expo£
) {

424 
	`upd©e_‰om_ßvebôs
(
ev
->
xexpo£
.
x
,Év->xexpo£.
y
,

425 
ev
->
xexpo£
.
width
,Év->xexpo£.
height
);

428 
	}
}

432 
	$x11_îr‹
(
Di•œy
 * 
dpy
, 
XEº‹Evít
 * 
ev
)

434 
îr_°rög
[256];

436 
	`XGëEº‹Text
(
dpy
, 
ev
->
îr‹_code
, 
îr_°rög
, 256);

437 
	`EPRINTF
("X11Éº‹: %s\n", 
îr_°rög
);

439 
	}
}

441 *
	g˛as¢m
[] = { "StaticGray", "GrayScale", "StaticColor",

446 
	$show_visuÆ
(
VisuÆ
 * 
v
)

448 *
«me
 = ((
v
->
˛ass
 < 0) || (v->class > 5)) ? "???" :

449 
˛as¢m
[
v
->
˛ass
];

450  
	`¥ötf
(" VisuÆ cœss: %†(%d)\n", 
«me
, 
v
->
˛ass
);

451  
	`¥ötf
(" id: %ld\n", 
v
->
visuÆid
);

452  
	`¥ötf
(" bôs_≥r_rgb: %d\n", 
v
->
bôs_≥r_rgb
);

453  
	`¥ötf
(" m≠_íåõs: %d\n", 
v
->
m≠_íåõs
);

454  
	`¥ötf
("Ñed_mask: 0x%08lx\n", 
v
->
ªd_mask
);

455  
	`¥ötf
(" gªí_mask: 0x%08lx\n", 
v
->
gªí_mask
);

456  
	`¥ötf
(" blue_mask: 0x%08lx\n", 
v
->
blue_mask
);

457 
	}
}

459 
VisuÆ
 *

460 
	$£À˘_visuÆ
(
Di•œy
 * 
dpy
, 
s¸
)

462 
VisuÆ
 *
vis
 = 
	`XDeÁu…VisuÆ
(
dpy
, 
s¸
);

463 #i‡
MWPIXEL_FORMAT
 !
MWPF_PALETTE


464 
VisuÆ
 *
vis2
 = 
NULL
;

466 
S¸ìn
 *
s¸ìn
 = 
	`XS¸ìnOfDi•œy
(
dpy
, 
s¸
);

467 
d
;

469  
	`¥ötf
("XDefaultVisual:\n");

470 
	`show_visuÆ
(
vis
);

472  
	`¥ötf
("S¸ì¿RoŸDïth: %d\n", 
s¸ìn
->
roŸ_dïth
);

474  
	`¥ötf
("Screen RootVisual\n");

475 
	`show_visuÆ
(
s¸ìn
->
roŸ_visuÆ
);

479 
d
 = 0; d < 
s¸ìn
->
ndïths
; d++) {

480 
Dïth
 *
dp
 = 
s¸ìn
->
dïths
 + 
d
;

481 
v
;

482 
VisuÆ
 *
cur_vis
;

483  
	`¥ötf
("Dïth: %d\n", 
dp
->
dïth
);

484 
v
 = 0; v < 
dp
->
nvisuÆs
; v++) {

485  
	`¥ötf
("VisuÆ: %d\n", 
v
);

486 
cur_vis
 = 
dp
->
visuÆs
 + 
v
;

487 
	`show_visuÆ
(
cur_vis
);

488 #i‡
MWPIXEL_FORMAT
 !
MWPF_PALETTE


489 i‡((
vis
->
˛ass
 !
TrueCﬁ‹
)

490 && (
dp
->
dïth
 =
s¸ìn
->
roŸ_dïth
)

491 && (
cur_vis
->
˛ass
 =
TrueCﬁ‹
)) {

493 i‡((
vis2
 =
NULL
)

494 || (
vis2
->
bôs_≥r_rgb
 <

495 
cur_vis
->
bôs_≥r_rgb
)) {

497 
vis2
 = 
cur_vis
;

503 #i‡
MWPIXEL_FORMAT
 !
MWPF_PALETTE


504 i‡((
vis
->
˛ass
 !
TrueCﬁ‹
Ë&& (
vis2
 !
NULL
)) {

505 
vis
 = 
vis2
;

509 
	`¥ötf
("Selected Visual:\n");

510 
	`show_visuÆ
(
vis
);

513  
vis
;

514 
	}
}

518 
	$x11_£tup_di•œy
()

520 
£tup_√eded
 = 1;

522 i‡(
£tup_√eded
) {

523 *
«me
;

524 #i‡
MWPIXEL_FORMAT
 !
MWPF_PALETTE


525 
i
;

528 i‡((
«me
 = 
	`gëív
("DISPLAY")Ë=
NULL
)

529 
«me
 = ":0";

530 i‡((
x11_dpy
 = 
	`XO≥nDi•œy
(
«me
)Ë=
NULL
)

533 
	`XSëEº‹H™dÀr
(
x11_îr‹
);

535 
x11_width
 = 
nxªs
?Çxªs: 
SCREEN_WIDTH
;

536 
x11_height
 = 
nyªs
?Çyªs: 
SCREEN_HEIGHT
;

537 
x11_s¸
 = 
	`XDeÁu…S¸ìn
(
x11_dpy
);

538 
x11_vis
 = 
	`£À˘_visuÆ
(
x11_dpy
, 
x11_s¸
);

540 i‡((
x11_vis
->
˛ass
 =
SèticGøy
)

541 || (
x11_vis
->
˛ass
 =
GøySˇÀ
)) {

542 
	`EPRINTF
("Nano-X Error: Your X serveráppearsÅo be grayscale only.\nThis isÇot supported.\n");

544 } i‡(
x11_vis
->
˛ass
 =
Dúe˘Cﬁ‹
) {

545 
	`EPRINTF
("Nano-X Error: Your X serveráppearsÅo useÅhe 'DirectColor' format.\nThis isÇot supported.\n");

547 } i‡((
x11_vis
->
˛ass
 =
P£udoCﬁ‹
)

548 || (
x11_vis
->
˛ass
 =
SèticCﬁ‹
)) {

551 
x11_is_∑Àâe
 = 1;

552 } i‡(
x11_vis
->
˛ass
 =
TrueCﬁ‹
) {

555 
mask
;

556 
shi·
;

558 
x11_is_∑Àâe
 = 0;

588 
x11_r_mask
 = 
x11_vis
->
ªd_mask
;

589 
x11_g_mask
 = 
x11_vis
->
gªí_mask
;

590 
x11_b_mask
 = 
x11_vis
->
blue_mask
;

593 
mask
 = 
x11_r_mask
;

594 
shi·
 = 0;

595 
	`as£π
(
mask
);

596 i‡(
mask
) {

597 (
mask
 & 0x80000000UL) == 0) {

598 
mask
 <<= 1;

599 
shi·
++;

602 
x11_r_shi·
 = 
shi·
;

605 
mask
 = 
x11_g_mask
;

606 
shi·
 = 0;

607 
	`as£π
(
mask
);

608 i‡(
mask
) {

609 (
mask
 & 0x80000000UL) == 0) {

610 
mask
 <<= 1;

611 
shi·
++;

614 
x11_g_shi·
 = 
shi·
;

617 
mask
 = 
x11_b_mask
;

618 
shi·
 = 0;

619 
	`as£π
(
mask
);

620 i‡(
mask
) {

621 (
mask
 & 0x80000000UL) == 0) {

622 
mask
 <<= 1;

623 
shi·
++;

626 
x11_b_shi·
 = 
shi·
;

628 
	`as£π
(0);

632 
x11_gc
 = 
	`XDeÁu…GC
(
x11_dpy
, 
x11_s¸
);

634 #i‡
MWPIXEL_FORMAT
 !
MWPF_PALETTE


635 
i
 = 0; i < 
COLOR_CACHE_SIZE
; i++)

636 
cˇche
[
i
].
öô
 = 1;

639 
	`£t_mode
(
gr_mode
);

643 
	`XSynchr⁄ize
(
x11_dpy
, 
True
);

645 
£tup_√eded
 = 0;

648 
	}
}

651 
PSD


652 
	$X11_›í
(
PSD
 
psd
)

654 
XSëWödowAâribuãs
 
©å
;

655 
Pixm≠
 
cur_em±y
;

656 
vÆuemask
;

657 
evít_mask
;

658 
XCﬁ‹
 
cﬁ‹
;

659 
Curs‹
 
curs‹
;

661 
PSUBDRIVER
 
subdrivî
;

662 
size
, 
löñí
;

663 
XSizeHöts
 *
sizehöts
;

665 i‡(
	`x11_£tup_di•œy
() < 0)

666  
NULL
;

668 
x11_evít_mask
 = 
Cﬁ‹m≠Ch™geMask
 | 
FocusCh™geMask
;

671 
evít_mask
 = 
x11_evít_mask
 | 
ExposuªMask
 | 
KeyPªssMask
 |

672 
KeyRñó£Mask
 |

673 
Buâ⁄PªssMask
 |

674 
Buâ⁄Rñó£Mask
 |

675 
PoöãrMŸi⁄Mask
;

678 #ifde‡
USE_EXPOSURE


679 
vÆuemask
 = 
CWSaveUndî
 | 
CWEvítMask
;

681 
vÆuemask
 = 
CWSaveUndî
 | 
CWEvítMask
 | 
CWBackögSt‹e
;

684 
©å
.
backög_°‹e
 = 
Always
;

685 
©å
.
ßve_undî
 = 
True
;

686 
©å
.
evít_mask
 =Évent_mask;

689 
x11_cﬁ‹m≠
 = 
	`XCª©eCﬁ‹m≠
(
x11_dpy
, 
	`XDeÁu…RoŸWödow
(x11_dpy),

690 
x11_vis
, 
AŒocN⁄e
);

691 
©å
.
cﬁ‹m≠
 = 
x11_cﬁ‹m≠
;

692 
vÆuemask
 |
CWCﬁ‹m≠
;

695 
x11_wö
 = 
	`XCª©eWödow
(
x11_dpy
, 
	`XDeÁu…RoŸWödow
(x11_dpy), 100,

697 
x11_width
,

698 
x11_height
,

700 
C›yFromP¨ít
,

701 
I≈utOuçut
,

702 
x11_vis
,

703 
vÆuemask
,

704 &
©å


707 
sizehöts
 = 
	`XAŒocSizeHöts
();

708 i‡(
sizehöts
 !
NULL
) {

709 
sizehöts
->
Êags
 = 
PMöSize
 | 
PMaxSize
;

710 
sizehöts
->
mö_width
 = 
x11_width
;

711 
sizehöts
->
mö_height
 = 
x11_height
;

712 
sizehöts
->
max_width
 = 
x11_width
;

713 
sizehöts
->
max_height
 = 
x11_height
;

714 
	`XSëWMN‹mÆHöts
(
x11_dpy
, 
x11_wö
, 
sizehöts
);

715 
	`XFªe
(
sizehöts
);

718 
x11_dïth
 = 
	`XDeÁu…Dïth
(
x11_dpy
, 
x11_s¸
);

728 
x11_cﬁ‹m≠
 = 
	`XDeÁu…Cﬁ‹m≠
(
x11_dpy
, 
x11_s¸
);

729 i‡(
x11_vis
->
˛ass
 & 1)

730 
x11_cﬁ‹m≠
 = 
	`XC›yCﬁ‹m≠AndFªe
(
x11_dpy
, x11_colormap);

745 
cur_em±y
 = 
	`XCª©eBôm≠FromD©a
(
x11_dpy
, 
x11_wö
, "\0", 1, 1);

746 
curs‹
 = 
	`XCª©ePixm≠Curs‹
(
x11_dpy
, 
cur_em±y
, cur_empty,

747 &
cﬁ‹
, &color, 0, 0);

748 
	`XDeföeCurs‹
(
x11_dpy
, 
x11_wö
, 
curs‹
);

749 
	`XSt‹eName
(
x11_dpy
, 
x11_wö
, "Microwindows");

751 
	`XM≠Wödow
(
x11_dpy
, 
x11_wö
);

752 
	`XFlush
(
x11_dpy
);

759 
	`XMaskEvít
(
x11_dpy
, 
x11_evít_mask
, &
ev
);

760 
	`XPutBackEvít
(
x11_dpy
, &
ev
);

762 
	`XIn°ÆlCﬁ‹m≠
(
x11_dpy
, 
x11_cﬁ‹m≠
);

764 
psd
->
xªs
 =Ösd->
xvúåes
 = 
x11_width
;

765 
psd
->
yªs
 =Ösd->
yvúåes
 = 
x11_height
;

766 
psd
->
löñí
 = 
x11_width
;

767 
psd
->
∂™es
 = 1;

768 
psd
->
pixty≥
 = 
MWPIXEL_FORMAT
;

769 
psd
->
pixty≥
) {

770 #i‡
MWPIXEL_FORMAT
 =
MWPF_PALETTE


771 
MWPF_PALETTE
:

772 
psd
->
bµ
 = 
SCREEN_DEPTH
;

775 
MWPF_TRUECOLOR0888
:

776 
MWPF_TRUECOLOR8888
:

778 
psd
->
bµ
 = 32;

780 
MWPF_TRUECOLOR888
:

781 
psd
->
bµ
 = 24;

783 
MWPF_TRUECOLOR565
:

784 
MWPF_TRUECOLOR555
:

785 
psd
->
bµ
 = 16;

787 
MWPF_TRUECOLOR332
:

788 
psd
->
bµ
 = 8;

794 
	`GdCÆcMemGCAŒoc
(
psd
,Ösd->
xªs
,Ösd->
yªs
,Ösd->
∂™es
,

795 
psd
->
bµ
, &
size
, &psd->
löñí
);

797 
psd
->
ncﬁ‹s
 =Ösd->
bµ
 >= 24 ? (1 << 24) : (1 <<Ösd->bpp);

798 
psd
->
Êags
 = 
PSF_SCREEN
 | 
PSF_HAVEBLIT
;

799 
psd
->
size
 = 0;

800 
psd
->
addr
 = 
NULL
;

801 
psd
->
p‹åaô
 = 
MWPORTRAIT_NONE
;

804 
ßvebôs
 = *
psd
;

805 
ßvebôs
.
Êags
 = 
PSF_MEMORY
 | 
PSF_HAVEBLIT
;

808 
subdrivî
 = 
	`£À˘_fb_subdrivî
(&
ßvebôs
);

809 i‡(!
subdrivî
)

810  
NULL
;

814 
	`GdCÆcMemGCAŒoc
(&
ßvebôs
, savebôs.
xvúåes
, savebôs.
yvúåes
, 0,

815 0, &
size
, &
löñí
);

816 
ßvebôs
.
löñí
 =Üinelen;

817 
ßvebôs
.
size
 = size;

818 i‡((
ßvebôs
.
addr
 = 
	`mÆloc
(
size
)Ë=
NULL
)

819  
NULL
;

821 
	`£t_subdrivî
(&
ßvebôs
, 
subdrivî
, 
TRUE
);

825 
psd
->
addr
 = 
ßvebôs
.addr;

827  
psd
;

828 
	}
}

831 
	$X11_˛o£
(
PSD
 
psd
)

834 
	`‰ì
(
ßvebôs
.
addr
);

836 
	`XClo£Di•œy
(
x11_dpy
);

837 
	}
}

841 
	$X11_gës¸ìnöfo
(
PSD
 
psd
, 
PMWSCREENINFO
 
psi
)

843 
psi
->
rows
 = 
psd
->
yvúåes
;

844 
psi
->
cﬁs
 = 
psd
->
xvúåes
;

845 
psi
->
∂™es
 = 
psd
->planes;

846 
psi
->
bµ
 = 
psd
->bpp;

847 
psi
->
ncﬁ‹s
 = 
psd
->ncolors;

848 
psi
->
p‹åaô
 = 
psd
->portrait;

849 
psi
->
f⁄ts
 = 
NUMBER_FONTS
;

850 
psi
->
xdpcm
 = (
	`Di•œyWidth
(
x11_dpy
, 
x11_s¸
) * 10) /

851 
	`Di•œyWidthMM
(
x11_dpy
, 
x11_s¸
);

852 
psi
->
ydpcm
 = (
	`Di•œyHeight
(
x11_dpy
, 
x11_s¸
) * 10) /

853 
	`Di•œyHeightMM
(
x11_dpy
, 
x11_s¸
);

855 
psi
->
fbdrivî
 = 
FALSE
;

856 
psi
->
pixty≥
 = 
psd
->pixtype;

857 
psd
->
pixty≥
) {

858 
MWPF_TRUECOLOR0888
:

859 
MWPF_TRUECOLOR8888
:

860 
MWPF_TRUECOLOR888
:

861 
psi
->
rmask
 = 0xff0000;

862 
psi
->
gmask
 = 0x00ff00;

863 
psi
->
bmask
 = 0x0000ff;

865 
MWPF_TRUECOLOR565
:

866 
psi
->
rmask
 = 0xf800;

867 
psi
->
gmask
 = 0x07e0;

868 
psi
->
bmask
 = 0x001f;

870 
MWPF_TRUECOLOR555
:

871 
psi
->
rmask
 = 0x7c00;

872 
psi
->
gmask
 = 0x03e0;

873 
psi
->
bmask
 = 0x001f;

875 
MWPF_TRUECOLOR332
:

876 
psi
->
rmask
 = 0xe0;

877 
psi
->
gmask
 = 0x1c;

878 
psi
->
bmask
 = 0x03;

880 
MWPF_PALETTE
:

882 
psi
->
rmask
 = 0xff;

883 
psi
->
gmask
 = 0xff;

884 
psi
->
bmask
 = 0xff;

887 
	}
}

890 
	$X11_£çÆëã
(
PSD
 
psd
, 
fú°
, 
cou¡
, 
MWPALENTRY
 * 
∑l
)

892 
i
;

893 
n
;

895 
i
 = 0; i < 
cou¡
; i++) {

896 
•ec
[20];

897 
r
, 
g
, 
b
;

898 
XCﬁ‹
 
exa˘
;

899 
XCﬁ‹
 
def
;

901 
r
 = 
∑l
[
i
].r;

902 
g
 = 
∑l
[
i
].g;

903 
b
 = 
∑l
[
i
].b;

904 
	`•rötf
(
•ec
, "#%02x%02x%02x", 
r
, 
g
, 
b
);

905 
	`XLookupCﬁ‹
(
x11_dpy
, 
x11_cﬁ‹m≠
, 
•ec
, &
exa˘
, &
def
);

906 
	`XAŒocCﬁ‹
(
x11_dpy
, 
x11_cﬁ‹m≠
, &
def
);

910 
x11_∑Àâe
[
fú°
 + 
i
] = 
def
;

912 
n
 = 
fú°
 + 
cou¡
 - 1;

913 i‡(
n
 > 
x11_∑l_max
)

914 
x11_∑l_max
 = 
n
;

915 
	}
}

919 
	$X11_døwpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

922 
ßvebôs
.
	`DøwPixñ
(&ßvebôs, 
x
, 
y
, 
c
);

924 i‡(
gr_mode
 =
MWMODE_COPY
) {

925 
	`£t_cﬁ‹
(
c
);

926 
	`£t_mode
(
gr_mode
);

927 
	`XDøwPoöt
(
x11_dpy
, 
x11_wö
, 
x11_gc
, 
x
, 
y
);

929 
	`upd©e_‰om_ßvebôs
(
x
, 
y
, 1, 1);

931 
	}
}

933 
MWPIXELVAL


934 
	$X11_ªadpixñ
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

937  
ßvebôs
.
	`RódPixñ
(&ßvebôs, 
x
, 
y
);

938 
	}
}

941 
	$X11_døwhlöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
, 
MWPIXELVAL
 
c
)

944 
ßvebôs
.
	`DøwH‹zLöe
(&ßvebôs, 
x1
, 
x2
, 
y
, 
c
);

946 i‡(
gr_mode
 =
MWMODE_COPY
) {

947 
	`£t_cﬁ‹
(
c
);

948 
	`£t_mode
(
gr_mode
);

949 
	`XDøwLöe
(
x11_dpy
, 
x11_wö
, 
x11_gc
, 
x1
, 
y
, 
x2
, y);

951 
	`upd©e_‰om_ßvebôs
((
x1
 < 
x2
 ? x1 : x2), 
y
,

952 (
x1
 < 
x2
 ? x2 - x1 + 1 : x1 - x2 + 1),

955 
	}
}

958 
	$X11_døwvlöe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y1
, MWCOORD 
y2
, 
MWPIXELVAL
 
c
)

960 
ßvebôs
.
	`DøwVîtLöe
(&ßvebôs, 
x
, 
y1
, 
y2
, 
c
);

962 i‡(
gr_mode
 =
MWMODE_COPY
) {

963 
	`£t_cﬁ‹
(
c
);

964 
	`£t_mode
(
gr_mode
);

965 
	`XDøwLöe
(
x11_dpy
, 
x11_wö
, 
x11_gc
, 
x
, 
y1
, x, 
y2
);

967 
	`upd©e_‰om_ßvebôs
(
x
, (
y1
 < 
y2
 ? y1 : y2),

969 (
y1
 < 
y2
 ? y2 - y1 + 1 : y1 - y2 + 1));

971 
	}
}

974 
	$X11_fûÃe˘
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
y1
, MWCOORD 
x2
, MWCOORD 
y2
,

975 
MWPIXELVAL
 
c
)

978 
ßvebôs
.
	`FûlRe˘
(&ßvebôs, 
x1
, 
y1
, 
x2
, 
y2
, 
c
);

980 i‡(
gr_mode
 =
MWMODE_COPY
) {

981 
	`£t_cﬁ‹
(
c
);

982 
	`£t_mode
(
gr_mode
);

983 
	`XFûlRe˘™gÀ
(
x11_dpy
, 
x11_wö
, 
x11_gc
, 
x1
, 
y1
,

984 (
x2
 - 
x1
Ë+ 1, (
y2
 - 
y1
) + 1);

986 
	`upd©e_‰om_ßvebôs
(
x1
, 
y1
, (
x2
-x1)+1, (
y2
-y1)+1);

988 
	}
}

991 
	$X11_blô
(
PSD
 
d°psd
, 
MWCOORD
 
de°x
, MWCOORD 
de°y
, MWCOORD 
w
, MWCOORD 
h
,

992 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
›
)

994 i‡(
›
 =
MWMODE_NOOP
) {

998 i‡(
§˝sd
->
Êags
 & 
PSF_SCREEN
) {

1000 
§˝sd
 = &
ßvebôs
;

1003 i‡(!(
d°psd
->
Êags
 & 
PSF_SCREEN
)) {

1005 
d°psd
->
	`Blô
(d°psd, 
de°x
, 
de°y
, 
w
, 
h
, 
§˝sd
, 
§cx
, 
§cy
,

1006 
›
);

1011 
ßvebôs
.
	`Blô
(&ßvebôs, 
de°x
, 
de°y
, 
w
, 
h
, 
§˝sd
, 
§cx
, 
§cy
, 
›
);

1018 i‡((
§˝sd
 =&
ßvebôs
Ë&& (
›
 =
MWMODE_COPY
))

1021 i‡((
§˝sd
 =&
ßvebôs
Ë&& (
›
 >0Ë&& (› <
MWMODE_MAX
))

1031 
	`£t_mode
(
›
);

1032 
	`XC›yAªa
(
x11_dpy
, 
x11_wö
, x11_wö, 
x11_gc
,

1033 
§cx
, 
§cy
, 
w
, 
h
, 
de°x
, 
de°y
);

1047 
	`upd©e_‰om_ßvebôs
(
de°x
, 
de°y
, 
w
, 
h
);

1049 
	}
}

1052 
	$X11_°ªtchblôex
(
PSD
 
d°psd
, PSD 
§˝sd
,

1053 
MWCOORD
 
de°_x_°¨t
, MWCOORD 
de°_y_°¨t
,

1054 
MWCOORD
 
width
, MWCOORD 
height
,

1055 
x_díomö©‹
, 
y_díomö©‹
,

1056 
§c_x_‰a˘i⁄
, 
§c_y_‰a˘i⁄
,

1057 
x_°ï_‰a˘i⁄
, 
y_°ï_‰a˘i⁄
, 
›
)

1059 i‡(
›
 =
MWMODE_NOOP
) {

1066 i‡(
§˝sd
->
Êags
 & 
PSF_SCREEN
) {

1068 
§˝sd
 = &
ßvebôs
;

1071 i‡(!(
d°psd
->
Êags
 & 
PSF_SCREEN
)) {

1073 
d°psd
->
	`SåëchBlôEx
(d°psd, 
§˝sd
,

1074 
de°_x_°¨t
, 
de°_y_°¨t
,

1075 
width
, 
height
,

1076 
x_díomö©‹
, 
y_díomö©‹
,

1077 
§c_x_‰a˘i⁄
, 
§c_y_‰a˘i⁄
,

1078 
x_°ï_‰a˘i⁄
, 
y_°ï_‰a˘i⁄
, 
›
);

1083 
ßvebôs
.
	`SåëchBlôEx
(&ßvebôs, 
§˝sd
,

1084 
de°_x_°¨t
, 
de°_y_°¨t
,

1085 
width
, 
height
,

1086 
x_díomö©‹
, 
y_díomö©‹
,

1087 
§c_x_‰a˘i⁄
, 
§c_y_‰a˘i⁄
,

1088 
x_°ï_‰a˘i⁄
, 
y_°ï_‰a˘i⁄
, 
›
);

1094 
	`upd©e_‰om_ßvebôs
(
de°_x_°¨t
, 
de°_y_°¨t
, 
width
, 
height
);

1095 
	}
}

1098 
	$X11_døw¨ó
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
, 
›
)

1100 
	`as£π
(
psd
->
addr
 != 0);

1102 
	`as£π
(
gc
->
d°x
 >0 && gc->d°x + gc->
d°w
 <
psd
->
xªs
);

1105 
	`as£π
(
gc
->
§cy
 >= 0);

1107 
ßvebôs
.
	`DøwAªa
(&ßvebôs, 
gc
, 
›
);

1109 
	`upd©e_‰om_ßvebôs
(
gc
->
d°x
, gc->
d°y
, gc->
d°w
, gc->
d°h
);

1110 
	}
}

1115 
	$X11_¥e£À˘
(
PSD
 
psd
)

1117 
	`XFlush
(
x11_dpy
);

1118 
	}
}

	@drivers/touchscreen_ads.h

1 #i‚de‡
TS_DEVICE


2 
	#TS_DEVICE
 "ADS"

	)

4 
	#TS_DEVICE_FILE
 "/dev/ts"

	)

6 
	sts_evít
 {

7 
	mx
;

8 
	my
;

9 
	m¥essuª
;

	@drivers/touchscreen_ads7846.h

1 #i‚de‡
TS_DEVICE


2 
	#TS_DEVICE
 "ADS7846"

	)

4 
	#TS_DEVICE_FILE
 "/dev/önov©‹_ts"

	)

6 
	sts_evít
 {

7 
	m¥essuª
;

8 
	mx
;

9 
	my
;

10 
	m∑d
;

11 
timevÆ
 
	m°amp
;

	@drivers/touchscreen_ipaq.h

1 #i‚de‡
TS_DEVICE


2 
	#TS_DEVICE
 "I∑q"

	)

4 
	#TS_DEVICE_FILE
 "/dev/h3600_t§aw"

	)

6 
	sts_evít
 {

7 
	m¥essuª
;

8 
	mx
;

9 
	my
;

10 
	m∑d
;

	@drivers/touchscreen_ucb1x00.h

1 #i‚de‡
TS_DEVICE


2 
	#TS_DEVICE
 "UCB1X00"

	)

4 
	#TS_DEVICE_FILE
 "/dev/ucb1x00-ts"

	)

6 
	~<sys/time.h
>

8 
	sts_evít
 {

9 
	m¥essuª
;

10 
	mx
;

11 
	my
;

12 
	m∑d
;

13 
timevÆ
 
	m°amp
;

	@drivers/touchscreen_zaurus.h

1 #i‚de‡
TS_DEVICE


2 
	#TS_DEVICE
 "Zaurus"

	)

4 
	#TS_DEVICE_FILE
 "/dev/sh¨p_ts"

	)

6 
	sts_evít
 {

7 
	mx
;

8 
	my
;

9 
	m¥essuª
;

10 
	mtime°amp
;

	@drivers/vgainit.c

9 
	~"devi˚.h
"

10 
	~"vg≠œn4.h
"

12 #ifde‡
__πems__


13 
	#ROMFONT
 0

	)

15 
	#ROMFONT
 1

	)

19 
	#VGA_ET4000
 0

	)

20 
	#VGA_STANDARD
 1

	)

21 
	#EGA_STANDARD
 0

	)

23 
	#DONE
 0

	)

24 
	#IN
 1

	)

25 
	#OUT
 2

	)

27 
	#RAM_SCAN_LINES
 32

	)

28 
	#FONT_CHARS
 256

	)

29 
	#CHAR_WIDTH
 8

	)

31 
	#PALREG
 0x3c0

	)

32 
	#SEQREG
 0x3c4

	)

33 
	#SEQVAL
 0x3c5

	)

34 
	#GRREG
 0x3˚

	)

35 
	#GRVAL
 0x3cf

	)

36 
	#ATTRREG
 0x3da

	)

37 
	#CRTCREG
 0x3d4

	)

38 
	#CRTCVAL
 0x3d5

	)

40 
	#GENREG1
 0x3c2

	)

41 
	#GENREG2
 0x3cc

	)

42 
	#GENREG3
 0x3ˇ

	)

44 
	#DATA_ROTATE
 3

	)

47 
	ma˘i⁄
;

48 
	mp‹t1
;

49 
	md©a1
;

50 
	mp‹t2
;

51 
	md©a2
;

52 } 
	tREGIO
;

55 #i‡
ROMFONT


56 
FARADDR
 
rom_ch¨_addr
;

57 
ROM_CHAR_HEIGHT
;

61 
REGIO
 
gøphics_⁄
[];

62 
REGIO
 
gøph_off
[];

65 
ega_hwöô
();

66 
ega_hwãrm
();

69 
wrôîegs
(
REGIO
 *
Ω
);

70 
out_w‹d
(
p
,
d
);

71 
£tmode
(
mode
);

74 
	$ega_hwöô
()

76 
	`wrôîegs
(
gøphics_⁄
);

77 
	}
}

80 
	$ega_hwãrm
()

82 
	`£tmode
(
MWMODE_COPY
);

87 
	`out_w‹d
(
SEQREG
, 0x0100);

88 
	`out_w‹d
(
SEQREG
, 0x0402);

89 
	`out_w‹d
(
SEQREG
, 0x0704);

90 
	`out_w‹d
(
SEQREG
, 0x0300);

92 
	`out_w‹d
(
GRREG
, 0x0204);

93 
	`out_w‹d
(
GRREG
, 0x0005);

95 #i‡
ROMFONT


97 
FARADDR
 
§coff£t
;

98 
FARADDR
 
de°off£t
;

99 
d©a
;

100 
ch
;

101 
row
;

103 
§coff£t
 = 
rom_ch¨_addr
;

104 
de°off£t
 = 
EGA_BASE
;

105 
ch
 = 0; ch < 
FONT_CHARS
; ch++) {

106 
row
 = 0;Ñow < 
ROM_CHAR_HEIGHT
;Ñow++) {

107 
d©a
 = 
	`GETBYTE_FP
(
§coff£t
++);

108 
	`PUTBYTE_FP
(
de°off£t
++, 
d©a
);

110 
de°off£t
 +(
RAM_SCAN_LINES
 - 
ROM_CHAR_HEIGHT
);

116 
	`wrôîegs
(
gøph_off
);

117 
	}
}

121 
	$wrôîegs
(
REGIO
 *
Ω
)

123 ; 
Ω
->
a˘i⁄
 !
DONE
;Ñp++) {

124 
Ω
->
a˘i⁄
) {

125 
IN
:

126 
	`öp
(
Ω
->
p‹t1
);

128 
OUT
:

129 
	`ouç
(
Ω
->
p‹t1
,Ñp->
d©a1
);

130 i‡(
Ω
->
p‹t2
)

131 
	`ouç
(
Ω
->
p‹t2
,Ñp->
d©a2
);

135 
	}
}

139 
	$out_w‹d
(
p
,
d
)

141 
	`ouç
(
p
, 
d
 & 0xff);

142 
	`ouç
(
p
 + 1, (
d
 >> 8) & 0xff);

143 
	}
}

147 
	gmode_èbÀ
[
MWMODE_MAX
 + 1] = {

158 
	$£tmode
(
mode
)

160 i‡(
mode
 > 
MWMODE_MAX
)

162 
	`ouç
(
GRREG
, 
DATA_ROTATE
);

163 
	`ouç
(
GRVAL
, 
mode_èbÀ
[
mode
]);

164 
	}
}

167 #i‡
VGA_ET4000


171 
REGIO
 
	ggøphics_⁄
[] = {

173 
IN
, 
ATTRREG
, 0, 0, 0,

176 
OUT
, 
PALREG
, 0, 0, 0,

179 
OUT
, 
SEQREG
, 0, 
SEQVAL
, 0,

180 
OUT
, 
SEQREG
, 1, 
SEQVAL
, 1,

181 
OUT
, 
SEQREG
, 2, 
SEQVAL
, 0x0f,

182 
OUT
, 
SEQREG
, 3, 
SEQVAL
, 0,

183 
OUT
, 
SEQREG
, 4, 
SEQVAL
, 6,

186 
OUT
, 
GENREG1
, 0xe3, 0, 0,

189 
OUT
, 
SEQREG
, 0, 
SEQVAL
, 0x03,

192 
OUT
, 
CRTCREG
, 0x11, 
CRTCVAL
, 0,

195 
OUT
, 
CRTCREG
, 0, 
CRTCVAL
, 0x7a,

196 
OUT
, 
CRTCREG
, 1, 
CRTCVAL
, 0x63,

197 
OUT
, 
CRTCREG
, 2, 
CRTCVAL
, 0x64,

198 
OUT
, 
CRTCREG
, 3, 
CRTCVAL
, 0x1d,

199 
OUT
, 
CRTCREG
, 4, 
CRTCVAL
, 0x68,

200 
OUT
, 
CRTCREG
, 5, 
CRTCVAL
, 0x9a,

201 
OUT
, 
CRTCREG
, 6, 
CRTCVAL
, 0x78,

202 
OUT
, 
CRTCREG
, 7, 
CRTCVAL
, 0xf0,

203 
OUT
, 
CRTCREG
, 8, 
CRTCVAL
, 0x00,

204 
OUT
, 
CRTCREG
, 9, 
CRTCVAL
, 0x60,

205 
OUT
, 
CRTCREG
, 10, 
CRTCVAL
, 0x00,

206 
OUT
, 
CRTCREG
, 11, 
CRTCVAL
, 0x00,

207 
OUT
, 
CRTCREG
, 12, 
CRTCVAL
, 0x00,

208 
OUT
, 
CRTCREG
, 13, 
CRTCVAL
, 0x00,

209 
OUT
, 
CRTCREG
, 14, 
CRTCVAL
, 0x00,

210 
OUT
, 
CRTCREG
, 15, 
CRTCVAL
, 0x00,

211 
OUT
, 
CRTCREG
, 16, 
CRTCVAL
, 0x5c,

212 
OUT
, 
CRTCREG
, 17, 
CRTCVAL
, 0x8e,

213 
OUT
, 
CRTCREG
, 18, 
CRTCVAL
, 0x57,

214 
OUT
, 
CRTCREG
, 19, 
CRTCVAL
, 0x32,

215 
OUT
, 
CRTCREG
, 20, 
CRTCVAL
, 0x00,

216 
OUT
, 
CRTCREG
, 21, 
CRTCVAL
, 0x5b,

217 
OUT
, 
CRTCREG
, 22, 
CRTCVAL
, 0x75,

218 
OUT
, 
CRTCREG
, 23, 
CRTCVAL
, 0xc3,

219 
OUT
, 
CRTCREG
, 24, 
CRTCVAL
, 0xff,

222 
OUT
, 
GENREG2
, 0x00, 0, 0,

223 
OUT
, 
GENREG3
, 0x01, 0, 0,

224 
OUT
, 
GRREG
, 0, 
GRVAL
, 0x00,

225 
OUT
, 
GRREG
, 1, 
GRVAL
, 0x00,

226 
OUT
, 
GRREG
, 2, 
GRVAL
, 0x00,

227 
OUT
, 
GRREG
, 3, 
GRVAL
, 0x00,

228 
OUT
, 
GRREG
, 4, 
GRVAL
, 0x00,

229 
OUT
, 
GRREG
, 5, 
GRVAL
, 0x00,

230 
OUT
, 
GRREG
, 6, 
GRVAL
, 0x05,

231 
OUT
, 
GRREG
, 7, 
GRVAL
, 0x0f,

232 
OUT
, 
GRREG
, 8, 
GRVAL
, 0xff,

235 
IN
, 
ATTRREG
, 0, 0, 0,

238 
OUT
, 
PALREG
, 0, PALREG, 0x00,

239 
OUT
, 
PALREG
, 1, PALREG, 0x01,

240 
OUT
, 
PALREG
, 2, PALREG, 0x02,

241 
OUT
, 
PALREG
, 3, PALREG, 0x03,

242 
OUT
, 
PALREG
, 4, PALREG, 0x04,

243 
OUT
, 
PALREG
, 5, PALREG, 0x05,

244 
OUT
, 
PALREG
, 6, PALREG, 0x06,

245 
OUT
, 
PALREG
, 7, PALREG, 0x07,

246 
OUT
, 
PALREG
, 8, PALREG, 0x38,

247 
OUT
, 
PALREG
, 9, PALREG, 0x39,

248 
OUT
, 
PALREG
, 10, PALREG, 0x3a,

249 
OUT
, 
PALREG
, 11, PALREG, 0x3b,

250 
OUT
, 
PALREG
, 12, PALREG, 0x3c,

251 
OUT
, 
PALREG
, 13, PALREG, 0x3d,

252 
OUT
, 
PALREG
, 14, PALREG, 0x3e,

253 
OUT
, 
PALREG
, 15, PALREG, 0x3f,

254 
OUT
, 
PALREG
, 16, PALREG, 0x01,

255 
OUT
, 
PALREG
, 17, PALREG, 0x00,

256 
OUT
, 
PALREG
, 18, PALREG, 0x0f,

257 
OUT
, 
PALREG
, 19, PALREG, 0x00,

260 
OUT
, 
PALREG
, 0x20, 0, 0,

263 
DONE
, 0, 0, 0, 0

269 
REGIO
 
	ggøph_off
[] = {

271 
IN
, 
ATTRREG
, 0, 0, 0,

274 
OUT
, 
PALREG
, 0, 0, 0,

277 
OUT
, 
SEQREG
, 0, 
SEQVAL
, 1,

278 
OUT
, 
SEQREG
, 1, 
SEQVAL
, 1,

279 
OUT
, 
SEQREG
, 2, 
SEQVAL
, 3,

280 
OUT
, 
SEQREG
, 3, 
SEQVAL
, 0,

281 
OUT
, 
SEQREG
, 4, 
SEQVAL
, 2,

284 
OUT
, 
GENREG1
, 0x63, 0, 0,

287 
OUT
, 
SEQREG
, 0, 
SEQVAL
, 3,

290 
OUT
, 
CRTCREG
, 0x11, 
CRTCVAL
, 0,

293 
OUT
, 
CRTCREG
, 0, 
CRTCVAL
, 0x5f,

294 
OUT
, 
CRTCREG
, 1, 
CRTCVAL
, 0x4f,

295 
OUT
, 
CRTCREG
, 2, 
CRTCVAL
, 0x50,

296 
OUT
, 
CRTCREG
, 3, 
CRTCVAL
, 0x82,

297 
OUT
, 
CRTCREG
, 4, 
CRTCVAL
, 0x55,

298 
OUT
, 
CRTCREG
, 5, 
CRTCVAL
, 0x81,

299 
OUT
, 
CRTCREG
, 6, 
CRTCVAL
, 0xbf,

300 
OUT
, 
CRTCREG
, 7, 
CRTCVAL
, 0x1f,

301 
OUT
, 
CRTCREG
, 8, 
CRTCVAL
, 0x00,

302 
OUT
, 
CRTCREG
, 9, 
CRTCVAL
, 0x4f,

303 
OUT
, 
CRTCREG
, 10, 
CRTCVAL
, 0x00,

304 
OUT
, 
CRTCREG
, 11, 
CRTCVAL
, 0x0f,

305 
OUT
, 
CRTCREG
, 12, 
CRTCVAL
, 0x0e,

306 
OUT
, 
CRTCREG
, 13, 
CRTCVAL
, 0xb0,

307 
OUT
, 
CRTCREG
, 14, 
CRTCVAL
, 0x16,

308 
OUT
, 
CRTCREG
, 15, 
CRTCVAL
, 0x30,

309 
OUT
, 
CRTCREG
, 16, 
CRTCVAL
, 0x9c,

310 
OUT
, 
CRTCREG
, 17, 
CRTCVAL
, 0x8e,

311 
OUT
, 
CRTCREG
, 18, 
CRTCVAL
, 0x8f,

312 
OUT
, 
CRTCREG
, 19, 
CRTCVAL
, 0x28,

313 
OUT
, 
CRTCREG
, 20, 
CRTCVAL
, 0x1f,

314 
OUT
, 
CRTCREG
, 21, 
CRTCVAL
, 0x96,

315 
OUT
, 
CRTCREG
, 22, 
CRTCVAL
, 0xb9,

316 
OUT
, 
CRTCREG
, 23, 
CRTCVAL
, 0xa3,

317 
OUT
, 
CRTCREG
, 24, 
CRTCVAL
, 0xff,

320 
OUT
, 
GENREG2
, 0x00, 0, 0,

321 
OUT
, 
GENREG3
, 0x01, 0, 0,

322 
OUT
, 
GRREG
, 0, 
GRVAL
, 0x00,

323 
OUT
, 
GRREG
, 1, 
GRVAL
, 0x00,

324 
OUT
, 
GRREG
, 2, 
GRVAL
, 0x00,

325 
OUT
, 
GRREG
, 3, 
GRVAL
, 0x00,

326 
OUT
, 
GRREG
, 4, 
GRVAL
, 0x00,

327 
OUT
, 
GRREG
, 5, 
GRVAL
, 0x10,

328 
OUT
, 
GRREG
, 6, 
GRVAL
, 0x0e,

329 
OUT
, 
GRREG
, 7, 
GRVAL
, 0x00,

330 
OUT
, 
GRREG
, 8, 
GRVAL
, 0xff,

333 
IN
, 
ATTRREG
, 0, 0, 0,

336 
OUT
, 
PALREG
, 0, PALREG, 0x00,

337 
OUT
, 
PALREG
, 1, PALREG, 0x01,

338 
OUT
, 
PALREG
, 2, PALREG, 0x02,

339 
OUT
, 
PALREG
, 3, PALREG, 0x03,

340 
OUT
, 
PALREG
, 4, PALREG, 0x04,

341 
OUT
, 
PALREG
, 5, PALREG, 0x05,

342 
OUT
, 
PALREG
, 6, PALREG, 0x06,

343 
OUT
, 
PALREG
, 7, PALREG, 0x07,

344 
OUT
, 
PALREG
, 8, PALREG, 0x10,

345 
OUT
, 
PALREG
, 9, PALREG, 0x11,

346 
OUT
, 
PALREG
, 10, PALREG, 0x12,

347 
OUT
, 
PALREG
, 11, PALREG, 0x13,

348 
OUT
, 
PALREG
, 12, PALREG, 0x14,

349 
OUT
, 
PALREG
, 13, PALREG, 0x15,

350 
OUT
, 
PALREG
, 14, PALREG, 0x16,

351 
OUT
, 
PALREG
, 15, PALREG, 0x17,

352 
OUT
, 
PALREG
, 16, PALREG, 0x08,

353 
OUT
, 
PALREG
, 17, PALREG, 0x00,

354 
OUT
, 
PALREG
, 18, PALREG, 0x0f,

355 
OUT
, 
PALREG
, 19, PALREG, 0x00,

358 
OUT
, 
PALREG
, 0x20, 0, 0,

361 
DONE
, 0, 0, 0, 0

367 #i‡
VGA_STANDARD


371 
REGIO
 
	ggøphics_⁄
[] = {

373 
IN
, 
ATTRREG
, 0, 0, 0,

376 
OUT
, 
PALREG
, 0, 0, 0,

379 
OUT
, 
SEQREG
, 0, 
SEQVAL
, 0,

380 
OUT
, 
SEQREG
, 1, 
SEQVAL
, 1,

381 
OUT
, 
SEQREG
, 2, 
SEQVAL
, 0x0f,

382 
OUT
, 
SEQREG
, 3, 
SEQVAL
, 0,

383 
OUT
, 
SEQREG
, 4, 
SEQVAL
, 6,

386 
OUT
, 
GENREG1
, 0xe3, 0, 0,

389 
OUT
, 
SEQREG
, 0, 
SEQVAL
, 0x03,

392 
OUT
, 
CRTCREG
, 0x11, 
CRTCVAL
, 0,

395 
OUT
, 
CRTCREG
, 0, 
CRTCVAL
, 0x5f,

396 
OUT
, 
CRTCREG
, 1, 
CRTCVAL
, 0x4f,

397 
OUT
, 
CRTCREG
, 2, 
CRTCVAL
, 0x50,

398 
OUT
, 
CRTCREG
, 3, 
CRTCVAL
, 0x82,

399 
OUT
, 
CRTCREG
, 4, 
CRTCVAL
, 0x54,

400 
OUT
, 
CRTCREG
, 5, 
CRTCVAL
, 0x80,

401 
OUT
, 
CRTCREG
, 6, 
CRTCVAL
, 0x0b,

402 
OUT
, 
CRTCREG
, 7, 
CRTCVAL
, 0x3e,

403 
OUT
, 
CRTCREG
, 8, 
CRTCVAL
, 0x00,

404 
OUT
, 
CRTCREG
, 9, 
CRTCVAL
, 0x40,

405 
OUT
, 
CRTCREG
, 10, 
CRTCVAL
, 0x00,

406 
OUT
, 
CRTCREG
, 11, 
CRTCVAL
, 0x00,

407 
OUT
, 
CRTCREG
, 12, 
CRTCVAL
, 0x00,

408 
OUT
, 
CRTCREG
, 13, 
CRTCVAL
, 0x00,

409 
OUT
, 
CRTCREG
, 14, 
CRTCVAL
, 0x00,

410 
OUT
, 
CRTCREG
, 15, 
CRTCVAL
, 0x59,

411 
OUT
, 
CRTCREG
, 16, 
CRTCVAL
, 0xea,

412 
OUT
, 
CRTCREG
, 17, 
CRTCVAL
, 0x8c,

413 
OUT
, 
CRTCREG
, 18, 
CRTCVAL
, 0xdf,

414 
OUT
, 
CRTCREG
, 19, 
CRTCVAL
, 0x28,

415 
OUT
, 
CRTCREG
, 20, 
CRTCVAL
, 0x00,

416 
OUT
, 
CRTCREG
, 21, 
CRTCVAL
, 0xe7,

417 
OUT
, 
CRTCREG
, 22, 
CRTCVAL
, 0x04,

418 
OUT
, 
CRTCREG
, 23, 
CRTCVAL
, 0xe3,

419 
OUT
, 
CRTCREG
, 24, 
CRTCVAL
, 0xff,

422 
OUT
, 
GENREG2
, 0x00, 0, 0,

423 
OUT
, 
GENREG3
, 0x01, 0, 0,

424 
OUT
, 
GRREG
, 0, 
GRVAL
, 0x00,

425 
OUT
, 
GRREG
, 1, 
GRVAL
, 0x00,

426 
OUT
, 
GRREG
, 2, 
GRVAL
, 0x00,

427 
OUT
, 
GRREG
, 3, 
GRVAL
, 0x00,

428 
OUT
, 
GRREG
, 4, 
GRVAL
, 0x00,

429 
OUT
, 
GRREG
, 5, 
GRVAL
, 0x00,

430 
OUT
, 
GRREG
, 6, 
GRVAL
, 0x05,

431 
OUT
, 
GRREG
, 7, 
GRVAL
, 0x0f,

432 
OUT
, 
GRREG
, 8, 
GRVAL
, 0xff,

435 
IN
, 
ATTRREG
, 0, 0, 0,

438 
OUT
, 
PALREG
, 0, PALREG, 0x00,

439 
OUT
, 
PALREG
, 1, PALREG, 0x01,

440 
OUT
, 
PALREG
, 2, PALREG, 0x02,

441 
OUT
, 
PALREG
, 3, PALREG, 0x03,

442 
OUT
, 
PALREG
, 4, PALREG, 0x04,

443 
OUT
, 
PALREG
, 5, PALREG, 0x05,

444 
OUT
, 
PALREG
, 6, PALREG, 0x06,

445 
OUT
, 
PALREG
, 7, PALREG, 0x07,

446 
OUT
, 
PALREG
, 8, PALREG, 0x38,

447 
OUT
, 
PALREG
, 9, PALREG, 0x39,

448 
OUT
, 
PALREG
, 10, PALREG, 0x3a,

449 
OUT
, 
PALREG
, 11, PALREG, 0x3b,

450 
OUT
, 
PALREG
, 12, PALREG, 0x3c,

451 
OUT
, 
PALREG
, 13, PALREG, 0x3d,

452 
OUT
, 
PALREG
, 14, PALREG, 0x3e,

453 
OUT
, 
PALREG
, 15, PALREG, 0x3f,

454 
OUT
, 
PALREG
, 16, PALREG, 0x01,

455 
OUT
, 
PALREG
, 17, PALREG, 0x00,

456 
OUT
, 
PALREG
, 18, PALREG, 0x0f,

457 
OUT
, 
PALREG
, 19, PALREG, 0x00,

460 
OUT
, 
PALREG
, 0x20, 0, 0,

463 
DONE
, 0, 0, 0, 0

469 
REGIO
 
	ggøph_off
[] = {

471 
IN
, 
ATTRREG
, 0, 0, 0,

474 
OUT
, 
PALREG
, 0, 0, 0,

477 
OUT
, 
SEQREG
, 0, 
SEQVAL
, 1,

478 
OUT
, 
SEQREG
, 1, 
SEQVAL
, 1,

479 
OUT
, 
SEQREG
, 2, 
SEQVAL
, 3,

480 
OUT
, 
SEQREG
, 3, 
SEQVAL
, 0,

481 
OUT
, 
SEQREG
, 4, 
SEQVAL
, 2,

484 
OUT
, 
GENREG1
, 0x63, 0, 0,

487 
OUT
, 
SEQREG
, 0, 
SEQVAL
, 3,

490 
OUT
, 
CRTCREG
, 0x11, 
CRTCVAL
, 0,

493 
OUT
, 
CRTCREG
, 0, 
CRTCVAL
, 0x5f,

494 
OUT
, 
CRTCREG
, 1, 
CRTCVAL
, 0x4f,

495 
OUT
, 
CRTCREG
, 2, 
CRTCVAL
, 0x50,

496 
OUT
, 
CRTCREG
, 3, 
CRTCVAL
, 0x82,

497 
OUT
, 
CRTCREG
, 4, 
CRTCVAL
, 0x55,

498 
OUT
, 
CRTCREG
, 5, 
CRTCVAL
, 0x81,

499 
OUT
, 
CRTCREG
, 6, 
CRTCVAL
, 0xbf,

500 
OUT
, 
CRTCREG
, 7, 
CRTCVAL
, 0x1f,

501 
OUT
, 
CRTCREG
, 8, 
CRTCVAL
, 0x00,

502 
OUT
, 
CRTCREG
, 9, 
CRTCVAL
, 0x4f,

503 
OUT
, 
CRTCREG
, 10, 
CRTCVAL
, 0x00,

504 
OUT
, 
CRTCREG
, 11, 
CRTCVAL
, 0x0f,

505 
OUT
, 
CRTCREG
, 12, 
CRTCVAL
, 0x0e,

506 
OUT
, 
CRTCREG
, 13, 
CRTCVAL
, 0xb0,

507 
OUT
, 
CRTCREG
, 14, 
CRTCVAL
, 0x16,

508 
OUT
, 
CRTCREG
, 15, 
CRTCVAL
, 0x30,

509 
OUT
, 
CRTCREG
, 16, 
CRTCVAL
, 0x9c,

510 
OUT
, 
CRTCREG
, 17, 
CRTCVAL
, 0x8e,

511 
OUT
, 
CRTCREG
, 18, 
CRTCVAL
, 0x8f,

512 
OUT
, 
CRTCREG
, 19, 
CRTCVAL
, 0x28,

513 
OUT
, 
CRTCREG
, 20, 
CRTCVAL
, 0x1f,

514 
OUT
, 
CRTCREG
, 21, 
CRTCVAL
, 0x96,

515 
OUT
, 
CRTCREG
, 22, 
CRTCVAL
, 0xb9,

516 
OUT
, 
CRTCREG
, 23, 
CRTCVAL
, 0xa3,

517 
OUT
, 
CRTCREG
, 24, 
CRTCVAL
, 0xff,

520 
OUT
, 
GENREG2
, 0x00, 0, 0,

521 
OUT
, 
GENREG3
, 0x01, 0, 0,

522 
OUT
, 
GRREG
, 0, 
GRVAL
, 0x00,

523 
OUT
, 
GRREG
, 1, 
GRVAL
, 0x00,

524 
OUT
, 
GRREG
, 2, 
GRVAL
, 0x00,

525 
OUT
, 
GRREG
, 3, 
GRVAL
, 0x00,

526 
OUT
, 
GRREG
, 4, 
GRVAL
, 0x00,

527 
OUT
, 
GRREG
, 5, 
GRVAL
, 0x10,

528 
OUT
, 
GRREG
, 6, 
GRVAL
, 0x0e,

529 
OUT
, 
GRREG
, 7, 
GRVAL
, 0x00,

530 
OUT
, 
GRREG
, 8, 
GRVAL
, 0xff,

533 
IN
, 
ATTRREG
, 0, 0, 0,

536 
OUT
, 
PALREG
, 0, PALREG, 0x00,

537 
OUT
, 
PALREG
, 1, PALREG, 0x01,

538 
OUT
, 
PALREG
, 2, PALREG, 0x02,

539 
OUT
, 
PALREG
, 3, PALREG, 0x03,

540 
OUT
, 
PALREG
, 4, PALREG, 0x04,

541 
OUT
, 
PALREG
, 5, PALREG, 0x05,

542 
OUT
, 
PALREG
, 6, PALREG, 0x06,

543 
OUT
, 
PALREG
, 7, PALREG, 0x07,

544 
OUT
, 
PALREG
, 8, PALREG, 0x10,

545 
OUT
, 
PALREG
, 9, PALREG, 0x11,

546 
OUT
, 
PALREG
, 10, PALREG, 0x12,

547 
OUT
, 
PALREG
, 11, PALREG, 0x13,

548 
OUT
, 
PALREG
, 12, PALREG, 0x14,

549 
OUT
, 
PALREG
, 13, PALREG, 0x15,

550 
OUT
, 
PALREG
, 14, PALREG, 0x16,

551 
OUT
, 
PALREG
, 15, PALREG, 0x17,

552 
OUT
, 
PALREG
, 16, PALREG, 0x08,

553 
OUT
, 
PALREG
, 17, PALREG, 0x00,

554 
OUT
, 
PALREG
, 18, PALREG, 0x0f,

555 
OUT
, 
PALREG
, 19, PALREG, 0x00,

558 
OUT
, 
PALREG
, 0x20, 0, 0,

561 
DONE
, 0, 0, 0, 0

567 #i‡
EGA_STANDARD


571 
REGIO
 
	ggøphics_⁄
[] = {

573 
IN
, 
ATTRREG
, 0, 0, 0,

576 
OUT
, 
PALREG
, 0, 0, 0,

579 
OUT
, 
SEQREG
, 0, 
SEQVAL
, 0,

580 
OUT
, 
SEQREG
, 1, 
SEQVAL
, 1,

581 
OUT
, 
SEQREG
, 2, 
SEQVAL
, 0x0f,

582 
OUT
, 
SEQREG
, 3, 
SEQVAL
, 0,

583 
OUT
, 
SEQREG
, 4, 
SEQVAL
, 6,

586 
OUT
, 
GENREG1
, 0xa7, 0, 0,

589 
OUT
, 
SEQREG
, 0, 
SEQVAL
, 0x03,

592 
OUT
, 
CRTCREG
, 0x11, 
CRTCVAL
, 0,

595 
OUT
, 
CRTCREG
, 0, 
CRTCVAL
, 0x5b,

596 
OUT
, 
CRTCREG
, 1, 
CRTCVAL
, 0x4f,

597 
OUT
, 
CRTCREG
, 2, 
CRTCVAL
, 0x53,

598 
OUT
, 
CRTCREG
, 3, 
CRTCVAL
, 0x37,

599 
OUT
, 
CRTCREG
, 4, 
CRTCVAL
, 0x52,

600 
OUT
, 
CRTCREG
, 5, 
CRTCVAL
, 0x00,

601 
OUT
, 
CRTCREG
, 6, 
CRTCVAL
, 0x6c,

602 
OUT
, 
CRTCREG
, 7, 
CRTCVAL
, 0x1f,

603 
OUT
, 
CRTCREG
, 8, 
CRTCVAL
, 0x00,

604 
OUT
, 
CRTCREG
, 9, 
CRTCVAL
, 0x00,

605 
OUT
, 
CRTCREG
, 10, 
CRTCVAL
, 0x00,

606 
OUT
, 
CRTCREG
, 11, 
CRTCVAL
, 0x00,

607 
OUT
, 
CRTCREG
, 12, 
CRTCVAL
, 0x00,

608 
OUT
, 
CRTCREG
, 13, 
CRTCVAL
, 0x00,

609 
OUT
, 
CRTCREG
, 14, 
CRTCVAL
, 0x00,

610 
OUT
, 
CRTCREG
, 15, 
CRTCVAL
, 0x00,

611 
OUT
, 
CRTCREG
, 16, 
CRTCVAL
, 0x5e,

612 
OUT
, 
CRTCREG
, 17, 
CRTCVAL
, 0x2b,

613 
OUT
, 
CRTCREG
, 18, 
CRTCVAL
, 0x5d,

614 
OUT
, 
CRTCREG
, 19, 
CRTCVAL
, 0x28,

615 
OUT
, 
CRTCREG
, 20, 
CRTCVAL
, 0x0f,

616 
OUT
, 
CRTCREG
, 21, 
CRTCVAL
, 0x5f,

617 
OUT
, 
CRTCREG
, 22, 
CRTCVAL
, 0x0a,

618 
OUT
, 
CRTCREG
, 23, 
CRTCVAL
, 0xe3,

619 
OUT
, 
CRTCREG
, 24, 
CRTCVAL
, 0xff,

622 
OUT
, 
GENREG2
, 0x00, 0, 0,

623 
OUT
, 
GENREG3
, 0x01, 0, 0,

624 
OUT
, 
GRREG
, 0, 
GRVAL
, 0x00,

625 
OUT
, 
GRREG
, 1, 
GRVAL
, 0x00,

626 
OUT
, 
GRREG
, 2, 
GRVAL
, 0x00,

627 
OUT
, 
GRREG
, 3, 
GRVAL
, 0x00,

628 
OUT
, 
GRREG
, 4, 
GRVAL
, 0x00,

629 
OUT
, 
GRREG
, 5, 
GRVAL
, 0x00,

630 
OUT
, 
GRREG
, 6, 
GRVAL
, 0x05,

631 
OUT
, 
GRREG
, 7, 
GRVAL
, 0x0f,

632 
OUT
, 
GRREG
, 8, 
GRVAL
, 0xff,

635 
IN
, 
ATTRREG
, 0, 0, 0,

638 
OUT
, 
PALREG
, 0, PALREG, 0x00,

639 
OUT
, 
PALREG
, 1, PALREG, 0x01,

640 
OUT
, 
PALREG
, 2, PALREG, 0x02,

641 
OUT
, 
PALREG
, 3, PALREG, 0x03,

642 
OUT
, 
PALREG
, 4, PALREG, 0x04,

643 
OUT
, 
PALREG
, 5, PALREG, 0x05,

644 
OUT
, 
PALREG
, 6, PALREG, 0x06,

645 
OUT
, 
PALREG
, 7, PALREG, 0x07,

646 
OUT
, 
PALREG
, 8, PALREG, 0x38,

647 
OUT
, 
PALREG
, 9, PALREG, 0x39,

648 
OUT
, 
PALREG
, 10, PALREG, 0x3a,

649 
OUT
, 
PALREG
, 11, PALREG, 0x3b,

650 
OUT
, 
PALREG
, 12, PALREG, 0x3c,

651 
OUT
, 
PALREG
, 13, PALREG, 0x3d,

652 
OUT
, 
PALREG
, 14, PALREG, 0x3e,

653 
OUT
, 
PALREG
, 15, PALREG, 0x3f,

654 
OUT
, 
PALREG
, 16, PALREG, 0x01,

655 
OUT
, 
PALREG
, 17, PALREG, 0x00,

656 
OUT
, 
PALREG
, 18, PALREG, 0x0f,

657 
OUT
, 
PALREG
, 19, PALREG, 0x00,

660 
OUT
, 
PALREG
, 0x20, 0, 0,

663 
DONE
, 0, 0, 0, 0

669 
REGIO
 
	ggøph_off
[] = {

671 
IN
, 
ATTRREG
, 0, 0, 0,

674 
OUT
, 
PALREG
, 0, 0, 0,

677 
OUT
, 
SEQREG
, 0, 
SEQVAL
, 1,

678 
OUT
, 
SEQREG
, 1, 
SEQVAL
, 1,

679 
OUT
, 
SEQREG
, 2, 
SEQVAL
, 3,

680 
OUT
, 
SEQREG
, 3, 
SEQVAL
, 0,

681 
OUT
, 
SEQREG
, 4, 
SEQVAL
, 3,

684 
OUT
, 
GENREG1
, 0xa7, 0, 0,

687 
OUT
, 
SEQREG
, 0, 
SEQVAL
, 3,

690 
OUT
, 
CRTCREG
, 0, 
CRTCVAL
, 0x5b,

691 
OUT
, 
CRTCREG
, 1, 
CRTCVAL
, 0x4f,

692 
OUT
, 
CRTCREG
, 2, 
CRTCVAL
, 0x53,

693 
OUT
, 
CRTCREG
, 3, 
CRTCVAL
, 0x37,

694 
OUT
, 
CRTCREG
, 4, 
CRTCVAL
, 0x51,

695 
OUT
, 
CRTCREG
, 5, 
CRTCVAL
, 0x5b,

696 
OUT
, 
CRTCREG
, 6, 
CRTCVAL
, 0x6c,

697 
OUT
, 
CRTCREG
, 7, 
CRTCVAL
, 0x1f,

698 
OUT
, 
CRTCREG
, 8, 
CRTCVAL
, 0x00,

699 
OUT
, 
CRTCREG
, 9, 
CRTCVAL
, 0x0d,

700 
OUT
, 
CRTCREG
, 10, 
CRTCVAL
, 0x00,

701 
OUT
, 
CRTCREG
, 11, 
CRTCVAL
, 0x0f,

702 
OUT
, 
CRTCREG
, 12, 
CRTCVAL
, 0x00,

703 
OUT
, 
CRTCREG
, 13, 
CRTCVAL
, 0x00,

704 
OUT
, 
CRTCREG
, 14, 
CRTCVAL
, 0x00,

705 
OUT
, 
CRTCREG
, 15, 
CRTCVAL
, 0x00,

706 
OUT
, 
CRTCREG
, 16, 
CRTCVAL
, 0x5e,

707 
OUT
, 
CRTCREG
, 17, 
CRTCVAL
, 0x2b,

708 
OUT
, 
CRTCREG
, 18, 
CRTCVAL
, 0x5d,

709 
OUT
, 
CRTCREG
, 19, 
CRTCVAL
, 0x28,

710 
OUT
, 
CRTCREG
, 20, 
CRTCVAL
, 0x0f,

711 
OUT
, 
CRTCREG
, 21, 
CRTCVAL
, 0x5e,

712 
OUT
, 
CRTCREG
, 22, 
CRTCVAL
, 0x0a,

713 
OUT
, 
CRTCREG
, 23, 
CRTCVAL
, 0xa3,

714 
OUT
, 
CRTCREG
, 24, 
CRTCVAL
, 0xff,

717 
OUT
, 
GENREG2
, 0x00, 0, 0,

718 
OUT
, 
GENREG3
, 0x01, 0, 0,

719 
OUT
, 
GRREG
, 0, 
GRVAL
, 0x00,

720 
OUT
, 
GRREG
, 1, 
GRVAL
, 0x00,

721 
OUT
, 
GRREG
, 2, 
GRVAL
, 0x00,

722 
OUT
, 
GRREG
, 3, 
GRVAL
, 0x00,

723 
OUT
, 
GRREG
, 4, 
GRVAL
, 0x00,

724 
OUT
, 
GRREG
, 5, 
GRVAL
, 0x10,

725 
OUT
, 
GRREG
, 6, 
GRVAL
, 0x0e,

726 
OUT
, 
GRREG
, 7, 
GRVAL
, 0x00,

727 
OUT
, 
GRREG
, 8, 
GRVAL
, 0xff,

730 
IN
, 
ATTRREG
, 0, 0, 0,

733 
OUT
, 
PALREG
, 0, PALREG, 0x00,

734 
OUT
, 
PALREG
, 1, PALREG, 0x01,

735 
OUT
, 
PALREG
, 2, PALREG, 0x02,

736 
OUT
, 
PALREG
, 3, PALREG, 0x03,

737 
OUT
, 
PALREG
, 4, PALREG, 0x04,

738 
OUT
, 
PALREG
, 5, PALREG, 0x05,

739 
OUT
, 
PALREG
, 6, PALREG, 0x14,

740 
OUT
, 
PALREG
, 7, PALREG, 0x07,

741 
OUT
, 
PALREG
, 8, PALREG, 0x38,

742 
OUT
, 
PALREG
, 9, PALREG, 0x39,

743 
OUT
, 
PALREG
, 10, PALREG, 0x3a,

744 
OUT
, 
PALREG
, 11, PALREG, 0x3b,

745 
OUT
, 
PALREG
, 12, PALREG, 0x3c,

746 
OUT
, 
PALREG
, 13, PALREG, 0x3d,

747 
OUT
, 
PALREG
, 14, PALREG, 0x3e,

748 
OUT
, 
PALREG
, 15, PALREG, 0x3f,

749 
OUT
, 
PALREG
, 16, PALREG, 0x08,

750 
OUT
, 
PALREG
, 17, PALREG, 0x00,

751 
OUT
, 
PALREG
, 18, PALREG, 0x0f,

752 
OUT
, 
PALREG
, 19, PALREG, 0x00,

755 
OUT
, 
PALREG
, 0x20, 0, 0,

758 
DONE
, 0, 0, 0, 0

	@drivers/vgaplan4.c

18 #i‡
_MINIX


19 
	~<ibm/p‹tio.h
>

21 
	~<as£π.h
>

22 
	~"devi˚.h
"

23 
	~"vg≠œn4.h
"

24 
	~"fb.h
"

26 #i‡
MSDOS
 | 
ELKS
 | 
__πems__


28 
	#SCREENBASE
 
EGA_BASE


	)

29 
	#BYTESPERLINE
 80

	)

32 
	#SCREENBASE
 ((*)
psd
->
addr
)

	)

33 
	#BYTESPERLINE
 (
psd
->
löñí
)

	)

37 
	gmode_èbÀ
[
MWMODE_MAX
 + 1] = {

45 
	gmask
[8] = {

49 #i‡
HAVEIOPERM


51 
	$fbvga_£ti›îmissi⁄s
(
PSD
 
psd
)

54  
	`i›îm
(0x3c0, 0x20, 1);

55 
	}
}

60 
	$ega_öô
(
PSD
 
psd
)

62 #i‡
HAVEIOPERM


63 if(
	`fbvga_£ti›îmissi⁄s
(
psd
) == -1) {

64 
	`EPRINTF
("Can't set i/oÖermissions: %m\n");

76 
psd
->
SëIOPîmissi⁄s
 = 
fbvga_£ti›îmissi⁄s
;

79 #i‡
MSDOS
 | 
ELKS
 | 
__πems__


81 
psd
->
addr
 = 
SCREENBASE
;

82 
psd
->
löñí
 = 
BYTESPERLINE
;

84 #i‡
_MINIX


85 
psd
->
addr
 = 0;

86 
psd
->
löñí
 = 80;

89 
psd
->
size
 = 0x10000;

91 
	`£t_íabÀ_§
 (0x0f);

92 
	`£t_›
 (0);

93 
	`£t_mode
 (0);

95 
	}
}

99 
	$ega_døwpixñ
(
PSD
 
psd
,
x
, 
y
, 
MWPIXELVAL
 
c
)

101 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

102 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

103 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

105 
DRAWON
;

106 
	`£t_›
(
mode_èbÀ
[
gr_mode
]);

107 
	`£t_cﬁ‹
 (
c
);

108 
	`£À˘_™d_£t_mask
 (
mask
[
x
&7]);

109 
	`RMW_FP
 ((
FARADDR
)
SCREENBASE
 + (
x
>>3Ë+ 
y
 * 
BYTESPERLINE
);

110 
DRAWOFF
;

111 
	}
}

114 
MWPIXELVAL


115 
	$ega_ªadpixñ
(
PSD
 
psd
,
x
,
y
)

117 
FARADDR
 
§c
;

118 
∂™e
;

119 
MWPIXELVAL
 
c
 = 0;

121 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

122 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

124 
DRAWON
;

125 #i‡
_MINIX


126 
§c
 = (*)(
SCREENBASE
 + (
x
>>3Ë+ 
y
 * 
BYTESPERLINE
);

128 
§c
 = 
SCREENBASE
 + (
x
>>3Ë+ 
y
 * 
BYTESPERLINE
;

130 
∂™e
=0;Ölane<4; ++plane) {

131 
	`£t_ªad_∂™e
(
∂™e
);

132 if(
	`GETBYTE_FP
(
§c
Ë& 
mask
[
x
&7])

133 
c
 |1 << 
∂™e
;

135 
DRAWOFF
;

136  
c
;

137 
	}
}

141 
	$ega_døwh‹zlöe
(
PSD
 
psd
, 
x1
, 
x2
, 
y
,

142 
MWPIXELVAL
 
c
)

144 
FARADDR
 
d°
, 
œ°
;

146 
	`as£π
 (
x1
 >0 && x1 < 
psd
->
xªs
);

147 
	`as£π
 (
x2
 >0 && x2 < 
psd
->
xªs
);

148 
	`as£π
 (
x2
 >
x1
);

149 
	`as£π
 (
y
 >0 && y < 
psd
->
yªs
);

150 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

152 
DRAWON
;

153 
	`£t_cﬁ‹
 (
c
);

154 
	`£t_›
(
mode_èbÀ
[
gr_mode
]);

160 if(
gr_mode
 =
MWMODE_COPY
) {

161 #i‡
_MINIX


162 
d°
 = (*)(
SCREENBASE
 + (
x1
>>3Ë+ 
y
*
BYTESPERLINE
);

164 
d°
 = 
SCREENBASE
 + (
x1
>>3Ë+ 
y
 * 
BYTESPERLINE
;

166 i‡((
x1
>>3Ë=(
x2
>>3)) {

167 
	`£À˘_™d_£t_mask
 ((0xf‡>> (
x1
 & 7)Ë& (0xf‡<< (7 - (
x2
 & 7))));

168 
	`RMW_FP
 (
d°
);

170 
	`£À˘_™d_£t_mask
 (0xf‡>> (
x1
 & 7));

171 
	`RMW_FP
 (
d°
++);

173 
	`£t_mask
 (0xff);

174 #i‡
_MINIX


175 
œ°
 = (*)(
SCREENBASE
 + (
x2
>>3Ë+ 
y
 * 
BYTESPERLINE
);

177 
œ°
 = 
SCREENBASE
 + (
x2
>>3Ë+ 
y
 * 
BYTESPERLINE
;

179 
d°
 < 
œ°
)

180 
	`PUTBYTE_FP
(
d°
++, 1);

182 
	`£t_mask
 (0xf‡<< (7 - (
x2
 & 7)));

183 
	`RMW_FP
 (
d°
);

187 
	`£À˘_mask
 ();

188 
x1
 <
x2
) {

189 
	`£t_mask
 (
mask
[
x1
&7]);

190 
	`RMW_FP
 ((
FARADDR
)
SCREENBASE
 + (
x1
++>>3Ë+ 
y
 * 
BYTESPERLINE
);

193 
DRAWOFF
;

194 
	}
}

198 
	$ega_døwvîéöe
(
PSD
 
psd
,
x
, 
y1
, 
y2
,

199 
MWPIXELVAL
 
c
)

201 
FARADDR
 
d°
, 
œ°
;

203 
	`as£π
 (
x
 >0 && x < 
psd
->
xªs
);

204 
	`as£π
 (
y1
 >0 && y1 < 
psd
->
yªs
);

205 
	`as£π
 (
y2
 >0 && y2 < 
psd
->
yªs
);

206 
	`as£π
 (
y2
 >
y1
);

207 
	`as£π
 (
c
 < 
psd
->
ncﬁ‹s
);

209 
DRAWON
;

210 
	`£t_›
(
mode_èbÀ
[
gr_mode
]);

211 
	`£t_cﬁ‹
 (
c
);

212 
	`£À˘_™d_£t_mask
 (
mask
[
x
&7]);

213 #i‡
_MINIX


214 
d°
 = (*)(
SCREENBASE
 + (
x
>>3Ë+ 
y1
 * 
BYTESPERLINE
);

215 
œ°
 = (*)(
SCREENBASE
 + (
x
>>3Ë+ 
y2
 * 
BYTESPERLINE
);

217 
d°
 = 
SCREENBASE
 + (
x
>>3Ë+ 
y1
 * 
BYTESPERLINE
;

218 
œ°
 = 
SCREENBASE
 + (
x
>>3Ë+ 
y2
 * 
BYTESPERLINE
;

220 
d°
 <
œ°
) {

221 
	`RMW_FP
 (
d°
);

222 
d°
 +
BYTESPERLINE
;

224 
DRAWOFF
;

225 
	}
}

227 #i‡
FBVGA


228 
SUBDRIVER
 
	gvg≠œn4
 = {

229 (*)
ega_öô
,

230 (*)
ega_døwpixñ
,

231 (*)
ega_ªadpixñ
,

232 (*)
ega_døwh‹zlöe
,

233 (*)
ega_døwvîéöe
,

234 (*)
gí_fûÃe˘
,

235 (*)
ega_blô


	@drivers/vgaplan4.h

8 
	#SLOWVGA
 0

	)

10 #ifde‡
__PACIFIC__


11 
	#HAVEBLIT
 0

	)

13 
	#HAVEBLIT
 1

	)

16 #i‡
UNIX
 & !
ELKS


17 
	#HAVEFARPTR
 1

	)

18 
	#FAR


	)

21 #i‡
LINUX


22 #i‡!(
deföed
(
ARCH_LINUX_POWERPPC
Ë|| deföed(
ARCH_LINUX_SPARC
))

23 #ifde‡
__GLIBC__


24 
	~<sys/io.h
>

26 
	~<asm/io.h
>

29 
	~<uni°d.h
>

30 
	#HAVEFARPTR
 1

	)

31 
	#FAR


	)

32 
	#HAVEIOPERM
 1

	)

35 #i‡
MSDOS


36 
	#HAVEFARPTR
 1

	)

37 #ifde‡
__PACIFIC__


38 
	~<dos.h
>

39 
	#FAR
 
Ár


	)

41 
	#FAR
 
_Ár


	)

45 #i‡
__πems__


46 
	#HAVEFARPTR
 1

	)

47 
	#FAR


	)

48 
	~<i386_io.h
>

51 #i‡
MSDOS
 | 
ELKS


53 
	#MK_FP
(
£g
,
ofs
Ë((
FARADDR
)((()(£gË<< 16Ë| ()(ofs)))

	)

54 
	#EGA_BASE
 
	`MK_FP
(0xa000, 0)

	)

56 
	#EGA_BASE
 ((*)0xa0000)

	)

59 #i‡
HAVEFARPTR


61 vﬁ©ûê
	tFAR
 * 
	tFARADDR
;

63 #i‡
_MINIX


65 
GETBYTE_FP
(
FARADDR
);

68 
PUTBYTE_FP
(
FARADDR
,);

71 
RMW_FP
(
FARADDR
);

74 
	#GETBYTE_FP
(
addr
Ë(*(
FARADDR
)◊ddr))

	)

77 
	#PUTBYTE_FP
(
addr
,
vÆ
Ë((*(
FARADDR
)◊ddr)Ë(vÆ))

	)

80 
	#RMW_FP
(
addr
Ë((*(
FARADDR
)◊ddr)Ë|1)

	)

83 
	#ORBYTE_FP
(
addr
,
vÆ
Ë((*(
FARADDR
)◊ddr)Ë|(vÆ))

	)

86 
	#ANDBYTE_FP
(
addr
,
vÆ
Ë((*(
FARADDR
)◊ddr)Ë&(vÆ))

	)

91 
	tFARADDR
;

94 
GETBYTE_FP
(
FARADDR
);

97 
PUTBYTE_FP
(
FARADDR
,);

100 
RMW_FP
(
FARADDR
);

103 
ORBYTE_FP
(
FARADDR
,);

106 
ANDBYTE_FP
(
FARADDR
,);

110 #i‡
MSDOS


111 
	#outb
(
vÆ
,
p‹t
Ë
	`ouç
’‹t,vÆ)

	)

114 #i‡
ELKS


115 
	#outb
(
vÆ
,
p‹t
Ë
	`ouç‹tb
’‹t,vÆ)

	)

116 
	#outw
(
vÆ
,
p‹t
Ë
	`ouç‹t
’‹t,vÆ)

	)

118 
öp‹tb
(
p‹t
);

119 
ouç‹tb
(
p‹t
,
d©a
);

120 
ouç‹t
(
p‹t
,
d©a
);

124 
FARADDR
 
öt10
(
ax
,
bx
);

129 
ega_öô
(
PSD
 
psd
);

130 
ega_døwpixñ
(
PSD
 
psd
,
x
,
y
,

131 
MWPIXELVAL
 
c
);

132 
MWPIXELVAL
 
ega_ªadpixñ
(
PSD
 
psd
,
x
,
y
);

133 
ega_døwh‹zlöe
(
PSD
 
psd
,
x1
,
x2
,

134 
y
,
MWPIXELVAL
 
c
);

135 
ega_døwvîéöe
(
PSD
 
psd
,
x
,
y1
,

136 
y2
, 
MWPIXELVAL
 
c
);

137 #i‡
HAVEBLIT


139 
ega_blô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
w
,

140 
MWCOORD
 
h
,
PSD
 
§˝sd
,MWCOORD 
§cx
,MWCOORD 
§cy
,
›
);

144 
ega_hwöô
();

145 
ega_hwãrm
();

147 #i‡
_MINIX


148 
	#outb
(
v
, 
p
Ë
	`outb
’, v)

	)

149 
	#outw
(
v
, 
p
Ë
	`outw
’, v)

	)

152 #i‡
SLOWVGA


157 
	#£t_cﬁ‹
(
c
Ë{ 
	`outb
 (0, 0x3˚); outb (c, 0x3cf); }

	)

160 
	#£t_íabÀ_§
(
mask
Ë{ 
	`outb
 (1, 0x3˚); outb (mask, 0x3cf); }

	)

163 
	#£À˘_mask
(Ë{ 
	`outb
 (8, 0x3˚); }

	)

168 
	#£t_mask
(
mask
Ë{ 
	`outb
 (mask, 0x3cf); }

	)

170 
	#£À˘_™d_£t_mask
(
mask
Ë{ 
	`outb
 (8, 0x3˚); outb (mask, 0x3cf); }

	)

174 
	#£t_›
(
›
Ë{ 
	`outb
 (3, 0x3˚); outb (›, 0x3cf); }

	)

177 
	#£t_wrôe_∂™es
(
mask
Ë{ 
	`outb
 (2, 0x3c4); outb (mask, 0x3c5); }

	)

180 
	#£t_ªad_∂™e
(
∂™e
Ë{ 
	`outb
 (4, 0x3˚); outb (∂™e, 0x3cf); }

	)

184 
	#£t_mode
(
mode
Ë{ 
	`outb
 (5, 0x3˚); outb (mode, 0x3cf); }

	)

191 
	#£t_cﬁ‹
(
c
Ë{ 
	`outw
 ((c)<<8, 0x3˚); }

	)

194 
	#£t_íabÀ_§
(
mask
Ë{ 
	`outw
 (1|((mask)<<8), 0x3˚); }

	)

197 
	#£À˘_mask
(Ë{ 
	`outb
 (8, 0x3˚); }

	)

202 
	#£t_mask
(
mask
Ë{ 
	`outb
 (mask, 0x3cf); }

	)

204 
	#£À˘_™d_£t_mask
(
mask
Ë{ 
	`outw
 (8|((mask)<<8), 0x3˚); }

	)

208 
	#£t_›
(
›
Ë{ 
	`outw
 (3|((›)<<8), 0x3˚); }

	)

211 
	#£t_wrôe_∂™es
(
mask
Ë{ 
	`outw
 (2|((mask)<<8), 0x3c4); }

	)

214 
	#£t_ªad_∂™e
(
∂™e
Ë{ 
	`outw
 (4|(’œ√)<<8), 0x3˚); }

	)

218 
	#£t_mode
(
mode
Ë{ 
	`outw
 (5|((mode)<<8), 0x3˚); }

	)

	@drivers/vtswitch.c

1 
	~<uni°d.h
>

2 
	~<f˙é.h
>

3 
	~<sig«l.h
>

4 
	~<sys/io˘l.h
>

5 
	~<sys/time.h
>

6 
	~<löux/vt.h
>

7 
	~"devi˚.h
"

8 
	~"fb.h
"

14 #i‚de‡
SIGUNUSED


15 
	#SIGUNUSED
 
SIGUSR1


	)

18 
	#SIGVTSWITCH
 
SIGUNUSED


	)

20 
	gmwvãrm
;

21 vﬁ©ûê
	gmwdøwög
;

22 
	gmwcvt
, 
	gmwocvt
;

23 
	gâyfd
 = -1;

24 
	gvisibÀ
 = 1;

25 
vt_mode
 
	gmode
;

26 
SUBDRIVER
 
	gßve
;

28 
SCREENDEVICE
 
s¸dev
;

31 
MwInôVt
();

32 
MwCuºítVt
();

33 
MwCheckVtCh™ge
();

34 
MwRedøwVt
(
t
);

37 
døw_íabÀ
();

38 
døw_dißbÀ
();

39 
vt_swôch
(
sig
);

42 
	$nuŒ_døwpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, 
MWPIXELVAL
 
c
Ë{
	}
}

43 
MWPIXELVAL
 
	$nuŒ_ªadpixñ
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
Ë{  0;
	}
}

44 
	$nuŒ_døwh‹zlöe
(
PSD
 
psd
,
MWCOORD
 
x1
,MWCOORD 
x2
,MWCOORD 
y
,

45 
MWPIXELVAL
 
c
Ë{
	}
}

46 
	$nuŒ_døwvîéöe
(
PSD
 
psd
,
MWCOORD
 
x
,MWCOORD 
y1
,MWCOORD 
y2
,

47 
MWPIXELVAL
 
c
Ë{
	}
}

48 
	$nuŒ_fûÃe˘
(
PSD
 
psd
,
MWCOORD
 
x1
,MWCOORD 
y1
,MWCOORD 
x2
,

49 
MWCOORD
 
y2
,
MWPIXELVAL
 
c
Ë{
	}
}

50 
	$nuŒ_blô
(
PSD
 
d°psd
,
MWCOORD
 
de°x
,MWCOORD 
de°y
,MWCOORD 
w
,

51 
MWCOORD
 
h
,
PSD
 
§˝sd
,MWCOORD 
§cx
,MWCOORD 
§cy
,

52 
›
Ë{
	}
}

53 
	$nuŒ_døw¨ó
(
PSD
 
psd
, 
drivî_gc_t
 *
gc
, 
›
Ë{
	}
}

54 
	$nuŒ_°ªtchblô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
,

55 
MWCOORD
 
d°w
, MWCOORD 
d°h
, 
PSD
 
§˝sd
, MWCOORD 
§cx
,

56 
MWCOORD
 
§cy
, MWCOORD 
§cw
, MWCOORD 
§ch
, 
›
Ë{
	}
}

57 
	$nuŒ_°ªtchblôex
(
PSD
 
d°psd
, PSD 
§˝sd
, 
MWCOORD
 
de°_x_°¨t
,

58 
MWCOORD
 
de°_y_°¨t
, MWCOORD 
width
, MWCOORD 
height
,

59 
x_díomö©‹
, 
y_díomö©‹
,

60 
§c_x_‰a˘i⁄
, 
§c_y_‰a˘i⁄
,

61 
x_°ï_‰a˘i⁄
, 
y_°ï_‰a˘i⁄
, 
›
Ë{
	}
}

63 
SUBDRIVER
 
	gnuŒdrivî
 = {

64 
NULL
,

65 
nuŒ_døwpixñ
,

66 
nuŒ_ªadpixñ
,

67 
nuŒ_døwh‹zlöe
,

68 
nuŒ_døwvîéöe
,

69 
nuŒ_fûÃe˘
,

70 
nuŒ_blô
,

71 
nuŒ_døw¨ó
,

72 
nuŒ_°ªtchblô
,

73 
nuŒ_°ªtchblôex


77 
	$døw_íabÀ
()

79 if(
visibÀ
)

81 
visibÀ
 = 1;

84 
	`£t_subdrivî
(&
s¸dev
, &
ßve
, 
FALSE
);

85 
	}
}

88 
	$døw_dißbÀ
()

90 if(!
visibÀ
)

92 
visibÀ
 = 0;

95 
	`gë_subdrivî
(&
s¸dev
, &
ßve
);

98 
	`£t_subdrivî
(&
s¸dev
, &
nuŒdrivî
, 
FALSE
);

99 
	}
}

103 
	$vt_do_swôch
(*
¨g
)

105 
r
[16], 
g
[16], 
b
[16];

113 if(
mwdøwög
) {

114 
	`døw_dißbÀ
 ();

115 
	`GdAddTimî
(100, 
vt_do_swôch
, 
NULL
);

119 if(
visibÀ
) {

120 
	`døw_dißbÀ
 ();

121 
	`io˘l_gë∑Àâe
(0, 16, 
r
, 
g
, 
b
);

123 if(
	`io˘l
 (
âyfd
, 
VT_RELDISP
, 1) == -1)

124 
	`EPRINTF
("Error can't switcháway from VT: %m\n");

126 
	`io˘l_£çÆëã
(0, 16, 
r
, 
g
, 
b
);

127 
	`døw_íabÀ
 ();

129 if(
	`io˘l
 (
âyfd
, 
VT_RELDISP
, 
VT_ACKACQ
) == -1)

130 
	`EPRINTF
("Error can'tácknowledge VT switch: %m\n");

132 
	}
}

136 
	$vt_swôch
(
sig
)

138 
	`sig«l
(
SIGVTSWITCH
, 
vt_swôch
);

139 
	`vt_do_swôch
(
NULL
);

140 
	}
}

147 
	$MwInôVt
()

149 
âyfd
 = 
	`›í
("/dev/ây0", 
O_RDONLY
);

150 if(
âyfd
 == -1)

151  
	`EPRINTF
("Error can't openÅty0: %m\n");

154 if(
	`io˘l
 (
âyfd
, 
VT_GETMODE
, &
mode
) == -1)

155  
	`EPRINTF
("Error can't get VT mode: %m\n");

157 
mode
.modê
VT_PROCESS
;

158 
mode
.
ªlsig
 = 
SIGVTSWITCH
;

159 
mode
.
acqsig
 = 
SIGVTSWITCH
;

160 
	`sig«l
 (
SIGVTSWITCH
, 
vt_swôch
);

161 if(
	`io˘l
 (
âyfd
, 
VT_SETMODE
, &
mode
) == -1)

162  
	`EPRINTF
("Error can't set VT mode: %m\n");

164 
mwcvt
 = 
mwocvt
 = 
mwvãrm
 = 
	`MwCuºítVt
();

170 
	`MwRedøwVt
(
mwvãrm
);

173 
	}
}

179 
	$MwCuºítVt
()

181 
vt_°©
 
°©
;

183 
	`io˘l
(
âyfd
, 
VT_GETSTATE
, &
°©
);

184  
°©
.
v_a˘ive
;

185 
	}
}

191 
	$MwCheckVtCh™ge
()

193 
mwcvt
 = 
	`MwCuºítVt
();

194 if(
mwcvt
 !
mwocvt
 && mwcvà=
mwvãrm
) {

195 
mwocvt
 = 
mwcvt
;

198 
mwocvt
 = 
mwcvt
;

200 
	}
}

208 
	$MwRedøwVt
(
t
)

210 if(
	`MwCuºítVt
(Ë=
mwvãrm
) {

211 
	`io˘l
(
âyfd
, 
VT_ACTIVATE
, 
t
 == 1 ? 2 : 1);

212 
	`io˘l
(
âyfd
, 
VT_ACTIVATE
, 
t
);

214 
	}
}

217 
	$MwExôVt
()

219 
	`sig«l
(
SIGVTSWITCH
, 
SIG_DFL
);

220 
mode
.modê
VT_AUTO
;

221 
mode
.
ªlsig
 = 0;

222 
mode
.
acqsig
 = 0;

223 
	`io˘l
(
âyfd
, 
VT_SETMODE
, &
mode
);

225 if(
âyfd
 != -1)

226 
	`˛o£
(
âyfd
);

227 
	}
}

	@ecos/ecos_app.c

9 
	~<pkgc⁄f/sy°em.h
>

10 #ifde‡
CYGPKG_KERNEL


11 
	~<pkgc⁄f/kî√l.h
>

13 #ifde‡
CYGPKG_LIBC


14 
	~<pkgc⁄f/libc.h
>

16 #ifde‡
CYGPKG_IO_SERIAL


17 
	~<pkgc⁄f/io_£rül.h
>

20 #i‚de‡
CYGFUN_KERNEL_API_C


21 #îr‹ 
Kî√l
 
API
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


24 #i‚de‡
CYGPKG_LIBC_STDIO


25 #îr‹ 
C
 
libøry
 
°™d¨d
 
I
/
O
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


28 #i‚de‡
CYGPKG_IO_SERIAL_HALDIAG


29 #îr‹ 
I
/
O
 
HALDIAG
 
p£udo
-
devi˚
 
drivî
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


34 
	~<°dio.h
>

35 
	~<°dlib.h
>

36 
	~<°rög.h
>

37 
	~<cyg/kî√l/k≠i.h
>

38 
	~<cyg/hÆ/hÆ_¨ch.h
>

39 
	~<sys/time.h
>

40 
	~<˘y≥.h
>

41 
	~<√tw‹k.h
>

42 #ifde‡
USE_ROMDISK


43 
	~<cyg/fûeio/fûeio.h
>

46 
	#STACKSIZE
 ( 65536 )

	)

48 
ecos_nx_£tup
(
CYG_ADDRWORD
 
d©a
);

49 
«nowm_thªad
(
CYG_ADDRWORD
 
d©a
);

50 
«nox_thªad
(
CYG_ADDRWORD
 
d©a
);

51 
nxkbd_thªad
(
CYG_ADDRWORD
 
d©a
);

52 #ifde‡
USE_NXSCRIBBLE


53 
nxs¸ibbÀ_thªad
(
CYG_ADDRWORD
 
d©a
);

55 #ifde‡
USE_LANDMINE


56 
œndmöe_thªad
(
CYG_ADDRWORD
 
d©a
);

58 #ifde‡
USE_NTETRIS


59 
¡ëris_thªad
(
CYG_ADDRWORD
 
d©a
);

61 #ifde‡
USE_WORLD


62 
w‹ld_thªad
(
CYG_ADDRWORD
 
d©a
);

64 
°¨tup_thªad
(
CYG_ADDRWORD
 
d©a
);

66 
	tfun
(
	tCYG_ADDRWORD
);

67 
	snx_thªad
 {

68 *
	m«me
;

69 
fun
 *
	míåy
;

70 
	m¥io
;

71 
cyg_h™dÀ_t
 
	mt
;

72 
cyg_thªad
 
	mt_obj
;

73 
	m°ack
[
STACKSIZE
];

76 
nx_thªad
 
	g_thªads
[] = {

77 { "Sy°em sèπup", 
°¨tup_thªad
, 11 },

78 { "N™o-X sîvî", 
«nox_thªad
, 12 },

79 { "N™o-WM", 
«nowm_thªad
, 14 },

80 { "N™o-KBD", 
nxkbd_thªad
, 13 },

81 #ifde‡
USE_NXSCRIBBLE


82 { "S¸ibbÀ", 
nxs¸ibbÀ_thªad
, 20 },

84 #ifde‡
USE_LANDMINE


85 { "L™dmöe", 
œndmöe_thªad
, 19 },

87 #ifde‡
USE_NTETRIS


88 { "N™o-Tëris", 
¡ëris_thªad
, 18 },

90 #ifde‡
USE_WORLD


91 { "W‹ld M≠", 
w‹ld_thªad
, 21 },

94 
	#NUM
(
x
Ë((x)/(x[0]))

	)

98 
	$°rdup
(*
°rög
) {

99 *
√wbô
 = 
	`mÆloc
(
	`°æí
(
°rög
)+1);

100 
	`°r˝y
(
√wbô
,
°rög
);

101  
√wbô
;

102 
	}
}

105 
	$gëtimeofday
(
timevÆ
 *
tv
,

106 
timez⁄e
 *
tz
)

108 
tv
->
tv_u£c
 = 0;

109 
tv
->
tv_£c
 = 
	`time
(
NULL
);

111 
	}
}

114 
	$°rˇ£cmp
(c⁄° *
s1
, c⁄° *
s2
)

116 
c1
, 
c2
;

118 (
c1
 = 
	`tﬁowî
(*
s1
++)Ë=(
c2
 =Åﬁowî(*
s2
++)))

119 i‡(
c1
 == 0)

121  (()
c1
 - ()
c2
);

122 
	}
}

125 
	$°¨tup_thªad
(
CYG_ADDRESS
 
d©a
)

127 
cyg_ucou¡32
 
«nox_d©a_ödex
;

128 
i
;

129 
nx_thªad
 *
nx
;

131 
	`¥ötf
("SYSTEM INITIALIZATION inÖrogress\n");

132 
	`¥ötf
("NETWORK:\n");

133 
	`öô_Æl_√tw‹k_öãrÁ˚s
();

135 #ifde‡
USE_ROMDISK


137 
ROM_fs
[32];

138 
ªs
;

140 
	`¥ötf
("Mount ROM file system\n");

141 #ifde‡
CYGPKG_HAL_ARM_SA11X0_IPAQ


144 *
hﬁd_rom_fs
;

145 i‡((
hﬁd_rom_fs
 = 
	`mÆloc
(0x80080)) != 0) {

147 
hﬁd_rom_fs
 = (*)((()hold_rom_fs + 31) & ~31);

148 
	`mem˝y
(
hﬁd_rom_fs
, 0x50F00000, 0x80000);

149 
	`•rötf
(
ROM_fs
, "0x%08x", 
hﬁd_rom_fs
);

151 
	`¥ötf
("Can'tállocate memoryÅo hold ROM fs!\n");

155 
	`•rötf
(
ROM_fs
, "0x%08x", 0x50F00000);

157 
	`¥ötf
("ROM f†© %s\n", 
ROM_fs
);

158 i‡((
ªs
 = 
	`mou¡
(
ROM_fs
, "/", "romfs")) < 0) {

159 
	`¥ötf
("... failed\n");

167 
«nox_d©a_ödex
 = 
	`cyg_thªad_√w_d©a_ödex
();

168 
	`¥ötf
("d©®ödex = %d\n", 
«nox_d©a_ödex
);

170 
	`¥ötf
("Creating systemÅhreads\n");

171 
nx
 = &
_thªads
[1];

172 
i
 = 1; i < 
	`NUM
(
_thªads
); i++, 
nx
++) {

173 
	`cyg_thªad_¸óã
(
nx
->
¥io
,

174 
nx
->
íåy
,

175 (
cyg_addrw‹d_t
Ë
«nox_d©a_ödex
,

176 
nx
->
«me
,

177 (*)
nx
->
°ack
, 
STACKSIZE
,

178 &
nx
->
t
,

179 &
nx
->
t_obj
);

182 
	`¥ötf
("StartingÅhreads\n");

183 
nx
 = &
_thªads
[1];

184 
i
 = 1; i < 
	`NUM
(
_thªads
); i++, 
nx
++) {

185 
	`¥ötf
("Sèπög %s\n", 
nx
->
«me
);

186 
	`cyg_thªad_ªsume
(
nx
->
t
);

189 i‡(
i
 == 2) {

190 
	`ecos_nx_öô
(
«nox_d©a_ödex
);

194 
	`¥ötf
("SYSTEM THREADS STARTED!\n");

195 
	}
}

197 
	$cyg_u£r_°¨t
()

199 
nx_thªad
 *
nx
;

201 
nx
 = &
_thªads
[0];

202 
	`cyg_thªad_¸óã
(
nx
->
¥io
,

203 
nx
->
íåy
,

204 (
cyg_addrw‹d_t
) 0,

205 
nx
->
«me
,

206 (*)
nx
->
°ack
, 
STACKSIZE
,

207 &
nx
->
t
,

208 &
nx
->
t_obj
);

209 
	`cyg_thªad_ªsume
(
nx
->
t
);

210 
	}
}

	@ecos/ecos_init.c

5 
	~<pkgc⁄f/kî√l.h
>

6 
	~<pkgc⁄f/hÆ.h
>

7 
	~<cyg/kî√l/k≠i.h
>

9 
	~<°dio.h
>

10 
	~<°dlib.h
>

11 
	~<f˙é.h
>

12 
	~<uni°d.h
>

13 
	~<time.h
>

14 
	~<˘y≥.h
>

15 
	~<î∫o.h
>

16 
	~<sys/time.h
>

18 
	#MWINCLUDECOLORS


	)

19 
	~"«no-X.h
"

21 
boﬁ
 
	g˛o£d
 = 
Ál£
;

26 
	$show_ns
(
ns
)

28 
	`düg_¥ötf
("%5d.%02d", ()(
ns
/1000), ()((ns%1000)/10));

29 
	}
}

31 
	gπc_ªsﬁuti⁄
[] = 
CYGNUM_KERNEL_COUNTERS_RTC_RESOLUTION
;

32 
	gns_≥r_sy°em_˛ock
;

35 
	$ns_time
()

37 
off
;

38 
ns
, 
˛ocks
;

40 
ns_≥r_sy°em_˛ock
 = 1000000/
πc_ªsﬁuti⁄
[1];

41 
	`HAL_CLOCK_READ
(&
off
);

42 
ns
 = (
ns_≥r_sy°em_˛ock
 * ()
off
Ë/ 
CYGNUM_KERNEL_COUNTERS_RTC_PERIOD
;

43 
ns
 += 5;

44 
˛ocks
 = (
	`cyg_cuºít_time
(Ë* 10000000Ë+ 
ns
;

45  
˛ocks
;

46 
	}
}

49 
	$ã°_fûe_io
()

51 
°¨t_time
, 
íd_time
;

52 
FILE
 *
Â
;

53 
buf
[256];

54 
Àn
, 
n
, 
fd
;

56 
°¨t_time
 = 
	`ns_time
();

57 i‡((
Â
 = 
	`f›í
("/bö/Àâîs.˛", "r")Ë!(
FILE
 *)
NULL
) {

58 
Àn
 = 0;

59 
	`fgës
(
buf
, (buf), 
Â
)) {

60 
Àn
 +
	`°æí
(
buf
);

62 
	`f˛o£
(
Â
);

64 
íd_time
 = 
	`ns_time
();

65 
	`düg_¥ötf
("'fgës': %d byã†ö ", 
Àn
); 
	`show_ns
(
íd_time
-
°¨t_time
); diag_printf("ns\n");

67 
°¨t_time
 = 
	`ns_time
();

68 i‡((
Â
 = 
	`f›í
("/bö/Àâîs.˛", "r")Ë!(
FILE
 *)
NULL
) {

69 
Àn
 = 0;

70 
n
 = 
	`‰ód
(
buf
, 1, (buf), 
Â
)) {

71 
Àn
 +
n
;

73 
	`f˛o£
(
Â
);

75 
íd_time
 = 
	`ns_time
();

76 
	`düg_¥ötf
("'‰ód': %d byã†ö ", 
Àn
); 
	`show_ns
(
íd_time
-
°¨t_time
); diag_printf("ns\n");

78 
°¨t_time
 = 
	`ns_time
();

79 i‡((
fd
 = 
	`›í
("/bö/Àâîs.˛", 
O_RDONLY
)) >= 0) {

80 
Àn
 = 0;

81 
n
 = 
	`ªad
(
fd
, 
buf
, (buf))) {

82 
Àn
 +
n
;

84 
	`˛o£
(
fd
);

86 
íd_time
 = 
	`ns_time
();

87 
	`düg_¥ötf
("'ªad': %d byã†ö ", 
Àn
); 
	`show_ns
(
íd_time
-
°¨t_time
); diag_printf("ns\n");

88 
	}
}

90 #i‡
NWIDGETS


92 
	$do_˛o£
(
NBUTTON
 * 
w
, 
b
)

94 
	`¥ötf
("Buâ⁄ %d wa†˛icked i¿widgë %p\n",
b
,
w
);

95 
˛o£d
 = 
åue
;

96 
	}
}

100 
	$ecos_nx_öô
(
CYG_ADDRWORD
 
d©a
)

102 
GR_SCREEN_INFO
 
si
;

103 
GR_FONT_INFO
 
fi
;

104 
GR_WINDOW_ID
 
maöwid
;

105 
GR_WM_PROPERTIES
 
¥›s
;

106 
GR_GC_ID
 
g˘
 = 0;

107 
NWIDGET
 *
w
;

108 
NBUTTON
 *
b
;

109 
NTEXTFIELD
 *
t
;

111 
	`cyg_thªad_dñay
(50);

112 
	`INIT_PER_THREAD_DATA
();

114 
	`ã°_fûe_io
();

116 if(
	`GrO≥n
() < 0) {

117 
	`Ârötf
(
°dîr
, "Couldn't connectÅo Nano-X server\n");

118 
	`exô
(1);

121 
	`GrGëS¸ìnInfo
(&
si
);

122 
	`GrGëF⁄tInfo
(0, &
fi
);

124 #i‚de‡
NWIDGETS


125 
maöwid
 = 
	`GrNewWödow
(
GR_ROOT_WINDOW_ID
, 0, 0, 
si
.
cﬁs
, si.
rows
,

126 0, 
RED
, 
WHITE
);

128 
¥›s
.
Êags
 = 
GR_WM_FLAGS_PROPS
;

129 
¥›s
.¥›†
GR_WM_PROPS_BORDER
;

130 
	`GrSëWMPr›îtõs
(
maöwid
, &
¥›s
);

132 
	`GrM≠Wödow
(
maöwid
);

133 
	`GrFlush
();

134 
	`cyg_thªad_dñay
(50);

136 
g˘
 = 
	`GrNewGC
();

137 
	`GrSëGCF‹eground
(
g˘
, 
WHITE
);

139 
	`GrDøwImageFromFûe
(
maöwid
, 
g˘
, 0, 0, 
si
.
cﬁs
, si.
rows
, "/redhat.logo", 0);

140 
	`GrText
(
maöwid
, 
g˘
, 80, 350, "T≠áŒ 4 c‹√rs", 17, 
GR_TFTOP
);

141 
	`GrFlush
();

142 
	`¥ötf
("Tapáll four corners\n");

143 
	`cyg_thªad_dñay
(10*100);

146 
	`n_öô_buâ⁄_˛ass
();

147 
	`n_öô_ãxtfõld_˛ass
();

149 
w
 = 
	`NEW_NOBJECT
(
widgë
);

150 
	`n_widgë_öô
(
w
, 0);

151 
	`n_widgë_ªsize
(
w
, 
si
.
cﬁs
 - 10, si.
rows
 - 30);

152 
	`n_widgë_background
(
w
, "/redhat.logo");

153 
	`n_widgë_show
(
w
);

155 
b
 = 
	`NEW_NOBJECT
(
buâ⁄
);

156 
	`n_buâ⁄_öô
(
b
, 
w
, "Close");

157 
	`n_buâ⁄_⁄˛ick
(
b
, 
do_˛o£
);

158 
	`n_widgë_ªsize
(
b
, 40, 20);

159 
	`n_widgë_move
(
b
,180,260);

160 
	`n_widgë_show
(
b
);

162 
t
 = 
	`NEW_NOBJECT
(
ãxtfõld
);

163 
	`n_ãxtfõld_öô
(
t
,
w
,"Tapáll 4 corners");

164 
	`n_widgë_move
(
t
,45,220);

165 
	`n_widgë_ªsize
(
t
,120,20);

166 
	`n_widgë_show
(
t
);

168 
t
 = 
	`NEW_NOBJECT
(
ãxtfõld
);

169 
	`n_ãxtfõld_öô
(
t
,
w
,"ThenÖress close");

170 
	`n_widgë_move
(
t
,45,250);

171 
	`n_widgë_ªsize
(
t
,120,20);

172 
	`n_widgë_show
(
t
);

174 !
˛o£d
) {

175 
	`n_h™dÀ_evít
();

178 
	`n_widgë_hide
(
w
);

179 
	`n_obje˘_˛ónup
(
w
);

182 
	`GrClo£
();

183 
	}
}

	@ecos/landmine_thread.c

1 
	~<pkgc⁄f/sy°em.h
>

2 #ifde‡
CYGPKG_KERNEL


3 
	~<pkgc⁄f/kî√l.h
>

5 #ifde‡
CYGPKG_LIBC


6 
	~<pkgc⁄f/libc.h
>

8 #ifde‡
CYGPKG_IO_SERIAL


9 
	~<pkgc⁄f/io_£rül.h
>

12 #i‚de‡
CYGFUN_KERNEL_API_C


13 #îr‹ 
Kî√l
 
API
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


16 #i‚de‡
CYGPKG_LIBC_STDIO


17 #îr‹ 
C
 
libøry
 
°™d¨d
 
I
/
O
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


20 #i‚de‡
CYGPKG_IO_SERIAL_HALDIAG


21 #îr‹ 
I
/
O
 
HALDIAG
 
p£udo
-
devi˚
 
drivî
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


26 
	~<°dio.h
>

27 
	~<°dlib.h
>

28 
	~<°rög.h
>

29 
	~<cyg/kî√l/k≠i.h
>

30 
	~<cyg/ö‰a/düg.h
>

32 
	#MWINCLUDECOLORS


	)

33 
	~"«no-X.h
"

40 
exã∫C
 
œndmöe_maö
(
¨gc
, *
¨gv
[]);

43 
	$œndmöe_thªad
(
CYG_ADDRWORD
 
d©a
)

45 
¨gc
 = 5;

46 *
¨gv
[] = {"landmine",

50 
	`INIT_PER_THREAD_DATA
();

51 
	`œndmöe_maö
(
¨gc
, 
¨gv
);

52 
	}
}

	@ecos/nanowm_thread.c

1 
	~<pkgc⁄f/sy°em.h
>

2 #ifde‡
CYGPKG_KERNEL


3 
	~<pkgc⁄f/kî√l.h
>

5 #ifde‡
CYGPKG_LIBC


6 
	~<pkgc⁄f/libc.h
>

8 #ifde‡
CYGPKG_IO_SERIAL


9 
	~<pkgc⁄f/io_£rül.h
>

12 #i‚de‡
CYGFUN_KERNEL_API_C


13 #îr‹ 
Kî√l
 
API
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


16 #i‚de‡
CYGPKG_LIBC_STDIO


17 #îr‹ 
C
 
libøry
 
°™d¨d
 
I
/
O
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


20 #i‚de‡
CYGPKG_IO_SERIAL_HALDIAG


21 #îr‹ 
I
/
O
 
HALDIAG
 
p£udo
-
devi˚
 
drivî
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


26 
	~<°dio.h
>

27 
	~<°dlib.h
>

28 
	~<°rög.h
>

29 
	~<cyg/kî√l/k≠i.h
>

30 
	~<cyg/ö‰a/düg.h
>

32 
	#MWINCLUDECOLORS


	)

33 
	~"«no-X.h
"

40 
exã∫C
 
«nowm_maö
(
¨gc
, *
¨gv
[]);

43 
	$«nowm_thªad
(
CYG_ADDRWORD
 
d©a
)

45 
¨gc
 = 0;

46 **
¨gv
;

48 
	`INIT_PER_THREAD_DATA
();

49 
	`«nowm_maö
(
¨gc
, 
¨gv
);

50 
	}
}

	@ecos/nanox_thread.c

1 
	~<pkgc⁄f/sy°em.h
>

2 #ifde‡
CYGPKG_KERNEL


3 
	~<pkgc⁄f/kî√l.h
>

5 #ifde‡
CYGPKG_LIBC


6 
	~<pkgc⁄f/libc.h
>

8 #ifde‡
CYGPKG_IO_SERIAL


9 
	~<pkgc⁄f/io_£rül.h
>

12 #i‚de‡
CYGFUN_KERNEL_API_C


13 #îr‹ 
Kî√l
 
API
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


16 #i‚de‡
CYGPKG_LIBC_STDIO


17 #îr‹ 
C
 
libøry
 
°™d¨d
 
I
/
O
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


20 #i‚de‡
CYGPKG_IO_SERIAL_HALDIAG


21 #îr‹ 
I
/
O
 
HALDIAG
 
p£udo
-
devi˚
 
drivî
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


26 
	~<°dio.h
>

27 
	~<°dlib.h
>

28 
	~<°rög.h
>

29 
	~<cyg/kî√l/k≠i.h
>

30 
	~<cyg/ö‰a/düg.h
>

32 
	#MWINCLUDECOLORS


	)

33 
	~"«no-X.h
"

40 
exã∫C
 
«nox_maö
(
¨gc
, *
¨gv
[]);

43 
	$«nox_thªad
(
CYG_ADDRWORD
 
d©a
)

45 
¨gc
 = 0;

46 **
¨gv
;

48 
	`«nox_maö
(
¨gc
, 
¨gv
);

49 
	}
}

	@ecos/ntetris_thread.c

1 
	~<pkgc⁄f/sy°em.h
>

2 #ifde‡
CYGPKG_KERNEL


3 
	~<pkgc⁄f/kî√l.h
>

5 #ifde‡
CYGPKG_LIBC


6 
	~<pkgc⁄f/libc.h
>

8 #ifde‡
CYGPKG_IO_SERIAL


9 
	~<pkgc⁄f/io_£rül.h
>

12 #i‚de‡
CYGFUN_KERNEL_API_C


13 #îr‹ 
Kî√l
 
API
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


16 #i‚de‡
CYGPKG_LIBC_STDIO


17 #îr‹ 
C
 
libøry
 
°™d¨d
 
I
/
O
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


20 #i‚de‡
CYGPKG_IO_SERIAL_HALDIAG


21 #îr‹ 
I
/
O
 
HALDIAG
 
p£udo
-
devi˚
 
drivî
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


26 
	~<°dio.h
>

27 
	~<°dlib.h
>

28 
	~<°rög.h
>

29 
	~<cyg/kî√l/k≠i.h
>

30 
	~<cyg/ö‰a/düg.h
>

32 
	#MWINCLUDECOLORS


	)

33 
	~"«no-X.h
"

40 
exã∫C
 
¡ëris_maö
(
¨gc
, *
¨gv
[]);

43 
	$¡ëris_thªad
(
CYG_ADDRWORD
 
d©a
)

45 
¨gc
 = 1;

46 *
¨gv
[] = {"ntetris" };

48 
	`INIT_PER_THREAD_DATA
();

49 
	`¡ëris_maö
(
¨gc
, 
¨gv
);

50 
	}
}

	@ecos/nxkbd_thread.c

1 
	~<pkgc⁄f/sy°em.h
>

2 #ifde‡
CYGPKG_KERNEL


3 
	~<pkgc⁄f/kî√l.h
>

5 #ifde‡
CYGPKG_LIBC


6 
	~<pkgc⁄f/libc.h
>

8 #ifde‡
CYGPKG_IO_SERIAL


9 
	~<pkgc⁄f/io_£rül.h
>

12 #i‚de‡
CYGFUN_KERNEL_API_C


13 #îr‹ 
Kî√l
 
API
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


16 #i‚de‡
CYGPKG_LIBC_STDIO


17 #îr‹ 
C
 
libøry
 
°™d¨d
 
I
/
O
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


20 #i‚de‡
CYGPKG_IO_SERIAL_HALDIAG


21 #îr‹ 
I
/
O
 
HALDIAG
 
p£udo
-
devi˚
 
drivî
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


26 
	~<°dio.h
>

27 
	~<°dlib.h
>

28 
	~<°rög.h
>

29 
	~<cyg/kî√l/k≠i.h
>

30 
	~<cyg/ö‰a/düg.h
>

32 
	#MWINCLUDECOLORS


	)

33 
	~"«no-X.h
"

40 
exã∫C
 
nxkbd_maö
(
¨gc
, *
¨gv
[]);

43 
	$nxkbd_thªad
(
CYG_ADDRWORD
 
d©a
)

45 
¨gc
 = 0;

46 **
¨gv
;

48 
	`INIT_PER_THREAD_DATA
();

49 
	`nxkbd_maö
(
¨gc
, 
¨gv
);

50 
	}
}

	@ecos/nxscribble_thread.c

1 
	~<pkgc⁄f/sy°em.h
>

2 #ifde‡
CYGPKG_KERNEL


3 
	~<pkgc⁄f/kî√l.h
>

5 #ifde‡
CYGPKG_LIBC


6 
	~<pkgc⁄f/libc.h
>

8 #ifde‡
CYGPKG_IO_SERIAL


9 
	~<pkgc⁄f/io_£rül.h
>

12 #i‚de‡
CYGFUN_KERNEL_API_C


13 #îr‹ 
Kî√l
 
API
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


16 #i‚de‡
CYGPKG_LIBC_STDIO


17 #îr‹ 
C
 
libøry
 
°™d¨d
 
I
/
O
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


20 #i‚de‡
CYGPKG_IO_SERIAL_HALDIAG


21 #îr‹ 
I
/
O
 
HALDIAG
 
p£udo
-
devi˚
 
drivî
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


26 
	~<°dio.h
>

27 
	~<°dlib.h
>

28 
	~<°rög.h
>

29 
	~<cyg/kî√l/k≠i.h
>

30 
	~<cyg/ö‰a/düg.h
>

32 
	#MWINCLUDECOLORS


	)

33 
	~"«no-X.h
"

40 
exã∫C
 
nxs¸ibbÀ_maö
(
¨gc
, *
¨gv
[]);

43 
	$nxs¸ibbÀ_thªad
(
CYG_ADDRWORD
 
d©a
)

45 
¨gc
 = 2;

46 *
¨gv
[] = {"nxscribble", "-t"};

48 
	`INIT_PER_THREAD_DATA
();

49 
	`nxs¸ibbÀ_maö
(
¨gc
, 
¨gv
);

50 
	}
}

	@ecos/world_thread.c

1 
	~<pkgc⁄f/sy°em.h
>

2 #ifde‡
CYGPKG_KERNEL


3 
	~<pkgc⁄f/kî√l.h
>

5 #ifde‡
CYGPKG_LIBC


6 
	~<pkgc⁄f/libc.h
>

8 #ifde‡
CYGPKG_IO_SERIAL


9 
	~<pkgc⁄f/io_£rül.h
>

12 #i‚de‡
CYGFUN_KERNEL_API_C


13 #îr‹ 
Kî√l
 
API
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


16 #i‚de‡
CYGPKG_LIBC_STDIO


17 #îr‹ 
C
 
libøry
 
°™d¨d
 
I
/
O
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


20 #i‚de‡
CYGPKG_IO_SERIAL_HALDIAG


21 #îr‹ 
I
/
O
 
HALDIAG
 
p£udo
-
devi˚
 
drivî
 
mu°
 
be
 
íabÀd
 
to
 
buûd
 
this
 
≠∂iˇti⁄


26 
	~<°dio.h
>

27 
	~<°dlib.h
>

28 
	~<°rög.h
>

29 
	~<cyg/kî√l/k≠i.h
>

30 
	~<cyg/ö‰a/düg.h
>

32 
	#MWINCLUDECOLORS


	)

33 
	~"«no-X.h
"

40 
exã∫C
 
w‹ld_maö
(
¨gc
, *
¨gv
[]);

43 
	$w‹ld_thªad
(
CYG_ADDRWORD
 
d©a
)

45 
¨gc
 = 1;

46 *
¨gv
[] = {"world" };

48 
	`cyg_thªad_dñay
(10*100);

49 
	`INIT_PER_THREAD_DATA
();

50 
	`w‹ld_maö
(
¨gc
, 
¨gv
);

51 
	}
}

	@engine/devarc.c

20 
	~<°dio.h
>

21 
	~"devi˚.h
"

23 
gr_fûlmode
;

25 #i‡
HAVEFLOAT


26 
	#HIGHPRECISION
 0

	)

28 #i‡!
HIGHPRECISION


29 
	tFLOAT
;

39 
	gcosöe
[91][2] = {

134 
	$qcos
(
FLOAT
 
™gÀ
)

136 
a
, 
b
, 
c
;

138 
a
 = 
™gÀ
;

139 i‡(
a
 < 0) {

140 
™gÀ
 = 
a
 -ángle;

141 
a
 = -a;

143 
™gÀ
 =ángÀ - 
a
;

145 
b
 = 
a
 / 90;

146 
c
 = 
a
 - 
b
 * 90;

149 
b
&3) {

151 
c
 = 90 - c;

152  
cosöe
[
c
][0] - cosöe[c-1][1] * 
™gÀ
;

154  -(
cosöe
[
c
][0] + cosöe[c][1] * 
™gÀ
);

156 
c
 = 90 - c;

157  
cosöe
[
c
-1][1] * 
™gÀ
 - cosine[c][0];

159  
cosöe
[
c
][0] + cosöe[c][1] * 
™gÀ
;

161 
	}
}

164 
	$qsö
(
FLOAT
 
™gÀ
)

166 
a
, 
b
, 
c
;

169 
a
 = ()
™gÀ
 - 90;

170 i‡(
a
 < 0) {

171 
™gÀ
 = (
a
 + 90) -ángle;

172 
a
 = -a;

174 
™gÀ
 =ángÀ - (
a
 + 90);

176 
b
 = 
a
 / 90;

177 
c
 = 
a
 - 
b
 * 90;

180 
b
&3) {

182 
c
 = 90 - c;

183  
cosöe
[
c
][0] - cosöe[c-1][1] * 
™gÀ
;

185  -(
cosöe
[
c
][0] + cosöe[c][1] * 
™gÀ
);

187 
c
 = 90 - c;

188  
cosöe
[
c
-1][1] * 
™gÀ
 - cosine[c][0];

190  
cosöe
[
c
][0] + cosöe[c][1] * 
™gÀ
;

192 
	}
}

195 
	~<m©h.h
>

196 
	#qcos
 
QCOS


	)

197 
	#qsö
 
QSIN


	)

198 
	tFLOAT
;

200 
FLOAT
 
	$QCOS
(
FLOAT
 
a
)

202  
	`cos
(
a
 * 
M_PI
 / 180.);

203 
	}
}

205 
FLOAT
 
	$QSIN
(
FLOAT
 
a
)

207  
	`sö
(
a
 * 
M_PI
 / 180.);

208 
	}
}

232 
	$GdArcAngÀ
(
PSD
 
psd
, 
MWCOORD
 
x0
, MWCOORD 
y0
, MWCOORD 
rx
, MWCOORD 
ry
,

233 
MWCOORD
 
™gÀ1
, MWCOORD 
™gÀ2
, 
ty≥
)

235 #i‡
HAVEFLOAT


236 
MWCOORD
 
ax
, 
ay
, 
bx
, 
by
;

237 
FLOAT
 
a
, 
b
;

240 
ax
 = 
	`qcos
(
™gÀ1
/64.Ë* 
rx
;

241 
bx
 = 
	`qcos
(
™gÀ2
/64.Ë* 
rx
;

243 
a
 = -
	`qsö
(
™gÀ1
/64.);

244 
b
 = -
	`qsö
(
™gÀ2
/64.);

245 
ay
 = 
a
 * 
ry
;

246 
by
 = 
b
 * 
ry
;

249 i‡(
ax
 =
bx
 && 
ay
 =
by
 && 
™gÀ1
 !
™gÀ2
)

253 
	`GdArc
(
psd
, 
x0
, 
y0
, 
rx
, 
ry
, 
ax
, 
ay
, 
bx
, 
by
, 
ty≥
);

255 
	}
}

259 
PSD
 
	mpsd
;

260 
MWCOORD
 
	mx0
, 
	my0
;

261 
MWCOORD
 
	mrx
, 
	mry
;

262 
MWCOORD
 
	max
, 
	may
;

263 
MWCOORD
 
	mbx
, 
	mby
;

264 
	madú
, 
	mbdú
;

265 
	mty≥
;

266 } 
	tSLICE
;

274 
	$˛ù_löe
(
SLICE
 *
¶i˚
, 
MWCOORD
 
xe
, MWCOORD 
ye
, 
dú
, MWCOORD 
y
, MWCOORD *
x0
,

275 
MWCOORD
 *
x1
)

281 i‡(
y
 >0 && 
ye
 == 0) {

285 i‡(
¶i˚
->
adú
 < 0) {

286 i‡(
¶i˚
->
ay
 || sli˚->
by
)

288 i‡(
¶i˚
->
ax
 =-¶i˚->
bx
)

295 i‡((
y
 >0 && 
ye
 >= 0) || (y < 0 && ye < 0)) {

296 
MWCOORD
 
x
;

298 i‡(
ye
 =0Ë
x
 = 
xe
; 

299 
x
 = (
MWCOORD
)()
xe
 * 
y
 / 
ye
;

301 i‡(
x
 >*
x0
 && x <*
x1
) {

302 i‡(
dú
 > 0)

303 *
x0
 = 
x
;

305 *
x1
 = 
x
;

308 i‡(
dú
 > 0) {

309 i‡(
x
 <*
x0
)

312 i‡(
x
 >*
x1
)

319 
	}
}

325 
	$døw_löe
(
SLICE
 *
¶i˚
, 
MWCOORD
 
x0
, MWCOORD 
y
, MWCOORD 
x1
, 
mode
)

327 
dbl
 = (
¶i˚
->
adú
 > 0 && sli˚->
bdú
 < 0);

328 
disˇrd
, 
ªt
;

329 
MWCOORD
 
x2
 = 
x0
, 
x3
 = 
x1
;

331 i‡(
y
 == 0) {

332 i‡(
¶i˚
->
ty≥
 !
MWPIE
)

335 i‡((
¶i˚
->
ay
 <0 && sli˚->
by
 >= 0) ||

336 (
¶i˚
->
ay
 >0 && sli˚->
by
 <= 0)) {

337 i‡(
¶i˚
->
adú
 < 0) {

338 i‡(
x1
 > 0)

339 
x1
 = 0;

341 i‡(
¶i˚
->
bdú
 > 0) {

342 i‡(
x0
 < 0)

343 
x0
 = 0;

346 i‡(!
dbl
) {

349 i‡(
gr_fûlmode
 !
MWFILL_SOLID
 && 
mode
)

350 
	`ts_døwpoöt
(
¶i˚
->
psd
, sli˚->
x0
, sli˚->
y0
);

352 
	`døwpoöt
(
¶i˚
->
psd
, sli˚->
x0
, sli˚->
y0
);

356 i‡(
gr_fûlmode
 !
MWFILL_SOLID
 && 
mode
)

357 
	`ts_døwrow
(
¶i˚
->
psd
, sli˚->
x0
 + x0, sli˚->x0 + 
x1
, sli˚->
y0
);

359 
	`døwrow
(
¶i˚
->
psd
, sli˚->
x0
 + x0, sli˚->x0 + 
x1
, sli˚->
y0
);

364 
ªt
 = 
	`˛ù_löe
(
¶i˚
, sli˚->
ax
, sli˚->
ay
, sli˚->
adú
, 
y
, &
x0
, &
x1
);

366 i‡(
dbl
) {

367 i‡(!
ªt
) {

369 i‡(
gr_fûlmode
 !
MWFILL_SOLID
 && 
mode
)

370 
	`ts_døwrow
(
¶i˚
->
psd
, sli˚->
x0
 + x0, sli˚->x0 + 
x1
,

371 
¶i˚
->
y0
 + 
y
);

373 
	`døwrow
(
¶i˚
->
psd
, sli˚->
x0
 + x0, sli˚->x0 + 
x1
,

374 
¶i˚
->
y0
 + 
y
);

376 
x0
 = 
x2
;

377 
x1
 = 
x3
;

380 i‡(
ªt
 > 1) {

385 
disˇrd
 = 
ªt
;

386 
ªt
 = 
	`˛ù_löe
(
¶i˚
, sli˚->
bx
, sli˚->
by
, sli˚->
bdú
, 
y
, &
x0
, &
x1
);

388 
disˇrd
 +
ªt
;

389 i‡(
disˇrd
 > 2 && !(
dbl
 && 
ªt
 == 0 && discard == 3)) {

392 i‡(
disˇrd
 == 2) {

394 i‡(
¶i˚
->
adú
 < 0 || sli˚->
bdú
 > 0) {

398 i‡(
gr_fûlmode
 !
MWFILL_SOLID
 && 
mode
)

399 
	`ts_døwrow
(
¶i˚
->
psd
, sli˚->
x0
 + x0, sli˚->x0 + 
x1
, sli˚->
y0
 + 
y
);

401 
	`døwrow
(
¶i˚
->
psd
, sli˚->
x0
 + x0, sli˚->x0 + 
x1
, sli˚->
y0
 + 
y
);

402 
	}
}

415 
	$døw¨c£gmít
(
SLICE
 *
¶i˚
, 
MWCOORD
 
xp
, MWCOORD 
yp
, 
døw⁄
)

417 
dm
 = 0;

418 
dc
 = 0;

420 
¶i˚
->
ty≥
) {

421 
MWELLIPSEFILL
:

425 i‡(
gr_fûlmode
 !
MWFILL_SOLID
) {

426 
	`ts_døwrow
(
¶i˚
->
psd
, sli˚->
x0
-
xp
, sli˚->x0+xp, sli˚->
y0
-
yp
);

427 
	`ts_døwrow
(
¶i˚
->
psd
, sli˚->
x0
-
xp
, sli˚->x0+xp, sli˚->
y0
+
yp
);

430 
	`GdSëDash
(&
dm
, &
dc
);

431 
	`døwrow
(
¶i˚
->
psd
, sli˚->
x0
-
xp
, sli˚->x0+xp, sli˚->
y0
-
yp
);

432 
	`døwrow
(
¶i˚
->
psd
, sli˚->
x0
-
xp
, sli˚->x0+xp, sli˚->
y0
+
yp
);

433 
	`GdSëDash
(&
dm
, &
dc
);

438 
MWELLIPSE
:

439 i‡(!
døw⁄
) ;

441 
	`døwpoöt
(
¶i˚
->
psd
, sli˚->
x0
 + 
xp
, sli˚->
y0
 + 
yp
);

442 
	`døwpoöt
(
¶i˚
->
psd
, sli˚->
x0
 - 
xp
, sli˚->
y0
 + 
yp
);

443 
	`døwpoöt
(
¶i˚
->
psd
, sli˚->
x0
 + 
xp
, sli˚->
y0
 - 
yp
);

444 
	`døwpoöt
(
¶i˚
->
psd
, sli˚->
x0
 - 
xp
, sli˚->
y0
 - 
yp
);

447 
MWPIE
:

449 i‡(
gr_fûlmode
 =
MWFILL_SOLID
Ë
	`GdSëDash
(&
dm
, &
dc
);

450 
	`døw_löe
(
¶i˚
, -
xp
, -
yp
, +xp, 1);

451 
	`døw_löe
(
¶i˚
, -
xp
, +
yp
, +xp, 1);

452 i‡(
gr_fûlmode
 =
MWFILL_SOLID
Ë
	`GdSëDash
(&
dm
, &
dc
);

458 
	`døw_löe
(
¶i˚
, +
xp
, +
yp
, +xp, 0);

459 
	`døw_löe
(
¶i˚
, -
xp
, +
yp
, -xp, 0);

460 
	`døw_löe
(
¶i˚
, +
xp
, -
yp
, +xp, 0);

461 
	`døw_löe
(
¶i˚
, -
xp
, -
yp
, -xp, 0);

464 
	}
}

468 
	$døw¨c
(
SLICE
 *
¶i˚
)

470 
gr_dashmask
;

471 
gr_dashcou¡
;

473 
MWCOORD
 
xp
, 
yp
;

474 
MWCOORD
 
rx
, 
ry
;

475 
Asqu¨ed
;

476 
TwoAsqu¨ed
;

477 
Bsqu¨ed
;

478 
TwoBsqu¨ed
;

479 
d
;

480 
dx
, 
dy
;

482 
bô
 = 0;

483 
døw⁄
 = 1;

485 
rx
 = 
¶i˚
->rx;

486 
ry
 = 
¶i˚
->ry;

488 
xp
 = 0;

489 
yp
 = 
ry
;

490 
Asqu¨ed
 = 
rx
 *Ñx;

491 
TwoAsqu¨ed
 = 2 * 
Asqu¨ed
;

492 
Bsqu¨ed
 = 
ry
 *Ñy;

493 
TwoBsqu¨ed
 = 2 * 
Bsqu¨ed
;

494 
d
 = 
Bsqu¨ed
 - 
Asqu¨ed
 * 
ry
 + (Asquared >> 2);

495 
dx
 = 0;

496 
dy
 = 
TwoAsqu¨ed
 * 
ry
;

498 i‡(
gr_fûlmode
 !
MWFILL_SOLID
)

499 
	`£t_ts_‹igö
(
¶i˚
->
x0
 - 
rx
, sli˚->
y0
 - 
ry
);

501 
dx
 < 
dy
) {

514 i‡((
d
 > 0Ë|| ((
¶i˚
->
ty≥
 !
MWPIE
Ë&& (¶i˚->ty≥ !
MWELLIPSEFILL
))) {

515 i‡(
gr_dashcou¡
) {

516 
døw⁄
 = (
gr_dashmask
 & (1 << 
bô
)) ? 1 : 0;

517 
bô
 = (bô + 1Ë% 
gr_dashcou¡
;

519 
døw⁄
 = 1;

521 
	`døw¨c£gmít
(
¶i˚
, 
xp
, 
yp
, 
døw⁄
);

524 i‡(
d
 > 0) {

525 
yp
--;

526 
dy
 -
TwoAsqu¨ed
;

527 
d
 -
dy
;

529 
xp
++;

530 
dx
 +
TwoBsqu¨ed
;

531 
d
 +(
Bsqu¨ed
 + 
dx
);

534 
d
 +((3L * (
Asqu¨ed
 - 
Bsqu¨ed
Ë/ 2L - (
dx
 + 
dy
)) >> 1);

536 
yp
 >= 0) {

537 i‡(
gr_dashcou¡
) {

538 
døw⁄
 = (
gr_dashmask
 & (1 << 
bô
)) ? 1 : 0;

539 
bô
 = (bô + 1Ë% 
gr_dashcou¡
;

541 
døw⁄
 = 1;

543 
	`døw¨c£gmít
(
¶i˚
, 
xp
, 
yp
, 
døw⁄
);

544 i‡(
d
 < 0) {

545 
xp
++;

546 
dx
 +
TwoBsqu¨ed
;

547 
d
 +
dx
;

549 
yp
--;

550 
dy
 -
TwoAsqu¨ed
;

551 
d
 +(
Asqu¨ed
 - 
dy
);

554 
	}
}

577 
	$GdArc
(
PSD
 
psd
, 
MWCOORD
 
x0
, MWCOORD 
y0
, MWCOORD 
rx
, MWCOORD 
ry
,

578 
MWCOORD
 
ax
, MWCOORD 
ay
, MWCOORD 
bx
, MWCOORD 
by
, 
ty≥
)

580 
MWCOORD
 
adú
, 
bdú
;

581 
SLICE
 
¶i˚
;

583 i‡(
rx
 <0 || 
ry
 <= 0)

593 i‡(
ay
 >= 0)

594 
adú
 = 1;

596 
adú
 = -1;

598 i‡(
by
 >= 0)

599 
bdú
 = -1;

601 
bdú
 = 1;

612 i‡(
ay
 == 0) ++ay;

613 i‡(
by
 == 0) ++by;

616 i‡(
bx
 > 
ax
) {

617 
MWCOORD
 
sw≠
;

619 
sw≠
 = 
ax
;

620 
ax
 = 
bx
;

621 
bx
 = 
sw≠
;

623 
sw≠
 = 
ay
;

624 
ay
 = 
by
;

625 
by
 = 
sw≠
;

627 
sw≠
 = 
adú
;

628 
adú
 = 
bdú
;

629 
bdú
 = 
sw≠
;

633 i‡(
	`GdClùAªa
(
psd
, 
x0
-
rx
, 
y0
-
ry
, x0+rx, y0+ryË=
CLIP_INVISIBLE
)

636 
¶i˚
.
psd
 =Ösd;

637 
¶i˚
.
x0
 = x0;

638 
¶i˚
.
y0
 = y0;

639 
¶i˚
.
rx
 =Ñx;

640 
¶i˚
.
ry
 =Ñy;

641 
¶i˚
.
ax
 =áx;

642 
¶i˚
.
ay
 =áy;

643 
¶i˚
.
bx
 = bx;

644 
¶i˚
.
by
 = by;

645 
¶i˚
.
adú
 =ádir;

646 
¶i˚
.
bdú
 = bdir;

647 
¶i˚
.
ty≥
 =Åype;

649 
	`døw¨c
(&
¶i˚
);

651 i‡(
ty≥
 & 
MWOUTLINE
) {

653 
	`GdLöe
(
psd
, 
x0
, 
y0
, x0+
ax
, y0+
ay
, 
TRUE
);

654 
	`GdLöe
(
psd
, 
x0
, 
y0
, x0+
bx
, y0+
by
, 
TRUE
);

657 
	`GdFixCurs‹
(
psd
);

658 
	}
}

673 
	$GdEŒù£
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
rx
, MWCOORD 
ry
, 
MWBOOL
 
fûl
)

675 
SLICE
 
¶i˚
;

677 i‡(
rx
 < 0 || 
ry
 < 0)

683 
	`GdClùAªa
(
psd
, 
x
 - 
rx
, 
y
 - 
ry
, x +Ñx, y +Ñy)) {

684 
CLIP_VISIBLE
:

695 
CLIP_INVISIBLE
:

699 
¶i˚
.
psd
 =Ösd;

700 
¶i˚
.
x0
 = 
x
;

701 
¶i˚
.
y0
 = 
y
;

702 
¶i˚
.
rx
 =Ñx;

703 
¶i˚
.
ry
 =Ñy;

704 
¶i˚
.
ty≥
 = 
fûl
? 
MWELLIPSEFILL
: 
MWELLIPSE
;

707 
	`døw¨c
(&
¶i˚
);

709 
	`GdFixCurs‹
(
psd
);

710 
	}
}

	@engine/devclip.c

1 
	~"devi˚.h
"

3 #i‡
DYNAMICREGIONS


4 
	~"dev˛ù2.c
"

6 
	~"dev˛ù1.c
"

	@engine/devclip1.c

9 
	~"devi˚.h
"

16 
MWCOORD
 
	g˛ùmöx
;

17 
MWCOORD
 
	g˛ùmöy
;

18 
MWCOORD
 
	g˛ùmaxx
;

19 
MWCOORD
 
	g˛ùmaxy
;

21 
MWBOOL
 
	g˛ùªsu…
;

22 
	g˛ùcou¡
;

23 
MWCLIPRECT
 
	g˛ùª˘s
[
MAX_CLIPRECTS
];

38 
	$GdSëClùRe˘s
(
PSD
 
psd
,
cou¡
, 
MWCLIPRECT
 *
èbÀ
)

40 
MWCLIPRECT
 *
Ω
;

43 i‡(
cou¡
 <= 0) {

44 
˛ùmöx
 = 0;

45 
˛ùmöy
 = 0;

46 
˛ùmaxx
 = 
psd
->
xvúåes
 - 1;

47 
˛ùmaxy
 = 
psd
->
yvúåes
 - 1;

48 
˛ùcou¡
 = 0;

49 
˛ùªsu…
 = 
TRUE
;

57 
Ω
 = 
˛ùª˘s
;

58 
˛ùcou¡
 = 0;

59 i‡(
cou¡
 > 
MAX_CLIPRECTS
) count = MAX_CLIPRECTS;

60 
cou¡
-- > 0) {

61 *
Ω
 = *
èbÀ
++;

62 i‡(
Ω
->
x
 < 0) {

63 
Ω
->
width
 +Ω->
x
;

64 
Ω
->
x
 = 0;

66 i‡(
Ω
->
y
 < 0) {

67 
Ω
->
height
 +Ω->
y
;

68 
Ω
->
y
 = 0;

70 i‡((
Ω
->
x
 >
psd
->
xvúåes
Ë|| (Ω->
width
 <= 0) ||

71 (
Ω
->
y
 >
psd
->
yvúåes
Ë|| (Ω->
height
 <= 0))

73 i‡(
Ω
->
x
 +Ñp->
width
 > 
psd
->
xvúåes
)

74 
Ω
->
width
 = 
psd
->
xvúåes
 -Ñp->
x
;

75 i‡(
Ω
->
y
 +Ñp->
height
 > 
psd
->
yvúåes
)

76 
Ω
->
height
 = 
psd
->
yvúåes
 -Ñp->
y
;

77 
Ω
++;

78 
˛ùcou¡
++;

84 i‡(
˛ùcou¡
 == 0) {

85 
˛ùmöx
 = 
MIN_MWCOORD
;

86 
˛ùmöy
 = 
MIN_MWCOORD
;

87 
˛ùmaxx
 = 
MAX_MWCOORD
;

88 
˛ùmaxy
 = 
MAX_MWCOORD
;

89 
˛ùªsu…
 = 
FALSE
;

96 
˛ùmöx
 = 
˛ùª˘s
[0].
x
;

97 
˛ùmöy
 = 
˛ùª˘s
[0].
y
;

98 
˛ùmaxx
 = 
˛ùmöx
 + 
˛ùª˘s
[0].
width
 - 1;

99 
˛ùmaxy
 = 
˛ùmöy
 + 
˛ùª˘s
[0].
height
 - 1;

100 
˛ùªsu…
 = 
TRUE
;

101 
	}
}

120 
MWBOOL


121 
	$GdClùPoöt
(
PSD
 
psd
,
MWCOORD
 
x
,MWCOORD 
y
)

123 
cou¡
;

124 
MWCLIPRECT
 *
Ω
;

125 
MWCOORD
 
ãmp
;

130 i‡((
x
 >
˛ùmöx
Ë&& (x <
˛ùmaxx
) &&

131 (
y
 >
˛ùmöy
Ë&& (y <
˛ùmaxy
)) {

132 i‡(
˛ùªsu…
Ë
	`GdCheckCurs‹
(
psd
, 
x
, 
y
, x, y);

133  
˛ùªsu…
;

140 i‡(
x
 < 0) {

141 
˛ùmöx
 = 
MIN_MWCOORD
;

142 
˛ùmaxx
 = -1;

143 
˛ùmöy
 = 
MIN_MWCOORD
;

144 
˛ùmaxy
 = 
MAX_MWCOORD
;

145 
˛ùªsu…
 = 
FALSE
;

146  
FALSE
;

148 i‡(
y
 < 0) {

149 
˛ùmöx
 = 
MIN_MWCOORD
;

150 
˛ùmaxx
 = 
MAX_MWCOORD
;

151 
˛ùmöy
 = 
MIN_MWCOORD
;

152 
˛ùmaxy
 = -1;

153 
˛ùªsu…
 = 
FALSE
;

154  
FALSE
;

156 i‡(
x
 >
psd
->
xvúåes
) {

157 
˛ùmöx
 = 
psd
->
xvúåes
;

158 
˛ùmaxx
 = 
MAX_MWCOORD
;

159 
˛ùmöy
 = 
MIN_MWCOORD
;

160 
˛ùmaxy
 = 
MAX_MWCOORD
;

161 
˛ùªsu…
 = 
FALSE
;

162  
FALSE
;

164 i‡(
y
 >
psd
->
yvúåes
) {

165 
˛ùmöx
 = 
MIN_MWCOORD
;

166 
˛ùmaxx
 = 
MAX_MWCOORD
;

167 
˛ùmöy
 = 
psd
->
yvúåes
;

168 
˛ùmaxy
 = 
MAX_MWCOORD
;

169 
˛ùªsu…
 = 
FALSE
;

170  
FALSE
;

177 
cou¡
 = 
˛ùcou¡
;

178 i‡(
cou¡
 <= 0) {

179 
˛ùmöx
 = 0;

180 
˛ùmaxx
 = 
psd
->
xvúåes
 - 1;

181 
˛ùmöy
 = 0;

182 
˛ùmaxy
 = 
psd
->
yvúåes
 - 1;

183 
˛ùªsu…
 = 
TRUE
;

184 
	`GdCheckCurs‹
(
psd
, 
x
, 
y
, x, y);

185  
TRUE
;

195 
Ω
 = 
˛ùª˘s
; 
cou¡
-- > 0;Ñp++) {

196 i‡((
x
 >
Ω
->xË&& (
y
 >Ω->yË&& (x <Ñp->x +Ñp->
width
)

197 && (
y
 < 
Ω
->y +Ñp->
height
)) {

198 
˛ùmöx
 = 
Ω
->
x
;

199 
˛ùmöy
 = 
Ω
->
y
;

200 
˛ùmaxx
 = 
Ω
->
x
 +Ñp->
width
 - 1;

201 
˛ùmaxy
 = 
Ω
->
y
 +Ñp->
height
 - 1;

202 
˛ùªsu…
 = 
TRUE
;

203 
	`GdCheckCurs‹
(
psd
, 
x
, 
y
, x, y);

204  
TRUE
;

215 
˛ùmöx
 = 
MIN_MWCOORD
;

216 
˛ùmöy
 = 
MIN_MWCOORD
;

217 
˛ùmaxx
 = 
MAX_MWCOORD
;

218 
˛ùmaxy
 = 
MAX_MWCOORD
;

219 
cou¡
 = 
˛ùcou¡
;

220 
Ω
 = 
˛ùª˘s
; 
cou¡
-- > 0;Ñp++) {

221 i‡((
x
 < 
Ω
->xË&& (Ω->x <
˛ùmaxx
)) clipmaxx =Ñp->x - 1;

222 
ãmp
 = 
Ω
->
x
 +Ñp->
width
 - 1;

223 i‡((
x
 > 
ãmp
Ë&& (ãm∞>
˛ùmöx
)) clipminx =Åemp + 1;

224 i‡((
y
 < 
Ω
->yË&& (Ω->y <
˛ùmaxy
)) clipmaxy =Ñp->y - 1;

225 
ãmp
 = 
Ω
->
y
 +Ñp->
height
 - 1;

226 i‡((
y
 > 
ãmp
Ë&& (ãm∞>
˛ùmöy
)) clipminy =Åemp + 1;

228 
˛ùªsu…
 = 
FALSE
;

229  
FALSE
;

230 
	}
}

252 
	$GdClùAªa
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
y1
, MWCOORD 
x2
, MWCOORD 
y2
)

254 i‡((
x1
 < 
˛ùmöx
Ë|| (x1 > 
˛ùmaxx
) ||

255 (
y1
 < 
˛ùmöy
Ë|| (y1 > 
˛ùmaxy
))

256 
	`GdClùPoöt
(
psd
, 
x1
, 
y1
);

258 i‡((
x2
 >
˛ùmöx
Ë&& (x2 <
˛ùmaxx
) &&

259 (
y2
 >
˛ùmöy
Ë&& (y2 <
˛ùmaxy
)) {

260 i‡(!
˛ùªsu…
Ë 
CLIP_INVISIBLE
;

261 
	`GdCheckCurs‹
(
psd
, 
x1
, 
y1
, 
x2
, 
y2
);

262  
CLIP_VISIBLE
;

264  
CLIP_PARTIAL
;

265 
	}
}

	@engine/devclip2.c

9 
	~<°dio.h
>

10 
	~"devi˚.h
"

17 
MWCOORD
 
	g˛ùmöx
;

18 
MWCOORD
 
	g˛ùmöy
;

19 
MWCOORD
 
	g˛ùmaxx
;

20 
MWCOORD
 
	g˛ùmaxy
;

22 
MWBOOL
 
	g˛ùªsu…
;

23 
MWCLIPREGION
 *
	g˛ùªgi⁄
 = 
NULL
;

36 
	$GdSëClùRegi⁄
(
PSD
 
psd
, 
MWCLIPREGION
 *
ªg
)

38 if(
˛ùªgi⁄
)

39 
	`GdDe°royRegi⁄
(
˛ùªgi⁄
);

41 if(!
ªg
)

42 
ªg
 = 
	`GdAŒocRegi⁄
();

44 
˛ùªgi⁄
 = 
ªg
;

48 
MWRECT
 
rc
;

53 
cou¡
-- > 0) {

54 
MWCLIPRECT
 
¸
;

55 
MWCLIPRECT
 *
Ω
 = &
¸
;

57 *
Ω
 = *
èbÀ
++;

58 i‡(
Ω
->
x
 < 0) {

59 
Ω
->
width
 +Ω->
x
;

60 
Ω
->
x
 = 0;

62 i‡(
Ω
->
y
 < 0) {

63 
Ω
->
height
 +Ω->
y
;

64 
Ω
->
y
 = 0;

66 i‡((
Ω
->
x
 >
psd
->
xvúåes
Ë|| (Ω->
width
 <= 0) ||

67 (
Ω
->
y
 >
psd
->
yvúåes
Ë|| (Ω->
height
 <= 0))

69 i‡(
Ω
->
x
 +Ñp->
width
 > 
psd
->
xvúåes
)

70 
Ω
->
width
 = 
psd
->
xvúåes
 -Ñp->
x
;

71 i‡(
Ω
->
y
 +Ñp->
height
 > 
psd
->
yvúåes
)

72 
Ω
->
height
 = 
psd
->
yvúåes
 -Ñp->
y
;

73 
rc
.
À·
 = 
Ω
->
x
;

74 
rc
.
t›
 = 
Ω
->
y
;

75 
rc
.
right
 = 
Ω
->
x
+Ω->
width
;

76 
rc
.
bŸtom
 = 
Ω
->
y
+Ω->
height
;

77 
	`GdUni⁄Re˘WôhRegi⁄
(&
rc
, 
˛ùªgi⁄
);

84 i‡(
˛ùªgi⁄
->
numRe˘s
 == 0) {

85 
˛ùmöx
 = 
MIN_MWCOORD
;

86 
˛ùmöy
 = 
MIN_MWCOORD
;

87 
˛ùmaxx
 = 
MAX_MWCOORD
;

88 
˛ùmaxy
 = 
MAX_MWCOORD
;

89 
˛ùªsu…
 = 
FALSE
;

96 
˛ùmöx
 = 
˛ùªgi⁄
->
ª˘s
[0].
À·
;

97 
˛ùmöy
 = 
˛ùªgi⁄
->
ª˘s
[0].
t›
;

98 
˛ùmaxx
 = 
˛ùªgi⁄
->
ª˘s
[0].
right
 - 1;

99 
˛ùmaxy
 = 
˛ùªgi⁄
->
ª˘s
[0].
bŸtom
 - 1;

100 
˛ùªsu…
 = 
TRUE
;

101 
	}
}

120 
MWBOOL


121 
	$GdClùPoöt
(
PSD
 
psd
,
MWCOORD
 
x
,MWCOORD 
y
)

123 
cou¡
;

124 
MWRECT
 *
Ω
;

125 
MWCOORD
 
ãmp
;

130 i‡((
x
 >
˛ùmöx
Ë&& (x <
˛ùmaxx
) &&

131 (
y
 >
˛ùmöy
Ë&& (y <
˛ùmaxy
)) {

132 i‡(
˛ùªsu…
Ë
	`GdCheckCurs‹
(
psd
, 
x
, 
y
, x, y);

133  
˛ùªsu…
;

140 i‡(
x
 < 0) {

141 
˛ùmöx
 = 
MIN_MWCOORD
;

142 
˛ùmaxx
 = -1;

143 
˛ùmöy
 = 
MIN_MWCOORD
;

144 
˛ùmaxy
 = 
MAX_MWCOORD
;

145 
˛ùªsu…
 = 
FALSE
;

146  
FALSE
;

148 i‡(
y
 < 0) {

149 
˛ùmöx
 = 
MIN_MWCOORD
;

150 
˛ùmaxx
 = 
MAX_MWCOORD
;

151 
˛ùmöy
 = 
MIN_MWCOORD
;

152 
˛ùmaxy
 = -1;

153 
˛ùªsu…
 = 
FALSE
;

154  
FALSE
;

156 i‡(
x
 >
psd
->
xvúåes
) {

157 
˛ùmöx
 = 
psd
->
xvúåes
;

158 
˛ùmaxx
 = 
MAX_MWCOORD
;

159 
˛ùmöy
 = 
MIN_MWCOORD
;

160 
˛ùmaxy
 = 
MAX_MWCOORD
;

161 
˛ùªsu…
 = 
FALSE
;

162  
FALSE
;

164 i‡(
y
 >
psd
->
yvúåes
) {

165 
˛ùmöx
 = 
MIN_MWCOORD
;

166 
˛ùmaxx
 = 
MAX_MWCOORD
;

167 
˛ùmöy
 = 
psd
->
yvúåes
;

168 
˛ùmaxy
 = 
MAX_MWCOORD
;

169 
˛ùªsu…
 = 
FALSE
;

170  
FALSE
;

177 
cou¡
 = 
˛ùªgi⁄
->
numRe˘s
;

178 i‡(
cou¡
 <= 0) {

179 
˛ùmöx
 = 0;

180 
˛ùmaxx
 = 
psd
->
xvúåes
 - 1;

181 
˛ùmöy
 = 0;

182 
˛ùmaxy
 = 
psd
->
yvúåes
 - 1;

183 
˛ùªsu…
 = 
TRUE
;

184 
	`GdCheckCurs‹
(
psd
, 
x
, 
y
, x, y);

185  
TRUE
;

195 
Ω
 = 
˛ùªgi⁄
->
ª˘s
; 
cou¡
-- > 0;Ñp++) {

196 i‡((
x
 >
Ω
->
À·
Ë&& (
y
 >Ω->
t›
Ë&& (x <Ñp->
right
)

197 && (
y
 < 
Ω
->
bŸtom
)) {

198 
˛ùmöx
 = 
Ω
->
À·
;

199 
˛ùmöy
 = 
Ω
->
t›
;

200 
˛ùmaxx
 = 
Ω
->
right
 - 1;

201 
˛ùmaxy
 = 
Ω
->
bŸtom
 - 1;

202 
˛ùªsu…
 = 
TRUE
;

203 
	`GdCheckCurs‹
(
psd
, 
x
, 
y
, x, y);

204  
TRUE
;

215 
˛ùmöx
 = 
MIN_MWCOORD
;

216 
˛ùmöy
 = 
MIN_MWCOORD
;

217 
˛ùmaxx
 = 
MAX_MWCOORD
;

218 
˛ùmaxy
 = 
MAX_MWCOORD
;

219 
cou¡
 = 
˛ùªgi⁄
->
numRe˘s
;

220 
Ω
 = 
˛ùªgi⁄
->
ª˘s
; 
cou¡
-- > 0;Ñp++) {

221 i‡((
x
 < 
Ω
->
À·
Ë&& (Ω->À· <
˛ùmaxx
)) clipmaxx =Ñp->left - 1;

222 
ãmp
 = 
Ω
->
right
 - 1;

223 i‡((
x
 > 
ãmp
Ë&& (ãm∞>
˛ùmöx
)) clipminx =Åemp + 1;

224 i‡((
y
 < 
Ω
->
t›
Ë&& (Ω->t› <
˛ùmaxy
)) clipmaxy =Ñp->top - 1;

225 
ãmp
 = 
Ω
->
bŸtom
 - 1;

226 i‡((
y
 > 
ãmp
Ë&& (ãm∞>
˛ùmöy
)) clipminy =Åemp + 1;

228 
˛ùªsu…
 = 
FALSE
;

229  
FALSE
;

230 
	}
}

252 
	$GdClùAªa
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
y1
, MWCOORD 
x2
, MWCOORD 
y2
)

254 i‡((
x1
 < 
˛ùmöx
Ë|| (x1 > 
˛ùmaxx
) ||

255 (
y1
 < 
˛ùmöy
Ë|| (y1 > 
˛ùmaxy
))

256 
	`GdClùPoöt
(
psd
, 
x1
, 
y1
);

258 i‡((
x2
 >
˛ùmöx
Ë&& (x2 <
˛ùmaxx
) &&

259 (
y2
 >
˛ùmöy
Ë&& (y2 <
˛ùmaxy
)) {

260 i‡(!
˛ùªsu…
Ë 
CLIP_INVISIBLE
;

261 
	`GdCheckCurs‹
(
psd
, 
x1
, 
y1
, 
x2
, 
y2
);

262  
CLIP_VISIBLE
;

264  
CLIP_PARTIAL
;

265 
	}
}

	@engine/devdraw.c

17 
	~<°dio.h
>

18 
	~<°dlib.h
>

19 
	~<°rög.h
>

20 
	~<as£π.h
>

21 
	~"devi˚.h
"

23 
MWPIXELVAL
 
gr_f‹eground
;

24 
MWPIXELVAL
 
gr_background
;

25 
MWBOOL
 
gr_u£bg
;

26 
gr_mode
;

27 
MWPALENTRY
 
gr_∑Àâe
[256];

28 
gr_fú°u£ΩÆíåy
;

29 
gr_√xçÆíåy
;

32 
gr_dashmask
;

33 
gr_dashcou¡
;

35 
gr_fûlmode
;

37  
døwpoöt
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
);

39  
døwrow
(
PSD
 
psd
,
MWCOORD
 
x1
,MWCOORD 
x2
,MWCOORD 
y
);

40 
døwcﬁ
(
PSD
 
psd
,
MWCOORD
 
x
,MWCOORD 
y1
,MWCOORD 
y2
);

49 
	$GdSëMode
(
mode
)

51 
ﬁdmode
 = 
gr_mode
;

53 
gr_mode
 = 
mode
;

54  
ﬁdmode
;

55 
	}
}

64 
	$GdSëFûlMode
(
mode
)

66 
ﬁdmode
 = 
gr_fûlmode
;

68 
gr_fûlmode
 = 
mode
;

69  
ﬁdmode
;

70 
	}
}

78 
MWBOOL


79 
	$GdSëU£Background
(
MWBOOL
 
Êag
)

81 
MWBOOL
 
ﬁdu£bg
 = 
gr_u£bg
;

83 
gr_u£bg
 = 
Êag
;

84  
ﬁdu£bg
;

85 
	}
}

93 
MWPIXELVAL


94 
	$GdSëF‹egroundPixñVÆ
(
PSD
 
psd
, 
MWPIXELVAL
 
fg
)

96 
MWPIXELVAL
 
ﬁdfg
 = 
gr_f‹eground
;

98 
gr_f‹eground
 = 
fg
;

99  
ﬁdfg
;

100 
	}
}

109 
MWPIXELVAL


110 
	$GdSëBackgroundPixñVÆ
(
PSD
 
psd
, 
MWPIXELVAL
 
bg
)

112 
MWPIXELVAL
 
ﬁdbg
 = 
gr_background
;

114 
gr_background
 = 
bg
;

115  
ﬁdbg
;

116 
	}
}

125 
MWPIXELVAL


126 
	$GdSëF‹egroundCﬁ‹
(
PSD
 
psd
, 
MWCOLORVAL
 
fg
)

128 
MWPIXELVAL
 
ﬁdfg
 = 
gr_f‹eground
;

130 
gr_f‹eground
 = 
	`GdFödCﬁ‹
(
psd
, 
fg
);

131  
ﬁdfg
;

132 
	}
}

142 
MWPIXELVAL


143 
	$GdSëBackgroundCﬁ‹
(
PSD
 
psd
, 
MWCOLORVAL
 
bg
)

145 
MWPIXELVAL
 
ﬁdbg
 = 
gr_background
;

147 
gr_background
 = 
	`GdFödCﬁ‹
(
psd
, 
bg
);

148  
ﬁdbg
;

149 
	}
}

155 
	$GdSëDash
(*
mask
, *
cou¡
)

157 
ﬁdm
 = 
gr_dashmask
;

158 
ﬁdc
 = 
gr_dashcou¡
;

160 i‡(!
mask
 || !
cou¡
)

163 
gr_dashmask
 = *
mask
;

164 
gr_dashcou¡
 = *
cou¡
;

166 *
mask
 = 
ﬁdm
;

167 *
cou¡
 = 
ﬁdc
;

168 
	}
}

178 
	$GdPoöt
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

180 i‡(
	`GdClùPoöt
(
psd
, 
x
, 
y
)) {

181 
psd
->
	`DøwPixñ
’sd, 
x
, 
y
, 
gr_f‹eground
);

182 
	`GdFixCurs‹
(
psd
);

184 
	}
}

204 
	$GdLöe
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
y1
, MWCOORD 
x2
, MWCOORD 
y2
,

205 
MWBOOL
 
bDøwLa°Poöt
)

207 
xdñè
;

208 
ydñè
;

209 
xöc
;

210 
yöc
;

211 
ªm
;

212 
bô
 = 0;

213 
MWCOORD
 
ãmp
;

218 i‡(
y1
 =
y2
) {

222 i‡(!
bDøwLa°Poöt
) {

223 i‡(
x1
 > 
x2
) {

224 
ãmp
 = 
x1
;

225 
x1
 = 
x2
 + 1;

226 
x2
 = 
ãmp
;

228 --
x2
;

232 
	`døwrow
(
psd
, 
x1
, 
x2
, 
y1
);

233 
	`GdFixCurs‹
(
psd
);

236 i‡(
x1
 =
x2
) {

240 i‡(!
bDøwLa°Poöt
) {

241 i‡(
y1
 > 
y2
) {

242 
ãmp
 = 
y1
;

243 
y1
 = 
y2
 + 1;

244 
y2
 = 
ãmp
;

246 --
y2
;

250 
	`døwcﬁ
(
psd
, 
x1
, 
y1
, 
y2
);

251 
	`GdFixCurs‹
(
psd
);

258 
	`GdClùAªa
(
psd
, 
x1
, 
y1
, 
x2
, 
y2
)) {

259 
CLIP_VISIBLE
:

270 
CLIP_INVISIBLE
:

277 
xdñè
 = 
x2
 - 
x1
;

278 
ydñè
 = 
y2
 - 
y1
;

279 i‡(
xdñè
 < 0)

280 
xdñè
 = -xdelta;

281 i‡(
ydñè
 < 0)

282 
ydñè
 = -ydelta;

283 
xöc
 = (
x2
 > 
x1
)? 1 : -1;

284 
yöc
 = (
y2
 > 
y1
)? 1 : -1;

287 i‡(
	`GdClùPoöt
(
psd
, 
x1
, 
y1
))

288 
psd
->
	`DøwPixñ
’sd, 
x1
, 
y1
, 
gr_f‹eground
);

290 i‡(
xdñè
 >
ydñè
) {

291 
ªm
 = 
xdñè
 / 2;

293 i‡(!
bDøwLa°Poöt
 && 
x1
 =
x2
)

295 
x1
 +
xöc
;

296 
ªm
 +
ydñè
;

297 i‡(
ªm
 >
xdñè
) {

298 
ªm
 -
xdñè
;

299 
y1
 +
yöc
;

302 i‡(
gr_dashcou¡
) {

303 i‡((
gr_dashmask
 & (1 << 
bô
)Ë&& 
	`GdClùPoöt
(
psd
, 
x1
, 
y1
))

304 
psd
->
	`DøwPixñ
’sd, 
x1
, 
y1
, 
gr_f‹eground
);

306 
bô
 = (bô + 1Ë% 
gr_dashcou¡
;

308 i‡(
	`GdClùPoöt
(
psd
, 
x1
, 
y1
))

309 
psd
->
	`DøwPixñ
’sd, 
x1
, 
y1
, 
gr_f‹eground
);

312 i‡(
bDøwLa°Poöt
 && 
x1
 =
x2
)

317 
ªm
 = 
ydñè
 / 2;

319 i‡(!
bDøwLa°Poöt
 && 
y1
 =
y2
)

321 
y1
 +
yöc
;

322 
ªm
 +
xdñè
;

323 i‡(
ªm
 >
ydñè
) {

324 
ªm
 -
ydñè
;

325 
x1
 +
xöc
;

329 i‡(
gr_dashcou¡
) {

330 i‡((
gr_dashmask
 & (1 << 
bô
)Ë&& 
	`GdClùPoöt
(
psd
, 
x1
, 
y1
))

331 
psd
->
	`DøwPixñ
’sd, 
x1
, 
y1
, 
gr_f‹eground
);

333 
bô
 = (bô + 1Ë% 
gr_dashcou¡
;

335 i‡(
	`GdClùPoöt
(
psd
, 
x1
, 
y1
))

336 
psd
->
	`DøwPixñ
’sd, 
x1
, 
y1
, 
gr_f‹eground
);

339 i‡(
bDøwLa°Poöt
 && 
y1
 =
y2
)

343 
	`GdFixCurs‹
(
psd
);

344 
	}
}

348 
	$døwpoöt
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

350 i‡(
	`GdClùPoöt
(
psd
, 
x
, 
y
))

351 
psd
->
	`DøwPixñ
’sd, 
x
, 
y
, 
gr_f‹eground
);

352 
	}
}

358 
	$døwrow
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
)

360 
MWCOORD
 
ãmp
;

363 i‡(
x1
 > 
x2
) {

364 
ãmp
 = 
x1
;

365 
x1
 = 
x2
;

366 
x2
 = 
ãmp
;

370 i‡(
x1
 < 0)

371 
x1
 = 0;

372 i‡(
x2
 >
psd
->
xvúåes
)

373 
x2
 = 
psd
->
xvúåes
 - 1;

376 
	`GdCheckCurs‹
(
psd
, 
x1
, 
y
, 
x2
, y);

380 i‡(!
gr_dashcou¡
) {

381 
x1
 <
x2
) {

382 i‡(
	`GdClùPoöt
(
psd
, 
x1
, 
y
)) {

383 
ãmp
 = 
	`MWMIN
(
˛ùmaxx
, 
x2
);

384 
psd
->
	`DøwH‹zLöe
’sd, 
x1
, 
ãmp
, 
y
, 
gr_f‹eground
);

386 
ãmp
 = 
	`MWMIN
(
˛ùmaxx
, 
x2
);

387 
x1
 = 
ãmp
 + 1;

390 
p
, 
bô
 = 0;

393 
p
 = 
x1
;Ö <
x2
;Ö++) {

394 i‡((
gr_dashmask
 & (1 << 
bô
)Ë&& 
	`GdClùPoöt
(
psd
, 
p
, 
y
))

395 
psd
->
	`DøwPixñ
’sd, 
p
, 
y
, 
gr_f‹eground
);

397 
bô
 = (bô + 1Ë% 
gr_dashcou¡
;

400 
	}
}

406 
	$døwcﬁ
(
PSD
 
psd
, 
MWCOORD
 
x
,MWCOORD 
y1
,MWCOORD 
y2
)

408 
MWCOORD
 
ãmp
;

411 i‡(
y1
 > 
y2
) {

412 
ãmp
 = 
y1
;

413 
y1
 = 
y2
;

414 
y2
 = 
ãmp
;

418 i‡(
y1
 < 0)

419 
y1
 = 0;

420 i‡(
y2
 >
psd
->
yvúåes
)

421 
y2
 = 
psd
->
yvúåes
 - 1;

424 
	`GdCheckCurs‹
(
psd
, 
x
, 
y1
, x, 
y2
);

426 i‡(!
gr_dashcou¡
) {

427 
y1
 <
y2
) {

428 i‡(
	`GdClùPoöt
(
psd
, 
x
, 
y1
)) {

429 
ãmp
 = 
	`MWMIN
(
˛ùmaxy
, 
y2
);

430 
psd
->
	`DøwVîtLöe
’sd, 
x
, 
y1
, 
ãmp
, 
gr_f‹eground
);

432 
ãmp
 = 
	`MWMIN
(
˛ùmaxy
, 
y2
);

433 
y1
 = 
ãmp
 + 1;

436 
p
, 
bô
 = 0;

439 
p
 = 
y1
;Ö <
y2
;Ö++) {

440 i‡((
gr_dashmask
 & (1<<
bô
)Ë&& 
	`GdClùPoöt
(
psd
, 
x
, 
p
))

441 
psd
->
	`DøwPixñ
’sd, 
x
, 
p
, 
gr_f‹eground
);

443 
bô
 = (bô + 1Ë% 
gr_dashcou¡
;

446 
	}
}

460 
	$GdRe˘
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
width
, MWCOORD 
height
)

462 
MWCOORD
 
maxx
;

463 
MWCOORD
 
maxy
;

465 i‡(
width
 <0 || 
height
 <= 0)

467 
maxx
 = 
x
 + 
width
 - 1;

468 
maxy
 = 
y
 + 
height
 - 1;

469 
	`døwrow
(
psd
, 
x
, 
maxx
, 
y
);

470 i‡(
height
 > 1)

471 
	`døwrow
(
psd
, 
x
, 
maxx
, 
maxy
);

472 i‡(
height
 < 3)

474 ++
y
;

475 --
maxy
;

476 
	`døwcﬁ
(
psd
, 
x
, 
y
, 
maxy
);

477 i‡(
width
 > 1)

478 
	`døwcﬁ
(
psd
, 
maxx
, 
y
, 
maxy
);

479 
	`GdFixCurs‹
(
psd
);

480 
	}
}

493 
	$GdFûlRe˘
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
y1
, MWCOORD 
width
, MWCOORD 
height
)

495 
dm
 = 0;

496 
dc
 = 0;

498 
MWCOORD
 
x2
 = 
x1
 + 
width
 - 1;

499 
MWCOORD
 
y2
 = 
y1
 + 
height
 - 1;

501 i‡(
width
 <0 || 
height
 <= 0)

505 i‡(
gr_fûlmode
 !
MWFILL_SOLID
) {

506 
	`£t_ts_‹igö
(
x1
, 
y1
);

508 
	`ts_fûÃe˘
(
psd
, 
x1
, 
y1
, 
width
, 
height
);

509 
	`GdFixCurs‹
(
psd
);

516 
	`GdClùAªa
(
psd
, 
x1
, 
y1
, 
x2
, 
y2
)) {

517 
CLIP_VISIBLE
:

518 
psd
->
	`FûlRe˘
’sd, 
x1
, 
y1
, 
x2
, 
y2
, 
gr_f‹eground
);

519 
	`GdFixCurs‹
(
psd
);

522 
CLIP_INVISIBLE
:

528 
	`GdSëDash
(&
dm
, &
dc
);

531 
y1
 <
y2
)

532 
	`døwrow
(
psd
, 
x1
, 
x2
, 
y1
++);

535 
	`GdSëDash
(&
dm
, &
dc
);

537 
	`GdFixCurs‹
(
psd
);

538 
	}
}

559 
	$døwbôm≠
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
width
, MWCOORD 
height
,

560 c⁄° 
MWIMAGEBITS
 *
imagebôs
)

562 
MWCOORD
 
möx
;

563 
MWCOORD
 
maxx
;

564 
MWIMAGEBITS
 
bôvÆue
 = 0;

565 
bôcou¡
;

567 i‡(
width
 <0 || 
height
 <= 0)

570 i‡(
gr_u£bg
)

571 
psd
->
	`FûlRe˘
’sd, 
x
, 
y
, x + 
width
 - 1, y + 
height
 - 1,

572 
gr_background
);

579 
möx
 = 
x
;

580 
maxx
 = 
x
 + 
width
 - 1;

581 
bôcou¡
 = 0;

582 
height
 > 0) {

583 i‡(
bôcou¡
 <= 0) {

584 
bôcou¡
 = 
MWIMAGE_BITSPERIMAGE
;

585 
bôvÆue
 = *
imagebôs
++;

588 i‡(
	`MWIMAGE_TESTBIT
(
bôvÆue
))

589 
psd
->
	`DøwPixñ
’sd, 
x
, 
y
, 
gr_f‹eground
);

590 
bôvÆue
 = 
	`MWIMAGE_SHIFTBIT
(bitvalue);

591 
bôcou¡
--;

592 i‡(
x
++ =
maxx
) {

593 
x
 = 
möx
;

594 
y
++;

595 --
height
;

596 
bôcou¡
 = 0;

599 
	}
}

602 
	$GdBôm≠
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
width
, MWCOORD 
height
,

603 c⁄° 
MWIMAGEBITS
 *
imagebôs
)

605 
MWCOORD
 
möx
;

606 
MWCOORD
 
maxx
;

607 
MWPIXELVAL
 
ßvecﬁ‹
;

608 
MWIMAGEBITS
 
bôvÆue
 = 0;

609 
bôcou¡
;

611 i‡(
width
 <0 || 
height
 <= 0)

614 
	`GdClùAªa
(
psd
, 
x
, 
y
, x + 
width
 - 1, y + 
height
 - 1)) {

615 
CLIP_VISIBLE
:

616 
	`døwbôm≠
(
psd
, 
x
, 
y
, 
width
, 
height
, 
imagebôs
);

617 
	`GdFixCurs‹
(
psd
);

620 
CLIP_INVISIBLE
:

627 i‡(
gr_u£bg
) {

628 
ßvecﬁ‹
 = 
gr_f‹eground
;

629 
gr_f‹eground
 = 
gr_background
;

631 
	`GdFûlRe˘
(
psd
, 
x
, 
y
, 
width
, 
height
);

632 
gr_f‹eground
 = 
ßvecﬁ‹
;

634 
möx
 = 
x
;

635 
maxx
 = 
x
 + 
width
 - 1;

636 
bôcou¡
 = 0;

637 
height
 > 0) {

638 i‡(
bôcou¡
 <= 0) {

639 
bôcou¡
 = 
MWIMAGE_BITSPERIMAGE
;

640 
bôvÆue
 = *
imagebôs
++;

642 i‡(
	`MWIMAGE_TESTBIT
(
bôvÆue
Ë&& 
	`GdClùPoöt
(
psd
, 
x
, 
y
))

643 
psd
->
	`DøwPixñ
’sd, 
x
, 
y
, 
gr_f‹eground
);

644 
bôvÆue
 = 
	`MWIMAGE_SHIFTBIT
(bitvalue);

645 
bôcou¡
--;

646 i‡(
x
++ =
maxx
) {

647 
x
 = 
möx
;

648 
y
++;

649 --
height
;

650 
bôcou¡
 = 0;

653 
	`GdFixCurs‹
(
psd
);

654 
	}
}

664 
MWBOOL


665 
	$GdCﬁ‹InPÆëã
(
MWCOLORVAL
 
¸
,
MWPALENTRY
 *
∑Àâe
,
∑lsize
)

667 
i
;

669 
i
=0; i<
∑lsize
; ++i)

670 if(
	`GETPALENTRY
(
∑Àâe
, 
i
Ë=
¸
)

671  
TRUE
;

672  
FALSE
;

673 
	}
}

692 
	$GdMakePÆëãC⁄vîsi⁄TabÀ
(
PSD
 
psd
,
MWPALENTRY
 *
∑Àâe
,
∑lsize
,

693 
MWPIXELVAL
 *
c⁄vèbÀ
,
fLﬂdTy≥
)

695 
i
;

696 
MWCOLORVAL
 
¸
;

697 
√wsize
, 
√xã¡ry
;

698 
MWPALENTRY
 
√w∑l
[256];

704 if(
psd
->
pixty≥
 =
MWPF_PALETTE
) {

705 
fLﬂdTy≥
) {

706 
LOADPALETTE
:

711 
	`GdSëPÆëã
(
psd
, 
gr_fú°u£ΩÆíåy
, 
∑lsize
, 
∑Àâe
);

714 
MERGEPALETTE
:

716 
i
=0; i<()
psd
->
ncﬁ‹s
; ++i)

717 
√w∑l
[
i
] = 
gr_∑Àâe
[i];

720 
√wsize
 = 0;

721 
√xã¡ry
 = 
gr_√xçÆíåy
;

724 
i
=0; i<
∑lsize
 && 
√xã¡ry
 < ()
psd
->
ncﬁ‹s
; ++i) {

725 
¸
 = 
	`GETPALENTRY
(
∑Àâe
, 
i
);

726 if(!
	`GdCﬁ‹InPÆëã
(
¸
, 
√w∑l
, 
√xã¡ry
)) {

727 
√w∑l
[
√xã¡ry
++] = 
∑Àâe
[
i
];

728 ++
√wsize
;

733 if(
√wsize
) {

734 
	`GdSëPÆëã
(
psd
, 
gr_√xçÆíåy
, 
√wsize
,

735 &
√w∑l
[
gr_√xçÆíåy
]);

736 
gr_√xçÆíåy
 +
√wsize
;

749 
i
=0; i<
∑lsize
; ++i) {

750 
¸
 = 
	`GETPALENTRY
(
∑Àâe
, 
i
);

751 
c⁄vèbÀ
[
i
] = 
	`GdFödCﬁ‹
(
psd
, 
¸
);

753 
	}
}

770 
	$GdDøwImage
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, 
PMWIMAGEHDR
 
pimage
)

772 
MWCOORD
 
möx
;

773 
MWCOORD
 
maxx
;

774 
MWUCHAR
 
bôvÆue
 = 0;

775 
bôcou¡
;

776 
MWUCHAR
 *
imagebôs
;

777 
MWCOORD
 
height
, 
width
;

778 
bµ
;

779 
MWPIXELVAL
 
pixñ
;

780 
˛ù
;

781 
exåa
, 
löesize
;

782 
rgb‹dî
;

783 
MWCOLORVAL
 
¸
;

784 
MWCOORD
 
yoff
;

785 
å™scﬁ‹
;

786 
MWPIXELVAL
 
c⁄vèbÀ
[256];

788 
	`as£π
(
pimage
);

790 
height
 = 
pimage
->height;

791 
width
 = 
pimage
->width;

794 
˛ù
 = 
	`GdClùAªa
(
psd
, 
x
, 
y
, x + 
width
 - 1, y + 
height
 - 1);

795 if(
˛ù
 =
CLIP_INVISIBLE
)

798 
å™scﬁ‹
 = 
pimage
->transcolor;

799 
bµ
 = 
pimage
->bpp;

804 i‡(
pimage
->
bµ
 <= 8) {

805 if(!
pimage
->
∑Àâe
) {

807 
yoff
=0; yoff<
pimage
->
∑lsize
; ++yoff)

808 
c⁄vèbÀ
[
yoff
] = yoff;

809 } 
	`GdMakePÆëãC⁄vîsi⁄TabÀ
(
psd
, 
pimage
->
∑Àâe
,

810 
pimage
->
∑lsize
, 
c⁄vèbÀ
, 
MERGEPALETTE
);

820 
möx
 = 
x
;

821 
maxx
 = 
x
 + 
width
 - 1;

822 
imagebôs
 = 
pimage
->imagebits;

825 if(
pimage
->
com¥essi⁄
 & 
MWIMAGE_UPSIDEDOWN
) {

826 
y
 +
height
 - 1;

827 
yoff
 = -1;

829 
yoff
 = 1;

831 
	#PIX2BYTES
(
n
Ë((“)+7)/8)

	)

833 
pimage
->
bµ
) {

836 
löesize
 = 
width
;

839 
löesize
 = 
width
*4;

842 
löesize
 = 
width
*3;

845 
löesize
 = 
	`PIX2BYTES
(
width
<<2);

848 
löesize
 = 
	`PIX2BYTES
(
width
);

851 
exåa
 = 
pimage
->
pôch
 - 
löesize
;

854 
rgb‹dî
 = 
pimage
->
com¥essi⁄
 & 
MWIMAGE_RGB
;

856 i‡((
bµ
 == 32)

857 && ((
pimage
->
com¥essi⁄
 & 
MWIMAGE_ALPHA_CHANNEL
) != 0)) {

858 *
d©a
 = (*Ë
imagebôs
;

863 
height
 > 0) {

865 
¸
 = *
d©a
++;

866 #i‡
MW_CPU_BIG_ENDIAN


867 i‡(
rgb‹dî
)

870 
¸
 = ((cr & 0xFFFFFF00UL) >> 8)

871 | ((
¸
 & 0x000000FFUL) << 24);

876 
¸
 = ((cr & 0xFF000000UL) >> 24)

877 | ((
¸
 & 0x00FF0000UL) >> 8)

878 | ((
¸
 & 0x0000FF00UL) << 8)

879 | ((
¸
 & 0x000000FFUL) << 24);

882 i‡(
rgb‹dî
) {

884 
¸
 = (cr & 0xFF00FF00UL)

885 | ((
¸
 & 0x00FF0000UL) >> 16)

886 | ((
¸
 & 0x000000FFUL) << 16);

890 
psd
->
pixty≥
) {

891 
MWPF_PALETTE
:

893 
pixñ
 = 
	`GdFödCﬁ‹
(
psd
, 
¸
);

895 
MWPF_TRUECOLOR8888
:

896 
pixñ
 = 
	`COLOR2PIXEL8888
(
¸
);

898 
MWPF_TRUECOLORABGR
:

899 
pixñ
 = 
	`COLOR2PIXELABGR
(
¸
);

901 
MWPF_TRUECOLOR0888
:

902 
MWPF_TRUECOLOR888
:

903 
pixñ
 = 
	`COLOR2PIXEL888
(
¸
);

905 
MWPF_TRUECOLOR565
:

906 
pixñ
 = 
	`COLOR2PIXEL565
(
¸
);

908 
MWPF_TRUECOLOR555
:

909 
pixñ
 = 
	`COLOR2PIXEL555
(
¸
);

911 
MWPF_TRUECOLOR332
:

912 
pixñ
 = 
	`COLOR2PIXEL332
(
¸
);

916 i‡(
˛ù
 =
CLIP_VISIBLE
 || 
	`GdClùPoöt
(
psd
, 
x
, 
y
))

917 
psd
->
	`DøwPixñ
’sd, 
x
, 
y
, 
pixñ
);

919 i‡(
x
++ =
maxx
) {

921 
x
 = 
möx
;

922 
y
 +
yoff
;

923 
height
--;

924 
d©a
 = (*Ë(((*Ëd©aË+ 
exåa
);

928 } i‡((
bµ
 == 24) || (bpp == 32)) {

929 
å™s
;

931 
height
 > 0) {

933 
å™s
 = 
¸
 = 
rgb‹dî


934 ? 
	`MWRGB
(
imagebôs
[0], imagebits[1],

935 
imagebôs
[2])

936 : 
	`MWRGB
(
imagebôs
[2], imagebits[1],

937 
imagebôs
[0]);

939 
imagebôs
 += 3;

941 i‡(
bµ
 == 32) {

949 i‡(*
imagebôs
++ == 0x01)

950 
å™s
 = 0x01000000;

954 i‡(
å™scﬁ‹
 !
å™s
) {

956 
psd
->
pixty≥
) {

957 
MWPF_PALETTE
:

959 
pixñ
 = 
	`GdFödCﬁ‹
(
psd
, 
¸
);

961 
MWPF_TRUECOLOR8888
:

962 
pixñ
 = 
	`COLOR2PIXEL8888
(
¸
);

964 
MWPF_TRUECOLORABGR
:

965 
pixñ
 = 
	`COLOR2PIXELABGR
(
¸
);

967 
MWPF_TRUECOLOR0888
:

968 
MWPF_TRUECOLOR888
:

969 
pixñ
 = 
	`COLOR2PIXEL888
(
¸
);

971 
MWPF_TRUECOLOR565
:

972 
pixñ
 = 
	`COLOR2PIXEL565
(
¸
);

974 
MWPF_TRUECOLOR555
:

975 
pixñ
 = 
	`COLOR2PIXEL555
(
¸
);

977 
MWPF_TRUECOLOR332
:

978 
pixñ
 = 
	`COLOR2PIXEL332
(
¸
);

982 i‡(
˛ù
 =
CLIP_VISIBLE


983 || 
	`GdClùPoöt
(
psd
, 
x
, 
y
))

984 
psd
->
	`DøwPixñ
’sd, 
x
, 
y
, 
pixñ
);

987 i‡(
˛ù
 !
CLIP_VISIBLE
 && !
˛ùªsu…


988 && 
x
 > 
˛ùmaxx
) {

989 
x
 = 
maxx
;

994 i‡(
x
++ =
maxx
) {

995 
x
 = 
möx
;

996 
y
 +
yoff
;

997 
height
--;

998 
imagebôs
 +
exåa
;

1003 
bôcou¡
 = 0;

1004 
height
 > 0) {

1005 i‡(
bôcou¡
 <= 0) {

1006 
bôcou¡
 = (
MWUCHAR
) * 8;

1007 
bôvÆue
 = *
imagebôs
++;

1009 
bµ
) {

1012 
bôcou¡
 = 0;

1013 i‡(
bôvÆue
 =
å™scﬁ‹
)

1014 
√xt
;

1016 
pixñ
 = 
c⁄vèbÀ
[
bôvÆue
];

1019 i‡(((
bôvÆue
 & 0xf0Ë>> 4Ë=
å™scﬁ‹
) {

1020 
bôvÆue
 <<= 4;

1021 
bôcou¡
 -= 4;

1022 
√xt
;

1025 
pixñ
 = 
c⁄vèbÀ
[(
bôvÆue
 & 0xf0) >> 4];

1026 
bôvÆue
 <<= 4;

1027 
bôcou¡
 -= 4;

1030 --
bôcou¡
;

1031 i‡(((
bôvÆue
 & 0x80Ë? 1 : 0Ë=
å™scﬁ‹
) {

1032 
bôvÆue
 <<= 1;

1033 
√xt
;

1036 
pixñ
 = 
c⁄vèbÀ
[(
bôvÆue
 & 0x80) ? 1 : 0];

1037 
bôvÆue
 <<= 1;

1041 i‡(
˛ù
 =
CLIP_VISIBLE
 || 
	`GdClùPoöt
(
psd
, 
x
, 
y
))

1042 
psd
->
	`DøwPixñ
’sd, 
x
, 
y
, 
pixñ
);

1045 i‡(
˛ù
 !
CLIP_VISIBLE
 && !
˛ùªsu…


1046 && 
x
 > 
˛ùmaxx
) {

1047 
x
 = 
maxx
;

1050 
√xt
:

1051 i‡(
x
++ =
maxx
) {

1052 
x
 = 
möx
;

1053 
y
 +
yoff
;

1054 
height
--;

1055 
bôcou¡
 = 0;

1056 
imagebôs
 +
exåa
;

1060 
	`GdFixCurs‹
(
psd
);

1061 
	}
}

1075 
	$GdRódAªa
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
width
, MWCOORD 
height
,

1076 
MWPIXELVAL
 *
pixñs
)

1078 
MWCOORD
 
row
;

1079 
MWCOORD
 
cﬁ
;

1081 i‡(
width
 <0 || 
height
 <= 0)

1084 
	`GdCheckCurs‹
(
psd
, 
x
, 
y
, x+
width
-1, y+
height
-1);

1085 
row
 = 
y
;Ñow < 
height
+y;Ñow++)

1086 
cﬁ
 = 
x
; cﬁ < 
width
+x; col++)

1087 i‡(
row
 < 0 ||Ñow >
psd
->
yvúåes
 ||

1088 
cﬁ
 < 0 || cﬁ >
psd
->
xvúåes
)

1089 *
pixñs
++ = 0;

1090 *
pixñs
++ = 
psd
->
	`RódPixñ
’sd, 
cﬁ
, 
row
);

1092 
	`GdFixCurs‹
(
psd
);

1093 
	}
}

1108 
	$GdDøwAªaI¡î«l
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
, 
›
)

1110 
MWCOORD
 
x
 = 
gc
->
d°x
;

1111 
MWCOORD
 
y
 = 
gc
->
d°y
;

1112 
MWCOORD
 
width
 = 
gc
->
d°w
;

1113 
MWCOORD
 
height
 = 
gc
->
d°h
;

1114 
MWCOORD
 
§cx
;

1115 
MWCOORD
 
§cy
;

1116 
˛ù≥d
;

1117 
rx1
, 
rx2
, 
ry1
, 
ry2
, 
rw
, 
rh
;

1118 
cou¡
;

1119 #i‡
DYNAMICREGIONS


1120 
MWRECT
 *
¥c
;

1121 
MWCLIPREGION
 *
˛ùªgi⁄
;

1123 
MWCLIPRECT
 *
¥c
;

1124 
MWCLIPRECT
 
˛ùª˘s
[];

1125 
˛ùcou¡
;

1128 i‡(!
psd
->
DøwAªa
)

1132 
˛ù≥d
 = 
	`GdClùAªa
(
psd
, 
x
, 
y
, x + 
width
 - 1, y + 
height
 - 1);

1133 i‡(
˛ù≥d
 =
CLIP_INVISIBLE
) {

1135 } i‡(
˛ù≥d
 =
CLIP_VISIBLE
) {

1136 
psd
->
	`DøwAªa
’sd, 
gc
, 
›
);

1142 
§cx
 = 
gc
->srcx;

1143 
§cy
 = 
gc
->srcy;

1145 #i‡
DYNAMICREGIONS


1146 
¥c
 = 
˛ùªgi⁄
->
ª˘s
;

1147 
cou¡
 = 
˛ùªgi⁄
->
numRe˘s
;

1149 
¥c
 = 
˛ùª˘s
;

1150 
cou¡
 = 
˛ùcou¡
;

1153 
cou¡
-- > 0) {

1154 #i‡
DYNAMICREGIONS


1155 
rx1
 = 
¥c
->
À·
;

1156 
ry1
 = 
¥c
->
t›
;

1157 
rx2
 = 
¥c
->
right
;

1158 
ry2
 = 
¥c
->
bŸtom
;

1161 
rx1
 = 
¥c
->
x
;

1162 
ry1
 = 
¥c
->
y
;

1163 
rx2
 = 
¥c
->
x
 +Örc->
width
;

1164 
ry2
 = 
¥c
->
y
 +Örc->
height
;

1168 i‡(
rx1
 < 
x
)

1169 
rx1
 = 
x
;

1170 i‡(
ry1
 < 
y
)

1171 
ry1
 = 
y
;

1172 i‡(
rx2
 > 
x
 + 
width
)

1173 
rx2
 = 
x
 + 
width
;

1174 i‡(
ry2
 > 
y
 + 
height
)

1175 
ry2
 = 
y
 + 
height
;

1177 
rw
 = 
rx2
 - 
rx1
;

1178 
rh
 = 
ry2
 - 
ry1
;

1180 i‡(
rw
 > 0 && 
rh
 > 0) {

1181 
gc
->
d°x
 = 
rx1
;

1182 
gc
->
d°y
 = 
ry1
;

1183 
gc
->
d°w
 = 
rw
;

1184 
gc
->
d°h
 = 
rh
;

1185 
gc
->
§cx
 = srcx + 
rx1
 - 
x
;

1186 
gc
->
§cy
 = srcy + 
ry1
 - 
y
;

1187 
	`GdCheckCurs‹
(
psd
, 
rx1
, 
ry1
, 
rx2
 - 1, 
ry2
 - 1);

1188 
psd
->
	`DøwAªa
’sd, 
gc
, 
›
);

1190 
¥c
++;

1194 
gc
->
d°x
 = 
x
;

1195 
gc
->
d°y
 = 
y
;

1196 
gc
->
d°w
 = 
width
;

1197 
gc
->
d°h
 = 
height
;

1198 
gc
->
§cx
 = srcx;

1199 
gc
->
§cy
 = srcy;

1201 
	}
}

1241 
	$GdAªa
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
width
, MWCOORD 
height
, *
pixñs
,

1242 
pixty≥
)

1244 *
PIXELS
 = 
pixñs
;

1245 
˚Œ°odo
;

1246 
cou¡
;

1247 
cc
;

1248 
rows
;

1249 
MWCOORD
 
möx
;

1250 
MWCOORD
 
maxx
;

1251 
MWPIXELVAL
 
ßvecﬁ‹
;

1252 
MWBOOL
 
dodøw
;

1253 
MWCOLORVAL
 
rgbcﬁ‹
 = 0L;

1254 
pixsize
;

1255 
r
, 
g
, 
b
;

1257 
möx
 = 
x
;

1258 
maxx
 = 
x
 + 
width
 - 1;

1261 i‡–
	`GdClùAªa
(
psd
, 
möx
, 
y
, 
maxx
, y + 
height
 - 1Ë=
CLIP_INVISIBLE
 )

1266 i‡(
pixty≥
 =
MWPF_PIXELVAL
) {

1267 
drivî_gc_t
 
hwgc
;

1269 i‡(!(
psd
->
Êags
 & 
PSF_HAVEOP_COPY
))

1270 
ÁŒback
;

1272 
hwgc
.
pixñs
 = 
PIXELS
;

1273 
hwgc
.
§c_löñí
 = 
width
;

1274 
hwgc
.
gr_u£bg
 = gr_usebg;

1275 
hwgc
.
bg_cﬁ‹
 = 
gr_background
;

1276 
hwgc
.
d°x
 = 
x
;

1277 
hwgc
.
d°y
 = 
y
;

1278 
hwgc
.
d°w
 = 
width
;

1279 
hwgc
.
d°h
 = 
height
;

1280 
hwgc
.
§cx
 = 0;

1281 
hwgc
.
§cy
 = 0;

1282 
	`GdDøwAªaI¡î«l
(
psd
, &
hwgc
, 
PSDOP_COPY
);

1283 
	`GdFixCurs‹
(
psd
);

1285 
ÁŒback
:

1287 
	`GdFixCurs‹
(
psd
);

1289 
ÁŒback
:

1293 
pixty≥
) {

1294 
MWPF_RGB
:

1295 
pixsize
 = (
MWCOLORVAL
);

1297 
MWPF_PIXELVAL
:

1298 
pixsize
 = (
MWPIXELVAL
);

1300 
MWPF_PALETTE
:

1301 
MWPF_TRUECOLOR332
:

1302 
pixsize
 = ();

1304 
MWPF_TRUECOLOR8888
:

1305 
MWPF_TRUECOLORABGR
:

1306 
MWPF_TRUECOLOR0888
:

1307 
pixsize
 = ();

1309 
MWPF_TRUECOLOR888
:

1310 
pixsize
 = 3;

1312 
MWPF_TRUECOLOR565
:

1313 
MWPF_TRUECOLOR555
:

1314 
pixsize
 = ();

1320 
ßvecﬁ‹
 = 
gr_f‹eground
;

1321 
˚Œ°odo
 = ()
width
 * 
height
;

1322 
˚Œ°odo
 > 0) {

1324 
pixty≥
) {

1325 
MWPF_RGB
:

1326 
rgbcﬁ‹
 = *(
MWCOLORVAL
 *)
PIXELS
;

1327 
PIXELS
 +(
MWCOLORVAL
);

1328 
gr_f‹eground
 = 
	`GdFödCﬁ‹
(
psd
, 
rgbcﬁ‹
);

1330 
MWPF_PIXELVAL
:

1331 
gr_f‹eground
 = *(
MWPIXELVAL
 *)
PIXELS
;

1332 
PIXELS
 +(
MWPIXELVAL
);

1334 
MWPF_PALETTE
:

1335 
MWPF_TRUECOLOR332
:

1336 
gr_f‹eground
 = *
PIXELS
++;

1338 
MWPF_TRUECOLORABGR
:

1339 
MWPF_TRUECOLOR8888
:

1340 
MWPF_TRUECOLOR0888
:

1341 
gr_f‹eground
 = *(*)
PIXELS
;

1342 
PIXELS
 += ();

1344 
MWPF_TRUECOLOR888
:

1345 
r
 = *
PIXELS
++;

1346 
g
 = *
PIXELS
++;

1347 
b
 = *
PIXELS
++;

1348 
gr_f‹eground
 = 
	`RGB2PIXEL888
(
r
, 
g
, 
b
);

1350 
MWPF_TRUECOLOR565
:

1351 
MWPF_TRUECOLOR555
:

1352 
gr_f‹eground
 = *(*)
PIXELS
;

1353 
PIXELS
 += ();

1356 
dodøw
 = (
gr_u£bg
 || (
gr_f‹eground
 !
gr_background
));

1357 
cou¡
 = 1;

1358 --
˚Œ°odo
;

1367 
˚Œ°odo
 > 0) {

1368 
pixty≥
) {

1369 
MWPF_RGB
:

1370 if(
rgbcﬁ‹
 !*(
MWCOLORVAL
 *)
PIXELS
)

1371 
bªakwhûe
;

1372 
PIXELS
 +(
MWCOLORVAL
);

1374 
MWPF_PIXELVAL
:

1375 if(
gr_f‹eground
 !*(
MWPIXELVAL
 *)
PIXELS
)

1376 
bªakwhûe
;

1377 
PIXELS
 +(
MWPIXELVAL
);

1379 
MWPF_PALETTE
:

1380 
MWPF_TRUECOLOR332
:

1381 if(
gr_f‹eground
 !*(*)
PIXELS
)

1382 
bªakwhûe
;

1383 ++
PIXELS
;

1385 
MWPF_TRUECOLORABGR
:

1386 
MWPF_TRUECOLOR8888
:

1387 
MWPF_TRUECOLOR0888
:

1388 if(
gr_f‹eground
 !*(*)
PIXELS
)

1389 
bªakwhûe
;

1390 
PIXELS
 += ();

1392 
MWPF_TRUECOLOR888
:

1393 
r
 = *(*)
PIXELS
;

1394 
g
 = *(*)(
PIXELS
 + 1);

1395 
b
 = *(*)(
PIXELS
 + 2);

1396 if(
gr_f‹eground
 !
	`RGB2PIXEL888
(
r
, 
g
, 
b
))

1397 
bªakwhûe
;

1398 
PIXELS
 += 3;

1400 
MWPF_TRUECOLOR565
:

1401 
MWPF_TRUECOLOR555
:

1402 if(
gr_f‹eground
 !*(*)
PIXELS
)

1403 
bªakwhûe
;

1404 
PIXELS
 += ();

1407 ++
cou¡
;

1408 --
˚Œ°odo
;

1410 
bªakwhûe
:

1415 i‡(
cou¡
 == 1) {

1416 i‡(
dodøw
)

1417 
	`døwpoöt
(
psd
, 
x
, 
y
);

1418 i‡(++
x
 > 
maxx
) {

1419 
x
 = 
möx
;

1420 
y
++;

1429 i‡(
x
 !
möx
) {

1430 
cc
 = 
cou¡
;

1431 i‡(
x
 + 
cc
 - 1 > 
maxx
)

1432 
cc
 = 
maxx
 - 
x
 + 1;

1433 i‡(
dodøw
)

1434 
	`døwrow
(
psd
, 
x
, x + 
cc
 - 1, 
y
);

1435 
cou¡
 -
cc
;

1436 
x
 +
cc
;

1437 i‡(
x
 > 
maxx
) {

1438 
x
 = 
möx
;

1439 
y
++;

1447 
rows
 = 
cou¡
 / 
width
;

1448 i‡(
rows
 > 0) {

1449 i‡(
dodøw
) {

1452 
	`GdFûlRe˘
(
psd
, 
x
, 
y
, 
maxx
 - x + 1, 
rows
);

1454 
cou¡
 %
width
;

1455 
y
 +
rows
;

1461 i‡(
cou¡
 > 0) {

1462 i‡(
dodøw
)

1463 
	`døwrow
(
psd
, 
x
, x + 
cou¡
 - 1, 
y
);

1464 
x
 +
cou¡
;

1467 
gr_f‹eground
 = 
ßvecﬁ‹
;

1468 
	`GdFixCurs‹
(
psd
);

1469 
	}
}

1471 #i‡
NOTYET


1476 
	$GdC›yAªa
(
PSD
 
psd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, MWCOORD 
width
, MWCOORD 
height
,

1477 
MWCOORD
 
de°x
, MWCOORD 
de°y
)

1479 i‡(
width
 <0 || 
height
 <= 0)

1482 i‡(
§cx
 =
de°x
 && 
§cy
 =
de°y
)

1484 
	`GdCheckCurs‹
(
psd
, 
§cx
, 
§cy
, srcx + 
width
 - 1, srcy + 
height
 - 1);

1485 
	`GdCheckCurs‹
(
psd
, 
de°x
, 
de°y
, de°x + 
width
 - 1, de°y + 
height
 - 1);

1486 
psd
->
	`C›yAªa
’sd, 
§cx
, 
§cy
, 
width
, 
height
, 
de°x
, 
de°y
);

1487 
	`GdFixCurs‹
(
psd
);

1488 
	}
}

1491 
MWCLIPREGION
 *
˛ùªgi⁄
;

1507 
	$GdBlô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
width
, MWCOORD 
height
,

1508 
PSD
 
§˝sd
, 
MWCOORD
 
§cx
, MWCOORD 
§cy
, 
r›
)

1510 
rx1
, 
rx2
, 
ry1
, 
ry2
;

1511 
px1
, 
px2
, 
py1
, 
py2
;

1512 
pw
, 
ph
;

1513 
cou¡
;

1514 #i‡
DYNAMICREGIONS


1515 
MWRECT
 * 
¥c
;

1517 
MWCLIPRECT
 * 
¥c
;

1518 
MWCLIPRECT
 
˛ùª˘s
[];

1519 
˛ùcou¡
;

1523 
	`as£π
(
d°psd
->
∂™es
 =
§˝sd
->planes);

1524 
	`as£π
(
d°psd
->
bµ
 =
§˝sd
->bpp);

1527 
	`as£π
(
d°psd
->
p‹åaô
 =
§˝sd
->portrait);

1531 if(
§cx
 < 0) {

1532 
width
 +
§cx
;

1533 
d°x
 -
§cx
;

1534 
§cx
 = 0;

1536 if(
§cy
 < 0) {

1537 
height
 +
§cy
;

1538 
d°y
 -
§cy
;

1539 
§cy
 = 0;

1541 if(
§cx
+
width
 > 
§˝sd
->
xvúåes
)

1542 
width
 = 
§˝sd
->
xvúåes
 - 
§cx
;

1543 if(
§cy
+
height
 > 
§˝sd
->
yvúåes
)

1544 
height
 = 
§˝sd
->
yvúåes
 - 
§cy
;

1546 
	`GdClùAªa
(
d°psd
, 
d°x
, 
d°y
, d°x+
width
-1, d°y+
height
-1)) {

1547 
CLIP_VISIBLE
:

1549 
	`GdCheckCurs‹
(
d°psd
, 
§cx
, 
§cy
, srcx+
width
-1, srcy+
height
-1);

1550 i‡(
d°psd
 !
§˝sd
)

1551 
	`GdCheckCurs‹
(
§˝sd
, 
§cx
, 
§cy
, srcx+
width
-1,

1552 
§cy
+
height
-1);

1553 
d°psd
->
	`Blô
(d°psd, 
d°x
, 
d°y
, 
width
, 
height
,

1554 
§˝sd
, 
§cx
, 
§cy
, 
r›
);

1555 
	`GdFixCurs‹
(
d°psd
);

1556 i‡(
d°psd
 !
§˝sd
)

1557 
	`GdFixCurs‹
(
§˝sd
);

1560 
CLIP_INVISIBLE
:

1569 #i‡
DYNAMICREGIONS


1570 
¥c
 = 
˛ùªgi⁄
->
ª˘s
;

1571 
cou¡
 = 
˛ùªgi⁄
->
numRe˘s
;

1573 
¥c
 = 
˛ùª˘s
;

1574 
cou¡
 = 
˛ùcou¡
;

1576 --
cou¡
 >= 0) {

1577 #i‡
DYNAMICREGIONS


1578 
rx1
 = 
¥c
->
À·
;

1579 
ry1
 = 
¥c
->
t›
;

1580 
rx2
 = 
¥c
->
right
;

1581 
ry2
 = 
¥c
->
bŸtom
;

1583 
rx1
 = 
¥c
->
x
;

1584 
ry1
 = 
¥c
->
y
;

1585 
rx2
 = 
¥c
->
x
 +Örc->
width
;

1586 
ry2
 = 
¥c
->
y
 +Örc->
height
;

1589 
px1
 = 
d°x
;

1590 
py1
 = 
d°y
;

1591 
px2
 = 
d°x
 + 
width
;

1592 
py2
 = 
d°y
 + 
height
;

1593 i‡(
px1
 < 
rx1
)Öx1 =Ñx1;

1594 i‡(
py1
 < 
ry1
)Öy1 =Ñy1;

1595 i‡(
px2
 > 
rx2
)Öx2 =Ñx2;

1596 i‡(
py2
 > 
ry2
)Öy2 =Ñy2;

1598 
pw
 = 
px2
 - 
px1
;

1599 
ph
 = 
py2
 - 
py1
;

1600 if(
pw
 > 0 && 
ph
 > 0) {

1602 
	`GdCheckCurs‹
(
d°psd
, 
px1
, 
py1
, 
px2
-1, 
py2
-1);

1603 
	`GdCheckCurs‹
(
d°psd
, 
§cx
, 
§cy
,

1604 
§cx
+
width
, 
§cy
+
height
);

1605 
d°psd
->
	`Blô
(d°psd, 
px1
, 
py1
, 
pw
, 
ph
, 
§˝sd
,

1606 
§cx
 + (
px1
-
d°x
), 
§cy
 + (
py1
-
d°y
), 
r›
);

1608 ++
¥c
;

1610 
	`GdFixCurs‹
(
d°psd
);

1611 
	}
}

1615 
	gg_row_öc
, 
	gg_cﬁ_öc
;

1633 
	$GdSåëchBlô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
d°w
,

1634 
MWCOORD
 
d°h
, 
PSD
 
§˝sd
, MWCOORD 
§cx
, MWCOORD 
§cy
, MWCOORD 
§cw
,

1635 
MWCOORD
 
§ch
, 
r›
)

1637 
cou¡
;

1638 #i‡
DYNAMICREGIONS


1639 
MWRECT
 * 
¥c
;

1640 
MWCLIPREGION
 *
˛ùªgi⁄
;

1642 
MWCLIPRECT
 * 
¥c
;

1643 
MWCLIPRECT
 
˛ùª˘s
[];

1644 
˛ùcou¡
;

1649 i‡(
d°psd
->
SåëchBlôEx
) {

1650 
	`GdSåëchBlôEx
(
d°psd
, 
d°x
, 
d°y
,

1651 
d°x
 + 
d°w
, 
d°y
 + 
d°h
,

1652 
§˝sd
, 
§cx
, 
§cy
,

1653 
§cx
 + 
§cw
, 
§cy
 + 
§ch
,

1654 
r›
);

1659 
g_row_öc
 = 
g_cﬁ_öc
 = 0;

1662 i‡(!
d°psd
->
SåëchBlô
)

1666 
	`as£π
(
d°psd
->
∂™es
 =
§˝sd
->planes);

1667 
	`as£π
(
d°psd
->
bµ
 =
§˝sd
->bpp);

1671 if(
§cx
 < 0) {

1672 
§cw
 +
§cx
;

1674 
§cx
 = 0;

1676 if(
§cy
 < 0) {

1677 
§ch
 +
§cy
;

1679 
§cy
 = 0;

1681 if(
§cx
+
§cw
 > 
§˝sd
->
xvúåes
)

1682 
§cw
 = 
§˝sd
->
xvúåes
 - 
§cx
;

1683 if(
§cy
+
§ch
 > 
§˝sd
->
yvúåes
)

1684 
§ch
 = 
§˝sd
->
yvúåes
 - 
§cy
;

1687 if(
d°x
+
d°w
 > 
d°psd
->
xvúåes
)

1688 
d°w
 = 
d°psd
->
xvúåes
 - 
d°x
;

1689 if(
d°y
+
d°h
 > 
d°psd
->
yvúåes
)

1690 
d°h
 = 
d°psd
->
yvúåes
 - 
d°y
;

1692 
	`GdClùAªa
(
d°psd
, 
d°x
, 
d°y
, d°x+
d°w
-1, d°y+
d°h
-1)) {

1693 
CLIP_VISIBLE
:

1695 
	`GdCheckCurs‹
(
d°psd
, 
§cx
, 
§cy
, srcx+
§cw
-1, srcy+
§ch
-1);

1696 
d°psd
->
	`SåëchBlô
(d°psd, 
d°x
, 
d°y
, 
d°w
, 
d°h
,

1697 
§˝sd
, 
§cx
, 
§cy
, 
§cw
, 
§ch
, 
r›
);

1698 
	`GdFixCurs‹
(
d°psd
);

1701 
CLIP_INVISIBLE
:

1710 #i‡
DYNAMICREGIONS


1711 
¥c
 = 
˛ùªgi⁄
->
ª˘s
;

1712 
cou¡
 = 
˛ùªgi⁄
->
numRe˘s
;

1714 
¥c
 = 
˛ùª˘s
;

1715 
cou¡
 = 
˛ùcou¡
;

1717 --
cou¡
 >= 0) {

1718 
rx1
, 
rx2
, 
ry1
, 
ry2
;

1719 
px1
, 
px2
, 
py1
, 
py2
;

1720 
pw
, 
ph
;

1721 
sx
, 
sy
, 
sw
, 
sh
;

1722 #i‡
DYNAMICREGIONS


1723 
rx1
 = 
¥c
->
À·
;

1724 
ry1
 = 
¥c
->
t›
;

1725 
rx2
 = 
¥c
->
right
;

1726 
ry2
 = 
¥c
->
bŸtom
;

1728 
rx1
 = 
¥c
->
x
;

1729 
ry1
 = 
¥c
->
y
;

1730 
rx2
 = 
¥c
->
x
 +Örc->
width
;

1731 
ry2
 = 
¥c
->
y
 +Örc->
height
;

1734 
px1
 = 
d°x
;

1735 
py1
 = 
d°y
;

1736 
px2
 = 
d°x
 + 
d°w
;

1737 
py2
 = 
d°y
 + 
d°h
;

1738 i‡(
px1
 < 
rx1
)Öx1 =Ñx1;

1739 i‡(
py1
 < 
ry1
)Öy1 =Ñy1;

1740 i‡(
px2
 > 
rx2
)Öx2 =Ñx2;

1741 i‡(
py2
 > 
ry2
)Öy2 =Ñy2;

1743 
pw
 = 
px2
 - 
px1
;

1744 
ph
 = 
py2
 - 
py1
;

1745 if(
pw
 > 0 && 
ph
 > 0) {

1747 
g_row_öc
 = (
§ch
 << 16Ë/ 
d°h
;

1748 
g_cﬁ_öc
 = (
§cw
 << 16Ë/ 
d°w
;

1749 
sw
 = 
pw
 * 
§cw
 / 
d°w
;

1750 
sh
 = 
ph
 * 
§ch
 / 
d°h
;

1752 i‡(
sw
 > 0 && 
sh
 > 0) {

1753 
sx
 = 
§cx
 + (
px1
-
d°x
Ë* 
§cw
 / 
d°w
;

1754 
sy
 = 
§cy
 + (
py1
-
d°y
Ë* 
§ch
 / 
d°h
;

1758 
	`GdCheckCurs‹
(
d°psd
, 
px1
, 
py1
, 
px2
-1, 
py2
-1);

1759 
	`GdCheckCurs‹
(
d°psd
, 
§cx
, 
§cy
, srcx+
§cw
, srcy+
§ch
);

1760 
d°psd
->
	`SåëchBlô
(d°psd, 
px1
, 
py1
, 
pw
, 
ph
, 
§˝sd
,

1761 
sx
, 
sy
, 
sw
, 
sh
, 
r›
);

1764 ++
¥c
;

1766 
	`GdFixCurs‹
(
d°psd
);

1767 
	}
}

1797 
	$GdSåëchBlôEx
(
PSD
 
d°psd
, 
MWCOORD
 
d1_x
, MWCOORD 
d1_y
, MWCOORD 
d2_x
,

1798 
MWCOORD
 
d2_y
, 
PSD
 
§˝sd
, MWCOORD 
s1_x
, MWCOORD 
s1_y
, MWCOORD 
s2_x
,

1799 
MWCOORD
 
s2_y
, 
r›
)

1802 
§c_x_°ï_numî©‹
;

1803 
§c_x_°ï_díomö©‹
;

1804 
§c_y_°ï_numî©‹
;

1805 
§c_y_°ï_díomö©‹
;

1808 
MWCOORD
 
c1_x
;

1809 
MWCOORD
 
c1_y
;

1810 
MWCOORD
 
c2_x
;

1811 
MWCOORD
 
c2_y
;

1814 
§c_x_°¨t_exa˘
;

1815 
§c_y_°¨t_exa˘
;

1818 #i‡
DYNAMICREGIONS


1819 
cou¡
;

1820 
MWRECT
 *
¥c
;

1822 
MWCLIPREGION
 *
˛ùªgi⁄
;

1824 
cou¡
;

1825 
MWCLIPRECT
 *
¥c
;

1827 
MWCLIPRECT
 
˛ùª˘s
[];

1828 
˛ùcou¡
;

1831 
	`as£π
(
§˝sd
);

1832 
	`as£π
(
d°psd
);

1839 i‡(
d1_x
 > 
d2_x
) {

1840 
MWCOORD
 
tmp
;

1841 
tmp
 = 
d2_x
;

1842 
d2_x
 = 
d1_x
;

1843 
d1_x
 = 
tmp
;

1844 
tmp
 = 
s2_x
;

1845 
s2_x
 = 
s1_x
;

1846 
s1_x
 = 
tmp
;

1849 i‡(
d1_y
 > 
d2_y
) {

1850 
MWCOORD
 
tmp
;

1851 
tmp
 = 
d2_y
;

1852 
d2_y
 = 
d1_y
;

1853 
d1_y
 = 
tmp
;

1854 
tmp
 = 
s2_y
;

1855 
s2_y
 = 
s1_y
;

1856 
s1_y
 = 
tmp
;

1859 i‡((
d2_x
 < 0)

1860 || (
d2_y
 < 0)

1861 || (
d1_x
 > 
d°psd
->
xvúåes
)

1862 || (
d1_y
 > 
d°psd
->
yvúåes
)

1863 || (
d1_x
 =
d2_x
)

1864 || (
d1_y
 =
d2_y
)) {

1875 i‡((
d2_x
 - 
d1_x
 =
s2_x
 - 
s1_x
Ë&& (
d2_y
 - 
d1_y
 =
s2_y
 - 
s1_y
)) {

1876 
	`GdBlô
(
d°psd
, 
d1_x
, 
d1_y
, 
d2_x
 - d1_x, 
d2_y
 - d1_y,

1877 
§˝sd
, 
s1_x
, 
s1_y
, 
r›
);

1881 i‡(!
d°psd
->
SåëchBlôEx
) {

1882 
	`EPRINTF
("GdStretchBlitEx NOT SUPPORTED onÅhisÅarget\n");

1887 
c1_x
 = 
d1_x
;

1888 
c1_y
 = 
d1_y
;

1889 
c2_x
 = 
d2_x
;

1890 
c2_y
 = 
d2_y
;

1905 
§c_x_°ï_numî©‹
 = (
s2_x
 - 
s1_x
 + 1) << 1;

1906 
§c_x_°ï_díomö©‹
 = (
d2_x
 - 
d1_x
 + 1) << 1;

1907 
§c_y_°ï_numî©‹
 = (
s2_y
 - 
s1_y
 + 1) << 1;

1908 
§c_y_°ï_díomö©‹
 = (
d2_y
 - 
d1_y
 + 1) << 1;

1913 i‡((
s1_x
 < 0Ë|| (s1_x > 
§˝sd
->
xvúåes
)

1914 || (
s2_x
 < 0Ë|| (s2_x > 
§˝sd
->
xvúåes
)) {

1918 
i1_x
 = 
d1_x
 - (
s1_x
 * 
§c_x_°ï_díomö©‹
Ë/ 
§c_x_°ï_numî©‹
;

1923 
i2_x
 = 
d1_x
 + ((
§˝sd
->
xvúåes
 - 
s1_x
Ë* 
§c_x_°ï_díomö©‹
 + src_x_°ï_díomö©‹ - 1Ë/ 
§c_x_°ï_numî©‹
;

1930 i‡(
i1_x
 > 
i2_x
) {

1931 
ãmp
;

1932 
ãmp
 = 
i1_x
;

1933 
i1_x
 = 
i2_x
;

1934 
i2_x
 = 
ãmp
;

1938 i‡((
c2_x
 < 
i1_x
Ë|| (
c1_x
 > 
i2_x
)) {

1944 i‡(
c1_x
 < 
i1_x
)

1945 
c1_x
 = 
i1_x
;

1946 i‡(
c2_x
 > 
i2_x
)

1947 
c2_x
 = 
i2_x
;

1953 i‡((
s1_y
 < 0Ë|| (s1_y > 
§˝sd
->
yvúåes
)

1954 || (
s2_y
 < 0Ë|| (s2_y > 
§˝sd
->
yvúåes
)) {

1958 
i1_y
 = 
d1_y
 - (
s1_y
 * 
§c_y_°ï_díomö©‹
Ë/ 
§c_y_°ï_numî©‹
;

1963 
i2_y
 = 
d1_y
 + ((
§˝sd
->
yvúåes
 - 
s1_y
Ë* 
§c_y_°ï_díomö©‹
 + src_y_°ï_díomö©‹ - 1Ë/ 
§c_y_°ï_numî©‹
;

1970 i‡(
i1_y
 > 
i2_y
) {

1971 
ãmp
;

1972 
ãmp
 = 
i1_y
;

1973 
i1_y
 = 
i2_y
;

1974 
i2_y
 = 
ãmp
;

1978 i‡((
c2_y
 < 
i1_y
Ë|| (
c1_y
 > 
i2_y
)) {

1984 i‡(
c1_y
 < 
i1_y
)

1985 
c1_y
 = 
i1_y
;

1986 i‡(
c2_y
 > 
i2_y
)

1987 
c2_y
 = 
i2_y
;

1991 i‡(
c1_x
 < 0)

1992 
c1_x
 = 0;

1993 i‡(
c1_y
 < 0)

1994 
c1_y
 = 0;

1995 i‡(
c2_x
 > 
d°psd
->
xvúåes
)

1996 
c2_x
 = 
d°psd
->
xvúåes
;

1997 i‡(
c2_y
 > 
d°psd
->
yvúåes
)

1998 
c2_y
 = 
d°psd
->
yvúåes
;

2001 i‡((
c1_x
 >
c2_x
)

2002 || (
c1_y
 >
c2_y
)) {

2017 
§c_x_°¨t_exa˘
 = 
s1_x
 * 
§c_x_°ï_díomö©‹


2018 + (
c1_x
 - 
d1_x
Ë* 
§c_x_°ï_numî©‹
;

2019 
§c_y_°¨t_exa˘
 = 
s1_y
 * 
§c_y_°ï_díomö©‹


2020 + (
c1_y
 - 
d1_y
Ë* 
§c_y_°ï_numî©‹
;

2025 
	`GdClùAªa
(
d°psd
, 
c1_x
, 
c1_y
, 
c2_x
 - 1, 
c2_y
 - 1)) {

2026 
CLIP_INVISIBLE
:

2029 
CLIP_VISIBLE
:

2033 
d°psd
->
	`SåëchBlôEx
(dstpsd,

2034 
§˝sd
,

2035 
c1_x
,

2036 
c1_y
,

2037 
c2_x
 - 
c1_x
,

2038 
c2_y
 - 
c1_y
,

2039 
§c_x_°ï_díomö©‹
,

2040 
§c_y_°ï_díomö©‹
,

2041 
§c_x_°¨t_exa˘
,

2042 
§c_y_°¨t_exa˘
,

2043 
§c_x_°ï_numî©‹
,

2044 
§c_y_°ï_numî©‹
, 
r›
);

2046 
	`GdFixCurs‹
(
d°psd
);

2061 #i‡
DYNAMICREGIONS


2062 
¥c
 = 
˛ùªgi⁄
->
ª˘s
;

2063 
cou¡
 = 
˛ùªgi⁄
->
numRe˘s
;

2065 
¥c
 = 
˛ùª˘s
;

2066 
cou¡
 = 
˛ùcou¡
;

2068 --
cou¡
 >= 0) {

2069 
r1_x
, 
r2_x
, 
r1_y
, 
r2_y
;

2071 #i‡
DYNAMICREGIONS


2072 
r1_x
 = 
¥c
->
À·
;

2073 
r1_y
 = 
¥c
->
t›
;

2074 
r2_x
 = 
¥c
->
right
;

2075 
r2_y
 = 
¥c
->
bŸtom
;

2077 
r1_x
 = 
¥c
->
x
;

2078 
r1_y
 = 
¥c
->
y
;

2079 
r2_x
 = 
¥c
->
x
 +Örc->
width
;

2080 
r2_y
 = 
¥c
->
y
 +Örc->
height
;

2085 i‡(
r1_x
 < 
c1_x
)

2086 
r1_x
 = 
c1_x
;

2087 i‡(
r1_y
 < 
c1_y
)

2088 
r1_y
 = 
c1_y
;

2089 i‡(
r2_x
 > 
c2_x
)

2090 
r2_x
 = 
c2_x
;

2091 i‡(
r2_y
 > 
c2_y
)

2092 
r2_y
 = 
c2_y
;

2094 i‡((
r1_x
 < 
r2_x
Ë&& (
r1_y
 < 
r2_y
)) {

2103 
	`GdCheckCurs‹
(
d°psd
, 
r1_x
, 
r1_y
, 
r2_x
 - 1,

2104 
r2_y
 - 1);

2105 
d°psd
->
	`SåëchBlôEx
(dstpsd,

2106 
§˝sd
,

2107 
r1_x
,

2108 
r1_y
,

2109 
r2_x
 - 
r1_x
,

2110 
r2_y
 - 
r1_y
,

2111 
§c_x_°ï_díomö©‹
,

2112 
§c_y_°ï_díomö©‹
,

2113 
§c_x_°¨t_exa˘
 + (
r1_x
 - 
c1_x
Ë* 
§c_x_°ï_numî©‹
,

2114 
§c_y_°¨t_exa˘
 + (
r1_y
 - 
c1_y
Ë* 
§c_y_°ï_numî©‹
,

2115 
§c_x_°ï_numî©‹
,

2116 
§c_y_°ï_numî©‹
,

2117 
r›
);

2119 ++
¥c
;

2121 
	`GdFixCurs‹
(
d°psd
);

2123 
	}
}

2132 
	$GdCÆcMemGCAŒoc
(
PSD
 
psd
, 
width
, 
height
, 
∂™es
,

2133 
bµ
, *
psize
, *
∂öñí
)

2135 
byãÀn
, 
löñí
, 
tmp
;

2137 if(!
∂™es
)

2138 
∂™es
 = 
psd
->planes;

2139 if(!
bµ
)

2140 
bµ
 = 
psd
->bpp;

2145 if(
psd
->
p‹åaô
 & (
MWPORTRAIT_LEFT
|
MWPORTRAIT_RIGHT
)) {

2146 
tmp
 = 
width
;

2147 
width
 = 
height
;

2148 
height
 = 
tmp
;

2155 if(
∂™es
 == 1) {

2156 
bµ
) {

2158 
löñí
 = (
width
+7)/8;

2159 
byãÀn
 = 
löñí
 = (linelen+3) & ~3;

2162 
löñí
 = (
width
+3)/4;

2163 
byãÀn
 = 
löñí
 = (linelen+3) & ~3;

2166 
löñí
 = (
width
+1)/2;

2167 
byãÀn
 = 
löñí
 = (linelen+3) & ~3;

2170 
byãÀn
 = 
löñí
 = (
width
+3) & ~3;

2173 
löñí
 = 
width
;

2174 
byãÀn
 = 
width
 * 2;

2177 
löñí
 = 
width
;

2178 
byãÀn
 = 
width
 * 3;

2181 
löñí
 = 
width
;

2182 
byãÀn
 = 
width
 * 4;

2187 } if(
∂™es
 == 4) {

2190 
löñí
 = (
width
+1)/2;

2191 
löñí
 = (linelen+3) & ~3;

2192 
byãÀn
 = 
löñí
;

2194 *
psize
 = *
∂öñí
 = 0;

2198 *
∂öñí
 = 
löñí
;

2199 *
psize
 = 
byãÀn
 * 
height
;

2201 
	}
}

2229 
	$GdTøn¶©eAªa
(
MWCOORD
 
width
, MWCOORD 
height
, *
ö
, 
öpixty≥
,

2230 
MWCOORD
 
öpôch
, *
out
, 
ouçixty≥
, 
ouçôch
)

2232 * 
öbuf
 = 
ö
;

2233 * 
outbuf
 = 
out
;

2234 
pixñvÆ
;

2235 
MWCOLORVAL
 
cﬁ‹vÆ
;

2236 
MWCOORD
 
x
, 
y
;

2237 
r
, 
g
, 
b
;

2238 
MWPALENTRY
 
gr_∑Àâe
[256];

2239 
gr_∑lsize
 = 256;

2241 
y
=0; y<
height
; ++y) {

2242 
x
=0; x<
width
; ++x) {

2244 
öpixty≥
) {

2245 
MWPF_RGB
:

2246 
cﬁ‹vÆ
 = *(
MWCOLORVAL
 *)
öbuf
;

2247 
öbuf
 +(
MWCOLORVAL
);

2249 
MWPF_PIXELVAL
:

2250 
pixñvÆ
 = *(
MWPIXELVAL
 *)
öbuf
;

2251 
öbuf
 +(
MWPIXELVAL
);

2253 #i‡
MWPIXEL_FORMAT
 =
MWPF_PALETTE


2254 
cﬁ‹vÆ
 = 
	`GETPALENTRY
(
gr_∑Àâe
, 
pixñvÆ
);

2256 
cﬁ‹vÆ
 = 
	`PIXELVALTOCOLORVAL
(
pixñvÆ
);

2259 
MWPF_PALETTE
:

2260 
pixñvÆ
 = *
öbuf
++;

2261 
cﬁ‹vÆ
 = 
	`GETPALENTRY
(
gr_∑Àâe
, 
pixñvÆ
);

2263 
MWPF_TRUECOLOR332
:

2264 
pixñvÆ
 = *
öbuf
++;

2265 
cﬁ‹vÆ
 = 
	`PIXEL332TOCOLORVAL
(
pixñvÆ
);

2267 
MWPF_TRUECOLOR0888
:

2268 
pixñvÆ
 = *(*)
öbuf
;

2269 
cﬁ‹vÆ
 = 
	`PIXEL888TOCOLORVAL
(
pixñvÆ
);

2270 
öbuf
 += ();

2272 
MWPF_TRUECOLORABGR
:

2273 
pixñvÆ
 = *(*Ë
öbuf
;

2274 
cﬁ‹vÆ
 = 
	`PIXELABGRTOCOLORVAL
(
pixñvÆ
);

2275 
öbuf
 += ();

2277 
MWPF_TRUECOLOR8888
:

2278 
pixñvÆ
 = *(*Ë
öbuf
;

2279 
cﬁ‹vÆ
 = 
	`PIXEL8888TOCOLORVAL
(
pixñvÆ
);

2280 
öbuf
 += ();

2282 
MWPF_TRUECOLOR888
:

2283 
r
 = *
öbuf
++;

2284 
g
 = *
öbuf
++;

2285 
b
 = *
öbuf
++;

2286 
cﬁ‹vÆ
 = (
MWPIXELVAL
)
	`MWRGB
(
r
, 
g
, 
b
);

2288 
MWPF_TRUECOLOR565
:

2289 
pixñvÆ
 = *(*)
öbuf
;

2290 
cﬁ‹vÆ
 = 
	`PIXEL565TOCOLORVAL
(
pixñvÆ
);

2291 
öbuf
 += ();

2293 
MWPF_TRUECOLOR555
:

2294 
pixñvÆ
 = *(*)
öbuf
;

2295 
cﬁ‹vÆ
 = 
	`PIXEL555TOCOLORVAL
(
pixñvÆ
);

2296 
öbuf
 += ();

2303 
ouçixty≥
) {

2304 
MWPF_RGB
:

2305 *(
MWCOLORVAL
 *)
outbuf
 = 
cﬁ‹vÆ
;

2306 
outbuf
 +(
MWCOLORVAL
);

2308 
MWPF_PIXELVAL
:

2310 #i‡
MWPIXEL_FORMAT
 =
MWPF_PALETTE


2311 *(
MWPIXELVAL
 *)
outbuf
 = 
	`GdFödNóª°Cﬁ‹
(
gr_∑Àâe
,

2312 
gr_∑lsize
, 
cﬁ‹vÆ
);

2314 *(
MWPIXELVAL
 *)
outbuf
 = 
	`COLORVALTOPIXELVAL
(
cﬁ‹vÆ
);

2316 
outbuf
 +(
MWPIXELVAL
);

2318 
MWPF_PALETTE
:

2319 *
outbuf
++ = 
	`GdFödNóª°Cﬁ‹
(
gr_∑Àâe
, 
gr_∑lsize
,

2320 
cﬁ‹vÆ
);

2322 
MWPF_TRUECOLOR332
:

2323 *
outbuf
++ = 
	`COLOR2PIXEL332
(
cﬁ‹vÆ
);

2325 
MWPF_TRUECOLOR0888
:

2326 *(*)
outbuf
 = 
	`COLOR2PIXEL888
(
cﬁ‹vÆ
);

2327 
outbuf
 += ();

2329 
MWPF_TRUECOLOR8888
:

2330 *(*Ë
outbuf
 =

2331 
	`COLOR2PIXEL8888
(
cﬁ‹vÆ
);

2332 
outbuf
 += ();

2334 
MWPF_TRUECOLORABGR
:

2335 *(*Ë
outbuf
 =

2336 
	`COLOR2PIXELABGR
(
cﬁ‹vÆ
);

2337 
outbuf
 += ();

2339 
MWPF_TRUECOLOR888
:

2340 *
outbuf
++ = 
	`REDVALUE
(
cﬁ‹vÆ
);

2341 *
outbuf
++ = 
	`GREENVALUE
(
cﬁ‹vÆ
);

2342 *
outbuf
++ = 
	`BLUEVALUE
(
cﬁ‹vÆ
);

2344 
MWPF_TRUECOLOR565
:

2345 *(*)
outbuf
 = 
	`COLOR2PIXEL565
(
cﬁ‹vÆ
);

2346 
outbuf
 += ();

2348 
MWPF_TRUECOLOR555
:

2349 *(*)
outbuf
 = 
	`COLOR2PIXEL555
(
cﬁ‹vÆ
);

2350 
outbuf
 += ();

2356 if(
öpôch
 > 
width
)

2357 
öbuf
 +
öpôch
 - 
width
;

2358 if(
ouçôch
 > 
width
)

2359 
outbuf
 +
ouçôch
 - 
width
;

2361 
	}
}

	@engine/devfont.c

16 
	~<°dio.h
>

17 
	~<°dlib.h
>

18 
	~<°rög.h
>

19 
	~"devi˚.h
"

20 
	~"devf⁄t.h
"

21 
	~"../drivîs/gíf⁄t.h
"

26 
PMWFONT
 
	ggr_pf⁄t
;

29 
MWPIXELVAL
 
gr_f‹eground
;

30 
MWPIXELVAL
 
gr_background
;

31 
MWBOOL
 
gr_u£bg
;

33 
c‹ef⁄t_døwãxt
(
PMWFONT
 
pf⁄t
, 
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
,

34 c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
);

35 
utf8_to_utf16
(c⁄° *
utf8
, 
cc
,

36 *
unicode16
);

44 
PMWFONT


45 
	$GdSëF⁄t
(
PMWFONT
 
pf⁄t
)

47 
PMWFONT
 
ﬁdf⁄t
 = 
gr_pf⁄t
;

49 i‡(
pf⁄t
)

50 
gr_pf⁄t
 = 
pf⁄t
;

51  
ﬁdf⁄t
;

52 
	}
}

77 
PMWFONT


78 
	$GdCª©eF⁄t
(
PSD
 
psd
, c⁄° *
«me
, 
MWCOORD
 
height
,

79 c⁄° 
PMWLOGFONT
 
∂ogf⁄t
)

81 
i
;

82 
f⁄tht
;

83 
f⁄äo
;

84 
f⁄t˛ass
;

85 
f⁄èâr
 = 0;

86 
PMWFONT
 
pf⁄t
;

87 
PMWCOREFONT
 
pf
 = 
psd
->
buûtö_f⁄ts
;

88 
MWFONTINFO
 
f⁄töfo
;

89 
MWSCREENINFO
 
s¸öfo
;

90 c⁄° * 
f⁄äame
;

91 #i‡!
FONTMAPPER


92 
f⁄tm≠≥r_f⁄äame
[
MWLF_FACESIZE
 + 1];

95 
	`GdGëS¸ìnInfo
(
psd
, &
s¸öfo
);

98 i‡(!
∂ogf⁄t
) {

100 i‡(!
«me
 || !name[0])

101 
«me
 = 
pf
->name;

102 
f⁄äame
 = 
«me
;

103 
f⁄t˛ass
 = 
MWLF_CLASS_ANY
;

106 #i‡
FONTMAPPER


107 
f⁄äame
 = 
NULL
;

108 
f⁄t˛ass
 = 
	`£À˘_f⁄t
(
∂ogf⁄t
, &
f⁄äame
);

114 
	`°∫˝y
(
f⁄tm≠≥r_f⁄äame
, 
∂ogf⁄t
->
lfFa˚Name
, 
MWLF_FACESIZE
);

115 
f⁄tm≠≥r_f⁄äame
[
MWLF_FACESIZE
] = '\0';

116 
f⁄äame
 = 
f⁄tm≠≥r_f⁄äame
;

117 i‡(!
f⁄äame
[0])

118 
f⁄äame
 = 
pf
->
«me
;

119 
f⁄t˛ass
 = 
∂ogf⁄t
->
lfCœss
;

121 
height
 = 
∂ogf⁄t
->
lfHeight
;

122 i‡(
∂ogf⁄t
->
lfUndîlöe
)

123 
f⁄èâr
 = 
MWTF_UNDERLINE
;

125 
height
 = 
	`abs
(height);

128 i‡(!
height
 && (
f⁄t˛ass
 =
MWLF_CLASS_ANY
 || f⁄t˛as†=
MWLF_CLASS_BUILTIN
)) {

129 
i
 = 0; i < 
s¸öfo
.
f⁄ts
; ++i) {

130 if(!
	`°rcmpi
(
pf
[
i
].
«me
, 
f⁄äame
)) {

131 
pf
[
i
].
f⁄tsize
 =Öf[i].
cf⁄t
->
height
;

132 
pf
[
i
].
f⁄èâr
 = fontattr;

133 
	`DPRINTF
("¸óãf⁄t: (heighà=0Ëfound buûtö f⁄à%†(%d)\n", 
f⁄äame
, 
i
);

134  (
PMWFONT
)&
pf
[
i
];

151 #ifde‡
HAVE_FNT_SUPPORT


152 i‡(
f⁄t˛ass
 =
MWLF_CLASS_ANY
 || f⁄t˛as†=
MWLF_CLASS_FNT
) {

153 
pf⁄t
 = (
PMWFONT
Ë
	`‚t_¸óãf⁄t
(
f⁄äame
, 
height
, 
f⁄èâr
);

154 i‡(
pf⁄t
) {

155 
	`DPRINTF
("‚t_¸óãf⁄t: usög f⁄à%s\n", 
f⁄äame
);

156 (
pf⁄t
);

158 
	`EPRINTF
("‚t_¸óãf⁄t: %s,%dÇŸ found\n", 
f⁄äame
, 
height
);

162 #ifde‡
HAVE_PCF_SUPPORT


163 i‡(
f⁄t˛ass
 =
MWLF_CLASS_ANY
 || f⁄t˛as†=
MWLF_CLASS_PCF
) {

164 
pf⁄t
 = (
PMWFONT
Ë
	`pcf_¸óãf⁄t
(
f⁄äame
, 
height
, 
f⁄èâr
);

165 i‡(
pf⁄t
) {

166 
	`DPRINTF
("pcf_¸óãf⁄t: usög f⁄à%s\n", 
f⁄äame
);

167 (
pf⁄t
);

169 
	`EPRINTF
("pcf_¸óãf⁄t: %s,%dÇŸ found\n", 
f⁄äame
, 
height
);

173 #i‡
HAVE_FREETYPE_SUPPORT


174 i‡(
f⁄t˛ass
 =
MWLF_CLASS_ANY
 || f⁄t˛as†=
MWLF_CLASS_FREETYPE
) {

175 i‡(
	`‰ìty≥_öô
(
psd
)) {

177 i‡(
∂ogf⁄t
 &&Ölogf⁄t->
lfHeight
 > 14 &&

178 
∂ogf⁄t
->
lfQuÆôy
)

179 
f⁄èâr
 |
MWTF_ANTIALIAS
;

181 
pf⁄t
 = (
PMWFONT
)
	`‰ìty≥_¸óãf⁄t
(
f⁄äame
, 
height
,

182 
f⁄èâr
);

183 if(
pf⁄t
) {

185 
pf⁄t
->
f⁄èâr
 |
MWTF_FREETYPE
;

186  
pf⁄t
;

188 
	`EPRINTF
("freetype_createfont: %s,%dÇot found\n",

189 
f⁄äame
, 
height
);

194 #i‡
HAVE_FREETYPE_2_SUPPORT


195 i‡(
f⁄t˛ass
 =
MWLF_CLASS_ANY
 || f⁄t˛as†=
MWLF_CLASS_FREETYPE
) {

196 i‡(
	`‰ìty≥2_öô
(
psd
)) {

198 i‡(
∂ogf⁄t
 &&Ölogf⁄t->
lfHeight
 > 14 &&

199 
∂ogf⁄t
->
lfQuÆôy
)

200 
f⁄èâr
 |
MWTF_ANTIALIAS
;

202 
pf⁄t
 = (
PMWFONT
)
	`‰ìty≥2_¸óãf⁄t
(
f⁄äame
, 
height
,

203 
f⁄èâr
);

204 if(
pf⁄t
) {

206 
pf⁄t
->
f⁄èâr
 |
MWTF_FREETYPE
;

207  
pf⁄t
;

209 
	`EPRINTF
("freetype2_createfont: %s,%dÇot found\n",

210 
f⁄äame
, 
height
);

215 #i‡
HAVE_T1LIB_SUPPORT


216 i‡(
f⁄t˛ass
 =
MWLF_CLASS_ANY
 || f⁄t˛as†=
MWLF_CLASS_T1LIB
) {

217 i‡(
	`t1lib_öô
(
psd
)) {

218 
pf⁄t
 = (
PMWFONT
)
	`t1lib_¸óãf⁄t
(
f⁄äame
, 
height
,

219 
f⁄èâr
);

220 if(
pf⁄t
)

221  
pf⁄t
;

222 
	`EPRINTF
("t1lib_createfont: %s,%dÇot found\n",

223 
f⁄äame
, 
height
);

228 #i‡
HAVE_HZK_SUPPORT


229 i‡(
f⁄t˛ass
 =
MWLF_CLASS_ANY
 || f⁄t˛as†=
MWLF_CLASS_HZK
) {

231 i‡(
	`hzk_öô
(
psd
)) {

232 
pf⁄t
 = (
PMWFONT
)
	`hzk_¸óãf⁄t
(
f⁄äame
, 
height
, 
f⁄èâr
);

233 if(
pf⁄t
)

234  
pf⁄t
;

235 
	`EPRINTF
("hzk_¸óãf⁄t: %s,%dÇŸ found\n", 
f⁄äame
, 
height
);

240 #i‡
HAVE_EUCJP_SUPPORT


241 i‡(
f⁄t˛ass
 =
MWLF_CLASS_ANY
 || f⁄t˛as†=
MWLF_CLASS_MGL
) {

242 
pf⁄t
 = (
PMWFONT
)
	`eucjp_¸óãf⁄t
(
f⁄äame
, 
height
, 
f⁄èâr
);

243 i‡(
pf⁄t
) {

244 
	`DPRINTF
("euj˝_¸óãf⁄t: usög f⁄à%s\n", 
f⁄äame
);

245  
pf⁄t
;

247 
	`EPRINTF
("eucjp_¸óãf⁄t: %s,%dÇŸ found\n", 
f⁄äame
, 
height
);

255 i‡(
height
 !0 && (
f⁄t˛ass
 =
MWLF_CLASS_ANY
 || f⁄t˛as†=
MWLF_CLASS_BUILTIN
)) {

257 
f⁄äo
 = 0;

258 
height
 = 
	`abs
(height);

259 
f⁄tht
 = 
MAX_MWCOORD
;

260 
i
 = 0; i < 
s¸öfo
.
f⁄ts
; ++i) {

261 
pf⁄t
 = (
PMWFONT
)&
pf
[
i
];

262 
	`GdGëF⁄tInfo
(
pf⁄t
, &
f⁄töfo
);

263 if(
f⁄tht
 > 
	`abs
(
height
-
f⁄töfo
.height)) {

264 
f⁄äo
 = 
i
;

265 
f⁄tht
 = 
	`abs
(
height
-
f⁄töfo
.height);

268 
pf
[
f⁄äo
].
f⁄tsize
 =Öf[f⁄äo].
cf⁄t
->
height
;

269 
pf
[
f⁄äo
].
f⁄èâr
 = fontattr;

270 
	`DPRINTF
("¸óãf⁄t: (heighà!0Ëusög buûtö f⁄à%†(%d)\n", 
pf
[
f⁄äo
].
«me
, fontno);

271  (
PMWFONT
)&
pf
[
f⁄äo
];

275 
	`DPRINTF
("createfont:Ço font found,Ñeturning NULL\n");

277 
	}
}

286 
MWCOORD


287 
	$GdSëF⁄tSize
(
PMWFONT
 
pf⁄t
, 
MWCOORD
 
f⁄tsize
)

289 
MWCOORD
 
ﬁdf⁄tsize
 = 
pf⁄t
->
f⁄tsize
;

290 
pf⁄t
->
f⁄tsize
 = fontsize;

292 i‡(
pf⁄t
->
f⁄çrocs
->
SëF⁄tSize
)

293 
pf⁄t
->
f⁄çrocs
->
	`SëF⁄tSize
’f⁄t, 
f⁄tsize
);

295  
ﬁdf⁄tsize
;

296 
	}
}

306 
	$GdSëF⁄tRŸ©i⁄
(
PMWFONT
 
pf⁄t
, 
ã¡hdegªes
)

308 
MWCOORD
 
ﬁdrŸ©i⁄
 = 
pf⁄t
->
f⁄åŸ©i⁄
;

309 
pf⁄t
->
f⁄åŸ©i⁄
 = 
ã¡hdegªes
;

311 i‡(
pf⁄t
->
f⁄çrocs
->
SëF⁄tRŸ©i⁄
)

312 
pf⁄t
->
f⁄çrocs
->
	`SëF⁄tRŸ©i⁄
’f⁄t, 
ã¡hdegªes
);

314  
ﬁdrŸ©i⁄
;

315 
	}
}

327 
	$GdSëF⁄tAâr
(
PMWFONT
 
pf⁄t
, 
£tÊags
, 
˛rÊags
)

329 
MWCOORD
 
ﬁd©å
 = 
pf⁄t
->
f⁄èâr
;

331 
pf⁄t
->
f⁄èâr
 &~
˛rÊags
;

332 
pf⁄t
->
f⁄èâr
 |
£tÊags
;

334 i‡(
pf⁄t
->
f⁄çrocs
->
SëF⁄tAâr
)

335 
pf⁄t
->
f⁄çrocs
->
	`SëF⁄tAâr
’f⁄t, 
£tÊags
, 
˛rÊags
);

337  
ﬁd©å
;

338 
	}
}

347 
	$GdDe°royF⁄t
(
PMWFONT
 
pf⁄t
)

349 i‡(
pf⁄t
->
f⁄çrocs
->
De°royF⁄t
)

350 
pf⁄t
->
f⁄çrocs
->
	`De°royF⁄t
(pfont);

351 
	}
}

360 
MWBOOL


361 
	$GdGëF⁄tInfo
(
PMWFONT
 
pf⁄t
, 
PMWFONTINFO
 
pf⁄töfo
)

363 if(!
pf⁄t
 || !pf⁄t->
f⁄çrocs
->
GëF⁄tInfo
)

364  
FALSE
;

366  
pf⁄t
->
f⁄çrocs
->
	`GëF⁄tInfo
’f⁄t, 
pf⁄töfo
);

367 
	}
}

391 
	$GdText
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, c⁄° *
°r
, 
cc
,
MWTEXTFLAGS
 
Êags
)

393 c⁄° * 
ãxt
;

394 
de„ncodög
 = 
gr_pf⁄t
->
f⁄çrocs
->
ícodög
;

395 
f‹˚_uc16
 = 0;

396 
buf
[256];

409 i‡(
Êags
 & 
MWTF_DBCSMASK
) {

411 i‡(
gr_pf⁄t
->
f⁄çrocs
->
GëTextBôs
 =
gí_gëãxtbôs
 &&

412 
gr_pf⁄t
->
f⁄çrocs
->
DøwText
 =
c‹ef⁄t_døwãxt
) {

413 
de„ncodög
 = 
MWTF_UC16
;

414 
f‹˚_uc16
 = 1;

419 if((
Êags
 & (
MWTF_PACKMASK
|
MWTF_DBCSMASK
)Ë!
de„ncodög
) {

420 
cc
 = 
	`GdC⁄vîtEncodög
(
°r
, 
Êags
, cc, 
buf
, 
de„ncodög
);

421 
Êags
 &~
MWTF_PACKMASK
;

422 
Êags
 |
de„ncodög
;

423 
ãxt
 = 
buf
;

424 } 
ãxt
 = 
°r
;

427 if(
cc
 =-1 && (
Êags
 & 
MWTF_PACKMASK
Ë=
MWTF_ASCII
)

428 
cc
 = 
	`°æí
((*)
°r
);

430 if(
cc
 <0 || !
gr_pf⁄t
->
f⁄çrocs
->
DøwText
)

434 i‡(!
f‹˚_uc16
)

435 
Êags
 &~
MWTF_DBCSMASK
;

436 
gr_pf⁄t
->
f⁄çrocs
->
	`DøwText
(gr_pf⁄t, 
psd
, 
x
, 
y
, 
ãxt
, 
cc
, 
Êags
);

437 
	}
}

443 
	$c‹ef⁄t_døwãxt
(
PMWFONT
 
pf⁄t
, 
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
,

444 c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
)

446 c⁄° *
°r
 = 
ãxt
;

447 c⁄° *
i°r
 = 
ãxt
;

448 
MWCOORD
 
width
;

449 
MWCOORD
 
height
;

450 
MWCOORD
 
ba£
;

451 
MWCOORD
 
°¨tx
, 
°¨ty
;

452 c⁄° 
MWIMAGEBITS
 *
bôm≠
;

453 
MWBOOL
 
bg°©e
;

454 
˛ù
;

456 i‡(
Êags
 & 
MWTF_DBCSMASK
)

457 
	`dbcs_gëãxtsize
(
pf⁄t
, 
i°r
, 
cc
, 
Êags
, &
width
, &
height
, &
ba£
);

458 
pf⁄t
->
f⁄çrocs
->
	`GëTextSize
’f⁄t, 
°r
, 
cc
, 
Êags
, &
width
, &
height
, &
ba£
);

460 i‡(
Êags
 & 
MWTF_BASELINE
)

461 
y
 -
ba£
;

462 i‡(
Êags
 & 
MWTF_BOTTOM
)

463 
y
 -(
height
 - 1);

464 
°¨tx
 = 
x
;

465 
°¨ty
 = 
y
 + 
ba£
;

466 
bg°©e
 = 
gr_u£bg
;

468 
˛ù
 = 
	`GdClùAªa
(
psd
, 
x
, 
y
, x + 
width
 - 1, y + 
height
 - 1)) {

469 
CLIP_VISIBLE
:

471 i‡(
gr_u£bg
)

472 
psd
->
	`FûlRe˘
’sd, 
x
, 
y
, x + 
width
 - 1, y + 
height
 - 1,

473 
gr_background
);

482 
bg°©e
 = 
gr_u£bg
;

483 
gr_u£bg
 = 
FALSE
;

486 
CLIP_INVISIBLE
:

500 --
cc
 >0 && 
x
 < 
psd
->
xvúåes
) {

501 i‡(
Êags
 & 
MWTF_DBCSMASK
)

502 
	`dbcs_gëãxtbôs
(
pf⁄t
, *
i°r
++, 
Êags
, &
bôm≠
, &
width
,

503 &
height
, &
ba£
);

505 
ch
;

507 i‡(
pf⁄t
->
f⁄çrocs
->
ícodög
 =
MWTF_UC16
)

508 
ch
 = *
i°r
++;

509 
ch
 = *
°r
++;

510 
pf⁄t
->
f⁄çrocs
->
	`GëTextBôs
’f⁄t, 
ch
, &
bôm≠
, &
width
,

511 &
height
, &
ba£
);

514 i‡(
˛ù
 =
CLIP_VISIBLE
)

515 
	`døwbôm≠
(
psd
, 
x
, 
y
, 
width
, 
height
, 
bôm≠
);

517 
	`GdBôm≠
(
psd
, 
x
, 
y
, 
width
, 
height
, 
bôm≠
);

518 
x
 +
width
;

521 i‡(
pf⁄t
->
f⁄èâr
 & 
MWTF_UNDERLINE
)

522 
	`GdLöe
(
psd
, 
°¨tx
, 
°¨ty
, 
x
, sèπy, 
FALSE
);

525 
gr_u£bg
 = 
bg°©e
;

527 
	`GdFixCurs‹
(
psd
);

528 
	}
}

530 #i‡
HAVE_FNT_SUPPORT
 | 
HAVE_PCF_SUPPORT


535 
	$gí16_døwãxt
(
PMWFONT
 
pf⁄t
, 
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
,

536 c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
)

538 c⁄° *
°r
 = 
ãxt
;

539 
MWCOORD
 
width
;

540 
MWCOORD
 
height
;

541 
MWCOORD
 
ba£
;

542 
MWCOORD
 
°¨tx
, 
°¨ty
;

543 c⁄° 
MWIMAGEBITS
 *
bôm≠
;

544 
MWBOOL
 
bg°©e
;

545 
˛ù
;

547 
pf⁄t
->
f⁄çrocs
->
	`GëTextSize
’f⁄t, 
°r
, 
cc
, 
Êags
, &
width
, &
height
, &
ba£
);

549 i‡(
Êags
 & 
MWTF_BASELINE
)

550 
y
 -
ba£
;

551 i‡(
Êags
 & 
MWTF_BOTTOM
)

552 
y
 -(
height
 - 1);

553 
°¨tx
 = 
x
;

554 
°¨ty
 = 
y
 + 
ba£
;

555 
bg°©e
 = 
gr_u£bg
;

557 
˛ù
 = 
	`GdClùAªa
(
psd
, 
x
, 
y
, x + 
width
 - 1, y + 
height
 - 1)) {

558 
CLIP_VISIBLE
:

560 i‡(
gr_u£bg
)

561 
psd
->
	`FûlRe˘
’sd, 
x
, 
y
, x + 
width
 - 1, y + 
height
 - 1,

562 
gr_background
);

571 
bg°©e
 = 
gr_u£bg
;

572 
gr_u£bg
 = 
FALSE
;

575 
CLIP_INVISIBLE
:

582 --
cc
 >0 && 
x
 < 
psd
->
xvúåes
) {

583 
ch
 = *
°r
++;

584 
pf⁄t
->
f⁄çrocs
->
	`GëTextBôs
’f⁄t, 
ch
, &
bôm≠
, &
width
,

585 &
height
, &
ba£
);

587 i‡(
˛ù
 =
CLIP_VISIBLE
)

588 
	`døwbôm≠
(
psd
, 
x
, 
y
, 
width
, 
height
, 
bôm≠
);

590 
	`GdBôm≠
(
psd
, 
x
, 
y
, 
width
, 
height
, 
bôm≠
);

591 
x
 +
width
;

594 i‡(
pf⁄t
->
f⁄èâr
 & 
MWTF_UNDERLINE
)

595 
	`GdLöe
(
psd
, 
°¨tx
, 
°¨ty
, 
x
, sèπy, 
FALSE
);

598 
gr_u£bg
 = 
bg°©e
;

600 
	`GdFixCurs‹
(
psd
);

601 
	}
}

604 #i‡
HAVE_T1LIB_SUPPORT
 | 
HAVE_FREETYPE_SUPPORT


611 
	$ÆphabÀnd
(
PSD
 
psd
, 
OUTPIXELVAL
 *
out
, 
MWPIXELVAL
 
§c
, MWPIXELVAL 
d°
,

612 *
Æpha
, 
cou¡
)

614 
a
, 
d
;

615 
r
, 
g
, 
b
;

616 
MWCOLORVAL
 
∑l§c
, 
∑ld°
;

617 
MWPALENTRY
 
gr_∑Àâe
[256];

619 --
cou¡
 >= 0) {

620 
a
 = *
Æpha
++;

622 
	#BITS
(
pixñ
,
shi·
,
mask
Ë((’ixñ)>>shi·)&(mask))

	)

623 if(
a
 == 0)

624 *
out
++ = 
d°
;

625 if(
a
 == 255)

626 *
out
++ = 
§c
;

628 
psd
->
pixty≥
) {

629 
MWPF_TRUECOLOR0888
:

630 
MWPF_TRUECOLOR888
:

631 
d
 = 
	`BITS
(
d°
, 16, 0xff);

632 
r
 = ()(((
	`BITS
(
§c
, 16, 0xffË- 
d
)*
a
)>>8) + d;

633 
d
 = 
	`BITS
(
d°
, 8, 0xff);

634 
g
 = ()(((
	`BITS
(
§c
, 8, 0xffË- 
d
)*
a
)>>8) + d;

635 
d
 = 
	`BITS
(
d°
, 0, 0xff);

636 
b
 = ()(((
	`BITS
(
§c
, 0, 0xffË- 
d
)*
a
)>>8) + d;

637 *
out
++ = (
r
 << 16Ë| (
g
 << 8Ë| 
b
;

640 
MWPF_TRUECOLOR565
:

641 
d
 = 
	`BITS
(
d°
, 11, 0x1f);

642 
r
 = ()(((
	`BITS
(
§c
, 11, 0x1fË- 
d
)*
a
)>>8) + d;

643 
d
 = 
	`BITS
(
d°
, 5, 0x3f);

644 
g
 = ()(((
	`BITS
(
§c
, 5, 0x3fË- 
d
)*
a
)>>8) + d;

645 
d
 = 
	`BITS
(
d°
, 0, 0x1f);

646 
b
 = ()(((
	`BITS
(
§c
, 0, 0x1fË- 
d
)*
a
)>>8) + d;

647 *
out
++ = (
r
 << 11Ë| (
g
 << 5Ë| 
b
;

650 
MWPF_TRUECOLOR555
:

651 
d
 = 
	`BITS
(
d°
, 10, 0x1f);

652 
r
 = ()(((
	`BITS
(
§c
, 10, 0x1fË- 
d
)*
a
)>>8) + d;

653 
d
 = 
	`BITS
(
d°
, 5, 0x1f);

654 
g
 = ()(((
	`BITS
(
§c
, 5, 0x1fË- 
d
)*
a
)>>8) + d;

655 
d
 = 
	`BITS
(
d°
, 0, 0x1f);

656 
b
 = ()(((
	`BITS
(
§c
, 0, 0x1fË- 
d
)*
a
)>>8) + d;

657 *
out
++ = (
r
 << 10Ë| (
g
 << 5Ë| 
b
;

660 
MWPF_TRUECOLOR332
:

661 
d
 = 
	`BITS
(
d°
, 5, 0x07);

662 
r
 = ()(((
	`BITS
(
§c
, 5, 0x07Ë- 
d
)*
a
)>>8) + d;

663 
d
 = 
	`BITS
(
d°
, 2, 0x07);

664 
g
 = ()(((
	`BITS
(
§c
, 2, 0x07Ë- 
d
)*
a
)>>8) + d;

665 
d
 = 
	`BITS
(
d°
, 0, 0x03);

666 
b
 = ()(((
	`BITS
(
§c
, 0, 0x03Ë- 
d
)*
a
)>>8) + d;

667 *
out
++ = (
r
 << 5Ë| (
g
 << 2Ë| 
b
;

670 
MWPF_PALETTE
:

672 
∑l§c
 = 
	`GETPALENTRY
(
gr_∑Àâe
, 
§c
);

673 
∑ld°
 = 
	`GETPALENTRY
(
gr_∑Àâe
, 
d°
);

674 
d
 = 
	`REDVALUE
(
∑ld°
);

675 
r
 = ()(((
	`REDVALUE
(
∑l§c
Ë- 
d
)*
a
)>>8) + d;

676 
d
 = 
	`GREENVALUE
(
∑ld°
);

677 
g
 = ()(((
	`GREENVALUE
(
∑l§c
Ë- 
d
)*
a
)>>8) + d;

678 
d
 = 
	`BLUEVALUE
(
∑ld°
);

679 
b
 = ()(((
	`BLUEVALUE
(
∑l§c
Ë- 
d
)*
a
)>>8) + d;

680 *
out
++ = 
	`GdFödNóª°Cﬁ‹
(
gr_∑Àâe
, ()
psd
->
ncﬁ‹s
,

681 
	`MWRGB
(
r
, 
g
, 
b
));

685 
	}
}

688 #i‡!
HAVE_FREETYPE_SUPPORT


690 
	$GdGëTextSizeEx
(
PMWFONT
 
pf⁄t
, c⁄° *
°r
, 
cc
,
nMaxExã¡
,

691 * 
ÕnFô
, * 
ÆpDx
,
MWCOORD
 *
pwidth
,MWCOORD *
pheight
,

692 
MWCOORD
 *
pba£
, 
MWTEXTFLAGS
 
Êags
)

694 *
pwidth
 = *
pheight
 = *
pba£
 = 0;

696 
	}
}

699 
	$GdFªeF⁄tLi°
(
MWFONTLIST
 ***
f⁄ts
, 
n
)

701 
	}
}

704 
	$GdGëF⁄tLi°
(
MWFONTLIST
 ***
f⁄ts
, *
numf⁄ts
)

706 *
numf⁄ts
 = -1;

707 
	}
}

727 
	$GdC⁄vîtEncodög
(c⁄° *
i°r
, 
MWTEXTFLAGS
 
iÊags
, 
cc
, *
o°r
,

728 
MWTEXTFLAGS
 
oÊags
)

730 c⁄° *
i°r8
;

731 c⁄° *
i°r16
;

732 c⁄° *
i°r32
;

733 *
o°r8
;

734 *
o°r16
;

735 *
o°r32
;

736 
ch
;

737 
icc
;

738 
buf16
[512];

740 
iÊags
 &
MWTF_PACKMASK
|
MWTF_DBCSMASK
;

741 
oÊags
 &
MWTF_PACKMASK
|
MWTF_DBCSMASK
;

744 if(
cc
 =-1 && (
iÊags
 =
MWTF_ASCII
))

745 
cc
 = 
	`°æí
((*)
i°r
);

748 if(
iÊags
 =
MWTF_UTF8
) {

750 
cc
 = 
	`utf8_to_utf16
((*)
i°r
, cc,

751 
oÊags
==
MWTF_UC16
?(*Ë
o°r
: 
buf16
);

753 if(
oÊags
 =
MWTF_UC16
 || 
cc
 < 0)

754  
cc
;

757 
iÊags
 = 
MWTF_UC16
;

758 
i°r
 = 
buf16
;

761 #i‡
HAVE_HZK_SUPPORT


762 if(
iÊags
 =
MWTF_UC16
 && 
oÊags
 =
MWTF_ASCII
) {

764 
cc
 = 
	`UC16_to_GB
–
i°r
, cc, 
o°r
);

765  
cc
;

769 
icc
 = 
cc
;

770 
cc
 = 0;

771 
i°r8
 = 
i°r
;

772 
i°r16
 = 
i°r
;

773 
i°r32
 = 
i°r
;

774 
o°r8
 = 
o°r
;

775 
o°r16
 = 
o°r
;

776 
o°r32
 = 
o°r
;

781 --
icc
 >= 0) {

782 
iÊags
) {

784 
ch
 = *
i°r8
++;

786 
MWTF_UC16
:

787 
ch
 = *
i°r16
++;

789 
MWTF_XCHAR2B
:

790 
ch
 = *
i°r8
++ << 8;

791 
ch
 |*
i°r8
++;

793 
MWTF_UC32
:

794 
ch
 = *
i°r32
++;

796 
MWTF_DBCS_BIG5
:

797 
ch
 = *
i°r8
++;

798 i‡(
ch
 >0xA1 && ch <0xF9 && 
icc
 &&

799 ((*
i°r8
 >= 0x40 && *istr8 <= 0x7E) ||

800 (*
i°r8
 >= 0xA1 && *istr8 <= 0xFE))) {

801 
ch
 = (ch << 8Ë| *
i°r8
++;

802 --
icc
;

805 
MWTF_DBCS_EUCCN
:

806 
ch
 = *
i°r8
++;

807 i‡(
ch
 >0xA1 && ch <0xF7 && 
icc
 &&

808 *
i°r8
 >= 0xA1 && *istr8 <= 0xFE) {

809 
ch
 = (ch << 8Ë| *
i°r8
++;

810 --
icc
;

813 
MWTF_DBCS_EUCKR
:

814 
ch
 = *
i°r8
++;

815 i‡(
ch
 >0xA1 && ch <0xFE && 
icc
 &&

816 *
i°r8
 >= 0xA1 && *istr8 <= 0xFE) {

817 
ch
 = (ch << 8Ë| *
i°r8
++;

818 --
icc
;

821 
MWTF_DBCS_EUCJP
:

822 
ch
 = *
i°r8
++;

823 i‡(
ch
 >0xA1 && ch <0xFE && 
icc
 &&

824 *
i°r8
 >= 0xA1 && *istr8 <= 0xFE) {

825 
ch
 = (ch << 8Ë| *
i°r8
++;

826 --
icc
;

829 
MWTF_DBCS_JIS
:

830 
ch
 = *
i°r8
++;

831 i‡(
icc
 && (

832 (
ch
 >0xA1 && ch <0xFE && *
i°r8
 >= 0xA1 && *istr8 <= 0xFE)

834 (((
ch
 >= 0x81 && ch <= 0x9F) || (ch >= 0xE0 && ch <= 0xEF)) &&

835 (*
i°r8
 >= 0x40 && *istr8 <= 0xFC && *istr8 != 0x7F))

837 
ch
 = (ch << 8Ë| *
i°r8
++;

838 --
icc
;

843 
oÊags
) {

845 *
o°r8
++ = ()
ch
;

847 
MWTF_UC16
:

848 *
o°r16
++ = ()
ch
;

850 
MWTF_XCHAR2B
:

851 *
o°r8
++ = ()(
ch
 >> 8);

852 *
o°r8
++ = ()
ch
;

854 
MWTF_UC32
:

855 *
o°r32
++ = 
ch
;

858 ++
cc
;

860  
cc
;

861 
	}
}

881 
	$GdGëTextSize
(
PMWFONT
 
pf⁄t
, c⁄° *
°r
, 
cc
, 
MWCOORD
 *
pwidth
,

882 
MWCOORD
 *
pheight
, MWCOORD *
pba£
, 
MWTEXTFLAGS
 
Êags
)

884 c⁄° * 
ãxt
;

885 
MWTEXTFLAGS
 
de„ncodög
 = 
pf⁄t
->
f⁄çrocs
->
ícodög
;

886 
f‹˚_uc16
 = 0;

887 
buf
[256];

890 i‡(
Êags
 & 
MWTF_DBCSMASK
) {

892 i‡(
pf⁄t
->
f⁄çrocs
->
GëTextBôs
 =
gí_gëãxtbôs
 &&

893 
pf⁄t
->
f⁄çrocs
->
DøwText
 =
c‹ef⁄t_døwãxt
) {

894 
de„ncodög
 = 
MWTF_UC16
;

895 
f‹˚_uc16
 = 1;

900 if((
Êags
 & (
MWTF_PACKMASK
|
MWTF_DBCSMASK
)Ë!
de„ncodög
) {

901 
cc
 = 
	`GdC⁄vîtEncodög
(
°r
, 
Êags
, cc, 
buf
, 
de„ncodög
);

902 
Êags
 &~
MWTF_PACKMASK
;

903 
Êags
 |
de„ncodög
;

904 
ãxt
 = 
buf
;

905 } 
ãxt
 = 
°r
;

908 if(
cc
 =-1 && (
Êags
 & 
MWTF_PACKMASK
Ë=
MWTF_ASCII
)

909 
cc
 = 
	`°æí
((*)
°r
);

911 if(
cc
 <0 || !
pf⁄t
->
f⁄çrocs
->
GëTextSize
) {

912 *
pwidth
 = *
pheight
 = *
pba£
 = 0;

917 i‡(
f‹˚_uc16
)

918 
	`dbcs_gëãxtsize
(
pf⁄t
, 
ãxt
, 
cc
, 
Êags
, 
pwidth
, 
pheight
, 
pba£
);

919 
pf⁄t
->
f⁄çrocs
->
	`GëTextSize
’f⁄t, 
ãxt
, 
cc
, 
Êags
, 
pwidth
, 
pheight
, 
pba£
);

920 
	}
}

922 #i‡
HAVE_FREETYPE_2_SUPPORT


937 
PMWFONT


938 
	$GdCª©eF⁄tFromBuf„r
(
PSD
 
psd
, c⁄° *
buf„r
,

939 
Àngth
, c⁄° *
f‹m©
, 
MWCOORD
 
height
)

941 
PMWFONT
 
pf⁄t
 = 
NULL
;

955 i‡(
	`‰ìty≥2_öô
(
psd
)) {

956 
pf⁄t
 = (
PMWFONT
)
	`‰ìty≥2_¸óãf⁄t‰ombuf„r
(
buf„r
, 
Àngth
, 
height
);

958 i‡(!
pf⁄t
)

959 
	`EPRINTF
("GdCreateFontFromBuffer: create failed.\n");

961  
pf⁄t
;

962 
	}
}

972 
PMWFONT


973 
	$GdDu∂iˇãF⁄t
(
PSD
 
psd
, 
PMWFONT
 
p§cf⁄t
, 
MWCOORD
 
f⁄tsize
)

978 i‡(
p§cf⁄t
->
f⁄çrocs
->
Du∂iˇã
)

979  
p§cf⁄t
->
f⁄çrocs
->
	`Du∂iˇã
’§cf⁄t, 
f⁄tsize
);

981  
p§cf⁄t
;

982 
	}
}

1008 
	$utf8_to_utf16
(c⁄° *
utf8
, 
cc
, *
unicode16
)

1010 
cou¡
 = 0;

1011 
c0
, 
c1
;

1012 
sˇœr
;

1014 --
cc
 >= 0) {

1015 
c0
 = *
utf8
++;

1018 i‡–
c0
 < 0x80 ) {

1020 *
unicode16
++ = 
c0
;

1021 
cou¡
++;

1025 i‡–(
c0
 & 0xc0) == 0x80 )

1030 
sˇœr
 = 
c0
;

1031 if(--
cc
 < 0)

1033 
c1
 = *
utf8
++;

1035 i‡–(
c1
 & 0xc0) != 0x80 )

1038 
sˇœr
 <<= 6;

1039 
sˇœr
 |(
c1
 & 0x3f);

1041 i‡–!(
c0
 & 0x20) ) {

1043 i‡–(
sˇœr
 != 0) && (scalar < 0x80) )

1045 *
unicode16
++ = 
sˇœr
 & 0x7ff;

1046 
cou¡
++;

1051 if(--
cc
 < 0)

1053 
c1
 = *
utf8
++;

1055 i‡–(
c1
 & 0xc0) != 0x80 )

1058 
sˇœr
 <<= 6;

1059 
sˇœr
 |(
c1
 & 0x3f);

1061 i‡–!(
c0
 & 0x10) ) {

1064 i‡–
sˇœr
 < 0x800 )

1066 i‡–
sˇœr
 >= 0xd800 && scalar < 0xe000 )

1068 *
unicode16
++ = 
sˇœr
 & 0xffff;

1069 
cou¡
++;

1074 
c1
 = *
utf8
++;

1075 if(--
cc
 < 0)

1078 i‡–(
c1
 & 0xc0) != 0x80 )

1081 
sˇœr
 <<= 6;

1082 
sˇœr
 |(
c1
 & 0x3f);

1084 i‡–!(
c0
 & 0x08) ) {

1086 i‡–
sˇœr
 < 0x10000 )

1088 
sˇœr
 -= 0x10000;

1089 *
unicode16
++ = ((
sˇœr
 >> 10) & 0x3ff) + 0xd800;

1090 *
unicode16
++ = (
sˇœr
 & 0x3ff) + 0xdc00;

1091 
cou¡
 += 2;

1097  
cou¡
;

1098 
	}
}

	@engine/devfont.h

1 #i‚de‡
_DEVFONT_H


2 
	#_DEVFONT_H


	)

11 
	#T1LIB_USE_AA_HIGH


	)

13 #ifde‡
T1LIB_USE_AA_HIGH


14 
	tOUTPIXELVAL
;

16 
MWPIXELVAL
 
	tOUTPIXELVAL
;

19 #i‡(
UNIX
 | 
DOS_DJGPP
)

20 
	#°rcmpi
 
°rˇ£cmp


	)

24 
ÆphabÀnd
(
PSD
 
psd
, 
OUTPIXELVAL
 *
out
, 
MWPIXELVAL
 
§c
, MWPIXELVAL 
d°
,

25 *
Æpha
, 
cou¡
);

28 
PMWCOREFONT
 
‚t_¸óãf⁄t
(c⁄° *
«me
, 
MWCOORD
 
height
, 
©å
);

30 #i‡
HAVE_T1LIB_SUPPORT


31 
MWT1LIBFONT
 *
	tPMWT1LIBFONT
;

32 
t1lib_öô
(
PSD
 
psd
);

33 
PMWT1LIBFONT
 
t1lib_¸óãf⁄t
(c⁄° *
«me
, 
MWCOORD
 
height
,
©å
);

36 #i‡
HAVE_FREETYPE_SUPPORT


37 
MWFREETYPEFONT
 *
	tPMWFREETYPEFONT
;

38 
‰ìty≥_öô
(
PSD
 
psd
);

39 
PMWFREETYPEFONT
 
‰ìty≥_¸óãf⁄t
(c⁄° *
«me
, 
MWCOORD
 
height
, 
©å
);

42 #i‡
HAVE_FREETYPE_2_SUPPORT


43 
MWFREETYPE2FONT_STRUCT
 
	tMWFREETYPE2FONT
;

44 
MWFREETYPE2FONT
 *
	tPMWFREETYPE2FONT
;

45 
‰ìty≥2_öô
(
PSD
 
psd
);

46 
PMWFREETYPE2FONT
 
‰ìty≥2_¸óãf⁄t
(c⁄° *
«me
, 
MWCOORD
 
height
,

47 
©å
);

48 
PMWFREETYPE2FONT
 
‰ìty≥2_¸óãf⁄t‰ombuf„r
(c⁄° *
buf„r
,

49 
Àngth
,

50 
MWCOORD
 
height
);

53 #i‡
HAVE_PCF_SUPPORT


54 
PMWCOREFONT
 
pcf_¸óãf⁄t
(c⁄° *
«me
, 
MWCOORD
 
height
, 
©å
);

57 #i‡
HAVE_HZK_SUPPORT


58 
MWHZKFONT
 *
	tPMWHZKFONT
;

59 
hzk_öô
(
PSD
 
psd
);

60 
PMWHZKFONT
 
hzk_¸óãf⁄t
(c⁄° *
«me
, 
MWCOORD
 
height
, 
f⁄èâr
);

61 
UC16_to_GB
(c⁄° *
uc16
, 
cc
, *
ascii
);

64 #i‡
HAVE_EUCJP_SUPPORT


65 
MWEUCJPFONT
 *
	tPMWEUCJPFONT
;

66 
PMWEUCJPFONT
 
eucjp_¸óãf⁄t
(c⁄° *
«me
, 
MWCOORD
 
height
, 
©å
);

69 #i‡
FONTMAPPER


71 
£À˘_f⁄t
(c⁄° 
PMWLOGFONT
 
∂ogf⁄t
, c⁄° **
phy¢ame
);

75 
dbcs_gëãxtbôs
(
PMWFONT
 
pf⁄t
, 
ch
, 
MWTEXTFLAGS
 
Êags
,

76 c⁄° 
MWIMAGEBITS
 **
ªtm≠
, 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
,

77 
MWCOORD
 *
pba£
);

78 
dbcs_gëãxtsize
(
PMWFONT
 
pf⁄t
, c⁄° *
°r
, 
cc
, 
MWTEXTFLAGS
 
Êags
,

79 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
, MWCOORD *
pba£
);

	@engine/devimage.c

17 
	~<°dio.h
>

18 
	~<°dlib.h
>

19 
	~<°rög.h
>

20 
	~<uni°d.h
>

21 
	~<f˙é.h
>

22 
	~<˘y≥.h
>

23 
	~<sys/ty≥s.h
>

24 
	~<sys/°©.h
>

25 
	~"devi˚.h
"

26 
	~"sw≠.h
"

27 #i‡
HAVE_MMAP


28 
	~<sys/mm™.h
>

31 #i‡
MW_FEATURE_IMAGES


35 
MWLIST
 
	mlök
;

36 
	mid
;

37 
PMWIMAGEHDR
 
	mpimage
;

38 
PSD
 
	mpsd
;

39 } 
	tIMAGEITEM
, *
	tPIMAGEITEM
;

41 
MWLISTHEAD
 
	gimagehód
;

42 
	g√xtimageid
 = 1;

54 
GdDecodeImage
(
PSD
 
psd
, 
buf„r_t
 *
§c
, *
∑th
, 
Êags
);

60 
	$GdImageBuf„rInô
(
buf„r_t
 *
buf„r
, *
°¨td©a
, 
size
)

62 
buf„r
->
°¨t
 = 
°¨td©a
;

63 
buf„r
->
size
 = size;

64 
buf„r
->
off£t
 = 0;

65 
	}
}

68 
	$GdImageBuf„rSìkTo
(
buf„r_t
 *
buf„r
, 
off£t
)

70 i‡(
off£t
 < 
buf„r
->
size
)

71 
buf„r
->
off£t
 = offset;

72 
	}
}

75 
	$GdImageBuf„rRód
(
buf„r_t
 *
buf„r
, *
de°
, 
size
)

77 
c›ysize
;

79 i‡(
buf„r
->
off£t
 =buf„r->
size
)

82 i‡(
buf„r
->
off£t
 + 
size
 > buffer->size)

83 
c›ysize
 = 
buf„r
->
size
 - buf„r->
off£t
;

84 
c›ysize
 = 
size
;

86 
	`mem˝y
(
de°
, 
buf„r
->
°¨t
 + buf„r->
off£t
, 
c›ysize
);

88 
buf„r
->
off£t
 +
c›ysize
;

89  
c›ysize
;

90 
	}
}

93 
	$GdImageBuf„rGëCh¨
(
buf„r_t
 *
buf„r
)

95 i‡(
buf„r
->
off£t
 =buf„r->
size
)

96  
EOF
;

97  
buf„r
->
°¨t
[buf„r->
off£t
++];

98 
	}
}

101 
	$GdImageBuf„rGëSåög
(
buf„r_t
 *
buf„r
, *
de°
, 
size
)

103 
i
,
o
;

104 
c›ysize
 = 
size
 - 1;

106 i‡(
buf„r
->
off£t
 =buf„r->
size
)

109 i‡(
buf„r
->
off£t
 + 
c›ysize
 > buf„r->
size
)

110 
c›ysize
 = 
buf„r
->
size
 - buf„r->
off£t
;

112 
o
=0, 
i
=
buf„r
->
off£t
; i < buf„r->off£à+ 
c›ysize
; i++, o++) {

113 i‡((
de°
[
o
] = 
buf„r
->
°¨t
[
i
]) == '\n')

117 
buf„r
->
off£t
 = 
i
 + 1;

118 
de°
[
o
 + 1] = 0;

120  
de°
;

121 
	}
}

124 
	$GdImageBuf„rEOF
(
buf„r_t
 *
buf„r
)

126  (
buf„r
->
off£t
 =buf„r->
size
);

127 
	}
}

139 
	$GdLﬂdImageFromBuf„r
(
PSD
 
psd
, *
buf„r
, 
size
, 
Êags
)

141 
buf„r_t
 
§c
;

143 
	`GdImageBuf„rInô
(&
§c
, 
buf„r
, 
size
);

144  
	`GdDecodeImage
(
psd
, &
§c
, 
NULL
, 
Êags
);

145 
	}
}

162 
	$GdDøwImageFromBuf„r
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
width
,

163 
MWCOORD
 
height
, *
buf„r
, 
size
, 
Êags
)

165 
id
;

166 
buf„r_t
 
§c
;

168 
	`GdImageBuf„rInô
(&
§c
, 
buf„r
, 
size
);

169 
id
 = 
	`GdDecodeImage
(
psd
, &
§c
, 
NULL
, 
Êags
);

171 i‡(
id
) {

172 
	`GdDøwImageToFô
(
psd
, 
x
, 
y
, 
width
, 
height
, 
id
);

173 
	`GdFªeImage
(
id
);

175 
	}
}

177 #i‡
deföed
(
HAVE_FILEIO
)

192 
	$GdDøwImageFromFûe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
width
,

193 
MWCOORD
 
height
, *
∑th
, 
Êags
)

195 
id
;

197 
id
 = 
	`GdLﬂdImageFromFûe
(
psd
, 
∑th
, 
Êags
);

198 i‡(
id
) {

199 
	`GdDøwImageToFô
(
psd
, 
x
, 
y
, 
width
, 
height
, 
id
);

200 
	`GdFªeImage
(
id
);

202 
	}
}

212 
	$GdLﬂdImageFromFûe
(
PSD
 
psd
, *
∑th
, 
Êags
)

214 
fd
, 
id
;

215 
°©
 
s
;

216 *
buf„r
 = 0;

217 
buf„r_t
 
§c
;

219 
fd
 = 
	`›í
(
∑th
, 
O_RDONLY
);

220 i‡(
fd
 < 0 || 
	`f°©
(fd, &
s
) < 0) {

221 
	`EPRINTF
("GdLﬂdImageFromFûe: c™'à›í image: %s\n", 
∑th
);

225 #i‡
HAVE_MMAP


226 
buf„r
 = 
	`mm≠
(0, 
s
.
°_size
, 
PROT_READ
, 
MAP_PRIVATE
, 
fd
, 0);

227 i‡(!
buf„r
) {

228 
	`EPRINTF
("GdLﬂdImageFromFûe: Couldn'àm≠ imagê%s\n", 
∑th
);

229 
	`˛o£
(
fd
);

233 
buf„r
 = 
	`mÆloc
(
s
.
°_size
);

234 i‡(!
buf„r
) {

235 
	`EPRINTF
("GdLﬂdImageFromFûe: Couldn'àmÆlo¯imagê%s\n", 
∑th
);

236 
	`˛o£
(
fd
);

240 i‡(
	`ªad
(
fd
, 
buf„r
, 
s
.
°_size
) != s.st_size) {

241 
	`EPRINTF
("GdLﬂdImageFromFûe: Couldn'àlﬂd imagê%s\n", 
∑th
);

242 
	`˛o£
(
fd
);

247 
	`GdImageBuf„rInô
(&
§c
, 
buf„r
, 
s
.
°_size
);

248 
id
 = 
	`GdDecodeImage
(
psd
, &
§c
, 
∑th
, 
Êags
);

250 #i‡
HAVE_MMAP


251 
	`munm≠
(
buf„r
, 
s
.
°_size
);

253 
	`‰ì
(
buf„r
);

255 
	`˛o£
(
fd
);

256  
id
;

257 
	}
}

269 
	$GdDecodeImage
(
PSD
 
psd
, 
buf„r_t
 * 
§c
, *
∑th
, 
Êags
)

271 
lﬂdOK
 = 0;

272 
PMWIMAGEHDR
 
pimage
;

273 
PIMAGEITEM
 
pIãm
;

276 
pimage
 = (
PMWIMAGEHDR
)
	`mÆloc
((
MWIMAGEHDR
));

277 if(!
pimage
) {

280 
pimage
->
imagebôs
 = 
NULL
;

281 
pimage
->
∑Àâe
 = 
NULL
;

282 
pimage
->
å™scﬁ‹
 = -1L;

284 #i‡
	`deföed
(
HAVE_TIFF_SUPPORT
)

286 i‡(
∑th
)

287 
lﬂdOK
 = 
	`GdDecodeTIFF
(
∑th
, 
pimage
);

289 #i‡
	`deföed
(
HAVE_BMP_SUPPORT
)

290 i‡(
lﬂdOK
 == 0)

291 
lﬂdOK
 = 
	`GdDecodeBMP
(
§c
, 
pimage
);

293 #i‡
	`deföed
(
HAVE_GIF_SUPPORT
)

294 i‡(
lﬂdOK
 == 0)

295 
lﬂdOK
 = 
	`GdDecodeGIF
(
§c
, 
pimage
);

297 #i‡
	`deföed
(
HAVE_JPEG_SUPPORT
)

298 i‡(
lﬂdOK
 == 0)

299 
lﬂdOK
 = 
	`GdDecodeJPEG
(
§c
, 
pimage
, 
psd
, 
Êags
);

301 #i‡
	`deföed
(
HAVE_PNG_SUPPORT
)

302 i‡(
lﬂdOK
 == 0)

303 
lﬂdOK
 = 
	`GdDecodePNG
(
§c
, 
pimage
);

305 #i‡
	`deföed
(
HAVE_PNM_SUPPORT
)

306 if(
lﬂdOK
 == 0)

307 
lﬂdOK
 = 
	`GdDecodePNM
(
§c
, 
pimage
);

309 #i‡
	`deföed
(
HAVE_XPM_SUPPORT
)

310 i‡(
lﬂdOK
 == 0)

311 
lﬂdOK
 = 
	`GdDecodeXPM
(
§c
, 
pimage
, 
psd
);

314 i‡(
lﬂdOK
 == 0) {

315 
	`EPRINTF
("GdLoadImageFromFile: unknown imageÅype\n");

316 
îr
;

318 i‡(
lﬂdOK
 != 1)

319 
îr
;

322 
pIãm
 = 
	`GdIãmNew
(
IMAGEITEM
);

323 i‡(!
pIãm
)

324 
îr
;

325 
pIãm
->
id
 = 
√xtimageid
++;

326 
pIãm
->
pimage
 =Öimage;

327 
pIãm
->
psd
 =Ösd;

328 
	`GdLi°Add
(&
imagehód
, &
pIãm
->
lök
);

330  
pIãm
->
id
;

332 
îr
:

333 
	`‰ì
(
pimage
);

335 
	}
}

337 
PIMAGEITEM


338 
	$födimage
(
id
)

340 
PMWLIST
 
p
;

341 
PIMAGEITEM
 
pimagñi°
;

343 
p
=
imagehód
.
hód
;Ö;Öı->
√xt
) {

344 
pimagñi°
 = 
	`GdIãmAddr
(
p
, 
IMAGEITEM
, 
lök
);

345 i‡(
pimagñi°
->
id
 == id)

346  
pimagñi°
;

348  
NULL
;

349 
	}
}

364 
	$GdDøwImageToFô
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
width
, MWCOORD 
height
,

365 
id
)

367 
PIMAGEITEM
 
pIãm
;

368 
PMWIMAGEHDR
 
pimage
;

370 
pIãm
 = 
	`födimage
(
id
);

371 i‡(!
pIãm
)

373 
pimage
 = 
pIãm
->pimage;

378 i‡(
height
 < 0)

379 
height
 = 
pimage
->height;

380 i‡(
width
 < 0)

381 
width
 = 
pimage
->width;

383 i‡(
height
 !
pimage
->heighà|| 
width
 !=Öimage->width) {

384 
MWCLIPRECT
 
rcD°
;

385 
MWIMAGEHDR
 
image2
;

389 
image2
.
width
 = width;

390 
image2
.
height
 = height;

391 
image2
.
∂™es
 = 
pimage
->planes;

392 
image2
.
bµ
 = 
pimage
->bpp;

393 
	`GdCompuãImagePôch
(
pimage
->
bµ
, 
width
, &
image2
.
pôch
,

394 &
image2
.
byã•îpixñ
);

395 
image2
.
com¥essi⁄
 = 
pimage
->compression;

396 
image2
.
∑lsize
 = 
pimage
->palsize;

397 
image2
.
∑Àâe
 = 
pimage
->palette;

398 
image2
.
å™scﬁ‹
 = 
pimage
->transcolor;

399 if–(
image2
.
imagebôs
 = 
	`mÆloc
(image2.
pôch
*
height
)Ë=
NULL
) {

400 
	`EPRINTF
("GdDrawImageToFit:Ço memory\n");

404 
rcD°
.
x
 = 0;

405 
rcD°
.
y
 = 0;

406 
rcD°
.
width
 = width;

407 
rcD°
.
height
 = height;

410 
	`GdSåëchImage
(
pimage
, 
NULL
, &
image2
, &
rcD°
);

411 
	`GdDøwImage
(
psd
, 
x
, 
y
, &
image2
);

412 
	`‰ì
(
image2
.
imagebôs
);

414 
	`GdDøwImage
(
psd
, 
x
, 
y
, 
pimage
);

415 
	}
}

423 
	$GdFªeImage
(
id
)

425 
PIMAGEITEM
 
pIãm
;

426 
PMWIMAGEHDR
 
pimage
;

428 
pIãm
 = 
	`födimage
(
id
);

429 i‡(
pIãm
) {

430 
	`GdLi°Remove
(&
imagehód
, &
pIãm
->
lök
);

431 
pimage
 = 
pIãm
->pimage;

434 if(
pimage
->
imagebôs
)

435 
	`‰ì
(
pimage
->
imagebôs
);

436 if(
pimage
->
∑Àâe
)

437 
	`‰ì
(
pimage
->
∑Àâe
);

439 
	`‰ì
(
pimage
);

440 
	`GdIãmFªe
(
pIãm
);

442 
	}
}

451 
MWBOOL


452 
	$GdGëImageInfo
(
id
, 
PMWIMAGEINFO
 
pii
)

454 
PMWIMAGEHDR
 
pimage
;

455 
PIMAGEITEM
 
pIãm
;

456 
i
;

458 
pIãm
 = 
	`födimage
(
id
);

459 i‡(!
pIãm
) {

460 
	`mem£t
(
pii
, 0, (*pii));

461  
FALSE
;

463 
pimage
 = 
pIãm
->pimage;

464 
pii
->
id
 = id;

465 
pii
->
width
 = 
pimage
->width;

466 
pii
->
height
 = 
pimage
->height;

467 
pii
->
∂™es
 = 
pimage
->planes;

468 
pii
->
bµ
 = 
pimage
->bpp;

469 
pii
->
pôch
 = 
pimage
->pitch;

470 
pii
->
byã•îpixñ
 = 
pimage
->bytesperpixel;

471 
pii
->
com¥essi⁄
 = 
pimage
->compression;

472 
pii
->
∑lsize
 = 
pimage
->palsize;

473 i‡(
pimage
->
∑lsize
) {

474 i‡(
pimage
->
∑Àâe
) {

475 
i
=0; i<
pimage
->
∑lsize
; ++i)

476 
pii
->
∑Àâe
[
i
] = 
pimage
->palette[i];

479 
	`GdGëPÆëã
(
pIãm
->
psd
, 0, 
pimage
->
∑lsize
,

480 
pii
->
∑Àâe
);

483  
TRUE
;

484 
	}
}

486 
	#PIX2BYTES
(
n
Ë((“)+7)/8)

	)

492 
	$GdCompuãImagePôch
(
bµ
, 
width
, *
pôch
, *
byã•îpixñ
)

494 
löesize
;

495 
byã•p
 = 1;

497 if(
bµ
 == 1)

498 
löesize
 = 
	`PIX2BYTES
(
width
);

499 if(
bµ
 <= 4)

500 
löesize
 = 
	`PIX2BYTES
(
width
<<2);

501 if(
bµ
 <= 8)

502 
löesize
 = 
width
;

503 if(
bµ
 <= 16) {

504 
löesize
 = 
width
 * 2;

505 
byã•p
 = 2;

506 } if(
bµ
 <= 24) {

507 
löesize
 = 
width
 * 3;

508 
byã•p
 = 3;

510 
löesize
 = 
width
 * 4;

511 
byã•p
 = 4;

515 *
pôch
 = (
löesize
 + 3) & ~3;

516 *
byã•îpixñ
 = 
byã•p
;

517 
	}
}

520 
	$¥öt_image
(
PMWIMAGEHDR
 
image
)

522 
i
;

524 
	`DPRINTF
("Image:\n\n");

525 
	`DPRINTF
("height: %d\n", 
image
->
height
);

526 
	`DPRINTF
("width: %d\n", 
image
->
width
);

527 
	`DPRINTF
("∂™es: %d\n", 
image
->
∂™es
);

528 
	`DPRINTF
("bµ: %d\n", 
image
->
bµ
);

529 
	`DPRINTF
("com¥essi⁄: %d\n", 
image
->
com¥essi⁄
);

530 
	`DPRINTF
("∑lsize: %d\n", 
image
->
∑lsize
);

532 
i
=0;i<
image
->
∑lsize
;i++)

533 
	`DPRINTF
("∑Àâe: %d, %d, %d\n", 
image
->
∑Àâe
[
i
].
r
,

534 
image
->
∑Àâe
[
i
].
g
, image->∑Àâe[i].
b
);

536 
i
=0;i<(
image
->
width
*image->
height
);i++)

537 
	`DPRINTF
("imagebôs: %d\n", 
image
->
imagebôs
[
i
]);

538 
	}
}

	@engine/devimage_stretch.c

29 
	~<°dio.h
>

30 
	~<°dlib.h
>

31 
	~<°rög.h
>

32 
	~<uni°d.h
>

33 
	~<f˙é.h
>

34 
	~<˘y≥.h
>

35 
	~<sys/ty≥s.h
>

36 
	~<sys/°©.h
>

37 
	~"devi˚.h
"

38 
	~"sw≠.h
"

40 #i‡
MW_FEATURE_IMAGES


42 
	#DEFINE_COPY_ROW
(
«me
, 
ty≥
) \

43 
	`«me
(
ty≥
 *
§c
, 
§c_w
,Åy≥ *
d°
, 
d°_w
) \

45 
i
; \

46 
pos
, 
öc
; \

47 
ty≥
 
pixñ
 = 0; \

49 
pos
 = 0x10000; \

50 
öc
 = (
§c_w
 << 16Ë/ 
d°_w
; \

51  
i
=
d°_w
; i>0; --i ) { \

52  
pos
 >= 0x10000L ) { \

53 
pixñ
 = *
§c
++; \

54 
pos
 -= 0x10000L; \

56 *
d°
++ = 
pixñ
; \

57 
pos
 +
öc
; \

59 }

	)

61 
	$DEFINE_COPY_ROW
(
c›y_row1
, )

62 
	$DEFINE_COPY_ROW
(
c›y_row2
, )

63 
	$DEFINE_COPY_ROW
(
c›y_row4
, )

65 
	$c›y_row3
(*
§c
, 
§c_w
, *
d°
,

66 
d°_w
)

68 
i
;

69 
pos
, 
öc
;

70 
r
 = 0;

71 
g
 = 0;

72 
b
 = 0;

74 
pos
 = 0x10000;

75 
öc
 = (
§c_w
 << 16Ë/ 
d°_w
;

76  
i
=
d°_w
; i>0; --i ) {

77  
pos
 >= 0x10000L ) {

78 
b
 = *
§c
++;

79 
g
 = *
§c
++;

80 
r
 = *
§c
++;

81 
pos
 -= 0x10000L;

83 *
d°
++ = 
b
;

84 *
d°
++ = 
g
;

85 *
d°
++ = 
r
;

86 
pos
 +
öc
;

88 
	}
}

99 
	$GdSåëchImage
(
PMWIMAGEHDR
 
§c
, 
MWCLIPRECT
 *
§¸e˘
, PMWIMAGEHDR 
d°
,

100 
MWCLIPRECT
 *
d°ª˘
)

102 
pos
, 
öc
;

103 
byã•îpixñ
;

104 
d°_maxrow
;

105 
§c_row
, 
d°_row
;

106 
MWUCHAR
 *
§˝
 = 0;

107 
MWUCHAR
 *
d°p
;

108 
MWCLIPRECT
 
fuŒ_§c
;

109 
MWCLIPRECT
 
fuŒ_d°
;

111 i‡–
§c
->
byã•îpixñ
 !
d°
->bytesperpixel ) {

112 
	`EPRINTF
("GdStretchImage: bytesperpixel mismatch\n");

117 i‡–
§¸e˘
 ) {

118 i‡–(
§¸e˘
->
x
 < 0Ë|| (§¸e˘->
y
 < 0) ||

119 ((
§¸e˘
->
x
+§¸e˘->
width
Ë> 
§c
->width) ||

120 ((
§¸e˘
->
y
+§¸e˘->
height
Ë> 
§c
->height) ) {

121 
	`EPRINTF
("GdStretchImage: invalid sourceÑect\n");

125 
fuŒ_§c
.
x
 = 0;

126 
fuŒ_§c
.
y
 = 0;

127 
fuŒ_§c
.
width
 = 
§c
->width;

128 
fuŒ_§c
.
height
 = 
§c
->height;

129 
§¸e˘
 = &
fuŒ_§c
;

131 i‡–
d°ª˘
 ) {

133 i‡(!
d°ª˘
->
width
 || !d°ª˘->
height
)

135 i‡–(
d°ª˘
->
x
 < 0Ë|| (d°ª˘->
y
 < 0) ||

136 ((
d°ª˘
->
x
+d°ª˘->
width
Ë> 
d°
->width) ||

137 ((
d°ª˘
->
y
+d°ª˘->
height
Ë> 
d°
->height) ) {

138 
	`EPRINTF
("GdStretchImage: invalid destÑect\n");

142 
fuŒ_d°
.
x
 = 0;

143 
fuŒ_d°
.
y
 = 0;

144 
fuŒ_d°
.
width
 = 
d°
->width;

145 
fuŒ_d°
.
height
 = 
d°
->height;

146 
d°ª˘
 = &
fuŒ_d°
;

150 
pos
 = 0x10000;

151 
öc
 = (
§¸e˘
->
height
 << 16Ë/ 
d°ª˘
->height;

152 
§c_row
 = 
§¸e˘
->
y
;

153 
d°_row
 = 
d°ª˘
->
y
;

154 
byã•îpixñ
 = 
d°
->bytesperpixel;

157  
d°_maxrow
 = 
d°_row
+
d°ª˘
->
height
; dst_row<dst_maxrow;

158 ++
d°_row
 ) {

159 
d°p
 = (
MWUCHAR
 *)
d°
->
imagebôs
 + (
d°_row
*d°->
pôch
)

160 + (
d°ª˘
->
x
*
byã•îpixñ
);

161  
pos
 >= 0x10000L ) {

162 
§˝
 = (
MWUCHAR
 *)
§c
->
imagebôs
 + (
§c_row
*§c->
pôch
)

163 + (
§¸e˘
->
x
*
byã•îpixñ
);

164 ++
§c_row
;

165 
pos
 -= 0x10000L;

168 
byã•îpixñ
) {

170 
	`c›y_row1
(
§˝
, 
§¸e˘
->
width
, 
d°p
, 
d°ª˘
->width);

173 
	`c›y_row2
((*)
§˝
, 
§¸e˘
->
width
,

174 (*)
d°p
, 
d°ª˘
->
width
);

177 
	`c›y_row3
(
§˝
, 
§¸e˘
->
width
, 
d°p
, 
d°ª˘
->width);

180 
	`c›y_row4
((*)
§˝
, 
§¸e˘
->
width
,

181 (*)
d°p
, 
d°ª˘
->
width
);

185 
pos
 +
öc
;

187 
	}
}

	@engine/devkbd.c

6 
	~"devi˚.h
"

14 
	$GdO≥nKeybﬂrd
()

16 
fd
;

18 i‡((
fd
 = 
kbddev
.
	`O≥n
(&kbddev)) == -1)

22  
fd
;

23 
	}
}

25 #ifde‡
MW_FEATURE_TWO_KEYBOARDS


32 
	$GdO≥nKeybﬂrd2
()

34  
kbddev2
.
	`O≥n
(&kbddev2);

35 
	}
}

42 
	$GdClo£Keybﬂrd
()

44 
kbddev
.
	`Clo£
();

45 #ifde‡
MW_FEATURE_TWO_KEYBOARDS


46 
kbddev2
.
	`Clo£
();

48 
	}
}

57 
	$GdGëModifõrInfo
(
MWKEYMOD
 *
modifõrs
, MWKEYMOD *
curmodifõrs
)

59 #ifde‡
MW_FEATURE_TWO_KEYBOARDS


60 
MWKEYMOD
 
modifõrs2
;

61 
MWKEYMOD
 
curmodifõrs2
;

63 
kbddev
.
	`GëModifõrInfo
(
modifõrs
, 
curmodifõrs
);

64 #ifde‡
MW_FEATURE_TWO_KEYBOARDS


65 
kbddev2
.
	`GëModifõrInfo
(&
modifõrs2
, &
curmodifõrs2
);

66 i‡(
modifõrs
)

67 *
modifõrs
 |
modifõrs2
;

68 i‡(
curmodifõrs
)

69 *
curmodifõrs
 |
curmodifõrs2
;

71 
	}
}

86 
	$GdRódKeybﬂrd
(
MWKEY
 *
buf
, 
MWKEYMOD
 *
modifõrs
, 
MWSCANCODE
 *
sˇncode
)

88 
ªsu…
 = 
kbddev
.
	`Ród
(
buf
, 
modifõrs
, 
sˇncode
);

89 #ifde‡
MW_FEATURE_TWO_KEYBOARDS


90 i‡(
ªsu…
 == 0)

91 
ªsu…
 = 
kbddev2
.
	`Ród
(
buf
, 
modifõrs
, 
sˇncode
);

93  
ªsu…
;

94 
	}
}

	@engine/devlist.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~"devi˚.h
"

12 
	$GdIãmAŒoc
(
size
)

14  (*)
	`ˇŒoc
(
size
, 1);

15 
	}
}

19 
	$GdLi°Add
(
PMWLISTHEAD
 
pHód
,
PMWLIST
 
pIãm
)

21 if–
pHód
->
èû
) {

22 
pIãm
->
¥ev
 = 
pHód
->
èû
;

23 
pHód
->
èû
->
√xt
 = 
pIãm
;

25 
pIãm
->
¥ev
 = 
NULL
;

26 
pIãm
->
√xt
 = 
NULL
;

27 
pHód
->
èû
 = 
pIãm
;

28 if–!
pHód
->
hód
)

29 
pHód
->
hód
 = 
pIãm
;

30 
	}
}

34 
	$GdLi°In£π
(
PMWLISTHEAD
 
pHód
,
PMWLIST
 
pIãm
)

36 if–
pHód
->
hód
) {

37 
pIãm
->
√xt
 = 
pHód
->
hód
;

38 
pHód
->
hód
->
¥ev
 = 
pIãm
;

40 
pIãm
->
√xt
 = 
NULL
;

41 
pIãm
->
¥ev
 = 
NULL
;

42 
pHód
->
hód
 = 
pIãm
;

43 if–!
pHód
->
hód
)

44 
pHód
->
hód
 = 
pIãm
;

45 
	}
}

48 
	$GdLi°Remove
(
PMWLISTHEAD
 
pHód
,
PMWLIST
 
pIãm
)

50 if–
pIãm
->
√xt
)

51 
pIãm
->
√xt
->
¥ev
 =ÖItem->prev;

52 if–
pIãm
->
¥ev
)

53 
pIãm
->
¥ev
->
√xt
 =ÖItem->next;

54 if–
pHód
->
hód
 =
pIãm
)

55 
pHód
->
hód
 = 
pIãm
->
√xt
;

56 if–
pHód
->
èû
 =
pIãm
)

57 
pHód
->
èû
 = 
pIãm
->
¥ev
;

58 
pIãm
->
√xt
 =ÖIãm->
¥ev
 = 
NULL
;

59 
	}
}

	@engine/devmouse.c

16 
	~<°rög.h
>

17 
	~"devi˚.h
"

26 #i‚de‡
FLIP_MOUSE_IN_PORTRAIT_MODE


27 
	#FLIP_MOUSE_IN_PORTRAIT_MODE
 1

	)

30 
MWCOORD
 
	gxpos
;

31 
MWCOORD
 
	gypos
;

32 
MWCOORD
 
	gmöx
;

33 
MWCOORD
 
	gmaxx
;

34 
MWCOORD
 
	gmöy
;

35 
MWCOORD
 
	gmaxy
;

36 
	gsˇÀ
;

37 
	gthªsh
;

38 
	gbuâ⁄s
;

39 
MWBOOL
 
	gch™ged
;

41 
MWCOORD
 
	gcurmöx
;

42 
MWCOORD
 
	gcurmöy
;

43 
MWCOORD
 
	gcurmaxx
;

44 
MWCOORD
 
	gcurmaxy
;

45 
	gcurvisibÀ
;

46 
MWBOOL
 
	gcu∫ìd§e°‹e
;

47 
MWCOORD
 
	gcurßvx
;

48 
MWCOORD
 
	gcurßvy
;

49 
MWCOORD
 
	gcurßvx2
;

50 
MWCOORD
 
	gcurßvy2
;

51 
MWPIXELVAL
 
	gcurfg
;

52 
MWPIXELVAL
 
	gcurbg
;

53 
MWPIXELVAL
 
	gcurßvbôs
[
MWMAX_CURSOR_SIZE
 * MWMAX_CURSOR_SIZE];

54 
MWIMAGEBITS
 
	gcurs‹mask
[
MWMAX_CURSOR_BUFLEN
];

55 
MWIMAGEBITS
 
	gcurs‹cﬁ‹
[
MWMAX_CURSOR_BUFLEN
];

57 
gr_mode
;

60 
fûãr_ªœtive
(, , , *, *, , );

61 
fûãr_å™sf‹m
(, *, *);

62 #i‡
FLIP_MOUSE_IN_PORTRAIT_MODE


63 
fûãr_ªÃŸ©e
(, *
xpos
, *
ypos
, 
x
, 
y
);

64 
fûãr_ab§Ÿ©e
(, *
xpos
, *
ypos
);

74 
	$GdO≥nMou£
()

76 
fd
;

79 
buâ⁄s
 = 0;

80 
xpos
 = 0;

81 
ypos
 = 0;

82 
möx
 = 
MIN_MWCOORD
;

83 
möy
 = 
MIN_MWCOORD
;

84 
maxx
 = 
MAX_MWCOORD
;

85 
maxy
 = 
MAX_MWCOORD
;

86 
ch™ged
 = 
TRUE
;

89 
curvisibÀ
 = 0;

90 
cu∫ìd§e°‹e
 = 
FALSE
;

91 
curmöx
 = 
möx
;

92 
curmöy
 = 
möy
;

93 
curmaxx
 = 
curmöx
 + 
MWMAX_CURSOR_SIZE
 - 1;

94 
curmaxy
 = 
curmöy
 + 
MWMAX_CURSOR_SIZE
 - 1;

96 i‡((
fd
 = 
mou£dev
.
	`O≥n
(&mousedev)) == -1)

100 
mou£dev
.
	`GëDeÁu…Ac˚l
(&
sˇÀ
, &
thªsh
);

103 
mou£dev
.
Êags
 &~
MOUSE_RAW
;

106 if(
fd
 == -2)

107 
	`GdHideCurs‹
(&
s¸dev
);

109  
fd
;

110 
	}
}

117 
	$GdClo£Mou£
()

119 
mou£dev
.
	`Clo£
();

120 
	}
}

129 
	$GdGëBuâ⁄Info
(*
buâ⁄s
)

131 *
buâ⁄s
 = 
mou£dev
.
	`GëBuâ⁄Info
();

132 
	}
}

143 
	$GdRe°ri˘Mou£
(
MWCOORD
 
√wmöx
, MWCOORD 
√wmöy
, MWCOORD 
√wmaxx
,

144 
MWCOORD
 
√wmaxy
)

146 
möx
 = 
√wmöx
;

147 
möy
 = 
√wmöy
;

148 
maxx
 = 
√wmaxx
;

149 
maxy
 = 
√wmaxy
;

151 
	`GdMoveMou£
(
xpos
, 
ypos
);

152 
	}
}

168 
	$GdSëAc˚lMou£
(
√wthªsh
, 
√wsˇÀ
)

170 i‡(
√wthªsh
 < 0)

171 
√wthªsh
 = 0;

172 i‡(
√wsˇÀ
 < 0)

173 
√wsˇÀ
 = 0;

174 
thªsh
 = 
√wthªsh
;

175 
sˇÀ
 = 
√wsˇÀ
;

176 
	}
}

186 
	$GdMoveMou£
(
MWCOORD
 
√wx
, MWCOORD 
√wy
)

188 i‡(!(
mou£dev
.
Êags
 & 
MOUSE_RAW
)) {

189 i‡(
√wx
 < 
möx
)

190 
√wx
 = 
möx
;

191 i‡(
√wx
 > 
maxx
)

192 
√wx
 = 
maxx
;

193 i‡(
√wy
 < 
möy
)

194 
√wy
 = 
möy
;

195 i‡(
√wy
 > 
maxy
)

196 
√wy
 = 
maxy
;

199 i‡(
√wx
 =
xpos
 && 
√wy
 =
ypos
)

202 
ch™ged
 = 
TRUE
;

204 
xpos
 = 
√wx
;

205 
ypos
 = 
√wy
;

206 
	}
}

224 
	$GdRódMou£
(
MWCOORD
 *
px
, MWCOORD *
py
, *
pb
)

226 
MWCOORD
 
x
, 
y
, 
z
;

227 
√wbuâ⁄s
;

228 
°©us
;

229 
MWCOORD
 
dx
, 
dy
;

231 *
px
 = 
xpos
;

232 *
py
 = 
ypos
;

233 *
pb
 = 
buâ⁄s
;

235 i‡(
ch™ged
) {

236 
ch™ged
 = 
FALSE
;

241 
°©us
 = 
mou£dev
.
	`Ród
(&
x
, &
y
, &
z
, &
√wbuâ⁄s
);

242 i‡(
°©us
 < 0)

246 i‡(
°©us
 == 0)

250 i‡(
°©us
 == 1) {

251 
rx
, 
ry
;

252 
	`fûãr_ªœtive
(
°©us
, 
thªsh
, 
sˇÀ
, &
rx
, &
ry
, 
x
, 
y
);

253 #i‡
FLIP_MOUSE_IN_PORTRAIT_MODE


254 
dx
 = 
xpos
;

255 
dy
 = 
ypos
;

256 
	`fûãr_ªÃŸ©e
(
°©us
, &
dx
, &
dy
, 
x
, 
y
);

258 
dx
 = 
xpos
 + 
rx
;

259 
dy
 = 
ypos
 + 
ry
;

262 
dx
 = 
x
;

263 
dy
 = 
y
;

266 i‡(
mou£dev
.
Êags
 & 
MOUSE_TRANSFORM
) {

267 i‡(!
	`fûãr_å™sf‹m
(
°©us
, &
dx
, &
dy
))

270 #i‡
FLIP_MOUSE_IN_PORTRAIT_MODE


271 i‡(!(
mou£dev
.
Êags
 & 
MOUSE_RAW
))

272 
	`fûãr_ab§Ÿ©e
(
°©us
, &
dx
, &
dy
);

282 i‡(
buâ⁄s
 !
√wbuâ⁄s
) {

283 
ch™ged
 = 
TRUE
;

284 
buâ⁄s
 = 
√wbuâ⁄s
;

288 i‡(
°©us
 != 3)

289 
	`GdMoveMou£
(
dx
, 
dy
);

292 i‡(!
ch™ged
)

296 
ch™ged
 = 
FALSE
;

297 *
px
 = 
xpos
;

298 *
py
 = 
ypos
;

299 *
pb
 = 
buâ⁄s
;

302 
	}
}

311 
	$GdMoveCurs‹
(
MWCOORD
 
√wx
, MWCOORD 
√wy
)

313 
MWCOORD
 
shi·x
;

314 
MWCOORD
 
shi·y
;

316 
shi·x
 = 
√wx
 - 
curmöx
;

317 
shi·y
 = 
√wy
 - 
curmöy
;

318 if(
shi·x
 =0 && 
shi·y
 == 0)

320 
curmöx
 +
shi·x
;

321 
curmaxx
 +
shi·x
;

322 
curmöy
 +
shi·y
;

323 
curmaxy
 +
shi·y
;

326 
	`GdHideCurs‹
(&
s¸dev
);

329 
	`GdShowCurs‹
(&
s¸dev
);

330 
	}
}

339 
MWBOOL


340 
	$GdGëCurs‹Pos
(
MWCOORD
 *
px
, MWCOORD *
py
)

342 *
px
 = 
xpos
;

343 *
py
 = 
ypos
;

344  
curvisibÀ
 > 0;

345 
	}
}

353 
	$GdSëCurs‹
(
PMWCURSOR
 
pcurs‹
)

355 
byãs
;

357 
	`GdHideCurs‹
(&
s¸dev
);

358 
curmaxx
 = 
curmöx
 + 
pcurs‹
->
width
 - 1;

359 
curmaxy
 = 
curmöy
 + 
pcurs‹
->
height
 - 1;

361 
curfg
 = 
	`GdFödCﬁ‹
(&
s¸dev
, 
pcurs‹
->
fgcﬁ‹
);

362 
curbg
 = 
	`GdFödCﬁ‹
(&
s¸dev
, 
pcurs‹
->
bgcﬁ‹
);

364 
byãs
 = 
	`MWIMAGE_SIZE
(
pcurs‹
->
width
,Öcurs‹->
height
Ë* (
MWIMAGEBITS
);

366 
	`mem˝y
(
curs‹cﬁ‹
, 
pcurs‹
->
image
, 
byãs
);

367 
	`mem˝y
(
curs‹mask
, 
pcurs‹
->
mask
, 
byãs
);

369 
	`GdShowCurs‹
(&
s¸dev
);

370 
	}
}

381 
	$GdShowCurs‹
(
PSD
 
psd
)

383 
MWCOORD
 
x
;

384 
MWCOORD
 
y
;

385 
MWPIXELVAL
 * 
ßvïå
;

386 
MWIMAGEBITS
 * 
curs‹±r
;

387 
MWIMAGEBITS
 * 
mask±r
;

388 
MWIMAGEBITS
 
curbô
, 
cbôs
 = 0, 
mbôs
 = 0;

389 
MWPIXELVAL
 
ﬁdcﬁ‹
;

390 
MWPIXELVAL
 
√wcﬁ‹
;

391 
ﬁdmode
;

392 
¥evcurs‹
 = 
curvisibÀ
;

394 if(++
curvisibÀ
 != 1)

395  
¥evcurs‹
;

396 
ﬁdmode
 = 
gr_mode
;

397 
gr_mode
 = 
MWMODE_COPY
;

399 
ßvïå
 = 
curßvbôs
;

400 
curßvx
 = 
curmöx
;

401 
curßvy
 = 
curmöy
;

402 
curßvx2
 = 
curmaxx
;

403 
curßvy2
 = 
curmaxy
;

404 
curs‹±r
 = 
curs‹cﬁ‹
;

405 
mask±r
 = 
curs‹mask
;

410 
curbô
 = 0;

411 
y
 = 
curmöy
; y <
curmaxy
; y++) {

412 i‡(
curbô
 !
MWIMAGE_FIRSTBIT
) {

413 
cbôs
 = *
curs‹±r
++;

414 
mbôs
 = *
mask±r
++;

415 
curbô
 = 
MWIMAGE_FIRSTBIT
;

417 
x
 = 
curmöx
; x <
curmaxx
; x++) {

418 if(
x
 >0 && x < 
psd
->
xvúåes
 &&

419 
y
 >0 && y < 
psd
->
yvúåes
) {

420 
ﬁdcﬁ‹
 = 
psd
->
	`RódPixñ
’sd, 
x
, 
y
);

421 i‡(
curbô
 & 
mbôs
) {

422 
√wcﬁ‹
 = (
curbô
&
cbôs
)? 
curbg
: 
curfg
;

423 i‡(
ﬁdcﬁ‹
 !
√wcﬁ‹
)

424 
psd
->
	`DøwPixñ
’sd, 
x
, 
y
, 
√wcﬁ‹
);

426 *
ßvïå
++ = 
ﬁdcﬁ‹
;

428 
curbô
 = 
	`MWIMAGE_NEXTBIT
(curbit);

429 i‡(!
curbô
) {

430 
cbôs
 = *
curs‹±r
++;

431 
mbôs
 = *
mask±r
++;

432 
curbô
 = 
MWIMAGE_FIRSTBIT
;

437 
gr_mode
 = 
ﬁdmode
;

438  
¥evcurs‹
;

439 
	}
}

448 
	$GdHideCurs‹
(
PSD
 
psd
)

450 
MWPIXELVAL
 * 
ßvïå
;

451 
MWCOORD
 
x
, 
y
;

452 
ﬁdmode
;

453 
¥evcurs‹
 = 
curvisibÀ
;

455 if(
curvisibÀ
-- <= 0)

456  
¥evcurs‹
;

457 
ﬁdmode
 = 
gr_mode
;

458 
gr_mode
 = 
MWMODE_COPY
;

460 
ßvïå
 = 
curßvbôs
;

461 
y
 = 
curßvy
; y <
curßvy2
; y++) {

462 
x
 = 
curßvx
; x <
curßvx2
; x++) {

463 if(
x
 >0 && x < 
psd
->
xvúåes
 &&

464 
y
 >0 && y < 
psd
->
yvúåes
) {

465 
psd
->
	`DøwPixñ
’sd, 
x
, 
y
, *
ßvïå
++);

469 
gr_mode
 = 
ﬁdmode
;

470  
¥evcurs‹
;

471 
	}
}

487 
	$GdCheckCurs‹
(
PSD
 
psd
,
MWCOORD
 
x1
,MWCOORD 
y1
,MWCOORD 
x2
,MWCOORD 
y2
)

489 
MWCOORD
 
ãmp
;

491 i‡(
curvisibÀ
 <0 || (
psd
->
Êags
 & 
PSF_SCREEN
) == 0)

494 i‡(
x1
 > 
x2
) {

495 
ãmp
 = 
x1
;

496 
x1
 = 
x2
;

497 
x2
 = 
ãmp
;

499 i‡(
y1
 > 
y2
) {

500 
ãmp
 = 
y1
;

501 
y1
 = 
y2
;

502 
y2
 = 
ãmp
;

504 i‡(
x1
 > 
curmaxx
 || 
x2
 < 
curmöx
 || 
y1
 > 
curmaxy
 || 
y2
 < 
curmöy
)

507 
	`GdHideCurs‹
(
psd
);

508 
cu∫ìd§e°‹e
 = 
TRUE
;

509 
	}
}

519 
	$GdFixCurs‹
(
PSD
 
psd
)

521 i‡(
cu∫ìd§e°‹e
 && (
psd
->
Êags
 & 
PSF_SCREEN
)) {

522 
	`GdShowCurs‹
(
psd
);

523 
cu∫ìd§e°‹e
 = 
FALSE
;

525 
	}
}

528 
	#JITTER_SHIFT_BITS
 2

	)

529 
	#JITTER_DEPTH
 (1 << (
JITTER_SHIFT_BITS
))

	)

531 
MWTRANSFORM
 
	gg_å™s
;

534 
	mx
;

535 
	my
;

536 
	mcou¡
;

537 } 
	gjôãr
 = { 0, 0, 0};

541 
	$GdSëTønsf‹m
(
MWTRANSFORM
 *
å™s
)

543 i‡(!(
mou£dev
.
Êags
 & 
MOUSE_TRANSFORM
))

546 i‡(
å™s
) {

547 
g_å™s
 = *
å™s
;

549 
mou£dev
.
Êags
 &~
MOUSE_RAW
;

551 
mou£dev
.
Êags
 |
MOUSE_RAW
;

552 
	}
}

556 
	$fûãr_ªœtive
(
°©e
, 
thªsh
, 
sˇÀ
, *
xpos
, *
ypos
, 
x
,

557 
y
)

559 
sign
 = 1;

561 i‡(
°©e
 != 1)

564 i‡(
x
 < 0) {

565 
sign
 = -1;

566 
x
 = -x;

569 i‡(
x
 > 
thªsh
)

570 
x
 = 
thªsh
 + (x -ÅhªshË* 
sˇÀ
;

571 
x
 *
sign
;

573 
sign
 = 1;

575 i‡(
y
 < 0) {

576 
sign
 = -1;

577 
y
 = -y;

580 i‡(
y
 > 
thªsh
)

581 
y
 = 
thªsh
 + (y -ÅhªshË* 
sˇÀ
;

582 
y
 *
sign
;

584 *
xpos
 = 
x
;

585 *
ypos
 = 
y
;

587 
	}
}

589 #i‡
FLIP_MOUSE_IN_PORTRAIT_MODE


591 
	$fûãr_ªÃŸ©e
(
°©e
, *
xpos
, *
ypos
, 
x
, 
y
)

593 i‡(
°©e
 == 3)

596 
s¸dev
.
p‹åaô
) {

597 
MWPORTRAIT_RIGHT
:

598 *
xpos
 +
y
;

599 *
ypos
 -
x
;

602 
MWPORTRAIT_LEFT
:

603 *
xpos
 -
y
;

604 *
ypos
 +
x
;

607 
MWPORTRAIT_DOWN
:

608 *
xpos
 -
x
;

609 *
ypos
 -
y
;

613 *
xpos
 +
x
;

614 *
ypos
 +
y
;

618 
	}
}

621 
	$fûãr_ab§Ÿ©e
(
°©e
, *
xpos
, *
ypos
)

623 
x
 = *
xpos
;

624 
y
 = *
ypos
;

626 i‡(
°©e
 == 3)

629 
s¸dev
.
p‹åaô
) {

630 
MWPORTRAIT_RIGHT
:

631 *
xpos
 = 
y
;

632 *
ypos
 = 
s¸dev
.
xªs
 - 
x
 - 1;

635 
MWPORTRAIT_LEFT
:

636 *
xpos
 = 
s¸dev
.
yªs
 - 
y
 - 1;

637 *
ypos
 = 
x
;

640 
MWPORTRAIT_DOWN
:

641 *
xpos
 = 
x
;

642 *
ypos
 = 
s¸dev
.
yªs
 - 
y
 - 1;

646 *
xpos
 = 
x
;

647 *
ypos
 = 
y
;

651 
	}
}

655 
	$fûãr_å™sf‹m
(
°©e
, *
xpos
, *
ypos
)

658 i‡(
°©e
 == 3) {

659 
jôãr
.
cou¡
 = jôãr.
x
 = jôãr.
y
 = 0;

661 } i‡(
°©e
 == 1)

664 i‡(
jôãr
.
cou¡
 =
JITTER_DEPTH
) {

665 
jôãr
.
x
 = jôãr.x >> 
JITTER_SHIFT_BITS
;

666 
jôãr
.
y
 = jôãr.y >> 
JITTER_SHIFT_BITS
;

669 i‡(
g_å™s
.
s
 && !(
mou£dev
.
Êags
 & 
MOUSE_RAW
)) {

670 *
xpos
 = ((
g_å™s
.
a
 * 
jôãr
.
x
 +

671 
g_å™s
.
b
 * 
jôãr
.
y
 +

672 
g_å™s
.
c
Ë/ g_å™s.
s
);

673 *
ypos
 = ((
g_å™s
.
d
 * 
jôãr
.
x
 +

674 
g_å™s
.
e
 * 
jôãr
.
y
 +

675 
g_å™s
.
f
Ë/ g_å™s.
s
);

677 
jôãr
.
cou¡
 = jôãr.
x
 = jôãr.
y
 = 0;

680 *
xpos
 = 
jôãr
.
x
;

681 *
ypos
 = 
jôãr
.
y
;

683 
jôãr
.
cou¡
 = jôãr.
x
 = jôãr.
y
 = 0;

688 
jôãr
.
x
 +*
xpos
;

689 
jôãr
.
y
 +*
ypos
;

690 ++
jôãr
.
cou¡
;

692 
	}
}

	@engine/devopen.c

16 
	~<°dio.h
>

17 
	~<°dlib.h
>

18 
	~<°rög.h
>

19 
	~<as£π.h
>

20 
	~"devi˚.h
"

21 
	~"sw≠.h
"

23 #i‡
MSDOS
 | 
ELKS


24 
	#NOSTDPAL8


	)

33 
	#FIRSTUSERPALENTRY
 24

	)

35 
MWPIXELVAL
 
	ggr_f‹eground
;

36 
MWPIXELVAL
 
	ggr_background
;

37 
MWBOOL
 
	ggr_u£bg
;

38 
	ggr_mode
 = 
MWMODE_COPY
;

39  
MWPALENTRY
 
	ggr_∑Àâe
[256];

40  
	ggr_fú°u£ΩÆíåy
;

41  
	ggr_√xçÆíåy
;

43 
	ggr_dashmask
;

44 
	ggr_dashcou¡
;

46 
	ggr_fûlmode
;

47 
MWSTIPPLE
 
	ggr_°ù∂e
;

48 
MWTILE
 
	ggr_tûe
;

50 
MWPOINT
 
	ggr_ts_off£t
;

52 
	ggr_pixty≥
;

53 
	ggr_ncﬁ‹s
;

60 
PSD


61 
	$GdO≥nS¸ìn
()

63 
PSD
 
psd
;

64 
MWPALENTRY
 * 
°d∑l
;

65 
MWSCREENINFO
 
söfo
;

67 
psd
 = 
s¸dev
.
	`O≥n
(&scrdev);

68 i‡(!
psd
)

69  
NULL
;

70 
	`GdGëS¸ìnInfo
(
psd
, &
söfo
);

71 
gr_pixty≥
 = 
söfo
.
pixty≥
;

72 
gr_ncﬁ‹s
 = 
söfo
.
ncﬁ‹s
;

75 
gr_fú°u£ΩÆíåy
 = ()
psd
->
ncﬁ‹s
;

78 ()
psd
->
ncﬁ‹s
) {

80 #i‡!
	`deföed
(
NOSTDPAL1
)

83 
MWPALENTRY
 
mw°d∑l1
[2];

84 
°d∑l
 = 
mw°d∑l1
;

89 #i‡!
	`deföed
(
NOSTDPAL2
)

92 
MWPALENTRY
 
mw°d∑l2
[4];

93 
°d∑l
 = 
mw°d∑l2
;

98 #i‡!
	`deföed
(
NOSTDPAL4
)

103 
MWPALENTRY
 
mw°d∑l4
[16];

104 
°d∑l
 = 
mw°d∑l4
;

109 #i‡!
	`deföed
(
NOSTDPAL8
)

112 
MWPALENTRY
 
mw°d∑l8
[256];

113 #i‡
xxxALPHABLEND


115 
gr_fú°u£ΩÆíåy
 = 256;

118 
gr_fú°u£ΩÆíåy
 = 
FIRSTUSERPALENTRY
;

120 
°d∑l
 = 
mw°d∑l8
;

127 
gr_fú°u£ΩÆíåy
 = 0;

128 
°d∑l
 = 
NULL
;

132 
	`GdRe£tPÆëã
();

133 
	`GdSëPÆëã
(
psd
, 0, (Ìsd->
ncﬁ‹s
, 
°d∑l
);

134 #i‡
xxxALPHABLEND


136 if(
psd
->
ncﬁ‹s
 == 256)

137 
	`öô_Æpha_lookup
();

140 #i‡!
NOFONTSORCLIPPING


142 
	`GdSëMode
(
MWMODE_COPY
);

143 
	`GdSëFûlMode
(
MWFILL_SOLID
);

145 
	`GdSëF‹egroundCﬁ‹
(
psd
, 
	`MWRGB
(255, 255, 255));

146 
	`GdSëBackgroundCﬁ‹
(
psd
, 
	`MWRGB
(0, 0, 0));

147 
	`GdSëU£Background
(
TRUE
);

149 
	`GdSëF⁄t
(
	`GdCª©eF⁄t
(
psd
, 
NULL
, 0, NULL));

151 
	`GdSëDash
(0, 0);

152 
	`GdSëStù∂eBôm≠
(0,0,0);

154 #i‡
DYNAMICREGIONS


155 
	`GdSëClùRegi⁄
(
psd
,

156 
	`GdAŒocRe˘Regi⁄
(0, 0, 
psd
->
xvúåes
,Ösd->
yvúåes
));

158 
	`GdSëClùRe˘s
(
psd
, 0, 
NULL
);

163 
psd
->
	`FûlRe˘
’sd, 0, 0,Ösd->
xvúåes
-1,Ösd->
yvúåes
-1, 0);

164  
psd
;

165 
	}
}

173 
	$GdClo£S¸ìn
(
PSD
 
psd
)

175 
psd
->
	`Clo£
(psd);

176 
	}
}

186 
	$GdSëP‹åaôMode
(
PSD
 
psd
, 
p‹åaômode
)

189 i‡(
psd
->
SëP‹åaô
)

190 
psd
->
	`SëP‹åaô
’sd, 
p‹åaômode
);

191  
psd
->
p‹åaô
;

192 
	}
}

201 
	$GdGëS¸ìnInfo
(
PSD
 
psd
, 
PMWSCREENINFO
 
psi
)

203 
psd
->
	`GëS¸ìnInfo
’sd, 
psi
);

204 
	`GdGëBuâ⁄Info
(&
psi
->
buâ⁄s
);

205 
	`GdGëModifõrInfo
(&
psi
->
modifõrs
, 
NULL
);

206 
	`GdGëCurs‹Pos
(&
psi
->
xpos
, &psi->
ypos
);

207 
	}
}

214 
	$GdRe£tPÆëã
()

219 
gr_√xçÆíåy
 = 
gr_fú°u£ΩÆíåy
;

220 
	}
}

231 
	$GdSëPÆëã
(
PSD
 
psd
, 
fú°
, 
cou¡
, 
MWPALENTRY
 *
∑Àâe
)

233 
i
;

236 if(
psd
->
pixty≥
 !
MWPF_PALETTE
)

240 if(
fú°
 + 
cou¡
 > ()
psd
->
ncﬁ‹s
)

241 
cou¡
 = ()
psd
->
ncﬁ‹s
 - 
fú°
;

242 if(
cou¡
 >0 && 
fú°
 < ()
psd
->
ncﬁ‹s
) {

243 
psd
->
	`SëPÆëã
’sd, 
fú°
, 
cou¡
, 
∑Àâe
);

246 
i
=0; i<
cou¡
; ++i)

247 
gr_∑Àâe
[
i
+
fú°
] = 
∑Àâe
[i];

249 
	}
}

260 
	$GdGëPÆëã
(
PSD
 
psd
, 
fú°
, 
cou¡
, 
MWPALENTRY
 *
∑Àâe
)

262 
i
;

265 if(
psd
->
pixty≥
 !
MWPF_PALETTE
)

269 if(
fú°
 + 
cou¡
 > ()
psd
->
ncﬁ‹s
)

270 if–(
cou¡
 = ()
psd
->
ncﬁ‹s
 - 
fú°
) <= 0)

273 
i
=0; i<
cou¡
; ++i)

274 *
∑Àâe
++ = 
gr_∑Àâe
[
i
+
fú°
];

276  
cou¡
;

277 
	}
}

286 
MWPIXELVAL


287 
	$GdFödCﬁ‹
(
PSD
 
psd
, 
MWCOLORVAL
 
c
)

292 
psd
->
pixty≥
) {

293 
MWPF_TRUECOLOR8888
:

294  
	`COLOR2PIXEL8888
(
c
);

296 
MWPF_TRUECOLORABGR
:

297  
	`COLOR2PIXELABGR
(
c
);

299 
MWPF_TRUECOLOR0888
:

300 
MWPF_TRUECOLOR888
:

303  
	`COLOR2PIXEL888
(
c
);

305 
MWPF_TRUECOLOR565
:

308  
	`COLOR2PIXEL565
(
c
);

310 
MWPF_TRUECOLOR555
:

313  
	`COLOR2PIXEL555
(
c
);

315 
MWPF_TRUECOLOR332
:

318  
	`COLOR2PIXEL332
(
c
);

324  
	`GdFödNóª°Cﬁ‹
(
gr_∑Àâe
, ()
gr_ncﬁ‹s
, 
c
);

325 
	}
}

335 
MWPIXELVAL


336 
	$GdFödNóª°Cﬁ‹
(
MWPALENTRY
 *
∑l
, 
size
, 
MWCOLORVAL
 
¸
)

338 
MWPALENTRY
 * 
rgb
;

339 
r
, 
g
, 
b
;

340 
R
, 
G
, 
B
;

341 
diff
 = 0x7fffffffL;

342 
sq
;

343 
be°
 = 0;

345 
r
 = 
	`REDVALUE
(
¸
);

346 
g
 = 
	`GREENVALUE
(
¸
);

347 
b
 = 
	`BLUEVALUE
(
¸
);

348 
rgb
=
∑l
; 
diff
 &&Ñgb < &∑l[
size
]; ++rgb) {

349 
R
 = 
rgb
->
r
 -Ñ;

350 
G
 = 
rgb
->
g
 - g;

351 
B
 = 
rgb
->
b
 - b;

354 
sq
 = 
	`abs
(
R
Ë+ábs(
G
Ë+ábs(
B
);

359 
sq
 = ()
R
*R*30*30 + ()
G
*G*59*59 + ()
B
*B*11*11;

362 if(
sq
 < 
diff
) {

363 
be°
 = 
rgb
 - 
∑l
;

364 if((
diff
 = 
sq
) == 0)

365  
be°
;

368  
be°
;

369 
	}
}

378 
MWCOLORVAL


379 
	$GdGëCﬁ‹RGB
(
PSD
 
psd
, 
MWPIXELVAL
 
pixñ
)

381 
psd
->
pixty≥
) {

382 
MWPF_TRUECOLOR8888
:

383  
	`PIXEL8888TOCOLORVAL
(
pixñ
);

385 
MWPF_TRUECOLORABGR
:

386  
	`PIXELABGRTOCOLORVAL
(
pixñ
);

388 
MWPF_TRUECOLOR0888
:

389  
	`PIXEL888TOCOLORVAL
(
pixñ
);

391 
MWPF_TRUECOLOR888
:

392  
	`PIXEL888TOCOLORVAL
(
pixñ
);

394 
MWPF_TRUECOLOR565
:

395  
	`PIXEL565TOCOLORVAL
(
pixñ
);

397 
MWPF_TRUECOLOR555
:

398  
	`PIXEL555TOCOLORVAL
(
pixñ
);

400 
MWPF_TRUECOLOR332
:

401  
	`PIXEL332TOCOLORVAL
(
pixñ
);

403 
MWPF_PALETTE
:

404  
	`GETPALENTRY
(
gr_∑Àâe
, 
pixñ
);

407 
	`as£π
(
FALSE
);

410 
	}
}

412 #i‡!
VXWORKS


413 #i‡
deföed
(
HAVE_FILEIO
)

414 
	~<uni°d.h
>

415 
	~<f˙é.h
>

421 
	#BI_RGB
 0L

	)

422 
	#BI_RLE8
 1L

	)

423 
	#BI_RLE4
 2L

	)

424 
	#BI_BITFIELDS
 3L

	)

426 
	tBYTE
;

427 
	tWORD
;

428 
	tDWORD
;

429 
	tLONG
;

431 #¥agm®
∑ck
(1)

435 
BYTE
 
	mbfTy≥
[2];

436 
DWORD
 
	mbfSize
;

437 
WORD
 
	mbfRe£rved1
;

438 
WORD
 
	mbfRe£rved2
;

439 
DWORD
 
	mbfOffBôs
;

441 
DWORD
 
	mBiSize
;

442 
LONG
 
	mBiWidth
;

443 
LONG
 
	mBiHeight
;

444 
WORD
 
	mBiPœ√s
;

445 
WORD
 
	mBiBôCou¡
;

446 
DWORD
 
	mBiCom¥essi⁄
;

447 
DWORD
 
	mBiSizeImage
;

448 
LONG
 
	mBiX≥lsPîMëî
;

449 
LONG
 
	mBiY≥lsPîMëî
;

450 
DWORD
 
	mBiCÃU£d
;

451 
DWORD
 
	mBiCÃImp‹è¡
;

452 } 
	tBMPHEAD
;

453 #¥agm®
∑ck
()

456 
	#RMASK332
 0xe0

	)

457 
	#GMASK332
 0x1c

	)

458 
	#BMASK332
 0x03

	)

459 
	#RMASK555
 0x7c00

	)

460 
	#GMASK555
 0x03e0

	)

461 
	#BMASK555
 0x001f

	)

462 
	#RMASK565
 0xf800

	)

463 
	#GMASK565
 0x07e0

	)

464 
	#BMASK565
 0x001f

	)

465 
	#RMASK888
 0xff0000

	)

466 
	#GMASK888
 0x00ff00

	)

467 
	#BMASK888
 0x0000ff

	)

469 
	#BMASKBGR
 0xff0000

	)

470 
	#GMASKBGR
 0x00ff00

	)

471 
	#RMASKBGR
 0x0000ff

	)

474 
	$putsw
(
dw
, 
FILE
 *
oÂ
)

477 
	`putc
(()
dw
, 
oÂ
);

478 
dw
 >>= 8;

479 
	`putc
(()
dw
, 
oÂ
);

480 
	}
}

483 
	$putdw
(
dw
, 
FILE
 *
oÂ
)

486 
	`putc
(()
dw
, 
oÂ
);

487 
dw
 >>= 8;

488 
	`putc
(()
dw
, 
oÂ
);

489 
dw
 >>= 8;

490 
	`putc
(()
dw
, 
oÂ
);

491 
dw
 >>= 8;

492 
	`putc
(()
dw
, 
oÂ
);

493 
	}
}

503 
	$GdC≠tuªS¸ìn
(*
∑th
)

505 #i‡
	`deföed
(
HAVE_FILEIO
)

506 
ifd
, 
i
, 
j
;

507 
FILE
 * 
oÂ
;

508 
cx
, 
cy
, 
exåa
, 
bµ
, 
byã•p
, 
ncﬁ‹s
, 
sizecﬁ‹èbÀ
;

509 
rmask
, 
gmask
, 
bmask
;

510 *
˝å
;

511 *
•å
;

512 *
Õå
;

513 
BMPHEAD
 
bmp
;

514 
buf
[2048*4];

516 
oÂ
 = 
	`f›í
(
∑th
, "wb");

517 i‡(!
oÂ
)

519 
ifd
 = 
	`›í
("/dev/fb0", 0);

521 
cx
 = 
s¸dev
.
xvúåes
;

522 
cy
 = 
s¸dev
.
yvúåes
;

523 
bµ
 = 
s¸dev
.bpp;

524 
byã•p
 = (
bµ
+7)/8;

527 
exåa
 = (
cx
*
byã•p
) & 3;

528 i‡(
exåa
)

529 
exåa
 = 4 -Éxtra;

530 
ncﬁ‹s
 = (
bµ
 <= 8)? (1<<bpp): 0;

532 
sizecﬁ‹èbÀ
 = 
ncﬁ‹s
?Çcolors*4: 3*4;

533 i‡(
bµ
 == 24)

534 
sizecﬁ‹èbÀ
 = 0;

537 
	`mem£t
(&
bmp
, 0, (bmp));

538 
bmp
.
bfTy≥
[0] = 'B';

539 
bmp
.
bfTy≥
[1] = 'M';

540 
bmp
.
bfSize
 = 
	`dwsw≠
((bmpË+ 
sizecﬁ‹èbÀ
 + ()(
cx
+
exåa
)*
cy
*
byã•p
);

541 
bmp
.
bfOffBôs
 = 
	`dwsw≠
((bmpË+ 
sizecﬁ‹èbÀ
);

542 
bmp
.
BiSize
 = 
	`dwsw≠
(40);

543 
bmp
.
BiWidth
 = 
	`dwsw≠
(
cx
);

544 
bmp
.
BiHeight
 = 
	`dwsw≠
(
cy
);

545 
bmp
.
BiPœ√s
 = 
	`wsw≠
(1);

546 
bmp
.
BiBôCou¡
 = 
	`wsw≠
(
bµ
);

547 
bmp
.
BiCom¥essi⁄
 = 
	`dwsw≠
((
bµ
==16 || bµ==32)? 
BI_BITFIELDS
: 
BI_RGB
);

548 
bmp
.
BiSizeImage
 = 
	`dwsw≠
(()(
cx
+
exåa
)*
cy
*
byã•p
);

549 
bmp
.
BiCÃU£d
 = 
	`dwsw≠
((
bµ
 <8)? 
ncﬁ‹s
: 0);

553 
	`fwrôe
(&
bmp
, (bmp), 1, 
oÂ
);

556 i‡(
sizecﬁ‹èbÀ
) {

557 if(
bµ
 <= 8) {

559 
i
=0; i<
ncﬁ‹s
; i++) {

560 
	`putc
(
gr_∑Àâe
[
i
].
b
, 
oÂ
);

561 
	`putc
(
gr_∑Àâe
[
i
].
g
, 
oÂ
);

562 
	`putc
(
gr_∑Àâe
[
i
].
r
, 
oÂ
);

563 
	`putc
(0, 
oÂ
);

567 
gr_pixty≥
) {

568 
MWPF_TRUECOLOR8888
:

569 
MWPF_TRUECOLOR0888
:

571 
rmask
 = 
RMASK888
;

572 
gmask
 = 
GMASK888
;

573 
bmask
 = 
BMASK888
;

575 
MWPF_TRUECOLORABGR
:

576 
rmask
 = 
RMASKBGR
;

577 
gmask
 = 
GMASKBGR
;

578 
bmask
 = 
BMASKBGR
;

580 
MWPF_TRUECOLOR565
:

581 
rmask
 = 
RMASK565
;

582 
gmask
 = 
GMASK565
;

583 
bmask
 = 
BMASK565
;

585 
MWPF_TRUECOLOR555
:

586 
rmask
 = 
RMASK555
;

587 
gmask
 = 
GMASK555
;

588 
bmask
 = 
BMASK555
;

590 
MWPF_TRUECOLOR332
:

591 
rmask
 = 
RMASK332
;

592 
gmask
 = 
GMASK332
;

593 
bmask
 = 
BMASK332
;

596 
	`putdw
(
rmask
, 
oÂ
);

597 
	`putdw
(
gmask
, 
oÂ
);

598 
	`putdw
(
bmask
, 
oÂ
);

603 
i
=
cy
-1; i>=0; --i) {

604 
ba£
 = (
bmp
Ë+ 
sizecﬁ‹èbÀ
 + ()
i
*
cx
*
byã•p
;

605 
	`f£ek
(
oÂ
, 
ba£
, 
SEEK_SET
);

606 
	`ªad
(
ifd
, 
buf
, 
cx
*
byã•p
);

607 
bµ
) {

609 
Õå
 = (*)
buf
;

610 
j
=0; j<
cx
; ++j)

611 
	`putdw
(*
Õå
++, 
oÂ
);

614 
˝å
 = (*)
buf
;

615 
j
=0; j<
cx
; ++j) {

616 
	`putc
(*
˝å
++, 
oÂ
);

617 
	`putc
(*
˝å
++, 
oÂ
);

618 
	`putc
(*
˝å
++, 
oÂ
);

622 
•å
 = (*)
buf
;

623 
j
=0; j<
cx
; ++j)

624 
	`putsw
(*
•å
++, 
oÂ
);

627 
˝å
 = (*)
buf
;

628 
j
=0; j<
cx
; ++j)

629 
	`putc
(*
˝å
++, 
oÂ
);

632 
j
=0; j<
exåa
; ++j)

633 
	`putc
(0, 
oÂ
);

636 
	`f˛o£
(
oÂ
);

637 
	`˛o£
(
ifd
);

640 
	}
}

	@engine/devpal1.c

6 
	~"devi˚.h
"

11 
MWPALENTRY
 
	gmw°d∑l1
[2] = {

12 
RGBDEF
( 0 , 0 , 0 ),

13 
RGBDEF
( 255, 255, 255 )

	@engine/devpal2.c

6 
	~"devi˚.h
"

13 
MWPALENTRY
 
	gmw°d∑l2
[4] = {

14 
RGBDEF
( 255, 255, 255 ),

15 
RGBDEF
( 192, 192, 192 ),

16 
RGBDEF
( 128, 128, 128 ),

17 
RGBDEF
( 0 , 0 , 0 )

	@engine/devpal4.c

6 
	~"devi˚.h
"

11 
MWPALENTRY
 
	gmw°d∑l4
[16] = {

13 
RGBDEF
( 0 , 0 , 0 ),

14 
RGBDEF
( 0 , 0 , 128 ),

15 
RGBDEF
( 0 , 128, 0 ),

16 
RGBDEF
( 0 , 128, 128 ),

17 
RGBDEF
( 128, 0 , 0 ),

18 
RGBDEF
( 128, 0 , 128 ),

19 
RGBDEF
( 128, 64 , 0 ),

20 
RGBDEF
( 192, 192, 192 ),

21 
RGBDEF
( 128, 128, 128 ),

22 
RGBDEF
( 0 , 0 , 255 ),

23 
RGBDEF
( 0 , 255, 0 ),

24 
RGBDEF
( 0 , 255, 255 ),

25 
RGBDEF
( 255, 0 , 0 ),

26 
RGBDEF
( 255, 0 , 255 ),

27 
RGBDEF
( 255, 255, 0 ),

28 
RGBDEF
( 255, 255, 255 ),

	@engine/devpal8.c

6 
	~"devi˚.h
"

13 
MWPALENTRY
 
	gmw°d∑l8
[256] = {

15 
RGBDEF
( 0 , 0 , 0 ),

16 
RGBDEF
( 0 , 0 , 128 ),

17 
RGBDEF
( 0 , 128, 0 ),

18 
RGBDEF
( 0 , 128, 128 ),

19 
RGBDEF
( 128, 0 , 0 ),

20 
RGBDEF
( 128, 0 , 128 ),

21 
RGBDEF
( 128, 64 , 0 ),

22 
RGBDEF
( 192, 192, 192 ),

23 
RGBDEF
( 128, 128, 128 ),

24 
RGBDEF
( 0 , 0 , 255 ),

25 
RGBDEF
( 0 , 255, 0 ),

26 
RGBDEF
( 0 , 255, 255 ),

27 
RGBDEF
( 255, 0 , 0 ),

28 
RGBDEF
( 255, 0 , 255 ),

29 
RGBDEF
( 255, 255, 0 ),

30 
RGBDEF
( 255, 255, 255 ),

33 
RGBDEF
( 32 , 32 , 32 ),

34 
RGBDEF
( 128, 128, 0 ),

35 
RGBDEF
( 223, 223, 223 ),

36 
RGBDEF
( 160, 160, 160 ),

38 
RGBDEF
( 234, 230, 221 ),

39 
RGBDEF
( 213, 204, 187 ),

40 
RGBDEF
( 162, 141, 104 ),

41 
RGBDEF
( 0 , 64 , 128 ),

46 
RGBDEF
( 0 , 128, 255 ),

47 
RGBDEF
( 0 , 255, 128 ),

48 
RGBDEF
( 64 , 0 , 0 ),

49 
RGBDEF
( 64 , 0 , 64 ),

50 
RGBDEF
( 64 , 0 , 128 ),

51 
RGBDEF
( 64 , 128, 128 ),

52 
RGBDEF
( 128, 0 , 64 ),

53 
RGBDEF
( 128, 0 , 255 ),

54 
RGBDEF
( 128, 64 , 64 ),

55 
RGBDEF
( 128, 128, 64 ),

56 
RGBDEF
( 128, 128, 192 ),

57 
RGBDEF
( 128, 128, 255 ),

58 
RGBDEF
( 128, 255, 0 ),

59 
RGBDEF
( 128, 255, 255 ),

60 
RGBDEF
( 164, 200, 240 ),

61 
RGBDEF
( 192, 220, 192 ),

62 
RGBDEF
( 255, 0 , 128 ),

63 
RGBDEF
( 255, 128, 0 ),

64 
RGBDEF
( 255, 128, 192 ),

65 
RGBDEF
( 255, 128, 255 ),

66 
RGBDEF
( 255, 128, 128 ),

67 
RGBDEF
( 255, 255, 128 ),

68 
RGBDEF
( 255, 251, 240 ),

69 
RGBDEF
( 255, 255, 232 ),

74 
RGBDEF
( 0x00, 0x00, 0x33 ),

75 
RGBDEF
( 0x00, 0x00, 0x66 ),

76 
RGBDEF
( 0x00, 0x00, 0x99 ),

77 
RGBDEF
( 0x00, 0x00, 0xcc ),

79 
RGBDEF
( 0x33, 0x00, 0x00 ),

80 
RGBDEF
( 0x33, 0x00, 0x33 ),

81 
RGBDEF
( 0x33, 0x00, 0x66 ),

82 
RGBDEF
( 0x33, 0x00, 0x99 ),

83 
RGBDEF
( 0x33, 0x00, 0xcc ),

84 
RGBDEF
( 0x33, 0x00, 0xff ),

85 
RGBDEF
( 0x66, 0x00, 0x00 ),

86 
RGBDEF
( 0x66, 0x00, 0x33 ),

87 
RGBDEF
( 0x66, 0x00, 0x66 ),

88 
RGBDEF
( 0x66, 0x00, 0x99 ),

89 
RGBDEF
( 0x66, 0x00, 0xcc ),

90 
RGBDEF
( 0x66, 0x00, 0xff ),

91 
RGBDEF
( 0x99, 0x00, 0x00 ),

92 
RGBDEF
( 0x99, 0x00, 0x33 ),

93 
RGBDEF
( 0x99, 0x00, 0x66 ),

94 
RGBDEF
( 0x99, 0x00, 0x99 ),

95 
RGBDEF
( 0x99, 0x00, 0xcc ),

96 
RGBDEF
( 0x99, 0x00, 0xff ),

97 
RGBDEF
( 0xcc, 0x00, 0x00 ),

98 
RGBDEF
( 0xcc, 0x00, 0x33 ),

99 
RGBDEF
( 0xcc, 0x00, 0x66 ),

100 
RGBDEF
( 0xcc, 0x00, 0x99 ),

101 
RGBDEF
( 0xcc, 0x00, 0xcc ),

102 
RGBDEF
( 0xcc, 0x00, 0xff ),

104 
RGBDEF
( 0xff, 0x00, 0x33 ),

105 
RGBDEF
( 0xff, 0x00, 0x66 ),

106 
RGBDEF
( 0xff, 0x00, 0x99 ),

107 
RGBDEF
( 0xff, 0x00, 0xcc ),

109 
RGBDEF
( 0x00, 0x33, 0x00 ),

110 
RGBDEF
( 0x00, 0x33, 0x33 ),

111 
RGBDEF
( 0x00, 0x33, 0x66 ),

112 
RGBDEF
( 0x00, 0x33, 0x99 ),

113 
RGBDEF
( 0x00, 0x33, 0xcc ),

114 
RGBDEF
( 0x00, 0x33, 0xff ),

115 
RGBDEF
( 0x33, 0x33, 0x00 ),

116 
RGBDEF
( 0x33, 0x33, 0x33 ),

117 
RGBDEF
( 0x33, 0x33, 0x66 ),

118 
RGBDEF
( 0x33, 0x33, 0x99 ),

119 
RGBDEF
( 0x33, 0x33, 0xcc ),

120 
RGBDEF
( 0x33, 0x33, 0xff ),

121 
RGBDEF
( 0x66, 0x33, 0x00 ),

122 
RGBDEF
( 0x66, 0x33, 0x33 ),

123 
RGBDEF
( 0x66, 0x33, 0x66 ),

124 
RGBDEF
( 0x66, 0x33, 0x99 ),

125 
RGBDEF
( 0x66, 0x33, 0xcc ),

126 
RGBDEF
( 0x66, 0x33, 0xff ),

127 
RGBDEF
( 0x99, 0x33, 0x00 ),

128 
RGBDEF
( 0x99, 0x33, 0x33 ),

129 
RGBDEF
( 0x99, 0x33, 0x66 ),

130 
RGBDEF
( 0x99, 0x33, 0x99 ),

131 
RGBDEF
( 0x99, 0x33, 0xcc ),

132 
RGBDEF
( 0x99, 0x33, 0xff ),

133 
RGBDEF
( 0xcc, 0x33, 0x00 ),

134 
RGBDEF
( 0xcc, 0x33, 0x33 ),

135 
RGBDEF
( 0xcc, 0x33, 0x66 ),

136 
RGBDEF
( 0xcc, 0x33, 0x99 ),

137 
RGBDEF
( 0xcc, 0x33, 0xcc ),

138 
RGBDEF
( 0xcc, 0x33, 0xff ),

139 
RGBDEF
( 0xff, 0x33, 0x00 ),

140 
RGBDEF
( 0xff, 0x33, 0x33 ),

141 
RGBDEF
( 0xff, 0x33, 0x66 ),

142 
RGBDEF
( 0xff, 0x33, 0x99 ),

143 
RGBDEF
( 0xff, 0x33, 0xcc ),

144 
RGBDEF
( 0xff, 0x33, 0xff ),

145 
RGBDEF
( 0x00, 0x66, 0x00 ),

146 
RGBDEF
( 0x00, 0x66, 0x33 ),

147 
RGBDEF
( 0x00, 0x66, 0x66 ),

148 
RGBDEF
( 0x00, 0x66, 0x99 ),

149 
RGBDEF
( 0x00, 0x66, 0xcc ),

150 
RGBDEF
( 0x00, 0x66, 0xff ),

151 
RGBDEF
( 0x33, 0x66, 0x00 ),

152 
RGBDEF
( 0x33, 0x66, 0x33 ),

153 
RGBDEF
( 0x33, 0x66, 0x66 ),

154 
RGBDEF
( 0x33, 0x66, 0x99 ),

155 
RGBDEF
( 0x33, 0x66, 0xcc ),

156 
RGBDEF
( 0x33, 0x66, 0xff ),

157 
RGBDEF
( 0x66, 0x66, 0x00 ),

158 
RGBDEF
( 0x66, 0x66, 0x33 ),

159 
RGBDEF
( 0x66, 0x66, 0x66 ),

160 
RGBDEF
( 0x66, 0x66, 0x99 ),

161 
RGBDEF
( 0x66, 0x66, 0xcc ),

162 
RGBDEF
( 0x66, 0x66, 0xff ),

163 
RGBDEF
( 0x99, 0x66, 0x00 ),

164 
RGBDEF
( 0x99, 0x66, 0x33 ),

165 
RGBDEF
( 0x99, 0x66, 0x66 ),

166 
RGBDEF
( 0x99, 0x66, 0x99 ),

167 
RGBDEF
( 0x99, 0x66, 0xcc ),

168 
RGBDEF
( 0x99, 0x66, 0xff ),

169 
RGBDEF
( 0xcc, 0x66, 0x00 ),

170 
RGBDEF
( 0xcc, 0x66, 0x33 ),

171 
RGBDEF
( 0xcc, 0x66, 0x66 ),

172 
RGBDEF
( 0xcc, 0x66, 0x99 ),

173 
RGBDEF
( 0xcc, 0x66, 0xcc ),

174 
RGBDEF
( 0xcc, 0x66, 0xff ),

175 
RGBDEF
( 0xff, 0x66, 0x00 ),

176 
RGBDEF
( 0xff, 0x66, 0x33 ),

177 
RGBDEF
( 0xff, 0x66, 0x66 ),

178 
RGBDEF
( 0xff, 0x66, 0x99 ),

179 
RGBDEF
( 0xff, 0x66, 0xcc ),

180 
RGBDEF
( 0xff, 0x66, 0xff ),

181 
RGBDEF
( 0x00, 0x99, 0x00 ),

182 
RGBDEF
( 0x00, 0x99, 0x33 ),

183 
RGBDEF
( 0x00, 0x99, 0x66 ),

184 
RGBDEF
( 0x00, 0x99, 0x99 ),

185 
RGBDEF
( 0x00, 0x99, 0xcc ),

186 
RGBDEF
( 0x00, 0x99, 0xff ),

187 
RGBDEF
( 0x33, 0x99, 0x00 ),

188 
RGBDEF
( 0x33, 0x99, 0x33 ),

189 
RGBDEF
( 0x33, 0x99, 0x66 ),

190 
RGBDEF
( 0x33, 0x99, 0x99 ),

191 
RGBDEF
( 0x33, 0x99, 0xcc ),

192 
RGBDEF
( 0x33, 0x99, 0xff ),

193 
RGBDEF
( 0x66, 0x99, 0x00 ),

194 
RGBDEF
( 0x66, 0x99, 0x33 ),

195 
RGBDEF
( 0x66, 0x99, 0x66 ),

196 
RGBDEF
( 0x66, 0x99, 0x99 ),

197 
RGBDEF
( 0x66, 0x99, 0xcc ),

198 
RGBDEF
( 0x66, 0x99, 0xff ),

199 
RGBDEF
( 0x99, 0x99, 0x00 ),

200 
RGBDEF
( 0x99, 0x99, 0x33 ),

201 
RGBDEF
( 0x99, 0x99, 0x66 ),

202 
RGBDEF
( 0x99, 0x99, 0x99 ),

203 
RGBDEF
( 0x99, 0x99, 0xcc ),

204 
RGBDEF
( 0x99, 0x99, 0xff ),

205 
RGBDEF
( 0xcc, 0x99, 0x00 ),

206 
RGBDEF
( 0xcc, 0x99, 0x33 ),

207 
RGBDEF
( 0xcc, 0x99, 0x66 ),

208 
RGBDEF
( 0xcc, 0x99, 0x99 ),

209 
RGBDEF
( 0xcc, 0x99, 0xcc ),

210 
RGBDEF
( 0xcc, 0x99, 0xff ),

211 
RGBDEF
( 0xff, 0x99, 0x00 ),

212 
RGBDEF
( 0xff, 0x99, 0x33 ),

213 
RGBDEF
( 0xff, 0x99, 0x66 ),

214 
RGBDEF
( 0xff, 0x99, 0x99 ),

215 
RGBDEF
( 0xff, 0x99, 0xcc ),

216 
RGBDEF
( 0xff, 0x99, 0xff ),

217 
RGBDEF
( 0x00, 0xcc, 0x00 ),

218 
RGBDEF
( 0x00, 0xcc, 0x33 ),

219 
RGBDEF
( 0x00, 0xcc, 0x66 ),

220 
RGBDEF
( 0x00, 0xcc, 0x99 ),

221 
RGBDEF
( 0x00, 0xcc, 0xcc ),

222 
RGBDEF
( 0x00, 0xcc, 0xff ),

223 
RGBDEF
( 0x33, 0xcc, 0x00 ),

224 
RGBDEF
( 0x33, 0xcc, 0x33 ),

225 
RGBDEF
( 0x33, 0xcc, 0x66 ),

226 
RGBDEF
( 0x33, 0xcc, 0x99 ),

227 
RGBDEF
( 0x33, 0xcc, 0xcc ),

228 
RGBDEF
( 0x33, 0xcc, 0xff ),

229 
RGBDEF
( 0x66, 0xcc, 0x00 ),

230 
RGBDEF
( 0x66, 0xcc, 0x33 ),

231 
RGBDEF
( 0x66, 0xcc, 0x66 ),

232 
RGBDEF
( 0x66, 0xcc, 0x99 ),

233 
RGBDEF
( 0x66, 0xcc, 0xcc ),

234 
RGBDEF
( 0x66, 0xcc, 0xff ),

235 
RGBDEF
( 0x99, 0xcc, 0x00 ),

236 
RGBDEF
( 0x99, 0xcc, 0x33 ),

237 
RGBDEF
( 0x99, 0xcc, 0x66 ),

238 
RGBDEF
( 0x99, 0xcc, 0x99 ),

239 
RGBDEF
( 0x99, 0xcc, 0xcc ),

240 
RGBDEF
( 0x99, 0xcc, 0xff ),

241 
RGBDEF
( 0xcc, 0xcc, 0x00 ),

242 
RGBDEF
( 0xcc, 0xcc, 0x33 ),

243 
RGBDEF
( 0xcc, 0xcc, 0x66 ),

244 
RGBDEF
( 0xcc, 0xcc, 0x99 ),

245 
RGBDEF
( 0xcc, 0xcc, 0xcc ),

246 
RGBDEF
( 0xcc, 0xcc, 0xff ),

247 
RGBDEF
( 0xff, 0xcc, 0x00 ),

248 
RGBDEF
( 0xff, 0xcc, 0x33 ),

249 
RGBDEF
( 0xff, 0xcc, 0x66 ),

250 
RGBDEF
( 0xff, 0xcc, 0x99 ),

251 
RGBDEF
( 0xff, 0xcc, 0xcc ),

252 
RGBDEF
( 0xff, 0xcc, 0xff ),

254 
RGBDEF
( 0x00, 0xff, 0x33 ),

255 
RGBDEF
( 0x00, 0xff, 0x66 ),

256 
RGBDEF
( 0x00, 0xff, 0x99 ),

257 
RGBDEF
( 0x00, 0xff, 0xcc ),

259 
RGBDEF
( 0x33, 0xff, 0x00 ),

260 
RGBDEF
( 0x33, 0xff, 0x33 ),

261 
RGBDEF
( 0x33, 0xff, 0x66 ),

262 
RGBDEF
( 0x33, 0xff, 0x99 ),

263 
RGBDEF
( 0x33, 0xff, 0xcc ),

264 
RGBDEF
( 0x33, 0xff, 0xff ),

265 
RGBDEF
( 0x66, 0xff, 0x00 ),

266 
RGBDEF
( 0x66, 0xff, 0x33 ),

267 
RGBDEF
( 0x66, 0xff, 0x66 ),

268 
RGBDEF
( 0x66, 0xff, 0x99 ),

269 
RGBDEF
( 0x66, 0xff, 0xcc ),

270 
RGBDEF
( 0x66, 0xff, 0xff ),

271 
RGBDEF
( 0x99, 0xff, 0x00 ),

272 
RGBDEF
( 0x99, 0xff, 0x33 ),

273 
RGBDEF
( 0x99, 0xff, 0x66 ),

274 
RGBDEF
( 0x99, 0xff, 0x99 ),

275 
RGBDEF
( 0x99, 0xff, 0xcc ),

276 
RGBDEF
( 0x99, 0xff, 0xff ),

277 
RGBDEF
( 0xcc, 0xff, 0x00 ),

278 
RGBDEF
( 0xcc, 0xff, 0x33 ),

279 
RGBDEF
( 0xcc, 0xff, 0x66 ),

280 
RGBDEF
( 0xcc, 0xff, 0x99 ),

281 
RGBDEF
( 0xcc, 0xff, 0xcc ),

282 
RGBDEF
( 0xcc, 0xff, 0xff ),

284 
RGBDEF
( 0xff, 0xff, 0x33 ),

285 
RGBDEF
( 0xff, 0xff, 0x66 ),

286 
RGBDEF
( 0xff, 0xff, 0x99 ),

287 
RGBDEF
( 0xff, 0xff, 0xcc ),

291 #i‡
TEST


292 
	$maö
()

294 
c
;

296 
	`DPRINTF
("%d\n", (()&
°d∑Àâe
[1]) - ()&stdpalette[0]);

298 
c
 = 
	`FödNóª°Cﬁ‹
(
°d∑Àâe
, 224, 224, 224);

299 
	`DPRINTF
("%d = %02x %02x %02x\n", 
c
, 
°d∑Àâe
[c].
r
, std∑Àâe[c].
g
,

300 
°d∑Àâe
[
c
].
b
);

301 
	}
}

	@engine/devpalgray4.c

4 
	~"devi˚.h
"

6 
MWPALENTRY
 
	gmw°d∑l4
[16] = {

7 
RGBDEF
( 0, 0, 0 ),

8 
RGBDEF
( 17, 17, 17 ),

9 
RGBDEF
( 34, 34, 34 ),

10 
RGBDEF
( 51, 51, 51 ),

11 
RGBDEF
( 68, 68, 68 ),

12 
RGBDEF
( 85, 85, 85 ),

13 
RGBDEF
( 102, 102, 102 ),

14 
RGBDEF
( 119, 119, 119 ),

15 
RGBDEF
( 136, 136, 136 ),

16 
RGBDEF
( 153, 153, 153 ),

17 
RGBDEF
( 170, 170, 170 ),

18 
RGBDEF
( 187, 187, 187 ),

19 
RGBDEF
( 204, 204, 204 ),

20 
RGBDEF
( 221, 221, 221 ),

21 
RGBDEF
( 238, 238, 238 ),

22 
RGBDEF
( 255, 255, 255 )

	@engine/devpoly.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~"devi˚.h
"

27 
	#EDGEPOLYFILL
 1

	)

28 
	#X11POLYFILL
 0

	)

29 
	#BASICPOLYFILL
 0

	)

32 
døwpoöt
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
);

33 
døwrow
(
PSD
 
psd
,
MWCOORD
 
x1
,MWCOORD 
x2
,MWCOORD 
y
);

34 
gr_mode
;

35 
gr_fûlmode
;

49 
	$GdPﬁy
(
PSD
 
psd
, 
cou¡
, 
MWPOINT
 *
poöts
)

51 
MWCOORD
 
fú°x
;

52 
MWCOORD
 
fú°y
;

53 
MWBOOL
 
didlöe
;

55 i‡(
cou¡
 < 2)

57 
fú°x
 = 
poöts
->
x
;

58 
fú°y
 = 
poöts
->
y
;

59 
didlöe
 = 
FALSE
;

61 
cou¡
-- > 1) {

62 i‡(
didlöe
 && (
gr_mode
 =
MWMODE_XOR
))

63 
	`døwpoöt
(
psd
, 
poöts
->
x
,Öoöts->
y
);

65 
	`GdLöe
(
psd
, 
poöts
[0].
x
,Öoöts[0].
y
,Öoöts[1].x,Öoöts[1].y, 
TRUE
);

66 
poöts
++;

67 
didlöe
 = 
TRUE
;

69 i‡(
gr_mode
 =
MWMODE_XOR
) {

70 
poöts
--;

71 i‡(
poöts
->
x
 =
fú°x
 &&Öoöts->
y
 =
fú°y
)

72 
	`døwpoöt
(
psd
, 
poöts
->
x
,Öoöts->
y
);

74 
	`GdFixCurs‹
(
psd
);

75 
	}
}

77 #i‡
X11POLYFILL


162 
	#BRESINITPGON
(
dy
, 
x1
, 
x2
, 
xSèπ
, 
d
, 
m
, 
m1
, 
ö¸1
, 
ö¸2
) { \

163 
dx
; \

169 i‡((
dy
) != 0) { \

170 
xSèπ
 = (
x1
); \

171 
dx
 = (
x2
Ë- 
xSèπ
; \

172 i‡(
dx
 < 0) { \

173 
m
 = 
dx
 / (
dy
); \

174 
m1
 = 
m
 - 1; \

175 
ö¸1
 = -2 * 
dx
 + 2 * (
dy
Ë* 
m1
; \

176 
ö¸2
 = -2 * 
dx
 + 2 * (
dy
Ë* 
m
; \

177 
d
 = 2 * 
m
 * (
dy
Ë- 2 * 
dx
 - 2 * (dy); \

179 
m
 = 
dx
 / (
dy
); \

180 
m1
 = 
m
 + 1; \

181 
ö¸1
 = 2 * 
dx
 - 2 * (
dy
Ë* 
m1
; \

182 
ö¸2
 = 2 * 
dx
 - 2 * (
dy
Ë* 
m
; \

183 
d
 = -2 * 
m
 * (
dy
Ë+ 2 * 
dx
; \

186 }

	)

188 
	#BRESINCRPGON
(
d
, 
mövÆ
, 
m
, 
m1
, 
ö¸1
, 
ö¸2
) { \

189 i‡(
m1
 > 0) { \

190 i‡(
d
 > 0) { \

191 
mövÆ
 +
m1
; \

192 
d
 +
ö¸1
; \

195 
mövÆ
 +
m
; \

196 
d
 +
ö¸2
; \

199 i‡(
d
 >= 0) { \

200 
mövÆ
 +
m1
; \

201 
d
 +
ö¸1
; \

204 
mövÆ
 +
m
; \

205 
d
 +
ö¸2
; \

208 }

	)

214 
	$gëPﬁyYBounds
(
MWPOINT
 *
±s
, 
n
, *
by
, *
ty
)

216 
MWPOINT
 *
±Mö
;

217 
ymö
, 
ymax
;

218 
MWPOINT
 *
±sSèπ
 = 
±s
;

220 
±Mö
 = 
±s
;

221 
ymö
 = 
ymax
 = (
±s
++)->
y
;

223 --
n
 > 0) {

224 i‡(
±s
->
y
 < 
ymö
)

226 
±Mö
 = 
±s
;

227 
ymö
 = 
±s
->
y
;

229 if(
±s
->
y
 > 
ymax
)

230 
ymax
 = 
±s
->
y
;

232 
±s
++;

235 *
by
 = 
ymö
;

236 *
ty
 = 
ymax
;

237 (
±Mö
-
±sSèπ
);

238 
	}
}

241 
	$gëPﬁyXBounds
(
MWPOINT
 *
±s
, 
n
, *
bx
, *
tx
)

243 
MWPOINT
 *
±Mö
;

244 
xmö
, 
xmax
;

245 
MWPOINT
 *
±sSèπ
 = 
±s
;

247 
±Mö
 = 
±s
;

248 
xmö
 = 
xmax
 = (
±s
++)->
x
;

250 --
n
 > 0) {

251 i‡(
±s
->
x
 < 
xmö
)

253 
±Mö
 = 
±s
;

254 
xmö
 = 
±s
->
x
;

256 if(
±s
->
x
 > 
xmax
)

257 
xmax
 = 
±s
->
x
;

259 
±s
++;

262 *
bx
 = 
xmö
;

263 *
tx
 = 
xmax
;

264 (
±Mö
-
±sSèπ
);

265 
	}
}

268 
	$GdFûlPﬁy
(
PSD
 
psd
, 
cou¡
, 
MWPOINT
 *
poöâabÀ
)

270 
MWCOORD
 
xl
 = 0, 
xr
 = 0;

271 
dl
 = 0, 
dr
 = 0;

272 
ml
 = 0, 
m1l
 = 0;

273 
mr
 = 0, 
m1r
 = 0;

274 
ö¸1l
 = 0, 
ö¸2l
 = 0;

275 
ö¸1r
 = 0, 
ö¸2r
 = 0;

276 
dy
;

277 
MWCOORD
 
y
;

278 
À·
, 
right
;

279 
i
;

280 
√xée·
, 
√xåight
;

281 
MWPOINT
 *
±sOut
, *
Fú°Poöt
;

282 
MWCOORD
 *
width
, *
Fú°Width
;

283 
imö
;

284 
ymö
;

285 
ymax
;

292 
imö
 = 
	`gëPﬁyYBounds
(
poöâabÀ
, 
cou¡
, &
ymö
, &
ymax
);

294 i‡(
gr_fûlmode
 !
MWFILL_SOLID
) {

295 
xmö
, 
xmax
;

296 
	`gëPﬁyXBounds
(
poöâabÀ
, 
cou¡
, &
xmö
, &
xmax
);

297 
	`£t_ts_‹igö
(
xmö
, 
ymö
);

300 
dy
 = 
ymax
 - 
ymö
 + 1;

301 i‡((
cou¡
 < 3Ë|| (
dy
 < 0))

303 
±sOut
 = 
Fú°Poöt
 = (
MWPOINT
 *)
	`ALLOCA
((MWPOINTË* 
dy
);

304 
width
 = 
Fú°Width
 = (
MWCOORD
 *)
	`ALLOCA
((MWCOORDË* 
dy
);

305 if(!
Fú°Poöt
 || !
Fú°Width
)

307 i‡(
Fú°Width
Ë
	`FREEA
(FirstWidth);

308 i‡(
Fú°Poöt
Ë
	`FREEA
(FirstPoint);

312 
√xée·
 = 
√xåight
 = 
imö
;

313 
y
 = 
poöâabÀ
[
√xée·
].y;

322 i‡(
poöâabÀ
[
√xée·
].
y
 == y) {

323 
À·
 = 
√xée·
;

329 
√xée·
++;

330 i‡(
√xée·
 >
cou¡
)

331 
√xée·
 = 0;

337 
	`BRESINITPGON
(
poöâabÀ
[
√xée·
].
y
-poöâabÀ[
À·
].y,

338 
poöâabÀ
[
À·
].
x
,poöâabÀ[
√xée·
].x,

339 
xl
, 
dl
, 
ml
, 
m1l
, 
ö¸1l
, 
ö¸2l
);

345 i‡(
poöâabÀ
[
√xåight
].
y
 == y) {

346 
right
 = 
√xåight
;

352 
√xåight
--;

353 i‡(
√xåight
 < 0)

354 
√xåight
 = 
cou¡
-1;

360 
	`BRESINITPGON
(
poöâabÀ
[
√xåight
].
y
-poöâabÀ[
right
].y,

361 
poöâabÀ
[
right
].
x
,poöâabÀ[
√xåight
].x,

362 
xr
, 
dr
, 
mr
, 
m1r
, 
ö¸1r
, 
ö¸2r
);

369 
i
 = 
	`MWMIN
(
poöâabÀ
[
√xée·
].
y
,ÖoöâabÀ[
√xåight
].y) - y;

371 if(
i
 < 0)

373 
	`FREEA
(
Fú°Width
);

374 
	`FREEA
(
Fú°Poöt
);

377 
i
-- > 0)

379 
±sOut
->
y
 = y;

384 i‡(
xl
 < 
xr
)

386 *(
width
++Ë
xr
 - 
xl
;

387 (
±sOut
++)->
x
 = 
xl
;

391 *(
width
++Ë
xl
 - 
xr
;

392 (
±sOut
++)->
x
 = 
xr
;

394 
y
++;

397 
	`BRESINCRPGON
(
dl
, 
xl
, 
ml
, 
m1l
, 
ö¸1l
, 
ö¸2l
);

398 
	`BRESINCRPGON
(
dr
, 
xr
, 
mr
, 
m1r
, 
ö¸1r
, 
ö¸2r
);

400 } 
y
 !
ymax
);

405 
i
 = 
±sOut
-
Fú°Poöt
;

406 
±sOut
 = 
Fú°Poöt
;

407 
width
 = 
Fú°Width
;

408 --
i
 >= 0) {

410 
e
 = *
width
++ - 1;

411 i‡(
e
 >= 0) {

412 i‡(
gr_fûlmode
 !
MWFILL_SOLID
)

413 
	`ts_døwrow
(
psd
, 
±sOut
->
x
,ÖtsOut->x + 
e
,ÖtsOut->
y
);

415 
	`døwrow
(
psd
, 
±sOut
->
x
,ÖtsOut->x + 
e
,ÖtsOut->
y
);

417 ++
±sOut
;

420 
	`FREEA
(
Fú°Width
);

421 
	`FREEA
(
Fú°Poöt
);

422 
	`GdFixCurs‹
(
psd
);

423 
	}
}

426 #i‡
BASICPOLYFILL


445 
	$exãndrow
(
MWCOORD
 
y
,MWCOORD 
x1
,MWCOORD 
y1
,MWCOORD 
x2
,MWCOORD 
y2
,

446 
MWCOORD
 *
möx±r
,MWCOORD *
maxx±r
)

448 
MWCOORD
 
x
;

449 
	tNUM
;

450 
NUM
 
num
;

455 i‡(((
y
 < 
y1
Ë|| (y > 
y2
)) && ((y < y2) || (y > y1)))

459 i‡(
y1
 =
y2
) {

460 i‡(*
möx±r
 > 
x1
) *minxptr = x1;

461 i‡(*
möx±r
 > 
x2
) *minxptr = x2;

462 i‡(*
maxx±r
 < 
x1
) *maxxptr = x1;

463 i‡(*
maxx±r
 < 
x2
) *maxxptr = x2;

468 i‡(
x1
 =
x2
) {

469 i‡(*
möx±r
 > 
x1
) *minxptr = x1;

470 i‡(*
maxx±r
 < 
x1
) *maxxptr = x1;

477 
num
 = ((
NUM
Ë(
y
 - 
y1
)Ë* (
x2
 - 
x1
);

478 
x
 = 
x1
 + 
num
 / (
y2
 - 
y1
);

479 i‡(*
möx±r
 > 
x
) *minxptr = x;

480 i‡(*
maxx±r
 < 
x
) *maxxptr = x;

481 
	}
}

484 
	$GdFûlPﬁy
(
PSD
 
psd
, 
cou¡
, 
MWPOINT
 *
poöts
)

486 
MWPOINT
 *
µ
;

487 
MWCOORD
 
möy
;

488 
MWCOORD
 
maxy
;

489 
MWCOORD
 
möx
;

490 
MWCOORD
 
maxx
;

491 
i
;

493 i‡(
cou¡
 <= 0)

497 
µ
 = 
poöts
;

498 
möy
 = 
µ
->
y
;

499 
maxy
 = 
µ
->
y
;

500 
i
 = 
cou¡
; i-- > 0; 
µ
++) {

501 i‡(
möy
 > 
µ
->
y
) miny =Öp->y;

502 i‡(
maxy
 < 
µ
->
y
) maxy =Öp->y;

504 i‡(
möy
 < 0)

505 
möy
 = 0;

506 i‡(
maxy
 >
psd
->
yvúåes
)

507 
maxy
 = 
psd
->
yvúåes
 - 1;

508 i‡(
möy
 > 
maxy
)

515 ; 
möy
 <
maxy
; miny++) {

516 
möx
 = 
MAX_MWCOORD
;

517 
maxx
 = 
MIN_MWCOORD
;

518 
µ
 = 
poöts
;

519 
i
 = 
cou¡
; --ò> 0; 
µ
++)

520 
	`exãndrow
(
möy
, 
µ
[0].
x
,Öp[0].
y
,Öp[1].x,Öp[1].y,

521 &
möx
, &
maxx
);

522 
	`exãndrow
(
möy
, 
µ
[0].
x
,Öp[0].
y
, 
poöts
[0].x,Öoints[0].y,

523 &
möx
, &
maxx
);

525 i‡(
möx
 <
maxx
)

526 
	`døwrow
(
psd
, 
möx
, 
maxx
, 
möy
);

528 
	`GdFixCurs‹
(
psd
);

529 
	}
}

532 #i‡
EDGEPOLYFILL


540 
	#USE_FLOAT
 
HAVEFLOAT


	)

542 
	#sw≠
(
a
,
b
Ëdÿ{á ^b; b ^a;á ^b; } 0)

	)

545 
	mx1
, 
	my1
, 
	mx2
, 
	my2
;

546 #i‡
USE_FLOAT


547 
	mx
, 
	mm
;

549 
	mcx
, 
	m‚
, 
	mmn
, 
	md
;

551 } 
	tedge_t
;

554 
	$edge_cmp
(c⁄° *
lvp
, c⁄° *
rvp
)

557 c⁄° 
edge_t
 *
Õ
 = (c⁄°Édge_à*)
lvp
;

558 c⁄° 
edge_t
 *
Ω
 = (c⁄°Édge_à*)
rvp
;

561 i‡(
Õ
->
y1
 !
Ω
->y1)

562  
Õ
->
y1
 - 
Ω
->y1;

565 #i‡
USE_FLOAT


566 i‡(
Õ
->
x
 < 
Ω
->x)

568 i‡(
Õ
->
x
 > 
Ω
->x)

571 i‡(
Õ
->
cx
 !
Ω
->cx)

572  
Õ
->
cx
 - 
Ω
->cx;

577 
	}
}

587 
	$GdFûlPﬁy
(
PSD
 
psd
, 
cou¡
, 
MWPOINT
 * 
poöâabÀ
)

589 
edge_t
 *
gë
;

590 
nge
 = 0;

591 
cge
 = 0;

593 
edge_t
 *
´t
;

594 
«e
 = 0;

596 
i
, 
y
;

598 i‡(
cou¡
 < 3) {

602 
gë
 = (
edge_t
 *Ë
	`ˇŒoc
(
cou¡
, (edge_t));

603 
´t
 = (
edge_t
 *Ë
	`ˇŒoc
(
cou¡
, (edge_t));

605 i‡((
gë
 =0Ë|| (
´t
 == 0)) {

607 i‡(
gë
)

608 
	`‰ì
(
gë
);

609 i‡(
´t
)

610 
	`‰ì
(
´t
);

614 
i
 = 0; i < 
cou¡
; ++i) {

615 
gë
[
nge
].
x1
 = 
poöâabÀ
[
i
].
x
;

616 
gë
[
nge
].
y1
 = 
poöâabÀ
[
i
].
y
;

617 
gë
[
nge
].
x2
 = 
poöâabÀ
[(
i
 + 1Ë% 
cou¡
].
x
;

618 
gë
[
nge
].
y2
 = 
poöâabÀ
[(
i
 + 1Ë% 
cou¡
].
y
;

619 i‡(
gë
[
nge
].
y1
 !gë[nge].
y2
) {

620 i‡(
gë
[
nge
].
y1
 > gë[nge].
y2
) {

621 
	`sw≠
(
gë
[
nge
].
x1
, gë[nge].
x2
);

622 
	`sw≠
(
gë
[
nge
].
y1
, gë[nge].
y2
);

624 #i‡
USE_FLOAT


625 
gë
[
nge
].
x
 = gë[nge].
x1
;

626 
gë
[
nge
].
m
 = gë[nge].
x2
 - gë[nge].
x1
;

627 
gë
[
nge
].
m
 /gë[nge].
y2
 - gë[nge].
y1
;

629 
gë
[
nge
].
cx
 = gë[nge].
x1
;

630 
gë
[
nge
].
mn
 = gë[nge].
x2
 - gë[nge].
x1
;

631 
gë
[
nge
].
d
 = gë[nge].
y2
 - gë[nge].
y1
;

632 
gë
[
nge
].
‚
 = gë[nge].
mn
 / 2;

634 ++
nge
;

638 
	`qs‹t
(
gë
, 
nge
, (gë[0]), 
edge_cmp
);

641 
y
 = 
gë
[0].
y1
;

646 (
nge
 > 0Ë&& (
gë
[
cge
].
y1
 =
y
)) {

647 
´t
[
«e
] = 
gë
[
cge
++];

648 --
nge
;

649 
´t
[
«e
++].
y1
 = 0;

652 
	`qs‹t
(
´t
, 
«e
, ◊ë[0]), 
edge_cmp
);

655 
i
 = 1; i < 
«e
; i += 2) {

656 #i‡
USE_FLOAT


657 
l
 = ()
´t
[
i
 - 1].
x
;

658 
r
 = ()
´t
[
i
].
x
;

660 
l
 = ()
´t
[
i
 - 1].
cx
;

661 
r
 = ()
´t
[
i
].
cx
;

663 i‡(
r
 > 
l
)

664 
	`døwrow
(
psd
, 
l
, 
r
 - 1, 
y
);

668 ++
y
;

672 
i
 = 0; i < 
«e
; ++i) {

673 i‡(
´t
[
i
].
y2
 =
y
)

674 
´t
[
i
--] =áë[--
«e
];

676 #i‡
USE_FLOAT


677 
´t
[
i
].
x
 +´t[i].
m
;

679 
´t
[
i
].
‚
 +´t[i].
mn
;

680 i‡(
´t
[
i
].
‚
 < 0) {

681 
´t
[
i
].
cx
 +´t[i].
‚
 /áë[i].
d
 - 1;

682 
´t
[
i
].
‚
 %´t[i].
d
;

683 
´t
[
i
].
‚
 +´t[i].
d
;

685 i‡(
´t
[
i
].
‚
 >´t[i].
d
) {

686 
´t
[
i
].
cx
 +´t[i].
‚
 /áë[i].
d
;

687 
´t
[
i
].
‚
 %´t[i].
d
;

694 } (
«e
 > 0Ë|| (
nge
 > 0));

697 
	`‰ì
(
gë
);

698 
	`‰ì
(
´t
);

700 
	`GdFixCurs‹
(
psd
);

701 
	}
}

	@engine/devrgn.c

85 
	~<°dio.h
>

86 
	~<°dlib.h
>

87 
	~<°rög.h
>

88 
	~"devi˚.h
"

90 (*
	tREGION_OvîœpB™dFun˘i⁄På
Ë(
	tMWCLIPREGION
 * 
	tpReg
, 
	tMWRECT
 * 
	tr1
,

91 
	tMWRECT
 * 
	tr1End
, MWRECT * 
	tr2
, MWRECT * 
	tr2End
, 
	tMWCOORD
 
	tt›
, MWCOORD 
	tbŸtom
);

92 (*
	tREGION_N⁄OvîœpB™dFun˘i⁄På
Ë(
	tMWCLIPREGION
 * 
	tpReg
, 
	tMWRECT
 * 
	tr
,

93 
	tMWRECT
 * 
	tíd
, 
	tMWCOORD
 
	tt›
, MWCOORD 
	tbŸtom
);

98 
	#EXTENTCHECK
(
r1
, 
r2
) \

99 ((
r1
)->
right
 > (
r2
)->
À·
 && \

100 (
r1
)->
À·
 < (
r2
)->
right
 && \

101 (
r1
)->
bŸtom
 > (
r2
)->
t›
 && \

102 (
r1
)->
t›
 < (
r2
)->
bŸtom
)

	)

107 
	#MEMCHECK
(
ªg
, 
ª˘
, 
fú°ª˘
){\

108 i‡((
ªg
)->
numRe˘s
 >(‘eg)->
size
 - 1)){\

109 (
fú°ª˘
Ë
	`GdRóŒoc
(\

110 (
fú°ª˘
), (((
MWRECT
)Ë* ((
ªg
)->
size
)), \

111 (2 * ((
MWRECT
)Ë* ((
ªg
)->
size
)));\

112 i‡((
fú°ª˘
) == 0)\

114 (
ªg
)->
size
 *= 2;\

115 (
ª˘
Ë&(
fú°ª˘
)[(
ªg
)->
numRe˘s
];\

117 
	}

	)
}

119 
	#REGION_NOT_EMPTY
(
pReg
ËpReg->
numRe˘s


	)

121 
	#EMPTY_REGION
(
pReg
) { \

122 (
pReg
)->
numRe˘s
 = 0; \

123 (
pReg
)->
exã¡s
.
À·
 = (pReg)->exã¡s.
t›
 = 0; \

124 (
pReg
)->
exã¡s
.
right
 = (pReg)->exã¡s.
bŸtom
 = 0; \

125 (
pReg
)->
ty≥
 = 
MWREGION_NULL
; \

126 }

	)

128 
	#INRECT
(
r
, 
x
, 
y
) \

129 ––((
r
).
right
 > 
x
)) && \

130 –((
r
).
À·
 <
x
)) && \

131 –((
r
).
bŸtom
 > 
y
)) && \

132 –((
r
).
t›
 <
y
)Ë)

	)

142 
MWBOOL


143 
	$GdPtInRegi⁄
(
MWCLIPREGION
 *
rgn
, 
MWCOORD
 
x
, MWCOORD 
y
)

145 
i
;

147 i‡(
rgn
->
numRe˘s
 > 0 && 
	`INRECT
‘gn->
exã¡s
, 
x
, 
y
))

148 
i
 = 0; i < 
rgn
->
numRe˘s
; i++)

149 i‡(
	`INRECT
 (
rgn
->
ª˘s
[
i
], 
x
, 
y
))

150  
TRUE
;

151  
FALSE
;

152 
	}
}

162 
	$GdRe˘InRegi⁄
(
MWCLIPREGION
 *
rgn
, c⁄° 
MWRECT
 *
ª˘
)

164 
MWRECT
 * 
pCurRe˘
;

165 
MWRECT
 * 
pRe˘End
;

166 
MWCOORD
 
rx
, 
ry
;

167 
MWBOOL
 
∑πIn
, 
∑πOut
;

170 i‡(!
rgn
->
numRe˘s
 || !
	`EXTENTCHECK
(&rgn->
exã¡s
, 
ª˘
))

171  
MWRECT_OUT
;

173 
∑πOut
 = 
FALSE
;

174 
∑πIn
 = 
FALSE
;

175 
rx
 = 
ª˘
->
À·
;

176 
ry
 = 
ª˘
->
t›
;

182 
pCurRe˘
 = 
rgn
->
ª˘s
, 
pRe˘End
 =ÖCurRe˘ +Ñgn->
numRe˘s
;

183 
pCurRe˘
 < 
pRe˘End
;ÖCurRect++) {

185 i‡(
pCurRe˘
->
bŸtom
 <
ry
)

188 i‡(
pCurRe˘
->
t›
 > 
ry
) {

189 
∑πOut
 = 
TRUE
;

190 i‡(
∑πIn
 || (
pCurRe˘
->
t›
 >
ª˘
->
bŸtom
))

192 
ry
 = 
pCurRe˘
->
t›
;

195 i‡(
pCurRe˘
->
right
 <
rx
)

198 i‡(
pCurRe˘
->
À·
 > 
rx
) {

199 
∑πOut
 = 
TRUE
;

200 i‡(
∑πIn
)

204 i‡(
pCurRe˘
->
À·
 < 
ª˘
->
right
) {

205 
∑πIn
 = 
TRUE
;

206 i‡(
∑πOut
)

210 i‡(
pCurRe˘
->
right
 >
ª˘
->right) {

211 
ry
 = 
pCurRe˘
->
bŸtom
;

212 i‡(
ry
 >
ª˘
->
bŸtom
)

214 
rx
 = 
ª˘
->
À·
;

227 (
∑πIn
 ? ((
ry
 < 
ª˘
->
bŸtom
Ë? 
MWRECT_PARTIN
 : 
MWRECT_ALLIN
) :

228 
MWRECT_OUT
);

229 
	}
}

233 
MWBOOL


234 
	$GdRe˘InRegi⁄
(
MWCLIPREGION
 *
rgn
, c⁄° 
MWRECT
 *
ª˘
)

236 
MWRECT
 *
pCurRe˘
, *
pRe˘End
;

237 
MWBOOL
 
ªt
 = 
FALSE
;

240 i‡((
rgn
->
numRe˘s
 > 0Ë&& 
	`EXTENTCHECK
(&rgn->
exã¡s
, 
ª˘
))

242 
pCurRe˘
 = 
rgn
->
ª˘s
, 
pRe˘End
 =ÖCurRect +

243 
rgn
->
numRe˘s
; 
pCurRe˘
 < 
pRe˘End
;ÖCurRect++)

245 i‡(
pCurRe˘
->
bŸtom
 <
ª˘
->
t›
)

248 i‡(
pCurRe˘
->
t›
 >
ª˘
->
bŸtom
) {

249 
ªt
 = 
FALSE
;

253 i‡(
pCurRe˘
->
right
 <
ª˘
->
À·
)

256 i‡(
pCurRe˘
->
À·
 >
ª˘
->
right
) {

260 
ªt
 = 
TRUE
;

264  
ªt
;

265 
	}
}

268 
MWBOOL


269 
	$EQUALRECT
(
MWRECT
 *
r1
, MWRECT *
r2
)

271  ((
r1
->
À·
 =
r2
->À·Ë&& (r1->
right
 ==Ñ2->right) &&

272 (
r1
->
t›
 =
r2
->t›Ë&& (r1->
bŸtom
 ==Ñ2->bottom));

273 
	}
}

282 
MWBOOL


283 
	$GdEquÆRegi⁄
(
MWCLIPREGION
 *
r1
, MWCLIPREGION *
r2
)

285 
i
;

287 i‡(
r1
->
numRe˘s
 !
r2
->numRects)

288  
FALSE
;

289 i‡(
r1
->
numRe˘s
 == 0)

290  
TRUE
;

291 i‡(!
	`EQUALRECT
(&
r1
->
exã¡s
, &
r2
->extents))

292  
FALSE
;

293 
i
 = 0; i < 
r1
->
numRe˘s
; i++) {

294 i‡(!
	`EQUALRECT
(
r1
->
ª˘s
 + 
i
, 
r2
->rects + i))

295  
FALSE
;

297  
TRUE
;

298 
	}
}

306 
MWBOOL


307 
	$GdEm±yRegi⁄
(
MWCLIPREGION
 *
rgn
)

309  
rgn
->
numRe˘s
 == 0;

310 
	}
}

317 
MWCLIPREGION
 *

318 
	$GdAŒocRegi⁄
()

320 
MWCLIPREGION
 *
rgn
;

322 i‡((
rgn
 = 
	`mÆloc
(–
MWCLIPREGION
 ))))

324 i‡((
rgn
->
ª˘s
 = 
	`mÆloc
(–
MWRECT
 ))))

326 
rgn
->
size
 = 1;

327 
	`EMPTY_REGION
(
rgn
);

328  
rgn
;

330 
	`‰ì
(
rgn
);

332  
NULL
;

333 
	}
}

344 
MWCLIPREGION
 *

345 
	$GdAŒocRe˘Regi⁄
(
MWCOORD
 
À·
, MWCOORD 
t›
, MWCOORD 
right
, MWCOORD 
bŸtom
)

347 
MWCLIPREGION
 *
rgn
;

349 
rgn
 = 
	`GdAŒocRegi⁄
();

350 i‡(
rgn
)

351 
	`GdSëRe˘Regi⁄
(
rgn
, 
À·
, 
t›
, 
right
, 
bŸtom
);

352  
rgn
;

353 
	}
}

361 
MWCLIPREGION
 *

362 
	$GdAŒocRe˘Regi⁄Indúe˘
(
MWRECT
 *
¥c
)

364  
	`GdAŒocRe˘Regi⁄
(
¥c
->
À·
,Örc->
t›
,Örc->
right
,Örc->
bŸtom
);

365 
	}
}

378 
	$GdSëRe˘Regi⁄
(
MWCLIPREGION
 *
rgn
, 
MWCOORD
 
À·
, MWCOORD 
t›
, MWCOORD 
right
,

379 
MWCOORD
 
bŸtom
)

381 i‡(
À·
 !
right
 && 
t›
 !
bŸtom
) {

382 
rgn
->
ª˘s
->
À·
 =Ñgn->
exã¡s
.left =Üeft;

383 
rgn
->
ª˘s
->
t›
 =Ñgn->
exã¡s
.top =Åop;

384 
rgn
->
ª˘s
->
right
 =Ñgn->
exã¡s
.right =Ñight;

385 
rgn
->
ª˘s
->
bŸtom
 =Ñgn->
exã¡s
.bottom = bottom;

386 
rgn
->
numRe˘s
 = 1;

387 
rgn
->
ty≥
 = 
MWREGION_SIMPLE
;

389 
	`EMPTY_REGION
(
rgn
);

390 
	}
}

400 
	$GdSëRe˘Regi⁄Indúe˘
(
MWCLIPREGION
 *
rgn
, 
MWRECT
 *
¥c
)

402 
	`GdSëRe˘Regi⁄
(
rgn
, 
¥c
->
À·
,Örc->
t›
,Örc->
right
,Örc->
bŸtom
);

403 
	}
}

411 
	$GdDe°royRegi⁄
(
MWCLIPREGION
 *
rgn
)

413 if(
rgn
) {

414 
	`‰ì
(
rgn
->
ª˘s
);

415 
	`‰ì
(
rgn
);

417 
	}
}

427 
	$GdOff£tRegi⁄
(
MWCLIPREGION
 *
rgn
, 
MWCOORD
 
x
, MWCOORD 
y
)

429 
nbox
 = 
rgn
->
numRe˘s
;

430 
MWRECT
 *
pbox
 = 
rgn
->
ª˘s
;

432 if(
nbox
 && (
x
 || 
y
)) {

433 
nbox
--) {

434 
pbox
->
À·
 +
x
;

435 
pbox
->
right
 +
x
;

436 
pbox
->
t›
 +
y
;

437 
pbox
->
bŸtom
 +
y
;

438 
pbox
++;

440 
rgn
->
exã¡s
.
À·
 +
x
;

441 
rgn
->
exã¡s
.
right
 +
x
;

442 
rgn
->
exã¡s
.
t›
 +
y
;

443 
rgn
->
exã¡s
.
bŸtom
 +
y
;

445 
	}
}

457 
	$GdGëRegi⁄Box
(
MWCLIPREGION
 *
rgn
, 
MWRECT
 *
¥c
)

459 *
¥c
 = 
rgn
->
exã¡s
;

460  
rgn
->
ty≥
;

461 
	}
}

470 
	$GdUni⁄Re˘WôhRegi⁄
(c⁄° 
MWRECT
 *
ª˘
, 
MWCLIPREGION
 *
rgn
)

472 
MWCLIPREGION
 
ªgi⁄
;

474 
ªgi⁄
.
ª˘s
 = &ªgi⁄.
exã¡s
;

475 
ªgi⁄
.
numRe˘s
 = 1;

476 
ªgi⁄
.
size
 = 1;

477 
ªgi⁄
.
ty≥
 = 
MWREGION_SIMPLE
;

478 
ªgi⁄
.
exã¡s
 = *
ª˘
;

479 
	`GdUni⁄Regi⁄
(
rgn
,Ñgn, &
ªgi⁄
);

480 
	}
}

489 
	$GdSubåa˘Re˘FromRegi⁄
(c⁄° 
MWRECT
 *
ª˘
, 
MWCLIPREGION
 *
rgn
)

491 
MWCLIPREGION
 
ªgi⁄
;

493 
ªgi⁄
.
ª˘s
 = &ªgi⁄.
exã¡s
;

494 
ªgi⁄
.
numRe˘s
 = 1;

495 
ªgi⁄
.
size
 = 1;

496 
ªgi⁄
.
ty≥
 = 
MWREGION_SIMPLE
;

497 
ªgi⁄
.
exã¡s
 = *
ª˘
;

498 
	`GdSubåa˘Regi⁄
(
rgn
,Ñgn, &
ªgi⁄
);

499 
	}
}

509 
	$GdC›yRegi⁄
(
MWCLIPREGION
 *
d°
, MWCLIPREGION *
§c
)

511 i‡(
d°
 !
§c
)

513 i‡(
d°
->
size
 < 
§c
->
numRe˘s
)

515 i‡(! (
d°
->
ª˘s
 = 
	`GdRóŒoc
–d°->ª˘s, d°->
numRe˘s
 * (
MWRECT
), 
§c
->numRects * (MWRECT))))

517 
d°
->
size
 = 
§c
->
numRe˘s
;

519 
d°
->
numRe˘s
 = 
§c
->numRects;

520 
d°
->
exã¡s
.
À·
 = 
§c
->extents.left;

521 
d°
->
exã¡s
.
t›
 = 
§c
->extents.top;

522 
d°
->
exã¡s
.
right
 = 
§c
->extents.right;

523 
d°
->
exã¡s
.
bŸtom
 = 
§c
->extents.bottom;

524 
d°
->
ty≥
 = 
§c
->type;

526 
	`mem˝y
((*Ë
d°
->
ª˘s
, (*Ë
§c
->rects,

527 (Ë(
§c
->
numRe˘s
 * (
MWRECT
)));

529 
	}
}

537 
	$REGION_SëExã¡s
 (
MWCLIPREGION
 *
pReg
)

539 
MWRECT
 *
pRe˘
, *
pRe˘End
, *
pExã¡s
;

541 i‡(
pReg
->
numRe˘s
 == 0)

543 
pReg
->
exã¡s
.
À·
 = 0;

544 
pReg
->
exã¡s
.
t›
 = 0;

545 
pReg
->
exã¡s
.
right
 = 0;

546 
pReg
->
exã¡s
.
bŸtom
 = 0;

550 
pExã¡s
 = &
pReg
->
exã¡s
;

551 
pRe˘
 = 
pReg
->
ª˘s
;

552 
pRe˘End
 = &
pRe˘
[
pReg
->
numRe˘s
 - 1];

561 
pExã¡s
->
À·
 = 
pRe˘
->left;

562 
pExã¡s
->
t›
 = 
pRe˘
->top;

563 
pExã¡s
->
right
 = 
pRe˘End
->right;

564 
pExã¡s
->
bŸtom
 = 
pRe˘End
->bottom;

566 
pRe˘
 <
pRe˘End
)

568 i‡(
pRe˘
->
À·
 < 
pExã¡s
->left)

569 
pExã¡s
->
À·
 = 
pRe˘
->left;

570 i‡(
pRe˘
->
right
 > 
pExã¡s
->right)

571 
pExã¡s
->
right
 = 
pRe˘
->right;

572 
pRe˘
++;

574 
	}
}

593 
MWCOORD


594 
	$REGION_CﬂÀs˚
 (

595 
MWCLIPREGION
 *
pReg
,

596 
MWCOORD
 
¥evSèπ
,

597 
MWCOORD
 
curSèπ


599 
MWRECT
 *
pPªvRe˘
;

600 
MWRECT
 *
pCurRe˘
;

601 
MWRECT
 *
pRegEnd
;

602 
MWCOORD
 
curNumRe˘s
;

603 
MWCOORD
 
¥evNumRe˘s
;

604 
MWCOORD
 
b™dt›
;

606 
pRegEnd
 = &
pReg
->
ª˘s
[pReg->
numRe˘s
];

608 
pPªvRe˘
 = &
pReg
->
ª˘s
[
¥evSèπ
];

609 
¥evNumRe˘s
 = 
curSèπ
 - 
¥evSèπ
;

616 
pCurRe˘
 = &
pReg
->
ª˘s
[
curSèπ
];

617 
b™dt›
 = 
pCurRe˘
->
t›
;

618 
curNumRe˘s
 = 0;

619 (
pCurRe˘
 !
pRegEnd
Ë&& (pCurRe˘->
t›
 =
b™dt›
);

620 
curNumRe˘s
++)

622 
pCurRe˘
++;

625 i‡(
pCurRe˘
 !
pRegEnd
)

633 
pRegEnd
--;

634 
pRegEnd
[-1].
t›
 ==ÖRegEnd->top)

636 
pRegEnd
--;

638 
curSèπ
 = 
pRegEnd
 - 
pReg
->
ª˘s
;

639 
pRegEnd
 = 
pReg
->
ª˘s
 +ÖReg->
numRe˘s
;

642 i‡((
curNumRe˘s
 =
¥evNumRe˘s
) && (curNumRects != 0)) {

643 
pCurRe˘
 -
curNumRe˘s
;

648 i‡(
pPªvRe˘
->
bŸtom
 =
pCurRe˘
->
t›
)

658 i‡((
pPªvRe˘
->
À·
 !
pCurRe˘
->left) ||

659 (
pPªvRe˘
->
right
 !
pCurRe˘
->right))

664  (
curSèπ
);

666 
pPªvRe˘
++;

667 
pCurRe˘
++;

668 
¥evNumRe˘s
 -= 1;

669 } 
¥evNumRe˘s
 != 0);

671 
pReg
->
numRe˘s
 -
curNumRe˘s
;

672 
pCurRe˘
 -
curNumRe˘s
;

673 
pPªvRe˘
 -
curNumRe˘s
;

682 
pPªvRe˘
->
bŸtom
 = 
pCurRe˘
->bottom;

683 
pPªvRe˘
++;

684 
pCurRe˘
++;

685 
curNumRe˘s
 -= 1;

686 } 
curNumRe˘s
 != 0);

698 i‡(
pCurRe˘
 =
pRegEnd
)

700 
curSèπ
 = 
¥evSèπ
;

706 *
pPªvRe˘
++ = *
pCurRe˘
++;

707 } 
pCurRe˘
 !
pRegEnd
);

712  (
curSèπ
);

713 
	}
}

741 
	$REGION_Regi⁄Op
(

742 
MWCLIPREGION
 *
√wReg
,

743 
MWCLIPREGION
 *
ªg1
,

744 
MWCLIPREGION
 *
ªg2
,

745 
REGION_OvîœpB™dFun˘i⁄På
 
ovîœpFunc
,

746 
REGION_N⁄OvîœpB™dFun˘i⁄På
 
n⁄Ovîœp1Func
,

747 
REGION_N⁄OvîœpB™dFun˘i⁄På
 
n⁄Ovîœp2Func


749 
MWRECT
 *
r1
;

750 
MWRECT
 *
r2
;

751 
MWRECT
 *
r1End
;

752 
MWRECT
 *
r2End
;

753 
MWCOORD
 
ybŸ
;

754 
MWCOORD
 
yt›
;

755 
MWRECT
 *
ﬁdRe˘s
;

756 
MWCOORD
 
¥evB™d
;

758 
MWCOORD
 
curB™d
;

760 
MWRECT
 *
r1B™dEnd
;

761 
MWRECT
 *
r2B™dEnd
;

762 
MWCOORD
 
t›
;

763 
MWCOORD
 
bŸ
;

772 
r1
 = 
ªg1
->
ª˘s
;

773 
r2
 = 
ªg2
->
ª˘s
;

774 
r1End
 = 
r1
 + 
ªg1
->
numRe˘s
;

775 
r2End
 = 
r2
 + 
ªg2
->
numRe˘s
;

784 
ﬁdRe˘s
 = 
√wReg
->
ª˘s
;

785 
√wReg
->
numRe˘s
 = 0;

794 
√wReg
->
size
 = 
	`MWMAX
(
ªg1
->
numRe˘s
,
ªg2
->numRects) * 2;

796 i‡(! (
√wReg
->
ª˘s
 = 
	`mÆloc
–(
MWRECT
Ë*ÇewReg->
size
 )))

798 
√wReg
->
size
 = 0;

815 i‡(
ªg1
->
exã¡s
.
t›
 < 
ªg2
->extents.top)

816 
ybŸ
 = 
ªg1
->
exã¡s
.
t›
;

818 
ybŸ
 = 
ªg2
->
exã¡s
.
t›
;

829 
¥evB™d
 = 0;

833 
curB™d
 = 
√wReg
->
numRe˘s
;

842 
r1B™dEnd
 = 
r1
;

843 (
r1B™dEnd
 !
r1End
Ë&& (r1B™dEnd->
t›
 =
r1
->top))

845 
r1B™dEnd
++;

848 
r2B™dEnd
 = 
r2
;

849 (
r2B™dEnd
 !
r2End
Ë&& (r2B™dEnd->
t›
 =
r2
->top))

851 
r2B™dEnd
++;

862 i‡(
r1
->
t›
 < 
r2
->top)

864 
t›
 = 
	`MWMAX
(
r1
->t›,
ybŸ
);

865 
bŸ
 = 
	`MWMIN
(
r1
->
bŸtom
,
r2
->
t›
);

867 i‡((
t›
 !
bŸ
Ë&& (
n⁄Ovîœp1Func
 !((*)())
NULL
))

869 (* 
n⁄Ovîœp1Func
Ë(
√wReg
, 
r1
, 
r1B™dEnd
, 
t›
, 
bŸ
);

872 
yt›
 = 
r2
->
t›
;

874 i‡(
r2
->
t›
 < 
r1
->top)

876 
t›
 = 
	`MWMAX
(
r2
->t›,
ybŸ
);

877 
bŸ
 = 
	`MWMIN
(
r2
->
bŸtom
,
r1
->
t›
);

879 i‡((
t›
 !
bŸ
Ë&& (
n⁄Ovîœp2Func
 !((*)())
NULL
))

881 (* 
n⁄Ovîœp2Func
Ë(
√wReg
, 
r2
, 
r2B™dEnd
, 
t›
, 
bŸ
);

884 
yt›
 = 
r1
->
t›
;

888 
yt›
 = 
r1
->
t›
;

897 i‡(
√wReg
->
numRe˘s
 !
curB™d
)

899 
¥evB™d
 = 
	`REGION_CﬂÀs˚
 (
√wReg
,ÖªvB™d, 
curB™d
);

906 
ybŸ
 = 
	`MWMIN
(
r1
->
bŸtom
, 
r2
->bottom);

907 
curB™d
 = 
√wReg
->
numRe˘s
;

908 i‡(
ybŸ
 > 
yt›
)

910 (* 
ovîœpFunc
Ë(
√wReg
, 
r1
, 
r1B™dEnd
, 
r2
, 
r2B™dEnd
, 
yt›
, 
ybŸ
);

914 i‡(
√wReg
->
numRe˘s
 !
curB™d
)

916 
¥evB™d
 = 
	`REGION_CﬂÀs˚
 (
√wReg
,ÖªvB™d, 
curB™d
);

923 i‡(
r1
->
bŸtom
 =
ybŸ
)

925 
r1
 = 
r1B™dEnd
;

927 i‡(
r2
->
bŸtom
 =
ybŸ
)

929 
r2
 = 
r2B™dEnd
;

931 } (
r1
 !
r1End
Ë&& (
r2
 !
r2End
));

936 
curB™d
 = 
√wReg
->
numRe˘s
;

937 i‡(
r1
 !
r1End
)

939 i‡(
n⁄Ovîœp1Func
 !((*)())
NULL
)

943 
r1B™dEnd
 = 
r1
;

944 (
r1B™dEnd
 < 
r1End
Ë&& (r1B™dEnd->
t›
 =
r1
->top))

946 
r1B™dEnd
++;

948 (* 
n⁄Ovîœp1Func
Ë(
√wReg
, 
r1
, 
r1B™dEnd
,

949 
	`MWMAX
(
r1
->
t›
,
ybŸ
),Ñ1->
bŸtom
);

950 
r1
 = 
r1B™dEnd
;

951 } 
r1
 !
r1End
);

954 i‡((
r2
 !
r2End
Ë&& (
n⁄Ovîœp2Func
 !((*)())
NULL
))

958 
r2B™dEnd
 = 
r2
;

959 (
r2B™dEnd
 < 
r2End
Ë&& (r2B™dEnd->
t›
 =
r2
->top))

961 
r2B™dEnd
++;

963 (* 
n⁄Ovîœp2Func
Ë(
√wReg
, 
r2
, 
r2B™dEnd
,

964 
	`MWMAX
(
r2
->
t›
,
ybŸ
),Ñ2->
bŸtom
);

965 
r2
 = 
r2B™dEnd
;

966 } 
r2
 !
r2End
);

969 i‡(
√wReg
->
numRe˘s
 !
curB™d
)

971 (Ë
	`REGION_CﬂÀs˚
 (
√wReg
, 
¥evB™d
, 
curB™d
);

982 i‡(
√wReg
->
numRe˘s
 < (√wReg->
size
 >> 1))

984 i‡(
	`REGION_NOT_EMPTY
(
√wReg
))

986 
MWRECT
 *
¥ev_ª˘s
 = 
√wReg
->
ª˘s
;

987 
√wReg
->
ª˘s
 = 
	`GdRóŒoc
–√wReg->ª˘s, (
MWRECT
Ë*ÇewReg->
size
, (MWRECTË*ÇewReg->
numRe˘s
 );

988 
√wReg
->
size
 =ÇewReg->
numRe˘s
;

989 i‡(! 
√wReg
->
ª˘s
)

990 
√wReg
->
ª˘s
 = 
¥ev_ª˘s
;

998 
√wReg
->
size
 = 1;

999 
	`‰ì
–
√wReg
->
ª˘s
 );

1000 
√wReg
->
ª˘s
 = 
	`mÆloc
–(
MWRECT
) );

1003 
	`‰ì
–
ﬁdRe˘s
 );

1004 
	}
}

1024 
	$REGION_I¡î£˘O
(
MWCLIPREGION
 *
pReg
, 
MWRECT
 *
r1
, MWRECT *
r1End
,

1025 
MWRECT
 *
r2
, MWRECT *
r2End
, 
MWCOORD
 
t›
, MWCOORD 
bŸtom
)

1028 
MWCOORD
 
À·
, 
right
;

1029 
MWRECT
 *
pNextRe˘
;

1031 
pNextRe˘
 = &
pReg
->
ª˘s
[pReg->
numRe˘s
];

1033 (
r1
 !
r1End
Ë&& (
r2
 !
r2End
))

1035 
À·
 = 
	`MWMAX
(
r1
->À·, 
r2
->left);

1036 
right
 = 
	`MWMIN
(
r1
->right, 
r2
->right);

1045 i‡(
À·
 < 
right
)

1047 
	`MEMCHECK
(
pReg
, 
pNextRe˘
,ÖReg->
ª˘s
);

1048 
pNextRe˘
->
À·
 =Üeft;

1049 
pNextRe˘
->
t›
 =Åop;

1050 
pNextRe˘
->
right
 =Ñight;

1051 
pNextRe˘
->
bŸtom
 = bottom;

1052 
pReg
->
numRe˘s
 += 1;

1053 
pNextRe˘
++;

1061 i‡(
r1
->
right
 < 
r2
->right)

1063 
r1
++;

1065 i‡(
r2
->
right
 < 
r1
->right)

1067 
r2
++;

1071 
r1
++;

1072 
r2
++;

1075 
	}
}

1086 
	$GdI¡î£˘Regi⁄
(
MWCLIPREGION
 *
√wReg
, MWCLIPREGION *
ªg1
, MWCLIPREGION *
ªg2
)

1089 i‡–(!(
ªg1
->
numRe˘s
)Ë|| (!(
ªg2
->numRects)) ||

1090 (!
	`EXTENTCHECK
(&
ªg1
->
exã¡s
, &
ªg2
->extents)))

1091 
√wReg
->
numRe˘s
 = 0;

1093 
	`REGION_Regi⁄Op
 (
√wReg
, 
ªg1
, 
ªg2
, 
REGION_I¡î£˘O
, 
NULL
, NULL);

1102 
	`REGION_SëExã¡s
(
√wReg
);

1103 
√wReg
->
ty≥
 = (√wReg->
numRe˘s
Ë? 
MWREGION_COMPLEX
 : 
MWREGION_NULL
 ;

1104 
	}
}

1126 
	$REGION_Uni⁄N⁄O
(
MWCLIPREGION
 *
pReg
,
MWRECT
 *
r
,MWRECT *
rEnd
,
MWCOORD
 
t›
,

1127 
MWCOORD
 
bŸtom
)

1129 
MWRECT
 *
pNextRe˘
;

1131 
pNextRe˘
 = &
pReg
->
ª˘s
[pReg->
numRe˘s
];

1133 
r
 !
rEnd
)

1135 
	`MEMCHECK
(
pReg
, 
pNextRe˘
,ÖReg->
ª˘s
);

1136 
pNextRe˘
->
À·
 = 
r
->left;

1137 
pNextRe˘
->
t›
 =Åop;

1138 
pNextRe˘
->
right
 = 
r
->right;

1139 
pNextRe˘
->
bŸtom
 = bottom;

1140 
pReg
->
numRe˘s
 += 1;

1141 
pNextRe˘
++;

1142 
r
++;

1144 
	}
}

1161 
	$REGION_Uni⁄O
(
MWCLIPREGION
 *
pReg
, 
MWRECT
 *
r1
, MWRECT *
r1End
,

1162 
MWRECT
 *
r2
, MWRECT *
r2End
, 
MWCOORD
 
t›
, MWCOORD 
bŸtom
)

1164 
MWRECT
 *
pNextRe˘
;

1166 
pNextRe˘
 = &
pReg
->
ª˘s
[pReg->
numRe˘s
];

1168 
	#MERGERECT
(
r
) \

1169 i‡((
pReg
->
numRe˘s
 != 0) && \

1170 (
pNextRe˘
[-1].
t›
 ==Åop) && \

1171 (
pNextRe˘
[-1].
bŸtom
 == bottom) && \

1172 (
pNextRe˘
[-1].
right
 >
r
->
À·
)) \

1174 i‡(
pNextRe˘
[-1].
right
 < 
r
->right) \

1176 
pNextRe˘
[-1].
right
 = 
r
->right; \

1181 
	`MEMCHECK
(
pReg
, 
pNextRe˘
,ÖReg->
ª˘s
); \

1182 
pNextRe˘
->
t›
 =Åop; \

1183 
pNextRe˘
->
bŸtom
 = bottom; \

1184 
pNextRe˘
->
À·
 = 
r
->left; \

1185 
pNextRe˘
->
right
 = 
r
->right; \

1186 
pReg
->
numRe˘s
 += 1; \

1187 
pNextRe˘
 += 1; \

1189 
r
++;

	)

1191 (
r1
 !
r1End
Ë&& (
r2
 !
r2End
))

1193 i‡(
r1
->
À·
 < 
r2
->left)

1195 
	`MERGERECT
(
r1
);

1199 
	`MERGERECT
(
r2
);

1203 i‡(
r1
 !
r1End
)

1207 
	`MERGERECT
(
r1
);

1208 } 
r1
 !
r1End
);

1210 
r2
 !
r2End
)

1212 
	`MERGERECT
(
r2
);

1214 
	}
}

1225 
	$GdUni⁄Regi⁄
(
MWCLIPREGION
 *
√wReg
, MWCLIPREGION *
ªg1
, MWCLIPREGION *
ªg2
)

1232 i‡–(
ªg1
 =
ªg2
Ë|| (!‘eg1->
numRe˘s
)) )

1234 i‡(
√wReg
 !
ªg2
)

1235 
	`GdC›yRegi⁄
(
√wReg
, 
ªg2
);

1242 i‡(!(
ªg2
->
numRe˘s
))

1244 i‡(
√wReg
 !
ªg1
)

1245 
	`GdC›yRegi⁄
(
√wReg
, 
ªg1
);

1252 i‡((
ªg1
->
numRe˘s
 == 1) &&

1253 (
ªg1
->
exã¡s
.
À·
 <
ªg2
->extents.left) &&

1254 (
ªg1
->
exã¡s
.
t›
 <
ªg2
->extents.top) &&

1255 (
ªg1
->
exã¡s
.
right
 >
ªg2
->extents.right) &&

1256 (
ªg1
->
exã¡s
.
bŸtom
 >
ªg2
->extents.bottom))

1258 i‡(
√wReg
 !
ªg1
)

1259 
	`GdC›yRegi⁄
(
√wReg
, 
ªg1
);

1266 i‡((
ªg2
->
numRe˘s
 == 1) &&

1267 (
ªg2
->
exã¡s
.
À·
 <
ªg1
->extents.left) &&

1268 (
ªg2
->
exã¡s
.
t›
 <
ªg1
->extents.top) &&

1269 (
ªg2
->
exã¡s
.
right
 >
ªg1
->extents.right) &&

1270 (
ªg2
->
exã¡s
.
bŸtom
 >
ªg1
->extents.bottom))

1272 i‡(
√wReg
 !
ªg2
)

1273 
	`GdC›yRegi⁄
(
√wReg
, 
ªg2
);

1277 
	`REGION_Regi⁄Op
 (
√wReg
, 
ªg1
, 
ªg2
, 
REGION_Uni⁄O
,

1278 
REGION_Uni⁄N⁄O
, REGION_UnionNonO);

1280 
√wReg
->
exã¡s
.
À·
 = 
	`MWMIN
(
ªg1
->exã¡s.À·, 
ªg2
->extents.left);

1281 
√wReg
->
exã¡s
.
t›
 = 
	`MWMIN
(
ªg1
->exã¡s.t›, 
ªg2
->extents.top);

1282 
√wReg
->
exã¡s
.
right
 = 
	`MWMAX
(
ªg1
->exã¡s.right, 
ªg2
->extents.right);

1283 
√wReg
->
exã¡s
.
bŸtom
 = 
	`MWMAX
(
ªg1
->exã¡s.bŸtom, 
ªg2
->extents.bottom);

1284 
√wReg
->
ty≥
 = (√wReg->
numRe˘s
Ë? 
MWREGION_COMPLEX
 : 
MWREGION_NULL
 ;

1285 
	}
}

1305 
	$REGION_Subåa˘N⁄O1
(
MWCLIPREGION
 *
pReg
, 
MWRECT
 *
r
, MWRECT *
rEnd
,

1306 
MWCOORD
 
t›
, MWCOORD 
bŸtom
)

1308 
MWRECT
 *
pNextRe˘
;

1310 
pNextRe˘
 = &
pReg
->
ª˘s
[pReg->
numRe˘s
];

1312 
r
 !
rEnd
)

1314 
	`MEMCHECK
(
pReg
, 
pNextRe˘
,ÖReg->
ª˘s
);

1315 
pNextRe˘
->
À·
 = 
r
->left;

1316 
pNextRe˘
->
t›
 =Åop;

1317 
pNextRe˘
->
right
 = 
r
->right;

1318 
pNextRe˘
->
bŸtom
 = bottom;

1319 
pReg
->
numRe˘s
 += 1;

1320 
pNextRe˘
++;

1321 
r
++;

1323 
	}
}

1340 
	$REGION_Subåa˘O
(
MWCLIPREGION
 *
pReg
, 
MWRECT
 *
r1
, MWRECT *
r1End
,

1341 
MWRECT
 *
r2
, MWRECT *
r2End
, 
MWCOORD
 
t›
, MWCOORD 
bŸtom
)

1343 
MWRECT
 *
pNextRe˘
;

1344 
MWCOORD
 
À·
;

1346 
À·
 = 
r1
->left;

1347 
pNextRe˘
 = &
pReg
->
ª˘s
[pReg->
numRe˘s
];

1349 (
r1
 !
r1End
Ë&& (
r2
 !
r2End
))

1351 i‡(
r2
->
right
 <
À·
)

1356 
r2
++;

1358 i‡(
r2
->
À·
 <=Üeft)

1363 
À·
 = 
r2
->
right
;

1364 i‡(
À·
 >
r1
->
right
)

1370 
r1
++;

1371 i‡(
r1
 !
r1End
)

1372 
À·
 = 
r1
->left;

1380 
r2
++;

1383 i‡(
r2
->
À·
 < 
r1
->
right
)

1389 
	`MEMCHECK
(
pReg
, 
pNextRe˘
,ÖReg->
ª˘s
);

1390 
pNextRe˘
->
À·
 =Üeft;

1391 
pNextRe˘
->
t›
 =Åop;

1392 
pNextRe˘
->
right
 = 
r2
->
À·
;

1393 
pNextRe˘
->
bŸtom
 = bottom;

1394 
pReg
->
numRe˘s
 += 1;

1395 
pNextRe˘
++;

1396 
À·
 = 
r2
->
right
;

1397 i‡(
À·
 >
r1
->
right
)

1402 
r1
++;

1403 i‡(
r1
 !
r1End
)

1404 
À·
 = 
r1
->left;

1411 
r2
++;

1419 i‡(
r1
->
right
 > 
À·
)

1421 
	`MEMCHECK
(
pReg
, 
pNextRe˘
,ÖReg->
ª˘s
);

1422 
pNextRe˘
->
À·
 =Üeft;

1423 
pNextRe˘
->
t›
 =Åop;

1424 
pNextRe˘
->
right
 = 
r1
->right;

1425 
pNextRe˘
->
bŸtom
 = bottom;

1426 
pReg
->
numRe˘s
 += 1;

1427 
pNextRe˘
++;

1429 
r1
++;

1430 
À·
 = 
r1
->left;

1437 
r1
 !
r1End
)

1439 
	`MEMCHECK
(
pReg
, 
pNextRe˘
,ÖReg->
ª˘s
);

1440 
pNextRe˘
->
À·
 =Üeft;

1441 
pNextRe˘
->
t›
 =Åop;

1442 
pNextRe˘
->
right
 = 
r1
->right;

1443 
pNextRe˘
->
bŸtom
 = bottom;

1444 
pReg
->
numRe˘s
 += 1;

1445 
pNextRe˘
++;

1446 
r1
++;

1447 i‡(
r1
 !
r1End
)

1449 
À·
 = 
r1
->left;

1452 
	}
}

1463 
	$GdSubåa˘Regi⁄
(
MWCLIPREGION
 *
ªgD
, MWCLIPREGION *
ªgM
, MWCLIPREGION *
ªgS
 )

1466 i‡–(!(
ªgM
->
numRe˘s
)Ë|| (!(
ªgS
->numRects)) ||

1467 (!
	`EXTENTCHECK
(&
ªgM
->
exã¡s
, &
ªgS
->extents)) )

1469 
	`GdC›yRegi⁄
(
ªgD
, 
ªgM
);

1473 
	`REGION_Regi⁄Op
 (
ªgD
, 
ªgM
, 
ªgS
, 
REGION_Subåa˘O
,

1474 
REGION_Subåa˘N⁄O1
, 
NULL
);

1483 
	`REGION_SëExã¡s
 (
ªgD
);

1484 
ªgD
->
ty≥
 = (ªgD->
numRe˘s
Ë? 
MWREGION_COMPLEX
 : 
MWREGION_NULL
 ;

1485 
	}
}

1496 
	$GdX‹Regi⁄
(
MWCLIPREGION
 *
dr
, MWCLIPREGION *
§a
, MWCLIPREGION *
§b
)

1498 
MWCLIPREGION
 *
åa
, *
åb
;

1500 i‡((! (
åa
 = 
	`GdAŒocRegi⁄
())Ë|| (! (
åb
 = GdAllocRegion())))

1502 
	`GdSubåa˘Regi⁄
(
åa
,
§a
,
§b
);

1503 
	`GdSubåa˘Regi⁄
(
åb
,
§b
,
§a
);

1504 
	`GdUni⁄Regi⁄
(
dr
,
åa
,
åb
);

1505 
	`GdDe°royRegi⁄
(
åa
);

1506 
	`GdDe°royRegi⁄
(
åb
);

1507 
	}
}

1509 
MWCLIPREGION
 *

1510 
	$GdAŒocBôm≠Regi⁄
(
MWIMAGEBITS
 *
bôm≠
, 
MWCOORD
 
width
, MWCOORD 
height
)

1512 
MWRECT
 
ª˘
;

1513 
MWIMAGEBITS
 
bôs
 = 
bôm≠
[0];

1514 
MWCLIPREGION
 * 
rgn
;

1515 
x
, 
y
, 
öª˘
 = 0, 
bônum
 = 0, 
i
 = 0;

1517 if(!(
rgn
 = 
	`GdAŒocRegi⁄
()))

1518  
NULL
;

1521 if(!
bôm≠
 || !
width
 || !
height
)

1522  
rgn
;

1524 
y
 = 0; y < 
height
; y++) {

1525 
ª˘
.
t›
 = 
y
;

1526 
ª˘
.
bŸtom
 = 
y
 + 1;

1527 
x
 = 0; x < 
width
; x++) {

1528 if(!
bônum
--) {

1529 
bônum
 = 15;

1530 
bôs
 = 
bôm≠
[
i
++];

1532 if(
bôs
 & 0x8000) {

1533 if(!
öª˘
) {

1534 
öª˘
 = 1;

1535 
ª˘
.
À·
 = 
x
;

1538 if(
öª˘
) {

1539 
öª˘
 = 0;

1540 
ª˘
.
right
 = 
x
;

1541 
	`GdUni⁄Re˘WôhRegi⁄
(&
ª˘
, 
rgn
);

1544 
bôs
 <<= 1;

1546 if(
öª˘
) {

1547 
ª˘
.
right
 = 
x
;

1548 
	`GdUni⁄Re˘WôhRegi⁄
(&
ª˘
, 
rgn
);

1550 
öª˘
 = 0;

1551 
bônum
 = 0;

1554  
rgn
;

1555 
	}
}

1563 
	$DumpRegi⁄
(
MWCLIPREGION
 *
pReg
)

1565 
MWRECT
 *
pRe˘
, *
pRe˘End
 = 
pReg
->
ª˘s
 +ÖReg->
numRe˘s
;

1567 
	`DPRINTF
("Regi⁄ %p: %d,%d - %d,%d %dÑe˘s\n", 
pReg
,

1568 
pReg
->
exã¡s
.
À·
,ÖReg->exã¡s.
t›
,

1569 
pReg
->
exã¡s
.
right
,ÖReg->exã¡s.
bŸtom
,ÖReg->
numRe˘s
);

1570 
pRe˘
 = 
pReg
->
ª˘s
;ÖRe˘ < 
pRe˘End
;ÖRect++)

1571 
	`DPRINTF
("\t%d,%d - %d,%d\n", 
pRe˘
->
À·
,ÖRe˘->
t›
,

1572 
pRe˘
->
right
,ÖRe˘->
bŸtom
);

1573 
	}
}

	@engine/devrgn2.c

64 
	~<°dio.h
>

65 
	~<°dlib.h
>

66 
	~"devi˚.h
"

68 #i‡
POLYREGIONS


74 
	#NUMPTSTOBUFFER
 200

	)

81 
	s_POINTBLOCK
 {

82 
MWPOINT
 
	m±s
[
NUMPTSTOBUFFER
];

83 
_POINTBLOCK
 *
	m√xt
;

84 } 
	tPOINTBLOCK
;

121 
	#BRESINITPGON
(
dy
, 
x1
, 
x2
, 
xSèπ
, 
d
, 
m
, 
m1
, 
ö¸1
, 
ö¸2
) { \

122 
dx
; \

128 i‡((
dy
) != 0) { \

129 
xSèπ
 = (
x1
); \

130 
dx
 = (
x2
Ë- 
xSèπ
; \

131 i‡(
dx
 < 0) { \

132 
m
 = 
dx
 / (
dy
); \

133 
m1
 = 
m
 - 1; \

134 
ö¸1
 = (-2Ë* (
dx
Ë+ 2 * (
dy
Ë* (
m1
); \

135 
ö¸2
 = (-2Ë* (
dx
Ë+ 2 * (
dy
Ë* (
m
); \

136 
d
 = 2 * (
m
Ë* (
dy
Ë- 2 * (
dx
) - 2 * (dy); \

138 
m
 = 
dx
 / (
dy
); \

139 
m1
 = 
m
 + 1; \

140 
ö¸1
 = (2 * 
dx
Ë- 2 * (
dy
Ë* 
m1
; \

141 
ö¸2
 = (2 * 
dx
Ë- 2 * (
dy
Ë* 
m
; \

142 
d
 = (-2Ë* 
m
 * (
dy
Ë+ 2 * 
dx
; \

145 }

	)

147 
	#BRESINCRPGON
(
d
, 
mövÆ
, 
m
, 
m1
, 
ö¸1
, 
ö¸2
) { \

148 i‡(
m1
 > 0) { \

149 i‡(
d
 > 0) { \

150 
mövÆ
 +
m1
; \

151 
d
 +
ö¸1
; \

154 
mövÆ
 +
m
; \

155 
d
 +
ö¸2
; \

158 i‡(
d
 >= 0) { \

159 
mövÆ
 +
m1
; \

160 
d
 +
ö¸1
; \

163 
mövÆ
 +
m
; \

164 
d
 +
ö¸2
; \

167 }

	)

178 
MWCOORD
 
	mmö‹_axis
;

179 
	md
;

180 
	mm
, 
	mm1
;

181 
	mö¸1
, 
	mö¸2
;

182 } 
	tBRESINFO
;

184 
	#BRESINITPGONSTRUCT
(
dmaj
, 
mö1
, 
mö2
, 
bªs
) \

185 
	`BRESINITPGON
(
dmaj
, 
mö1
, 
mö2
, 
bªs
.
mö‹_axis
, bªs.
d
, \

186 
bªs
.
m
, bªs.
m1
, bªs.
ö¸1
, bªs.
ö¸2
)

	)

188 
	#BRESINCRPGONSTRUCT
(
bªs
) \

189 
	`BRESINCRPGON
(
bªs
.
d
, bªs.
mö‹_axis
, bªs.
m
, bªs.
m1
, bªs.
ö¸1
, bªs.
ö¸2
)

	)

241 
	#CLOCKWISE
 1

	)

242 
	#COUNTERCLOCKWISE
 -1

	)

244 
	s_EdgeTabÀE¡ry
 {

245 
MWCOORD
 
	mymax
;

246 
BRESINFO
 
	mbªs
;

247 
_EdgeTabÀE¡ry
 *
	m√xt
;

248 
_EdgeTabÀE¡ry
 *
	mback
;

249 
_EdgeTabÀE¡ry
 *
	m√xtWETE
;

250 
	mClockWi£
;

251 } 
	tEdgeTabÀE¡ry
;

254 
	s_SˇnLöeLi°
{

255 
	msˇ∆öe
;

256 
EdgeTabÀE¡ry
 *
	medgñi°
;

257 
_SˇnLöeLi°
 *
	m√xt
;

258 } 
	tSˇnLöeLi°
;

262 
MWCOORD
 
	mymax
;

263 
MWCOORD
 
	mymö
;

264 
SˇnLöeLi°
 
	msˇ∆öes
;

265 } 
	tEdgeTabÀ
;

273 
	#SLLSPERBLOCK
 25

	)

275 
	s_SˇnLöeLi°Block
 {

276 
SˇnLöeLi°
 
	mSLLs
[
SLLSPERBLOCK
];

277 
_SˇnLöeLi°Block
 *
	m√xt
;

278 } 
	tSˇnLöeLi°Block
;

293 
	#EVALUATEEDGEWINDING
(
pAET
, 
pPªvAET
, 
y
, 
fixWAET
) { \

294 i‡(
pAET
->
ymax
 =
y
) { \

295 
pPªvAET
->
√xt
 = 
pAET
->next; \

296 
pAET
 = 
pPªvAET
->
√xt
; \

297 
fixWAET
 = 1; \

298 i‡(
pAET
) \

299 
pAET
->
back
 = 
pPªvAET
; \

302 
	`BRESINCRPGONSTRUCT
(
pAET
->
bªs
); \

303 
pPªvAET
 = 
pAET
; \

304 
pAET
 =ÖAET->
√xt
; \

306 }

	)

316 
	#EVALUATEEDGEEVENODD
(
pAET
, 
pPªvAET
, 
y
) { \

317 i‡(
pAET
->
ymax
 =
y
) { \

318 
pPªvAET
->
√xt
 = 
pAET
->next; \

319 
pAET
 = 
pPªvAET
->
√xt
; \

320 i‡(
pAET
) \

321 
pAET
->
back
 = 
pPªvAET
; \

324 
	`BRESINCRPGONSTRUCT
(
pAET
->
bªs
); \

325 
pPªvAET
 = 
pAET
; \

326 
pAET
 =ÖAET->
√xt
; \

328 }

	)

332 
	#LARGE_COORDINATE
 
MWCOORD_MAX


	)

333 
	#SMALL_COORDINATE
 
MWCOORD_MIN


	)

344 
	$REGION_In£πEdgeInET
(
EdgeTabÀ
 *
ET
, 
EdgeTabÀE¡ry
 *
ETE
,

345 
sˇ∆öe
, 
SˇnLöeLi°Block
 **
SLLBlock
, *
iSLLBlock
)

348 
EdgeTabÀE¡ry
 *
°¨t
, *
¥ev
;

349 
SˇnLöeLi°
 *
pSLL
, *
pPªvSLL
;

350 
SˇnLöeLi°Block
 *
tmpSLLBlock
;

355 
pPªvSLL
 = &
ET
->
sˇ∆öes
;

356 
pSLL
 = 
pPªvSLL
->
√xt
;

357 
pSLL
 && (pSLL->
sˇ∆öe
 < scanline))

359 
pPªvSLL
 = 
pSLL
;

360 
pSLL
 =ÖSLL->
√xt
;

366 i‡((!
pSLL
Ë|| (pSLL->
sˇ∆öe
 > scanline))

368 i‡(*
iSLLBlock
 > 
SLLSPERBLOCK
-1)

370 
tmpSLLBlock
 = 
	`mÆloc
–(
SˇnLöeLi°Block
));

371 if(!
tmpSLLBlock
)

375 (*
SLLBlock
)->
√xt
 = 
tmpSLLBlock
;

376 
tmpSLLBlock
->
√xt
 = (
SˇnLöeLi°Block
 *)
NULL
;

377 *
SLLBlock
 = 
tmpSLLBlock
;

378 *
iSLLBlock
 = 0;

380 
pSLL
 = &((*
SLLBlock
)->
SLLs
[(*
iSLLBlock
)++]);

382 
pSLL
->
√xt
 = 
pPªvSLL
->next;

383 
pSLL
->
edgñi°
 = (
EdgeTabÀE¡ry
 *)
NULL
;

384 
pPªvSLL
->
√xt
 = 
pSLL
;

386 
pSLL
->
sˇ∆öe
 = scanline;

391 
¥ev
 = (
EdgeTabÀE¡ry
 *)
NULL
;

392 
°¨t
 = 
pSLL
->
edgñi°
;

393 
°¨t
 && (°¨t->
bªs
.
mö‹_axis
 < 
ETE
->bres.minor_axis))

395 
¥ev
 = 
°¨t
;

396 
°¨t
 = sèπ->
√xt
;

398 
ETE
->
√xt
 = 
°¨t
;

400 i‡(
¥ev
)

401 
¥ev
->
√xt
 = 
ETE
;

403 
pSLL
->
edgñi°
 = 
ETE
;

404 
	}
}

431 
	$REGION_Cª©eET™dAET
(*
Cou¡
, 
nbpﬁyg⁄s
,

432 
MWPOINT
 *
±s
, 
EdgeTabÀ
 *
ET
, 
EdgeTabÀE¡ry
 *
AET
,

433 
EdgeTabÀE¡ry
 *
pETEs
, 
SˇnLöeLi°Block
 *
pSLLBlock
)

435 
MWPOINT
 *
t›
, *
bŸtom
;

436 
MWPOINT
 *
PªvPt
, *
CuºPt
, *
EndPt
;

437 
pﬁy
, 
cou¡
;

438 
iSLLBlock
 = 0;

439 
dy
;

445 
AET
->
√xt
 = (
EdgeTabÀE¡ry
 *)
NULL
;

446 
AET
->
back
 = (
EdgeTabÀE¡ry
 *)
NULL
;

447 
AET
->
√xtWETE
 = (
EdgeTabÀE¡ry
 *)
NULL
;

448 
AET
->
bªs
.
mö‹_axis
 = 
SMALL_COORDINATE
;

453 
ET
->
sˇ∆öes
.
√xt
 = (
SˇnLöeLi°
 *)
NULL
;

454 
ET
->
ymax
 = 
SMALL_COORDINATE
;

455 
ET
->
ymö
 = 
LARGE_COORDINATE
;

456 
pSLLBlock
->
√xt
 = (
SˇnLöeLi°Block
 *)
NULL
;

458 
EndPt
 = 
±s
 - 1;

459 
pﬁy
 = 0;Öﬁy < 
nbpﬁyg⁄s
;Öoly++)

461 
cou¡
 = 
Cou¡
[
pﬁy
];

462 
EndPt
 +
cou¡
;

463 if(
cou¡
 < 2)

466 
PªvPt
 = 
EndPt
;

473 
cou¡
--)

475 
CuºPt
 = 
±s
++;

479 i‡(
PªvPt
->
y
 > 
CuºPt
->y)

481 
bŸtom
 = 
PªvPt
, 
t›
 = 
CuºPt
;

482 
pETEs
->
ClockWi£
 = 0;

486 
bŸtom
 = 
CuºPt
, 
t›
 = 
PªvPt
;

487 
pETEs
->
ClockWi£
 = 1;

493 i‡(
bŸtom
->
y
 !
t›
->y)

495 
pETEs
->
ymax
 = 
bŸtom
->
y
-1;

501 
dy
 = 
bŸtom
->
y
 - 
t›
->y;

503 
	`BRESINITPGONSTRUCT
(
dy
, 
t›
->
x
, 
bŸtom
->x, 
pETEs
->
bªs
);

505 
	`REGION_In£πEdgeInET
(
ET
, 
pETEs
, 
t›
->
y
, &
pSLLBlock
,

506 &
iSLLBlock
);

508 i‡(
PªvPt
->
y
 > 
ET
->
ymax
)

509 
ET
->
ymax
 = 
PªvPt
->
y
;

510 i‡(
PªvPt
->
y
 < 
ET
->
ymö
)

511 
ET
->
ymö
 = 
PªvPt
->
y
;

512 
pETEs
++;

515 
PªvPt
 = 
CuºPt
;

518 
	}
}

528 
	$REGION_lﬂdAET
(
EdgeTabÀE¡ry
 *
AET
, EdgeTabÀE¡ry *
ETEs
)

530 
EdgeTabÀE¡ry
 *
pPªvAET
;

531 
EdgeTabÀE¡ry
 *
tmp
;

533 
pPªvAET
 = 
AET
;

534 
AET
 = AET->
√xt
;

535 
ETEs
)

537 
AET
 && (AET->
bªs
.
mö‹_axis
 < 
ETEs
->bres.minor_axis))

539 
pPªvAET
 = 
AET
;

540 
AET
 = AET->
√xt
;

542 
tmp
 = 
ETEs
->
√xt
;

543 
ETEs
->
√xt
 = 
AET
;

544 i‡(
AET
)

545 
AET
->
back
 = 
ETEs
;

546 
ETEs
->
back
 = 
pPªvAET
;

547 
pPªvAET
->
√xt
 = 
ETEs
;

548 
pPªvAET
 = 
ETEs
;

550 
ETEs
 = 
tmp
;

552 
	}
}

574 
	$REGION_compuãWAET
(
EdgeTabÀE¡ry
 *
AET
)

576 
EdgeTabÀE¡ry
 *
pWETE
;

577 
öside
 = 1;

578 
isInside
 = 0;

580 
AET
->
√xtWETE
 = (
EdgeTabÀE¡ry
 *)
NULL
;

581 
pWETE
 = 
AET
;

582 
AET
 = AET->
√xt
;

583 
AET
)

585 i‡(
AET
->
ClockWi£
)

586 
isInside
++;

588 
isInside
--;

590 i‡((!
öside
 && !
isInside
) ||

591 –
öside
 && 
isInside
))

593 
pWETE
->
√xtWETE
 = 
AET
;

594 
pWETE
 = 
AET
;

595 
öside
 = !inside;

597 
AET
 = AET->
√xt
;

599 
pWETE
->
√xtWETE
 = (
EdgeTabÀE¡ry
 *)
NULL
;

600 
	}
}

610 
MWBOOL
 
	$REGION_In£πi⁄S‹t
(
EdgeTabÀE¡ry
 *
AET
)

612 
EdgeTabÀE¡ry
 *
pETEcha£
;

613 
EdgeTabÀE¡ry
 *
pETEö£π
;

614 
EdgeTabÀE¡ry
 *
pETEcha£BackTMP
;

615 
MWBOOL
 
ch™ged
 = 
FALSE
;

617 
AET
 = AET->
√xt
;

618 
AET
)

620 
pETEö£π
 = 
AET
;

621 
pETEcha£
 = 
AET
;

622 
pETEcha£
->
back
->
bªs
.
mö‹_axis
 > 
AET
->bres.minor_axis)

623 
pETEcha£
 =ÖETEcha£->
back
;

625 
AET
 = AET->
√xt
;

626 i‡(
pETEcha£
 !
pETEö£π
)

628 
pETEcha£BackTMP
 = 
pETEcha£
->
back
;

629 
pETEö£π
->
back
->
√xt
 = 
AET
;

630 i‡(
AET
)

631 
AET
->
back
 = 
pETEö£π
->back;

632 
pETEö£π
->
√xt
 = 
pETEcha£
;

633 
pETEcha£
->
back
->
√xt
 = 
pETEö£π
;

634 
pETEcha£
->
back
 = 
pETEö£π
;

635 
pETEö£π
->
back
 = 
pETEcha£BackTMP
;

636 
ch™ged
 = 
TRUE
;

639  
ch™ged
;

640 
	}
}

647 
	$REGION_FªeSt‹age
(
SˇnLöeLi°Block
 *
pSLLBlock
)

649 
SˇnLöeLi°Block
 *
tmpSLLBlock
;

651 
pSLLBlock
)

653 
tmpSLLBlock
 = 
pSLLBlock
->
√xt
;

654 
	`‰ì
–
pSLLBlock
 );

655 
pSLLBlock
 = 
tmpSLLBlock
;

657 
	}
}

665 
	$REGION_PtsToRegi⁄
(
numFuŒPtBlocks
, 
iCurPtBlock
,

666 
POINTBLOCK
 *
Fú°PtBlock
, 
MWCLIPREGION
 *
ªg
)

668 
MWRECT
 *
ª˘s
;

669 
MWPOINT
 *
±s
;

670 
POINTBLOCK
 *
CurPtBlock
;

671 
i
;

672 
MWRECT
 *
exã¡s
;

673 
numRe˘s
;

675 
exã¡s
 = &
ªg
->extents;

677 
numRe˘s
 = ((
numFuŒPtBlocks
 * 
NUMPTSTOBUFFER
Ë+ 
iCurPtBlock
) >> 1;

679 i‡(!(
ªg
->
ª˘s
 = 
	`GdRóŒoc
–ªg->ª˘s, (
MWRECT
Ë*Ñeg->
size
, (MWRECTË* 
numRe˘s
 )))

682 
ªg
->
size
 = 
numRe˘s
;

683 
CurPtBlock
 = 
Fú°PtBlock
;

684 
ª˘s
 = 
ªg
->rects - 1;

685 
numRe˘s
 = 0;

686 
exã¡s
->
À·
 = 
LARGE_COORDINATE
,Éxã¡s->
right
 = 
SMALL_COORDINATE
;

688  ; 
numFuŒPtBlocks
 >= 0;ÇumFullPtBlocks--) {

690 
i
 = 
NUMPTSTOBUFFER
 >> 1;

691 i‡(!
numFuŒPtBlocks
)

692 
i
 = 
iCurPtBlock
 >> 1;

693 
±s
 = 
CurPtBlock
->±s; 
i
--;Öts += 2) {

694 i‡(
±s
->
x
 ==Öts[1].x)

696 i‡(
numRe˘s
 && 
±s
->
x
 =
ª˘s
->
À·
 &&Öts->
y
 =ª˘s->
bŸtom
 &&

697 
±s
[1].
x
 =
ª˘s
->
right
 &&

698 (
numRe˘s
 =1 || 
ª˘s
[-1].
t›
 !=Ñects->top) &&

699 (
i
 && 
±s
[2].
y
 >Öts[1].y)) {

700 
ª˘s
->
bŸtom
 = 
±s
[1].
y
 + 1;

703 
numRe˘s
++;

704 
ª˘s
++;

705 
ª˘s
->
À·
 = 
±s
->
x
;Ñe˘s->
t›
 =Öts->
y
;

706 
ª˘s
->
right
 = 
±s
[1].
x
;Ñe˘s->
bŸtom
 =Öts[1].
y
 + 1;

707 i‡(
ª˘s
->
À·
 < 
exã¡s
->left)

708 
exã¡s
->
À·
 = 
ª˘s
->left;

709 i‡(
ª˘s
->
right
 > 
exã¡s
->right)

710 
exã¡s
->
right
 = 
ª˘s
->right;

712 
CurPtBlock
 = CurPtBlock->
√xt
;

715 i‡(
numRe˘s
) {

716 
exã¡s
->
t›
 = 
ªg
->
ª˘s
->top;

717 
exã¡s
->
bŸtom
 = 
ª˘s
->bottom;

719 
exã¡s
->
À·
 = 0;

720 
exã¡s
->
t›
 = 0;

721 
exã¡s
->
right
 = 0;

722 
exã¡s
->
bŸtom
 = 0;

724 
ªg
->
numRe˘s
 =ÇumRects;

726 (
TRUE
);

727 
	}
}

732 
MWCLIPREGION
 *

733 
	$GdAŒocPﬁyg⁄Regi⁄
(
MWPOINT
 *
poöts
, 
cou¡
, 
mode
)

735  
	`GdAŒocPﬁyPﬁyg⁄Regi⁄
(
poöts
, &
cou¡
, 1, 
mode
 );

736 
	}
}

741 
MWCLIPREGION
 *

742 
	$GdAŒocPﬁyPﬁyg⁄Regi⁄
(
MWPOINT
 *
poöts
, *
cou¡
, 
nbpﬁyg⁄s
, 
mode
)

744 
MWCLIPREGION
 *
rgn
;

745 
EdgeTabÀE¡ry
 *
pAET
;

746 
y
;

747 
iPts
 = 0;

748 
EdgeTabÀE¡ry
 *
pWETE
;

749 
SˇnLöeLi°
 *
pSLL
;

750 
MWPOINT
 *
±s
;

751 
EdgeTabÀE¡ry
 *
pPªvAET
;

752 
EdgeTabÀ
 
ET
;

753 
EdgeTabÀE¡ry
 
AET
;

754 
EdgeTabÀE¡ry
 *
pETEs
;

755 
SˇnLöeLi°Block
 
SLLBlock
;

756 
fixWAET
 = 
FALSE
;

757 
POINTBLOCK
 
Fú°PtBlock
, *
curPtBlock
;

758 
POINTBLOCK
 *
tmpPtBlock
;

759 
numFuŒPtBlocks
 = 0;

760 
pﬁy
, 
tŸÆ
;

762 if(!(
rgn
 = 
	`GdAŒocRegi⁄
()))

763  
NULL
;

767 i‡(((
nbpﬁyg⁄s
 =1Ë&& ((*
cou¡
 == 4) ||

768 ((*
cou¡
 =5Ë&& (
poöts
[4].
x
 ==Öoints[0].x)

769 && (
poöts
[4].
y
 ==Öoints[0].y)))) &&

770 (((
poöts
[0].
y
 ==Öoints[1].y) &&

771 (
poöts
[1].
x
 ==Öoints[2].x) &&

772 (
poöts
[2].
y
 ==Öoints[3].y) &&

773 (
poöts
[3].
x
 ==Öoints[0].x)) ||

774 ((
poöts
[0].
x
 ==Öoints[1].x) &&

775 (
poöts
[1].
y
 ==Öoints[2].y) &&

776 (
poöts
[2].
x
 ==Öoints[3].x) &&

777 (
poöts
[3].
y
 ==Öoints[0].y))))

779 
	`GdSëRe˘Regi⁄
–
rgn
,

780 
	`MWMIN
(
poöts
[0].
x
,Öoöts[2].x), MWMIN’oöts[0].
y
,Öoints[2].y),

781 
	`MWMAX
(
poöts
[0].
x
,Öoöts[2].x), MWMAX’oöts[0].
y
,Öoints[2].y) );

782  
rgn
;

785 
pﬁy
 = 
tŸÆ
 = 0;Öﬁy < 
nbpﬁyg⁄s
;Öoly++)

786 
tŸÆ
 +
cou¡
[
pﬁy
];

787 i‡(! (
pETEs
 = 
	`mÆloc
–(
EdgeTabÀE¡ry
Ë* 
tŸÆ
 )))

789 
	`GdDe°royRegi⁄
–
rgn
 );

792 
±s
 = 
Fú°PtBlock
.pts;

793 
	`REGION_Cª©eET™dAET
(
cou¡
, 
nbpﬁyg⁄s
, 
poöts
, &
ET
, &
AET
,

794 
pETEs
, &
SLLBlock
);

795 
pSLL
 = 
ET
.
sˇ∆öes
.
√xt
;

796 
curPtBlock
 = &
Fú°PtBlock
;

798 i‡(
mode
 !
MWPOLY_WINDING
) {

802 
y
 = 
ET
.
ymö
; y < ET.
ymax
; y++) {

807 i‡(
pSLL
 !
NULL
 && 
y
 =pSLL->
sˇ∆öe
) {

808 
	`REGION_lﬂdAET
(&
AET
, 
pSLL
->
edgñi°
);

809 
pSLL
 =ÖSLL->
√xt
;

811 
pPªvAET
 = &
AET
;

812 
pAET
 = 
AET
.
√xt
;

817 
pAET
) {

818 
±s
->
x
 = 
pAET
->
bªs
.
mö‹_axis
,Öts->
y
 = y;

819 
±s
++, 
iPts
++;

824 i‡(
iPts
 =
NUMPTSTOBUFFER
) {

825 
tmpPtBlock
 = 
	`mÆloc
–(
POINTBLOCK
));

826 if(!
tmpPtBlock
) {

829 
curPtBlock
->
√xt
 = 
tmpPtBlock
;

830 
curPtBlock
 = 
tmpPtBlock
;

831 
±s
 = 
curPtBlock
->pts;

832 
numFuŒPtBlocks
++;

833 
iPts
 = 0;

835 
	`EVALUATEEDGEEVENODD
(
pAET
, 
pPªvAET
, 
y
);

838 
	`REGION_In£πi⁄S‹t
(&
AET
);

845 
y
 = 
ET
.
ymö
; y < ET.
ymax
; y++) {

850 i‡(
pSLL
 !
NULL
 && 
y
 =pSLL->
sˇ∆öe
) {

851 
	`REGION_lﬂdAET
(&
AET
, 
pSLL
->
edgñi°
);

852 
	`REGION_compuãWAET
(&
AET
);

853 
pSLL
 =ÖSLL->
√xt
;

855 
pPªvAET
 = &
AET
;

856 
pAET
 = 
AET
.
√xt
;

857 
pWETE
 = 
pAET
;

862 
pAET
) {

867 i‡(
pWETE
 =
pAET
) {

868 
±s
->
x
 = 
pAET
->
bªs
.
mö‹_axis
,Öts->
y
 = y;

869 
±s
++, 
iPts
++;

874 i‡(
iPts
 =
NUMPTSTOBUFFER
) {

875 
tmpPtBlock
 = 
	`mÆloc
–(
POINTBLOCK
) );

876 if(!
tmpPtBlock
) {

879 
curPtBlock
->
√xt
 = 
tmpPtBlock
;

880 
curPtBlock
 = 
tmpPtBlock
;

881 
±s
 = 
curPtBlock
->pts;

882 
numFuŒPtBlocks
++; 
iPts
 = 0;

884 
pWETE
 =ÖWETE->
√xtWETE
;

886 
	`EVALUATEEDGEWINDING
(
pAET
, 
pPªvAET
, 
y
, 
fixWAET
);

893 i‡(
	`REGION_In£πi⁄S‹t
(&
AET
Ë|| 
fixWAET
) {

894 
	`REGION_compuãWAET
(&
AET
);

895 
fixWAET
 = 
FALSE
;

899 
	`REGION_FªeSt‹age
(
SLLBlock
.
√xt
);

900 
	`REGION_PtsToRegi⁄
(
numFuŒPtBlocks
, 
iPts
, &
Fú°PtBlock
, 
rgn
);

901 
curPtBlock
 = 
Fú°PtBlock
.
√xt
; --
numFuŒPtBlocks
 >= 0;) {

902 
tmpPtBlock
 = 
curPtBlock
->
√xt
;

903 
	`‰ì
–
curPtBlock
 );

904 
curPtBlock
 = 
tmpPtBlock
;

906 
	`‰ì
–
pETEs
 );

907  
rgn
;

908 
	}
}

	@engine/devstipple.c

8 
	~<°dio.h
>

9 
	~<°dlib.h
>

10 
	~<°rög.h
>

11 
	~"devi˚.h
"

13 
MWPIXELVAL
 
gr_f‹eground
;

14 
MWPIXELVAL
 
gr_background
;

15 
gr_fûlmode
;

16 
MWSTIPPLE
 
gr_°ù∂e
;

17 
MWTILE
 
gr_tûe
;

18 
MWPOINT
 
gr_ts_off£t
;

20 
	gts_‹igö_x
 = 0;

21 
	gts_‹igö_y
 = 0;

24 
	#SPITCH
 ((
gr_°ù∂e
.
width
 + (
MWIMAGE_BITSPERIMAGE
 - 1)Ë/ MWIMAGE_BITSPERIMAGE)

	)

31 
	#BIT_SET
(
d©a
, 
w
, 
h
) \

32 (
d©a
[(
h
 * 
SPITCH
Ë+ (
w
 / 
MWIMAGE_BITSPERIMAGE
)] & (1 << ((MWIMAGE_BITSPERIMAGE - 1Ë- (w % MWIMAGE_BITSPERIMAGE))))

	)

35 
	$GdSëStù∂eBôm≠
(
MWIMAGEBITS
 *
°ù∂e
, 
MWCOORD
 
width
, MWCOORD 
height
)

37 
x
, 
y
;

38 
size
;

40 i‡(
gr_°ù∂e
.
bôm≠
)

41 
	`‰ì
(
gr_°ù∂e
.
bôm≠
);

43 
gr_°ù∂e
.
width
 = 0;

44 
gr_°ù∂e
.
height
 = 0;

46 i‡(!
°ù∂e
) {

47 
gr_°ù∂e
.
bôm≠
 = 0;

51 
size
 = 
	`MWIMAGE_SIZE
(
width
, 
height
Ë* (
MWIMAGEBITS
);

52 
gr_°ù∂e
.
bôm≠
 = 
	`mÆloc
(
size
);

53 i‡(!
gr_°ù∂e
.
bôm≠
)

55 
gr_°ù∂e
.
width
 = width;

56 
gr_°ù∂e
.
height
 = height;

57 
	`mem˝y
(
gr_°ù∂e
.
bôm≠
, 
°ù∂e
, 
size
);

60 
y
 = 0; y < 
height
; y++) {

61 
x
 = 0; x < 
width
; x++) {

62 i‡(
	`BIT_SET
(
gr_°ù∂e
.
bôm≠
, 
x
, 
y
))

63 
	`DPRINTF
("X");

65 
	`DPRINTF
("_");

67 
	`DPRINTF
("\n");

70 
	}
}

73 
	$GdSëTûePixm≠
(
PSD
 
§c
, 
MWCOORD
 
width
, MWCOORD 
height
)

75 
gr_tûe
.
psd
 = 
§c
;

76 i‡(!
§c
) {

77 
gr_tûe
.
width
 = 0;

78 
gr_tûe
.
height
 = 0;

80 
gr_tûe
.
width
 = width;

81 
gr_tûe
.
height
 = height;

83 
	}
}

87 
	$GdSëTSOff£t
(
x
, 
y
)

89 
gr_ts_off£t
.
x
 = x;

90 
gr_ts_off£t
.
y
 = y;

91 
	}
}

98 
	$tûe_døwª˘
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
w
, MWCOORD 
h
)

100 
sx
 = 
x
, 
sy
 = 
y
;

101 
px
 = 0, 
py
 = 0;

102 
dw
 = 
w
;

103 
dh
 = 
h
;

106 
tûex
 = 
x
 - 
ts_‹igö_x
;

107 
tûey
 = 
y
 - 
ts_‹igö_y
;

110 i‡(!
gr_tûe
.
psd
 || !gr_tûe.
width
 || !gr_tûe.
height
)

114 i‡(
tûex
 < 0) {

115 
sx
 +-
tûex
;

116 
dw
 --
tûex
;

118 i‡(
sx
 > (
x
 + 
w
 - 1))

120 
tûex
 = 
sx
 - 
ts_‹igö_x
;

123 i‡(
tûey
 < 0) {

124 
sy
 +-
tûey
;

125 
dh
 --
tûey
;

127 i‡(
sy
 > (
y
 + 
h
 - 1))

129 
tûey
 = 
sy
 - 
ts_‹igö_y
;

132 
dh
) {

133 
ch
 = (
gr_tûe
.
height
 - ((
tûey
 + 
py
) % gr_tile.height));

134 i‡(
ch
 > 
dh
)

135 
ch
 = 
dh
;

137 
dw
 = 
w
;

138 
px
 = 0;

140 
dw
) {

141 
cw
 = (
gr_tûe
.
width
 -

142 ((
tûex
 + 
px
Ë% 
gr_tûe
.
width
));

143 i‡(
cw
 > 
dw
)

144 
cw
 = 
dw
;

146 
	`GdBlô
(
psd
, 
sx
 + 
px
, 
sy
 + 
py
, 
cw
, 
ch
, 
gr_tûe
.psd,

147 ((
tûex
 + 
px
Ë% 
gr_tûe
.
width
),

148 ((
tûey
 + 
py
Ë% 
gr_tûe
.
height
), 
MWROP_SRCCOPY
);

149 
dw
 -
cw
;

150 
px
 +
cw
;

152 
dh
 -
ch
;

153 
py
 +
ch
;

155 
	}
}

160 
	$£t_ts_‹igö
(
x
, 
y
)

162 
ts_‹igö_x
 = 
x
 + 
gr_ts_off£t
.x;

163 
ts_‹igö_y
 = 
y
 + 
gr_ts_off£t
.y;

164 
	}
}

168 
	$ts_døwpoöt
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
)

170 
bx
 = 
x
 - 
ts_‹igö_x
;

171 
by
 = 
y
 - 
ts_‹igö_y
;

175 i‡(
gr_fûlmode
 =
MWFILL_STIPPLE


176 || 
gr_fûlmode
 =
MWFILL_OPAQUE_STIPPLE
) {

177 i‡(!
gr_°ù∂e
.
bôm≠
 || !gr_°ù∂e.
width


178 || !
gr_°ù∂e
.
height
)

181 i‡(!
gr_tûe
.
psd
 || !gr_tûe.
width
 || !gr_tûe.
height
)

186 i‡(!
	`GdClùPoöt
(
psd
, 
x
, 
y
))

194 i‡(
bx
 < 0 || 
by
 < 0) {

195 
psd
->
	`DøwPixñ
’sd, 
x
, 
y
, 
gr_f‹eground
);

199 
gr_fûlmode
) {

200 
MWFILL_OPAQUE_STIPPLE
:

202 i‡(!
	`BIT_SET
(
gr_°ù∂e
.
bôm≠
, (
bx
 % gr_°ù∂e.
width
), (
by
 % gr_°ù∂e.
height
)))

203 
psd
->
	`DøwPixñ
’sd, 
x
, 
y
, 
gr_background
);

206 
MWFILL_STIPPLE
:

207 i‡(
	`BIT_SET
(
gr_°ù∂e
.
bôm≠
, (
bx
 % gr_°ù∂e.
width
), (
by
 % gr_°ù∂e.
height
)))

208 
psd
->
	`DøwPixñ
’sd, 
x
, 
y
, 
gr_f‹eground
);

211 
MWFILL_TILE
:

214 
psd
->
	`DøwPixñ
’sd, 
x
, 
y
,

215 
gr_tûe
.
psd
->
	`RódPixñ
(gr_tile.psd,

216 (
bx
 % 
gr_tûe
.
width
), (
by
 % gr_tûe.
height
)));

219 
	}
}

223 
	$ts_døwrow
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
)

225 
x
;

226 
d°width
 = 
x2
 - 
x1
 + 1;

228 
gr_fûlmode
) {

229 
MWFILL_STIPPLE
:

230 
MWFILL_OPAQUE_STIPPLE
:

231 
x
 = 
x1
; x <
x2
; x++)

232 
	`ts_døwpoöt
(
psd
, 
x
, 
y
);

234 
MWFILL_TILE
:

235 
	`tûe_døwª˘
(
psd
, 
x1
, 
y
, 
d°width
, 1);

237 
	}
}

240 
	$ts_fûÃe˘
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
w
, MWCOORD 
h
)

242 
x1
 = 
x
;

243 
x2
 = 
x
 + 
w
 - 1;

244 
y1
 = 
y
;

245 
y2
 = 
y
 + 
h
 - 1;

247 i‡(
	`GdClùAªa
(
psd
, 
x1
, 
y1
, 
x2
, 
y2
Ë=
CLIP_INVISIBLE
)

250 i‡(
gr_fûlmode
 =
MWFILL_TILE
)

251 
	`tûe_døwª˘
(
psd
, 
x
, 
y
, 
w
, 
h
);

253 ; 
y1
 <
y2
; y1++)

254 
	`ts_døwrow
(
psd
, 
x1
, 
x2
, 
y1
);

255 
	}
}

	@engine/devtimer.c

54 
	~<°dio.h
>

55 
	~<uni°d.h
>

56 
	~<°dlib.h
>

57 
	~"devi˚.h
"

59 #i‡
MW_FEATURE_TIMERS


61 
MWTIMER
 *
	gtimîli°
 = 
NULL
;

62 
timevÆ
 
	gmaölo›_timeout
;

63 
timevÆ
 
	gcuºít_time
;

65 
ˇlcuœã_timevÆ
(
timevÆ
 *
tv
, 
MWTIMEOUT
 
to
);

66 sig√d 
time_to_expúy
(
timevÆ
 *
t
);

77 
MWTIMER
 *
	$GdAddTimî
(
MWTIMEOUT
 
timeout
, 
MWTIMERCB
 
ˇŒback
, *
¨g
)

79 
MWTIMER
 *
√wtimî
;

81 if(!(
√wtimî
 = 
	`mÆloc
((
MWTIMER
)))Ë 
NULL
;

83 
	`gëtimeofday
(&
cuºít_time
, 
NULL
);

85 if(
timîli°
Ëtimîli°->
¥ev
 = 
√wtimî
;

87 
	`ˇlcuœã_timevÆ
(&
√wtimî
->
timeout
,Åimeout);

88 
√wtimî
->
ˇŒback
 = callback;

89 
√wtimî
->
¨g
 =árg;

90 
√wtimî
->
√xt
 = 
timîli°
;

91 
√wtimî
->
¥ev
 = 
NULL
;

92 
√wtimî
->
ty≥
 = 
MWTIMER_ONESHOT
;

93 
√wtimî
->
≥riod
 = 
timeout
;

94 
timîli°
 = 
√wtimî
;

96  
√wtimî
;

97 
	}
}

107 
MWTIMER
 *
	$GdAddPîiodicTimî
(
MWTIMEOUT
 
timeout
, 
MWTIMERCB
 
ˇŒback
, *
¨g
)

109 
MWTIMER
 *
√wtimî
;

111 if(!(
√wtimî
 = 
	`mÆloc
((
MWTIMER
)))Ë 
NULL
;

113 
	`gëtimeofday
 (&
cuºít_time
, 
NULL
);

115 i‡(
timîli°
Ëtimîli°->
¥ev
 = 
√wtimî
;

117 
	`ˇlcuœã_timevÆ
 (&
√wtimî
->
timeout
,Åimeout);

118 
√wtimî
->
ˇŒback
 = callback;

119 
√wtimî
->
¨g
 =árg;

120 
√wtimî
->
√xt
 = 
timîli°
;

121 
√wtimî
->
¥ev
 = 
NULL
;

122 
√wtimî
->
ty≥
 = 
MWTIMER_PERIODIC
;

123 
√wtimî
->
≥riod
 = 
timeout
;

124 
timîli°
 = 
√wtimî
;

126  
√wtimî
;

127 
	}
}

134 
	$GdDe°royTimî
(
MWTIMER
 *
timî
)

136 if(
timî
->
√xt
Ëtimî->√xt->
¥ev
 =Åimer->prev;

137 if(
timî
->
¥ev
Ëtimî->¥ev->
√xt
 =Åimer->next;

138 if(
timî
 =
timîli°
) {

139 if(
timî
->
√xt
Ë
timîli°
 =Åimer->next;

140 
timîli°
 = 
timî
->
¥ev
;

142 
	`‰ì
(
timî
);

143 
	}
}

151 
MWTIMER
 *
	$GdFödTimî
(*
¨g
)

153 
MWTIMER
 *
t
 = 
timîli°
;

155 
t
) {

156 if(
t
->
¨g
 ==árg) ;

157 
t
 =Å->
√xt
;

160  
t
;

161 
	}
}

170 
MWBOOL
 
	$GdGëNextTimeout
(
timevÆ
 *
tv
, 
MWTIMEOUT
 
timeout
)

172 sig√d 
i
, 
lowe°_timeout
;

173 
MWTIMER
 *
t
 = 
timîli°
;

175 if(!
timeout
 && !
timîli°
Ë 
FALSE
;

177 
	`gëtimeofday
(&
cuºít_time
, 
NULL
);

179 if(
timeout
) {

180 
	`ˇlcuœã_timevÆ
(&
maölo›_timeout
, 
timeout
);

181 
lowe°_timeout
 = 
	`time_to_expúy
(&
maölo›_timeout
);

183 
lowe°_timeout
 = 
	`time_to_expúy
(&
t
->
timeout
);

184 
maölo›_timeout
.
tv_£c
 = -1;

185 
t
 =Å->
√xt
;

188 
t
) {

189 
i
 = 
	`time_to_expúy
(&
t
->
timeout
);

190 if(
i
 < 
lowe°_timeout
)Üowest_timeout = i;

191 
t
 =Å->
√xt
;

194 if(
lowe°_timeout
 <= 0) {

195 
tv
->
tv_£c
 = 0;

196 
tv
->
tv_u£c
 = 0;

198 
tv
->
tv_£c
 = 
lowe°_timeout
 / 1000;

199 
tv
->
tv_u£c
 = (
lowe°_timeout
 % 1000) * 1000;

202  
TRUE
;

203 
	}
}

210 
MWBOOL
 
	$GdTimeout
()

212 
MWTIMER
 *
n
, *
t
 = 
timîli°
;

214 
	`gëtimeofday
(&
cuºít_time
, 
NULL
);

216 
t
) {

217 
n
 = 
t
->
√xt
;

218 if(
	`time_to_expúy
(&
t
->
timeout
) <= 0) {

219 
t
->
	`ˇŒback
—->
¨g
);

220 i‡(
t
->
ty≥
 =
MWTIMER_ONESHOT
)

223 
	`GdDe°royTimî
(
t
);

228 
	`ˇlcuœã_timevÆ
 (&
t
->
timeout
,Å->
≥riod
);

231 
t
 = 
n
;

234 if(
maölo›_timeout
.
tv_£c
 > 0 || maölo›_timeout.
tv_u£c
 > 0)

235 if(
	`time_to_expúy
(&
maölo›_timeout
) <= 0)

236  
TRUE
;

238  
FALSE
;

239 
	}
}

241 
	$ˇlcuœã_timevÆ
(
timevÆ
 *
tv
, 
MWTIMEOUT
 
to
)

243 
tv
->
tv_£c
 = 
cuºít_time
.tv_£¯+ (
to
 / 1000);

244 
tv
->
tv_u£c
 = 
cuºít_time
.tv_u£¯+ ((
to
 % 1000) * 1000);

245 if(
tv
->
tv_u£c
 > 1000000) {

246 
tv
->
tv_£c
++;

247 
tv
->
tv_u£c
 -= 1000000;

249 
	}
}

251 sig√d 
	$time_to_expúy
(
timevÆ
 *
t
)

253 
MWTIMEOUT
 
ªt
 = (((
t
->
tv_£c
 - 
cuºít_time
.tv_sec) * 1000) +

254 ((
t
->
tv_u£c
 - 
cuºít_time
.tv_usec) / 1000));

256  
ªt
;

257 
	}
}

	@engine/error.c

11 
	~<°dio.h
>

12 
	~<°d¨g.h
>

13 
	~<°rög.h
>

14 #i‡(
UNIX
 | 
DOS_DJGPP
)

15 
	~<uni°d.h
>

17 
	~"devi˚.h
"

19 #i‡
MW_FEATURE_GDERROR


24 
	$GdEº‹
(c⁄° *
f‹m©
, ...)

26 
va_li°
 
¨gs
;

27 
buf
[1024];

29 
	`va_°¨t
(
¨gs
, 
f‹m©
);

31 
	`v•rötf
(
buf
, 
f‹m©
, 
¨gs
);

32 #ifde‡
PSP


33 
	`p•DebugS¸ìnPrötf
("%s\n",
buf
);

35 
	`wrôe
(2, 
buf
, 
	`°æí
(buf));

38 
	`va_íd
(
¨gs
);

40 
	}
}

46 
	$GdEº‹NuŒ
(c⁄° *
f‹m©
, ...)

49 
	}
}

	@engine/font_dbcs.c

11 
	~<°dio.h
>

12 
	~<°dlib.h
>

13 
	~"devi˚.h
"

14 
	~"devf⁄t.h
"

15 
	~"../drivîs/gíf⁄t.h
"

17 #i‡
HAVE_BIG5_SUPPORT


19 
	$big5_gëãxtbôs
(
PMWFONT
 
pf⁄t
, 
ch
, c⁄° 
MWIMAGEBITS
 **
ªtm≠
,

20 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
, MWCOORD *
pba£
)

22 
CH
 = 
ch
 >> 8;

23 
CL
 = 
ch
 & 0xFF;

24 
pos
;

25 
i
;

26 
£q
 = 0;

27 
MWIMAGEBITS
 
m≠
[12];

28 
JMT_BIG5_12X12_FONT_BITMAP
[];

33 
CL
 -= (CL < 127)? 64 : 98;

35 i‡(
CH
 >= 0xa4) {

36 
£q
 = ((
CH
 - 164Ë* 157Ë+ 
CL
;

37 i‡(
£q
 >= 5809)

38 
£q
 -= 408;

40 i‡(
CH
 <= 0xa3)

41 
£q
 = (((
CH
 - 161Ë* 157Ë+ 
CL
) + 13094;

42 
pos
 = 
£q
 * 18;

44 
i
 = 0; i < 6; i++) {

45 *
d°
 = ((*)
m≠
Ë+ 
i
 * 4;

46 *
§c
 = 
JMT_BIG5_12X12_FONT_BITMAP
 +

47 
pos
 + 
i
 * 3;

48 
d°
[0] = 
§c
[1];

49 
d°
[1] = 
§c
[0];

50 
d°
[2] = 
§c
[1] << 4;

51 
d°
[3] = 
§c
[2];

54 *
pwidth
 = 12;

55 *
pheight
 = 12;

56 *
pba£
 = 0;

57 *
ªtm≠
 = 
m≠
;

58 
	}
}

61 #i‡
HAVE_GB2312_SUPPORT


63 
	$euc˙_gëãxtbôs
(
PMWFONT
 
pf⁄t
, 
ch
, c⁄° 
MWIMAGEBITS
 **
ªtm≠
,

64 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
, MWCOORD *
pba£
)

66 
CH
 = 
ch
 >> 8;

67 
CL
 = 
ch
 & 0xFF;

68 
pos
 = ((
CH
 - 0xA1Ë* 94 + (
CL
 - 0xA1)) * 18;

69 
i
;

70 
MWIMAGEBITS
 
m≠
[12];

71 
GUO_GB2312_12X12_FONT_BITMAP
[];

74 
i
 = 0; i < 6; i++) {

75 *
d°
 = ((*)
m≠
Ë+ 
i
 * 4;

76 *
§c
 = 
GUO_GB2312_12X12_FONT_BITMAP
 +

77 
pos
 + 
i
 * 3;

78 
d°
[0] = 
§c
[1];

79 
d°
[1] = 
§c
[0];

80 
d°
[2] = 
§c
[1] << 4;

81 
d°
[3] = 
§c
[2];

83 *
pwidth
 = 12;

84 *
pheight
 = 12;

85 *
pba£
 = 0;

86 *
ªtm≠
 = 
m≠
;

87 
	}
}

90 #i‡
HAVE_JISX0213_SUPPORT


92 
	$jis_gëãxtbôs
(
PMWFONT
 
pf⁄t
, 
ch
, c⁄° 
MWIMAGEBITS
 **
ªtm≠
,

93 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
, MWCOORD *
pba£
)

95 
CH
 = 
ch
 >> 8;

96 
CL
 = 
ch
 & 0xFF;

97 
pos
 = 0;

98 *
m≠
;

99 
JP_JISX0213_12X12_FONT_BITMAP
[];

102 i‡(
CH
 >0xA1 && CH <0xFE && 
CL
 >= 0xA1 && CL <= 0xFE) {

103 
pos
 = (
CH
 - 0xA1Ë* 94 + (
CL
 - 0xA1);

106 i‡((
CH
 >= 0x81 && CH <= 0x9F) || (CH >= 0xE0 && CH <= 0xEF)) {

107 
EH
 = 0;

108 
EL
 = 0;

110 i‡(
CH
 >= 0x81 && CH <= 0x9F &&

111 
CL
 >= 0x40 && CL <= 0xFC && CL != 0x7F) {

112 
EH
 = 
CH
 - 0x81;

113 i‡(
CL
 >= 0x40 && CL <= 0x7E)

114 
EL
 = 
CL
 - 0x40;

115 i‡(
CL
 >= 0x80 && CL <= 0xFC)

116 
EL
 = 
CL
 - 0x40 - 1;

117 
pos
 = 
EH
 * 188 + 
EL
;

119 i‡(
CH
 >= 0xE0 && CH <= 0xEF &&

120 
CL
 >= 0x40 && CL <= 0xFC && CL != 0x7F) {

121 
EH
 = 
CH
 - 0xE0 + (0x9F - 0x81);

122 i‡(
CL
 >= 0x40 && CL <= 0x7E)

123 
EL
 = 
CL
 - 0x40;

124 i‡(
CL
 >= 0x80 && CL <= 0xFC)

125 
EL
 = 
CL
 - 0x40 - 1;

126 
pos
 = 
EH
 * 188 + 
EL
;

129 
m≠
 = 
JP_JISX0213_12X12_FONT_BITMAP
 + 
pos
 * 12;

131 *
pwidth
 = 12;

132 *
pheight
 = 12;

133 *
pba£
 = 0;

134 *
ªtm≠
 = (
MWIMAGEBITS
 *)
m≠
;

135 
	}
}

138 #i‡
HAVE_KSC5601_SUPPORT


140 
	$euckr_gëãxtbôs
(
PMWFONT
 
pf⁄t
, 
ch
, c⁄° 
MWIMAGEBITS
 **
ªtm≠
,

141 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
, MWCOORD *
pba£
)

143 
CH
 = 
ch
 >> 8;

144 
CL
 = 
ch
 & 0xFF;

145 
mc
;

146 
MWIMAGEBITS
 
m≠
[16];

147 
	`c⁄vît_ksc_to_johab
(
CH
,

148 
CL
);

149 
	`gë_h™_image
(
mc
, *
ªtm≠
);

152 
mc
 = 
	`c⁄vît_ksc_to_johab
(
CH
, 
CL
);

153 i‡(
mc
)

154 
	`gë_h™_image
(
mc
, (*Ë
m≠
);

156 *
pwidth
 = 16;

157 *
pheight
 = 16;

158 *
pba£
 = 0;

159 *
ªtm≠
 = 
m≠
;

160 
	}
}

164 
	$dbcs_gëãxtbôs
(
PMWFONT
 
pf⁄t
, 
ch
, 
MWTEXTFLAGS
 
Êags
,

165 c⁄° 
MWIMAGEBITS
 **
ªtm≠
, 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
,

166 
MWCOORD
 *
pba£
)

169 (*
func
)(
PMWFONT
 
pf⁄t
, 
ch
, c⁄° 
MWIMAGEBITS
 **
ªtm≠
,

170 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
, MWCOORD *
pba£
);

172 i‡(
ch
 >= 0x0100) {

173 
Êags
 & 
MWTF_DBCSMASK
) {

174 #i‡
HAVE_BIG5_SUPPORT


175 
MWTF_DBCS_BIG5
:

176 
func
 = 
big5_gëãxtbôs
;

179 #i‡
HAVE_GB2312_SUPPORT


180 
MWTF_DBCS_EUCCN
:

181 
func
 = 
euc˙_gëãxtbôs
;

184 #i‡
HAVE_KSC5601_SUPPORT


185 
MWTF_DBCS_EUCKR
:

186 
func
 = 
euckr_gëãxtbôs
;

189 #i‡
HAVE_JISX0213_SUPPORT


190 
MWTF_DBCS_JIS
:

191 
func
 = 
jis_gëãxtbôs
;

196 *
pwidth
 = *
pheight
 = *
pba£
 = 0;

200 
func
 = 
gí_gëãxtbôs
;

203 
	`func
(
pf⁄t
, 
ch
, 
ªtm≠
, 
pwidth
, 
pheight
, 
pba£
);

204 
	}
}

211 
	$dbcs_gëãxtsize
(
PMWFONT
 
pf⁄t
, c⁄° *
°r
, 
cc
,

212 
MWTEXTFLAGS
 
Êags
, 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
, MWCOORD *
pba£
)

214 
PMWCFONT
 
pf
 = ((
PMWCOREFONT
)
pf⁄t
)->
cf⁄t
;

215 
c
;

216 
width
 = 0;

218 
Êags
 &
MWTF_DBCSMASK
;

219 --
cc
 >= 0) {

220 
c
 = *
°r
++;

221 i‡(
c
 >= 0x0100) {

222 
Êags
) {

223 
MWTF_DBCS_BIG5
:

224 
MWTF_DBCS_EUCCN
:

225 
MWTF_DBCS_JIS
:

227 
width
 += 12;

229 
MWTF_DBCS_EUCKR
:

230 
width
 += 12;

233 } if(
c
 >
pf
->
fú°ch¨
 && c <Öf->fú°ch¨+pf->
size
)

234 
width
 +
pf
->width?Öf->width[
c
 -Öf->
fú°ch¨
]:

235 
pf
->
maxwidth
;

237 *
pwidth
 = 
width
;

238 *
pheight
 = 
pf
->
height
;

239 *
pba£
 = 
pf
->
as˚¡
;

240 
	}
}

	@engine/font_eucjp.c

10 
	~<°dio.h
>

11 
	~<°dlib.h
>

12 
	~<°rög.h
>

13 
	~<uni°d.h
>

14 
	~<sys/ty≥s.h
>

15 
	~<sys/mm™.h
>

16 
	~<f˙é.h
>

17 #i‚de‡
MAP_FAILED


18 
	#MAP_FAILED
 ((*)-1)

	)

20 
	~"devi˚.h
"

21 
	~"devf⁄t.h
"

22 
	~"../drivîs/gíf⁄t.h
"

24 
	sMWEUCJPFONT
 {

25 
PMWFONTPROCS
 
	mf⁄çrocs
;

26 
	mf⁄tsize
;

27 
	mf⁄åŸ©i⁄
;

28 
	mf⁄èâr
;

30 
	mwidth
;

31 
	mheight
;

32 
	mkoff£t
;

33 
	mkwidth
;

34 
	mkbyãs
;

35 
	maoff£t
;

36 
	mawidth
;

37 
	mabyãs
;

38 
	mfd
;

39 *
	mf⁄t_ba£
;

40 } 
	tMWEUCJPFONT
;

42 
PMWEUCJPFONT
 
eucjp_¸óãf⁄t
(c⁄° *
«me
, 
MWCOORD
 
height
, 
©å
);

43 
MWBOOL
 
eucjp_gëf⁄töfo
(
PMWFONT
 
pf⁄t
, 
PMWFONTINFO
 
pf⁄töfo
);

44 
eucjp_gëãxtbôs
(
PMWFONT
 
pf⁄t
, 
ch
, c⁄° 
MWIMAGEBITS
 **
ªtm≠
,

45 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
, MWCOORD *
pba£
);

46 
eucjp_gëãxtsize
(
PMWFONT
 
pf⁄t
, c⁄° *
ãxt
, 
cc
,

47 
MWTEXTFLAGS
 
Êags
, 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
,

48 
MWCOORD
 *
pba£
);

49 
eucjp_de°royf⁄t
(
PMWFONT
 
pf⁄t
);

52 
MWFONTPROCS
 
	geucjp_¥ocs
 = {

53 
MWTF_UC16
,

54 
eucjp_gëf⁄töfo
,

55 
eucjp_gëãxtsize
,

56 
eucjp_gëãxtbôs
,

57 
eucjp_de°royf⁄t
,

58 
c‹ef⁄t_døwãxt
,

59 
NULL
,

60 
NULL
,

61 
NULL
,

62 
NULL
,

70 
PMWEUCJPFONT


71 
	$eucjp_¸óãf⁄t
(c⁄° *
«me
, 
MWCOORD
 
height
, 
©å
)

73 
PMWEUCJPFONT
 
pf
;

74 
fd
, 
r
;

75 
fsize
;

76 
vî
, 
mfw
, 
mfh
;

77 
buf
[256];

78 
‚ame
[256];

81 
pf
 = (
PMWEUCJPFONT
Ë
	`ˇŒoc
((
MWEUCJPFONT
), 1);

82 i‡(!
pf
)

83  
NULL
;

85 
fd
 = 
	`›í
(
«me
, 
O_RDONLY
);

86 i‡(
fd
 < 0) {

87 
	`°r˝y
(
‚ame
, 
EUCJP_FONT_DIR
 "/");

88 
	`°r˝y
(
‚ame
 + (
EUCJP_FONT_DIR
), 
«me
);

89 
fd
 = 
	`›í
(
‚ame
, 
O_RDONLY
);

91 i‡(
fd
 < 0)

92 
EUCJP_FAIL
;

94 
r
 = 
	`ªad
(
fd
, 
buf
, 256);

95 i‡(
r
 != 256) {

96 
	`¥ötf
("FONT_EUCJP: c™'àªad %s\n", 
«me
);

97 
EUCJP_FAIL
;

100 
fsize
 = 
	`l£ek
(
fd
, 0L, 
SEEK_END
);

101 
	`l£ek
(
fd
, 0L, 
SEEK_SET
);

103 i‡(
	`ssˇnf
(
buf
, "#MGLFONT%02d%02d%02d", &
vî
, &
mfw
, &
mfh
) == 3) {

105 
	`¥ötf
("FONT_EUCJP: magic is missing.\n");

106 
EUCJP_FAIL
;

109 
pf
->
f⁄çrocs
 = &
eucjp_¥ocs
;

110 
pf
->
f⁄tsize
 = 
height
;

111 
pf
->
f⁄åŸ©i⁄
 = 0;

112 
pf
->
f⁄èâr
 = 
©å
;

114 
pf
->
height
 = 
mfh
;

115 
pf
->
width
 = 
mfw
;

116 
pf
->
aoff£t
 = 32;

117 
pf
->
awidth
 = (
mfw
 / 2 + 7) / 8;

118 
pf
->
abyãs
 =Öf->
awidth
 * 
mfh
;

119 
pf
->
koff£t
 =Öf->
aoff£t
 +Öf->
abyãs
 * 256;

120 
pf
->
kwidth
 = (
mfw
 + 7) / 8;

121 
pf
->
kbyãs
 =Öf->
kwidth
 * 
mfh
;

122 
pf
->
fd
 = fd;

123 i‡(
fsize
 !
pf
->
koff£t
 +Öf->
kbyãs
 * 8064) {

124 
	`¥ötf
("FONT_EUCJP: Not MGL font file(filesize doesn't match).\n");

125 
EUCJP_FAIL
;

127 
pf
->
f⁄t_ba£
 =

128 (*Ë
	`mm≠
((
ˇddr_t
Ë0, 
pf
->
koff£t
 +Öf->
kbyãs
 * 8064,

129 
PROT_READ
, 
MAP_SHARED
 | 
MAP_FILE
, 
fd
, 0);

130 i‡(
pf
->
f⁄t_ba£
 =
MAP_FAILED
) {

131 
	`¥ötf
("FONT_EUCJP: Can't mmap font data.\n");

132 
EUCJP_FAIL
;

135  
pf
;

137 
EUCJP_FAIL
:

138 
	`‰ì
(
pf
);

139 
	`˛o£
(
fd
);

140  
NULL
;

141 
	}
}

144 
MWBOOL


145 
	$eucjp_gëf⁄töfo
(
PMWFONT
 
pf⁄t
, 
PMWFONTINFO
 
pf⁄töfo
)

147 
PMWEUCJPFONT
 
pf
 = (PMWEUCJPFONTË
pf⁄t
;

148 
i
;

150 
pf⁄töfo
->
height
 = 
pf
->height;

151 
pf⁄töfo
->
maxwidth
 = 
pf
->
width
;

152 
pf⁄töfo
->
ba£löe
 = 
pf
->
height
 - 2;

155 
pf⁄töfo
->
löe•acög
 =Öf⁄töfo->
height
;

156 
pf⁄töfo
->
des˚¡
 =Öf⁄töfo->
height
 -Öf⁄töfo->
ba£löe
;

157 
pf⁄töfo
->
maxas˚¡
 =Öf⁄töfo->
ba£löe
;

158 
pf⁄töfo
->
maxdes˚¡
 =Öf⁄töfo->
des˚¡
;

160 
pf⁄töfo
->
fú°ch¨
 = 0;

161 
pf⁄töfo
->
œ°ch¨
 = 0;

162 
pf⁄töfo
->
fixed
 = 
TRUE
;

164 
i
 = 0; i < 256; i++)

165 
pf⁄töfo
->
widths
[
i
] = 
pf
->
width
 / 2;

167  
TRUE
;

169 
	}
}

173 
	$eucjp_gëãxtsize
(
PMWFONT
 
pf⁄t
, c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
,

174 
MWCOORD
 * 
pwidth
, MWCOORD * 
pheight
, MWCOORD * 
pba£
)

176 
PMWEUCJPFONT
 
pf
 = (PMWEUCJPFONTË
pf⁄t
;

178 *
pwidth
 = 
	`°æí
(
ãxt
Ë* 
pf
->
width
 / 2;

179 *
pheight
 = 
pf
->
height
;

180 *
pba£
 = 
pf
->
height
 - 2;

181 
	}
}

185 
	$eucjp_gëãxtbôs
(
PMWFONT
 
pf⁄t
, 
ch
, c⁄° 
MWIMAGEBITS
 **
ªtm≠
,

186 
MWCOORD
 * 
pwidth
, MWCOORD * 
pheight
, MWCOORD * 
pba£
)

188 
PMWEUCJPFONT
 
pf
 = (PMWEUCJPFONTË
pf⁄t
;

189 *
Âä
;

190 
i
, 
byãwidth
;

191 
MWIMAGEBITS
 
m≠
[
MAX_CHAR_HEIGHT
 * 
MAX_CHAR_WIDTH
 / 
MWIMAGE_BITSPERIMAGE
];

192 
MWIMAGEBITS
 *
bôm≠
 = 
m≠
;

194 *
ªtm≠
 = 
m≠
;

195 *
pheight
 = 
pf
->
height
;

196 *
pba£
 = 
pf
->
height
 - 2;

197 i‡(
ch
 < 256) {

198 *
pwidth
 = 
pf
->
width
 / 2;

199 
Âä
 = &(
pf
->
f⁄t_ba£
[pf->
aoff£t
 +Öf->
abyãs
 * 
ch
]);

200 
byãwidth
 = 
pf
->
awidth
;

202 
kix
 = (((
ch
 >> 8) & 0xff) - 0xA1) * 96 + ((ch & 0xff) - 0xA0);

203 i‡(
kix
 < 0 || 8000 <= kix)

204 
kix
 = 0;

206 *
pwidth
 = 
pf
->
width
;

207 
Âä
 = &(
pf
->
f⁄t_ba£
[pf->
koff£t
 +Öf->
kbyãs
 * 
kix
]);

208 
byãwidth
 = 
pf
->
kwidth
;

211 
i
 = 0; i < 
pf
->
height
; i++) {

212 
MWIMAGEBITS
 
±n0
, 
±n1
, 
±n2
, 
±n3
;

213 
byãwidth
) {

215 
±n0
 = *(
Âä
) & 0xFF;

216 *
bôm≠
++ = *(
Âä
) << 8;

219 
±n0
 = *(
Âä
) & 0xFF;

220 
±n1
 = *(
Âä
 + 1) & 0xFF;

221 *
bôm≠
++ = 
±n0
 << 8 | 
±n1
;

224 
±n0
 = *(
Âä
) & 0xFF;

225 
±n1
 = *(
Âä
 + 1) & 0xFF;

226 
±n2
 = *(
Âä
 + 2) & 0xFF;

227 *
bôm≠
++ = 
±n0
 << 8 | 
±n1
;

228 *
bôm≠
++ = 
±n2
 << 8;

231 
±n0
 = *(
Âä
) & 0xFF;

232 
±n1
 = *(
Âä
 + 1) & 0xFF;

233 
±n2
 = *(
Âä
 + 2) & 0xFF;

234 
±n3
 = *(
Âä
 + 3) & 0xFF;

235 *
bôm≠
++ = 
±n0
 << 8 | 
±n1
;

236 *
bôm≠
++ = 
±n2
 << 8 | 
±n3
;

245 
Âä
 +
byãwidth
;

247 
	}
}

251 
	$eucjp_de°royf⁄t
(
PMWFONT
 
pf⁄t
)

253 
PMWEUCJPFONT
 
pf
 = (PMWEUCJPFONTË
pf⁄t
;

255 
	`munm≠
(
pf
->
f⁄t_ba£
,Öf->
koff£t
 +Öf->
kbyãs
 * 8064);

256 
	`˛o£
(
pf
->
fd
);

257 
	}
}

	@engine/font_fnt.c

7 
	~<°dio.h
>

8 
	~<°rög.h
>

9 
	~"sw≠.h
"

10 
	~"devi˚.h
"

11 
	~"devf⁄t.h
"

12 
	~"../drivîs/gíf⁄t.h
"

39 
	#VERSION
 "RB11"

	)

44 #ifde‡
HAVE_FNTGZ_SUPPORT


45 
	~<zlib.h
>

46 
	#FILEP
 
gzFûe


	)

47 
	#FOPEN
(
∑th
, 
mode
Ë
	`gz›í
’©h, mode)

	)

48 
	#FREAD
(
fûe
, 
buf„r
, 
size
Ë
	`gzªad
(fûe, buf„r, size)

	)

49 
	#FSEEK
(
fûe
, 
off£t
, 
whí˚
Ë
	`gz£ek
(fûe, off£t, whí˚)

	)

50 
	#FCLOSE
(
fûe
Ë
	`gz˛o£
(fûe)

	)

52 
	#FILEP
 
FILE
 *

	)

53 
	#FOPEN
(
∑th
, 
mode
Ë
	`f›í
’©h, mode)

	)

54 
	#FREAD
(
fûe
, 
buf„r
, 
size
Ë
	`‰ód
(buf„r, 1, size, fûe)

	)

55 
	#FSEEK
(
fûe
, 
off£t
, 
whí˚
Ë
	`f£ek
(fûe, off£t, whí˚)

	)

56 
	#FCLOSE
(
fûe
Ë
	`f˛o£
(fûe)

	)

60 
‚t_u∆ﬂdf⁄t
(
PMWFONT
 
f⁄t
);

61 
PMWCFONT
 
‚t_lﬂd_f⁄t
(c⁄° *
∑th
);

64 
MWFONTPROCS
 
	g‚t_f⁄çrocs
 = {

65 
MWTF_ASCII
,

66 
gí_gëf⁄töfo
,

67 
gí_gëãxtsize
,

68 
gí_gëãxtbôs
,

69 
‚t_u∆ﬂdf⁄t
,

70 
c‹ef⁄t_døwãxt
,

71 
NULL
,

72 
NULL
,

73 
NULL
,

74 
NULL
,

78 
MWFONTPROCS
 
	g‚t_f⁄çrocs16
 = {

79 
MWTF_UC16
,

80 
gí_gëf⁄töfo
,

81 
gí16_gëãxtsize
,

82 
gí_gëãxtbôs
,

83 
‚t_u∆ﬂdf⁄t
,

84 
gí16_døwãxt
,

85 
NULL
,

86 
NULL
,

87 
NULL
,

88 
NULL
,

91 
PMWCOREFONT


92 
	$‚t_¸óãf⁄t
(c⁄° *
«me
, 
MWCOORD
 
height
, 
©å
)

94 
PMWCOREFONT
 
pf
;

95 
PMWCFONT
 
cf⁄t
;

96 
uc16
;

99 
cf⁄t
 = 
	`‚t_lﬂd_f⁄t
(
«me
);

100 i‡(!
cf⁄t
)

101  
NULL
;

103 i‡(!(
pf
 = (
MWCOREFONT
 *Ë
	`mÆloc
((MWCOREFONT)))) {

104 
	`‰ì
(
cf⁄t
);

105  
NULL
;

109 
uc16
 = 
cf⁄t
->
fú°ch¨
 > 255 ||

110 (
cf⁄t
->
fú°ch¨
 + cf⁄t->
size
) > 255;

111 
pf
->
f⁄çrocs
 = 
uc16
? &
‚t_f⁄çrocs16
: &
‚t_f⁄çrocs
;

113 
pf
->
f⁄tsize
 =Öf->
f⁄åŸ©i⁄
 =Öf->
f⁄èâr
 = 0;

114 
pf
->
«me
 = "FNT";

115 
pf
->
cf⁄t
 = cfont;

116  
pf
;

117 
	}
}

120 
	$‚t_u∆ﬂdf⁄t
(
PMWFONT
 
f⁄t
)

122 
PMWCOREFONT
 
pf
 = (PMWCOREFONT)
f⁄t
;

123 
PMWCFONT
 
pfc
 = 
pf
->
cf⁄t
;

125 i‡(
pfc
) {

126 i‡(
pfc
->
width
)

127 
	`‰ì
(
pf
->
cf⁄t
->
width
);

128 i‡(
pfc
->
off£t
)

129 
	`‰ì
(
pf
->
cf⁄t
->
off£t
);

130 i‡(
pfc
->
bôs
)

131 
	`‰ì
(
pf
->
cf⁄t
->
bôs
);

132 i‡(
pfc
->
«me
)

133 
	`‰ì
(
pf
->
cf⁄t
->
«me
);

135 
	`‰ì
(
pfc
);

138 
	`‰ì
(
f⁄t
);

139 
	}
}

142 
	$READBYTE
(
FILEP
 
Â
, *
˝
)

144 #ifde‡
HAVE_FNTGZ_SUPPORT


145 
buf
[1];

147 i‡(
	`FREAD
(
Â
, 
buf
, 1) != 1)

149 *
˝
 = 
buf
[0];

151 
c
;

153 i‡((
c
 = 
	`gëc
(
Â
)Ë=
EOF
)

155 *
˝
 = ()
c
;

158 
	}
}

161 
	$READSHORT
(
FILEP
 
Â
, *
•
)

163 #ifde‡
HAVE_FNTGZ_SUPPORT


164 
buf
[2];

166 i‡(
	`FREAD
(
Â
, 
buf
, 2) != 2)

168 *
•
 = 
buf
[0] | (buf[1] << 8);

170 
c
;

171 
s
;

173 i‡((
c
 = 
	`gëc
(
Â
)Ë=
EOF
)

175 
s
 = 
c
 & 0xff;

176 i‡((
c
 = 
	`gëc
(
Â
)Ë=
EOF
)

178 *
•
 = (
c
 << 8Ë| 
s
;

181 
	}
}

184 
	$READLONG
(
FILEP
 
Â
, *
Õ
)

186 #ifde‡
HAVE_FNTGZ_SUPPORT


187 
buf
[4];

189 i‡(
	`FREAD
(
Â
, 
buf
, 4) != 4)

191 *
Õ
 = 
buf
[0] | (buf[1] << 8) | (buf[2] << 16) | (buf[3] << 24);

193 
c
;

194 
l
;

196 i‡((
c
 = 
	`gëc
(
Â
)Ë=
EOF
)

198 
l
 = 
c
 & 0xff;

199 i‡((
c
 = 
	`gëc
(
Â
)Ë=
EOF
)

201 
l
 |(
c
 << 8);

202 i‡((
c
 = 
	`gëc
(
Â
)Ë=
EOF
)

204 
l
 |(
c
 << 16);

205 i‡((
c
 = 
	`gëc
(
Â
)Ë=
EOF
)

207 *
Õ
 = (
c
 << 24Ë| 
l
;

210 
	}
}

214 
	$READSTR
(
FILEP
 
Â
, *
buf
, 
cou¡
)

216  
	`FREAD
(
Â
, 
buf
, 
cou¡
);

217 
	}
}

222 
	$READSTRPAD
(
FILEP
 
Â
, *
buf
, 
tŸÀn
)

224 *
p
;

226 i‡(
	`FREAD
(
Â
, 
buf
, 
tŸÀn
) !=Åotlen)

228 
p
 = &
buf
[
tŸÀn
];

229 *
p
-- = 0;

230 *
p
 =' ' &&Ö >
buf
)

231 *
p
-- = '\0';

232  
tŸÀn
;

233 
	}
}

236 
PMWCFONT


237 
	$‚t_lﬂd_f⁄t
(c⁄° *
∑th
)

239 
FILEP
 
iÂ
;

240 
PMWCFONT
 
pf
 = 
NULL
;

241 
i
;

242 
maxwidth
, 
height
, 
as˚¡
, 
∑d
;

243 
fú°ch¨
, 
deÁu…ch¨
, 
size
;

244 
nbôs
, 
noff£t
, 
nwidth
;

245 
vîsi⁄
[4+1];

246 
«me
[64+1];

247 
c›yright
[256+1];

248 
‚ame
[256];

250 
iÂ
 = 
	`FOPEN
(
∑th
, "rb");

252 i‡(!
iÂ
) {

253 
	`°r˝y
(
‚ame
, 
FNT_FONT_DIR
 "/");

254 
	`°r˝y
(
‚ame
 + (
FNT_FONT_DIR
), 
∑th
);

255 
iÂ
 = 
	`FOPEN
(
‚ame
, "rb");

258 i‡(!
iÂ
) {

259 *
ív
 = 
	`gëív
("MWFONTDIR");

260 i‡(
ív
) {

261 
	`•rötf
(
‚ame
, "%s/%s", 
ív
, 
∑th
);

263 
	`¥ötf
("TryögÅÿgë f⁄à‰om %s\n", 
‚ame
);

264 
iÂ
 = 
	`FOPEN
(
‚ame
, "rb");

269 i‡(!
iÂ
)

270  
NULL
;

273 
	`mem£t
(
vîsi⁄
, 0, (version));

274 i‡(
	`READSTR
(
iÂ
, 
vîsi⁄
, 4) != 4)

275 
îrout
;

276 i‡(
	`°rcmp
(
vîsi⁄
, 
VERSION
) != 0)

277 
îrout
;

279 
pf
 = (
PMWCFONT
)
	`ˇŒoc
(1, (
MWCFONT
));

280 i‡(!
pf
)

281 
îrout
;

284 i‡(
	`READSTRPAD
(
iÂ
, 
«me
, 64) != 64)

285 
îrout
;

286 
pf
->
«me
 = (*)
	`mÆloc
(
	`°æí
(name)+1);

287 i‡(!
pf
->
«me
)

288 
îrout
;

289 
	`°r˝y
(
pf
->
«me
,Çame);

292 i‡(
	`READSTRPAD
(
iÂ
, 
c›yright
, 256) != 256)

293 
îrout
;

296 i‡(!
	`READSHORT
(
iÂ
, &
maxwidth
))

297 
îrout
;

298 
pf
->
maxwidth
 = maxwidth;

299 i‡(!
	`READSHORT
(
iÂ
, &
height
))

300 
îrout
;

301 
pf
->
height
 = height;

302 i‡(!
	`READSHORT
(
iÂ
, &
as˚¡
))

303 
îrout
;

304 
pf
->
as˚¡
 =áscent;

305 i‡(!
	`READSHORT
(
iÂ
, &
∑d
))

306 
îrout
;

307 i‡(!
	`READLONG
(
iÂ
, &
fú°ch¨
))

308 
îrout
;

309 
pf
->
fú°ch¨
 = firstchar;

310 i‡(!
	`READLONG
(
iÂ
, &
deÁu…ch¨
))

311 
îrout
;

312 
pf
->
deÁu…ch¨
 = defaultchar;

313 i‡(!
	`READLONG
(
iÂ
, &
size
))

314 
îrout
;

315 
pf
->
size
 = size;

319 i‡(!
	`READLONG
(
iÂ
, &
nbôs
))

320 
îrout
;

321 
pf
->
bôs
 = (
MWIMAGEBITS
 *)
	`mÆloc
(
nbôs
 * (MWIMAGEBITS));

322 i‡(!
pf
->
bôs
)

323 
îrout
;

324 
pf
->
bôs_size
 = 
nbôs
;

327 i‡(!
	`READLONG
(
iÂ
, &
noff£t
))

328 
îrout
;

329 i‡(
noff£t
) {

330 
pf
->
off£t
 = (*)
	`mÆloc
(
noff£t
 * ());

331 i‡(!
pf
->
off£t
)

332 
îrout
;

336 i‡(!
	`READLONG
(
iÂ
, &
nwidth
))

337 
îrout
;

338 i‡(
nwidth
) {

339 
pf
->
width
 = (*)
	`mÆloc
(
nwidth
 * ());

340 i‡(!
pf
->
width
)

341 
îrout
;

345 
i
=0; i<
nbôs
; ++i)

346 i‡(!
	`READSHORT
(
iÂ
, &
pf
->
bôs
[
i
]))

347 
îrout
;

349 i‡(
	`·ñl
(
iÂ
) & 02)

350 i‡(!
	`READSHORT
(
iÂ
, &
pf
->
bôs
[
i
]))

351 
îrout
;

352 i‡(
noff£t
)

353 
i
=0; i<
pf
->
size
; ++i)

354 i‡(!
	`READLONG
(
iÂ
, &
pf
->
off£t
[
i
]))

355 
îrout
;

356 i‡(
nwidth
)

357 
i
=0; i<
pf
->
size
; ++i)

358 i‡(!
	`READBYTE
(
iÂ
, &
pf
->
width
[
i
]))

359 
îrout
;

361 
	`FCLOSE
(
iÂ
);

362  
pf
;

364 
îrout
:

365 
	`FCLOSE
(
iÂ
);

366 i‡(!
pf
)

367  
NULL
;

368 i‡(
pf
->
«me
)

369 
	`‰ì
(
pf
->
«me
);

370 i‡(
pf
->
bôs
)

371 
	`‰ì
(
pf
->
bôs
);

372 i‡(
pf
->
off£t
)

373 
	`‰ì
(
pf
->
off£t
);

374 i‡(
pf
->
width
)

375 
	`‰ì
(
pf
->
width
);

376 
	`‰ì
(
pf
);

377  
NULL
;

378 
	}
}

	@engine/font_freetype.c

9 
	~<°dio.h
>

10 
	~<°dlib.h
>

11 
	~<°rög.h
>

12 
	~<m©h.h
>

13 
	~<dúít.h
>

14 
	~<‰ìty≥/‰ìty≥.h
>

15 
	~<‰ìty≥/·xkîn.h
>

16 
	~<‰ìty≥/·«meid.h
>

17 
	~<‰ìty≥/·xcm≠.h
>

18 
	~<‰ìty≥/·xwidth.h
>

19 
	~"devi˚.h
"

20 
	~"devf⁄t.h
"

22 #i‡
TT_FREETYPE_MAJOR
 !1 || 
TT_FREETYPE_MINOR
 < 3

26 
	sMWFREETYPEFONT
 {

27 
PMWFONTPROCS
 
	mf⁄çrocs
;

28 
MWCOORD
 
	mf⁄tsize
;

29 
	mf⁄åŸ©i⁄
;

30 
	mf⁄èâr
;

32 
TT_Fa˚
 
	mÁ˚
;

33 
TT_In°™˚
 
	mö°™˚
;

34 
TT_Ch¨M≠
 
	mch¨_m≠
;

35 
TT_Kînög
 
	mdúe˘‹y
;

36 
TT_M©rix
 
	mm©rix
;

37 
TT_Glyph
 
	mglyph
;

38 
MWBOOL
 
	mˇn_kîn
;

39 
	mœ°_glyph_code
;

40 
	mœ°_≥n_pos
;

41 } 
	tMWFREETYPEFONT
;

43 
‰ìty≥_öô
(
PSD
 
psd
);

44 
PMWFREETYPEFONT
 
‰ìty≥_¸óãf⁄t
(c⁄° *
«me
, 
MWCOORD
 
height
, 
©å
);

46 
MWBOOL
 
‰ìty≥_gëf⁄töfo
(
PMWFONT
 
pf⁄t
, 
PMWFONTINFO
 
pf⁄töfo
);

47 
‰ìty≥_gëãxtsize
(
PMWFONT
 
pf⁄t
, c⁄° *
ãxt
, 
cc
,

48 
MWTEXTFLAGS
 
Êags
, 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
,

49 
MWCOORD
 *
pba£
);

50 
‰ìty≥_de°royf⁄t
(
PMWFONT
 
pf⁄t
);

51 
‰ìty≥_døwãxt
(
PMWFONT
 
pf⁄t
, 
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
,

52 c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
);

53 
‰ìty≥_£tf⁄tsize
(
PMWFONT
 
pf⁄t
, 
MWCOORD
 
f⁄tsize
);

54 
‰ìty≥_£tf⁄åŸ©i⁄
(
PMWFONT
 
pf⁄t
, 
ã¡hdegªes
);

57 
MWFONTPROCS
 
	g‰ìty≥_¥ocs
 = {

58 
MWTF_UC16
,

59 
‰ìty≥_gëf⁄töfo
,

60 
‰ìty≥_gëãxtsize
,

61 
NULL
,

62 
‰ìty≥_de°royf⁄t
,

63 
‰ìty≥_døwãxt
,

64 
‰ìty≥_£tf⁄tsize
,

65 
‰ìty≥_£tf⁄åŸ©i⁄
,

66 
NULL
,

67 
NULL
,

70 
TT_Engöe
 
	gígöe
;

71 
OUTPIXELVAL
 
	ggøy_∑Àâe
[5];

74 
MWPIXELVAL
 
gr_f‹eground
;

75 
MWPIXELVAL
 
gr_background
;

76 
MWBOOL
 
gr_u£bg
;

79 
	$‰ìty≥_öô
(
PSD
 
psd
)

81 
öôed
 = 0;

83 i‡(
öôed
)

87 i‡(
	`TT_Inô_FªeTy≥
 (&
ígöe
Ë!
TT_Eº_Ok
) {

92 i‡(
	`TT_Inô_Kînög_Exãnsi⁄
 (
ígöe
Ë!
TT_Eº_Ok
)

95 
öôed
 = 1;

97 
	}
}

99 
PMWFREETYPEFONT


100 
	$‰ìty≥_¸óãf⁄t
(c⁄° *
«me
, 
MWCOORD
 
height
, 
©å
)

102 
PMWFREETYPEFONT
 
pf
;

103 
i
, 
n
;

104 
∂©f‹m
, 
ícodög
;

105 
TT_Fa˚_Pr›îtõs
 
¥›îtõs
;

106 * 
p
;

107 
f⁄äame
[128];

110 i‡(
	`°rchr
(
«me
, '/'Ë!
NULL
)

111 
	`°r˝y
(
f⁄äame
, 
«me
);

113 
	`°r˝y
(
f⁄äame
, 
FREETYPE_FONT_DIR
);

114 
	`°rˇt
(
f⁄äame
, "/");

115 
	`°rˇt
(
f⁄äame
, 
«me
);

119 i‡((
p
 = 
	`°ºchr
(
f⁄äame
, '.')Ë=
NULL
 ||

120 
	`°rcmp
(
p
, ".ttf") != 0) {

121 
	`°rˇt
(
f⁄äame
, ".ttf");

125 
pf
 = (
PMWFREETYPEFONT
)
	`ˇŒoc
((
MWFREETYPEFONT
), 1);

126 i‡(!
pf
)

127  
NULL
;

128 
pf
->
f⁄çrocs
 = &
‰ìty≥_¥ocs
;

131 i‡(
	`TT_O≥n_Fa˚
 (
ígöe
, 
f⁄äame
, &
pf
->
Á˚
Ë!
TT_Eº_Ok
)

132 
out
;

135 
pf
->
ˇn_kîn
 = 
TRUE
;

136 i‡(
	`TT_Lﬂd_Kînög_TabÀ
 (
pf
->
Á˚
, 0Ë!
TT_Eº_Ok
)

137 
pf
->
ˇn_kîn
 = 
FALSE
;

139 i‡(
	`TT_Gë_Kînög_Dúe˘‹y
 (
pf
->
Á˚
, &pf->
dúe˘‹y
)

140 !
TT_Eº_Ok
)

141 
pf
->
ˇn_kîn
 = 
FALSE
;

144 i‡((
pf
->
dúe˘‹y
.
vîsi⁄
 != 0) ||

145 (
pf
->
dúe˘‹y
.
nTabÀs
 <= 0) ||

146 (
pf
->
dúe˘‹y
.
èbÀs
->
lﬂded
 != 1) ||

147 (
pf
->
dúe˘‹y
.
èbÀs
->
vîsi⁄
 != 0) ||

148 (
pf
->
dúe˘‹y
.
èbÀs
->
t
.
kîn0
.
nPaús
 <= 0))

149 
pf
->
ˇn_kîn
 = 
FALSE
;

154 
	`TT_Gë_Fa˚_Pr›îtõs
 (
pf
->
Á˚
, &
¥›îtõs
);

161 
h
 = 
¥›îtõs
.
os2
->
sTypoAs˚ndî
 -Ör›îtõs.os2->
sTypoDes˚ndî


162 + 
¥›îtõs
.
os2
->
sTypoLöeG≠
;

163 
as˚¡
 = 
¥›îtõs
.
os2
->
sTypoAs˚ndî


164 + 
¥›îtõs
.
os2
->
sTypoLöeG≠
/2;

165 
pf
->
as˚¡
 = (as˚¡ * 
height
 + 
h
/2) / h;

166 
pf
->
des˚¡
 = 
height
 -Öf->
as˚¡
;

169 i‡(
	`TT_New_Glyph
 (
pf
->
Á˚
, &pf->
glyph
Ë!
TT_Eº_Ok
)

170 
out
;

173 i‡(
	`TT_New_In°™˚
 (
pf
->
Á˚
, &pf->
ö°™˚
Ë!
TT_Eº_Ok
)

174 
out
;

177 i‡(
	`TT_Së_In°™˚_Resﬁuti⁄s
 (
pf
->
ö°™˚
, 96, 96Ë!
TT_Eº_Ok
)

178 
out
;

181 
n
 = 
¥›îtõs
.
num_Ch¨M≠s
;

183 
i
 = 0; i < 
n
; i++) {

184 
	`TT_Gë_Ch¨M≠_ID
 (
pf
->
Á˚
, 
i
, &
∂©f‹m
, &
ícodög
);

185 i‡(((
∂©f‹m
 =
TT_PLATFORM_MICROSOFT
) &&

186 (
ícodög
 =
TT_MS_ID_UNICODE_CS
)) ||

187 ((
∂©f‹m
 =
TT_PLATFORM_APPLE_UNICODE
) &&

188 (
ícodög
 =
TT_APPLE_ID_DEFAULT
)))

190 
	`TT_Gë_Ch¨M≠
 (
pf
->
Á˚
, 
i
, &pf->
ch¨_m≠
);

191 
i
 = 
n
 + 1;

194 i‡(
i
 =
n
) {

195 
	`DPRINTF
("freetype_createfont:Ço unicode mapÅable\n");

196 
out
;

199 
	`GdSëF⁄tSize
((
PMWFONT
)
pf
, 
height
);

200 
	`GdSëF⁄tRŸ©i⁄
((
PMWFONT
)
pf
, 0);

201 
	`GdSëF⁄tAâr
((
PMWFONT
)
pf
, 
©å
, 0);

203  
pf
;

205 
out
:

206 
	`‰ì
(
pf
);

207  
NULL
;

208 
	}
}

211 
	$compuã_kînvÆ
(
PMWFREETYPEFONT
 
pf
, 
cuºít_glyph_code
)

213 
i
 = 0;

214 
kînvÆ
;

215 
nPaús
 = 
pf
->
dúe˘‹y
.
èbÀs
->
t
.
kîn0
.nPairs;

216 
TT_Kîn_0_Paú
 *
∑ú
 = 
pf
->
dúe˘‹y
.
èbÀs
->
t
.
kîn0
.
∑ús
;

218 i‡(
pf
->
œ°_glyph_code
 != -1) {

219 (
∑ú
->
À·
 !
pf
->
œ°_glyph_code
)

220 && (
∑ú
->
right
 !
cuºít_glyph_code
))

222 
∑ú
++;

223 
i
++;

224 i‡(
i
 =
nPaús
)

228 i‡(
i
 =
nPaús
)

229 
kînvÆ
 = 0;

232 
kînvÆ
 = (
∑ú
->
vÆue
 + 32) & -64;

234 
kînvÆ
 = 0;

236  
kînvÆ
;

237 
	}
}

239 
TT_USh‹t


240 
	$Gë_Glyph_Width
(
PMWFREETYPEFONT
 
pf
, 
TT_USh‹t
 
glyph_ödex
)

242 
TT_Glyph_Mërics
 
mërics
;

244 i‡(
	`TT_Lﬂd_Glyph
 ( 
pf
->
ö°™˚
,Öf->
glyph
,

245 
	`TT_Ch¨_Index
 (
pf
->
ch¨_m≠
,
glyph_ödex
),

246 
TTLOAD_SCALE_GLYPH
|
TTLOAD_HINT_GLYPH
Ë!
TT_Eº_Ok
)

249 i‡(
	`TT_Lﬂd_Glyph
 ( 
pf
->
ö°™˚
,Öf->
glyph
, 0,

250 
TTLOAD_SCALE_GLYPH
|
TTLOAD_HINT_GLYPH
Ë!
TT_Eº_Ok
)

254 
	`TT_Gë_Glyph_Mërics
 (
pf
->
glyph
, &
mërics
);

255 ((
mërics
.
adv™˚
 & 0xFFFFFFC0) >> 6);

256 
	}
}

260 
	$døwch¨
(
PMWFREETYPEFONT
 
pf
, 
PSD
 
psd
, 
TT_Glyph
 
glyph
, 
x_off£t
,

261 
y_off£t
)

263 
TT_F26DŸ6
 
xmö
, 
ymö
, 
xmax
, 
ymax
, 
x
, 
y
, 
z
;

264 *
§c
, *
§˝å
;

265 
MWPIXELVAL
 *
d°
, *
d°±r
;

266 
MWPIXELVAL
 *
bôm≠
;

267 
size
, 
width
, 
height
;

268 
TT_Ouéöe
 
ouéöe
;

269 
TT_BBox
 
bbox
;

270 
TT_Ra°î_M≠
 
Ra°î
;

271 
TT_Eº‹
 
îr‹
;

275 
	`TT_Gë_Glyph_Ouéöe
 (
pf
->
glyph
, &
ouéöe
);

276 
	`TT_Gë_Ouéöe_BBox
 (&
ouéöe
, &
bbox
);

278 
xmö
 = (
bbox
.
xMö
 & -64) >> 6;

279 
ymö
 = (
bbox
.
yMö
 & -64) >> 6;

280 
xmax
 = ((
bbox
.
xMax
 + 63) & -64) >> 6;

281 
ymax
 = ((
bbox
.
yMax
 + 63) & -64) >> 6;

282 
width
 = 
xmax
 - 
xmö
;

283 
height
 = 
ymax
 - 
ymö
;

284 
size
 = 
width
 * 
height
;

287 
Ra°î
.
rows
 = 
height
;

288 
Ra°î
.
width
 = width;

290 i‡(
pf
->
f⁄èâr
&
MWTF_ANTIALIAS
)

291 
Ra°î
.
cﬁs
 = (Ra°î.
width
 + 3) & -4;

293 
Ra°î
.
cﬁs
 = (Ra°î.
width
 + 7) & -8;

295 
Ra°î
.
Êow
 = 
TT_Flow_Up
;

296 
Ra°î
.
size
 = Ra°î.
rows
 * Ra°î.
cﬁs
;

297 
Ra°î
.
bôm≠
 = 
	`mÆloc
 (Ra°î.
size
);

299 
	`mem£t
 (
Ra°î
.
bôm≠
, 0, Ra°î.
size
);

309 i‡(!(
pf
->
f⁄èâr
&
MWTF_ANTIALIAS
))

310 
îr‹
 = 
	`TT_Gë_Glyph_Bôm≠
 (
pf
->
glyph
, &
Ra°î
,

311 -
xmö
 * 64, -
ymö
 * 64);

313 
îr‹
 = 
	`TT_Gë_Glyph_Pixm≠
 (
pf
->
glyph
, &
Ra°î
,

314 -
xmö
 * 64, -
ymö
 * 64);

316 i‡(
îr‹
) {

317 
	`‰ì
 (
Ra°î
.
bôm≠
);

321 
bôm≠
 = 
	`mÆloc
 (
size
 *  (
MWPIXELVAL
));

322 
	`mem£t
 (
bôm≠
, 0, 
size
 *  (
MWPIXELVAL
));

324 
§c
 = (*Ë
Ra°î
.
bôm≠
;

325 
d°
 = 
bôm≠
 + (
size
 - 
width
);

327 
y
 = 
ymö
; y < 
ymax
; y++) {

328 
§˝å
 = 
§c
;

329 
d°±r
 = 
d°
;

331 
x
 = 
xmö
; x < 
xmax
; x++) {

332 i‡(
pf
->
f⁄èâr
&
MWTF_ANTIALIAS
)

333 *
d°±r
++ = 
gøy_∑Àâe
[(Ë*
§˝å
];

335 
z
=0;

336 
z
 <((
xmax
-
x
-1) < 7 ? (xmax-x-1) : 7);

337 
z
++) {

338 *
d°±r
++ = ((*
§˝å
 << 
z
) & 0x80)?

339 
gr_f‹eground
: 
gr_background
;

341 
x
 += 7;

344 
§˝å
++;

347 
§c
 +
Ra°î
.
cﬁs
;

348 
d°
 -
width
;

357 
	`GdAªa
(
psd
, 
x_off£t
 + 
xmö
, 
y_off£t
 - (
ymö
 + 
height
), 
width
, height,

358 
bôm≠
, 
MWPF_PIXELVAL
);

362 
	`‰ì
 (
bôm≠
);

363 
	`‰ì
 (
Ra°î
.
bôm≠
);

364 
	}
}

370 
	$‰ìty≥_døwãxt
(
PMWFONT
 
pf⁄t
, 
PSD
 
psd
, 
MWCOORD
 
ax
, MWCOORD 
ay
,

371 c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
)

373 
PMWFREETYPEFONT
 
pf
 = (PMWFREETYPEFONT)
pf⁄t
;

374 c⁄° * 
°r
 = 
ãxt
;

375 
TT_F26DŸ6
 
x
 = 
ax
, 
y
 = 
ay
;

376 
TT_Pos
 
vec_x
, 
vec_y
;

377 
i
;

378 
TT_F26DŸ6
 
°¨tx
, 
°¨ty
;

379 
TT_Ouéöe
 
ouéöe
;

380 
TT_USh‹t
 
curch¨
;

381 
TT_Glyph_Mërics
 
mërics
;

382 
TT_Fa˚_Pr›îtõs
 
¥›îtõs
;

383 
TT_In°™˚_Mërics
 
imërics
;

384 
TT_F26DŸ6
 
as˚¡
, 
des˚¡
;

385 
bÀnd
[5] = { 0x00, 0x44, 0x88, 0xcc, 0xff };

386 
vútuÆ_∑Àâe
[5] = { 0, 1, 2, 3, 4 };

388 
pf
->
œ°_glyph_code
 = -1;

389 
pf
->
œ°_≥n_pos
 = -32767;

395 
	`TT_Gë_Fa˚_Pr›îtõs
 (
pf
->
Á˚
, &
¥›îtõs
);

396 
	`TT_Gë_In°™˚_Mërics
(
pf
->
ö°™˚
, &
imërics
);

398 
as˚¡
 = ((
¥›îtõs
.
h‹iz⁄èl
->
As˚ndî
 * 
imërics
.
y_sˇÀ
)/0x10000);

399 
des˚¡
 = ((
¥›îtõs
.
h‹iz⁄èl
->
Des˚ndî
*
imërics
.
y_sˇÀ
)/0x10000);

405 i‡(
Êags
&
MWTF_BOTTOM
) {

406 
vec_x
 = 0;

407 
vec_y
 = 
des˚¡
;

408 
	`TT_Tønsf‹m_Ve˘‹
(&
vec_x
, &
vec_y
,&
pf
->
m©rix
);

409 
x
 -
vec_x
 / 64;

410 
y
 +
vec_y
 / 64;

411 } i‡(
Êags
&
MWTF_TOP
) {

412 
vec_x
 = 0;

413 
vec_y
 = 
as˚¡
;

414 
	`TT_Tønsf‹m_Ve˘‹
(&
vec_x
, &
vec_y
,&
pf
->
m©rix
);

415 
x
 -
vec_x
 / 64;

416 
y
 +
vec_y
 / 64;

420 i‡(
pf
->
f⁄èâr
&
MWTF_ANTIALIAS
) {

421 
	`TT_Së_Ra°î_Gøy_PÆëã
 (
ígöe
, 
vútuÆ_∑Àâe
);

423 
	`ÆphabÀnd
(
psd
, 
gøy_∑Àâe
, 
gr_f‹eground
, 
gr_background
,

424 
bÀnd
, 5);

427 
°¨tx
 = 
x
;

428 
°¨ty
 = 
y
;

429 
i
 = 0; i < 
cc
; i++) {

430 
curch¨
 = 
	`TT_Ch¨_Index
 (
pf
->
ch¨_m≠
, 
°r
[
i
]);

432 i‡(
	`TT_Lﬂd_Glyph
 (
pf
->
ö°™˚
,Öf->
glyph
, 
curch¨
,

433 
TTLOAD_DEFAULT
Ë!
TT_Eº_Ok
)

436 i‡(
pf
->
f⁄åŸ©i⁄
) {

437 
	`TT_Gë_Glyph_Ouéöe
 (
pf
->
glyph
, &
ouéöe
);

438 
	`TT_Tønsf‹m_Ouéöe
 (&
ouéöe
, &
pf
->
m©rix
);

441 
	`TT_Gë_Glyph_Mërics
 (
pf
->
glyph
, &
mërics
);

443 i‡((
pf
->
f⁄èâr
&
MWTF_KERNING
Ë&&Öf->
ˇn_kîn
) {

444 i‡(
pf
->
f⁄åŸ©i⁄
) {

445 
vec_x
 = 
	`compuã_kînvÆ
(
pf
, 
curch¨
);

446 
vec_y
 = 0;

447 
	`TT_Tønsf‹m_Ve˘‹
(&
vec_x
, &
vec_y
,&
pf
->
m©rix
);

449 
x
 +
vec_x
 / 64;

450 
y
 -
vec_y
 / 64;

452 
x
 +
	`compuã_kînvÆ
(
pf
, 
curch¨
) / 64;

455 
	`døwch¨
(
pf
, 
psd
,Öf->
glyph
, 
x
, 
y
);

457 i‡(
pf
->
f⁄åŸ©i⁄
) {

458 
vec_x
 = 
mërics
.
adv™˚
;

459 
vec_y
 = 0;

460 
	`TT_Tønsf‹m_Ve˘‹
 (&
vec_x
, &
vec_y
, &
pf
->
m©rix
);

462 
x
 +
vec_x
 / 64;

463 
y
 -
vec_y
 / 64;

465 
x
 +
mërics
.
adv™˚
 / 64;

468 i‡(
pf
->
œ°_≥n_pos
 > 
x
)

469 
x
 = 
pf
->
œ°_≥n_pos
;

470 
pf
->
œ°_≥n_pos
 = 
x
;

473 
pf
->
œ°_glyph_code
 = 
curch¨
;

476 i‡(
pf
->
f⁄èâr
 & 
MWTF_UNDERLINE
)

477 
	`GdLöe
(
psd
, 
°¨tx
, 
°¨ty
, 
x
, 
y
, 
FALSE
);

478 
	}
}

483 
MWBOOL


484 
	$‰ìty≥_gëf⁄töfo
(
PMWFONT
 
pf⁄t
, 
PMWFONTINFO
 
pf⁄töfo
)

486 
i
;

487 
PMWFREETYPEFONT
 
pf
 = (PMWFREETYPEFONT)
pf⁄t
;

488 
TT_Fa˚_Pr›îtõs
 
¥›îtõs
;

489 
TT_In°™˚_Mërics
 
imërics
;

490 
TT_USh‹t
 
œ°_glyph_ödex
;

492 
	`TT_Gë_Fa˚_Pr›îtõs
 (
pf
->
Á˚
, &
¥›îtõs
);

493 
	`TT_Gë_In°™˚_Mërics
(
pf
->
ö°™˚
, &
imërics
);

496 
pf⁄töfo
->
height
 = (((
¥›îtõs
.
h‹iz⁄èl
->
As˚ndî
 * \

497 
imërics
.
y_sˇÀ
)/ 0x10000) >> 6) -

498 (((
¥›îtõs
.
h‹iz⁄èl
->
Des˚ndî
 * \

499 
imërics
.
y_sˇÀ
)/ 0x10000) >> 6);

500 
pf⁄töfo
->
maxwidth
 = ((
¥›îtõs
.
h‹iz⁄èl
->
xMax_Exã¡
 * \

501 
imërics
.
x_sˇÀ
)/ 0x10000) >> 6;

502 
pf⁄töfo
->
ba£löe
 = ((
¥›îtõs
.
h‹iz⁄èl
->
As˚ndî
 * \

503 
imërics
.
y_sˇÀ
)/ 0x10000) >> 6;

504 
pf⁄töfo
->
fú°ch¨
 = 
	`TT_Ch¨M≠_Fú°
(
pf
->
ch¨_m≠
, 
NULL
);

505 
pf⁄töfo
->
œ°ch¨
 = 
	`TT_Ch¨M≠_La°
(
pf
->
ch¨_m≠
, 
NULL
);

506 
pf⁄töfo
->
fixed
 = 
¥›îtõs
.
po°s¸ùt
->
isFixedPôch
;

510 
pf⁄töfo
->
löe•acög
 =Öf⁄töfo->
height
 + 2;

511 
pf⁄töfo
->
des˚¡
 =Öf⁄töfo->
height
 -Öf⁄töfo->
ba£löe
;

512 
pf⁄töfo
->
maxas˚¡
 =Öf⁄töfo->
ba£löe
;

513 
pf⁄töfo
->
maxdes˚¡
 =Öf⁄töfo->
des˚¡
;

515 
œ°_glyph_ödex
 = 
¥›îtõs
.
num_Glyphs
 > 255 ? 255:Öroperties.num_Glyphs-1;

519 i‡(
	`TT_Gë_Fa˚_Widths
–
pf
->
Á˚
, 0,

520 
œ°_glyph_ödex
, 
widths
, 
NULL
 ) !
TT_Eº_Ok
) {

521  
TRUE
;

524 
i
=0; i<=
œ°_glyph_ödex
; i++)

525 
	`DPRINTF
("widths[%d]: %d\n", 
i
, 
widths
[i]);

529 
i
=0; i<=
œ°_glyph_ödex
; i++)

530 
pf⁄töfo
->
widths
[
i
] = 
	`Gë_Glyph_Width
(
pf
, i);

533 
	`DPRINTF
("x_ppem: %d\ny_ppem: %d\nx_scale: %d\ny_scale: %d\n\
_ªsﬁuti⁄: %d\ny_ªsﬁuti⁄: %d\n",

535 
imërics
.
x_µem
, imërics.
y_µem
, imërics.
x_sˇÀ
, \

536 
imërics
.
y_sˇÀ
, imërics.
x_ªsﬁuti⁄
, imërics.
y_ªsﬁuti⁄
);

538 
	`DPRINTF
("Ascender: %d\nDescender: %d\nxMax_Extent: %d\n\
 Style Say Italic?: %d\nMac Style Say Bold?: %d\n\
: %d\nsTypoDescender: %d\nusWinAscent: %d\n\
: %d\nusFirstCharIndex: %d\nusLastCharIndex: %d\n\
2 Say Italic?: %d\nOS2 Say Bold?: %d\nOS2 Say monospaced?: %d\n\
 Say monospaced?: %d\n",\

544 
¥›îtõs
.
h‹iz⁄èl
->
As˚ndî
,

545 
¥›îtõs
.
h‹iz⁄èl
->
Des˚ndî
,

546 
¥›îtõs
.
h‹iz⁄èl
->
xMax_Exã¡
,

547 (
¥›îtõs
.
hódî
->
Mac_StyÀ
 & 0x2)?1:0,

548 (
¥›îtõs
.
hódî
->
Mac_StyÀ
 & 0x1)?1:0,

549 
¥›îtõs
.
os2
->
sTypoAs˚ndî
,

550 
¥›îtõs
.
os2
->
sTypoDes˚ndî
,

551 
¥›îtõs
.
os2
->
usWöAs˚¡
,

552 
¥›îtõs
.
os2
->
usWöDes˚¡
,

553 
¥›îtõs
.
os2
->
usFú°Ch¨Index
,

554 
¥›îtõs
.
os2
->
usLa°Ch¨Index
,

555 (
¥›îtõs
.
os2
->
fsSñe˘i⁄
 & 0x1)?1:0,

556 (
¥›îtõs
.
os2
->
fsSñe˘i⁄
 & 0x20)?1:0,

557 
¥›îtõs
.
po°s¸ùt
->
isFixedPôch
,

558 (
¥›îtõs
.
os2
->
∑no£
[3] == 9)?1:0);

561  
TRUE
;

562 
	}
}

565 
	$‰ìty≥_gëãxtsize
(
PMWFONT
 
pf⁄t
, c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
,

566 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
, MWCOORD *
pba£
)

568 
PMWFREETYPEFONT
 
pf
 = (PMWFREETYPEFONT)
pf⁄t
;

569 c⁄° * 
°r
 = 
ãxt
;

570 
TT_F26DŸ6
 
x
 = 0;

571 
i
;

572 
TT_USh‹t
 
curch¨
;

573 
TT_Glyph_Mërics
 
mërics
;

574 
TT_Fa˚_Pr›îtõs
 
¥›îtõs
;

575 
TT_In°™˚_Mërics
 
imërics
;

577 
	`TT_Gë_Fa˚_Pr›îtõs
 (
pf
->
Á˚
, &
¥›îtõs
);

578 
	`TT_Gë_In°™˚_Mërics
(
pf
->
ö°™˚
, &
imërics
);

580 
pf
->
œ°_glyph_code
 = -1;

581 
pf
->
œ°_≥n_pos
 = -32767;

583 
i
 = 0; i < 
cc
; i++) {

584 
curch¨
 = 
	`TT_Ch¨_Index
 (
pf
->
ch¨_m≠
, 
°r
[
i
]);

586 i‡(
	`TT_Lﬂd_Glyph
 (
pf
->
ö°™˚
,Öf->
glyph
, 
curch¨
,

587 
TTLOAD_SCALE_GLYPH
|
TTLOAD_HINT_GLYPH
Ë!
TT_Eº_Ok
)

590 
	`TT_Gë_Glyph_Mërics
 (
pf
->
glyph
, &
mërics
);

592 i‡((
pf
->
f⁄èâr
&
MWTF_KERNING
Ë&&Öf->
ˇn_kîn
) {

593 
x
 +
	`compuã_kînvÆ
(
pf
, 
curch¨
) / 64;

596 
x
 +
mërics
.
adv™˚
 / 64;

599 i‡(
pf
->
œ°_≥n_pos
 > 
x
)

600 
x
 = 
pf
->
œ°_≥n_pos
;

601 
pf
->
œ°_≥n_pos
 = 
x
;

603 
pf
->
œ°_glyph_code
 = 
curch¨
;

606 *
pwidth
 = 
x
;

607 *
pheight
 = (((
¥›îtõs
.
h‹iz⁄èl
->
As˚ndî
 *

608 
imërics
.
y_sˇÀ
)/ 0x10000) >> 6) -

609 (((
¥›îtõs
.
h‹iz⁄èl
->
Des˚ndî
 *

610 
imërics
.
y_sˇÀ
)/ 0x10000) >> 6);

612 *
pba£
 = (((-
¥›îtõs
.
h‹iz⁄èl
->
Des˚ndî
) *

613 
imërics
.
y_sˇÀ
)/ 0x10000) >> 6;

614 
	}
}

617 
	$‰ìty≥_de°royf⁄t
(
PMWFONT
 
pf⁄t
)

619 
PMWFREETYPEFONT
 
pf
 = (PMWFREETYPEFONT)
pf⁄t
;

621 
	`TT_Clo£_Fa˚
(
pf
->
Á˚
);

622 
	`‰ì
(
pf
);

623 
	}
}

626 
	$‰ìty≥_£tf⁄tsize
(
PMWFONT
 
pf⁄t
, 
MWCOORD
 
f⁄tsize
)

628 
PMWFREETYPEFONT
 
pf
 = (PMWFREETYPEFONT)
pf⁄t
;

630 
pf
->
f⁄tsize
 = fontsize;

633 i‡(!
f⁄tsize
)

637 
	`TT_Së_In°™˚_PixñSizes
–
pf
->
ö°™˚
,Öf->
f⁄tsize
,

638 
pf
->
f⁄tsize
,Öf->fontsize * 64 );

641 
	`TT_Së_In°™˚_Ch¨Size
 (
pf
->
ö°™˚
,

642 ((
pf
->
f⁄tsize
 * 72 + 96/2) / 96) * 64);

644 
	}
}

647 
	$‰ìty≥_£tf⁄åŸ©i⁄
(
PMWFONT
 
pf⁄t
, 
ã¡hdegªes
)

649 
PMWFREETYPEFONT
 
pf
 = (PMWFREETYPEFONT)
pf⁄t
;

650 
™gÀ
;

652 
pf
->
f⁄åŸ©i⁄
 = 
ã¡hdegªes
;

655 
	`TT_Së_In°™˚_Tønsf‹m_Fœgs
 (
pf
->
ö°™˚
, 
TRUE
, 
FALSE
);

657 
™gÀ
 = 
pf
->
f⁄åŸ©i⁄
 * 
M_PI
 / 1800;

658 
pf
->
m©rix
.
yy
 = (
TT_Fixed
Ë(
	`cos
 (
™gÀ
) * (1 << 16));

659 
pf
->
m©rix
.
yx
 = (
TT_Fixed
Ë(
	`sö
 (
™gÀ
) * (1 << 16));

660 
pf
->
m©rix
.
xx
 =Öf->m©rix.
yy
;

661 
pf
->
m©rix
.
xy
 = -pf->m©rix.
yx
;

662 
	}
}

666 
	$GdGëTextSizeEx
(
PMWFONT
 
pf⁄t
, c⁄° *
°r
, 
cc
,
nMaxExã¡
,

667 * 
ÕnFô
, * 
ÆpDx
,
MWCOORD
 *
pwidth
,MWCOORD *
pheight
,

668 
MWCOORD
 *
pba£
, 
MWTEXTFLAGS
 
Êags
)

670 
buf
[256];

671 * 
ãxt
;

672 
PMWFREETYPEFONT
 
pf
 = (PMWFREETYPEFONT)
pf⁄t
;

673 
MWTEXTFLAGS
 
de„ncodög
 = 
pf
->
f⁄çrocs
->
ícodög
;

674 
x
 = 0;

675 
i
;

676 
TT_USh‹t
 
curch¨
;

677 
TT_Glyph_Mërics
 
mërics
;

678 
TT_Fa˚_Pr›îtõs
 
¥›îtõs
;

679 
TT_In°™˚_Mërics
 
imërics
;

681 i‡((
cc
<0)||(!
°r
))

683 *
pwidth
 = *
pheight
 = *
pba£
 = 0;

687 if((
Êags
 & (
MWTF_PACKMASK
|
MWTF_DBCSMASK
)Ë!
de„ncodög
)

689 
cc
 = 
	`GdC⁄vîtEncodög
(
°r
, 
Êags
, cc, 
buf
, 
de„ncodög
);

690 
Êags
 &~(
MWTF_PACKMASK
|
MWTF_DBCSMASK
);

691 
Êags
 |
de„ncodög
;

692 
ãxt
=
buf
;

693 } 
ãxt
 =(*)
°r
;

694 if(
cc
 <= 0)

696 *
pwidth
 = *
pheight
 = *
pba£
 = 0;

700 
	`TT_Gë_Fa˚_Pr›îtõs
 (
pf
->
Á˚
, &
¥›îtõs
);

701 
	`TT_Gë_In°™˚_Mërics
(
pf
->
ö°™˚
, &
imërics
);

703 
pf
->
œ°_glyph_code
 = -1;

704 
pf
->
œ°_≥n_pos
 = -32767;

705 i‡(
ÕnFô
)

706 *
ÕnFô
=-1;

707 
i
 = 0; i < 
cc
; i++)

709 
curch¨
 = 
	`TT_Ch¨_Index
 (
pf
->
ch¨_m≠
,
ãxt
[
i
]);

711 i‡(
	`TT_Lﬂd_Glyph
 (
pf
->
ö°™˚
,Öf->
glyph
, 
curch¨
,

712 
TTLOAD_SCALE_GLYPH
|
TTLOAD_HINT_GLYPH
Ë!
TT_Eº_Ok
)

714 
	`¥ötf
("U«bÀÅÿlﬂd glyph wôh index=%d\n",
curch¨
);

717 
	`TT_Gë_Glyph_Mërics
 (
pf
->
glyph
, &
mërics
);

718 i‡((
pf
->
f⁄èâr
&
MWTF_KERNING
Ë&&Öf->
ˇn_kîn
)

720 
x
 +
	`compuã_kînvÆ
(
pf
, 
curch¨
) / 64;

722 
x
 +
mërics
.
adv™˚
 / 64;

723 if((
ÕnFô
)&&(
ÆpDx
))

725 i‡(
x
<=
nMaxExã¡
)

726 
ÆpDx
[
i
]=
x
;

728 i‡(*
ÕnFô
==-1)

729 (*
ÕnFô
)=
i
;

732 i‡(
pf
->
œ°_≥n_pos
 > 
x
)

733 
x
 = 
pf
->
œ°_≥n_pos
;

734 
pf
->
œ°_≥n_pos
 = 
x
;

735 
pf
->
œ°_glyph_code
 = 
curch¨
;

737 i‡((
ÕnFô
)&&(*lpnFit==-1))

738 *
ÕnFô
=
cc
;

739 *
pwidth
 = 
x
;

740 *
pheight
 = (((
¥›îtõs
.
h‹iz⁄èl
->
As˚ndî
 *

741 
imërics
.
y_sˇÀ
)/ 0x10000) >> 6) -

742 (((
¥›îtõs
.
h‹iz⁄èl
->
Des˚ndî
 *

743 
imërics
.
y_sˇÀ
)/ 0x10000) >> 6);

745 i‡(
pba£
)

746 *
pba£
 = (((-
¥›îtõs
.
h‹iz⁄èl
->
Des˚ndî
) *

747 
imërics
.
y_sˇÀ
)/ 0x10000) >> 6;

749 
	}
}

756 
	$â_lookup_«me
(
TT_Fa˚
 
Á˚
)

758 
TT_Fa˚_Pr›îtõs
 
¥›
;

759 
i
, 
n
;

760 
∂©f‹m
, 
ícodög
, 
œnguage
, 
id
;

761 *
°rög
;

762 *
«me_buf„r
;

763 
°rög_Àn
;

764 
j
, 
found
;

765 
ödex
 = 4;

766 
«me_Àn
;

769 
	`TT_Gë_Fa˚_Pr›îtõs
(
Á˚
, &
¥›
);

770 
n
 = 
¥›
.
num_Names
;

772  
i
 = 0; i < 
n
; i++ ) {

773 
	`TT_Gë_Name_ID
–
Á˚
, 
i
, &
∂©f‹m
, &
ícodög
, &
œnguage
, &
id
 );

774 
	`TT_Gë_Name_Såög
–
Á˚
, 
i
, &
°rög
, &
°rög_Àn
 );

776 i‡(
id
 =
ödex
 ) {

779 
found
 = 0;

782 i‡–
∂©f‹m
 == 3 )

783  
j
 = 1; j >= 0; j-- )

784 i‡–
ícodög
 =
j
 )

785 i‡–(
œnguage
 & 0x3FF) == 0x009 ) {

787 
found
 = 1;

791 i‡–!
found
 && 
∂©f‹m
 =0 && 
œnguage
 == 0 )

792 
found
 = 1;

795 i‡–
found
 ) {

796 i‡–
°rög_Àn
 > 512 )

797 
°rög_Àn
 = 512;

799 
«me_Àn
 = 0;

800 
«me_buf„r
 = (*)
	`mÆloc
((
°rög_Àn
 / 2) + 1);

802  
i
 = 1; i < 
°rög_Àn
; i += 2 )

803 
«me_buf„r
[
«me_Àn
++] = 
°rög
[
i
];

805 
«me_buf„r
[
«me_Àn
] = '\0';

807  
«me_buf„r
;

813  
NULL
;

814 
	}
}

817 
	$gë_â_«me
(*
p
)

819 
TT_Fa˚
 
Á˚
;

820 *
ªt
;

824 i‡(
	`TT_O≥n_Fa˚
(
ígöe
, 
p
, &
Á˚
Ë!
TT_Eº_Ok
) {

825 
	`¥ötf
("Eº‹ o≥nög f⁄t: %s\n", 
p
);

826  
NULL
;

829 
ªt
 = 
	`â_lookup_«me
(
Á˚
);

831 
	`TT_Clo£_Fa˚
(
Á˚
);

833  
ªt
;

834 
	}
}

837 
	$GdFªeF⁄tLi°
(
MWFONTLIST
 ***
f⁄ts
, 
n
)

839 
i
;

840 
MWFONTLIST
 *
g
, **
li°
 = *
f⁄ts
;

842 
i
 = 0; i < 
n
; i++) {

843 
g
 = 
li°
[
i
];

844 if(
g
) {

845 if(
g
->
mw«me
)

846 
	`‰ì
(
g
->
mw«me
);

847 if(
g
->
â«me
)

848 
	`‰ì
(
g
->
â«me
);

849 
	`‰ì
(
g
);

852 
	`‰ì
(
li°
);

853 *
f⁄ts
 = 0;

854 
	}
}

857 
	$GdGëF⁄tLi°
(
MWFONTLIST
 ***
f⁄ts
, *
numf⁄ts
)

859 
DIR
 *
dú
;

860 
dúít
 *
dít
;

861 *
p
, *
·mp
;

862 
∂
, 
idx
 = 0;

863 
MWFONTLIST
 **
li°
;

866 i‡(
TT_Eº_Ok
 !
	`TT_Inô_FªeTy≥
(&
ígöe
)) {

867 
	`¥ötf
("UnableÅo initialize freetype\n");

868 *
numf⁄ts
 = -1;

872 
dú
 = 
	`›ídú
(
FREETYPE_FONT_DIR
);

874 i‡(
dú
 <= 0) {

875 
	`¥ötf
("Error opening font directory\n");

876 *
numf⁄ts
 = -1;

881 (
dít
 = 
	`ªaddú
(
dú
)Ë!
NULL
) {

882 
p
 = 
	`°ºchr
(
dít
->
d_«me
, '.');

883 i‡(
	`°rˇ£cmp
(
p
, ".ttf") == 0)

884 
idx
++;

887 *
numf⁄ts
 = 
idx
;

888 
	`ªwöddú
(
dú
);

891 
li°
 = (
MWFONTLIST
**)
	`mÆloc
(
idx
 * (MWFONTLIST*));

892 
∂
 = 0;Ö»< 
idx
;Öl++)

893 
li°
[
∂
] = (
MWFONTLIST
*)
	`mÆloc
((MWFONTLIST));

895 *
f⁄ts
 = 
li°
;

897 
idx
 = 0;

899 (
dít
 = 
	`ªaddú
(
dú
)Ë!
NULL
) {

901 
p
 = 
	`°ºchr
(
dít
->
d_«me
, '.');

903 i‡(
	`°rˇ£cmp
(
p
, ".ttf") == 0) {

906 
p
 = 0;

907 
∂
 = 
	`°æí
(
FREETYPE_FONT_DIR
Ë+ såÀn(
dít
->
d_«me
) *

909 
p
 = (*)
	`mÆloc
(
∂
);

910 
p
 = (*)
	`mem£t
’, '\0', 
∂
);

911 
p
 = (*)
	`°rˇt
’, 
FREETYPE_FONT_DIR
);

912 
p
 = (*)
	`°rˇt
(p, "/");

913 
p
 = (*)
	`°rˇt
’, 
dít
->
d_«me
);

916 if((
·mp
 = 
	`gë_â_«me
(
p
)Ë!
NULL
) {

917 
li°
[
idx
]->
â«me
 = 
·mp
;

918 
li°
[
idx
]->
mw«me
 = 
	`mÆloc
(
	`°æí
(
dít
->
d_«me
) + 1);

919 
li°
[
idx
]->
mw«me
 = 
	`°r˝y
÷i°[idx]->mw«me, 
dít
->
d_«me
);

921 
idx
++;

924 
	`‰ì
(
p
);

928 
	`˛o£dú
(
dú
);

929 
	}
}

	@engine/font_freetype.cache.c

9 
	~<°dio.h
>

10 
	~<°dlib.h
>

11 
	~<°rög.h
>

12 
	~<‰ìty≥/‰ìty≥.h
>

13 
	~<‰ìty≥/·xkîn.h
>

14 
	~<‰ìty≥/·«meid.h
>

15 
	~<‰ìty≥/·xcm≠.h
>

16 
	~<‰ìty≥/·xwidth.h
>

17 
	~<m©h.h
>

18 
	~<dúít.h
>

19 
	~"devi˚.h
"

20 
	~"devf⁄t.h
"

22 
	#MWFREETYPEFONT_CACHE
 1

	)

23 
	#MWFREETYPEFONT_CACHEBITMAP
 1

	)

24 
	#xTT_ALIAS
 1

	)

26 #i‡
TT_FREETYPE_MAJOR
 !1 | 
TT_FREETYPE_MINOR
 < 3

30 
	sxTT_Glyph_Cache_
 {

31 
TT_Eº‹
 
	mîr‹
;

32 
TT_Glyph
 
	mglyph
;

33 
TT_USh‹t
 
	mödex
;

34 
TT_USh‹t
 
	mÊags
;

35 
xTT_Glyph_Cache_
 *
	ml
;

36 
xTT_Glyph_Cache_
 *
	mr
;

37 } 
	txTT_Glyph_Cache
;

39 
	sxTT_In°™˚_Obje˘_
 {

40 
TT_Fa˚
 
	mÁ˚
;

41 
TT_In°™˚
 
	mö°™˚
;

42 
xTT_Glyph_Cache
 *
	mhód
;

43 } 
	txTT_In°™˚_Obje˘
;

45 
	sxTT_In°™˚_
 {

46 
xTT_In°™˚_Obje˘
 *
	mö°™˚
;

47 } 
	txTT_In°™˚
;

49 
	sxTT_Ouéöe_Obje˘_
 {

50 
TT_Ouéöe
 
	mouéöe
;

51 
TT_BBox
 
	mbbox
;

52 } 
	txTT_Ouéöe_Obje˘
;

54 
	sxTT_Ouéöe_
 {

55 
xTT_Ouéöe_Obje˘
 *
	mouéöe
;

56 } 
	txTT_Ouéöe
;

58 
	sxTT_Glyph_Obje˘_
 {

59 
TT_Glyph
 *
	mglyph
;

60 
xTT_Ouéöe_Obje˘
 
	mouéöe
;

61 } 
	txTT_Glyph_Obje˘
;

63 
	sxTT_Glyph_
 {

64 
xTT_Glyph_Obje˘
 *
	mglyph
;

65 } 
	txTT_Glyph
;

67 
TT_Eº‹


68 
	$xTT_Glyph_Cache_Föd
(
xTT_In°™˚
 
ö°™˚
,

69 
xTT_Glyph
 
glyph
, 
TT_USh‹t
 
glyphIndex
, TT_USh‹à
lﬂdFœgs
)

71 
xTT_Glyph_Cache
 *
node
;

72 
xTT_Glyph_Cache
 **
öode
 = &
ö°™˚
.ö°™˚->
hód
;

74 
miss
 = 0;

77 i‡(*
öode
 == 0) {

78 
miss
 = 1;

80 
node
 = *
öode
 = 
	`ˇŒoc
(1, (**inode));

82 i‡(
node
 == 0)

83  
TT_Eº_Out_Of_Mem‹y
;

85 
node
->
îr‹
 =

86 
	`TT_New_Glyph
(
ö°™˚
.ö°™˚->
Á˚
,

87 &(
node
->
glyph
));

89 i‡(
node
->
îr‹
 == 0)

90 
node
->
îr‹
 =

91 
	`TT_Lﬂd_Glyph
(
ö°™˚
.instance->

92 
ö°™˚
, 
node
->
glyph
,

93 (
node
->
ödex
 =

94 
glyphIndex
),

95 (
node
->
Êags
 =

96 
lﬂdFœgs
));

98 i‡(
node
->
îr‹
 != 0)

99 
	`TT_D⁄e_Glyph
(
node
->
glyph
);

101 
node
 = *
öode
;

104 i‡(
glyphIndex
 < 
node
->
ödex
)

105 
öode
 = &
node
->
l
;

106 i‡(
glyphIndex
 > 
node
->
ödex
)

107 
öode
 = &
node
->
r
;

108 i‡(
lﬂdFœgs
 < 
node
->
Êags
)

109 
öode
 = &
node
->
l
;

110 i‡(
lﬂdFœgs
 > 
node
->
Êags
)

111 
öode
 = &
node
->
r
;

113 
cou¡
[] = { 0, 0 };

114 ++
cou¡
[
miss
];

115 
	`¥ötf
("\r(%†| hô %d | mis†%d)", 
__TIME__
,

116 
cou¡
[0], count[1]);

117 
glyph
.glyph->glyph = &
node
->glyph;

118  
node
->
îr‹
;

121 
	}
}

124 
	$xTT_Glyph_Cache_Fªe
(
xTT_Glyph_Cache
 ** 
≤ode
)

126 
xTT_Glyph_Cache
 *
node
;

128 i‡(
≤ode
 == 0)

131 
node
 = *
≤ode
;

133 i‡(
node
 == 0)

136 i‡(
node
->
l
)

137 
	`xTT_Glyph_Cache_Fªe
(&
node
->
l
);

139 i‡(
node
->
r
)

140 
	`xTT_Glyph_Cache_Fªe
(&
node
->
r
);

142 
	`TT_D⁄e_Glyph
(
node
->
glyph
);

143 
	`‰ì
(
node
);

145 *
≤ode
 = 0;

146 
	}
}

148 
TT_Eº‹
 
	$xTT_New_In°™˚
(
TT_Fa˚
 
Á˚
, 
xTT_In°™˚
 * 
ö°™˚
)

150 
ö°™˚
->ö°™˚ = 
	`ˇŒoc
(1, (*instance->instance));

151 i‡(
ö°™˚
->instance == 0)

152  
TT_Eº_Out_Of_Mem‹y
;

154 
ö°™˚
->ö°™˚->
Á˚
 = face;

155 
ö°™˚
->ö°™˚->
hód
 = 0;

157  
	`TT_New_In°™˚
(
Á˚
, &
ö°™˚
->instance->instance);

158 
	}
}

160 
TT_Eº‹
 
	$xTT_D⁄e_In°™˚
(
xTT_In°™˚
 
ö°™˚
)

162 
TT_Eº‹
 
îr‹
;

164 
	`xTT_Glyph_Cache_Fªe
(&
ö°™˚
.ö°™˚->
hód
);

165 
îr‹
 = 
	`TT_D⁄e_In°™˚
(
ö°™˚
.instance->instance);

167 
	`‰ì
(
ö°™˚
.instance);

169  
îr‹
;

170 
	}
}

172 
TT_Eº‹


173 
	$xTT_Gë_In°™˚_Mërics
(
xTT_In°™˚
 
ö°™˚
,

174 
TT_In°™˚_Mërics
 * 
imërics
)

176  
	`TT_Gë_In°™˚_Mërics
(
ö°™˚
.ö°™˚->ö°™˚, 
imërics
);

177 
	}
}

179 
TT_Eº‹
 
	$xTT_Së_In°™˚_Ch¨Size
(
xTT_In°™˚
 
ö°™˚
, 
TT_F26DŸ6
 
ch¨size
)

181 
	`xTT_Glyph_Cache_Fªe
(&
ö°™˚
.ö°™˚->
hód
);

182  
	`TT_Së_In°™˚_Ch¨Size
(
ö°™˚
.instance->instance,

183 
ch¨size
);

184 
	}
}

186 
TT_Eº‹


187 
	$xTT_Së_In°™˚_PixñSizes
(
xTT_In°™˚
 
ö°™˚
,

188 
TT_USh‹t
 
pixñWidth
,

189 
TT_USh‹t
 
pixñHeight
, 
TT_F26DŸ6
 
poötSize
)

191 
	`xTT_Glyph_Cache_Fªe
(&
ö°™˚
.ö°™˚->
hód
);

192  
	`TT_Së_In°™˚_PixñSizes
(
ö°™˚
.instance->instance,

193 
pixñWidth
, 
pixñHeight
, 
poötSize
);

194 
	}
}

196 
TT_Eº‹


197 
	$xTT_Së_In°™˚_Tønsf‹m_Fœgs
(
xTT_In°™˚
 
ö°™˚
,

198 
TT_Boﬁ
 
rŸ©ed
, TT_Boﬁ 
°ªtched
)

200 
	`xTT_Glyph_Cache_Fªe
(&
ö°™˚
.ö°™˚->
hód
);

201  
	`TT_Së_In°™˚_Resﬁuti⁄s
(
ö°™˚
.instance->instance,

202 
rŸ©ed
, 
°ªtched
);

203 
	}
}

205 
TT_Eº‹


206 
	$xTT_Së_In°™˚_Resﬁuti⁄s
(
xTT_In°™˚
 
ö°™˚
,

207 
TT_USh‹t
 
xResﬁuti⁄
, TT_USh‹à
yResﬁuti⁄
)

209 
	`xTT_Glyph_Cache_Fªe
(&
ö°™˚
.ö°™˚->
hód
);

210  
	`TT_Së_In°™˚_Resﬁuti⁄s
(
ö°™˚
.instance->instance,

211 
xResﬁuti⁄
, 
yResﬁuti⁄
);

212 
	}
}

214 
TT_Eº‹
 
	$xTT_New_Glyph
(
TT_Fa˚
 
Á˚
, 
xTT_Glyph
 * 
glyph
)

216 
glyph
->glyph = 
	`ˇŒoc
(1, (*glyph->glyph));

217 i‡(
glyph
->glyph == 0)

218  
TT_Eº_Out_Of_Mem‹y
;

220 
	}
}

222 
TT_Eº‹
 
	$xTT_D⁄e_Glyph
(
xTT_Glyph
 
glyph
)

224 
	`‰ì
(
glyph
.glyph);

226 
	}
}

228 
TT_Eº‹


229 
	$xTT_Lﬂd_Glyph
(
xTT_In°™˚
 
ö°™˚
,

230 
xTT_Glyph
 
glyph
, 
TT_USh‹t
 
glyphIndex
, TT_USh‹à
lﬂdFœgs
)

232 
TT_Eº‹
 
îr‹
;

233 
îr‹
 = 
	`xTT_Glyph_Cache_Föd
(
ö°™˚
, 
glyph
, 
glyphIndex
, 
lﬂdFœgs
);

234 
	`TT_Gë_Glyph_Ouéöe
(*
glyph
.glyph->glyph,

235 &
glyph
.glyph->
ouéöe
.outline);

236 
	`TT_Gë_Ouéöe_BBox
(&
glyph
.glyph->
ouéöe
.outline,

237 &
glyph
.glyph->
ouéöe
.
bbox
);

238  
îr‹
;

239 
	}
}

241 
TT_Eº‹
 
	$xTT_Gë_Glyph_Mërics
(
xTT_Glyph
 
glyph
, 
TT_Glyph_Mërics
 * 
mërics
)

243  
	`TT_Gë_Glyph_Mërics
(*
glyph
.glyph->glyph, 
mërics
);

244 
	}
}

246 
TT_Eº‹
 
	$xTT_Gë_Glyph_Ouéöe
(
xTT_Glyph
 
glyph
, 
xTT_Ouéöe
 * 
ouéöe
)

248 
ouéöe
->ouéöê&
glyph
.glyph->outline;

250 
	}
}

252 
TT_Eº‹
 
	$xTT_Gë_Ouéöe_BBox
(
xTT_Ouéöe
 * 
ouéöe
, 
TT_BBox
 * 
bbox
)

254 *
bbox
 = 
ouéöe
->outline->bbox;

256 
	}
}

259 
	$xTT_Tønsf‹m_Ouéöe
(
xTT_Ouéöe
 * 
ouéöe
, 
TT_M©rix
 * 
m©rix
)

261 
	`TT_Tønsf‹m_Ouéöe
(&
ouéöe
->ouéöe->ouéöe, 
m©rix
);

262 
	`TT_Gë_Ouéöe_BBox
(&
ouéöe
->outline->outline,

263 &
ouéöe
->ouéöe->
bbox
);

264 
	}
}

266 
TT_Eº‹


267 
	$xTT_Gë_Glyph_Bôm≠
(
xTT_Glyph
 
glyph
,

268 
TT_Ra°î_M≠
 * 
bôm≠
, 
TT_F26DŸ6
 
xOff£t
, TT_F26DŸ6 
yOff£t
)

270  
	`TT_Gë_Glyph_Bôm≠
(*
glyph
.glyph->glyph,

271 
bôm≠
, 
xOff£t
, 
yOff£t
);

272 
	}
}

274 
TT_Eº‹


275 
	$xTT_Gë_Glyph_Pixm≠
(
xTT_Glyph
 
glyph
,

276 
TT_Ra°î_M≠
 * 
pixm≠
, 
TT_F26DŸ6
 
xOff£t
, TT_F26DŸ6 
yOff£t
)

278  
	`TT_Gë_Glyph_Pixm≠
(*
glyph
.glyph->glyph,

279 
pixm≠
, 
xOff£t
, 
yOff£t
);

280 
	}
}

282 #i‡
xTT_ALIAS


283 
	#TT_In°™˚
 
xTT_In°™˚


	)

284 
	#TT_Ouéöe
 
xTT_Ouéöe


	)

285 
	#TT_Glyph
 
xTT_Glyph


	)

286 
	#TT_New_In°™˚
 
xTT_New_In°™˚


	)

287 
	#TT_D⁄e_In°™˚
 
xTT_D⁄e_In°™˚


	)

288 
	#TT_Gë_In°™˚_Mërics
 
xTT_Gë_In°™˚_Mërics


	)

289 
	#TT_Së_In°™˚_Ch¨Size
 
xTT_Së_In°™˚_Ch¨Size


	)

290 
	#TT_Së_In°™˚_PixñSizes
 
xTT_Së_In°™˚_PixñSizes


	)

291 
	#TT_Së_In°™˚_Tønsf‹m_Fœgs
 
xTT_Së_In°™˚_Tønsf‹m_Fœgs


	)

292 
	#TT_Së_In°™˚_Resﬁuti⁄s
 
xTT_Së_In°™˚_Resﬁuti⁄s


	)

293 
	#TT_New_Glyph
 
xTT_New_Glyph


	)

294 
	#TT_D⁄e_Glyph
 
xTT_D⁄e_Glyph


	)

295 
	#TT_Lﬂd_Glyph
 
xTT_Lﬂd_Glyph


	)

296 
	#TT_Gë_Glyph_Mërics
 
xTT_Gë_Glyph_Mërics


	)

297 
	#TT_Gë_Glyph_Ouéöe
 
xTT_Gë_Glyph_Ouéöe


	)

298 
	#TT_Gë_Glyph_Bôm≠
 
xTT_Gë_Glyph_Bôm≠


	)

299 
	#TT_Gë_Glyph_Pixm≠
 
xTT_Gë_Glyph_Pixm≠


	)

300 
	#TT_Gë_Ouéöe_BBox
 
xTT_Gë_Ouéöe_BBox


	)

301 
	#TT_Tønsf‹m_Ouéöe
 
xTT_Tønsf‹m_Ouéöe


	)

304 #i‡
MWFREETYPEFONT_CACHE


305 
	smw‰ìty≥f⁄tˇche
 {

306 
	mcurch¨
;

307 *
	mbuf„r
;

308 #i‡
MWFREETYPEFONT_CACHEBITMAP


309 
MWPIXELVAL
 
	mfg
;

310 
MWPIXELVAL
 
	mbg
;

311 
MWBOOL
 
	mu£bg
;

312 *
	mbôm≠
;

314 
mw‰ìty≥f⁄tˇche
 *
	ml
;

315 
mw‰ìty≥f⁄tˇche
 *
	mr
;

316 } 
	tMWFREETYPEFONTCACHE
;

319 
	sMWFREETYPEFONT
 {

320 
PMWFONTPROCS
 
	mf⁄çrocs
;

321 
MWCOORD
 
	mf⁄tsize
;

322 
	mf⁄åŸ©i⁄
;

323 
	mf⁄èâr
;

325 
TT_Fa˚
 
	mÁ˚
;

326 
TT_In°™˚
 
	mö°™˚
;

327 
TT_Ch¨M≠
 
	mch¨_m≠
;

328 
TT_Kînög
 
	mdúe˘‹y
;

329 
TT_M©rix
 
	mm©rix
;

330 
TT_Glyph
 
	mglyph
;

331 
MWBOOL
 
	mˇn_kîn
;

332 
	mœ°_glyph_code
;

333 
	mœ°_≥n_pos
;

334 #i‡
MWFREETYPEFONT_CACHE


335 
MWFREETYPEFONTCACHE
 * 
	mglyph_ˇche
;

337 } 
	tMWFREETYPEFONT
;

339 
‰ìty≥_öô
(
PSD
 
psd
);

340 
PMWFREETYPEFONT
 
‰ìty≥_¸óãf⁄t
(c⁄° *
«me
, 
MWCOORD
 
height
, 
©å
);

342 
MWBOOL
 
‰ìty≥_gëf⁄töfo
(
PMWFONT
 
pf⁄t
, 
PMWFONTINFO
 
pf⁄töfo
);

343 
‰ìty≥_gëãxtsize
(
PMWFONT
 
pf⁄t
, c⁄° *
ãxt
, 
cc
,

344 
MWTEXTFLAGS
 
Êags
, 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
,

345 
MWCOORD
 *
pba£
);

346 
‰ìty≥_de°royf⁄t
(
PMWFONT
 
pf⁄t
);

347 
‰ìty≥_døwãxt
(
PMWFONT
 
pf⁄t
, 
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
,

348 c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
);

349 
‰ìty≥_£tf⁄tsize
(
PMWFONT
 
pf⁄t
, 
MWCOORD
 
f⁄tsize
);

350 
‰ìty≥_£tf⁄åŸ©i⁄
(
PMWFONT
 
pf⁄t
, 
ã¡hdegªes
);

353 
MWFONTPROCS
 
	g‰ìty≥_¥ocs
 = {

354 
MWTF_UC16
,

355 
‰ìty≥_gëf⁄töfo
,

356 
‰ìty≥_gëãxtsize
,

357 
NULL
,

358 
‰ìty≥_de°royf⁄t
,

359 
‰ìty≥_døwãxt
,

360 
‰ìty≥_£tf⁄tsize
,

361 
‰ìty≥_£tf⁄åŸ©i⁄
,

362 
NULL
,

363 
NULL
,

366 
TT_Engöe
 
	gígöe
;

367 
OUTPIXELVAL
 
	ggøy_∑Àâe
[5];

370 
MWPIXELVAL
 
gr_f‹eground
;

371 
MWPIXELVAL
 
gr_background
;

372 
MWBOOL
 
gr_u£bg
;

375 
	$‰ìty≥_öô
(
PSD
 
psd
)

377 
öôed
 = 0;

379 i‡(
öôed
)

383 i‡(
	`TT_Inô_FªeTy≥
 (&
ígöe
Ë!
TT_Eº_Ok
) {

388 i‡(
	`TT_Inô_Kînög_Exãnsi⁄
 (
ígöe
Ë!
TT_Eº_Ok
)

391 
öôed
 = 1;

393 
	}
}

395 
PMWFREETYPEFONT


396 
	$‰ìty≥_¸óãf⁄t
(c⁄° *
«me
, 
MWCOORD
 
height
, 
©å
)

398 
PMWFREETYPEFONT
 
pf
;

399 
i
, 
n
;

400 
∂©f‹m
, 
ícodög
;

401 
TT_Fa˚_Pr›îtõs
 
¥›îtõs
;

402 * 
p
;

403 
f⁄äame
[128];

406 i‡(
	`°rchr
(
«me
, '/'Ë!
NULL
)

407 
	`°r˝y
(
f⁄äame
, 
«me
);

409 
	`°r˝y
(
f⁄äame
, 
FREETYPE_FONT_DIR
);

410 
	`°rˇt
(
f⁄äame
, "/");

411 
	`°rˇt
(
f⁄äame
, 
«me
);

415 i‡((
p
 = 
	`°ºchr
(
f⁄äame
, '.')Ë=
NULL
 ||

416 
	`°rcmp
(
p
, ".ttf") != 0) {

417 
	`°rˇt
(
f⁄äame
, ".ttf");

421 
pf
 = (
PMWFREETYPEFONT
)
	`ˇŒoc
((
MWFREETYPEFONT
), 1);

422 i‡(!
pf
)

423  
NULL
;

424 
pf
->
f⁄çrocs
 = &
‰ìty≥_¥ocs
;

427 i‡(
	`TT_O≥n_Fa˚
 (
ígöe
, 
f⁄äame
, &
pf
->
Á˚
Ë!
TT_Eº_Ok
)

428 
out
;

431 
pf
->
ˇn_kîn
 = 
TRUE
;

432 i‡(
	`TT_Lﬂd_Kînög_TabÀ
 (
pf
->
Á˚
, 0Ë!
TT_Eº_Ok
)

433 
pf
->
ˇn_kîn
 = 
FALSE
;

435 i‡(
	`TT_Gë_Kînög_Dúe˘‹y
 (
pf
->
Á˚
, &pf->
dúe˘‹y
)

436 !
TT_Eº_Ok
)

437 
pf
->
ˇn_kîn
 = 
FALSE
;

440 i‡((
pf
->
dúe˘‹y
.
vîsi⁄
 != 0) ||

441 (
pf
->
dúe˘‹y
.
nTabÀs
 <= 0) ||

442 (
pf
->
dúe˘‹y
.
èbÀs
->
lﬂded
 != 1) ||

443 (
pf
->
dúe˘‹y
.
èbÀs
->
vîsi⁄
 != 0) ||

444 (
pf
->
dúe˘‹y
.
èbÀs
->
t
.
kîn0
.
nPaús
 <= 0))

445 
pf
->
ˇn_kîn
 = 
FALSE
;

450 
	`TT_Gë_Fa˚_Pr›îtõs
 (
pf
->
Á˚
, &
¥›îtõs
);

457 
h
 = 
¥›îtõs
.
os2
->
sTypoAs˚ndî
 -Ör›îtõs.os2->
sTypoDes˚ndî


458 + 
¥›îtõs
.
os2
->
sTypoLöeG≠
;

459 
as˚¡
 = 
¥›îtõs
.
os2
->
sTypoAs˚ndî


460 + 
¥›îtõs
.
os2
->
sTypoLöeG≠
/2;

461 
pf
->
as˚¡
 = (as˚¡ * 
height
 + 
h
/2) / h;

462 
pf
->
des˚¡
 = 
height
 -Öf->
as˚¡
;

465 i‡(
	`TT_New_Glyph
 (
pf
->
Á˚
, &pf->
glyph
Ë!
TT_Eº_Ok
)

466 
out
;

469 i‡(
	`TT_New_In°™˚
 (
pf
->
Á˚
, &pf->
ö°™˚
Ë!
TT_Eº_Ok
)

470 
out
;

473 i‡(
	`TT_Së_In°™˚_Resﬁuti⁄s
 (
pf
->
ö°™˚
, 96, 96Ë!
TT_Eº_Ok
)

474 
out
;

477 
n
 = 
¥›îtõs
.
num_Ch¨M≠s
;

479 
i
 = 0; i < 
n
; i++) {

480 
	`TT_Gë_Ch¨M≠_ID
 (
pf
->
Á˚
, 
i
, &
∂©f‹m
, &
ícodög
);

481 i‡(((
∂©f‹m
 =
TT_PLATFORM_MICROSOFT
) &&

482 (
ícodög
 =
TT_MS_ID_UNICODE_CS
)) ||

483 ((
∂©f‹m
 =
TT_PLATFORM_APPLE_UNICODE
) &&

484 (
ícodög
 =
TT_APPLE_ID_DEFAULT
)))

486 
	`TT_Gë_Ch¨M≠
 (
pf
->
Á˚
, 
i
, &pf->
ch¨_m≠
);

487 
i
 = 
n
 + 1;

490 i‡(
i
 =
n
) {

491 
	`DPRINTF
("freetype_createfont:Ço unicode mapÅable\n");

492 
out
;

495 
	`GdSëF⁄tSize
((
PMWFONT
)
pf
, 
height
);

496 
	`GdSëF⁄tRŸ©i⁄
((
PMWFONT
)
pf
, 0);

497 
	`GdSëF⁄tAâr
((
PMWFONT
)
pf
, 
©å
, 0);

499  
pf
;

501 
out
:

502 
	`‰ì
(
pf
);

503  
NULL
;

504 
	}
}

507 
	$compuã_kînvÆ
(
PMWFREETYPEFONT
 
pf
, 
cuºít_glyph_code
)

509 
i
 = 0;

510 
kînvÆ
;

511 
nPaús
 = 
pf
->
dúe˘‹y
.
èbÀs
->
t
.
kîn0
.nPairs;

512 
TT_Kîn_0_Paú
 *
∑ú
 = 
pf
->
dúe˘‹y
.
èbÀs
->
t
.
kîn0
.
∑ús
;

514 i‡(
pf
->
œ°_glyph_code
 != -1) {

515 (
∑ú
->
À·
 !
pf
->
œ°_glyph_code
)

516 && (
∑ú
->
right
 !
cuºít_glyph_code
))

518 
∑ú
++;

519 
i
++;

520 i‡(
i
 =
nPaús
)

524 i‡(
i
 =
nPaús
)

525 
kînvÆ
 = 0;

528 
kînvÆ
 = (
∑ú
->
vÆue
 + 32) & -64;

530 
kînvÆ
 = 0;

532  
kînvÆ
;

533 
	}
}

535 
TT_USh‹t


536 
	$Gë_Glyph_Width
(
PMWFREETYPEFONT
 
pf
, 
TT_USh‹t
 
glyph_ödex
)

538 
TT_Glyph_Mërics
 
mërics
;

540 i‡(
	`TT_Lﬂd_Glyph
 ( 
pf
->
ö°™˚
,Öf->
glyph
,

541 
	`TT_Ch¨_Index
 (
pf
->
ch¨_m≠
,
glyph_ödex
),

542 
TTLOAD_SCALE_GLYPH
|
TTLOAD_HINT_GLYPH
Ë!
TT_Eº_Ok
)

545 i‡(
	`TT_Lﬂd_Glyph
 ( 
pf
->
ö°™˚
,Öf->
glyph
, 0,

546 
TTLOAD_SCALE_GLYPH
|
TTLOAD_HINT_GLYPH
Ë!
TT_Eº_Ok
)

550 
	`TT_Gë_Glyph_Mërics
 (
pf
->
glyph
, &
mërics
);

551 ((
mërics
.
adv™˚
 & 0xFFFFFFC0) >> 6);

552 
	}
}

554 #i‡
MWFREETYPEFONT_CACHE


555 
MWFREETYPEFONTCACHE
 *

556 
	$föd_ˇche_glyph
(
PMWFREETYPEFONT
 
pf
, 
curch¨
)

558 
MWFREETYPEFONTCACHE
 **
öode
 = &
pf
->
glyph_ˇche
;

561 i‡(*
öode
 == 0) {

562 *
öode
 = 
	`ˇŒoc
((
MWFREETYPEFONTCACHE
), 1);

563 (*
öode
)->
curch¨
 = curchar;

566 i‡(
curch¨
 < (*
öode
)->curchar)

567 
öode
 = &(*öode)->
l
;

568 i‡(
curch¨
 > (*
öode
)->curchar)

569 
öode
 = &(*öode)->
r
;

571  *
öode
;

573 
	}
}

576 
	$‰ì_ˇche_glyph
(
MWFREETYPEFONTCACHE
 * 
node
)

578 i‡(
node
->
l
 != 0)

579 
	`‰ì_ˇche_glyph
(
node
->
l
);

581 i‡(
node
->
r
 != 0)

582 
	`‰ì_ˇche_glyph
(
node
->
r
);

584 
	`‰ì
(
node
);

585 
	}
}

590 
	$døwch¨
(
PMWFREETYPEFONT
 
pf
, 
PSD
 
psd
, 
curch¨
, 
x_off£t
,

591 
y_off£t
)

593 
TT_F26DŸ6
 
xmö
, 
ymö
, 
xmax
, 
ymax
, 
x
, 
y
, 
z
;

594 *
§c
, *
§˝å
;

595 
MWPIXELVAL
 *
d°
, *
d°±r
;

596 
MWPIXELVAL
 *
bôm≠
;

597 
size
, 
width
, 
height
;

598 
TT_Ouéöe
 
ouéöe
;

599 
TT_BBox
 
bbox
;

600 
TT_Ra°î_M≠
 
Ra°î
;

601 
TT_Eº‹
 
îr‹
;

603 
MWFREETYPEFONTCACHE
 * 
ˇche
;

606 
	`TT_Gë_Glyph_Ouéöe
 (
pf
->
glyph
, &
ouéöe
);

607 
	`TT_Gë_Ouéöe_BBox
 (&
ouéöe
, &
bbox
);

609 
xmö
 = (
bbox
.
xMö
 & -64) >> 6;

610 
ymö
 = (
bbox
.
yMö
 & -64) >> 6;

611 
xmax
 = ((
bbox
.
xMax
 + 63) & -64) >> 6;

612 
ymax
 = ((
bbox
.
yMax
 + 63) & -64) >> 6;

613 
width
 = 
xmax
 - 
xmö
;

614 
height
 = 
ymax
 - 
ymö
;

615 
size
 = 
width
 * 
height
;

618 
Ra°î
.
rows
 = 
height
;

619 
Ra°î
.
width
 = width;

621 i‡(
pf
->
f⁄èâr
&
MWTF_ANTIALIAS
)

622 
Ra°î
.
cﬁs
 = (Ra°î.
width
 + 3) & -4;

624 
Ra°î
.
cﬁs
 = (Ra°î.
width
 + 7) & -8;

626 
ˇche
 = 
	`föd_ˇche_glyph
(
pf
,
curch¨
);

628 i‡(!
ˇche
Ë
	`¥ötf
("CACHE 0!\n");

630 
Ra°î
.
Êow
 = 
TT_Flow_Up
;

631 
Ra°î
.
size
 = Ra°î.
rows
 * Ra°î.
cﬁs
;

632 
Ra°î
.
bôm≠
 = 
ˇche
->
buf„r
;

634 i‡(
Ra°î
.
bôm≠
 == 0)

636 
Ra°î
.
bôm≠
 = 
	`mÆloc
 (Ra°î.
size
);

638 
	`mem£t
 (
Ra°î
.
bôm≠
, 0, Ra°î.
size
);

648 i‡(!(
pf
->
f⁄èâr
&
MWTF_ANTIALIAS
))

649 
îr‹
 = 
	`TT_Gë_Glyph_Bôm≠
 (
pf
->
glyph
, &
Ra°î
,

650 -
xmö
 * 64, -
ymö
 * 64);

652 
îr‹
 = 
	`TT_Gë_Glyph_Pixm≠
 (
pf
->
glyph
, &
Ra°î
,

653 -
xmö
 * 64, -
ymö
 * 64);

655 i‡(
îr‹
) {

656 
	`‰ì
 (
Ra°î
.
bôm≠
);

660 
ˇche
->
buf„r
 = 
Ra°î
.
bôm≠
;

663 #i‡
MWFREETYPEFONT_CACHEBITMAP


664 i‡((
	`memcmp
(&
gr_f‹eground
,&
ˇche
->
fg
,(gr_foreground)) != 0) ||

665 (
	`memcmp
(&
gr_background
,&
ˇche
->
bg
,(gr_background)) != 0) ||

666 (
gr_u£bg
 !
ˇche
->
u£bg
))

668 i‡(
ˇche
->
bôm≠
)

670 
	`‰ì
(
ˇche
->
bôm≠
);

671 
ˇche
->
bôm≠
 = 0;

675 
bôm≠
 = 
ˇche
->bitmap;

677 
bôm≠
 = 0;

680 i‡(
bôm≠
 == 0)

682 
bôm≠
 = 
	`mÆloc
 (
size
 *  (
MWPIXELVAL
));

683 
	`mem£t
 (
bôm≠
, 0, 
size
 *  (
MWPIXELVAL
));

685 
§c
 = (*Ë
Ra°î
.
bôm≠
;

686 
d°
 = 
bôm≠
 + (
size
 - 
width
);

688 
y
 = 
ymö
; y < 
ymax
; y++)

690 
§˝å
 = 
§c
;

691 
d°±r
 = 
d°
;

693 
x
 = 
xmö
; x < 
xmax
; x++)

695 i‡(
pf
->
f⁄èâr
&
MWTF_ANTIALIAS
)

696 *
d°±r
++ = 
gøy_∑Àâe
[(Ë*
§˝å
];

699  
z
=0;

700 
z
 <((
xmax
-
x
-1) < 7 ? (xmax-x-1) : 7);

701 
z
++ )

702 *
d°±r
++ = ((*
§˝å
 << 
z
Ë& 0x80Ë? 
gr_f‹eground
 : 
gr_background
;

703 
x
 += 7;

706 
§˝å
++;

709 
§c
 +
Ra°î
.
cﬁs
;

710 
d°
 -
width
;

712 #i‡
MWFREETYPEFONT_CACHEBITMAP


713 
ˇche
->
fg
 = 
gr_f‹eground
;

714 
ˇche
->
bg
 = 
gr_background
;

715 
ˇche
->
u£bg
 = 
gr_u£bg
;

716 
ˇche
->
bôm≠
 = bitmap;

721 
	`GdAªa
(
psd
, 
x_off£t
 + 
xmö
, 
y_off£t
 - (
ymö
 + 
height
), 
width
, height,

722 
bôm≠
, 
MWPF_PIXELVAL
);

724 #i‡!
MWFREETYPEFONT_CACHEBITMAP


725 
	`‰ì
(
bôm≠
);

727 
	}
}

733 
	$‰ìty≥_døwãxt
(
PMWFONT
 
pf⁄t
, 
PSD
 
psd
, 
MWCOORD
 
ax
, MWCOORD 
ay
,

734 c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
)

736 
PMWFREETYPEFONT
 
pf
 = (PMWFREETYPEFONT)
pf⁄t
;

737 c⁄° * 
°r
 = 
ãxt
;

738 
TT_F26DŸ6
 
x
 = 
ax
, 
y
 = 
ay
;

739 
TT_Pos
 
vec_x
, 
vec_y
;

740 
i
;

741 
TT_F26DŸ6
 
°¨tx
, 
°¨ty
;

742 
TT_Ouéöe
 
ouéöe
;

743 
TT_USh‹t
 
curch¨
;

744 
TT_Glyph_Mërics
 
mërics
;

745 
TT_Fa˚_Pr›îtõs
 
¥›îtõs
;

746 
TT_In°™˚_Mërics
 
imërics
;

747 
TT_F26DŸ6
 
as˚¡
, 
des˚¡
;

748 
bÀnd
[5] = { 0x00, 0x44, 0x88, 0xcc, 0xff };

749 
vútuÆ_∑Àâe
[5] = { 0, 1, 2, 3, 4 };

751 
pf
->
œ°_glyph_code
 = -1;

752 
pf
->
œ°_≥n_pos
 = -32767;

758 
	`TT_Gë_Fa˚_Pr›îtõs
 (
pf
->
Á˚
, &
¥›îtõs
);

759 
	`TT_Gë_In°™˚_Mërics
(
pf
->
ö°™˚
, &
imërics
);

761 
as˚¡
 = ((
¥›îtõs
.
h‹iz⁄èl
->
As˚ndî
 * 
imërics
.
y_sˇÀ
)/0x10000);

762 
des˚¡
 = ((
¥›îtõs
.
h‹iz⁄èl
->
Des˚ndî
*
imërics
.
y_sˇÀ
)/0x10000);

768 i‡(
Êags
&
MWTF_BOTTOM
) {

769 
vec_x
 = 0;

770 
vec_y
 = 
des˚¡
;

771 
	`TT_Tønsf‹m_Ve˘‹
(&
vec_x
, &
vec_y
,&
pf
->
m©rix
);

772 
x
 -
vec_x
 / 64;

773 
y
 +
vec_y
 / 64;

774 } i‡(
Êags
&
MWTF_TOP
) {

775 
vec_x
 = 0;

776 
vec_y
 = 
as˚¡
;

777 
	`TT_Tønsf‹m_Ve˘‹
(&
vec_x
, &
vec_y
,&
pf
->
m©rix
);

778 
x
 -
vec_x
 / 64;

779 
y
 +
vec_y
 / 64;

783 i‡(
pf
->
f⁄èâr
&
MWTF_ANTIALIAS
) {

784 
	`TT_Së_Ra°î_Gøy_PÆëã
 (
ígöe
, 
vútuÆ_∑Àâe
);

786 
	`ÆphabÀnd
(
psd
, 
gøy_∑Àâe
, 
gr_f‹eground
, 
gr_background
,

787 
bÀnd
, 5);

790 
°¨tx
 = 
x
;

791 
°¨ty
 = 
y
;

792 
i
 = 0; i < 
cc
; i++) {

793 
curch¨
 = 
	`TT_Ch¨_Index
 (
pf
->
ch¨_m≠
, 
°r
[
i
]);

795 i‡(
	`TT_Lﬂd_Glyph
 (
pf
->
ö°™˚
,Öf->
glyph
, 
curch¨
,

796 
TTLOAD_DEFAULT
Ë!
TT_Eº_Ok
)

799 i‡(
pf
->
f⁄åŸ©i⁄
) {

800 
	`TT_Gë_Glyph_Ouéöe
 (
pf
->
glyph
, &
ouéöe
);

801 
	`TT_Tønsf‹m_Ouéöe
 (&
ouéöe
, &
pf
->
m©rix
);

804 
	`TT_Gë_Glyph_Mërics
 (
pf
->
glyph
, &
mërics
);

806 i‡((
pf
->
f⁄èâr
&
MWTF_KERNING
Ë&&Öf->
ˇn_kîn
) {

807 i‡(
pf
->
f⁄åŸ©i⁄
) {

808 
vec_x
 = 
	`compuã_kînvÆ
(
pf
, 
curch¨
);

809 
vec_y
 = 0;

810 
	`TT_Tønsf‹m_Ve˘‹
(&
vec_x
, &
vec_y
,&
pf
->
m©rix
);

812 
x
 +
vec_x
 / 64;

813 
y
 -
vec_y
 / 64;

815 
x
 +
	`compuã_kînvÆ
(
pf
, 
curch¨
) / 64;

818 
	`døwch¨
(
pf
, 
psd
, 
curch¨
, 
x
, 
y
);

820 i‡(
pf
->
f⁄åŸ©i⁄
) {

821 
vec_x
 = 
mërics
.
adv™˚
;

822 
vec_y
 = 0;

823 
	`TT_Tønsf‹m_Ve˘‹
 (&
vec_x
, &
vec_y
, &
pf
->
m©rix
);

825 
x
 +
vec_x
 / 64;

826 
y
 -
vec_y
 / 64;

828 
x
 +
mërics
.
adv™˚
 / 64;

831 i‡(
pf
->
œ°_≥n_pos
 > 
x
)

832 
x
 = 
pf
->
œ°_≥n_pos
;

833 
pf
->
œ°_≥n_pos
 = 
x
;

836 
pf
->
œ°_glyph_code
 = 
curch¨
;

839 i‡(
pf
->
f⁄èâr
 & 
MWTF_UNDERLINE
)

840 
	`GdLöe
(
psd
, 
°¨tx
, 
°¨ty
, 
x
, 
y
, 
FALSE
);

841 
	}
}

846 
MWBOOL


847 
	$‰ìty≥_gëf⁄töfo
(
PMWFONT
 
pf⁄t
, 
PMWFONTINFO
 
pf⁄töfo
)

849 
i
;

850 
PMWFREETYPEFONT
 
pf
 = (PMWFREETYPEFONT)
pf⁄t
;

851 
TT_Fa˚_Pr›îtõs
 
¥›îtõs
;

852 
TT_In°™˚_Mërics
 
imërics
;

853 
TT_USh‹t
 
œ°_glyph_ödex
;

855 
	`TT_Gë_Fa˚_Pr›îtõs
 (
pf
->
Á˚
, &
¥›îtõs
);

856 
	`TT_Gë_In°™˚_Mërics
(
pf
->
ö°™˚
, &
imërics
);

859 
pf⁄töfo
->
height
 = (((
¥›îtõs
.
h‹iz⁄èl
->
As˚ndî
 * \

860 
imërics
.
y_sˇÀ
)/ 0x10000) >> 6) -

861 (((
¥›îtõs
.
h‹iz⁄èl
->
Des˚ndî
 * \

862 
imërics
.
y_sˇÀ
)/ 0x10000) >> 6);

863 
pf⁄töfo
->
maxwidth
 = ((
¥›îtõs
.
h‹iz⁄èl
->
xMax_Exã¡
 * \

864 
imërics
.
x_sˇÀ
)/ 0x10000) >> 6;

865 
pf⁄töfo
->
ba£löe
 = ((
¥›îtõs
.
h‹iz⁄èl
->
As˚ndî
 * \

866 
imërics
.
y_sˇÀ
)/ 0x10000) >> 6;

867 
pf⁄töfo
->
fú°ch¨
 = 
	`TT_Ch¨M≠_Fú°
(
pf
->
ch¨_m≠
, 
NULL
);

868 
pf⁄töfo
->
œ°ch¨
 = 
	`TT_Ch¨M≠_La°
(
pf
->
ch¨_m≠
, 
NULL
);

869 
pf⁄töfo
->
fixed
 = 
¥›îtõs
.
po°s¸ùt
->
isFixedPôch
;

873 
pf⁄töfo
->
löe•acög
 =Öf⁄töfo->
height
 + 2;

874 
pf⁄töfo
->
des˚¡
 =Öf⁄töfo->
height
 -Öf⁄töfo->
ba£löe
;

875 
pf⁄töfo
->
maxas˚¡
 =Öf⁄töfo->
ba£löe
;

876 
pf⁄töfo
->
maxdes˚¡
 =Öf⁄töfo->
des˚¡
;

878 
œ°_glyph_ödex
 = 
¥›îtõs
.
num_Glyphs
 > 255 ? 255:Öroperties.num_Glyphs-1;

882 i‡(
	`TT_Gë_Fa˚_Widths
–
pf
->
Á˚
, 0,

883 
œ°_glyph_ödex
, 
widths
, 
NULL
 ) !
TT_Eº_Ok
) {

884  
TRUE
;

887 
i
=0; i<=
œ°_glyph_ödex
; i++)

888 
	`DPRINTF
("widths[%d]: %d\n", 
i
, 
widths
[i]);

892 
i
=0; i<=
œ°_glyph_ödex
; i++)

893 
pf⁄töfo
->
widths
[
i
] = 
	`Gë_Glyph_Width
(
pf
, i);

896 
	`DPRINTF
("x_ppem: %d\ny_ppem: %d\nx_scale: %d\ny_scale: %d\n\
_ªsﬁuti⁄: %d\ny_ªsﬁuti⁄: %d\n",

898 
imërics
.
x_µem
, imërics.
y_µem
, imërics.
x_sˇÀ
, \

899 
imërics
.
y_sˇÀ
, imërics.
x_ªsﬁuti⁄
, imërics.
y_ªsﬁuti⁄
);

901 
	`DPRINTF
("Ascender: %d\nDescender: %d\nxMax_Extent: %d\n\
 Style Say Italic?: %d\nMac Style Say Bold?: %d\n\
: %d\nsTypoDescender: %d\nusWinAscent: %d\n\
: %d\nusFirstCharIndex: %d\nusLastCharIndex: %d\n\
2 Say Italic?: %d\nOS2 Say Bold?: %d\nOS2 Say monospaced?: %d\n\
 Say monospaced?: %d\n",\

907 
¥›îtõs
.
h‹iz⁄èl
->
As˚ndî
,

908 
¥›îtõs
.
h‹iz⁄èl
->
Des˚ndî
,

909 
¥›îtõs
.
h‹iz⁄èl
->
xMax_Exã¡
,

910 (
¥›îtõs
.
hódî
->
Mac_StyÀ
 & 0x2)?1:0,

911 (
¥›îtõs
.
hódî
->
Mac_StyÀ
 & 0x1)?1:0,

912 
¥›îtõs
.
os2
->
sTypoAs˚ndî
,

913 
¥›îtõs
.
os2
->
sTypoDes˚ndî
,

914 
¥›îtõs
.
os2
->
usWöAs˚¡
,

915 
¥›îtõs
.
os2
->
usWöDes˚¡
,

916 
¥›îtõs
.
os2
->
usFú°Ch¨Index
,

917 
¥›îtõs
.
os2
->
usLa°Ch¨Index
,

918 (
¥›îtõs
.
os2
->
fsSñe˘i⁄
 & 0x1)?1:0,

919 (
¥›îtõs
.
os2
->
fsSñe˘i⁄
 & 0x20)?1:0,

920 
¥›îtõs
.
po°s¸ùt
->
isFixedPôch
,

921 (
¥›îtõs
.
os2
->
∑no£
[3] == 9)?1:0);

924  
TRUE
;

925 
	}
}

928 
	$‰ìty≥_gëãxtsize
(
PMWFONT
 
pf⁄t
, c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
,

929 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
, MWCOORD *
pba£
)

931 
PMWFREETYPEFONT
 
pf
 = (PMWFREETYPEFONT)
pf⁄t
;

932 c⁄° * 
°r
 = 
ãxt
;

933 
TT_F26DŸ6
 
x
 = 0;

934 
i
;

935 
TT_USh‹t
 
curch¨
;

936 
TT_Glyph_Mërics
 
mërics
;

937 
TT_Fa˚_Pr›îtõs
 
¥›îtõs
;

938 
TT_In°™˚_Mërics
 
imërics
;

940 
	`TT_Gë_Fa˚_Pr›îtõs
 (
pf
->
Á˚
, &
¥›îtõs
);

941 
	`TT_Gë_In°™˚_Mërics
(
pf
->
ö°™˚
, &
imërics
);

943 
pf
->
œ°_glyph_code
 = -1;

944 
pf
->
œ°_≥n_pos
 = -32767;

946 
i
 = 0; i < 
cc
; i++) {

947 
curch¨
 = 
	`TT_Ch¨_Index
 (
pf
->
ch¨_m≠
, 
°r
[
i
]);

949 i‡(
	`TT_Lﬂd_Glyph
 (
pf
->
ö°™˚
,Öf->
glyph
, 
curch¨
,

950 
TTLOAD_SCALE_GLYPH
|
TTLOAD_HINT_GLYPH
Ë!
TT_Eº_Ok
)

953 
	`TT_Gë_Glyph_Mërics
 (
pf
->
glyph
, &
mërics
);

955 i‡((
pf
->
f⁄èâr
&
MWTF_KERNING
Ë&&Öf->
ˇn_kîn
) {

956 
x
 +
	`compuã_kînvÆ
(
pf
, 
curch¨
) / 64;

959 
x
 +
mërics
.
adv™˚
 / 64;

962 i‡(
pf
->
œ°_≥n_pos
 > 
x
)

963 
x
 = 
pf
->
œ°_≥n_pos
;

964 
pf
->
œ°_≥n_pos
 = 
x
;

966 
pf
->
œ°_glyph_code
 = 
curch¨
;

969 *
pwidth
 = 
x
;

970 *
pheight
 = (((
¥›îtõs
.
h‹iz⁄èl
->
As˚ndî
 *

971 
imërics
.
y_sˇÀ
)/ 0x10000) >> 6) -

972 (((
¥›îtõs
.
h‹iz⁄èl
->
Des˚ndî
 *

973 
imërics
.
y_sˇÀ
)/ 0x10000) >> 6);

975 *
pba£
 = (((-
¥›îtõs
.
h‹iz⁄èl
->
Des˚ndî
) *

976 
imërics
.
y_sˇÀ
)/ 0x10000) >> 6;

977 
	}
}

980 
	$‰ìty≥_de°royf⁄t
(
PMWFONT
 
pf⁄t
)

982 
PMWFREETYPEFONT
 
pf
 = (PMWFREETYPEFONT)
pf⁄t
;

984 
	`TT_Clo£_Fa˚
(
pf
->
Á˚
);

988 i‡(
pf
->
glyph_ˇche
 != 0)

989 
	`‰ì_ˇche_glyph
(
pf
->
glyph_ˇche
);

993 
	`‰ì
(
pf
);

994 
	}
}

997 
	$‰ìty≥_£tf⁄tsize
(
PMWFONT
 
pf⁄t
, 
MWCOORD
 
f⁄tsize
)

999 
PMWFREETYPEFONT
 
pf
 = (PMWFREETYPEFONT)
pf⁄t
;

1001 
pf
->
f⁄tsize
 = fontsize;

1004 i‡(!
f⁄tsize
)

1008 
	`TT_Së_In°™˚_PixñSizes
–
pf
->
ö°™˚
,Öf->
f⁄tsize
,

1009 
pf
->
f⁄tsize
,Öf->fontsize * 64 );

1012 
	`TT_Së_In°™˚_Ch¨Size
 (
pf
->
ö°™˚
,

1013 ((
pf
->
f⁄tsize
 * 72 + 96/2) / 96) * 64);

1015 
	}
}

1018 
	$‰ìty≥_£tf⁄åŸ©i⁄
(
PMWFONT
 
pf⁄t
, 
ã¡hdegªes
)

1020 
PMWFREETYPEFONT
 
pf
 = (PMWFREETYPEFONT)
pf⁄t
;

1021 
™gÀ
;

1023 
pf
->
f⁄åŸ©i⁄
 = 
ã¡hdegªes
;

1026 
	`TT_Së_In°™˚_Tønsf‹m_Fœgs
 (
pf
->
ö°™˚
, 
TRUE
, 
FALSE
);

1028 
™gÀ
 = 
pf
->
f⁄åŸ©i⁄
 * 
M_PI
 / 1800;

1029 
pf
->
m©rix
.
yy
 = (
TT_Fixed
Ë(
	`cos
 (
™gÀ
) * (1 << 16));

1030 
pf
->
m©rix
.
yx
 = (
TT_Fixed
Ë(
	`sö
 (
™gÀ
) * (1 << 16));

1031 
pf
->
m©rix
.
xx
 =Öf->m©rix.
yy
;

1032 
pf
->
m©rix
.
xy
 = -pf->m©rix.
yx
;

1033 
	}
}

1037 
	$GdGëTextSizeEx
(
PMWFONT
 
pf⁄t
, c⁄° *
°r
, 
cc
,
nMaxExã¡
,

1038 * 
ÕnFô
, * 
ÆpDx
,
MWCOORD
 *
pwidth
,MWCOORD *
pheight
,

1039 
MWCOORD
 *
pba£
, 
MWTEXTFLAGS
 
Êags
)

1041 
buf
[256];

1042 * 
ãxt
;

1043 
PMWFREETYPEFONT
 
pf
 = (PMWFREETYPEFONT)
pf⁄t
;

1044 
MWTEXTFLAGS
 
de„ncodög
 = 
pf
->
f⁄çrocs
->
ícodög
;

1045 
x
 = 0;

1046 
i
;

1047 
TT_USh‹t
 
curch¨
;

1048 
TT_Glyph_Mërics
 
mërics
;

1049 
TT_Fa˚_Pr›îtõs
 
¥›îtõs
;

1050 
TT_In°™˚_Mërics
 
imërics
;

1052 i‡((
cc
<0)||(!
°r
))

1054 *
pwidth
 = *
pheight
 = *
pba£
 = 0;

1058 if((
Êags
 & (
MWTF_PACKMASK
|
MWTF_DBCSMASK
)Ë!
de„ncodög
)

1060 
cc
 = 
	`GdC⁄vîtEncodög
(
°r
, 
Êags
, cc, 
buf
, 
de„ncodög
);

1061 
Êags
 &~(
MWTF_PACKMASK
|
MWTF_DBCSMASK
);

1062 
Êags
 |
de„ncodög
;

1063 
ãxt
=
buf
;

1064 } 
ãxt
 =(*)
°r
;

1065 if(
cc
 <= 0)

1067 *
pwidth
 = *
pheight
 = *
pba£
 = 0;

1071 
	`TT_Gë_Fa˚_Pr›îtõs
 (
pf
->
Á˚
, &
¥›îtõs
);

1072 
	`TT_Gë_In°™˚_Mërics
(
pf
->
ö°™˚
, &
imërics
);

1074 
pf
->
œ°_glyph_code
 = -1;

1075 
pf
->
œ°_≥n_pos
 = -32767;

1076 i‡(
ÕnFô
)

1077 *
ÕnFô
=-1;

1078 
i
 = 0; i < 
cc
; i++)

1080 
curch¨
 = 
	`TT_Ch¨_Index
 (
pf
->
ch¨_m≠
,
ãxt
[
i
]);

1082 i‡(
	`TT_Lﬂd_Glyph
 (
pf
->
ö°™˚
,Öf->
glyph
, 
curch¨
,

1083 
TTLOAD_SCALE_GLYPH
|
TTLOAD_HINT_GLYPH
Ë!
TT_Eº_Ok
)

1085 
	`¥ötf
("U«bÀÅÿlﬂd glyph wôh index=%d\n",
curch¨
);

1088 
	`TT_Gë_Glyph_Mërics
 (
pf
->
glyph
, &
mërics
);

1089 i‡((
pf
->
f⁄èâr
&
MWTF_KERNING
Ë&&Öf->
ˇn_kîn
)

1091 
x
 +
	`compuã_kînvÆ
(
pf
, 
curch¨
) / 64;

1093 
x
 +
mërics
.
adv™˚
 / 64;

1094 if((
ÕnFô
)&&(
ÆpDx
))

1096 i‡(
x
<=
nMaxExã¡
)

1097 
ÆpDx
[
i
]=
x
;

1099 i‡(*
ÕnFô
==-1)

1100 (*
ÕnFô
)=
i
;

1103 i‡(
pf
->
œ°_≥n_pos
 > 
x
)

1104 
x
 = 
pf
->
œ°_≥n_pos
;

1105 
pf
->
œ°_≥n_pos
 = 
x
;

1106 
pf
->
œ°_glyph_code
 = 
curch¨
;

1108 i‡((
ÕnFô
)&&(*lpnFit==-1))

1109 *
ÕnFô
=
cc
;

1110 *
pwidth
 = 
x
;

1111 *
pheight
 = (((
¥›îtõs
.
h‹iz⁄èl
->
As˚ndî
 *

1112 
imërics
.
y_sˇÀ
)/ 0x10000) >> 6) -

1113 (((
¥›îtõs
.
h‹iz⁄èl
->
Des˚ndî
 *

1114 
imërics
.
y_sˇÀ
)/ 0x10000) >> 6);

1116 i‡(
pba£
)

1117 *
pba£
 = (((-
¥›îtõs
.
h‹iz⁄èl
->
Des˚ndî
) *

1118 
imërics
.
y_sˇÀ
)/ 0x10000) >> 6;

1120 
	}
}

1127 
	$â_lookup_«me
(
TT_Fa˚
 
Á˚
)

1129 
TT_Fa˚_Pr›îtõs
 
¥›
;

1130 
i
, 
n
;

1131 
∂©f‹m
, 
ícodög
, 
œnguage
, 
id
;

1132 *
°rög
;

1133 *
«me_buf„r
;

1134 
°rög_Àn
;

1135 
j
, 
found
;

1136 
ödex
 = 4;

1137 
«me_Àn
;

1140 
	`TT_Gë_Fa˚_Pr›îtõs
(
Á˚
, &
¥›
);

1141 
n
 = 
¥›
.
num_Names
;

1143  
i
 = 0; i < 
n
; i++ ) {

1144 
	`TT_Gë_Name_ID
–
Á˚
, 
i
, &
∂©f‹m
, &
ícodög
, &
œnguage
, &
id
 );

1145 
	`TT_Gë_Name_Såög
–
Á˚
, 
i
, &
°rög
, &
°rög_Àn
 );

1147 i‡(
id
 =
ödex
 ) {

1150 
found
 = 0;

1153 i‡–
∂©f‹m
 == 3 )

1154  
j
 = 1; j >= 0; j-- )

1155 i‡–
ícodög
 =
j
 )

1156 i‡–(
œnguage
 & 0x3FF) == 0x009 ) {

1158 
found
 = 1;

1162 i‡–!
found
 && 
∂©f‹m
 =0 && 
œnguage
 == 0 )

1163 
found
 = 1;

1166 i‡–
found
 ) {

1167 i‡–
°rög_Àn
 > 512 )

1168 
°rög_Àn
 = 512;

1170 
«me_Àn
 = 0;

1171 
«me_buf„r
 = (*)
	`mÆloc
((
°rög_Àn
 / 2) + 1);

1173  
i
 = 1; i < 
°rög_Àn
; i += 2 )

1174 
«me_buf„r
[
«me_Àn
++] = 
°rög
[
i
];

1176 
«me_buf„r
[
«me_Àn
] = '\0';

1178  
«me_buf„r
;

1184  
NULL
;

1185 
	}
}

1188 
	$gë_â_«me
(*
p
)

1190 
TT_Fa˚
 
Á˚
;

1191 *
ªt
;

1195 i‡(
	`TT_O≥n_Fa˚
(
ígöe
, 
p
, &
Á˚
Ë!
TT_Eº_Ok
) {

1196 
	`¥ötf
("Eº‹ o≥nög f⁄t: %s\n", 
p
);

1197  
NULL
;

1200 
ªt
 = 
	`â_lookup_«me
(
Á˚
);

1202 
	`TT_Clo£_Fa˚
(
Á˚
);

1204  
ªt
;

1205 
	}
}

1208 
	$GdFªeF⁄tLi°
(
MWFONTLIST
 ***
f⁄ts
, 
n
)

1210 
i
;

1211 
MWFONTLIST
 *
g
, **
li°
 = *
f⁄ts
;

1213 
i
 = 0; i < 
n
; i++) {

1214 
g
 = 
li°
[
i
];

1215 if(
g
) {

1216 if(
g
->
mw«me
)

1217 
	`‰ì
(
g
->
mw«me
);

1218 if(
g
->
â«me
)

1219 
	`‰ì
(
g
->
â«me
);

1220 
	`‰ì
(
g
);

1223 
	`‰ì
(
li°
);

1224 *
f⁄ts
 = 0;

1225 
	}
}

1228 
	$GdGëF⁄tLi°
(
MWFONTLIST
 ***
f⁄ts
, *
numf⁄ts
)

1230 
DIR
 *
dú
;

1231 
dúít
 *
dít
;

1232 *
p
, *
·mp
;

1233 
∂
, 
idx
 = 0;

1234 
MWFONTLIST
 **
li°
;

1237 i‡(
TT_Eº_Ok
 !
	`TT_Inô_FªeTy≥
(&
ígöe
)) {

1238 
	`¥ötf
("UnableÅo initialize freetype\n");

1239 *
numf⁄ts
 = -1;

1243 
dú
 = 
	`›ídú
(
FREETYPE_FONT_DIR
);

1245 i‡(
dú
 <= 0) {

1246 
	`¥ötf
("Error opening font directory\n");

1247 *
numf⁄ts
 = -1;

1252 (
dít
 = 
	`ªaddú
(
dú
)Ë!
NULL
) {

1253 
p
 = 
	`°ºchr
(
dít
->
d_«me
, '.');

1254 i‡(
	`°rˇ£cmp
(
p
, ".ttf") == 0)

1255 
idx
++;

1258 *
numf⁄ts
 = 
idx
;

1259 
	`ªwöddú
(
dú
);

1262 
li°
 = (
MWFONTLIST
**)
	`mÆloc
(
idx
 * (MWFONTLIST*));

1263 
∂
 = 0;Ö»< 
idx
;Öl++)

1264 
li°
[
∂
] = (
MWFONTLIST
*)
	`mÆloc
((MWFONTLIST));

1266 *
f⁄ts
 = 
li°
;

1268 
idx
 = 0;

1270 (
dít
 = 
	`ªaddú
(
dú
)Ë!
NULL
) {

1272 
p
 = 
	`°ºchr
(
dít
->
d_«me
, '.');

1274 i‡(
	`°rˇ£cmp
(
p
, ".ttf") == 0) {

1277 
p
 = 0;

1278 
∂
 = 
	`°æí
(
FREETYPE_FONT_DIR
Ë+ såÀn(
dít
->
d_«me
) *

1280 
p
 = (*)
	`mÆloc
(
∂
);

1281 
p
 = (*)
	`mem£t
’, '\0', 
∂
);

1282 
p
 = (*)
	`°rˇt
’, 
FREETYPE_FONT_DIR
);

1283 
p
 = (*)
	`°rˇt
(p, "/");

1284 
p
 = (*)
	`°rˇt
’, 
dít
->
d_«me
);

1287 if((
·mp
 = 
	`gë_â_«me
(
p
)Ë!
NULL
) {

1288 
li°
[
idx
]->
â«me
 = 
·mp
;

1289 
li°
[
idx
]->
mw«me
 = 
	`mÆloc
(
	`°æí
(
dít
->
d_«me
) + 1);

1290 
li°
[
idx
]->
mw«me
 = 
	`°r˝y
÷i°[idx]->mw«me, 
dít
->
d_«me
);

1292 
idx
++;

1295 
	`‰ì
(
p
);

1299 
	`˛o£dú
(
dú
);

1300 
	}
}

	@engine/font_freetype2.c

30 
	~<°dio.h
>

31 
	~<°dlib.h
>

32 
	~<°rög.h
>

33 
	~<as£π.h
>

34 
	~<°rög.h
>

36 
	~<dúít.h
>

38 
	~"devi˚.h
"

40 
	~"devf⁄t.h
"

42 #i‡(
UNIX
 | 
DOS_DJGPP
)

43 
	#°rcmpi
 
°rˇ£cmp


	)

47 
MWPIXELVAL
 
gr_f‹eground
;

48 
MWPIXELVAL
 
gr_background
;

49 
MWBOOL
 
gr_u£bg
;

64 
	#HAVE_FREETYPE_2_CACHE
 1

	)

80 
	#HAVE_FREETYPE_2_CMAP_CACHE
 0

	)

87 
	~<·2buûd.h
>

88 #ö˛udê
FT_FREETYPE_H


89 #ö˛udê
FT_TRIGONOMETRY_H


90 #ö˛udê
FT_GLYPH_H


91 #i‡
HAVE_FREETYPE_2_CACHE


92 #ö˛udê
FT_CACHE_H


93 #ö˛udê
FT_CACHE_SMALL_BITMAPS_H


94 #i‡
HAVE_FREETYPE_2_CMAP_CACHE


95 #ö˛udê
FT_CACHE_CHARMAP_H


113 
	#SIMPLIFY_VERSION_NUMBER
(
maj‹
,
mö‹
,
∑tch
) \

114 ((
maj‹
)*0x01000000UL + (
mö‹
)*0x01000UL + (
∑tch
)*0x01UL)

	)

119 
	#FREETYPE_VERSION_NUMBER_SIMPLE
 \

120 
	`SIMPLIFY_VERSION_NUMBER
(
FREETYPE_MAJOR
,
FREETYPE_MINOR
,
FREETYPE_PATCH
)

	)

134 
	#HAVE_FREETYPE_VERSION_AFTER_OR_EQUAL
(
maj‹
,
mö‹
,
∑tch
) \

135 (
FREETYPE_VERSION_NUMBER_SIMPLE
 >
	`SIMPLIFY_VERSION_NUMBER
(
maj‹
,
mö‹
,
∑tch
))

	)

138 #i‚de‡
FREETYPE_FONT_DIR


142 
	#FREETYPE_FONT_DIR
 "/u§/loˇl/mi¸owö/f⁄ts"

	)

148 *
	g‰ìty≥2_f⁄t_dú
;

151 
‰ìty≥2_f⁄td©a_
 
	t‰ìty≥2_f⁄td©a
;

153 
	s‰ìty≥2_f⁄td©a_


155 
	misBuf„r
;

158 *
	mfûíame
;

162 *
	md©a
;

163 
	mÀngth
;

165 
	mbuf„r
;

167 
	md©a
;

168 
	mªfcou¡
;

169 #i‡
HAVE_FREETYPE_2_CACHE


170 
‰ìty≥2_f⁄td©a
 *
	m√xt
;

174 
	sMWFREETYPE2FONT_STRUCT


176 
PMWFONTPROCS
 
	mf⁄çrocs
;

177 
MWCOORD
 
	mf⁄tsize
;

178 
	mf⁄åŸ©i⁄
;

179 
	mf⁄èâr
;

183 *
	mfûíame
;

184 
‰ìty≥2_f⁄td©a
 *
	mÁ˚id
;

185 #i‡
HAVE_FREETYPE_2_CACHE


186 #i‡
HAVE_FREETYPE_VERSION_AFTER_OR_EQUAL
(2,1,3)

187 
FTC_ImageTy≥Rec
 
	mimagedesc
;

189 
FTC_ImageDesc
 
	mimagedesc
;

191 #i‡
HAVE_FREETYPE_2_CMAP_CACHE


192 
FTC_CM≠DescRec
 
	mcm≠desc
;

195 
FT_Fa˚
 
	mÁ˚
;

197 
FT_M©rix
 
	mm©rix
;

201 
MWBOOL
 
‰ìty≥2_gëf⁄töfo
(
PMWFONT
 
pf⁄t
, 
PMWFONTINFO
 
pf⁄töfo
);

202 
‰ìty≥2_gëãxtsize
(
PMWFONT
 
pf⁄t
, c⁄° *
ãxt
, 
cc
,

203 
MWTEXTFLAGS
 
Êags
, 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
,

204 
MWCOORD
 *
pba£
);

205 
‰ìty≥2_de°royf⁄t
(
PMWFONT
 
pf⁄t
);

206 
‰ìty≥2_døwãxt
(
PMWFONT
 
pf⁄t
, 
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
,

207 c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
);

208 
‰ìty≥2_£tf⁄tsize
(
PMWFONT
 
pf⁄t
, 
MWCOORD
 
f⁄tsize
);

209 
‰ìty≥2_£tf⁄åŸ©i⁄
(
PMWFONT
 
pf⁄t
, 
ã¡hdegªes
);

210 
‰ìty≥2_£tf⁄èâr
(
PMWFONT
 
pf⁄t
, 
£tÊags
, 
˛rÊags
);

211 
PMWFONT
 
‰ìty≥2_du∂iˇã
(PMWFONT 
p§cf⁄t
, 
MWCOORD
 
f⁄tsize
);

217 
MWFONTPROCS
 
	g‰ìty≥2_¥ocs
 = {

218 
MWTF_UC16
,

219 
‰ìty≥2_gëf⁄töfo
,

220 
‰ìty≥2_gëãxtsize
,

221 
NULL
,

222 
‰ìty≥2_de°royf⁄t
,

223 
‰ìty≥2_døwãxt
,

224 
‰ìty≥2_£tf⁄tsize
,

225 
‰ìty≥2_£tf⁄åŸ©i⁄
,

226 
‰ìty≥2_£tf⁄èâr
,

227 
‰ìty≥2_du∂iˇã
,

231 
PMWFREETYPE2FONT


232 
‰ìty≥2_¸óãf⁄t_öã∫Æ
(
‰ìty≥2_f⁄td©a
 * 
Á˚id
,

233 *
fûíame
, 
MWCOORD
 
height
);

239 
FT_Libøry
 
	g‰ìty≥2_libøry
 = 
NULL
;

241 #i‡
HAVE_FREETYPE_2_CACHE


250 
‰ìty≥2_f⁄td©a
 *
	g‰ìty≥2_f⁄ts
 = 
NULL
;

255 
FTC_M™agî
 
	g‰ìty≥2_ˇche_m™agî
;

260 
FTC_SBôCache
 
	g‰ìty≥2_ˇche_sbô
;

262 #i‡
HAVE_FREETYPE_2_CMAP_CACHE


266 
FTC_CM≠Cache
 
	g‰ìty≥2_ˇche_cm≠
;

270 #i‡
HAVE_FREETYPE_2_CMAP_CACHE


281 
	#LOOKUP_CHAR
(
pf_
,
Á˚_
,
ch_
) \

282 (
	`FTC_CM≠Cache_Lookup
(
‰ìty≥2_ˇche_cm≠
, \

283 &((
pf_
)->
cm≠desc
), \

284 (
ch_
)))

	)

287 
	#LOOKUP_CHAR
(
pf_
,
Á˚_
,
ch_
) \

288 (
	`FT_Gë_Ch¨_Index
((
Á˚_
), (
ch_
)))

	)

299 
	#FREETYPE2_CACHE_FONT_SIZE_LIMIT
 100

	)

308 
	#CAN_USE_FT2_CACHE
(
pf_
) \

309 (((
pf_
)->
f⁄åŸ©i⁄
 == 0) && \

310 ((
pf_
)->
f⁄tsize
 < 
FREETYPE2_CACHE_FONT_SIZE_LIMIT
))

	)

321 
FT_Eº‹


322 
	$‰ìty≥2_Á˚_ªque°î
(
FTC_Fa˚ID
 
Á˚_id
,

323 
FT_Libøry
 
libøry
,

324 
FT_Poöãr
 
ªque°_d©a
, 
FT_Fa˚
 * 
aÁ˚
)

326 
‰ìty≥2_f⁄td©a
 *
f⁄td©a
 = (‰ìty≥2_f⁄td©®*Ë
Á˚_id
;

328 
	`as£π
(
f⁄td©a
);

330 i‡(
f⁄td©a
->
isBuf„r
) {

331 * 
buf„r
 = 
f⁄td©a
->
d©a
.buffer.data;

332 
Àngth
 = 
f⁄td©a
->
d©a
.
buf„r
.length;

337 
	`as£π
(
buf„r
);

338  
	`FT_New_Mem‹y_Fa˚
(
libøry
, 
buf„r
, 
Àngth
, 0, 
aÁ˚
);

340 * 
fûíame
 = 
f⁄td©a
->
d©a
.filename;

343 
	`as£π
(
fûíame
);

344  
	`FT_New_Fa˚
(
libøry
, 
fûíame
, 0, 
aÁ˚
);

346 
	}
}

358 
	$‰ìty≥2_öô
(
PSD
 
psd
)

360 
FT_Eº‹
 
îr
;

362 i‡(
‰ìty≥2_libøry
 !
NULL
) {

366 i‡((
‰ìty≥2_f⁄t_dú
 = 
	`gëív
("MWFONTS")Ë=
NULL
) {

367 
‰ìty≥2_f⁄t_dú
 = 
FREETYPE_FONT_DIR
;

371 
îr
 = 
	`FT_Inô_FªeTy≥
(&
‰ìty≥2_libøry
);

373 i‡(
îr
 !
FT_Eº_Ok
) {

374 
‰ìty≥2_libøry
 = 
NULL
;

375 
	`EPRINTF
("Eº‹ 0x%x inôülizög FªeTy≥ 2\n", 
îr
);

378 #i‡
HAVE_FREETYPE_2_CACHE


380 
îr
 = 
	`FTC_M™agî_New
(
‰ìty≥2_libøry
, 3,

383 &
‰ìty≥2_Á˚_ªque°î
, 
NULL
,

384 &
‰ìty≥2_ˇche_m™agî
);

385 i‡(
îr
 !
FT_Eº_Ok
) {

386 
	`EPRINTF
("Error 0x%x initializing FreeType 2 cache system\n",

387 
îr
);

389 
‰ìty≥2_ˇche_m™agî
 = 
NULL
;

390 
	`FT_D⁄e_FªeTy≥
(
‰ìty≥2_libøry
);

391 
‰ìty≥2_libøry
 = 
NULL
;

395 
îr
 = 
	`FTC_SBôCache_New
(
‰ìty≥2_ˇche_m™agî
,

396 &
‰ìty≥2_ˇche_sbô
);

397 i‡(
îr
 !
FT_Eº_Ok
) {

398 
	`EPRINTF
("Eº‹ 0x%x inôülizög FªeTy≥ 2 sbô cachêsy°em\n", 
îr
);

400 
‰ìty≥2_ˇche_sbô
 = 
NULL
;

401 
	`FTC_M™agî_D⁄e
(
‰ìty≥2_ˇche_m™agî
);

402 
‰ìty≥2_ˇche_m™agî
 = 
NULL
;

403 
	`FT_D⁄e_FªeTy≥
(
‰ìty≥2_libøry
);

404 
‰ìty≥2_libøry
 = 
NULL
;

407 #i‡
HAVE_FREETYPE_2_CMAP_CACHE


408 
îr
 = 
	`FTC_CM≠Cache_New
(
‰ìty≥2_ˇche_m™agî
,

409 &
‰ìty≥2_ˇche_cm≠
);

410 i‡(
îr
 !
FT_Eº_Ok
) {

411 
	`EPRINTF
("Eº‹ 0x%x inôülizög FªeTy≥ 2 cm≠ cachêsy°em\n", 
îr
);

413 
‰ìty≥2_ˇche_cm≠
 = 
NULL
;

415 
‰ìty≥2_ˇche_sbô
 = 
NULL
;

416 
	`FTC_M™agî_D⁄e
(
‰ìty≥2_ˇche_m™agî
);

417 
‰ìty≥2_ˇche_m™agî
 = 
NULL
;

418 
	`FT_D⁄e_FªeTy≥
(
‰ìty≥2_libøry
);

419 
‰ìty≥2_libøry
 = 
NULL
;

426 
	}
}

438 
PMWFREETYPE2FONT


439 
	$‰ìty≥2_¸óãf⁄t
(c⁄° *
«me
, 
MWCOORD
 
height
, 
©å
)

441 
PMWFREETYPE2FONT
 
pf
;

442 *
p
;

443 *
f⁄äame
;

444 
‰ìty≥2_f⁄td©a
 *
Á˚id
 = 
NULL
;

445 #i‡
HAVE_FREETYPE_2_CACHE


446 
fú°_time
 = 0;

450 i‡(
‰ìty≥2_libøry
 =
NULL
) {

452 i‡(!
	`‰ìty≥2_öô
(
NULL
)) {

453  
NULL
;

457 
f⁄äame
 = 
	`mÆloc
(6 + 
	`°æí
(
«me
Ë+ såÀn(
‰ìty≥2_f⁄t_dú
));

458 i‡(
f⁄äame
 =
NULL
)

459  
NULL
;

462 i‡(
	`°rchr
(
«me
, '/'Ë!
NULL
) {

463 
	`°r˝y
(
f⁄äame
, 
«me
);

465 
	`°r˝y
(
f⁄äame
, 
‰ìty≥2_f⁄t_dú
);

466 
	`°rˇt
(
f⁄äame
, "/");

467 
	`°rˇt
(
f⁄äame
, 
«me
);

471 i‡((
p
 = 
	`°ºchr
(
f⁄äame
, '.')Ë=
NULL
 ||

472 ((
	`°rcmpi
(
p
, ".ttf") != 0) && (strcmpi(p, ".pfr") != 0))) {

473 
	`°rˇt
(
f⁄äame
, ".ttf");

475 #i‡
HAVE_FREETYPE_2_CACHE


476 
Á˚id
 = 
‰ìty≥2_f⁄ts
;

477  (
Á˚id
 !
NULL
Ë&& (0 !
	`°rcmpi
(Á˚id->
d©a
.
fûíame
, 
f⁄äame
)) )

479 
Á˚id
 = fa˚id->
√xt
;

481 i‡(
Á˚id
 =
NULL
) {

483 
	`DPRINTF
("N™o-X-Fªëy≥2: AddögÇew f⁄t: %s\n", 
f⁄äame
);

484 
Á˚id
 = (
‰ìty≥2_f⁄td©a
 *Ë
	`ˇŒoc
((*faceid), 1);

485 i‡(
Á˚id
 =
NULL
) {

486 
	`‰ì
(
f⁄äame
);

487  
NULL
;

490 
Á˚id
->
d©a
.
fûíame
 = 
f⁄äame
;

493 
Á˚id
->
√xt
 = 
‰ìty≥2_f⁄ts
;

494 
‰ìty≥2_f⁄ts
 = 
Á˚id
;

499 
fú°_time
 = 1;

501 
	`‰ì
(
f⁄äame
);

503 
f⁄äame
 = 
Á˚id
->
d©a
.
fûíame
;

505 
Á˚id
 = 
NULL
;

508 
pf
 = 
	`‰ìty≥2_¸óãf⁄t_öã∫Æ
(
Á˚id
, 
f⁄äame
, 
height
);

509 i‡(!
pf
) {

510 #i‡
HAVE_FREETYPE_2_CACHE


511 i‡(
fú°_time
) {

512 
	`as£π
(
‰ìty≥2_f⁄ts
 =
Á˚id
);

513 
‰ìty≥2_f⁄ts
 = 
Á˚id
->
√xt
;

514 
	`‰ì
(
f⁄äame
);

515 
	`‰ì
(
Á˚id
);

518 
	`‰ì
(
f⁄äame
);

520  
NULL
;

523 
	`GdSëF⁄tAâr
((
PMWFONT
Ë
pf
, 
©å
, 0);

525  
pf
;

526 
	}
}

536 
PMWFREETYPE2FONT


537 
	$‰ìty≥2_¸óãf⁄t‰ombuf„r
(c⁄° *
buf„r
,

538 
Àngth
, 
MWCOORD
 
height
)

540 
PMWFREETYPE2FONT
 
pf
;

541 
‰ìty≥2_f⁄td©a
 *
Á˚id
 = 
NULL
;

542 *
buf„rc›y
;

544 
	`as£π
(
buf„r
);

547 i‡(
‰ìty≥2_libøry
 =
NULL
) {

549 i‡(!
	`‰ìty≥2_öô
(
NULL
)) {

550  
NULL
;

554 
Á˚id
 = (
‰ìty≥2_f⁄td©a
 *Ë
	`ˇŒoc
((freetype2_fontdata), 1);

555 i‡(!
Á˚id
)

556  
NULL
;

558 
buf„rc›y
 = (*Ë
	`mÆloc
(
Àngth
);

559 i‡(!
buf„rc›y
) {

560 
	`‰ì
(
Á˚id
);

561  
NULL
;

563 
	`mem˝y
(
buf„rc›y
, 
buf„r
, 
Àngth
);

565 
Á˚id
->
isBuf„r
 = 
TRUE
;

566 
Á˚id
->
d©a
.
buf„r
.
Àngth
 =Üength;

567 
Á˚id
->
d©a
.
buf„r
.d©®
buf„rc›y
;

568 
Á˚id
->
ªfcou¡
 = 1;

575 
pf
 = 
	`‰ìty≥2_¸óãf⁄t_öã∫Æ
(
Á˚id
, 
NULL
, 
height
);

576 i‡(!
pf
) {

577 
	`‰ì
(
Á˚id
);

580  
pf
;

581 
	}
}

597 
PMWFREETYPE2FONT


598 
	$‰ìty≥2_¸óãf⁄t_öã∫Æ
(
‰ìty≥2_f⁄td©a
 * 
Á˚id
,

599 *
fûíame
, 
MWCOORD
 
height
)

601 
PMWFREETYPE2FONT
 
pf
;

602 #i‡
HAVE_FREETYPE_2_CACHE


603 
FT_Fa˚
 
Á˚
;

604 
FT_Size
 
size
;

606 
FT_Eº‹
 
îr‹
;

609 
pf
 = (
PMWFREETYPE2FONT
Ë
	`ˇŒoc
((
MWFREETYPE2FONT
), 1);

610 i‡(!
pf
) {

611  
NULL
;

613 
pf
->
f⁄çrocs
 = &
‰ìty≥2_¥ocs
;

615 
pf
->
Á˚id
 = faceid;

616 
pf
->
fûíame
 = filename;

617 #i‡
HAVE_FREETYPE_2_CACHE


618 
pf
->
imagedesc
.
f⁄t
.
Á˚_id
 = 
Á˚id
;

619 
pf
->
imagedesc
.
f⁄t
.
pix_width
 = 0;

620 
pf
->
imagedesc
.
f⁄t
.
pix_height
 = 0;

621 #i‡
	`HAVE_FREETYPE_VERSION_AFTER_OR_EQUAL
(2,1,3)

622 
pf
->
imagedesc
.
Êags
 = 0;

624 
pf
->
imagedesc
.
ty≥
 = 0;

626 #i‡
HAVE_FREETYPE_2_CMAP_CACHE


627 
pf
->
cm≠desc
.
Á˚_id
 = 
Á˚id
;

628 
pf
->
cm≠desc
.
ty≥
 = 
FTC_CMAP_BY_ENCODING
;

629 
pf
->
cm≠desc
.
u
.
ícodög
 = 
·_ícodög_unicode
;

633 i‡(
fûíame
) {

634 
îr‹
 = 
	`FT_New_Fa˚
(
‰ìty≥2_libøry
, 
fûíame
, 0, &
pf
->
Á˚
);

635 i‡(
îr‹
 !
FT_Eº_Ok
) {

636 
	`EPRINTF
("Nano-X-Freetype2: Can'tÜoad font from file \"%s\" - %lx\n",

637 
fûíame
, (Ë
îr‹
);

638 
out
;

642 
îr‹
 = 
	`FT_New_Mem‹y_Fa˚
(
‰ìty≥2_libøry
,

643 
buf„r
, 
Àngth
, 0, &
pf
->
Á˚
);

644 i‡(
îr‹
 !
FT_Eº_Ok
) {

645 
	`EPRINTF
("Nano-X-Freetype2: Can'tÜoad font from memory - %lx\n",

646 (Ë
îr‹
);

647 
out
;

652 
îr‹
 = 
	`FT_Sñe˘_Ch¨m≠
(
pf
->
Á˚
, 
·_ícodög_unicode
);

653 i‡(
îr‹
 !
FT_Eº_Ok
) {

654 
	`EPRINTF
("freetype2_createfont:Ço unicode mapÅable - %lx\n",

655 (Ë
îr‹
);

656 
out
;

660 
	`GdSëF⁄tSize
((
PMWFONT
Ë
pf
, 
height
);

661 
	`GdSëF⁄tRŸ©i⁄
((
PMWFONT
Ë
pf
, 0);

662 
	`GdSëF⁄tAâr
((
PMWFONT
Ë
pf
, 0, 0);

664 #i‡
HAVE_FREETYPE_2_CACHE


667 
îr‹
 = 
	`FTC_M™agî_Lookup_Size
(
‰ìty≥2_ˇche_m™agî
,

668 &(
pf
->
imagedesc
.
f⁄t
), &
Á˚
, &
size
);

669 i‡(
îr‹
 !
FT_Eº_Ok
) {

670 
	`EPRINTF
("Nano-X-Freetype2: Freetype 2Érror %lxÅryingÅoÜoad font.\n",

671 ()
îr‹
);

672 
	`‰ì
(
pf
);

673  
NULL
;

677  
pf
;

679 #i‡! 
HAVE_FREETYPE_2_CACHE


680 
out
:

681 i‡(
pf
->
Á˚
 !
NULL
) {

682 
	`FT_D⁄e_Fa˚
(
pf
->
Á˚
);

684 
	`‰ì
(
pf
);

685  
NULL
;

687 
	}
}

695 
	$‰ìty≥2_de°royf⁄t
(
PMWFONT
 
pf⁄t
)

697 
PMWFREETYPE2FONT
 
pf
 = (PMWFREETYPE2FONTË
pf⁄t
;

699 
	`as£π
(
pf
);

701 #i‡! 
HAVE_FREETYPE_2_CACHE


702 
	`FT_D⁄e_Fa˚
(
pf
->
Á˚
);

704 i‡(
pf
->
fûíame
)

705 
	`‰ì
(
pf
->
fûíame
);

708 i‡(
pf
->
Á˚id
 &&Öf->Á˚id->
isBuf„r
) {

709 i‡(--
pf
->
Á˚id
->
ªfcou¡
 <= 0) {

710 #i‡
HAVE_FREETYPE_2_CACHE


711 
	`FTC_M™agî_Re£t
(
‰ìty≥2_ˇche_m™agî
);

713 
	`‰ì
(
pf
->
Á˚id
->
d©a
.
buf„r
.data);

714 
	`‰ì
(
pf
->
Á˚id
);

718 
	`‰ì
(
pf
);

719 
	}
}

737 
PMWFONT


738 
	$‰ìty≥2_du∂iˇã
(
PMWFONT
 
p§cf⁄t
, 
MWCOORD
 
height
)

740 
PMWFREETYPE2FONT
 
pf
 = (PMWFREETYPE2FONTË
p§cf⁄t
;

741 
PMWFREETYPE2FONT
 
≤ewf
;

743 
	`as£π
(
pf
);

745 i‡(
height
 == 0) {

746 
height
 = 
pf
->
f⁄tsize
;

749 i‡(
pf
->
fûíame
) {

751 *
fûíame
;

752 #i‡
HAVE_FREETYPE_2_CACHE


755 
fûíame
 = 
pf
->filename;

758 
fûíame
 = 
	`mÆloc
(1 + 
	`°æí
(
pf
->filename));

759 i‡(!
fûíame
)

760  
NULL
;

761 
	`°r˝y
(
fûíame
, 
pf
->filename);

763 
≤ewf
 = 
	`‰ìty≥2_¸óãf⁄t_öã∫Æ
(
pf
->
Á˚id
, 
fûíame
,

764 
height
);

765 i‡(!
≤ewf
) {

766 
	`‰ì
(
fûíame
);

767  
NULL
;

770 
pf
->
Á˚id
->
ªfcou¡
++;

772 
≤ewf
 = 
	`‰ìty≥2_¸óãf⁄t_öã∫Æ
(
pf
->
Á˚id
, 
NULL
,

773 
height
);

774 i‡(!
≤ewf
) {

775 
pf
->
Á˚id
->
ªfcou¡
--;

776  
NULL
;

780 
	`GdSëF⁄tAâr
((
PMWFONT
Ë
≤ewf
, 
pf
->
f⁄èâr
, 0);

782 i‡(
pf
->
f⁄åŸ©i⁄
)

783 
	`GdSëF⁄tRŸ©i⁄
((
PMWFONT
Ë
≤ewf
, 
pf
->
f⁄åŸ©i⁄
);

785  (
PMWFONT
Ë
≤ewf
;

786 
	}
}

796 
	$‰ìty≥2_£tf⁄tsize
(
PMWFONT
 
pf⁄t
, 
MWCOORD
 
f⁄tsize
)

798 
PMWFREETYPE2FONT
 
pf
 = (PMWFREETYPE2FONTË
pf⁄t
;

799 
MWCOORD
 
pixñ_height
;

800 
MWCOORD
 
pixñ_width
;

802 
	`as£π
(
pf
);

804 
pf
->
f⁄tsize
 = fontsize;

807 i‡(!
f⁄tsize
)

811 
pixñ_height
 = 
f⁄tsize
;

812 
pixñ_width
 = 
f⁄tsize
;

814 #i‡
HAVE_FREETYPE_2_CACHE


815 
pf
->
imagedesc
.
f⁄t
.
pix_width
 = 
pixñ_width
;

816 
pf
->
imagedesc
.
f⁄t
.
pix_height
 = 
pixñ_height
;

819 
	`FT_Së_Pixñ_Sizes
(
pf
->
Á˚
, 
pixñ_width
, 
pixñ_height
);

821 
	}
}

831 
	$‰ìty≥2_£tf⁄åŸ©i⁄
(
PMWFONT
 
pf⁄t
, 
ã¡hdegªes
)

833 
PMWFREETYPE2FONT
 
pf
 = (PMWFREETYPE2FONTË
pf⁄t
;

835 
	`as£π
(
pf
);

838 i‡((
ã¡hdegªes
 < 0) || (tenthdegrees >= 3600)) {

839 
ã¡hdegªes
 =Åenthdegrees % 3600;

840 i‡(
ã¡hdegªes
 < 0) {

841 
ã¡hdegªes
 += 3600;

845 
pf
->
f⁄åŸ©i⁄
 = 
ã¡hdegªes
;

847 i‡(
pf
->
f⁄åŸ©i⁄
 == 0) {

849 
pf
->
m©rix
.
yy
 = (
FT_Fixed
) (1 << 16);

850 
pf
->
m©rix
.
xx
 = (
FT_Fixed
) (1 << 16);

851 
pf
->
m©rix
.
yx
 = (
FT_Fixed
) 0;

852 
pf
->
m©rix
.
xy
 = (
FT_Fixed
) 0;

854 
FT_AngÀ
 
™gÀ
 = (
ã¡hdegªes
 << 16) / 10;

855 
FT_Ve˘‹
 
söcosvec
;

856 
	`FT_Ve˘‹_Unô
(&
söcosvec
, 
™gÀ
);

857 
pf
->
m©rix
.
yy
 = 
söcosvec
.
y
;

858 
pf
->
m©rix
.
xx
 = 
söcosvec
.
y
;

859 
pf
->
m©rix
.
yx
 = 
söcosvec
.
x
;

860 
pf
->
m©rix
.
xy
 = -
söcosvec
.
x
;

862 
	}
}

874 
	$‰ìty≥2_£tf⁄èâr
(
PMWFONT
 
pf⁄t
, 
£tÊags
, 
˛rÊags
)

876 #i‡
HAVE_FREETYPE_2_CACHE


877 
PMWFREETYPE2FONT
 
pf
 = (PMWFREETYPE2FONTË
pf⁄t
;

879 
	`as£π
(
pf
);

881 #i‡
	`HAVE_FREETYPE_VERSION_AFTER_OR_EQUAL
(2,1,3)

882 
pf
->
imagedesc
.
Êags
 = 
FT_LOAD_DEFAULT
;

883 i‡(!(
pf
->
f⁄èâr
 & 
MWTF_ANTIALIAS
))

885 
pf
->
imagedesc
.
Êags
 |(
FT_LOAD_MONOCHROME
 | 
FT_LOAD_TARGET_MONO
);

888 
pf
->
imagedesc
.
ty≥
 = (’f->
f⁄èâr
 & 
MWTF_ANTIALIAS
)

889 ? 
·c_image_gøys
 : 
·c_image_m⁄o
);

893 
	`as£π
(
pf⁄t
);

895 
	}
}

898 
	#ROUND_26_6_TO_INT
(
vÆuë‹ound
Ë(((vÆuë‹oundË+ 63Ë>> 6)

	)

917 
FT_Eº‹


918 
	$‰ìty≥2_gë_glyph_size
(
PMWFREETYPE2FONT
 
pf
,

919 
FT_Fa˚
 
Á˚
,

920 
glyph_ödex
,

921 *
∑dv™˚
,

922 *
∑s˚¡
,

923 *
pdes˚¡
)

925 
FT_Eº‹
 
îr‹
;

927 
	`as£π
 (
pf
);

928 
	`as£π
 (
Á˚
);

930 #i‡
HAVE_FREETYPE_2_CACHE


931 i‡(
	`CAN_USE_FT2_CACHE
(
pf
))

933 
FTC_SBô
 
sbô
;

935 
îr‹
 = 
	`FTC_SBôCache_Lookup
(
‰ìty≥2_ˇche_sbô
,

936 &(
pf
->
imagedesc
),

937 
glyph_ödex
, &
sbô
, 
NULL
);

938 i‡(
îr‹
)

939  
îr‹
;

943 i‡(
∑dv™˚
)

944 *
∑dv™˚
 = 
sbô
->
xadv™˚
;

945 i‡(
∑s˚¡
)

946 *
∑s˚¡
 = 
sbô
->
t›
;

947 i‡(
pdes˚¡
)

948 *
pdes˚¡
 = 
sbô
->
height
 - sbô->
t›
;

954 
îr‹
 = 
	`FT_Lﬂd_Glyph
(
Á˚
, 
glyph_ödex
, 
FT_LOAD_DEFAULT
);

955 i‡(
îr‹
)

956  
îr‹
;

958 i‡(
∑dv™˚
)

959 *
∑dv™˚
 = 
	`ROUND_26_6_TO_INT
(
Á˚
->
glyph
->
adv™˚
.
x
);

960 i‡(
∑s˚¡
 || 
pdes˚¡
)

962 
FT_Glyph
 
glyph
;

963 
FT_BBox
 
bbox
;

965 
îr‹
 = 
	`FT_Gë_Glyph
(
Á˚
->
glyph
, &glyph);

966 i‡(
îr‹
)

967  
îr‹
;

969 
	`FT_Glyph_Gë_CBox
(
glyph
, 
·_glyph_bbox_pixñs
, &
bbox
);

971 
	`FT_D⁄e_Glyph
(
glyph
);

973 i‡(
∑s˚¡
)

974 *
∑s˚¡
 = 
bbox
.
yMax
;

975 i‡(
pdes˚¡
)

976 *
pdes˚¡
 = -
bbox
.
yMö
;

981 
	}
}

1001 
FT_Eº‹


1002 
	$‰ìty≥2_gë_ch¨_size
(
PMWFREETYPE2FONT
 
pf
,

1003 
FT_Fa˚
 
Á˚
,

1004 
ch
,

1005 *
∑dv™˚
,

1006 *
∑s˚¡
,

1007 *
pdes˚¡
)

1009 
glyph
 = 
	`LOOKUP_CHAR
(
pf
, 
Á˚
, 
ch
);

1010  
	`‰ìty≥2_gë_glyph_size
(
pf
, 
Á˚
, 
glyph
, 
∑dv™˚
, 
∑s˚¡
, 
pdes˚¡
);

1011 
	}
}

1021 
MWBOOL


1022 
	$‰ìty≥2_gëf⁄töfo
(
PMWFONT
 
pf⁄t
, 
PMWFONTINFO
 
pf⁄töfo
)

1024 
PMWFREETYPE2FONT
 
pf
 = (PMWFREETYPE2FONTË
pf⁄t
;

1025 
FT_Fa˚
 
Á˚
;

1026 
FT_Size
 
size
;

1027 
FT_BBox
 *
bbox
;

1028 
FT_Size_Mërics
 *
mërics
;

1029 
ch
;

1030 
Àadög
;

1031 #i‡
HAVE_FREETYPE_2_CACHE


1032 
FT_Eº‹
 
îr‹
;

1034 #i‡
MW_FEATURE_DO_NOT_TRUST_FONT_ASCENT_AND_DESCENT


1035 
f⁄t_as˚¡
;

1036 
f⁄t_des˚¡
;

1039 
	`as£π
(
pf
);

1040 
	`as£π
(
pf⁄töfo
);

1042 #i‡
HAVE_FREETYPE_2_CACHE


1043 
îr‹
 = 
	`FTC_M™agî_Lookup_Size
(
‰ìty≥2_ˇche_m™agî
,

1044 &(
pf
->
imagedesc
.
f⁄t
), &
Á˚
, &
size
);

1045 i‡(
îr‹
) {

1046 
	`EPRINTF
("Fªëy≥ 2Éº‹ 0x%x gëtög f⁄àöfo.\n", 
îr‹
);

1047  
FALSE
;

1050 
Á˚
 = 
pf
->face;

1051 
size
 = 
Á˚
->size;

1054 
bbox
 = &(
Á˚
->bbox);

1055 
mërics
 = &(
size
->metrics);

1057 i‡(!
	`FT_IS_SCALABLE
(
Á˚
)) {

1059  
FALSE
;

1063 
pf⁄töfo
->
maxwidth
 = 
	`ROUND_26_6_TO_INT
(
mërics
->
max_adv™˚
);

1065 
pf⁄töfo
->
maxas˚¡
 =

1066 
	`ROUND_26_6_TO_INT
(
	`FT_MulFix
(
bbox
->
yMax
, 
mërics
->
y_sˇÀ
));

1067 
pf⁄töfo
->
maxdes˚¡
 =

1068 
	`ROUND_26_6_TO_INT
(
	`FT_MulFix
(-
bbox
->
yMö
, 
mërics
->
y_sˇÀ
));

1070 
pf⁄töfo
->
fixed
 =

1071 ((
Á˚
->
Á˚_Êags
 & 
FT_FACE_FLAG_FIXED_WIDTH
) != 0);

1073 
pf⁄töfo
->
ba£löe
 = 
	`ROUND_26_6_TO_INT
(
mërics
->
as˚ndî
);

1074 
pf⁄töfo
->
des˚¡
 = 
	`ROUND_26_6_TO_INT
(
	`abs
(
mërics
->
des˚ndî
));

1075 
pf⁄töfo
->
height
 =Öf⁄töfo->
ba£löe
 +Öf⁄töfo->
des˚¡
;

1076 
Àadög
 = 
	`ROUND_26_6_TO_INT
(
mërics
->
height
 - (mërics->
as˚ndî
 + 
	`abs
(mërics->
des˚ndî
)));

1077 
pf⁄töfo
->
löe•acög
 =Öf⁄töfo->
height
 + 
Àadög
;

1092 
pf⁄töfo
->
fú°ch¨
 = 0;

1093 
pf⁄töfo
->
œ°ch¨
 = 0xFFFFU;

1095 
ch
 = 0; ch < 256; ch++) {

1096 
adv™˚
;

1097 i‡(
	`‰ìty≥2_gë_ch¨_size
(
pf
, 
Á˚
, 
ch
, &
adv™˚
, 
NULL
, NULL))

1100 
pf⁄töfo
->
widths
[
ch
] =Öf⁄töfo->
maxwidth
;

1105 
pf⁄töfo
->
widths
[
ch
] = 
adv™˚
;

1110  
TRUE
;

1111 
	}
}

1126 
	$‰ìty≥2_døwãxt
(
PMWFONT
 
pf⁄t
, 
PSD
 
psd
, 
MWCOORD
 
ax
, MWCOORD 
ay
,

1127 c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
)

1129 
PMWFREETYPE2FONT
 
pf
 = (PMWFREETYPE2FONTË
pf⁄t
;

1130 
FT_Fa˚
 
Á˚
;

1131 
FT_Size
 
size
;

1132 c⁄° *
°r
 = 
ãxt
;

1133 
FT_Ve˘‹
 
pos
;

1134 
i
;

1135 
FT_Glyph
 
glyph
;

1136 
FT_Eº‹
 
îr‹
;

1137 
FT_Ve˘‹
 
kînög_dñè
;

1138 
curch¨
;

1139 
u£_kînög
;

1140 
œ°_glyph_code
 = 0;

1141 
drivî_gc_t
 
blô_ö°ru˘i⁄s
;

1142 
blô_›
;

1144 
	`as£π
(
pf
);

1145 
	`as£π
(
psd
);

1146 
	`as£π
(
ãxt
);

1150 #i‡
HAVE_FREETYPE_2_CACHE


1151 
îr‹
 = 
	`FTC_M™agî_Lookup_Size
(
‰ìty≥2_ˇche_m™agî
,

1152 &(
pf
->
imagedesc
.
f⁄t
), &
Á˚
, &
size
);

1153 i‡(
îr‹
) {

1154 
	`EPRINTF
("Freetype 2Érror 0x%x getting font for drawtext.\n",

1155 
îr‹
);

1159 
Á˚
 = 
pf
->face;

1160 
size
 = 
Á˚
->size;

1163 
u£_kînög
 = ((
pf
->
f⁄èâr
 & 
MWTF_KERNING
Ë&& 
	`FT_HAS_KERNING
(
Á˚
));

1166 
blô_ö°ru˘i⁄s
.
fg_cﬁ‹
 = 
gr_f‹eground
;

1167 
blô_ö°ru˘i⁄s
.
bg_cﬁ‹
 = 
gr_background
;

1168 
blô_ö°ru˘i⁄s
.
gr_u£bg
 = gr_usebg;

1169 
blô_ö°ru˘i⁄s
.
§cx
 = 0;

1170 
blô_ö°ru˘i⁄s
.
§cy
 = 0;

1171 
blô_ö°ru˘i⁄s
.
d°_löñí
 = 0;

1173 i‡(
pf
->
f⁄èâr
 & 
MWTF_ANTIALIAS
) {

1174 
blô_›
 = 
PSDOP_ALPHACOL
;

1176 
blô_›
 = 
PSDOP_BITMAP_BYTES_MSB_FIRST
;

1183 i‡(
Êags
 & 
MWTF_BOTTOM
) {

1184 
pos
.
y
 = (
	`abs
(
size
->
mërics
.
des˚ndî
) + 63) & ~63;

1185 } i‡(
Êags
 & 
MWTF_TOP
) {

1186 
pos
.
y
 = -(
size
->
mërics
.
as˚ndî
 + 63) & ~63;

1188 
pos
.
y
 = 0;

1192 i‡((
pf
->
f⁄åŸ©i⁄
 != 0)

1193 #i‡
HAVE_FREETYPE_2_CACHE


1194 || (!
	`CAN_USE_FT2_CACHE
(
pf
))

1199 
FT_Bôm≠Glyph
 
bôm≠glyph
;

1200 
FT_Bôm≠
 *
bôm≠
;

1201 
FT_Rídî_Mode
 
ªndî_mode
 =

1202 (
pf
->

1203 
f⁄èâr
 & 
MWTF_ANTIALIAS
Ë? 
·_ªndî_mode_n‹mÆ
 :

1204 
·_ªndî_mode_m⁄o
;

1207 
pos
.
x
 = 0;

1208 
i
 = 0; i < 
cc
; i++) {

1209 
curch¨
 = 
	`LOOKUP_CHAR
(
pf
, 
Á˚
, 
°r
[
i
]);

1211 i‡(
u£_kînög
 && 
œ°_glyph_code
 && 
curch¨
) {

1212 
	`FT_Gë_Kînög
(
Á˚
, 
œ°_glyph_code
, 
curch¨
,

1213 
·_kînög_deÁu…
,

1214 &
kînög_dñè
);

1218 
pos
.
x
 +
kînög_dñè
.x & (~63);

1220 
œ°_glyph_code
 = 
curch¨
;

1226 
îr‹
 = 
	`FT_Lﬂd_Glyph
(
Á˚
, 
curch¨
, 
FT_LOAD_DEFAULT
);

1227 i‡(
îr‹
)

1230 
îr‹
 = 
	`FT_Gë_Glyph
(
Á˚
->
glyph
, &glyph);

1231 i‡(
îr‹
)

1235 
	`FT_Glyph_Tønsf‹m
(
glyph
, 0, &
pos
);

1239 
pos
.
x
 +(
glyph
->
adv™˚
.x >> 10) & (~63);

1241 i‡(
pf
->
f⁄åŸ©i⁄
) {

1243 
	`FT_Glyph_Tønsf‹m
(
glyph
, &
pf
->
m©rix
, 0);

1247 
îr‹
 = 
	`FT_Glyph_To_Bôm≠
(&
glyph
, 
ªndî_mode
, 0,

1249 i‡(!
îr‹
) {

1250 
bôm≠glyph
 = (
FT_Bôm≠Glyph
Ë
glyph
;

1251 
bôm≠
 = &(
bôm≠glyph
->bitmap);

1253 
blô_ö°ru˘i⁄s
.
d°x
 =

1254 
ax
 + 
bôm≠glyph
->
À·
;

1255 
blô_ö°ru˘i⁄s
.
d°y
 =

1256 
ay
 - 
bôm≠glyph
->
t›
;

1257 
blô_ö°ru˘i⁄s
.
d°w
 = 
bôm≠
->
width
;

1258 
blô_ö°ru˘i⁄s
.
d°h
 = 
bôm≠
->
rows
;

1259 
blô_ö°ru˘i⁄s
.
§c_löñí
 = 
bôm≠
->
pôch
;

1260 
blô_ö°ru˘i⁄s
.
pixñs
 = 
bôm≠
->
buf„r
;

1261 
blô_ö°ru˘i⁄s
.
misc
 = 
bôm≠
->
buf„r
;

1266 i‡((
blô_ö°ru˘i⁄s
.
d°w
 > 0)

1267 && (
blô_ö°ru˘i⁄s
.
d°h
 > 0)) {

1268 
	`GdDøwAªaI¡î«l
(
psd
, &
blô_ö°ru˘i⁄s
, 
blô_›
);

1271 
	`FT_D⁄e_Glyph
(
glyph
);

1277 #i‡
HAVE_FREETYPE_2_CACHE


1278 
FTC_SBô
 
sbô
;

1280 
FT_Bôm≠
 *
bôm≠
;

1283 
ay
 +(
pos
.
y
 >> 6);

1285 
i
 = 0; i < 
cc
; i++) {

1286 
curch¨
 = 
	`LOOKUP_CHAR
(
pf
, 
Á˚
, 
°r
[
i
]);

1288 i‡(
u£_kînög
 && 
œ°_glyph_code
 && 
curch¨
) {

1289 
	`FT_Gë_Kînög
(
Á˚
, 
œ°_glyph_code
, 
curch¨
,

1290 
·_kînög_deÁu…
,

1291 &
kînög_dñè
);

1293 
ax
 +(
kînög_dñè
.
x
 >> 6);

1295 
œ°_glyph_code
 = 
curch¨
;

1297 #i‡
HAVE_FREETYPE_2_CACHE


1298 
îr‹
 = 
	`FTC_SBôCache_Lookup
(
‰ìty≥2_ˇche_sbô
,

1299 &(
pf
->
imagedesc
),

1300 
curch¨
, &
sbô
, 
NULL
);

1301 i‡(
îr‹
)

1304 
blô_ö°ru˘i⁄s
.
d°x
 = 
ax
 + 
sbô
->
À·
;

1305 
blô_ö°ru˘i⁄s
.
d°y
 = 
ay
 - 
sbô
->
t›
;

1306 
blô_ö°ru˘i⁄s
.
d°w
 = 
sbô
->
width
;

1307 
blô_ö°ru˘i⁄s
.
d°h
 = 
sbô
->
height
;

1308 
blô_ö°ru˘i⁄s
.
§c_löñí
 = 
sbô
->
pôch
;

1309 
blô_ö°ru˘i⁄s
.
pixñs
 = 
sbô
->
buf„r
;

1310 
blô_ö°ru˘i⁄s
.
misc
 = 
sbô
->
buf„r
;

1312 
ax
 +
sbô
->
xadv™˚
;

1314 
îr‹
 = 
	`FT_Lﬂd_Glyph
(
Á˚
, 
curch¨
,

1315 (
pf
->
f⁄èâr
 & 
MWTF_ANTIALIAS
)

1316 ? (
FT_LOAD_RENDER
 |

1317 
FT_LOAD_MONOCHROME
) :

1318 
FT_LOAD_RENDER
);

1319 i‡(
îr‹
)

1322 
bôm≠
 = &(
Á˚
->
glyph
->bitmap);

1324 
blô_ö°ru˘i⁄s
.
d°x
 =

1325 
ax
 + 
Á˚
->
glyph
->
bôm≠_À·
;

1326 
blô_ö°ru˘i⁄s
.
d°y
 = 
ay
 - 
Á˚
->
glyph
->
bôm≠_t›
;

1327 
blô_ö°ru˘i⁄s
.
d°w
 = 
bôm≠
->
width
;

1328 
blô_ö°ru˘i⁄s
.
d°h
 = 
bôm≠
->
rows
;

1329 
blô_ö°ru˘i⁄s
.
§c_löñí
 = 
bôm≠
->
pôch
;

1330 
blô_ö°ru˘i⁄s
.
pixñs
 = 
bôm≠
->
buf„r
;

1331 
blô_ö°ru˘i⁄s
.
misc
 = 
bôm≠
->
buf„r
;

1337 
ax
 +(
Á˚
->
glyph
->
adv™˚
.
x
 >> 6);

1340 i‡((
blô_ö°ru˘i⁄s
.
d°w
 > 0)

1341 && (
blô_ö°ru˘i⁄s
.
d°h
 > 0)) {

1342 
	`GdDøwAªaI¡î«l
(
psd
, &
blô_ö°ru˘i⁄s
, 
blô_›
);

1349 
	`GdFixCurs‹
(
psd
);

1354 
	}
}

1370 
	$‰ìty≥2_gëãxtsize_rŸ©ed
(
PMWFREETYPE2FONT
 
pf
,

1371 c⁄° *
ãxt
, 
cc
,

1372 
MWCOORD
 * 
pwidth
, MWCOORD * 
pheight
,

1373 
MWCOORD
 * 
pba£
)

1375 
FT_Fa˚
 
Á˚
;

1376 
FT_Size
 
size
;

1377 c⁄° *
°r
 = 
ãxt
;

1378 
FT_Ve˘‹
 
pos
;

1379 
i
;

1380 
FT_Glyph
 
glyph
;

1381 
FT_Eº‹
 
îr‹
;

1382 
FT_Ve˘‹
 
kînög_dñè
;

1383 
curch¨
;

1385 
u£_kînög
;

1386 
œ°_glyph_code
 = 0;

1388 
FT_BBox
 
bbox
;

1389 
FT_BBox
 
glyph_bbox
;

1391 #i‡
HAVE_FREETYPE_2_CACHE


1392 
îr‹
 = 
	`FTC_M™agî_Lookup_Size
(
‰ìty≥2_ˇche_m™agî
,

1393 &(
pf
->
imagedesc
.
f⁄t
), &
Á˚
, &
size
);

1394 i‡(
îr‹
) {

1395 
	`EPRINTF
("Fªëy≥ 2Éº‹ 0x%x gëtög f⁄àöfo.\n", 
îr‹
);

1396 *
pwidth
 = 0;

1397 *
pheight
 = 0;

1398 *
pba£
 = 0;

1402 
Á˚
 = 
pf
->face;

1403 
size
 = 
Á˚
->size;

1406 
u£_kînög
 = ((
pf
->
f⁄èâr
 & 
MWTF_KERNING
Ë&& 
	`FT_HAS_KERNING
(
Á˚
));

1408 
bbox
.
xMö
 = 0;

1409 
bbox
.
yMö
 = 0;

1410 
bbox
.
xMax
 = 0;

1411 
bbox
.
yMax
 = 0;

1416 
pos
.
x
 = 0;

1417 
pos
.
y
 = 0;

1419 
i
 = 0; i < 
cc
; i++) {

1420 
curch¨
 = 
	`LOOKUP_CHAR
(
pf
, 
Á˚
, 
°r
[
i
]);

1422 i‡(
u£_kînög
 && 
œ°_glyph_code
 && 
curch¨
) {

1423 
	`FT_Gë_Kînög
(
Á˚
, 
œ°_glyph_code
, 
curch¨
,

1424 
·_kînög_deÁu…
, &
kînög_dñè
);

1426 
pos
.
x
 +
kînög_dñè
.x & (~63);

1428 
œ°_glyph_code
 = 
curch¨
;

1433 
îr‹
 = 
	`FT_Lﬂd_Glyph
(
Á˚
, 
curch¨
, 
FT_LOAD_DEFAULT
);

1434 i‡(
îr‹
)

1437 
îr‹
 = 
	`FT_Gë_Glyph
(
Á˚
->
glyph
, &glyph);

1438 i‡(
îr‹
)

1445 
	`FT_Glyph_Tønsf‹m
(
glyph
, 0, &
pos
);

1447 
pos
.
x
 +(
glyph
->
adv™˚
.x >> 10) & (~63);

1449 i‡(
pf
->
f⁄åŸ©i⁄
) {

1451 
	`FT_Glyph_Tønsf‹m
(
glyph
, &
pf
->
m©rix
, 0);

1454 i‡(
i
 == 0) {

1455 
	`FT_Glyph_Gë_CBox
(
glyph
, 
·_glyph_bbox_pixñs
, &
bbox
);

1457 
	`FT_Glyph_Gë_CBox
(
glyph
, 
·_glyph_bbox_pixñs
,

1458 &
glyph_bbox
);

1464 i‡(
glyph_bbox
.
xMö
 < 
bbox
.xMin)

1465 
bbox
.
xMö
 = 
glyph_bbox
.xMin;

1467 i‡(
glyph_bbox
.
yMö
 < 
bbox
.yMin)

1468 
bbox
.
yMö
 = 
glyph_bbox
.yMin;

1470 i‡(
glyph_bbox
.
xMax
 > 
bbox
.xMax)

1471 
bbox
.
xMax
 = 
glyph_bbox
.xMax;

1473 i‡(
glyph_bbox
.
yMax
 > 
bbox
.yMax)

1474 
bbox
.
yMax
 = 
glyph_bbox
.yMax;

1476 
	`FT_D⁄e_Glyph
(
glyph
);

1482 *
pwidth
 = 
bbox
.
xMax
 ;

1483 *
pheight
 = (
bbox
.
yMax
 - bbox.
yMö
) ;

1484 *
pba£
 = -(
bbox
.
yMö
 );

1488 
	}
}

1506 
	$‰ìty≥2_gëãxtsize_Á°
(
PMWFREETYPE2FONT
 
pf
,

1507 c⁄° *
ãxt
, 
ch¨_cou¡
,

1508 
MWCOORD
 * 
pwidth
, MWCOORD * 
pheight
,

1509 
MWCOORD
 * 
pba£
)

1511 
FT_Fa˚
 
Á˚
;

1512 
FT_Size
 
size
;

1513 c⁄° *
°r
 = 
ãxt
;

1514 
ch¨_ödex
;

1515 
tŸÆ_adv™˚
;

1516 
max_as˚¡
;

1517 
max_des˚¡
;

1518 
adv™˚
;

1519 
as˚¡
;

1520 
des˚¡
;

1521 
FT_Eº‹
 
îr‹
;

1522 
FT_Ve˘‹
 
kînög_dñè
;

1523 
u£_kînög
;

1524 
cur_glyph_code
;

1525 
œ°_glyph_code
 = 0;

1527 #i‡
HAVE_FREETYPE_2_CACHE


1528 
îr‹
 = 
	`FTC_M™agî_Lookup_Size
(
‰ìty≥2_ˇche_m™agî
,

1529 &(
pf
->
imagedesc
.
f⁄t
), &
Á˚
,

1530 &
size
);

1531 i‡(
îr‹
) {

1532 
	`EPRINTF
("Freetype 2Érror 0x%x getting font info.\n",

1533 
îr‹
);

1534 *
pwidth
 = 0;

1535 *
pheight
 = 0;

1536 *
pba£
 = 0;

1540 
Á˚
 = 
pf
->face;

1541 
size
 = 
Á˚
->size;

1544 
u£_kînög
 = ((
pf
->
f⁄èâr
 & 
MWTF_KERNING
)

1545 && 
	`FT_HAS_KERNING
(
Á˚
));

1551 
tŸÆ_adv™˚
 = 0;

1552 
max_as˚¡
 = 0;

1553 
max_des˚¡
 = 0;

1555 
ch¨_ödex
 = 0; ch¨_ödex < 
ch¨_cou¡
; char_index++) {

1556 
cur_glyph_code
 = 
	`LOOKUP_CHAR
(
pf
, 
Á˚
, 
°r
[
ch¨_ödex
]);

1558 i‡(
u£_kînög
 && 
œ°_glyph_code
 && 
cur_glyph_code
) {

1559 
	`FT_Gë_Kînög
(
Á˚
, 
œ°_glyph_code
, 
cur_glyph_code
,

1560 
·_kînög_deÁu…
,

1561 &
kînög_dñè
);

1565 
tŸÆ_adv™˚
 +(
kînög_dñè
.
x
 >> 6);

1567 
œ°_glyph_code
 = 
cur_glyph_code
;

1569 
îr‹
 = 
	`‰ìty≥2_gë_glyph_size
(
pf
, 
Á˚
, 
cur_glyph_code
, &
adv™˚
, &
as˚¡
, &
des˚¡
);

1570 i‡(
îr‹
)

1573 
tŸÆ_adv™˚
 +
adv™˚
;

1574 i‡(
max_as˚¡
 < 
as˚¡
)

1575 
max_as˚¡
 = 
as˚¡
;

1576 i‡(
max_des˚¡
 < 
des˚¡
)

1577 
max_des˚¡
 = 
des˚¡
;

1580 *
pwidth
 = 
tŸÆ_adv™˚
;

1581 *
pheight
 = 
max_as˚¡
 + 
max_des˚¡
;

1582 *
pba£
 = 
max_as˚¡
;

1586 
	}
}

1601 
	$‰ìty≥2_gëãxtsize
(
PMWFONT
 
pf⁄t
, c⁄° *
ãxt
, 
cc
,
MWTEXTFLAGS
 
Êags
,

1602 
MWCOORD
 * 
pwidth
, MWCOORD * 
pheight
, MWCOORD * 
pba£
)

1604 
PMWFREETYPE2FONT
 
pf
 = (PMWFREETYPE2FONTË
pf⁄t
;

1606 
	`as£π
(
pf
);

1607 
	`as£π
(
ãxt
);

1608 
	`as£π
(
pwidth
);

1609 
	`as£π
(
pheight
);

1610 
	`as£π
(
pba£
);

1612 i‡((
pf
->
f⁄åŸ©i⁄
 != 0)

1613 #i‡
HAVE_FREETYPE_2_CACHE


1614 || (!
	`CAN_USE_FT2_CACHE
(
pf
))

1619 
	`‰ìty≥2_gëãxtsize_rŸ©ed
(
pf
, 
ãxt
, 
cc
, 
pwidth
,

1620 
pheight
, 
pba£
);

1622 
	`‰ìty≥2_gëãxtsize_Á°
(
pf
, 
ãxt
, 
cc
, 
pwidth
,

1623 
pheight
, 
pba£
);

1625 
	}
}

1636 
	$‰ìty≥2_gë_«me
(c⁄° *
fûíame
)

1638 
FT_Fa˚
 
Á˚
;

1639 *
ªsu…
 = 
NULL
;

1641 
	`as£π
(
fûíame
);

1644 i‡(
	`FT_New_Fa˚
(
‰ìty≥2_libøry
, 
fûíame
, 0, &
Á˚
Ë=
FT_Eº_Ok
) {

1645 
ªsu…
 = 
	`mÆloc
(
	`°æí
(
Á˚
->
Ámûy_«me
) + 1);

1646 i‡(
ªsu…
 !
NULL
) {

1647 
	`°r˝y
(
ªsu…
, 
Á˚
->
Ámûy_«me
);

1650 
	`FT_D⁄e_Fa˚
(
Á˚
);

1653  
ªsu…
;

1654 
	}
}

	@engine/font_hzk.c

8 
	~<°dio.h
>

9 
	~<°dlib.h
>

10 
	~<°rög.h
>

11 
	~"devi˚.h
"

12 
	~"devf⁄t.h
"

18 
	#MAX_PATH
 256

	)

20 
	mwidth
;

21 
	mheight
;

22 
	msize
;

23 
	mu£_cou¡
;

24 * 
	mpF⁄t
;

25 
	mfûe
[
MAX_PATH
 + 1];

26 } 
	tHZKFONT
;

28 
	gu£_big5
=1;

29 
HZKFONT
 
	gCF⁄t
[2];

30 
HZKFONT
 
	gAF⁄t
[2];

33 
	gaf⁄t_width
 = 8;

34 
	gcf⁄t_width
 = 16;

35 
	gf⁄t_height
 = 16;

36 *
	gaf⁄t_addªss
;

37 *
	gcf⁄t_addªss
;

39 
	sMWHZKFONT
 {

40 
PMWFONTPROCS
 
	mf⁄çrocs
;

41 
MWCOORD
 
	mf⁄tsize
;

42 
	mf⁄åŸ©i⁄
;

43 
	mf⁄èâr
;

45 
HZKFONT
 
	mCF⁄t
;

46 
HZKFONT
 
	mAF⁄t
;

47 
	maf⁄t_width
;

48 
	mcf⁄t_width
;

49 
	mf⁄t_height
;

50 *
	maf⁄t_addªss
;

51 *
	mcf⁄t_addªss
;

52 } 
	tMWHZKFONT
;

54 
hzk_öô
(
PSD
 
psd
);

55 
PMWHZKFONT
 
hzk_¸óãf⁄t
(c⁄° *
«me
, 
MWCOORD
 
height
,
f⁄èâr
);

57 
MWBOOL
 
hzk_gëf⁄töfo
(
PMWFONT
 
pf⁄t
, 
PMWFONTINFO
 
pf⁄töfo
);

58 
hzk_gëãxtsize
(
PMWFONT
 
pf⁄t
, c⁄° *
ãxt
, 
cc
,

59 
MWTEXTFLAGS
 
Êags
, 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
,

60 
MWCOORD
 *
pba£
);

62 
hzk_gëãxtbôs
(
PMWFONT
 
pf⁄t
, 
ch
, c⁄° 
IMAGEBITS
 **
ªtm≠
,

63 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
, MWCOORD *
pba£
);

65 
hzk_de°royf⁄t
(
PMWFONT
 
pf⁄t
);

66 
hzk_døwãxt
(
PMWFONT
 
pf⁄t
, 
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
,

67 c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
);

70 
MWFONTPROCS
 
	ghzk_¥ocs
 = {

71 
MWTF_ASCII
,

72 
hzk_gëf⁄töfo
,

73 
hzk_gëãxtsize
,

74 
NULL
,

75 
hzk_de°royf⁄t
,

76 
hzk_døwãxt
,

77 
NULL
,

78 
NULL
,

79 
NULL
,

80 
NULL
,

84 
MWPIXELVAL
 
gr_f‹eground
;

85 
MWPIXELVAL
 
gr_background
;

96 
	$UC16_to_GB
(c⁄° *
uc16
, 
cc
, *
ascii
)

98 
FILE
* 
Â
;

99 
buf„r
[256];

100 *
uc16p
;

101 
i
=0,
j
=0, 
k
;

102 *
fûebuf„r
;

103 *
uc16µ
,*
èbÀ
;

104 
uc16px
;

105 
Àngth
=31504;

107 i‡(
u£_big5
)

108 
Àngth
=54840;

110 
uc16p
=(*Ë
uc16
;

111 
uc16µ
=(*Ë
uc16
;

113 
	`°r˝y
(
buf„r
,
HZK_FONT_DIR
);

114 i‡(
u£_big5
)

115 
	`°rˇt
(
buf„r
,"/BG2UBG.KU");

117 
	`°rˇt
(
buf„r
,"/UGB2GB.KU");

118 if(!(
Â
 = 
	`f›í
(
buf„r
, "rb")))

120 
	`¥ötf
 ("Eº‹.\nThê%†fûêˇ¿nŸ bêfound!\n",
buf„r
);

124 
fûebuf„r
(*)
	`mÆloc
 ( 
Àngth
);

126 if(
	`‰ód
(
fûebuf„r
, (),
Àngth
, 
Â
) <Üength) {

127 
	`¥ötf
 ("Error inÑeading ugb2gb.ku file!\n");

128 
	`f˛o£
(
Â
);

131 
	`f˛o£
(
Â
);

133 i‡(
u£_big5
)

135 
èbÀ
=(*)
fûebuf„r
;

138 if(
j
>=
cc
)

140 
ascii
[
i
]=0;

143 
uc16px
=*
uc16µ
;

144 if((
uc16px
)<=0x00ff)

146 
ascii
[
i
]=()(*
uc16µ
);

147 
i
++;

151 
ascii
[
i
]=0xa1;áscii[i+1]=0x40;

152 
k
=0; k<13710; k++)

154 i‡(*(
èbÀ
+(
k
*2+1))==(
uc16px
))

156 
ascii
[
i
]=()((*(
èbÀ
+(
k
*2)) & 0xff00) >> 8);

157 
ascii
[
i
+1]=()(*(
èbÀ
+(
k
*2)) & 0x00ff);

161 
i
+=2;

163 
uc16µ
++; 
j
++;

170 if(
j
>=
cc
)

172 
ascii
[
i
]=0;

175 if((*((
uc16p
)+
j
)==0)&&(*((uc16p)+j+1)==0))

177 
ascii
[
i
]=0;

182 if(*((
uc16p
)+
j
+1)==0)

184 
ascii
[
i
]=*((
uc16p
)+
j
);

185 
i
++;

186 
j
+=2;

192 
p1
=0,
p2
=
Àngth
-4,
p
;

193 
c1
,
c2
,
c
,
d
;

194 
c1
=(()
fûebuf„r
[
p1
])*0x100+(filebuffer[p1+1]);

195 
c2
=(()
fûebuf„r
[
p2
])*0x100+(filebuffer[p2+1]);

196 
d
=(()*((
uc16p
)+
j
))*0x100+*((uc16p)+j+1);

197 if(
c1
==
d
)

199 
ascii
[
i
]=
fûebuf„r
[
p1
+2];

200 
ascii
[
i
+1]=
fûebuf„r
[
p1
+3];

201 
födô
;

203 if(
c2
==
d
)

205 
ascii
[
i
]=
fûebuf„r
[
p2
+2];

206 
ascii
[
i
+1]=
fûebuf„r
[
p2
+3];

207 
födô
;

211 
p
=(((
p2
-
p1
)/2+p1)>>2)<<2;

212 
c
=(()
fûebuf„r
[
p
])*0x100+(filebuffer[p+1]);

213 if(
d
==
c
)

215 
ascii
[
i
]=
fûebuf„r
[
p
+2];

216 
ascii
[
i
+1]=
fûebuf„r
[
p
+3];

219 if(
p2
<=
p1
+4)

221 
ascii
[
i
]='.';

222 
ascii
[
i
+1]='.';

225 if(
d
<
c
)

227 
p2
=
p
;

228 
c2
=
c
;

232 
p1
=
p
;

233 
c1
=
c
;

237 
födô
:

238 
i
+=2;

239 
j
+=2;

244 
	`‰ì
(
fûebuf„r
);

246  
i
;

247 
	}
}

251 
	$hzk_id
–
PMWHZKFONT
 
pf
 )

253 
pf
->
f⁄t_height
)

260 
	}
}

263 
MWBOOL
 
	$GëCF⁄tInfo
–
PMWHZKFONT
 
pf
 )

265 
ch¨£t
;

267 i‡(
u£_big5
)

268 
ch¨£t
=(13094+408);

270 
ch¨£t
=8178;

272 
CF⁄t
[
	`hzk_id
(
pf
)].
width
 =Öf->
cf⁄t_width
;

273 
pf
->
CF⁄t
.
width
 =Öf->
cf⁄t_width
;

275 
CF⁄t
[
	`hzk_id
(
pf
)].
height
 =Öf->
f⁄t_height
;

276 
pf
->
CF⁄t
.
height
 =Öf->
f⁄t_height
;

278 
CF⁄t
[
	`hzk_id
(
pf
)].
size
 = (’f->CF⁄t.
width
 + 7) / 8) *

279 
pf
->
CF⁄t
.
height
 * 
ch¨£t
;

280 
pf
->
CF⁄t
.
size
 = (’f->CF⁄t.
width
 + 7Ë/ 8Ë*Öf->CF⁄t.
height
 * 
ch¨£t
;

282 if(
pf
->
CF⁄t
.
size
 < 
ch¨£t
 * 8)

283  
FALSE
;

285 
	`°r˝y
(
CF⁄t
[
	`hzk_id
(
pf
)].
fûe
,
HZK_FONT_DIR
);

286 
	`°r˝y
(
pf
->
CF⁄t
.
fûe
,
HZK_FONT_DIR
);

288 if(
pf
->
f⁄t_height
==16)

290 
	`°rˇt
(
CF⁄t
[
	`hzk_id
(
pf
)].
fûe
,"/hzk16");

291 
	`°rˇt
(
pf
->
CF⁄t
.
fûe
,"/hzk16");

295 
	`°rˇt
(
CF⁄t
[
	`hzk_id
(
pf
)].
fûe
,"/hzk12");

296 
	`°rˇt
(
pf
->
CF⁄t
.
fûe
,"/hzk12");

299 i‡(
u£_big5
)

301 
CF⁄t
[
	`hzk_id
(
pf
)].
fûe
[
	`°æí
’f->CF⁄t.fûe)-3]+=
u£_big5
;

302 
pf
->
CF⁄t
.
fûe
[
	`°æí
’f->CF⁄t.fûe)-3]+=
u£_big5
;

305  
TRUE
;

306 
	}
}

309 
MWBOOL
 
	$GëAF⁄tInfo
–
PMWHZKFONT
 
pf
 )

311 
AF⁄t
[
	`hzk_id
(
pf
)].
width
 =Öf->
af⁄t_width
;

312 
pf
->
AF⁄t
.
width
 =Öf->
af⁄t_width
;

314 
AF⁄t
[
	`hzk_id
(
pf
)].
height
 =Öf->
f⁄t_height
;

315 
pf
->
AF⁄t
.
height
 =Öf->
f⁄t_height
;

317 
AF⁄t
[
	`hzk_id
(
pf
)].
size
 = (’f->AF⁄t.
width
 + 7) / 8) *

318 
pf
->
AF⁄t
.
height
 * 255;

319 
pf
->
AF⁄t
.
size
 = (’f->AF⁄t.
width
 + 7Ë/ 8Ë*Öf->AF⁄t.
height
 * 255;

321 if(
pf
->
AF⁄t
.
size
 < 255 * 8)

322  
FALSE
;

324 
	`°r˝y
(
AF⁄t
[
	`hzk_id
(
pf
)].
fûe
,
HZK_FONT_DIR
);

325 
	`°r˝y
(
pf
->
AF⁄t
.
fûe
,
HZK_FONT_DIR
);

327 if(
pf
->
f⁄t_height
==16)

329 
	`°rˇt
(
AF⁄t
[
	`hzk_id
(
pf
)].
fûe
,"/asc16");

330 
	`°rˇt
(
pf
->
AF⁄t
.
fûe
,"/asc16");

334 
	`°rˇt
(
AF⁄t
[
	`hzk_id
(
pf
)].
fûe
,"/asc12");

335 
	`°rˇt
(
pf
->
AF⁄t
.
fûe
,"/asc12");

337  
TRUE
;

338 
	}
}

341 
MWBOOL
 
	$LﬂdF⁄t
–
PMWHZKFONT
 
pf
 )

343 
FILE
* 
Â
;

345 if(!
	`GëCF⁄tInfo
(
pf
))

347 
	`¥ötf
 ("Get Chinese HZK font info failure!\n");

348  
FALSE
;

350 if(
CF⁄t
[
	`hzk_id
(
pf
)].
pF⁄t
 =
NULL
)

355 if–!(
CF⁄t
[
	`hzk_id
(
pf
)].
pF⁄t
 = (*)
	`mÆloc
’f->CF⁄t.
size
)) )

357 
	`¥ötf
 ("Allocate memory for Chinese HZK font failure.\n");

358  
FALSE
;

362 
	`¥ötf
 ("hzk_¸óãf⁄t:Üﬂdög '%s'\n", 
pf
->
CF⁄t
.
fûe
);

363 if(!(
Â
 = 
	`f›í
(
CF⁄t
[
	`hzk_id
(
pf
)].
fûe
, "rb")))

365 
	`¥ötf
 ("Error.\nThe Chinese HZK font file canÇot be found!\n");

366  
FALSE
;

368 if(
	`‰ód
(
CF⁄t
[
	`hzk_id
(
pf
)].
pF⁄t
, (),Öf->CF⁄t.
size
, 
Â
) <Öf->CFont.size)

370 
	`¥ötf
 ("Error inÑeading Chinese HZK font file!\n");

371 
	`f˛o£
(
Â
);

372  
FALSE
;

375 
	`f˛o£
(
Â
);

377 
CF⁄t
[
	`hzk_id
(
pf
)].
u£_cou¡
=0;

380 
cf⁄t_addªss
 = 
CF⁄t
[
	`hzk_id
(
pf
)].
pF⁄t
;

381 
pf
->
cf⁄t_addªss
 = 
CF⁄t
[
	`hzk_id
’f)].
pF⁄t
;

382 
pf
->
CF⁄t
.
pF⁄t
 = CF⁄t[
	`hzk_id
(pf)].pFont;

384 
CF⁄t
[
	`hzk_id
(
pf
)].
u£_cou¡
++;

386 if(!
	`GëAF⁄tInfo
(
pf
))

388 
	`¥ötf
 ("Get ASCII HZK font info failure!\n");

389  
FALSE
;

391 if(
AF⁄t
[
	`hzk_id
(
pf
)].
pF⁄t
 =
NULL
)

396 if–!(
AF⁄t
[
	`hzk_id
(
pf
)].
pF⁄t
 = (*)
	`mÆloc
’f->AF⁄t.
size
)) )

398 
	`¥ötf
 ("Allocate memory for ASCII HZK font failure.\n");

399 
	`‰ì
(
CF⁄t
[
	`hzk_id
(
pf
)].
pF⁄t
);

400 
CF⁄t
[
	`hzk_id
(
pf
)].
pF⁄t
 = 
NULL
;

401  
FALSE
;

405 
	`¥ötf
 ("hzk_¸óãf⁄t:Üﬂdög '%s'\n", 
pf
->
AF⁄t
.
fûe
 );

406 if(!(
Â
 = 
	`f›í
(
AF⁄t
[
	`hzk_id
(
pf
)].
fûe
, "rb")))

408 
	`¥ötf
 ("Error.\nThe ASCII HZK font file canÇot be found!\n");

409  
FALSE
;

411 if(
	`‰ód
(
AF⁄t
[
	`hzk_id
(
pf
)].
pF⁄t
, (),Öf->AF⁄t.
size
, 
Â
) <Öf->AFont.size)

413 
	`¥ötf
 ("Error inÑeading ASCII HZK font file!\n");

414 
	`f˛o£
(
Â
);

415  
FALSE
;

418 
	`f˛o£
(
Â
);

420 
AF⁄t
[
	`hzk_id
(
pf
)].
u£_cou¡
=0;

423 
af⁄t_addªss
 = 
AF⁄t
[
	`hzk_id
(
pf
)].
pF⁄t
;

424 
pf
->
af⁄t_addªss
 = 
AF⁄t
[
	`hzk_id
’f)].
pF⁄t
;

425 
pf
->
AF⁄t
.
pF⁄t
 = AF⁄t[
	`hzk_id
(pf)].pFont;

427 
AF⁄t
[
	`hzk_id
(
pf
)].
u£_cou¡
++;

429  
TRUE
;

430 
	}
}

433 
	$U∆ﬂdF⁄t
–
PMWHZKFONT
 
pf
 )

435 
CF⁄t
[
	`hzk_id
(
pf
)].
u£_cou¡
--;

436 
AF⁄t
[
	`hzk_id
(
pf
)].
u£_cou¡
--;

438 i‡(!
CF⁄t
[
	`hzk_id
(
pf
)].
u£_cou¡
)

440 
	`‰ì
(
pf
->
CF⁄t
.
pF⁄t
);

441 
	`‰ì
(
pf
->
AF⁄t
.
pF⁄t
);

443 
CF⁄t
[
	`hzk_id
(
pf
)].
pF⁄t
 = 
NULL
;

444 
AF⁄t
[
	`hzk_id
(
pf
)].
pF⁄t
 = 
NULL
;

446 
	}
}

449 
	$hzk_öô
(
PSD
 
psd
)

454 
	}
}

456 
PMWHZKFONT


457 
	$hzk_¸óãf⁄t
(c⁄° *
«me
, 
MWCOORD
 
height
, 
©å
)

459 
PMWHZKFONT
 
pf
;

461 if(
	`°rcmp
(
«me
,"HZKFONT")!=0 && strcmp(name,"HZXFONT")!=0)

462  
FALSE
;

466 
u£_big5
=
«me
[2]-'K';

469 
pf
 = (
PMWHZKFONT
)
	`ˇŒoc
((
MWHZKFONT
), 1);

470 i‡(!
pf
)

471  
NULL
;

472 
pf
->
f⁄çrocs
 = &
hzk_¥ocs
;

474 
pf
->
f⁄tsize
 = 
height
;

475 
pf
->
f⁄åŸ©i⁄
 = 0;

476 
pf
->
f⁄èâr
 = 
©å
;

478 if(
height
==12)

480 
af⁄t_width
 = 6;

481 
cf⁄t_width
 = 12;

482 
f⁄t_height
 = 12;

484 
pf
->
af⁄t_width
 = 6;

485 
pf
->
cf⁄t_width
 = 12;

486 
pf
->
f⁄t_height
 = 12;

490 
af⁄t_width
 = 8;

491 
cf⁄t_width
 = 16;

492 
f⁄t_height
 = 16;

494 
pf
->
af⁄t_width
 = 8;

495 
pf
->
cf⁄t_width
 = 16;

496 
pf
->
f⁄t_height
 = 16;

500 if(!
	`LﬂdF⁄t
(
pf
))

501  
FALSE
;

503  
pf
;

504 
	}
}

506 
	$IsBig5
(
i
)

508 i‡((
i
>=0xa140 && i<=0xa3bf) ||

509 (
i
>=0xa440 && i<=0xc67e) ||

510 (
i
>=0xc6a1 && i<=0xc8d3) ||

511 (
i
>=0xc940 && i<=0xf9fe))

515 
	}
}

521 
	$gë√xtch¨
(* 
s
, * 
cc
)

523 if–
s
[0] == '\0')  0;

525 
cc
[0] = ()(*
s
);

526 
cc
[1] = ()(*(
s
 + 1));

528 i‡(
u£_big5
)

530 if–
	`IsBig5
–(Ë–(
cc
[0] << 8) + cc[1]) ) )

535 if–(()
cc
[0] > 0xa0) &&

536 (()
cc
[1] > 0xa0) )

540 
cc
[1] = '\0';

543 
	}
}

546 
	$ex∑ndcch¨
(
PMWHZKFONT
 
pf
, 
bg
, 
fg
, * 
c
, 
MWPIXELVAL
* 
bôm≠
)

548 
i
=0;

549 
c1
, 
c2
, 
£q
;

550 
x
,
y
;

551 *
f⁄t
;

552 
b
 = 0;

554 
pixñsize
;

555 
pixñsize
=(
MWPIXELVAL
);

557 
c1
 = 
c
[0];

558 
c2
 = 
c
[1];

559 i‡(
u£_big5
)

561 
£q
=0;

563 
c2
-=(c2<127?64:98);

566 i‡(
c1
>=0xa4)

568 
£q
=(((
c1
-164)*157)+
c2
);

569 i‡(
£q
>=5809) seq-=408;

573 i‡(
c1
<=0xa3)

574 
£q
=(((
c1
-161)*157)+
c2
)+13094;

577 
£q
=((
c1
 - 161)*94 + 
c2
 - 161);

579 
f⁄t
 = 
pf
->
cf⁄t_addªss
 + ((
£q
) *

580 (
pf
->
f⁄t_height
 * (’f->
cf⁄t_width
 + 7) / 8)));

582 
y
 = 0; y < 
pf
->
f⁄t_height
; y++)

583 
x
 = 0; x < 
pf
->
cf⁄t_width
; x++)

585 i‡(
x
 % 8 == 0)

586 
b
 = *
f⁄t
++;

588 i‡(
b
 & (128 >> (
x
 % 8)))

589 
bôm≠
[
i
++]=
fg
;

591 
bôm≠
[
i
++]=
bg
;

593 
	}
}

595 
	$ex∑ndch¨
(
PMWHZKFONT
 
pf
, 
bg
, 
fg
, 
c
, 
MWPIXELVAL
* 
bôm≠
)

597 
i
=0;

598 
x
,
y
;

599 *
f⁄t
;

600 
pixñsize
;

601 
b
 = 0;

603 
pixñsize
=(
MWPIXELVAL
);

605 
f⁄t
 = 
pf
->
af⁄t_addªss
 + 
c
 * (pf->
f⁄t_height
 *

606 ((
pf
->
af⁄t_width
 + 7) / 8));

608 
y
 = 0; y < 
pf
->
f⁄t_height
; y++)

609 
x
 = 0; x < 
pf
->
af⁄t_width
; x++)

611 i‡(
x
 % 8 == 0)

612 
b
 = *
f⁄t
++;

613 i‡(
b
 & (128 >> (
x
 % 8)))

614 
bôm≠
[
i
++]=
fg
;

616 
bôm≠
[
i
++]=
bg
;

618 
	}
}

624 
	$hzk_døwãxt
(
PMWFONT
 
pf⁄t
, 
PSD
 
psd
, 
MWCOORD
 
ax
, MWCOORD 
ay
,

625 c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
)

627 
PMWHZKFONT
 
pf
=(PMWHZKFONT)
pf⁄t
;

629 
c
[2];

630 
MWPIXELVAL
 *
bôm≠
;

631 
s1
[3];

632 *
s
,*
sbegö
;

634 
s
=(*)
ãxt
;

636 if(
cc
==1)

638 
s1
[0]=*((*)
ãxt
);

639 
s1
[1]=0x0;

640 
s1
[2]=0x0;

641 
s
=
s1
;

644 
sbegö
=
s
;

645 
bôm≠
 = (
MWPIXELVAL
 *)
	`ALLOCA
(
pf
->
cf⁄t_width
 *Öf->
f⁄t_height
 *

646 (
MWPIXELVAL
));

648  
	`gë√xtch¨
(
s
, 
c
) )

650 if–
c
[1] != '\0')

652 
	`ex∑ndcch¨
(
pf
, 
gr_background
,
gr_f‹eground
,

653 
c
, 
bôm≠
);

656 i‡(
Êags
&
MWTF_TOP
)

657 
	`GdAªa
(
psd
,
ax
, 
ay
, 
pf
->
cf⁄t_width
,

658 
pf
->
f⁄t_height
, 
bôm≠
, 
MWPF_PIXELVAL
);

660 
	`GdAªa
(
psd
,
ax
, 
ay
-
pf
->
f⁄t_height
+2,

661 
pf
->
cf⁄t_width
,Öf->
f⁄t_height
,

662 
bôm≠
, 
MWPF_PIXELVAL
);

664 
s
 += 2;

665 
ax
 +
pf
->
cf⁄t_width
;

669 
	`ex∑ndch¨
(
pf
, 
gr_background
,
gr_f‹eground
,

670 
c
[0], 
bôm≠
);

673 i‡(
Êags
&
MWTF_TOP
)

674 
	`GdAªa
(
psd
,
ax
, 
ay
, 
pf
->
af⁄t_width
,

675 
pf
->
f⁄t_height
, 
bôm≠
, 
MWPF_PIXELVAL
);

677 
	`GdAªa
(
psd
,
ax
, 
ay
-
pf
->
f⁄t_height
+2,

678 
pf
->
af⁄t_width
,Öf->
f⁄t_height
,

679 
bôm≠
, 
MWPF_PIXELVAL
);

681 
s
 += 1;

682 
ax
 +
pf
->
af⁄t_width
;

685 if(
s
>=
sbegö
+
cc
);

688 
	`FREEA
(
bôm≠
);

689 
	}
}

694 
MWBOOL


695 
	$hzk_gëf⁄töfo
(
PMWFONT
 
pf⁄t
, 
PMWFONTINFO
 
pf⁄töfo
)

697 
PMWHZKFONT
 
pf
=(PMWHZKFONT)
pf⁄t
;

699 
i
;

701 
pf⁄töfo
->
height
 = 
pf
->
f⁄t_height
;

702 
pf⁄töfo
->
maxwidth
 = 
pf
->
cf⁄t_width
;

703 
pf⁄töfo
->
ba£löe
 = 
pf
->
f⁄t_height
 - 2;

706 
pf⁄töfo
->
löe•acög
 =Öf⁄töfo->
height
;

707 
pf⁄töfo
->
des˚¡
 =Öf⁄töfo->
height
 -Öf⁄töfo->
ba£löe
;

708 
pf⁄töfo
->
maxas˚¡
 =Öf⁄töfo->
ba£löe
;

709 
pf⁄töfo
->
maxdes˚¡
 =Öf⁄töfo->
des˚¡
;

711 
pf⁄töfo
->
fú°ch¨
 = 0;

712 
pf⁄töfo
->
œ°ch¨
 = 0;

713 
pf⁄töfo
->
fixed
 = 
TRUE
;

715 
i
=0; i<=256; i++)

716 
pf⁄töfo
->
widths
[
i
] = 
pf
->
af⁄t_width
;

718  
TRUE
;

719 
	}
}

722 
	$hzk_gëãxtsize
(
PMWFONT
 
pf⁄t
, c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
,

723 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
, MWCOORD *
pba£
)

725 
PMWHZKFONT
 
pf
=(PMWHZKFONT)
pf⁄t
;

727 
c
[2];

728 *
s
,*
sbegö
;

729 
s1
[3];

731 
ax
=0;

732 
s
=(*)
ãxt
;

733 if(
cc
==0)

735 *
pwidth
 = 0;

736 *
pheight
 = 
pf
->
f⁄t_height
;

737 *
pba£
 = 
pf
->
f⁄t_height
-2;

740 if(
cc
==1)

742 
s1
[0]=*((*)
ãxt
);

743 
s1
[1]=0x0;

744 
s1
[2]=0x0;

745 
s
=
s1
;

747 
sbegö
=
s
;

748  
	`gë√xtch¨
(
s
, 
c
) )

750 if–
c
[1] != '\0')

752 
s
 += 2;

753 
ax
 +
pf
->
cf⁄t_width
;

757 
s
 += 1;

758 
ax
 +
pf
->
af⁄t_width
;

760 if(
s
>=
sbegö
+
cc
) {

768 *
pwidth
 = 
ax
;

769 *
pheight
 = 
pf
->
f⁄t_height
;

770 *
pba£
 = 
pf
->
f⁄t_height
-2;

771 
	}
}

774 
	$hzk_de°royf⁄t
(
PMWFONT
 
pf⁄t
)

776 
PMWHZKFONT
 
pf
=(PMWHZKFONT)
pf⁄t
;

777 
	`U∆ﬂdF⁄t
(
pf
);

778 
	`‰ì
(
pf
);

779 
	}
}

	@engine/font_pcf.c

14 
	~<°dio.h
>

15 
	~<°rög.h
>

16 
	~<î∫o.h
>

17 
	~<°dlib.h
>

18 
	~"sw≠.h
"

19 
	~"devi˚.h
"

20 
	~"devf⁄t.h
"

21 
	~"../drivîs/gíf⁄t.h
"

23 
MWPIXELVAL
 
gr_background
;

24 
MWBOOL
 
gr_u£bg
;

29 #ifde‡
HAVE_PCFGZ_SUPPORT


30 
	~<zlib.h
>

31 
	#FILEP
 
gzFûe


	)

32 
	#FOPEN
(
∑th
, 
mode
Ë
	`gz›í
’©h, mode)

	)

33 
	#FREAD
(
fûe
, 
buf„r
, 
size
Ë
	`gzªad
(fûe, buf„r, size)

	)

34 
	#FSEEK
(
fûe
, 
off£t
, 
whí˚
Ë
	`gz£ek
(fûe, off£t, whí˚)

	)

35 
	#FCLOSE
(
fûe
Ë
	`gz˛o£
(fûe)

	)

37 
	#FILEP
 
FILE
 *

	)

38 
	#FOPEN
(
∑th
, 
mode
Ë
	`f›í
’©h, mode)

	)

39 
	#FREAD
(
fûe
, 
buf„r
, 
size
Ë
	`‰ód
(buf„r, 1, size, fûe)

	)

40 
	#FSEEK
(
fûe
, 
off£t
, 
whí˚
Ë
	`f£ek
(fûe, off£t, whí˚)

	)

41 
	#FCLOSE
(
fûe
Ë
	`f˛o£
(fûe)

	)

45 
pcf_u∆ﬂdf⁄t
(
PMWFONT
 
f⁄t
);

48 
MWFONTPROCS
 
	gpcf_f⁄çrocs
 = {

49 
MWTF_ASCII
,

50 
gí_gëf⁄töfo
,

51 
gí_gëãxtsize
,

52 
gí_gëãxtbôs
,

53 
pcf_u∆ﬂdf⁄t
,

54 
c‹ef⁄t_døwãxt
,

55 
NULL
,

56 
NULL
,

57 
NULL
,

61 
MWFONTPROCS
 
	gpcf_f⁄çrocs16
 = {

62 
MWTF_UC16
,

63 
gí_gëf⁄töfo
,

64 
gí16_gëãxtsize
,

65 
gí_gëãxtbôs
,

66 
pcf_u∆ﬂdf⁄t
,

67 
gí16_døwãxt
,

68 
NULL
,

69 
NULL
,

70 
NULL
,

71 
NULL
,

75 
toc_íåy
 *
	gtoc
;

76 
	gtoc_size
;

79 
	#PCF_FILE_VERSION
 (('p'<<24)|('c'<<16)|('f'<<8)|1)

	)

80 
	#PCF_PROPERTIES
 (1 << 0)

	)

81 
	#PCF_ACCELERATORS
 (1 << 1)

	)

82 
	#PCF_METRICS
 (1 << 2)

	)

83 
	#PCF_BITMAPS
 (1 << 3)

	)

84 
	#PCF_INK_METRICS
 (1 << 4)

	)

85 
	#PCF_BDF_ENCODINGS
 (1 << 5)

	)

86 
	#PCF_SWIDTHS
 (1 << 6)

	)

87 
	#PCF_GLYPH_NAMES
 (1 << 7)

	)

88 
	#PCF_BDF_ACCELERATORS
 (1 << 8)

	)

89 
	#PCF_FORMAT_MASK
 0xFFFFFF00

	)

90 
	#PCF_DEFAULT_FORMAT
 0x00000000

	)

92 
	#PCF_GLYPH_PAD_MASK
 (3<<0)

	)

93 
	#PCF_BYTE_MASK
 (1<<2)

	)

94 
	#PCF_BIT_MASK
 (1<<3)

	)

95 
	#PCF_SCAN_UNIT_MASK
 (3<<4)

	)

96 
	#GLYPHPADOPTIONS
 4

	)

98 
	#PCF_LSB_FIRST
 0

	)

99 
	#PCF_MSB_FIRST
 1

	)

102 
	stoc_íåy
 {

103 
	mty≥
;

104 
	mf‹m©
;

105 
	msize
;

106 
	moff£t
;

109 
	s¥›_íåy
 {

110 
	m«me
;

111 
	mis_°rög
;

112 
	mvÆue
;

115 
	s°rög_èbÀ
 {

116 *
	m«me
;

117 *
	mvÆue
;

120 
	smëric_íåy
 {

121 
	mÀ·Bórög
;

122 
	mrightBórög
;

123 
	mwidth
;

124 
	mas˚¡
;

125 
	mdes˚¡
;

126 
	m©åibuãs
;

129 
	sícodög_íåy
 {

130 
	mmö_byã2
;

131 
	mmax_byã2
;

132 
	mmö_byã1
;

133 
	mmax_byã1
;

134 
	mdeÁu…ch¨
;

135 
	mcou¡
;

136 *
	mm≠
;

140 
	g_ªvî£_byã
[0x100] = {

179 
	$bô_‹dî_övît
(*
buf
, 
nbyãs
)

181 ; --
nbyãs
 >0; 
buf
++)

182 *
buf
 = 
_ªvî£_byã
[*buf];

183 
	}
}

189 
	$two_byã_sw≠
(*
buf
, 
nbyãs
)

191 
c
;

193 ; 
nbyãs
 > 0;Çbyã†-2, 
buf
 += 2) {

194 
c
 = 
buf
[0];

195 
buf
[0] = buf[1];

196 
buf
[1] = 
c
;

198 
	}
}

204 
	$four_byã_sw≠
(*
buf
, 
nbyãs
)

206 
c
;

208 ; 
nbyãs
 > 0;Çbyã†-4, 
buf
 += 4) {

209 
c
 = 
buf
[0];

210 
buf
[0] = buf[3];

211 
buf
[3] = 
c
;

212 
c
 = 
buf
[1];

213 
buf
[1] = buf[2];

214 
buf
[2] = 
c
;

216 
	}
}

220 
	$ªadINT8
(
FILEP
 
fûe
)

222 
b
;

224 
	`FREAD
(
fûe
, &
b
, (b));

225  
b
;

226 
	}
}

230 
	$ªadLSB16
(
FILEP
 
fûe
)

232 
s
;

234 
	`FREAD
(
fûe
, &
s
, (s));

235  
	`wsw≠
(
s
);

236 
	}
}

240 
	$ªadLSB32
(
FILEP
 
fûe
)

242 
n
;

244 
	`FREAD
(
fûe
, &
n
, (n));

245  
	`dwsw≠
(
n
);

246 
	}
}

250 
	$pcf_gë_off£t
(
ôem
)

252 
i
;

254 
i
 = 0; i < 
toc_size
; i++)

255 i‡(
ôem
 =
toc
[
i
].
ty≥
)

256  
toc
[
i
].
off£t
;

258 
	}
}

260 #i‡
LATER


263 
	$pcf_ªad¥›s
(
FILEP
 
fûe
, 
¥›_íåy
 **
¥›
,

264 
°rög_èbÀ
 **
°rögs
)

266 
off£t
;

267 
f‹m©
;

268 
num_¥›s
;

269 
ssize
;

270 
i
;

271 
°rög_èbÀ
 *
s
;

272 
¥›_íåy
 *
p
;

274 *
°rög_buf„r
, *
•os
;

276 i‡((
off£t
 = 
	`pcf_gë_off£t
(
PCF_PROPERTIES
)) == -1)

278 
	`FSEEK
(
fûe
, 
off£t
, 
SEEK_SET
);

280 
f‹m©
 = 
	`ªadLSB32
(
fûe
);

281 
num_¥›s
 = 
	`ªadLSB32
(
fûe
);

283 
p
 = *
¥›
 = (
¥›_íåy
 *Ë
	`mÆloc
(
num_¥›s
 *

284 (
¥›_íåy
));

286 
i
 = 0; i < 
num_¥›s
; i++) {

287 
p
[
i
].
«me
 = 
	`ªadLSB32
(
fûe
);

288 
p
[
i
].
is_°rög
 = 
	`ªadINT8
(
fûe
);

289 
p
[
i
].
vÆue
 = 
	`ªadLSB32
(
fûe
);

293 i‡(
num_¥›s
 & 3)

294 
	`FSEEK
(
fûe
, 4 - (
num_¥›s
 & 3), 
SEEK_CUR
);

298 
ssize
 = 
	`ªadLSB32
(
fûe
);

299 
•os
 = 
°rög_buf„r
 = (*Ë
	`ALLOCA
(
ssize
);

300 
	`FREAD
(
fûe
, 
°rög_buf„r
, 
ssize
);

303 
s
 = *
°rögs
 = (
°rög_èbÀ
 *Ë
	`ALLOCA
(
num_¥›s
 *

304 (
°rög_èbÀ
));

306 
i
 = 0; i < 
num_¥›s
; i++) {

307 
s
[
i
].
«me
 = (*Ë
	`°rdup
(
•os
);

308 
•os
 +
	`°æí
(
s
[
i
].
«me
) + 1;

310 i‡(
p
[
i
].
is_°rög
) {

311 
s
[
i
].
vÆue
 = (*Ë
	`°rdup
(
•os
);

312 
•os
 +
	`°æí
(
s
[
i
].
vÆue
) + 1;

314 
s
[
i
].
vÆue
 = 0;

317 
	`FREEA
(
°rög_buf„r
);

318  
num_¥›s
;

319 
	}
}

324 
	$pcf_ªadbôm≠s
(
FILEP
 
fûe
, **
bôs
, *
bôs_size
,

325 **
off£ts
)

327 
off£t
;

328 
f‹m©
;

329 
num_glyphs
;

330 
∑d
;

331 
i
;

332 
ídün
;

333 *
o
;

334 *
b
;

335 
bmsize
[
GLYPHPADOPTIONS
];

337 i‡((
off£t
 = 
	`pcf_gë_off£t
(
PCF_BITMAPS
)) == -1)

339 
	`FSEEK
(
fûe
, 
off£t
, 
SEEK_SET
);

341 
f‹m©
 = 
	`ªadLSB32
(
fûe
);

342 
ídün
 = (
f‹m©
 & 
PCF_BIT_MASK
)? 
PCF_LSB_FIRST
: 
PCF_MSB_FIRST
;

344 
num_glyphs
 = 
	`ªadLSB32
(
fûe
);

346 
o
 = *
off£ts
 = (*)
	`mÆloc
(
num_glyphs
 * ());

347 
i
=0; i < 
num_glyphs
; ++i)

348 
o
[
i
] = 
	`ªadLSB32
(
fûe
);

350 
i
=0; i < 
GLYPHPADOPTIONS
; ++i)

351 
bmsize
[
i
] = 
	`ªadLSB32
(
fûe
);

353 
∑d
 = 
f‹m©
 & 
PCF_GLYPH_PAD_MASK
;

354 *
bôs_size
 = 
bmsize
[
∑d
]? bmsize[pad] : 1;

357 
b
 = *
bôs
 = (*Ë
	`mÆloc
(*
bôs_size
);

358 
	`FREAD
(
fûe
, 
b
, *
bôs_size
);

361 
	`bô_‹dî_övît
(
b
, *
bôs_size
);

362 #i‡
MW_CPU_BIG_ENDIAN


363 i‡(
ídün
 =
PCF_LSB_FIRST
)

364 
	`two_byã_sw≠
(
b
, *
bôs_size
);

366 i‡(
ídün
 =
PCF_MSB_FIRST
)

367 
	`two_byã_sw≠
(
b
, *
bôs_size
);

369  
num_glyphs
;

370 
	}
}

374 
	$pcf_ªadmërics
(
FILE
 * 
fûe
, 
mëric_íåy
 **
mërics
)

376 
i
, 
size
, 
off£t
;

377 
f‹m©
;

378 
mëric_íåy
 *
m
;

380 i‡((
off£t
 = 
	`pcf_gë_off£t
(
PCF_METRICS
)) == -1)

382 
	`FSEEK
(
fûe
, 
off£t
, 
SEEK_SET
);

384 
f‹m©
 = 
	`ªadLSB32
(
fûe
);

386 i‡((
f‹m©
 & 
PCF_FORMAT_MASK
Ë=
PCF_DEFAULT_FORMAT
) {

387 
size
 = 
	`ªadLSB32
(
fûe
);

389 
m
 = *
mërics
 = (
mëric_íåy
 *Ë
	`mÆloc
(
size
 *

390 (
mëric_íåy
));

392 
i
=0; i < 
size
; i++) {

393 
m
[
i
].
À·Bórög
 = 
	`ªadLSB16
(
fûe
);

394 
m
[
i
].
rightBórög
 = 
	`ªadLSB16
(
fûe
);

395 
m
[
i
].
width
 = 
	`ªadLSB16
(
fûe
);

396 
m
[
i
].
as˚¡
 = 
	`ªadLSB16
(
fûe
);

397 
m
[
i
].
des˚¡
 = 
	`ªadLSB16
(
fûe
);

398 
m
[
i
].
©åibuãs
 = 
	`ªadLSB16
(
fûe
);

401 
size
 = 
	`ªadLSB16
(
fûe
);

403 
m
 = *
mërics
 = (
mëric_íåy
 *Ë
	`mÆloc
(
size
 *

404 (
mëric_íåy
));

406 
i
 = 0; i < 
size
; i++) {

407 
m
[
i
].
À·Bórög
 = 
	`ªadINT8
(
fûe
) - 0x80;

408 
m
[
i
].
rightBórög
 = 
	`ªadINT8
(
fûe
) - 0x80;

409 
m
[
i
].
width
 = 
	`ªadINT8
(
fûe
) - 0x80;

410 
m
[
i
].
as˚¡
 = 
	`ªadINT8
(
fûe
) - 0x80;

411 
m
[
i
].
des˚¡
 = 
	`ªadINT8
(
fûe
) - 0x80;

414  
size
;

415 
	}
}

419 
	$pcf_ªad_ícodög
(
FILE
 * 
fûe
, 
ícodög_íåy
 **
ícodög
)

421 
off£t
, 
n
;

422 
f‹m©
;

423 
ícodög_íåy
 *
e
;

425 i‡((
off£t
 = 
	`pcf_gë_off£t
(
PCF_BDF_ENCODINGS
)) == -1)

427 
	`FSEEK
(
fûe
, 
off£t
, 
SEEK_SET
);

429 
f‹m©
 = 
	`ªadLSB32
(
fûe
);

431 
e
 = *
ícodög
 = (
ícodög_íåy
 *)

432 
	`mÆloc
((
ícodög_íåy
));

433 
e
->
mö_byã2
 = 
	`ªadLSB16
(
fûe
);

434 
e
->
max_byã2
 = 
	`ªadLSB16
(
fûe
);

435 
e
->
mö_byã1
 = 
	`ªadLSB16
(
fûe
);

436 
e
->
max_byã1
 = 
	`ªadLSB16
(
fûe
);

437 
e
->
deÁu…ch¨
 = 
	`ªadLSB16
(
fûe
);

438 
e
->
cou¡
 = (e->
max_byã2
 -É->
mö_byã2
 + 1) *

439 (
e
->
max_byã1
 -É->
mö_byã1
 + 1);

440 
e
->
m≠
 = (*Ë
	`mÆloc
”->
cou¡
 * ());

441 
	`DPRINTF
("de‡ch¨ %d (%x)\n", 
e
->
deÁu…ch¨
,É->defaultchar);

443 
n
 = 0;Ç < 
e
->
cou¡
; ++n) {

444 
e
->
m≠
[
n
] = 
	`ªadLSB16
(
fûe
);

447 
	`DPRINTF
("sizê%d byã1 %d,%d byã2 %d,%d\n", 
e
->
cou¡
,

448 
e
->
mö_byã1
,É->
max_byã1
,É->
mö_byã2
,É->
max_byã2
);

449  
e
->
cou¡
;

450 
	}
}

453 
	$pcf_ªad_toc
(
FILE
 * 
fûe
, 
toc_íåy
 **
toc
, *
size
)

455 
i
;

456 
vîsi⁄
;

457 
toc_íåy
 *
t
;

459 
	`FSEEK
(
fûe
, 0, 
SEEK_SET
);

462 
vîsi⁄
 = 
	`ªadLSB32
(
fûe
);

463 i‡(
vîsi⁄
 !
PCF_FILE_VERSION
)

466 *
size
 = 
	`ªadLSB32
(
fûe
);

467 
t
 = *
toc
 = (
toc_íåy
 *Ë
	`ˇŒoc
((toc_íåy), *
size
);

468 i‡(!
t
)

472 
i
=0; i<*
size
; ++i) {

473 
t
[
i
].
ty≥
 = 
	`ªadLSB32
(
fûe
);

474 
t
[
i
].
f‹m©
 = 
	`ªadLSB32
(
fûe
);

475 
t
[
i
].
size
 = 
	`ªadLSB32
(
fûe
);

476 
t
[
i
].
off£t
 = 
	`ªadLSB32
(
fûe
);

480 
	}
}

482 
PMWCOREFONT


483 
	$pcf_¸óãf⁄t
(c⁄° *
«me
, 
MWCOORD
 
height
, 
©å
)

485 
FILE
 *
fûe
 = 0;

486 
MWCOREFONT
 *
pf
 = 0;

487 
off£t
;

488 
i
;

489 
cou¡
;

490 
bsize
;

491 
bwidth
;

492 
îr
 = 0;

493 
mëric_íåy
 *
mërics
 = 0;

494 
ícodög_íåy
 *
ícodög
 = 0;

495 
MWIMAGEBITS
 *
ouçut
;

496 *
glyphs
 = 0;

497 *
glyphs_off£ts
 = 0;

498 
max_width
 = 0, 
max_des˚¡
 = 0, 
max_as˚¡
 = 0, 
max_height
 = 0;

499 
glyph_cou¡
;

500 *
goff£t
 = 
NULL
;

501 *
gwidth
 = 
NULL
;

502 
uc16
;

503 
‚ame
[256];

506 
fûe
 = 
	`FOPEN
(
«me
, "rb");

507 i‡(!
fûe
) {

508 
	`°r˝y
(
‚ame
, 
PCF_FONT_DIR
 "/");

509 
	`°r˝y
(
‚ame
 + (
PCF_FONT_DIR
), 
«me
);

510 
fûe
 = 
	`FOPEN
(
‚ame
, "rb");

512 i‡(!
fûe
)

513  
NULL
;

515 i‡(!(
pf
 = (
MWCOREFONT
 *Ë
	`mÆloc
((MWCOREFONT)))) {

516 
îr
 = -1;

517 
Àave_func
;

520 i‡(!(
pf
->
cf⁄t
 = (
PMWCFONT
Ë
	`ˇŒoc
((
MWCFONT
), 1))) {

521 
îr
 = -1;

522 
Àave_func
;

527 i‡(
	`pcf_ªad_toc
(
fûe
, &
toc
, &
toc_size
) == -1) {

528 
îr
 = -1;

529 
Àave_func
;

533 
glyph_cou¡
 = 
	`pcf_ªadbôm≠s
(
fûe
, &
glyphs
, &
bsize
, &
glyphs_off£ts
);

534 
	`DPRINTF
("glyph_cou¡ = %d (%x)\n", 
glyph_cou¡
, glyph_count);

536 i‡(
glyph_cou¡
 == -1) {

537 
îr
 = -1;

538 
Àave_func
;

541 i‡(
	`pcf_ªad_ícodög
(
fûe
, &
ícodög
) == -1) {

542 
îr
 = -1;

543 
Àave_func
;

546 
pf
->
cf⁄t
->
fú°ch¨
 = 
ícodög
->
mö_byã2
 * (ícodög->
mö_byã1
 + 1);

549 
cou¡
 = 
	`pcf_ªadmërics
(
fûe
, &
mërics
);

552 
i
 = 0; i < 
cou¡
; i++) {

553 i‡(
mërics
[
i
].
width
 > 
max_width
)

554 
max_width
 = 
mërics
[
i
].
width
;

555 i‡(
mërics
[
i
].
as˚¡
 > 
max_as˚¡
)

556 
max_as˚¡
 = 
mërics
[
i
].
as˚¡
;

557 i‡(
mërics
[
i
].
des˚¡
 > 
max_des˚¡
)

558 
max_des˚¡
 = 
mërics
[
i
].
des˚¡
;

560 
max_height
 = 
max_as˚¡
 + 
max_des˚¡
;

562 
pf
->
cf⁄t
->
maxwidth
 = 
max_width
;

563 
pf
->
cf⁄t
->
height
 = 
max_height
;

564 
pf
->
cf⁄t
->
as˚¡
 = 
max_as˚¡
;

567 
bwidth
 = (
max_width
 + 15) / 16;

569 
pf
->
cf⁄t
->
bôs
 = (
MWIMAGEBITS
 *Ë
	`ˇŒoc
((
max_height
 *

570 ((
MWIMAGEBITS
Ë* 
bwidth
)), 
glyph_cou¡
);

571 
goff£t
 = (*Ë
	`mÆloc
(
glyph_cou¡
 *

573 
gwidth
 = (*Ë
	`mÆloc
(
glyph_cou¡
 * ());

575 
ouçut
 = (
MWIMAGEBITS
 *Ë
pf
->
cf⁄t
->
bôs
;

576 
off£t
 = 0;

579 
i
 = 0; i < 
glyph_cou¡
; i++) {

580 
h
, 
w
;

581 
y
 = 
max_height
;

582 *
±r
 =

583 (*Ë(
glyphs
 + 
glyphs_off£ts
[
i
]);

586 
lwidth
 = (
mërics
[
i
].
width
 + 15) / 16;

589 
xwidth
 = (
mërics
[
i
].
rightBórög
 - mërics[i].
À·Bórög
 + 15) / 16;

591 
gwidth
[
i
] = (Ë
mërics
[i].
width
;

592 
goff£t
[
i
] = 
off£t
;

594 
off£t
 +(
lwidth
 * 
max_height
);

596 
h
 = 0; h < (
max_as˚¡
 - 
mërics
[
i
].
as˚¡
); h++) {

597 
w
 = 0; w < 
lwidth
; w++)

598 *
ouçut
++ = 0;

599 
y
--;

602 
h
 = 0; h < (
mërics
[
i
].
as˚¡
 + mërics[i].
des˚¡
); h++) {

603 *
vÆ
 = (*Ë
±r
;

605 
w
 = 0; w < 
lwidth
; w++)

606 *
ouçut
++ = 
vÆ
[
w
];

607 
±r
 +(
xwidth
 + 1) / 2;

608 
y
--;

611 ; 
y
 > 0; y--)

612 
w
 = 0; w < 
lwidth
; w++)

613 *
ouçut
++ = 0;

617 
pf
->
cf⁄t
->
off£t
 = (*Ë
	`mÆloc
(
ícodög
->
cou¡
 *

619 
pf
->
cf⁄t
->
width
 = (*Ë
	`mÆloc
(
ícodög
->
cou¡
 *

621 
i
 = 0; i < 
ícodög
->
cou¡
; ++i) {

622 
n
 = 
ícodög
->
m≠
[
i
];

623 i‡(
n
 == 0xffff)

624 
n
 = 
ícodög
->
m≠
[ícodög->
deÁu…ch¨
];

625 
pf
->
cf⁄t
->
off£t
[
i
] = 
goff£t
[
n
];

626 
pf
->
cf⁄t
->
width
[
i
] = 
gwidth
[
n
];

628 
pf
->
cf⁄t
->
size
 = 
ícodög
->
cou¡
;

630 
uc16
 = 
pf
->
cf⁄t
->
fú°ch¨
 > 255 ||

631 (
pf
->
cf⁄t
->
fú°ch¨
 +Öf->cf⁄t->
size
) > 255;

632 
pf
->
f⁄çrocs
 = 
uc16
? &
pcf_f⁄çrocs16
: &
pcf_f⁄çrocs
;

633 
pf
->
f⁄tsize
 =Öf->
f⁄åŸ©i⁄
 =Öf->
f⁄èâr
 = 0;

634 
pf
->
«me
 = "PCF";

636 
Àave_func
:

637 i‡(
goff£t
)

638 
	`‰ì
(
goff£t
);

639 i‡(
gwidth
)

640 
	`‰ì
(
gwidth
);

641 i‡(
ícodög
) {

642 i‡(
ícodög
->
m≠
)

643 
	`‰ì
(
ícodög
->
m≠
);

644 
	`‰ì
(
ícodög
);

646 i‡(
mërics
)

647 
	`‰ì
(
mërics
);

648 i‡(
glyphs
)

649 
	`‰ì
(
glyphs
);

650 i‡(
glyphs_off£ts
)

651 
	`‰ì
(
glyphs_off£ts
);

653 i‡(
toc
)

654 
	`‰ì
(
toc
);

655 
toc
 = 0;

656 
toc_size
 = 0;

658 i‡(
fûe
)

659 
	`FCLOSE
(
fûe
);

661 i‡(
îr
 =0 && 
pf
)

662  
pf
;

664 
	`pcf_u∆ﬂdf⁄t
((
PMWFONT
)
pf
);

666 
	}
}

669 
	$pcf_u∆ﬂdf⁄t
(
PMWFONT
 
f⁄t
)

671 
PMWCOREFONT
 
pf
 = (PMWCOREFONTË
f⁄t
;

672 
PMWCFONT
 
pfc
 = 
pf
->
cf⁄t
;

674 i‡(
pfc
) {

675 i‡(
pfc
->
width
)

676 
	`‰ì
(
pf
->
cf⁄t
->
width
);

677 i‡(
pfc
->
off£t
)

678 
	`‰ì
(
pf
->
cf⁄t
->
off£t
);

679 i‡(
pfc
->
bôs
)

680 
	`‰ì
(
pf
->
cf⁄t
->
bôs
);

682 
	`‰ì
(
pf
->
cf⁄t
);

685 
	`‰ì
(
f⁄t
);

686 
	}
}

	@engine/font_t1lib.c

8 
	~<°dio.h
>

9 
	~<°dlib.h
>

10 
	~<°rög.h
>

11 
	~<t1lib.h
>

12 
	~"devi˚.h
"

13 
	~"devf⁄t.h
"

15 
	sMWT1LIBFONT
 {

16 
PMWFONTPROCS
 
	mf⁄çrocs
;

17 
MWCOORD
 
	mf⁄tsize
;

18 
	mf⁄åŸ©i⁄
;

19 
	mf⁄èâr
;

21 
	mf⁄tid
;

22 } 
	tMWT1LIBFONT
;

24 
t1lib_öô
(
PSD
 
psd
);

25 
PMWT1LIBFONT
 
t1lib_¸óãf⁄t
(c⁄° *
«me
, 
MWCOORD
 
height
,
©å
);

27 
t1lib_døwãxt
(
PMWFONT
 
pf⁄t
, 
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
,

28 c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
);

29 
MWBOOL
 
t1lib_gëf⁄töfo
(
PMWFONT
 
pf⁄t
, 
PMWFONTINFO
 
pf⁄töfo
);

30 
t1lib_gëãxtsize
(
PMWFONT
 
pf⁄t
, c⁄° *
ãxt
, 
cc
,

31 
MWTEXTFLAGS
 
Êags
, 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
,

32 
MWCOORD
 *
pba£
);

33 
t1lib_de°royf⁄t
(
PMWFONT
 
pf⁄t
);

36 
MWFONTPROCS
 
	gt1lib_¥ocs
 = {

37 
MWTF_ASCII
,

38 
t1lib_gëf⁄töfo
,

39 
t1lib_gëãxtsize
,

40 
NULL
,

41 
t1lib_de°royf⁄t
,

42 
t1lib_døwãxt
,

43 
NULL
,

44 
NULL
,

45 
NULL
,

46 
NULL
,

50 
MWPIXELVAL
 
gr_f‹eground
;

51 
MWPIXELVAL
 
gr_background
;

52 
MWBOOL
 
gr_u£bg
;

55 
	$t1lib_öô
(
PSD
 
psd
)

57 **
ícodög
;

58 
öôed
 = 0;

60 i‡(
öôed
)

63 
	`T1_SëBôm≠Pad
(8);

64 i‡(!
	`T1_InôLib
(0))

68 
ícodög
 = 
	`T1_LﬂdEncodög
("IsoLatin1.enc");

69 
	`T1_SëDeÁu…Encodög
(
ícodög
);

71 #ifde‡
T1LIB_USE_AA_HIGH


72 
	`T1_AASëLevñ
(
T1_AA_HIGH
);

74 
	`T1_AASëLevñ
(
T1_AA_LOW
);

78 if(
psd
->
bµ
 == 16)

79 
	`T1_AASëBôsPîPixñ
(16);

82 
	`T1_AASëBôsPîPixñ
((
MWPIXELVAL
)*8);

84 
öôed
 = 1;

86 
	}
}

88 
PMWT1LIBFONT


89 
	$t1lib_¸óãf⁄t
(c⁄° *
«me
, 
MWCOORD
 
height
, 
©å
)

91 
PMWT1LIBFONT
 
pf
;

92 
id
;

93 * 
p
;

94 
buf
[256];

97 
id
=0; id<
	`T1_Gë_no_f⁄ts
(); ++id) {

98 
	`°∫˝y
(
buf
, 
	`T1_GëF⁄tFûeName
(
id
), (buf));

101 
p
=
buf
; *p; ++p) {

102 if(*
p
 == '.') {

103 *
p
 = 0;

108 if(!
	`°rcmpi
(
«me
, 
buf
)) {

110 
pf
 = (
PMWT1LIBFONT
)
	`ˇŒoc
((
MWT1LIBFONT
), 1);

111 i‡(!
pf
)

112  
NULL
;

113 
pf
->
f⁄çrocs
 = &
t1lib_¥ocs
;

114 
	`GdSëF⁄tSize
((
PMWFONT
)
pf
, 
height
);

115 
	`GdSëF⁄tRŸ©i⁄
((
PMWFONT
)
pf
, 0);

116 
	`GdSëF⁄tAâr
((
PMWFONT
)
pf
, 
©å
, 0);

117 
pf
->
f⁄tid
 = 
id
;

118  
pf
;

121  
NULL
;

122 
	}
}

128 
	$t1lib_døwãxt
(
PMWFONT
 
pf⁄t
, 
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
,

129 c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
)

131 
PMWT1LIBFONT
 
pf
 = (PMWT1LIBFONT)
pf⁄t
;

132 c⁄° *
°r
 = 
ãxt
;

133 
MWCOORD
 
width
;

134 
MWCOORD
 
height
;

135 
MWCOORD
 
undîlöey
;

136 
GLYPH
 * 
g
;

137 #ifde‡
T1LIB_USE_AA_HIGH


138 
OUTPIXELVAL
 
gvÆs
[17];

143 
bÀnd
[17] = {

148 
OUTPIXELVAL
 
gvÆs
[5];

149 
bÀnd
[5] = { 0x00, 0x44, 0x88, 0xcc, 0xff };

154 i‡(
pf
->
f⁄èâr
&
MWTF_ANTIALIAS
) {

155 #ifde‡
T1LIB_USE_AA_HIGH


156 
	`ÆphabÀnd
(
psd
, 
gvÆs
, 
gr_f‹eground
, 
gr_background
, 
bÀnd
, 17);

157 
	`T1_AAHSëGøyVÆues
(
gvÆs
);

159 
	`ÆphabÀnd
(
psd
, 
gvÆs
, 
gr_f‹eground
, 
gr_background
, 
bÀnd
, 5);

160 
	`T1_AASëGøyVÆues
(
gvÆs
[0],gvals[1],gvals[2],gvals[3],gvals[4]);

162 
g
 = 
	`T1_AASëSåög
(
pf
->
f⁄tid
,(*)
°r
,
cc
,0,

163 (
pf
->
f⁄èâr
&
MWTF_KERNING
)? 
T1_KERNING
: 0,

164 
pf
->
f⁄tsize
 * 1.0, 0);

166 i‡(
g
 && g->
bôs
) {

168 
width
 = 
g
->
mërics
.
rightSideBórög
 - g->mërics.
À·SideBórög
;

169 
height
 = 
g
->
mërics
.
as˚¡
 - g->mërics.
des˚¡
;

171 if(
Êags
 & 
MWTF_BASELINE
)

172 
y
 -
g
->
mërics
.
as˚¡
;

173 if(
Êags
 & 
MWTF_BOTTOM
)

174 
y
 -(
height
 - 1);

175 
undîlöey
 = 
y
 + 
g
->
mërics
.
as˚¡
;

184 
	`GdAªa
(
psd
,
x
,
y
, 
width
, 
height
, 
g
->
bôs
, 
MWPF_PIXELVAL
);

187 i‡(
pf
->
f⁄èâr
 & 
MWTF_UNDERLINE
)

188 
	`GdLöe
(
psd
, 
x
, 
undîlöey
, x+
width
, undîlöey, 
FALSE
);

193 
g
 = 
	`T1_SëSåög
(
pf
->
f⁄tid
,(*)
°r
,
cc
,0,

194 (
pf
->
f⁄èâr
&
MWTF_KERNING
)? 
T1_KERNING
: 0,

195 
pf
->
f⁄tsize
 * 1.0, 0);

197 i‡(
g
 && g->
bôs
) {

198 * 
b
;

199 
xoff
;

200 
maxy
;

201 
xmod
;

206 
width
 = 
g
->
mërics
.
rightSideBórög
 - g->mërics.
À·SideBórög
;

207 
height
 = 
g
->
mërics
.
as˚¡
 - g->mërics.
des˚¡
;

209 if(
Êags
 & 
MWTF_BASELINE
)

210 
y
 -
g
->
mërics
.
as˚¡
;

211 if(
Êags
 & 
MWTF_BOTTOM
)

212 
y
 -(
height
 - 1);

213 
undîlöey
 = 
y
 + 
g
->
mërics
.
as˚¡
;

215 
b
 = 
g
->
bôs
;

216 
maxy
 = 
y
 + 
height
;

223 
xmod
 = 0;

224 
y
 < 
maxy
) {

225 
d©a
;

226 
xoff
 = 0;

227 
xoff
 < 
width
 ) {

228 i‡(!(
xoff
 % 8)) {

229 
d©a
 = *
b
;

230 
b
++;

233 i‡(
	`GdClùPoöt
(
psd
, 
x
+
xoff
,
y
)) {

234 i‡(
gr_u£bg
) {

235 
psd
->
	`DøwPixñ
’sd,
x
+
xoff
,
y
,

236 
d©a
 & (1 << (
xoff
 % 8)) ?

237 
gr_f‹eground
 : 
gr_background
);

238 } i‡(
d©a
 & (1 << (
xoff
 % 8))) {

239 
psd
->
	`DøwPixñ
’sd,
x
+
xoff
,
y
, 
gr_f‹eground
);

242 
xoff
++;

244 
b
 +
xmod
;

245 
y
++;

247 i‡(
pf
->
f⁄èâr
 & 
MWTF_UNDERLINE
)

248 
	`GdLöe
(
psd
, 
x
, 
undîlöey
, x+
xoff
, undîlöey, 
FALSE
);

252 i‡(
g
 && g->
bôs
) {

254 
	`‰ì
(
g
->
bôs
);

255 
g
->
bôs
 = 0;

258 
	`GdFixCurs‹
(
psd
);

259 
	}
}

261 
MWBOOL


262 
	$t1lib_gëf⁄töfo
(
PMWFONT
 
pf⁄t
, 
PMWFONTINFO
 
pf⁄töfo
)

264 
i
;

265 
MWCOORD
 
width
, 
height
, 
ba£löe
;

268 
	`GdGëTextSize
(
pf⁄t
, "A", 1, &
width
, &
height
, &
ba£löe
, 
MWTF_ASCII
);

269 
pf⁄töfo
->
height
 = height;

270 
pf⁄töfo
->
maxwidth
 = 
width
;

271 
pf⁄töfo
->
ba£löe
 = baseline;

274 
pf⁄töfo
->
löe•acög
 =Öf⁄töfo->
height
;

275 
pf⁄töfo
->
des˚¡
 =Öf⁄töfo->
height
 -Öf⁄töfo->
ba£löe
;

276 
pf⁄töfo
->
maxas˚¡
 =Öf⁄töfo->
ba£löe
;

277 
pf⁄töfo
->
maxdes˚¡
 =Öf⁄töfo->
des˚¡
;

279 
pf⁄töfo
->
fú°ch¨
 = 32;

280 
pf⁄töfo
->
œ°ch¨
 = 255;

281 
pf⁄töfo
->
fixed
 = 
TRUE
;

282 
i
=0; i<256; ++i)

283 
pf⁄töfo
->
widths
[
i
] = 
width
;

284  
TRUE
;

285 
	}
}

289 
	$t1lib_gëãxtsize
(
PMWFONT
 
pf⁄t
, c⁄° *
ãxt
, 
cc
, 
MWTEXTFLAGS
 
Êags
,

290 
MWCOORD
 *
pwidth
, MWCOORD *
pheight
, MWCOORD *
pba£
)

292 
PMWT1LIBFONT
 
pf
 = (PMWT1LIBFONT)
pf⁄t
;

293 c⁄° * 
°r
 = 
ãxt
;

294 
GLYPH
 * 
g
;

296 
g
 = 
	`T1_SëSåög
(
pf
->
f⁄tid
, (*)
°r
, 
cc
, 0,

297 (
pf
->
f⁄èâr
&
MWTF_KERNING
)? 
T1_KERNING
: 0,Öf->
f⁄tsize
 * 1.0, 0);

298 *
pwidth
 = 
g
->
mërics
.
rightSideBórög
 - g->mërics.
À·SideBórög
;

299 *
pheight
 = 
g
->
mërics
.
as˚¡
 - g->mërics.
des˚¡
;

300 *
pba£
 = 
g
->
mërics
.
as˚¡
;

301 if(
g
 && g->
bôs
) {

302 
	`‰ì
(
g
->
bôs
);

303 
g
->
bôs
 = 0;

306 
BBox
 
b
;

309 
b
 = 
	`T1_GëSåögBBox
(
pf
->
f⁄tid
, 
°r
, 
cc
, 0, (pf->
f⁄èâr
&
MWTF_KERNING
)?
T1_KERNING
:0);

311 
	`DPRINTF
("b.urx = %d, b.Œx = %d\n",
b
.
urx
, b.
Œx
);

312 
	`DPRINTF
("b.ury = %d, b.Œy = %d\n",
b
.
ury
, b.
Œy
);

313 *
pwidth
 = (
b
.
urx
 - b.
Œx
);

314 *
pheight
 = (
b
.
Œy
 - b.
ury
);

316 
	}
}

319 
	$t1lib_de°royf⁄t
(
PMWFONT
 
pf⁄t
)

321 
PMWT1LIBFONT
 
pf
 = (PMWT1LIBFONT)
pf⁄t
;

323 
	`T1_DñëeAŒSizes
(
pf
->
f⁄tid
);

324 
	`‰ì
(
pf
);

325 
	}
}

	@engine/image_bmp.c

7 
	~<°dio.h
>

8 
	~<°dlib.h
>

9 
	~<°rög.h
>

10 
	~<uni°d.h
>

11 
	~<f˙é.h
>

12 
	~<˘y≥.h
>

13 
	~<sys/ty≥s.h
>

14 
	~<sys/°©.h
>

15 
	~"devi˚.h
"

16 
	~"sw≠.h
"

18 #i‡
MW_FEATURE_IMAGES
 && 
deföed
(
HAVE_BMP_SUPPORT
)

21 
	#BI_RGB
 0L

	)

22 
	#BI_RLE8
 1L

	)

23 
	#BI_RLE4
 2L

	)

24 
	#BI_BITFIELDS
 3L

	)

26 
	tBYTE
;

27 
	tWORD
;

28 
	tDWORD
;

29 
	tLONG
;

33 
BYTE
 
	mbfTy≥
[2];

34 
DWORD
 
	mbfSize
;

35 
WORD
 
	mbfRe£rved1
;

36 
WORD
 
	mbfRe£rved2
;

37 
DWORD
 
	mbfOffBôs
;

38 } 
	tBMPFILEHEAD
;

40 
	#FILEHEADSIZE
 14

	)

45 
DWORD
 
	mBiSize
;

46 
DWORD
 
	mBiWidth
;

47 
DWORD
 
	mBiHeight
;

48 
WORD
 
	mBiPœ√s
;

49 
WORD
 
	mBiBôCou¡
;

50 
DWORD
 
	mBiCom¥essi⁄
;

51 
DWORD
 
	mBiSizeImage
;

52 
DWORD
 
	mBiX≥lsPîMëî
;

53 
DWORD
 
	mBiY≥lsPîMëî
;

54 
DWORD
 
	mBiCÃU£d
;

55 
DWORD
 
	mBiCÃImp‹è¡
;

56 } 
	tBMPINFOHEAD
;

58 
	#INFOHEADSIZE
 40

	)

63 
DWORD
 
	mbcSize
;

64 
WORD
 
	mbcWidth
;

65 
WORD
 
	mbcHeight
;

66 
WORD
 
	mbcPœ√s
;

67 
WORD
 
	mbcBôCou¡
;

68 } 
	tBMPCOREHEAD
;

70 
	#COREHEADSIZE
 12

	)

72 
DecodeRLE8
(
MWUCHAR
 *
buf
, 
buf„r_t
 *
§c
);

73 
DecodeRLE4
(
MWUCHAR
 *
buf
, 
buf„r_t
 *
§c
);

74 
put4
(
b
);

81 
	$GdDecodeBMP
(
buf„r_t
 *
§c
, 
PMWIMAGEHDR
 
pimage
)

83 
h
, 
i
, 
com¥essi⁄
;

84 
hódsize
;

85 
MWUCHAR
 *
imagebôs
;

86 
BMPFILEHEAD
 
bmpf
;

87 
BMPINFOHEAD
 
bmpi
;

88 
BMPCOREHEAD
 
bmpc
;

89 
MWUCHAR
 
hódbuf„r
[
INFOHEADSIZE
];

91 
	`GdImageBuf„rSìkTo
(
§c
, 0UL);

93 
pimage
->
imagebôs
 = 
NULL
;

94 
pimage
->
∑Àâe
 = 
NULL
;

97 i‡(
	`GdImageBuf„rRód
(
§c
, &
hódbuf„r
, 
FILEHEADSIZE
) != FILEHEADSIZE)

100 
bmpf
.
bfTy≥
[0] = 
hódbuf„r
[0];

101 
bmpf
.
bfTy≥
[1] = 
hódbuf„r
[1];

104 i‡(*(
WORD
*)&
bmpf
.
bfTy≥
[0] !
	`wsw≠
(0x4D42))

108 
bmpf
.
bfOffBôs
 = 
	`dwsw≠
(
	`dwªad
(&
hódbuf„r
[10]));

111 i‡(
	`GdImageBuf„rRód
(
§c
,&
hódsize
,(
DWORD
)) != (DWORD))

113 
hódsize
 = 
	`dwsw≠
(headsize);

116 if(
hódsize
 =
COREHEADSIZE
) {

119 if(
	`GdImageBuf„rRód
(
§c
, &
hódbuf„r
, 
COREHEADSIZE
-(
DWORD
)) !=

120 
COREHEADSIZE
-(
DWORD
))

124 
bmpc
.
bcWidth
 = 
	`wsw≠
(*(
WORD
*)&
hódbuf„r
[0]);

125 
bmpc
.
bcHeight
 = 
	`wsw≠
(*(
WORD
*)&
hódbuf„r
[2]);

126 
bmpc
.
bcPœ√s
 = 
	`wsw≠
(*(
WORD
*)&
hódbuf„r
[4]);

127 
bmpc
.
bcBôCou¡
 = 
	`wsw≠
(*(
WORD
*)&
hódbuf„r
[6]);

129 
pimage
->
width
 = ()
bmpc
.
bcWidth
;

130 
pimage
->
height
 = ()
bmpc
.
bcHeight
;

131 
pimage
->
bµ
 = 
bmpc
.
bcBôCou¡
;

132 i‡(
pimage
->
bµ
 <= 8)

133 
pimage
->
∑lsize
 = 1 <<Öimage->
bµ
;

134 
pimage
->
∑lsize
 = 0;

135 
com¥essi⁄
 = 
BI_RGB
;

138 if(
	`GdImageBuf„rRód
(
§c
, &
hódbuf„r
, 
INFOHEADSIZE
-(
DWORD
)) !=

139 
INFOHEADSIZE
-(
DWORD
))

143 
bmpi
.
BiWidth
 = 
	`dwsw≠
(*(
DWORD
*)&
hódbuf„r
[0]);

144 
bmpi
.
BiHeight
 = 
	`dwsw≠
(*(
DWORD
*)&
hódbuf„r
[4]);

145 
bmpi
.
BiPœ√s
 = 
	`wsw≠
(*(
WORD
*)&
hódbuf„r
[8]);

146 
bmpi
.
BiBôCou¡
 = 
	`wsw≠
(*(
WORD
*)&
hódbuf„r
[10]);

147 
bmpi
.
BiCom¥essi⁄
 = 
	`dwsw≠
(*(
DWORD
*)&
hódbuf„r
[12]);

148 
bmpi
.
BiSizeImage
 = 
	`dwsw≠
(*(
DWORD
*)&
hódbuf„r
[16]);

149 
bmpi
.
BiX≥lsPîMëî
 = 
	`dwsw≠
(*(
DWORD
*)&
hódbuf„r
[20]);

150 
bmpi
.
BiY≥lsPîMëî
 = 
	`dwsw≠
(*(
DWORD
*)&
hódbuf„r
[24]);

151 
bmpi
.
BiCÃU£d
 = 
	`dwsw≠
(*(
DWORD
*)&
hódbuf„r
[28]);

152 
bmpi
.
BiCÃImp‹è¡
 = 
	`dwsw≠
(*(
DWORD
*)&
hódbuf„r
[32]);

154 
pimage
->
width
 = ()
bmpi
.
BiWidth
;

155 
pimage
->
height
 = ()
bmpi
.
BiHeight
;

156 
pimage
->
bµ
 = 
bmpi
.
BiBôCou¡
;

157 
pimage
->
∑lsize
 = ()
bmpi
.
BiCÃU£d
;

158 i‡(
pimage
->
∑lsize
 > 256)

159 
pimage
->
∑lsize
 = 0;

160 if(
pimage
->
∑lsize
 =0 &&Öimage->
bµ
 <= 8)

161 
pimage
->
∑lsize
 = 1 <<Öimage->
bµ
;

162 
com¥essi⁄
 = 
bmpi
.
BiCom¥essi⁄
;

164 
pimage
->
com¥essi⁄
 = 
MWIMAGE_BGR
;

165 
pimage
->
∂™es
 = 1;

168 if(
pimage
->
bµ
 > 8 &&Öimage->bpp != 24) {

169 
	`EPRINTF
("GdDecodeBMP: image bppÇot 1, 4, 8 or 24\n");

174 
	`GdCompuãImagePôch
(
pimage
->
bµ
,Öimage->
width
, &pimage->
pôch
,

175 &
pimage
->
byã•îpixñ
);

178 if–(
pimage
->
imagebôs
 = 
	`mÆloc
’image->
pôch
*pimage->
height
)Ë=
NULL
)

179 
îr
;

180 if–(
pimage
->
∑Àâe
 = 
	`mÆloc
(256*(
MWPALENTRY
))Ë=
NULL
)

181 
îr
;

184 if(
pimage
->
bµ
 <= 8) {

185 
i
=0; i<
pimage
->
∑lsize
; i++) {

186 
pimage
->
∑Àâe
[
i
].
b
 = 
	`GdImageBuf„rGëCh¨
(
§c
);

187 
pimage
->
∑Àâe
[
i
].
g
 = 
	`GdImageBuf„rGëCh¨
(
§c
);

188 
pimage
->
∑Àâe
[
i
].
r
 = 
	`GdImageBuf„rGëCh¨
(
§c
);

189 if(
hódsize
 !
COREHEADSIZE
)

190 
	`GdImageBuf„rGëCh¨
(
§c
);

195 
	`GdImageBuf„rSìkTo
(
§c
, 
bmpf
.
bfOffBôs
);

197 
h
 = 
pimage
->
height
;

199 --
h
 >= 0) {

201 
imagebôs
 = 
pimage
->imagebô†+ 
h
*pimage->
pôch
;

204 if(
com¥essi⁄
 =
BI_RLE8
) {

205 if(!
	`DecodeRLE8
(
imagebôs
, 
§c
))

207 } if(
com¥essi⁄
 =
BI_RLE4
) {

208 if(!
	`DecodeRLE4
(
imagebôs
, 
§c
))

211 if(
	`GdImageBuf„rRód
(
§c
, 
imagebôs
, 
pimage
->
pôch
) !=

212 
pimage
->
pôch
)

213 
îr
;

218 
îr
:

219 
	`EPRINTF
("GdDecodeBMP: imageÜoadingÉrror\n");

220 if(
pimage
->
imagebôs
)

221 
	`‰ì
(
pimage
->
imagebôs
);

222 if(
pimage
->
∑Àâe
)

223 
	`‰ì
(
pimage
->
∑Àâe
);

225 
	}
}

231 
	$DecodeRLE8
(
MWUCHAR
 * 
buf
, 
buf„r_t
 * 
§c
)

233 
c
, 
n
;

234 
MWUCHAR
 *
p
 = 
buf
;

237 
n
 = 
	`GdImageBuf„rGëCh¨
(
§c
)) {

238 
EOF
:

241 
n
 = 
	`GdImageBuf„rGëCh¨
(
§c
)) {

247 (Ë
	`GdImageBuf„rGëCh¨
(
§c
);

248 (Ë
	`GdImageBuf„rGëCh¨
(
§c
);

251 
c
 = 0; c < 
n
; c++)

252 *
p
++ = 
	`GdImageBuf„rGëCh¨
(
§c
);

253 i‡(
n
 & 1)

254 (Ë
	`GdImageBuf„rGëCh¨
(
§c
);

258 
c
 = 
	`GdImageBuf„rGëCh¨
(
§c
);

259 
n
--)

260 *
p
++ = 
c
;

264 
	}
}

269 
MWUCHAR
 *
	gp
;

270 
	g⁄˚
;

273 
	$put4
(
b
)

275 
œ°
;

277 
œ°
 = (œ° << 4Ë| 
b
;

278 i‡(++
⁄˚
 == 2) {

279 *
p
++ = 
œ°
;

280 
⁄˚
 = 0;

282 
	}
}

285 
	$DecodeRLE4
(
MWUCHAR
 * 
buf
, 
buf„r_t
 * 
§c
)

287 
c
, 
n
, 
c1
, 
c2
;

289 
p
 = 
buf
;

290 
⁄˚
 = 0;

291 
c1
 = 0;

294 
n
 = 
	`GdImageBuf„rGëCh¨
(
§c
)) {

295 
EOF
:

298 
n
 = 
	`GdImageBuf„rGëCh¨
(
§c
)) {

300 i‡(
⁄˚
)

301 
	`put4
(0);

304 i‡(
⁄˚
)

305 
	`put4
(0);

308 (Ë
	`GdImageBuf„rGëCh¨
(
§c
);

309 (Ë
	`GdImageBuf„rGëCh¨
(
§c
);

312 
c2
 = (
n
 + 3) & ~3;

313 
c
 = 0; c < 
c2
; c++) {

314 i‡((
c
 & 1) == 0)

315 
c1
 = 
	`GdImageBuf„rGëCh¨
(
§c
);

316 i‡(
c
 < 
n
)

317 
	`put4
((
c1
 >> 4) & 0x0f);

318 
c1
 <<= 4;

323 
c
 = 
	`GdImageBuf„rGëCh¨
(
§c
);

324 
c1
 = (
c
 >> 4) & 0x0f;

325 
c2
 = 
c
 & 0x0f;

326 
c
 = 0; c < 
n
; c++)

327 
	`put4
((
c
 & 1Ë? 
c2
 : 
c1
);

331 
	}
}

	@engine/image_gif.c

37 
	~<°dio.h
>

38 
	~<°dlib.h
>

39 
	~<°rög.h
>

40 
	~<uni°d.h
>

41 
	~<f˙é.h
>

42 
	~<˘y≥.h
>

43 
	~<sys/ty≥s.h
>

44 
	~<sys/°©.h
>

45 
	~"devi˚.h
"

46 
	~"sw≠.h
"

48 #i‡
MW_FEATURE_IMAGES
 && 
deföed
(
HAVE_GIF_SUPPORT
)

50 
	#MAXCOLORMAPSIZE
 256

	)

51 
	#MAX_LWZ_BITS
 12

	)

52 
	#INTERLACE
 0x40

	)

53 
	#LOCALCOLORMAP
 0x80

	)

55 
	#CM_RED
 0

	)

56 
	#CM_GREEN
 1

	)

57 
	#CM_BLUE
 2

	)

59 
	#BôSë
(
byã
, 
bô
Ë(((byãË& (bô)Ë=(bô))

	)

60 
	#RódOK
(
§c
,
buf„r
,
Àn
Ë
	`GdImageBuf„rRód
(§c, buf„r,Üí)

	)

61 
	#LM_to_uöt
(
a
,
b
Ë(((b)<<8)|◊))

	)

64 
	mWidth
;

65 
	mHeight
;

66 
	mCﬁ‹M≠
[3][
MAXCOLORMAPSIZE
];

67 
	mBôPixñ
;

68 
	mCﬁ‹Resﬁuti⁄
;

69 
	mBackground
;

70 
	mA•e˘R©io
;

71 
	mGøySˇÀ
;

72 } 
	gGifS¸ìn
;

75 
	må™•¨ít
;

76 
	mdñayTime
;

77 
	möputFœg
;

78 
	mdi•oßl
;

79 } 
	gGif89
;

81 
RódCﬁ‹M≠
(
buf„r_t
 *
§c
, 
numbî
,

82 
buf„r
[3][
MAXCOLORMAPSIZE
], *
Êag
);

83 
DoExãnsi⁄
(
buf„r_t
 *
§c
, 
œbñ
);

84 
GëD©aBlock
(
buf„r_t
 *
§c
, *
buf
);

85 
GëCode
(
buf„r_t
 *
§c
, 
code_size
, 
Êag
);

86 
LWZRódByã
(
buf„r_t
 *
§c
, 
Êag
, 
öput_code_size
);

87 
RódImage
(
buf„r_t
 *
§c
, 
PMWIMAGEHDR
 
pimage
, 
Àn
, 
height
, ,

88 
cm≠
[3][
MAXCOLORMAPSIZE
],

89 
gøy
, 
öãæa˚
, 
ign‹e
);

92 
	$GdDecodeGIF
(
buf„r_t
 *
§c
, 
PMWIMAGEHDR
 
pimage
)

94 
buf
[16];

95 
c
;

96 
loˇlCﬁ‹M≠
[3][
MAXCOLORMAPSIZE
];

97 
gøySˇÀ
;

98 
u£GlobÆCﬁ‹m≠
;

99 
bôPixñ
;

100 
imageCou¡
 = 0;

101 
vîsi⁄
[4];

102 
imageNumbî
 = 1;

103 
ok
 = 0;

105 
	`GdImageBuf„rSìkTo
(
§c
, 0UL);

107 
pimage
->
imagebôs
 = 
NULL
;

108 
pimage
->
∑Àâe
 = 
NULL
;

110 i‡(!
	`RódOK
(
§c
, 
buf
, 6))

112 i‡(
	`°∫cmp
((*Ë
buf
, "GIF", 3) != 0)

114 
	`°∫˝y
(
vîsi⁄
, (*Ë
buf
 + 3, 3);

115 
vîsi⁄
[3] = '\0';

117 i‡(
	`°rcmp
(
vîsi⁄
, "87a") != 0 && strcmp(version, "89a") != 0) {

118 
	`EPRINTF
("GdDecodeGIF: GIF versionÇumberÇot 87a or 89a\n");

121 
Gif89
.
å™•¨ít
 = -1;

122 
Gif89
.
dñayTime
 = -1;

123 
Gif89
.
öputFœg
 = -1;

124 
Gif89
.
di•oßl
 = 0;

126 i‡(!
	`RódOK
(
§c
, 
buf
, 7)) {

127 
	`EPRINTF
("GdDecodeGIF: bad screen descriptor\n");

130 
GifS¸ìn
.
Width
 = 
	`LM_to_uöt
(
buf
[0], buf[1]);

131 
GifS¸ìn
.
Height
 = 
	`LM_to_uöt
(
buf
[2], buf[3]);

132 
GifS¸ìn
.
BôPixñ
 = 2 << (
buf
[4] & 0x07);

133 
GifS¸ìn
.
Cﬁ‹Resﬁuti⁄
 = (((
buf
[4] & 0x70) >> 3) + 1);

134 
GifS¸ìn
.
Background
 = 
buf
[5];

135 
GifS¸ìn
.
A•e˘R©io
 = 
buf
[6];

137 i‡(
	`BôSë
(
buf
[4], 
LOCALCOLORMAP
)) {

138 i‡(
	`RódCﬁ‹M≠
(
§c
, 
GifS¸ìn
.
BôPixñ
, GifS¸ìn.
Cﬁ‹M≠
,

139 &
GifS¸ìn
.
GøySˇÀ
)) {

140 
	`EPRINTF
("GdDecodeGIF: bad global colormap\n");

146 i‡(!
	`RódOK
(
§c
, &
c
, 1)) {

147 
	`EPRINTF
("GdDecodeGIF: EOF on image data\n");

148 
d⁄e
;

150 i‡(
c
 == ';') {

151 i‡(
imageCou¡
 < 
imageNumbî
) {

152 
	`EPRINTF
("GdDecodeGIF:Çÿimagê%d o‡%d\n", 
imageNumbî
,
imageCou¡
);

153 
d⁄e
;

156 i‡(
c
 == '!') {

157 i‡(!
	`RódOK
(
§c
, &
c
, 1)) {

158 
	`EPRINTF
("GdDecodeGIF: EOF onÉxtension function code\n");

159 
d⁄e
;

161 
	`DoExãnsi⁄
(
§c
, 
c
);

164 i‡(
c
 != ',') {

167 ++
imageCou¡
;

169 i‡(!
	`RódOK
(
§c
, 
buf
, 9)) {

170 
	`EPRINTF
("GdDecodeGIF: bad image size\n");

171 
d⁄e
;

173 
u£GlobÆCﬁ‹m≠
 = !
	`BôSë
(
buf
[8], 
LOCALCOLORMAP
);

175 
bôPixñ
 = 1 << ((
buf
[8] & 0x07) + 1);

177 i‡(!
u£GlobÆCﬁ‹m≠
) {

178 i‡(
	`RódCﬁ‹M≠
(
§c
, 
bôPixñ
, 
loˇlCﬁ‹M≠
, &
gøySˇÀ
)) {

179 
	`EPRINTF
("GdDecodeGIF: badÜocal colormap\n");

180 
d⁄e
;

182 
ok
 = 
	`RódImage
(
§c
, 
pimage
, 
	`LM_to_uöt
(
buf
[4], buf[5]),

183 
	`LM_to_uöt
(
buf
[6], buf[7]),

184 
bôPixñ
, 
loˇlCﬁ‹M≠
, 
gøySˇÀ
,

185 
	`BôSë
(
buf
[8], 
INTERLACE
),

186 
imageCou¡
 !
imageNumbî
);

188 
ok
 = 
	`RódImage
(
§c
, 
pimage
, 
	`LM_to_uöt
(
buf
[4], buf[5]),

189 
	`LM_to_uöt
(
buf
[6], buf[7]),

190 
GifS¸ìn
.
BôPixñ
, GifS¸ìn.
Cﬁ‹M≠
,

191 
GifS¸ìn
.
GøySˇÀ
, 
	`BôSë
(
buf
[8], 
INTERLACE
),

192 
imageCou¡
 !
imageNumbî
);

194 } 
ok
 == 0);

197 
pimage
->
å™scﬁ‹
 = 
Gif89
.
å™•¨ít
;

199 i‡(
ok
)

202 
d⁄e
:

203 i‡(
pimage
->
imagebôs
)

204 
	`‰ì
(
pimage
->
imagebôs
);

205 i‡(
pimage
->
∑Àâe
)

206 
	`‰ì
(
pimage
->
∑Àâe
);

208 
	}
}

211 
	$RódCﬁ‹M≠
(
buf„r_t
 *
§c
, 
numbî
, 
buf„r
[3][
MAXCOLORMAPSIZE
],

212 *
gøy
)

214 
i
;

215 
rgb
[3];

216 
Êag
;

218 
Êag
 = 
TRUE
;

220 
i
 = 0; i < 
numbî
; ++i) {

221 i‡(!
	`RódOK
(
§c
, 
rgb
, (rgb)))

223 
buf„r
[
CM_RED
][
i
] = 
rgb
[0];

224 
buf„r
[
CM_GREEN
][
i
] = 
rgb
[1];

225 
buf„r
[
CM_BLUE
][
i
] = 
rgb
[2];

226 
Êag
 &(
rgb
[0] ==Ñgb[1] &&Ñgb[1] ==Ñgb[2]);

230 i‡(
Êag
)

231 *
gøy
 = (
numbî
 =2Ë? 
PBM_TYPE
 : 
PGM_TYPE
;

233 *
gøy
 = 
PPM_TYPE
;

235 *
gøy
 = 0;

238  
FALSE
;

239 
	}
}

242 
	$DoExãnsi⁄
(
buf„r_t
 *
§c
, 
œbñ
)

244 
buf
[256];

246 
œbñ
) {

252 
	`GëD©aBlock
(
§c
, (*Ë
buf
) != 0);

253  
FALSE
;

255 
	`GëD©aBlock
(
§c
, (*Ë
buf
);

256 
Gif89
.
di•oßl
 = (
buf
[0] >> 2) & 0x7;

257 
Gif89
.
öputFœg
 = (
buf
[0] >> 1) & 0x1;

258 
Gif89
.
dñayTime
 = 
	`LM_to_uöt
(
buf
[1], buf[2]);

259 i‡((
buf
[0] & 0x1) != 0)

260 
Gif89
.
å™•¨ít
 = 
buf
[3];

262 
	`GëD©aBlock
(
§c
, (*Ë
buf
) != 0);

263  
FALSE
;

268 
	`GëD©aBlock
(
§c
, (*Ë
buf
) != 0);

270  
FALSE
;

271 
	}
}

273 
	gZîoD©aBlock
 = 
FALSE
;

276 
	$GëD©aBlock
(
buf„r_t
 *
§c
, *
buf
)

278 
cou¡
;

280 i‡(!
	`RódOK
(
§c
, &
cou¡
, 1))

282 
ZîoD©aBlock
 = 
cou¡
 == 0;

284 i‡((
cou¡
 !0Ë&& (!
	`RódOK
(
§c
, 
buf
, count)))

286  
cou¡
;

287 
	}
}

290 
	$GëCode
(
buf„r_t
 *
§c
, 
code_size
, 
Êag
)

292 
buf
[280];

293 
curbô
, 
œ°bô
, 
d⁄e
, 
œ°_byã
;

294 
i
, 
j
, 
ªt
;

295 
cou¡
;

297 i‡(
Êag
) {

298 
curbô
 = 0;

299 
œ°bô
 = 0;

300 
d⁄e
 = 
FALSE
;

303 i‡((
curbô
 + 
code_size
Ë>
œ°bô
) {

304 i‡(
d⁄e
) {

305 i‡(
curbô
 >
œ°bô
)

306 
	`EPRINTF
("GdDecodeGIF: bad decode\n");

309 
buf
[0] = buf[
œ°_byã
 - 2];

310 
buf
[1] = buf[
œ°_byã
 - 1];

312 i‡((
cou¡
 = 
	`GëD©aBlock
(
§c
, &
buf
[2])) == 0)

313 
d⁄e
 = 
TRUE
;

315 
œ°_byã
 = 2 + 
cou¡
;

316 
curbô
 = (curbô - 
œ°bô
) + 16;

317 
œ°bô
 = (2 + 
cou¡
) * 8;

319 
ªt
 = 0;

320 
i
 = 
curbô
, 
j
 = 0; j < 
code_size
; ++i, ++j)

321 
ªt
 |((
buf
[
i
 / 8] & (1 << (ò% 8))Ë!0Ë<< 
j
;

323 
curbô
 +
code_size
;

325  
ªt
;

326 
	}
}

329 
	$LWZRódByã
(
buf„r_t
 *
§c
, 
Êag
, 
öput_code_size
)

331 
code
, 
öcode
;

332 
i
;

333 
‰esh
 = 
FALSE
;

334 
code_size
, 
£t_code_size
;

335 
max_code
, 
max_code_size
;

336 
fú°code
, 
ﬁdcode
;

337 
˛ór_code
, 
íd_code
;

338 
èbÀ
[2][(1 << 
MAX_LWZ_BITS
)];

339 
°ack
[(1 << (
MAX_LWZ_BITS
)Ë* 2], *
•
;

341 i‡(
Êag
) {

342 
£t_code_size
 = 
öput_code_size
;

343 
code_size
 = 
£t_code_size
 + 1;

344 
˛ór_code
 = 1 << 
£t_code_size
;

345 
íd_code
 = 
˛ór_code
 + 1;

346 
max_code_size
 = 2 * 
˛ór_code
;

347 
max_code
 = 
˛ór_code
 + 2;

349 
	`GëCode
(
§c
, 0, 
TRUE
);

351 
‰esh
 = 
TRUE
;

353 
i
 = 0; i < 
˛ór_code
; ++i) {

354 
èbÀ
[0][
i
] = 0;

355 
èbÀ
[1][
i
] = i;

357 ; 
i
 < (1 << 
MAX_LWZ_BITS
); ++i)

358 
èbÀ
[0][
i
] =Åable[1][0] = 0;

360 
•
 = 
°ack
;

363 } i‡(
‰esh
) {

364 
‰esh
 = 
FALSE
;

366 
fú°code
 = 
ﬁdcode
 = 
	`GëCode
(
§c
, 
code_size
, 
FALSE
);

367 } 
fú°code
 =
˛ór_code
);

368  
fú°code
;

370 i‡(
•
 > 
°ack
)

371  *--
•
;

373 (
code
 = 
	`GëCode
(
§c
, 
code_size
, 
FALSE
)) >= 0) {

374 i‡(
code
 =
˛ór_code
) {

375 
i
 = 0; i < 
˛ór_code
; ++i) {

376 
èbÀ
[0][
i
] = 0;

377 
èbÀ
[1][
i
] = i;

379 ; 
i
 < (1 << 
MAX_LWZ_BITS
); ++i)

380 
èbÀ
[0][
i
] =Åable[1][i] = 0;

381 
code_size
 = 
£t_code_size
 + 1;

382 
max_code_size
 = 2 * 
˛ór_code
;

383 
max_code
 = 
˛ór_code
 + 2;

384 
•
 = 
°ack
;

385 
fú°code
 = 
ﬁdcode
 = 
	`GëCode
(
§c
, 
code_size
, 
FALSE
);

386  
fú°code
;

387 } i‡(
code
 =
íd_code
) {

388 
cou¡
;

389 
buf
[260];

391 i‡(
ZîoD©aBlock
)

394 (
cou¡
 = 
	`GëD©aBlock
(
§c
, 
buf
)) > 0);

396 i‡(
cou¡
 != 0) {

403 
öcode
 = 
code
;

405 i‡(
code
 >
max_code
) {

406 *
•
++ = 
fú°code
;

407 
code
 = 
ﬁdcode
;

409 
code
 >
˛ór_code
) {

410 *
•
++ = 
èbÀ
[1][
code
];

411 i‡(
code
 =
èbÀ
[0][code])

412 
	`EPRINTF
("GdDecodeGIF: circularÅableÉntry\n");

413 
code
 = 
èbÀ
[0][code];

416 *
•
++ = 
fú°code
 = 
èbÀ
[1][
code
];

418 i‡((
code
 = 
max_code
Ë< (1 << 
MAX_LWZ_BITS
)) {

419 
èbÀ
[0][
code
] = 
ﬁdcode
;

420 
èbÀ
[1][
code
] = 
fú°code
;

421 ++
max_code
;

422 i‡((
max_code
 >
max_code_size
) &&

423 (
max_code_size
 < (1 << 
MAX_LWZ_BITS
))) {

424 
max_code_size
 *= 2;

425 ++
code_size
;

428 
ﬁdcode
 = 
öcode
;

430 i‡(
•
 > 
°ack
)

431  *--
•
;

433  
code
;

434 
	}
}

437 
	$RódImage
(
buf„r_t
* 
§c
, 
PMWIMAGEHDR
 
pimage
, 
Àn
, 
height
, 
cm≠Size
,

438 
cm≠
[3][
MAXCOLORMAPSIZE
],

439 
gøy
, 
öãæa˚
, 
ign‹e
)

441 
c
;

442 
i
, 
v
;

443 
xpos
 = 0, 
ypos
 = 0, 
∑ss
 = 0;

448 i‡(!
	`RódOK
(
§c
, &
c
, 1)) {

449 
	`EPRINTF
("GdDecodeGIF: EOF on image data\n");

452 i‡(
	`LWZRódByã
(
§c
, 
TRUE
, 
c
) < 0) {

453 
	`EPRINTF
("GdDecodeGIF:ÉrrorÑeading image\n");

460 i‡(
ign‹e
) {

461 
	`LWZRódByã
(
§c
, 
FALSE
, 
c
) >= 0);

465 
pimage
->
width
 = 
Àn
;

466 
pimage
->
height
 = height;

467 
pimage
->
∂™es
 = 1;

468 
pimage
->
bµ
 = 8;

469 
	`GdCompuãImagePôch
(8, 
Àn
, &
pimage
->
pôch
, &pimage->
byã•îpixñ
);

470 
pimage
->
com¥essi⁄
 = 0;

471 
pimage
->
∑lsize
 = 
cm≠Size
;

472 
pimage
->
∑Àâe
 = 
	`mÆloc
(256*(
MWPALENTRY
));

473 
pimage
->
imagebôs
 = 
	`mÆloc
(
height
*pimage->
pôch
);

474 if(!
pimage
->
imagebôs
 || !pimage->
∑Àâe
)

477 
i
 = 0; i < 
cm≠Size
; i++) {

480 
pimage
->
∑Àâe
[
i
].
r
 = 
cm≠
[
CM_RED
][i];

481 
pimage
->
∑Àâe
[
i
].
g
 = 
cm≠
[
CM_GREEN
][i];

482 
pimage
->
∑Àâe
[
i
].
b
 = 
cm≠
[
CM_BLUE
][i];

485 (
v
 = 
	`LWZRódByã
(
§c
, 
FALSE
, 
c
)) >= 0) {

486 
pimage
->
imagebôs
[
ypos
 *Öimage->
pôch
 + 
xpos
] = 
v
;

488 ++
xpos
;

489 i‡(
xpos
 =
Àn
) {

490 
xpos
 = 0;

491 i‡(
öãæa˚
) {

492 
∑ss
) {

495 
ypos
 += 8;

498 
ypos
 += 4;

501 
ypos
 += 2;

505 i‡(
ypos
 >
height
) {

506 ++
∑ss
;

507 
∑ss
) {

509 
ypos
 = 4;

512 
ypos
 = 2;

515 
ypos
 = 1;

518 
föi
;

522 ++
ypos
;

525 i‡(
ypos
 >
height
)

529 
föi
:

531 
	}
}

	@engine/image_jpeg.c

37 
	~<°dio.h
>

38 
	~<°dlib.h
>

39 
	~<°rög.h
>

40 
	~<uni°d.h
>

41 
	~<f˙é.h
>

42 
	~<˘y≥.h
>

43 
	~<sys/ty≥s.h
>

44 
	~<sys/°©.h
>

45 
	~"devi˚.h
"

46 
	~"sw≠.h
"

48 #i‡
MW_FEATURE_IMAGES
 && 
deföed
(
HAVE_JPEG_SUPPORT
)

49 
	~"j≥glib.h
"

51 
buf„r_t
 *
	gö±r
;

54 
	$öô_sour˚
(
j_decom¥ess_±r
 
cöfo
)

56 
cöfo
->
§c
->
√xt_öput_byã
 = 
ö±r
->
°¨t
;

57 
cöfo
->
§c
->
byãs_ö_buf„r
 = 
ö±r
->
size
;

58 
	}
}

61 
	$fûl_öput_buf„r
(
j_decom¥ess_±r
 
cöfo
)

64 
	}
}

67 
	$skù_öput_d©a
(
j_decom¥ess_±r
 
cöfo
, 
num_byãs
)

69 i‡(
num_byãs
 >
ö±r
->
size
)

71 
cöfo
->
§c
->
√xt_öput_byã
 +
num_byãs
;

72 
cöfo
->
§c
->
byãs_ö_buf„r
 -
num_byãs
;

73 
	}
}

75 
boﬁón


76 
	$ªsync_to_ª°¨t
(
j_decom¥ess_±r
 
cöfo
, 
desúed
)

78  
	`j≥g_ªsync_to_ª°¨t
(
cöfo
, 
desúed
);

79 
	}
}

82 
	$ãrm_sour˚
(
j_decom¥ess_±r
 
cöfo
)

85 
	}
}

88 
	$GdDecodeJPEG
(
buf„r_t
 * 
§c
, 
PMWIMAGEHDR
 
pimage
, 
PSD
 
psd
, 
MWBOOL
 
Á°_gøysˇÀ
)

90 
i
;

91 
ªt
 = 2;

92 
magic
[8];

93 
j≥g_sour˚_mgr
 
smgr
;

94 
j≥g_decom¥ess_°ru˘
 
cöfo
;

95 
j≥g_îr‹_mgr
 
jîr
;

96 #i‡
FASTJPEG


97 
MWPALENTRY
 
mw°d∑l8
[256];

99 
MWPALENTRY
 
∑Àâe
[256];

103 
	`GdImageBuf„rSìkTo
(
§c
, 0UL);

104 i‡(
	`GdImageBuf„rRód
(
§c
, 
magic
, 2) != 2

105 || 
magic
[0] != 0xFF || magic[1] != 0xD8)

108 i‡(
	`GdImageBuf„rRód
(
§c
, 
magic
, 8) != 8

109 || (
	`°∫cmp
(
magic
+4, "JFIF", 4) != 0

110 && 
	`°∫cmp
(
magic
+4, "Exif", 4) != 0))

113 
	`GdImageBuf„rSìkTo
(
§c
, 0);

114 
pimage
->
imagebôs
 = 
NULL
;

115 
pimage
->
∑Àâe
 = 
NULL
;

119 
cöfo
.
îr
 = 
	`j≥g_°d_îr‹
(&
jîr
);

122 
	`j≥g_¸óã_decom¥ess
(&
cöfo
);

125 
smgr
.
öô_sour˚
 = (*) init_source;

126 
smgr
.
fûl_öput_buf„r
 = (*) fill_input_buffer;

127 
smgr
.
skù_öput_d©a
 = (*) skip_input_data;

128 
smgr
.
ªsync_to_ª°¨t
 = (*)Ñesync_to_restart;

129 
smgr
.
ãrm_sour˚
 = (*)Åerm_source;

130 
cöfo
.
§c
 = &
smgr
;

131 
ö±r
 = 
§c
;

137 
	`j≥g_ªad_hódî
(&
cöfo
, 
TRUE
);

139 
cöfo
.
out_cﬁ‹_•a˚
 = 
Á°_gøysˇÀ
? 
JCS_GRAYSCALE
: 
JCS_RGB
;

140 
cöfo
.
qu™tize_cﬁ‹s
 = 
FALSE
;

142 #i‡
FASTJPEG


143 
Á°j≥g
;

145 i‡(!
Á°_gøysˇÀ
) {

146 i‡(
psd
->
pixty≥
 =
MWPF_PALETTE
) {

147 
Á°j≥g
:

148 
cöfo
.
qu™tize_cﬁ‹s
 = 
TRUE
;

149 #i‡
FASTJPEG


150 
cöfo
.
a˘uÆ_numbî_of_cﬁ‹s
 = 256;

153 
cöfo
.
a˘uÆ_numbî_of_cﬁ‹s
 =

154 
	`GdGëPÆëã
(
psd
, 0,Ösd->
ncﬁ‹s
, 
∑Àâe
);

158 
cöfo
.
cﬁ‹m≠
 = (*cöfo.
mem
->
Æloc_ßºay
)

159 ((
j_comm⁄_±r
Ë&
cöfo
, 
JPOOL_IMAGE
,

160 (
JDIMENSION
)
cöfo
.
a˘uÆ_numbî_of_cﬁ‹s
,

161 (
JDIMENSION
)3);

164 
i
 = 0; i < 
cöfo
.
a˘uÆ_numbî_of_cﬁ‹s
; ++i) {

165 #i‡
FASTJPEG


166 
cöfo
.
cﬁ‹m≠
[0][
i
] = 
mw°d∑l8
[i].
r
;

167 
cöfo
.
cﬁ‹m≠
[1][
i
] = 
mw°d∑l8
[i].
g
;

168 
cöfo
.
cﬁ‹m≠
[2][
i
] = 
mw°d∑l8
[i].
b
;

170 
cöfo
.
cﬁ‹m≠
[0][
i
] = 
∑Àâe
[i].
r
;

171 
cöfo
.
cﬁ‹m≠
[1][
i
] = 
∑Àâe
[i].
g
;

172 
cöfo
.
cﬁ‹m≠
[2][
i
] = 
∑Àâe
[i].
b
;

178 
cöfo
.
qu™tize_cﬁ‹s
 = 
TRUE
;

179 
cöfo
.
out_cﬁ‹_•a˚
 = 
JCS_GRAYSCALE
;

180 
cöfo
.
desúed_numbî_of_cﬁ‹s
 = 256;

182 
	`j≥g_ˇlc_ouçut_dimísi⁄s
(&
cöfo
);

184 
pimage
->
width
 = 
cöfo
.
ouçut_width
;

185 
pimage
->
height
 = 
cöfo
.
ouçut_height
;

186 
pimage
->
∂™es
 = 1;

187 #i‡
FASTJPEG


188 
pimage
->
bµ
 = 8;

190 
pimage
->
bµ
 = (
Á°_gøysˇÀ
 || 
psd
->
pixty≥
 =
MWPF_PALETTE
)?

191 8: 
cöfo
.
ouçut_comp⁄íts
*8;

193 
	`GdCompuãImagePôch
(
pimage
->
bµ
,Öimage->
width
, &pimage->
pôch
,

194 &
pimage
->
byã•îpixñ
);

195 
pimage
->
com¥essi⁄
 = 
MWIMAGE_RGB
;

196 
pimage
->
∑lsize
 = (pimage->
bµ
 == 8)? 256: 0;

197 
pimage
->
imagebôs
 = 
	`mÆloc
’image->
pôch
 *Öimage->
height
);

198 if(!
pimage
->
imagebôs
)

199 
îr
;

200 
pimage
->
∑Àâe
 = 
NULL
;

202 if(
pimage
->
bµ
 <= 8) {

203 
pimage
->
∑Àâe
 = 
	`mÆloc
(256*(
MWPALENTRY
));

204 if(!
pimage
->
∑Àâe
)

205 
îr
;

206 i‡(
Á°_gøysˇÀ
) {

207 
i
=0; i<256; ++i) {

208 
MWPALENTRY
 
≥
;

210 
≥
.
r
 =Öe.
g
 =Öe.
b
 = 
i
;

211 
pimage
->
∑Àâe
[
i
] = 
≥
;

214 #i‡
FASTJPEG


216 
i
=0; i<256; ++i)

217 
pimage
->
∑Àâe
[
i
] = 
mw°d∑l8
[i];

223 
	`j≥g_°¨t_decom¥ess
 (&
cöfo
);

226 
cöfo
.
ouçut_sˇ∆öe
 < cöfo.
ouçut_height
) {

227 
JSAMPROW
 
row±r
[1];

228 
row±r
[0] = (
JSAMPROW
)(
pimage
->
imagebôs
 +

229 
cöfo
.
ouçut_sˇ∆öe
 * 
pimage
->
pôch
);

230 
	`j≥g_ªad_sˇ∆öes
 (&
cöfo
, 
row±r
, 1);

232 
ªt
 = 1;

234 
îr
:

236 
	`j≥g_föish_decom¥ess
 (&
cöfo
);

239 
	`j≥g_de°roy_decom¥ess
 (&
cöfo
);

244  
ªt
;

245 
	}
}

	@engine/image_png.c

13 
	~<°dio.h
>

14 
	~<°dlib.h
>

15 
	~<°rög.h
>

16 
	~<uni°d.h
>

17 
	~<f˙é.h
>

18 
	~<˘y≥.h
>

19 
	~<sys/ty≥s.h
>

20 
	~<sys/°©.h
>

21 
	~"devi˚.h
"

22 
	~"sw≠.h
"

24 #i‡
MW_FEATURE_IMAGES
 && 
deföed
(
HAVE_PNG_SUPPORT
)

25 
	~<≤g.h
>

28 #i‚de‡
≤g_jmpbuf


29 
	#≤g_jmpbuf
(
≤g_±r
Ë(’ng_±r)->
jmpbuf
)

	)

34 
	$≤g_ªad_buf„r
(
≤g_°ru˘p
 
p°ru˘
, 
≤g_byãp
 
poöãr
, 
≤g_size_t
 
size
)

36 
	`GdImageBuf„rRód
(
p°ru˘
->
io_±r
, 
poöãr
, 
size
);

37 
	}
}

40 
	$GdDecodePNG
(
buf„r_t
 * 
§c
, 
PMWIMAGEHDR
 
pimage
)

42 
hdr
[8], **
rows
;

43 
≤g_°ru˘p
 
°©e
;

44 
≤g_öf›
 
≤göfo
;

45 
≤g_uöt_32
 
width
, 
height
;

46 
bô_dïth
, 
cﬁouπy≥
, 
i
;

48 
	`GdImageBuf„rSìkTo
(
§c
, 0UL);

50 if(
	`GdImageBuf„rRód
(
§c
, 
hdr
, 8) != 8)

53 if(
	`≤g_sig_cmp
(
hdr
, 0, 8))

56 if(!(
°©e
 = 
	`≤g_¸óã_ªad_°ru˘
(
PNG_LIBPNG_VER_STRING
, 
NULL
,

57 
NULL
, NULL))Ë
nomem
;

59 if(!(
≤göfo
 = 
	`≤g_¸óã_öfo_°ru˘
(
°©e
))) {

60 
	`≤g_de°roy_ªad_°ru˘
(&
°©e
, 
NULL
, NULL);

61 
nomem
;

64 if(
	`£tjmp
(
	`≤g_jmpbuf
(
°©e
))) {

65 
	`≤g_de°roy_ªad_°ru˘
(&
°©e
, &
≤göfo
, 
NULL
);

70 
	`≤g_£t_ªad_‚
(
°©e
, 
§c
, 
≤g_ªad_buf„r
);

73 
	`≤g_£t_sig_byãs
(
°©e
, 8);

74 
	`≤g_ªad_öfo
(
°©e
, 
≤göfo
);

75 
	`≤g_gë_IHDR
(
°©e
, 
≤göfo
, &
width
, &
height
, &
bô_dïth
, &
cﬁouπy≥
,

76 
NULL
, NULL, NULL);

78 
pimage
->
width
 = width;

79 
pimage
->
height
 = height;

80 
pimage
->
bµ
 = 24;

81 
pimage
->
∂™es
 = 1;

82 
	`GdCompuãImagePôch
(
pimage
->
bµ
,Öimage->
width
, &pimage->
pôch
,

83 &
pimage
->
byã•îpixñ
);

84 
pimage
->
com¥essi⁄
 = 
MWIMAGE_RGB
;

85 if(!(
pimage
->
imagebôs
 = 
	`mÆloc
’image->
pôch
 *Öimage->
height
))) {

86 
	`≤g_de°roy_ªad_°ru˘
(&
°©e
, &
≤göfo
, 
NULL
);

87 
nomem
;

89 if(!(
rows
 = 
	`mÆloc
(
pimage
->
height
 * (*)))) {

90 
	`≤g_de°roy_ªad_°ru˘
(&
°©e
, &
≤göfo
, 
NULL
);

91 
nomem
;

93 
i
 = 0; i < 
pimage
->
height
; i++)

94 
rows
[
i
] = 
pimage
->
imagebôs
 + (ò*Öimage->
pôch
);

96 
	`≤g_£t_ex∑nd
(
°©e
);

97 if(
bô_dïth
 == 16)

98 
	`≤g_£t_°rù_16
(
°©e
);

99 if(
cﬁouπy≥
 & 
PNG_COLOR_MASK_ALPHA
)

100 
	`≤g_£t_°rù_Æpha
(
°©e
);

101 if(
cﬁouπy≥
 =
PNG_COLOR_TYPE_GRAY
 ||

102 
cﬁouπy≥
 =
PNG_COLOR_TYPE_GRAY_ALPHA
)

103 
	`≤g_£t_gøy_to_rgb
(
°©e
);

105 
	`≤g_ªad_image
(
°©e
, 
rows
);

107 
	`≤g_ªad_íd
(
°©e
, 
NULL
);

108 
	`‰ì
(
rows
);

109 
	`≤g_de°roy_ªad_°ru˘
(&
°©e
, &
≤göfo
, 
NULL
);

113 
nomem
:

114 
	`EPRINTF
("GdDecodePNG: Out of memory\n");

116 
	}
}

	@engine/image_pnm.c

7 
	~<°dio.h
>

8 
	~<°dlib.h
>

9 
	~<°rög.h
>

10 
	~<uni°d.h
>

11 
	~<f˙é.h
>

12 
	~<˘y≥.h
>

13 
	~<sys/ty≥s.h
>

14 
	~<sys/°©.h
>

15 
	~"devi˚.h
"

16 
	~"sw≠.h
"

18 #i‡
MW_FEATURE_IMAGES
 && 
deföed
(
HAVE_PNM_SUPPORT
)

21 
	mPNM_TYPE_NOTPNM
,

22 
	mPNM_TYPE_PBM
,

23 
	mPNM_TYPE_PGM
,

24 
	mPNM_TYPE_PPM


28 
	$GdDecodePNM
(
buf„r_t
 *
§c
, 
PMWIMAGEHDR
 
pimage
)

30 
buf
[256], *
p
;

31 
ty≥
 = 
PNM_TYPE_NOTPNM
, 
bö¨y
 = 0, 
gŸhdrs
 = 0, 
sˇÀ
 = 0;

32 
ch
, 
x
 = 0, 
y
 = 0, 
i
, 
n
, 
mask
, 
cﬁ1
, 
cﬁ2
, 
cﬁ3
;

34 
	`GdImageBuf„rSìkTo
(
§c
, 0UL);

36 if(!
	`GdImageBuf„rGëSåög
(
§c
,
buf
, 4))

39 if(!
	`°rcmp
("P1\n", 
buf
)Ë
ty≥
 = 
PNM_TYPE_PBM
;

40 if(!
	`°rcmp
("P2\n", 
buf
)Ë
ty≥
 = 
PNM_TYPE_PGM
;

41 if(!
	`°rcmp
("P3\n", 
buf
)Ë
ty≥
 = 
PNM_TYPE_PPM
;

42 if(!
	`°rcmp
("P4\n", 
buf
)) {

43 
ty≥
 = 
PNM_TYPE_PBM
;

44 
bö¨y
 = 1;

46 if(!
	`°rcmp
("P5\n", 
buf
)) {

47 
ty≥
 = 
PNM_TYPE_PGM
;

48 
bö¨y
 = 1;

50 if(!
	`°rcmp
("P6\n", 
buf
)) {

51 
ty≥
 = 
PNM_TYPE_PPM
;

52 
bö¨y
 = 1;

55 if(
ty≥
 =
PNM_TYPE_NOTPNM
)

58 
n
 = 0;

59 (
p
 = 
	`GdImageBuf„rGëSåög
(
§c
, 
buf
, 256))) {

60 if(*
buf
 == '#') ;

61 if(
ty≥
 =
PNM_TYPE_PBM
) {

62 if(
	`ssˇnf
(
buf
, "%ò%i", &
pimage
->
width
,

63 &
pimage
->
height
) == 2) {

64 
pimage
->
bµ
 = 1;

65 
gŸhdrs
 = 1;

66 if(!(
pimage
->
∑Àâe
 = 
	`mÆloc
(

67 (
MWPALENTRY
) * 2))) {

68 
	`EPRINTF
("Out of memory\n");

71 
pimage
->
∑lsize
 = 2;

72 
pimage
->
∑Àâe
[0].
r
 = 0xff;

73 
pimage
->
∑Àâe
[0].
g
 = 0xff;

74 
pimage
->
∑Àâe
[0].
b
 = 0xff;

75 
pimage
->
∑Àâe
[1].
r
 = 0;

76 
pimage
->
∑Àâe
[1].
g
 = 0;

77 
pimage
->
∑Àâe
[1].
b
 = 0;

81 if((
ty≥
 =
PNM_TYPE_PGM
Ë|| (ty≥ =
PNM_TYPE_PPM
)) {

82 if(!
n
++) {

83 if(
	`ssˇnf
(
buf
, "%ò%i", &
pimage
->
width
,

84 &
pimage
->
height
) != 2) ;

86 if(
	`ssˇnf
(
buf
, "%i", &
i
) != 1) ;

87 
pimage
->
bµ
 = 24;

88 if(
i
 > 255) {

89 
	`EPRINTF
("GdDecodePNM: PPM files must be "

93 
sˇÀ
 = 7, 
n
 = 2; scale; scale--,Ç *= 2)

94 if(
i
 < 
n
) ;

95 
gŸhdrs
 = 1;

101 if(!
gŸhdrs
) {

102 
	`EPRINTF
("GdDecodePNM: bad image headers\n");

103 if(
pimage
->
∑Àâe
)

104 
	`‰ì
(
pimage
->
∑Àâe
);

108 
pimage
->
∂™es
 = 1;

109 
	`GdCompuãImagePôch
(
pimage
->
bµ
,Öimage->
width
, &pimage->
pôch
,

110 &
pimage
->
byã•îpixñ
);

111 
pimage
->
com¥essi⁄
 = 
MWIMAGE_RGB
;

112 if(!(
pimage
->
imagebôs
 = 
	`mÆloc
’image->
pôch
 *Öimage->
height
))) {

113 
	`EPRINTF
("GdDecodePNM: couldn'tállocate memory for image\n");

114 if(
pimage
->
∑Àâe
)

115 
	`‰ì
(
pimage
->
∑Àâe
);

119 
p
 = 
pimage
->
imagebôs
;

121 if(
ty≥
 =
PNM_TYPE_PBM
) {

122 if(
bö¨y
) {

123 
x
 = 0;

124 
y
 = 0;

125 (
ch
 = 
	`GdImageBuf„rGëCh¨
(
§c
)Ë!
EOF
) {

126 
i
 = 0; i < 8; i++) {

127 
mask
 = 0x80 >> 
i
;

128 if(
ch
 & 
mask
Ë*
p
 |= mask;

129 *
p
 &~
mask
;

130 if(++
x
 =
pimage
->
width
) {

131 if(++
y
 =
pimage
->
height
)

133 
p
 = 
pimage
->
imagebôs
 - 1 +

134 (
y
 * 
pimage
->
pôch
);

135 
x
 = 0;

139 
p
++;

142 
n
 = 0;

143 (
ch
 = 
	`GdImageBuf„rGëCh¨
(
§c
)Ë!
EOF
) {

144 if(
	`is•a˚
(
ch
)) ;

145 
mask
 = 0x80 >> 
n
;

146 if(
ch
 ='1'Ë*
p
 |
mask
;

147 if(
ch
 ='0'Ë*
p
 &~
mask
;

148 
badd©a
;

149 if(++
n
 == 8) {

150 
n
 = 0;

151 
p
++;

153 if(++
x
 =
pimage
->
width
) {

154 if(++
y
 =
pimage
->
height
)

156 
p
 = 
pimage
->
imagebôs
 +

157 (
y
 * 
pimage
->
pôch
);

158 
n
 = 0;

159 
x
 = 0;

165 if(
ty≥
 =
PNM_TYPE_PGM
) {

166 if(
bö¨y
) {

167 if((
ch
 = 
	`GdImageBuf„rGëCh¨
(
§c
)Ë=
EOF
)

168 
badd©a
;

171 
badd©a
;

173 *
p
++ = 
ch
 << 
sˇÀ
;

174 *
p
++ = 
ch
 << 
sˇÀ
;

175 *
p
++ = 
ch
 << 
sˇÀ
;

177 if(
bö¨y
) {

178 if(((
cﬁ1
 = 
	`GdImageBuf„rGëCh¨
(
§c
)Ë=
EOF
) ||

179 ((
cﬁ2
 = 
	`GdImageBuf„rGëCh¨
(
§c
)Ë=
EOF
) ||

180 ((
cﬁ3
 = 
	`GdImageBuf„rGëCh¨
(
§c
)Ë=
EOF
))

181 
badd©a
;

184 
badd©a
;

186 *
p
++ = 
cﬁ1
 << 
sˇÀ
;

187 *
p
++ = 
cﬁ2
 << 
sˇÀ
;

188 *
p
++ = 
cﬁ3
 << 
sˇÀ
;

190 if(++
x
 =
pimage
->
width
) {

191 if(++
y
 =
pimage
->
height
)  1;

192 
p
 = 
pimage
->
imagebôs
 + (
y
 *Öimage->
pôch
);

193 
x
 = 0;

198 
badd©a
:

199 
	`EPRINTF
("GdDecodePNM: bad image data\n");

200 
	`‰ì
(
pimage
->
imagebôs
);

201 if(
pimage
->
∑Àâe
)

202 
	`‰ì
(
pimage
->
∑Àâe
);

204 
	}
}

	@engine/image_tiff.c

6 
	~<°dio.h
>

7 
	~<°dlib.h
>

8 
	~<°rög.h
>

9 
	~<uni°d.h
>

10 
	~<f˙é.h
>

11 
	~<˘y≥.h
>

12 
	~<sys/ty≥s.h
>

13 
	~<sys/°©.h
>

14 
	~"devi˚.h
"

15 
	~"sw≠.h
"

17 #i‡
MW_FEATURE_IMAGES
 && 
deföed
(
HAVE_TIFF_SUPPORT
)

18 
	~<tiffio.h
>

21 
	$GdDecodeTIFF
(*
∑th
, 
PMWIMAGEHDR
 
pimage
)

23 
TIFF
 *
tif
;

24 
w
, 
h
;

25 
size
;

27 
tif
 = 
	`TIFFO≥n
(
∑th
, "r");

28 i‡(!
tif
)

31 
	`TIFFGëFõld
(
tif
, 
TIFFTAG_IMAGEWIDTH
, &
w
);

32 
	`TIFFGëFõld
(
tif
, 
TIFFTAG_IMAGELENGTH
, &
h
);

33 
size
 = 
w
 * 
h
;

34 
pimage
->
width
 = 
w
;

35 
pimage
->
height
 = 
h
;

36 
pimage
->
bµ
 = 32;

37 
pimage
->
pôch
 = 
w
 * (
uöt32
);

38 
pimage
->
byã•îpixñ
 = 4;

39 
pimage
->
∂™es
 = 1;

40 
pimage
->
∑lsize
 = 0;

41 
pimage
->
∑Àâe
 = 
NULL
;

44 
pimage
->
com¥essi⁄
 = 
MWIMAGE_RGB
 | 
MWIMAGE_ALPHA_CHANNEL
 |

45 
MWIMAGE_UPSIDEDOWN
;

48 i‡((
pimage
->
imagebôs
 = 
	`mÆloc
(
size
 * (
uöt32
))Ë=
NULL
)

49 
îr
;

51 
	`TIFFRódRGBAImage
(
tif
, 
pimage
->
width
,Öimage->
height
,

52 (
uöt32
 *)
pimage
->
imagebôs
, 0);

57 
i
;

58 
uöt32
 *
rgba
;

59 
uöt32
 
rgba_r
, 
rgba_g
, 
rgba_b
, 
rgba_a
;

60 
rgba
 = (
uöt32
 *)
pimage
->
imagebôs
;

61 
i
 = 0; i < 
size
; ++i, ++
rgba
) {

62 i‡((
rgba_a
 = 
	`TIFFGëA
(*
rgba
) + 1) == 256)

64 
rgba_r
 = (
	`TIFFGëR
(*
rgba
Ë* 
rgba_a
)>>8;

65 
rgba_g
 = (
	`TIFFGëG
(*
rgba
Ë* 
rgba_a
)>>8;

66 
rgba_b
 = (
	`TIFFGëB
(*
rgba
Ë* 
rgba_a
)>>8;

67 *
rgba
 = 0xff000000|(
rgba_b
<<16)|(
rgba_g
<<8)|(
rgba_r
);

71 
	`TIFFClo£
(
tif
);

74 
îr
:

75 
	`EPRINTF
("GdDecodeTIFF: imageÜoadingÉrror\n");

76 i‡(
tif
)

77 
	`TIFFClo£
(
tif
);

78 if(
pimage
->
imagebôs
)

79 
	`‰ì
(
pimage
->
imagebôs
);

80 if(
pimage
->
∑Àâe
)

81 
	`‰ì
(
pimage
->
∑Àâe
);

83 
	}
}

	@engine/image_xpm.c

6 
	~<°dio.h
>

7 
	~<°dlib.h
>

8 
	~<°rög.h
>

9 
	~<uni°d.h
>

10 
	~<f˙é.h
>

11 
	~<˘y≥.h
>

12 
	~<sys/ty≥s.h
>

13 
	~<sys/°©.h
>

14 
	~"devi˚.h
"

15 
	~"sw≠.h
"

17 #i‡
MW_FEATURE_IMAGES
 && 
deföed
(
HAVE_XPM_SUPPORT
)

19 
	sxpm_cm≠
 {

20 
	mm≠°r
[3];

21 
	m∑Àâe_íåy
;

22 
	mcﬁ‹
;

23 
xpm_cm≠
 *
	m√xt
;

29 
	$XPM_∑r£_cﬁ‹
(*
cﬁ‹
)

31 i‡(
cﬁ‹
[0] != '#') {

32 i‡(!
	`°rcmp
(
cﬁ‹
, "None"))

38 *
•å
 = 
cﬁ‹
 + 1;

39 
r°r
[5], 
g°r
[5], 
b°r
[5];

40 
r
, 
g
, 
b
;

42 
	`°æí
(
•å
)) {

44  
	`°πﬁ
(
•å
, 
NULL
, 16);

47 
	`°∫˝y
(
r°r
, 
•å
, 3);

48 
	`°∫˝y
(
g°r
, 
•å
 + 3, 3);

49 
	`°∫˝y
(
b°r
, 
•å
 + 6, 3);

51 
r°r
[3] = 0;

52 
g°r
[3] = 0;

53 
b°r
[3] = 0;

55 
r
 = 
	`°πﬁ
(
r°r
, 
NULL
, 16) >> 4;

56 
g
 = 
	`°πﬁ
(
g°r
, 
NULL
, 16) >> 4;

57 
b
 = 
	`°πﬁ
(
b°r
, 
NULL
, 16) >> 4;

58  (()(
r
 << 16 | 
g
 << 8 | 
b
));

61 
	`°∫˝y
(
r°r
, 
•å
, 4);

62 
	`°∫˝y
(
g°r
, 
•å
 + 4, 4);

63 
	`°∫˝y
(
b°r
, 
•å
 + 8, 4);

65 
r°r
[4] = 0;

66 
g°r
[4] = 0;

67 
b°r
[4] = 0;

69 
r
 = 
	`°πﬁ
(
r°r
, 
NULL
, 16) >> 8;

70 
g
 = 
	`°πﬁ
(
g°r
, 
NULL
, 16) >> 8;

71 
b
 = 
	`°πﬁ
(
b°r
, 
NULL
, 16) >> 8;

73  (()((
r
 & 0xFFË<< 16 | (
g
 & 0xFFË<< 8 | (
b
 & 0xFF)));

78 
	}
}

83 
	#LOAD_HEADER
 1

	)

84 
	#LOAD_COLORS
 2

	)

85 
	#LOAD_PALETTE
 3

	)

86 
	#LOAD_PIXELS
 4

	)

87 
	#LOAD_DONE
 5

	)

90 
	#XPM_MAGIC
 "/* XPM */"

	)

91 
	#XPM_TRANSCOLOR
 0x01000000

	)

94 
	$GdDecodeXPM
(
buf„r_t
 * 
§c
, 
PMWIMAGEHDR
 
pimage
, 
PSD
 
psd
)

96 
xpm_cm≠
 *
cﬁ‹hóp
 = 0;

97 
xpm_cm≠
 *
cﬁ‹m≠
[256];

98 *
imagïå
 = 0;

99 
MWSCREENINFO
 
söfo
;

100 
xlöe
[300];

101 
dlöe
[300];

102 *
c
;

103 
a
;

104 
cﬁ
, 
row
, 
cﬁ‹s
, 
˝p
;

105 
ö_cﬁ‹
 = 0;

106 
ªad_xlöe
 = 0;

107 
°©us
 = 
LOAD_HEADER
;

110 
	`GdGëS¸ìnInfo
(
psd
, &
söfo
);

112 
a
 = 0;á < 256;á++)

113 
cﬁ‹m≠
[
a
] = 0;

115 
pimage
->
imagebôs
 = 
NULL
;

116 
pimage
->
∑Àâe
 = 
NULL
;

119 
	`GdImageBuf„rSìkTo
(
§c
, 0UL);

120 
	`GdImageBuf„rGëSåög
(
§c
, 
xlöe
, 300);

123 
xlöe
[
	`°æí
(xline) - 1] = 0;

126 i‡(
	`°∫cmp
(
xlöe
, 
XPM_MAGIC
, (XPM_MAGIC)))

129 !
	`GdImageBuf„rEOF
(
§c
)) {

131 
	`GdImageBuf„rGëSåög
(
§c
, 
xlöe
, 300);

132 
xlöe
[
	`°æí
(xline) - 1] = 0;

135 i‡(
xlöe
[0] == '/' && xline[1] == '*')

138 i‡(
xlöe
[0] != '\"')

142 
c
 = 
xlöe
 + 1, 
a
 = 0; *c != '\"' && *c != 0; c++,á++)

143 
dlöe
[
a
] = *
c
;

145 
dlöe
[
a
] = 0;

148 i‡(
°©us
 =
LOAD_HEADER
) {

149 
	`ssˇnf
(
dlöe
, "%ò%ò%ò%i", &
cﬁ
, &
row
, &
cﬁ‹s
, &
˝p
);

151 
pimage
->
width
 = 
cﬁ
;

152 
pimage
->
height
 = 
row
;

153 
pimage
->
∂™es
 = 1;

155 i‡(
söfo
.
bµ
 <= 8) {

156 
pimage
->
bµ
 = 
söfo
.bpp;

157 
pimage
->
com¥essi⁄
 = 0;

158 
pimage
->
å™scﬁ‹
 = -1;

160 
pimage
->
bµ
 = 32;

161 
pimage
->
å™scﬁ‹
 = 
XPM_TRANSCOLOR
;

162 
pimage
->
com¥essi⁄
 = 
MWIMAGE_BGR
;

165 
pimage
->
∑lsize
 = 
cﬁ‹s
;

166 
	`GdCompuãImagePôch
(
pimage
->
bµ
, 
cﬁ
, &pimage->
pôch
,

167 &
pimage
->
byã•îpixñ
);

169 
pimage
->
imagebôs
 = 
	`mÆloc
’image->
pôch
 *Öimage->
height
);

170 
imagïå
 = (*Ë
pimage
->
imagebôs
;

173 
cﬁ‹hóp
 = (
xpm_cm≠
 *Ë
	`mÆloc
(
cﬁ‹s
 *

174 (
xpm_cm≠
));

177 i‡(
söfo
.
bµ
 <= 8)

178 
pimage
->
∑Àâe
 = 
	`mÆloc
(256 * (
MWPALENTRY
));

180 i‡(!
cﬁ‹hóp
) {

181 
	`EPRINTF
("Couldn'tállocateány memory forÅhe colors\n");

185 
°©us
 = 
LOAD_COLORS
;

186 
ö_cﬁ‹
 = 0;

191 i‡(
°©us
 =
LOAD_COLORS
) {

192 
xpm_cm≠
 *
n
;

193 
t°r
[5];

194 
c°r
[256];

195 
m
;

197 
c
 = 
dlöe
;

201 
	`°∫˝y
(
t°r
, 
c
, 
˝p
);

203 
c
 +
˝p
;

204 ; *
c
 == '\t' || *c == ' '; c++)

208 
c
 += 2;

210 
t°r
[
˝p
] = 0;

215 
m
 = 
t°r
[0];

217 i‡(
cﬁ‹m≠
[
m
]) {

218 
n
 = 
cﬁ‹m≠
[
m
];

220 
n
->
√xt
)

221 
n
 =Ç->
√xt
;

222 
n
->
√xt
 = &
cﬁ‹hóp
[
ö_cﬁ‹
];

223 
n
 =Ç->
√xt
;

225 
cﬁ‹m≠
[
m
] = &
cﬁ‹hóp
[
ö_cﬁ‹
];

226 
n
 = 
cﬁ‹m≠
[
m
];

229 
n
->
√xt
 = 0;

232 
	`°∫˝y
(
n
->
m≠°r
, 
t°r
, 
˝p
);

233 
n
->
m≠°r
[
˝p
] = 0;

236 
n
->
∑Àâe_íåy
 = (Ë
ö_cﬁ‹
;

239 
	`ssˇnf
(
c
, "%65535s", 
c°r
);

242 
n
->
cﬁ‹
 = 
	`XPM_∑r£_cﬁ‹
(
c°r
);

247 i‡(
söfo
.
bµ
 <= 8) {

248 i‡(
n
->
cﬁ‹
 == -1) {

249 
pimage
->
å™scﬁ‹
 = 
ö_cﬁ‹
;

250 
n
->
cﬁ‹
 = -1;

253 
pimage
->
∑Àâe
[
ö_cﬁ‹
].
r
 =

254 (
n
->
cﬁ‹
 >> 16) & 0xFF;

255 
pimage
->
∑Àâe
[
ö_cﬁ‹
].
g
 =

256 (
n
->
cﬁ‹
 >> 8) & 0xFF;

257 
pimage
->
∑Àâe
[
ö_cﬁ‹
].
b
 = 
n
->
cﬁ‹
 & 0xFF;

259 i‡(
n
->
cﬁ‹
 == -1) {

260 
n
->
cﬁ‹
 = 
XPM_TRANSCOLOR
;

264 i‡(++
ö_cﬁ‹
 =
cﬁ‹s
) {

265 
ªad_xlöe
 = 0;

266 
°©us
 = 
LOAD_PIXELS
;

272 i‡(
°©us
 =
LOAD_PIXELS
) {

273 
byãcou¡
 = 0;

274 
bôcou¡
 = 0;

275 
dw‹dcﬁ‹
 = 0;

276 
i
;

277 
pxl°r
[3];

279 
c
 = 
dlöe
;

281 *
c
) {

282 
z
 = 0;

284 i‡(
˝p
 == 1) {

285 
z
 = *
c
;

287 i‡(!
cﬁ‹m≠
[
z
]) {

288 
	`EPRINTF
("Nÿcﬁ‹É¡ry f‹ (%c)\n", 
z
);

292 i‡(
söfo
.
bµ
 <= 8)

293 
dw‹dcﬁ‹
 = ()
cﬁ‹m≠
[
z
]->
∑Àâe_íåy
;

295 
dw‹dcﬁ‹
 = 
cﬁ‹m≠
[
z
]->
cﬁ‹
;

297 
c
++;

299 
xpm_cm≠
 *
n
;

302 
	`°∫˝y
(
pxl°r
, 
c
, 
˝p
);

303 
z
 = 
pxl°r
[0];

305 i‡(!
cﬁ‹m≠
[
z
]) {

306 
	`EPRINTF
("Nÿcﬁ‹É¡ry f‹ (%s)\n", 
pxl°r
);

310 
n
 = 
cﬁ‹m≠
[
z
];

312 
n
) {

313 i‡(!
°∫cmp


314 (
n
->
m≠°r
, 
pxl°r
, 
˝p
))

317 
n
 =Ç->
√xt
;

320 i‡(!
n
) {

321 
	`EPRINTF
("Nÿcﬁ‹ found f‹ (%s)\n", 
pxl°r
);

325 i‡(
söfo
.
bµ
 <= 8)

326 
dw‹dcﬁ‹
 = ()
n
->
∑Àâe_íåy
;

328 
dw‹dcﬁ‹
 = 
n
->
cﬁ‹
;

329 
c
 +
˝p
;

336 
söfo
.
bµ
) {

338 i‡(
bôcou¡
 == 0)

339 
imagïå
[0] = 0;

341 
imagïå
[0] |(
dw‹dcﬁ‹
 & 0x3Ë<< (4 - 
bôcou¡
);

342 
bôcou¡
++;

344 i‡(
bôcou¡
 == 4) {

345 
imagïå
++;

346 
byãcou¡
 +
pimage
->
byã•îpixñ
;

347 
bôcou¡
 = 0;

353 i‡(
bôcou¡
 == 0)

354 
imagïå
[0] = 0;

356 
imagïå
[0] |(
dw‹dcﬁ‹
 & 0xFË<< (2 - 
bôcou¡
);

357 
bôcou¡
++;

359 i‡(
bôcou¡
 == 2) {

360 
imagïå
++;

361 
byãcou¡
 +
pimage
->
byã•îpixñ
;

362 
bôcou¡
 = 0;

372 
i
 = 0; i < 
pimage
->
byã•îpixñ
; i++)

373 
imagïå
[
i
] = (
dw‹dcﬁ‹
 >> (8 * i)) & 0xFF;

375 
imagïå
 +
pimage
->
byã•îpixñ
;

376 
byãcou¡
 +
pimage
->
byã•îpixñ
;

379 #ifde‡
NOTUSED


381 
imagïå
[0] = (Ë(
dw‹dcﬁ‹
 & 0xFF);

382 
imagïå
 +
pimage
->
byã•îpixñ
;

383 
byãcou¡
 +
pimage
->
byã•îpixñ
;

389 
imagïå
[0] = (Ë(
dw‹dcﬁ‹
 >> 24) & 0xFF;

390 
imagïå
[1] = (Ë(
dw‹dcﬁ‹
 >> 16) & 0xFF;

391 
imagïå
[2] = (Ë(
dw‹dcﬁ‹
 >> 8) & 0xFF;

392 
imagïå
[3] = (Ë(
dw‹dcﬁ‹
 & 0xFF);

393 
imagïå
 +
pimage
->
byã•îpixñ
;

394 
byãcou¡
 +
pimage
->
byã•îpixñ
;

401 i‡(
byãcou¡
 < 
pimage
->
pôch
)

402 
i
 = 0; i < (
pimage
->
pôch
 - 
byãcou¡
);

403 
i
++)

404 *
imagïå
++ = 0x00;

406 
ªad_xlöe
++;

408 i‡(
ªad_xlöe
 =
row
)

409 
°©us
 = 
LOAD_DONE
;

415 
	`‰ì
(
cﬁ‹hóp
);

417 i‡(
°©us
 !
LOAD_DONE
)

420 
	}
}

	@engine/obsolete.c

26 
	ggr_w¨nög_libmwígöe_is_obsﬁëe
[] =

	@engine/selfont.c

8 
	~<°dio.h
>

9 
	~<°dlib.h
>

10 
	~<°rög.h
>

11 
	~<as£π.h
>

12 
	~<˘y≥.h
>

13 
	~<°rög.h
>

15 
	~"devi˚.h
"

16 #i‡(
UNIX
 | 
DOS_DJGPP
)

17 
	#°rcmpi
 
°rˇ£cmp


	)

20 #i‡
FONTMAPPER


23 
£À˘_f⁄t
(c⁄° 
PMWLOGFONT
 
∂ogf⁄t
, *
phy¢ame
);

31 
	savaûabÀ_f⁄t
 {

32 
MWLOGFONT
 
	mlf
;

33 *
	mfoundry
;

34 *
	mÁmûy
;

35 *
	mf⁄äame
;

36 
	mf⁄t˛ass
, 
	mÆüs
;

37 
avaûabÀ_f⁄t
 *
	m√xt
;

40 
avaûabÀ_f⁄t
 *
	gÆl_f⁄ts
 = 0;

46 
	#STREQ_EXACT
 0

	)

47 
	#STREQ_CASE
 1

	)

48 
	#STREQ_NOMATCH
 2

	)

50 
	$°ªq
(c⁄° *
a
, c⁄° *
b
)

52 
rc
;

54  
rc
 = 
STREQ_EXACT
; *
a
 !0;á++, 
b
++ ) {

55 i‡–*
a
 =*
b
 )

57 i‡–
	`touµî
(()*
a
Ë!touµî(()*
b
) )

58  
STREQ_NOMATCH
;

59 
rc
 = 
STREQ_CASE
;

61 i‡–*
b
 != 0 )

62  
STREQ_NOMATCH
;

63  
rc
;

64 
	}
}

70 
	$decode_f⁄t_˛ass
(c⁄° *
˛ass
)

72 i‡–
˛ass
 =
NULL
 )

74 i‡–!
	`°rcmp
("T1",
˛ass
) )

75  
MWLF_CLASS_T1LIB
;

76 i‡–!
	`°rcmp
("FT",
˛ass
) )

77  
MWLF_CLASS_FREETYPE
;

78 i‡–!
	`°rcmp
("FT2",
˛ass
) )

79  
MWLF_CLASS_FREETYPE
;

80 i‡–!
	`°rcmp
("MWF",
˛ass
) )

81  
MWLF_CLASS_BUILTIN
;

83 
	}
}

89 
	$ã°_f⁄t_«mög
(c⁄° *
foundry
, c⁄° *
f⁄äame
,

90 
avaûabÀ_f⁄t
 *
af
,

91 
avaûabÀ_f⁄t
 **
be°
, *
good√ss
)

93 
≥«…y
 = 0;

95 i‡–
foundry
 != 0 ) {

96 i‡–
af
->
foundry
 != 0 ) {

97  
	`°ªq
(
foundry
,
af
->foundry) ) {

98 
STREQ_EXACT
:

100 
STREQ_CASE
:

101 
≥«…y
 += 2;

104 
≥«…y
 += 8;

108 
≥«…y
 += 4;

112  
	`°ªq
(
f⁄äame
,
af
->fontname) ) {

113 
STREQ_EXACT
:

115 
STREQ_CASE
:

116 
≥«…y
 += 1;

119 
≥«…y
 += 16;

123 i‡–*
good√ss
 < 0 || 
≥«…y
 < *goodness ) {

124 *
be°
 = 
af
;

125 *
good√ss
 = 
≥«…y
;

127 
	}
}

142 
	#GOODNESS_NO_FONTNAME
 1000

	)

143 
	#GOODNESS_WEIGHT_DIFF
 1

	)

145 
	#GOODNESS_NO_FOUNDRY
 100

	)

147 
	#GOODNESS_FOUNDRY_UNKNOWN
 16

	)

148 
	#GOODNESS_CASE_FAMILY
 8

	)

149 
	#GOODNESS_CASE_FONTNAME
 4

	)

150 
	#GOODNESS_CASE_FOUNDRY
 2

	)

151 
	#GOODNESS_EXACT_FAMILY
 1

	)

153 
	#GOODNESS_EXACT_FOUNDRY
 0

	)

154 
	#GOODNESS_EXACT_FONTNAME
 0

	)

156 
	#GOODNESS_FAMILY_UNKNOWN
 3000

	)

157 
	#GOODNESS_NOMATCH_FAMILY
 10000

	)

159 
	#GOODNESS_EXACT_FONTFAMILY
 0

	)

160 
	#GOODNESS_CASE_FONTFAMILY
 32

	)

161 
	#GOODNESS_CLOSE_SLANT
 128

	)

162 
	#GOODNESS_BAD_SLANT
 256

	)

163 
	#GOODNESS_WRONG_SPACING
 2048

	)

165 
	#GOODNESS_WRONG_SERIFSTYLE
 1024

	)

167 
	#GOODNESS_WANTED_SMALLCAPS_NOT_AVAILABLE
 4096

	)

168 
	#GOODNESS_ONLY_SMALLCAPS_AVAILABLE
 8192

	)

171 
	$föd_foundry_≥«…y
(c⁄° 
avaûabÀ_f⁄t
 *
have
,

172 c⁄° *
foundry
)

174 i‡–
foundry
 == 0 )

177 i‡–
have
->
foundry
 == 0 )

178  
GOODNESS_FOUNDRY_UNKNOWN
;

180  
	`°ªq
(
foundry
,
have
->foundry) ) {

181 
STREQ_EXACT
:

182  
GOODNESS_EXACT_FOUNDRY
;

184 
STREQ_CASE
:

185  
GOODNESS_CASE_FOUNDRY
;

188  
GOODNESS_NO_FOUNDRY
;

191 
	}
}

193 
	$föd_Ámûy_≥«…y
(c⁄° 
avaûabÀ_f⁄t
 *
have
,

194 c⁄° *
Ámûy
)

196 i‡–
Ámûy
 == 0 )

199 i‡–
have
->
Ámûy
 == 0 )

200  
GOODNESS_FAMILY_UNKNOWN
;

202  
	`°ªq
(
Ámûy
,
have
->family) ) {

203 
STREQ_EXACT
:

204  
GOODNESS_EXACT_FAMILY
;

206 
STREQ_CASE
:

207  
GOODNESS_CASE_FAMILY
;

210  
GOODNESS_NOMATCH_FAMILY
;

213 
	}
}

215 
	$föd_f⁄äame_≥«…y
(c⁄° 
avaûabÀ_f⁄t
 *
have
,

216 c⁄° *
f⁄äame
)

218  
	`°ªq
(
have
->
f⁄äame
,fontname) ) {

219 
STREQ_EXACT
:

220  
GOODNESS_EXACT_FONTNAME
;

222 
STREQ_CASE
:

223  
GOODNESS_CASE_FONTNAME
;

230 i‡–
have
->
Ámûy
 != 0 ) {

231  
	`°ªq
(
have
->
Ámûy
,
f⁄äame
) ) {

232 
STREQ_EXACT
:

233  
GOODNESS_EXACT_FONTFAMILY
;

235 
STREQ_CASE
:

236  
GOODNESS_CASE_FONTFAMILY
;

243  
GOODNESS_NO_FONTNAME
;

244 
	}
}

246 
	$föd_weight_≥«…y
(
PMWLOGFONT
 
w™t
, PMWLOGFONT 
have
)

248 
weight_diff
;

250 
weight_diff
 = 
w™t
->
lfWeight
 - 
have
->lfWeight;

251 i‡–
weight_diff
 < 0 )

252 
weight_diff
 = -weight_diff;

253  
weight_diff
 * 
GOODNESS_WEIGHT_DIFF
;

254 
	}
}

256 
	$föd_¶™t_≥«…y
(
PMWLOGFONT
 
w™t
, PMWLOGFONT 
have
)

260 i‡–!
w™t
->
lfIèlic
 && !w™t->
lfRom™
 && !w™t->
lfOblique
 ) {

262 i‡–
have
->
lfIèlic
 || have->
lfOblique
 )

263  
GOODNESS_CLOSE_SLANT
;

267 i‡–
w™t
->
lfIèlic
 && 
have
->lfItalic )

270 i‡–
w™t
->
lfRom™
 && 
have
->lfRoman )

273 i‡–
w™t
->
lfOblique
 && 
have
->lfOblique )

278 i‡–
w™t
->
lfIèlic
 && 
have
->
lfOblique
 )

279  
GOODNESS_CLOSE_SLANT
;

281 i‡–
w™t
->
lfOblique
 && 
have
->
lfIèlic
 )

282  
GOODNESS_CLOSE_SLANT
;

284  
GOODNESS_BAD_SLANT
;

285 
	}
}

287 
	$föd_•acög_≥«…y
(
PMWLOGFONT
 
w™t
, PMWLOGFONT 
have
)

289 i‡–
w™t
->
lfPr›‹ti⁄Æ
 && 
have
->lfProportional )

291 i‡–
w™t
->
lfM⁄o•a˚
 && 
have
->lfMonospace )

293 i‡–
w™t
->
lfM⁄o•a˚
 || w™t->
lfPr›‹ti⁄Æ
 )

294  
GOODNESS_WRONG_SPACING
;

297 
	}
}

299 
	$föd_£rif_≥«…y
(
PMWLOGFONT
 
w™t
, PMWLOGFONT 
have
)

301 i‡–!
w™t
->
lfSîif
 && !w™t->
lfS™sSîif
 )

303 i‡–
w™t
->
lfSîif
 && 
have
->lfSerif )

305 i‡–
w™t
->
lfS™sSîif
 && 
have
->lfSansSerif )

308  
GOODNESS_WRONG_SERIFSTYLE
;

309 
	}
}

311 
	$föd_smÆlˇps_≥«…y
(
PMWLOGFONT
 
w™t
, PMWLOGFONT 
have
)

313 i‡–!
w™t
->
lfSmÆlC≠s
 && !
have
->lfSmallCaps )

315 i‡–
w™t
->
lfSmÆlC≠s
 && 
have
->lfSmallCaps )

317 i‡–
w™t
->
lfSmÆlC≠s
 )

318  
GOODNESS_WANTED_SMALLCAPS_NOT_AVAILABLE
;

319  
GOODNESS_ONLY_SMALLCAPS_AVAILABLE
;

320 
	}
}

323 
	$ã°_f⁄t_good√ss
(c⁄° *
foundry
, c⁄° *
Ámûy
,

324 c⁄° *
f⁄äame
, c⁄° 
PMWLOGFONT
 
lf
,

325 
avaûabÀ_f⁄t
 *
af
,

326 
avaûabÀ_f⁄t
 **
be°
, *
good√ss
)

328 
≥«…y
 = 0;

330 
≥«…y
 +
	`föd_foundry_≥«…y
(
af
,
foundry
);

331 
≥«…y
 +
	`föd_Ámûy_≥«…y
(
af
,
Ámûy
);

334 i‡–
Ámûy
 == 0 )

335 
≥«…y
 +
	`föd_f⁄äame_≥«…y
(
af
,
f⁄äame
);

337 i‡–
lf
 != 0 ) {

339 
≥«…y
 +
	`föd_weight_≥«…y
(
lf
,&
af
->lf);

340 
≥«…y
 +
	`föd_¶™t_≥«…y
(
lf
,&
af
->lf);

341 
≥«…y
 +
	`föd_•acög_≥«…y
(
lf
,&
af
->lf);

342 
≥«…y
 +
	`föd_£rif_≥«…y
(
lf
,&
af
->lf);

343 
≥«…y
 +
	`föd_smÆlˇps_≥«…y
(
lf
,&
af
->lf);

347 i‡–*
good√ss
 < 0 || 
≥«…y
 < *goodness ) {

349 *
be°
 = 
af
;

350 *
good√ss
 = 
≥«…y
;

352 
	}
}

354 
avaûabÀ_f⁄t
 *
	$föd_suôabÀ_f⁄t
(c⁄° *
foundry
,

355 c⁄° *
f⁄äame
,

356 c⁄° 
PMWLOGFONT
 
∂ogf⁄t
)

358 
avaûabÀ_f⁄t
 *
af
, *
be°
;

359 *
Ámûy
;

360 
good√ss
;

371 
good√ss
 = -1;

372  
af
 = 
be°
 = 
Æl_f⁄ts
;á‡!0;á‡af->
√xt
 ) {

373 
	`ã°_f⁄t_«mög
(
foundry
,
f⁄äame
,
af
,&
be°
,&
good√ss
);

375 
Ámûy
 = 0;

376 i‡–
good√ss
 != -1 ) {

381 
Ámûy
 = 
be°
->family;

389 
good√ss
 = -1;

390  
af
 = 
be°
 = 
Æl_f⁄ts
;á‡!0;á‡af->
√xt
 ) {

391 
	`ã°_f⁄t_good√ss
(
foundry
,
Ámûy
,
f⁄äame
,
∂ogf⁄t
,
af
,

392 &
be°
,&
good√ss
);

395  
be°
;

396 
	}
}

405 
	$£À˘_f⁄t
(c⁄° 
PMWLOGFONT
 
∂ogf⁄t
, c⁄° **
phy¢ame
)

407 
avaûabÀ_f⁄t
 *
f⁄t
;

408 
‚dry
[128], *
foundry
;

409 c⁄° *
f⁄äame
;

410 *
tmp
;

411 
t
, 
comma
;

412 
f⁄t˛ass
 = 0;

413 
found_f⁄t
 = 0;

415 
f⁄äame
 = 
∂ogf⁄t
->
lfFa˚Name
;

417  
t
=0;Å < 20;Å++ ) {

421 
foundry
 = 
NULL
;

422 i‡–(
tmp
 = 
	`ödex
(
f⁄äame
,',')Ë!
NULL
 ) {

428 
comma
 = 
tmp
 - 
f⁄äame
;

429 
tmp
++;

430 
	`°∫˝y
(
‚dry
,
f⁄äame
,
comma
);

431 
‚dry
[
comma
] = '\0';

432 
foundry
 = 
‚dry
;

433 
f⁄äame
 = 
tmp
;

436 
f⁄t˛ass
 = 
	`decode_f⁄t_˛ass
(
foundry
);

438 i‡–
∂ogf⁄t
 =
NULL
 && 
f⁄t˛ass
 == 0 )

439 
f⁄t˛ass
 = 
MWLF_CLASS_BUILTIN
;

441 i‡–
f⁄t˛ass
 ) {

443 *
phy¢ame
 = 
f⁄äame
;

444  
f⁄t˛ass
;

447 i‡–
found_f⁄t
 ) {

452 
deÁu…_f⁄t
;

455 
f⁄t
 = 
	`föd_suôabÀ_f⁄t
(
foundry
,
f⁄äame
,
∂ogf⁄t
);

457 i‡–
f⁄t
 =
NULL
 ) {

458 
deÁu…_f⁄t
;

461 i‡–!
f⁄t
->
Æüs
 )

462 
found_f⁄t
 = 1;

464 
f⁄äame
 = 
f⁄t
->
lf
.
lfFa˚Name
;

467 
deÁu…_f⁄t
:

469 *
phy¢ame
 = 
MWFONT_SYSTEM_VAR
;

470  
MWLF_CLASS_BUILTIN
;

471 
	}
}

478 
	$GdCÀ¨F⁄tLi°
()

480 
avaûabÀ_f⁄t
 *
f⁄t
, *
√xt_f⁄t
;

482 
f⁄t
 = 
Æl_f⁄ts
;

483  
f⁄t
 != 0 ) {

484 
√xt_f⁄t
 = 
f⁄t
->
√xt
;

485 i‡–
f⁄t
->
foundry
 != 0 )

486 
	`‰ì
(
f⁄t
->
foundry
);

487 i‡–
f⁄t
->
Ámûy
 != 0 )

488 
	`‰ì
(
f⁄t
->
Ámûy
);

489 
	`‰ì
(
f⁄t
->
f⁄äame
);

490 
	`‰ì
(
f⁄t
);

491 
f⁄t
 = 
√xt_f⁄t
;

494 
Æl_f⁄ts
 = 0;

495 
	}
}

502 
	$GdAddF⁄t
(*
‚dry
, *
fmly
, *
f⁄äame
, 
PMWLOGFONT
 
lf
,

503 
Êags
)

505 
avaûabÀ_f⁄t
 *
f⁄t
, *
wÆk
;

506 
f⁄t˛ass
 = 0;

507 *
phy¢ame
 = 
lf
->
lfFa˚Name
;

509 i‡–!
	`°∫cmp
(
phy¢ame
,"T1,",3) ) {

510 #ifde‡
HAVE_T1LIB_SUPPORT


512 
phy¢ame
 += 3;

513 
f⁄t˛ass
 = 
MWLF_CLASS_T1LIB
;

514 
do_f⁄t
;

521 i‡–!
	`°∫cmp
(
phy¢ame
,"FT,",3) ) {

522 #i‡
HAVE_FREETYPE_SUPPORT
 || 
HAVE_FREETYPE_2_SUPPORT


524 
phy¢ame
 += 3;

525 
f⁄t˛ass
 = 
MWLF_CLASS_FREETYPE
;

526 
do_f⁄t
;

533 i‡–!
	`°∫cmp
(
phy¢ame
,"FT2,",4) ) {

534 #i‡
HAVE_FREETYPE_2_SUPPORT


536 
phy¢ame
 += 3;

537 
f⁄t˛ass
 = 
MWLF_CLASS_FREETYPE
;

538 
do_f⁄t
;

545 i‡–!
	`°∫cmp
(
phy¢ame
,"MWF,",4) ) {

547 
phy¢ame
 += 4;

548 
f⁄t˛ass
 = 
MWLF_CLASS_BUILTIN
;

549 
do_f⁄t
;

553 i‡–!(
Êags
 & 
MWLF_FLAGS_ALIAS
) )

556 
do_f⁄t
:

558 
f⁄t
 = 
	`mÆloc
((*font));

559 i‡–
f⁄t
 == 0 )

562 
f⁄t
->
foundry
 = 0;

563 i‡–
	`°rcmp
("-",
‚dry
) ) {

564 
f⁄t
->
foundry
 = 
	`°rdup
(
‚dry
);

565 i‡–
f⁄t
->
foundry
 == 0 ) {

566 
	`‰ì
(
f⁄t
);

571 
f⁄t
->
Ámûy
 = 0;

572 i‡–
	`°rcmp
("-",
fmly
) ) {

573 
f⁄t
->
Ámûy
 = 
	`°rdup
(
fmly
);

574 i‡–
f⁄t
->
Ámûy
 == 0 ) {

575 
	`‰ì
(
f⁄t
->
foundry
);

576 
	`‰ì
(
f⁄t
);

581 
f⁄t
->
f⁄äame
 = 
	`°rdup
(fontname);

582 i‡–
f⁄t
->
f⁄äame
 == 0 ) {

583 
	`‰ì
(
f⁄t
->
foundry
);

584 
	`‰ì
(
f⁄t
->
Ámûy
);

585 
	`‰ì
(
f⁄t
);

589 
	`mem˝y
(&
f⁄t
->
lf
,lf,(*lf));

591 
	`¥ötf
("Addög f⁄t: '%s' '%s' '%s' '%s'\n",
f⁄t
->
foundry
,

592 
f⁄t
->
Ámûy
,f⁄t->
f⁄äame
,f⁄t->
lf
.
lfFa˚Name
);

594 
f⁄t
->
√xt
 = 0;

595 
f⁄t
->
Æüs
 = (
Êags
 & 
MWLF_FLAGS_ALIAS
) ? 1 : 0;

596 
f⁄t
->
f⁄t˛ass
 = fontclass;

599 i‡–
Æl_f⁄ts
 == 0 ) {

600 
Æl_f⁄ts
 = 
f⁄t
;

602  
wÆk
 = 
Æl_f⁄ts
; wÆk->
√xt
 != 0; walk = walk->next )

604 
wÆk
->
√xt
 = 
f⁄t
;

608 
	}
}

614 
	$f⁄t_£t_light
(
PMWLOGFONT
 
lf
)

615 { 
lf
->
lfWeight
 = 
MWLF_WEIGHT_LIGHT
; 
	}
}

616 
	$f⁄t_£t_ªguœr
(
PMWLOGFONT
 
lf
)

617 { 
lf
->
lfWeight
 = 
MWLF_WEIGHT_REGULAR
; 
	}
}

618 
	$f⁄t_£t_medium
(
PMWLOGFONT
 
lf
)

619 { 
lf
->
lfWeight
 = 
MWLF_WEIGHT_MEDIUM
; 
	}
}

620 
	$f⁄t_£t_demibﬁd
(
PMWLOGFONT
 
lf
)

621 { 
lf
->
lfWeight
 = 
MWLF_WEIGHT_DEMIBOLD
; 
	}
}

622 
	$f⁄t_£t_bﬁd
(
PMWLOGFONT
 
lf
)

623 { 
lf
->
lfWeight
 = 
MWLF_WEIGHT_BOLD
; 
	}
}

624 
	$f⁄t_£t_bœck
(
PMWLOGFONT
 
lf
)

625 { 
lf
->
lfWeight
 = 
MWLF_WEIGHT_BLACK
; 
	}
}

627 
	$f⁄t_£t_ôÆic
(
PMWLOGFONT
 
lf
Ë{Üf->
lfIèlic
 = 1; 
	}
}

628 
	$f⁄t_£t_rom™
(
PMWLOGFONT
 
lf
Ë{Üf->
lfRom™
 = 1; 
	}
}

629 
	$f⁄t_£t_oblique
(
PMWLOGFONT
 
lf
Ë{Üf->
lfOblique
 = 1; 
	}
}

631 
	$f⁄t_£t_n‹mÆ
(
PMWLOGFONT
 
lf
)

632 { 
lf
->
lfPôch
 = 
MWLF_PITCH_NORMAL
; 
	}
}

633 
	$f⁄t_£t_£mic⁄dí£d
(
PMWLOGFONT
 
lf
)

634 { 
lf
->
lfPôch
 = 
MWLF_PITCH_SEMICONDENSED
; 
	}
}

635 
	$f⁄t_£t_c⁄dí£d
(
PMWLOGFONT
 
lf
)

636 { 
lf
->
lfPôch
 = 
MWLF_PITCH_CONDENSED
; 
	}
}

638 
	$f⁄t_£t_£rif
(
PMWLOGFONT
 
lf
Ë{Üf->
lfSîif
 = 1; 
	}
}

639 
	$f⁄t_£t_ßns£rif
(
PMWLOGFONT
 
lf
Ë{Üf->
lfS™sSîif
 = 1; 
	}
}

640 
	$f⁄t_£t_m⁄o•a˚
(
PMWLOGFONT
 
lf
Ë{Üf->
lfM⁄o•a˚
 = 1; 
	}
}

641 
	$f⁄t_£t_¥›‹ti⁄Æ
(
PMWLOGFONT
 
lf
Ë{Üf->
lfPr›‹ti⁄Æ
 = 1; 
	}
}

643 
	$c⁄fig_f⁄t
(*
fûe
, 
löe
, 
¨gc
, *
¨gv
[])

645 
Êags
 = 0;

646 
MWLOGFONT
 
lf
;

647 
tmp
[512];

648 *
p
, *
q
, *
‚dry
, *
Ámûy
, *
f⁄äame
;

649 
size
, 
t
;

652 *
«me
;

653 (*
fun˘i⁄
)(
PMWLOGFONT
 
lf
);

654 } 
©ås
[] = {

656 { "Light", 
f⁄t_£t_light
 },

657 { "Reguœr", 
f⁄t_£t_ªguœr
 },

658 { "Medium", 
f⁄t_£t_medium
 },

659 { "DemiBﬁd", 
f⁄t_£t_demibﬁd
 },

660 { "Demibﬁd", 
f⁄t_£t_demibﬁd
 },

661 { "Bﬁd", 
f⁄t_£t_bﬁd
 },

662 { "Bœck", 
f⁄t_£t_bœck
 },

665 { "Ièlic", 
f⁄t_£t_ôÆic
 },

666 { "Ièlics", 
f⁄t_£t_ôÆic
 },

667 { "Rom™", 
f⁄t_£t_rom™
 },

668 { "Oblique", 
f⁄t_£t_oblique
 },

671 { "N‹mÆ", 
f⁄t_£t_n‹mÆ
 },

672 { "Semic⁄dí£d", 
f⁄t_£t_£mic⁄dí£d
 },

673 { "C⁄dí£d", 
f⁄t_£t_c⁄dí£d
 },

676 { "Sîif", 
f⁄t_£t_£rif
 },

677 { "S™s-£rif", 
f⁄t_£t_ßns£rif
 },

678 { "M⁄o•a˚", 
f⁄t_£t_m⁄o•a˚
 },

679 { "Pr›‹ti⁄Æ", 
f⁄t_£t_¥›‹ti⁄Æ
 },

684 
	`MWLF_CÀ¨
(&
lf
);

686 i‡–
¨gc
 != 6 ) {

687 
	`Ârötf
(
°dîr
,"Bad f⁄àdes¸ùti⁄ %s:%d\n",
fûe
,
löe
);

691 i‡–!
	`°rcmp
("Æüs",
¨gv
[1]) ) {

692 
Êags
 |
MWLF_FLAGS_ALIAS
;

693 
‚dry
 = "-";

695 
‚dry
 = 
¨gv
[1];

698 
Ámûy
 = 
¨gv
[2];

699 
f⁄äame
 = 
¨gv
[3];

700 
	`°r˝y
(
lf
.
lfFa˚Name
,
¨gv
[5]);

701 
p
 = 
¨gv
[4];

703  *
p
 != '\0' ) {

705 
q
 = 
	`°rchr
(
p
,',');

706 i‡–
q
 != 0 ) {

707 
size
 = 
q
 - 
p
;

708 
	`°∫˝y
(
tmp
,
p
,
size
);

709 
tmp
[
size
] = '\0';

710 
p
 = 
q
 + 1;

712 
	`°r˝y
(
tmp
,
p
);

713 
p
 +
	`°æí
(
tmp
);

716  
t
 = 0; 
©ås
[t].
«me
 != 0;Å++ ) {

717 i‡–!
	`°rcmp
(
©ås
[
t
].
«me
,
tmp
) ) {

718 
©ås
[
t
].
	`fun˘i⁄
(&
lf
);

719 
√xt
;

723 
	`Ârötf
(
°dîr
,"No such fontáttribute '%s' in %s:%d\n",

724 
tmp
,
fûe
,
löe
);

727 
√xt
: ;

730 
	`GdAddF⁄t
(
‚dry
,
Ámûy
,
f⁄äame
,&
lf
,
Êags
);

733 
	}
}

742 
	$c⁄fig_löe
(*
fûe
, 
löe
, 
¨gc
, *
¨gv
[])

744 i‡–!
¨gc
 )

747 i‡–
¨gv
[0][0] == '#' )

750 i‡–!
	`°rcmp
("f⁄t", 
¨gv
[0]) )

751  
	`c⁄fig_f⁄t
(
fûe
,
löe
,
¨gc
,
¨gv
);

753 i‡–!
	`°rcmp
("˛ór-f⁄ts", 
¨gv
[0]) ) {

754 
	`GdCÀ¨F⁄tLi°
();

759 
	}
}

765 
	#MAXCONFIGLINESIZE
 1024

	)

766 
	#MAXCONFIGELEMENTS
 64

	)

768 
	$ªad_c⁄figfûe
(*
fûe
)

770 
FILE
 *
cf
;

771 
buf„r
[
MAXCONFIGLINESIZE
+1];

772 *
¨gs
[
MAXCONFIGELEMENTS
+1];

773 *
p
;

774 
¨gc
, 
s
, 
rc
, 
t
, 
löe
;

776 i‡–(
cf
 = 
	`f›í
(
fûe
,"r")) == 0 ) {

777 
	`Ârötf
(
°dîr
,"U«bÀÅÿªad c⁄fig fûê'%s'\n",
fûe
);

781 
löe
 = 0;

782  !
	`„of
(
cf
) ) {

783 i‡–
	`fgës
(
buf„r
,1000,
cf
) == 0 )

785 
löe
++;

786 
s
 = 
	`°æí
(
buf„r
) - 1;

787  
s
 >0 && 
buf„r
[s] == '\n' )

788 
buf„r
[
s
--] = '\0';

789 
p
 = (*)
buf„r
;

790 
¨gc
 = 0;

791  
t
=0;Å < 
MAXCONFIGELEMENTS
;Å++ ) {

792  *
p
 !'\0' && 
	`is•a˚
(*p) )

793 
p
++;

794 i‡–*
p
 == '\"' ) {

796 
p
++;

797 
¨gs
[
t
] = 
p
;

798 
¨gc
++;

799  *
p
 != '\0' && *p != '\"' )

800 
p
++;

801 i‡–*
p
 == '\0' ) {

802 
	`Ârötf
(
°dîr
,"Unbalanced quotes in %s:%d\n",

803 
fûe
,
löe
);

806 *
p
++ = '\0';

808 i‡–*
p
 == '\0' )

810 
¨gs
[
t
] = 
p
;

811 
¨gc
++;

812  *
p
 !'\0' && !
	`is•a˚
(*p) )

813 
p
++;

814 *
p
++ = '\0';

819 
t
;

820  
t
=0;Å < 
¨gc
;Å++ )

821 
	`¥ötf
("#%d: '%s'\n",
t
,
¨gs
[t]);

824 
rc
 = 
	`c⁄fig_löe
(
fûe
, 
löe
, 
¨gc
, 
¨gs
);

825 i‡–
rc
 < 0 )

826  
rc
;

829 
	`f˛o£
(
cf
);

832 
	}
}

	@fonts/convbdf.c

10 
	~<°dio.h
>

11 
	~<°dlib.h
>

12 
	~<°rög.h
>

13 
	~<time.h
>

17 
	#VERSION
 "RB11"

	)

20 
	#MWIMAGE_WORDS
(
x
Ë(((x)+15)/16Ë

	)

21 
	#MWIMAGE_BYTES
(
x
Ë(
	`MWIMAGE_WORDS
(x)*(
MWIMAGEBITS
))

	)

22 
	#MWIMAGE_BITSPERIMAGE
 ((
MWIMAGEBITS
Ë* 8)

	)

23 
	#MWIMAGE_BITVALUE
(
n
Ë((
MWIMAGEBITS
Ë(((MWIMAGEBITSË1Ë<< (n)))

	)

24 
	#MWIMAGE_FIRSTBIT
 (
	`MWIMAGE_BITVALUE
(
MWIMAGE_BITSPERIMAGE
 - 1))

	)

25 
	#MWIMAGE_TESTBIT
(
m
Ë((mË& 
MWIMAGE_FIRSTBIT
)

	)

26 
	#MWIMAGE_SHIFTBIT
(
m
Ë((
MWIMAGEBITS
Ë((mË<< 1))

	)

28 
	tMWIMAGEBITS
;

33 * 
	m«me
;

34 
	mmaxwidth
;

35 
	mheight
;

36 
	mas˚¡
;

37 
	mfú°ch¨
;

38 
	msize
;

39 
MWIMAGEBITS
 * 
	mbôs
;

40 * 
	moff£t
;

41 * 
	mwidth
;

42 
	mdeÁu…ch¨
;

43 
	mbôs_size
;

46 * 
	mÁ˚«me
;

47 * 
	mc›yright
;

48 
	mpixñ_size
;

49 
	mdes˚¡
;

50 
	mfbbw
, 
	mfbbh
, 
	mfbbx
, 
	mfbby
;

51 } 
	tMWCFONT
, *
	tPMWCFONT
;

54 
	#i•ªfix
(
buf
,
°r
Ë(!
	`°∫cmp
(buf, så, 
	`°æí
(°r)))

	)

55 
	#°ªquÆ
(
s1
,
s2
Ë(!
	`°rcmp
(s1, s2))

	)

57 
	#EXTRA
 300

	)

59 
	ggí_c
 = 0;

60 
	ggí_‚t
 = 0;

61 
	ggí_m≠
 = 1;

62 
	g°¨t_ch¨
 = 0;

63 
	glimô_ch¨
 = 65535;

64 
	goÊag
 = 0;

65 
	goutfûe
[256];

67 
ußge
();

68 
gë›ts
(*
∑c
, ***
∑v
);

69 
c⁄vbdf
(*
∑th
);

71 
‰ì_f⁄t
(
PMWCFONT
 
pf
);

72 
PMWCFONT
 
bdf_ªad_f⁄t
(*
∑th
);

73 
bdf_ªad_hódî
(
FILE
 *
Â
, 
PMWCFONT
 
pf
);

74 
bdf_ªad_bôm≠s
(
FILE
 *
Â
, 
PMWCFONT
 
pf
);

75 * 
bdf_gëlöe
(
FILE
 *
Â
, *
buf
, 
Àn
);

76 
MWIMAGEBITS
 
bdf_hexvÆ
(*
buf
, 
ndx1
, 
ndx2
);

78 
gí_c_sour˚
(
PMWCFONT
 
pf
, *
∑th
);

79 
gí_‚t_fûe
(
PMWCFONT
 
pf
, *
∑th
);

82 
	$ußge
()

84 
hñp
[] = {

95 
	`Ârötf
(
°dîr
, 
hñp
);

96 
	}
}

100 
	$gë›ts
(*
∑c
, ***
∑v
)

102 *
p
;

103 **
av
;

104 
ac
;

106 
ac
 = *
∑c
;

107 
av
 = *
∑v
;

108 
ac
 > 0 && 
av
[0][0] == '-') {

109 
p
 = &
av
[0][1];

110  *
p
)

111 *
p
++) {

113  *
p
 && *p == ' ')

114 
p
++;

115 if–*
p
++ != '-')

116 
p
 = "";

119 
gí_c
 = 1;

122 
gí_‚t
 = 1;

125 
gí_m≠
 = 0;

128 
oÊag
 = 1;

129 i‡(*
p
) {

130 
	`°r˝y
(
outfûe
, 
p
);

131 *
p
 && *p != ' ')

132 
p
++;

134 
av
++; 
ac
--;

135 i‡(
ac
 > 0)

136 
	`°r˝y
(
outfûe
, 
av
[0]);

140 i‡(*
p
) {

141 
limô_ch¨
 = 
	`©oi
(
p
);

142 *
p
 && *p != ' ')

143 
p
++;

145 
av
++; 
ac
--;

146 i‡(
ac
 > 0)

147 
limô_ch¨
 = 
	`©oi
(
av
[0]);

151 i‡(*
p
) {

152 
°¨t_ch¨
 = 
	`©oi
(
p
);

153 *
p
 && *p != ' ')

154 
p
++;

156 
av
++; 
ac
--;

157 i‡(
ac
 > 0)

158 
°¨t_ch¨
 = 
	`©oi
(
av
[0]);

162 
	`Ârötf
(
°dîr
, "Unknow¿›ti⁄ ign‹ed: %c\r\n", *(
p
-1));

164 ++
av
; --
ac
;

166 *
∑c
 = 
ac
;

167 *
∑v
 = 
av
;

168 
	}
}

172 
	$ba£«me
(*
∑th
)

174 *
p
, *
b
;

175 
ba£
[256];

178 
b
 = 
∑th
;

179 
p
=
∑th
; *p; ++p) {

180 i‡(*
p
 == '/')

181 
b
 = 
p
 + 1;

183 
	`°r˝y
(
ba£
, 
b
);

184 
p
=
ba£
; *p; ++p) {

185 i‡(*
p
 == '.') {

186 *
p
 = 0;

190  
ba£
;

191 
	}
}

194 
	$c⁄vbdf
(*
∑th
)

196 
PMWCFONT
 
pf
;

197 
ªt
 = 0;

199 
pf
 = 
	`bdf_ªad_f⁄t
(
∑th
);

200 i‡(!
pf
)

201 
	`exô
(1);

203 i‡(
gí_c
) {

204 i‡(!
oÊag
) {

205 
	`°r˝y
(
outfûe
, 
	`ba£«me
(
∑th
));

206 
	`°rˇt
(
outfûe
, ".c");

208 
ªt
 |
	`gí_c_sour˚
(
pf
, 
outfûe
);

211 i‡(
gí_‚t
) {

212 i‡(!
oÊag
) {

213 
	`°r˝y
(
outfûe
, 
	`ba£«me
(
∑th
));

214 
	`°rˇt
(
outfûe
, ".fnt");

216 
ªt
 |
	`gí_‚t_fûe
(
pf
, 
outfûe
);

219 
	`‰ì_f⁄t
(
pf
);

220  
ªt
;

221 
	}
}

224 
	$maö
(
ac
, **
av
)

226 
ªt
 = 0;

228 ++
av
; --
ac
;

229 
	`gë›ts
(&
ac
, &
av
);

231 i‡(
ac
 < 1 || (!
gí_c
 && !
gí_‚t
)) {

232 
	`ußge
();

233 
	`exô
(1);

235 i‡(
oÊag
) {

236 i‡(
ac
 > 1 || (
gí_c
 && 
gí_‚t
)) {

237 
	`ußge
();

238 
	`exô
(1);

242 
ac
 > 0) {

243 
ªt
 |
	`c⁄vbdf
(
av
[0]);

244 ++
av
; --
ac
;

247 
	`exô
(
ªt
);

248 
	}
}

252 
	$‰ì_f⁄t
(
PMWCFONT
 
pf
)

254 i‡(!
pf
)

256 i‡(
pf
->
«me
)

257 
	`‰ì
(
pf
->
«me
);

258 i‡(
pf
->
Á˚«me
)

259 
	`‰ì
(
pf
->
Á˚«me
);

260 i‡(
pf
->
bôs
)

261 
	`‰ì
(
pf
->
bôs
);

262 i‡(
pf
->
off£t
)

263 
	`‰ì
(
pf
->
off£t
);

264 i‡(
pf
->
width
)

265 
	`‰ì
(
pf
->
width
);

266 
	`‰ì
(
pf
);

267 
	}
}

270 
PMWCFONT


271 
	$bdf_ªad_f⁄t
(*
∑th
)

273 
FILE
 *
Â
;

274 
PMWCFONT
 
pf
;

276 
Â
 = 
	`f›í
(
∑th
, "rb");

277 i‡(!
Â
) {

278 
	`Ârötf
(
°dîr
, "Eº‹ o≥nög fûe: %s\n", 
∑th
);

279  
NULL
;

282 
pf
 = (
PMWCFONT
)
	`ˇŒoc
(1, (
MWCFONT
));

283 i‡(!
pf
)

284 
îrout
;

286 
pf
->
«me
 = 
	`°rdup
(
	`ba£«me
(
∑th
));

288 i‡(!
	`bdf_ªad_hódî
(
Â
, 
pf
)) {

289 
	`Ârötf
(
°dîr
, "ErrorÑeading font header\n");

290 
îrout
;

293 i‡(!
	`bdf_ªad_bôm≠s
(
Â
, 
pf
)) {

294 
	`Ârötf
(
°dîr
, "ErrorÑeading font bitmaps\n");

295 
îrout
;

298 
	`f˛o£
(
Â
);

299  
pf
;

301 
îrout
:

302 
	`f˛o£
(
Â
);

303 
	`‰ì_f⁄t
(
pf
);

304  
NULL
;

305 
	}
}

309 
	$bdf_ªad_hódî
(
FILE
 *
Â
, 
PMWCFONT
 
pf
)

311 
ícodög
;

312 
nch¨s
, 
maxwidth
;

313 
fú°ch¨
 = 65535;

314 
œ°ch¨
 = -1;

315 
buf
[256];

316 
Á˚«me
[256];

317 
c›yright
[256];

320 
pf
->
deÁu…ch¨
 = -1;

321 
pf
->
as˚¡
 = -1;

322 
pf
->
des˚¡
 = -1;

325 i‡(!
	`bdf_gëlöe
(
Â
, 
buf
, (buf))) {

326 
	`Ârötf
(
°dîr
, "Error: EOF on file\n");

329 i‡(
	`i•ªfix
(
buf
, "FONT ")) {

330 i‡(
	`ssˇnf
(
buf
, "FONT %[^\n]", 
Á˚«me
) != 1) {

331 
	`Ârötf
(
°dîr
, "Error: bad 'FONT'\n");

334 
pf
->
Á˚«me
 = 
	`°rdup
(facename);

337 i‡(
	`i•ªfix
(
buf
, "COPYRIGHT ")) {

338 i‡(
	`ssˇnf
(
buf
, "COPYRIGHT \"%[^\"]", 
c›yright
) != 1) {

339 
	`Ârötf
(
°dîr
, "Error: bad 'COPYRIGHT'\n");

342 
pf
->
c›yright
 = 
	`°rdup
(copyright);

345 i‡(
	`i•ªfix
(
buf
, "DEFAULT_CHAR ")) {

346 i‡(
	`ssˇnf
(
buf
, "DEFAULT_CHAR %d", &
pf
->
deÁu…ch¨
) != 1) {

347 
	`Ârötf
(
°dîr
, "Error: bad 'DEFAULT_CHAR'\n");

351 i‡(
	`i•ªfix
(
buf
, "FONT_DESCENT ")) {

352 i‡(
	`ssˇnf
(
buf
, "FONT_DESCENT %d", &
pf
->
des˚¡
) != 1) {

353 
	`Ârötf
(
°dîr
, "Error: bad 'FONT_DESCENT'\n");

358 i‡(
	`i•ªfix
(
buf
, "FONT_ASCENT ")) {

359 i‡(
	`ssˇnf
(
buf
, "FONT_ASCENT %d", &
pf
->
as˚¡
) != 1) {

360 
	`Ârötf
(
°dîr
, "Error: bad 'FONT_ASCENT'\n");

365 i‡(
	`i•ªfix
(
buf
, "FONTBOUNDINGBOX ")) {

366 i‡(
	`ssˇnf
(
buf
, "FONTBOUNDINGBOX %d %d %d %d",

367 &
pf
->
fbbw
, &pf->
fbbh
, &pf->
fbbx
, &pf->
fbby
) != 4) {

368 
	`Ârötf
(
°dîr
, "Error: bad 'FONTBOUNDINGBOX'\n");

373 i‡(
	`i•ªfix
(
buf
, "CHARS ")) {

374 i‡(
	`ssˇnf
(
buf
, "CHARS %d", &
nch¨s
) != 1) {

375 
	`Ârötf
(
°dîr
, "Error: bad 'CHARS'\n");

386 i‡(
	`i•ªfix
(
buf
, "ENCODING ")) {

387 i‡(
	`ssˇnf
(
buf
, "ENCODING %d", &
ícodög
) != 1) {

388 
	`Ârötf
(
°dîr
, "Error: bad 'ENCODING'\n");

391 i‡(
ícodög
 >0 &&Éncodög <
limô_ch¨
 &&Éncodög >
°¨t_ch¨
) {

392 i‡(
fú°ch¨
 > 
ícodög
)

393 
fú°ch¨
 = 
ícodög
;

394 i‡(
œ°ch¨
 < 
ícodög
)

395 
œ°ch¨
 = 
ícodög
;

399 i‡(
	`°ªquÆ
(
buf
, "ENDFONT"))

404 i‡(
pf
->
as˚¡
 < 0 ||Öf->
des˚¡
 < 0 || 
fú°ch¨
 < 0) {

405 
	`Ârötf
(
°dîr
, "Error: Invalid BDF file,Ñequires FONT_ASCENT/FONT_DESCENT/ENCODING\n");

408 
pf
->
height
 =Öf->
as˚¡
 +Öf->
des˚¡
;

411 i‡(
pf
->
deÁu…ch¨
 < 0 ||Öf->deÁu…ch¨ < 
fú°ch¨
 ||

412 
pf
->
deÁu…ch¨
 > 
limô_ch¨
)

413 
pf
->
deÁu…ch¨
 = 
fú°ch¨
;

416 
pf
->
fú°ch¨
 = firstchar;

417 
pf
->
size
 = 
œ°ch¨
 - 
fú°ch¨
 + 1;

421 
maxwidth
 = 
pf
->
fbbw
;

424 
pf
->
bôs_size
 = 
nch¨s
 * 
	`MWIMAGE_WORDS
(
maxwidth
Ë*Öf->
height
;

427 
pf
->
bôs
 = (
MWIMAGEBITS
 *)
	`mÆloc
’f->
bôs_size
 * (MWIMAGEBITSË+ 
EXTRA
);

428 
pf
->
off£t
 = (*)
	`mÆloc
’f->
size
 * ());

429 
pf
->
width
 = (*)
	`mÆloc
’f->
size
 * ());

431 i‡(!
pf
->
bôs
 || !pf->
off£t
 || !pf->
width
) {

432 
	`Ârötf
(
°dîr
, "Error:Ço memory for fontÜoad\n");

437 
	}
}

441 
	$bdf_ªad_bôm≠s
(
FILE
 *
Â
, 
PMWCFONT
 
pf
)

443 
ofs
 = 0;

444 
maxwidth
 = 0;

445 
i
, 
k
, 
ícodög
, 
width
;

446 
bbw
, 
bbh
, 
bbx
, 
bby
;

447 
¥›‹ti⁄Æ
 = 0;

448 
ícodëabÀ
 = 0;

449 
l
;

450 
buf
[256];

453 
	`f£ek
(
Â
, 0L, 
SEEK_SET
);

456 
i
=0; i<
pf
->
size
; ++i)

457 
pf
->
off£t
[
i
] = -1;

460 i‡(!
	`bdf_gëlöe
(
Â
, 
buf
, (buf))) {

461 
	`Ârötf
(
°dîr
, "Error: EOF on file\n");

464 i‡(
	`i•ªfix
(
buf
, "STARTCHAR")) {

465 
ícodög
 = 
width
 = 
bbw
 = 
bbh
 = 
bbx
 = 
bby
 = -1;

468 i‡(
	`i•ªfix
(
buf
, "ENCODING ")) {

469 i‡(
	`ssˇnf
(
buf
, "ENCODING %d", &
ícodög
) != 1) {

470 
	`Ârötf
(
°dîr
, "Error: bad 'ENCODING'\n");

473 i‡(
ícodög
 < 
°¨t_ch¨
 ||Éncodög > 
limô_ch¨
)

474 
ícodög
 = -1;

477 i‡(
	`i•ªfix
(
buf
, "DWIDTH ")) {

478 i‡(
	`ssˇnf
(
buf
, "DWIDTH %d", &
width
) != 1) {

479 
	`Ârötf
(
°dîr
, "Error: bad 'DWIDTH'\n");

483 i‡(
width
 <= 0)

484 
width
 = 
pf
->
fbbw
 -Öf->
fbbx
;

487 i‡(
	`i•ªfix
(
buf
, "BBX ")) {

488 i‡(
	`ssˇnf
(
buf
, "BBX %d %d %d %d", &
bbw
, &
bbh
, &
bbx
, &
bby
) != 4) {

489 
	`Ârötf
(
°dîr
, "Error: bad 'BBX'\n");

494 i‡(
	`°ªquÆ
(
buf
, "BITMAP")) {

495 
MWIMAGEBITS
 *
ch_bôm≠
 = 
pf
->
bôs
 + 
ofs
;

496 
ch_w‹ds
;

498 i‡(
ícodög
 < 0)

502 i‡(
pf
->
off£t
[
ícodög
-pf->
fú°ch¨
] != ()-1) {

503 
	`Ârötf
(
°dîr
, "Error: duplicateÉncoding for character %d (0x%02x), ignoring duplicate\n",

504 
ícodög
,Éncoding);

507 
pf
->
off£t
[
ícodög
-pf->
fú°ch¨
] = 
ofs
;

510 i‡(
bbx
 < 0) {

511 
width
 -
bbx
;

514 
bbx
 = 0;

516 i‡(
width
 > 
maxwidth
)

517 
maxwidth
 = 
width
;

518 
pf
->
width
[
ícodög
-pf->
fú°ch¨
] = width;

521 
	`mem£t
(
ch_bôm≠
, 0, 
	`MWIMAGE_BYTES
(
width
Ë* 
pf
->
height
);

523 
ch_w‹ds
 = 
	`MWIMAGE_WORDS
(
width
);

524 
	#BM
(
row
,
cﬁ
Ë(*(
ch_bôm≠
 + (‘ow)*
ch_w‹ds
Ë+ (cﬁ)))

	)

525 
	#MWIMAGE_NIBBLES
 (
MWIMAGE_BITSPERIMAGE
/4)

	)

528 
i
=0; ; ++i) {

529 
hexnibbÀs
;

531 i‡(!
	`bdf_gëlöe
(
Â
, 
buf
, (buf))) {

532 
	`Ârötf
(
°dîr
, "Error: EOFÑeading BITMAP data\n");

535 i‡(
	`i•ªfix
(
buf
, "ENDCHAR"))

538 
hexnibbÀs
 = 
	`°æí
(
buf
);

539 
k
=0; k<
ch_w‹ds
; ++k) {

540 
ndx
 = 
k
 * 
MWIMAGE_NIBBLES
;

541 
∑dnibbÀs
 = 
hexnibbÀs
 - 
ndx
;

542 
MWIMAGEBITS
 
vÆue
;

544 i‡(
∑dnibbÀs
 <= 0)

546 i‡(
∑dnibbÀs
 >
MWIMAGE_NIBBLES
)

547 
∑dnibbÀs
 = 0;

549 
vÆue
 = 
	`bdf_hexvÆ
((*)
buf
,

550 
ndx
,Çdx+
MWIMAGE_NIBBLES
-1-
∑dnibbÀs
);

551 
vÆue
 <<
∑dnibbÀs
 * 
MWIMAGE_NIBBLES
;

553 
	`BM
(
pf
->
height
 -Öf->
des˚¡
 - 
bby
 - 
bbh
 + 
i
, 
k
) |=

554 
vÆue
 >> 
bbx
;

556 i‡(
bbx
) {

557 
	`BM
(
pf
->
height
 -Öf->
des˚¡
 - 
bby
 - 
bbh
 + 
i
, 
k
+1) =

558 
vÆue
 << (
MWIMAGE_BITSPERIMAGE
 - 
bbx
);

563 
ofs
 +
	`MWIMAGE_WORDS
(
width
Ë* 
pf
->
height
;

567 i‡(
	`°ªquÆ
(
buf
, "ENDFONT"))

572 
pf
->
maxwidth
 = maxwidth;

575 
i
=0; i<
pf
->
size
; ++i) {

576 
defch¨
 = 
pf
->
deÁu…ch¨
 -Öf->
fú°ch¨
;

578 i‡(
pf
->
off£t
[
i
] == ()-1) {

579 
pf
->
off£t
[
i
] =Öf->off£t[
defch¨
];

580 
pf
->
width
[
i
] =Öf->width[
defch¨
];

585 
l
 = 0;

586 
i
=0; i<
pf
->
size
; ++i) {

587 i‡(
pf
->
off£t
[
i
] !
l
) {

588 
ícodëabÀ
 = 1;

591 
l
 +
	`MWIMAGE_WORDS
(
pf
->
width
[
i
]Ë*Öf->
height
;

593 i‡(!
ícodëabÀ
) {

594 
	`‰ì
(
pf
->
off£t
);

595 
pf
->
off£t
 = 
NULL
;

599 
i
=0; i<
pf
->
size
; ++i) {

600 i‡(
pf
->
width
[
i
] !
maxwidth
) {

601 
¥›‹ti⁄Æ
 = 1;

605 i‡(!
¥›‹ti⁄Æ
) {

606 
	`‰ì
(
pf
->
width
);

607 
pf
->
width
 = 
NULL
;

611 i‡(
ofs
 < 
pf
->
bôs_size
) {

612 
pf
->
bôs
 = 
	`ªÆloc
’f->bôs, 
ofs
 * (
MWIMAGEBITS
));

613 
pf
->
bôs_size
 = 
ofs
;

614 } i‡(
ofs
 > 
pf
->
bôs_size
) {

615 
	`Ârötf
(
°dîr
, "Warning: DWIDTH spec > max FONTBOUNDINGBOX\n");

616 i‡(
ofs
 > 
pf
->
bôs_size
+
EXTRA
) {

617 
	`Ârötf
(
°dîr
, "Error: NotÉnough bits initiallyállocated\n");

620 
pf
->
bôs_size
 = 
ofs
;

624 
	}
}

628 
	$bdf_gëlöe
(
FILE
 *
Â
, *
buf
, 
Àn
)

630 
c
;

631 *
b
;

634 
b
 = 
buf
;

635 (
c
 = 
	`gëc
(
Â
)Ë!
EOF
) {

636 i‡(
c
 == '\r')

638 i‡(
c
 == '\n')

640 i‡(
b
 - 
buf
 >(
Àn
 - 1))

642 *
b
++ = 
c
;

644 *
b
 = '\0';

645 i‡(
c
 =
EOF
 && 
b
 =
buf
)

646  
NULL
;

647 i‡(
b
 !
buf
 && !
	`i•ªfix
(buf, "COMMENT"))

650  
buf
;

651 
	}
}

654 
MWIMAGEBITS


655 
	$bdf_hexvÆ
(*
buf
, 
ndx1
, 
ndx2
)

657 
MWIMAGEBITS
 
vÆ
 = 0;

658 
i
, 
c
;

660 
i
=
ndx1
; i<=
ndx2
; ++i) {

661 
c
 = 
buf
[
i
];

662 i‡(
c
 >= '0' && c <= '9')

663 
c
 -= '0';

664 i‡(
c
 >= 'A' && c <= 'F')

665 
c
 = c - 'A' + 10;

666 i‡(
c
 >= 'a' && c <= 'f')

667 
c
 = c - 'a' + 10;

668 
c
 = 0;

669 
vÆ
 = (vÆ << 4Ë| 
c
;

671  
vÆ
;

672 
	}
}

676 
	$gí_c_sour˚
(
PMWCFONT
 
pf
, *
∑th
)

678 
FILE
 *
oÂ
;

679 
i
;

680 
did_deÁu…ch¨
 = 0;

681 
did_syncmsg
 = 0;

682 
time_t
 
t
 = 
	`time
(0);

683 
MWIMAGEBITS
 *
ofs
 = 
pf
->
bôs
;

684 
buf
[256];

685 
obuf
[256];

686 
hdr1
[] = {

708 
oÂ
 = 
	`f›í
(
∑th
, "w");

709 i‡(!
oÂ
) {

710 
	`Ârötf
(
°dîr
, "C™'à¸óã %s\n", 
∑th
);

713 
	`Ârötf
(
°dîr
, "Gíî©ög %s\n", 
∑th
);

715 
	`°r˝y
(
buf
, 
	`˘ime
(&
t
));

716 
buf
[
	`°æí
(buf)-1] = 0;

718 
	`Ârötf
(
oÂ
, 
hdr1
, 
buf
,

719 
pf
->
«me
,

720 
pf
->
Á˚«me
?Öf->facename: "",

721 
pf
->
maxwidth
,Öf->
height
,

722 
pf
->
size
,

723 
pf
->
as˚¡
,Öf->
des˚¡
,

724 
pf
->
fú°ch¨
,Öf->firstchar,

725 
pf
->
fú°ch¨
+pf->
size
-1,Öf->firstchar+pf->size-1,

726 
pf
->
deÁu…ch¨
,Öf->defaultchar,

727 
pf
->
width
? "yes": "no",

728 
pf
->
c›yright
?Öf->copyright: "",

729 
pf
->
«me
);

732 
i
=0; i<
pf
->
size
; ++i) {

733 
x
;

734 
bôcou¡
 = 0;

735 
width
 = 
pf
->width ?Öf->width[
i
] :Öf->
maxwidth
;

736 
height
 = 
pf
->height;

737 
MWIMAGEBITS
 *
bôs
 = 
pf
->bô†+ (pf->
off£t
?Öf->off£t[
i
]: (
height
 * i));

738 
MWIMAGEBITS
 
bôvÆue
;

745 i‡(
pf
->
off£t
 && (pf->off£t[
i
] =pf->off£t[pf->
deÁu…ch¨
-pf->
fú°ch¨
])) {

746 i‡(
did_deÁu…ch¨
)

748 
did_deÁu…ch¨
 = 1;

751 
	`Ârötf
(
oÂ
, "\n/* Character %d (0x%02x):\n width %d",

752 
i
+
pf
->
fú°ch¨
, i+pf->fú°ch¨, 
width
);

754 i‡(
gí_m≠
) {

755 
	`Ârötf
(
oÂ
, "\n +");

756 
x
=0; x<
width
; ++xË
	`Ârötf
(
oÂ
, "-");

757 
	`Ârötf
(
oÂ
, "+\n");

759 
x
 = 0;

760 
height
 > 0) {

761 i‡(
x
 =0Ë
	`Ârötf
(
oÂ
, " |");

763 i‡(
bôcou¡
 <= 0) {

764 
bôcou¡
 = 
MWIMAGE_BITSPERIMAGE
;

765 
bôvÆue
 = *
bôs
++;

768 
	`Ârötf
(
oÂ
, 
	`MWIMAGE_TESTBIT
(
bôvÆue
)? "*": " ");

770 
bôvÆue
 = 
	`MWIMAGE_SHIFTBIT
(bitvalue);

771 --
bôcou¡
;

772 i‡(++
x
 =
width
) {

773 
	`Ârötf
(
oÂ
, "|\n");

774 --
height
;

775 
x
 = 0;

776 
bôcou¡
 = 0;

779 
	`Ârötf
(
oÂ
, " +");

780 
x
=0; x<
width
; ++xË
	`Ârötf
(
oÂ
, "-");

781 
	`Ârötf
(
oÂ
, "+ */\n");

783 
	`Ârötf
(
oÂ
, " */\n");

785 
bôs
 = 
pf
->bô†+ (pf->
off£t
?Öf->off£t[
i
]: (pf->
height
 * i));

786 
x
=
	`MWIMAGE_WORDS
(
width
)*
pf
->
height
; x>0; --x) {

787 
	`Ârötf
(
oÂ
, "0x%04x,\n", *
bôs
);

788 i‡(!
did_syncmsg
 && *
bôs
++ !*
ofs
++) {

789 
	`Ârötf
(
°dîr
, "Warning: foundÉncoding values inÇon-sorted order (notánÉrror).\n");

790 
did_syncmsg
 = 1;

794 
	`Ârötf
(
oÂ
, "};\n\n");

796 i‡(
pf
->
off£t
) {

798 
	`Ârötf
(
oÂ
, "/* Character->glyph mapping. */\n"

800 
pf
->
«me
);

802 
i
=0; i<
pf
->
size
; ++i)

803 
	`Ârötf
(
oÂ
, " %ld,\t/* (0x%02xË*/\n", 
pf
->
off£t
[
i
], i+pf->
fú°ch¨
);

804 
	`Ârötf
(
oÂ
, "};\n\n");

808 i‡(
pf
->
width
) {

809 
	`Ârötf
(
oÂ
, "/* Character width data. */\n"

811 
pf
->
«me
);

813 
i
=0; i<
pf
->
size
; ++i)

814 
	`Ârötf
(
oÂ
, " %d,\t/* (0x%02xË*/\n", 
pf
->
width
[
i
], i+pf->
fú°ch¨
);

815 
	`Ârötf
(
oÂ
, "};\n\n");

819 i‡(
pf
->
off£t
)

820 
	`•rötf
(
obuf
, "_%s_off£t,", 
pf
->
«me
);

821 
	`•rötf
(
obuf
, "0, /*ÇoÉncodeÅable*/");

822 i‡(
pf
->
width
)

823 
	`•rötf
(
buf
, "_%s_width,", 
pf
->
«me
);

824 
	`•rötf
(
buf
, "0, /* fixed width*/");

825 
	`Ârötf
(
oÂ
, "/* Exported structure definition. */\n"

839 
pf
->
«me
,Öf->name,

840 
pf
->
maxwidth
,Öf->
height
,

841 
pf
->
as˚¡
,

842 
pf
->
fú°ch¨
,

843 
pf
->
size
,

844 
pf
->
«me
,

845 
obuf
,

846 
buf
,

847 
pf
->
deÁu…ch¨
,

848 
pf
->
«me
);

851 
	}
}

854 
	$WRITEBYTE
(
FILE
 *
Â
, 
c
)

856  
	`putc
(
c
, 
Â
Ë!
EOF
;

857 
	}
}

860 
	$WRITESHORT
(
FILE
 *
Â
, 
s
)

862 
	`putc
(
s
, 
Â
);

863  
	`putc
(
s
>>8, 
Â
Ë!
EOF
;

864 
	}
}

867 
	$WRITELONG
(
FILE
 *
Â
, 
l
)

869 
	`putc
(
l
, 
Â
);

870 
	`putc
(
l
>>8, 
Â
);

871 
	`putc
(
l
>>16, 
Â
);

872  
	`putc
(
l
>>24, 
Â
Ë!
EOF
;

873 
	}
}

876 
	$WRITESTR
(
FILE
 *
Â
, *
°r
, 
cou¡
)

878  
	`fwrôe
(
°r
, 1, 
cou¡
, 
Â
) == count;

879 
	}
}

882 
	$WRITESTRPAD
(
FILE
 *
Â
, *
°r
, 
tŸÀn
)

884 
ªt
;

886 
°r
 && *°∏&& 
tŸÀn
 > 0)

887 i‡(*
°r
) {

888 
ªt
 = 
	`putc
(*
°r
++, 
Â
);

889 --
tŸÀn
;

891 --
tŸÀn
 >= 0)

892 
ªt
 = 
	`putc
(' ', 
Â
);

893  
ªt
;

894 
	}
}

898 
	$gí_‚t_fûe
(
PMWCFONT
 
pf
, *
∑th
)

900 
FILE
 *
oÂ
;

901 
i
;

903 
oÂ
 = 
	`f›í
(
∑th
, "wb");

904 i‡(!
oÂ
) {

905 
	`Ârötf
(
°dîr
, "C™'à¸óã %s\n", 
∑th
);

908 
	`Ârötf
(
°dîr
, "Gíî©ög %s\n", 
∑th
);

911 
	`WRITESTR
(
oÂ
, 
VERSION
, 4);

914 
	`WRITESTRPAD
(
oÂ
, 
pf
->
«me
, 64);

917 
	`WRITESTRPAD
(
oÂ
, 
pf
->
c›yright
, 256);

920 
	`WRITESHORT
(
oÂ
, 
pf
->
maxwidth
);

921 
	`WRITESHORT
(
oÂ
, 
pf
->
height
);

922 
	`WRITESHORT
(
oÂ
, 
pf
->
as˚¡
);

923 
	`WRITESHORT
(
oÂ
, 0);

924 
	`WRITELONG
(
oÂ
, 
pf
->
fú°ch¨
);

925 
	`WRITELONG
(
oÂ
, 
pf
->
deÁu…ch¨
);

926 
	`WRITELONG
(
oÂ
, 
pf
->
size
);

929 
	`WRITELONG
(
oÂ
, 
pf
->
bôs_size
);

930 
	`WRITELONG
(
oÂ
, 
pf
->
off£t
?Öf->
size
: 0);

931 
	`WRITELONG
(
oÂ
, 
pf
->
width
?Öf->
size
: 0);

934 
i
=0; i<
pf
->
bôs_size
; ++i)

935 
	`WRITESHORT
(
oÂ
, 
pf
->
bôs
[
i
]);

936 i‡(
	`·ñl
(
oÂ
) & 2)

937 
	`WRITESHORT
(
oÂ
, 0);

939 i‡(
pf
->
off£t
)

940 
i
=0; i<
pf
->
size
; ++i)

941 
	`WRITELONG
(
oÂ
, 
pf
->
off£t
[
i
]);

943 i‡(
pf
->
width
)

944 
i
=0; i<
pf
->
size
; ++i)

945 
	`WRITEBYTE
(
oÂ
, 
pf
->
width
[
i
]);

947 
	`f˛o£
(
oÂ
);

949 
	}
}

	@fonts/obsolete.c

26 
	ggr_w¨nög_libmwf⁄ts_is_obsﬁëe
[] =

	@fonts/rom8x16.c

2 
	~"devi˚.h
"

6 
MWIMAGEBITS
 
	grom8x16_bôs
[] = {

9484 
MWCFONT
 
	gf⁄t_rom8x16
 = {

9491 
rom8x16_bôs
,

	@fonts/rom8x8.c

2 
	~"devi˚.h
"

6 
MWIMAGEBITS
 
	grom8x8_bôs
[] = {

5388 
MWCFONT
 
	gf⁄t_rom8x8
 = {

5395 
rom8x8_bôs
,

	@fonts/tools/convfnt.c

29 
	#FONT_NORMAL
 0

	)

30 
	#FONT_BOLD
 1

	)

31 
	#FONT_ITALIC
 2

	)

32 
	#FONT_BOLDITALIC
 (
FONT_BOLD
 | 
FONT_ITALIC
)

	)

33 *
	gF⁄t_Name
 = "MS Sans Serif";

34 
	gF⁄t_Height
 = 20;

35 
	gF⁄t_Width
 = 0;

36 
	gF⁄t_StyÀ
 = 
FONT_NORMAL
;

37 *
	gF⁄t_StyÀ_Såög
 = "normal";

39 
	#WIN32_LEAN_AND_MEAN


	)

40 
	~<wödows.h
>

41 
	~<°dio.h
>

42 
	~<°dlib.h
>

43 
	~<°rög.h
>

45 
	#MAX_BITS_HEIGHT
 48

	)

46 
	#MAX_BITS_WIDTH
 80

	)

47 
	tIMAGEBITS
;

50 
	#IMAGE_SIZE
(
width
, 
height
Ë((heightË* (((widthË+ (
IMAGEBITS
Ë* 8 - 1Ë/ ((IMAGEBITSË* 8)))

	)

51 
	#IMAGE_WORDS
(
x
Ë(((x)+15)/16)

	)

52 
	#IMAGE_BITSPERIMAGE
 ((
IMAGEBITS
Ë* 8)

	)

53 
	#IMAGE_FIRSTBIT
 ((
IMAGEBITS
Ë0x8000)

	)

54 
	#IMAGE_NEXTBIT
(
m
Ë((
IMAGEBITS
Ë((mË>> 1))

	)

55 
	#IMAGE_TESTBIT
(
m
Ë((mË& 
IMAGE_FIRSTBIT
Ë

	)

56 
	#IMAGE_SHIFTBIT
(
m
Ë((
IMAGEBITS
Ë((mË<< 1)Ë

	)

59 
HINSTANCE
 
	gghIn°™˚
;

60 
	gAPPWINCLASS
[] = "convfnt";

61 
	gMAX_WIDTH
 = 0;

62 
	gAVE_WIDTH
;

63 
	gCHAR_HEIGHT
;

64 
	gCHAR_ASCENT
;

65 
	gf⁄äame
[64];

66 
FILE
 * 
	gÂ
;

67 
HFONT
 
	ghf⁄t
;

68 
	gFIRST_CHAR
 = ' ';

69 
	gLAST_CHAR
 = 256;

70 
	gcuroff
 = 0;

71 
	goff£ts
[256];

72 
	gwidths
[256];

73 
	ghaveArgs
 = 0;

77 
LRESULT
 
CALLBACK
 
WndProc
(
HWND
 
hwnd
,
UINT
 
uMsg
,
WPARAM
 
wp
,
LPARAM
 
Õ
);

79 
HWND
 
InôAµ
();

80 
InôCœs£s
();

81 
doô
(
HDC
 
hdc
);

82 
c⁄v‚t
(
HDC
 
hdc
);

83 
¥öt_ch¨
(
ch
,
IMAGEBITS
 *
b
, 
w
, 
h
);

84 
¥öt_bôs
(
IMAGEBITS
 *
bôs
, 
width
, 
height
);

85 
HFONT
 
WINAPI
 
GëF⁄t
(
HDC
 
hDC
, 
LPSTR
 
«me
, 
height
, 
width
, 
°yÀ
);

86 
HFONT
 
WINAPI
 
GëF⁄tEx
(
HDC
 
hDC
, 
LPSTR
 
«me
, 
height
, 
width
, 
°yÀ
,

87 
ch¨£t
);

89 
WINAPI


90 
	$WöMaö
(
HINSTANCE
 
hIn°™˚
, HINSTANCE 
hPªvIn°™˚
, 
LPSTR
 
ÕCmdLöe
,

91 
nShowCmd
)

93 
MSG
 
msg
;

94 
HDC
 
hdc
;

95 
i
;

96 *
¨gv
[10];

97 
¨gc
;

98 
cmdLöe
[1024];

99 *
cmdLöePå
;

101 
ghIn°™˚
 = 
hIn°™˚
;

102 
	`InôCœs£s
();

103 
	`InôAµ
();

105 
	`°∫˝y
(
cmdLöe
, 
ÕCmdLöe
, 1024);

106 
cmdLöe
[1023] = '\0';

108 
i
 = 
	`©oi
(
cmdLöe
);

109 
hdc
 = 
	`GëDC
(
NULL
);

110 
i
) {

112 if(*
cmdLöe
 == 0)

114 
haveArgs
 = 0;

115 
	`°r˝y
(
cmdLöe
, "\"MS Sans Serif\"");

118 
haveArgs
 = 1;

119 
¨gc
 = 0;

120 
cmdLöePå
 = 
cmdLöe
;

123 *
cmdLöePå
 != '\0'

124 && (*
cmdLöePå
 == ' ' || *cmdLinePtr == '\t'))

125 
cmdLöePå
++;

126 i‡(*
cmdLöePå
 != '\0')

128 if(*
cmdLöePå
 == '"' || *cmdLinePtr == '\'')

130 
cmdLöePå
++;

131 
¨gv
[
¨gc
] = 
cmdLöePå
;

132 
¨gc
++;

133 *
cmdLöePå
 != '\0' && *cmdLinePtr != '"'

134 && *
cmdLöePå
 != '\t')

135 
cmdLöePå
++;

136 i‡(*
cmdLöePå
 == '\0')

139 *
cmdLöePå
++ = '\0';

143 
¨gv
[
¨gc
] = 
cmdLöePå
;

144 
¨gc
++;

145 *
cmdLöePå
 != '\0' && *cmdLinePtr != ' '

146 && *
cmdLöePå
 != '\t')

147 
cmdLöePå
++;

148 i‡(*
cmdLöePå
 == '\0')

151 *
cmdLöePå
++ = '\0';

154 } 
¨gc
 < 10 && *
cmdLöePå
 != '\0');

156 i‡(
¨gc
 == 0)

157 
haveArgs
 = 0;

159 i‡(
¨gc
 >= 1)

160 
F⁄t_Name
 = 
¨gv
[0];

162 i‡(
¨gc
 >= 2)

163 
F⁄t_Height
 = 
	`©oi
(
¨gv
[1]);

165 i‡(
¨gc
 >3 && *(
¨gv
[2]) >= '0' && *(argv[2]) <= '9')

166 
F⁄t_Width
 = 
	`©oi
(
¨gv
[2]);

167 i‡(
F⁄t_Width
 < 0)

168 
F⁄t_Width
 = 0;

170 
i
 = 2; i < 
¨gc
; i++)

172 i‡(
	`°ricmp
(
¨gv
[
i
], "italic") == 0)

173 
F⁄t_StyÀ
 |
FONT_ITALIC
;

174 i‡(
	`°ricmp
(
¨gv
[
i
], "bold") == 0)

175 
F⁄t_StyÀ
 |
FONT_BOLD
;

178 
F⁄t_StyÀ
)

180 
FONT_BOLD
:

181 
F⁄t_StyÀ_Såög
 = "bold";

183 
FONT_ITALIC
:

184 
F⁄t_StyÀ_Såög
 = "italic";

186 
FONT_BOLD
 | 
FONT_ITALIC
:

187 
F⁄t_StyÀ_Såög
 = "bold italic";

191 
hf⁄t
 = 
	`GëF⁄t
(
hdc
, 
F⁄t_Name
, -
F⁄t_Height
,

192 
F⁄t_Width
, 
F⁄t_StyÀ
);

195 
hf⁄t
 = 
	`GëStockObje˘
(
DEFAULT_GUI_FONT
);

198 
hf⁄t
 = 
	`GëStockObje˘
(
SYSTEM_FONT
);

201 
hf⁄t
 = 
	`GëStockObje˘
(
OEM_FIXED_FONT
);

204 
hf⁄t
 = 
	`GëStockObje˘
(
ANSI_VAR_FONT
);

207 
	`Rñó£DC
(
NULL
, 
hdc
);

209 
	`GëMesßge
(&
msg
, 
NULL
, 0, 0)) {

210 
	`Tøn¶©eMesßge
(&
msg
);

211 
	`Di•©chMesßge
(&
msg
);

214 
	}
}

217 
	$InôCœs£s
()

219 
WNDCLASS
 
wc
;

221 
wc
.
°yÀ
 = 
CS_DBLCLKS
 | 
CS_VREDRAW
 | 
CS_HREDRAW
;

222 
wc
.
Õ‚WndProc
 = (
WNDPROC
)
WndProc
;

223 
wc
.
cbClsExåa
 = 0;

224 
wc
.
cbWndExåa
 = 0;

225 
wc
.
hIn°™˚
 = 
ghIn°™˚
;

226 
wc
.
hIc⁄
 = 
	`LﬂdIc⁄
(
ghIn°™˚
, 
	`MAKEINTRESOURCE
( 1));

227 
wc
.
hCurs‹
 = 
	`LﬂdCurs‹
(
NULL
, 
IDC_ARROW
);

228 
wc
.
hbrBackground
 = 
	`GëStockObje˘
(
LTGRAY_BRUSH
);

229 
wc
.
ÕszMíuName
 = 
NULL
;

230 
wc
.
ÕszCœssName
 = 
APPWINCLASS
;

231  
	`Regi°îCœss
–&
wc
);

232 
	}
}

234 
HWND


235 
	$InôAµ
()

237 
HWND
 
hwnd
;

239 
hwnd
 = 
	`Cª©eWödowEx
–0L, 
APPWINCLASS
,

241 
WS_OVERLAPPEDWINDOW
,

242 
CW_USEDEFAULT
, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT,

243 
NULL
,

244 
NULL
,

245 
ghIn°™˚
,

246 
NULL
);

248 if–
hwnd
 =
NULL
)

251 
	`ShowWödow
–
hwnd
, 
SW_SHOW
);

252  
hwnd
;

253 
	}
}

256 
LRESULT
 
CALLBACK


257 
	$WndProc
(
HWND
 
hwnd
, 
UINT
 
msg
, 
WPARAM
 
wp
, 
LPARAM
 
Õ
)

259 
PAINTSTRUCT
 
ps
;

260 
HDC
 
hdc
;

261 
LOGFONT
 
lf
;

262 
TEXTMETRIC
 
tm
;

263 
outfûe
[64];

264 *
p
, *
q
;

266  
msg
) {

267 
WM_CREATE
:

270 
WM_DESTROY
:

271 
	`Po°QuôMesßge
(0);

274 
WM_PAINT
:

275 
hdc
 = 
	`BegöPaöt
(
hwnd
, &
ps
);

276 
	`Sñe˘Obje˘
(
hdc
, 
hf⁄t
);

278 
	`GëObje˘
(
hf⁄t
, (
lf
), &lf);

279 
	`GëTextMërics
(
hdc
, &
tm
);

280 
MAX_WIDTH
 = 0;

281 
AVE_WIDTH
 = 
tm
.
tmAveCh¨Width
;

282 
CHAR_HEIGHT
 = 
tm
.
tmHeight
;

283 
CHAR_ASCENT
 = 
tm
.
tmAs˚¡
;

284 
FIRST_CHAR
 = 
tm
.
tmFú°Ch¨
;

285 
LAST_CHAR
 = 
tm
.
tmLa°Ch¨
 + 1;

286 
	`°r˝y
(
f⁄äame
, 
lf
.
lfFa˚Name
);

287 
q
 = 
p
 = 
f⁄äame
;

288 *
p
) {

289 if(*
p
 != ' ')

290 *
q
++ = *
p
;

291 ++
p
;

293 *
q
 = 0;

295 i‡(
haveArgs
)

297 
ßm∂e
[1024];

298 
	`•rötf
(
ßm∂e
, "C⁄vîtög f⁄à\"%s\", Heighà%d, Width %d, StyÀ \"%s\" ", 
F⁄t_Name
, 
F⁄t_Height
, 
F⁄t_Width
, 
F⁄t_StyÀ_Såög
);

299 
	`TextOut
(
hdc
, 0, 150, 
ßm∂e
, 
	`°æí
(sample));

300 
	`w•rötf
(
outfûe
, "wö%s%dx%d.c", 
f⁄äame
,

301 
AVE_WIDTH
, 
CHAR_HEIGHT
);

302 
	`•rötf
(
ßm∂e
,

304 
outfûe
, 
AVE_WIDTH
, 
CHAR_HEIGHT
);

305 
	`TextOut
(
hdc
, 0, 200, 
ßm∂e
, 
	`°æí
(sample));

306 
Â
 = 
	`f›í
(
outfûe
, "wt");

307 
	`doô
(
hdc
);

308 
	`f˛o£
(
Â
);

309 
	`TextOut
(
hdc
, 0, 250, " DONE! ", 7);

313 *
ußge
 = "Usage: convfnt.exe \"fontname\" [Öixel_height [pixel_width] [bold] [italic] ] ";

314 
	`TextOut
(
hdc
, 0, 0, 
ußge
, 
	`°æí
(usage));

315 
ußge
 = "Example: convfnt.exe \"my font\" 25 12 bold italic ";

316 
	`TextOut
(
hdc
, 0, 30, 
ußge
, 
	`°æí
(usage));

318 
	`EndPaöt
(
hwnd
, &
ps
);

321 
WM_LBUTTONDOWN
:

325  
	`DefWödowProc
–
hwnd
, 
msg
, 
wp
, 
Õ
);

328 
	}
}

332 
	$c⁄v‚t
(
HDC
 
hdc
)

334 
SIZE
 
size
;

335 
ch
;

336 
i
;

337 
x
, 
y
, 
w
;

338 
w‹d_width
;

339 
IMAGEBITS
 
mask_vÆue
;

340 
IMAGEBITS
 *
image_±r
;

341 
IMAGEBITS
 
c
;

342 
IMAGEBITS
 
image
[
MAX_BITS_HEIGHT
 * 
	`IMAGE_WORDS
(
MAX_BITS_WIDTH
)];

343 
IMAGEBITS
 
mask
[
IMAGE_BITSPERIMAGE
 * 
	`IMAGE_WORDS
(
MAX_BITS_WIDTH
)] = {

356 
i
 = 
FIRST_CHAR
; i < 
LAST_CHAR
; ++i)

358 
ch
 = 
i
;

359 
	`TextOut
(
hdc
, 0, 0, &
ch
, 1);

360 
	`GëTextExã¡Poöt32
(
hdc
, &
ch
, 1, &
size
);

361 i‡(
size
.
cx
 > 
MAX_BITS_WIDTH
)

363 
off£ts
[
ch
] = 
curoff
;

364 
widths
[
ch
] = 0;

366 i‡(
size
.
cx
 > 
MAX_WIDTH
)

367 
MAX_WIDTH
 = 
size
.
cx
;

368 
w‹d_width
 = 
	`IMAGE_WORDS
(
size
.
cx
);

369 
y
 = 0; y < 
size
.
cy
; ++y)

371 
w
 = 0; w < 
w‹d_width
; w++)

373 
image_±r
 = &(
image
[(
y
 * 
w‹d_width
Ë+ 
w
]);

374 *
image_±r
 = 0;

375 
x
=
IMAGE_BITSPERIMAGE
 * 
w
;

376 
x
 < ()((
IMAGE_BITSPERIMAGE
 * 
w
Ë+ 16Ë&& x < 
size
.
cx
;

377 ++
x
)

379 
c
 = 
	`GëPixñ
(
hdc
, 
x
, 
y
)? 0: 1;

380 
mask_vÆue
 = 
mask
[
x
];

381 *
image_±r
 = (*image_±∏& ~
mask_vÆue
)

382 | (
c
 << (15 - (
x
 % 16)));

386 
off£ts
[
ch
] = 
curoff
;

387 
widths
[
ch
] = 
size
.
cx
;

388 
	`¥öt_ch¨
(
ch
, 
image
, 
size
.
cx
, size.
cy
);

389 
	`¥öt_bôs
(
image
, 
size
.
cx
, size.
cy
);

390 
curoff
 +(
size
.
cy
 * 
w‹d_width
);

391 
	`Ârötf
(
Â
, "\n");

393 
	}
}

397 
	$doô
(
HDC
 
hdc
)

399 
i
;

401 
	`Ârötf
(
Â
, "/* Generated by convfnt.exe*/\n");

402 
	`Ârötf
(
Â
, "#include \"device.h\"\n\n");

403 
	`Ârötf
(
Â
, "/* Windows %s %dx%d Font */\n",

404 
f⁄äame
, 
AVE_WIDTH
, 
CHAR_HEIGHT
);

405 
	`Ârötf
(
Â
, "/* Originated from: \"%s\", Height %d, Width %d, Style \"%s\" */\n\n",

406 
F⁄t_Name
, 
F⁄t_Height
, 
F⁄t_Width
, 
F⁄t_StyÀ_Såög
);

407 
	`Ârötf
(
Â
, "static MWIMAGEBITS win%s%dx%d_bits[] = {\n\n",

408 
f⁄äame
, 
AVE_WIDTH
, 
CHAR_HEIGHT
);

410 
	`c⁄v‚t
(
hdc
);

412 
	`Ârötf
(
Â
, "};\n\n");

414 
	`Ârötf
(
Â
, "/* Character->glyph data. */\n");

415 
	`Ârötf
(
Â
, "static unsigned short win%s%dx%d_offset[] = {\n",

416 
f⁄äame
, 
AVE_WIDTH
, 
CHAR_HEIGHT
);

417 
i
=
FIRST_CHAR
; i<
LAST_CHAR
; ++i)

418 
	`Ârötf
(
Â
, " %d,\à/* %¯(0x%02xË*/\n", 
off£ts
[
i
], i<' '? ' ':i , i);

419 
	`Ârötf
(
Â
, "};\n\n");

421 
	`Ârötf
(
Â
, "/* Character width data. */\n");

422 
	`Ârötf
(
Â
, "static unsigned char win%s%dx%d_width[] = {\n",

423 
f⁄äame
, 
AVE_WIDTH
, 
CHAR_HEIGHT
);

424 
i
=
FIRST_CHAR
; i<
LAST_CHAR
; ++i)

425 
	`Ârötf
(
Â
, " %d,\à/* %¯(0x%02xË*/\n", 
widths
[
i
], i<' '? ' ':i , i);

426 
	`Ârötf
(
Â
, "};\n\n");

429 
	`Ârötf
(
Â
, "/* Exported structure definition. */\n"

431 
f⁄äame
, 
AVE_WIDTH
, 
CHAR_HEIGHT
);

432 
	`Ârötf
(
Â
, "\t\"wö%s%dx%d\",\n", 
f⁄äame
, 
AVE_WIDTH
, 
CHAR_HEIGHT
);

433 
	`Ârötf
(
Â
, "\t%d,\n", 
MAX_WIDTH
);

434 
	`Ârötf
(
Â
, "\t%d,\n", 
CHAR_HEIGHT
);

435 
	`Ârötf
(
Â
, "\t%d,\n", 
CHAR_ASCENT
);

436 
	`Ârötf
(
Â
, "\t%d,\n\t%d,\n", 
FIRST_CHAR
, 
LAST_CHAR
-FIRST_CHAR);

437 
	`Ârötf
(
Â
, "\twö%s%dx%d_bôs,\n", 
f⁄äame
, 
AVE_WIDTH
, 
CHAR_HEIGHT
);

438 
	`Ârötf
(
Â
, "\twö%s%dx%d_off£t,\n", 
f⁄äame
, 
AVE_WIDTH
, 
CHAR_HEIGHT
);

439 
	`Ârötf
(
Â
, "\twö%s%dx%d_width,\n", 
f⁄äame
, 
AVE_WIDTH
, 
CHAR_HEIGHT
);

440 
	`Ârötf
(
Â
, "};\n");

441 
	}
}

461 
	$¥öt_ch¨
(
ch
,
IMAGEBITS
 *
bôs
, 
width
, 
height
)

463 
x
, 
w‹d_width
;

464 
bôcou¡
;

465 
IMAGEBITS
 
bôvÆue
;

467 
	`Ârötf
(
Â
, "/* Ch¨a˘î %¯(0x%02x):\n", (
ch
 < ' '? ' ': ch), ch);

468 
	`Ârötf
(
Â
, " ht=%d, width=%d\n", 
height
, 
width
);

469 
	`Ârötf
(
Â
, " +");

470 
x
 = 0; x < 
width
; ++x)

471 
	`Ârötf
(
Â
, "-");

472 
	`Ârötf
(
Â
, "+\n");

473 
x
 = 0;

474 
bôcou¡
 = 0;

475 
w‹d_width
 = 
	`IMAGE_WORDS
(
width
);

476 
height
 > 0)

478 i‡(
bôcou¡
 <= 0)

480 
	`Ârötf
(
Â
, " |");

481 
bôcou¡
 = 
IMAGE_BITSPERIMAGE
 * 
w‹d_width
;

482 
bôvÆue
 = *
bôs
++;

484 i‡(
	`IMAGE_TESTBIT
(
bôvÆue
))

485 
	`Ârötf
(
Â
, "*");

487 
	`Ârötf
(
Â
, " ");

488 
bôvÆue
 = 
	`IMAGE_SHIFTBIT
(bitvalue);

489 --
bôcou¡
;

490 i‡(
bôcou¡
 > 0 && (bôcou¡ % 
IMAGE_BITSPERIMAGE
) == 0)

491 
bôvÆue
 = *
bôs
++;

492 i‡(
x
++ =
width
-1)

494 
x
 = 0;

495 --
height
;

496 
bôcou¡
 = 0;

497 
	`Ârötf
(
Â
, "|\n");

500 
	`Ârötf
(
Â
, " +");

501 
x
=0; x<
width
; ++x)

502 
	`Ârötf
(
Â
, "-");

503 
	`Ârötf
(
Â
, "+ */\n");

504 
	}
}

506 
	#IMAGE_GETBIT4
(
m
Ë(((mË& 0xf000Ë>> 12)

	)

507 
	#IMAGE_SHIFTBIT4
(
m
Ë((
IMAGEBITS
Ë((mË<< 4))

	)

510 
	$¥öt_bôs
(
IMAGEBITS
 *
bôs
, 
width
, 
height
)

512 
x
, 
w‹d_width
;

513 
bôcou¡
;

514 
IMAGEBITS
 
bôvÆue
;

516 
x
 = 0;

517 
bôcou¡
 = 0;

518 
w‹d_width
 = 
	`IMAGE_WORDS
(
width
);

519 
height
 > 0)

521 i‡(
bôcou¡
 <= 0)

523 
	`Ârötf
(
Â
, "0x");

524 
bôcou¡
 = 
IMAGE_BITSPERIMAGE
 * 
w‹d_width
;

525 
bôvÆue
 = *
bôs
++;

527 
	`Ârötf
(
Â
, "%x", 
	`IMAGE_GETBIT4
(
bôvÆue
));

528 
bôvÆue
 = 
	`IMAGE_SHIFTBIT4
(bitvalue);

529 
bôcou¡
 -= 4;

530 i‡(
bôcou¡
 > 0 && (bôcou¡ % 
IMAGE_BITSPERIMAGE
) == 0)

532 
	`Ârötf
(
Â
, ",0x");

533 
bôvÆue
 = *
bôs
++;

535 
x
 += 4;

536 i‡(
x
 >
width
)

538 if(
IMAGE_BITSPERIMAGE
 > (
width
 % IMAGE_BITSPERIMAGE)

539 && (
width
 % 
IMAGE_BITSPERIMAGE
) != 0)

540 
x
 = 
IMAGE_BITSPERIMAGE
 - (
width
 % IMAGE_BITSPERIMAGE);

541 
x
 > 3; x -= 4)

543 
	`Ârötf
(
Â
, "0");

545 
x
 = 0;

546 --
height
;

547 
bôcou¡
 = 0;

548 
	`Ârötf
(
Â
, ",\n");

551 
	}
}

563 
HFONT
 
WINAPI


564 
	$GëF⁄t
(
HDC
 
hDC
, 
LPSTR
 
f⁄tName
,
f⁄tSize
,
f⁄tWidth
,
f⁄tStyÀ
)

566  
	`GëF⁄tEx
(
hDC
, 
f⁄tName
, 
f⁄tSize
, 
f⁄tWidth
,

567 
f⁄tStyÀ
, 
ANSI_CHARSET
);

568 
	}
}

570 
HFONT
 
WINAPI


571 
	$GëF⁄tEx
(
HDC
 
hDC
, 
LPSTR
 
f⁄tName
,
f⁄tSize
,
f⁄tWidth
,

572 
f⁄tStyÀ
,
ch¨£t
)

574 
LOGFONT
 
lf
;

575 
HDC
 
hdc
;

577 
	`mem£t
–&
lf
, 0, (
LOGFONT
));

579 if–
f⁄tSize
 < 0 || 
hDC
)

580 
hdc
 = 
hDC
;

581 
hdc
 = 
	`GëDC
–
	`GëDeskt›Wödow
());

584 if–
f⁄tSize
 < 0)

585 
lf
.
lfHeight
 = -
f⁄tSize
;

586 
lf
.
lfHeight
 = -
	`MulDiv
–
f⁄tSize
,

587 
	`GëDevi˚C≠s
–
hdc
, 
LOGPIXELSY
), 72);

588 if–
f⁄tName
)

589 
	`°∫˝y
–
lf
.
lfFa˚Name
, 
f⁄tName
, 
LF_FACESIZE
);

590 
lf
.
lfFa˚Name
[ 0] = '\0';

591 
lf
.
lfWeight
 = (
f⁄tStyÀ
 & 01)? 
FW_BOLD
: 
FW_NORMAL
;

592 if–
f⁄tStyÀ
 & 02)

593 
lf
.
lfIèlic
 = 1;

594 
lf
.
lfCh¨Së
 = 
ch¨£t
;

595 
lf
.
lfWidth
 = 
f⁄tWidth
;

597 if–
f⁄tSize
 > 0 && !
hDC
)

598 
	`Rñó£DC
–
	`GëDeskt›Wödow
(), 
hdc
);

599  
	`Cª©eF⁄tIndúe˘
–&
lf
);

600 
	}
}

	@fonts/tools/convrom.c

7 
	~"../../devi˚.h
"

8 
	~"../vga.h
"

11 
	gROM_CHAR_HEIGHT
 = 16;

12 
	#ROM_CHAR_WIDTH
 8

	)

13 
	#MAX_ROM_HEIGHT
 16

	)

14 
	#FONT_CHARS
 256

	)

17 
	#FNGR640x480
 0x0012

	)

18 
	#FNGR640x350
 0x0010

	)

19 
	#FNTEXT
 0x0003

	)

20 
	#FNGETROMADDR
 0x1130

	)

21 
	#GETROM8x14
 0x0200

	)

22 
	#GETROM8x8
 0x0300

	)

23 
	#GETROM8x16
 0x0600

	)

26 
	#GRMODE
 
FNGR640x350


	)

29 
FARADDR
 
	grom_ch¨_addr
;

31 
¥öt_rom_èbÀ
();

32 
¥öt_ch¨
(
ch
,
MWIMAGEBITS
 *
b
, 
w
, 
h
);

33 
¥öt_bôs
(
MWIMAGEBITS
 *
bôs
, 
width
, 
height
);

35 
	$maö
()

38 
	`öt10
(
GRMODE
, 0);

41 
rom_ch¨_addr
 = 
	`öt10
(
FNGETROMADDR
, 
GETROM8x14
);

47 
ROM_CHAR_HEIGHT
 = 
	`GETBYTE_FP
(
	`MK_FP
(0x0040, 0x0085));

49 
ROM_CHAR_HEIGHT
 = 16;

52 
	`¥ötf
("/* Generated by convrom.exe*/\n");

53 
	`¥ötf
("#include \"device.h\"\n\n");

54 
	`¥ötf
("/* ROM %dx%d Font bios mode %x */\n\n",

55 
ROM_CHAR_WIDTH
, 
ROM_CHAR_HEIGHT
, 
GRMODE
);

56 
	`¥ötf
("static MWIMAGEBITSÑom%dx%d_bits[] = {\n\n",

57 
ROM_CHAR_WIDTH
, 
ROM_CHAR_HEIGHT
);

59 
	`¥öt_rom_èbÀ
();

61 
	`¥ötf
("};\n\n");

62 
	`¥ötf
("/* Exported structure definition. */\n"

64 
ROM_CHAR_WIDTH
, 
ROM_CHAR_HEIGHT
);

65 
	`¥ötf
("\t\"rom%dx%d\",\n", 
ROM_CHAR_WIDTH
, 
ROM_CHAR_HEIGHT
);

66 
	`¥ötf
("\t%d,\n", 
ROM_CHAR_WIDTH
);

67 
	`¥ötf
("\t%d,\n", 
ROM_CHAR_HEIGHT
);

68 
	`¥ötf
("\t%d,\n", 
ROM_CHAR_HEIGHT
);

69 
	`¥ötf
("\t0,\n\t256,\n");

70 
	`¥ötf
("\åom%dx%d_bôs,\n", 
ROM_CHAR_WIDTH
, 
ROM_CHAR_HEIGHT
);

71 
	`¥ötf
("\t0,\n\t0\n");

72 
	`¥ötf
("};\n");

75 
	`öt10
(
FNTEXT
, 0);

76 
	}
}

79 
	$¥öt_rom_èbÀ
()

81 
FARADDR
 
bôs
;

82 
n
;

83 
ch
;

84 
MWIMAGEBITS
 * 
p
;

85 
MWIMAGEBITS
 
image
[
MAX_ROM_HEIGHT
];

87 
ch
=0; ch < 256; ++ch) {

88 
bôs
 = 
rom_ch¨_addr
 + 
ch
 * 
ROM_CHAR_HEIGHT
;

89 
p
 = 
image
;

90 
n
=0;Ç<
ROM_CHAR_HEIGHT
; ++n)

91 *
p
++ = 
	`GETBYTE_FP
(
bôs
++) << 8;

92 
	`¥öt_ch¨
(
ch
, 
image
, 
ROM_CHAR_WIDTH
, 
ROM_CHAR_HEIGHT
);

93 
	`¥öt_bôs
(
image
, 
ROM_CHAR_WIDTH
, 
ROM_CHAR_HEIGHT
);

94 
	`¥ötf
("\n");

96 
	}
}

116 
	$¥öt_ch¨
(
ch
,
MWIMAGEBITS
 *
bôs
, 
width
, 
height
)

118 
COORD
 
x
;

119 
bôcou¡
;

120 
MWIMAGEBITS
 
bôvÆue
;

122 
	`¥ötf
("/* Ch¨a˘î %¯(0x%02x):\n", 
ch
? ch: ' ', ch);

123 
	`¥ötf
(" ht=%d, width=%d\n", 
height
, 
width
);

124 
	`¥ötf
(" +");

125 
x
=0; x<
width
; ++x)

126 
	`¥ötf
("-");

127 
	`¥ötf
("+\n");

128 
x
 = 0;

129 
bôcou¡
 = 0;

130 
height
 > 0) {

131 i‡(
bôcou¡
 <= 0) {

132 
	`¥ötf
(" |");

133 
bôcou¡
 = 
MWIMAGE_BITSPERIMAGE
;

134 
bôvÆue
 = *
bôs
++;

136 i‡(
	`MWIMAGE_TESTBIT
(
bôvÆue
))

137 
	`¥ötf
("*");

138 
	`¥ötf
(" ");

139 
bôvÆue
 = 
	`MWIMAGE_SHIFTBIT
(bitvalue);

140 --
bôcou¡
;

141 i‡(
x
++ =
width
-1) {

142 
x
 = 0;

143 --
height
;

144 
bôcou¡
 = 0;

145 
	`¥ötf
("|\n");

148 
	`¥ötf
(" +");

149 
x
=0; x<
width
; ++x)

150 
	`¥ötf
("-");

151 
	`¥ötf
("+ */\n");

152 
	}
}

154 
	#MWIMAGE_GETBIT4
(
m
Ë(((mË& 0xf000Ë>> 12)

	)

155 
	#MWIMAGE_SHIFTBIT4
(
m
Ë((
IMAGEBITS
Ë((mË<< 4))

	)

158 
	$¥öt_bôs
(
MWIMAGEBITS
 *
bôs
, 
width
, 
height
)

160 
COORD
 
x
;

161 
bôcou¡
;

162 
MWIMAGEBITS
 
bôvÆue
;

164 
x
 = 0;

165 
bôcou¡
 = 0;

166 
height
 > 0) {

167 i‡(
bôcou¡
 <= 0) {

168 
	`¥ötf
("0x");

169 
bôcou¡
 = 
MWIMAGE_BITSPERIMAGE
;

170 
bôvÆue
 = *
bôs
++;

172 
	`¥ötf
("%x", 
	`MWIMAGE_GETBIT4
(
bôvÆue
));

173 
bôvÆue
 = 
	`MWIMAGE_SHIFTBIT4
(bitvalue);

174 
bôcou¡
 -= 4;

175 
x
 += 4;

176 i‡(
x
 >
width
-1) {

177 if(
MWIMAGE_BITSPERIMAGE
 > 
width
)

178 
x
=
MWIMAGE_BITSPERIMAGE
-
width
; x>0; ) {

179 
	`¥ötf
("0");

180 
x
 -= 4;

182 
x
 = 0;

183 --
height
;

184 
bôcou¡
 = 0;

185 
	`¥ötf
(",\n");

188 
	}
}

	@fonts/winFreeSansSerif11x13.c

2 
	~"devi˚.h
"

12 
MWIMAGEBITS
 
	gwöFªeS™sSîif11x13_bôs
[] = {

6962 
	gwöFªeS™sSîif11x13_off£t
[] = {

7191 
	gwöFªeS™sSîif11x13_width
[] = {

7419 
MWCFONT
 
	gf⁄t_wöFªeS™sSîif11x13
 = {

7426 
wöFªeS™sSîif11x13_bôs
,

7428 
wöFªeS™sSîif11x13_width
,

	@fonts/winFreeSystem14x16.c

2 
	~"devi˚.h
"

12 
MWIMAGEBITS
 
	gwöFªeSy°em14x16_bôs
[] = {

8306 
	gwöFªeSy°em14x16_off£t
[] = {

8535 
	gwöFªeSy°em14x16_width
[] = {

8763 
MWCFONT
 
	gf⁄t_wöFªeSy°em14x16
 = {

8770 
wöFªeSy°em14x16_bôs
,

8772 
wöFªeSy°em14x16_width
,

	@include/XtoNX.h

1 #i‚de‡
__XTONX_H


2 
	#__XTONX_H


	)

12 #ifde‡
__˝lu•lus


16 
	#MWINCLUDECOLORS


	)

17 
	~"«no-X.h
"

24 
GR_CURSOR_ID
 
	tCurs‹
;

25 
GR_DRAW_ID
 
	tDøwabÀ
;

26 
GR_FONT_ID
 
	tF⁄t
;

27 
GR_GC_ID
 
	tGC
;

28 
GR_WINDOW_ID
 
	tPixm≠
;

29 
GR_REGION_ID
 
	tRegi⁄
;

30 
	tTime
;

31 
GR_WINDOW_ID
 
	tWödow
;

32 
GR_EVENT
 
	tXEvít
;

33 
GR_FONT_INFO
 
	tXF⁄tSåu˘
;

34 
GR_POINT
 
	tXPoöt
;

35 
GR_RECT
 
	tXRe˘™gÀ
;

39 
GR_COORD
 
di•œy_width
;

40 
GR_COORD
 
di•œy_height
;

41 
di•œy_bµ
;

42 } 
	tDi•œy
;

45 
	#XCh¨Såu˘
 

	)

52 
	#FÆ£
 0

	)

53 
	#True
 1

	)

55 
	#GXc›y
 
GR_MODE_COPY


	)

56 
	#GXx‹
 
GR_MODE_XOR


	)

57 
	#N⁄e
 0

	)

58 
	#Re˘™gÀOut
 
MWRECT_OUT


	)

59 
	#Re˘™gÀIn
 
MWRECT_ALLIN


	)

60 
	#Re˘™gÀP¨t
 
MWRECT_PARTIN


	)

63 
	#Buâ⁄PªssMask
 
GR_EVENT_MASK_BUTTON_DOWN


	)

64 
	#Buâ⁄Rñó£Mask
 
GR_EVENT_MASK_BUTTON_UP


	)

65 
	#E¡îWödowMask
 
GR_EVENT_MASK_MOUSE_ENTER


	)

66 
	#ExposuªMask
 
GR_EVENT_MASK_EXPOSURE


	)

67 
	#KeyPªssMask
 
GR_EVENT_MASK_KEY_DOWN


	)

68 
	#KeyRñó£Mask
 
GR_EVENT_MASK_KEY_UP


	)

69 
	#LóveWödowMask
 
GR_EVENT_MASK_MOUSE_EXIT


	)

70 
	#Sub°ru˘uªNŸifyMask
 
GR_EVENT_MASK_CHLD_UPDATE


	)

72 
	#Buâ⁄Pªss
 
GR_EVENT_TYPE_BUTTON_DOWN


	)

73 
	#Buâ⁄Rñó£
 
GR_EVENT_TYPE_BUTTON_UP


	)

74 
	#C⁄figuªNŸify
 
GR_EVENT_TYPE_CHLD_UPDATE


	)

75 
	#E¡îNŸify
 
GR_EVENT_TYPE_MOUSE_ENTER


	)

76 
	#Expo£
 
GR_EVENT_TYPE_EXPOSURE


	)

77 
	#KeyPªss
 
GR_EVENT_TYPE_KEY_DOWN


	)

78 
	#KeyRñó£
 
GR_EVENT_TYPE_KEY_UP


	)

79 
	#LóveNŸify
 
GR_EVENT_TYPE_MOUSE_EXIT


	)

86 
	#BœckPixñ
(
d
,
s
Ë
BLACK


	)

87 
	#DeÁu…S¸ìn
(
d
Ë0

	)

88 
	#RoŸWödow
(
d
,
s
Ë
GR_ROOT_WINDOW_ID


	)

89 
	#WhôePixñ
(
d
,
s
Ë
WHITE


	)

90 
	#XCÀ¨Aªa
(
d
,
w
,
X
,
Y
,
W
,
H
,
e
Ë
	`GrCÀ¨Aªa
(w,X,Y,W,H,e)

	)

91 
	#XCÀ¨Wödow
(
d
,
w
Ë
	`GrCÀ¨Aªa
(w,0,0,0,0,
GR_FALSE
)

	)

92 
	#XClo£Di•œy
(
d
Ë
	`GrClo£
()

	)

93 
	#XC›yAªa
(
s
,
sw
,
dw
,
gc
,
sx
,
sy
,
W
,
H
,
dx
,
dy
Ë
	`GrC›yAªa
(dw,gc,dx,dy,W,H,sw,sx,sy,0)

	)

94 
	#XCª©eBôm≠FromD©a
(
d
,
w
,
bm
,
W
,
H
) \

95 
	`GrNewPixm≠FromD©a
(
W
,
H
,
WHITE
,
BLACK
,(*)
bm
, \

96 
GR_BMDATA_BYTEREVERSE
|
GR_BMDATA_BYTESWAP
)

	)

97 
	#XCª©eGC
(
d
,
a
,
b
,
c
Ë
	`GrNewGC
()

	)

98 
	#XCª©ePixm≠
(
d
,
w
,
W
,
H
,
dïth
Ë
	`GrNewPixm≠
(W,H,(*)0)

	)

99 
	#XCª©ePixm≠FromBôm≠D©a
(
d
,
w
,
bm
,
W
,
H
,
f
,
b
,
dïth
) \

100 
	`GrNewPixm≠FromD©a
(
W
,
H
,
f
,
b
,(*)
bm
, \

101 
GR_BMDATA_BYTEREVERSE
|
GR_BMDATA_BYTESWAP
)

	)

102 
	#XCª©eRegi⁄
(Ë
	`GrNewRegi⁄
()

	)

103 
	#XCª©eSim∂eWödow
(
d
,
p
,
x
,
y
,
w
,
h
,
bw
,
b‹dc
,
backc
) \

104 
	`GrNewWödow
(
p
,
x
,
y
,
w
,
h
,
bw
,
backc
,
b‹dc
)

	)

105 
	#XCª©eWödow
(
d
,
p
,
x
,
y
,
w
,
h
,
bw
,
dïth
,
˛
,
vis
,
vm
,
©å
) \

106 
	`GrNewWödow
(
p
,
x
,
y
,
w
,
h
,
bw
,
WHITE
,
BLACK
)

	)

107 
	#XDeföeCurs‹
(
d
,
w
,
c
Ë
	`GrSëWödowCurs‹
(w,c)

	)

108 
	#XDe°royRegi⁄
(
r
Ë
	`GrDe°royRegi⁄
‘)

	)

109 
	#XDe°royWödow
(
d
,
w
Ë
	`GrDe°royWödow
(w)

	)

110 
	#XDøwArc
(
d
,
w
,
g
,
x
,
y
,
W
,
H
,
a1
,
a2
Ë
	`GrArcAngÀ
(w,g,(x)+(W)/2,(y)+(H)/2,(W)/2,(H)/2,a1,(◊1)+◊2)),
GR_ARC
)

	)

111 
	#XDøwLöe
(
d
,
w
,
g
,
x1
,
y1
,
x2
,
y2
Ë
	`GrLöe
(w,g,x1,y1,x2,y2)

	)

112 
	#XDøwLöes
(
d
,
w
,
g
,
¨
,
˙t
,
B
Ë
	`GrDøwLöes
(w,g,¨,˙t)

	)

113 
	#XDøwRe˘™gÀ
(
d
,
w
,
g
,
x
,
y
,
W
,
H
Ë
	`GrRe˘
(w,g,x,y,W,H)

	)

114 
	#XDøwSåög
(
d
,
w
,
g
,
x
,
y
,
s
,
c
Ë
	`GrText
(w,g,x,y,(*)s,c,
GR_TFASCII
)

	)

115 
	#XFûlArc
(
d
,
w
,
g
,
x
,
y
,
W
,
H
,
a1
,
a2
Ë
	`GrArcAngÀ
(w,g,(x)+(W)/2,(y)+(H)/2,(W)/2,(H)/2,a1,(◊1)+◊2)),
GR_PIE
)

	)

116 
	#XFûlPﬁyg⁄
(
d
,
w
,
gc
,
¨
,
˙t
,
ign1
,
ign2
Ë
	`GrFûlPﬁy
(w,gc,˙t,¨)

	)

117 
	#XFûlRe˘™gÀ
(
d
,
w
,
g
,
x
,
y
,
W
,
H
Ë
	`GrFûlRe˘
(w,g,x,y,W,H)

	)

118 
	#XFlush
(
d
Ë
	`GrFlush
()

	)

119 
	#XFªe
(
p
Ë
	`‰ì
’)

	)

120 
	#XFªeGC
(
w
,
g
Ë
	`GrDe°royGC
(g)

	)

121 
	#XFªePixm≠
(
d
,
w
Ë
	`GrDe°royWödow
(w)

	)

122 
	#XLﬂdF⁄t
(
d
,
f
Ë
	`GrCª©eF⁄t
(0, 0, 0)

	)

123 
	#XLowîWödow
(
d
,
w
Ë
	`GrLowîWödow
(w)

	)

124 
	#XM≠Wödow
(
d
,
w
Ë
	`GrM≠Wödow
(w)

	)

125 
	#XMoveWödow
(
d
,
w
,
x
,
y
Ë
	`GrMoveWödow
(w,x,y)

	)

126 
	#XNextEvít
(
d
,
ï
Ë
	`GrGëNextEvít
”p)

	)

127 
	#XQuîyTªe
(
d
,
w
,
r
,
p
,
c
,
nc
Ë
	`GrQuîyTªe
(w,p,c,nc)

	)

128 
	#XRai£Wödow
(
d
,
w
Ë
	`GrRai£Wödow
(w)

	)

129 
	#XRe˘InRegi⁄
(
r
,
x
,
y
,
w
,
h
Ë
	`GrRe˘InRegi⁄
‘,x,y,w,h)

	)

130 
	#XRï¨ítWödow
(
d
,
w
,
p
,
x
,
y
Ë
	`GrRï¨ítWödow
(w,p,x,y)

	)

131 
	#XResizeWödow
(
d
,
w
,
W
,
H
Ë
	`GrResizeWödow
(w,W,H)

	)

132 
	#XSñe˘I≈ut
(
d
,
w
,
m
Ë
	`GrSñe˘Evíts
(w,m)

	)

133 
	#XSëF⁄t
(
d
,
g
,
f
Ë
	`GrSëGCF⁄t
(g,f)

	)

134 
	#XSëF‹eground
(
d
,
g
,
c
Ë
	`GrSëGCF‹eground
(g,c)

	)

135 
	#XSëFun˘i⁄
(
d
,
g
,
f
Ë
	`GrSëGCMode
(g,f)

	)

136 
	#XSëIc⁄Name
(
d
,
w
,
n
Ë

	)

137 
	#XSëRegi⁄
(
d
,
g
,
c
Ë
	`GrSëGCRegi⁄
(g,c)

	)

138 
	#XSëWödowBackground
(
d
,
w
,
c
Ë
	`GrSëWödowBackgroundCﬁ‹
(w,c)

	)

139 
	#XSëWödowBackgroundPixm≠
(
d
,
w
,
p
Ë
	`GrSëBackgroundPixm≠
(w,p,
GR_BACKGROUND_TILE
)

	)

140 
	#XSëWödowB‹dî
(
d
,
w
,
c
Ë
	`GrSëWödowB‹dîCﬁ‹
(w,c)

	)

141 
	#XSëWödowB‹dîWidth
(
d
,
w
,
bw
Ë
	`GrSëWödowB‹dîSize
(w,bw)

	)

142 
	#XSt‹eName
(
d
,
w
,
n
Ë
	`GrSëWödowTôÀ
(w,n)

	)

143 
	#XSubåa˘Regi⁄
(
§a
,
§b
,
dr
Ë
	`GrSubåa˘Regi⁄
(dr,§a,§b)

	)

144 
	#XSync
(
d
,
f
Ë
	`GrFlush
()

	)

145 
	#XUndeföeCurs‹
(
d
,
w
Ë
	`GrSëWödowCurs‹
(w,0)

	)

146 
	#XUni⁄Re˘WôhRegi⁄
(
ª˘
,
§
,
dr
Ë
	`GrUni⁄Re˘WôhRegi⁄
(dr,ª˘Ë

	)

147 
	#XUnm≠Wödow
(
d
,
w
Ë
	`GrUnm≠Wödow
(w)

	)

154 
	#Di•œyWidth
(
d
,
s
Ë(
_di•œy
.
di•œy_width
)

	)

155 
	#Di•œyHeight
(
d
,
s
Ë(
_di•œy
.
di•œy_height
)

	)

156 
	#DeÁu…Dïth
(
d
,
s
Ë(
_di•œy
.
di•œy_bµ
)

	)

158 
	#STATIC_FUNCTIONS
 \

159 
Di•œy
 
_di•œy
; \

161 
Di•œy
 * \

162 
	`XO≥nDi•œy
(*
«me
) \

164 
GR_SCREEN_INFO
 
söfo
; \

166 i‡(
	`GrO≥n
() < 0) \

167  
NULL
; \

169 
	`GrGëS¸ìnInfo
(&
söfo
); \

170 
_di•œy
.
di•œy_width
 = 
söfo
.
cﬁs
; \

171 
_di•œy
.
di•œy_height
 = 
söfo
.
rows
; \

172 
_di•œy
.
di•œy_bµ
 = 
söfo
.
bµ
; \

174  &
_di•œy
; \

178 
	`XPídög
(
Di•œy
 *
d
) \

180 
GR_EVENT
 
ev
; \

182 
	`GrFlush
(); \

183  
	`GrPìkEvít
(&
ev
); \

184 }

	)

186 #ifde‡
__˝lu•lus


	@include/device.h

1 #i‚de‡
_DEVICE_H


2 
	#_DEVICE_H


	)

11 
	~"mwty≥s.h
"

12 
	~"mwsy°em.h
"

15 
	#ALPHABLEND
 1

	)

16 
	#DYNAMICREGIONS
 1

	)

17 
	#HAVEFLOAT
 1

	)

18 
	#POLYREGIONS
 1

	)

19 
	#ANIMATEPALETTE
 0

	)

20 
	#FONTMAPPER
 0

	)

21 
	#USE_ALLOCA
 1

	)

22 
	#FASTJPEG
 1

	)

23 #i‡
deföed
(
__πems__
Ë|| deföed(
PSP
)

24 
	#HAVE_MMAP
 0

	)

26 
	#HAVE_MMAP
 1

	)

29 
	#TRANSLATE_ESCAPE_SEQUENCES
 1

	)

31 #i‡!((
DOS_DJGPP
Ë|| (
__PACIFIC__
Ë|| (
DOS_TURBOC
))

32 
	#MW_FEATURE_IMAGES
 1

	)

34 
	#MW_FEATURE_IMAGES
 0

	)

37 #i‡
UNIX
 || 
DOS_DJGPP
 || 
HAVE_TIMER_SUPPORT


38 
	#MW_FEATURE_TIMERS
 1

	)

40 
	#MW_FEATURE_TIMERS
 0

	)

44 #i‚de‡
MW_FEATURE_GDERROR


45 #i‡(
deföed
(
GCC_VERSION
Ë&& (GCC_VERSION >2093)Ë|| (deföed(
__GNUC__
Ë&& (__GNUC__ >2Ë&& (
__GNUC_MINOR__
 >= 95))

46 
	#MW_FEATURE_GDERROR
 0

	)

48 
	#MW_FEATURE_GDERROR
 1

	)

52 #i‡
MW_FEATURE_GDERROR


53 
	#EPRINTF
 
GdEº‹


	)

54 #i‡
DEBUG


55 
	#DPRINTF
 
GdEº‹


	)

57 
	#DPRINTF
 
GdEº‹NuŒ


	)

62 
	~<°dio.h
>

63 
	#EPRINTF
(
°r
, 
¨gs
...Ë
	`Ârötf
(
°dîr
, så, ##¨gsË

	)

64 #i‡
DEBUG


65 
	#DPRINTF
(
°r
, 
¨gs
...Ë
	`Ârötf
(
°dîr
, så, ##¨gsË

	)

67 
	#DPRINTF
(
°r
, ...Ë

	)

72 
	#MW_FEATURE_PSDOP_COPY
 0

	)

73 
	#MW_FEATURE_PSDOP_ALPHAMAP
 0

	)

74 
	#MW_FEATURE_PSDOP_ALPHACOL
 0

	)

75 
	#MW_FEATURE_PSDOP_BITMAP_BYTES_LSB_FIRST
 0

	)

76 
	#MW_FEATURE_PSDOP_BITMAP_BYTES_MSB_FIRST
 0

	)

79 
	#MAX_CHAR_HEIGHT
 128

	)

80 
	#MAX_CHAR_WIDTH
 128

	)

81 
	#MIN_MWCOORD
 ((
MWCOORD
Ë-32768Ë

	)

82 
	#MAX_MWCOORD
 ((
MWCOORD
Ë32767Ë

	)

83 
	#MAX_CLIPRECTS
 200

	)

88 #ifde‡
HAVE_FREETYPE_2_SUPPORT


89 #unde‡
MW_FEATURE_PSDOP_ALPHACOL


90 
	#MW_FEATURE_PSDOP_ALPHACOL
 1

	)

91 #unde‡
MW_FEATURE_PSDOP_BITMAP_BYTES_MSB_FIRST


92 
	#MW_FEATURE_PSDOP_BITMAP_BYTES_MSB_FIRST
 1

	)

96 #i‡
VTSWITCH
 && !
MW_FEATURE_TIMERS


97 #îr‹ 
VTSWITCH
 
dïíds
 
⁄
 
MW_FEATURE_TIMERS
 - 
dißbÀ
 VTSWITCH 
ö
 
c⁄fig
 
‹
 
íabÀ
 MW_FEATURE_TIMERS i¿
this
 
fûe


100 
_mws¸ìndevi˚
 *
	tPSD
;

104 * 
	m«me
;

105 
	mmaxwidth
;

106 
	mheight
;

107 
	mas˚¡
;

108 
	mfú°ch¨
;

109 
	msize
;

110 
MWIMAGEBITS
 * 
	mbôs
;

111 *
	moff£t
;

112 * 
	mwidth
;

113 
	mdeÁu…ch¨
;

114 
	mbôs_size
;

115 } 
	tMWCFONT
, *
	tPMWCFONT
;

119 
MWTEXTFLAGS
 
	mícodög
;

120 
MWBOOL
 (*
GëF⁄tInfo
)(
PMWFONT
 
	mpf⁄t
, 
PMWFONTINFO
 
	mpf⁄töfo
);

121 (*
	mGëTextSize
)(
PMWFONT
 
	mpf⁄t
, c⁄° *
	mãxt
, 
	mcc
,

122 
MWTEXTFLAGS
 
	mÊags
, 
MWCOORD
 *
	mpwidth
, MWCOORD *
	mpheight
,

123 
MWCOORD
 *
	mpba£
);

124 (*
	mGëTextBôs
)(
PMWFONT
 
	mpf⁄t
, 
	mch
, c⁄° 
MWIMAGEBITS
 **
	mªtm≠
,

125 
MWCOORD
 *
	mpwidth
, MWCOORD *
	mpheight
, MWCOORD *
	mpba£
);

126 (*
	mDe°royF⁄t
)(
PMWFONT
 
	mpf⁄t
);

127 (*
	mDøwText
)(
PMWFONT
 
	mpf⁄t
, 
PSD
 
	mpsd
, 
MWCOORD
 
	mx
, MWCOORD 
	my
,

128 c⁄° *
	m°r
, 
	mcou¡
, 
MWTEXTFLAGS
 
	mÊags
);

129 (*
	mSëF⁄tSize
)(
PMWFONT
 
	mpf⁄t
, 
MWCOORD
 
	mf⁄tsize
);

130 (*
	mSëF⁄tRŸ©i⁄
)(
PMWFONT
 
	mpf⁄t
, 
	mã¡hdegªes
);

131 (*
	mSëF⁄tAâr
)(
PMWFONT
 
	mpf⁄t
, 
	m£tÊags
, 
	m˛rÊags
);

132 
PMWFONT
 (*
Du∂iˇã
Ë(PMWFONT 
	mp§cf⁄t
, 
MWCOORD
 
	mf⁄tsize
);

133 } 
	tMWFONTPROCS
, *
	tPMWFONTPROCS
;

136 
	s_mwf⁄t
 {

137 
PMWFONTPROCS
 
	mf⁄çrocs
;

138 
MWCOORD
 
	mf⁄tsize
;

139 
	mf⁄åŸ©i⁄
;

140 
	mf⁄èâr
;

142 } 
	tMWFONT
;

146 
PMWFONTPROCS
 
	mf⁄çrocs
;

147 
MWCOORD
 
	mf⁄tsize
;

148 
	mf⁄åŸ©i⁄
;

149 
	mf⁄èâr
;

151 * 
	m«me
;

152 
PMWCFONT
 
	mcf⁄t
;

153 } 
	tMWCOREFONT
, *
	tPMWCOREFONT
;

160 
MWCOORD
 
	md°x
, 
	md°y
, 
	md°w
, 
	md°h
, 
	md°_löñí
;

161 
MWCOORD
 
	m§cx
, 
	m§cy
, 
	m§c_löñí
;

162 *
	mpixñs
, *
	mmisc
;

163 
MWPIXELVAL
 
	mbg_cﬁ‹
, 
	mfg_cﬁ‹
;

164 
	mgr_u£bg
;

165 } 
	tdrivî_gc_t
;

169 #i‡
MW_FEATURE_PSDOP_COPY


174 
	#PSDOP_COPY
 0

	)

179 
	#PSDOP_COPYALL
 1

	)

184 
	#PSDOP_COPYTRANS
 2

	)

188 #i‡
MW_FEATURE_PSDOP_ALPHAMAP


203 
	#PSDOP_ALPHAMAP
 3

	)

206 #i‡
MW_FEATURE_PSDOP_ALPHACOL


221 
	#PSDOP_ALPHACOL
 4

	)

224 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_LSB_FIRST


245 
	#PSDOP_BITMAP_BYTES_LSB_FIRST
 5

	)

248 #i‡
MW_FEATURE_PSDOP_BITMAP_BYTES_MSB_FIRST


269 
	#PSDOP_BITMAP_BYTES_MSB_FIRST
 6

	)

274 
PSD
 
	md°psd
;

275 
MWCOORD
 
	md°x
, 
	md°y
;

276 
MWCOORD
 
	md°w
, 
	md°h
;

277 
MWCOORD
 
	m§cx
, 
	m§cy
;

278 
MWCOORD
 
	m§cw
, 
	m§ch
;

279 
PSD
 
	m§˝sd
;

280 
	mr›
;

281 
PSD
 
	mÆphach™
;

282 
MWPIXELVAL
 
	mfgcﬁ‹
;

283 
MWPIXELVAL
 
	mbgcﬁ‹
;

284 
MWPIXELVAL
 
	må™scﬁ‹
;

285 } 
	tMWBLITARGS
, *
	tPMWBLITARGS
;

290 (*
	mInô
)(
PSD
 
	mpsd
);

291 (*
	mDøwPixñ
)(
PSD
 
	mpsd
, 
MWCOORD
 
	mx
, MWCOORD 
	my
, 
MWPIXELVAL
 
	mc
);

292 
MWPIXELVAL
 (*
RódPixñ
)(
PSD
 
	mpsd
, 
MWCOORD
 
	mx
, MWCOORD 
	my
);

293 (*
	mDøwH‹zLöe
)(
PSD
 
	mpsd
, 
MWCOORD
 
	mx1
, MWCOORD 
	mx2
, MWCOORD 
	my
,

294 
MWPIXELVAL
 
	mc
);

295 (*
	mDøwVîtLöe
)(
PSD
 
	mpsd
, 
MWCOORD
 
	mx
, MWCOORD 
	my1
, MWCOORD 
	my2
,

296 
MWPIXELVAL
 
	mc
);

297 (*
	mFûlRe˘
)(
PSD
 
	mpsd
,
MWCOORD
 
	mx1
,MWCOORD 
	my1
,MWCOORD 
	mx2
,

298 
MWCOORD
 
	my2
,
MWPIXELVAL
 
	mc
);

299 (*
	mBlô
)(
PSD
 
	mde°psd
, 
MWCOORD
 
	mde°x
, MWCOORD 
	mde°y
, MWCOORD 
	mw
,

300 
MWCOORD
 
	mh
,
PSD
 
	m§˝sd
,MWCOORD 
	m§cx
,MWCOORD 
	m§cy
,
	m›
);

301 (*
	mDøwAªa
)(
PSD
 
	mpsd
, 
drivî_gc_t
 *
	mgc
, 
	m›
);

307 (*
	mSåëchBlô
)(
PSD
 
	mde°psd
, 
MWCOORD
 
	mde°x
, MWCOORD 
	mde°y
,

308 
MWCOORD
 
	md°w
, MWCOORD 
	md°h
, 
PSD
 
	m§˝sd
, MWCOORD 
	m§cx
,

309 
MWCOORD
 
	m§cy
, MWCOORD 
	m§cw
, MWCOORD 
	m§ch
, 
	m›
);

310 (*
	mSåëchBlôEx
Ë(
PSD
 
	md°psd
, PSD 
	m§˝sd
,

311 
MWCOORD
 
	mde°_x_°¨t
, 
	mde°_y_°¨t
,

312 
MWCOORD
 
	mwidth
, 
	mheight
,

313 
	mx_díomö©‹
, 
	my_díomö©‹
,

314 
	m§c_x_‰a˘i⁄
, 
	m§c_y_‰a˘i⁄
,

315 
	mx_°ï_‰a˘i⁄
, 
	my_°ï_‰a˘i⁄
, 
	m›
);

316 } 
	tSUBDRIVER
, *
	tPSUBDRIVER
;

322 
	s_mws¸ìndevi˚
 {

323 
MWCOORD
 
	mxªs
;

324 
MWCOORD
 
	myªs
;

325 
MWCOORD
 
	mxvúåes
;

326 
MWCOORD
 
	myvúåes
;

327 
	m∂™es
;

328 
	mbµ
;

329 
	mlöñí
;

331 
	msize
;

332 
	mncﬁ‹s
;

333 
	mpixty≥
;

334 
	mÊags
;

335 * 
	maddr
;

337 
PSD
 (*
O≥n
)(PSD 
	mpsd
);

338 (*
	mClo£
)(
PSD
 
	mpsd
);

339 (*
	mGëS¸ìnInfo
)(
PSD
 
	mpsd
,
PMWSCREENINFO
 
	mpsi
);

340 (*
	mSëPÆëã
)(
PSD
 
	mpsd
,
	mfú°
,
	mcou¡
,
MWPALENTRY
 *
	m∑l
);

341 (*
	mDøwPixñ
)(
PSD
 
	mpsd
,
MWCOORD
 
	mx
,MWCOORD 
	my
,
MWPIXELVAL
 
	mc
);

342 
MWPIXELVAL
 (*
RódPixñ
)(
PSD
 
	mpsd
,
MWCOORD
 
	mx
,MWCOORD 
	my
);

343 (*
	mDøwH‹zLöe
)(
PSD
 
	mpsd
,
MWCOORD
 
	mx1
,MWCOORD 
	mx2
,MWCOORD 
	my
,

344 
MWPIXELVAL
 
	mc
);

345 (*
	mDøwVîtLöe
)(
PSD
 
	mpsd
,
MWCOORD
 
	mx
,MWCOORD 
	my1
,MWCOORD 
	my2
,

346 
MWPIXELVAL
 
	mc
);

347 (*
	mFûlRe˘
)(
PSD
 
	mpsd
,
MWCOORD
 
	mx1
,MWCOORD 
	my1
,MWCOORD 
	mx2
,MWCOORD 
	my2
,

348 
MWPIXELVAL
 
	mc
);

349 
PMWCOREFONT
 
	mbuûtö_f⁄ts
;

354 (*
	mBlô
)(
PSD
 
	mde°psd
,
MWCOORD
 
	mde°x
,MWCOORD 
	mde°y
,MWCOORD 
	mw
,

355 
MWCOORD
 
	mh
,
PSD
 
	m§˝sd
,MWCOORD 
	m§cx
,MWCOORD 
	m§cy
,
	m›
);

356 (*
	mPªSñe˘
)(
PSD
 
	mpsd
);

357 (*
	mDøwAªa
)(
PSD
 
	mpsd
, 
drivî_gc_t
 *
	mgc
, 
	m›
);

358 (*
	mSëIOPîmissi⁄s
)(
PSD
 
	mpsd
);

359 
PSD
 (*
AŒoˇãMemGC
)(PSD 
	mpsd
);

360 
MWBOOL
 (*
M≠MemGC
)(
PSD
 
	mmempsd
,
MWCOORD
 
	mw
,MWCOORD 
	mh
,
	m∂™es
,
	mbµ
,

361 
	mlöñí
,
	msize
,*
	maddr
);

362 (*
	mFªeMemGC
)(
PSD
 
	mmempsd
);

363 (*
	mSåëchBlô
)(
PSD
 
	mde°psd
,
MWCOORD
 
	mde°x
,MWCOORD 
	mde°y
,

364 
MWCOORD
 
	mde°w
,MWCOORD 
	mde°h
,
PSD
 
	m§˝sd
,MWCOORD 
	m§cx
,

365 
MWCOORD
 
	m§cy
,MWCOORD 
	m§cw
,MWCOORD 
	m§ch
,
	m›
);

366 (*
	mSëP‹åaô
)(
PSD
 
	mpsd
,
	mp‹åaômode
);

367 
	mp‹åaô
;

368 
PSUBDRIVER
 
	m‹gsubdrivî
;

369 (*
	mSåëchBlôEx
Ë(
PSD
 
	md°psd
, PSD 
	m§˝sd
,

370 
MWCOORD
 
	mde°_x_°¨t
, MWCOORD 
	mde°_y_°¨t
,

371 
MWCOORD
 
	mwidth
, MWCOORD 
	mheight
,

372 
	mx_díomö©‹
, 
	my_díomö©‹
,

373 
	m§c_x_‰a˘i⁄
, 
	m§c_y_‰a˘i⁄
,

374 
	mx_°ï_‰a˘i⁄
, 
	my_°ï_‰a˘i⁄
,

375 
	m›
);

376 } 
	tSCREENDEVICE
;

379 
	#PSF_SCREEN
 0x0001

	)

380 
	#PSF_MEMORY
 0x0002

	)

381 
	#PSF_HAVEBLIT
 0x0004

	)

382 
	#PSF_HAVEOP_COPY
 0x0008

	)

383 
	#PSF_ADDRMALLOC
 0x0010

	)

384 
	#PSF_ADDRSHAREDMEM
 0x0020

	)

387 
	s_mou£devi˚
 {

388 (*
	mO≥n
)(
	m_mou£devi˚
 *);

389 (*
	mClo£
)();

390 (*
	mGëBuâ⁄Info
)();

391 (*
	mGëDeÁu…Ac˚l
)(*
	mpsˇÀ
,*
	m±hªsh
);

392 (*
	mRód
)(
MWCOORD
 *
	mdx
,MWCOORD *
	mdy
,MWCOORD *
	mdz
,*
	mbp
);

393 (*
	mPﬁl
)();

394 
	mÊags
;

395 } 
	tMOUSEDEVICE
;

397 
	#MOUSE_NORMAL
 0x0000

	)

398 
	#MOUSE_RAW
 0x0001

	)

399 
	#MOUSE_TRANSFORM
 0x0002

	)

402 
	s_kbddevi˚
 {

403 (*
	mO≥n
)(
_kbddevi˚
 *
	mpkd
);

404 (*
	mClo£
)();

405 (*
	mGëModifõrInfo
)(
MWKEYMOD
 *
	mmodifõrs
, MWKEYMOD *
	mcurmodifõrs
);

406 (*
	mRód
)(
MWKEY
 *
	mbuf
,
MWKEYMOD
 *
	mmodifõrs
,
MWSCANCODE
 *
	msˇncode
);

407 (*
	mPﬁl
)();

408 } 
	tKBDDEVICE
;

411 
	#CLIP_VISIBLE
 0

	)

412 
	#CLIP_INVISIBLE
 1

	)

413 
	#CLIP_PARTIAL
 2

	)

417 
MWCOORD
 
	mx
;

418 
MWCOORD
 
	my
;

419 
MWCOORD
 
	mwidth
;

420 
MWCOORD
 
	mheight
;

421 } 
	tMWCLIPRECT
;

424 
MWCOORD
 
	mwidth
;

425 
MWCOORD
 
	mheight
;

426 
PSD
 
	mpsd
;

427 } 
	tMWTILE
;

429 #i‚de‡
TRUE


430 
	#TRUE
 1

	)

432 #i‚de‡
FALSE


433 
	#FALSE
 0

	)

436 
	#MWMIN
(
a
,
b
Ë(◊Ë< (bË? (aË: (b))

	)

437 
	#MWMAX
(
a
,
b
Ë(◊Ë> (bË? (aË: (b))

	)

440 
	#RGBDEF
(
r
,
g
,
b
Ë{r, g, b}

	)

442 
	#GETPALENTRY
(
∑l
,
ödex
Ë(()’Æ[ödex].
r
 |\

443 (
∑l
[
ödex
].
g
 << 8Ë| (∑l[ödex].
b
 << 16)))

	)

446 
	#REDVALUE
(
rgb
Ë(‘gbË& 0xff)

	)

447 
	#GREENVALUE
(
rgb
Ë((‘gbË>> 8Ë& 0xff)

	)

448 
	#BLUEVALUE
(
rgb
Ë((‘gbË>> 16Ë& 0xff)

	)

455 
	#RGB2PIXEL8888
(
r
,
g
,
b
) \

456 (0xFF000000UL | ((
r
Ë<< 16Ë| ((
g
Ë<< 8Ë| (
b
))

	)

459 
	#RGB2PIXELABGR
(
r
,
g
,
b
) \

460 (0xFF000000UL | ((
b
Ë<< 16Ë| ((
g
Ë<< 8Ë| (
r
))

	)

463 
	#ARGB2PIXEL8888
(
a
,
r
,
g
,
b
) \

464 (((
a
Ë<< 24Ë| ((
r
Ë<< 16Ë| ((
g
Ë<< 8Ë| (
b
))

	)

467 
	#ARGB2PIXELABGR
(
a
,
r
,
g
,
b
) \

468 (((
a
Ë<< 24Ë| ((
b
Ë<< 16Ë| ((
g
Ë<< 8Ë| (
r
))

	)

471 
	#RGB2PIXEL888
(
r
,
g
,
b
) \

472 (((
r
Ë<< 16Ë| ((
g
Ë<< 8Ë| (
b
))

	)

475 
	#RGB2PIXEL565
(
r
,
g
,
b
) \

476 ((((
r
Ë& 0xf8Ë<< 8Ë| (((
g
Ë& 0xfcË<< 3Ë| (((
b
Ë& 0xf8Ë>> 3))

	)

479 
	#RGB2PIXEL555
(
r
,
g
,
b
) \

480 ((((
r
Ë& 0xf8Ë<< 7Ë| (((
g
Ë& 0xf8Ë<< 2Ë| (((
b
Ë& 0xf8Ë>> 3))

	)

482 
	#RGB2PIXEL1555
(
r
,
g
,
b
) \

483 ((((
b
Ë& 0xf8Ë<< 7Ë| (((
g
Ë& 0xf8Ë<< 2Ë| (((
r
Ë& 0xf8Ë>> 3Ë| 0x8000)

	)

486 
	#RGB2PIXEL332
(
r
,
g
,
b
) \

487 (((
r
Ë& 0xe0Ë| (((
g
Ë& 0xe0Ë>> 3Ë| (((
b
Ë& 0xc0Ë>> 6))

	)

494 
	#COLOR2PIXEL8888
(
c
) \

495 ((((
c
Ë& 0xffË<< 16Ë| ((cË& 0xff00ff00ulË| (((cË& 0xff0000Ë>> 16))

	)

499 
	#COLOR2PIXELABGR
(
c
) \

500 (
c
)

	)

504 
	#COLOR2PIXEL888
(
c
) \

505 ((((
c
Ë& 0xffË<< 16Ë| ((cË& 0xff00Ë| (((cË& 0xff0000Ë>> 16))

	)

509 
	#COLOR2PIXEL565
(
c
) \

510 ((((
c
Ë& 0xf8Ë<< 8Ë| (((cË& 0xfc00Ë>> 5Ë| (((cË& 0xf80000Ë>> 19))

	)

514 
	#COLOR2PIXEL555
(
c
) \

515 ((((
c
Ë& 0xf8Ë<< 7Ë| (((cË& 0xf800Ë>> 6Ë| (((cË& 0xf80000Ë>> 19))

	)

517 
	#COLOR2PIXEL1555
(
c
) \

518 ((((
c
Ë& 0xf8Ë>> 3Ë| (((cË& 0xf800Ë>> 6Ë| (((cË& 0xf80000Ë>> 9Ë| 0x8000)

	)

522 
	#COLOR2PIXEL332
(
c
) \

523 (((
c
Ë& 0xe0Ë| (((cË& 0xe000Ë>> 11Ë| (((cË& 0xc00000Ë>> 22))

	)

529 
	#PIXEL8888ALPHA
(
pixñvÆ
Ë((’ixñvÆË>> 24Ë& 0xff)

	)

530 
	#PIXEL8888RED
(
pixñvÆ
Ë((’ixñvÆË>> 16Ë& 0xff)

	)

531 
	#PIXEL8888GREEN
(
pixñvÆ
Ë((’ixñvÆË>> 8Ë& 0xff)

	)

532 
	#PIXEL8888BLUE
(
pixñvÆ
Ë(’ixñvÆË& 0xff)

	)

535 
	#PIXELABGRALPHA
(
pixñvÆ
Ë((’ixñvÆË>> 24Ë& 0xff)

	)

536 
	#PIXELABGRBLUE
(
pixñvÆ
Ë((’ixñvÆË>> 16Ë& 0xff)

	)

537 
	#PIXELABGRGREEN
(
pixñvÆ
Ë((’ixñvÆË>> 8Ë& 0xff)

	)

538 
	#PIXELABGRRED
(
pixñvÆ
Ë(’ixñvÆË& 0xff)

	)

541 
	#PIXEL888RED
(
pixñvÆ
Ë((’ixñvÆË>> 16Ë& 0xff)

	)

542 
	#PIXEL888GREEN
(
pixñvÆ
Ë((’ixñvÆË>> 8Ë& 0xff)

	)

543 
	#PIXEL888BLUE
(
pixñvÆ
Ë(’ixñvÆË& 0xff)

	)

546 
	#PIXEL565RED
(
pixñvÆ
Ë((’ixñvÆË>> 11Ë& 0x1f)

	)

547 
	#PIXEL565GREEN
(
pixñvÆ
Ë((’ixñvÆË>> 5Ë& 0x3f)

	)

548 
	#PIXEL565BLUE
(
pixñvÆ
Ë(’ixñvÆË& 0x1f)

	)

551 
	#PIXEL555RED
(
pixñvÆ
Ë((’ixñvÆË>> 10Ë& 0x1f)

	)

552 
	#PIXEL555GREEN
(
pixñvÆ
Ë((’ixñvÆË>> 5Ë& 0x1f)

	)

553 
	#PIXEL555BLUE
(
pixñvÆ
Ë(’ixñvÆË& 0x1f)

	)

555 
	#PIXEL1555BLUE
(
pixñvÆ
Ë((’ixñvÆË>> 10Ë& 0x1f)

	)

556 
	#PIXEL1555GREEN
(
pixñvÆ
Ë((’ixñvÆË>> 5Ë& 0x1f)

	)

557 
	#PIXEL1555RED
(
pixñvÆ
Ë(’ixñvÆË& 0x1f)

	)

560 
	#PIXEL332RED
(
pixñvÆ
Ë((’ixñvÆË>> 5Ë& 0x07)

	)

561 
	#PIXEL332GREEN
(
pixñvÆ
Ë((’ixñvÆË>> 2Ë& 0x07)

	)

562 
	#PIXEL332BLUE
(
pixñvÆ
Ë(’ixñvÆË& 0x03)

	)

568 
	#PIXEL8888ALPHA8
(
pixñvÆ
Ë((’ixñvÆË>> 24Ë& 0xff)

	)

569 
	#PIXEL8888RED8
(
pixñvÆ
Ë((’ixñvÆË>> 16Ë& 0xff)

	)

570 
	#PIXEL8888GREEN8
(
pixñvÆ
Ë((’ixñvÆË>> 8Ë& 0xff)

	)

571 
	#PIXEL8888BLUE8
(
pixñvÆ
Ë(’ixñvÆË& 0xff)

	)

574 
	#PIXELABGRALPHA8
(
pixñvÆ
Ë((’ixñvÆË>> 24Ë& 0xff)

	)

575 
	#PIXELABGRBLUE8
(
pixñvÆ
Ë((’ixñvÆË>> 16Ë& 0xff)

	)

576 
	#PIXELABGRGREEN8
(
pixñvÆ
Ë((’ixñvÆË>> 8Ë& 0xff)

	)

577 
	#PIXELABGRRED8
(
pixñvÆ
Ë(’ixñvÆË& 0xff)

	)

580 
	#PIXEL888RED8
(
pixñvÆ
Ë((’ixñvÆË>> 16Ë& 0xff)

	)

581 
	#PIXEL888GREEN8
(
pixñvÆ
Ë((’ixñvÆË>> 8Ë& 0xff)

	)

582 
	#PIXEL888BLUE8
(
pixñvÆ
Ë(’ixñvÆË& 0xff)

	)

585 
	#PIXEL565RED8
(
pixñvÆ
Ë((’ixñvÆË>> 8Ë& 0xf8)

	)

586 
	#PIXEL565GREEN8
(
pixñvÆ
Ë((’ixñvÆË>> 3Ë& 0xfc)

	)

587 
	#PIXEL565BLUE8
(
pixñvÆ
Ë((’ixñvÆË<< 3Ë& 0xf8)

	)

590 
	#PIXEL555RED8
(
pixñvÆ
Ë((’ixñvÆË>> 7Ë& 0xf8)

	)

591 
	#PIXEL555GREEN8
(
pixñvÆ
Ë((’ixñvÆË>> 2Ë& 0xf8)

	)

592 
	#PIXEL555BLUE8
(
pixñvÆ
Ë((’ixñvÆË<< 3Ë& 0xf8)

	)

594 
	#PIXEL1555BLUE8
(
pixñvÆ
Ë((’ixñvÆË>> 7Ë& 0xf8)

	)

595 
	#PIXEL1555GREEN8
(
pixñvÆ
Ë((’ixñvÆË>> 2Ë& 0xf8)

	)

596 
	#PIXEL1555RED8
(
pixñvÆ
Ë((’ixñvÆË<< 3Ë& 0xf8)

	)

599 
	#PIXEL332RED8
(
pixñvÆ
Ë–’ixñvÆË& 0xe0)

	)

600 
	#PIXEL332GREEN8
(
pixñvÆ
Ë((’ixñvÆË<< 3Ë& 0xe0)

	)

601 
	#PIXEL332BLUE8
(
pixñvÆ
Ë((’ixñvÆË<< 6Ë& 0xc0)

	)

609 
	#PIXEL8888ALPHA32
(
pixñvÆ
Ë–(()’ixñvÆ)Ë& 0xff000000UL)

	)

610 
	#PIXEL8888RED32
(
pixñvÆ
Ë(((()’ixñvÆ)Ë<< 8Ë& 0xff000000UL)

	)

611 
	#PIXEL8888GREEN32
(
pixñvÆ
Ë(((()’ixñvÆ)Ë<< 16Ë& 0xff000000UL)

	)

612 
	#PIXEL8888BLUE32
(
pixñvÆ
Ë(((()’ixñvÆ)Ë<< 24Ë& 0xff000000UL)

	)

615 
	#PIXELABGRALPHA32
(
pixñvÆ
Ë–(()’ixñvÆ)Ë& 0xff000000UL)

	)

616 
	#PIXELABGRBLUE32
(
pixñvÆ
Ë(((()’ixñvÆ)Ë<< 8Ë& 0xff000000UL)

	)

617 
	#PIXELABGRGREEN32
(
pixñvÆ
Ë(((()’ixñvÆ)Ë<< 16Ë& 0xff000000UL)

	)

618 
	#PIXELABGRRED32
(
pixñvÆ
Ë(((()’ixñvÆ)Ë<< 24Ë& 0xff000000UL)

	)

621 
	#PIXEL888RED32
(
pixñvÆ
Ë(((()’ixñvÆ)Ë<< 8Ë& 0xff000000UL)

	)

622 
	#PIXEL888GREEN32
(
pixñvÆ
Ë(((()’ixñvÆ)Ë<< 16Ë& 0xff000000UL)

	)

623 
	#PIXEL888BLUE32
(
pixñvÆ
Ë(((()’ixñvÆ)Ë<< 24Ë& 0xff000000UL)

	)

626 
	#PIXEL565RED32
(
pixñvÆ
Ë(((()’ixñvÆ)Ë<< 16Ë& 0xf8000000UL)

	)

627 
	#PIXEL565GREEN32
(
pixñvÆ
Ë(((()’ixñvÆ)Ë<< 21Ë& 0xfc000000UL)

	)

628 
	#PIXEL565BLUE32
(
pixñvÆ
Ë(((()’ixñvÆ)Ë<< 27Ë& 0xf8000000UL)

	)

631 
	#PIXEL555RED32
(
pixñvÆ
Ë(((()’ixñvÆ)Ë<< 17Ë& 0xf8000000UL)

	)

632 
	#PIXEL555GREEN32
(
pixñvÆ
Ë(((()’ixñvÆ)Ë<< 22Ë& 0xf8000000UL)

	)

633 
	#PIXEL555BLUE32
(
pixñvÆ
Ë(((()’ixñvÆ)Ë<< 27Ë& 0xf8000000UL)

	)

636 
	#PIXEL332RED32
(
pixñvÆ
Ë(((()’ixñvÆ)Ë<< 24Ë& 0xe0000000UL)

	)

637 
	#PIXEL332GREEN32
(
pixñvÆ
Ë(((()’ixñvÆ)Ë<< 27Ë& 0xe0000000UL)

	)

638 
	#PIXEL332BLUE32
(
pixñvÆ
Ë(((()’ixñvÆ)Ë<< 30Ë& 0xc0000000UL)

	)

644 
	#PIXEL8888TOCOLORVAL
(
p
) \

645 ((((
p
Ë& 0xff0000ulË>> 16Ë| (’Ë& 0xff00ff00ulË| ((’Ë& 0xffuË<< 16Ë| 0xff000000ul)

	)

648 
	#PIXELABGRTOCOLORVAL
(
p
Ë(’Ë| 0xff000000ul)

	)

651 
	#PIXEL888TOCOLORVAL
(
p
) \

652 (0xff000000u»| (((
p
Ë& 0xff0000ulË>> 16Ë| (’Ë& 0xff00uË| ((’Ë& 0xffuË<< 16Ë| 0xff000000ul)

	)

655 
	#PIXEL565TOCOLORVAL
(
p
) \

656 (0xff000000u»| (((
p
Ë& 0xf800uË>> 8Ë| ((’Ë& 0x07e0uË<< 5Ë| ((’Ë& 0x1fulË<< 19Ë| 0xff000000ul)

	)

658 
	#PIXEL555TOCOLORVAL
(
p
) \

659 (0xff000000u»| (((
p
Ë& 0x7c00uË>> 7Ë| ((’Ë& 0x03e0uË<< 6Ë| ((’Ë& 0x1fulË<< 19Ë| 0xff000000ul)

	)

662 
	#PIXEL332TOCOLORVAL
(
p
) \

663 (0xff000000u»| (((
p
Ë& 0xe0u)Ë| ((’Ë& 0x1cuË<< 11Ë| ((’Ë& 0x03ulË<< 19Ë| 0xff000000ul)

	)

665 #i‡
MWPIXEL_FORMAT
 =
MWPF_TRUECOLOR8888


666 
	#RGB2PIXEL
(
r
,
g
,
b
Ë
	`RGB2PIXEL8888
‘,g,b)

	)

667 
	#COLORVALTOPIXELVAL
(
c
Ë
	`COLOR2PIXEL8888
(c)

	)

668 
	#PIXELVALTOCOLORVAL
(
p
Ë
	`PIXEL8888TOCOLORVAL
’)

	)

669 
	#PIXEL2RED
(
p
Ë
	`PIXEL8888RED
’)

	)

670 
	#PIXEL2GREEN
(
p
Ë
	`PIXEL8888GREEN
’)

	)

671 
	#PIXEL2BLUE
(
p
Ë
	`PIXEL8888BLUE
’)

	)

674 #i‡
MWPIXEL_FORMAT
 =
MWPF_TRUECOLORABGR


675 
	#RGB2PIXEL
(
r
,
g
,
b
Ë
	`RGB2PIXELABGR
‘,g,b)

	)

676 
	#COLORVALTOPIXELVAL
(
c
Ë
	`COLOR2PIXELABGR
(c)

	)

677 
	#PIXELVALTOCOLORVAL
(
p
Ë
	`PIXELABGRTOCOLORVAL
’)

	)

678 
	#PIXEL2RED
(
p
Ë
	`PIXELABGRRED
’)

	)

679 
	#PIXEL2GREEN
(
p
Ë
	`PIXELABGRGREEN
’)

	)

680 
	#PIXEL2BLUE
(
p
Ë
	`PIXELABGRBLUE
’)

	)

683 #i‡(
MWPIXEL_FORMAT
 =
MWPF_TRUECOLOR888
Ë|| (MWPIXEL_FORMAT =
MWPF_TRUECOLOR0888
)

684 
	#RGB2PIXEL
(
r
,
g
,
b
Ë
	`RGB2PIXEL888
‘,g,b)

	)

685 
	#COLORVALTOPIXELVAL
(
c
Ë
	`COLOR2PIXEL888
(c)

	)

686 
	#PIXELVALTOCOLORVAL
(
p
Ë
	`PIXEL888TOCOLORVAL
’)

	)

687 
	#PIXEL2RED
(
p
Ë
	`PIXEL888RED
’)

	)

688 
	#PIXEL2GREEN
(
p
Ë
	`PIXEL888GREEN
’)

	)

689 
	#PIXEL2BLUE
(
p
Ë
	`PIXEL888BLUE
’)

	)

692 #i‡
MWPIXEL_FORMAT
 =
MWPF_TRUECOLOR565


693 
	#RGB2PIXEL
(
r
,
g
,
b
Ë
	`RGB2PIXEL565
‘,g,b)

	)

694 
	#COLORVALTOPIXELVAL
(
c
Ë
	`COLOR2PIXEL565
(c)

	)

695 
	#PIXELVALTOCOLORVAL
(
p
Ë
	`PIXEL565TOCOLORVAL
’)

	)

696 
	#PIXEL2RED
(
p
Ë
	`PIXEL565RED
’)

	)

697 
	#PIXEL2GREEN
(
p
Ë
	`PIXEL565GREEN
’)

	)

698 
	#PIXEL2BLUE
(
p
Ë
	`PIXEL565BLUE
’)

	)

701 #i‡
MWPIXEL_FORMAT
 =
MWPF_TRUECOLOR555


702 
	#RGB2PIXEL
(
r
,
g
,
b
Ë
	`RGB2PIXEL555
‘,g,b)

	)

703 
	#COLORVALTOPIXELVAL
(
c
Ë
	`COLOR2PIXEL555
(c)

	)

704 
	#PIXELVALTOCOLORVAL
(
p
Ë
	`PIXEL555TOCOLORVAL
’)

	)

705 
	#PIXEL2RED
(
p
Ë
	`PIXEL555RED
’)

	)

706 
	#PIXEL2GREEN
(
p
Ë
	`PIXEL555GREEN
’)

	)

707 
	#PIXEL2BLUE
(
p
Ë
	`PIXEL555BLUE
’)

	)

710 #i‡
MWPIXEL_FORMAT
 =
MWPF_TRUECOLOR332


711 
	#RGB2PIXEL
(
r
,
g
,
b
Ë
	`RGB2PIXEL332
‘,g,b)

	)

712 
	#COLORVALTOPIXELVAL
(
c
Ë
	`COLOR2PIXEL332
(c)

	)

713 
	#PIXELVALTOCOLORVAL
(
p
Ë
	`PIXEL332TOCOLORVAL
’)

	)

714 
	#PIXEL2RED
(
p
Ë
	`PIXEL332RED
’)

	)

715 
	#PIXEL2GREEN
(
p
Ë
	`PIXEL332GREEN
’)

	)

716 
	#PIXEL2BLUE
(
p
Ë
	`PIXEL332BLUE
’)

	)

724 
	#BLACK
 
	`PALINDEX
(0Ë

	)

725 
	#BLUE
 
	`PALINDEX
(1)

	)

726 
	#GREEN
 
	`PALINDEX
(2)

	)

727 
	#CYAN
 
	`PALINDEX
(3)

	)

728 
	#RED
 
	`PALINDEX
(4)

	)

729 
	#MAGENTA
 
	`PALINDEX
(5)

	)

730 
	#BROWN
 
	`PALINDEX
(6)

	)

731 
	#LTGRAY
 
	`PALINDEX
(7Ë

	)

732 
	#GRAY
 
	`PALINDEX
(8Ë

	)

733 
	#LTBLUE
 
	`PALINDEX
(9)

	)

734 
	#LTGREEN
 
	`PALINDEX
(10)

	)

735 
	#LTCYAN
 
	`PALINDEX
(11)

	)

736 
	#LTRED
 
	`PALINDEX
(12)

	)

737 
	#LTMAGENTA
 
	`PALINDEX
(13)

	)

738 
	#YELLOW
 
	`PALINDEX
(14)

	)

739 
	#WHITE
 
	`PALINDEX
(15Ë

	)

743 
	#LOADPALETTE
 1

	)

744 
	#MERGEPALETTE
 2

	)

749 
PSD
 
GdO≥nS¸ìn
();

750 
GdClo£S¸ìn
(
PSD
 
psd
);

751 
GdSëP‹åaôMode
(
PSD
 
psd
, 
p‹åaômode
);

752 
GdSëMode
(
mode
);

753 
MWBOOL
 
GdSëU£Background
(MWBOOL 
Êag
);

754 
MWPIXELVAL
 
GdSëF‹egroundPixñVÆ
(
PSD
 
psd
, MWPIXELVAL 
fg
);

755 
MWPIXELVAL
 
GdSëBackgroundPixñVÆ
(
PSD
 
psd
, MWPIXELVAL 
bg
);

756 
MWPIXELVAL
 
GdSëF‹egroundCﬁ‹
(
PSD
 
psd
, 
MWCOLORVAL
 
fg
);

757 
MWPIXELVAL
 
GdSëBackgroundCﬁ‹
(
PSD
 
psd
, 
MWCOLORVAL
 
bg
);

759 
GdRe£tPÆëã
();

760 
GdSëPÆëã
(
PSD
 
psd
,
fú°
, 
cou¡
, 
MWPALENTRY
 *
∑Àâe
);

761 
GdGëPÆëã
(
PSD
 
psd
,
fú°
, 
cou¡
, 
MWPALENTRY
 *
∑Àâe
);

762 
MWCOLORVAL
 
GdGëCﬁ‹RGB
(
PSD
 
psd
, 
MWPIXELVAL
 
pixñ
);

763 
MWPIXELVAL
 
GdFödCﬁ‹
(
PSD
 
psd
, 
MWCOLORVAL
 
c
);

764 
MWPIXELVAL
 
GdFödNóª°Cﬁ‹
(
MWPALENTRY
 *
∑l
, 
size
, 
MWCOLORVAL
 
¸
);

765 
GdC≠tuªS¸ìn
(*
∑th
);

766 
GdGëS¸ìnInfo
(
PSD
 
psd
,
PMWSCREENINFO
 
psi
);

767 
GdPoöt
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
);

768 
GdLöe
(
PSD
 
psd
,
MWCOORD
 
x1
,MWCOORD 
y1
,MWCOORD 
x2
,MWCOORD 
y2
,

769 
MWBOOL
 
bDøwLa°Poöt
);

770 
GdRe˘
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
width
, MWCOORD 
height
);

771 
GdFûlRe˘
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
width
, MWCOORD 
height
);

772 
GdBôm≠
(
PSD
 
psd
,
MWCOORD
 
x
,MWCOORD 
y
,MWCOORD 
width
,MWCOORD 
height
,

773 c⁄° 
MWIMAGEBITS
 *
imagebôs
);

774 
MWBOOL
 
GdCﬁ‹InPÆëã
(
MWCOLORVAL
 
¸
,
MWPALENTRY
 *
∑Àâe
,
∑lsize
);

775 
GdMakePÆëãC⁄vîsi⁄TabÀ
(
PSD
 
psd
,
MWPALENTRY
 *
∑Àâe
,
∑lsize
,

776 
MWPIXELVAL
 *
c⁄vèbÀ
,
fLﬂdTy≥
);

777 
GdDøwImage
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, 
PMWIMAGEHDR
 
pimage
);

778 
GdPﬁy
(
PSD
 
psd
,
cou¡
, 
MWPOINT
 *
poöts
);

779 
GdFûlPﬁy
(
PSD
 
psd
,
cou¡
, 
MWPOINT
 *
poöts
);

780 
GdRódAªa
(
PSD
 
psd
,
MWCOORD
 
x
,MWCOORD 
y
,MWCOORD 
width
,MWCOORD 
height
,

781 
MWPIXELVAL
 *
pixñs
);

782 
GdAªa
(
PSD
 
psd
,
MWCOORD
 
x
,MWCOORD 
y
,MWCOORD 
width
,MWCOORD 
height
,

783 *
pixñs
, 
pixty≥
);

784 
GdDøwAªaI¡î«l
(
PSD
 
psd
, 
drivî_gc_t
 * 
gc
, 
›
);

785 
GdTøn¶©eAªa
(
MWCOORD
 
width
, MWCOORD 
height
, *
ö
, 
öpixty≥
,

786 
MWCOORD
 
öpôch
, *
out
, 
ouçixty≥
, 
ouçôch
);

787 
GdC›yAªa
(
PSD
 
psd
,
MWCOORD
 
§cx
,MWCOORD 
§cy
,MWCOORD 
width
,

788 
MWCOORD
 
height
, MWCOORD 
de°x
, MWCOORD 
de°y
);

789 
GdBlô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
width
,

790 
MWCOORD
 
height
,
PSD
 
§˝sd
,MWCOORD 
§cx
,MWCOORD 
§cy
,
r›
);

791 
GdSåëchBlô
(
PSD
 
d°psd
, 
MWCOORD
 
d°x
, MWCOORD 
d°y
, MWCOORD 
d°w
,

792 
MWCOORD
 
d°h
, 
PSD
 
§˝sd
, MWCOORD 
§cx
, MWCOORD 
§cy
,

793 
MWCOORD
 
§cw
, MWCOORD 
§ch
, 
r›
);

794 
GdSåëchBlôEx
(
PSD
 
d°psd
, 
MWCOORD
 
d1_x
, MWCOORD 
d1_y
, MWCOORD 
d2_x
,

795 
MWCOORD
 
d2_y
, 
PSD
 
§˝sd
, MWCOORD 
s1_x
, MWCOORD 
s1_y
,

796 
MWCOORD
 
s2_x
, MWCOORD 
s2_y
, 
r›
);

797 
GdCÆcMemGCAŒoc
(
PSD
 
psd
, 
width
, 
height
,

798 
∂™es
, 
bµ
, *
size
, *
löñí
);

799 
døwbôm≠
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
width
, MWCOORD 
height
,

800 c⁄° 
MWIMAGEBITS
 *
imagebôs
);

801 
døwpoöt
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
);

802 
døwrow
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
);

803 
SCREENDEVICE
 
s¸dev
;

808 
GdArcAngÀ
(
PSD
 
psd
, 
MWCOORD
 
x0
, MWCOORD 
y0
, MWCOORD 
rx
, MWCOORD 
ry
,

809 
MWCOORD
 
™gÀ1
, MWCOORD 
™gÀ2
, 
ty≥
);

811 
GdArc
(
PSD
 
psd
, 
MWCOORD
 
x0
, MWCOORD 
y0
, MWCOORD 
rx
, MWCOORD 
ry
,

812 
MWCOORD
 
ax
, MWCOORD 
ay
, MWCOORD 
bx
, MWCOORD 
by
, 
ty≥
);

813 
GdEŒù£
(
PSD
 
psd
,
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
rx
, MWCOORD 
ry
,

814 
MWBOOL
 
fûl
);

817 
GdCÀ¨F⁄tLi°
();

818 
GdAddF⁄t
(*
‚dry
, *
Ámûy
, *
f⁄äame
, 
PMWLOGFONT
 
lf
,

819 
Êags
);

820 
PMWFONT
 
GdSëF⁄t
(PMWFONT 
pf⁄t
);

821 
PMWFONT
 
GdCª©eF⁄t
(
PSD
 
psd
, c⁄° *
«me
, 
MWCOORD
 
height
,

822 c⁄° 
PMWLOGFONT
 
∂ogf⁄t
);

823 
MWCOORD
 
GdSëF⁄tSize
(
PMWFONT
 
pf⁄t
, MWCOORD 
f⁄tsize
);

824 
GdGëF⁄tLi°
(
MWFONTLIST
 ***
li°
, *
num
);

825 
GdFªeF⁄tLi°
(
MWFONTLIST
 ***
li°
, 
num
);

826 
GdSëF⁄tRŸ©i⁄
(
PMWFONT
 
pf⁄t
, 
ã¡hdegªes
);

827 
GdSëF⁄tAâr
(
PMWFONT
 
pf⁄t
, 
£tÊags
, 
˛rÊags
);

828 
GdDe°royF⁄t
(
PMWFONT
 
pf⁄t
);

829 
MWBOOL
 
GdGëF⁄tInfo
(
PMWFONT
 
pf⁄t
, 
PMWFONTINFO
 
pf⁄töfo
);

830 
GdC⁄vîtEncodög
(c⁄° *
i°r
, 
MWTEXTFLAGS
 
iÊags
, 
cc
, *
o°r
,

831 
MWTEXTFLAGS
 
oÊags
);

832 
GdGëTextSize
(
PMWFONT
 
pf⁄t
, c⁄° *
°r
, 
cc
, 
MWCOORD
 *
pwidth
,

833 
MWCOORD
 *
pheight
, MWCOORD *
pba£
, 
MWTEXTFLAGS
 
Êags
);

834 
GdGëTextSizeEx
(
PMWFONT
 
pf⁄t
, c⁄° *
°r
, 
cc
,

835 
nMaxExã¡
, *
ÕnFô
, *
ÆpDx
, 
MWCOORD
 *
pwidth
,

836 
MWCOORD
 *
pheight
, MWCOORD *
pba£
, 
MWTEXTFLAGS
 
Êags
);

837 
GdText
(
PSD
 
psd
,
MWCOORD
 
x
,MWCOORD 
y
,c⁄° *
°r
,
cou¡
,

838 
MWTEXTFLAGS
 
Êags
);

839 
PMWFONT
 
GdCª©eF⁄tFromBuf„r
(
PSD
 
psd
, c⁄° *
buf„r
,

840 
Àngth
, c⁄° *
f‹m©
, 
MWCOORD
 
height
);

841 
PMWFONT
 
GdDu∂iˇãF⁄t
(
PSD
 
psd
, PMWFONT 
p§cf⁄t
, 
MWCOORD
 
f⁄tsize
);

844 
GdSëClùRe˘s
(
PSD
 
psd
,
cou¡
,
MWCLIPRECT
 *
èbÀ
);

845 
MWBOOL
 
GdClùPoöt
(
PSD
 
psd
,
MWCOORD
 
x
,MWCOORD 
y
);

846 
GdClùAªa
(
PSD
 
psd
,
MWCOORD
 
x1
, MWCOORD 
y1
, MWCOORD 
x2
, MWCOORD 
y2
);

847 
MWCOORD
 
˛ùmöx
, 
˛ùmöy
, 
˛ùmaxx
, 
˛ùmaxy
;

850 
GdSëClùRegi⁄
(
PSD
 
psd
, 
MWCLIPREGION
 *
ªg
);

853 
MWBOOL
 
GdPtInRegi⁄
(
MWCLIPREGION
 *
rgn
, 
MWCOORD
 
x
, MWCOORD 
y
);

854 
GdRe˘InRegi⁄
(
MWCLIPREGION
 *
rgn
, c⁄° 
MWRECT
 *
ª˘
);

855 
MWBOOL
 
GdEquÆRegi⁄
(
MWCLIPREGION
 *
r1
, MWCLIPREGION *
r2
);

856 
MWBOOL
 
GdEm±yRegi⁄
(
MWCLIPREGION
 *
rgn
);

857 
MWCLIPREGION
 *
GdAŒocRegi⁄
();

858 
MWCLIPREGION
 *
GdAŒocRe˘Regi⁄
(
MWCOORD
 
À·
,MWCOORD 
t›
,MWCOORD 
right
,MWCOORD 
bŸtom
);

859 
MWCLIPREGION
 *
GdAŒocRe˘Regi⁄Indúe˘
(
MWRECT
 *
¥c
);

860 
GdSëRe˘Regi⁄
(
MWCLIPREGION
 *
rgn
, 
MWCOORD
 
À·
, MWCOORD 
t›
,

861 
MWCOORD
 
right
, MWCOORD 
bŸtom
);

862 
GdSëRe˘Regi⁄Indúe˘
(
MWCLIPREGION
 *
rgn
, 
MWRECT
 *
¥c
);

863 
GdDe°royRegi⁄
(
MWCLIPREGION
 *
rgn
);

864 
GdOff£tRegi⁄
(
MWCLIPREGION
 *
rgn
, 
MWCOORD
 
x
, MWCOORD 
y
);

865 
GdGëRegi⁄Box
(
MWCLIPREGION
 *
rgn
, 
MWRECT
 *
¥c
);

866 
GdUni⁄Re˘WôhRegi⁄
(c⁄° 
MWRECT
 *
ª˘
, 
MWCLIPREGION
 *
rgn
);

867 
GdSubåa˘Re˘FromRegi⁄
(c⁄° 
MWRECT
 *
ª˘
, 
MWCLIPREGION
 *
rgn
);

868 
GdC›yRegi⁄
(
MWCLIPREGION
 *
d
, MWCLIPREGION *
s
);

869 
GdI¡î£˘Regi⁄
(
MWCLIPREGION
 *
d
, MWCLIPREGION *
s1
, MWCLIPREGION *
s2
);

870 
GdUni⁄Regi⁄
(
MWCLIPREGION
 *
d
, MWCLIPREGION *
s1
, MWCLIPREGION *
s2
);

871 
GdSubåa˘Regi⁄
(
MWCLIPREGION
 *
d
, MWCLIPREGION *
s1
, MWCLIPREGION *
s2
);

872 
GdX‹Regi⁄
(
MWCLIPREGION
 *
d
, MWCLIPREGION *
s1
, MWCLIPREGION *
s2
);

873 
MWCLIPREGION
 *
GdAŒocBôm≠Regi⁄
(
MWIMAGEBITS
 *
bôm≠
, 
MWCOORD
 
width
, MWCOORD 
height
);

876 
MWCLIPREGION
 *
GdAŒocPﬁyg⁄Regi⁄
(
MWPOINT
 *
poöts
, 
cou¡
, 
mode
);

877 
MWCLIPREGION
 *
GdAŒocPﬁyPﬁyg⁄Regi⁄
(
MWPOINT
 *
poöts
, *
cou¡
,

878 
nbpﬁyg⁄s
, 
mode
);

881 
GdO≥nMou£
();

882 
GdClo£Mou£
();

883 
GdGëBuâ⁄Info
(*
buâ⁄s
);

884 
GdRe°ri˘Mou£
(
MWCOORD
 
√wmöx
,MWCOORD 
√wmöy
,MWCOORD 
√wmaxx
,

885 
MWCOORD
 
√wmaxy
);

886 
GdSëAc˚lMou£
(
√wthªsh
, 
√wsˇÀ
);

887 
GdMoveMou£
(
MWCOORD
 
√wx
, MWCOORD 
√wy
);

888 
GdRódMou£
(
MWCOORD
 *
px
, MWCOORD *
py
, *
pb
);

889 
GdMoveCurs‹
(
MWCOORD
 
x
, MWCOORD 
y
);

890 
MWBOOL
 
GdGëCurs‹Pos
(
MWCOORD
 *
px
, MWCOORD *
py
);

891 
GdSëCurs‹
(
PMWCURSOR
 
pcurs‹
);

892 
GdShowCurs‹
(
PSD
 
psd
);

893 
GdHideCurs‹
(
PSD
 
psd
);

894 
GdCheckCurs‹
(
PSD
 
psd
,
MWCOORD
 
x1
,MWCOORD 
y1
,MWCOORD 
x2
,MWCOORD 
y2
);

895 
GdFixCurs‹
(
PSD
 
psd
);

896 
GdSëTønsf‹m
(
MWTRANSFORM
 *);

898 
MOUSEDEVICE
 
mou£dev
;

901 
GdO≥nKeybﬂrd
();

902 
GdClo£Keybﬂrd
();

903 
GdGëModifõrInfo
(
MWKEYMOD
 *
modifõrs
, MWKEYMOD *
curmodifõrs
);

904 
GdRódKeybﬂrd
(
MWKEY
 *
buf
, 
MWKEYMOD
 *
modifõrs
, 
MWSCANCODE
 *
sˇncode
);

905 
KBDDEVICE
 
kbddev
;

907 #ifde‡
MW_FEATURE_TWO_KEYBOARDS


908 
GdO≥nKeybﬂrd2
();

909 
KBDDEVICE
 
kbddev2
;

913 #i‡
MW_FEATURE_IMAGES


914 
GdLﬂdImageFromBuf„r
(
PSD
 
psd
, *
buf„r
, 
size
, 
Êags
);

915 
GdDøwImageFromBuf„r
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
width
,

916 
MWCOORD
 
height
, *
buf„r
, 
size
, 
Êags
);

917 
GdDøwImageFromFûe
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
width
,

918 
MWCOORD
 
height
, *
∑th
, 
Êags
);

919 
GdLﬂdImageFromFûe
(
PSD
 
psd
, *
∑th
, 
Êags
);

920 
GdDøwImageToFô
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
width
,

921 
MWCOORD
 
height
, 
id
);

922 
GdFªeImage
(
id
);

923 
MWBOOL
 
GdGëImageInfo
(
id
, 
PMWIMAGEINFO
 
pii
);

924 
GdSåëchImage
(
PMWIMAGEHDR
 
§c
, 
MWCLIPRECT
 *
§¸e˘
, PMWIMAGEHDR 
d°
,

925 
MWCLIPRECT
 *
d°ª˘
);

926 
GdCompuãImagePôch
(
bµ
, 
width
, *
pôch
, *
byã•îpixñ
);

930 *
	m°¨t
;

931 
	moff£t
;

932 
	msize
;

933 } 
	tbuf„r_t
;

934 
GdImageBuf„rInô
(
buf„r_t
 *
buf„r
, *
°¨td©a
, 
size
);

935 
GdImageBuf„rSìkTo
(
buf„r_t
 *
buf„r
, 
off£t
);

936 
GdImageBuf„rRód
(
buf„r_t
 *
buf„r
, *
de°
, 
size
);

937 
GdImageBuf„rGëCh¨
(
buf„r_t
 *
buf„r
);

938 * 
GdImageBuf„rGëSåög
(
buf„r_t
 *
buf„r
, *
de°
, 
size
);

939 
GdImageBuf„rEOF
(
buf„r_t
 *
buf„r
);

942 #ifde‡
HAVE_BMP_SUPPORT


943 
GdDecodeBMP
(
buf„r_t
 *
§c
, 
PMWIMAGEHDR
 
pimage
);

945 #ifde‡
HAVE_JPEG_SUPPORT


946 
GdDecodeJPEG
(
buf„r_t
 *
§c
, 
PMWIMAGEHDR
 
pimage
, 
PSD
 
psd
, 
MWBOOL
 
Á°_gøysˇÀ
);

948 #ifde‡
HAVE_PNG_SUPPORT


949 
GdDecodePNG
(
buf„r_t
 *
§c
, 
PMWIMAGEHDR
 
pimage
);

951 #ifde‡
HAVE_GIF_SUPPORT


952 
GdDecodeGIF
(
buf„r_t
 *
§c
, 
PMWIMAGEHDR
 
pimage
);

954 #ifde‡
HAVE_PNM_SUPPORT


955 
GdDecodePNM
(
buf„r_t
 *
§c
, 
PMWIMAGEHDR
 
pimage
);

957 #ifde‡
HAVE_XPM_SUPPORT


958 
GdDecodeXPM
(
buf„r_t
 *
§c
, 
PMWIMAGEHDR
 
pimage
, 
PSD
 
psd
);

960 #ifde‡
HAVE_TIFF_SUPPORT


961 
GdDecodeTIFF
(*
∑th
, 
PMWIMAGEHDR
 
pimage
);

967 
	#MWITEM_OFFSET
(
ty≥
, 
fõld
Ë(()&((—y≥ *)0)->fõld))

	)

969 * 
GdIãmAŒoc
(
size
);

970 
GdLi°Add
(
PMWLISTHEAD
 
pHód
,
PMWLIST
 
pIãm
);

971 
GdLi°In£π
(
PMWLISTHEAD
 
pHód
,
PMWLIST
 
pIãm
);

972 
GdLi°Remove
(
PMWLISTHEAD
 
pHód
,
PMWLIST
 
pIãm
);

973 
	#GdIãmNew
(
ty≥
Ë(—y≥ *)
	`GdIãmAŒoc
(—y≥)))

	)

974 
	#GdIãmFªe
(
±r
Ë
	`‰ì
((*Ìå)

	)

977 
GdSëDash
(*
mask
, *
cou¡
);

978 
GdSëStù∂eBôm≠
(
MWIMAGEBITS
 *
°ù∂e
, 
MWCOORD
 
width
, MWCOORD 
height
);

979 
GdSëTSOff£t
(
xoff
, 
yoff
);

980 
GdSëFûlMode
(
mode
);

981 
GdSëTûePixm≠
(
PSD
 
§c
, 
MWCOORD
 
width
, MWCOORD 
height
);

982 
ts_døwpoöt
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
);

983 
ts_døwrow
(
PSD
 
psd
, 
MWCOORD
 
x1
, MWCOORD 
x2
, MWCOORD 
y
);

984 
ts_fûÃe˘
(
PSD
 
psd
, 
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
w
, MWCOORD 
h
);

985 
£t_ts_‹igö
(
x
, 
y
);

988 
	#GdIãmAddr
(
p
,
ty≥
,
li°
Ë(—y≥ *)((Ì - 
	`MWITEM_OFFSET
—y≥,li°)))

	)

990 #i‡
MW_FEATURE_TIMERS


991 
	~<sys/time.h
>

993 (*
	tMWTIMERCB
)(*);

995 
	#MWTIMER_ONESHOT
 0

	)

996 
	#MWTIMER_PERIODIC
 1

	)

998 
mw_timî
 
	tMWTIMER
;

999 
	smw_timî
 {

1000 
timevÆ
 
timeout
;

1001 
MWTIMERCB
 
ˇŒback
;

1002 *
¨g
;

1003 
MWTIMER
 *
√xt
;

1004 
MWTIMER
 *
¥ev
;

1005 
ty≥
;

1006 
MWTIMEOUT
 
≥riod
;

1009 
MWTIMER
 *
	`GdAddTimî
(
MWTIMEOUT
 
timeout
, 
MWTIMERCB
 
ˇŒback
, *
¨g
);

1010 
MWTIMER
 *
	`GdAddPîiodicTimî
(
MWTIMEOUT
 
timeout
, 
MWTIMERCB
 
ˇŒback
, *
¨g
);

1011 
	`GdDe°royTimî
(
MWTIMER
 *
timî
);

1012 
MWTIMER
 *
	`GdFödTimî
(*
¨g
);

1013 
MWBOOL
 
	`GdGëNextTimeout
(
timevÆ
 *
tv
, 
MWTIMEOUT
 
timeout
);

1014 
MWBOOL
 
	`GdTimeout
();

1019 
	`GdEº‹
(c⁄° *
f‹m©
, ...);

1020 
	`GdEº‹NuŒ
(c⁄° *
f‹m©
, ...);

1022 #i‡
USE_ALLOCA


1024 
	#ALLOCA
(
size
Ë
	`Æloˇ
(size)

	)

1025 
	#FREEA
(
pmem
)

	)

1028 
	#ALLOCA
(
size
Ë
	`mÆloc
(size)

	)

1029 
	#FREEA
(
pmem
Ë
	`‰ì
’mem)

	)

1033 #i‡
MSDOS
 | 
ELKS
 | 
PSP


1034 #unde‡
as£π


1035 
	#as£π
(
x
)

	)

1039 #i‡
__πems__


1040 
	#maö
 
πems_maö


	)

1043 #i‡!
_MINIX


1044 #i‚de‡
__πems__


1045 
	#HAVESELECT
 1

	)

	@include/graph3d.h

7 #i‚de‡
_GRAPH3D_H_


8 
	#_GRAPH3D_H_


	)

10 
	~<m©h.h
>

12 
	#pi
 3.1415926535

	)

13 
	#ïsû⁄
 0.000001

	)

14 
	#MAXPOLY
 32

	)

16 
FLOAT
 
	tvec1
;

19 
FLOAT
 
	mx
, 
	my
;

20 } 
	tvec2
;

23 
FLOAT
 
	mx
, 
	my
, 
	mz
;

24 } 
	tvec3
;

27 
öô3
(
HDC
 
hDC
,
HWND
 
hwndmem
);

28 
∑öt3
(
HDC
 
hDC
);

29 
£tcﬁ‹3
(
MWCOLORVAL
 
c
);

30 
movëo3
(
vec2
 
±
);

31 
löëo3
(
vec2
 
±
);

32 
pﬁyfûl
(
n
, 
vec2
 
poöts
[]);

33 
squ¨e
();

34 
cú˛e3
(
vec1
 
r
);

35 
daisy
(
vec1
 
r
,
poöts
);

36 
ro£
(
vec1
 
r
,
Àvñs
,
poöts
);

37 
åüngÀ
(
vec2
 
v0
, vec2 
v1
, vec2 
v2
);

38 
quadrû©îÆ
(
vec2
 
v0
, vec2 
v1
, vec2 
v2
, vec2 
v3
);

39 
look3
(
vec1
 
x
, vec1 
y
, vec1 
z
);

40 
døwgrid
(
vec1
 
xmö
, vec1 
xmax
, 
nx
, vec1 
zmö
, vec1 
zmax
, 
nz
);

41 
sˇÀ3
(
vec1
 
sx
, vec1 
sy
, vec1 
sz
, 
A
[][5]);

42 
å™3
(
vec1
 
tx
, vec1 
ty
, vec1 
tz
, 
A
[][5]);

43 
rŸ3
(
m
, 
vec1
 
thëa
, 
A
[][5]);

44 
mu…3
(
A
[][5], 
B
[][5], 
C
[][5]);

45 
födQ
();

	@include/lock.h

12 #i‡
THREADSAFE


13 
	#THREADSAFE_LINUX
 1

	)

19 #i‡
THREADSAFE_LINUX


20 
	#__USE_GNU


	)

21 
	~<±hªad.h
>

22 
±hªad_muãx_t
 
	tMWMUTEX
;

24 #i‡!
deföed
(
__CYGWIN__
)

30 
	#LOCK_DECLARE
(
«me
Ë
MWMUTEX
Çamê
PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP


	)

31 
	#LOCK_INIT
(
m
)

	)

40 
	#LOCK_DECLARE
(
«me
Ë
MWMUTEX
 
	)
«me

48 
	#LOCK_INIT
(
m
) \

50 
±hªad_muãx©å_t
 
©å
; \

51 
	`±hªad_muãx©å_öô
(&
©å
); \

52 
	`±hªad_muãx©å_£ây≥
(&
©å
, 
PTHREAD_MUTEX_RECURSIVE
); \

53 
	`±hªad_muãx_öô
((
m
), &
©å
); \

54 }

	)

57 
	#LOCK_INIT
(
m
) \

59 
±hªad_muãx©å_t
 
©å
; \

60 
	`±hªad_muãx©å_öô
(&
©å
); \

61 
	`±hªad_muãx©å_£tköd_≈
(&
©å
, 
PTHREAD_MUTEX_RECURSIVE_NP
); \

62 
	`±hªad_muãx_öô
((
m
), &
©å
); \

63 }

	)

67 
	#LOCK_EXTERN
(
«me
Ë
MWMUTEX
 
	)
«me

68 
	#LOCK_FREE
(
m
Ë
	`±hªad_muãx_de°roy
(m)

	)

69 
	#LOCK
(
m
Ë
	`±hªad_muãx_lock
(m)

	)

70 
	#UNLOCK
(
m
Ë
	`±hªad_muãx_u∆ock
(m)

	)

74 #i‡!
THREADSAFE


75 
	tMWMUTEX
;

77 
	#LOCK_DECLARE
(
«me
Ë
MWMUTEX
 
	)
«me

78 
	#LOCK_EXTERN
(
«me
Ë
MWMUTEX
 
	)
«me

79 
	#LOCK_INIT
(
m
)

	)

80 
	#LOCK_FREE
(
m
)

	)

81 
	#LOCK
(
m
)

	)

82 
	#UNLOCK
(
m
)

	)

	@include/mwobjects.h

8 #i‡!
deföed
 (
_MWOBJECTS_H_
)

9 
	#_MWOBJECTS_H_


	)

13 
	~"wödows.h
"

14 
	~"wöã∫.h
"

15 
	~"gøph3d.h
"

18 
	~<£t
>

19 
	~<io°ªam
>

21 
«me•a˚
 
	gMi¸oWödowsObje˘s


23 
˛ass
 
	gFûeDes¸ùt‹
;

31 ˛as†
	cWödowCœss


33 
	gpublic
:

35 
WödowCœss
 ();

36 
WödowCœss
 (
LPCSTR
 
ÕszCœssName
,

37 
UINT
 
°yÀ
 = 
CS_DBLCLKS
 | 
CS_VREDRAW
 | 
CS_HREDRAW
,

38 
cbClsExåa
 = 0,

39 
cbWndExåa
 = 0,

40 
HINSTANCE
 
hIn°™˚
 = 0,

41 
HICON
 
hIc⁄
 = 0,

42 
HCURSOR
 
hCurs‹
 = 0,

43 
HBRUSH
 
hbrBackground
 = 0,

44 
LPCSTR
 
ÕszMíuName
 = 0);

46 
£t_°yÀ
 (
UINT
 
°yÀ
)

47 { 
	gw˛ass
.
	g°yÀ
 = 
°yÀ
; }

49 
£t_˛ass_exåa
 (
cbClsExåa
)

50 { 
	gw˛ass
.
	gcbClsExåa
 = 
cbClsExåa
; }

52 
£t_wödow_exåa
 (
cbWndExåa
)

53 { 
	gw˛ass
.
	gcbWndExåa
 = 
cbWndExåa
; }

55 
£t_ö°™˚
 (
HINSTANCE
 
hIn°™˚
)

56 { 
	gw˛ass
.
	ghIn°™˚
 = 
hIn°™˚
; }

58 
£t_ic⁄
 (
HICON
 
hIc⁄
)

59 { 
	gw˛ass
.
	ghIc⁄
 = 
hIc⁄
; }

61 
£t_curs‹
 (
HCURSOR
 
hCurs‹
)

62 { 
	gw˛ass
.
	ghCurs‹
 = 
hCurs‹
; }

64 
£t_background
 (
HBRUSH
 
hbrBackground
)

65 { 
	gw˛ass
.
	ghbrBackground
 = 
hbrBackground
; }

67 
£t_míu_«me
 (
LPCSTR
 
ÕszMíuName
)

68 { 
	gw˛ass
.
	gÕszMíuName
 = 
ÕszMíuName
; }

70 
ATOM
 
ªgi°î_˛ass
 ();

72 
	g¥iv©e
:

79 
WNDCLASS
 
w˛ass
;

82 ˛as†
	cWödow


84 
‰õnd
 
	gWödowCœss
;

86 
	gpublic
:

88 
Wödow
 ();

89 
Wödow
 (
DWORD
 
dwExStyÀ
,

90 
LPCSTR
 
ÕCœssName
,

91 
LPCSTR
 
ÕWödowName
,

92 
DWORD
 
dwStyÀ
,

93 
x
,

94 
y
,

95 
nWidth
,

96 
nHeight
,

97 
HWND
 
hwndP¨ít
,

98 
HMENU
 
hMíu
,

99 
HINSTANCE
 
hIn°™˚
,

100 
LPVOID
 
ÕP¨am
);

102 
	gvútuÆ
 ~
Wödow
 ();

104 
HWND
 
¸óã
 (
DWORD
 
dwExStyÀ
,

105 
LPCSTR
 
ÕCœssName
,

106 
LPCSTR
 
ÕWödowName
,

107 
DWORD
 
dwStyÀ
,

108 
x
,

109 
y
,

110 
nWidth
,

111 
nHeight
,

112 
HWND
 
hwndP¨ít
,

113 
HMENU
 
hMíu
,

114 
HINSTANCE
 
hIn°™˚
,

115 
LPVOID
 
ÕP¨am
);

117 
BOOL
 
de°‹y
 ();

119 
HWND
 
gë_h™dÀ
 () const

120 {  
	ghwnd
; }

121 
›î©‹
 
HWND
 () const

122 {  
gë_h™dÀ
 (); }

124 
BOOL
 
is_visibÀ
 ()

125 {  
IsWödowVisibÀ
 (
hwnd
); }

126 
BOOL
 
show
 (
nCmdShow
)

127 {  ::
ShowWödow
 (
hwnd
, 
nCmdShow
); }

128 
BOOL
 
upd©e
 ()

129 {  ::
Upd©eWödow
 (
hwnd
); }

130 
BOOL
 
övÆid©e_ª˘
 (
CONST
 
RECT
 *
ÕRe˘
, BOOL 
bEø£
)

131 {  ::
InvÆid©eRe˘
 (
hwnd
, 
ÕRe˘
, 
bEø£
); }

133 
HWND
 
gë_focus
 ()

134 {  ::
GëFocus
 (); }

135 
HWND
 
£t_focus
 ()

136 {  ::
SëFocus
 (
hwnd
); }

138 
BOOL
 
move
 (
x
, 
y
, 
nWidth
, 
nHeight
, BOOL 
bRïaöt
)

139 {  
MoveWödow
 (
hwnd
, 
x
, 
y
, 
nWidth
, 
nHeight
, 
bRïaöt
); }

142 
BOOL
 
˛õ¡_to_s¸ìn
 (
LPPOINT
 
ÕPoöt
)

143 {  ::
Clõ¡ToS¸ìn
 (
hwnd
, 
ÕPoöt
); }

144 
BOOL
 
s¸ìn_to_˛õ¡
 (
LPPOINT
 
ÕPoöt
)

145 {  ::
Clõ¡ToS¸ìn
 (
hwnd
, 
ÕPoöt
); }

147 
LONG
 
gë_l⁄g
 (
nIndex
)

148 {  ::
GëWödowL⁄g
 (
hwnd
, 
nIndex
); }

149 
LONG
 
£t_l⁄g
 (
nIndex
, LONG 
wNewL⁄g
)

150 {  ::
SëWödowW‹d
 (
hwnd
, 
nIndex
, 
wNewL⁄g
); }

151 
WORD
 
gë_w‹d
 (
nIndex
)

152 {  ::
GëWödowW‹d
 (
hwnd
, 
nIndex
); }

153 
WORD
 
£t_w‹d
 (
nIndex
, WORD 
wNewW‹d
)

154 {  ::
SëWödowW‹d
 (
hwnd
, 
nIndex
, 
wNewW‹d
); }

156 
DWORD
 
gë_˛ass_l⁄g
 (
nIndex
)

157 {  ::
GëCœssL⁄g
 (
hwnd
, 
nIndex
); }

159 
gë_ãxt
 (
LPSTR
 
ÕSåög
, 
nMaxCou¡
)

160 {  
GëWödowText
 (
hwnd
, 
ÕSåög
, 
nMaxCou¡
); }

161 
BOOL
 
£t_ãxt
 (
LPCSTR
 
ÕSåög
)

162 {  
SëWödowText
 (
hwnd
, 
ÕSåög
); }

168 
vútuÆ
 
boﬁ
 
©èch
 (c⁄° 
fd
, 
FûeDes¸ùt‹
& 
fûe_des¸ùt‹
);

169 
vútuÆ
 
boﬁ
 
dëach
 (
FûeDes¸ùt‹
& 
fûe_des¸ùt‹
);

171 
	g¥Ÿe˘ed
:

179 
vútuÆ
 
LRESULT
 
mesßge_h™dÀr
 (
UINT
 
msg
,

180 
WPARAM
 
wP¨am
,

181 
LPARAM
 
lP¨am
);

183 
	g¥iv©e
:

189 
LRESULT
 
CALLBACK
 
WndProc
 (
HWND
 
hwnd
, 
UINT
 
msg
, 
WPARAM
 
wp
, 
LPARAM
 
Õ
);

191 
HWND
 
	ghwnd
;

192 
LPVOID
 
	gÕCª©eP¨ams
;

198 
	s…öt


200 
boﬁ
 
›î©‹
(Ë(c⁄° 
FûeDes¸ùt‹
* 
	gf1
, c⁄° FûeDes¸ùt‹* 
	gf2
) const;

203 
	g£t
<
	gFûeDes¸ùt‹
*, 
	g…öt
> 
	gfûe_des¸ùt‹s
;

207 ˛as†
	cRe˘


209 
	gpublic
:

211 
Re˘
 ()

212 { 
em±y
 (); }

213 
Re˘
 (
xLe·
, 
yT›
, 
xRight
, 
yBŸtom
)

214 { 
£t
 (
xLe·
, 
yT›
, 
xRight
, 
yBŸtom
); }

215 
Re˘
 (
HWND
 
hwnd
)

216 { 
gë_wödow
 (
hwnd
); }

218 
BOOL
 
gë_wödow
 (
HWND
 
hwnd
)

219 {  
GëWödowRe˘
 (
hwnd
, &
ª˘
); }

220 
BOOL
 
gë_˛õ¡
 (
HWND
 
hwnd
)

221 {  
GëClõ¡Re˘
 (
hwnd
, &
ª˘
); }

223 
BOOL
 
£t
 (
xLe·
, 
yT›
, 
xRight
, 
yBŸtom
)

224 {  ::
SëRe˘
 (&
ª˘
, 
xLe·
, 
yT›
, 
xRight
, 
yBŸtom
); }

226 
BOOL
 
em±y
 ()

227 {  ::
SëRe˘Em±y
 (&
ª˘
); }

229 
	gRe˘
& 
	g›î©‹
(c⁄° 
Re˘
& 
Ÿhî
)

230 { 
C›yRe˘
 (&
ª˘
, &
Ÿhî
.ª˘);  *
	gthis
; }

232 
›î©‹
 
boﬁ
 () const

233 {  ::
IsRe˘Em±y
 (&
ª˘
); }

235 
›î©‹
 
	gRECT
* ()

236 {  &
	gª˘
; }

238 
BOOL
 
c›y
 (
LPRECT
 
ÕRe˘D°
)

239 {  ::
C›yRe˘
 (
ÕRe˘D°
, &
ª˘
); }

241 
BOOL
 
öÊ©e
 (
dx
, 
dy
)

242 {  ::
InÊ©eRe˘
 (&
ª˘
, 
dx
, 
dy
); }

244 
BOOL
 
off£t
 (
dx
, 
dy
)

245 {  ::
Off£tRe˘
 (&
ª˘
, 
dx
, 
dy
); }

247 
BOOL
 
poöt_öside
 (
POINT
 
Poöt
)

248 {  
PtInRe˘
 (&
ª˘
, 
Poöt
); }

250 
MWCOORD
 
À·
 () const

251 {  
	gª˘
.
	gÀ·
; }

252 
MWCOORD
 
t›
 () const

253 {  
	gª˘
.
	gt›
; }

254 
MWCOORD
 
right
 () const

255 {  
	gª˘
.
	gright
; }

256 
MWCOORD
 
bŸtom
 () const

257 {  
	gª˘
.
	gbŸtom
; }

259 
	g¥iv©e
:

261 
RECT
 
ª˘
;

264 
ölöe
 
	go°ªam
& 
	g›î©‹
<< (o°ªam& 
	gs
, c⁄° 
	gRe˘
& 
	gr
) {

265 
	gs
 << "rect"

266 << "÷=" << 
	gr
.
À·
 (Ë<< ",t=" <<Ñ.
t›
 ()

267 << ",r=" << 
	gr
.
right
 (Ë<< ",b=" <<Ñ.
bŸtom
 ()

269  
	gs
;

276 ˛as†
	cPaöt


278 
	gpublic
:

280 íum { 
TEXT_BUF_SIZE
 = 512 };

282 
Paöt
 (
HWND
 
hwnd
);

283 
Paöt
 (
HWND
 
hwnd
, 
LPARAM
 
ÕP¨am
);

284 
	gvútuÆ
 ~
Paöt
 ();

290 
begö
 (
boﬁ
 
öô_3d
 = 
Ál£
, boﬁ 
døw_3d_ö_mem‹y
 = false);

291 
íd
 ();

297 
›î©‹
 
HWND
 ()

298 {  
	ghwnd
; }

299 
›î©‹
 
	gRECT
* ()

300 {  
	gr
; }

301 
›î©‹
 
HDC
 ()

302 {  
	ghdc
; }

303 
›î©‹
 
	gPAINTSTRUCT
* ()

304 {  &
	gps
; }

305 
›î©‹
 
	gPOINT
* ()

306 {  &
	g±
; }

308 
GDICOORD
 
gë_poöt_x
 () const

309 {  
	g±
.
	gx
; }

310 
GDICOORD
 
gë_poöt_y
 () const

311 {  
	g±
.
	gy
; }

313 
MWCOORD
 
À·
 () const

314 {  
	gr
.
À·
 (); }

315 
MWCOORD
 
t›
 () const

316 {  
	gr
.
t›
 (); }

317 
MWCOORD
 
right
 () const

318 {  
	gr
.
right
 (); }

319 
MWCOORD
 
bŸtom
 () const

320 {  
	gr
.
bŸtom
 (); }

326 
DWORD
 
gë_sy°em_cﬁour
 (
nIndex
)

327 {  ::
GëSysCﬁ‹
 (
nIndex
); }

333 
COLORREF
 
£t_pixñ
 (
x
, 
y
, COLORREF 
¸Cﬁour
)

334 {  ::
SëPixñ
 (
hdc
, 
x
, 
y
, 
¸Cﬁour
); }

336 
BOOL
 
move_to
 (
x
, 
y
)

337 {  ::
MoveToEx
 (
hdc
, 
x
, 
y
, 0); }

339 
BOOL
 
löe_to
 (
x
, 
y
)

340 {  ::
LöeTo
 (
hdc
, 
x
, 
y
); }

342 
BOOL
 
löe_to
 (
x1
, 
y1
, 
x2
, 
y2
)

343 { i‡(!
move_to
 (
x1
, 
y1
)Ë 
	gFALSE
;

344  
löe_to
 (
x2
, 
y2
); }

346 
BOOL
 
ª˘™gÀ
 (
x1
, 
y1
, 
x2
, 
y2
)

347 {  ::
Re˘™gÀ
 (
hdc
, 
x1
, 
y1
, 
x2
, 
y2
); }

349 
BOOL
 
fûl_ª˘™gÀ
 (
x1
, 
y1
, 
x2
, 
y2
, 
HBRUSH
 
hbr
)

350 { 
Re˘
 
r
 (
x1
, 
y1
, 
x2
, 
y2
);

351  ::
FûlRe˘
 (
hdc
, 
r
, 
hbr
); }

357 
öôüli£_3d
 (
boﬁ
 
døw_3d_ö_mem
)

358 { i‡(!
	gdøw_3d
) {

359 
	gdøw_3d
 = 
åue
; ::
öô3
 (
hdc
, 
døw_3d_ö_mem
 ? 
hwnd
 : 0); } }

360 
∑öt_3d
 ()

361 { i‡(
	gdøw_3d
Ë{ ::
∑öt3
 (
hdc
); døw_3d = 
Ál£
; } }

367 
£t_ãxt_‰om©
 (
UINT
 
uF‹m©
)

368 { 
	gãxt_f‹m©
 = 
uF‹m©
; }

370 
ãxt_out
 (
x
, 
y
, c⁄° *
f‹m©
, ...);

372 
	g¥iv©e
:

374 
HWND
 
hwnd
;

375 
boﬁ
 
	gdøw_3d
;

376 
boﬁ
 
	gdøwög
;

377 
Re˘
 
	gr
;

378 
HDC
 
	ghdc
;

379 
PAINTSTRUCT
 
	gps
;

380 
POINT
 
	g±
;

381 
UINT
 
	gãxt_f‹m©
;

383 
	gf‹m©_buf
[
TEXT_BUF_SIZE
];

392 ˛as†
	cFûeDes¸ùt‹


394 
‰õnd
 
˛ass
 
	gWödow
;

396 
	gpublic
:

398 
FûeDes¸ùt‹
 ();

399 
	gvútuÆ
 ~
FûeDes¸ùt‹
 ();

405 
boﬁ
 
íabÀ_ªad
 ();

406 
boﬁ
 
dißbÀ_ªad
 ();

407 
boﬁ
 
ªad_íabÀd
 () const

408 {  
	gªad_is_íabÀd
; }

410 
boﬁ
 
íabÀ_wrôe
 ();

411 
boﬁ
 
dißbÀ_wrôe
 ();

412 
boﬁ
 
wrôe_íabÀd
 () const

413 {  
	gwrôe_is_íabÀd
; }

415 
boﬁ
 
íabÀ_ex˚±
 ();

416 
boﬁ
 
dißbÀ_ex˚±
 ();

417 
boﬁ
 
ex˚±_íabÀd
 () const

418 {  
	gex˚±_is_íabÀd
; }

420 
fd
 () const

421 {  
	gfûe_desc
; }

423 
›î©‹
 () const

424 {  
fd
 (); }

426 c⁄° 
Wödow
 *
gë_wödow
 () const

427 {  
	gwödow
; }

429 
	g¥Ÿe˘ed
:

435 
vútuÆ
 
LRESULT
 
ªad
 ();

436 
vútuÆ
 
LRESULT
 
wrôe
 ();

437 
vútuÆ
 
LRESULT
 
ex˚±
 ();

439 
	g¥iv©e
:

441 
fûe_desc
;

442 
boﬁ
 
	gªad_is_íabÀd
;

443 
boﬁ
 
	gwrôe_is_íabÀd
;

444 
boﬁ
 
	gex˚±_is_íabÀd
;

445 
Wödow
 *
	gwödow
;

449 ˛as†
	cAµliˇti⁄


451 
	gpublic
:

453 
Aµliˇti⁄
 ();

454 
Aµliˇti⁄
 (
MWIMAGEHDR
& 
background
);

455 
	gvútuÆ
 ~
Aµliˇti⁄
 ();

457 
HINSTANCE
 
ö°™˚
 () const

458 {  
	g≠p_ö°™˚
; }

460 
HINSTANCE
 
¥ev_ö°™˚
 () const

461 {  
	g≠p_¥ev_ö°™˚
; }

463 
LPSTR
 
cmd_löe
 () const

464 {  
	g≠p_cmd_löe
; }

466 
show_cmd
 ()

467 {  
	g≠p_show_cmd
; }

473 
WINAPI
 
WöMaö
 (
HINSTANCE
 
hIn°™˚
,

474 
HINSTANCE
 
hPªvIn°™˚
,

475 
LPSTR
 
ÕCmdLöe
,

476 
nShowCmd
);

477 
	g¥Ÿe˘ed
:

479 
vútuÆ
 
öôüli£
 ();

480 
vútuÆ
 
shutdown
 ();

482 
	g¥iv©e
:

484 
MWIMAGEHDR
 *
background
;

485 
HINSTANCE
 
	g≠p_ö°™˚
;

486 
HINSTANCE
 
	g≠p_¥ev_ö°™˚
;

487 
LPSTR
 
	g≠p_cmd_löe
;

488 
	g≠p_show_cmd
;

	@include/mwsystem.h

9 #i‚de‡
MWSYSTEM_H_INCLUDED


10 
	#MWSYSTEM_H_INCLUDED


	)

31 
	~<°dlib.h
>

33 
	#GdMÆloc
(
size
Ë
	`mÆloc
((size))

	)

34 
	#GdCÆloc
(
num
,
size
Ë
	`ˇŒoc
(“um),(size))

	)

35 
	#GdRóŒoc
(
addr
,
ﬁdsize
,
√wsize
Ë
	`ªÆloc
(◊ddr),“ewsize))

	)

36 
	#GdFªe
(
addr
Ë
	`‰ì
(◊ddr))

	)

37 
	#GdSåDup
(
°rög
Ë
	`°rdup
((°rög))

	)

	@include/mwtypes.h

1 #i‚de‡
_MWTYPES_H


2 
	#_MWTYPES_H


	)

9 
	#MWPACKED
 
	`__©åibuã__
 ((
	`Æig√d
(1), 
∑cked
))

	)

12 
	#MWFONT_SYSTEM_VAR
 "Sy°em"

	)

13 
	#MWFONT_SYSTEM_FIXED
 "Sy°emFixed"

	)

14 
	#MWFONT_GUI_VAR
 "Sy°em"

	)

15 
	#MWFONT_OEM_FIXED
 "Sy°emFixed"

	)

18 
	#MWTF_ASCII
 0x00000000L

	)

19 
	#MWTF_UTF8
 0x00000001L

	)

20 
	#MWTF_UC16
 0x00000002L

	)

21 
	#MWTF_UC32
 0x00000004L

	)

22 
	#MWTF_XCHAR2B
 0x00000008L

	)

23 
	#MWTF_PACKMASK
 0x0000000FL

	)

26 
	#MWTF_DBCS_BIG5
 0x00000100L

	)

27 
	#MWTF_DBCS_EUCCN
 0x00000200L

	)

28 
	#MWTF_DBCS_EUCKR
 0x00000300L

	)

29 
	#MWTF_DBCS_EUCJP
 0x00000400L

	)

30 
	#MWTF_DBCS_JIS
 0x00000500L

	)

31 
	#MWTF_DBCSMASK
 0x00000700L

	)

34 
	#MWTF_TOP
 0x01000000L

	)

35 
	#MWTF_BASELINE
 0x02000000L

	)

36 
	#MWTF_BOTTOM
 0x04000000L

	)

39 
	#MWTF_KERNING
 0x0001

	)

40 
	#MWTF_ANTIALIAS
 0x0002

	)

41 
	#MWTF_UNDERLINE
 0x0004

	)

42 
	#MWTF_FREETYPE
 0x1000

	)

45 
	#MWMODE_COPY
 0

	)

46 
	#MWMODE_XOR
 1

	)

47 
	#MWMODE_OR
 2

	)

48 
	#MWMODE_AND
 3

	)

49 
	#MWMODE_CLEAR
 4

	)

50 
	#MWMODE_SETTO1
 5

	)

51 
	#MWMODE_EQUIV
 6

	)

52 
	#MWMODE_NOR
 7

	)

53 
	#MWMODE_NAND
 8

	)

54 
	#MWMODE_INVERT
 9

	)

55 
	#MWMODE_COPYINVERTED
 10

	)

56 
	#MWMODE_ORINVERTED
 11

	)

57 
	#MWMODE_ANDINVERTED
 12

	)

58 
	#MWMODE_ORREVERSE
 13

	)

59 
	#MWMODE_ANDREVERSE
 14

	)

60 
	#MWMODE_NOOP
 15

	)

61 
	#MWMODE_XOR_FGBG
 16

	)

63 
	#MWMODE_SIMPLE_MAX
 16

	)

75 
	#MWMODE_SRC
 
MWMODE_COPY


	)

76 
	#MWMODE_DST
 
MWMODE_NOOP


	)

77 
	#MWMODE_SRC_OVER
 17

	)

78 
	#MWMODE_DST_OVER
 18

	)

79 
	#MWMODE_SRC_IN
 19

	)

80 
	#MWMODE_DST_IN
 20

	)

81 
	#MWMODE_SRC_OUT
 21

	)

82 
	#MWMODE_DST_OUT
 22

	)

83 
	#MWMODE_SRC_ATOP
 23

	)

84 
	#MWMODE_DST_ATOP
 24

	)

85 
	#MWMODE_PORTERDUFF_XOR
 25

	)

87 
	#MWMODE_MAX
 25

	)

91 
	#MWLINE_SOLID
 0

	)

92 
	#MWLINE_ONOFF_DASH
 1

	)

97 
	#MWFILL_SOLID
 0

	)

98 
	#MWFILL_STIPPLE
 1

	)

99 
	#MWFILL_OPAQUE_STIPPLE
 2

	)

100 
	#MWFILL_TILE
 3

	)

103 
	#MWBUTTON_L
 04

	)

104 
	#MWBUTTON_M
 02

	)

105 
	#MWBUTTON_R
 01

	)

108 
	#MWARGB
(
a
,
r
,
g
,
b
Ë((
MWCOLORVAL
)((()(r)|\

109 ((()()(
g
))<<8))|\

110 ((()()(
b
))<<16)|\

111 ((()()(
a
))<<24)))

	)

112 
	#MWRGB
(
r
,
g
,
b
Ë
	`MWARGB
(255,‘),(g),(b)Ë

	)

113 
	#MW0RGB
(
r
,
g
,
b
Ë
	`MWARGB
(0,‘),(g),(b)Ë

	)

117 
	#MWROP_TO_MODE
(
›
Ë((›Ë>> 24)

	)

120 
	#MWMODE_TO_ROP
(
›
Ë((()(›)Ë<< 24)

	)

128 
	#MWROP_EXTENSION
 0xff000000L

	)

131 
	#MWROP_SRCTRANSCOPY
 0x21000000L

	)

134 
	#MWROP_BLENDCONSTANT
 0x22000000L

	)

137 
	#MWROP_BLENDFGBG
 0x23000000L

	)

140 
	#MWROP_BLENDCHANNEL
 0x24000000L

	)

143 
	#MWROP_STRETCH
 0x25000000L

	)

150 
	#MWROP_USE_GC_MODE
 0xff000000L

	)

153 
	#MWROP_COPY
 
	`MWMODE_TO_ROP
(
MWMODE_COPY
)

	)

154 
	#MWROP_XOR
 
	`MWMODE_TO_ROP
(
MWMODE_XOR
)

	)

155 
	#MWROP_OR
 
	`MWMODE_TO_ROP
(
MWMODE_OR
)

	)

156 
	#MWROP_AND
 
	`MWMODE_TO_ROP
(
MWMODE_AND
)

	)

157 
	#MWROP_CLEAR
 
	`MWMODE_TO_ROP
(
MWMODE_CLEAR
)

	)

158 
	#MWROP_SET
 
	`MWMODE_TO_ROP
(
MWMODE_SETTO1
)

	)

159 
	#MWROP_EQUIV
 
	`MWMODE_TO_ROP
(
MWMODE_EQUIV
)

	)

160 
	#MWROP_NOR
 
	`MWMODE_TO_ROP
(
MWMODE_NOR
)

	)

161 
	#MWROP_NAND
 
	`MWMODE_TO_ROP
(
MWMODE_NAND
)

	)

162 
	#MWROP_INVERT
 
	`MWMODE_TO_ROP
(
MWMODE_INVERT
)

	)

163 
	#MWROP_COPYINVERTED
 
	`MWMODE_TO_ROP
(
MWMODE_COPYINVERTED
)

	)

164 
	#MWROP_ORINVERTED
 
	`MWMODE_TO_ROP
(
MWMODE_ORINVERTED
)

	)

165 
	#MWROP_ANDINVERTED
 
	`MWMODE_TO_ROP
(
MWMODE_ANDINVERTED
)

	)

166 
	#MWROP_ORREVERSE
 
	`MWMODE_TO_ROP
(
MWMODE_ORREVERSE
)

	)

167 
	#MWROP_ANDREVERSE
 
	`MWMODE_TO_ROP
(
MWMODE_ANDREVERSE
)

	)

168 
	#MWROP_NOOP
 
	`MWMODE_TO_ROP
(
MWMODE_NOOP
)

	)

169 
	#MWROP_XOR_FGBG
 
	`MWMODE_TO_ROP
(
MWMODE_XOR_FGBG
)

	)

181 
	#MWROP_SRC
 
	`MWMODE_TO_ROP
(
MWMODE_SRC
)

	)

182 
	#MWROP_DST
 
	`MWMODE_TO_ROP
(
MWMODE_DST
)

	)

183 
	#MWROP_SRC_OVER
 
	`MWMODE_TO_ROP
(
MWMODE_SRC_OVER
)

	)

184 
	#MWROP_DST_OVER
 
	`MWMODE_TO_ROP
(
MWMODE_DST_OVER
)

	)

185 
	#MWROP_SRC_IN
 
	`MWMODE_TO_ROP
(
MWMODE_SRC_IN
)

	)

186 
	#MWROP_DST_IN
 
	`MWMODE_TO_ROP
(
MWMODE_DST_IN
)

	)

187 
	#MWROP_SRC_OUT
 
	`MWMODE_TO_ROP
(
MWMODE_SRC_OUT
)

	)

188 
	#MWROP_DST_OUT
 
	`MWMODE_TO_ROP
(
MWMODE_DST_OUT
)

	)

189 
	#MWROP_SRC_ATOP
 
	`MWMODE_TO_ROP
(
MWMODE_SRC_ATOP
)

	)

190 
	#MWROP_DST_ATOP
 
	`MWMODE_TO_ROP
(
MWMODE_DST_ATOP
)

	)

191 
	#MWROP_PORTERDUFF_XOR
 
	`MWMODE_TO_ROP
(
MWMODE_PORTERDUFF_XOR
)

	)

193 
	#MWROP_SRCCOPY
 
MWROP_COPY


	)

194 
	#MWROP_SRCAND
 
MWROP_AND


	)

195 
	#MWROP_SRCINVERT
 
MWROP_XOR


	)

196 
	#MWROP_BLACKNESS
 
MWROP_CLEAR


	)

205 
	#MWPF_RGB
 0

	)

206 
	#MWPF_PIXELVAL
 1

	)

207 
	#MWPF_PALETTE
 2

	)

208 
	#MWPF_TRUECOLOR0888
 3

	)

209 
	#MWPF_TRUECOLOR888
 4

	)

210 
	#MWPF_TRUECOLOR565
 5

	)

211 
	#MWPF_TRUECOLOR555
 6

	)

212 
	#MWPF_TRUECOLOR332
 7

	)

213 
	#MWPF_TRUECOLOR8888
 8

	)

214 
	#MWPF_TRUECOLORABGR
 9

	)

233 #i‚de‡
MWPIXEL_FORMAT


234 
	#MWPIXEL_FORMAT
 
MWPF_TRUECOLOR0888


	)

237 #i‡
deföed
(
__AS386_16__
)

239 #unde‡
MWPIXEL_FORMAT


240 
	#MWPIXEL_FORMAT
 
MWPF_PALETTE


	)

243 #i‡(
MWPIXEL_FORMAT
 =
MWPF_TRUECOLOR565
Ë|| (MWPIXEL_FORMAT =
MWPF_TRUECOLOR555
)

244 
	tMWPIXELVAL
;

246 #i‡
MWPIXEL_FORMAT
 =
MWPF_TRUECOLOR332


247 
	tMWPIXELVAL
;

249 #i‡
MWPIXEL_FORMAT
 =
MWPF_PALETTE


250 
	tMWPIXELVAL
;

252 
	tMWPIXELVAL
;

258 
	#MWPORTRAIT_NONE
 0x00

	)

259 
	#MWPORTRAIT_LEFT
 0x01

	)

260 
	#MWPORTRAIT_RIGHT
 0x02

	)

261 
	#MWPORTRAIT_DOWN
 0x04

	)

266 
	tMWCOORD
;

267 
	tMWBOOL
;

268 
	tMWUCHAR
;

269 
	tMWCOLORVAL
;

270 
	tMWIMAGEBITS
;

271 
	tMWTIMEOUT
;

272 
	tMWTEXTFLAGS
;

274 
	#MWCOORD_MAX
 0x7ff‡

	)

275 
	#MWCOORD_MIN
 (-
MWCOORD_MAX
Ë

	)

278 
	#MWIMAGE_WORDS
(
x
Ë(((x)+15)/16)

	)

279 
	#MWIMAGE_BYTES
(
x
Ë(
	`MWIMAGE_WORDS
(x)*(
MWIMAGEBITS
))

	)

281 
	#MWIMAGE_SIZE
(
width
, 
height
) \

282 ((
height
Ë* (((
width
Ë+ 
MWIMAGE_BITSPERIMAGE
 - 1Ë/ MWIMAGE_BITSPERIMAGE))

	)

283 
	#MWIMAGE_BITSPERIMAGE
 ((
MWIMAGEBITS
Ë* 8)

	)

284 
	#MWIMAGE_BITVALUE
(
n
Ë((
MWIMAGEBITS
Ë(((MWIMAGEBITSË1Ë<< (n)))

	)

285 
	#MWIMAGE_FIRSTBIT
 (
	`MWIMAGE_BITVALUE
(
MWIMAGE_BITSPERIMAGE
 - 1))

	)

286 
	#MWIMAGE_NEXTBIT
(
m
Ë((
MWIMAGEBITS
Ë((mË>> 1))

	)

287 
	#MWIMAGE_TESTBIT
(
m
Ë((mË& 
MWIMAGE_FIRSTBIT
Ë

	)

288 
	#MWIMAGE_SHIFTBIT
(
m
Ë((
MWIMAGEBITS
Ë((mË<< 1)Ë

	)

291 
	s_mwli°
 {

292 
_mwli°
 *
	m√xt
;

293 
_mwli°
 *
	m¥ev
;

294 } 
	tMWLIST
, *
	tPMWLIST
;

297 
	s_mwli°hód
 {

298 
_mwli°
 *
	mhód
;

299 
_mwli°
 *
	mèû
;

300 } 
	tMWLISTHEAD
, *
	tPMWLISTHEAD
;

303 
	tMWKEYMOD
;

307 
MWCOORD
 
	mrows
;

308 
MWCOORD
 
	mcﬁs
;

309 
	mxdpcm
;

310 
	mydpcm
;

311 
	m∂™es
;

312 
	mbµ
;

313 
	mncﬁ‹s
;

314 
	mf⁄ts
;

315 
	mbuâ⁄s
;

316 
MWKEYMOD
 
	mmodifõrs
;

317 
	mpixty≥
;

318 
	mp‹åaô
;

319 
MWBOOL
 
	mfbdrivî
;

320 
	mrmask
;

321 
	mgmask
;

322 
	mbmask
;

323 
MWCOORD
 
	mxpos
;

324 
MWCOORD
 
	mypos
;

327 
	mvs_width
;

328 
	mvs_height
;

329 
	mws_width
;

330 
	mws_height
;

331 } 
	tMWSCREENINFO
, *
	tPMWSCREENINFO
;

335 * 
	mphy•ixñs
;

337 * 
	mwöpixñs
;

338 
	mpixty≥
;

339 
	mbµ
;

340 
	mbyã•p
;

341 
	mpôch
;

342 
MWCOORD
 
	mx
, 
	my
;

343 
	mp‹åaô_mode
;

344 
MWCOORD
 
	mxªs
;

345 
MWCOORD
 
	myªs
;

346 
MWCOORD
 
	mxvúåes
;

347 
MWCOORD
 
	myvúåes
;

348 } 
	tMWWINDOWFBINFO
;

365 
	mmaxwidth
;

372 
	mheight
;

383 
	mba£löe
;

391 
	mdes˚¡
;

396 
	mmaxas˚¡
;

403 
	mmaxdes˚¡
;

409 
	mlöe•acög
;

414 
	mfú°ch¨
;

419 
	mœ°ch¨
;

425 
MWBOOL
 
	mfixed
;

435 
MWUCHAR
 
	mwidths
[256];

436 } 
	tMWFONTINFO
, *
	tPMWFONTINFO
;

441 *
	mâ«me
;

442 *
	mmw«me
;

443 } 
	tMWFONTLIST
, *
	tPMWFONTLIST
;

448 
	#MWLF_CLASS_ANY
 0

	)

449 
	#MWLF_CLASS_BUILTIN
 1

	)

450 
	#MWLF_CLASS_FNT
 2

	)

451 
	#MWLF_CLASS_PCF
 3

	)

452 
	#MWLF_CLASS_FREETYPE
 4

	)

453 
	#MWLF_CLASS_T1LIB
 5

	)

454 
	#MWLF_CLASS_MGL
 6

	)

455 
	#MWLF_CLASS_HZK
 7

	)

457 
	#MWLF_FACESIZE
 64

	)

460 
	#MWLF_TYPE_DEFAULT
 0

	)

461 
	#MWLF_TYPE_SCALED
 4

	)

462 
	#MWLF_TYPE_RASTER
 5

	)

463 
	#MWLF_TYPE_TRUETYPE
 7

	)

464 
	#MWLF_TYPE_ADOBE
 10

	)

467 
	#MWLF_WEIGHT_DEFAULT
 0

	)

468 
	#MWLF_WEIGHT_THIN
 100

	)

469 
	#MWLF_WEIGHT_EXTRALIGHT
 200

	)

470 
	#MWLF_WEIGHT_LIGHT
 300

	)

471 
	#MWLF_WEIGHT_NORMAL
 400

	)

472 
	#MWLF_WEIGHT_REGULAR
 400

	)

473 
	#MWLF_WEIGHT_MEDIUM
 500

	)

474 
	#MWLF_WEIGHT_DEMIBOLD
 600

	)

475 
	#MWLF_WEIGHT_BOLD
 700

	)

476 
	#MWLF_WEIGTH_EXTRABOLD
 800

	)

477 
	#MWLF_WEIGHT_BLACK
 900

	)

480 
	#MWLF_CHARSET_ANSI
 0

	)

481 
	#MWLF_CHARSET_DEFAULT
 1

	)

482 
	#MWLF_CHARSET_UNICODE
 254

	)

483 
	#MWLF_CHARSET_OEM
 255

	)

486 
	#MWLF_PITCH_DEFAULT
 0

	)

487 
	#MWLF_PITCH_ULTRACONDENSED
 10

	)

488 
	#MWLF_PITCH_EXTRACONDENSED
 20

	)

489 
	#MWLF_PITCH_CONDENSED
 30

	)

490 
	#MWLF_PITCH_SEMICONDENSED
 40

	)

491 
	#MWLF_PITCH_NORMAL
 50

	)

492 
	#MWLF_PITCH_SEMIEXPANDED
 60

	)

493 
	#MWLF_PITCH_EXPANDED
 70

	)

494 
	#MWLF_PITCH_EXTRAEXPANDED
 80

	)

495 
	#MWLF_PITCH_ULTRAEXPANDED
 90

	)

498 
	#MWLF_FLAGS_ALIAS
 1

	)

502 
	mlfHeight
;

503 
	mlfWidth
;

504 
	mlfEsˇ≥mít
;

505 
	mlfOrõ¡©i⁄
;

506 
	mlfWeight
;

507 
MWUCHAR
 
	mlfIèlic
;

508 
MWUCHAR
 
	mlfUndîlöe
;

509 
MWUCHAR
 
	mlfSåikeOut
;

510 
MWUCHAR
 
	mlfCh¨Së
;

511 
MWUCHAR
 
	mlfOutPªcisi⁄
;

512 
MWUCHAR
 
	mlfClùPªcisi⁄
;

513 
MWUCHAR
 
	mlfQuÆôy
;

514 
MWUCHAR
 
	mlfPôchAndFamûy
;

517 
MWUCHAR
 
	mlfCœss
;

520 
MWUCHAR
 
	mlfPôch
;

521 
MWUCHAR
 
	mlfRom™
;

522 
MWUCHAR
 
	mlfSîif
;

523 
MWUCHAR
 
	mlfS™sSîif
;

524 
MWUCHAR
 
	mlfModîn
;

525 
MWUCHAR
 
	mlfM⁄o•a˚
;

526 
MWUCHAR
 
	mlfPr›‹ti⁄Æ
;

527 
MWUCHAR
 
	mlfOblique
;

528 
MWUCHAR
 
	mlfSmÆlC≠s
;

531 
	mlfFa˚Name
[
MWLF_FACESIZE
];

533 } 
	tMWLOGFONT
, *
	tPMWLOGFONT
;

540 
	#MWLF_CÀ¨
(
lf
) \

542 (
lf
)->
lfHeight
 = 0; \

543 (
lf
)->
lfWidth
 = 0; \

544 (
lf
)->
lfEsˇ≥mít
 = 0; \

545 (
lf
)->
lfOrõ¡©i⁄
 = 0; \

546 (
lf
)->
lfWeight
 = 
MWLF_WEIGHT_REGULAR
; \

547 (
lf
)->
lfPôch
 = 0; \

548 (
lf
)->
lfCœss
 = 
MWLF_CLASS_ANY
; \

549 (
lf
)->
lfIèlic
 = 0; \

550 (
lf
)->
lfOblique
 = 0; \

551 (
lf
)->
lfRom™
 = 0; \

552 (
lf
)->
lfSîif
 = 0; \

553 (
lf
)->
lfS™sSîif
 = 0; \

554 (
lf
)->
lfModîn
 = 0; \

555 (
lf
)->
lfM⁄o•a˚
 = 0; \

556 (
lf
)->
lfPr›‹ti⁄Æ
 = 0; \

557 (
lf
)->
lfSmÆlC≠s
 = 0; \

558 (
lf
)->
lfUndîlöe
 = 0; \

559 (
lf
)->
lfSåikeOut
 = 0; \

560 (
lf
)->
lfCh¨Së
 = 0; \

561 (
lf
)->
lfOutPªcisi⁄
 = 0; \

562 (
lf
)->
lfClùPªcisi⁄
 = 0; \

563 (
lf
)->
lfQuÆôy
 = 0; \

564 (
lf
)->
lfPôchAndFamûy
 = 0; \

565 (
lf
)->
lfFa˚Name
[0] = '\0'; \

566 } 0)

	)

568 
	#MWLF_SëBﬁd
(
lf
) \

570 (
lf
)->
lfWeight
 = 
MWLF_WEIGHT_BOLD
; \

571 } 0)

	)

573 
	#MWLF_SëReguœr
(
lf
) \

575 (
lf
)->
lfWeight
 = 
MWLF_WEIGHT_REGULAR
; \

576 } 0)

	)

578 
	#MWLF_SëIèlics
(
lf
) \

580 (
lf
)->
lfIèlic
 = 1; \

581 (
lf
)->
lfOblique
 = 0; \

582 (
lf
)->
lfRom™
 = 0; \

583 } 0)

	)

585 
	#MWLF_SëRom™
(
lf
) \

587 (
lf
)->
lfIèlic
 = 0; \

588 (
lf
)->
lfOblique
 = 0; \

589 (
lf
)->
lfRom™
 = 1; \

590 } 0)

	)

601 
MWCOORD
 
	mx
;

602 
MWCOORD
 
	my
;

603 } 
	tMWPOINT
;

607 
MWCOORD
 
	mÀ·
;

608 
MWCOORD
 
	mt›
;

609 
MWCOORD
 
	mright
;

610 
MWCOORD
 
	mbŸtom
;

611 } 
	tMWRECT
;

615 
	msize
;

616 
	mnumRe˘s
;

617 
	mty≥
;

618 
MWRECT
 *
	mª˘s
;

619 
MWRECT
 
	mexã¡s
;

620 } 
	tMWCLIPREGION
;

623 
	#MWREGION_ERROR
 0

	)

624 
	#MWREGION_NULL
 1

	)

625 
	#MWREGION_SIMPLE
 2

	)

626 
	#MWREGION_COMPLEX
 3

	)

629 
	#MWRECT_OUT
 0

	)

630 
	#MWRECT_ALLIN
 1

	)

631 
	#MWRECT_PARTIN
 2

	)

634 
	#MWPOLY_EVENODD
 1

	)

635 
	#MWPOLY_WINDING
 2

	)

638 
MWCOORD
 
	mwidth
;

639 
MWCOORD
 
	mheight
;

640 
MWIMAGEBITS
 * 
	mbôm≠
;

641 } 
	tMWSTIPPLE
;

645 
MWUCHAR
 
	mr
;

646 
MWUCHAR
 
	mg
;

647 
MWUCHAR
 
	mb
;

648 
MWUCHAR
 
	m_∑ddög
;

649 } 
	tMWPALENTRY
;

652 
	#MWIMAGE_UPSIDEDOWN
 01

	)

653 
	#MWIMAGE_BGR
 00

	)

654 
	#MWIMAGE_RGB
 02

	)

655 
	#MWIMAGE_ALPHA_CHANNEL
 04

	)

658 
	mwidth
;

659 
	mheight
;

660 
	m∂™es
;

661 
	mbµ
;

662 
	mpôch
;

663 
	mbyã•îpixñ
;

664 
	mcom¥essi⁄
;

665 
	m∑lsize
;

666 
	må™scﬁ‹
;

667 
MWPALENTRY
 * 
	m∑Àâe
;

668 
MWUCHAR
 * 
	mimagebôs
;

669 } 
	tMWIMAGEHDR
, *
	tPMWIMAGEHDR
;

673 
	mid
;

674 
	mwidth
;

675 
	mheight
;

676 
	m∂™es
;

677 
	mbµ
;

678 
	mpôch
;

679 
	mbyã•îpixñ
;

680 
	mcom¥essi⁄
;

681 
	m∑lsize
;

682 
MWPALENTRY
 
	m∑Àâe
[256];

683 } 
	tMWIMAGEINFO
, *
	tPMWIMAGEINFO
;

685 
	#MWMAX_CURSOR_SIZE
 32

	)

686 
	#MWMAX_CURSOR_BUFLEN
 
	`MWIMAGE_SIZE
(
MWMAX_CURSOR_SIZE
,MWMAX_CURSOR_SIZE)

	)

690 
	mwidth
;

691 
	mheight
;

692 
MWCOORD
 
	mhŸx
;

693 
MWCOORD
 
	mhŸy
;

694 
MWCOLORVAL
 
	mfgcﬁ‹
;

695 
MWCOLORVAL
 
	mbgcﬁ‹
;

696 
MWIMAGEBITS
 
	mimage
[
MWMAX_CURSOR_SIZE
*2];

697 
MWIMAGEBITS
 
	mmask
[
MWMAX_CURSOR_SIZE
*2];

698 } 
	tMWCURSOR
, *
	tPMWCURSOR
;

702 
	ma
, 
	mb
, 
	mc
;

703 
	md
, 
	me
, 
	mf
;

704 
	ms
;

705 } 
	tMWTRANSFORM
;

707 
_mwf⁄t
 * 
	tPMWFONT
;

710 
	#MWARC
 0x0001

	)

711 
	#MWOUTLINE
 0x0002

	)

712 
	#MWARCOUTLINE
 0x0003

	)

713 
	#MWPIE
 0x0004

	)

714 
	#MWELLIPSE
 0x0008

	)

715 
	#MWELLIPSEFILL
 0x0010

	)

717 #ifde‡
MWINCLUDECOLORS


726 
	#BLACK
 
	`MWRGB
–0 , 0 , 0 )

	)

727 
	#BLUE
 
	`MWRGB
–0 , 0 , 128 )

	)

728 
	#GREEN
 
	`MWRGB
–0 , 128, 0 )

	)

729 
	#CYAN
 
	`MWRGB
–0 , 128, 128 )

	)

730 
	#RED
 
	`MWRGB
–128, 0 , 0 )

	)

731 
	#MAGENTA
 
	`MWRGB
–128, 0 , 128 )

	)

732 
	#BROWN
 
	`MWRGB
–128, 64 , 0 )

	)

733 
	#LTGRAY
 
	`MWRGB
–192, 192, 192 )

	)

734 
	#GRAY
 
	`MWRGB
–128, 128, 128 )

	)

735 
	#LTBLUE
 
	`MWRGB
–0 , 0 , 255 )

	)

736 
	#LTGREEN
 
	`MWRGB
–0 , 255, 0 )

	)

737 
	#LTCYAN
 
	`MWRGB
–0 , 255, 255 )

	)

738 
	#LTRED
 
	`MWRGB
–255, 0 , 0 )

	)

739 
	#LTMAGENTA
 
	`MWRGB
–255, 0 , 255 )

	)

740 
	#YELLOW
 
	`MWRGB
–255, 255, 0 )

	)

741 
	#WHITE
 
	`MWRGB
–255, 255, 255 )

	)

744 
	#DKGRAY
 
	`MWRGB
–32, 32, 32)

	)

748 
	tMWKEY
;

749 
	tMWSCANCODE
;

751 
	#MWKEY_UNKNOWN
 0

	)

753 
	#MWKEY_BACKSPACE
 8

	)

754 
	#MWKEY_TAB
 9

	)

755 
	#MWKEY_ENTER
 13

	)

756 
	#MWKEY_ESCAPE
 27

	)

759 
	#MWKEY_NONASCII_MASK
 0xFF00

	)

762 
	#MWKEY_FIRST
 0xF800

	)

763 
	#MWKEY_LEFT
 0xF800

	)

764 
	#MWKEY_RIGHT
 0xF801

	)

765 
	#MWKEY_UP
 0xF802

	)

766 
	#MWKEY_DOWN
 0xF803

	)

767 
	#MWKEY_INSERT
 0xF804

	)

768 
	#MWKEY_DELETE
 0xF805

	)

769 
	#MWKEY_HOME
 0xF806

	)

770 
	#MWKEY_END
 0xF807

	)

771 
	#MWKEY_PAGEUP
 0xF808

	)

772 
	#MWKEY_PAGEDOWN
 0xF809

	)

775 
	#MWKEY_KP0
 0xF80A

	)

776 
	#MWKEY_KP1
 0xF80B

	)

777 
	#MWKEY_KP2
 0xF80C

	)

778 
	#MWKEY_KP3
 0xF80D

	)

779 
	#MWKEY_KP4
 0xF80E

	)

780 
	#MWKEY_KP5
 0xF80F

	)

781 
	#MWKEY_KP6
 0xF810

	)

782 
	#MWKEY_KP7
 0xF811

	)

783 
	#MWKEY_KP8
 0xF812

	)

784 
	#MWKEY_KP9
 0xF813

	)

785 
	#MWKEY_KP_PERIOD
 0xF814

	)

786 
	#MWKEY_KP_DIVIDE
 0xF815

	)

787 
	#MWKEY_KP_MULTIPLY
 0xF816

	)

788 
	#MWKEY_KP_MINUS
 0xF817

	)

789 
	#MWKEY_KP_PLUS
 0xF818

	)

790 
	#MWKEY_KP_ENTER
 0xF819

	)

791 
	#MWKEY_KP_EQUALS
 0xF81A

	)

794 
	#MWKEY_F1
 0xF81B

	)

795 
	#MWKEY_F2
 0xF81C

	)

796 
	#MWKEY_F3
 0xF81D

	)

797 
	#MWKEY_F4
 0xF81E

	)

798 
	#MWKEY_F5
 0xF81F

	)

799 
	#MWKEY_F6
 0xF820

	)

800 
	#MWKEY_F7
 0xF821

	)

801 
	#MWKEY_F8
 0xF822

	)

802 
	#MWKEY_F9
 0xF823

	)

803 
	#MWKEY_F10
 0xF824

	)

804 
	#MWKEY_F11
 0xF825

	)

805 
	#MWKEY_F12
 0xF827

	)

808 
	#MWKEY_NUMLOCK
 0xF828

	)

809 
	#MWKEY_CAPSLOCK
 0xF829

	)

810 
	#MWKEY_SCROLLOCK
 0xF82A

	)

811 
	#MWKEY_LSHIFT
 0xF82B

	)

812 
	#MWKEY_RSHIFT
 0xF82C

	)

813 
	#MWKEY_LCTRL
 0xF82D

	)

814 
	#MWKEY_RCTRL
 0xF82E

	)

815 
	#MWKEY_LALT
 0xF82F

	)

816 
	#MWKEY_RALT
 0xF830

	)

817 
	#MWKEY_LMETA
 0xF831

	)

818 
	#MWKEY_RMETA
 0xF832

	)

819 
	#MWKEY_ALTGR
 0xF833

	)

822 
	#MWKEY_PRINT
 0xF834

	)

823 
	#MWKEY_SYSREQ
 0xF835

	)

824 
	#MWKEY_PAUSE
 0xF836

	)

825 
	#MWKEY_BREAK
 0xF837

	)

826 
	#MWKEY_QUIT
 0xF838

	)

827 
	#MWKEY_MENU
 0xF839

	)

828 
	#MWKEY_REDRAW
 0xF83A

	)

833 
	#MWKEY_CONTRAST
 0xF842

	)

834 
	#MWKEY_BRIGHTNESS
 0xF843

	)

835 
	#MWKEY_SELECTUP
 0xF844

	)

836 
	#MWKEY_SELECTDOWN
 0xF845

	)

837 
	#MWKEY_ACCEPT
 0xF846

	)

838 
	#MWKEY_CANCEL
 0xF847

	)

839 
	#MWKEY_APP1
 0xF848

	)

840 
	#MWKEY_APP2
 0xF849

	)

841 
	#MWKEY_APP3
 0xF84A

	)

842 
	#MWKEY_APP4
 0xF84B

	)

843 
	#MWKEY_SUSPEND
 0xF84C

	)

844 
	#MWKEY_END_NORMAL
 0xF84D

	)

859 
	#MWKEY_HAVI_KEY_BASE
 (
MWKEY_END_NORMAL
+1)

	)

862 
	#MWKEY_HAVI_CODE_FIRST
 403

	)

865 
	#MWKEY_HAVI_CODE_LAST
 460

	)

868 
	#MWKEY_FROM_HAVI_CODE
(
h
Ë((hË+ (
MWKEY_HAVI_KEY_BASE
 - 
MWKEY_HAVI_CODE_FIRST
))

	)

871 
	#MWKEY_TO_HAVI_CODE
(
m
Ë((mË- (
MWKEY_HAVI_KEY_BASE
 - 
MWKEY_HAVI_CODE_FIRST
))

	)

874 
	#MWKEY_IS_HAVI_CODE
(
m
Ë–()((mË- 
MWKEY_HAVI_KEY_BASE
) \

875 <()(
MWKEY_HAVI_CODE_LAST
 - 
MWKEY_HAVI_CODE_FIRST
Ë)

	)

878 
	#MWKEY_COLORED_KEY_0
 
	`MWKEY_FROM_HAVI_CODE
(403)

	)

879 
	#MWKEY_COLORED_KEY_1
 
	`MWKEY_FROM_HAVI_CODE
(404)

	)

880 
	#MWKEY_COLORED_KEY_2
 
	`MWKEY_FROM_HAVI_CODE
(405)

	)

881 
	#MWKEY_COLORED_KEY_3
 
	`MWKEY_FROM_HAVI_CODE
(406)

	)

882 
	#MWKEY_COLORED_KEY_4
 
	`MWKEY_FROM_HAVI_CODE
(407)

	)

883 
	#MWKEY_COLORED_KEY_5
 
	`MWKEY_FROM_HAVI_CODE
(408)

	)

884 
	#MWKEY_POWER
 
	`MWKEY_FROM_HAVI_CODE
(409)

	)

885 
	#MWKEY_DIMMER
 
	`MWKEY_FROM_HAVI_CODE
(410)

	)

886 
	#MWKEY_WINK
 
	`MWKEY_FROM_HAVI_CODE
(411)

	)

887 
	#MWKEY_REWIND
 
	`MWKEY_FROM_HAVI_CODE
(412)

	)

888 
	#MWKEY_STOP
 
	`MWKEY_FROM_HAVI_CODE
(413)

	)

889 
	#MWKEY_EJECT_TOGGLE
 
	`MWKEY_FROM_HAVI_CODE
(414)

	)

890 
	#MWKEY_PLAY
 
	`MWKEY_FROM_HAVI_CODE
(415)

	)

891 
	#MWKEY_RECORD
 
	`MWKEY_FROM_HAVI_CODE
(416)

	)

892 
	#MWKEY_FAST_FWD
 
	`MWKEY_FROM_HAVI_CODE
(417)

	)

893 
	#MWKEY_PLAY_SPEED_UP
 
	`MWKEY_FROM_HAVI_CODE
(418)

	)

894 
	#MWKEY_PLAY_SPEED_DOWN
 
	`MWKEY_FROM_HAVI_CODE
(419)

	)

895 
	#MWKEY_PLAY_SPEED_RESET
 
	`MWKEY_FROM_HAVI_CODE
(420)

	)

896 
	#MWKEY_RECORD_SPEED_NEXT
 
	`MWKEY_FROM_HAVI_CODE
(421)

	)

897 
	#MWKEY_GO_TO_START
 
	`MWKEY_FROM_HAVI_CODE
(422)

	)

898 
	#MWKEY_GO_TO_END
 
	`MWKEY_FROM_HAVI_CODE
(423)

	)

899 
	#MWKEY_TRACK_PREV
 
	`MWKEY_FROM_HAVI_CODE
(424)

	)

900 
	#MWKEY_TRACK_NEXT
 
	`MWKEY_FROM_HAVI_CODE
(425)

	)

901 
	#MWKEY_RANDOM_TOGGLE
 
	`MWKEY_FROM_HAVI_CODE
(426)

	)

902 
	#MWKEY_CHANNEL_UP
 
	`MWKEY_FROM_HAVI_CODE
(427)

	)

903 
	#MWKEY_CHANNEL_DOWN
 
	`MWKEY_FROM_HAVI_CODE
(428)

	)

904 
	#MWKEY_STORE_FAVORITE_0
 
	`MWKEY_FROM_HAVI_CODE
(429)

	)

905 
	#MWKEY_STORE_FAVORITE_1
 
	`MWKEY_FROM_HAVI_CODE
(430)

	)

906 
	#MWKEY_STORE_FAVORITE_2
 
	`MWKEY_FROM_HAVI_CODE
(431)

	)

907 
	#MWKEY_STORE_FAVORITE_3
 
	`MWKEY_FROM_HAVI_CODE
(432)

	)

908 
	#MWKEY_RECALL_FAVORITE_0
 
	`MWKEY_FROM_HAVI_CODE
(433)

	)

909 
	#MWKEY_RECALL_FAVORITE_1
 
	`MWKEY_FROM_HAVI_CODE
(434)

	)

910 
	#MWKEY_RECALL_FAVORITE_2
 
	`MWKEY_FROM_HAVI_CODE
(435)

	)

911 
	#MWKEY_RECALL_FAVORITE_3
 
	`MWKEY_FROM_HAVI_CODE
(436)

	)

912 
	#MWKEY_CLEAR_FAVORITE_0
 
	`MWKEY_FROM_HAVI_CODE
(437)

	)

913 
	#MWKEY_CLEAR_FAVORITE_1
 
	`MWKEY_FROM_HAVI_CODE
(438)

	)

914 
	#MWKEY_CLEAR_FAVORITE_2
 
	`MWKEY_FROM_HAVI_CODE
(439)

	)

915 
	#MWKEY_CLEAR_FAVORITE_3
 
	`MWKEY_FROM_HAVI_CODE
(440)

	)

916 
	#MWKEY_SCAN_CHANNELS_TOGGLE
 
	`MWKEY_FROM_HAVI_CODE
(441)

	)

917 
	#MWKEY_PINP_TOGGLE
 
	`MWKEY_FROM_HAVI_CODE
(442)

	)

918 
	#MWKEY_SPLIT_SCREEN_TOGGLE
 
	`MWKEY_FROM_HAVI_CODE
(443)

	)

919 
	#MWKEY_DISPLAY_SWAP
 
	`MWKEY_FROM_HAVI_CODE
(444)

	)

920 
	#MWKEY_SCREEN_MODE_NEXT
 
	`MWKEY_FROM_HAVI_CODE
(445)

	)

921 
	#MWKEY_VIDEO_MODE_NEXT
 
	`MWKEY_FROM_HAVI_CODE
(446)

	)

922 
	#MWKEY_VOLUME_UP
 
	`MWKEY_FROM_HAVI_CODE
(447)

	)

923 
	#MWKEY_VOLUME_DOWN
 
	`MWKEY_FROM_HAVI_CODE
(448)

	)

924 
	#MWKEY_MUTE
 
	`MWKEY_FROM_HAVI_CODE
(449)

	)

925 
	#MWKEY_SURROUND_MODE_NEXT
 
	`MWKEY_FROM_HAVI_CODE
(450)

	)

926 
	#MWKEY_BALANCE_RIGHT
 
	`MWKEY_FROM_HAVI_CODE
(451)

	)

927 
	#MWKEY_BALANCE_LEFT
 
	`MWKEY_FROM_HAVI_CODE
(452)

	)

928 
	#MWKEY_FADER_FRONT
 
	`MWKEY_FROM_HAVI_CODE
(453)

	)

929 
	#MWKEY_FADER_REAR
 
	`MWKEY_FROM_HAVI_CODE
(454)

	)

930 
	#MWKEY_BASS_BOOST_UP
 
	`MWKEY_FROM_HAVI_CODE
(455)

	)

931 
	#MWKEY_BASS_BOOST_DOWN
 
	`MWKEY_FROM_HAVI_CODE
(456)

	)

932 
	#MWKEY_INFO
 
	`MWKEY_FROM_HAVI_CODE
(457)

	)

933 
	#MWKEY_GUIDE
 
	`MWKEY_FROM_HAVI_CODE
(458)

	)

934 
	#MWKEY_TELETEXT
 
	`MWKEY_FROM_HAVI_CODE
(459)

	)

935 
	#MWKEY_SUBTITLE
 
	`MWKEY_FROM_HAVI_CODE
(460)

	)

937 
	#MWKEY_LAST
 
MWKEY_SUBTITLE


	)

940 
	#MWKMOD_NONE
 0x0000

	)

941 
	#MWKMOD_LSHIFT
 0x0001

	)

942 
	#MWKMOD_RSHIFT
 0x0002

	)

943 
	#MWKMOD_LCTRL
 0x0040

	)

944 
	#MWKMOD_RCTRL
 0x0080

	)

945 
	#MWKMOD_LALT
 0x0100

	)

946 
	#MWKMOD_RALT
 0x0200

	)

947 
	#MWKMOD_LMETA
 0x0400

	)

948 
	#MWKMOD_RMETA
 0x0800

	)

949 
	#MWKMOD_NUM
 0x1000

	)

950 
	#MWKMOD_CAPS
 0x2000

	)

951 
	#MWKMOD_ALTGR
 0x4000

	)

952 
	#MWKMOD_SCR
 0x8000

	)

954 
	#MWKMOD_CTRL
 (
MWKMOD_LCTRL
|
MWKMOD_RCTRL
)

	)

955 
	#MWKMOD_SHIFT
 (
MWKMOD_LSHIFT
|
MWKMOD_RSHIFT
)

	)

956 
	#MWKMOD_ALT
 (
MWKMOD_LALT
|
MWKMOD_RALT
)

	)

957 
	#MWKMOD_META
 (
MWKMOD_LMETA
|
MWKMOD_RMETA
)

	)

959 
	#MWKINFO_LED_MASK
 (1 << 0)

	)

960 
	#MWKINFO_LED_MODE_MASK
 (1 << 1)

	)

963 
	#MWKINFO_LED_CAP
 (1 << 0)

	)

964 
	#MWKINFO_LED_NUM
 (1 << 1)

	)

965 
	#MWKINFO_LED_SCR
 (1 << 2)

	)

967 
	#MWKINFO_LED_MODE_ON
 (1 << 3)

	)

968 
	#MWKINFO_LED_MODE_OFF
 (1 << 4)

	)

971 
	mÀd
;

972 
	mÀd_mode
;

973 } 
	tMWKBINFO
, *
	tPMWKBINFO
;

	@include/nano-X.h

1 #i‚def 
_NANO_X_H


2 
	#_NANO_X_H


	)

13 #ifde‡
__˝lu•lus


17 
	~"mwty≥s.h
"

19 #ifde‡
PSP


20 
	~<p•kî√l.h
>

21 
	~<p•utûs.h
>

22 
	#Ârötf
(...Ëdÿ{} 0)

	)

23 
	#£tbuf
(...Ëdÿ{} 0)

	)

24 
	#exô
(...Ë
	`s˚Kî√lExôGame
()

	)

31 
MWCOORD
 
	tGR_COORD
;

32 
MWCOORD
 
	tGR_SIZE
;

33 
MWCOLORVAL
 
	tGR_COLOR
;

34 
MWPIXELVAL
 
	tGR_PIXELVAL
;

35 
MWIMAGEBITS
 
	tGR_BITMAP
;

36 
MWUCHAR
 
	tGR_CHAR
;

37 
MWTEXTFLAGS
 
	tGR_TEXTFLAGS
;

38 
MWKEY
 
	tGR_KEY
;

39 
MWSCANCODE
 
	tGR_SCANCODE
;

40 
MWKEYMOD
 
	tGR_KEYMOD
;

41 
MWSCREENINFO
 
	tGR_SCREEN_INFO
;

42 
MWWINDOWFBINFO
 
	tGR_WINDOW_FB_INFO
;

43 
MWFONTINFO
 
	tGR_FONT_INFO
;

44 
MWIMAGEINFO
 
	tGR_IMAGE_INFO
;

45 
MWIMAGEHDR
 
	tGR_IMAGE_HDR
;

46 
MWLOGFONT
 
	tGR_LOGFONT
;

47 
MWPALENTRY
 
	tGR_PALENTRY
;

48 
MWPOINT
 
	tGR_POINT
;

49 
MWTIMEOUT
 
	tGR_TIMEOUT
;

50 
MWFONTLIST
 
	tGR_FONTLIST
;

51 
MWKBINFO
 
	tGR_KBINFO
;

52 
MWSTIPPLE
 
	tGR_STIPPLE
;

53 
MWTRANSFORM
 
	tGR_TRANSFORM
;

56 
	tGR_COUNT
;

57 
	tGR_CHAR_WIDTH
;

58 
	tGR_ID
;

59 
GR_ID
 
	tGR_DRAW_ID
;

60 
GR_DRAW_ID
 
	tGR_WINDOW_ID
;

61 
GR_ID
 
	tGR_GC_ID
;

62 
GR_ID
 
	tGR_REGION_ID
;

63 
GR_ID
 
	tGR_FONT_ID
;

64 
GR_ID
 
	tGR_IMAGE_ID
;

65 
GR_ID
 
	tGR_TIMER_ID
;

66 
GR_ID
 
	tGR_CURSOR_ID
;

67 
	tGR_BOOL
;

68 
	tGR_ERROR
;

69 
	tGR_EVENT_TYPE
;

70 
	tGR_UPDATE_TYPE
;

71 
	tGR_EVENT_MASK
;

72 
	tGR_FUNC_NAME
[25];

73 
	tGR_WM_PROPS
;

74 
	tGR_SERIALNO
;

75 
	tGR_MIMETYPE
;

76 
	tGR_LENGTH
;

77 
	tGR_BUTTON
;

81 
GR_COORD
 
x
;

82 
GR_COORD
 
y
;

83 
GR_SIZE
 
width
;

84 
GR_SIZE
 
height
;

85 } 
	tGR_RECT
;

88 
	#GR_ROOT_WINDOW_ID
 ((
GR_WINDOW_ID
Ë1)

	)

91 
	#GR_RGB
(
r
,
g
,
b
Ë
	`MWRGB
‘,g,b)

	)

92 
	#GR_ARGB
(
a
,
r
,
g
,
b
Ë
	`MWARGB
◊,r,g,b)

	)

95 
	#GR_MODE_COPY
 
MWMODE_COPY


	)

96 
	#GR_MODE_SET
 
MWMODE_COPY


	)

97 
	#GR_MODE_XOR
 
MWMODE_XOR


	)

98 
	#GR_MODE_OR
 
MWMODE_OR


	)

99 
	#GR_MODE_AND
 
MWMODE_AND


	)

100 
	#GR_MODE_CLEAR
 
MWMODE_CLEAR


	)

101 
	#GR_MODE_SETTO1
 
MWMODE_SETTO1


	)

102 
	#GR_MODE_EQUIV
 
MWMODE_EQUIV


	)

103 
	#GR_MODE_NOR
 
MWMODE_NOR


	)

104 
	#GR_MODE_NAND
 
MWMODE_NAND


	)

105 
	#GR_MODE_INVERT
 
MWMODE_INVERT


	)

106 
	#GR_MODE_COPYINVERTED
 
MWMODE_COPYINVERTED


	)

107 
	#GR_MODE_ORINVERTED
 
MWMODE_ORINVERTED


	)

108 
	#GR_MODE_ANDINVERTED
 
MWMODE_ANDINVERTED


	)

109 
	#GR_MODE_ORREVERSE
 
MWMODE_ORREVERSE


	)

110 
	#GR_MODE_ANDREVERSE
 
MWMODE_ANDREVERSE


	)

111 
	#GR_MODE_NOOP
 
MWMODE_NOOP


	)

113 
	#GR_MODE_DRAWMASK
 0x00FF

	)

114 
	#GR_MODE_EXCLUDECHILDREN
 0x0100

	)

117 
	#GR_LINE_SOLID
 
MWLINE_SOLID


	)

118 
	#GR_LINE_ONOFF_DASH
 
MWLINE_ONOFF_DASH


	)

120 
	#GR_FILL_SOLID
 
MWFILL_SOLID


	)

121 
	#GR_FILL_STIPPLE
 
MWFILL_STIPPLE


	)

122 
	#GR_FILL_OPAQUE_STIPPLE
 
MWFILL_OPAQUE_STIPPLE


	)

123 
	#GR_FILL_TILE
 
MWFILL_TILE


	)

126 
	#GR_POLY_EVENODD
 
MWPOLY_EVENODD


	)

127 
	#GR_POLY_WINDING
 
MWPOLY_WINDING


	)

130 
	#GR_FONT_SYSTEM_VAR
 
MWFONT_SYSTEM_VAR


	)

131 
	#GR_FONT_SYSTEM_FIXED
 
MWFONT_SYSTEM_FIXED


	)

132 
	#GR_FONT_GUI_VAR
 
MWFONT_GUI_VAR


	)

133 
	#GR_FONT_OEM_FIXED
 
MWFONT_OEM_FIXED


	)

136 
	#GR_TFASCII
 
MWTF_ASCII


	)

137 
	#GR_TFUTF8
 
MWTF_UTF8


	)

138 
	#GR_TFUC16
 
MWTF_UC16


	)

139 
	#GR_TFUC32
 
MWTF_UC32


	)

140 
	#GR_TFXCHAR2B
 
MWTF_XCHAR2B


	)

141 
	#GR_TFPACKMASK
 
MWTF_PACKMASK


	)

144 
	#GR_TFTOP
 
MWTF_TOP


	)

145 
	#GR_TFBASELINE
 
MWTF_BASELINE


	)

146 
	#GR_TFBOTTOM
 
MWTF_BOTTOM


	)

149 
	#GR_TFKERNING
 
MWTF_KERNING


	)

150 
	#GR_TFANTIALIAS
 
MWTF_ANTIALIAS


	)

151 
	#GR_TFUNDERLINE
 
MWTF_UNDERLINE


	)

154 
	#GR_ARC
 
MWARC


	)

155 
	#GR_ARCOUTLINE
 
MWARCOUTLINE


	)

156 
	#GR_PIE
 
MWPIE


	)

159 
	#GR_WINDOW_BOUNDING_MASK
 0

	)

160 
	#GR_WINDOW_CLIP_MASK
 1

	)

163 
	#GR_FALSE
 0

	)

164 
	#GR_TRUE
 1

	)

167 
	#GR_IMAGE_MAX_SIZE
 (-1)

	)

170 
	#GR_BUTTON_R
 
MWBUTTON_R


	)

171 
	#GR_BUTTON_M
 
MWBUTTON_M


	)

172 
	#GR_BUTTON_L
 
MWBUTTON_L


	)

173 
	#GR_BUTTON_ANY
 (
MWBUTTON_R
|
MWBUTTON_M
|
MWBUTTON_L
Ë

	)

176 
	#GR_BACKGROUND_TILE
 0

	)

177 
	#GR_BACKGROUND_CENTER
 1

	)

178 
	#GR_BACKGROUND_TOPLEFT
 2

	)

179 
	#GR_BACKGROUND_STRETCH
 4

	)

180 
	#GR_BACKGROUND_TRANS
 8

	)

183 
	#GR_BMDATA_BYTEREVERSE
 01

	)

184 
	#GR_BMDATA_BYTESWAP
 02

	)

188 
	#GR_WM_PROP_NORESIZE
 0x04

	)

189 
	#GR_WM_PROP_NOICONISE
 0x08

	)

190 
	#GR_WM_PROP_NOWINMENU
 0x10

	)

191 
	#GR_WM_PROP_NOROLLUP
 0x20

	)

192 
	#GR_WM_PROP_ONTOP
 0x200

	)

193 
	#GR_WM_PROP_STICKY
 0x400

	)

194 
	#GR_WM_PROP_DND
 0x2000

	)

198 
	#GR_WM_PROPS_NOBACKGROUND
 0x00000001L

	)

199 
	#GR_WM_PROPS_NOFOCUS
 0x00000002L

	)

200 
	#GR_WM_PROPS_NOMOVE
 0x00000004L

	)

201 
	#GR_WM_PROPS_NORAISE
 0x00000008L

	)

202 
	#GR_WM_PROPS_NODECORATE
 0x00000010L

	)

203 
	#GR_WM_PROPS_NOAUTOMOVE
 0x00000020L

	)

204 
	#GR_WM_PROPS_NOAUTORESIZE
 0x00000040L

	)

207 
	#GR_WM_PROPS_APPWINDOW
 0x00000000L

	)

208 
	#GR_WM_PROPS_APPMASK
 0xF0000000L

	)

209 
	#GR_WM_PROPS_BORDER
 0x80000000L

	)

210 
	#GR_WM_PROPS_APPFRAME
 0x40000000L

	)

211 
	#GR_WM_PROPS_CAPTION
 0x20000000L

	)

212 
	#GR_WM_PROPS_CLOSEBOX
 0x10000000L

	)

213 
	#GR_WM_PROPS_MAXIMIZE
 0x08000000L

	)

216 
	#GR_WM_FLAGS_PROPS
 0x0001

	)

217 
	#GR_WM_FLAGS_TITLE
 0x0002

	)

218 
	#GR_WM_FLAGS_BACKGROUND
 0x0004

	)

219 
	#GR_WM_FLAGS_BORDERSIZE
 0x0008

	)

220 
	#GR_WM_FLAGS_BORDERCOLOR
 0x0010

	)

227 
GR_WM_PROPS
 
Êags
;

228 
GR_WM_PROPS
 
¥›s
;

229 
GR_CHAR
 *
tôÀ
;

230 
GR_COLOR
 
background
;

231 
GR_SIZE
 
b‹dîsize
;

232 
GR_COLOR
 
b‹dîcﬁ‹
;

233 } 
	tGR_WM_PROPERTIES
;

239 
GR_WINDOW_ID
 
wid
;

240 
GR_WINDOW_ID
 
∑ª¡
;

241 
GR_WINDOW_ID
 
chûd
;

242 
GR_WINDOW_ID
 
siblög
;

243 
GR_BOOL
 
öput⁄ly
;

244 
GR_BOOL
 
m≠≥d
;

245 
GR_BOOL
 
ªÆized
;

246 
GR_COORD
 
x
;

247 
GR_COORD
 
y
;

248 
GR_SIZE
 
width
;

249 
GR_SIZE
 
height
;

250 
GR_SIZE
 
b‹dîsize
;

251 
GR_COLOR
 
b‹dîcﬁ‹
;

252 
GR_COLOR
 
background
;

253 
GR_EVENT_MASK
 
evítmask
;

254 
GR_WM_PROPS
 
¥›s
;

255 
GR_CURSOR_ID
 
curs‹
;

256 
¥o˚ssid
;

257 } 
	tGR_WINDOW_INFO
;

263 
GR_GC_ID
 
gcid
;

264 
mode
;

265 
GR_REGION_ID
 
ªgi⁄
;

266 
xoff
;

267 
yoff
;

268 
GR_FONT_ID
 
f⁄t
;

269 
GR_COLOR
 
f‹eground
;

270 
GR_COLOR
 
background
;

271 
GR_BOOL
 
fgi•ixñvÆ
;

272 
GR_BOOL
 
bgi•ixñvÆ
;

273 
GR_BOOL
 
u£background
;

274 
GR_BOOL
 
exposuª
;

275 } 
	tGR_GC_INFO
;

281 
GR_COUNT
 
cou¡
;

282 
GR_PALENTRY
 
∑Àâe
[256];

283 } 
	tGR_PALETTE
;

287 
xªs
;

288 
yªs
;

289 
möx
;

290 
möy
;

291 
maxx
;

292 
maxy
;

293 
GR_BOOL
 
xsw≠
;

294 
GR_BOOL
 
ysw≠
;

295 } 
	tGR_CAL_DATA
;

298 
	#GR_ERROR_BAD_WINDOW_ID
 1

	)

299 
	#GR_ERROR_BAD_GC_ID
 2

	)

300 
	#GR_ERROR_BAD_CURSOR_SIZE
 3

	)

301 
	#GR_ERROR_MALLOC_FAILED
 4

	)

302 
	#GR_ERROR_BAD_WINDOW_SIZE
 5

	)

303 
	#GR_ERROR_KEYBOARD_ERROR
 6

	)

304 
	#GR_ERROR_MOUSE_ERROR
 7

	)

305 
	#GR_ERROR_INPUT_ONLY_WINDOW
 8

	)

306 
	#GR_ERROR_ILLEGAL_ON_ROOT_WINDOW
 9

	)

307 
	#GR_ERROR_TOO_MUCH_CLIPPING
 10

	)

308 
	#GR_ERROR_SCREEN_ERROR
 11

	)

309 
	#GR_ERROR_UNMAPPED_FOCUS_WINDOW
 12

	)

310 
	#GR_ERROR_BAD_DRAWING_MODE
 13

	)

311 
	#GR_ERROR_BAD_LINE_ATTRIBUTE
 14

	)

312 
	#GR_ERROR_BAD_FILL_MODE
 15

	)

313 
	#GR_ERROR_BAD_REGION_ID
 16

	)

322 
	#GR_EVENT_TYPE_ERROR
 (-1)

	)

323 
	#GR_EVENT_TYPE_NONE
 0

	)

324 
	#GR_EVENT_TYPE_EXPOSURE
 1

	)

325 
	#GR_EVENT_TYPE_BUTTON_DOWN
 2

	)

326 
	#GR_EVENT_TYPE_BUTTON_UP
 3

	)

327 
	#GR_EVENT_TYPE_MOUSE_ENTER
 4

	)

328 
	#GR_EVENT_TYPE_MOUSE_EXIT
 5

	)

329 
	#GR_EVENT_TYPE_MOUSE_MOTION
 6

	)

330 
	#GR_EVENT_TYPE_MOUSE_POSITION
 7

	)

331 
	#GR_EVENT_TYPE_KEY_DOWN
 8

	)

332 
	#GR_EVENT_TYPE_KEY_UP
 9

	)

333 
	#GR_EVENT_TYPE_FOCUS_IN
 10

	)

334 
	#GR_EVENT_TYPE_FOCUS_OUT
 11

	)

335 
	#GR_EVENT_TYPE_FDINPUT
 12

	)

336 
	#GR_EVENT_TYPE_UPDATE
 13

	)

337 
	#GR_EVENT_TYPE_CHLD_UPDATE
 14

	)

338 
	#GR_EVENT_TYPE_CLOSE_REQ
 15

	)

339 
	#GR_EVENT_TYPE_TIMEOUT
 16

	)

340 
	#GR_EVENT_TYPE_SCREENSAVER
 17

	)

341 
	#GR_EVENT_TYPE_CLIENT_DATA_REQ
 18

	)

342 
	#GR_EVENT_TYPE_CLIENT_DATA
 19

	)

343 
	#GR_EVENT_TYPE_SELECTION_CHANGED
 20

	)

344 
	#GR_EVENT_TYPE_TIMER
 21

	)

345 
	#GR_EVENT_TYPE_PORTRAIT_CHANGED
 22

	)

348 
	#GR_EVENTMASK
(
n
Ë(((
GR_EVENT_MASK
Ë1Ë<< (n))

	)

350 
	#GR_EVENT_MASK_NONE
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_NONE
)

	)

351 
	#GR_EVENT_MASK_ERROR
 0x80000000L

	)

352 
	#GR_EVENT_MASK_EXPOSURE
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_EXPOSURE
)

	)

353 
	#GR_EVENT_MASK_BUTTON_DOWN
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_BUTTON_DOWN
)

	)

354 
	#GR_EVENT_MASK_BUTTON_UP
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_BUTTON_UP
)

	)

355 
	#GR_EVENT_MASK_MOUSE_ENTER
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_MOUSE_ENTER
)

	)

356 
	#GR_EVENT_MASK_MOUSE_EXIT
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_MOUSE_EXIT
)

	)

357 
	#GR_EVENT_MASK_MOUSE_MOTION
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_MOUSE_MOTION
)

	)

358 
	#GR_EVENT_MASK_MOUSE_POSITION
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_MOUSE_POSITION
)

	)

359 
	#GR_EVENT_MASK_KEY_DOWN
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_KEY_DOWN
)

	)

360 
	#GR_EVENT_MASK_KEY_UP
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_KEY_UP
)

	)

361 
	#GR_EVENT_MASK_FOCUS_IN
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_FOCUS_IN
)

	)

362 
	#GR_EVENT_MASK_FOCUS_OUT
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_FOCUS_OUT
)

	)

363 
	#GR_EVENT_MASK_FDINPUT
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_FDINPUT
)

	)

364 
	#GR_EVENT_MASK_UPDATE
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_UPDATE
)

	)

365 
	#GR_EVENT_MASK_CHLD_UPDATE
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_CHLD_UPDATE
)

	)

366 
	#GR_EVENT_MASK_CLOSE_REQ
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_CLOSE_REQ
)

	)

367 
	#GR_EVENT_MASK_TIMEOUT
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_TIMEOUT
)

	)

368 
	#GR_EVENT_MASK_SCREENSAVER
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_SCREENSAVER
)

	)

369 
	#GR_EVENT_MASK_CLIENT_DATA_REQ
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_CLIENT_DATA_REQ
)

	)

370 
	#GR_EVENT_MASK_CLIENT_DATA
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_CLIENT_DATA
)

	)

371 
	#GR_EVENT_MASK_SELECTION_CHANGED
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_SELECTION_CHANGED
)

	)

372 
	#GR_EVENT_MASK_TIMER
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_TIMER
)

	)

373 
	#GR_EVENT_MASK_PORTRAIT_CHANGED
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_PORTRAIT_CHANGED
)

	)

377 
	#GR_EVENT_MASK_ALL
 ((
GR_EVENT_MASK
Ë-1L)

	)

380 
	#GR_UPDATE_MAP
 1

	)

381 
	#GR_UPDATE_UNMAP
 2

	)

382 
	#GR_UPDATE_MOVE
 3

	)

383 
	#GR_UPDATE_SIZE
 4

	)

384 
	#GR_UPDATE_UNMAPTEMP
 5

	)

385 
	#GR_UPDATE_ACTIVATE
 6

	)

386 
	#GR_UPDATE_DESTROY
 7

	)

387 
	#GR_UPDATE_REPARENT
 8

	)

398 
GR_EVENT_TYPE
 
ty≥
;

399 
GR_FUNC_NAME
 
«me
;

400 
GR_ERROR
 
code
;

401 
GR_ID
 
id
;

402 } 
	tGR_EVENT_ERROR
;

408 
GR_EVENT_TYPE
 
ty≥
;

409 
GR_WINDOW_ID
 
wid
;

410 
GR_WINDOW_ID
 
subwid
;

411 
GR_COORD
 
roŸx
;

412 
GR_COORD
 
roŸy
;

413 
GR_COORD
 
x
;

414 
GR_COORD
 
y
;

415 
GR_BUTTON
 
buâ⁄s
;

416 
GR_BUTTON
 
ch™gebuâ⁄s
;

417 
GR_KEYMOD
 
modifõrs
;

418 
GR_TIMEOUT
 
time
;

419 } 
	tGR_EVENT_BUTTON
;

425 
GR_EVENT_TYPE
 
ty≥
;

426 
GR_WINDOW_ID
 
wid
;

427 
GR_WINDOW_ID
 
subwid
;

428 
GR_COORD
 
roŸx
;

429 
GR_COORD
 
roŸy
;

430 
GR_COORD
 
x
;

431 
GR_COORD
 
y
;

432 
GR_BUTTON
 
buâ⁄s
;

433 
GR_KEYMOD
 
modifõrs
;

434 
GR_KEY
 
ch
;

435 
GR_SCANCODE
 
sˇncode
;

436 
GR_BOOL
 
hŸkey
;

437 } 
	tGR_EVENT_KEYSTROKE
;

443 
GR_EVENT_TYPE
 
ty≥
;

444 
GR_WINDOW_ID
 
wid
;

445 
GR_COORD
 
x
;

446 
GR_COORD
 
y
;

447 
GR_SIZE
 
width
;

448 
GR_SIZE
 
height
;

449 } 
	tGR_EVENT_EXPOSURE
;

458 
GR_EVENT_TYPE
 
ty≥
;

459 
GR_WINDOW_ID
 
wid
;

460 
GR_WINDOW_ID
 
Ÿhîid
;

461 } 
	tGR_EVENT_GENERAL
;

467 
GR_EVENT_TYPE
 
ty≥
;

468 
GR_WINDOW_ID
 
wid
;

469 
GR_WINDOW_ID
 
subwid
;

470 
GR_COORD
 
roŸx
;

471 
GR_COORD
 
roŸy
;

472 
GR_COORD
 
x
;

473 
GR_COORD
 
y
;

474 
GR_BUTTON
 
buâ⁄s
;

475 
GR_KEYMOD
 
modifõrs
;

476 } 
	tGR_EVENT_MOUSE
;

482 
GR_EVENT_TYPE
 
ty≥
;

483 
fd
;

484 } 
	tGR_EVENT_FDINPUT
;

490 
GR_EVENT_TYPE
 
ty≥
;

491 
GR_WINDOW_ID
 
wid
;

492 
GR_WINDOW_ID
 
subwid
;

493 
GR_COORD
 
x
;

494 
GR_COORD
 
y
;

495 
GR_SIZE
 
width
;

496 
GR_SIZE
 
height
;

497 
GR_UPDATE_TYPE
 
uty≥
;

498 } 
	tGR_EVENT_UPDATE
;

504 
GR_EVENT_TYPE
 
ty≥
;

505 
GR_BOOL
 
a˘iv©e
;

506 } 
	tGR_EVENT_SCREENSAVER
;

512 
GR_EVENT_TYPE
 
ty≥
;

513 
GR_WINDOW_ID
 
wid
;

514 
GR_WINDOW_ID
 
rid
;

515 
GR_SERIALNO
 
£rül
;

516 
GR_MIMETYPE
 
mimëy≥
;

517 } 
	tGR_EVENT_CLIENT_DATA_REQ
;

523 
GR_EVENT_TYPE
 
ty≥
;

524 
GR_WINDOW_ID
 
wid
;

525 
GR_WINDOW_ID
 
rid
;

526 
GR_SERIALNO
 
£rül
;

527 
Àn
;

528 
d©Æí
;

529 *
d©a
;

530 } 
	tGR_EVENT_CLIENT_DATA
;

536 
GR_EVENT_TYPE
 
ty≥
;

537 
GR_WINDOW_ID
 
√w_ow√r
;

538 } 
	tGR_EVENT_SELECTION_CHANGED
;

544 
GR_EVENT_TYPE
 
ty≥
;

545 
GR_WINDOW_ID
 
wid
;

546 
GR_TIMER_ID
 
tid
;

547 } 
	tGR_EVENT_TIMER
;

554 
GR_EVENT_TYPE
 
ty≥
;

555 
GR_EVENT_ERROR
 
îr‹
;

556 
GR_EVENT_GENERAL
 
gíîÆ
;

557 
GR_EVENT_BUTTON
 
buâ⁄
;

558 
GR_EVENT_KEYSTROKE
 
key°roke
;

559 
GR_EVENT_EXPOSURE
 
exposuª
;

560 
GR_EVENT_MOUSE
 
mou£
;

561 
GR_EVENT_FDINPUT
 
fdöput
;

562 
GR_EVENT_UPDATE
 
upd©e
;

563 
GR_EVENT_SCREENSAVER
 
s¸ìnßvî
;

564 
GR_EVENT_CLIENT_DATA_REQ
 
˛õ¡d©¨eq
;

565 
GR_EVENT_CLIENT_DATA
 
˛õ¡d©a
;

566 
GR_EVENT_SELECTION_CHANGED
 
£À˘i⁄ch™ged
;

567 
GR_EVENT_TIMER
 
timî
;

568 } 
	tGR_EVENT
;

570 (*
GR_FNCALLBACKEVENT
)(
	tGR_EVENT
 *);

574 
	#GR_BITMAP_SIZE
(
width
, 
height
Ë
	`MWIMAGE_SIZE
(width, height)

	)

575 
	#GR_BITMAPBITS
 
MWIMAGE_BITSPERIMAGE


	)

576 
	#GR_BITVALUE
(
n
Ë
	`MWIMAGE_BITVALUE
“)

	)

577 
	#GR_FIRSTBIT
 
MWIMAGE_FIRSTBIT


	)

578 
	#GR_NEXTBIT
(
m
Ë
	`MWIMAGE_NEXTBIT
(m)

	)

579 
	#GR_TESTBIT
(
m
Ë
	`MWIMAGE_TESTBIT
(m)

	)

580 
	#GR_SHIFTBIT
(
m
Ë
	`MWIMAGE_SHIFTBIT
(m)

	)

600 
	#GR_GRAB_HOTKEY_EXCLUSIVE
 0

	)

622 
	#GR_GRAB_HOTKEY
 1

	)

642 
	#GR_GRAB_EXCLUSIVE
 2

	)

657 
	#GR_GRAB_EXCLUSIVE_MOUSE
 3

	)

665 
	#GR_GRAB_MAX
 
GR_GRAB_EXCLUSIVE_MOUSE


	)

669 
	#GR_COLOR_DESKTOP
 0

	)

672 
	#GR_COLOR_ACTIVECAPTION
 1

	)

673 
	#GR_COLOR_ACTIVECAPTIONTEXT
 2

	)

674 
	#GR_COLOR_INACTIVECAPTION
 3

	)

675 
	#GR_COLOR_INACTIVECAPTIONTEXT
 4

	)

678 
	#GR_COLOR_WINDOWFRAME
 5

	)

679 
	#GR_COLOR_BTNSHADOW
 6

	)

680 
	#GR_COLOR_3DLIGHT
 7

	)

681 
	#GR_COLOR_BTNHIGHLIGHT
 8

	)

684 
	#GR_COLOR_APPWINDOW
 9

	)

685 
	#GR_COLOR_APPTEXT
 10

	)

688 
	#GR_COLOR_BTNFACE
 11

	)

689 
	#GR_COLOR_BTNTEXT
 12

	)

692 
	#GR_COLOR_WINDOW
 13

	)

693 
	#GR_COLOR_WINDOWTEXT
 14

	)

694 
	#GR_COLOR_HIGHLIGHT
 15

	)

695 
	#GR_COLOR_HIGHLIGHTTEXT
 16

	)

696 
	#GR_COLOR_GRAYTEXT
 17

	)

699 
	#GR_COLOR_MENUTEXT
 18

	)

700 
	#GR_COLOR_MENU
 19

	)

705 
	#GR_ERROR_STRINGS
 \

722 "BadÑegi⁄ id: %d\n",

	)

724 *
nxEº‹Såögs
[];

727 
GrFlush
();

728 
GrO≥n
();

729 
GrClo£
();

730 
GrDñay
(
GR_TIMEOUT
 
m£cs
);

731 
GrGëS¸ìnInfo
(
GR_SCREEN_INFO
 *
sù
);

732 
GR_COLOR
 
GrGëSysCﬁ‹
(
ödex
);

733 
GR_WINDOW_ID
 
GrNewWödow
(GR_WINDOW_ID 
∑ª¡
, 
GR_COORD
 
x
, GR_COORD 
y
,

734 
GR_SIZE
 
width
, GR_SIZE 
height
, GR_SIZE 
b‹dîsize
,

735 
GR_COLOR
 
background
, GR_COLOR 
b‹dîcﬁ‹
);

736 
GR_WINDOW_ID
 
GrNewPixm≠
(
GR_SIZE
 
width
, GR_SIZE 
height
, *
pixñs
);

737 
GR_WINDOW_ID
 
GrNewI≈utWödow
(GR_WINDOW_ID 
∑ª¡
, 
GR_COORD
 
x
, GR_COORD 
y
,

738 
GR_SIZE
 
width
, GR_SIZE 
height
);

739 
GrDe°royWödow
(
GR_WINDOW_ID
 
wid
);

740 
GR_GC_ID
 
GrNewGC
();

741 
GR_GC_ID
 
GrC›yGC
(GR_GC_ID 
gc
);

742 
GrGëGCInfo
(
GR_GC_ID
 
gc
, 
GR_GC_INFO
 *
gcù
);

743 
GrDe°royGC
(
GR_GC_ID
 
gc
);

744 
GR_REGION_ID
 
GrNewRegi⁄
();

745 
GR_REGION_ID
 
GrNewBôm≠Regi⁄
(
GR_BITMAP
 *
bôm≠
, 
GR_SIZE
 
width
,

746 
GR_SIZE
 
height
);

747 
GR_REGION_ID
 
GrNewPﬁyg⁄Regi⁄
(
mode
, 
GR_COUNT
 
cou¡
, 
GR_POINT
 *
poöts
);

748 
GrDe°royRegi⁄
(
GR_REGION_ID
 
ªgi⁄
);

749 
GrUni⁄Re˘WôhRegi⁄
(
GR_REGION_ID
 
ªgi⁄
, 
GR_RECT
 *
ª˘
);

750 
GrUni⁄Regi⁄
(
GR_REGION_ID
 
d°_rgn
, GR_REGION_ID 
§c_rgn1
,

751 
GR_REGION_ID
 
§c_rgn2
);

752 
GrI¡î£˘Regi⁄
(
GR_REGION_ID
 
d°_rgn
, GR_REGION_ID 
§c_rgn1
,

753 
GR_REGION_ID
 
§c_rgn2
);

754 
GrSubåa˘Regi⁄
(
GR_REGION_ID
 
d°_rgn
, GR_REGION_ID 
§c_rgn1
,

755 
GR_REGION_ID
 
§c_rgn2
);

756 
GrX‹Regi⁄
(
GR_REGION_ID
 
d°_rgn
, GR_REGION_ID 
§c_rgn1
,

757 
GR_REGION_ID
 
§c_rgn2
);

758 
GrSëGCRegi⁄
(
GR_GC_ID
 
gc
, 
GR_REGION_ID
 
ªgi⁄
);

759 
GrSëGCClùOrigö
(
GR_GC_ID
 
gc
, 
x
, 
y
);

760 
GR_BOOL
 
GrPoötInRegi⁄
(
GR_REGION_ID
 
ªgi⁄
, 
GR_COORD
 
x
, GR_COORD 
y
);

761 
GrRe˘InRegi⁄
(
GR_REGION_ID
 
ªgi⁄
, 
GR_COORD
 
x
, GR_COORD 
y
,

762 
GR_COORD
 
w
, GR_COORD 
h
);

763 
GR_BOOL
 
GrEm±yRegi⁄
(
GR_REGION_ID
 
ªgi⁄
);

764 
GR_BOOL
 
GrEquÆRegi⁄
(
GR_REGION_ID
 
rgn1
, GR_REGION_ID 
rgn2
);

765 
GrOff£tRegi⁄
(
GR_REGION_ID
 
ªgi⁄
, 
GR_SIZE
 
dx
, GR_SIZE 
dy
);

766 
GrGëRegi⁄Box
(
GR_REGION_ID
 
ªgi⁄
, 
GR_RECT
 *
ª˘
);

767 
GrM≠Wödow
(
GR_WINDOW_ID
 
wid
);

768 
GrUnm≠Wödow
(
GR_WINDOW_ID
 
wid
);

769 
GrRai£Wödow
(
GR_WINDOW_ID
 
wid
);

770 
GrLowîWödow
(
GR_WINDOW_ID
 
wid
);

771 
GrMoveWödow
(
GR_WINDOW_ID
 
wid
, 
GR_COORD
 
x
, GR_COORD 
y
);

772 
GrResizeWödow
(
GR_WINDOW_ID
 
wid
, 
GR_SIZE
 
width
, GR_SIZE 
height
);

773 
GrRï¨ítWödow
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
pwid
,

774 
GR_COORD
 
x
, GR_COORD 
y
);

775 
GrGëWödowInfo
(
GR_WINDOW_ID
 
wid
, 
GR_WINDOW_INFO
 *
öf›å
);

776 
GrSëWMPr›îtõs
(
GR_WINDOW_ID
 
wid
, 
GR_WM_PROPERTIES
 *
¥›s
);

777 
GrGëWMPr›îtõs
(
GR_WINDOW_ID
 
wid
, 
GR_WM_PROPERTIES
 *
¥›s
);

778 
GR_FONT_ID
 
GrCª©eF⁄t
(
GR_CHAR
 *
«me
, 
GR_COORD
 
height
,

779 
GR_LOGFONT
 *
∂ogf⁄t
);

780 
GR_FONT_ID
 
GrCª©eF⁄tFromBuf„r
(c⁄° *
buf„r
, 
Àngth
,

781 c⁄° *
f‹m©
, 
GR_COORD
 
height
);

782 
GR_FONT_ID
 
GrC›yF⁄t
(GR_FONT_ID 
f⁄tid
, 
GR_COORD
 
height
);

783 
GrGëF⁄tLi°
(
GR_FONTLIST
 ***
f⁄ts
, *
numf⁄ts
);

784 
GrFªeF⁄tLi°
(
GR_FONTLIST
 ***
f⁄ts
, 
numf⁄ts
);

785 
GrSëF⁄tSize
(
GR_FONT_ID
 
f⁄tid
, 
GR_COORD
 
size
);

786 
GrSëF⁄tRŸ©i⁄
(
GR_FONT_ID
 
f⁄tid
, 
ã¡hsdegªes
);

787 
GrSëF⁄tAâr
(
GR_FONT_ID
 
f⁄tid
, 
£tÊags
, 
˛rÊags
);

788 
GrDe°royF⁄t
(
GR_FONT_ID
 
f⁄tid
);

789 
GrGëF⁄tInfo
(
GR_FONT_ID
 
f⁄t
, 
GR_FONT_INFO
 *
fù
);

790 
GR_WINDOW_ID
 
GrGëFocus
();

791 
GrSëFocus
(
GR_WINDOW_ID
 
wid
);

792 
GrCÀ¨Aªa
(
GR_WINDOW_ID
 
wid
, 
GR_COORD
 
x
, GR_COORD 
y
,

793 
GR_SIZE
 
width
, GR_SIZE 
height
, 
GR_BOOL
 
expo£Êag
);

794 
GrSñe˘Evíts
(
GR_WINDOW_ID
 
wid
, 
GR_EVENT_MASK
 
evítmask
);

795 
GrGëNextEvít
(
GR_EVENT
 *
ï
);

796 
GrGëTy≥dEvít
(
GR_WINDOW_ID
 
wid
, 
GR_EVENT_MASK
 
mask
,

797 
GR_UPDATE_TYPE
 
upd©e
, 
GR_EVENT
 *
ï
, 
GR_BOOL
 
block
);

798 
GR_BOOL
 (*
	tGR_TYPED_EVENT_CALLBACK
)(
	tGR_WINDOW_ID
, 
	tGR_EVENT_MASK
,

799 
	tGR_UPDATE_TYPE
, 
	tGR_EVENT
 *, *);

800 
GrGëTy≥dEvítPªd
(
GR_WINDOW_ID
 
wid
, 
GR_EVENT_MASK
 
mask
,

801 
GR_UPDATE_TYPE
 
upd©e
, 
GR_EVENT
 * 
ï
, 
GR_BOOL
 
block
,

802 
GR_TYPED_EVENT_CALLBACK
 
m©ch‚
, *
¨g
);

803 
GrGëNextEvítTimeout
(
GR_EVENT
 *
ï
, 
GR_TIMEOUT
 
timeout
);

804 
GrCheckNextEvít
(
GR_EVENT
 *
ï
);

805 
GrPìkEvít
(
GR_EVENT
 *
ï
);

806 
GrPìkWaôEvít
(
GR_EVENT
 *
ï
);

807 
GrLöe
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x1
, GR_COORD 
y1
,

808 
GR_COORD
 
x2
, GR_COORD 
y2
);

809 
GrPoöt
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
);

810 
GrPoöts
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COUNT
 
cou¡
,

811 
GR_POINT
 *
poöâabÀ
);

812 
GrRe˘
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

813 
GR_SIZE
 
width
, GR_SIZE 
height
);

814 
GrFûlRe˘
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

815 
GR_SIZE
 
width
, GR_SIZE 
height
);

816 
GrPﬁy
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COUNT
 
cou¡
,

817 
GR_POINT
 *
poöâabÀ
);

818 
GrFûlPﬁy
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COUNT
 
cou¡
,

819 
GR_POINT
 *
poöâabÀ
);

820 
GrEŒù£
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

821 
GR_SIZE
 
rx
, GR_SIZE 
ry
);

822 
GrFûlEŒù£
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
,

823 
GR_COORD
 
y
, 
GR_SIZE
 
rx
, GR_SIZE 
ry
);

824 
GrArc
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

825 
GR_SIZE
 
rx
, GR_SIZE 
ry
, 
GR_COORD
 
ax
, GR_COORD 
ay
,

826 
GR_COORD
 
bx
, GR_COORD 
by
, 
ty≥
);

827 
GrArcAngÀ
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

828 
GR_SIZE
 
rx
, GR_SIZE 
ry
, 
GR_COORD
 
™gÀ1
,

829 
GR_COORD
 
™gÀ2
, 
ty≥
);

830 
GrSëGCF‹eground
(
GR_GC_ID
 
gc
, 
GR_COLOR
 
f‹eground
);

831 
GrSëGCF‹egroundPixñVÆ
(
GR_GC_ID
 
gc
, 
GR_PIXELVAL
 
f‹eground
);

832 
GrSëGCBackground
(
GR_GC_ID
 
gc
, 
GR_COLOR
 
background
);

833 
GrSëGCBackgroundPixñVÆ
(
GR_GC_ID
 
gc
, 
GR_PIXELVAL
 
background
);

834 
GrSëGCU£Background
(
GR_GC_ID
 
gc
, 
GR_BOOL
 
Êag
);

835 
GrSëGCMode
(
GR_GC_ID
 
gc
, 
mode
);

837 
GrSëGCLöeAâribuãs
(
GR_GC_ID
, );

838 
GrSëGCDash
(
GR_GC_ID
, *, );

839 
GrSëGCFûlMode
(
GR_GC_ID
, );

840 
GrSëGCStù∂e
(
GR_GC_ID
, 
GR_BITMAP
 *, 
GR_SIZE
, GR_SIZE);

841 
GrSëGCTûe
(
GR_GC_ID
, 
GR_WINDOW_ID
, 
GR_SIZE
, GR_SIZE);

842 
GrSëGCTSOff£t
(
GR_GC_ID
, 
GR_COORD
, GR_COORD);

844 
GrSëGCGøphicsExposuª
(
GR_GC_ID
 
gc
, 
GR_BOOL
 
exposuª
);

845 
GrSëGCF⁄t
(
GR_GC_ID
 
gc
, 
GR_FONT_ID
 
f⁄t
);

846 
GrGëGCTextSize
(
GR_GC_ID
 
gc
, *
°r
, 
cou¡
,

847 
GR_TEXTFLAGS
 
Êags
, 
GR_SIZE
 *
ªtwidth
,

848 
GR_SIZE
 *
ªtheight
,GR_SIZE *
ªtba£
);

849 
GrRódAªa
(
GR_DRAW_ID
 
id
, 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
width
,

850 
GR_SIZE
 
height
, 
GR_PIXELVAL
 *
pixñs
);

851 
GrAªa
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

852 
GR_SIZE
 
width
,GR_SIZE 
height
,*
pixñs
,
pixty≥
);

853 
GrC›yAªa
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

854 
GR_SIZE
 
width
, GR_SIZE 
height
, 
GR_DRAW_ID
 
§cid
,

855 
GR_COORD
 
§cx
, GR_COORD 
§cy
, 
›
);

856 
GrSåëchAªa
(
GR_DRAW_ID
 
d°id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
dx1
,

857 
GR_COORD
 
dy1
, GR_COORD 
dx2
, GR_COORD 
dy2
,

858 
GR_DRAW_ID
 
§cid
, 
GR_COORD
 
sx1
, GR_COORD 
sy1
,

859 
GR_COORD
 
sx2
, GR_COORD 
sy2
, 
›
);

860 
GrBôm≠
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

861 
GR_SIZE
 
width
, GR_SIZE 
height
, 
GR_BITMAP
 *
imagebôs
);

862 
GrDøwImageBôs
(
GR_DRAW_ID
 
id
,
GR_GC_ID
 
gc
,
GR_COORD
 
x
,GR_COORD 
y
,

863 
GR_IMAGE_HDR
 *
pimage
);

864 
GrDøwImageFromFûe
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
,

865 
GR_COORD
 
y
, 
GR_SIZE
 
width
, GR_SIZE 
height
,

866 *
∑th
, 
Êags
);

867 
GR_IMAGE_ID
 
GrLﬂdImageFromFûe
(*
∑th
, 
Êags
);

868 
GrDøwImageFromBuf„r
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
,

869 
GR_COORD
 
y
, 
GR_SIZE
 
width
, GR_SIZE 
height
,

870 *
buf„r
, 
size
, 
Êags
);

871 
GR_IMAGE_ID
 
GrLﬂdImageFromBuf„r
(*
buf„r
, 
size
, 
Êags
);

872 
GrDøwImageToFô
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
,

873 
GR_COORD
 
y
, 
GR_SIZE
 
width
, GR_SIZE 
height
,

874 
GR_IMAGE_ID
 
imageid
);

875 
GrFªeImage
(
GR_IMAGE_ID
 
id
);

876 
GrGëImageInfo
(
GR_IMAGE_ID
 
id
, 
GR_IMAGE_INFO
 *
iù
);

877 
GrText
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

878 *
°r
, 
GR_COUNT
 
cou¡
, 
GR_TEXTFLAGS
 
Êags
);

879 
GR_CURSOR_ID
 
GrNewCurs‹
(
GR_SIZE
 
width
, GR_SIZE 
height
, 
GR_COORD
 
hŸx
,

880 
GR_COORD
 
hŸy
, 
GR_COLOR
 
f‹eground
, GR_COLOR 
background
,

881 
GR_BITMAP
 *
fgbôm≠
, GR_BITMAP *
bgbôm≠
);

882 
GrDe°royCurs‹
(
GR_CURSOR_ID
 
cid
);

883 
GrSëWödowCurs‹
(
GR_WINDOW_ID
 
wid
, 
GR_CURSOR_ID
 
cid
);

884 
GrSëWödowRegi⁄
(
GR_WINDOW_ID
 
wid
, 
GR_REGION_ID
 
rid
, 
ty≥
);

885 
GrMoveCurs‹
(
GR_COORD
 
x
, GR_COORD 
y
);

886 
GrGëSy°emPÆëã
(
GR_PALETTE
 *
∑l
);

887 
GrSëSy°emPÆëã
(
GR_COUNT
 
fú°
, 
GR_PALETTE
 *
∑l
);

888 
GrFödCﬁ‹
(
GR_COLOR
 
c
, 
GR_PIXELVAL
 *
ªçixñ
);

889 
GrReqShmCmds
(
shmsize
);

890 
GrInje˘PoöãrEvít
(
MWCOORD
 
x
, MWCOORD 
y
,

891 
buâ⁄
, 
visibÀ
);

892 
GrInje˘KeybﬂrdEvít
(
GR_WINDOW_ID
 
wid
, 
GR_KEY
 
keyvÆue
,

893 
GR_KEYMOD
 
modifõrs
, 
GR_SCANCODE
 
sˇncode
,

894 
GR_BOOL
 
¥es£d
);

895 
GrClo£Wödow
(
GR_WINDOW_ID
 
wid
);

896 
GrKûlWödow
(
GR_WINDOW_ID
 
wid
);

897 
GrSëS¸ìnSavîTimeout
(
GR_TIMEOUT
 
timeout
);

898 
GrSëSñe˘i⁄Ow√r
(
GR_WINDOW_ID
 
wid
, 
GR_CHAR
 *
ty≥li°
);

899 
GR_WINDOW_ID
 
GrGëSñe˘i⁄Ow√r
(
GR_CHAR
 **
ty≥li°
);

900 
GrReque°Clõ¡D©a
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
rid
,

901 
GR_SERIALNO
 
£rül
, 
GR_MIMETYPE
 
mimëy≥
);

902 
GrSídClõ¡D©a
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
did
,

903 
GR_SERIALNO
 
£rül
, 
GR_LENGTH
 
Àn
, GR_LENGTH 
thi¶í
,

904 *
d©a
);

905 
GrBñl
();

906 
GrSëBackgroundPixm≠
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
pixm≠
,

907 
Êags
);

908 
GrQuîyPoöãr
(
GR_WINDOW_ID
 *
mwö
, 
GR_COORD
 *
x
, GR_COORD *
y
,

909 
GR_BUTTON
 *
bmask
);

910 
GrQuîyTªe
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID *
∑ª¡id
,

911 
GR_WINDOW_ID
 **
chûdªn
, 
GR_COUNT
 *
nchûdªn
);

912 
GR_BOOL
 
GrGøbKey
(
GR_WINDOW_ID
 
wid
, 
GR_KEY
 
key
, 
ty≥
);

913 
GrUngøbKey
(
GR_WINDOW_ID
 
wid
, 
GR_KEY
 
key
);

915 
GR_TIMER_ID
 
GrCª©eTimî
(
GR_WINDOW_ID
 
wid
, 
GR_TIMEOUT
 
≥riod
);

916 
GrDe°royTimî
(
GR_TIMER_ID
 
tid
);

917 
GrSëP‹åaôMode
(
p‹åaômode
);

919 
GrRegi°îI≈ut
(
fd
);

920 
GrUƒegi°îI≈ut
(
fd
);

921 
GrMaöLo›
(
GR_FNCALLBACKEVENT
 
‚cb
);

922 
GR_FNCALLBACKEVENT
 
GrSëEº‹H™dÀr
(GR_FNCALLBACKEVENT 
‚cb
);

923 
GrDeÁu…Eº‹H™dÀr
(
GR_EVENT
 *
ï
);

926 
GrPª∑ªSñe˘
(*
maxfd
,*
rfd£t
);

927 
GrSîvi˚Sñe˘
(*
rfd£t
, 
GR_FNCALLBACKEVENT
 
‚cb
);

930 
GrQueueLígth
();

932 
GrSëTønsf‹m
(
GR_TRANSFORM
 *);

935 
GrCÆcTønsf‹m
(
GR_CAL_DATA
 *, 
GR_TRANSFORM
 *);

936 
GrLﬂdTønsf‹mD©a
(*
fûíame
, 
GR_TRANSFORM
 *);

937 
GrSaveTønsf‹mD©a
(
GR_TRANSFORM
 *, *
fûíame
);

940 
GR_WINDOW_ID
 
GrNewWödowEx
(
GR_WM_PROPS
 
¥›s
, 
GR_CHAR
 *
tôÀ
,

941 
GR_WINDOW_ID
 
∑ª¡
, 
GR_COORD
 
x
, GR_COORD 
y
,

942 
GR_SIZE
 
width
, GR_SIZE 
height
, 
GR_COLOR
 
background
);

943 
GrDøwLöes
(
GR_DRAW_ID
 
w
, 
GR_GC_ID
 
gc
, 
GR_POINT
 *
poöts
,

944 
GR_COUNT
 
cou¡
);

945 
GR_BITMAP
 * 
GrNewBôm≠FromD©a
(
GR_SIZE
 
width
, GR_SIZE 
height
, GR_SIZE 
bôs_width
,

946 
GR_SIZE
 
bôs_height
, *
bôs
, 
Êags
);

947 
GR_WINDOW_ID
 
GrNewPixm≠FromD©a
(
GR_SIZE
 
width
, GR_SIZE 
height
,

948 
GR_COLOR
 
f‹eground
, GR_COLOR 
background
, * 
bôs
,

949 
Êags
);

950 
GR_BITMAP
 * 
GrNewBôm≠FromPixm≠
(
GR_WINDOW_ID
 
pixm≠
, 
x
, 
y
, 
GR_SIZE
 
width
,

951 
GR_SIZE
 
height
);

952 
GR_BITMAP
 * 
GrNewBôm≠FromPixm≠
(
GR_WINDOW_ID
 
pixm≠
, 
x
, 
y
,

953 
GR_SIZE
 
width
, GR_SIZE 
height
);

954 
GR_REGION_ID
 
GrNewRegi⁄FromPixm≠
(
GR_WINDOW_ID
 
§c
, 
MWCOORD
 
x
, MWCOORD 
y
,

955 
GR_SIZE
 
width
, GR_SIZE 
height
);

958 * 
GrO≥nClõ¡Fømebuf„r
();

959 
GrClo£Clõ¡Fømebuf„r
();

960 
GrGëWödowFBInfo
(
GR_WINDOW_ID
 
wid
, 
GR_WINDOW_FB_INFO
 *
fböfo
);

963 
GR_CURSOR_ID
 
GrSëCurs‹
(
GR_WINDOW_ID
 
wid
, 
GR_SIZE
 
width
, GR_SIZE 
height
,

964 
GR_COORD
 
hŸx
, GR_COORD 
hŸy
, 
GR_COLOR
 
f‹eground
,

965 
GR_COLOR
 
background
, 
GR_BITMAP
 *
fbbôm≠
,

966 
GR_BITMAP
 *
bgbôm≠
);

967 
	#GrSëB‹dîCﬁ‹
 
GrSëWödowB‹dîCﬁ‹


	)

968 
	#GrCÀ¨Wödow
(
wid
,
expo£Êag
Ë
	`GrCÀ¨Aªa
(wid,0,0,0,0,expo£ÊagË

	)

971 
	#GrSëWödowBackgroundCﬁ‹
(
wid
,
cﬁ‹
) \

972 { 
GR_WM_PROPERTIES
 
¥›s
; \

973 
¥›s
.
Êags
 = 
GR_WM_FLAGS_BACKGROUND
; \

974 
¥›s
.
background
 = 
cﬁ‹
; \

975 
	`GrSëWMPr›îtõs
(
wid
, &
¥›s
); \

976 }

	)

977 
	#GrSëWödowB‹dîSize
(
wid
,
width
) \

978 { 
GR_WM_PROPERTIES
 
¥›s
; \

979 
¥›s
.
Êags
 = 
GR_WM_FLAGS_BORDERSIZE
; \

980 
¥›s
.
b‹dîsize
 = 
width
; \

981 
	`GrSëWMPr›îtõs
(
wid
, &
¥›s
); \

982 }

	)

983 
	#GrSëWödowB‹dîCﬁ‹
(
wid
,
cﬁ‹
) \

984 { 
GR_WM_PROPERTIES
 
¥›s
; \

985 
¥›s
.
Êags
 = 
GR_WM_FLAGS_BORDERCOLOR
; \

986 
¥›s
.
b‹dîcﬁ‹
 = 
cﬁ‹
; \

987 
	`GrSëWMPr›îtõs
(
wid
, &
¥›s
); \

988 }

	)

989 
	#GrSëWödowTôÀ
(
wid
,
«me
) \

990 { 
GR_WM_PROPERTIES
 
¥›s
; \

991 
¥›s
.
Êags
 = 
GR_WM_FLAGS_TITLE
; \

992 
¥›s
.
tôÀ
 = (
GR_CHAR
 *)
«me
; \

993 
	`GrSëWMPr›îtõs
(
wid
, &
¥›s
); \

994 }

	)

996 #ifde‡
__˝lu•lus


1001 #i‡
__πems__


1002 
	#maö
 
πems_maö


	)

1006 
evít_li°
 
	tEVENT_LIST
;

1007 
	sevít_li°
 {

1008 
EVENT_LIST
 * 
	g√xt
;

1009 
GR_EVENT
 
	gevít
;

1014 *
	gbuÂå
;

1015 *
	gbufmax
;

1016 *
	gbuf„r
;

1017 } 
	tREQBUF
;

1019 #ifde‡
__ECOS


1020 
	~<sys/£À˘.h
>

1021 
	~<cyg/kî√l/k≠i.h
>

1028 
	g_nxSockë
;

1029 
MWMUTEX
 
	g_nxGlobÆLock
;

1030 
	g_°‹edevít
;

1031 
GR_EVENT
 
	g_°‹edevít_d©a
;

1032 
	g_ªgfdmax
;

1033 
fd_£t
 
	g_ªgfd£t
;

1034 
GR_FNCALLBACKEVENT
 
	g_GrEº‹Func
;

1035 
REQBUF
 
	g_ªqbuf
;

1036 
EVENT_LIST
 *
	g_evli°
;

1037 } 
	tecos_«nox_˛õ¡_d©a
;

1039 
ecos_«nox_˛õ¡_d©a_ödex
;

1041 
	#ACCESS_PER_THREAD_DATA
() \

1042 
ecos_«nox_˛õ¡_d©a
 *
d©a
 = (ecos_nanox_client_data*) \

1043 
	`cyg_thªad_gë_d©a
((
cyg_ucou¡32
)
ecos_«nox_˛õ¡_d©a_ödex
);

	)

1045 
	#INIT_PER_THREAD_DATA
() \

1047 
ecos_«nox_˛õ¡_d©a
 *
d±r
 = 
	`mÆloc
((ecos_nanox_client_data)); \

1048 
ecos_«nox_˛õ¡_d©a_ödex
 = 
d©a
; \

1049 
d±r
->
_nxSockë
 = -1; \

1050 
d±r
->
nxGlobÆLock
 = 0;

	)

1051 
	gd±r
->
	g_°‹edevít
 = 0; \

1052 
	gd±r
->
	g_ªgfdmax
 = -1; \

1053 
FD_ZERO
(&
d±r
->
_ªgfd£t
); \

1054 
	gd±r
->
	g_GrEº‹Func
 = 
GrDeÁu…Eº‹H™dÀr
; \

1055 
	gd±r
->
	g_ªqbuf
.
	gbuÂå
 = 
NULL
; \

1056 
	gd±r
->
	g_ªqbuf
.
	gbufmax
 = 
NULL
; \

1057 
	gd±r
->
	g_ªqbuf
.
	gbuf„r
 = 
NULL
; \

1058 
	gd±r
->
	g_evli°
 = 
NULL
; \

1059 
cyg_thªad_£t_d©a
(
ecos_«nox_˛õ¡_d©a_ödex
,(
CYG_ADDRWORD
)
d±r
); \

1062 
	#nxSockë
 (
d©a
->
_nxSockë
)

	)

1063 
	#nxGlobÆLock
 (
d©a
->
_nxGlobÆLock
)

	)

1064 
	#°‹edevít
 (
d©a
->
_°‹edevít
)

	)

1065 
	#°‹edevít_d©a
 (
d©a
->
_°‹edevít_d©a
)

	)

1066 
	#ªgfdmax
 (
d©a
->
_ªgfdmax
)

	)

1067 
	#ªgfd£t
 (
d©a
->
_ªgfd£t
)

	)

1068 
	#Eº‹Func
 (
d©a
->
_GrEº‹Func
)

	)

1069 
	#ªqbuf
 (
d©a
->
_ªqbuf
)

	)

1070 
	#evli°
 (
d©a
->
_evli°
)

	)

1073 
	#ACCESS_PER_THREAD_DATA
()

	)

	@include/nxcolors.h

1 #i‚de‡
NXCOLORS_H


2 
	#NXCOLORS_H


	)

10 
	~"mwty≥s.h
"

12 
	#GR_COLOR_SNOW
 
	`MWRGB
(255,250,250)

	)

13 
	#GR_COLOR_GHOSTWHITE
 
	`MWRGB
(248,248,255)

	)

14 
	#GR_COLOR_WHITESMOKE
 
	`MWRGB
(245,245,245)

	)

15 
	#GR_COLOR_GAINSBORO
 
	`MWRGB
(220,220,220)

	)

16 
	#GR_COLOR_FLORALWHITE
 
	`MWRGB
(255,250,240)

	)

17 
	#GR_COLOR_OLDLACE
 
	`MWRGB
(253,245,230)

	)

18 
	#GR_COLOR_LINEN
 
	`MWRGB
(250,240,230)

	)

19 
	#GR_COLOR_ANTIQUEWHITE
 
	`MWRGB
(250,235,215)

	)

20 
	#GR_COLOR_PAPAYAWHIP
 
	`MWRGB
(255,239,213)

	)

21 
	#GR_COLOR_BLANCHEDALMOND
 
	`MWRGB
(255,235,205)

	)

22 
	#GR_COLOR_BISQUE
 
	`MWRGB
(255,228,196)

	)

23 
	#GR_COLOR_PEACHPUFF
 
	`MWRGB
(255,218,185)

	)

24 
	#GR_COLOR_NAVAJOWHITE
 
	`MWRGB
(255,222,173)

	)

25 
	#GR_COLOR_MOCCASIN
 
	`MWRGB
(255,228,181)

	)

26 
	#GR_COLOR_CORNSILK
 
	`MWRGB
(255,248,220)

	)

27 
	#GR_COLOR_IVORY
 
	`MWRGB
(255,255,240)

	)

28 
	#GR_COLOR_LEMONCHIFFON
 
	`MWRGB
(255,250,205)

	)

29 
	#GR_COLOR_SEASHELL
 
	`MWRGB
(255,245,238)

	)

30 
	#GR_COLOR_HONEYDEW
 
	`MWRGB
(240,255,240)

	)

31 
	#GR_COLOR_MINTCREAM
 
	`MWRGB
(245,255,250)

	)

32 
	#GR_COLOR_AZURE
 
	`MWRGB
(240,255,255)

	)

33 
	#GR_COLOR_ALICEBLUE
 
	`MWRGB
(240,248,255)

	)

34 
	#GR_COLOR_LAVENDER
 
	`MWRGB
(230,230,250)

	)

35 
	#GR_COLOR_LAVENDERBLUSH
 
	`MWRGB
(255,240,245)

	)

36 
	#GR_COLOR_MISTYROSE
 
	`MWRGB
(255,228,225)

	)

37 
	#GR_COLOR_WHITE
 
	`MWRGB
(255,255,255)

	)

38 
	#GR_COLOR_BLACK
 
	`MWRGB
(0,0,0)

	)

39 
	#GR_COLOR_DARKSLATEGRAY
 
	`MWRGB
(47,79,79)

	)

40 
	#GR_COLOR_DARKSLATEGREY
 
	`MWRGB
(47,79,79)

	)

41 
	#GR_COLOR_DIMGRAY
 
	`MWRGB
(105,105,105)

	)

42 
	#GR_COLOR_DIMGREY
 
	`MWRGB
(105,105,105)

	)

43 
	#GR_COLOR_SLATEGRAY
 
	`MWRGB
(112,128,144)

	)

44 
	#GR_COLOR_SLATEGREY
 
	`MWRGB
(112,128,144)

	)

45 
	#GR_COLOR_LIGHTSLATEGRAY
 
	`MWRGB
(119,136,153)

	)

46 
	#GR_COLOR_LIGHTSLATEGREY
 
	`MWRGB
(119,136,153)

	)

47 
	#GR_COLOR_GRAY
 
	`MWRGB
(190,190,190)

	)

48 
	#GR_COLOR_GREY
 
	`MWRGB
(190,190,190)

	)

49 
	#GR_COLOR_LIGHTGREY
 
	`MWRGB
(211,211,211)

	)

50 
	#GR_COLOR_LIGHTGRAY
 
	`MWRGB
(211,211,211)

	)

51 
	#GR_COLOR_MIDNIGHTBLUE
 
	`MWRGB
(25,25,112)

	)

52 
	#GR_COLOR_NAVY
 
	`MWRGB
(0,0,128)

	)

53 
	#GR_COLOR_NAVYBLUE
 
	`MWRGB
(0,0,128)

	)

54 
	#GR_COLOR_CORNFLOWERBLUE
 
	`MWRGB
(100,149,237)

	)

55 
	#GR_COLOR_DARKSLATEBLUE
 
	`MWRGB
(72,61,139)

	)

56 
	#GR_COLOR_SLATEBLUE
 
	`MWRGB
(106,90,205)

	)

57 
	#GR_COLOR_MEDIUMSLATEBLUE
 
	`MWRGB
(123,104,238)

	)

58 
	#GR_COLOR_LIGHTSLATEBLUE
 
	`MWRGB
(132,112,255)

	)

59 
	#GR_COLOR_MEDIUMBLUE
 
	`MWRGB
(0,0,205)

	)

60 
	#GR_COLOR_ROYALBLUE
 
	`MWRGB
(65,105,225)

	)

61 
	#GR_COLOR_BLUE
 
	`MWRGB
(0,0,255)

	)

62 
	#GR_COLOR_DODGERBLUE
 
	`MWRGB
(30,144,255)

	)

63 
	#GR_COLOR_DEEPSKYBLUE
 
	`MWRGB
(0,191,255)

	)

64 
	#GR_COLOR_SKYBLUE
 
	`MWRGB
(135,206,235)

	)

65 
	#GR_COLOR_LIGHTSKYBLUE
 
	`MWRGB
(135,206,250)

	)

66 
	#GR_COLOR_STEELBLUE
 
	`MWRGB
(70,130,180)

	)

67 
	#GR_COLOR_LIGHTSTEELBLUE
 
	`MWRGB
(176,196,222)

	)

68 
	#GR_COLOR_LIGHTBLUE
 
	`MWRGB
(173,216,230)

	)

69 
	#GR_COLOR_POWDERBLUE
 
	`MWRGB
(176,224,230)

	)

70 
	#GR_COLOR_PALETURQUOISE
 
	`MWRGB
(175,238,238)

	)

71 
	#GR_COLOR_DARKTURQUOISE
 
	`MWRGB
(0,206,209)

	)

72 
	#GR_COLOR_MEDIUMTURQUOISE
 
	`MWRGB
(72,209,204)

	)

73 
	#GR_COLOR_TURQUOISE
 
	`MWRGB
(64,224,208)

	)

74 
	#GR_COLOR_CYAN
 
	`MWRGB
(0,255,255)

	)

75 
	#GR_COLOR_LIGHTCYAN
 
	`MWRGB
(224,255,255)

	)

76 
	#GR_COLOR_CADETBLUE
 
	`MWRGB
(95,158,160)

	)

77 
	#GR_COLOR_MEDIUMAQUAMARINE
 
	`MWRGB
(102,205,170)

	)

78 
	#GR_COLOR_AQUAMARINE
 
	`MWRGB
(127,255,212)

	)

79 
	#GR_COLOR_DARKGREEN
 
	`MWRGB
(0,100,0)

	)

80 
	#GR_COLOR_DARKOLIVEGREEN
 
	`MWRGB
(85,107,47)

	)

81 
	#GR_COLOR_DARKSEAGREEN
 
	`MWRGB
(143,188,143)

	)

82 
	#GR_COLOR_SEAGREEN
 
	`MWRGB
(46,139,87)

	)

83 
	#GR_COLOR_MEDIUMSEAGREEN
 
	`MWRGB
(60,179,113)

	)

84 
	#GR_COLOR_LIGHTSEAGREEN
 
	`MWRGB
(32,178,170)

	)

85 
	#GR_COLOR_PALEGREEN
 
	`MWRGB
(152,251,152)

	)

86 
	#GR_COLOR_SPRINGGREEN
 
	`MWRGB
(0,255,127)

	)

87 
	#GR_COLOR_LAWNGREEN
 
	`MWRGB
(124,252,0)

	)

88 
	#GR_COLOR_GREEN
 
	`MWRGB
(0,255,0)

	)

89 
	#GR_COLOR_CHARTREUSE
 
	`MWRGB
(127,255,0)

	)

90 
	#GR_COLOR_MEDIUMSPRINGGREEN
 
	`MWRGB
(0,250,154)

	)

91 
	#GR_COLOR_GREENYELLOW
 
	`MWRGB
(173,255,47)

	)

92 
	#GR_COLOR_LIMEGREEN
 
	`MWRGB
(50,205,50)

	)

93 
	#GR_COLOR_YELLOWGREEN
 
	`MWRGB
(154,205,50)

	)

94 
	#GR_COLOR_FORESTGREEN
 
	`MWRGB
(34,139,34)

	)

95 
	#GR_COLOR_OLIVEDRAB
 
	`MWRGB
(107,142,35)

	)

96 
	#GR_COLOR_DARKKHAKI
 
	`MWRGB
(189,183,107)

	)

97 
	#GR_COLOR_KHAKI
 
	`MWRGB
(240,230,140)

	)

98 
	#GR_COLOR_PALEGOLDENROD
 
	`MWRGB
(238,232,170)

	)

99 
	#GR_COLOR_LIGHTGOLDENRODYELLOW
 
	`MWRGB
(250,250,210)

	)

100 
	#GR_COLOR_LIGHTYELLOW
 
	`MWRGB
(255,255,224)

	)

101 
	#GR_COLOR_YELLOW
 
	`MWRGB
(255,255,0)

	)

102 
	#GR_COLOR_GOLD
 
	`MWRGB
(255,215,0)

	)

103 
	#GR_COLOR_LIGHTGOLDENROD
 
	`MWRGB
(238,221,130)

	)

104 
	#GR_COLOR_GOLDENROD
 
	`MWRGB
(218,165,32)

	)

105 
	#GR_COLOR_DARKGOLDENROD
 
	`MWRGB
(184,134,11)

	)

106 
	#GR_COLOR_ROSYBROWN
 
	`MWRGB
(188,143,143)

	)

107 
	#GR_COLOR_INDIANRED
 
	`MWRGB
(205,92,92)

	)

108 
	#GR_COLOR_SADDLEBROWN
 
	`MWRGB
(139,69,19)

	)

109 
	#GR_COLOR_SIENNA
 
	`MWRGB
(160,82,45)

	)

110 
	#GR_COLOR_PERU
 
	`MWRGB
(205,133,63)

	)

111 
	#GR_COLOR_BURLYWOOD
 
	`MWRGB
(222,184,135)

	)

112 
	#GR_COLOR_BEIGE
 
	`MWRGB
(245,245,220)

	)

113 
	#GR_COLOR_WHEAT
 
	`MWRGB
(245,222,179)

	)

114 
	#GR_COLOR_SANDYBROWN
 
	`MWRGB
(244,164,96)

	)

115 
	#GR_COLOR_TAN
 
	`MWRGB
(210,180,140)

	)

116 
	#GR_COLOR_CHOCOLATE
 
	`MWRGB
(210,105,30)

	)

117 
	#GR_COLOR_FIREBRICK
 
	`MWRGB
(178,34,34)

	)

118 
	#GR_COLOR_BROWN
 
	`MWRGB
(165,42,42)

	)

119 
	#GR_COLOR_DARKSALMON
 
	`MWRGB
(233,150,122)

	)

120 
	#GR_COLOR_SALMON
 
	`MWRGB
(250,128,114)

	)

121 
	#GR_COLOR_LIGHTSALMON
 
	`MWRGB
(255,160,122)

	)

122 
	#GR_COLOR_ORANGE
 
	`MWRGB
(255,165,0)

	)

123 
	#GR_COLOR_DARKORANGE
 
	`MWRGB
(255,140,0)

	)

124 
	#GR_COLOR_CORAL
 
	`MWRGB
(255,127,80)

	)

125 
	#GR_COLOR_LIGHTCORAL
 
	`MWRGB
(240,128,128)

	)

126 
	#GR_COLOR_TOMATO
 
	`MWRGB
(255,99,71)

	)

127 
	#GR_COLOR_ORANGERED
 
	`MWRGB
(255,69,0)

	)

128 
	#GR_COLOR_RED
 
	`MWRGB
(255,0,0)

	)

129 
	#GR_COLOR_HOTPINK
 
	`MWRGB
(255,105,180)

	)

130 
	#GR_COLOR_DEEPPINK
 
	`MWRGB
(255,20,147)

	)

131 
	#GR_COLOR_PINK
 
	`MWRGB
(255,192,203)

	)

132 
	#GR_COLOR_LIGHTPINK
 
	`MWRGB
(255,182,193)

	)

133 
	#GR_COLOR_PALEVIOLETRED
 
	`MWRGB
(219,112,147)

	)

134 
	#GR_COLOR_MAROON
 
	`MWRGB
(176,48,96)

	)

135 
	#GR_COLOR_MEDIUMVIOLETRED
 
	`MWRGB
(199,21,133)

	)

136 
	#GR_COLOR_VIOLETRED
 
	`MWRGB
(208,32,144)

	)

137 
	#GR_COLOR_MAGENTA
 
	`MWRGB
(255,0,255)

	)

138 
	#GR_COLOR_VIOLET
 
	`MWRGB
(238,130,238)

	)

139 
	#GR_COLOR_PLUM
 
	`MWRGB
(221,160,221)

	)

140 
	#GR_COLOR_ORCHID
 
	`MWRGB
(218,112,214)

	)

141 
	#GR_COLOR_MEDIUMORCHID
 
	`MWRGB
(186,85,211)

	)

142 
	#GR_COLOR_DARKORCHID
 
	`MWRGB
(153,50,204)

	)

143 
	#GR_COLOR_DARKVIOLET
 
	`MWRGB
(148,0,211)

	)

144 
	#GR_COLOR_BLUEVIOLET
 
	`MWRGB
(138,43,226)

	)

145 
	#GR_COLOR_PURPLE
 
	`MWRGB
(160,32,240)

	)

146 
	#GR_COLOR_MEDIUMPURPLE
 
	`MWRGB
(147,112,219)

	)

147 
	#GR_COLOR_THISTLE
 
	`MWRGB
(216,191,216)

	)

148 
	#GR_COLOR_SNOW1
 
	`MWRGB
(255,250,250)

	)

149 
	#GR_COLOR_SNOW2
 
	`MWRGB
(238,233,233)

	)

150 
	#GR_COLOR_SNOW3
 
	`MWRGB
(205,201,201)

	)

151 
	#GR_COLOR_SNOW4
 
	`MWRGB
(139,137,137)

	)

152 
	#GR_COLOR_SEASHELL1
 
	`MWRGB
(255,245,238)

	)

153 
	#GR_COLOR_SEASHELL2
 
	`MWRGB
(238,229,222)

	)

154 
	#GR_COLOR_SEASHELL3
 
	`MWRGB
(205,197,191)

	)

155 
	#GR_COLOR_SEASHELL4
 
	`MWRGB
(139,134,130)

	)

156 
	#GR_COLOR_ANTIQUEWHITE1
 
	`MWRGB
(255,239,219)

	)

157 
	#GR_COLOR_ANTIQUEWHITE2
 
	`MWRGB
(238,223,204)

	)

158 
	#GR_COLOR_ANTIQUEWHITE3
 
	`MWRGB
(205,192,176)

	)

159 
	#GR_COLOR_ANTIQUEWHITE4
 
	`MWRGB
(139,131,120)

	)

160 
	#GR_COLOR_BISQUE1
 
	`MWRGB
(255,228,196)

	)

161 
	#GR_COLOR_BISQUE2
 
	`MWRGB
(238,213,183)

	)

162 
	#GR_COLOR_BISQUE3
 
	`MWRGB
(205,183,158)

	)

163 
	#GR_COLOR_BISQUE4
 
	`MWRGB
(139,125,107)

	)

164 
	#GR_COLOR_PEACHPUFF1
 
	`MWRGB
(255,218,185)

	)

165 
	#GR_COLOR_PEACHPUFF2
 
	`MWRGB
(238,203,173)

	)

166 
	#GR_COLOR_PEACHPUFF3
 
	`MWRGB
(205,175,149)

	)

167 
	#GR_COLOR_PEACHPUFF4
 
	`MWRGB
(139,119,101)

	)

168 
	#GR_COLOR_NAVAJOWHITE1
 
	`MWRGB
(255,222,173)

	)

169 
	#GR_COLOR_NAVAJOWHITE2
 
	`MWRGB
(238,207,161)

	)

170 
	#GR_COLOR_NAVAJOWHITE3
 
	`MWRGB
(205,179,139)

	)

171 
	#GR_COLOR_NAVAJOWHITE4
 
	`MWRGB
(139,121,94)

	)

172 
	#GR_COLOR_LEMONCHIFFON1
 
	`MWRGB
(255,250,205)

	)

173 
	#GR_COLOR_LEMONCHIFFON2
 
	`MWRGB
(238,233,191)

	)

174 
	#GR_COLOR_LEMONCHIFFON3
 
	`MWRGB
(205,201,165)

	)

175 
	#GR_COLOR_LEMONCHIFFON4
 
	`MWRGB
(139,137,112)

	)

176 
	#GR_COLOR_CORNSILK1
 
	`MWRGB
(255,248,220)

	)

177 
	#GR_COLOR_CORNSILK2
 
	`MWRGB
(238,232,205)

	)

178 
	#GR_COLOR_CORNSILK3
 
	`MWRGB
(205,200,177)

	)

179 
	#GR_COLOR_CORNSILK4
 
	`MWRGB
(139,136,120)

	)

180 
	#GR_COLOR_IVORY1
 
	`MWRGB
(255,255,240)

	)

181 
	#GR_COLOR_IVORY2
 
	`MWRGB
(238,238,224)

	)

182 
	#GR_COLOR_IVORY3
 
	`MWRGB
(205,205,193)

	)

183 
	#GR_COLOR_IVORY4
 
	`MWRGB
(139,139,131)

	)

184 
	#GR_COLOR_HONEYDEW1
 
	`MWRGB
(240,255,240)

	)

185 
	#GR_COLOR_HONEYDEW2
 
	`MWRGB
(224,238,224)

	)

186 
	#GR_COLOR_HONEYDEW3
 
	`MWRGB
(193,205,193)

	)

187 
	#GR_COLOR_HONEYDEW4
 
	`MWRGB
(131,139,131)

	)

188 
	#GR_COLOR_LAVENDERBLUSH1
 
	`MWRGB
(255,240,245)

	)

189 
	#GR_COLOR_LAVENDERBLUSH2
 
	`MWRGB
(238,224,229)

	)

190 
	#GR_COLOR_LAVENDERBLUSH3
 
	`MWRGB
(205,193,197)

	)

191 
	#GR_COLOR_LAVENDERBLUSH4
 
	`MWRGB
(139,131,134)

	)

192 
	#GR_COLOR_MISTYROSE1
 
	`MWRGB
(255,228,225)

	)

193 
	#GR_COLOR_MISTYROSE2
 
	`MWRGB
(238,213,210)

	)

194 
	#GR_COLOR_MISTYROSE3
 
	`MWRGB
(205,183,181)

	)

195 
	#GR_COLOR_MISTYROSE4
 
	`MWRGB
(139,125,123)

	)

196 
	#GR_COLOR_AZURE1
 
	`MWRGB
(240,255,255)

	)

197 
	#GR_COLOR_AZURE2
 
	`MWRGB
(224,238,238)

	)

198 
	#GR_COLOR_AZURE3
 
	`MWRGB
(193,205,205)

	)

199 
	#GR_COLOR_AZURE4
 
	`MWRGB
(131,139,139)

	)

200 
	#GR_COLOR_SLATEBLUE1
 
	`MWRGB
(131,111,255)

	)

201 
	#GR_COLOR_SLATEBLUE2
 
	`MWRGB
(122,103,238)

	)

202 
	#GR_COLOR_SLATEBLUE3
 
	`MWRGB
(105,89,205)

	)

203 
	#GR_COLOR_SLATEBLUE4
 
	`MWRGB
(71,60,139)

	)

204 
	#GR_COLOR_ROYALBLUE1
 
	`MWRGB
(72,118,255)

	)

205 
	#GR_COLOR_ROYALBLUE2
 
	`MWRGB
(67,110,238)

	)

206 
	#GR_COLOR_ROYALBLUE3
 
	`MWRGB
(58,95,205)

	)

207 
	#GR_COLOR_ROYALBLUE4
 
	`MWRGB
(39,64,139)

	)

208 
	#GR_COLOR_BLUE1
 
	`MWRGB
(0,0,255)

	)

209 
	#GR_COLOR_BLUE2
 
	`MWRGB
(0,0,238)

	)

210 
	#GR_COLOR_BLUE3
 
	`MWRGB
(0,0,205)

	)

211 
	#GR_COLOR_BLUE4
 
	`MWRGB
(0,0,139)

	)

212 
	#GR_COLOR_DODGERBLUE1
 
	`MWRGB
(30,144,255)

	)

213 
	#GR_COLOR_DODGERBLUE2
 
	`MWRGB
(28,134,238)

	)

214 
	#GR_COLOR_DODGERBLUE3
 
	`MWRGB
(24,116,205)

	)

215 
	#GR_COLOR_DODGERBLUE4
 
	`MWRGB
(16,78,139)

	)

216 
	#GR_COLOR_STEELBLUE1
 
	`MWRGB
(99,184,255)

	)

217 
	#GR_COLOR_STEELBLUE2
 
	`MWRGB
(92,172,238)

	)

218 
	#GR_COLOR_STEELBLUE3
 
	`MWRGB
(79,148,205)

	)

219 
	#GR_COLOR_STEELBLUE4
 
	`MWRGB
(54,100,139)

	)

220 
	#GR_COLOR_DEEPSKYBLUE1
 
	`MWRGB
(0,191,255)

	)

221 
	#GR_COLOR_DEEPSKYBLUE2
 
	`MWRGB
(0,178,238)

	)

222 
	#GR_COLOR_DEEPSKYBLUE3
 
	`MWRGB
(0,154,205)

	)

223 
	#GR_COLOR_DEEPSKYBLUE4
 
	`MWRGB
(0,104,139)

	)

224 
	#GR_COLOR_SKYBLUE1
 
	`MWRGB
(135,206,255)

	)

225 
	#GR_COLOR_SKYBLUE2
 
	`MWRGB
(126,192,238)

	)

226 
	#GR_COLOR_SKYBLUE3
 
	`MWRGB
(108,166,205)

	)

227 
	#GR_COLOR_SKYBLUE4
 
	`MWRGB
(74,112,139)

	)

228 
	#GR_COLOR_LIGHTSKYBLUE1
 
	`MWRGB
(176,226,255)

	)

229 
	#GR_COLOR_LIGHTSKYBLUE2
 
	`MWRGB
(164,211,238)

	)

230 
	#GR_COLOR_LIGHTSKYBLUE3
 
	`MWRGB
(141,182,205)

	)

231 
	#GR_COLOR_LIGHTSKYBLUE4
 
	`MWRGB
(96,123,139)

	)

232 
	#GR_COLOR_SLATEGRAY1
 
	`MWRGB
(198,226,255)

	)

233 
	#GR_COLOR_SLATEGRAY2
 
	`MWRGB
(185,211,238)

	)

234 
	#GR_COLOR_SLATEGRAY3
 
	`MWRGB
(159,182,205)

	)

235 
	#GR_COLOR_SLATEGRAY4
 
	`MWRGB
(108,123,139)

	)

236 
	#GR_COLOR_LIGHTSTEELBLUE1
 
	`MWRGB
(202,225,255)

	)

237 
	#GR_COLOR_LIGHTSTEELBLUE2
 
	`MWRGB
(188,210,238)

	)

238 
	#GR_COLOR_LIGHTSTEELBLUE3
 
	`MWRGB
(162,181,205)

	)

239 
	#GR_COLOR_LIGHTSTEELBLUE4
 
	`MWRGB
(110,123,139)

	)

240 
	#GR_COLOR_LIGHTBLUE1
 
	`MWRGB
(191,239,255)

	)

241 
	#GR_COLOR_LIGHTBLUE2
 
	`MWRGB
(178,223,238)

	)

242 
	#GR_COLOR_LIGHTBLUE3
 
	`MWRGB
(154,192,205)

	)

243 
	#GR_COLOR_LIGHTBLUE4
 
	`MWRGB
(104,131,139)

	)

244 
	#GR_COLOR_LIGHTCYAN1
 
	`MWRGB
(224,255,255)

	)

245 
	#GR_COLOR_LIGHTCYAN2
 
	`MWRGB
(209,238,238)

	)

246 
	#GR_COLOR_LIGHTCYAN3
 
	`MWRGB
(180,205,205)

	)

247 
	#GR_COLOR_LIGHTCYAN4
 
	`MWRGB
(122,139,139)

	)

248 
	#GR_COLOR_PALETURQUOISE1
 
	`MWRGB
(187,255,255)

	)

249 
	#GR_COLOR_PALETURQUOISE2
 
	`MWRGB
(174,238,238)

	)

250 
	#GR_COLOR_PALETURQUOISE3
 
	`MWRGB
(150,205,205)

	)

251 
	#GR_COLOR_PALETURQUOISE4
 
	`MWRGB
(102,139,139)

	)

252 
	#GR_COLOR_CADETBLUE1
 
	`MWRGB
(152,245,255)

	)

253 
	#GR_COLOR_CADETBLUE2
 
	`MWRGB
(142,229,238)

	)

254 
	#GR_COLOR_CADETBLUE3
 
	`MWRGB
(122,197,205)

	)

255 
	#GR_COLOR_CADETBLUE4
 
	`MWRGB
(83,134,139)

	)

256 
	#GR_COLOR_TURQUOISE1
 
	`MWRGB
(0,245,255)

	)

257 
	#GR_COLOR_TURQUOISE2
 
	`MWRGB
(0,229,238)

	)

258 
	#GR_COLOR_TURQUOISE3
 
	`MWRGB
(0,197,205)

	)

259 
	#GR_COLOR_TURQUOISE4
 
	`MWRGB
(0,134,139)

	)

260 
	#GR_COLOR_CYAN1
 
	`MWRGB
(0,255,255)

	)

261 
	#GR_COLOR_CYAN2
 
	`MWRGB
(0,238,238)

	)

262 
	#GR_COLOR_CYAN3
 
	`MWRGB
(0,205,205)

	)

263 
	#GR_COLOR_CYAN4
 
	`MWRGB
(0,139,139)

	)

264 
	#GR_COLOR_DARKSLATEGRAY1
 
	`MWRGB
(151,255,255)

	)

265 
	#GR_COLOR_DARKSLATEGRAY2
 
	`MWRGB
(141,238,238)

	)

266 
	#GR_COLOR_DARKSLATEGRAY3
 
	`MWRGB
(121,205,205)

	)

267 
	#GR_COLOR_DARKSLATEGRAY4
 
	`MWRGB
(82,139,139)

	)

268 
	#GR_COLOR_AQUAMARINE1
 
	`MWRGB
(127,255,212)

	)

269 
	#GR_COLOR_AQUAMARINE2
 
	`MWRGB
(118,238,198)

	)

270 
	#GR_COLOR_AQUAMARINE3
 
	`MWRGB
(102,205,170)

	)

271 
	#GR_COLOR_AQUAMARINE4
 
	`MWRGB
(69,139,116)

	)

272 
	#GR_COLOR_DARKSEAGREEN1
 
	`MWRGB
(193,255,193)

	)

273 
	#GR_COLOR_DARKSEAGREEN2
 
	`MWRGB
(180,238,180)

	)

274 
	#GR_COLOR_DARKSEAGREEN3
 
	`MWRGB
(155,205,155)

	)

275 
	#GR_COLOR_DARKSEAGREEN4
 
	`MWRGB
(105,139,105)

	)

276 
	#GR_COLOR_SEAGREEN1
 
	`MWRGB
(84,255,159)

	)

277 
	#GR_COLOR_SEAGREEN2
 
	`MWRGB
(78,238,148)

	)

278 
	#GR_COLOR_SEAGREEN3
 
	`MWRGB
(67,205,128)

	)

279 
	#GR_COLOR_SEAGREEN4
 
	`MWRGB
(46,139,87)

	)

280 
	#GR_COLOR_PALEGREEN1
 
	`MWRGB
(154,255,154)

	)

281 
	#GR_COLOR_PALEGREEN2
 
	`MWRGB
(144,238,144)

	)

282 
	#GR_COLOR_PALEGREEN3
 
	`MWRGB
(124,205,124)

	)

283 
	#GR_COLOR_PALEGREEN4
 
	`MWRGB
(84,139,84)

	)

284 
	#GR_COLOR_SPRINGGREEN1
 
	`MWRGB
(0,255,127)

	)

285 
	#GR_COLOR_SPRINGGREEN2
 
	`MWRGB
(0,238,118)

	)

286 
	#GR_COLOR_SPRINGGREEN3
 
	`MWRGB
(0,205,102)

	)

287 
	#GR_COLOR_SPRINGGREEN4
 
	`MWRGB
(0,139,69)

	)

288 
	#GR_COLOR_GREEN1
 
	`MWRGB
(0,255,0)

	)

289 
	#GR_COLOR_GREEN2
 
	`MWRGB
(0,238,0)

	)

290 
	#GR_COLOR_GREEN3
 
	`MWRGB
(0,205,0)

	)

291 
	#GR_COLOR_GREEN4
 
	`MWRGB
(0,139,0)

	)

292 
	#GR_COLOR_CHARTREUSE1
 
	`MWRGB
(127,255,0)

	)

293 
	#GR_COLOR_CHARTREUSE2
 
	`MWRGB
(118,238,0)

	)

294 
	#GR_COLOR_CHARTREUSE3
 
	`MWRGB
(102,205,0)

	)

295 
	#GR_COLOR_CHARTREUSE4
 
	`MWRGB
(69,139,0)

	)

296 
	#GR_COLOR_OLIVEDRAB1
 
	`MWRGB
(192,255,62)

	)

297 
	#GR_COLOR_OLIVEDRAB2
 
	`MWRGB
(179,238,58)

	)

298 
	#GR_COLOR_OLIVEDRAB3
 
	`MWRGB
(154,205,50)

	)

299 
	#GR_COLOR_OLIVEDRAB4
 
	`MWRGB
(105,139,34)

	)

300 
	#GR_COLOR_DARKOLIVEGREEN1
 
	`MWRGB
(202,255,112)

	)

301 
	#GR_COLOR_DARKOLIVEGREEN2
 
	`MWRGB
(188,238,104)

	)

302 
	#GR_COLOR_DARKOLIVEGREEN3
 
	`MWRGB
(162,205,90)

	)

303 
	#GR_COLOR_DARKOLIVEGREEN4
 
	`MWRGB
(110,139,61)

	)

304 
	#GR_COLOR_KHAKI1
 
	`MWRGB
(255,246,143)

	)

305 
	#GR_COLOR_KHAKI2
 
	`MWRGB
(238,230,133)

	)

306 
	#GR_COLOR_KHAKI3
 
	`MWRGB
(205,198,115)

	)

307 
	#GR_COLOR_KHAKI4
 
	`MWRGB
(139,134,78)

	)

308 
	#GR_COLOR_LIGHTGOLDENROD1
 
	`MWRGB
(255,236,139)

	)

309 
	#GR_COLOR_LIGHTGOLDENROD2
 
	`MWRGB
(238,220,130)

	)

310 
	#GR_COLOR_LIGHTGOLDENROD3
 
	`MWRGB
(205,190,112)

	)

311 
	#GR_COLOR_LIGHTGOLDENROD4
 
	`MWRGB
(139,129,76)

	)

312 
	#GR_COLOR_LIGHTYELLOW1
 
	`MWRGB
(255,255,224)

	)

313 
	#GR_COLOR_LIGHTYELLOW2
 
	`MWRGB
(238,238,209)

	)

314 
	#GR_COLOR_LIGHTYELLOW3
 
	`MWRGB
(205,205,180)

	)

315 
	#GR_COLOR_LIGHTYELLOW4
 
	`MWRGB
(139,139,122)

	)

316 
	#GR_COLOR_YELLOW1
 
	`MWRGB
(255,255,0)

	)

317 
	#GR_COLOR_YELLOW2
 
	`MWRGB
(238,238,0)

	)

318 
	#GR_COLOR_YELLOW3
 
	`MWRGB
(205,205,0)

	)

319 
	#GR_COLOR_YELLOW4
 
	`MWRGB
(139,139,0)

	)

320 
	#GR_COLOR_GOLD1
 
	`MWRGB
(255,215,0)

	)

321 
	#GR_COLOR_GOLD2
 
	`MWRGB
(238,201,0)

	)

322 
	#GR_COLOR_GOLD3
 
	`MWRGB
(205,173,0)

	)

323 
	#GR_COLOR_GOLD4
 
	`MWRGB
(139,117,0)

	)

324 
	#GR_COLOR_GOLDENROD1
 
	`MWRGB
(255,193,37)

	)

325 
	#GR_COLOR_GOLDENROD2
 
	`MWRGB
(238,180,34)

	)

326 
	#GR_COLOR_GOLDENROD3
 
	`MWRGB
(205,155,29)

	)

327 
	#GR_COLOR_GOLDENROD4
 
	`MWRGB
(139,105,20)

	)

328 
	#GR_COLOR_DARKGOLDENROD1
 
	`MWRGB
(255,185,15)

	)

329 
	#GR_COLOR_DARKGOLDENROD2
 
	`MWRGB
(238,173,14)

	)

330 
	#GR_COLOR_DARKGOLDENROD3
 
	`MWRGB
(205,149,12)

	)

331 
	#GR_COLOR_DARKGOLDENROD4
 
	`MWRGB
(139,101,8)

	)

332 
	#GR_COLOR_ROSYBROWN1
 
	`MWRGB
(255,193,193)

	)

333 
	#GR_COLOR_ROSYBROWN2
 
	`MWRGB
(238,180,180)

	)

334 
	#GR_COLOR_ROSYBROWN3
 
	`MWRGB
(205,155,155)

	)

335 
	#GR_COLOR_ROSYBROWN4
 
	`MWRGB
(139,105,105)

	)

336 
	#GR_COLOR_INDIANRED1
 
	`MWRGB
(255,106,106)

	)

337 
	#GR_COLOR_INDIANRED2
 
	`MWRGB
(238,99,99)

	)

338 
	#GR_COLOR_INDIANRED3
 
	`MWRGB
(205,85,85)

	)

339 
	#GR_COLOR_INDIANRED4
 
	`MWRGB
(139,58,58)

	)

340 
	#GR_COLOR_SIENNA1
 
	`MWRGB
(255,130,71)

	)

341 
	#GR_COLOR_SIENNA2
 
	`MWRGB
(238,121,66)

	)

342 
	#GR_COLOR_SIENNA3
 
	`MWRGB
(205,104,57)

	)

343 
	#GR_COLOR_SIENNA4
 
	`MWRGB
(139,71,38)

	)

344 
	#GR_COLOR_BURLYWOOD1
 
	`MWRGB
(255,211,155)

	)

345 
	#GR_COLOR_BURLYWOOD2
 
	`MWRGB
(238,197,145)

	)

346 
	#GR_COLOR_BURLYWOOD3
 
	`MWRGB
(205,170,125)

	)

347 
	#GR_COLOR_BURLYWOOD4
 
	`MWRGB
(139,115,85)

	)

348 
	#GR_COLOR_WHEAT1
 
	`MWRGB
(255,231,186)

	)

349 
	#GR_COLOR_WHEAT2
 
	`MWRGB
(238,216,174)

	)

350 
	#GR_COLOR_WHEAT3
 
	`MWRGB
(205,186,150)

	)

351 
	#GR_COLOR_WHEAT4
 
	`MWRGB
(139,126,102)

	)

352 
	#GR_COLOR_TAN1
 
	`MWRGB
(255,165,79)

	)

353 
	#GR_COLOR_TAN2
 
	`MWRGB
(238,154,73)

	)

354 
	#GR_COLOR_TAN3
 
	`MWRGB
(205,133,63)

	)

355 
	#GR_COLOR_TAN4
 
	`MWRGB
(139,90,43)

	)

356 
	#GR_COLOR_CHOCOLATE1
 
	`MWRGB
(255,127,36)

	)

357 
	#GR_COLOR_CHOCOLATE2
 
	`MWRGB
(238,118,33)

	)

358 
	#GR_COLOR_CHOCOLATE3
 
	`MWRGB
(205,102,29)

	)

359 
	#GR_COLOR_CHOCOLATE4
 
	`MWRGB
(139,69,19)

	)

360 
	#GR_COLOR_FIREBRICK1
 
	`MWRGB
(255,48,48)

	)

361 
	#GR_COLOR_FIREBRICK2
 
	`MWRGB
(238,44,44)

	)

362 
	#GR_COLOR_FIREBRICK3
 
	`MWRGB
(205,38,38)

	)

363 
	#GR_COLOR_FIREBRICK4
 
	`MWRGB
(139,26,26)

	)

364 
	#GR_COLOR_BROWN1
 
	`MWRGB
(255,64,64)

	)

365 
	#GR_COLOR_BROWN2
 
	`MWRGB
(238,59,59)

	)

366 
	#GR_COLOR_BROWN3
 
	`MWRGB
(205,51,51)

	)

367 
	#GR_COLOR_BROWN4
 
	`MWRGB
(139,35,35)

	)

368 
	#GR_COLOR_SALMON1
 
	`MWRGB
(255,140,105)

	)

369 
	#GR_COLOR_SALMON2
 
	`MWRGB
(238,130,98)

	)

370 
	#GR_COLOR_SALMON3
 
	`MWRGB
(205,112,84)

	)

371 
	#GR_COLOR_SALMON4
 
	`MWRGB
(139,76,57)

	)

372 
	#GR_COLOR_LIGHTSALMON1
 
	`MWRGB
(255,160,122)

	)

373 
	#GR_COLOR_LIGHTSALMON2
 
	`MWRGB
(238,149,114)

	)

374 
	#GR_COLOR_LIGHTSALMON3
 
	`MWRGB
(205,129,98)

	)

375 
	#GR_COLOR_LIGHTSALMON4
 
	`MWRGB
(139,87,66)

	)

376 
	#GR_COLOR_ORANGE1
 
	`MWRGB
(255,165,0)

	)

377 
	#GR_COLOR_ORANGE2
 
	`MWRGB
(238,154,0)

	)

378 
	#GR_COLOR_ORANGE3
 
	`MWRGB
(205,133,0)

	)

379 
	#GR_COLOR_ORANGE4
 
	`MWRGB
(139,90,0)

	)

380 
	#GR_COLOR_DARKORANGE1
 
	`MWRGB
(255,127,0)

	)

381 
	#GR_COLOR_DARKORANGE2
 
	`MWRGB
(238,118,0)

	)

382 
	#GR_COLOR_DARKORANGE3
 
	`MWRGB
(205,102,0)

	)

383 
	#GR_COLOR_DARKORANGE4
 
	`MWRGB
(139,69,0)

	)

384 
	#GR_COLOR_CORAL1
 
	`MWRGB
(255,114,86)

	)

385 
	#GR_COLOR_CORAL2
 
	`MWRGB
(238,106,80)

	)

386 
	#GR_COLOR_CORAL3
 
	`MWRGB
(205,91,69)

	)

387 
	#GR_COLOR_CORAL4
 
	`MWRGB
(139,62,47)

	)

388 
	#GR_COLOR_TOMATO1
 
	`MWRGB
(255,99,71)

	)

389 
	#GR_COLOR_TOMATO2
 
	`MWRGB
(238,92,66)

	)

390 
	#GR_COLOR_TOMATO3
 
	`MWRGB
(205,79,57)

	)

391 
	#GR_COLOR_TOMATO4
 
	`MWRGB
(139,54,38)

	)

392 
	#GR_COLOR_ORANGERED1
 
	`MWRGB
(255,69,0)

	)

393 
	#GR_COLOR_ORANGERED2
 
	`MWRGB
(238,64,0)

	)

394 
	#GR_COLOR_ORANGERED3
 
	`MWRGB
(205,55,0)

	)

395 
	#GR_COLOR_ORANGERED4
 
	`MWRGB
(139,37,0)

	)

396 
	#GR_COLOR_RED1
 
	`MWRGB
(255,0,0)

	)

397 
	#GR_COLOR_RED2
 
	`MWRGB
(238,0,0)

	)

398 
	#GR_COLOR_RED3
 
	`MWRGB
(205,0,0)

	)

399 
	#GR_COLOR_RED4
 
	`MWRGB
(139,0,0)

	)

400 
	#GR_COLOR_DEEPPINK1
 
	`MWRGB
(255,20,147)

	)

401 
	#GR_COLOR_DEEPPINK2
 
	`MWRGB
(238,18,137)

	)

402 
	#GR_COLOR_DEEPPINK3
 
	`MWRGB
(205,16,118)

	)

403 
	#GR_COLOR_DEEPPINK4
 
	`MWRGB
(139,10,80)

	)

404 
	#GR_COLOR_HOTPINK1
 
	`MWRGB
(255,110,180)

	)

405 
	#GR_COLOR_HOTPINK2
 
	`MWRGB
(238,106,167)

	)

406 
	#GR_COLOR_HOTPINK3
 
	`MWRGB
(205,96,144)

	)

407 
	#GR_COLOR_HOTPINK4
 
	`MWRGB
(139,58,98)

	)

408 
	#GR_COLOR_PINK1
 
	`MWRGB
(255,181,197)

	)

409 
	#GR_COLOR_PINK2
 
	`MWRGB
(238,169,184)

	)

410 
	#GR_COLOR_PINK3
 
	`MWRGB
(205,145,158)

	)

411 
	#GR_COLOR_PINK4
 
	`MWRGB
(139,99,108)

	)

412 
	#GR_COLOR_LIGHTPINK1
 
	`MWRGB
(255,174,185)

	)

413 
	#GR_COLOR_LIGHTPINK2
 
	`MWRGB
(238,162,173)

	)

414 
	#GR_COLOR_LIGHTPINK3
 
	`MWRGB
(205,140,149)

	)

415 
	#GR_COLOR_LIGHTPINK4
 
	`MWRGB
(139,95,101)

	)

416 
	#GR_COLOR_PALEVIOLETRED1
 
	`MWRGB
(255,130,171)

	)

417 
	#GR_COLOR_PALEVIOLETRED2
 
	`MWRGB
(238,121,159)

	)

418 
	#GR_COLOR_PALEVIOLETRED3
 
	`MWRGB
(205,104,137)

	)

419 
	#GR_COLOR_PALEVIOLETRED4
 
	`MWRGB
(139,71,93)

	)

420 
	#GR_COLOR_MAROON1
 
	`MWRGB
(255,52,179)

	)

421 
	#GR_COLOR_MAROON2
 
	`MWRGB
(238,48,167)

	)

422 
	#GR_COLOR_MAROON3
 
	`MWRGB
(205,41,144)

	)

423 
	#GR_COLOR_MAROON4
 
	`MWRGB
(139,28,98)

	)

424 
	#GR_COLOR_VIOLETRED1
 
	`MWRGB
(255,62,150)

	)

425 
	#GR_COLOR_VIOLETRED2
 
	`MWRGB
(238,58,140)

	)

426 
	#GR_COLOR_VIOLETRED3
 
	`MWRGB
(205,50,120)

	)

427 
	#GR_COLOR_VIOLETRED4
 
	`MWRGB
(139,34,82)

	)

428 
	#GR_COLOR_MAGENTA1
 
	`MWRGB
(255,0,255)

	)

429 
	#GR_COLOR_MAGENTA2
 
	`MWRGB
(238,0,238)

	)

430 
	#GR_COLOR_MAGENTA3
 
	`MWRGB
(205,0,205)

	)

431 
	#GR_COLOR_MAGENTA4
 
	`MWRGB
(139,0,139)

	)

432 
	#GR_COLOR_ORCHID1
 
	`MWRGB
(255,131,250)

	)

433 
	#GR_COLOR_ORCHID2
 
	`MWRGB
(238,122,233)

	)

434 
	#GR_COLOR_ORCHID3
 
	`MWRGB
(205,105,201)

	)

435 
	#GR_COLOR_ORCHID4
 
	`MWRGB
(139,71,137)

	)

436 
	#GR_COLOR_PLUM1
 
	`MWRGB
(255,187,255)

	)

437 
	#GR_COLOR_PLUM2
 
	`MWRGB
(238,174,238)

	)

438 
	#GR_COLOR_PLUM3
 
	`MWRGB
(205,150,205)

	)

439 
	#GR_COLOR_PLUM4
 
	`MWRGB
(139,102,139)

	)

440 
	#GR_COLOR_MEDIUMORCHID1
 
	`MWRGB
(224,102,255)

	)

441 
	#GR_COLOR_MEDIUMORCHID2
 
	`MWRGB
(209,95,238)

	)

442 
	#GR_COLOR_MEDIUMORCHID3
 
	`MWRGB
(180,82,205)

	)

443 
	#GR_COLOR_MEDIUMORCHID4
 
	`MWRGB
(122,55,139)

	)

444 
	#GR_COLOR_DARKORCHID1
 
	`MWRGB
(191,62,255)

	)

445 
	#GR_COLOR_DARKORCHID2
 
	`MWRGB
(178,58,238)

	)

446 
	#GR_COLOR_DARKORCHID3
 
	`MWRGB
(154,50,205)

	)

447 
	#GR_COLOR_DARKORCHID4
 
	`MWRGB
(104,34,139)

	)

448 
	#GR_COLOR_PURPLE1
 
	`MWRGB
(155,48,255)

	)

449 
	#GR_COLOR_PURPLE2
 
	`MWRGB
(145,44,238)

	)

450 
	#GR_COLOR_PURPLE3
 
	`MWRGB
(125,38,205)

	)

451 
	#GR_COLOR_PURPLE4
 
	`MWRGB
(85,26,139)

	)

452 
	#GR_COLOR_MEDIUMPURPLE1
 
	`MWRGB
(171,130,255)

	)

453 
	#GR_COLOR_MEDIUMPURPLE2
 
	`MWRGB
(159,121,238)

	)

454 
	#GR_COLOR_MEDIUMPURPLE3
 
	`MWRGB
(137,104,205)

	)

455 
	#GR_COLOR_MEDIUMPURPLE4
 
	`MWRGB
(93,71,139)

	)

456 
	#GR_COLOR_THISTLE1
 
	`MWRGB
(255,225,255)

	)

457 
	#GR_COLOR_THISTLE2
 
	`MWRGB
(238,210,238)

	)

458 
	#GR_COLOR_THISTLE3
 
	`MWRGB
(205,181,205)

	)

459 
	#GR_COLOR_THISTLE4
 
	`MWRGB
(139,123,139)

	)

460 
	#GR_COLOR_GRAY0
 
	`MWRGB
(0,0,0)

	)

461 
	#GR_COLOR_GREY0
 
	`MWRGB
(0,0,0)

	)

462 
	#GR_COLOR_GRAY1
 
	`MWRGB
(3,3,3)

	)

463 
	#GR_COLOR_GREY1
 
	`MWRGB
(3,3,3)

	)

464 
	#GR_COLOR_GRAY2
 
	`MWRGB
(5,5,5)

	)

465 
	#GR_COLOR_GREY2
 
	`MWRGB
(5,5,5)

	)

466 
	#GR_COLOR_GRAY3
 
	`MWRGB
(8,8,8)

	)

467 
	#GR_COLOR_GREY3
 
	`MWRGB
(8,8,8)

	)

468 
	#GR_COLOR_GRAY4
 
	`MWRGB
(10,10,10)

	)

469 
	#GR_COLOR_GREY4
 
	`MWRGB
(10,10,10)

	)

470 
	#GR_COLOR_GRAY5
 
	`MWRGB
(13,13,13)

	)

471 
	#GR_COLOR_GREY5
 
	`MWRGB
(13,13,13)

	)

472 
	#GR_COLOR_GRAY6
 
	`MWRGB
(15,15,15)

	)

473 
	#GR_COLOR_GREY6
 
	`MWRGB
(15,15,15)

	)

474 
	#GR_COLOR_GRAY7
 
	`MWRGB
(18,18,18)

	)

475 
	#GR_COLOR_GREY7
 
	`MWRGB
(18,18,18)

	)

476 
	#GR_COLOR_GRAY8
 
	`MWRGB
(20,20,20)

	)

477 
	#GR_COLOR_GREY8
 
	`MWRGB
(20,20,20)

	)

478 
	#GR_COLOR_GRAY9
 
	`MWRGB
(23,23,23)

	)

479 
	#GR_COLOR_GREY9
 
	`MWRGB
(23,23,23)

	)

480 
	#GR_COLOR_GRAY10
 
	`MWRGB
(26,26,26)

	)

481 
	#GR_COLOR_GREY10
 
	`MWRGB
(26,26,26)

	)

482 
	#GR_COLOR_GRAY11
 
	`MWRGB
(28,28,28)

	)

483 
	#GR_COLOR_GREY11
 
	`MWRGB
(28,28,28)

	)

484 
	#GR_COLOR_GRAY12
 
	`MWRGB
(31,31,31)

	)

485 
	#GR_COLOR_GREY12
 
	`MWRGB
(31,31,31)

	)

486 
	#GR_COLOR_GRAY13
 
	`MWRGB
(33,33,33)

	)

487 
	#GR_COLOR_GREY13
 
	`MWRGB
(33,33,33)

	)

488 
	#GR_COLOR_GRAY14
 
	`MWRGB
(36,36,36)

	)

489 
	#GR_COLOR_GREY14
 
	`MWRGB
(36,36,36)

	)

490 
	#GR_COLOR_GRAY15
 
	`MWRGB
(38,38,38)

	)

491 
	#GR_COLOR_GREY15
 
	`MWRGB
(38,38,38)

	)

492 
	#GR_COLOR_GRAY16
 
	`MWRGB
(41,41,41)

	)

493 
	#GR_COLOR_GREY16
 
	`MWRGB
(41,41,41)

	)

494 
	#GR_COLOR_GRAY17
 
	`MWRGB
(43,43,43)

	)

495 
	#GR_COLOR_GREY17
 
	`MWRGB
(43,43,43)

	)

496 
	#GR_COLOR_GRAY18
 
	`MWRGB
(46,46,46)

	)

497 
	#GR_COLOR_GREY18
 
	`MWRGB
(46,46,46)

	)

498 
	#GR_COLOR_GRAY19
 
	`MWRGB
(48,48,48)

	)

499 
	#GR_COLOR_GREY19
 
	`MWRGB
(48,48,48)

	)

500 
	#GR_COLOR_GRAY20
 
	`MWRGB
(51,51,51)

	)

501 
	#GR_COLOR_GREY20
 
	`MWRGB
(51,51,51)

	)

502 
	#GR_COLOR_GRAY21
 
	`MWRGB
(54,54,54)

	)

503 
	#GR_COLOR_GREY21
 
	`MWRGB
(54,54,54)

	)

504 
	#GR_COLOR_GRAY22
 
	`MWRGB
(56,56,56)

	)

505 
	#GR_COLOR_GREY22
 
	`MWRGB
(56,56,56)

	)

506 
	#GR_COLOR_GRAY23
 
	`MWRGB
(59,59,59)

	)

507 
	#GR_COLOR_GREY23
 
	`MWRGB
(59,59,59)

	)

508 
	#GR_COLOR_GRAY24
 
	`MWRGB
(61,61,61)

	)

509 
	#GR_COLOR_GREY24
 
	`MWRGB
(61,61,61)

	)

510 
	#GR_COLOR_GRAY25
 
	`MWRGB
(64,64,64)

	)

511 
	#GR_COLOR_GREY25
 
	`MWRGB
(64,64,64)

	)

512 
	#GR_COLOR_GRAY26
 
	`MWRGB
(66,66,66)

	)

513 
	#GR_COLOR_GREY26
 
	`MWRGB
(66,66,66)

	)

514 
	#GR_COLOR_GRAY27
 
	`MWRGB
(69,69,69)

	)

515 
	#GR_COLOR_GREY27
 
	`MWRGB
(69,69,69)

	)

516 
	#GR_COLOR_GRAY28
 
	`MWRGB
(71,71,71)

	)

517 
	#GR_COLOR_GREY28
 
	`MWRGB
(71,71,71)

	)

518 
	#GR_COLOR_GRAY29
 
	`MWRGB
(74,74,74)

	)

519 
	#GR_COLOR_GREY29
 
	`MWRGB
(74,74,74)

	)

520 
	#GR_COLOR_GRAY30
 
	`MWRGB
(77,77,77)

	)

521 
	#GR_COLOR_GREY30
 
	`MWRGB
(77,77,77)

	)

522 
	#GR_COLOR_GRAY31
 
	`MWRGB
(79,79,79)

	)

523 
	#GR_COLOR_GREY31
 
	`MWRGB
(79,79,79)

	)

524 
	#GR_COLOR_GRAY32
 
	`MWRGB
(82,82,82)

	)

525 
	#GR_COLOR_GREY32
 
	`MWRGB
(82,82,82)

	)

526 
	#GR_COLOR_GRAY33
 
	`MWRGB
(84,84,84)

	)

527 
	#GR_COLOR_GREY33
 
	`MWRGB
(84,84,84)

	)

528 
	#GR_COLOR_GRAY34
 
	`MWRGB
(87,87,87)

	)

529 
	#GR_COLOR_GREY34
 
	`MWRGB
(87,87,87)

	)

530 
	#GR_COLOR_GRAY35
 
	`MWRGB
(89,89,89)

	)

531 
	#GR_COLOR_GREY35
 
	`MWRGB
(89,89,89)

	)

532 
	#GR_COLOR_GRAY36
 
	`MWRGB
(92,92,92)

	)

533 
	#GR_COLOR_GREY36
 
	`MWRGB
(92,92,92)

	)

534 
	#GR_COLOR_GRAY37
 
	`MWRGB
(94,94,94)

	)

535 
	#GR_COLOR_GREY37
 
	`MWRGB
(94,94,94)

	)

536 
	#GR_COLOR_GRAY38
 
	`MWRGB
(97,97,97)

	)

537 
	#GR_COLOR_GREY38
 
	`MWRGB
(97,97,97)

	)

538 
	#GR_COLOR_GRAY39
 
	`MWRGB
(99,99,99)

	)

539 
	#GR_COLOR_GREY39
 
	`MWRGB
(99,99,99)

	)

540 
	#GR_COLOR_GRAY40
 
	`MWRGB
(102,102,102)

	)

541 
	#GR_COLOR_GREY40
 
	`MWRGB
(102,102,102)

	)

542 
	#GR_COLOR_GRAY41
 
	`MWRGB
(105,105,105)

	)

543 
	#GR_COLOR_GREY41
 
	`MWRGB
(105,105,105)

	)

544 
	#GR_COLOR_GRAY42
 
	`MWRGB
(107,107,107)

	)

545 
	#GR_COLOR_GREY42
 
	`MWRGB
(107,107,107)

	)

546 
	#GR_COLOR_GRAY43
 
	`MWRGB
(110,110,110)

	)

547 
	#GR_COLOR_GREY43
 
	`MWRGB
(110,110,110)

	)

548 
	#GR_COLOR_GRAY44
 
	`MWRGB
(112,112,112)

	)

549 
	#GR_COLOR_GREY44
 
	`MWRGB
(112,112,112)

	)

550 
	#GR_COLOR_GRAY45
 
	`MWRGB
(115,115,115)

	)

551 
	#GR_COLOR_GREY45
 
	`MWRGB
(115,115,115)

	)

552 
	#GR_COLOR_GRAY46
 
	`MWRGB
(117,117,117)

	)

553 
	#GR_COLOR_GREY46
 
	`MWRGB
(117,117,117)

	)

554 
	#GR_COLOR_GRAY47
 
	`MWRGB
(120,120,120)

	)

555 
	#GR_COLOR_GREY47
 
	`MWRGB
(120,120,120)

	)

556 
	#GR_COLOR_GRAY48
 
	`MWRGB
(122,122,122)

	)

557 
	#GR_COLOR_GREY48
 
	`MWRGB
(122,122,122)

	)

558 
	#GR_COLOR_GRAY49
 
	`MWRGB
(125,125,125)

	)

559 
	#GR_COLOR_GREY49
 
	`MWRGB
(125,125,125)

	)

560 
	#GR_COLOR_GRAY50
 
	`MWRGB
(127,127,127)

	)

561 
	#GR_COLOR_GREY50
 
	`MWRGB
(127,127,127)

	)

562 
	#GR_COLOR_GRAY51
 
	`MWRGB
(130,130,130)

	)

563 
	#GR_COLOR_GREY51
 
	`MWRGB
(130,130,130)

	)

564 
	#GR_COLOR_GRAY52
 
	`MWRGB
(133,133,133)

	)

565 
	#GR_COLOR_GREY52
 
	`MWRGB
(133,133,133)

	)

566 
	#GR_COLOR_GRAY53
 
	`MWRGB
(135,135,135)

	)

567 
	#GR_COLOR_GREY53
 
	`MWRGB
(135,135,135)

	)

568 
	#GR_COLOR_GRAY54
 
	`MWRGB
(138,138,138)

	)

569 
	#GR_COLOR_GREY54
 
	`MWRGB
(138,138,138)

	)

570 
	#GR_COLOR_GRAY55
 
	`MWRGB
(140,140,140)

	)

571 
	#GR_COLOR_GREY55
 
	`MWRGB
(140,140,140)

	)

572 
	#GR_COLOR_GRAY56
 
	`MWRGB
(143,143,143)

	)

573 
	#GR_COLOR_GREY56
 
	`MWRGB
(143,143,143)

	)

574 
	#GR_COLOR_GRAY57
 
	`MWRGB
(145,145,145)

	)

575 
	#GR_COLOR_GREY57
 
	`MWRGB
(145,145,145)

	)

576 
	#GR_COLOR_GRAY58
 
	`MWRGB
(148,148,148)

	)

577 
	#GR_COLOR_GREY58
 
	`MWRGB
(148,148,148)

	)

578 
	#GR_COLOR_GRAY59
 
	`MWRGB
(150,150,150)

	)

579 
	#GR_COLOR_GREY59
 
	`MWRGB
(150,150,150)

	)

580 
	#GR_COLOR_GRAY60
 
	`MWRGB
(153,153,153)

	)

581 
	#GR_COLOR_GREY60
 
	`MWRGB
(153,153,153)

	)

582 
	#GR_COLOR_GRAY61
 
	`MWRGB
(156,156,156)

	)

583 
	#GR_COLOR_GREY61
 
	`MWRGB
(156,156,156)

	)

584 
	#GR_COLOR_GRAY62
 
	`MWRGB
(158,158,158)

	)

585 
	#GR_COLOR_GREY62
 
	`MWRGB
(158,158,158)

	)

586 
	#GR_COLOR_GRAY63
 
	`MWRGB
(161,161,161)

	)

587 
	#GR_COLOR_GREY63
 
	`MWRGB
(161,161,161)

	)

588 
	#GR_COLOR_GRAY64
 
	`MWRGB
(163,163,163)

	)

589 
	#GR_COLOR_GREY64
 
	`MWRGB
(163,163,163)

	)

590 
	#GR_COLOR_GRAY65
 
	`MWRGB
(166,166,166)

	)

591 
	#GR_COLOR_GREY65
 
	`MWRGB
(166,166,166)

	)

592 
	#GR_COLOR_GRAY66
 
	`MWRGB
(168,168,168)

	)

593 
	#GR_COLOR_GREY66
 
	`MWRGB
(168,168,168)

	)

594 
	#GR_COLOR_GRAY67
 
	`MWRGB
(171,171,171)

	)

595 
	#GR_COLOR_GREY67
 
	`MWRGB
(171,171,171)

	)

596 
	#GR_COLOR_GRAY68
 
	`MWRGB
(173,173,173)

	)

597 
	#GR_COLOR_GREY68
 
	`MWRGB
(173,173,173)

	)

598 
	#GR_COLOR_GRAY69
 
	`MWRGB
(176,176,176)

	)

599 
	#GR_COLOR_GREY69
 
	`MWRGB
(176,176,176)

	)

600 
	#GR_COLOR_GRAY70
 
	`MWRGB
(179,179,179)

	)

601 
	#GR_COLOR_GREY70
 
	`MWRGB
(179,179,179)

	)

602 
	#GR_COLOR_GRAY71
 
	`MWRGB
(181,181,181)

	)

603 
	#GR_COLOR_GREY71
 
	`MWRGB
(181,181,181)

	)

604 
	#GR_COLOR_GRAY72
 
	`MWRGB
(184,184,184)

	)

605 
	#GR_COLOR_GREY72
 
	`MWRGB
(184,184,184)

	)

606 
	#GR_COLOR_GRAY73
 
	`MWRGB
(186,186,186)

	)

607 
	#GR_COLOR_GREY73
 
	`MWRGB
(186,186,186)

	)

608 
	#GR_COLOR_GRAY74
 
	`MWRGB
(189,189,189)

	)

609 
	#GR_COLOR_GREY74
 
	`MWRGB
(189,189,189)

	)

610 
	#GR_COLOR_GRAY75
 
	`MWRGB
(191,191,191)

	)

611 
	#GR_COLOR_GREY75
 
	`MWRGB
(191,191,191)

	)

612 
	#GR_COLOR_GRAY76
 
	`MWRGB
(194,194,194)

	)

613 
	#GR_COLOR_GREY76
 
	`MWRGB
(194,194,194)

	)

614 
	#GR_COLOR_GRAY77
 
	`MWRGB
(196,196,196)

	)

615 
	#GR_COLOR_GREY77
 
	`MWRGB
(196,196,196)

	)

616 
	#GR_COLOR_GRAY78
 
	`MWRGB
(199,199,199)

	)

617 
	#GR_COLOR_GREY78
 
	`MWRGB
(199,199,199)

	)

618 
	#GR_COLOR_GRAY79
 
	`MWRGB
(201,201,201)

	)

619 
	#GR_COLOR_GREY79
 
	`MWRGB
(201,201,201)

	)

620 
	#GR_COLOR_GRAY80
 
	`MWRGB
(204,204,204)

	)

621 
	#GR_COLOR_GREY80
 
	`MWRGB
(204,204,204)

	)

622 
	#GR_COLOR_GRAY81
 
	`MWRGB
(207,207,207)

	)

623 
	#GR_COLOR_GREY81
 
	`MWRGB
(207,207,207)

	)

624 
	#GR_COLOR_GRAY82
 
	`MWRGB
(209,209,209)

	)

625 
	#GR_COLOR_GREY82
 
	`MWRGB
(209,209,209)

	)

626 
	#GR_COLOR_GRAY83
 
	`MWRGB
(212,212,212)

	)

627 
	#GR_COLOR_GREY83
 
	`MWRGB
(212,212,212)

	)

628 
	#GR_COLOR_GRAY84
 
	`MWRGB
(214,214,214)

	)

629 
	#GR_COLOR_GREY84
 
	`MWRGB
(214,214,214)

	)

630 
	#GR_COLOR_GRAY85
 
	`MWRGB
(217,217,217)

	)

631 
	#GR_COLOR_GREY85
 
	`MWRGB
(217,217,217)

	)

632 
	#GR_COLOR_GRAY86
 
	`MWRGB
(219,219,219)

	)

633 
	#GR_COLOR_GREY86
 
	`MWRGB
(219,219,219)

	)

634 
	#GR_COLOR_GRAY87
 
	`MWRGB
(222,222,222)

	)

635 
	#GR_COLOR_GREY87
 
	`MWRGB
(222,222,222)

	)

636 
	#GR_COLOR_GRAY88
 
	`MWRGB
(224,224,224)

	)

637 
	#GR_COLOR_GREY88
 
	`MWRGB
(224,224,224)

	)

638 
	#GR_COLOR_GRAY89
 
	`MWRGB
(227,227,227)

	)

639 
	#GR_COLOR_GREY89
 
	`MWRGB
(227,227,227)

	)

640 
	#GR_COLOR_GRAY90
 
	`MWRGB
(229,229,229)

	)

641 
	#GR_COLOR_GREY90
 
	`MWRGB
(229,229,229)

	)

642 
	#GR_COLOR_GRAY91
 
	`MWRGB
(232,232,232)

	)

643 
	#GR_COLOR_GREY91
 
	`MWRGB
(232,232,232)

	)

644 
	#GR_COLOR_GRAY92
 
	`MWRGB
(235,235,235)

	)

645 
	#GR_COLOR_GREY92
 
	`MWRGB
(235,235,235)

	)

646 
	#GR_COLOR_GRAY93
 
	`MWRGB
(237,237,237)

	)

647 
	#GR_COLOR_GREY93
 
	`MWRGB
(237,237,237)

	)

648 
	#GR_COLOR_GRAY94
 
	`MWRGB
(240,240,240)

	)

649 
	#GR_COLOR_GREY94
 
	`MWRGB
(240,240,240)

	)

650 
	#GR_COLOR_GRAY95
 
	`MWRGB
(242,242,242)

	)

651 
	#GR_COLOR_GREY95
 
	`MWRGB
(242,242,242)

	)

652 
	#GR_COLOR_GRAY96
 
	`MWRGB
(245,245,245)

	)

653 
	#GR_COLOR_GREY96
 
	`MWRGB
(245,245,245)

	)

654 
	#GR_COLOR_GRAY97
 
	`MWRGB
(247,247,247)

	)

655 
	#GR_COLOR_GREY97
 
	`MWRGB
(247,247,247)

	)

656 
	#GR_COLOR_GRAY98
 
	`MWRGB
(250,250,250)

	)

657 
	#GR_COLOR_GREY98
 
	`MWRGB
(250,250,250)

	)

658 
	#GR_COLOR_GRAY99
 
	`MWRGB
(252,252,252)

	)

659 
	#GR_COLOR_GREY99
 
	`MWRGB
(252,252,252)

	)

660 
	#GR_COLOR_GRAY100
 
	`MWRGB
(255,255,255)

	)

661 
	#GR_COLOR_GREY100
 
	`MWRGB
(255,255,255)

	)

662 
	#GR_COLOR_DARKGREY
 
	`MWRGB
(169,169,169)

	)

663 
	#GR_COLOR_DARKGRAY
 
	`MWRGB
(169,169,169)

	)

664 
	#GR_COLOR_DARKBLUE
 
	`MWRGB
(0,0,139)

	)

665 
	#GR_COLOR_DARKCYAN
 
	`MWRGB
(0,139,139)

	)

666 
	#GR_COLOR_DARKMAGENTA
 
	`MWRGB
(139,0,139)

	)

667 
	#GR_COLOR_DARKRED
 
	`MWRGB
(139,0,0)

	)

668 
	#GR_COLOR_LIGHTGREEN
 
	`MWRGB
(144,238,144)

	)

	@include/nxdraw.h

11 
nxPaötNCAªa
(
GR_DRAW_ID
 
id
, 
w
, 
h
, 
GR_CHAR
 *
tôÀ
,

12 
GR_BOOL
 
a˘ive
, 
GR_WM_PROPS
 
¥›s
);

14 
nxInÊ©eRe˘
(
GR_RECT
 *
¥c
, 
GR_SIZE
 
dx
, GR_SIZE 
dy
);

15 
nxDøw3dBox
(
GR_WINDOW_ID
 
id
,
x
,
y
,
w
,
h
,

16 
GR_COLOR
 
¸T›
,GR_COLOR 
¸BŸtom
);

17 
nxDøw3dIn£t
(
GR_DRAW_ID
 
id
,
x
,
y
,
w
,
h
);

18 
nxDøw3dOut£t
(
GR_WINDOW_ID
 
id
,
x
,
y
,
w
,
h
);

19 
nxDøw3dPushDown
(
GR_DRAW_ID
 
id
, 
x
, 
y
, 
w
, 
h
);

20 
nxDøw3dUpDownSèã
(
GR_DRAW_ID
 
id
, 
x
, 
y
, 
w
, 
h
,

21 
GR_BOOL
 
fDown
);

22 
nxDøw3dUpFøme
(
GR_DRAW_ID
 
id
, 
l
, 
t
, 
r
, 
b
);

23 
nxDøw3dShadow
(
GR_DRAW_ID
 
id
, 
x
, 
y
, 
w
, 
h
, 
GR_COLOR
 
¸T›
, GR_COLOR 
¸BŸtom
);

26 
	#CXBORDER
 3

	)

27 
	#CYBORDER
 3

	)

28 
	#CYCAPTION
 12

	)

29 
	#CXCLOSEBOX
 9

	)

30 
	#CYCLOSEBOX
 9

	)

31 
	#CXFRAME
 (
CXBORDER
*2Ë

	)

32 
	#CYFRAME
 (
CYBORDER
*2Ë

	)

	@include/swap.h

15 #i‚de‡
MW_SWAP_H_INCLUDED


16 
	#MW_SWAP_H_INCLUDED


	)

22 #i‡!
MW_CPU_BIG_ENDIAN


25 
	#wsw≠
(
x
Ë(x)

	)

26 
	#dwsw≠
(
x
Ë(x)

	)

30 
	#wsw≠
(
x
Ë((((xË<< 8Ë& 0xff00Ë| (((xË>> 8Ë& 0x00ff))

	)

32 
	#dwsw≠
(
x
) ((((x) << 24) & 0xff000000L) | \

33 (((
x
) << 8) & 0x00ff0000L) | \

34 (((
x
) >> 8) & 0x0000ff00L) | \

35 (((
x
Ë>> 24Ë& 0x000000ffLË)

	)

42 
	#dwªad
(
addr
) ((((*)(addr))[0] | \

43 (((*)(
addr
))[1] << 8) | \

44 (((*)(
addr
))[2] << 16) | \

45 (((*)(
addr
))[3] << 24)))

	)

55 #ifde‡
löux


57 
	~<ídün.h
>

58 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


59 #i‡!
MW_CPU_BIG_ENDIAN


60 #îr‹ 
MW_CPU_BIG_ENDIAN
 
™d
 
your
 
OS
 
dißgªe
 
about
 you∏
CPUs
 
byã
-
‹dî
. 
Did
 
you
 
f‹gë
 
to
 
£t
 
BIGENDIAN
 
ö
 
the
 
c⁄fig
 
fûe
?

62 #unde‡
wsw≠


63 #unde‡
dwsw≠


64 
	~<byãsw≠.h
>

65 
	#wsw≠
(
x
Ë
	`bsw≠_16
(x)

	)

66 
	#dwsw≠
(
x
Ë
	`bsw≠_32
(x)

	)

68 #i‡
MW_CPU_BIG_ENDIAN


69 #îr‹ 
MW_CPU_BIG_ENDIAN
 
™d
 
your
 
OS
 
dißgªe
 
about
 you∏
CPUs
 
byã
-
‹dî
. 
Did
 
you
 
accidíèŒy
 
£t
 
BIGENDIAN
 
ö
 
the
 
c⁄fig
 
fûe
?

76 #ñi‡
deföed
(
__FªeBSD__
)

78 
	~<machöe/ídün.h
>

79 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


80 #i‡!
MW_CPU_BIG_ENDIAN


81 #îr‹ 
MW_CPU_BIG_ENDIAN
 
™d
 
your
 
OS
 
dißgªe
 
about
 you∏
CPUs
 
byã
-
‹dî
. 
Did
 
you
 
f‹gë
 
to
 
£t
 
BIGENDIAN
 
ö
 
the
 
c⁄fig
 
fûe
?

83 #i‚de‡
__byã_sw≠_w‹d


85 #w¨nög 
__byã_sw≠_w‹d
 
nŸ
 
deföed
 
ö
 
ídün
.
h
 
⁄
 
FªeBSD
.

87 #unde‡
wsw≠


88 #unde‡
dwsw≠


89 
	#wsw≠
(
x
Ë
	`__byã_sw≠_w‹d
(x)

	)

90 
	#dwsw≠
(
x
Ë
	`__byã_sw≠_l⁄g
(x)

	)

93 #i‡
MW_CPU_BIG_ENDIAN


94 #îr‹ 
MW_CPU_BIG_ENDIAN
 
™d
 
your
 
OS
 
dißgªe
 
about
 you∏
CPUs
 
byã
-
‹dî
. 
Did
 
you
 
accidíèŒy
 
£t
 
BIGENDIAN
 
ö
 
the
 
c⁄fig
 
fûe
?

101 #ñi‡
__ECOS


103 #unde‡
wsw≠


104 #unde‡
dwsw≠


105 
	~<machöe/ídün.h
>

106 
	#wsw≠
(
x
Ë
	`Àtoh16
(x)

	)

107 
	#dwsw≠
(
x
Ë
	`Àtoh32
(x)

	)

113 #ñi‡
deföed
(
__CYGWIN__
)

116 #i‡
MW_CPU_BIG_ENDIAN


117 #îr‹ 
MW_CPU_BIG_ENDIAN
 
™d
 
your
 
OS
 
dißgªe
 
about
 you∏
CPUs
 
byã
-
‹dî
. 
Did
 
you
 
accidíèŒy
 
£t
 
BIGENDIAN
 
ö
 
the
 
c⁄fig
 
fûe
?

121 #unde‡
dwªad


122 
	#dwªad
(
addr
Ë(*(*)◊ddr))

	)

128 #ñi‡
deföed
(
TRIMEDIA
)

142 #w¨nög 
You
 
might
 
w™t
 
to
 
deföe
 
›timized
 
byã
 
sw≠pög
 
ma¸os
 
this
 
machöe
 - 
nŸ
, 
you
 
ˇn
 
ß„ly
 
ign‹e
Åhi†
w¨nög
.

	@include/winctl.h

8 
WINAPI
 
MwRegi°îBuâ⁄C⁄åﬁ
(
HINSTANCE
 
hIn°™˚
);

9 
WINAPI
 
MwRegi°îLi°boxC⁄åﬁ
(
HINSTANCE
 
hIn°™˚
);

10 
WINAPI
 
MwRegi°îEdôC⁄åﬁ
(
HINSTANCE
 
hIn°™˚
);

11 
WINAPI
 
MwRegi°îSèticC⁄åﬁ
(
HINSTANCE
 
hIn°™˚
);

12 
WINAPI
 
MwRegi°îProgªssB¨C⁄åﬁ
(
HINSTANCE
 
hIn°™˚
);

13 
WINAPI
 
MwRegi°îComboboxC⁄åﬁ
(
HINSTANCE
 
hIn°™˚
);

14 
WINAPI
 
MwRegi°îS¸ﬁlb¨C⁄åﬁ
(
HINSTANCE
 
hIn°™˚
);

15 
WINAPI
 
MwRegi°îMEdôC⁄åﬁ
(
HINSTANCE
 
hIn°™˚
);

18 
WINAPI
 
CheckRadioBuâ⁄
(
HWND
 
hDlg
, 
nIDFú°
,
nIDLa°
,

19 
nIDCheckBuâ⁄
);

22 
	#DLGC_WANTARROWS
 0x0001

	)

23 
	#DLGC_WANTTAB
 0x0002

	)

24 
	#DLGC_WANTALLKEYS
 0x0004

	)

25 
	#DLGC_WANTMESSAGE
 0x0004

	)

26 
	#DLGC_HASSETSEL
 0x0008

	)

27 
	#DLGC_DEFPUSHBUTTON
 0x0010

	)

28 
	#DLGC_UNDEFPUSHBUTTON
 0x0020

	)

29 
	#DLGC_RADIOBUTTON
 0x0040

	)

30 
	#DLGC_WANTCHARS
 0x0080

	)

31 
	#DLGC_STATIC
 0x0100

	)

32 
	#DLGC_BUTTON
 0x2000

	)

35 
	#BS_PUSHBUTTON
 0x00000000L

	)

36 
	#BS_DEFPUSHBUTTON
 0x00000001L

	)

37 
	#BS_CHECKBOX
 0x00000002L

	)

38 
	#BS_AUTOCHECKBOX
 0x00000003L

	)

39 
	#BS_RADIOBUTTON
 0x00000004L

	)

40 
	#BS_3STATE
 0x00000005L

	)

41 
	#BS_AUTO3STATE
 0x00000006L

	)

42 
	#BS_GROUPBOX
 0x00000007L

	)

43 
	#BS_USERBUTTON
 0x00000008L

	)

44 
	#BS_AUTORADIOBUTTON
 0x00000009L

	)

45 
	#BS_OWNERDRAW
 0x0000000BL

	)

46 
	#BS_LEFTTEXT
 0x00000020L

	)

47 
	#BS_TEXT
 0x00000000L

	)

48 
	#BS_ICON
 0x00000040L

	)

49 
	#BS_BITMAP
 0x00000080L

	)

50 
	#BS_LEFT
 0x00000100L

	)

51 
	#BS_RIGHT
 0x00000200L

	)

52 
	#BS_CENTER
 0x00000300L

	)

53 
	#BS_TOP
 0x00000400L

	)

54 
	#BS_BOTTOM
 0x00000800L

	)

55 
	#BS_VCENTER
 0x00000C00L

	)

56 
	#BS_PUSHLIKE
 0x00001000L

	)

57 
	#BS_MULTILINE
 0x00002000L

	)

58 
	#BS_NOTIFY
 0x00004000L

	)

59 
	#BS_FLAT
 0x00008000L

	)

60 
	#BS_RIGHTBUTTON
 
BS_LEFTTEXT


	)

63 
	#BN_CLICKED
 0

	)

64 
	#BN_PAINT
 1

	)

65 
	#BN_HILITE
 2

	)

66 
	#BN_UNHILITE
 3

	)

67 
	#BN_DISABLE
 4

	)

68 
	#BN_DOUBLECLICKED
 5

	)

69 
	#BN_PUSHED
 
BN_HILITE


	)

70 
	#BN_UNPUSHED
 
BN_UNHILITE


	)

71 
	#BN_DBLCLK
 
BN_DOUBLECLICKED


	)

72 
	#BN_SETFOCUS
 6

	)

73 
	#BN_KILLFOCUS
 7

	)

76 
	#BM_GETCHECK
 0x00F0

	)

77 
	#BM_SETCHECK
 0x00F1

	)

78 
	#BM_GETSTATE
 0x00F2

	)

79 
	#BM_SETSTATE
 0x00F3

	)

80 
	#BM_SETSTYLE
 0x00F4

	)

81 
	#BM_CLICK
 0x00F5

	)

82 
	#BM_GETIMAGE
 0x00F6

	)

83 
	#BM_SETIMAGE
 0x00F7

	)

85 
	#BST_UNCHECKED
 0x0000

	)

86 
	#BST_CHECKED
 0x0001

	)

87 
	#BST_INDETERMINATE
 0x0002

	)

88 
	#BST_PUSHED
 0x0004

	)

89 
	#BST_FOCUS
 0x0008

	)

92 
	#PBM_SETRANGE
 0xF0A0

	)

93 
	#PBM_SETSTEP
 0xF0A1

	)

94 
	#PBM_SETPOS
 0xF0A2

	)

95 
	#PBM_DELTAPOS
 0xF0A3

	)

96 
	#PBM_STEPIT
 0xF0A4

	)

99 
	#PBS_NOTIFY
 0x0001L

	)

100 
	#PBS_VERTICAL
 0x0002L

	)

103 
	#PBN_REACHMAX
 1

	)

104 
	#PBN_REACHMIN
 2

	)

107 
	#LB_ADDSTRING
 0xF180

	)

108 
	#LB_INSERTSTRING
 0xF181

	)

109 
	#LB_DELETESTRING
 0xF182

	)

110 
	#LB_SELITEMRANGEEX
 0xF183

	)

111 
	#LB_RESETCONTENT
 0xF184

	)

112 
	#LB_SETSEL
 0xF185

	)

113 
	#LB_SETCURSEL
 0xF186

	)

114 
	#LB_GETSEL
 0xF187

	)

115 
	#LB_GETCURSEL
 0xF188

	)

116 
	#LB_GETTEXT
 0xF189

	)

117 
	#LB_GETTEXTLEN
 0xF18A

	)

118 
	#LB_GETCOUNT
 0xF18B

	)

119 
	#LB_SELECTSTRING
 0xF18C

	)

120 
	#LB_DIR
 0xF18D

	)

121 
	#LB_GETTOPINDEX
 0xF18E

	)

122 
	#LB_FINDSTRING
 0xF18F

	)

123 
	#LB_GETSELCOUNT
 0xF190

	)

124 
	#LB_GETSELITEMS
 0xF191

	)

125 
	#LB_SETTABSTOPS
 0xF192

	)

126 
	#LB_GETHORIZONTALEXTENT
 0xF193

	)

127 
	#LB_SETHORIZONTALEXTENT
 0xF194

	)

128 
	#LB_SETCOLUMNWIDTH
 0xF195

	)

129 
	#LB_ADDFILE
 0xF196

	)

130 
	#LB_SETTOPINDEX
 0xF197

	)

131 
	#LB_GETITEMRECT
 0xF198

	)

132 
	#LB_GETITEMDATA
 0xF199

	)

133 
	#LB_SETITEMDATA
 0xF19A

	)

134 
	#LB_SELITEMRANGE
 0xF19B

	)

135 
	#LB_SETANCHORINDEX
 0xF19C

	)

136 
	#LB_GETANCHORINDEX
 0xF19D

	)

137 
	#LB_SETCARETINDEX
 0xF19E

	)

138 
	#LB_GETCARETINDEX
 0xF19F

	)

139 
	#LB_SETITEMHEIGHT
 0xF1A0

	)

140 
	#LB_GETITEMHEIGHT
 0xF1A1

	)

141 
	#LB_FINDSTRINGEXACT
 0xF1A2

	)

142 
	#LB_SETLOCALE
 0xF1A5

	)

143 
	#LB_GETLOCALE
 0xF1A6

	)

144 
	#LB_SETCOUNT
 0xF1A7

	)

145 
	#LB_INITSTORAGE
 0xF1A8

	)

146 
	#LB_ITEMFROMPOINT
 0xF1A9

	)

147 
	#LB_SETTEXT
 0xF1AA

	)

148 
	#LB_GETCHECKMARK
 0xF1AB

	)

149 
	#LB_SETCHECKMARK
 0xF1AC

	)

150 
	#LB_GETITEMADDDATA
 0xF1AD

	)

151 
	#LB_SETITEMADDDATA
 0xF1AE

	)

152 
	#LB_MSGMAX
 0xF1B0

	)

155 
	#LBS_NOTIFY
 0x0001L

	)

156 
	#LBS_SORT
 0x0002L

	)

157 
	#LBS_NOREDRAW
 0x0004L

	)

158 
	#LBS_MULTIPLESEL
 0x0008L

	)

159 
	#LBS_OWNERDRAWFIXED
 0x0010L

	)

160 
	#LBS_OWNERDRAWVARIABLE
 0x0020L

	)

161 
	#LBS_HASSTRINGS
 0x0040L

	)

162 
	#LBS_USETABSTOPS
 0x0080L

	)

163 
	#LBS_NOINTEGRALHEIGHT
 0x0100L

	)

164 
	#LBS_MULTICOLUMN
 0x0200L

	)

165 
	#LBS_WANTKEYBOARDINPUT
 0x0400L

	)

166 
	#LBS_EXTENDEDSEL
 0x0800L

	)

167 
	#LBS_STANDARD
 (
LBS_NOTIFY
 | 
LBS_SORT
 | 
WS_VSCROLL
 | 
WS_BORDER
)

	)

168 
	#LBS_CHECKBOX
 0x1000L

	)

169 
	#LBS_USEICON
 0x2000L

	)

170 
	#LBS_AUTOCHECK
 0x4000L

	)

171 
	#LBS_AUTOCHECKBOX
 0x5000L

	)

173 
	#LBS_PRELOADED
 0x4000L

	)

174 
	#LBS_COMBOLBOX
 0x8000L

	)

177 
	#LBS_DISABLENOSCROLL
 0x1000L

	)

178 
	#LBS_NODATA
 0x2000L

	)

179 
	#LBS_NOSEL
 0x4000L

	)

183 
	#LBN_ERRSPACE
 (-2)

	)

184 
	#LBN_SELCHANGE
 1

	)

185 
	#LBN_DBLCLK
 2

	)

186 
	#LBN_SELCANCEL
 3

	)

187 
	#LBN_SETFOCUS
 4

	)

188 
	#LBN_KILLFOCUS
 5

	)

189 
	#LBN_CLICKCHECKMARK
 6

	)

192 
	#LB_OKAY
 0

	)

193 
	#LB_ERR
 (-1)

	)

194 
	#LB_ERRSPACE
 (-2)

	)

197 
	#EN_SETFOCUS
 0x0100

	)

198 
	#EN_KILLFOCUS
 0x0200

	)

199 
	#EN_CHANGE
 0x0300

	)

200 
	#EN_UPDATE
 0x0400

	)

201 
	#EN_ERRSPACE
 0x0500

	)

202 
	#EN_MAXTEXT
 0x0501

	)

203 
	#EN_HSCROLL
 0x0601

	)

204 
	#EN_VSCROLL
 0x0602

	)

207 
	#ES_LEFT
 0x0000L

	)

208 
	#ES_CENTER
 0x0001L

	)

209 
	#ES_RIGHT
 0x0002L

	)

210 
	#ES_MULTILINE
 0x0004L

	)

211 
	#ES_UPPERCASE
 0x0008L

	)

212 
	#ES_LOWERCASE
 0x0010L

	)

213 
	#ES_PASSWORD
 0x0020L

	)

214 
	#ES_AUTOVSCROLL
 0x0040L

	)

215 
	#ES_AUTOHSCROLL
 0x0080L

	)

216 
	#ES_NOHIDESEL
 0x0100L

	)

217 
	#ES_OEMCONVERT
 0x0400L

	)

218 
	#ES_READONLY
 0x0800L

	)

219 
	#ES_WANTRETURN
 0x1000L

	)

220 
	#ES_NUMBER
 0x2000L

	)

223 
	#EM_GETSEL
 0xF0B0

	)

224 
	#EM_SETSEL
 0xF0B1

	)

225 
	#EM_GETRECT
 0xF0B2

	)

226 
	#EM_SETRECT
 0xF0B3

	)

227 
	#EM_SETRECTNP
 0xF0B4

	)

228 
	#EM_SCROLL
 0xF0B5

	)

229 
	#EM_LINESCROLL
 0xF0B6

	)

230 
	#EM_SCROLLCARET
 0xF0B7

	)

231 
	#EM_GETMODIFY
 0xF0B8

	)

232 
	#EM_SETMODIFY
 0xF0B9

	)

233 
	#EM_GETLINECOUNT
 0xF0BA

	)

234 
	#EM_LINEINDEX
 0xF0BB

	)

235 
	#EM_SETHANDLE
 0xF0BC

	)

236 
	#EM_GETHANDLE
 0xF0BD

	)

237 
	#EM_GETTHUMB
 0xF0BE

	)

238 
	#EM_LINELENGTH
 0xF0C1

	)

239 
	#EM_REPLACESEL
 0xF0C2

	)

240 
	#EM_GETLINE
 0xF0C4

	)

241 
	#EM_LIMITTEXT
 0xF0C5

	)

242 
	#EM_CANUNDO
 0xF0C6

	)

243 
	#EM_UNDO
 0xF0C7

	)

244 
	#EM_FMTLINES
 0xF0C8

	)

245 
	#EM_LINEFROMCHAR
 0xF0C9

	)

246 
	#EM_SETTABSTOPS
 0xF0CB

	)

247 
	#EM_SETPASSWORDCHAR
 0xF0CC

	)

248 
	#EM_EMPTYUNDOBUFFER
 0xF0CD

	)

249 
	#EM_GETFIRSTVISIBLELINE
 0xF0CE

	)

250 
	#EM_SETREADONLY
 0xF0CF

	)

251 
	#EM_SETWORDBREAKPROC
 0xF0D0

	)

252 
	#EM_GETWORDBREAKPROC
 0xF0D1

	)

253 
	#EM_GETPASSWORDCHAR
 0xF0D2

	)

254 
	#EM_SETMARGINS
 0xF0D3

	)

255 
	#EM_GETMARGINS
 0xF0D4

	)

256 
	#EM_SETLIMITTEXT
 
EM_LIMITTEXT


	)

257 
	#EM_GETLIMITTEXT
 0xF0D5

	)

258 
	#EM_POSFROMCHAR
 0xF0D6

	)

259 
	#EM_CHARFROMPOS
 0xF0D7

	)

260 
	#EM_SETIMESTATUS
 0xF0D8

	)

261 
	#EM_GETIMESTATUS
 0xF0D9

	)

264 
	#STM_SETICON
 0xF170

	)

265 
	#STM_GETICON
 0xF171

	)

266 
	#STM_SETIMAGE
 0xF172

	)

267 
	#STM_GETIMAGE
 0xF173

	)

268 
	#STM_MSGMAX
 0xF174

	)

271 
	#STN_CLICKED
 0

	)

272 
	#STN_DBLCLK
 1

	)

273 
	#STN_ENABLE
 2

	)

274 
	#STN_DISABLE
 3

	)

277 
	#SS_LEFT
 0x00000000L

	)

278 
	#SS_CENTER
 0x00000001L

	)

279 
	#SS_RIGHT
 0x00000002L

	)

280 
	#SS_ICON
 0x00000003L

	)

281 
	#SS_BLACKRECT
 0x00000004L

	)

282 
	#SS_GRAYRECT
 0x00000005L

	)

283 
	#SS_WHITERECT
 0x00000006L

	)

284 
	#SS_BLACKFRAME
 0x00000007L

	)

285 
	#SS_GRAYFRAME
 0x00000008L

	)

286 
	#SS_WHITEFRAME
 0x00000009L

	)

287 
	#SS_GROUPBOX
 0x0000000AL

	)

288 
	#SS_SIMPLE
 0x0000000BL

	)

289 
	#SS_LEFTNOWORDWRAP
 0x0000000CL

	)

290 
	#SS_OWNERDRAW
 0x0000000DL

	)

291 
	#SS_BITMAP
 0x0000000EL

	)

292 
	#SS_ENHMETAFILE
 0x0000000FL

	)

293 
	#SS_TYPEMASK
 0x0000000FL

	)

294 
	#SS_NOPREFIX
 0x00000080L

	)

295 
	#SS_ETCHEDHORZ
 0x00000010L

	)

296 
	#SS_ETCHEDVERT
 0x00000011L

	)

297 
	#SS_ETCHEDFRAME
 0x00000012L

	)

298 
	#SS_ETCTYPEMAKS
 0x0000001FL

	)

299 
	#SS_NOTIFY
 0x00000100L

	)

300 
	#SS_CENTERIMAGE
 0x00000200L

	)

301 
	#SS_RIGHTJUST
 0x00000400L

	)

302 
	#SS_REALSIZEIMAGE
 0x00000800L

	)

303 
	#SS_SUNKEN
 0x00001000L

	)

304 
	#SS_ENDELLIPSIS
 0x00004000L

	)

305 
	#SS_PATHELLIPSIS
 0x00008000L

	)

306 
	#SS_WORDELLIPSIS
 0x0000C000L

	)

307 
	#SS_ELLIPSISMASK
 0x0000C000L

	)

310 
	#CBS_SIMPLE
 0x0001L

	)

311 
	#CBS_DROPDOWN
 0x0002L

	)

312 
	#CBS_DROPDOWNLIST
 0x0003L

	)

313 
	#CBS_OWNERDRAWFIXED
 0x0010L

	)

314 
	#CBS_OWNERDRAWVARIABLE
 0x0020L

	)

315 
	#CBS_AUTOHSCROLL
 0x0040L

	)

316 
	#CBS_OEMCONVERT
 0x0080L

	)

317 
	#CBS_SORT
 0x0100L

	)

318 
	#CBS_HASSTRINGS
 0x0200L

	)

319 
	#CBS_NOINTEGRALHEIGHT
 0x0400L

	)

320 
	#CBS_DISABLENOSCROLL
 0x0800L

	)

321 
	#CBS_UPPERCASE
 0x2000L

	)

322 
	#CBS_LOWERCASE
 0x4000L

	)

325 
	#CB_GETEDITSEL
 0xF140

	)

326 
	#CB_LIMITTEXT
 0xF141

	)

327 
	#CB_SETEDITSEL
 0xF142

	)

328 
	#CB_ADDSTRING
 0xF143

	)

329 
	#CB_DELETESTRING
 0xF144

	)

330 
	#CB_DIR
 0xF145

	)

331 
	#CB_GETCOUNT
 0xF146

	)

332 
	#CB_GETCURSEL
 0xF147

	)

333 
	#CB_GETLBTEXT
 0xF148

	)

334 
	#CB_GETLBTEXTLEN
 0xF149

	)

335 
	#CB_INSERTSTRING
 0xF14A

	)

336 
	#CB_RESETCONTENT
 0xF14B

	)

337 
	#CB_FINDSTRING
 0xF14C

	)

338 
	#CB_SELECTSTRING
 0xF14D

	)

339 
	#CB_SETCURSEL
 0xF14E

	)

340 
	#CB_SHOWDROPDOWN
 0xF14F

	)

341 
	#CB_GETITEMDATA
 0xF150

	)

342 
	#CB_SETITEMDATA
 0xF151

	)

343 
	#CB_GETDROPPEDCONTROLRECT
 0xF152

	)

344 
	#CB_SETITEMHEIGHT
 0xF153

	)

345 
	#CB_GETITEMHEIGHT
 0xF154

	)

346 
	#CB_SETEXTENDEDUI
 0xF155

	)

347 
	#CB_GETEXTENDEDUI
 0xF156

	)

348 
	#CB_GETDROPPEDSTATE
 0xF157

	)

349 
	#CB_FINDSTRINGEXACT
 0xF158

	)

350 
	#CB_SETLOCALE
 0xF159

	)

351 
	#CB_GETLOCALE
 0xF15A

	)

352 
	#CB_GETTOPINDEX
 0xF15b

	)

353 
	#CB_SETTOPINDEX
 0xF15¯

	)

354 
	#CB_GETHORIZONTALEXTENT
 0xF15d

	)

355 
	#CB_SETHORIZONTALEXTENT
 0xF15ê

	)

356 
	#CB_GETDROPPEDWIDTH
 0xF15‡

	)

357 
	#CB_SETDROPPEDWIDTH
 0xF160

	)

358 
	#CB_INITSTORAGE
 0xF161

	)

359 
	#CB_MSGMAX
 0xF162

	)

362 
	#CBN_ERRSPACE
 (-1)

	)

363 
	#CBN_SELCHANGE
 1

	)

364 
	#CBN_DBLCLK
 2

	)

365 
	#CBN_SETFOCUS
 3

	)

366 
	#CBN_KILLFOCUS
 4

	)

367 
	#CBN_EDITCHANGE
 5

	)

368 
	#CBN_EDITUPDATE
 6

	)

369 
	#CBN_DROPDOWN
 7

	)

370 
	#CBN_CLOSEUP
 8

	)

371 
	#CBN_SELENDOK
 9

	)

372 
	#CBN_SELENDCANCEL
 10

	)

375 
	#CB_OKAY
 0

	)

376 
	#CB_ERR
 (-1)

	)

377 
	#CB_ERRSPACE
 (-2)

	)

380 
	#SBS_HORZ
 0x0000L

	)

381 
	#SBS_VERT
 0x0001L

	)

382 
	#SBS_TYPEMASK
 0x0001L

	)

383 
	#SBS_TOPALIGN
 0x0002L

	)

384 
	#SBS_LEFTALIGN
 0x0002L

	)

385 
	#SBS_BOTTOMALIGN
 0x0004L

	)

386 
	#SBS_RIGHTALIGN
 0x0004L

	)

387 
	#SBS_SIZEBOXTOPLEFTALIGN
 0x0002L

	)

388 
	#SBS_SIZEBOXBOTTOMRIGHTALIGN
 0x0004L

	)

389 
	#SBS_SIZEBOX
 0x0008L

	)

390 
	#SBS_SIZEGRIP
 0x0010L

	)

393 
	#SB_HORZ
 0

	)

394 
	#SB_VERT
 1

	)

395 
	#SB_CTL
 2

	)

396 
	#SB_BOTH
 3

	)

399 
	#SB_LINEUP
 0

	)

400 
	#SB_LINELEFT
 0

	)

401 
	#SB_LINEDOWN
 1

	)

402 
	#SB_LINERIGHT
 1

	)

403 
	#SB_PAGEUP
 2

	)

404 
	#SB_PAGELEFT
 2

	)

405 
	#SB_PAGEDOWN
 3

	)

406 
	#SB_PAGERIGHT
 3

	)

407 
	#SB_THUMBPOSITION
 4

	)

408 
	#SB_THUMBTRACK
 5

	)

409 
	#SB_TOP
 6

	)

410 
	#SB_LEFT
 6

	)

411 
	#SB_BOTTOM
 7

	)

412 
	#SB_RIGHT
 7

	)

413 
	#SB_ENDSCROLL
 8

	)

415 
	#SIF_RANGE
 0x0001

	)

416 
	#SIF_PAGE
 0x0002

	)

417 
	#SIF_POS
 0x0004

	)

418 
	#SIF_DISABLENOSCROLL
 0x0008

	)

419 
	#SIF_TRACKPOS
 0x0010

	)

420 
	#SIF_ALL
 (
SIF_RANGE
 | 
SIF_PAGE
 | 
SIF_POS
 | 
SIF_TRACKPOS
)

	)

422 
	sègSCROLLINFO
 {

423 
UINT
 
	mcbSize
;

424 
UINT
 
	mfMask
;

425 
	mnMö
;

426 
	mnMax
;

427 
UINT
 
	mnPage
;

428 
	mnPos
;

429 
	mnTøckPos
;

430 } 
	tSCROLLINFO
, *
	tLPSCROLLINFO
;

431 
SCROLLINFO
 
	tCONST
 *
	tLPCSCROLLINFO
;

433 
WINAPI
 
SëS¸ﬁlInfo
(
HWND
, , 
LPCSCROLLINFO
, 
BOOL
);

434 
BOOL
 
WINAPI
 
GëS¸ﬁlInfo
(
HWND
, , 
LPSCROLLINFO
);

	@include/windef.h

8 
	#_WINDEF_H


	)

11 #ifde‡
VXWORKS


14 
	#__INC¡c⁄ãxth


	)

17 
	~<vxW‹ks.h
>

21 #i‚de‡
NULL


22 
	#NULL
 ((*)0)

	)

25 #i‚de‡
FALSE


26 
	#FALSE
 0

	)

29 #i‚de‡
TRUE


30 
	#TRUE
 1

	)

33 #i‚de‡
NOMINMAX


34 #i‚de‡
max


35 
	#max
(
a
,
b
Ë((◊Ë> (b)Ë? (aË: (b))

	)

38 #i‚de‡
mö


39 
	#mö
(
a
,
b
Ë((◊Ë< (b)Ë? (aË: (b))

	)

43 
	#CALLBACK


	)

44 
	#WINAPI


	)

45 
	#WINAPIV


	)

46 
	#APIENTRY
 
WINAPI


	)

47 
	#APIPRIVATE


	)

48 
	#PASCAL


	)

50 
	#FAR


	)

51 
	#NEAR


	)

52 
	#CONST
 c⁄°

	)

53 
	#CDECL


	)

55 
	#VOID
 

	)

56 *
	tPVOID
;

57 
	tCHAR
;

58 
	tSHORT
;

59 
	tLONG
;

60 
SHORT
 *
	tPSHORT
;

61 
LONG
 *
	tPLONG
;

63 #i‚de‡
VXWORKS


64 
	tUCHAR
;

65 
	tUSHORT
;

66 
	tULONG
;

67 #i‚de‡
__ITRON_TYPES_h_


68 
	tUINT
;

71 #i‚de‡
__ITRON_TYPES_h_


72 #i‚de‡
COMMON_H


73 
	tBOOL
;

79 
ULONG
 * 
	tPULONG
;

80 
USHORT
 * 
	tPUSHORT
;

81 
UCHAR
 * 
	tPUCHAR
;

82 * 
	tPSZ
;

83 #i‚de‡
__ITRON_TYPES_h_


84 
	tINT
;

86 *
	tPUINT
;

88 
	tDWORD
;

89 
	tBYTE
;

90 
	tWORD
;

92 
	tFLOAT
;

93 
FLOAT
 *
	tPFLOAT
;

94 
BOOL
 
	tNEAR
 *
	tPBOOL
;

95 
BOOL
 
	tFAR
 *
	tLPBOOL
;

96 
BYTE
 
	tNEAR
 *
	tPBYTE
;

97 
BYTE
 
	tFAR
 *
	tLPBYTE
;

98 
	tNEAR
 *
	tPINT
;

99 
	tFAR
 *
	tLPINT
;

100 
WORD
 
	tNEAR
 *
	tPWORD
;

101 
WORD
 
	tFAR
 *
	tLPWORD
;

102 
	tFAR
 *
	tLPLONG
;

103 
DWORD
 
	tNEAR
 *
	tPDWORD
;

104 
DWORD
 
	tFAR
 *
	tLPDWORD
;

105 
	tFAR
 *
	tLPVOID
;

106 
CONST
 
	tFAR
 *
	tLPCVOID
;

108 
	tWCHAR
;

109 
WCHAR
 *
	tPWCHAR
;

110 
WCHAR
 *
	tLPWCH
, *
	tPWCH
;

111 
CONST
 
	tWCHAR
 *
	tLPCWCH
, *
	tPCWCH
;

112 
WCHAR
 *
	tNWPSTR
;

113 
WCHAR
 *
	tLPWSTR
, *
	tPWSTR
;

114 
CONST
 
	tWCHAR
 *
	tLPCWSTR
, *
	tPCWSTR
;

116 
CHAR
 *
	tPCHAR
;

117 
CHAR
 *
	tLPCH
, *
	tPCH
;

118 
CONST
 
	tCHAR
 *
	tLPCCH
, *
	tPCCH
;

119 
CHAR
 *
	tNPSTR
;

120 
CHAR
 *
	tLPSTR
, *
	tPSTR
;

121 
CONST
 
	tCHAR
 *
	tLPCSTR
, *
	tPCSTR
;

122 
	tTCHAR
, *
	tPTCHAR
;

123 
	tTBYTE
 , *
	tPTBYTE
 ;

124 
LPSTR
 
	tLPTCH
, 
	tPTCH
;

125 
LPSTR
 
	tPTSTR
, 
	tLPTSTR
;

126 
LPCSTR
 
	tLPCTSTR
;

128 
	#__TEXT
(
quŸe
Ë
	)
quŸe

129 
	#TEXT
(
quŸe
Ë
	`__TEXT
(quŸe)

	)

131 (
FAR
 
	tWINAPI
 *
	tFARPROC
)();

132 (
NEAR
 
	tWINAPI
 *
	tNEARPROC
)();

133 (
WINAPI
 *
	tPROC
)();

135 
UINT
 
	tWPARAM
;

136 
LONG
 
	tLPARAM
;

137 
LONG
 
	tLRESULT
;

138 
LONG
 
	tHRESULT
;

140 
	#MAKEWORD
(
a
, 
b
Ë((
WORD
)(((
BYTE
)◊)Ë| ((WORD)((BYTE)(b))Ë<< 8))

	)

141 
	#MAKELONG
(
a
, 
b
Ë((
LONG
)(((
WORD
)◊)Ë| ((
DWORD
)((WORD)(b))Ë<< 16))

	)

142 
	#LOWORD
(
l
Ë((
WORD
)÷))

	)

143 
	#HIWORD
(
l
Ë((
WORD
)(((
DWORD
)÷Ë>> 16Ë& 0xFFFF))

	)

144 
	#LOBYTE
(
w
Ë((
BYTE
)(w))

	)

145 
	#HIBYTE
(
w
Ë((
BYTE
)(((
WORD
)(wË>> 8Ë& 0xFF))

	)

147 
	#PALETTEINDEX
(
i
Ë((
COLORREF
)(0x01000000 | (
DWORD
)(
WORD
)(i)))

	)

149 
DWORD
 
	tCOLORREF
;

150 
DWORD
 *
	tLPCOLORREF
;

153 
PVOID
 
	tHANDLE
;

155 
HANDLE
 *
	tPHANDLE
;

156 
HANDLE
 
	tNEAR
 *
	tSPHANDLE
;

157 
HANDLE
 
	tFAR
 *
	tLPHANDLE
;

158 
HANDLE
 
	tHGLOBAL
;

159 
HANDLE
 
	tHLOCAL
;

160 
HANDLE
 
	tGLOBALHANDLE
;

161 
HANDLE
 
	tLOCALHANDLE
;

163 
WORD
 
	tATOM
;

165 
hwnd
 * 
	tHWND
;

166 
hdc
 * 
	tHDC
;

167 
hcurs‹
 *
	tHCURSOR
;

168 
hgdiobj
 *
	tHGDIOBJ
;

169 
hgdiobj
 *
	tHBRUSH
;

170 
hgdiobj
 *
	tHPEN
;

171 
hgdiobj
 *
	tHFONT
;

172 
hgdiobj
 *
	tHBITMAP
;

173 
hgdiobj
 *
	tHRGN
;

174 
hgdiobj
 *
	tHPALETTE
;

175 
HANDLE
 
	tHICON
;

176 
HANDLE
 
	tHINSTANCE
;

177 
HANDLE
 
	tHMENU
;

	@include/windows.h

1 #i‚de‡
_WINDOWS_H


2 
	#_WINDOWS_H


	)

9 #ifde‡
__˝lu•lus


13 
	~"mwty≥s.h
"

14 
	~"wödef.h
"

15 
	~"wögdi.h
"

16 
	~"wöf⁄t.h
"

17 
	~"wökbd.h
"

18 
	~"wöu£r.h
"

21 
WINAPI
 
WöMaö
(
HINSTANCE
 
hIn°™˚
, HINSTANCE 
hPªvIn°™˚
,

22 
LPSTR
 
ÕCmdLöe
, 
nShowCmd
);

24 
MwU£rInô
(
ac
, **
av
);

31 
ty≥
;

32 
BOOL
 
°ockobj
;

33 } 
	tMWGDIOBJHDR
;

36 
	shgdiobj
 {

37 
MWGDIOBJHDR
 
hdr
;

42 
MWGDIOBJHDR
 
hdr
;

43 
°yÀ
;

44 
COLORREF
 
cﬁ‹
;

45 } 
	tMWPENOBJ
;

48 
MWGDIOBJHDR
 
hdr
;

49 
°yÀ
;

50 
COLORREF
 
cﬁ‹
;

51 } 
	tMWBRUSHOBJ
;

54 
MWGDIOBJHDR
 
hdr
;

55 
PMWFONT
 
pf⁄t
;

56 
«me
[32];

57 } 
	tMWFONTOBJ
;

60 
MWGDIOBJHDR
 
hdr
;

61 
width
;

62 
height
;

63 
∂™es
;

64 
bµ
;

65 
löñí
;

66 
size
;

67 
bôs
[1];

68 } 
	tMWBITMAPOBJ
;

71 
MWGDIOBJHDR
 
hdr
;

72 
MWCLIPREGION
 * 
rgn
;

73 } 
	tMWRGNOBJ
;

76 
	shdc
 {

77 
_mws¸ìndevi˚
 *
psd
;

78 
HWND
 
hwnd
;

79 
DWORD
 
Êags
;

80 
bkmode
;

81 
UINT
 
ãxèlign
;

82 
MWCOLORVAL
 
bkcﬁ‹
;

83 
MWCOLORVAL
 
ãxtcﬁ‹
;

84 
MWBRUSHOBJ
 * 
brush
;

85 
MWPENOBJ
 * 
≥n
;

86 
MWFONTOBJ
 * 
f⁄t
;

87 
MWBITMAPOBJ
 * 
bôm≠
;

88 
MWRGNOBJ
 * 
ªgi⁄
;

89 
døwmode
;

90 
POINT
 
±
;

94 
	shcurs‹
 {

95 
u£cou¡
;

96 
MWCURSOR
 
curs‹
;

101 
möPos
;

102 
maxPos
;

103 
curPos
;

104 
∑geSãp
;

105 
b¨Sèπ
;

106 
b¨Lí
;

107 
°©us
;

108 
RECT
 
rc
;

109 } 
	tMWSCROLLBARINFO
, *
	tPMWSCROLLBARINFO
;

112 
	shwnd
 {

113 
RECT
 
wöª˘
;

114 
RECT
 
˛úe˘
;

115 
RECT
 
ª°‹îc
;

116 
DWORD
 
°yÀ
;

117 
DWORD
 
ex°yÀ
;

118 
PWNDCLASS
 
pCœss
;

119 
hwnd
 *
∑ª¡
;

120 
hwnd
 *
ow√r
;

121 
hwnd
 *
chûdªn
;

122 
hwnd
 *
siblögs
;

123 
hwnd
 *
√xt
;

124 
hcurs‹
 *
curs‹
;

125 
hdc
 * 
owndc
;

126 
unm≠cou¡
;

127 
id
;

128 
CHAR
 
szTôÀ
[64];

129 
gŸPaötMsg
;

130 
∑ötSîül
;

131 
∑ötNC
;

132 
MWCLIPREGION
 * 
upd©e
;

133 
DWORD
 
u£rd©a
;

134 
DWORD
 
u£rd©a2
;

135 
MWSCROLLBARINFO
 
hs¸ﬁl
;

136 
MWSCROLLBARINFO
 
vs¸ﬁl
;

137 
√xåabyãs
;

138 
exåabyãs
[1];

142 
DWORD
 
WINAPI
 
GëTickCou¡
(
VOID
);

143 
VOID
 
WINAPI
 
SÀï
(
DWORD
 
dwMûli£c⁄ds
);

145 #ifde‡
__˝lu•lus


	@include/windowsx.h

1 
	#HANDLE_WM_COMMAND
(
hwnd
, 
wP¨am
, 
lP¨am
, 
‚
) \

2 ((
‚
)((
hwnd
), ()(
	`LOWORD
(
wP¨am
)), (
HWND
)(
lP¨am
), (
UINT
)
	`HIWORD
(wP¨am)), 0L)

	)

3 
	#FORWARD_WM_COMMAND
(
hwnd
, 
id
, 
hwndCé
, 
codeNŸify
, 
‚
) \

4 ()(
‚
)((
hwnd
), 
WM_COMMAND
, 
	`MAKEWPARAM
((
UINT
)(
id
),(UINT)(
codeNŸify
)), (
LPARAM
)(
HWND
)(
hwndCé
))

	)

6 
	#HANDLE_WM_CREATE
(
hwnd
, 
wP¨am
, 
lP¨am
, 
‚
) \

7 ((
‚
)((
hwnd
), (
LPCREATESTRUCT
)(
lP¨am
)Ë? 0L : (
LRESULT
)-1L)

	)

8 
	#FORWARD_WM_CREATE
(
hwnd
, 
ÕCª©eSåu˘
, 
‚
) \

9 (
BOOL
)(
DWORD
)(
‚
)((
hwnd
), 
WM_CREATE
, 0L, (
LPARAM
)(
LPCREATESTRUCT
)(
ÕCª©eSåu˘
))

	)

11 
	#HANDLE_WM_DESTROY
(
hwnd
, 
wP¨am
, 
lP¨am
, 
‚
) \

12 ((
‚
)(
hwnd
), 0L)

	)

13 
	#FORWARD_WM_DESTROY
(
hwnd
, 
‚
) \

14 ()(
‚
)((
hwnd
), 
WM_DESTROY
, 0L, 0L)

	)

16 
	#HANDLE_WM_ERASEBKGND
(
hwnd
, 
wP¨am
, 
lP¨am
, 
‚
) \

17 (
LRESULT
)(
DWORD
)(
BOOL
)(
‚
)((
hwnd
), (
HDC
)(
wP¨am
))

	)

18 
	#FORWARD_WM_ERASEBKGND
(
hwnd
, 
hdc
, 
‚
) \

19 (
BOOL
)(
DWORD
)(
‚
)((
hwnd
), 
WM_ERASEBKGND
, (
WPARAM
)(
HDC
)(
hdc
), 0L)

	)

21 
	#HANDLE_WM_LBUTTONDOWN
(
hwnd
, 
wP¨am
, 
lP¨am
, 
‚
) \

22 ((
‚
)((
hwnd
), 
FALSE
, ()()
	`LOWORD
(
lP¨am
), ()()
	`HIWORD
÷P¨am), (
UINT
)(
wP¨am
)), 0L)

	)

23 
	#FORWARD_WM_LBUTTONDOWN
(
hwnd
, 
fDoubÀClick
, 
x
, 
y
, 
keyFœgs
, 
‚
) \

24 ()(
‚
)((
hwnd
), (
fDoubÀClick
Ë? 
WM_LBUTTONDBLCLK
 : 
WM_LBUTTONDOWN
, (
WPARAM
)(
UINT
)(
keyFœgs
), 
	`MAKELPARAM
((
x
), (
y
)))

	)

26 
	#HANDLE_WM_LBUTTONDBLCLK
(
hwnd
, 
wP¨am
, 
lP¨am
, 
‚
) \

27 ((
‚
)((
hwnd
), 
TRUE
, ()()
	`LOWORD
(
lP¨am
), ()()
	`HIWORD
÷P¨am), (
UINT
)(
wP¨am
)), 0L)

	)

29 
	#HANDLE_WM_LBUTTONUP
(
hwnd
, 
wP¨am
, 
lP¨am
, 
‚
) \

30 ((
‚
)((
hwnd
), ()()
	`LOWORD
(
lP¨am
), ()()
	`HIWORD
÷P¨am), (
UINT
)(
wP¨am
)), 0L)

	)

31 
	#FORWARD_WM_LBUTTONUP
(
hwnd
, 
x
, 
y
, 
keyFœgs
, 
‚
) \

32 ()(
‚
)((
hwnd
), 
WM_LBUTTONUP
, (
WPARAM
)(
UINT
)(
keyFœgs
), 
	`MAKELPARAM
((
x
), (
y
)))

	)

34 
	#HANDLE_WM_MOUSEMOVE
(
hwnd
, 
wP¨am
, 
lP¨am
, 
‚
) \

35 ((
‚
)((
hwnd
), ()()
	`LOWORD
(
lP¨am
), ()()
	`HIWORD
÷P¨am), (
UINT
)(
wP¨am
)), 0L)

	)

36 
	#FORWARD_WM_MOUSEMOVE
(
hwnd
, 
x
, 
y
, 
keyFœgs
, 
‚
) \

37 ()(
‚
)((
hwnd
), 
WM_MOUSEMOVE
, (
WPARAM
)(
UINT
)(
keyFœgs
), 
	`MAKELPARAM
((
x
), (
y
)))

	)

39 
	#HANDLE_WM_SETFOCUS
(
hwnd
, 
wP¨am
, 
lP¨am
, 
‚
) \

40 ((
‚
)((
hwnd
), (
HWND
)(
wP¨am
)), 0L)

	)

41 
	#FORWARD_WM_SETFOCUS
(
hwnd
, 
hwndOldFocus
, 
‚
) \

42 ()(
‚
)((
hwnd
), 
WM_SETFOCUS
, (
WPARAM
)(
HWND
)(
hwndOldFocus
), 0L)

	)

44 
	#HANDLE_WM_KILLFOCUS
(
hwnd
, 
wP¨am
, 
lP¨am
, 
‚
) \

45 ((
‚
)((
hwnd
), (
HWND
)(
wP¨am
)), 0L)

	)

46 
	#FORWARD_WM_KILLFOCUS
(
hwnd
, 
hwndNewFocus
, 
‚
) \

47 ()(
‚
)((
hwnd
), 
WM_KILLFOCUS
, (
WPARAM
)(
HWND
)(
hwndNewFocus
), 0L)

	)

49 
	#HANDLE_WM_SETTEXT
(
hwnd
, 
wP¨am
, 
lP¨am
, 
‚
) \

50 ((
‚
)((
hwnd
), (
LPCTSTR
)(
lP¨am
)), 0L)

	)

51 
	#FORWARD_WM_SETTEXT
(
hwnd
, 
ÕszText
, 
‚
) \

52 ()(
‚
)((
hwnd
), 
WM_SETTEXT
, 0L, (
LPARAM
)(
LPCTSTR
)(
ÕszText
))

	)

54 
	#HANDLE_MSG
(
hwnd
, 
mesßge
, 
‚
) \

55 (
mesßge
):  
HANDLE_
##
	`mesßge
((
hwnd
), (
wP¨am
), (
lP¨am
), (
‚
))

	)

	@include/winfont.h

9 
	#TMPF_FIXED_PITCH
 0x01

	)

10 
	#TMPF_VECTOR
 0x02

	)

11 
	#TMPF_TRUETYPE
 0x04

	)

12 
	#TMPF_DEVICE
 0x08

	)

14 
	sègTEXTMETRIC
 {

15 
LONG
 
	mtmHeight
;

16 
LONG
 
	mtmAs˚¡
;

17 
LONG
 
	mtmDes˚¡
;

18 
LONG
 
	mtmI¡î«lLódög
;

19 
LONG
 
	mtmExã∫ÆLódög
;

20 
LONG
 
	mtmAveCh¨Width
;

21 
LONG
 
	mtmMaxCh¨Width
;

22 
LONG
 
	mtmWeight
;

23 
LONG
 
	mtmOvîh™g
;

24 
LONG
 
	mtmDigôizedA•e˘X
;

25 
LONG
 
	mtmDigôizedA•e˘Y
;

26 
BYTE
 
	mtmFú°Ch¨
;

27 
BYTE
 
	mtmLa°Ch¨
;

28 
BYTE
 
	mtmDeÁu…Ch¨
;

29 
BYTE
 
	mtmBªakCh¨
;

30 
BYTE
 
	mtmIèlic
;

31 
BYTE
 
	mtmUndîlöed
;

32 
BYTE
 
	mtmSåuckOut
;

33 
BYTE
 
	mtmPôchAndFamûy
;

34 
BYTE
 
	mtmCh¨Së
;

35 } 
	tTEXTMETRIC
, *
	tPTEXTMETRIC
, 
	tNEAR
 *
	tNPTEXTMETRIC
, 
	tFAR
 *
	tLPTEXTMETRIC
;

37 
BOOL
 
WINAPI
 
GëTextMërics
(
HDC
 
hdc
, 
LPTEXTMETRIC
 
Õtm
);

38 
BOOL
 
WINAPI
 
GëCh¨Width
(
HDC
 
hdc
,
UINT
 
iFú°Ch¨
,UINT 
iLa°Ch¨
,
LPINT
 
ÕBuf„r
);

39 
BOOL
 
WINAPI
 
GëTextExã¡Poöt
(
HDC
 
hdc
,
LPCTSTR
 
ÕszSå
,
cchSåög
,

40 
LPSIZE
 
ÕSize
);

41 
BOOL
 
WINAPI
 
GëTextExã¡ExPoöt
(
HDC
 
hdc
,
LPCTSTR
 
ÕszSå
,
cchSåög
,

42 
nMaxExã¡
,
LPINT
 
ÕnFô
,LPINT 
ÆpDx
,
LPSIZE
 
ÕSize
);

47 
LONG
 
	mlfHeight
;

48 
LONG
 
	mlfWidth
;

49 
LONG
 
	mlfEsˇ≥mít
;

50 
LONG
 
	mlfOrõ¡©i⁄
;

51 
LONG
 
	mlfWeight
;

52 
BYTE
 
	mlfIèlic
;

53 
BYTE
 
	mlfUndîlöe
;

54 
BYTE
 
	mlfSåikeOut
;

55 
BYTE
 
	mlfCh¨Së
;

56 
BYTE
 
	mlfOutPªcisi⁄
;

57 
BYTE
 
	mlfClùPªcisi⁄
;

58 
BYTE
 
	mlfQuÆôy
;

59 
BYTE
 
	mlfPôchAndFamûy
;

60 
CHAR
 
	mlfFa˚Name
[
MWLF_FACESIZE
];

61 } 
	tLOGFONT
, *
	tPLOGFONT
, 
	tNEAR
 *
	tNPLOGFONT
, 
	tFAR
 *
	tLPLOGFONT
;

63 
	#LF_FACESIZE
 
MWLF_FACESIZE


	)

66 
	#FW_DONTCARE
 
MWLF_WEIGHT_DEFAULT


	)

67 
	#FW_THIN
 
MWLF_WEIGHT_THIN


	)

68 
	#FW_EXTRALIGHT
 
MWLF_WEIGHT_EXTRALIGHT


	)

69 
	#FW_LIGHT
 
MWLF_WEIGHT_LIGHT


	)

70 
	#FW_NORMAL
 
MWLF_WEIGHT_NORMAL


	)

71 
	#FW_MEDIUM
 
MWLF_WEIGHT_MEDIUM


	)

72 
	#FW_SEMIBOLD
 
MWLF_WEIGHT_DEMIBOLD


	)

73 
	#FW_BOLD
 
MWLF_WEIGHT_BOLD


	)

74 
	#FW_EXTRABOLD
 
MWLF_WEIGHT_EXTRABOLD


	)

75 
	#FW_HEAVY
 
MWLF_WEIGHT_BLACK


	)

76 
	#FW_ULTRALIGHT
 
FW_EXTRALIGHT


	)

77 
	#FW_REGULAR
 
FW_NORMAL


	)

78 
	#FW_DEMIBOLD
 
FW_SEMIBOLD


	)

79 
	#FW_ULTRABOLD
 
FW_EXTRABOLD


	)

80 
	#FW_BLACK
 
FW_HEAVY


	)

83 
	#OUT_DEFAULT_PRECIS
 
MWLF_TYPE_DEFAULT


	)

84 
	#OUT_STRING_PRECIS
 1

	)

85 
	#OUT_CHARACTER_PRECIS
 2

	)

86 
	#OUT_STROKE_PRECIS
 3

	)

87 
	#OUT_TT_PRECIS
 
MWLF_TYPE_SCALED


	)

88 
	#OUT_DEVICE_PRECIS
 
MFLF_TYPE_RASTER


	)

89 
	#OUT_RASTER_PRECIS
 
MFLF_TYPE_RASTER


	)

90 
	#OUT_TT_ONLY_PRECIS
 
MWLF_TYPE_TRUETYPE


	)

91 
	#OUT_OUTLINE_PRECIS
 8

	)

92 
	#OUT_SCREEN_OUTLINE_PRECIS
 9

	)

95 
	#CLIP_DEFAULT_PRECIS
 0

	)

96 
	#CLIP_CHARACTER_PRECIS
 1

	)

97 
	#CLIP_STROKE_PRECIS
 2

	)

98 
	#CLIP_MASK
 0xf

	)

99 
	#CLIP_LH_ANGLES
 (1<<4)

	)

100 
	#CLIP_TT_ALWAYS
 (2<<4)

	)

101 
	#CLIP_EMBEDDED
 (8<<4)

	)

104 
	#DEFAULT_QUALITY
 0

	)

105 
	#DRAFT_QUALITY
 1

	)

106 
	#PROOF_QUALITY
 2

	)

107 
	#NONANTIALIASED_QUALITY
 3

	)

108 
	#ANTIALIASED_QUALITY
 4

	)

111 
	#ANSI_CHARSET
 
MWLF_CHARSET_ANSI


	)

112 
	#DEFAULT_CHARSET
 
MWLF_CHARSET_DEFAULT


	)

113 
	#SYMBOL_CHARSET
 2

	)

114 
	#OEM_CHARSET
 
MWLF_CHARSET_OEM


	)

117 
	#MWLF_PITCH_DEFAULT
 0

	)

118 
	#MWLF_PITCH_FIXED
 1

	)

119 
	#MWLF_PITCH_VARIABLE
 2

	)

122 
	#DEFAULT_PITCH
 
MWLF_PITCH_DEFAULT


	)

123 
	#FIXED_PITCH
 
MWLF_PITCH_FIXED


	)

124 
	#VARIABLE_PITCH
 
MWLF_PITCH_VARIABLE


	)

125 
	#MONO_FONT
 8

	)

134 
	#MWLF_FAMILY_DEFAULT
 (0<<4Ë

	)

135 
	#MWLF_FAMILY_SERIF
 (1<<4Ë

	)

136 
	#MWLF_FAMILY_SANSSERIF
 (2<<4Ë

	)

137 
	#MWLF_FAMILY_MODERN
 (3<<4Ë

	)

140 
	#MWLF_FAMILY_BITSTREAM
 (6<<4Ë

	)

141 
	#MWLF_FAMILY_ADOBE
 (7<<4Ë

	)

144 
	#FF_DONTCARE
 
MWLF_FAMILY_DEFAULT


	)

145 
	#FF_ROMAN
 
MWLF_FAMILY_SERIF


	)

146 
	#FF_SWISS
 
MWLF_FAMILY_SANSSERIF


	)

147 
	#FF_MODERN
 
MWLF_FAMILY_MODERN


	)

148 
	#FF_SCRIPT
 (4<<4Ë

	)

149 
	#FF_DECORATIVE
 (5<<4Ë

	)

151 
HFONT
 
WINAPI
 
Cª©eF⁄t
(
nHeight
, 
nWidth
, 
nEsˇ≥mít
,

152 
nOrõ¡©i⁄
, 
‚Weight
, 
DWORD
 
fdwIèlic
,

153 
DWORD
 
fdwUndîlöe
, DWORD 
fdwSåikeOut
,DWORD 
fdwCh¨Së
,

154 
DWORD
 
fdwOuçutPªcisi⁄
,DWORD 
fdwClùPªcisi⁄
,

155 
DWORD
 
fdwQuÆôy
, DWORD 
fdwPôchAndFamûy
, 
LPCSTR
 
ÕszFa˚
);

156 
HFONT
 
WINAPI
 
Cª©eF⁄tIndúe˘
(
CONST
 
LOGFONT
 *
Õlf
);

	@include/wingdi.h

9 
MWCOORD
 
	tGDICOORD
;

12 
MWRECT
 
	tRECT
;

13 
MWPOINT
 
	tPOINT
;

16 
	sègRECT
 {

17 
GDICOORD
 
	mÀ·
;

18 
GDICOORD
 
	mt›
;

19 
GDICOORD
 
	mright
;

20 
GDICOORD
 
	mbŸtom
;

21 } 
	tRECT
;

23 
	sègPOINT
 {

24 
GDICOORD
 
	mx
;

25 
GDICOORD
 
	my
;

26 } 
	tPOINT
;

29 
RECT
 
	tNEAR
 *
	tPRECT
, 
	tFAR
 *
	tLPRECT
;

31 
POINT
 
	tNEAR
 *
	tPPOINT
, 
	tFAR
 *
	tLPPOINT
;

33 
	sègSIZE
 {

34 
GDICOORD
 
	mcx
;

35 
GDICOORD
 
	mcy
;

36 } 
	tSIZE
, 
	tNEAR
 *
	tPSIZE
, 
	tFAR
 *
	tLPSIZE
;

39 
	#DCX_WINDOW
 0x00000001L

	)

40 
	#DCX_CACHE
 0x00000002L

	)

41 
	#DCX_NORESETATTRS
 0x00000004L

	)

42 
	#DCX_CLIPCHILDREN
 0x00000008L

	)

43 
	#DCX_CLIPSIBLINGS
 0x00000010L

	)

44 
	#DCX_PARENTCLIP
 0x00000020L

	)

45 
	#DCX_EXCLUDERGN
 0x00000040L

	)

46 
	#DCX_INTERSECTRGN
 0x00000080L

	)

47 
	#DCX_EXCLUDEUPDATE
 0x00000100L

	)

48 
	#DCX_INTERSECTUPDATE
 0x00000200L

	)

49 
	#DCX_LOCKWINDOWUPDATE
 0x00000400L

	)

50 
	#DCX_VALIDATE
 0x00200000L

	)

51 
	#DCX_DEFAULTCLIP
 0x80000000L

	)

53 
HDC
 
WINAPI
 
GëDCEx
(
HWND
 
hwnd
,
HRGN
 
hrgnClù
,
DWORD
 
Êags
);

54 
HDC
 
WINAPI
 
GëDC
(
HWND
 
hWnd
);

55 
HDC
 
WINAPI
 
GëWödowDC
(
HWND
 
hWnd
);

56 
WINAPI
 
Rñó£DC
(
HWND
 
hWnd
, 
HDC
 
hDC
);

57 
BOOL
 
WINAPI
 
DñëeDC
(
HDC
 
hdc
);

59 
	sègPAINTSTRUCT
 {

60 
HDC
 
	mhdc
;

61 
BOOL
 
	mfEø£
;

62 
RECT
 
	mrcPaöt
;

63 
BOOL
 
	mfRe°‹e
;

64 
BOOL
 
	mfIncUpd©e
;

65 
BYTE
 
	mrgbRe£rved
[32];

66 } 
	tPAINTSTRUCT
, *
	tPPAINTSTRUCT
, *
	tNPPAINTSTRUCT
, 
	tFAR
 *
	tLPPAINTSTRUCT
;

68 
HDC
 
WINAPI
 
BegöPaöt
(
HWND
 
hWnd
, 
LPPAINTSTRUCT
 
ÕPaöt
);

69 
BOOL
 
WINAPI
 
EndPaöt
(
HWND
 
hWnd
, 
CONST
 
PAINTSTRUCT
 *
ÕPaöt
);

71 
	#RGB
(
r
,
g
,
b
Ë
	`MWRGB
‘,g,b)

	)

72 
	#GëRVÆue
(
rgb
Ë((
BYTE
)‘gb))

	)

73 
	#GëGVÆue
(
rgb
Ë((
BYTE
)(((
WORD
)‘gb)Ë>> 8))

	)

74 
	#GëBVÆue
(
rgb
Ë((
BYTE
)(‘gb)>>16))

	)

77 
	#TRANSPARENT
 1

	)

78 
	#OPAQUE
 2

	)

81 
	#TA_NOUPDATECP
 0

	)

82 
	#TA_UPDATECP
 1

	)

84 
	#TA_LEFT
 0

	)

85 
	#TA_RIGHT
 2

	)

86 
	#TA_CENTER
 6

	)

88 
	#TA_TOP
 0

	)

89 
	#TA_BOTTOM
 8

	)

90 
	#TA_BASELINE
 24

	)

91 
	#TA_RTLREADING
 256

	)

92 
	#TA_MASK
 (
TA_BASELINE
+
TA_CENTER
+
TA_UPDATECP
+
TA_RTLREADING
)

	)

94 
COLORREF
 
WINAPI
 
SëTextCﬁ‹
(
HDC
, COLORREF);

95 
COLORREF
 
WINAPI
 
SëBkCﬁ‹
(
HDC
, COLORREF);

96 
WINAPI
 
SëBkMode
(
HDC
, );

97 
UINT
 
WINAPI
 
SëTextAlign
(
HDC
 
hdc
, UINT 
fMode
);

100 
	#R2_BLACK
 (
MWMODE_CLEAR
+1Ë

	)

101 
	#R2_NOTMERGEPEN
 (
MWMODE_NOR
+1Ë

	)

102 
	#R2_MASKNOTPEN
 (
MWMODE_ANDINVERTED
+1Ë

	)

103 
	#R2_NOTCOPYPEN
 (
MWMODE_COPYINVERTED
+1Ë

	)

104 
	#R2_MASKPENNOT
 (
MWMODE_ANDREVERSE
+1Ë

	)

105 
	#R2_NOT
 (
MWMODE_INVERT
+1Ë

	)

106 
	#R2_XORPEN
 (
MWMODE_XOR
+1Ë

	)

107 
	#R2_NOTMASKPEN
 (
MWMODE_NAND
+1Ë

	)

108 
	#R2_MASKPEN
 (
MWMODE_AND
+1Ë

	)

109 
	#R2_NOTXORPEN
 (
MWMODE_EQUIV
+1Ë

	)

110 
	#R2_NOP
 (
MWMODE_NOOP
+1Ë

	)

111 
	#R2_MERGENOTPEN
 (
MWMODE_ORINVERTED
+1Ë

	)

112 
	#R2_COPYPEN
 (
MWMODE_COPY
+1Ë

	)

113 
	#R2_MERGEPENNOT
 (
MWMODE_ORREVERSE
+1Ë

	)

114 
	#R2_MERGEPEN
 (
MWMODE_OR
+1Ë

	)

115 
	#R2_WHITE
 (
MWMODE_SETTO1
+1Ë

	)

116 
	#R2_LAST
 16

	)

118 
WINAPI
 
SëROP2
(
HDC
 
hdc
, 
‚DøwMode
);

120 
	#GDI_ERROR
 (0xFFFFFFFFL)

	)

121 
	#CLR_INVALID
 0xFFFFFFFF

	)

123 
COLORREF
 
WINAPI
 
GëPixñ
(
HDC
 
hdc
, 
x
, 
y
);

124 
COLORREF
 
WINAPI
 
SëPixñ
(
HDC
 
hdc
, 
x
, 
y
, COLORREF 
¸Cﬁ‹
);

125 
BOOL
 
WINAPI
 
MoveToEx
(
HDC
 
hdc
, 
x
, 
y
, 
LPPOINT
 
ÕPoöt
);

126 
BOOL
 
WINAPI
 
LöeTo
(
HDC
 
hdc
, 
x
, 
y
);

127 
BOOL
 
WINAPI
 
Pﬁylöe
(
HDC
 
hdc
, 
CONST
 
POINT
 *
Õ±
, 
cPoöts
);

128 
BOOL
 
WINAPI
 
PﬁyPﬁyg⁄
(
HDC
 
hdc
, 
CONST
 
POINT
 *
ÕPoöts
, 
LPINT
 
ÕPﬁyCou¡s
,

129 
nCou¡
);

130 
BOOL
 
WINAPI
 
Re˘™gÀ
(
HDC
 
hdc
, 
nLe·
, 
nT›
, 
nRight
,
nBŸtom
);

131 
BOOL
 
WINAPI
 
EŒù£
(
HDC
 
hdc
, 
nLe·Re˘
, 
nT›Re˘
, 
nRightRe˘
,

132 
nBŸtomRe˘
);

133 
BOOL
 
WINAPI
 
Arc
(
HDC
 
hdc
, 
nLe·Re˘
, 
nT›Re˘
, 
nRightRe˘
,

134 
nBŸtomRe˘
, 
nXSèπArc
, 
nYSèπArc
,

135 
nXEndArc
, 
nYEndArc
);

136 
BOOL
 
WINAPI
 
Põ
(
HDC
 
hdc
, 
nLe·Re˘
, 
nT›Re˘
, 
nRightRe˘
,

137 
nBŸtomRe˘
, 
nXRadül1
, 
nYRadül1
,

138 
nXRadül2
, 
nYRadül2
);

139 
BOOL
 
WINAPI
 
Pﬁyg⁄
(
HDC
 
hdc
, 
CONST
 
POINT
 *
ÕPoöts
, 
nCou¡
);

140 
WINAPI
 
FûlRe˘
(
HDC
 
hDC
, 
CONST
 
RECT
 *
Õrc
, 
HBRUSH
 
hbr
);

143 
	#ETO_OPAQUE
 0x0002

	)

144 
	#ETO_CLIPPED
 0x0004

	)

146 
BOOL
 
WINAPI
 
TextOut
(
HDC
 
hdc
, 
x
, 
y
, 
LPCSTR
 
ÕszSåög
, 
cbSåög
);

147 
BOOL
 
WINAPI
 
ExtTextOut
(
HDC
 
hdc
, 
x
, 
y
, 
UINT
 
fuO±i⁄s
,

148 
CONST
 
RECT
 *
Õrc
, 
LPCSTR
 
ÕszSåög
, 
UINT
 
cbCou¡
,

149 
CONST
 
INT
 *
ÕDx
);

150 
BOOL
 
WINAPI
 
ExtTextOutW
(
HDC
 
hdc
, 
x
, 
y
, 
UINT
 
fuO±i⁄s
,

151 
CONST
 
RECT
 *
Õrc
, 
LPCWSTR
 
ÕszSåög
, 
UINT
 
cbCou¡
,

152 
CONST
 
INT
 *
ÕDx
);

155 
	#DT_TOP
 0x00000000

	)

156 
	#DT_LEFT
 0x00000000

	)

157 
	#DT_CENTER
 0x00000001

	)

158 
	#DT_RIGHT
 0x00000002

	)

159 
	#DT_VCENTER
 0x00000004

	)

160 
	#DT_BOTTOM
 0x00000008

	)

161 
	#DT_WORDBREAK
 0x00000010

	)

162 
	#DT_SINGLELINE
 0x00000020

	)

163 
	#DT_EXPANDTABS
 0x00000040

	)

164 
	#DT_TABSTOP
 0x00000080

	)

165 
	#DT_NOCLIP
 0x00000100

	)

166 
	#DT_EXTERNALLEADING
 0x00000200

	)

167 
	#DT_CALCRECT
 0x00000400

	)

168 
	#DT_NOPREFIX
 0x00000800

	)

169 
	#DT_INTERNAL
 0x00001000

	)

170 
	#DT_EDITCONTROL
 0x00002000

	)

171 
	#DT_PATH_ELLIPSIS
 0x00004000

	)

172 
	#DT_END_ELLIPSIS
 0x00008000

	)

173 
	#DT_MODIFYSTRING
 0x00010000

	)

174 
	#DT_RTLREADING
 0x00020000

	)

175 
	#DT_WORD_ELLIPSIS
 0x00040000

	)

177 
WINAPI
 
DøwTextA
(
HDC
 
hdc
, 
LPCSTR
 
ÕSåög
, 
nCou¡
, 
LPRECT
 
ÕRe˘
,

178 
UINT
 
uF‹m©
);

179 
WINAPI
 
DøwTextW
(
HDC
 
hdc
, 
LPCWSTR
 
ÕSåög
, 
nCou¡
, 
LPRECT
 
ÕRe˘
,

180 
UINT
 
uF‹m©
);

181 
	#DøwText
 
DøwTextA


	)

183 
BOOL
 
WINAPI
 
DøwDIB
(
HDC
 
hdc
,
x
, 
y
,
PMWIMAGEHDR
 
pimage
);

186 
	#COLOR_SCROLLBAR
 0

	)

187 
	#COLOR_BACKGROUND
 1

	)

188 
	#COLOR_ACTIVECAPTION
 2

	)

189 
	#COLOR_INACTIVECAPTION
 3

	)

190 
	#COLOR_MENU
 4

	)

191 
	#COLOR_WINDOW
 5

	)

192 
	#COLOR_WINDOWFRAME
 6

	)

193 
	#COLOR_MENUTEXT
 7

	)

194 
	#COLOR_WINDOWTEXT
 8

	)

195 
	#COLOR_CAPTIONTEXT
 9

	)

196 
	#COLOR_ACTIVEBORDER
 10

	)

197 
	#COLOR_INACTIVEBORDER
 11

	)

198 
	#COLOR_APPWORKSPACE
 12

	)

199 
	#COLOR_HIGHLIGHT
 13

	)

200 
	#COLOR_HIGHLIGHTTEXT
 14

	)

201 
	#COLOR_BTNFACE
 15

	)

202 
	#COLOR_BTNSHADOW
 16

	)

203 
	#COLOR_GRAYTEXT
 17

	)

204 
	#COLOR_BTNTEXT
 18

	)

205 
	#COLOR_INACTIVECAPTIONTEXT
 19

	)

206 
	#COLOR_BTNHIGHLIGHT
 20

	)

207 
	#COLOR_3DDKSHADOW
 21

	)

208 
	#COLOR_3DLIGHT
 22

	)

209 
	#COLOR_INFOTEXT
 23

	)

210 
	#COLOR_INFOBK
 24

	)

211 
	#COLOR_DESKTOP
 
COLOR_BACKGROUND


	)

212 
	#COLOR_3DFACE
 
COLOR_BTNFACE


	)

213 
	#COLOR_3DSHADOW
 
COLOR_BTNSHADOW


	)

214 
	#COLOR_3DHIGHLIGHT
 
COLOR_BTNHIGHLIGHT


	)

215 
	#COLOR_3DHILIGHT
 
COLOR_BTNHIGHLIGHT


	)

216 
	#COLOR_BTNHILIGHT
 
COLOR_BTNHIGHLIGHT


	)

217 
	#COLOR_ALTERNATEBUTTONFACE
 25

	)

218 
	#COLOR_HOTLIGHT
 26

	)

219 
	#COLOR_GRADIENTACTIVECAPTION
 27

	)

220 
	#COLOR_GRADIENTINACTIVECAPTION
 28

	)

222 
DWORD
 
WINAPI
 
GëSysCﬁ‹
(
nIndex
);

223 
COLORREF
 
WINAPI
 
SëSysCﬁ‹
(
nIndex
, COLORREF 
¸Cﬁ‹
);

226 
	#WHITE_BRUSH
 0

	)

227 
	#LTGRAY_BRUSH
 1

	)

228 
	#GRAY_BRUSH
 2

	)

229 
	#DKGRAY_BRUSH
 3

	)

230 
	#BLACK_BRUSH
 4

	)

231 
	#NULL_BRUSH
 5

	)

232 
	#HOLLOW_BRUSH
 
NULL_BRUSH


	)

233 
	#WHITE_PEN
 6

	)

234 
	#BLACK_PEN
 7

	)

235 
	#NULL_PEN
 8

	)

236 
	#OEM_FIXED_FONT
 10

	)

237 
	#ANSI_FIXED_FONT
 11

	)

238 
	#ANSI_VAR_FONT
 12

	)

239 
	#SYSTEM_FONT
 13

	)

240 
	#DEVICE_DEFAULT_FONT
 14

	)

241 
	#DEFAULT_PALETTE
 15

	)

242 
	#SYSTEM_FIXED_FONT
 16

	)

243 
	#DEFAULT_GUI_FONT
 17

	)

244 
	#DC_BRUSH
 18

	)

245 
	#DC_PEN
 19

	)

246 
	#STOCK_LAST
 19

	)

249 
	#OBJ_PEN
 1

	)

250 
	#OBJ_BRUSH
 2

	)

251 
	#OBJ_DC
 3

	)

252 
	#OBJ_METADC
 4

	)

253 
	#OBJ_PAL
 5

	)

254 
	#OBJ_FONT
 6

	)

255 
	#OBJ_BITMAP
 7

	)

256 
	#OBJ_REGION
 8

	)

257 
	#OBJ_METAFILE
 9

	)

258 
	#OBJ_MEMDC
 10

	)

259 
	#OBJ_EXTPEN
 11

	)

260 
	#OBJ_ENHMETADC
 12

	)

261 
	#OBJ_ENHMETAFILE
 13

	)

263 
HGDIOBJ
 
WINAPI
 
GëStockObje˘
(
nObje˘
);

264 
HGDIOBJ
 
WINAPI
 
Sñe˘Obje˘
(
HDC
 
hdc
, HGDIOBJ 
hObje˘
);

265 
BOOL
 
WINAPI
 
DñëeObje˘
(
HGDIOBJ
 
hObje˘
);

266 
WINAPI
 
Sñe˘ClùRgn
(
HDC
 
hdc
, 
HRGN
 
hrgn
);

267 
WINAPI
 
ExtSñe˘ClùRgn
(
HDC
 
hdc
, 
HRGN
 
hrgn
, 
‚Mode
);

268 
WINAPI
 
GëUpd©eRgn
(
HWND
 
hwnd
, 
HRGN
 
hrgn
, 
BOOL
 
bEø£
);

269 
BOOL
 
WINAPI
 
GëUpd©eRe˘
(
HWND
 
hwnd
, 
LPRECT
 
ÕRe˘
, BOOL 
bEø£
);

272 
	#BS_SOLID
 0

	)

273 
	#BS_NULL
 1

	)

274 
	#BS_HOLLOW
 
BS_NULL


	)

276 
HBRUSH
 
WINAPI
 
Cª©eSﬁidBrush
(
COLORREF
 
¸Cﬁ‹
);

279 
	#PS_SOLID
 0

	)

280 
	#PS_NULL
 5

	)

282 
HPEN
 
WINAPI
 
Cª©ePí
(
nPíStyÀ
, 
nWidth
, 
COLORREF
 
¸Cﬁ‹
);

284 
HBITMAP
 
WINAPI
 
Cª©eCom∑tibÀBôm≠
(
HDC
 
hdc
, 
nWidth
, 
nHeight
);

285 
HDC
 
WINAPI
 
Cª©eCom∑tibÀDC
(HDC 
hdc
);

288 
	#SRCCOPY
 (
DWORD
)
MWROP_COPY


	)

289 
	#SRCPAINT
 (
DWORD
)
MWROP_OR


	)

290 
	#SRCAND
 (
DWORD
)
MWROP_AND


	)

291 
	#SRCINVERT
 (
DWORD
)
MWROP_XOR


	)

292 
	#SRCERASE
 (
DWORD
)
MWROP_ANDREVERSE


	)

293 
	#NOTSRCCOPY
 (
DWORD
)
MWROP_COPYINVERTED


	)

294 
	#NOTSRCERASE
 (
DWORD
)
MWROP_NOR


	)

295 
	#MERGEPAINT
 (
DWORD
)
MWROP_ORINVERTED


	)

296 
	#DSTINVERT
 (
DWORD
)
MWROP_INVERT


	)

297 
	#BLACKNESS
 (
DWORD
)
MWROP_CLEAR


	)

298 
	#WHITENESS
 (
DWORD
)
MWROP_SET


	)

300 
	#MERGECOPY
 (
DWORD
)0x00C000CA

	)

301 
	#PATCOPY
 (
DWORD
)0x00F00021

	)

302 
	#PATPAINT
 (
DWORD
)0x00FB0A09

	)

303 
	#PATINVERT
 (
DWORD
)0x005A0049

	)

306 
BOOL
 
WINAPI
 
BôB…
(
HDC
 
hdcDe°
,
nXDe°
,
nYDe°
,
nWidth
,
nHeight
,

307 
HDC
 
hdcSrc
,
nXSrc
,
nYSrc
,
DWORD
 
dwR›
);

308 
BOOL
 
WINAPI
 
SåëchB…
(
HDC
 
hdcDe°
,
nXOrigöDe°
,
nYOrigöDe°
,

309 
nWidthDe°
,
nHeightDe°
,
HDC
 
hdcSrc
,

310 
nXOrigöSrc
,
nYOrigöSrc
,
nWidthSrc
,

311 
nHeightSrc
, 
DWORD
 
dwR›
);

314 
	#PC_RESERVED
 0x01

	)

315 
	#PC_EXPLICIT
 0x02

	)

316 
	#PC_NOCOLLAPSE
 0x04

	)

318 
	sègPALETTEENTRY
 {

319 
BYTE
 
	m≥Red
;

320 
BYTE
 
	m≥Gªí
;

321 
BYTE
 
	m≥Blue
;

322 
BYTE
 
	m≥Fœgs
;

323 } 
	tPALETTEENTRY
, *
	tPPALETTEENTRY
, 
	tFAR
 *
	tLPPALETTEENTRY
;

325 
UINT
 
WINAPI
 
GëSy°emPÆëãE¡rõs
(
HDC
 
hdc
,UINT 
iSèπIndex
,UINT 
nE¡rõs
,

326 
LPPALETTEENTRY
 
Õ≥
);

329 
	#HORZRES
 8

	)

330 
	#VERTRES
 10

	)

331 
	#BITSPIXEL
 12

	)

332 
	#PLANES
 14

	)

333 
	#LOGPIXELSX
 88

	)

334 
	#LOGPIXELSY
 90

	)

335 
	#SIZEPALETTE
 104

	)

337 
WINAPI
 
GëDevi˚C≠s
(
HDC
 
hdc
, 
nIndex
);

340 
	#ERRORREGION
 
MWREGION_ERROR


	)

341 
	#NULLREGION
 
MWREGION_NULL


	)

342 
	#SIMPLEREGION
 
MWREGION_SIMPLE


	)

343 
	#COMPLEXREGION
 
MWREGION_COMPLEX


	)

345 #ifde‡
ERROR


346 #unde‡
ERROR


348 
	#ERROR
 
ERRORREGION


	)

349 
	#RGN_ERROR
 
ERRORREGION


	)

352 
	#RGN_AND
 1

	)

353 
	#RGN_OR
 2

	)

354 
	#RGN_XOR
 3

	)

355 
	#RGN_DIFF
 4

	)

356 
	#RGN_COPY
 5

	)

357 
	#RGN_MIN
 
RGN_AND


	)

358 
	#RGN_MAX
 
RGN_COPY


	)

361 
	#RDH_RECTANGLES
 1

	)

362 
	s_RGNDATAHEADER
 {

363 
DWORD
 
	mdwSize
;

364 
DWORD
 
	miTy≥
;

365 
DWORD
 
	mnCou¡
;

366 
DWORD
 
	mnRgnSize
;

367 
RECT
 
	mrcBound
;

368 } 
	tRGNDATAHEADER
, *
	tPRGNDATAHEADER
;

370 
	s_RGNDATA
 {

371 
RGNDATAHEADER
 
	mrdh
;

372 
	mBuf„r
[1];

373 } 
	tRGNDATA
, *
	tPRGNDATA
, *
	tNPRGNDATA
, *
	tLPRGNDATA
;

376 
INT
 
WINAPI
 
Off£tRgn
(
HRGN
 
hrgn
, INT 
x
, INT 
y
 );

377 
INT
 
WINAPI
 
GëRgnBox
(
HRGN
 
hrgn
, 
LPRECT
 
ª˘
 );

378 
HRGN
 
WINAPI
 
Cª©eRe˘Rgn
(
INT
 
À·
, INT 
t›
, INT 
right
, INT 
bŸtom
);

379 
HRGN
 
WINAPI
 
Cª©eRe˘RgnIndúe˘
(c⁄° 
RECT
* 
ª˘
 );

380 
VOID
 
WINAPI
 
SëRe˘Rgn
(
HRGN
 
hrgn
, 
INT
 
À·
, INT 
t›
, INT 
right
, INT 
bŸtom
 );

381 
HRGN
 
WINAPI
 
Cª©eRoundRe˘Rgn
(
INT
 
À·
, INT 
t›
, INT 
right
, INT 
bŸtom
,

382 
INT
 
ñlù£_width
, INT 
ñlù£_height
 );

383 
HRGN
 
WINAPI
 
Cª©eEŒùticRgn
(
INT
 
À·
, INT 
t›
, INT 
right
, INT 
bŸtom
 );

384 
HRGN
 
WINAPI
 
Cª©eEŒùticRgnIndúe˘
(c⁄° 
RECT
 *
ª˘
 );

385 
DWORD
 
WINAPI
 
GëRegi⁄D©a
(
HRGN
 
hrgn
, DWORD 
cou¡
, 
LPRGNDATA
 
rgnd©a
);

386 
BOOL
 
WINAPI
 
PtInRegi⁄
(
HRGN
 
hrgn
, 
INT
 
x
, INT 
y
 );

387 
BOOL
 
WINAPI
 
Re˘InRegi⁄
(
HRGN
 
hrgn
, c⁄° 
RECT
 *
ª˘
 );

388 
BOOL
 
WINAPI
 
EquÆRgn
(
HRGN
 
hrgn1
, HRGN 
hrgn2
 );

389 
INT
 
WINAPI
 
ComböeRgn
(
HRGN
 
hDe°
, HRGN 
hSrc1
, HRGN 
hSrc2
, INT 
mode
);

392 
BOOL
 
WINAPI
 
I¡î£˘Re˘
(
LPRECT
 
de°
, c⁄° 
RECT
 *
§c1
, c⁄° RECT *
§c2
 );

393 
BOOL
 
WINAPI
 
Uni⁄Re˘
(
LPRECT
 
de°
, c⁄° 
RECT
 *
§c1
, c⁄° RECT *
§c2
 );

394 
BOOL
 
WINAPI
 
EquÆRe˘
(c⁄° 
RECT
* 
ª˘1
, c⁄° RECT* 
ª˘2
 );

395 
BOOL
 
WINAPI
 
Subåa˘Re˘
(
LPRECT
 
de°
, c⁄° 
RECT
 *
§c1
, c⁄° RECT *
§c2
 );

	@include/winkbd.h

9 
	#VK_LBUTTON
 0x01

	)

10 
	#VK_RBUTTON
 0x02

	)

11 
	#VK_CANCEL
 0x03

	)

12 
	#VK_MBUTTON
 0x04

	)

13 
	#VK_BACK
 0x08

	)

14 
	#VK_TAB
 0x09

	)

15 
	#VK_CLEAR
 0x0C

	)

16 
	#VK_RETURN
 0x0D

	)

17 
	#VK_SHIFT
 0x10

	)

18 
	#VK_CONTROL
 0x11

	)

19 
	#VK_MENU
 0x12

	)

20 
	#VK_PAUSE
 0x13

	)

21 
	#VK_CAPITAL
 0x14

	)

22 
	#VK_KANA
 0x15

	)

23 
	#VK_HANGEUL
 
VK_KANA


	)

24 
	#VK_HANGUL
 0x15

	)

25 
	#VK_JUNJA
 0x17

	)

26 
	#VK_FINAL
 0x18

	)

27 
	#VK_HANJA
 0x19

	)

28 
	#VK_KANJI
 0x19

	)

29 
	#VK_ESCAPE
 0x1B

	)

30 
	#VK_CONVERT
 0x1C

	)

31 
	#VK_NONCONVERT
 0x1D

	)

32 
	#VK_ACCEPT
 0x1E

	)

33 
	#VK_MODECHANGE
 0x1F

	)

34 
	#VK_SPACE
 0x20

	)

35 
	#VK_PRIOR
 0x21

	)

36 
	#VK_NEXT
 0x22

	)

37 
	#VK_END
 0x23

	)

38 
	#VK_HOME
 0x24

	)

39 
	#VK_LEFT
 0x25

	)

40 
	#VK_UP
 0x26

	)

41 
	#VK_RIGHT
 0x27

	)

42 
	#VK_DOWN
 0x28

	)

43 
	#VK_SELECT
 0x29

	)

44 
	#VK_PRINT
 0x2A

	)

45 
	#VK_EXECUTE
 0x2B

	)

46 
	#VK_SNAPSHOT
 0x2C

	)

47 
	#VK_INSERT
 0x2D

	)

48 
	#VK_DELETE
 0x2E

	)

49 
	#VK_HELP
 0x2F

	)

54 
	#VK_LWIN
 0x5B

	)

55 
	#VK_RWIN
 0x5C

	)

56 
	#VK_APPS
 0x5D

	)

59 
	#VK_NUMPAD0
 0x60

	)

60 
	#VK_NUMPAD1
 0x61

	)

61 
	#VK_NUMPAD2
 0x62

	)

62 
	#VK_NUMPAD3
 0x63

	)

63 
	#VK_NUMPAD4
 0x64

	)

64 
	#VK_NUMPAD5
 0x65

	)

65 
	#VK_NUMPAD6
 0x66

	)

66 
	#VK_NUMPAD7
 0x67

	)

67 
	#VK_NUMPAD8
 0x68

	)

68 
	#VK_NUMPAD9
 0x69

	)

69 
	#VK_MULTIPLY
 0x6A

	)

70 
	#VK_ADD
 0x6B

	)

71 
	#VK_SEPARATOR
 0x6C

	)

72 
	#VK_SUBTRACT
 0x6D

	)

73 
	#VK_DECIMAL
 0x6E

	)

74 
	#VK_DIVIDE
 0x6F

	)

76 
	#VK_F1
 0x70

	)

77 
	#VK_F2
 0x71

	)

78 
	#VK_F3
 0x72

	)

79 
	#VK_F4
 0x73

	)

80 
	#VK_F5
 0x74

	)

81 
	#VK_F6
 0x75

	)

82 
	#VK_F7
 0x76

	)

83 
	#VK_F8
 0x77

	)

84 
	#VK_F9
 0x78

	)

85 
	#VK_F10
 0x79

	)

86 
	#VK_F11
 0x7A

	)

87 
	#VK_F12
 0x7B

	)

88 
	#VK_F13
 0x7C

	)

89 
	#VK_F14
 0x7D

	)

90 
	#VK_F15
 0x7E

	)

91 
	#VK_F16
 0x7F

	)

92 
	#VK_F17
 0x80

	)

93 
	#VK_F18
 0x81

	)

94 
	#VK_F19
 0x82

	)

95 
	#VK_F20
 0x83

	)

96 
	#VK_F21
 0x84

	)

97 
	#VK_F22
 0x85

	)

98 
	#VK_F23
 0x86

	)

99 
	#VK_F24
 0x87

	)

100 
	#VK_NUMLOCK
 0x90

	)

101 
	#VK_SCROLL
 0x91

	)

104 
	#VK_LSHIFT
 0xA0

	)

105 
	#VK_RSHIFT
 0xA1

	)

106 
	#VK_LCONTROL
 0xA2

	)

107 
	#VK_RCONTROL
 0xA3

	)

108 
	#VK_LMENU
 0xA4

	)

109 
	#VK_RMENU
 0xA5

	)

111 
	#VK_PROCESSKEY
 0xE5

	)

112 
	#VK_ATTN
 0xF6

	)

113 
	#VK_CRSEL
 0xF7

	)

114 
	#VK_EXSEL
 0xF8

	)

115 
	#VK_EREOF
 0xF9

	)

116 
	#VK_PLAY
 0xFA

	)

117 
	#VK_ZOOM
 0xFB

	)

118 
	#VK_NONAME
 0xFC

	)

119 
	#VK_PA1
 0xFD

	)

120 
	#VK_OEM_CLEAR
 0xFE

	)

123 
	#KF_EXTENDED
 0x0100

	)

124 
	#KF_DLGMODE
 0x0800

	)

125 
	#KF_MENUMODE
 0x1000

	)

126 
	#KF_ALTDOWN
 0x2000

	)

127 
	#KF_REPEAT
 0x4000

	)

128 
	#KF_UP
 0x8000

	)

	@include/wintern.h

7 
	~<°rög.h
>

9 #i‡(
UNIX
 | 
DOS_DJGPP
)

10 
	#°rcmpi
 
°rˇ£cmp


	)

11 #ñi‡(
VXWORKS
)

12 
°rcmpi
(c⁄° *
s1
, c⁄° *
s2
);

15 #ifde‡
__PACIFIC__


16 
	#°rcmpi
 
°ricmp


	)

19 
	#DBLCLICKSPEED
 750

	)

22 
	#PAINT_PAINTED
 0

	)

23 
	#PAINT_NEEDSPAINT
 1

	)

24 
	#PAINT_DELAYPAINT
 2

	)

27 
BOOL
 
MwSëDeskt›WÆÕ≠î
(
PMWIMAGEHDR
 
pImage
);

28 
MwRegi°îFdI≈ut
(
HWND
 
hwnd
,
fd
);

29 
MwUƒegi°îFdI≈ut
(
HWND
 
hwnd
,
fd
);

30 
MwRegi°îFdOuçut
(
HWND
 
hwnd
,
fd
);

31 
MwUƒegi°îFdOuçut
(
HWND
 
hwnd
,
fd
);

32 
MwRegi°îFdEx˚±
(
HWND
 
hwnd
,
fd
);

33 
MwUƒegi°îFdEx˚±
(
HWND
 
hwnd
,
fd
);

38 
PWNDCLASS
 
MwFödCœssByName
(
LPCSTR
 
ÕCœssName
);

39 
MwDe°royWödow
(
HWND
 
hwnd
,
BOOL
 
bSídMsg
);

40 
HWND
 
MwGëT›Wödow
(HWND 
hwnd
);

41 
MwCÆcClõ¡Re˘
(
HWND
 
hwnd
);

42 
MwSídSizeMove
(
HWND
 
hwnd
, 
BOOL
 
bSize
, BOOL 
bMove
);

43 
MwSëCurs‹
(
HWND
 
wp
, 
PMWCURSOR
 
pcurs‹
);

46 
	#MwIsClõ¡DC
(
hdc
Ë(((hdc)->
Êags
 & 
DCX_WINDOW
Ë=0)

	)

47 
	#MwIsMemDC
(
hdc
Ë((hdc)->
psd
->
Êags
 =
PSF_MEMORY
)

	)

48 
MwPaötNCAªa
(
HWND
 
hwnd
);

49 
HWND
 
MwPª∑ªDC
(
HDC
 
hdc
);

50 
MwSëClùWödow
(
HDC
 
hdc
);

53 
MwAdju°NCS¸ﬁlb¨s
(
HWND
 
hwnd
);

54 
MwPaötNCS¸ﬁlb¨s
(
HWND
 
hwnd
, 
HDC
 
hdc
);

55 
MwH™dÀNCMesßgeS¸ﬁlb¨
(
HWND
 
hwnd
, 
UINT
 
msg
, 
WPARAM
 
hôcode
,

56 
LPARAM
 
lP¨am
);

59 
MwRedøwS¸ìn
();

60 
MwHideWödow
(
HWND
 
hwnd
,
BOOL
 
bCh™geFocus
,BOOL 
bSídMsg
);

61 
MwShowWödow
(
HWND
 
hwnd
,
BOOL
 
bSídMsg
);

62 
MwRai£Wödow
(
HWND
 
hwnd
);

63 
MwLowîWödow
(
HWND
 
hwnd
);

64 
BOOL
 
MwCheckOvîœp
(
HWND
 
t›wp
, HWND 
bŸwp
);

65 
MwCÀ¨Wödow
(
HWND
 
wp
,
MWCOORD
 
x
,MWCOORD 
y
,MWCOORD 
width
,

66 
MWCOORD
 
height
,
BOOL
 
expo£Êag
);

67 
MwExpo£Aªa
(
HWND
 
wp
, 
MWCOORD
 
roŸx
,MWCOORD 
roŸy
,

68 
MWCOORD
 
width
,MWCOORD 
height
);

70 
BOOL
 
MwCheckMou£Evít
();

71 
BOOL
 
MwCheckKeybﬂrdEvít
();

72 
MwH™dÀMou£Sètus
(
MWCOORD
 
√wx
, MWCOORD 
√wy
, 
√wbuâ⁄s
);

73 
MwTøn¶©eMou£Mesßge
(
HWND
 
hwnd
,
UINT
 
msg
,
hôã°
);

74 
MwDñivîMou£Evít
(
buâ⁄s
, 
ch™gebuâ⁄s
,

75 
MWKEYMOD
 
modifõrs
);

76 
MwDñivîKeybﬂrdEvít
(
MWKEY
 
keyvÆue
, 
MWKEYMOD
 
modifõrs
,

77 
MWSCANCODE
 
sˇncode
, 
BOOL
 
¥es£d
);

78 
MwDñivîExposuªEvít
(
HWND
 
wp
, 
MWCOORD
 
x
, MWCOORD 
y
,

79 
MWCOORD
 
width
,MWCOORD 
height
);

80 
MwUni⁄Upd©eRegi⁄
(
HWND
 
wp
, 
MWCOORD
 
x
, MWCOORD 
y
,

81 
MWCOORD
 
width
,MWCOORD 
height
, 
BOOL
 
bUni⁄
);

82 
MwMoveCurs‹
(
MWCOORD
 
x
, MWCOORD 
y
);

83 
MwCheckCurs‹
();

84 
HWND
 
MwFödVisibÀWödow
(
MWCOORD
 
x
, MWCOORD 
y
);

85 
MwCheckMou£Wödow
();

86 
°rz˝y
(*
d°
,c⁄° *
§c
,
d°siz
);

89 
mwSYSMETRICS_CYCAPTION
;

90 
mwSYSMETRICS_CXBORDER
;

91 
mwSYSMETRICS_CYBORDER
;

92 
mwSYSMETRICS_CXFRAME
;

93 
mwSYSMETRICS_CYFRAME
;

94 
mwSYSMETRICS_CXDOUBLECLK
;

95 
mwSYSMETRICS_CYDOUBLECLK
;

96 
mwSYSMETRICS_CYHSCROLL
;

97 
mwSYSMETRICS_CXHSCROLL
;

98 
mwSYSMETRICS_CXVSCROLL
;

99 
mwSYSMETRICS_CYVSCROLL
;

102 
BOOL
 
mwERASEMOVE
;

105 
MwO≥n
();

106 
MwClo£
();

107 
MwSñe˘
();

108 
MwInôülize
();

109 
MwTîmö©e
();

110 
HWND
 
li°wp
;

111 
HWND
 
roŸwp
;

112 
HWND
 
focuswp
;

113 
HWND
 
mou£wp
;

114 
HWND
 
ˇ±uªwp
;

115 
HWND
 
døgwp
;

116 
HCURSOR
 
curcurs‹
;

117 
MWCOORD
 
curs‹x
;

118 
MWCOORD
 
curs‹y
;

119 
MWSCREENINFO
 
söfo
;

120 
DWORD
 
°¨tTicks
;

121 
mw∑ötNC
;

122 
BOOL
 
mwf‹˚NC∑öt
;

124 #i‡
VTSWITCH


128 
MwInôVt
();

129 
MwCuºítVt
();

130 
MwCheckVtCh™ge
();

131 
MwRedøwVt
(
t
);

132 
MwExôVt
();

133 
mwvãrm
;

	@include/wintools.h

15 
WINAPI
 
Døw3dShadow
(
HDC
 
hDC
,
x
,
y
,
w
,
h
,
COLORREF
 
¸T›
,

16 
COLORREF
 
¸BŸtom
);

17 
WINAPI
 
Døw3dBox
(
HDC
 
hDC
,
x
,
y
,
w
,
h
,
COLORREF
 
¸T›
,

18 
COLORREF
 
¸BŸtom
);

19 
WINAPI
 
Døw3dIn£t
(
HDC
 
hDC
,
x
,
y
,
w
,
h
);

20 
WINAPI
 
Døw3dOut£t
(
HDC
 
hDC
,
x
,
y
,
w
,
h
);

21 
WINAPI
 
Døw3dPushDown
(
HDC
 
hDC
, 
x
, 
y
, 
w
, 
h
);

22 
WINAPI
 
Døw3dUpDownSèã
(
HDC
 
hDC
, 
x
, 
y
, 
w
, 
h
,

23 
BOOL
 
fDown
);

24 
WINAPI
 
Døw3dUpFøme
(
HDC
 
hDC
, 
l
, 
t
, 
r
, 
b
);

25 
WINAPI
 
Fa°FûlRe˘
(
HDC
 
hdc
,
LPRECT
 
Õª˘
,
COLORREF
 
¸
);

26 
WINAPI
 
In£tR
(
LPRECT
 
Õrc
,
h
,
v
);

27 
BOOL
 
WINAPI
 
PtInsideWödow
(
HWND
 
hwnd
,
UINT
 
x
,UINT 
y
);

	@include/winuser.h

7 
	~"wö˘l.h
"

10 
	$LRESULT
 (
	tCALLBACK
* 
	tWNDPROC
)(
	tHWND
, 
	tUINT
, 
	tWPARAM
, 
	tLPARAM
);

11 
	$LRESULT
 (
	tCALLBACK
* 
	tDLGPROC
)(
	tHWND
, 
	tUINT
, 
	tWPARAM
, 
	tLPARAM
);

14 
LRESULT
 
WINAPI
 
	`DefWödowProc
(
HWND
 
hwnd
,
UINT
 
msg
,
WPARAM
 
wP¨am
,
LPARAM
 
lP¨am
);

17 
	#CS_VREDRAW
 0x0001

	)

18 
	#CS_HREDRAW
 0x0002

	)

19 
	#CS_DBLCLKS
 0x0008

	)

20 
	#CS_OWNDC
 0x0020

	)

21 
	#CS_CLASSDC
 0x0040

	)

22 
	#CS_PARENTDC
 0x0080

	)

23 
	#CS_NOCLOSE
 0x0200

	)

24 
	#CS_SAVEBITS
 0x0800

	)

25 
	#CS_BYTEALIGNCLIENT
 0x1000

	)

26 
	#CS_BYTEALIGNWINDOW
 0x2000

	)

27 
	#CS_GLOBALCLASS
 0x4000

	)

29 
	sègWNDCLASSA
 {

30 
MWLIST
 
lök
;

31 
UINT
 
°yÀ
;

32 
WNDPROC
 
Õ‚WndProc
;

33 
cbClsExåa
;

34 
cbWndExåa
;

35 
HINSTANCE
 
hIn°™˚
;

36 
HICON
 
hIc⁄
;

37 
HCURSOR
 
hCurs‹
;

38 
HBRUSH
 
hbrBackground
;

39 
LPCSTR
 
ÕszMíuName
;

40 
LPCSTR
 
ÕszCœssName
;

41 
CHAR
 
szCœssName
[40];

42 } 
	tWNDCLASS
, *
	tPWNDCLASS
, 
	tNEAR
 *
	tNPWNDCLASS
, 
	tFAR
 *
	tLPWNDCLASS
;

44 
ATOM
 
WINAPI
 
	`Regi°îCœss
(
CONST
 
WNDCLASS
 *
ÕWndCœss
);

49 
	sègMSG
 {

50 
MWLIST
 
lök
;

51 
HWND
 
hwnd
;

52 
UINT
 
mesßge
;

53 
WPARAM
 
wP¨am
;

54 
LPARAM
 
lP¨am
;

55 
DWORD
 
time
;

56 
POINT
 
±
;

57 } 
	tMSG
, *
	tPMSG
, 
	tNEAR
 *
	tNPMSG
, 
	tFAR
 *
	tLPMSG
;

59 
	#POINTSTOPOINT
(
±
, 
±s
) \

60 { (
±
).
x
 = (
LONG
)(
SHORT
)
	`LOWORD
(*(LONG*)&
±s
); \

61 (
±
).
y
 = (
LONG
)(
SHORT
)
	`HIWORD
(*(LONG*)&
±s
); 
	}

	)
}

63 
	#POINTTOPOINTS
(
±
Ë(
	`MAKELONG
(()(’t).
x
), ()(’t).
y
)))

	)

64 
	#MAKEWPARAM
(
l
, 
h
Ë(
WPARAM
)
	`MAKELONG
÷, h)

	)

65 
	#MAKELPARAM
(
l
, 
h
Ë(
LPARAM
)
	`MAKELONG
÷, h)

	)

66 
	#MAKELRESULT
(
l
, 
h
Ë(
LRESULT
)
	`MAKELONG
÷, h)

	)

69 
	#WM_NULL
 0x0000

	)

70 
	#WM_CREATE
 0x0001

	)

71 
	#WM_DESTROY
 0x0002

	)

72 
	#WM_MOVE
 0x0003

	)

73 
	#WM_SIZE
 0x0005

	)

74 
	#WM_ACTIVATE
 0x0006

	)

75 
	#WM_SETFOCUS
 0x0007

	)

76 
	#WM_KILLFOCUS
 0x0008

	)

77 
	#WM_ENABLE
 0x000A

	)

78 
	#WM_SETTEXT
 0x000C

	)

79 
	#WM_GETTEXT
 0x000D

	)

80 
	#WM_GETTEXTLENGTH
 0x000E

	)

81 
	#WM_PAINT
 0x000F

	)

82 
	#WM_CLOSE
 0x0010

	)

83 
	#WM_QUIT
 0x0012

	)

84 
	#WM_ERASEBKGND
 0x0014

	)

85 
	#WM_SHOWWINDOW
 0x0018

	)

86 
	#WM_SETFONT
 0x0030

	)

87 
	#WM_GETFONT
 0x0031

	)

88 
	#WM_WINDOWPOSCHANGED
 0x0047

	)

89 
	#WM_NCCALCSIZE
 0x0083

	)

90 
	#WM_NCHITTEST
 0x0084

	)

91 
	#WM_NCPAINT
 0x0085

	)

92 
	#WM_GETDLGCODE
 0x0087

	)

93 
	#WM_NCMOUSEMOVE
 0x00A0

	)

94 
	#WM_NCLBUTTONDOWN
 0x00A1

	)

95 
	#WM_NCLBUTTONUP
 0x00A2

	)

96 
	#WM_NCLBUTTONDBLCLK
 0x00A3

	)

97 
	#WM_NCRBUTTONDOWN
 0x00A4

	)

98 
	#WM_NCRBUTTONUP
 0x00A5

	)

99 
	#WM_NCRBUTTONDBLCLK
 0x00A6

	)

100 
	#WM_KEYFIRST
 0x0100

	)

101 
	#WM_KEYDOWN
 0x0100

	)

102 
	#WM_KEYUP
 0x0101

	)

103 
	#WM_CHAR
 0x0102

	)

104 
	#WM_DEADCHAR
 0x0103

	)

105 
	#WM_SYSKEYDOWN
 0x0104

	)

106 
	#WM_SYSKEYUP
 0x0105

	)

107 
	#WM_SYSCHAR
 0x0106

	)

108 
	#WM_SYSDEADCHAR
 0x0107

	)

109 
	#WM_KEYLAST
 0x0108

	)

110 
	#WM_COMMAND
 0x0111

	)

111 
	#WM_TIMER
 0x0113

	)

112 
	#WM_HSCROLL
 0x0114

	)

113 
	#WM_VSCROLL
 0x0115

	)

115 
	#WM_MOUSEFIRST
 0x0200

	)

116 
	#WM_MOUSEMOVE
 0x0200

	)

117 
	#WM_LBUTTONDOWN
 0x0201

	)

118 
	#WM_LBUTTONUP
 0x0202

	)

119 
	#WM_LBUTTONDBLCLK
 0x0203

	)

120 
	#WM_RBUTTONDOWN
 0x0204

	)

121 
	#WM_RBUTTONUP
 0x0205

	)

122 
	#WM_RBUTTONDBLCLK
 0x0206

	)

123 
	#WM_MBUTTONDOWN
 0x0207

	)

124 
	#WM_MBUTTONUP
 0x0208

	)

125 
	#WM_MBUTTONDBLCLK
 0x0209

	)

126 
	#WM_MOUSEWHEEL
 0x020A

	)

127 
	#WM_MOUSELAST
 0x020A

	)

129 
	#WM_CARET_CREATE
 0x03E0

	)

130 
	#WM_CARET_DESTROY
 0x03E1

	)

131 
	#WM_CARET_BLINK
 0x03E2

	)

132 
	#WM_FDINPUT
 0x03F0

	)

133 
	#WM_FDOUTPUT
 0x03F1

	)

134 
	#WM_FDEXCEPT
 0x03F2

	)

135 
	#WM_USER
 0x0400

	)

138 
	#WA_INACTIVE
 0

	)

139 
	#WA_ACTIVE
 1

	)

140 
	#WA_CLICKACTIVE
 2

	)

143 
	#HTERROR
 (-2)

	)

144 
	#HTTRANSPARENT
 (-1)

	)

145 
	#HTNOWHERE
 0

	)

146 
	#HTCLIENT
 1

	)

147 
	#HTCAPTION
 2

	)

148 
	#HTSYSMENU
 3

	)

149 
	#HTGROWBOX
 4

	)

150 
	#HTSIZE
 
HTGROWBOX


	)

151 
	#HTMENU
 5

	)

152 
	#HTHSCROLL
 6

	)

153 
	#HTVSCROLL
 7

	)

154 
	#HTMINBUTTON
 8

	)

155 
	#HTMAXBUTTON
 9

	)

156 
	#HTLEFT
 10

	)

157 
	#HTRIGHT
 11

	)

158 
	#HTTOP
 12

	)

159 
	#HTTOPLEFT
 13

	)

160 
	#HTTOPRIGHT
 14

	)

161 
	#HTBOTTOM
 15

	)

162 
	#HTBOTTOMLEFT
 16

	)

163 
	#HTBOTTOMRIGHT
 17

	)

164 
	#HTBORDER
 18

	)

165 
	#HTREDUCE
 
HTMINBUTTON


	)

166 
	#HTZOOM
 
HTMAXBUTTON


	)

167 
	#HTSIZEFIRST
 
HTLEFT


	)

168 
	#HTSIZELAST
 
HTBOTTOMRIGHT


	)

169 
	#HTOBJECT
 19

	)

170 
	#HTCLOSE
 20

	)

171 
	#HTHELP
 21

	)

174 
	#SIZE_RESTORED
 0

	)

175 
	#SIZE_MINIMIZED
 1

	)

176 
	#SIZE_MAXIMIZED
 2

	)

177 
	#SIZE_MAXSHOW
 3

	)

178 
	#SIZE_MAXHIDE
 4

	)

180 
LRESULT
 
WINAPI
 
CÆlWödowProc
(
WNDPROC
 
ÕPªvWndFunc
, 
HWND
 
hwnd
, 
UINT
 
Msg
,

181 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
);

182 
LRESULT
 
WINAPI
 
SídMesßge
(
HWND
 
hwnd
, 
UINT
 
Msg
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
);

183 
BOOL
 
WINAPI
 
Po°Mesßge
(
HWND
 
hwnd
, 
UINT
 
Msg
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
);

184 
BOOL
 
WINAPI
 
Po°ThªadMesßge
(
DWORD
 
dwThªadId
, 
UINT
 
Msg
, 
WPARAM
 
wP¨am
,

185 
LPARAM
 
lP¨am
);

186 
VOID
 
WINAPI
 
Po°QuôMesßge
(
nExôCode
);

189 
	#PM_NOREMOVE
 0x0000

	)

190 
	#PM_REMOVE
 0x0001

	)

191 
	#PM_NOYIELD
 0x0002

	)

193 
BOOL
 
WINAPI
 
PìkMesßge
(
LPMSG
 
ÕMsg
, 
HWND
 
hwnd
, 
UINT
 
uMsgFûãrMö
,

194 
UINT
 
uMsgFûãrMax
, UINT 
wRemoveMsg
);

195 
BOOL
 
WINAPI
 
GëMesßge
(
LPMSG
 
ÕMsg
,
HWND
 
hwnd
,
UINT
 
wMsgFûãrMö
,

196 
UINT
 
wMsgFûãrMax
);

197 
BOOL
 
WINAPI
 
Tøn¶©eMesßge
(
CONST
 
MSG
 *
ÕMsg
);

198 
LONG
 
WINAPI
 
Di•©chMesßge
(
CONST
 
MSG
 *
ÕMsg
);

203 
	sègCREATESTRUCT
 {

204 
DWORD
 
	mdwExStyÀ
;

205 
LPCSTR
 
	mÕszCœss
;

206 
LPCSTR
 
	mÕszName
;

207 
LONG
 
	m°yÀ
;

208 
	mx
;

209 
	my
;

210 
	mcx
;

211 
	mcy
;

212 
HWND
 
	mhwndP¨ít
;

213 
HMENU
 
	mhMíu
;

214 
HINSTANCE
 
	mhIn°™˚
;

215 
LPVOID
 
	mÕCª©eP¨ams
;

216 } 
	tCREATESTRUCT
, *
	tLPCREATESTRUCT
;

221 
	#WS_OVERLAPPED
 0x00000000L

	)

222 
	#WS_POPUP
 0x80000000L

	)

223 
	#WS_CHILD
 0x40000000L

	)

224 
	#WS_MINIMIZE
 0x20000000L

	)

225 
	#WS_VISIBLE
 0x10000000L

	)

226 
	#WS_DISABLED
 0x08000000L

	)

227 
	#WS_CLIPSIBLINGS
 0x04000000L

	)

228 
	#WS_CLIPCHILDREN
 0x02000000L

	)

229 
	#WS_MAXIMIZE
 0x01000000L

	)

230 
	#WS_CAPTION
 0x00C00000L

	)

231 
	#WS_BORDER
 0x00800000L

	)

232 
	#WS_DLGFRAME
 0x00400000L

	)

233 
	#WS_VSCROLL
 0x00200000L

	)

234 
	#WS_HSCROLL
 0x00100000L

	)

235 
	#WS_SYSMENU
 0x00080000L

	)

236 
	#WS_THICKFRAME
 0x00040000L

	)

237 
	#WS_GROUP
 0x00020000L

	)

238 
	#WS_TABSTOP
 0x00010000L

	)

240 
	#WS_MINIMIZEBOX
 0x00020000L

	)

241 
	#WS_MAXIMIZEBOX
 0x00010000L

	)

244 
	#WS_TILED
 
WS_OVERLAPPED


	)

245 
	#WS_ICONIC
 
WS_MINIMIZE


	)

246 
	#WS_SIZEBOX
 
WS_THICKFRAME


	)

247 
	#WS_TILEDWINDOW
 
WS_OVERLAPPEDWINDOW


	)

252 
	#WS_OVERLAPPEDWINDOW
 (
WS_OVERLAPPED
 | \

253 
WS_CAPTION
 | \

254 
WS_SYSMENU
 | \

255 
WS_THICKFRAME
 | \

256 
WS_MINIMIZEBOX
 | \

257 
WS_MAXIMIZEBOX
)

	)

259 
	#WS_POPUPWINDOW
 (
WS_POPUP
 | \

260 
WS_BORDER
 | \

261 
WS_SYSMENU
)

	)

263 
	#WS_CHILDWINDOW
 (
WS_CHILD
)

	)

268 
	#WS_EX_DLGMODALFRAME
 0x00000001L

	)

269 
	#WS_EX_NOPARENTNOTIFY
 0x00000004L

	)

270 
	#WS_EX_TOPMOST
 0x00000008L

	)

271 
	#WS_EX_ACCEPTFILES
 0x00000010L

	)

272 
	#WS_EX_TRANSPARENT
 0x00000020L

	)

273 
	#WS_EX_MDICHILD
 0x00000040L

	)

274 
	#WS_EX_TOOLWINDOW
 0x00000080L

	)

275 
	#WS_EX_WINDOWEDGE
 0x00000100L

	)

276 
	#WS_EX_CLIENTEDGE
 0x00000200L

	)

277 
	#WS_EX_CONTEXTHELP
 0x00000400L

	)

279 
	#WS_EX_RIGHT
 0x00001000L

	)

280 
	#WS_EX_LEFT
 0x00000000L

	)

281 
	#WS_EX_RTLREADING
 0x00002000L

	)

282 
	#WS_EX_LTRREADING
 0x00000000L

	)

283 
	#WS_EX_LEFTSCROLLBAR
 0x00004000L

	)

284 
	#WS_EX_RIGHTSCROLLBAR
 0x00000000L

	)

286 
	#WS_EX_CONTROLPARENT
 0x00010000L

	)

287 
	#WS_EX_STATICEDGE
 0x00020000L

	)

288 
	#WS_EX_APPWINDOW
 0x00040000L

	)

289 
	#WS_EX_LAYERED
 0x00080000L

	)

291 
	#WS_EX_OVERLAPPEDWINDOW
 (
WS_EX_WINDOWEDGE
 | 
WS_EX_CLIENTEDGE
)

	)

292 
	#WS_EX_PALETTEWINDOW
 (
WS_EX_WINDOWEDGE
 | 
WS_EX_TOOLWINDOW
 | 
WS_EX_TOPMOST
)

	)

294 
	#CW_USEDEFAULT
 (()0x80000000)

	)

296 
	#HWND_DESKTOP
 ((
HWND
)0)

	)

298 
	#Cª©eWödow
(
ÕCœssName
, 
ÕWödowName
, 
dwStyÀ
, 
x
, 
y
, 
nWidth
, 
nHeight
, 
hwndP¨ít
, 
hMíu
, 
hIn°™˚
, 
ÕP¨am
)\

299 
	`Cª©eWödowEx
(0L, 
ÕCœssName
, 
ÕWödowName
, 
dwStyÀ
, 
x
, 
y
,\

300 
nWidth
, 
nHeight
, 
hwndP¨ít
, 
hMíu
, 
hIn°™˚
, 
ÕP¨am
)

	)

302 
HWND
 
WINAPI
 
Cª©eWödowEx
(
DWORD
 
dwExStyÀ
, 
LPCSTR
 
ÕCœssName
,

303 
LPCSTR
 
ÕWödowName
, 
DWORD
 
dwStyÀ
, 
X
, 
Y
,

304 
nWidth
, 
nHeight
, 
HWND
 
hwndP¨ít
, 
HMENU
 
hMíu
,

305 
HINSTANCE
 
hIn°™˚
, 
LPVOID
 
ÕP¨am
);

306 
BOOL
 
WINAPI
 
De°royWödow
(
HWND
 
hwnd
);

307 
BOOL
 
WINAPI
 
IsWödow
(
HWND
 
hwnd
);

308 
	#IsWödowVisibÀ
(
hwnd
Ë((
BOOL
)((hwnd)->
unm≠cou¡
 =0))

	)

313 
	#SW_HIDE
 0

	)

314 
	#SW_SHOWNORMAL
 1

	)

315 
	#SW_NORMAL
 1

	)

316 
	#SW_SHOWMINIMIZED
 2

	)

317 
	#SW_SHOWMAXIMIZED
 3

	)

318 
	#SW_MAXIMIZE
 3

	)

319 
	#SW_SHOWNOACTIVATE
 4

	)

320 
	#SW_SHOW
 5

	)

321 
	#SW_MINIMIZE
 6

	)

322 
	#SW_SHOWMINNOACTIVE
 7

	)

323 
	#SW_SHOWNA
 8

	)

324 
	#SW_RESTORE
 9

	)

325 
	#SW_SHOWDEFAULT
 10

	)

326 
	#SW_FORCEMINIMIZE
 11

	)

327 
	#SW_MAX
 11

	)

329 
BOOL
 
WINAPI
 
ShowWödow
(
HWND
 
hwnd
, 
nCmdShow
);

330 
BOOL
 
WINAPI
 
InvÆid©eRe˘
(
HWND
 
hwnd
, 
CONST
 
RECT
 *
ÕRe˘
, BOOL 
bEø£
);

331 
BOOL
 
WINAPI
 
InvÆid©eRgn
(
HWND
 
hwnd
, 
HRGN
 
hrgn
, BOOL 
bEø£
);

332 
BOOL
 
WINAPI
 
VÆid©eRe˘
(
HWND
 
hwnd
, 
CONST
 
RECT
 *
Õrc
);

333 
BOOL
 
WINAPI
 
VÆid©eRgn
(
HWND
 
hwnd
, 
HRGN
 
hrgn
);

334 
BOOL
 
WINAPI
 
Upd©eWödow
(
HWND
 
hwnd
);

336 
BOOL
 
WINAPI
 
SëLayîedWödowAâribuãs
(
HWND
 
hwnd
, 
COLORREF
 
¸Key
,

337 
BYTE
 
bAÕha
, 
DWORD
 
dwFœgs
);

338 
	#LWA_COLORKEY
 0x00000001

	)

339 
	#LWA_ALPHA
 0x00000002

	)

341 
HWND
 
WINAPI
 
GëFocus
(
VOID
);

342 
HWND
 
WINAPI
 
SëFocus
(HWND 
hwnd
);

343 
BOOL
 
WINAPI
 
SëF‹egroundWödow
(
HWND
 
hwnd
);

344 
HWND
 
WINAPI
 
SëA˘iveWödow
(HWND 
hwnd
);

345 
HWND
 
WINAPI
 
GëA˘iveWödow
(
VOID
);

346 
BOOL
 
WINAPI
 
BrögWödowToT›
(
HWND
 
hwnd
);

347 
HWND
 
WINAPI
 
GëDeskt›Wödow
(
VOID
);

348 
HWND
 
WINAPI
 
GëP¨ít
(HWND 
hwnd
);

349 
BOOL
 
WINAPI
 
E«bÀWödow
(
HWND
 
hwnd
, BOOL 
bE«bÀ
);

350 
	#IsWödowE«bÀd
(
hwnd
Ë((
BOOL
)(((hwnd)->
°yÀ
&
WS_DISABLED
Ë=0))

	)

352 
BOOL
 
WINAPI
 
Adju°WödowRe˘Ex
(
LPRECT
 
ÕRe˘
, 
DWORD
 
dwStyÀ
, BOOL 
bMíu
,

353 
DWORD
 
dwExStyÀ
);

354 
BOOL
 
WINAPI
 
GëClõ¡Re˘
(
HWND
 
hwnd
, 
LPRECT
 
ÕRe˘
);

355 
BOOL
 
WINAPI
 
GëWödowRe˘
(
HWND
 
hwnd
, 
LPRECT
 
ÕRe˘
);

357 
BOOL
 
WINAPI
 
Clõ¡ToS¸ìn
(
HWND
 
hwnd
, 
LPPOINT
 
ÕPoöt
);

358 
BOOL
 
WINAPI
 
S¸ìnToClõ¡
(
HWND
 
hwnd
, 
LPPOINT
 
ÕPoöt
);

359 
WINAPI
 
M≠WödowPoöts
(
HWND
 
hwndFrom
, HWND 
hwndTo
, 
LPPOINT
 
ÕPoöts
,

360 
UINT
 
cPoöts
);

362 
BOOL
 
WINAPI
 
SëRe˘
(
LPRECT
 
Õrc
,
xLe·
,
yT›
,
xRight
,
yBŸtom
);

363 
BOOL
 
WINAPI
 
SëRe˘Em±y
(
LPRECT
 
Õrc
);

364 
BOOL
 
WINAPI
 
C›yRe˘
(
LPRECT
 
ÕrcD°
, 
CONST
 
RECT
 *
ÕrcSrc
);

365 
BOOL
 
WINAPI
 
IsRe˘Em±y
(
CONST
 
RECT
 *
Õrc
);

366 
BOOL
 
WINAPI
 
InÊ©eRe˘
(
LPRECT
 
Õrc
, 
dx
, 
dy
);

367 
BOOL
 
WINAPI
 
Off£tRe˘
(
LPRECT
 
Õrc
, 
dx
, 
dy
);

369 #i‡
ELKS


370 
	#PtInRe˘
(
Õrc
,
±
Ë
	`MwPTINRECT
÷¥c, *(*)&’t))

	)

372 
	#PtInRe˘
(
Õrc
,
±
Ë
	`MwPTINRECT
÷¥c,Öt)

	)

374 
BOOL
 
WINAPI
 
MwPTINRECT
(
CONST
 
RECT
 *
Õrc
, 
POINT
 
±
);

379 
	#GWL_WNDPROC
 (-4)

	)

380 
	#GWL_HINSTANCE
 (-6)

	)

381 
	#GWL_HWNDPARENT
 (-8)

	)

382 
	#GWL_STYLE
 (-16)

	)

383 
	#GWL_EXSTYLE
 (-20)

	)

384 
	#GWL_USERDATA
 (-21)

	)

385 
	#GWL_ID
 (-12)

	)

390 
	#GCL_MENUNAME
 (-8)

	)

391 
	#GCL_HBRBACKGROUND
 (-10)

	)

392 
	#GCL_HCURSOR
 (-12)

	)

393 
	#GCL_HICON
 (-14)

	)

394 
	#GCL_HMODULE
 (-16)

	)

395 
	#GCL_CBWNDEXTRA
 (-18)

	)

396 
	#GCL_CBCLSEXTRA
 (-20)

	)

397 
	#GCL_WNDPROC
 (-24)

	)

398 
	#GCL_STYLE
 (-26)

	)

399 
	#GCW_ATOM
 (-32)

	)

400 
	#GCL_HICONSM
 (-34)

	)

402 
LONG
 
WINAPI
 
GëWödowL⁄g
(
HWND
 
hwnd
, 
nIndex
);

403 
LONG
 
WINAPI
 
SëWödowL⁄g
(
HWND
 
hwnd
, 
nIndex
, LONG 
lNewL⁄g
);

404 
WORD
 
WINAPI
 
GëWödowW‹d
(
HWND
 
hwnd
, 
nIndex
);

405 
WORD
 
WINAPI
 
SëWödowW‹d
(
HWND
 
hwnd
, 
nIndex
, WORD 
wNewW‹d
);

406 
	#GëDlgCålID
(
hwnd
Ë(()(hwnd)->
id
)

	)

407 
DWORD
 
WINAPI
 
GëCœssL⁄g
(
HWND
 
hwnd
, 
nIndex
);

408 
WINAPI
 
GëWödowTextLígth
(
HWND
 
hwnd
);

409 
WINAPI
 
GëWödowText
(
HWND
 
hwnd
, 
LPSTR
 
ÕSåög
, 
nMaxCou¡
);

410 
BOOL
 
WINAPI
 
SëWödowText
(
HWND
 
hwnd
, 
LPCSTR
 
ÕSåög
);

412 
BOOL
 
WINAPI
 
MoveWödow
(
HWND
 
hwnd
, 
x
, 
y
, 
nWidth
, 
nHeight
,

413 
BOOL
 
bRïaöt
);

416 
	#SWP_NOSIZE
 0x0001

	)

417 
	#SWP_NOMOVE
 0x0002

	)

418 
	#SWP_NOZORDER
 0x0004

	)

419 
	#SWP_NOREDRAW
 0x0008

	)

420 
	#SWP_NOACTIVATE
 0x0010

	)

421 
	#SWP_FRAMECHANGED
 0x0020

	)

422 
	#SWP_SHOWWINDOW
 0x0040

	)

423 
	#SWP_HIDEWINDOW
 0x0080

	)

424 
	#SWP_NOCOPYBITS
 0x0100

	)

425 
	#SWP_NOOWNERZORDER
 0x0200

	)

426 
	#SWP_NOSENDCHANGING
 0x0400

	)

427 
	#SWP_DRAWFRAME
 
SWP_FRAMECHANGED


	)

428 
	#SWP_NOREPOSITION
 
SWP_NOOWNERZORDER


	)

429 
	#SWP_DEFERERASE
 0x2000

	)

430 
	#SWP_ASYNCWINDOWPOS
 0x4000

	)

432 
	#HWND_TOP
 ((
HWND
)0Ë

	)

433 
	#HWND_BOTTOM
 ((
HWND
)1Ë

	)

434 
	#HWND_TOPMOST
 ((
HWND
)-1Ë

	)

435 
	#HWND_NOTOPMOST
 ((
HWND
)-2Ë

	)

438 
	sègWINDOWPOS
 {

439 
HWND
 
	mhwnd
;

440 
HWND
 
	mhwndIn£πA·î
;

441 
	mx
;

442 
	my
;

443 
	mcx
;

444 
	mcy
;

445 
UINT
 
	mÊags
;

446 } 
	tWINDOWPOS
, *
	tLPWINDOWPOS
, *
	tPWINDOWPOS
;

448 
BOOL
 
WINAPI
 
SëWödowPos
(
HWND
 
hwnd
, HWND 
hwndIn£πA·î
, 
x
, 
y
,

449 
cx
, 
cy
, 
UINT
 
fuFœgs
);

451 
BOOL
 
WINAPI
 
GëCurs‹Pos
(
LPPOINT
 
ÕPoöt
);

452 
HWND
 
WINAPI
 
GëC≠tuª
(
VOID
);

453 
HWND
 
WINAPI
 
SëC≠tuª
(HWND 
hwnd
);

454 
BOOL
 
WINAPI
 
Rñó£C≠tuª
(
VOID
);

459 
	sègNCCALCSIZE_PARAMS
 {

460 
RECT
 
	mrgrc
[3];

462 } 
	tNCCALCSIZE_PARAMS
, *
	tLPNCCALCSIZE_PARAMS
;

464 
FARPROC
 
	tTIMERPROC
;

466 
UINT
 
WINAPI
 
SëTimî
(
HWND
 
hwnd
, UINT 
idTimî
, UINT 
uTimeout
,

467 
TIMERPROC
 
ÕTimîFunc
);

468 
BOOL
 
WINAPI
 
KûlTimî
(
HWND
 
hwnd
, 
UINT
 
idTimî
);

469 
UINT
 
MwGëNextTimeoutVÆue
();

470 
MwH™dÀTimîs
();

473 
	#SM_CXSCREEN
 0

	)

474 
	#SM_CYSCREEN
 1

	)

475 
	#SM_CXVSCROLL
 2

	)

476 
	#SM_CYHSCROLL
 3

	)

477 
	#SM_CYCAPTION
 4

	)

478 
	#SM_CXBORDER
 5

	)

479 
	#SM_CYBORDER
 6

	)

480 
	#SM_CXDLGFRAME
 7

	)

481 
	#SM_CYDLGFRAME
 8

	)

482 
	#SM_CXFIXEDFRAME
 
SM_CXDLGFRAME


	)

483 
	#SM_CYFIXEDFRAME
 
SM_CYDLGFRAME


	)

484 
	#SM_CYMENU
 15

	)

485 
	#SM_CYVSCROLL
 20

	)

486 
	#SM_CXHSCROLL
 21

	)

487 
	#SM_CXFRAME
 32

	)

488 
	#SM_CYFRAME
 33

	)

489 
	#SM_CXSIZEFRAME
 
SM_CXFRAME


	)

490 
	#SM_CYSIZEFRAME
 
SM_CYFRAME


	)

492 
WINAPI
 
GëSy°emMërics
(
nIndex
);

494 
HWND
 
WINAPI
 
GëDlgIãm
(HWND 
hDlg
, 
nIDDlgIãm
);

497 
BOOL
 
WINAPI
 
Cª©eC¨ë
(
HWND
 
hwnd
, 
HBITMAP
 
hBôm≠
, 
nWidth
, 
nHeight
);

498 
BOOL
 
WINAPI
 
De°royC¨ë
(
VOID
);

499 
BOOL
 
WINAPI
 
HideC¨ë
 (
HWND
 
hwnd
);

500 
BOOL
 
WINAPI
 
ShowC¨ë
(
HWND
 
hwnd
);

501 
BOOL
 
WINAPI
 
SëC¨ëPos
(
nX
, 
nY
);

502 
BOOL
 
WINAPI
 
GëC¨ëPos
(
LPPOINT
 
ÕPoöt
);

503 
UINT
 
WINAPI
 
GëC¨ëBlökTime
(
VOID
);

504 
BOOL
 
WINAPI
 
SëC¨ëBlökTime
(
UINT
 
uMSec⁄ds
);

	@mwin/bmp/convbmp.c

11 
	~<°dio.h
>

12 
	~<°rög.h
>

13 
	~<°dlib.h
>

14 
	~"../../ö˛ude/devi˚.h
"

17 
	#OS_FILE_SEPARATOR
 "/\\"

	)

19 
	#PIX2BYTES
(
n
Ë((“)+7)/8)

	)

21 
	#BI_RGB
 0L

	)

22 
	#BI_RLE8
 1L

	)

23 
	#BI_RLE4
 2L

	)

24 
	#BI_BITFIELDS
 3L

	)

26 
	tUCHAR
;

27 
	tBYTE
;

38 
	tWORD
[2];

39 
	tDWORD
[4];

40 
	tLONG
[4];

41 
	#READWORD
(
x
) ( (()(x)[0]) | \

42 ((()(
x
)[1]Ë<< 8Ë)

	)

43 
	#READDWORD
(
x
) ( (()(x)[0]) | \

44 ((()(
x
)[1]) << 8) | \

45 ((()(
x
)[2]) << 16) | \

46 ((()(
x
)[3]Ë<< 24Ë)

	)

47 
	#READLONG
(
x
Ë(()
	`READDWORD
(x))

	)

49 #¥agm®
∑ck
(1)

53 
BYTE
 
	mbfTy≥
[2];

54 
DWORD
 
	mbfSize
;

55 
WORD
 
	mbfRe£rved1
;

56 
WORD
 
	mbfRe£rved2
;

57 
DWORD
 
	mbfOffBôs
;

59 
DWORD
 
	mBiSize
;

60 
LONG
 
	mBiWidth
;

61 
LONG
 
	mBiHeight
;

62 
WORD
 
	mBiPœ√s
;

63 
WORD
 
	mBiBôCou¡
;

64 
DWORD
 
	mBiCom¥essi⁄
;

65 
DWORD
 
	mBiSizeImage
;

66 
LONG
 
	mBiX≥lsPîMëî
;

67 
LONG
 
	mBiY≥lsPîMëî
;

68 
DWORD
 
	mBiCÃU£d
;

69 
DWORD
 
	mBiCÃImp‹è¡
;

70 } 
	tBMPHEAD
;

75 
BYTE
 
	mbfTy≥
[2];

76 
DWORD
 
	mbfSize
;

77 
WORD
 
	mbfRe£rved1
;

78 
WORD
 
	mbfRe£rved2
;

79 
DWORD
 
	mbfOffBôs
;

81 
DWORD
 
	mbcSize
;

82 
WORD
 
	mbcWidth
;

83 
WORD
 
	mbcHeight
;

84 
WORD
 
	mbcPœ√s
;

85 
WORD
 
	mbcBôCou¡
;

86 } 
	tBMPCOREHEAD
;

87 #¥agm®
∑ck
()

89 * 
SåùP©h
(*
buf„r
);

90 
C⁄vBMP
(
FILE
 *
Â
,*
«me
);

91 
C⁄vBMPFûe
(*
öfûíame
, *
outfûíame
);

92 
ouéöe
(
UCHAR
 *
löebuf„r
, 
bôdïth
, 
löesize
, 
y
);

93 
DecodeRLE8
(
UCHAR
 *
buf
,
FILE
 *
Â
);

94 
DecodeRLE4
(
UCHAR
 *
buf
,
FILE
 *
Â
);

95 
put4
(
b
);

97 
	gs_Êag
 = 0;

99 
	#MAX_FILENAME_LEN
 256

	)

101 
	$maö
(
¨gc
,*
¨gv
[])

103 
o_Êag
 = 0;

104 *
p
;

105 
«me
[
MAX_FILENAME_LEN
];

106 
⁄ame
[
MAX_FILENAME_LEN
];

109 
¨gc
--;

110 
¨gv
++;

113 if(
¨gc
 && 
	`°rcmp
(*
¨gv
, "-s") == 0) {

114 
s_Êag
 = -1;

115 
¨gc
--;

116 
¨gv
++;

120 if(
¨gc
 && 
	`°rcmp
(*
¨gv
, "-o") == 0) {

121 
o_Êag
 = -1;

122 
¨gc
--;

123 
¨gv
++;

127 if((
¨gc
 =0Ë|| (
o_Êag
 && (argc != 2))) {

128 
	`Ârötf
(
°dîr
, "Usage: convbmp [-s] <bmpfile>...\n"

133 i‡(
o_Êag
) {

134 i‡(
	`°æí
(
¨gv
[0]Ë> 
MAX_FILENAME_LEN
 - 3) {

135 
	`Ârötf
(
°dîr
, "Fûíamêtoÿl⁄g (%d byãs, max i†%d): '%s'\n", 
	`°æí
(*
¨gv
), 
MAX_FILENAME_LEN
 - 3, *argv);

138 i‡(
	`°æí
(
¨gv
[1]Ë> 
MAX_FILENAME_LEN
 - 3) {

139 
	`Ârötf
(
°dîr
, "Fûíamêtoÿl⁄g (%d byãs, max i†%d): '%s'\n", 
	`°æí
(*
¨gv
), 
MAX_FILENAME_LEN
 - 3, *argv);

142 if(
	`C⁄vBMPFûe
(
¨gv
[1],árgv[0])) {

149 
¨gv
--;

150 
¨gc
--) {

151 
¨gv
++;

152 i‡(
	`°æí
(*
¨gv
Ë> 
MAX_FILENAME_LEN
 - 3) {

154 
	`Ârötf
(
°dîr
, "Fûíamêtoÿl⁄g (%d byãs, max i†%d): '%s'\n", 
	`°æí
(*
¨gv
), 
MAX_FILENAME_LEN
 - 3, *argv);

157 
	`°r˝y
(
«me
, *
¨gv
);

158 
	`°r˝y
(
⁄ame
, *
¨gv
);

159 if((
p
 = 
	`°ºchr
(
⁄ame
, '.')Ë!(*)
NULL
)

160 *
p
 = '\0';

161 if(
s_Êag
)

162 
	`°rˇt
(
⁄ame
, ".s");

164 
	`°rˇt
(
⁄ame
, ".c");

165 if(
	`C⁄vBMPFûe
(
«me
, 
⁄ame
)) {

170 
	}
}

172 
	$C⁄vBMPFûe
(*
öfûíame
, *
outfûíame
)

174 
«mebuf
[
MAX_FILENAME_LEN
];

175 *
p
;

176 *
«me
;

177 
FILE
 *
Â
;

179 
	`°r˝y
(
«mebuf
, 
öfûíame
);

180 if((
p
 = 
	`°ºchr
(
«mebuf
, '.')Ë!(*)
NULL
)

181 *
p
 = '\0';

187 
«me
 = 
	`SåùP©h
(
«mebuf
);

189 if((
Â
 = 
	`f›í
(
öfûíame
, "rb")Ë=(
FILE
 *)
NULL
) {

190 
	`Ârötf
(
°dîr
, "C™'à›í fûe: %s\n", 
öfûíame
);

193 if(
	`‰e›í
(
outfûíame
, "w", 
°dout
Ë=(
FILE
 *)
NULL
) {

194 
	`f˛o£
(
Â
);

195 
	`Ârötf
(
°dîr
, "CouldÇŸ o≥¿ouçuàfûê%s\n", 
outfûíame
);

199 if(
	`C⁄vBMP
(
Â
, 
«me
)) {

200 
	`Ârötf
(
°dîr
, "C⁄vîsi⁄ faûed: %s\n", 
öfûíame
);

201 
	`f˛o£
(
Â
);

204 
	`f˛o£
(
Â
);

207 
	}
}

218 * 
	$SåùP©h
(*
buf„r
)

220 *
p
 = 
buf„r
;

223 *
p1
 = 
p
;

224 
p1
 = 
	`°Ωbrk
–
p
, 
OS_FILE_SEPARATOR
 );

225 if–
p1
 )

227 
p
 = 
p1
+1;

234 (
p
);

235 
	}
}

238 
	$C⁄vBMP
(
FILE
 *
Â
, *
«me
)

240 
BMPHEAD
 
bmp
;

241 
BMPCOREHEAD
 *
bmc
;

242 
i
, 
∑lsize
;

243 
UCHAR
 *
löebuf„r
 = 
NULL
;

244 
cx
, 
cy
, 
bôdïth
, 
löesize
;

245 
com¥essi⁄
;

246 
MWPALENTRY
 
cm≠
[256];

247 
l
;

248 
g
;

249 
byã•îpixñ
;

250 
UCHAR
 *
p
 = (UCHAR *)&
l
;

253 if(
	`‰ód
(&
bmp
, 1, (
BMPHEAD
), 
Â
) != (BMPHEAD)) {

254 
	`Ârötf
(
°dîr
, "ErrorÑeading .bmp file header\n");

259 if(
	`READDWORD
(
bmp
.
BiSize
) == 12) {

260 
bmc
 = (
BMPCOREHEAD
 *)&
bmp
;

261 
cx
 = ()
	`READWORD
(
bmc
->
bcWidth
);

262 
cy
 = ()
	`READWORD
(
bmc
->
bcHeight
);

263 
bôdïth
 = 
	`READWORD
(
bmc
->
bcBôCou¡
);

264 
∑lsize
 = 1 << 
bôdïth
;

265 
com¥essi⁄
 = 
BI_RGB
;

266 
	`f£ek
(
Â
, (
BMPCOREHEAD
), 
SEEK_SET
);

268 
cx
 = ()
	`READLONG
(
bmp
.
BiWidth
);

269 
cy
 = ()
	`READLONG
(
bmp
.
BiHeight
);

270 
bôdïth
 = 
	`READWORD
(
bmp
.
BiBôCou¡
);

271 
∑lsize
 = ()
	`READDWORD
(
bmp
.
BiCÃU£d
);

272 if(
∑lsize
 == 0)

273 
∑lsize
 = 1 << 
bôdïth
;

274 
com¥essi⁄
 = 
	`READDWORD
(
bmp
.
BiCom¥essi⁄
);

277 if(
bôdïth
 > 8)

278 
∑lsize
 = 0;

281 if(
bôdïth
 > 8 && bitdepth != 24) {

282 
	`Ârötf
(
°dîr
, "Error: bitsÖerÖixel must be 1, 4, 8 or 24\n");

287 if(
bôdïth
 == 1) {

288 
löesize
 = 
	`PIX2BYTES
(
cx
);

289 
byã•îpixñ
 = 1;

290 } if(
bôdïth
 <= 4) {

291 
löesize
 = 
	`PIX2BYTES
(
cx
<<2);

292 
byã•îpixñ
 = 1;

293 } if(
bôdïth
 <= 8) {

294 
löesize
 = 
cx
;

295 
byã•îpixñ
 = 1;

296 } if(
bôdïth
 <= 16) {

297 
löesize
 = 
cx
 * 2;

298 
byã•îpixñ
 = 2;

299 } if(
bôdïth
 <= 24) {

300 
löesize
 = 
cx
 * 3;

301 
byã•îpixñ
 = 3;

303 
löesize
 = 
cx
 * 4;

304 
byã•îpixñ
 = 4;

307 
löesize
 = (linesize+3) & ~3;

309 if((
löebuf„r
 = 
	`mÆloc
(
löesize
)Ë=(
UCHAR
 *)
NULL
) {

310 
	`Ârötf
(
°dîr
, "Eº‹ wôh mÆloc(%d)\n", 
löesize
);

314 if(!
s_Êag
) {

315 
	`¥ötf
("/* Generated by convbmp*/\n");

316 
	`¥ötf
("#include \"device.h\"\n\n");

317 
	`¥ötf
("/* MWIMAGEHDR image_%s converted from %s.bmp*/\n\n",

318 
«me
,Çame);

322 if(
bôdïth
 <= 8) {

323 
i
=0; i<
∑lsize
; i++) {

324 
cm≠
[
i
].
b
 = 
	`fgëc
(
Â
);

325 
cm≠
[
i
].
g
 = 
	`fgëc
(
Â
);

326 
cm≠
[
i
].
r
 = 
	`fgëc
(
Â
);

327 if(
	`READDWORD
(
bmp
.
BiSize
) != 12)

328 
	`fgëc
(
Â
);

331 if(!
s_Êag
) {

333 
	`¥ötf
("°©i¯MWPALENTRYÖÆëã[%d] = {\n", 
∑lsize
);

334 
i
=0; i<
∑lsize
; ++i)

335 
	`¥ötf
(" RGBDEF( %3d, %3d, %3d ),\t/*Öal %d*/\n",

336 
cm≠
[
i
].
r
, cm≠[i].
g
, cm≠[i].
b
, i);

337 
	`¥ötf
("};\n\n");

339 
	`¥ötf
(".sect .text; .sect .rom; .sect .data; .sect .bss\n");

340 
	`¥ötf
(".sect .data\n");

341 
	`¥ötf
("__II0:\n");

342 
l
 = 0L; 
g
 = 0; 
p
 = (
UCHAR
 *)&l;

343 
i
=0; i<
∑lsize
; ++i) {

344 
p
[
g
++] = 
cm≠
[
i
].
r
;

345 if(
g
 == 4)

346 { 
g
 = 0; 
	`¥ötf
(".d©a4\t%ld\n", 
l
);Ü = 0L; }

347 
p
[
g
++] = 
cm≠
[
i
].g;

348 if(
g
 == 4)

349 { 
g
 = 0; 
	`¥ötf
(".d©a4\t%ld\n", 
l
);Ü = 0L; }

350 
p
[
g
++] = 
cm≠
[
i
].
b
;

351 if(
g
 == 4)

352 { 
g
 = 0; 
	`¥ötf
(".d©a4\t%ld\n", 
l
);Ü = 0L; }

354 if(
g
)

355 
	`¥ötf
(".d©a4\t%ld\n", 
l
);

359 if(!
s_Êag
) {

360 
	`¥ötf
("static MWUCHAR imagebits[] = {\n");

362 
	`¥ötf
("__II1:\n");

363 
l
 = 0L; 
g
 = 0;

367 
	`f£ek
(
Â
, 
	`READDWORD
(
bmp
.
bfOffBôs
), 
SEEK_SET
);

368 if(
com¥essi⁄
 =
BI_RLE8
) {

369 
i
 = 
cy
-1; i>= 0; i--) {

370 if(!
	`DecodeRLE8
(
löebuf„r
, 
Â
))

372 
	`ouéöe
(
löebuf„r
, 
bôdïth
, 
löesize
, 
i
);

374 } if(
com¥essi⁄
 =
BI_RLE4
) {

375 
i
 = 
cy
-1; i>= 0; i--) {

376 if(!
	`DecodeRLE4
(
löebuf„r
, 
Â
))

378 
	`ouéöe
(
löebuf„r
, 
bôdïth
, 
löesize
, 
i
);

381 
i
=0; i<
cy
; i++) {

382 if(
	`‰ód
(
löebuf„r
, 1, 
löesize
, 
Â
Ë!(
size_t
)linesize) {

383 
	`‰ì
(
löebuf„r
);

384 
	`Ârötf
(
°dîr
, "Error fread\n");

387 
	`ouéöe
(
löebuf„r
, 
bôdïth
, 
löesize
, 
cy
-
i
-1);

391 if(!
s_Êag
) {

392 
	`¥ötf
("};\n\n");

394 
	`¥ötf
("MWIMAGEHDR image_%†{\n", 
«me
);

395 
	`¥ötf
(" %d, %d,\t/* width, height*/\n", 
cx
, 
cy
);

396 
	`¥ötf
(" %d, %d,\t\t/*Öœ√s, bµ*/\n", 1, 
bôdïth
);

397 
	`¥ötf
(" %d, %d,\t/*Öitch, bytesperpixel*/\n",

398 
löesize
, 
byã•îpixñ
);

399 
	`¥ötf
(" %d, %d,\t/* com¥essi⁄,ÖÆsize*/\n", 1, 
∑lsize
);

400 
	`¥ötf
(" %ldL,\t\t/*Åranscolor*/\n", -1L);

401 if(
∑lsize
)

402 
	`¥ötf
("Öalette,\n");

404 
	`¥ötf
(" 0,\n");

405 
	`¥ötf
(" imagebits,\n");

406 
	`¥ötf
("};\n");

408 
	`¥ötf
(".exã∫ _image_%s\n", 
«me
);

409 
	`¥ötf
("_image_%s:\n", 
«me
);

410 
	`¥ötf
(".d©a4\t%ld\n",()
cx
);

411 
	`¥ötf
(".d©a4\t%ld\n",()
cy
);

412 
	`¥ötf
(".data4\t%ld\n",1L);

413 
	`¥ötf
(".d©a4\t%ld\n",()
bôdïth
);

414 
	`¥ötf
(".d©a4\t%ld\n",()
löesize
);

415 
	`¥ötf
(".d©a4\t%ld\n",()
byã•îpixñ
);

416 
	`¥ötf
(".data4\t%ld\n",1L);

417 
	`¥ötf
(".d©a4\t%ld\n",()
∑lsize
);

418 
	`¥ötf
(".data4\t%ld\n",-1L);

419 
	`¥ötf
(".data4\t__II0\n");

420 if(
∑lsize
)

421 
	`¥ötf
(".data4\t__II1\n");

423 
	`¥ötf
(".data4\t0\n");

424 
	`¥ötf
(".sect .text\n");

427 
	`‰ì
(
löebuf„r
);

430 
	}
}

432 
	$ouéöe
(
UCHAR
 *
löebuf„r
, 
bôdïth
, 
löesize
, 
y
)

434 
bc
 = 0;

435 
l
 = 0;

436 *
p
 = (*)&
l
;

437 
n
;

439 
bôdïth
) {

442 
n
=0;Ç<
löesize
; ++n) {

443 if(!
s_Êag
)

444 
	`¥ötf
("0x%02x,", 
löebuf„r
[
n
]);

446 
p
[
bc
++] = 
löebuf„r
[
n
];

447 if(
bc
 == 4) {

448 
bc
 = 0;

449 
	`¥ötf
(".d©a4\t%ld\n", 
l
);

450 
l
 = 0L;

457 
n
=0;Ç<
löesize
; ++n) {

458 if(!
s_Êag
)

459 
	`¥ötf
("%d,", 
löebuf„r
[
n
]);

461 
p
[
bc
++] = 
löebuf„r
[
n
];

462 if(
bc
 == 4) {

463 
bc
 = 0;

464 
	`¥ötf
(".d©a4\t%ld\n", 
l
);

465 
l
 = 0L;

470 if(!
s_Êag
)

471 
	`¥ötf
("\n");

472 
	}
}

477 
	$DecodeRLE8
(
UCHAR
 *
buf
,
FILE
 *
Â
)

479 
c
, 
n
;

480 
UCHAR
 * 
p
 = 
buf
;

483 
n
 = 
	`fgëc
(
Â
)) {

484 
EOF
:

487 
n
 = 
	`fgëc
(
Â
)) {

493 ()
	`fgëc
(
Â
);

494 ()
	`fgëc
(
Â
);

497 
c
=0; c<
n
; c++)

498 *
p
++ = 
	`fgëc
(
Â
);

499 if(
n
 & 1)

500 ()
	`fgëc
(
Â
);

504 
c
 = 
	`fgëc
(
Â
);

505 
n
--)

506 *
p
++ = 
c
;

510 
	}
}

515 
UCHAR
 *
	gp
;

516 
	g⁄˚
;

518 
	$put4
(
b
)

520 
œ°
;

522 
œ°
 = (œ° << 4Ë| 
b
;

523 if(++
⁄˚
 == 2) {

524 *
p
++ = 
œ°
;

525 
⁄˚
 = 0;

527 
	}
}

529 
	$DecodeRLE4
(
UCHAR
 *
buf
, 
FILE
 *
Â
)

531 
c
, 
n
, 
c1
, 
c2
;

533 
p
 = 
buf
;

534 
⁄˚
 = 0;

536 
n
 = 
	`fgëc
(
Â
)) {

537 
EOF
:

540 
n
 = 
	`fgëc
(
Â
)) {

542 if(
⁄˚
)

543 
	`put4
(0);

546 if(
⁄˚
)

547 
	`put4
(0);

550 ()
	`fgëc
(
Â
);

551 ()
	`fgëc
(
Â
);

554 
c2
 = (
n
+3) & ~3;

555 
c
=0; c<
c2
; c++) {

556 if((
c
 & 1) == 0)

557 
c1
 = 
	`fgëc
(
Â
);

558 if(
c
 < 
n
)

559 
	`put4
((
c1
 >> 4) & 0x0f);

560 
c1
 <<= 4;

565 
c
 = 
	`fgëc
(
Â
);

566 
c1
 = (
c
 >> 4) & 0x0f;

567 
c2
 = 
c
 & 0x0f;

568 
c
=0; c<
n
; c++)

569 
	`put4
((
c
&1)? 
c2
: 
c1
);

573 
	}
}

	@mwin/bmp/makebmp.c

8 
	~<°dio.h
>

9 
	~<uni°d.h
>

11 
	#BI_RGB
 0L

	)

12 
	#BI_RLE8
 1L

	)

13 
	#BI_RLE4
 2L

	)

14 
	#BI_BITFIELDS
 3L

	)

16 
	tBYTE
;

17 
	tWORD
;

18 
	tDWORD
;

19 
	tLONG
;

21 #¥agm®
∑ck
(1)

25 
BYTE
 
	mbfTy≥
[2];

26 
DWORD
 
	mbfSize
;

27 
WORD
 
	mbfRe£rved1
;

28 
WORD
 
	mbfRe£rved2
;

29 
DWORD
 
	mbfOffBôs
;

31 
DWORD
 
	mBiSize
;

32 
LONG
 
	mBiWidth
;

33 
LONG
 
	mBiHeight
;

34 
WORD
 
	mBiPœ√s
;

35 
WORD
 
	mBiBôCou¡
;

36 
DWORD
 
	mBiCom¥essi⁄
;

37 
DWORD
 
	mBiSizeImage
;

38 
LONG
 
	mBiX≥lsPîMëî
;

39 
LONG
 
	mBiY≥lsPîMëî
;

40 
DWORD
 
	mBiCÃU£d
;

41 
DWORD
 
	mBiCÃImp‹è¡
;

42 } 
	tBMPHEAD
;

43 #¥agm®
∑ck
()

45 
MakeBMP
(
FILE
 *
iÂ
,FILE *
oÂ
);

48 
	$maö
(
ac
,**
av
)

50 
FILE
 *
iÂ
;

51 
FILE
 *
oÂ
;

53 if(
ac
 < 3) {

54 
	`Ârötf
(
°dîr
, "Usage: makebmp <infile> <outfile>\n");

55 
	`exô
(1);

57 
iÂ
 = 
	`f›í
(
av
[1], "rb");

58 if(!
iÂ
) {

59 
	`Ârötf
(
°dîr
, "C™'à›í fûe: %s\n", 
av
[1]);

60 
	`exô
(1);

62 
oÂ
 = 
	`f›í
(
av
[2], "wb");

63 if(!
oÂ
) {

64 
	`Ârötf
(
°dîr
, "C™'à¸óã fûe: %s\n", 
av
[2]);

65 
	`exô
(1);

67 if(!
	`MakeBMP
(
iÂ
, 
oÂ
)) {

68 
	`Ârötf
(
°dîr
, "C⁄vîsi⁄ faûed: %s\n", 
av
[2]);

69 
	`f˛o£
(
oÂ
);

70 
	`u∆ök
(
av
[2]);

71 
	`exô
(1);

73 
	`f˛o£
(
iÂ
);

74 
	`f˛o£
(
oÂ
);

76 
	}
}

80 
	$MakeBMP
(
FILE
 *
iÂ
, FILE *
oÂ
)

82 
BMPHEAD
 
bmp
;

83 
i
, 
j
;

84 
cx
, 
cy
, 
exåa
, 
bôdïth
, 
ncﬁ‹s
;

86 
cx
 = 640;

87 
cy
 = 480;

88 
exåa
 = (
cx
 + 3) & 3;

89 
bôdïth
 = 8;

90 if(
bôdïth
 <= 8)

91 
ncﬁ‹s
 = 1<<
bôdïth
;

92 
ncﬁ‹s
 = 0;

94 
	`mem£t
(&
bmp
, 0, (bmp));

95 
bmp
.
bfTy≥
[0] = 'B';

96 
bmp
.
bfTy≥
[1] = 'M';

97 
bmp
.
bfSize
 = (bmpË+ 
ncﬁ‹s
*4 + ()
cx
*
cy
;

98 
bmp
.
bfOffBôs
 = (bmpË+ 
ncﬁ‹s
*4;

99 
bmp
.
BiSize
 = 40;

100 
bmp
.
BiWidth
 = 
cx
;

101 
bmp
.
BiHeight
 = 
cy
;

102 
bmp
.
BiPœ√s
 = 1;

103 
bmp
.
BiBôCou¡
 = 
bôdïth
;

104 
bmp
.
BiCom¥essi⁄
 = 
BI_RGB
;

106 
bmp
.
BiCÃU£d
 = 
ncﬁ‹s
;

107 
bmp
.
BiCÃImp‹è¡
 = 
ncﬁ‹s
;

110 
	`fwrôe
(&
bmp
, (bmp), 1, 
oÂ
);

113 if(
bôdïth
 <= 8) {

114 
i
=0; i<
ncﬁ‹s
; i++) {

115 
r
, 
g
, 
b
;

116 
r
 = 
	`gëc
(
iÂ
);

117 
g
 = 
	`gëc
(
iÂ
);

118 
b
 = 
	`gëc
(
iÂ
);

119 
	`putc
(
b
, 
oÂ
);

120 
	`putc
(
g
, 
oÂ
);

121 
	`putc
(
r
, 
oÂ
);

122 
	`putc
(0, 
oÂ
);

127 
i
=
cy
-1; i>0; --i) {

128 
ba£
 = (
bmp
Ë+ 
ncﬁ‹s
*4 + ()
i
*
cx
;

129 
	`f£ek
(
oÂ
, 
ba£
, 
SEEK_SET
);

130 
j
=0; j<
cx
; ++j)

131 
	`putc
(
	`gëc
(
iÂ
), 
oÂ
);

132 
j
=0; j<
exåa
; ++j)

133 
	`putc
(0, 
oÂ
);

136 
	}
}

	@mwin/winclip.c

1 
	~"devi˚.h
"

3 #i‡
DYNAMICREGIONS


4 
	~"wö˛ù2.c
"

6 
	~"wö˛ù1.c
"

	@mwin/winclip1.c

7 
	~"wödows.h
"

8 
	~"wöã∫.h
"

13 
	#GAPVAL
(
À·g≠
, 
rightg≠
, 
t›g≠
, 
bŸtomg≠
) \

14 (((
À·g≠
Ë<< 3Ë+ ((
rightg≠
Ë<< 2Ë+ ((
t›g≠
Ë<< 1Ë+ (
bŸtomg≠
))

	)

16 
BOOL
 
MwEx˛udeClùRe˘
(
möx
,
möy
,
maxx
,
maxy
,*
cou¡
,

17 
MWCLIPRECT
 *
˛ùª˘s
);

18 
MwS∂ôClùRe˘
(
MWCLIPRECT
 *
§¸e˘
, MWCLIPRECT *
de°ª˘
,

19 
MWCOORD
 
möx
, MWCOORD 
möy
, MWCOORD 
maxx
, MWCOORD 
maxy
);

29 
	$MwSëClùWödow
(
HDC
 
hdc
)

31 
HWND
 
wp
 = 
hdc
->
hwnd
;

32 
HWND
 
pwp
;

33 
HWND
 
sibwp
;

34 
MWCLIPRECT
 *
˛ù
;

35 
cou¡
;

36 
MWCOORD
 
diff
;

37 
BOOL
 
toom™y
;

38 
PRECT
 
¥c
;

39 
MWCLIPRECT
 
˛ùª˘s
[
MAX_CLIPRECTS
];

41 i‡(
wp
->
unm≠cou¡
)

48 
¥c
 = 
	`MwIsClõ¡DC
(
hdc
)? &
wp
->
˛úe˘
: &wp->
wöª˘
;

49 
cou¡
 = 1;

50 
˛ù
 = 
˛ùª˘s
;

51 
˛ù
->
x
 = 
¥c
->
À·
;

52 
˛ù
->
y
 = 
¥c
->
t›
;

53 
˛ù
->
width
 = 
¥c
->
right
 -Örc->
À·
;

54 
˛ù
->
height
 = 
¥c
->
bŸtom
 -Örc->
t›
;

61 
pwp
 = 
wp
;

62 
pwp
 !
roŸwp
) {

63 
pwp
 =Öwp->
∑ª¡
;

65 
diff
 = 
pwp
->
˛úe˘
.
À·
 - 
˛ù
->
x
;

66 i‡(
diff
 > 0) {

67 
˛ù
->
width
 -
diff
;

68 
˛ù
->
x
 = 
pwp
->
˛úe˘
.
À·
;

71 
diff
 = 
pwp
->
˛úe˘
.
right
 - (
˛ù
->
x
 + clù->
width
);

72 i‡(
diff
 < 0)

73 
˛ù
->
width
 +
diff
;

75 
diff
 = 
pwp
->
˛úe˘
.
t›
 - 
˛ù
->
y
;

76 i‡(
diff
 > 0) {

77 
˛ù
->
height
 -
diff
;

78 
˛ù
->
y
 = 
pwp
->
˛úe˘
.
t›
;

81 
diff
 = 
pwp
->
˛úe˘
.
bŸtom
 - (
˛ù
->
y
 + clù->
height
);

82 i‡(
diff
 < 0)

83 
˛ù
->
height
 +
diff
;

90 i‡(
˛ù
->
width
 <0 || clù->
height
 <= 0) {

91 
	`GdSëClùRe˘s
(
hdc
->
psd
, 1, 
˛ùª˘s
);

102 
toom™y
 = 
FALSE
;

103 
pwp
 = 
wp
;

104 
pwp
 !
NULL
) {

105 
wp
 = 
pwp
;

106 
pwp
 = 
wp
->
∑ª¡
;

107 if(!
pwp
) {

109 if(
hdc
->
Êags
 & 
DCX_CLIPCHILDREN
)

111 
sibwp
 = 
roŸwp
->
chûdªn
;

112 
sibwp
 = 
NULL
;

113 
wp
 = 
NULL
;

115 if(
hdc
->
Êags
 & 
DCX_CLIPSIBLINGS
)

116 
sibwp
 = 
pwp
->
chûdªn
;

117 
sibwp
 = 
wp
;

119 ; 
sibwp
 !
wp
; sibw∞sibwp->
siblögs
) {

120 i‡(
sibwp
->
unm≠cou¡
)

123 
toom™y
 |
	`MwEx˛udeClùRe˘
(
sibwp
->
wöª˘
.
À·
,

124 
sibwp
->
wöª˘
.
t›
, sibwp->wöª˘.
right
-1,

125 
sibwp
->
wöª˘
.
bŸtom
-1, &
cou¡
, 
˛ùª˘s
);

130 if(
pwp
 =
roŸwp
)

141 
wp
 = 
hdc
->
hwnd
;

142 if(
wp
 !
roŸwp
 && 
	`MwIsClõ¡DC
(
hdc
)) {

143 
sibwp
=
wp
->
chûdªn
; sibwp; sibw∞sibwp->
siblögs
) {

144 i‡(
sibwp
->
unm≠cou¡
)

147 
toom™y
 |
	`MwEx˛udeClùRe˘
(
sibwp
->
wöª˘
.
À·
,

148 
sibwp
->
wöª˘
.
t›
, sibwp->wöª˘.
right
-1,

149 
sibwp
->
wöª˘
.
bŸtom
-1, &
cou¡
, 
˛ùª˘s
);

153 i‡(
toom™y
) {

155 
˛ù
->
x
 = 0;

156 
˛ù
->
y
 = 0;

157 
˛ù
->
width
 = -1;

158 
˛ù
->
height
 = -1;

159 
cou¡
 = 1;

165 
	`GdSëClùRe˘s
(
hdc
->
psd
, 
cou¡
, 
˛ùª˘s
);

166 
	}
}

168 
BOOL


169 
	$MwEx˛udeClùRe˘
(
möx
,
möy
,
maxx
,
maxy
,*
cou¡
,

170 
MWCLIPRECT
 *
˛ùª˘s
)

172 
i
;

173 
√wcou¡
;

174 
BOOL
 
toom™y
 = 
FALSE
;

176 
√wcou¡
 = *
cou¡
;

177 
i
 = 0; i < *
cou¡
; i++) {

178 i‡(
√wcou¡
 > 
MAX_CLIPRECTS
 - 3) {

179 
toom™y
 = 
TRUE
;

182 
√wcou¡
 +
	`MwS∂ôClùRe˘
(&
˛ùª˘s
[
i
],

183 &
˛ùª˘s
[
√wcou¡
],

184 
möx
, 
möy
, 
maxx
, 
maxy
);

186 *
cou¡
 = 
√wcou¡
;

187  
toom™y
;

188 
	}
}

203 
	$MwS∂ôClùRe˘
(
MWCLIPRECT
 *
§¸e˘
, MWCLIPRECT *
de°ª˘
, 
MWCOORD
 
möx
,

204 
MWCOORD
 
möy
, MWCOORD 
maxx
, MWCOORD 
maxy
)

206 
MWCOORD
 
x
;

207 
MWCOORD
 
y
;

208 
MWCOORD
 
width
;

209 
MWCOORD
 
height
;

210 
MWCOORD
 
dx
;

211 
MWCOORD
 
dy
;

212 
g≠s
;

218 
x
 = 
§¸e˘
->x;

219 
y
 = 
§¸e˘
->y;

220 
width
 = 
§¸e˘
->width;

221 
height
 = 
§¸e˘
->height;

223 i‡((
möx
 > 
maxx
Ë|| (
möy
 > 
maxy
Ë|| (maxx < 
x
Ë|| (maxy < 
y
) ||

224 (
x
 + 
width
 <
möx
Ë|| (
y
 + 
height
 <
möy
))

233 
g≠s
 = 0;

234 i‡(
x
 < 
möx
)

235 
g≠s
 |
	`GAPVAL
(1, 0, 0, 0);

236 i‡(
x
 + 
width
 - 1 > 
maxx
)

237 
g≠s
 |
	`GAPVAL
(0, 1, 0, 0);

238 i‡(
y
 < 
möy
)

239 
g≠s
 |
	`GAPVAL
(0, 0, 1, 0);

240 i‡(
y
 + 
height
 - 1 > 
maxy
)

241 
g≠s
 |
	`GAPVAL
(0, 0, 0, 1);

243 
g≠s
) {

244 
	`GAPVAL
(0, 0, 0, 0):

245 
§¸e˘
->
x
 = 0;

246 
§¸e˘
->
y
 = 0;

247 
§¸e˘
->
width
 = 0;

248 
§¸e˘
->
height
 = 0;

251 
	`GAPVAL
(0, 0, 0, 1):

252 
dy
 = 
maxy
 - 
y
 + 1;

253 
§¸e˘
->
y
 +
dy
;

254 
§¸e˘
->
height
 -
dy
;

257 
	`GAPVAL
(0, 0, 1, 0):

258 
§¸e˘
->
height
 = 
möy
 - 
y
;

261 
	`GAPVAL
(0, 0, 1, 1):

262 
§¸e˘
->
height
 = 
möy
 - 
y
;

263 
de°ª˘
->
x
 = x;

264 
de°ª˘
->
width
 = width;

265 
de°ª˘
->
y
 = 
maxy
 + 1;

266 
de°ª˘
->
height
 = 
y
 + heighà- 
maxy
 - 1;

269 
	`GAPVAL
(0, 1, 0, 0):

270 
dx
 = 
maxx
 - 
x
 + 1;

271 
§¸e˘
->
x
 +
dx
;

272 
§¸e˘
->
width
 -
dx
;

275 
	`GAPVAL
(0, 1, 0, 1):

276 
dx
 = 
maxx
 - 
x
 + 1;

277 
§¸e˘
->
x
 +
dx
;

278 
§¸e˘
->
width
 -
dx
;

279 
§¸e˘
->
height
 = 
maxy
 - 
y
 + 1;

280 
de°ª˘
->
x
 = x;

281 
de°ª˘
->
width
 = width;

282 
de°ª˘
->
y
 = 
maxy
 + 1;

283 
de°ª˘
->
height
 = 
y
 + heighà- 
maxy
 - 1;

286 
	`GAPVAL
(0, 1, 1, 0):

287 
dx
 = 
maxx
 - 
x
 + 1;

288 
§¸e˘
->
height
 = 
möy
 - 
y
;

289 
de°ª˘
->
x
 = x + 
dx
;

290 
de°ª˘
->
width
 = width - 
dx
;

291 
de°ª˘
->
y
 = 
möy
;

292 
de°ª˘
->
height
 = 
y
 + heighà- 
möy
;

295 
	`GAPVAL
(0, 1, 1, 1):

296 
dx
 = 
maxx
 - 
x
 + 1;

297 
§¸e˘
->
height
 = 
möy
 - 
y
;

298 
de°ª˘
->
x
 = x;

299 
de°ª˘
->
width
 = width;

300 
de°ª˘
->
y
 = 
maxy
 + 1;

301 
de°ª˘
->
height
 = 
y
 + heighà- 
maxy
 - 1;

302 
de°ª˘
++;

303 
de°ª˘
->
x
 = x + 
dx
;

304 
de°ª˘
->
width
 = width - 
dx
;

305 
de°ª˘
->
y
 = 
möy
;

306 
de°ª˘
->
height
 = 
maxy
 - 
möy
 + 1;

309 
	`GAPVAL
(1, 0, 0, 0):

310 
§¸e˘
->
width
 = 
möx
 - 
x
;

313 
	`GAPVAL
(1, 0, 0, 1):

314 
§¸e˘
->
width
 = 
möx
 - 
x
;

315 
§¸e˘
->
height
 = 
maxy
 - 
y
 + 1;

316 
de°ª˘
->
x
 = x;

317 
de°ª˘
->
width
 = width;

318 
de°ª˘
->
y
 = 
maxy
 + 1;

319 
de°ª˘
->
height
 = 
y
 + heighà- 
maxy
 - 1;

322 
	`GAPVAL
(1, 0, 1, 0):

323 
§¸e˘
->
height
 = 
möy
 - 
y
;

324 
de°ª˘
->
x
 = x;

325 
de°ª˘
->
width
 = 
möx
 - 
x
;

326 
de°ª˘
->
y
 = 
möy
;

327 
de°ª˘
->
height
 = 
y
 + heighà- 
möy
;

330 
	`GAPVAL
(1, 0, 1, 1):

331 
§¸e˘
->
height
 = 
möy
 - 
y
;

332 
de°ª˘
->
x
 = x;

333 
de°ª˘
->
width
 = 
möx
 - 
x
;

334 
de°ª˘
->
y
 = 
möy
;

335 
de°ª˘
->
height
 = 
maxy
 - 
möy
 + 1;

336 
de°ª˘
++;

337 
de°ª˘
->
x
 = x;

338 
de°ª˘
->
width
 = width;

339 
de°ª˘
->
y
 = 
maxy
 + 1;

340 
de°ª˘
->
height
 = 
y
 + heighà- 
maxy
 - 1;

343 
	`GAPVAL
(1, 1, 0, 0):

344 
de°ª˘
->
x
 = 
maxx
 + 1;

345 
de°ª˘
->
width
 = 
x
 + width - 
maxx
 - 1;

346 
de°ª˘
->
y
 = y;

347 
de°ª˘
->
height
 = height;

348 
§¸e˘
->
width
 = 
möx
 - 
x
;

351 
	`GAPVAL
(1, 1, 0, 1):

352 
dy
 = 
maxy
 - 
y
 + 1;

353 
§¸e˘
->
y
 +
dy
;

354 
§¸e˘
->
height
 -
dy
;

355 
de°ª˘
->
x
 = x;

356 
de°ª˘
->
width
 = 
möx
 - 
x
;

357 
de°ª˘
->
y
 = y;

358 
de°ª˘
->
height
 = 
dy
;

359 
de°ª˘
++;

360 
de°ª˘
->
x
 = 
maxx
 + 1;

361 
de°ª˘
->
width
 = 
x
 + width - 
maxx
 - 1;

362 
de°ª˘
->
y
 = y;

363 
de°ª˘
->
height
 = 
dy
;

366 
	`GAPVAL
(1, 1, 1, 0):

367 
§¸e˘
->
height
 = 
möy
 - 
y
;

368 
de°ª˘
->
x
 = x;

369 
de°ª˘
->
width
 = 
möx
 - 
x
;

370 
de°ª˘
->
y
 = 
möy
;

371 
de°ª˘
->
height
 = 
y
 + heighà- 
möy
;

372 
de°ª˘
++;

373 
de°ª˘
->
x
 = 
maxx
 + 1;

374 
de°ª˘
->
width
 = 
x
 + width - 
maxx
 - 1;

375 
de°ª˘
->
y
 = 
möy
;

376 
de°ª˘
->
height
 = 
y
 + heighà- 
möy
;

379 
	`GAPVAL
(1, 1, 1, 1):

380 
§¸e˘
->
height
 = 
möy
 - 
y
;

381 
de°ª˘
->
x
 = x;

382 
de°ª˘
->
width
 = 
möx
 - 
x
;

383 
de°ª˘
->
y
 = 
möy
;

384 
de°ª˘
->
height
 = 
maxy
 - 
möy
 + 1;

385 
de°ª˘
++;

386 
de°ª˘
->
x
 = 
maxx
 + 1;

387 
de°ª˘
->
width
 = 
x
 + width - 
maxx
 - 1;

388 
de°ª˘
->
y
 = 
möy
;

389 
de°ª˘
->
height
 = 
maxy
 - 
möy
 + 1;

390 
de°ª˘
++;

391 
de°ª˘
->
x
 = x;

392 
de°ª˘
->
width
 = width;

393 
de°ª˘
->
y
 = 
maxy
 + 1;

394 
de°ª˘
->
height
 = 
y
 + heighà- 
maxy
 - 1;

398 
	}
}

	@mwin/winclip2.c

9 
	~"wödows.h
"

10 
	~"wöã∫.h
"

20 
	$MwSëClùWödow
(
HDC
 
hdc
)

22 
HWND
 
wp
 = 
hdc
->
hwnd
;

23 
HWND
 
pwp
;

24 
HWND
 
sibwp
;

25 
MWCOORD
 
diff
;

26 
PRECT
 
¥c
;

27 
MWCLIPREGION
 *
vis
, *
r
;

28 
MWCOORD
 
x
, 
y
, 
width
, 
height
;

34 
¥c
 = 
	`MwIsClõ¡DC
(
hdc
)? &
wp
->
˛úe˘
: &wp->
wöª˘
;

35 
x
 = 
¥c
->
À·
;

36 
y
 = 
¥c
->
t›
;

37 
width
 = 
¥c
->
right
 -Örc->
À·
;

38 
height
 = 
¥c
->
bŸtom
 -Örc->
t›
;

45 
pwp
 = 
wp
;

46 
pwp
 !
roŸwp
) {

47 
pwp
 =Öwp->
∑ª¡
;

49 
diff
 = 
pwp
->
˛úe˘
.
À·
 - 
x
;

50 i‡(
diff
 > 0) {

51 
width
 -
diff
;

52 
x
 = 
pwp
->
˛úe˘
.
À·
;

55 
diff
 = 
pwp
->
˛úe˘
.
right
 - (
x
 + 
width
);

56 i‡(
diff
 < 0)

57 
width
 +
diff
;

59 
diff
 = 
pwp
->
˛úe˘
.
t›
 - 
y
;

60 i‡(
diff
 > 0) {

61 
height
 -
diff
;

62 
y
 = 
pwp
->
˛úe˘
.
t›
;

65 
diff
 = 
pwp
->
˛úe˘
.
bŸtom
 - (
y
 + 
height
);

66 i‡(
diff
 < 0)

67 
height
 +
diff
;

74 i‡(
width
 <0 || 
height
 <= 0) {

75 
	`GdSëClùRegi⁄
(
hdc
->
psd
, 
NULL
);

82 
vis
 = 
	`GdAŒocRe˘Regi⁄
(
x
, 
y
, x+
width
, y+
height
);

87 
r
 = 
	`GdAŒocRegi⁄
();

96 
pwp
 = 
wp
;

97 
pwp
 !
NULL
) {

98 
wp
 = 
pwp
;

99 
pwp
 = 
wp
->
∑ª¡
;

100 if(!
pwp
) {

102 if(
hdc
->
Êags
 & 
DCX_CLIPCHILDREN
)

104 
sibwp
 = 
roŸwp
->
chûdªn
;

105 
sibwp
 = 
NULL
;

106 
wp
 = 
NULL
;

108 if(
hdc
->
Êags
 & 
DCX_CLIPSIBLINGS
)

109 
sibwp
 = 
pwp
->
chûdªn
;

110 
sibwp
 = 
wp
;

112 ; 
sibwp
 !
wp
; sibw∞sibwp->
siblögs
) {

113 i‡(
sibwp
->
unm≠cou¡
)

116 
	`GdSëRe˘Regi⁄Indúe˘
(
r
, &
sibwp
->
wöª˘
);

117 
	`GdSubåa˘Regi⁄
(
vis
, vis, 
r
);

121 if(
pwp
 =
roŸwp
)

132 
wp
 = 
hdc
->
hwnd
;

133 if(
wp
 !
roŸwp
 && 
	`MwIsClõ¡DC
(
hdc
)) {

134 
sibwp
=
wp
->
chûdªn
; sibwp; sibw∞sibwp->
siblögs
) {

135 i‡(
sibwp
->
unm≠cou¡
)

138 
	`GdSëRe˘Regi⁄Indúe˘
(
r
, &
sibwp
->
wöª˘
);

139 
	`GdSubåa˘Regi⁄
(
vis
, vis, 
r
);

143 #i‡
UPDATEREGIONS


147 if(!(
hdc
->
Êags
 & 
DCX_EXCLUDEUPDATE
))

148 
	`GdI¡î£˘Regi⁄
(
vis
, vis, 
wp
->
upd©e
);

153 i‡(
hdc
->
ªgi⁄
)

154 
	`GdI¡î£˘Regi⁄
(
vis
, vis, 
hdc
->
ªgi⁄
->
rgn
);

158 
	`GdSëClùRegi⁄
(
hdc
->
psd
, 
vis
);

163 
	`GdDe°royRegi⁄
(
r
);

164 
	}
}

	@mwin/windefw.c

9 
	~"wödows.h
"

10 
	~"wöã∫.h
"

11 
	~"devi˚.h
"

12 
	~"wötoﬁs.h
"

13 
	~<°rög.h
>

16 
PMWIMAGEHDR
 
	gpImageWÆÕ≠î
 = 
NULL
;

19 
GëClo£BoxRe˘
(
HWND
 
hwnd
, 
LPRECT
 
Õrc
);

20 
DøwXORFøme
(
HWND
 
hwnd
,
x
, 
y
, 
BOOL
 
bDøwCuºít
);

21 
RECT
 
	gœ°rc
;

23 
BOOL


24 
	$MwSëDeskt›WÆÕ≠î
(
PMWIMAGEHDR
 
pImage
)

26 
pImageWÆÕ≠î
 = 
pImage
;

27 
	`InvÆid©eRe˘
(
roŸwp
, 
NULL
, 
TRUE
);

28  
TRUE
;

29 
	}
}

33 
	$DøwXORFøme
(
HWND
 
hwnd
,
x
, 
y
, 
BOOL
 
bDøwCuºít
)

35 
HDC
 
hdc
;

36 
RECT
 
rc
;

38 
hdc
 = 
	`GëDCEx
(
NULL
, NULL, 
DCX_WINDOW
|
DCX_EXCLUDEUPDATE
);

39 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
NULL_BRUSH
));

40 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
WHITE_PEN
));

41 
	`GdSëMode
(
MWMODE_XOR
);

42 if(!
	`IsRe˘Em±y
(&
œ°rc
))

43 
	`Re˘™gÀ
(
hdc
, 
œ°rc
.
À·
,Üa°rc.
t›
,Üa°rc.
right
,

44 
œ°rc
.
bŸtom
);

45 
	`GëWödowRe˘
(
hwnd
, &
rc
);

46 
	`SëRe˘
(&
œ°rc
, 
rc
.
À·
+
x
,Ñc.
t›
+
y
,Ñc.
right
+x,Ñc.
bŸtom
+y);

47 if(
bDøwCuºít
)

48 
	`Re˘™gÀ
(
hdc
, 
œ°rc
.
À·
,Üa°rc.
t›
,Üa°rc.
right
,

49 
œ°rc
.
bŸtom
);

50 
	`Rñó£DC
(
NULL
, 
hdc
);

51 
	`GdSëMode
(
MWMODE_COPY
);

52 
	}
}

58 
LRESULT
 
WINAPI


59 
	$DefWödowProc
(
HWND
 
hwnd
, 
UINT
 
msg
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
)

61 
HDC
 
hdc
;

62 
RECT
 
rc
;

63 
DWORD
 
dwStyÀ
;

64 
HBRUSH
 
hbr
;

65 
HPEN
 
h≥n
, 
hﬁd≥n
;

66 
PAINTSTRUCT
 
ps
;

67 
POINT
 
cuΩt
;

68 
x
, 
y
;

69 
HWND
 
wp
;

70 
HWND
 
ﬁdA˘ive
;

71 
COLORREF
 
¸C≠ti⁄
;

72 
LPNCCALCSIZE_PARAMS
 
Õnc
;

73 
CHAR
 
szTôÀ
[64];

74 
POINT
 
°¨çt
;

76 
msg
) {

77 
WM_NCCALCSIZE
:

79 
Õnc
 = (
LPNCCALCSIZE_PARAMS
)
lP¨am
;

80 
dwStyÀ
 = 
	`GëWödowL⁄g
(
hwnd
, 
GWL_STYLE
);

81 if(
dwStyÀ
 & 
WS_BORDER
) {

82 if((
dwStyÀ
 & 
WS_CAPTION
) == WS_CAPTION) {

83 
	`InÊ©eRe˘
(&
Õnc
->
rgrc
[0],

84 -
mwSYSMETRICS_CXFRAME
,

85 -
mwSYSMETRICS_CYFRAME
);

86 
Õnc
->
rgrc
[0].
t›
 +
mwSYSMETRICS_CYCAPTION
 + 1;

88 
	`InÊ©eRe˘
(&
Õnc
->
rgrc
[0], -1, -1);

92 
WM_NCPAINT
:

94 
dwStyÀ
 = 
	`GëWödowL⁄g
(
hwnd
, 
GWL_STYLE
);

96 if(
dwStyÀ
 & 
WS_BORDER
) {

97 
hdc
 = 
	`GëWödowDC
(
hwnd
);

98 
	`GëWödowRe˘
(
hwnd
, &
rc
);

100 if((
dwStyÀ
 & 
WS_CAPTION
) == WS_CAPTION) {

102 
	`Døw3dOut£t
(
hdc
, 
rc
.
À·
,Ñc.
t›
,

103 
rc
.
right
-rc.
À·
,Ñc.
bŸtom
-rc.
t›
);

104 
	`InÊ©eRe˘
(&
rc
, -2, -2);

107 
h≥n
 = 
	`Cª©ePí
(
PS_SOLID
, 1,

108 
	`GëSysCﬁ‹
(
COLOR_BTNFACE
));

109 
hﬁd≥n
 = 
	`Sñe˘Obje˘
(
hdc
, 
h≥n
);

110 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
NULL_BRUSH
));

111 
	`Re˘™gÀ
(
hdc
, 
rc
.
À·
,Ñc.
t›
,Ñc.
right
,

112 
rc
.
bŸtom
);

113 
	`InÊ©eRe˘
(&
rc
, -1, -1);

116 
rc
.
bŸtom
 =Ñc.
t›
 + 
mwSYSMETRICS_CYCAPTION
;

117 
¸C≠ti⁄
 = 
	`GëA˘iveWödow
()==
hwnd
?

118 
	`GëSysCﬁ‹
(
COLOR_ACTIVECAPTION
):

119 
	`GëSysCﬁ‹
(
COLOR_INACTIVECAPTION
);

120 
hbr
 = 
	`Cª©eSﬁidBrush
(
¸C≠ti⁄
);

121 
	`FûlRe˘
(
hdc
, &
rc
, 
hbr
);

122 
	`DñëeObje˘
(
hbr
);

125 
	`MoveToEx
(
hdc
, 
rc
.
À·
,Ñc.
bŸtom
, 
NULL
);

126 
	`LöeTo
(
hdc
, 
rc
.
right
,Ñc.
bŸtom
);

127 
	`DñëeObje˘
(
	`Sñe˘Obje˘
(
hdc
, 
hﬁd≥n
));

130 if(
	`GëWödowText
(
hwnd
, 
szTôÀ
,

131 (
szTôÀ
))) {

132 
	`SëBkMode
(
hdc
, 
TRANSPARENT
);

139 
	`SëBkCﬁ‹
(
hdc
, 
¸C≠ti⁄
);

140 
	`SëTextCﬁ‹
(
hdc
,

141 
	`GëA˘iveWödow
()==
hwnd
?

142 
	`GëSysCﬁ‹
(
COLOR_CAPTIONTEXT
):

143 
	`GëSysCﬁ‹
(
COLOR_INACTIVECAPTIONTEXT
));

144 
	`Sñe˘Obje˘
(
hdc
,

145 
	`GëStockObje˘
(
DEFAULT_GUI_FONT
));

146 
	`GëWödowRe˘
(
hwnd
, &
rc
);

147 
	`TextOut
(
hdc
, 
rc
.
À·
+4,Ñc.
t›
+2,

148 
szTôÀ
, 
	`°æí
(szTitle));

152 
	`GëClo£BoxRe˘
(
hwnd
, &
rc
);

155 
	`Døw3dBox
(
hdc
, 
rc
.
À·
,Ñc.
t›
,

156 
rc
.
right
-rc.
À·
,Ñc.
bŸtom
-rc.
t›
,

157 
	`GëSysCﬁ‹
(
COLOR_BTNHIGHLIGHT
),

158 
	`GëSysCﬁ‹
(
COLOR_WINDOWFRAME
));

159 
	`InÊ©eRe˘
(&
rc
, -1, -1);

160 
hbr
 = 
	`Cª©eSﬁidBrush
(

161 
	`GëSysCﬁ‹
(
COLOR_BTNFACE
));

162 
	`FûlRe˘
(
hdc
, &
rc
, 
hbr
);

163 
	`DñëeObje˘
(
hbr
);

165 
	`InÊ©eRe˘
(&
rc
, -1, -1);

166 
	`MoveToEx
(
hdc
, 
rc
.
À·
,Ñc.
t›
, 
NULL
);

167 
	`LöeTo
(
hdc
, 
rc
.
right
-1,Ñc.
bŸtom
-1);

168 
	`MoveToEx
(
hdc
, 
rc
.
À·
,Ñc.
bŸtom
-1, 
NULL
);

169 
	`LöeTo
(
hdc
, 
rc
.
right
-1,Ñc.
t›
);

171 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
NULL_BRUSH
));

172 
	`Re˘™gÀ
(
hdc
, 
rc
.
À·
,Ñc.
t›
,Ñc.
right
,

173 
rc
.
bŸtom
);

175 
	`Rñó£DC
(
hwnd
, 
hdc
);

179 
WM_NCHITTEST
:

181 if(
døgwp
)

182  
HTCAPTION
;

185 
	`POINTSTOPOINT
(
cuΩt
, 
lP¨am
);

187 if(
	`PtInRe˘
(&
hwnd
->
˛úe˘
, 
cuΩt
))

188  
HTCLIENT
;

190 if(
	`PtInRe˘
(&
hwnd
->
vs¸ﬁl
.
rc
, 
cuΩt
))

191  
HTVSCROLL
;

192 if(
	`PtInRe˘
(&
hwnd
->
hs¸ﬁl
.
rc
, 
cuΩt
))

193  
HTHSCROLL
;

195 
dwStyÀ
 = 
	`GëWödowL⁄g
(
hwnd
, 
GWL_STYLE
);

196 if((
dwStyÀ
 & 
WS_CAPTION
) == WS_CAPTION) {

197 
	`GëClo£BoxRe˘
(
hwnd
, &
rc
);

198 if(
	`PtInRe˘
(&
rc
, 
cuΩt
))

199  
HTCLOSE
;

201 
	`GëWödowRe˘
(
hwnd
, &
rc
);

202 
	`InÊ©eRe˘
(&
rc
, -2, -2);

203 
rc
.
bŸtom
 =Ñc.
t›
 + 
mwSYSMETRICS_CYCAPTION
;

204 if(
	`PtInRe˘
(&
rc
, 
cuΩt
))

205  
HTCAPTION
;

207 
	`GëWödowRe˘
(
hwnd
, &
rc
);

208 
	`InÊ©eRe˘
(&
rc
, -2, -2);

209 
rc
.
t›
 +
mwSYSMETRICS_CYCAPTION
;

210 if(
	`PtInRe˘
(&
rc
, 
cuΩt
))

211  
HTCLIENT
;

213  
HTBORDER
;

215  
HTNOWHERE
;

217 
WM_NCLBUTTONDOWN
:

219 if(
wP¨am
 =
HTCLOSE
) {

220 
	`SídMesßge
(
hwnd
, 
WM_CLOSE
, 0, 0L);

225 
ﬁdA˘ive
 = 
	`GëA˘iveWödow
();

226 if(
wP¨am
 =
HTCLIENT
 || wP¨am =
HTVSCROLL
 ||

227 
wP¨am
 =
HTHSCROLL
)

230 
	`SëF‹egroundWödow
(
hwnd
);

234 
	`SëFocus
(
hwnd
);

237 
	`Upd©eWödow
(
ﬁdA˘ive
);

238 
	`Upd©eWödow
(
hwnd
);

240 if(
wP¨am
 =
HTVSCROLL
 || wP¨am =
HTHSCROLL
) {

241 
	`MwH™dÀNCMesßgeS¸ﬁlb¨
(
hwnd
, 
msg
, 
wP¨am
, 
lP¨am
);

246 if(
wP¨am
 =
HTCAPTION
 && 
hwnd
 !
roŸwp
) {

247 
	`POINTSTOPOINT
(
°¨çt
, 
lP¨am
);

248 if(!(
	`GëWödowL⁄g
(
hwnd
, 
GWL_STYLE
Ë& 
WS_MAXIMIZE
))

249 
døgwp
 = 
hwnd
;

250 
	`SëRe˘Em±y
(&
œ°rc
);

254 
WM_NCMOUSEMOVE
:

255 if(
wP¨am
 =
HTVSCROLL
 || wP¨am =
HTHSCROLL
) {

256 
	`MwH™dÀNCMesßgeS¸ﬁlb¨
(
hwnd
, 
msg
, 
wP¨am
, 
lP¨am
);

261 if(
døgwp
 =
hwnd
) {

262 
	`POINTSTOPOINT
(
cuΩt
, 
lP¨am
);

263 
x
 = 
cuΩt
.x - 
°¨çt
.x;

264 
y
 = 
cuΩt
.y - 
°¨çt
.y;

266 if(
mwERASEMOVE
) {

267 
	`GëWödowRe˘
(
hwnd
, &
rc
);

268 
	`MoveWödow
(
hwnd
, 
rc
.
À·
+
x
,Ñc.
t›
+
y
,

269 
rc
.
right
-rc.
À·
,Ñc.
bŸtom
-rc.
t›
,

270 
TRUE
);

271 
°¨çt
 = 
cuΩt
;

273 
	`DøwXORFøme
(
hwnd
, 
x
, 
y
, 
TRUE
);

277 
WM_NCLBUTTONUP
:

279 if(
døgwp
 =
hwnd
) {

280 
døgwp
 = 
NULL
;

282 if(
mwERASEMOVE
) {

287 
wp
=
li°wp
; wp; wp=wp->
√xt
)

288 if(
wp
->
gŸPaötMsg
 =
PAINT_DELAYPAINT
)

289 
wp
->
gŸPaötMsg
 = 
PAINT_NEEDSPAINT
;

291 
	`POINTSTOPOINT
(
cuΩt
, 
lP¨am
);

292 
x
 = 
cuΩt
.x - 
°¨çt
.x;

293 
y
 = 
cuΩt
.y - 
°¨çt
.y;

294 
	`DøwXORFøme
(
hwnd
, 
x
, 
y
, 
FALSE
);

295 
	`GëWödowRe˘
(
hwnd
, &
rc
);

296 
	`MoveWödow
(
hwnd
, 
rc
.
À·
+
x
,Ñc.
t›
+
y
,

297 
rc
.
right
-rc.
À·
,Ñc.
bŸtom
-rc.
t›
, 
TRUE
);

301 if(
wP¨am
 =
HTVSCROLL
 || wP¨am =
HTHSCROLL
) {

302 
	`MwH™dÀNCMesßgeS¸ﬁlb¨
(
hwnd
, 
msg
, 
wP¨am
, 
lP¨am
);

307 
WM_NCLBUTTONDBLCLK
:

308 if(
wP¨am
 =
HTVSCROLL
 || wP¨am =
HTHSCROLL
) {

309 
	`MwH™dÀNCMesßgeS¸ﬁlb¨
(
hwnd
, 
msg
, 
wP¨am
, 
lP¨am
);

314 if(
wP¨am
 !
HTCAPTION
)

317 if((
hwnd
->
°yÀ
 & 
WS_CAPTION
) == WS_CAPTION) {

318 if(
hwnd
->
°yÀ
 & 
WS_MAXIMIZE
) {

319 
rc
 = 
hwnd
->
ª°‹îc
;

320 
	`MoveWödow
(
hwnd
, 
rc
.
À·
,Ñc.
t›
,

321 
rc
.
right
-rc.
À·
,Ñc.
bŸtom
-rc.
t›
,

322 
TRUE
);

323 
hwnd
->
°yÀ
 &~
WS_MAXIMIZE
;

325 
hwnd
->
ª°‹îc
 = hwnd->
wöª˘
;

326 
	`GëWödowRe˘
(
roŸwp
, &
rc
);

327 
	`MoveWödow
(
hwnd
, -
mwSYSMETRICS_CXFRAME
,

328 -
mwSYSMETRICS_CYFRAME
,

329 
rc
.
right
+2*
mwSYSMETRICS_CXFRAME
,

330 
rc
.
bŸtom
+2*
mwSYSMETRICS_CYFRAME
, 
TRUE
);

331 
hwnd
->
°yÀ
 |
WS_MAXIMIZE
;

336 
WM_GETTEXTLENGTH
:

340  
	`°æí
(
hwnd
->
szTôÀ
);

342 
WM_GETTEXT
:

346  
	`°rz˝y
((
LPSTR
)
lP¨am
, 
hwnd
->
szTôÀ
, 
wP¨am
);

348 
WM_SETTEXT
:

353 
	`°rz˝y
(
hwnd
->
szTôÀ
, (
LPSTR
)
lP¨am
, (hwnd->szTitle));

354  
TRUE
;

356 
WM_CLOSE
:

357 
	`De°royWödow
(
hwnd
);

358 if(
hwnd
 =
roŸwp
)

359 
	`Po°QuôMesßge
(0);

362 
WM_ERASEBKGND
:

364 
hbr
 = (
HBRUSH
)
	`GëCœssL⁄g
(
hwnd
, 
GCL_HBRBACKGROUND
);

365 if(!
hbr
)

368 
hdc
 = 
	`GëDCEx
(
hwnd
, 
NULL
, 
DCX_DEFAULTCLIP
);

369 
	`FûlRe˘
(
hdc
, 
NULL
, 
hbr
);

370 
	`Rñó£DC
(
hwnd
, 
hdc
);

373 
WM_PAINT
:

375 
hdc
 = 
	`BegöPaöt
(
hwnd
, &
ps
);

378 if(
hwnd
 =
roŸwp
 && 
pImageWÆÕ≠î
) {

379 
	`GëWödowRe˘
(
hwnd
, &
rc
);

380 
	`DøwDIB
(
hdc
,

381 (
rc
.
right
-rc.
À·
-
pImageWÆÕ≠î
->
width
)/2,

382 (
rc
.
bŸtom
-rc.
t›
-
pImageWÆÕ≠î
->
height
)/2,

383 
pImageWÆÕ≠î
);

386 
	`EndPaöt
(
hwnd
, &
ps
);

390 
	}
}

393 
	$GëClo£BoxRe˘
(
HWND
 
hwnd
, 
LPRECT
 
Õrc
)

395 
	#XSIZE_CLOSEBOX
 9

	)

396 
	#YSIZE_CLOSEBOX
 9

	)

397 
	`GëWödowRe˘
(
hwnd
, 
Õrc
);

398 
Õrc
->
À·
 =Ü¥c->
right
 - 
XSIZE_CLOSEBOX
 - 5;

399 
Õrc
->
t›
 =Üprc->top + 5;

400 
Õrc
->
right
 =Ü¥c->
À·
 + 
XSIZE_CLOSEBOX
;

401 
Õrc
->
bŸtom
 =Ü¥c->
t›
 + 
YSIZE_CLOSEBOX
;

402 
	}
}

	@mwin/winevent.c

9 
	~"wödows.h
"

10 
	~"wöã∫.h
"

11 
	~"devi˚.h
"

12 
	~<°dio.h
>

13 
	~<°dlib.h
>

14 
	~<°rög.h
>

17 #ifde‡
PSP


18 
	#exô
(...Ë
	`s˚Kî√lExôGame
()

	)

21 #i‡!(
DOS_TURBOC
 | 
DOS_QUICKC
 | 
_MINIX
 | 
VXWORKS
)

23 
	$abs
(
n
)

25  
n
 >= 0?Ç: -n;

26 
	}
}

34 
BOOL


35 
	$MwCheckMou£Evít
()

37 
MWCOORD
 
roŸx
;

38 
MWCOORD
 
roŸy
;

39 
√wbuâ⁄s
;

40 
mou£°©us
;

43 
mou£°©us
 = 
	`GdRódMou£
(&
roŸx
, &
roŸy
, &
√wbuâ⁄s
);

44 if(
mou£°©us
 < 0) {

46  
FALSE
;

47 } if(
mou£°©us
) {

48 
	`MwH™dÀMou£Sètus
(
roŸx
, 
roŸy
, 
√wbuâ⁄s
);

49  
TRUE
;

51  
FALSE
;

52 
	}
}

59 
BOOL


60 
	$MwCheckKeybﬂrdEvít
()

62 
MWKEY
 
mwkey
;

63 
MWKEYMOD
 
modifõrs
;

64 
MWSCANCODE
 
sˇncode
;

65 
key°©us
;

68 
key°©us
 = 
	`GdRódKeybﬂrd
(&
mwkey
, &
modifõrs
, &
sˇncode
);

69 if(
key°©us
 < 0) {

70 if(
key°©us
 == -2)

71 
	`MwTîmö©e
();

73  
FALSE
;

74 } if(
key°©us
) {

75 
mwkey
) {

76 
MWKEY_QUIT
:

77 
	`MwTîmö©e
();

79 
MWKEY_REDRAW
:

80 
	`MwRedøwS¸ìn
();

82 
MWKEY_PRINT
:

83 i‡(
key°©us
 == 1)

84 
	`GdC≠tuªS¸ìn
("screen.bmp");

87 
	`MwDñivîKeybﬂrdEvít
(
mwkey
, 
modifõrs
, 
sˇncode
,

88 
key°©us
==1? 
TRUE
: 
FALSE
);

89  
TRUE
;

91  
FALSE
;

92 
	}
}

100 
	$MwH™dÀMou£Sètus
(
MWCOORD
 
√wx
, MWCOORD 
√wy
, 
√wbuâ⁄s
)

102 
ch™gebuâ⁄s
;

103 
MWKEYMOD
 
modifõrs
;

104 
curbuâ⁄s
;

106 
	`GdGëModifõrInfo
(
NULL
, &
modifõrs
);

114 i‡(
√wx
 !
curs‹x
 || 
√wy
 !
curs‹y
) {

115 
	`MwMoveCurs‹
(
√wx
, 
√wy
);

116 
	`MwDñivîMou£Evít
(
√wbuâ⁄s
, 0, 
modifõrs
);

122 
ch™gebuâ⁄s
 = (
curbuâ⁄s
 & ~
√wbuâ⁄s
);

123 i‡(
ch™gebuâ⁄s
)

124 
	`MwDñivîMou£Evít
(
√wbuâ⁄s
, 
ch™gebuâ⁄s
, 
modifõrs
);

130 
ch™gebuâ⁄s
 = (~
curbuâ⁄s
 & 
√wbuâ⁄s
);

131 i‡(
ch™gebuâ⁄s
)

132 
	`MwDñivîMou£Evít
(
√wbuâ⁄s
, 
ch™gebuâ⁄s
, 
modifõrs
);

134 
curbuâ⁄s
 = 
√wbuâ⁄s
;

135 
	}
}

141 
	$MwTøn¶©eMou£Mesßge
(
HWND
 
hwnd
,
UINT
 
msg
,
hôã°
)

143 
POINT
 
±
;

144 
DWORD
 
tick
;

145 
UINT
 
œ°msg
 = 0;

146 
HWND
 
œ°hwnd
;

147 
DWORD
 
œ°tick
;

148 
œ°x
, 
œ°y
;

151 if(
msg
 =
WM_LBUTTONDOWN
 || msg =
WM_RBUTTONDOWN
) {

152 
tick
 = 
	`GëTickCou¡
();

153 if((
hwnd
->
pCœss
->
°yÀ
 & 
CS_DBLCLKS
) &&

154 
msg
 =
œ°msg
 && 
hwnd
 =
œ°hwnd
 &&

155 
tick
 - 
œ°tick
 < 
DBLCLICKSPEED
 &&

156 
	`abs
(
curs‹x
-
œ°x
Ë< 
mwSYSMETRICS_CXDOUBLECLK
 &&

157 
	`abs
(
curs‹y
-
œ°y
Ë< 
mwSYSMETRICS_CYDOUBLECLK
)

158 
msg
 +(
WM_LBUTTONDBLCLK
 - 
WM_LBUTTONDOWN
);

159 
œ°msg
 = 
msg
;

160 
œ°hwnd
 = 
hwnd
;

161 
œ°tick
 = 
tick
;

162 
œ°x
 = 
curs‹x
;

163 
œ°y
 = 
curs‹y
;

170 
	`Po°Mesßge
(
hwnd
, 
msg
 + (
WM_NCMOUSEMOVE
-
WM_MOUSEMOVE
), 
hôã°
,

171 
	`MAKELONG
(
curs‹x
, 
curs‹y
));

174 if(
hôã°
 =
HTCLIENT
) {

175 
±
.
x
 = 
curs‹x
;

176 
±
.
y
 = 
curs‹y
;

177 
	`S¸ìnToClõ¡
(
hwnd
, &
±
);

178 
	`Po°Mesßge
(
hwnd
, 
msg
, 0, 
	`MAKELONG
(
±
.
x
,Öt.
y
));

180 
	}
}

185 
	gmwCuºítBuâ⁄s
;

188 
	$MwDñivîMou£Evít
(
buâ⁄s
, 
ch™gebuâ⁄s
, 
MWKEYMOD
 
modifõrs
)

190 
HWND
 
hwnd
;

191 
hôã°
;

192 
UINT
 
msg
;

194 
mwCuºítBuâ⁄s
 = 
buâ⁄s
;

196 
hwnd
 = 
	`GëC≠tuª
();

197 if(!
hwnd
)

198 
hwnd
 = 
mou£wp
;

199 
hôã°
 = 
	`SídMesßge
(
hwnd
, 
WM_NCHITTEST
, 0, 
	`MAKELONG
(
curs‹x
,
curs‹y
));

201 if(!
ch™gebuâ⁄s
)

202 
	`MwTøn¶©eMou£Mesßge
(
hwnd
, 
WM_MOUSEMOVE
, 
hôã°
);

204 if(
ch™gebuâ⁄s
 & 
MWBUTTON_L
) {

205 
msg
 = (
buâ⁄s
&
MWBUTTON_L
)? 
WM_LBUTTONDOWN
: 
WM_LBUTTONUP
;

206 
	`MwTøn¶©eMou£Mesßge
(
hwnd
, 
msg
, 
hôã°
);

209 if(
ch™gebuâ⁄s
 & 
MWBUTTON_M
) {

210 
msg
 = (
buâ⁄s
&
MWBUTTON_M
)? 
WM_MBUTTONDOWN
: 
WM_MBUTTONUP
;

211 
	`MwTøn¶©eMou£Mesßge
(
hwnd
, 
msg
, 
hôã°
);

214 if(
ch™gebuâ⁄s
 & 
MWBUTTON_R
) {

215 
msg
 = (
buâ⁄s
&
MWBUTTON_R
)? 
WM_RBUTTONDOWN
: 
WM_RBUTTONUP
;

216 
	`MwTøn¶©eMou£Mesßge
(
hwnd
, 
msg
, 
hôã°
);

218 
	}
}

224 
	$MwDñivîKeybﬂrdEvít
(
MWKEY
 
keyvÆue
, 
MWKEYMOD
 
modifõrs
, 
MWSCANCODE
 
sˇncode
,

225 
BOOL
 
¥es£d
)

227 
WPARAM
 
VK_Code
 = 
keyvÆue
;

230 i‡(
keyvÆue
 < 1 || keyvalue > 255)

231 
keyvÆue
) {

234 
MWKEY_LEFT
:

235 
VK_Code
 = 
VK_LEFT
;

237 
MWKEY_RIGHT
:

238 
VK_Code
 = 
VK_RIGHT
;

240 
MWKEY_UP
:

241 
VK_Code
 = 
VK_UP
;

243 
MWKEY_DOWN
:

244 
VK_Code
 = 
VK_DOWN
;

246 
MWKEY_INSERT
:

247 
VK_Code
 = 
VK_INSERT
;

249 
MWKEY_DELETE
:

250 
VK_Code
 = 
VK_DELETE
;

252 
MWKEY_HOME
:

253 
VK_Code
 = 
VK_HOME
;

255 
MWKEY_END
:

256 
VK_Code
 = 
VK_END
;

258 
MWKEY_PAGEUP
:

259 
VK_Code
 = 
VK_PRIOR
;

261 
MWKEY_PAGEDOWN
:

262 
VK_Code
 = 
VK_NEXT
;

266 
MWKEY_KP0
:

267 
VK_Code
 = 
VK_NUMPAD0
;

269 
MWKEY_KP1
:

270 
VK_Code
 = 
VK_NUMPAD1
;

272 
MWKEY_KP2
:

273 
VK_Code
 = 
VK_NUMPAD2
;

275 
MWKEY_KP3
:

276 
VK_Code
 = 
VK_NUMPAD3
;

278 
MWKEY_KP4
:

279 
VK_Code
 = 
VK_NUMPAD4
;

281 
MWKEY_KP5
:

282 
VK_Code
 = 
VK_NUMPAD5
;

284 
MWKEY_KP6
:

285 
VK_Code
 = 
VK_NUMPAD6
;

287 
MWKEY_KP7
:

288 
VK_Code
 = 
VK_NUMPAD7
;

290 
MWKEY_KP8
:

291 
VK_Code
 = 
VK_NUMPAD8
;

293 
MWKEY_KP9
:

294 
VK_Code
 = 
VK_NUMPAD9
;

296 
MWKEY_KP_PERIOD
:

297 
VK_Code
 = 
VK_DECIMAL
;

299 
MWKEY_KP_DIVIDE
:

300 
VK_Code
 = 
VK_DIVIDE
;

302 
MWKEY_KP_MULTIPLY
:

303 
VK_Code
 = 
VK_MULTIPLY
;

305 
MWKEY_KP_MINUS
:

306 
VK_Code
 = 
VK_SUBTRACT
;

308 
MWKEY_KP_PLUS
:

309 
VK_Code
 = 
VK_ADD
;

311 
MWKEY_KP_ENTER
:

312 
VK_Code
 = 
VK_RETURN
;

316 
MWKEY_F1
:

317 
VK_Code
 = 
VK_F1
;

319 
MWKEY_F2
:

320 
VK_Code
 = 
VK_F2
;

322 
MWKEY_F3
:

323 
VK_Code
 = 
VK_F3
;

325 
MWKEY_F4
:

326 
VK_Code
 = 
VK_F4
;

328 
MWKEY_F5
:

329 
VK_Code
 = 
VK_F5
;

331 
MWKEY_F6
:

332 
VK_Code
 = 
VK_F6
;

334 
MWKEY_F7
:

335 
VK_Code
 = 
VK_F7
;

337 
MWKEY_F8
:

338 
VK_Code
 = 
VK_F8
;

340 
MWKEY_F9
:

341 
VK_Code
 = 
VK_F9
;

343 
MWKEY_F10
:

344 
VK_Code
 = 
VK_F10
;

346 
MWKEY_F11
:

347 
VK_Code
 = 
VK_F11
;

349 
MWKEY_F12
:

350 
VK_Code
 = 
VK_F12
;

354 
MWKEY_NUMLOCK
:

355 
VK_Code
 = 
VK_NUMLOCK
;

357 
MWKEY_CAPSLOCK
:

358 
VK_Code
 = 
VK_CAPITAL
;

360 
MWKEY_SCROLLOCK
:

361 
VK_Code
 = 
VK_CAPITAL
;

363 
MWKEY_LSHIFT
:

364 
VK_Code
 = 
VK_LSHIFT
;

366 
MWKEY_RSHIFT
:

367 
VK_Code
 = 
VK_RSHIFT
;

369 
MWKEY_LCTRL
:

370 
VK_Code
 = 
VK_LCONTROL
;

372 
MWKEY_RCTRL
:

373 
VK_Code
 = 
VK_RCONTROL
;

375 
MWKEY_LALT
:

376 
VK_Code
 = 
VK_MENU
;

378 
MWKEY_RALT
:

379 
VK_Code
 = 
VK_MENU
;

383 
MWKEY_PRINT
:

384 
VK_Code
 = 
VK_PRINT
;

386 
MWKEY_PAUSE
:

387 
VK_Code
 = 
VK_PAUSE
;

389 
MWKEY_MENU
:

390 
VK_Code
 = 
VK_LMENU
;

394 
MWKEY_KP_EQUALS
:

395 
VK_Code
 = '=';

400 
MWKEY_UNKNOWN
:

401 
MWKEY_SYSREQ
:

402 
MWKEY_BREAK


403 
MWKEY_QUIT
:

404 
MWKEY_REDRAW
:

405 
MWKEY_LMETA
:

406 
MWKEY_RMETA
:

407 
MWKEY_ALTGR
:

409 
MWKEY_RECORD
:

410 
MWKEY_PLAY
:

411 
MWKEY_CONTRAST
:

412 
MWKEY_BRIGHTNESS
:

413 
MWKEY_SELECTUP
:

414 
MWKEY_SELECTDOWN
:

415 
MWKEY_ACCEPT
:

416 
MWKEY_CANCEL
:

417 
MWKEY_APP1
:

418 
MWKEY_APP2
:

419 
MWKEY_LAST
:

422 
VK_Code
 = 
VK_NONAME
;

426 i‡(
¥es£d
)

427 
	`Po°Mesßge
(
focuswp
, 
WM_KEYDOWN
, 
VK_Code
, 0L);

429 
	`Po°Mesßge
(
focuswp
, 
WM_KEYUP
, 
VK_Code
, 0L);

430 
	}
}

439 
	$MwDñivîExposuªEvít
(
HWND
 
wp
, 
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
width
,

440 
MWCOORD
 
height
)

442 i‡(
wp
->
unm≠cou¡
)

445 
	`MwUni⁄Upd©eRegi⁄
(
wp
, 
x
, 
y
, 
width
, 
height
, 
TRUE
);

446 
	`Po°Mesßge
(
wp
, 
WM_PAINT
, 0, 0L);

447 
	}
}

455 
	$MwUni⁄Upd©eRegi⁄
(
HWND
 
wp
, 
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
width
,

456 
MWCOORD
 
height
, 
BOOL
 
bUni⁄
)

458 #i‡
UPDATEREGIONS


459 
MWRECT
 
rc
;

461 i‡(
wp
->
unm≠cou¡
)

465 
rc
.
À·
 = 
x
 + 
wp
->
wöª˘
.left;

466 
rc
.
t›
 = 
y
 + 
wp
->
wöª˘
.top;

467 
rc
.
right
 =Ñc.
À·
 + 
width
;

468 
rc
.
bŸtom
 =Ñc.
t›
 + 
height
;

470 if(
bUni⁄
)

471 
	`GdUni⁄Re˘WôhRegi⁄
(&
rc
, 
wp
->
upd©e
);

473 
	`GdSubåa˘Re˘FromRegi⁄
(&
rc
, 
wp
->
upd©e
);

475 
	}
}

484 
	$MwMoveCurs‹
(
MWCOORD
 
x
, MWCOORD 
y
)

490 i‡(
x
 !
curs‹x
 || 
y
 !
curs‹y
) {

491 if(
curcurs‹
)

492 
	`GdMoveCurs‹
(
x
 - 
curcurs‹
->
curs‹
.
hŸx
,

493 
y
 - 
curcurs‹
->
curs‹
.
hŸy
);

494 
curs‹x
 = 
x
;

495 
curs‹y
 = 
y
;

502 
	`MwCheckMou£Wödow
();

503 
	`MwCheckCurs‹
();

504 
	}
}

510 
	$MwCheckCurs‹
()

512 
HWND
 
wp
;

513 
HCURSOR
 
˝
;

520 
wp
 = 
ˇ±uªwp
;

521 i‡(
wp
 =
NULL
)

522 
wp
 = 
mou£wp
;

524 
˝
 = 
wp
->
curs‹
;

525 i‡(
˝
 =
curcurs‹
)

531 
curcurs‹
 = 
˝
;

532 
	`GdMoveCurs‹
(
curs‹x
 - 
˝
->
curs‹
.
hŸx
, 
curs‹y
 - cp->curs‹.
hŸy
);

533 
	`GdSëCurs‹
(&
˝
->
curs‹
);

534 
	}
}

542 
HWND


543 
	$MwFödVisibÀWödow
(
MWCOORD
 
x
, MWCOORD 
y
)

545 
HWND
 
wp
;

546 
HWND
 
ªtwp
;

548 
wp
 = 
roŸwp
;

549 
ªtwp
 = 
wp
;

550 
wp
) {

551 i‡(!
wp
->
unm≠cou¡
 &&

552 
wp
->
wöª˘
.
À·
 <
x
 && wp->wöª˘.
t›
 <
y
 &&

553 
wp
->
wöª˘
.
right
 > 
x
 && wp->wöª˘.
bŸtom
 > 
y
) {

554 
ªtwp
 = 
wp
;

555 
wp
 = wp->
chûdªn
;

558 
wp
 = wp->
siblögs
;

560  
ªtwp
;

561 
	}
}

566 
	$MwCheckMou£Wödow
()

568 
HWND
 
wp
;

571 
wp
 = 
døgwp
;

572 if(!
wp
)

573 
wp
 = 
ˇ±uªwp
;

574 if(!
wp
)

575 
wp
 = 
	`MwFödVisibÀWödow
(
curs‹x
, 
curs‹y
);

576 
mou£wp
 = 
wp
;

577 
	}
}

584 
	$°rz˝y
(*
d°
,c⁄° *
§c
,
d°siz
)

586 
cc
 = 
d°siz
;

589 if(!
§c
)

590 
cc
 = 
d°siz
 = 1;

592 --
d°siz
 > 0) {

593 if((*
d°
++ = *
§c
++) == '\0')

594  
cc
 - 
d°siz
 - 1;

596 *
d°
 = 0;

597  
cc
 - 
d°siz
 - 1;

598 
	}
}

	@mwin/winexpos.c

7 
	~"wödows.h
"

8 
	~"wöã∫.h
"

9 
	~<°dlib.h
>

13 
	$MwRedøwS¸ìn
()

16 
	`MwExpo£Aªa
(
roŸwp
, 0, 0,ÑoŸwp->
wöª˘
.
right
,

17 
roŸwp
->
wöª˘
.
bŸtom
);

20 
	`Po°Mesßge
(
roŸwp
, 
WM_PAINT
, 0, 0L);

21 
	}
}

30 
	$MwHideWödow
(
HWND
 
hwnd
,
BOOL
 
bCh™geFocus
, BOOL 
bSídMsg
)

32 
HWND
 
wp
 = 
hwnd
;

33 
HWND
 
pwp
;

34 
HWND
 
sibwp
;

35 
HWND
 
chûdwp
;

37 i‡(
wp
 =
roŸwp
)

40 ++
mw∑ötNC
;

43 if(
bSídMsg
 && 
wp
->
unm≠cou¡
 == 0)

44 
	`SídMesßge
(
wp
, 
WM_SHOWWINDOW
, 
FALSE
, 0L);

46 
wp
->
unm≠cou¡
++;

48 
chûdwp
 = 
wp
->
chûdªn
; chûdwp; chûdw∞chûdwp->
siblögs
)

49 
	`MwHideWödow
(
chûdwp
, 
bCh™geFocus
, 
bSídMsg
);

51 i‡(
wp
 =
mou£wp
) {

52 
	`MwCheckMou£Wödow
();

53 
	`MwCheckCurs‹
();

56 i‡(
bCh™geFocus
 && 
wp
 =
focuswp
)

57 
	`SëFocus
(
roŸwp
->
chûdªn
?Ñootwp->children:Ñootwp);

62 i‡(
wp
->
∑ª¡
->
unm≠cou¡
)

69 
pwp
 = 
wp
->
∑ª¡
;

70 
	`MwCÀ¨Wödow
(
pwp
, 
wp
->
wöª˘
.
À·
 -Öwp->winrect.left,

71 
wp
->
wöª˘
.
t›
 - 
pwp
->winrect.top,

72 
wp
->
wöª˘
.
right
 - wp->wöª˘.
À·
,

73 
wp
->
wöª˘
.
bŸtom
 - wp->wöª˘.
t›
, 
TRUE
);

79 
sibwp
 = 
wp
;

80 
sibwp
->
siblögs
) {

81 
sibwp
 = sibwp->
siblögs
;

82 
	`MwExpo£Aªa
(
sibwp
, 
wp
->
wöª˘
.
À·
, wp->wöª˘.
t›
,

83 
wp
->
wöª˘
.
right
 - wp->wöª˘.
À·
,

84 
wp
->
wöª˘
.
bŸtom
 - wp->wöª˘.
t›
);

86 
	}
}

95 
	$MwShowWödow
(
HWND
 
hwnd
, 
BOOL
 
bSídMsg
)

97 
HWND
 
wp
 = 
hwnd
;

99 i‡(
wp
 =
roŸwp
)

102 ++
mw∑ötNC
;

104 i‡(
wp
->
unm≠cou¡
)

105 
wp
->
unm≠cou¡
--;

107 i‡(
wp
->
unm≠cou¡
 == 0) {

108 
	`SídMesßge
(
wp
, 
WM_SHOWWINDOW
, 
TRUE
, 0L);

109 
	`MwCheckMou£Wödow
();

110 
	`MwCheckCurs‹
();

118 i‡(
wp
->
unm≠cou¡
 == 0) {

120 
	`MwCÀ¨Wödow
(
wp
, 0, 0, wp->
wöª˘
.
right
 - wp->wöª˘.
À·
,

121 
wp
->
wöª˘
.
bŸtom
 - wp->wöª˘.
t›
, 
TRUE
);

127 
wp
 = wp->
chûdªn
; wp; w∞wp->
siblögs
)

128 
	`MwShowWödow
(
wp
, 
bSídMsg
);

129 
	}
}

135 
	$MwRai£Wödow
(
HWND
 
hwnd
)

137 
HWND
 
wp
 = 
hwnd
;

138 
HWND
 
¥evwp
;

139 
BOOL
 
ovîœp
;

141 i‡(!
wp
 || w∞=
roŸwp
)

144 ++
mw∑ötNC
;

149 
¥evwp
 = 
wp
->
∑ª¡
->
chûdªn
;

150 i‡(
¥evwp
 =
wp
)

158 
ovîœp
 = 
FALSE
;

159 
¥evwp
->
siblögs
 !
wp
) {

160 
ovîœp
 |
	`MwCheckOvîœp
(
¥evwp
, 
wp
);

161 
¥evwp
 =Öªvwp->
siblögs
;

163 
ovîœp
 |
	`MwCheckOvîœp
(
¥evwp
, 
wp
);

169 
¥evwp
->
siblögs
 = 
wp
->siblings;

170 
wp
->
siblögs
 = wp->
∑ª¡
->
chûdªn
;

171 
wp
->
∑ª¡
->
chûdªn
 = wp;

176 i‡(
ovîœp
) {

178 
	`MwExpo£Aªa
(
wp
, wp->
wöª˘
.
À·
, wp->wöª˘.
t›
,

179 
wp
->
wöª˘
.
right
 - wp->wöª˘.
À·
,

180 
wp
->
wöª˘
.
bŸtom
 - wp->wöª˘.
t›
);

182 
	}
}

188 
	$MwLowîWödow
(
HWND
 
hwnd
)

190 
HWND
 
wp
 = 
hwnd
;

191 
HWND
 
¥evwp
;

192 
HWND
 
sibwp
;

193 
HWND
 
expwp
;

195 i‡(!
wp
 || w∞=
roŸwp
 || !wp->
siblögs
)

198 ++
mw∑ötNC
;

203 
¥evwp
 = 
wp
->
∑ª¡
->
chûdªn
;

204 i‡(
¥evwp
 !
wp
) {

205 
¥evwp
->
siblögs
 !
wp
)

206 
¥evwp
 =Öªvwp->
siblögs
;

214 
expwp
 = 
wp
->
siblögs
;

215 
sibwp
 = 
wp
;

216 
sibwp
->
siblögs
)

217 
sibwp
 = sibwp->
siblögs
;

223 i‡(
¥evwp
 =
wp
)

224 
wp
->
∑ª¡
->
chûdªn
 = wp->
siblögs
;

226 
¥evwp
->
siblögs
 = 
wp
->siblings;

227 
sibwp
->
siblögs
 = 
wp
;

229 
wp
->
siblögs
 = 
NULL
;

235 
expwp
 && (expw∞!
wp
)) {

236 i‡(
	`MwCheckOvîœp
(
wp
, 
expwp
))

237 
	`MwExpo£Aªa
(
expwp
, 
wp
->
wöª˘
.
À·
, wp->wöª˘.
t›
,

238 
wp
->
wöª˘
.
right
 - wp->wöª˘.
À·
,

239 
wp
->
wöª˘
.
bŸtom
 - wp->wöª˘.
t›
);

240 
expwp
 =Éxpwp->
siblögs
;

242 
	}
}

247 
BOOL


248 
	$MwCheckOvîœp
(
HWND
 
t›wp
, HWND 
bŸwp
)

250 
MWCOORD
 
möx1
;

251 
MWCOORD
 
möy1
;

252 
MWCOORD
 
maxx1
;

253 
MWCOORD
 
maxy1
;

254 
MWCOORD
 
möx2
;

255 
MWCOORD
 
möy2
;

256 
MWCOORD
 
maxx2
;

257 
MWCOORD
 
maxy2
;

259 i‡(
t›wp
->
unm≠cou¡
 || 
bŸwp
->unmapcount)

260  
FALSE
;

262 
möx1
 = 
t›wp
->
wöª˘
.
À·
;

263 
möy1
 = 
t›wp
->
wöª˘
.
t›
;

264 
maxx1
 = 
t›wp
->
wöª˘
.
right
 - 1;

265 
maxy1
 = 
t›wp
->
wöª˘
.
bŸtom
 - 1;

267 
möx2
 = 
bŸwp
->
wöª˘
.
À·
;

268 
möy2
 = 
bŸwp
->
wöª˘
.
t›
;

269 
maxx2
 = 
bŸwp
->
wöª˘
.
right
 - 1;

270 
maxy2
 = 
bŸwp
->
wöª˘
.
bŸtom
 - 1;

272 i‡(
möx1
 > 
maxx2
 || 
möx2
 > 
maxx1
 || 
möy1
 > 
maxy2
 || 
möy2
 > 
maxy1
)

273  
FALSE
;

275  
TRUE
;

276 
	}
}

284 
	$MwCÀ¨Wödow
(
HWND
 
wp
, 
MWCOORD
 
x
, MWCOORD 
y
, MWCOORD 
width
, MWCOORD 
height
,

285 
BOOL
 
expo£Êag
)

287 i‡(
wp
->
unm≠cou¡
)

293 i‡(
x
 < 0) {

294 
width
 +
x
;

295 
x
 = 0;

297 i‡(
y
 < 0) {

298 
height
 +
y
;

299 
y
 = 0;

301 i‡(
x
 + 
width
 > 
wp
->
wöª˘
.
right
 - wp->wöª˘.
À·
)

302 
width
 = (
wp
->
wöª˘
.
right
 - wp->wöª˘.
À·
Ë- 
x
;

303 i‡(
y
 + 
height
 > 
wp
->
wöª˘
.
bŸtom
 - wp->wöª˘.
t›
)

304 
height
 = (
wp
->
wöª˘
.
bŸtom
 - wp->wöª˘.
t›
Ë- 
y
;

310 i‡(
x
 >(
wp
->
wöª˘
.
right
 - wp->wöª˘.
À·
) ||

311 
y
 >(
wp
->
wöª˘
.
bŸtom
 - wp->wöª˘.
t›
) ||

312 
width
 <0 || 
height
 <= 0)

318 i‡(
expo£Êag
)

319 
	`MwDñivîExposuªEvít
(
wp
, 
x
, 
y
, 
width
, 
height
);

320 
	}
}

329 
	$MwExpo£Aªa
(
HWND
 
wp
, 
MWCOORD
 
roŸx
, MWCOORD 
roŸy
, MWCOORD 
width
,

330 
MWCOORD
 
height
)

332 i‡(
wp
->
unm≠cou¡
)

335 ++
mw∑ötNC
;

341 i‡(
roŸx
 >
wp
->
wöª˘
.
right
 || 
roŸy
 >wp->wöª˘.
bŸtom
 ||

342 (
roŸx
 + 
width
Ë<
wp
->
wöª˘
.
À·
 ||

343 (
roŸy
 + 
height
Ë<
wp
->
wöª˘
.
t›
)

351 i‡(
roŸx
 < 
wp
->
wöª˘
.
À·
 || 
roŸy
 < wp->wöª˘.
t›
 ||

352 (
roŸx
 + 
width
Ë> 
wp
->
wöª˘
.
right
 ||

353 (
roŸy
 + 
height
Ë> 
wp
->
wöª˘
.
bŸtom
)

354 
	`MwDøwB‹dî
(
wp
);

361 
	`MwCÀ¨Wödow
(
wp
, 
roŸx
 - wp->
wöª˘
.
À·
, 
roŸy
 - wp->wöª˘.
t›
,

362 
width
, 
height
, 
TRUE
);

367 
wp
 = wp->
chûdªn
; wp; w∞wp->
siblögs
)

368 
	`MwExpo£Aªa
(
wp
, 
roŸx
, 
roŸy
, 
width
, 
height
);

369 
	}
}

	@mwin/winfont.c

8 
	~"wödows.h
"

9 
	~"wöã∫.h
"

10 
	~"devi˚.h
"

11 
	~<°dlib.h
>

12 
	~<°rög.h
>

14 
HFONT
 
WINAPI


15 
	$Cª©eF⁄t
(
nHeight
, 
nWidth
, 
nEsˇ≥mít
, 
nOrõ¡©i⁄
,

16 
‚Weight
, 
DWORD
 
fdwIèlic
, DWORD 
fdwUndîlöe
, DWORD 
fdwSåikeOut
,

17 
DWORD
 
fdwCh¨Së
,DWORD 
fdwOuçutPªcisi⁄
,DWORD 
fdwClùPªcisi⁄
,

18 
DWORD
 
fdwQuÆôy
, DWORD 
fdwPôchAndFamûy
, 
LPCSTR
 
ÕszFa˚
)

20 
LOGFONT
 
lf
;

22 
lf
.
lfHeight
 = 
nHeight
;

23 
lf
.
lfWidth
 = 
nWidth
;

24 
lf
.
lfEsˇ≥mít
 = 
nEsˇ≥mít
;

25 
lf
.
lfOrõ¡©i⁄
 = 
nOrõ¡©i⁄
;

26 
lf
.
lfWeight
 = 
‚Weight
;

27 
lf
.
lfIèlic
 = 
fdwIèlic
;

28 
lf
.
lfUndîlöe
 = 
fdwUndîlöe
;

29 
lf
.
lfSåikeOut
 = 
fdwSåikeOut
;

30 
lf
.
lfCh¨Së
 = 
fdwCh¨Së
;

31 
lf
.
lfOutPªcisi⁄
 = 
fdwOuçutPªcisi⁄
;

32 
lf
.
lfClùPªcisi⁄
 = 
fdwClùPªcisi⁄
;

33 
lf
.
lfQuÆôy
 = 
fdwQuÆôy
;

34 
lf
.
lfPôchAndFamûy
 = 
fdwPôchAndFamûy
;

35 
	`°∫˝y
(
lf
.
lfFa˚Name
, 
ÕszFa˚
, (lf.lfFaceName));

37  
	`Cª©eF⁄tIndúe˘
(&
lf
);

38 
	}
}

40 
HFONT
 
WINAPI


41 
	$Cª©eF⁄tIndúe˘
(
CONST
 
LOGFONT
 *
Õlf
)

43 
MWFONTOBJ
 * 
hf⁄t
;

44 
Ámûy
, 
pôch
;

45 
MWLOGFONT
 
mwlf
;

48 
hf⁄t
 = 
	`GdIãmNew
(
MWFONTOBJ
);

49 if(!
hf⁄t
)

50  
NULL
;

51 
hf⁄t
->
hdr
.
ty≥
 = 
OBJ_FONT
;

52 
hf⁄t
->
hdr
.
°ockobj
 = 
FALSE
;

55 
	`mem£t
(&
mwlf
, 0, (mwlf));

56 
mwlf
.
lfHeight
 = 
Õlf
->lfHeight;

57 
mwlf
.
lfWidth
 = 
Õlf
->lfWidth;

58 
mwlf
.
lfEsˇ≥mít
 = 
Õlf
->lfEscapement;

59 
mwlf
.
lfOrõ¡©i⁄
 = 
Õlf
->lfOrientation;

60 
mwlf
.
lfWeight
 = 
Õlf
->lfWeight;

61 
mwlf
.
lfIèlic
 = 
Õlf
->lfItalic;

62 
mwlf
.
lfUndîlöe
 = 
Õlf
->lfUnderline;

63 
mwlf
.
lfSåikeOut
 = 
Õlf
->lfStrikeOut;

64 
mwlf
.
lfCh¨Së
 = 
Õlf
->lfCharSet;

65 
mwlf
.
lfOutPªcisi⁄
 = 
Õlf
->lfOutPrecision;

66 
mwlf
.
lfClùPªcisi⁄
 = 
Õlf
->lfClipPrecision;

67 
mwlf
.
lfQuÆôy
 = 
Õlf
->lfQuality;

68 
	`°∫˝y
(
mwlf
.
lfFa˚Name
, 
Õlf
->lfFaceName, (mwlf.lfFaceName));

70 
Ámûy
 = 
Õlf
->
lfPôchAndFamûy
 & 0xf0;

71 
Ámûy
) {

72 
FF_DONTCARE
:

74 
FF_ROMAN
:

75 
mwlf
.
lfRom™
 = 1;

76 
mwlf
.
lfSîif
 = 1;

78 
FF_SWISS
:

79 
mwlf
.
lfS™sSîif
 = 1;

81 
FF_MODERN
:

82 
mwlf
.
lfModîn
 = 1;

86 
pôch
 = 
Õlf
->
lfPôchAndFamûy
 & 0x0f;

87 
pôch
) {

88 
DEFAULT_PITCH
:

90 
FIXED_PITCH
:

91 
MONO_FONT
:

92 
mwlf
.
lfM⁄o•a˚
 = 1;

94 
VARIABLE_PITCH
:

95 
mwlf
.
lfPr›‹ti⁄Æ
 = 1;

104 i‡(
mwlf
.
lfWeight
 =
FW_BOLD
 && mwlf.
lfIèlic
)

105 
	`°rˇt
(
mwlf
.
lfFa˚Name
, "z");

107 i‡(
mwlf
.
lfWeight
 =
FW_BOLD
)

108 
	`°rˇt
(
mwlf
.
lfFa˚Name
, "b");

109 i‡(
mwlf
.
lfIèlic
)

110 
	`°rˇt
(
mwlf
.
lfFa˚Name
, "i");

113 
hf⁄t
->
pf⁄t
 = 
	`GdCª©eF⁄t
(&
s¸dev
, 
NULL
, 0, &
mwlf
);

114 i‡(!
hf⁄t
->
pf⁄t
)

115 
hf⁄t
->
pf⁄t
 = 
	`GdCª©eF⁄t
(&
s¸dev
, 
NULL
, 0, NULL);

117  (
HFONT
)
hf⁄t
;

118 
	}
}

120 
BOOL
 
WINAPI


121 
	$GëTextMërics
(
HDC
 
hdc
, 
LPTEXTMETRIC
 
Õtm
)

123 
MWFONTINFO
 
fi
;

125 if(!
hdc
)

126  
FALSE
;

128 
	`GdGëF⁄tInfo
(
hdc
->
f⁄t
->
pf⁄t
, &
fi
);

131 
Õtm
->
tmHeight
 = 
fi
.
height
;

138 
Õtm
->
tmDes˚¡
 = 
fi
.
height
 - fi.
ba£löe
;

139 
Õtm
->
tmAs˚¡

fi
.
ba£löe
;

140 
Õtm
->
tmI¡î«lLódög
 = 0;

141 
Õtm
->
tmExã∫ÆLódög
 = 0;

142 
Õtm
->
tmAveCh¨Width
 = 
fi
.
widths
['x'];

143 
Õtm
->
tmMaxCh¨Width
 = 
fi
.
maxwidth
;

144 
Õtm
->
tmWeight
 = 
FW_NORMAL
;

145 
Õtm
->
tmOvîh™g
 = 0;

146 
Õtm
->
tmDigôizedA•e˘X
 = 
fi
.
maxwidth
;

147 
Õtm
->
tmDigôizedA•e˘Y
 = 
fi
.
height
;

148 
Õtm
->
tmFú°Ch¨
 = 32;

149 
Õtm
->
tmLa°Ch¨
 = 255;

150 
Õtm
->
tmDeÁu…Ch¨
 = '?';

151 
Õtm
->
tmBªakCh¨
 = 0;

152 
Õtm
->
tmIèlic
 = 0;

153 
Õtm
->
tmUndîlöed
 = 0;

154 
Õtm
->
tmSåuckOut
 = 0;

156 
Õtm
->
tmPôchAndFamûy
 = 
fi
.
fixed
?

157 
FF_DONTCARE
: (FF_DONTCARE | 
TMPF_FIXED_PITCH
);

158 
Õtm
->
tmCh¨Së
 = 
OEM_CHARSET
;

159  
TRUE
;

160 
	}
}

162 
BOOL
 
WINAPI


163 
	$GëCh¨Width
(
HDC
 
hdc
, 
UINT
 
iFú°Ch¨
, UINT 
iLa°Ch¨
, 
LPINT
 
ÕBuf„r
)

165 
i
;

166 
j
 = 0;

167 
MWFONTINFO
 
fi
;

169 if(!
hdc
 || 
iLa°Ch¨
 < 
iFú°Ch¨
)

170  
FALSE
;

172 
	`GdGëF⁄tInfo
(
hdc
->
f⁄t
->
pf⁄t
, &
fi
);

173 
i
=
iFú°Ch¨
; i <
iLa°Ch¨
; ++i)

174 if(
i
 < 
fi
.
fú°ch¨
 || i > fi.
œ°ch¨
 || i > 255)

175 
ÕBuf„r
[
j
++] = 0;

177 
ÕBuf„r
[
j
++] = 
fi
.
widths
[
i
];

179  
TRUE
;

180 
	}
}

182 
BOOL
 
WINAPI


183 
	$GëTextExã¡Poöt
(

184 
HDC
 
hdc
,

185 
LPCTSTR
 
ÕszSå
,

186 
cchSåög
,

187 
LPSIZE
 
ÕSize
)

189 
width
 = 1, 
height
 = 1, 
ba£löe
 = 0;

191 i‡(
ÕSize
) {

192 
ÕSize
->
cx
 = 0;

193 
ÕSize
->
cy
 = 0;

195 i‡(!
hdc
 || !
ÕszSå
 || !
cchSåög
 || !
ÕSize
)

196  
FALSE
;

197 
	`GdGëTextSize
(
hdc
->
f⁄t
->
pf⁄t
, 
ÕszSå
, 
cchSåög
, &
width
, &
height
,

198 &
ba£löe
, 
MWTF_UTF8
);

199 
ÕSize
->
cx
 = 
width
;

200 
ÕSize
->
cy
 = 
height
;

203  
TRUE
;

204 
	}
}

206 
BOOL
 
WINAPI


207 
	$GëTextExã¡ExPoöt
(
HDC
 
hdc
,

208 
LPCTSTR
 
ÕszSå
,

209 
cchSåög
,

210 
nMaxExã¡
,

211 
LPINT
 
ÕnFô
,

212 
LPINT
 
ÆpDx
,

213 
LPSIZE
 
ÕSize
)

216 
©å
,
width
=0,
height
=0;

218 if(!
hdc
 || !
ÕszSå
)

219  
FALSE
;

220 i‡(
cchSåög
<0)

221 
cchSåög
 = 
	`°æí
((*)
ÕszSå
);

222 
©å
=
hdc
->
f⁄t
->
pf⁄t
->
f⁄èâr
;

223 i‡(
©å
&
MWTF_FREETYPE
)

225 i‡(
	`GdGëTextSizeEx
(
hdc
->
f⁄t
->
pf⁄t
,
ÕszSå
,
cchSåög
,

226 
nMaxExã¡
,
ÕnFô
,
ÆpDx
,&
width
,&
height
,
NULL
,
MWTF_UTF8
))

228 
ÕSize
->
cx
=
width
;

229 
ÕSize
->
cy
=
height
;

230  
TRUE
;

232  
FALSE
;

236 
SIZE
 
sz
;

237 
i
;

239 i‡(!
	`GëTextExã¡Poöt
(
hdc
, 
ÕszSå
, 
cchSåög
, 
ÕSize
))

240  
FALSE
;

241 i‡((!
nMaxExã¡
)||(!
ÕnFô
)||(!
ÆpDx
))

242  
TRUE
;

243 
i
=0; i<
cchSåög
; i++) {

244 i‡(!
	`GëTextExã¡Poöt
(
hdc
, 
ÕszSå
, 
i
+1, &
sz
))

245  
FALSE
;

246 i‡(
sz
.
cx
 <
nMaxExã¡
)

247 
ÆpDx
[
i
] = 
sz
.
cx
;

249 (*
ÕnFô
Ë
i
;

250  
TRUE
;

253 (*
ÕnFô
Ë
cchSåög
;

254  
TRUE
;

256 
	}
}

	@mwin/wingdi.c

7 
	~"wödows.h
"

8 
	~"wöã∫.h
"

9 
	~"devi˚.h
"

10 
	~<°dlib.h
>

11 
	~<°rög.h
>

13 
	#MAXSYSCOLORS
 29

	)

14 
	#MAXSTOCKOBJECTS
 18

	)

16 #i‡
ERASEMOVE


17 
BOOL
 
	gmwERASEMOVE
 = 
TRUE
;

19 
BOOL
 
	gmwERASEMOVE
 = 
FALSE
;

23 #i‡
DOS_TURBOC


24 
	#PTRTOINT
 

	)

26 
	#PTRTOINT
 

	)

29 
HDC
 
	g˛ùhdc
;

32 
MWBITMAPOBJ
 
	gdeÁu…_bôm≠
 = {

33 {
OBJ_BITMAP
, 
TRUE
}, 1, 1, 1, 1, 1, 1

36 
BOOL
 
MwExtTextOut
(
HDC
 
hdc
, 
x
, 
y
, 
UINT
 
fuO±i⁄s
,

37 
CONST
 
RECT
 *
Õrc
, 
LPCVOID
 
ÕszSåög
, 
UINT
 
cbCou¡
,

38 
CONST
 
INT
 *
ÕDx
, 
Êags
);

39 
MwDøwText
(
HDC
 
hdc
, 
LPCVOID
 
ÕSåög
, 
nCou¡
, 
LPRECT
 
ÕRe˘
,

40 
UINT
 
uF‹m©
, 
Êags
);

42 
HDC
 
WINAPI


43 
	$GëDCEx
(
HWND
 
hwnd
,
HRGN
 
hrgnClù
,
DWORD
 
Êags
)

45 
HDC
 
hdc
;

47 if(!
hwnd
)

48 
hwnd
 = 
roŸwp
;

51 if(
hwnd
->
owndc
 && !(
Êags
 & 
DCX_WINDOW
))

52  
hwnd
->
owndc
;

55 
hdc
 = 
	`GdIãmNew
(hdc);

56 if(!
hdc
)

57  
NULL
;

59 
hdc
->
psd
 = &
s¸dev
;

60 
hdc
->
hwnd
 = hwnd;

61 if(
Êags
 & 
DCX_DEFAULTCLIP
) {

62 
Êags
 &~
DCX_DEFAULTCLIP
;

63 if(
hwnd
->
°yÀ
 & 
WS_CLIPSIBLINGS
)

64 
Êags
 |
DCX_CLIPSIBLINGS
;

65 if(
hwnd
->
°yÀ
 & 
WS_CLIPCHILDREN
)

66 
Êags
 |
DCX_CLIPCHILDREN
;

68 
hdc
->
Êags
 = flags;

69 
hdc
->
bkmode
 = 
OPAQUE
;

70 
hdc
->
ãxèlign
 = 
TA_LEFT
 | 
TA_TOP
 | 
TA_NOUPDATECP
;

71 
hdc
->
bkcﬁ‹
 = 
	`RGB
(255, 255, 255);

72 
hdc
->
ãxtcﬁ‹
 = 
	`RGB
(0, 0, 0);

73 
hdc
->
brush
 = (
MWBRUSHOBJ
 *)
	`GëStockObje˘
(
WHITE_BRUSH
);

74 
hdc
->
≥n
 = (
MWPENOBJ
 *)
	`GëStockObje˘
(
BLACK_PEN
);

75 
hdc
->
f⁄t
 = (
MWFONTOBJ
 *)
	`GëStockObje˘
(
SYSTEM_FONT
);

76 #i‡
UPDATEREGIONS


77 if(
hrgnClù
) {

79 
hdc
->
ªgi⁄
 = (
MWRGNOBJ
 *)
	`Cª©eRe˘Rgn
(0, 0, 0, 0);

80 
	`ComböeRgn
((
HRGN
)
hdc
->
ªgi⁄
, 
hrgnClù
, 
NULL
, 
RGN_COPY
);

90 
deÁu…_bôm≠
.
∂™es
 = 
s¸dev
.planes;

91 
deÁu…_bôm≠
.
bµ
 = 
s¸dev
.bpp;

92 
hdc
->
bôm≠
 = &
deÁu…_bôm≠
;

94 
hdc
->
døwmode
 = 
R2_COPYPEN
;

95 
hdc
->
±
.
x
 = 0;

96 
hdc
->
±
.
y
 = 0;

99 if((
hwnd
->
pCœss
->
°yÀ
 & 
CS_OWNDC
Ë&& !(
Êags
 & 
DCX_WINDOW
)) {

101 
hdc
->
Êags
 |
DCX_EXCLUDEUPDATE
;

102 
hwnd
->
owndc
 = 
hdc
;

105  
hdc
;

106 
	}
}

108 
HDC
 
WINAPI


109 
	$GëDC
(
HWND
 
hwnd
)

117  
	`GëDCEx
(
hwnd
, 
NULL
, 
DCX_DEFAULTCLIP
|
DCX_EXCLUDEUPDATE
);

118 
	}
}

120 
HDC
 
WINAPI


121 
	$GëWödowDC
(
HWND
 
hwnd
)

127  
	`GëDCEx
(
hwnd
, 
NULL
,
DCX_WINDOW
|
DCX_DEFAULTCLIP
|
DCX_EXCLUDEUPDATE
);

128 
	}
}

131 
WINAPI


132 
	$Rñó£DC
(
HWND
 
hwnd
, 
HDC
 
hdc
)

135 if(!
hdc
 || (hdc->
psd
->
Êags
&
PSF_MEMORY
))

138 if(
hdc
 =
˛ùhdc
)

139 
˛ùhdc
 = 
NULL
;

142 if(
hdc
->
hwnd
->
owndc
 && !(hdc->
Êags
 & 
DCX_WINDOW
))

145 
	`DñëeObje˘
((
HBRUSH
)
hdc
->
brush
);

146 
	`DñëeObje˘
((
HPEN
)
hdc
->
≥n
);

148 
	`DñëeObje˘
((
HFONT
)
hdc
->
f⁄t
);

150 
	`DñëeObje˘
((
HRGN
)
hdc
->
ªgi⁄
);

155 
	`DñëeObje˘
((
HBITMAP
)
hdc
->
bôm≠
);

156 
	`GdIãmFªe
(
hdc
);

158 
	}
}

161 
BOOL
 
WINAPI


162 
	$DñëeDC
(
HDC
 
hdc
)

165 if(!
hdc
 || !(hdc->
psd
->
Êags
&
PSF_MEMORY
))

169 
hdc
->
psd
->
	`FªeMemGC
(hdc->psd);

172 
hdc
->
psd
 = &
s¸dev
;

173  
	`Rñó£DC
(
NULL
, 
hdc
);

174 
	}
}

177 
	$MwPaötNCAªa
(
HWND
 
hwnd
)

179 
	`SídMesßge
(
hwnd
, 
WM_NCPAINT
, 0, 0L);

182 
	`MwPaötNCS¸ﬁlb¨s
(
hwnd
, 
NULL
);

183 
	}
}

185 
HDC
 
WINAPI


186 
	$BegöPaöt
(
HWND
 
hwnd
, 
LPPAINTSTRUCT
 
ÕPaöt
)

188 
HDC
 
hdc
;

191 if(
mwf‹˚NC∑öt
 || 
hwnd
->
∑ötNC
 !
mw∑ötNC
) {

192 
	`MwPaötNCAªa
(
hwnd
);

193 
hwnd
->
∑ötNC
 = 
mw∑ötNC
;

202 if(
mwERASEMOVE
 && 
døgwp
) {

203 
hdc
 = 
NULL
;

204 
ÕPaöt
->
fEø£
 = !
	`DefWödowProc
(
hwnd
, 
WM_ERASEBKGND
, 0, 0L);

205 
hwnd
->
gŸPaötMsg
 = 
PAINT_DELAYPAINT
;

207 
	`HideC¨ë
(
hwnd
);

210 
hdc
 = 
	`GëDCEx
(
hwnd
, 
NULL
, 
DCX_DEFAULTCLIP


211 |
DCX_EXCLUDEUPDATE
);

214 
ÕPaöt
->
fEø£
 = !
	`SídMesßge
(
hwnd
, 
WM_ERASEBKGND
, (
WPARAM
)
hdc
,

217 
ÕPaöt
->
hdc
 = hdc;

219 
	`GëUpd©eRe˘
(
hwnd
, &
ÕPaöt
->
rcPaöt
, 
FALSE
);

220  
hdc
;

221 
	}
}

223 
BOOL
 
WINAPI


224 
	$EndPaöt
(
HWND
 
hwnd
, 
CONST
 
PAINTSTRUCT
 *
ÕPaöt
)

226 
	`Rñó£DC
(
hwnd
, 
ÕPaöt
->
hdc
);

227 #i‡
UPDATEREGIONS


229 if(
mwERASEMOVE
 && !
døgwp
)

230 
	`GdSëRe˘Regi⁄
(
hwnd
->
upd©e
, 0, 0, 0, 0);

232 
	`ShowC¨ë
(
hwnd
);

233  
TRUE
;

234 
	}
}

236 
COLORREF
 
WINAPI


237 
	$SëTextCﬁ‹
(
HDC
 
hdc
, 
COLORREF
 
¸Cﬁ‹
)

239 
COLORREF
 
ﬁdãxtcﬁ‹
;

241 i‡(!
hdc
)

242  
CLR_INVALID
;

243 
ﬁdãxtcﬁ‹
 = 
hdc
->
ãxtcﬁ‹
;

244 
hdc
->
ãxtcﬁ‹
 = (
MWCOLORVAL
)
¸Cﬁ‹
;

245  
ﬁdãxtcﬁ‹
;

246 
	}
}

248 
COLORREF
 
WINAPI


249 
	$SëBkCﬁ‹
(
HDC
 
hdc
, 
COLORREF
 
¸Cﬁ‹
)

251 
COLORREF
 
ﬁdbkcﬁ‹
;

253 i‡(!
hdc
)

254  
CLR_INVALID
;

255 
ﬁdbkcﬁ‹
 = 
hdc
->
bkcﬁ‹
;

256 
hdc
->
bkcﬁ‹
 = 
¸Cﬁ‹
;

257  
ﬁdbkcﬁ‹
;

258 
	}
}

260 
WINAPI


261 
	$SëBkMode
(
HDC
 
hdc
, 
iBkMode
)

263 
ﬁdbkmode
;

265 if(!
hdc
)

267 
ﬁdbkmode
 = 
hdc
->
bkmode
;

268 
hdc
->
bkmode
 = 
iBkMode
;

269  
ﬁdbkmode
;

270 
	}
}

272 
UINT
 
WINAPI


273 
	$SëTextAlign
(
HDC
 
hdc
, 
UINT
 
fMode
)

275 
UINT
 
ﬁdfMode
;

277 if(!
hdc
)

278  
GDI_ERROR
;

279 
ﬁdfMode
 = 
hdc
->
ãxèlign
;

280 
hdc
->
ãxèlign
 = 
fMode
;

281  
ﬁdfMode
;

282 
	}
}

285 
WINAPI


286 
	$SëROP2
(
HDC
 
hdc
, 
‚DøwMode
)

288 
√wmode
, 
ﬁdmode
;

290 if(!
hdc
 || (
‚DøwMode
 <0 || fnDøwModê> 
R2_LAST
))

293 
ﬁdmode
 = 
hdc
->
døwmode
;

294 
√wmode
 = 
‚DøwMode
 - 1;

295 
hdc
->
døwmode
 = 
√wmode
;

296 
	`GdSëMode
(
√wmode
);

297  
ﬁdmode
;

298 
	}
}

305 
HWND


306 
	$MwPª∑ªDC
(
HDC
 
hdc
)

308 
HWND
 
hwnd
;

310 if(!
hdc
 || !hdc->
hwnd
)

311  
NULL
;

313 
hwnd
 = 
hdc
->hwnd;

314 i‡(
hwnd
->
unm≠cou¡
)

315  
NULL
;

321 if(
hdc
 !
˛ùhdc
) {

323 if(
hdc
->
psd
->
Êags
&
PSF_MEMORY
) {

324 #i‡
DYNAMICREGIONS


326 i‡(
hdc
->
ªgi⁄
 !
NULL
 && hdc->ªgi⁄->
rgn
 != NULL

327 && 
hdc
->
ªgi⁄
->
rgn
->
size
 != 0) {

328 
LPRECT
 
Ωå
 = &(
hdc
->
ªgi⁄
->
rgn
->
exã¡s
);

329 
MWCOORD
 
À·
, 
t›
;

334 
À·
 = (
Ωå
->left <= 0) ? 0 :Ñptr->left;

335 
t›
 = (
Ωå
->top <= 0) ? 0 :Ñptr->top;

336 
	`GdSëClùRegi⁄
(
hdc
->
psd
,

337 
	`GdAŒocRe˘Regi⁄
(
Ωå
->
À·
,Ñ±r->
t›
,

338 
Ωå
->
right
,Ñ±r->
bŸtom
));

340 
	`GdSëClùRegi⁄
(
hdc
->
psd
,

341 
	`GdAŒocRe˘Regi⁄
(0, 0,

342 
hdc
->
psd
->
xvúåes
, hdc->psd->
yvúåes
));

345 
MWCLIPRECT
 
¸c
 = {0, 0, 0, 0};

348 i‡(
hdc
->
ªgi⁄
 !
NULL
 && hdc->ªgi⁄->
rgn
 != NULL

349 && 
hdc
->
ªgi⁄
->
rgn
->
size
 != 0) {

350 
LPRECT
 
Ωå
 = &(
hdc
->
ªgi⁄
->
rgn
->
exã¡s
);

355 i‡(
Ωå
->
À·
 > 0)

356 
¸c
.
x
 = 
Ωå
->
À·
;

357 i‡(
Ωå
->
t›
 > 0)

358 
¸c
.
y
 = 
Ωå
->
t›
;

359 
¸c
.
width
 = 
Ωå
->
right
;

360 
¸c
.
height
 = 
Ωå
->
bŸtom
;

362 
¸c
.
width
 = 
hdc
->
psd
->
xvúåes
;

363 
¸c
.
height
 = 
hdc
->
psd
->
yvúåes
;

365 
	`GdSëClùRe˘s
(
hdc
->
psd
, 1, &
¸c
);

367 } 
	`MwSëClùWödow
(
hdc
);

368 
˛ùhdc
 = 
hdc
;

371  
hwnd
;

372 
	}
}

375 
COLORREF
 
WINAPI


376 
	$GëPixñ
(
HDC
 
hdc
, 
x
, 
y
)

378 
HWND
 
hwnd
;

379 
POINT
 
±
;

380 
MWPIXELVAL
 
pixñ
;

382 
hwnd
 = 
	`MwPª∑ªDC
(
hdc
);

383 if(!
hwnd
)

384  
CLR_INVALID
;

385 
±
.
x
 = x;

386 
±
.
y
 = y;

387 if(
	`MwIsClõ¡DC
(
hdc
))

388 
	`Clõ¡ToS¸ìn
(
hwnd
, &
±
);

391 
	`GdRódAªa
(
hdc
->
psd
, 
±
.
x
,Öt.
y
, 1, 1, &
pixñ
);

393  
	`GdGëCﬁ‹RGB
(
hdc
->
psd
, 
pixñ
);

394 
	}
}

396 
COLORREF
 
WINAPI


397 
	$SëPixñ
(
HDC
 
hdc
, 
x
, 
y
, 
COLORREF
 
¸Cﬁ‹
)

399 
HWND
 
hwnd
;

400 
POINT
 
±
;

402 
hwnd
 = 
	`MwPª∑ªDC
(
hdc
);

403 if(!
hwnd
)

405 
±
.
x
 = x;

406 
±
.
y
 = y;

407 if(
	`MwIsClõ¡DC
(
hdc
))

408 
	`Clõ¡ToS¸ìn
(
hwnd
, &
±
);

411 
	`GdSëF‹egroundCﬁ‹
(
hdc
->
psd
, 
¸Cﬁ‹
);

412 
	`GdPoöt
(
hdc
->
psd
, 
±
.
x
,Öt.
y
);

414 
	}
}

416 
BOOL
 
WINAPI


417 
	$MoveToEx
(
HDC
 
hdc
, 
x
, 
y
, 
LPPOINT
 
ÕPoöt
)

419 if(!
hdc
)

420  
FALSE
;

421 if(
ÕPoöt
)

422 *
ÕPoöt
 = 
hdc
->
±
;

423 
hdc
->
±
.
x
 = x;

424 
hdc
->
±
.
y
 = y;

425  
TRUE
;

426 
	}
}

428 
BOOL
 
WINAPI


429 
	$LöeTo
(
HDC
 
hdc
, 
x
, 
y
)

431 
HWND
 
hwnd
;

432 
POINT
 
beg
, 
íd
;

434 
hwnd
 = 
	`MwPª∑ªDC
(
hdc
);

435 if(!
hwnd
)

436  
FALSE
;

438 
beg
.
x
 = 
hdc
->
±
.x;

439 
beg
.
y
 = 
hdc
->
±
.y;

440 
íd
.
x
 = x;

441 
íd
.
y
 = y;

442 if(
	`MwIsClõ¡DC
(
hdc
)) {

443 
	`Clõ¡ToS¸ìn
(
hwnd
, &
beg
);

444 
	`Clõ¡ToS¸ìn
(
hwnd
, &
íd
);

448 if(
hdc
->
≥n
->
°yÀ
 !
PS_NULL
) {

449 
	`GdSëF‹egroundCﬁ‹
(
hdc
->
psd
, hdc->
≥n
->
cﬁ‹
);

451 
	`GdLöe
(
hdc
->
psd
, 
beg
.
x
, beg.
y
, 
íd
.x,Énd.y, 
FALSE
);

453 
hdc
->
±
.
x
 = x;

454 
hdc
->
±
.
y
 = y;

455  
TRUE
;

456 
	}
}

459 
BOOL
 
WINAPI


460 
	$Pﬁylöe
(
HDC
 
hdc
, 
CONST
 
POINT
 *
Õ±
, 
cPoöts
)

462 
HWND
 
hwnd
;

463 
POINT
 
beg
, 
íd
;

465 if(
cPoöts
 <= 1)

466  
FALSE
;

468 
hwnd
 = 
	`MwPª∑ªDC
(
hdc
);

469 if(!
hwnd
)

470  
FALSE
;

472 if(
hdc
->
≥n
->
°yÀ
 =
PS_NULL
)

473  
TRUE
;

476 
	`GdSëF‹egroundCﬁ‹
(
hdc
->
psd
, hdc->
≥n
->
cﬁ‹
);

478 
beg
 = *
Õ±
++;

479 if(
	`MwIsClõ¡DC
(
hdc
))

480 
	`Clõ¡ToS¸ìn
(
hwnd
, &
beg
);

481 --
cPoöts
 > 0) {

482 
íd
 = *
Õ±
++;

483 if(
	`MwIsClõ¡DC
(
hdc
))

484 
	`Clõ¡ToS¸ìn
(
hwnd
, &
íd
);

487 
	`GdLöe
(
hdc
->
psd
, 
beg
.
x
, beg.
y
, 
íd
.x,Énd.y, 
FALSE
);

489 
beg
 = 
íd
;

491  
TRUE
;

492 
	}
}

494 
BOOL
 
WINAPI


495 
	$Re˘™gÀ
(
HDC
 
hdc
, 
nLe·
, 
nT›
, 
nRight
, 
nBŸtom
)

497 
HWND
 
hwnd
;

498 
RECT
 
rc
;

500 
hwnd
 = 
	`MwPª∑ªDC
(
hdc
);

501 if(!
hwnd
)

502  
FALSE
;

504 
	`SëRe˘
(&
rc
, 
nLe·
, 
nT›
, 
nRight
, 
nBŸtom
);

505 if(
	`MwIsClõ¡DC
(
hdc
))

506 
	`M≠WödowPoöts
(
hwnd
, 
NULL
, (
LPPOINT
)&
rc
, 2);

509 if(
hdc
->
≥n
->
°yÀ
 !
PS_NULL
) {

510 
	`GdSëF‹egroundCﬁ‹
(
hdc
->
psd
, hdc->
≥n
->
cﬁ‹
);

511 
	`GdRe˘
(
hdc
->
psd
, 
rc
.
À·
,Ñc.
t›
,

512 
rc
.
right
 -Ñc.
À·
,Ñc.
bŸtom
 -Ñc.
t›
);

516 if(
hdc
->
brush
->
°yÀ
 !
BS_NULL
) {

517 
	`InÊ©eRe˘
(&
rc
, -1, -1);

518 
	`GdSëF‹egroundCﬁ‹
(
hdc
->
psd
, hdc->
brush
->
cﬁ‹
);

519 
	`GdFûlRe˘
(
hdc
->
psd
, 
rc
.
À·
,Ñc.
t›
,Ñc.
right
 -Ñc.left,

520 
rc
.
bŸtom
 -Ñc.
t›
);

523  
TRUE
;

524 
	}
}

526 
BOOL
 
WINAPI


527 
	$EŒù£
(
HDC
 
hdc
, 
nLe·Re˘
, 
nT›Re˘
, 
nRightRe˘
, 
nBŸtomRe˘
)

529 
HWND
 
hwnd
;

530 
rx
, 
ry
;

531 
RECT
 
rc
;

533 
hwnd
 = 
	`MwPª∑ªDC
(
hdc
);

534 if(!
hwnd
)

535  
FALSE
;

537 
	`SëRe˘
(&
rc
, 
nLe·Re˘
, 
nT›Re˘
, 
nRightRe˘
, 
nBŸtomRe˘
);

538 if(
	`MwIsClõ¡DC
(
hdc
))

539 
	`M≠WödowPoöts
(
hwnd
, 
NULL
, (
LPPOINT
)&
rc
, 2);

541 
rx
 = (
rc
.
right
 -Ñc.
À·
)/2 - 1;

542 
ry
 = (
rc
.
bŸtom
 -Ñc.
t›
)/2 - 1;

543 
rc
.
À·
 +
rx
;

544 
rc
.
t›
 +
ry
;

547 if(
hdc
->
brush
->
°yÀ
 !
BS_NULL
) {

548 
	`InÊ©eRe˘
(&
rc
, -1, -1);

549 
	`GdSëF‹egroundCﬁ‹
(
hdc
->
psd
, hdc->
brush
->
cﬁ‹
);

550 
	`GdEŒù£
(
hdc
->
psd
, 
rc
.
À·
,Ñc.
t›
, 
rx
, 
ry
, 
TRUE
);

554 if(
hdc
->
≥n
->
°yÀ
 !
PS_NULL
) {

555 
	`GdSëF‹egroundCﬁ‹
(
hdc
->
psd
, hdc->
≥n
->
cﬁ‹
);

556 
	`GdEŒù£
(
hdc
->
psd
, 
rc
.
À·
,Ñc.
t›
, 
rx
, 
ry
, 
FALSE
);

559  
TRUE
;

560 
	}
}

563 
	$d›õ¨c
(
HDC
 
hdc
, 
nLe·Re˘
, 
nT›Re˘
, 
nRightRe˘
, 
nBŸtomRe˘
,

564 
ax
, 
ay
, 
bx
, 
by
, 
ty≥
)

566 
HWND
 
hwnd
;

567 
rx
, 
ry
;

568 
RECT
 
rc
, 
rc2
;

570 
hwnd
 = 
	`MwPª∑ªDC
(
hdc
);

571 if(!
hwnd
)

574 
	`SëRe˘
(&
rc
, 
nLe·Re˘
, 
nT›Re˘
, 
nRightRe˘
, 
nBŸtomRe˘
);

575 
	`SëRe˘
(&
rc2
, 
ax
, 
ay
, 
bx
, 
by
);

576 if(
	`MwIsClõ¡DC
(
hdc
)) {

577 
	`M≠WödowPoöts
(
hwnd
, 
NULL
, (
LPPOINT
)&
rc
, 2);

578 
	`M≠WödowPoöts
(
hwnd
, 
NULL
, (
LPPOINT
)&
rc2
, 2);

581 
rx
 = (
rc
.
right
 -Ñc.
À·
)/2 - 1;

582 
ry
 = (
rc
.
bŸtom
 -Ñc.
t›
)/2 - 1;

583 
rc
.
À·
 +
rx
;

584 
rc
.
t›
 +
ry
;

587 if(
hdc
->
brush
->
°yÀ
 !
BS_NULL
 && 
ty≥
 =
MWPIE
) {

588 
	`GdSëF‹egroundCﬁ‹
(
hdc
->
psd
, hdc->
brush
->
cﬁ‹
);

589 
	`GdArc
(
hdc
->
psd
, 
rc
.
À·
,Ñc.
t›
, 
rx
, 
ry
,

590 
rc2
.
À·
,Ñc2.
t›
,Ñc2.
right
,Ñc2.
bŸtom
, 
MWPIE
);

594 if(
hdc
->
≥n
->
°yÀ
 !
PS_NULL
) {

595 
	`GdSëF‹egroundCﬁ‹
(
hdc
->
psd
, hdc->
≥n
->
cﬁ‹
);

596 if(
ty≥
 =
MWPIE
)

597 
ty≥
 = 
MWARC
;

598 
	`GdArc
(
hdc
->
psd
, 
rc
.
À·
,Ñc.
t›
, 
rx
, 
ry
,

599 
rc2
.
À·
,Ñc2.
t›
,Ñc2.
right
,Ñc2.
bŸtom
, 
ty≥
);

601 
	}
}

603 
BOOL
 
WINAPI


604 
	$Arc
(
HDC
 
hdc
, 
nLe·Re˘
, 
nT›Re˘
, 
nRightRe˘
, 
nBŸtomRe˘
,

605 
nXSèπArc
, 
nYSèπArc
, 
nXEndArc
, 
nYEndArc
)

607 
	`d›õ¨c
(
hdc
, 
nLe·Re˘
, 
nT›Re˘
, 
nRightRe˘
, 
nBŸtomRe˘
,

608 
nXSèπArc
, 
nYSèπArc
, 
nXEndArc
, 
nYEndArc
, 
MWARC
);

609  
TRUE
;

610 
	}
}

612 
BOOL
 
WINAPI


613 
	$Põ
(
HDC
 
hdc
, 
nLe·Re˘
, 
nT›Re˘
, 
nRightRe˘
, 
nBŸtomRe˘
,

614 
nXRadül1
, 
nYRadül1
, 
nXRadül2
, 
nYRadül2
)

616 
	`d›õ¨c
(
hdc
, 
nLe·Re˘
, 
nT›Re˘
, 
nRightRe˘
, 
nBŸtomRe˘
,

617 
nXRadül1
, 
nYRadül1
, 
nXRadül2
, 
nYRadül2
, 
MWPIE
);

618  
TRUE
;

619 
	}
}

621 
BOOL
 
WINAPI


622 
	$Pﬁyg⁄
(
HDC
 
hdc
, 
CONST
 
POINT
 *
ÕPoöts
, 
nCou¡
)

624 
HWND
 
hwnd
;

625 
i
;

626 
LPPOINT
 
µ
, 
µAŒoc
 = 
NULL
;

628 
hwnd
 = 
	`MwPª∑ªDC
(
hdc
);

629 if(!
hwnd
)

630  
FALSE
;

632 if(
	`MwIsClõ¡DC
(
hdc
)) {

634 
µAŒoc
 = (
LPPOINT
)
	`mÆloc
(
nCou¡
 * (
POINT
));

635 if(!
µAŒoc
)

636  
FALSE
;

637 
	`mem˝y
(
µAŒoc
, 
ÕPoöts
, 
nCou¡
*(
POINT
));

638 
µ
 = 
µAŒoc
;

639 
i
=0; i<
nCou¡
; ++i)

640 
	`Clõ¡ToS¸ìn
(
hwnd
, 
µ
++);

641 
µ
 = 
µAŒoc
;

642 } 
µ
 = (
LPPOINT
)
ÕPoöts
;

645 if(
hdc
->
brush
->
°yÀ
 !
BS_NULL
) {

646 
	`GdSëF‹egroundCﬁ‹
(
hdc
->
psd
, hdc->
brush
->
cﬁ‹
);

647 
	`GdFûlPﬁy
(
hdc
->
psd
, 
nCou¡
, 
µ
);

651 if(
hdc
->
≥n
->
°yÀ
 !
PS_NULL
) {

652 
	`GdSëF‹egroundCﬁ‹
(
hdc
->
psd
, hdc->
≥n
->
cﬁ‹
);

653 
	`GdPﬁy
(
hdc
->
psd
, 
nCou¡
, 
µ
);

656 if(
µAŒoc
)

657 
	`‰ì
(
µAŒoc
);

658  
TRUE
;

659 
	}
}

662 
BOOL
 
WINAPI


663 
	$PﬁyPﬁyg⁄
(
HDC
 
hdc
, 
CONST
 
POINT
 *
ÕPoöts
, 
LPINT
 
ÕPﬁyCou¡s
, 
nCou¡
)

665 --
nCou¡
 >= 0) {

666 i‡(!
	`Pﬁyg⁄
(
hdc
, 
ÕPoöts
, *
ÕPﬁyCou¡s
))

667  
FALSE
;

668 
ÕPoöts
 +*
ÕPﬁyCou¡s
++;

670  
TRUE
;

671 
	}
}

673 
WINAPI


674 
	$FûlRe˘
(
HDC
 
hdc
, 
CONST
 
RECT
 *
Õrc
, 
HBRUSH
 
hbr
)

676 
HWND
 
hwnd
;

677 
RECT
 
rc
;

678 
MWBRUSHOBJ
 * 
obr
 = (MWBRUSHOBJ *)
hbr
;

679 
COLORREF
 
¸Fûl
;

681 
hwnd
 = 
	`MwPª∑ªDC
(
hdc
);

682 if(!
hwnd
 || !
obr
)

683  
FALSE
;

685 if(!
Õrc
) {

686 if(
	`MwIsClõ¡DC
(
hdc
))

687 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

689 
	`GëWödowRe˘
(
hwnd
, &
rc
);

690 
Õrc
 = &
rc
;

692 
rc
 = *
Õrc
;

693 if(
	`MwIsClõ¡DC
(
hdc
))

694 
	`M≠WödowPoöts
(
hwnd
, 
NULL
, (
LPPOINT
)&
rc
, 2);

697 if((
PTRTOINT
)
obr
 <
MAXSYSCOLORS
)

698 
¸Fûl
 = 
	`GëSysCﬁ‹
(()
obr
-1);

701 if(
obr
->
°yÀ
 =
BS_NULL
)

702  
TRUE
;

703 
¸Fûl
 = 
obr
->
cﬁ‹
;

707 
	`GdSëF‹egroundCﬁ‹
(
hdc
->
psd
, 
¸Fûl
);

708 
	`GdFûlRe˘
(
hdc
->
psd
, 
rc
.
À·
,Ñc.
t›
,

709 
rc
.
right
 -Ñc.
À·
,Ñc.
bŸtom
 -Ñc.
t›
);

710  
TRUE
;

711 
	}
}

714 
BOOL
 
WINAPI


715 
	$TextOut
(
HDC
 
hdc
, 
x
, 
y
, 
LPCSTR
 
ÕszSåög
, 
cbSåög
)

718  
	`MwExtTextOut
(
hdc
, 
x
, 
y
, 0, 
NULL
, 
ÕszSåög
, 
cbSåög
, NULL,

719 
MWTF_ASCII
);

720 
	}
}

723 
BOOL
 
WINAPI


724 
	$ExtTextOut
(
HDC
 
hdc
, 
x
, 
y
, 
UINT
 
fuO±i⁄s
, 
CONST
 
RECT
 *
Õrc
,

725 
LPCSTR
 
ÕszSåög
, 
UINT
 
cbCou¡
, 
CONST
 
INT
 *
ÕDx
)

727  
	`MwExtTextOut
(
hdc
, 
x
, 
y
, 
fuO±i⁄s
, 
Õrc
, 
ÕszSåög
,

728 
cbCou¡
, 
ÕDx
, 
MWTF_ASCII
);

729 
	}
}

732 
BOOL
 
WINAPI


733 
	$ExtTextOutW
(
HDC
 
hdc
, 
x
, 
y
, 
UINT
 
fuO±i⁄s
, 
CONST
 
RECT
 *
Õrc
,

734 
LPCWSTR
 
ÕszSåög
, 
UINT
 
cbCou¡
, 
CONST
 
INT
 *
ÕDx
)

736  
	`MwExtTextOut
(
hdc
, 
x
, 
y
, 
fuO±i⁄s
, 
Õrc
, 
ÕszSåög
,

737 
cbCou¡
, 
ÕDx
, 
MWTF_UC16
);

738 
	}
}

741 
BOOL


742 
	$MwExtTextOut
(
HDC
 
hdc
, 
x
, 
y
, 
UINT
 
fuO±i⁄s
, 
CONST
 
RECT
 *
Õrc
,

743 
LPCVOID
 
ÕszSåög
, 
UINT
 
cbCou¡
, 
CONST
 
INT
 *
ÕDx
, 
Êags
)

745 
HWND
 
hwnd
;

746 
POINT
 
±
;

747 
RECT
 
rc
;

749 
hwnd
 = 
	`MwPª∑ªDC
(
hdc
);

750 if(!
hwnd
)

751  
FALSE
;

753 
±
.
x
 = x;

754 
±
.
y
 = y;

755 if(
	`MwIsClõ¡DC
(
hdc
))

756 
	`Clõ¡ToS¸ìn
(
hwnd
, &
±
);

759 if(
Õrc
 && (
fuO±i⁄s
&
ETO_OPAQUE
)) {

760 
rc
 = *
Õrc
;

761 if(
	`MwIsClõ¡DC
(
hdc
))

762 
	`M≠WödowPoöts
(
hwnd
, 
NULL
, (
LPPOINT
)&
rc
, 2);

765 
	`GdSëF‹egroundCﬁ‹
(
hdc
->
psd
, hdc->
bkcﬁ‹
);

766 
	`GdFûlRe˘
(
hdc
->
psd
, 
rc
.
À·
,Ñc.
t›
,Ñc.
right
 -Ñc.left,

767 
rc
.
bŸtom
 -Ñc.
t›
);

768 
	`GdSëU£Background
(
FALSE
);

771 
	`GdSëU£Background
(
hdc
->
bkmode
 =
OPAQUE
? 
TRUE
: 
FALSE
);

777 
	`GdSëBackgroundCﬁ‹
(
hdc
->
psd
, hdc->
bkcﬁ‹
);

780 i‡(
cbCou¡
 == 0) {

782  
TRUE
;

788 
	`GdSëF‹egroundCﬁ‹
(
hdc
->
psd
, hdc->
ãxtcﬁ‹
);

789 
	`GdSëF⁄t
(
hdc
->
f⁄t
->
pf⁄t
);

792 if((
hdc
->
ãxèlign
 & 
TA_BASELINE
) == TA_BASELINE) {

796 
Êags
 |
MWTF_BASELINE
;

797 } if(
hdc
->
ãxèlign
 & 
TA_BOTTOM
) {

798 
MWCOORD
 
ph
, 
pw
, 
pb
;

800 if(
Õrc
)

801 
±
.
y
 +
Õrc
->
bŸtom
 -Ü¥c->
t›
;

803 
	`GdGëTextSize
(
hdc
->
f⁄t
->
pf⁄t
, 
ÕszSåög
, 
cbCou¡
,

804 &
pw
, &
ph
, &
pb
, 
Êags
);

805 
±
.
y
 +
ph
;

807 
Êags
 |
MWTF_BOTTOM
;

809 
Êags
 |
MWTF_TOP
;

810 
	`GdText
(
hdc
->
psd
, 
±
.
x
,Öt.
y
, 
ÕszSåög
, 
cbCou¡
, 
Êags
);

812  
TRUE
;

813 
	}
}

816 
WINAPI


817 
	$DøwTextA
(
HDC
 
hdc
, 
LPCSTR
 
ÕSåög
, 
nCou¡
, 
LPRECT
 
ÕRe˘
, 
UINT
 
uF‹m©
)

819  
	`MwDøwText
(
hdc
, 
ÕSåög
, 
nCou¡
, 
ÕRe˘
, 
uF‹m©
, 
MWTF_ASCII
);

820 
	}
}

823 
WINAPI


824 
	$DøwTextW
(
HDC
 
hdc
, 
LPCWSTR
 
ÕSåög
, 
nCou¡
, 
LPRECT
 
ÕRe˘
, 
UINT
 
uF‹m©
)

826  
	`MwDøwText
(
hdc
, 
ÕSåög
, 
nCou¡
, 
ÕRe˘
, 
uF‹m©
, 
MWTF_UC16
);

827 
	}
}

832 
	$MwDøwText
(
HDC
 
hdc
, 
LPCVOID
 
ÕSåög
, 
nCou¡
, 
LPRECT
 
ÕRe˘
, 
UINT
 
uF‹m©
,

833 
Êags
)

835 
MWCOORD
 
x
, 
y
, 
width
, 
height
, 
ba£löe
;

837 if(
nCou¡
 == -1)

838 
nCou¡
 = 
	`°æí
(
ÕSåög
);

840 if(
uF‹m©
 & (
DT_CALCRECT
|
DT_CENTER
|
DT_RIGHT
)) {

841 if(!
hdc
)

843 
	`GdGëTextSize
(
hdc
->
f⁄t
->
pf⁄t
, 
ÕSåög
, 
nCou¡
,

844 &
width
, &
height
, &
ba£löe
, 
MWTF_ASCII
);

846 
x
 = 
ÕRe˘
->
À·
;

847 
y
 = 
ÕRe˘
->
t›
;

849 if(
uF‹m©
 & 
DT_CALCRECT
) {

850 
ÕRe˘
->
right
 = 
x
 + 
width
;

851 
ÕRe˘
->
bŸtom
 = 
y
 + 
height
;

852  
height
;

855 if(
uF‹m©
 & 
DT_CENTER
)

856 
x
 = (
ÕRe˘
->
À·
 +ÜpRe˘->
right
 - 
width
) / 2;

857 if(
uF‹m©
 & 
DT_RIGHT
)

858 
x
 +
ÕRe˘
->
right
 - 
width
;

861 
	`MwExtTextOut
(
hdc
, 
x
, 
y
, 0, 
NULL
, 
ÕSåög
, 
nCou¡
, NULL, 
Êags
);

862  
height
;

863 
	}
}

866 
BOOL
 
WINAPI


867 
	$DøwDIB
(
HDC
 
hdc
,
x
,
y
,
PMWIMAGEHDR
 
pimage
)

869 
HWND
 
hwnd
;

870 
POINT
 
±
;

872 
hwnd
 = 
	`MwPª∑ªDC
(
hdc
);

873 if(!
hwnd
 || !
pimage
)

874  
FALSE
;

875 
±
.
x
 = x;

876 
±
.
y
 = y;

877 if(
	`MwIsClõ¡DC
(
hdc
))

878 
	`Clõ¡ToS¸ìn
(
hwnd
, &
±
);

880 
	`GdDøwImage
(
hdc
->
psd
, 
±
.
x
,Öt.
y
, 
pimage
);

881  
TRUE
;

882 
	}
}

885 #i‡
ELKS


886 
	#B


	)

888 
	#A


	)

891 
	#A_RGB
(
r
,
g
,
b
)

	)

892 
	#B_RGB
(
r
,
g
,
b
)

	)

893 
	#C_RGB
(
r
,
g
,
b
)

	)

895 #ifde‡
A


896 #unde‡
A_RGB


897 
	#A_RGB
(
r
,
g
,
b
Ë
	`RGB
‘,g,b),

	)

899 #ifde‡
B


900 #unde‡
B_RGB


901 
	#B_RGB
(
r
,
g
,
b
Ë
	`RGB
‘,g,b),

	)

903 #ifde‡
C


904 #unde‡
C_RGB


905 
	#C_RGB
(
r
,
g
,
b
Ë
	`RGB
‘,g,b),

	)

908 
COLORREF
 
	gsysCﬁ‹s
[
MAXSYSCOLORS
] = {

909 
RGB
(192, 192, 192),

910 
RGB
( 0, 128, 128),

911 
A_RGB
(128, 0, 0)

912 
B_RGB
(128, 0, 128)

913 
C_RGB
(128, 0, 128)

914 
A_RGB
(162, 141, 104)

915 
B_RGB
(128, 128, 128)

916 
C_RGB
( 0, 64, 128)

917 
RGB
(192, 192, 192),

918 
RGB
(255, 255, 255),

919 
RGB
( 0, 0, 0),

920 
RGB
( 0, 0, 0),

921 
RGB
( 0, 0, 0),

922 
RGB
(255, 255, 255),

923 
RGB
(192, 192, 192),

924 
RGB
(192, 192, 192),

925 
RGB
(128, 128, 128),

926 
RGB
(128, 0, 0),

927 
RGB
(255, 255, 255),

928 
A_RGB
(213, 204, 187)

929 
B_RGB
(192, 192, 192)

930 
C_RGB
(160, 160, 160)

931 
A_RGB
(162, 141, 104)

932 
B_RGB
(128, 128, 128)

933 
C_RGB
(128, 128, 128)

934 
RGB
( 64, 64, 64),

935 
RGB
( 0, 0, 0),

936 
RGB
(192, 192, 192),

937 
A_RGB
(234, 230, 221)

938 
B_RGB
(255, 255, 255)

939 
C_RGB
(223, 223, 223)

940 
RGB
( 0, 0, 0),

941 
A_RGB
(213, 204, 187)

942 
B_RGB
(223, 223, 223)

943 
C_RGB
(192, 192, 192)

944 
RGB
( 0, 0, 0),

945 
RGB
(225, 255, 255),

946 
RGB
(184, 180, 184),

947 
RGB
( 0, 0, 255),

948 
RGB
( 16, 132, 208),

949 
RGB
(184, 180, 184)

952 
DWORD
 
WINAPI


953 
	$GëSysCﬁ‹
(
nIndex
)

955 if(
nIndex
 >0 &&ÇIndex < 
MAXSYSCOLORS
)

956  
sysCﬁ‹s
[
nIndex
];

958 
	}
}

960 
COLORREF
 
WINAPI


961 
	$SëSysCﬁ‹
(
nIndex
, 
COLORREF
 
¸Cﬁ‹
)

963 
COLORREF
 
ﬁdCﬁ‹
;

965 if(
nIndex
 >0 &&ÇIndex < 
MAXSYSCOLORS
) {

966 
ﬁdCﬁ‹
 = 
sysCﬁ‹s
[
nIndex
];

967 
sysCﬁ‹s
[
nIndex
] = 
¸Cﬁ‹
;

968  
ﬁdCﬁ‹
;

971 
	}
}

973 
MWBRUSHOBJ
 
	gOBJ_WHITE_BRUSH
 = {

974 {
OBJ_BRUSH
, 
TRUE
}, 
BS_SOLID
, 
RGB
(255, 255, 255)

977 
MWBRUSHOBJ
 
	gOBJ_LTGRAY_BRUSH
 = {

978 {
OBJ_BRUSH
, 
TRUE
}, 
BS_SOLID
, 
RGB
(192, 192, 192)

981 
MWBRUSHOBJ
 
	gOBJ_GRAY_BRUSH
 = {

982 {
OBJ_BRUSH
, 
TRUE
}, 
BS_SOLID
, 
RGB
(128, 128, 128)

985 
MWBRUSHOBJ
 
	gOBJ_DKGRAY_BRUSH
 = {

986 {
OBJ_BRUSH
, 
TRUE
}, 
BS_SOLID
, 
RGB
(32, 32, 32)

989 
MWBRUSHOBJ
 
	gOBJ_BLACK_BRUSH
 = {

990 {
OBJ_BRUSH
, 
TRUE
}, 
BS_SOLID
, 
RGB
(0, 0, 0)

993 
MWBRUSHOBJ
 
	gOBJ_NULL_BRUSH
 = {

994 {
OBJ_BRUSH
, 
TRUE
}, 
BS_NULL
, 
RGB
(0, 0, 0)

997 
MWPENOBJ
 
	gOBJ_WHITE_PEN
 = {

998 {
OBJ_PEN
, 
TRUE
}, 
PS_SOLID
, 
RGB
(255, 255, 255)

1001 
MWPENOBJ
 
	gOBJ_BLACK_PEN
 = {

1002 {
OBJ_PEN
, 
TRUE
}, 
PS_SOLID
, 
RGB
(0, 0, 0)

1005 
MWPENOBJ
 
	gOBJ_NULL_PEN
 = {

1006 {
OBJ_PEN
, 
TRUE
}, 
PS_NULL
, 
RGB
(0, 0, 0)

1009 
MWFONTOBJ
 
	gOBJ_OEM_FIXED_FONT
 = {

1010 {
OBJ_FONT
, 
TRUE
}, 
NULL
, 
MWFONT_SYSTEM_FIXED


1013 
MWFONTOBJ
 
	gOBJ_ANSI_FIXED_FONT
 = {

1014 {
OBJ_FONT
, 
TRUE
}, 
NULL
, 
MWFONT_SYSTEM_FIXED


1017 
MWFONTOBJ
 
	gOBJ_ANSI_VAR_FONT
 = {

1018 {
OBJ_FONT
, 
TRUE
}, 
NULL
, 
MWFONT_SYSTEM_VAR


1021 
MWFONTOBJ
 
	gOBJ_SYSTEM_FONT
 = {

1022 {
OBJ_FONT
, 
TRUE
}, 
NULL
, 
MWFONT_SYSTEM_VAR


1025 
MWFONTOBJ
 
	gOBJ_DEVICE_DEFAULT_FONT
 = {

1026 {
OBJ_FONT
, 
TRUE
}, 
NULL
, 
MWFONT_SYSTEM_FIXED


1029 
MWFONTOBJ
 
	gOBJ_SYSTEM_FIXED_FONT
 = {

1030 {
OBJ_FONT
, 
TRUE
}, 
NULL
, 
MWFONT_SYSTEM_FIXED


1033 
MWFONTOBJ
 
	gOBJ_DEFAULT_GUI_FONT
 = {

1034 {
OBJ_FONT
, 
TRUE
}, 
NULL
, 
MWFONT_SYSTEM_VAR


1037 
hgdiobj
 *
	g°ockObje˘s
[
MAXSTOCKOBJECTS
] = {

1038 (
hgdiobj
 *)&
OBJ_WHITE_BRUSH
,

1039 (
hgdiobj
 *)&
OBJ_LTGRAY_BRUSH
,

1040 (
hgdiobj
 *)&
OBJ_GRAY_BRUSH
,

1041 (
hgdiobj
 *)&
OBJ_DKGRAY_BRUSH
,

1042 (
hgdiobj
 *)&
OBJ_BLACK_BRUSH
,

1043 (
hgdiobj
 *)&
OBJ_NULL_BRUSH
,

1044 (
hgdiobj
 *)&
OBJ_WHITE_PEN
,

1045 (
hgdiobj
 *)&
OBJ_BLACK_PEN
,

1046 (
hgdiobj
 *)&
OBJ_NULL_PEN
,

1047 (
hgdiobj
 *)
NULL
,

1048 (
hgdiobj
 *)&
OBJ_OEM_FIXED_FONT
,

1049 (
hgdiobj
 *)&
OBJ_ANSI_FIXED_FONT
,

1050 (
hgdiobj
 *)&
OBJ_ANSI_VAR_FONT
,

1051 (
hgdiobj
 *)&
OBJ_SYSTEM_FONT
,

1052 (
hgdiobj
 *)&
OBJ_DEVICE_DEFAULT_FONT
,

1053 (
hgdiobj
 *)
NULL
,

1054 (
hgdiobj
 *)&
OBJ_SYSTEM_FIXED_FONT
,

1055 (
hgdiobj
 *)&
OBJ_DEFAULT_GUI_FONT


1058 
HGDIOBJ
 
WINAPI


1059 
	$GëStockObje˘
(
nObje˘
)

1061 
HGDIOBJ
 
pObj
;

1062 
MWFONTOBJ
 * 
pF⁄t
;

1064 if(
nObje˘
 >0 &&ÇObje˘ < 
MAXSTOCKOBJECTS
) {

1065 
pObj
 = 
°ockObje˘s
[
nObje˘
];

1068 if(
pObj
->
hdr
.
ty≥
 =
OBJ_FONT
) {

1069 
pF⁄t
 = (
MWFONTOBJ
 *)
pObj
;

1070 if(
pF⁄t
->
pf⁄t
 =
NULL
) {

1071 
pF⁄t
->
pf⁄t
 = 
	`GdCª©eF⁄t
(&
s¸dev
,

1072 
pF⁄t
->
«me
, 0, 
NULL
);

1073 i‡(!
pF⁄t
->
pf⁄t
)

1074 
pF⁄t
->
pf⁄t
 = 
	`GdCª©eF⁄t
(&
s¸dev
,

1075 
NULL
, 0, NULL);

1077  
pObj
;

1083 
nObje˘
) {

1084 
LTGRAY_BRUSH
:

1085 
GRAY_BRUSH
:

1086 ((
MWBRUSHOBJ
 *)
pObj
)->
cﬁ‹
 =
	`GëSysCﬁ‹
(
COLOR_BTNFACE
);

1088 
DKGRAY_BRUSH
:

1089 ((
MWBRUSHOBJ
 *)
pObj
)->
cﬁ‹
 =

1090 
	`GëSysCﬁ‹
(
COLOR_BTNSHADOW
);

1093  
pObj
;

1095  
NULL
;

1096 
	}
}

1098 
HGDIOBJ
 
WINAPI


1099 
	$Sñe˘Obje˘
(
HDC
 
hdc
, 
HGDIOBJ
 
hObje˘
)

1101 
HGDIOBJ
 
objOrg
;

1102 
MWBITMAPOBJ
 * 
pb
;

1104 if(!
hdc
 || !
hObje˘
)

1105  
NULL
;

1107 
hObje˘
->
hdr
.
ty≥
) {

1108 
OBJ_PEN
:

1109 
objOrg
 = (
HGDIOBJ
)
hdc
->
≥n
;

1110 
hdc
->
≥n
 = (
MWPENOBJ
 *)
hObje˘
;

1112 
OBJ_BRUSH
:

1113 
objOrg
 = (
HGDIOBJ
)
hdc
->
brush
;

1114 
hdc
->
brush
 = (
MWBRUSHOBJ
 *)
hObje˘
;

1116 
OBJ_FONT
:

1117 
objOrg
 = (
HGDIOBJ
)
hdc
->
f⁄t
;

1118 
hdc
->
f⁄t
 = (
MWFONTOBJ
 *)
hObje˘
;

1120 
OBJ_BITMAP
:

1122 if(!(
hdc
->
psd
->
Êags
&
PSF_MEMORY
))

1123  
NULL
;

1124 
objOrg
 = (
HGDIOBJ
)
hdc
->
bôm≠
;

1127 
pb
 = (
MWBITMAPOBJ
 *)
hObje˘
;

1130 i‡(!
hdc
->
psd
->
	`M≠MemGC
(hdc->psd, 
pb
->
width
,Öb->
height
,

1131 
pb
->
∂™es
,Öb->
bµ
,Öb->
löñí
,Öb->
size
,

1132 &
pb
->
bôs
[0]))

1133  
NULL
;

1135 
hdc
->
bôm≠
 = (
MWBITMAPOBJ
 *)
hObje˘
;

1137 #i‡
UPDATEREGIONS


1138 
OBJ_REGION
:

1140 
objOrg
 = 
NULL
;

1141 
	`Sñe˘ClùRgn
(
hdc
, (
HRGN
)
hObje˘
);

1145  
NULL
;

1148  
objOrg
;

1149 
	}
}

1151 
BOOL
 
WINAPI


1152 
	$DñëeObje˘
(
HGDIOBJ
 
hObje˘
)

1154 if(!
hObje˘
 || hObje˘->
hdr
.
°ockobj
)

1155  
FALSE
;

1156 if(
hObje˘
->
hdr
.
ty≥
 =
OBJ_FONT
)

1157 
	`GdDe°royF⁄t
(((
MWFONTOBJ
 *)
hObje˘
)->
pf⁄t
);

1158 if(
hObje˘
->
hdr
.
ty≥
 =
OBJ_REGION
)

1159 
	`GdDe°royRegi⁄
(((
MWRGNOBJ
 *)
hObje˘
)->
rgn
);

1160 
	`GdIãmFªe
(
hObje˘
);

1161  
TRUE
;

1162 
	}
}

1164 #i‡
UPDATEREGIONS


1166 
WINAPI


1167 
	$Sñe˘ClùRgn
(
HDC
 
hdc
, 
HRGN
 
hrgn
)

1169  
	`ExtSñe˘ClùRgn
(
hdc
, 
hrgn
, 
RGN_COPY
);

1170 
	}
}

1177 
WINAPI


1178 
	$ExtSñe˘ClùRgn
(
HDC
 
hdc
, 
HRGN
 
hrgn
, 
‚Mode
)

1180 
HRGN
 
√wrgn
;

1182 if(!
hdc
)

1183  
ERROR
;

1184 if(
hdc
->
ªgi⁄
 !(
MWRGNOBJ
 *)
hrgn
) {

1186 if(
hrgn
) {

1187 
√wrgn
 = 
	`Cª©eRe˘Rgn
(0, 0, 0, 0);

1194 
	`Off£tRgn
(
hrgn
, 
hdc
->
hwnd
->
˛úe˘
.
À·
,

1195 
hdc
->
hwnd
->
˛úe˘
.
t›
);

1197 if(
‚Mode
 =
RGN_COPY
)

1198 
	`ComböeRgn
(
√wrgn
, 
hrgn
, 
NULL
, 
‚Mode
);

1199 
	`ComböeRgn
(
√wrgn
, (
HRGN
)
hdc
->
ªgi⁄
, 
hrgn
,
‚Mode
);

1202 
	`Off£tRgn
(
hrgn
, -
hdc
->
hwnd
->
˛úe˘
.
À·
,

1203 -
hdc
->
hwnd
->
˛úe˘
.
t›
);

1206 
hrgn
 = 
√wrgn
;

1208 
	`DñëeObje˘
((
HRGN
)
hdc
->
ªgi⁄
);

1209 
hdc
->
ªgi⁄
 = (
MWRGNOBJ
 *)
hrgn
;

1212 
˛ùhdc
 = 
NULL
;

1213 
	`MwPª∑ªDC
(
hdc
);

1215 if(
hrgn
)

1216  ((
MWRGNOBJ
 *)
hrgn
)->
rgn
->
ty≥
;

1217  
NULLREGION
;

1218 
	}
}

1221 
WINAPI


1222 
	$GëUpd©eRgn
(
HWND
 
hwnd
, 
HRGN
 
hrgn
, 
BOOL
 
bEø£
)

1225 if(!
hwnd
)

1226  
ERROR
;

1229 
	`GdOff£tRegi⁄
(
hwnd
->
upd©e
, -hwnd->
˛úe˘
.
À·
, -hwnd->˛úe˘.
t›
);

1230 
	`GdC›yRegi⁄
(((
MWRGNOBJ
 *)
hrgn
)->
rgn
, 
hwnd
->
upd©e
);

1231 
	`GdOff£tRegi⁄
(
hwnd
->
upd©e
, hwnd->
˛úe˘
.
À·
, hwnd->˛úe˘.
t›
);

1232  
hwnd
->
upd©e
->
ty≥
;

1233 
	}
}

1237 
BOOL
 
WINAPI


1238 
	$GëUpd©eRe˘
(
HWND
 
hwnd
, 
LPRECT
 
ÕRe˘
, 
BOOL
 
bEø£
)

1241 if(!
hwnd
)

1242  
FALSE
;

1243 #i‡
UPDATEREGIONS


1244 if(
ÕRe˘
) {

1245 *
ÕRe˘
 = 
hwnd
->
upd©e
->
exã¡s
;

1247 
	`S¸ìnToClõ¡
(
hwnd
, (
LPPOINT
)&
ÕRe˘
->
À·
);

1248 
	`S¸ìnToClõ¡
(
hwnd
, (
LPPOINT
)&
ÕRe˘
->
right
);

1252  
hwnd
->
upd©e
->
ty≥
 !
NULLREGION
;

1254 
	`GëClõ¡Re˘
(
hwnd
, 
ÕRe˘
);

1255  
TRUE
;

1257 
	}
}

1259 
HBRUSH
 
WINAPI


1260 
	$Cª©eSﬁidBrush
(
COLORREF
 
¸Cﬁ‹
)

1262 
MWBRUSHOBJ
 *
hbr
;

1264 
hbr
 = 
	`GdIãmNew
(
MWBRUSHOBJ
);

1265 if(!
hbr
)

1266  
NULL
;

1267 
hbr
->
hdr
.
ty≥
 = 
OBJ_BRUSH
;

1268 
hbr
->
hdr
.
°ockobj
 = 
FALSE
;

1269 
hbr
->
°yÀ
 = 
BS_SOLID
;

1270 
hbr
->
cﬁ‹
 = 
¸Cﬁ‹
;

1271  (
HBRUSH
)
hbr
;

1272 
	}
}

1274 
HPEN
 
WINAPI


1275 
	$Cª©ePí
(
nPíStyÀ
, 
nWidth
, 
COLORREF
 
¸Cﬁ‹
)

1277 
MWPENOBJ
 *
h≥n
;

1280 
h≥n
 = 
	`GdIãmNew
(
MWPENOBJ
);

1281 if(!
h≥n
)

1282  
NULL
;

1283 
h≥n
->
hdr
.
ty≥
 = 
OBJ_PEN
;

1284 
h≥n
->
hdr
.
°ockobj
 = 
FALSE
;

1285 
h≥n
->
°yÀ
 = 
nPíStyÀ
;

1286 
h≥n
->
cﬁ‹
 = 
¸Cﬁ‹
;

1287  (
HPEN
)
h≥n
;

1288 
	}
}

1290 
HBITMAP
 
WINAPI


1291 
	$Cª©eCom∑tibÀBôm≠
(
HDC
 
hdc
, 
nWidth
, 
nHeight
)

1293 
MWBITMAPOBJ
 * 
hbôm≠
;

1294 
size
;

1295 
löñí
;

1297 if(!
hdc
)

1298  
NULL
;

1300 
nWidth
 = 
	`MWMAX
(nWidth, 1);

1301 
nHeight
 = 
	`MWMAX
(nHeight, 1);

1304 if(!
	`GdCÆcMemGCAŒoc
(
hdc
->
psd
, 
nWidth
, 
nHeight
, 0, 0, &
size
, &
löñí
))

1305  
NULL
;

1308 
hbôm≠
 = (
MWBITMAPOBJ
 *)
	`GdIãmAŒoc
((MWBITMAPOBJ)-1+
size
);

1309 if(!
hbôm≠
)

1310  
NULL
;

1311 
hbôm≠
->
hdr
.
ty≥
 = 
OBJ_BITMAP
;

1312 
hbôm≠
->
hdr
.
°ockobj
 = 
FALSE
;

1313 
hbôm≠
->
width
 = 
nWidth
;

1314 
hbôm≠
->
height
 = 
nHeight
;

1317 
hbôm≠
->
∂™es
 = 
hdc
->
psd
->planes;

1318 
hbôm≠
->
bµ
 = 
hdc
->
psd
->bpp;

1319 
hbôm≠
->
löñí
 =Üinelen;

1320 
hbôm≠
->
size
 = size;

1322  (
HBRUSH
)
hbôm≠
;

1323 
	}
}

1326 
HDC
 
WINAPI


1327 
	$Cª©eCom∑tibÀDC
(
HDC
 
hdc
)

1329 
HDC
 
hdcmem
;

1330 
PSD
 
psd
;

1331 
PSD
 
mempsd
;

1334 
psd
 = 
hdc
? hdc->psd: &
s¸dev
;

1337 
mempsd
 = 
psd
->
	`AŒoˇãMemGC
(psd);

1338 if(!
mempsd
)

1339  
NULL
;

1342 
hdcmem
 = 
	`GëDCEx
(
NULL
, NULL, 
DCX_DEFAULTCLIP
);

1343 if(!
hdcmem
) {

1344 
mempsd
->
	`FªeMemGC
(mempsd);

1345  
NULL
;

1347 
hdcmem
->
psd
 = 
mempsd
;

1350 
	`Sñe˘Obje˘
(
hdcmem
, (
HGDIOBJ
)&
deÁu…_bôm≠
);

1351  
hdcmem
;

1352 
	}
}

1354 
BOOL
 
WINAPI


1355 
	$BôB…
(
HDC
 
hdcDe°
, 
nXDe°
, 
nYDe°
, 
nWidth
, 
nHeight
,

1356 
HDC
 
hdcSrc
, 
nXSrc
, 
nYSrc
, 
DWORD
 
dwR›
)

1359  
	`SåëchB…
(
hdcDe°
, 
nXDe°
, 
nYDe°
, 
nWidth
, 
nHeight
,

1360 
hdcSrc
, 
nXSrc
, 
nYSrc
, 
nWidth
, 
nHeight
, 
dwR›
);

1361 
	}
}

1363 
BOOL
 
WINAPI


1364 
	$SåëchB…
(
HDC
 
hdcDe°
, 
nXOrigöDe°
, 
nYOrigöDe°
, 
nWidthDe°
,

1365 
nHeightDe°
, 
HDC
 
hdcSrc
, 
nXOrigöSrc
, 
nYOrigöSrc
,

1366 
nWidthSrc
, 
nHeightSrc
, 
DWORD
 
dwR›
)

1369 
HWND
 
hwnd
;

1370 
POINT
 
d°
, 
§c
;

1372 if(!
hdcDe°
 || !
hdcSrc
)

1373  
FALSE
;

1374 
d°
.
x
 = 
nXOrigöDe°
;

1375 
d°
.
y
 = 
nYOrigöDe°
;

1376 
§c
.
x
 = 
nXOrigöSrc
;

1377 
§c
.
y
 = 
nYOrigöSrc
;

1381 if(!
	`MwIsMemDC
(
hdcSrc
Ë&& 
	`MwIsClõ¡DC
(hdcSrc)) {

1382 if(!(
hwnd
 = 
	`MwPª∑ªDC
(
hdcSrc
)))

1383  
FALSE
;

1384 
	`Clõ¡ToS¸ìn
(
hwnd
, &
§c
);

1388 if(!
	`MwIsMemDC
(
hdcDe°
Ë&& 
	`MwIsClõ¡DC
(hdcDest)) {

1389 if(!(
hwnd
 = 
	`MwPª∑ªDC
(
hdcDe°
)))

1390  
FALSE
;

1391 
	`Clõ¡ToS¸ìn
(
hwnd
, &
d°
);

1394 i‡(
nWidthDe°
 =
nWidthSrc
 && 
nHeightDe°
 =
nHeightSrc
) {

1395 
	`GdBlô
(
hdcDe°
->
psd
, 
d°
.
x
, d°.
y
, 
nWidthDe°
, 
nHeightDe°
,

1396 
hdcSrc
->
psd
, 
§c
.
x
, src.
y
, 
dwR›
);

1398 
	`GdSåëchBlô
(
hdcDe°
->
psd
, 
d°
.
x
, d°.
y
,

1399 
nWidthDe°
, 
nHeightDe°
, 
hdcSrc
->
psd
, 
§c
.
x
, src.
y
,

1400 
nWidthSrc
, 
nHeightSrc
, 
dwR›
);

1402  
TRUE
;

1403 
	}
}

1405 
UINT
 
WINAPI


1406 
	$GëSy°emPÆëãE¡rõs
(
HDC
 
hdc
,
UINT
 
iSèπIndex
,UINT 
nE¡rõs
,

1407 
LPPALETTEENTRY
 
Õ≥
)

1409 
UINT
 
i
;

1410 
MWPALENTRY
 
rgb
;

1413 if(!
hdc
 || hdc->
psd
 !&
s¸dev
)

1416 
i
=0; i<
nE¡rõs
; ++i) {

1417 if(!
	`GdGëPÆëã
(
hdc
->
psd
, 
i
+
iSèπIndex
, 1, &
rgb
))

1419 
Õ≥
->
≥Red
 = 
rgb
.
r
;

1420 
Õ≥
->
≥Gªí
 = 
rgb
.
g
;

1421 
Õ≥
->
≥Blue
 = 
rgb
.
b
;

1422 
Õ≥
->
≥Fœgs
 = 0;

1423 ++
Õ≥
;

1425  
i
;

1426 
	}
}

1429 
WINAPI


1430 
	$GëDevi˚C≠s
(
HDC
 
hdc
, 
nIndex
)

1432 
PSD
 
psd
;

1434 i‡(!
hdc
)

1435 
psd
 = &
s¸dev
;

1436 
psd
 = 
hdc
->psd;

1438 
nIndex
) {

1439 
HORZRES
:

1440  
psd
->
xvúåes
;

1441 
VERTRES
:

1442  
psd
->
yvúåes
;

1443 
BITSPIXEL
:

1444  
psd
->
bµ
;

1445 
PLANES
:

1446  
psd
->
∂™es
;

1447 
LOGPIXELSX
:

1448 
LOGPIXELSY
:

1450 
SIZEPALETTE
:

1451 i‡(
psd
->
bµ
 <= 8)

1452  
psd
->
ncﬁ‹s
;

1456 
	}
}

	@mwin/winlib/button.c

1 
	~"wödows.h
"

2 
	~"wödowsx.h
"

3 
	~"wötoﬁs.h
"

12 
	#GET_PBSTATE
(
h
Ë(
	`GëWödowW‹d
(h, 0))

	)

13 
	#GET_PBCAPTURE
(
h
Ë(
	`GëWödowW‹d
(h, 2))

	)

14 
	#GET_PBWASINSIDE
(
h
Ë(
	`GëWödowW‹d
(h, 4))

	)

15 
	#GET_PBDELETEFONT
(
h
Ë(
	`GëWödowW‹d
(h, 6))

	)

16 
	#GET_PBFONT
(
h
Ë(
	`GëWödowW‹d
(h, 8))

	)

18 
	#SET_PBSTATE
(
h
,
x
Ë(
	`SëWödowW‹d
(h, 0, x))

	)

19 
	#SET_PBCAPTURE
(
h
,
x
Ë(
	`SëWödowW‹d
(h, 2, x))

	)

20 
	#SET_PBWASINSIDE
(
h
,
x
Ë(
	`SëWödowW‹d
(h, 4, x))

	)

21 
	#SET_PBDELETEFONT
(
h
,
x
Ë(
	`SëWödowW‹d
(h, 6, x))

	)

22 
	#SET_PBFONT
(
h
,
x
Ë(
	`SëWödowW‹d
(h, 8, x))

	)

24 
	#PARENT
(
hwnd
Ë((
HWND
)
	`GëWödowL⁄g
(hwnd,
GWL_HWNDPARENT
))

	)

27 
	#PUSH_UP
 0x0000

	)

28 
	#PUSH_DOWN
 0x0001

	)

29 
	#PUSH_FOCUS
 0x0002

	)

30 
	#PUSH_DISABLED
 0x0004

	)

31 
	#PUSH_DEFAULT
 0x0008

	)

32 
	#PUSH_CHECKED
 0x0010

	)

35 
	#PBS_UP
 0x0000

	)

36 
	#PBS_FOCUSDOWN
 0x0001

	)

37 
	#PBS_FOCUSUP
 0x0002

	)

38 
	#PBS_DISABLED
 0x0004

	)

39 
	#PBS_DEFAULT
 0x0008

	)

40 
	#PBS_CHECKED
 0x0010

	)

42 
	#WM_PAINT_SPECIAL
 
WM_PAINT


	)

43 
	#HANDLE_WM_PAINT_SPECIAL
(
hwnd
, 
wP¨am
, 
lP¨am
, 
‚
) \

44 ((
‚
)((
hwnd
),(
HDC
)(
wP¨am
)), 0L)

	)

47 
	#HANDLE_BM_GETSTATE
(
hwnd
, 
wP¨am
, 
lP¨am
, 
‚
Ë((‚)(hwnd))

	)

48 
	#FORWARD_BM_GETSTATE
(
hwnd
) \

49 (
LONG
)(
‚
)((
hwnd
), 
BM_GETSTATE
, (
WPARAM
)0, (
LPARAM
)0)

	)

52 
	#HANDLE_BM_SETSTATE
–
hwnd
, 
wP¨am
, 
lP¨am
, 
‚
) \

53 ((
‚
)((
hwnd
), (
WORD
)
wP¨am
), 0)

	)

54 
	#FORWARD_BM_SETSTATE
–
hwnd
, 
wSèã
) \

55 (
‚
)((
hwnd
), 
BM_SETSTATE
, (
WPARAM
)
wSèã
, (
LPARAM
)0)

	)

58 
	#HANDLE_BM_SETSTYLE
–
hwnd
, 
wP¨am
, 
lP¨am
, 
‚
) \

59 ((
‚
)((
hwnd
), (
WORD
)
wP¨am
, (
BOOL
)
	`LOWORD
(
lP¨am
)), 0)

	)

60 
	#FORWARD_BM_SETSTYLE
–
hwnd
, 
°yÀ
, 
bRedøw
, 
‚
) \

61 (
‚
)((
hwnd
), 
BM_SETSTYLE
, (
WPARAM
)
°yÀ
, 
	`MAKELPARAM
(
bRedøw
, 0))

	)

64 
WINAPI
 
CheckRadioBuâ⁄
(
HWND
 
hDlg
, 
nIDFú°
,
nIDLa°
,

65 
nIDCheckBuâ⁄
);

68 
WINAPI
 
˚nBuâ⁄_FnEnd
–
HWND
, 
WORD
);

69 
WORD
 
WINAPI
 
˚nBuâ⁄_FnSèπ
–
HWND
);

70 
BOOL
 
WINAPI
 
˚nBuâ⁄_OnCª©e
–
HWND
, 
LPCREATESTRUCT
);

73 
BOOL
 
WINAPI
 
˚nBuâ⁄_OnEø£Bkgnd
–
HWND
, 
HDC
);

75 
LONG
 
WINAPI
 
˚nBuâ⁄_OnGëSèã
–
HWND
);

77 
WINAPI
 
˚nBuâ⁄_OnKûlFocus
–
HWND
, HWND);

78 
WINAPI
 
˚nBuâ⁄_OnLBuâ⁄Down
–
HWND
, 
BOOL
, 
UINT
, UINT, UINT);

79 
WINAPI
 
˚nBuâ⁄_OnLBuâ⁄Up
–
HWND
, 
UINT
, UINT, UINT);

80 
WINAPI
 
˚nBuâ⁄_OnMou£Move
–
HWND
, 
UINT
, UINT, UINT);

81 
WINAPI
 
˚nBuâ⁄_OnPaöt
–
HWND
, 
HDC
);

82 
WINAPI
 
DøwPushBuâ⁄
(
HWND
 
hwnd
,
HDC
 
hDCwP¨am
,
UINT
 
wEnumSèã
,

83 
DWORD
 
dwStyÀ
);

84 
WINAPI
 
DøwGroupBox
(
HWND
 
hwnd
,
HDC
 
hDCwP¨am
, 
DWORD
 
dwStyÀ
);

85 
WINAPI
 
˚nBuâ⁄_OnSëFocus
–
HWND
, HWND);

86 
WINAPI
 
˚nBuâ⁄_OnSëStyÀ
–
HWND
, 
WORD
, 
BOOL
);

87 
WINAPI
 
˚nBuâ⁄_OnSëSèã
–
HWND
, 
WORD
);

88 
WINAPI
 
˚nBuâ⁄_SëSèã
–
HWND
, 
WORD
, 
BOOL
);

89 
WINAPI
 
˚nBuâ⁄_OnSëText
–
HWND
, 
LPCSTR
);

91 
WINAPI


92 
	$˚nBuâ⁄_FnEnd
(

93 
HWND
 
hwnd
,

94 
WORD
 
wSèã
)

96 if–
wSèã
 !
	`GET_PBSTATE
–
hwnd
)) {

97 if–
	`IsWödowVisibÀ
–
hwnd
))

98 
	`Upd©eWödow
–
hwnd
);

100 
	}
}

102 
WORD
 
WINAPI


103 
	$˚nBuâ⁄_FnSèπ
(

104 
HWND
 
hwnd
)

106  
	`GET_PBSTATE
–
hwnd
);

107 
	}
}

109 
BOOL
 
WINAPI


110 
	$˚nBuâ⁄_OnCª©e
(

111 
HWND
 
hwnd
,

112 
LPCREATESTRUCT
 
ÕCª©e
)

117 
	`SET_PBSTATE
–
hwnd
, 
PUSH_UP
 );

118 
	`SET_PBCAPTURE
–
hwnd
, 
FALSE
 );

119 
	`SET_PBWASINSIDE
–
hwnd
, 
FALSE
 );

121 i‡((
ÕCª©e
->
°yÀ
 & 0x0fË=
BS_DEFPUSHBUTTON
)

122 
	`˚nBuâ⁄_SëSèã
–
hwnd
, 
PUSH_DEFAULT
, 
TRUE
 );

124 i‡(
ÕCª©e
->
°yÀ
 & 
WS_DISABLED
)

125 
	`˚nBuâ⁄_SëSèã
–
hwnd
, 
PUSH_DISABLED
, 
TRUE
 );

127 –
TRUE
);

128 
	}
}

131 
WINAPI


132 
	$˚nBuâ⁄_OnDe°roy
(

133 
HWND
 
hwnd
)

135 if–
	`GET_PBDELETEFONT
–
hwnd
)) {

136 
	`DñëeObje˘
–
	`GET_PBFONT
–
hwnd
));

137 
	`SET_PBDELETEFONT
–
hwnd
, 
FALSE
);

139 
	}
}

141 
WINAPI


142 
	$˚nBuâ⁄_OnE«bÀ
(

143 
HWND
 
hwnd
,

144 
BOOL
 
bE«bÀ
)

146 
WORD
 
wSèã
;

148 
wSèã
 = 
	`˚nBuâ⁄_FnSèπ
–
hwnd
);

149 
	`˚nBuâ⁄_SëSèã
–
hwnd
, 
PUSH_DISABLED
, !
bE«bÀ
);

150 
	`˚nBuâ⁄_FnEnd
–
hwnd
, 
wSèã
);

151 
	}
}

154 
BOOL
 
WINAPI


155 
	$˚nBuâ⁄_OnEø£Bkgnd
(

156 
HWND
 
hwnd
,

157 
HDC
 
hdc
)

160  
TRUE
;

161 
	}
}

164 
UINT
 
WINAPI


165 
	$˚nBuâ⁄_OnGëDlgCode
(

166 
HWND
 
hwnd
,

167 
LPMSG
 
ÕMsg
)

178 –
DLGC_BUTTON
);

179 
	}
}

182 
LONG
 
WINAPI


183 
	$˚nBuâ⁄_OnGëSèã
(

184 
HWND
 
hwnd
)

190 ––
	`GET_PBSTATE
–
hwnd
Ë& 
PUSH_DOWN
) == PUSH_DOWN);

191 
	}
}

194 
WINAPI


195 
	$˚nBuâ⁄_OnKey
(

196 
HWND
 
hwnd
,

197 
UINT
 
vk
,

198 
BOOL
 
bDown
,

199 
cRïót
,

200 
UINT
 
Êag
)

202 
WORD
 
wSèã
;

204 
wSèã
 = 
	`˚nBuâ⁄_FnSèπ
–
hwnd
);

205 i‡(
bDown
) {

211 i‡–(
vk
 =' 'Ë&& !(
	`HIBYTE
(
Êag
) & 0x40) )

212 
	`˚nBuâ⁄_SëSèã
–
hwnd
, 
PUSH_DOWN
, 
TRUE
 );

220 i‡–
vk
 == ' ' )

221 { 
	`˚nBuâ⁄_SëSèã
–
hwnd
, 
PUSH_DOWN
, 
FALSE
 );

223 i‡(
	`GET_PBSTATE
–
hwnd
Ë& 
PUSH_FOCUS
) {

224 
	`FORWARD_WM_COMMAND
–
	`PARENT
–
hwnd
), 
	`GëDlgCålID
( hwnd),

225 
hwnd
, 
BN_CLICKED
, 
SídMesßge
);

226 if(!
	`IsWödow
(
hwnd
))

231 
	`˚nBuâ⁄_FnEnd
–
hwnd
, 
wSèã
);

232 
	}
}

235 
WINAPI


236 
	$˚nBuâ⁄_OnKûlFocus
(

237 
HWND
 
hwnd
,

238 
HWND
 
hwndNewFocus
)

240 
WORD
 
wSèã
;

242 
wSèã
 = 
	`˚nBuâ⁄_FnSèπ
–
hwnd
);

243 
	`˚nBuâ⁄_SëSèã
–
hwnd
, 
PUSH_FOCUS
, 
FALSE
 );

244 
	`˚nBuâ⁄_FnEnd
–
hwnd
, 
wSèã
);

245 
	}
}

247 
WINAPI


248 
	$˚nBuâ⁄_OnLBuâ⁄Down
(

249 
HWND
 
hwnd
,

250 
BOOL
 
bDblClick
,

251 
UINT
 
x
,

252 
UINT
 
y
,

253 
UINT
 
keySèã
)

255 
WORD
 
wSèã
;

257 
wSèã
 = 
	`˚nBuâ⁄_FnSèπ
–
hwnd
);

259 
	`SëC≠tuª
–
hwnd
 );

261 
	`SëFocus
–
hwnd
 );

262 
	`SET_PBCAPTURE
–
hwnd
, 
TRUE
 );

263 
	`SET_PBWASINSIDE
–
hwnd
, 
TRUE
 );

265 
	`˚nBuâ⁄_SëSèã
–
hwnd
, 
PUSH_DOWN
, 
TRUE
 );

266 
	`˚nBuâ⁄_FnEnd
–
hwnd
, 
wSèã
);

267 
	}
}

269 
WINAPI


270 
	$˚nBuâ⁄_OnLBuâ⁄Up
(

271 
HWND
 
hwnd
,

272 
UINT
 
x
,

273 
UINT
 
y
,

274 
UINT
 
keys
)

276 
WORD
 
wSèã
;

277 
DWORD
 
dwStyÀ
;

279 
dwStyÀ
 = 
	`GëWödowL⁄g
(
hwnd
, 
GWL_STYLE
);

280 
wSèã
 = 
	`˚nBuâ⁄_FnSèπ
–
hwnd
);

283 if(
	`GëC≠tuª
(Ë=
hwnd
)

284 
	`˚nBuâ⁄_SëSèã
–
hwnd
, 
PUSH_DOWN
, 
FALSE
 );

286 
	`Rñó£C≠tuª
();

289 i‡(
	`GET_PBWASINSIDE
–
hwnd
)) {

290 ()(
dwStyÀ
 & 0x0f)) {

291 
BS_AUTOCHECKBOX
:

292 
	`SídMesßge
(
hwnd
,
BM_SETCHECK
,(
wSèã
 & 
PBS_CHECKED
)?0:1,0L);

294 
BS_AUTORADIOBUTTON
:

295 
	`CheckRadioBuâ⁄
(
	`PARENT
(
hwnd
),0,0xffff,hwnd->
id
);

298 
	`FORWARD_WM_COMMAND
–
	`PARENT
–
hwnd
), 
	`GëDlgCålID
( hwnd), hwnd,

299 
BN_CLICKED
, 
SídMesßge
);

300 if(!
	`IsWödow
(
hwnd
))

304 
	`SET_PBCAPTURE
–
hwnd
, 
FALSE
 );

305 
	`SET_PBWASINSIDE
–
hwnd
, 
FALSE
 );

306 
	`˚nBuâ⁄_FnEnd
–
hwnd
, 
wSèã
);

307 
	}
}

309 
WINAPI


310 
	$˚nBuâ⁄_OnMou£Move
(

311 
HWND
 
hwnd
,

312 
UINT
 
x
,

313 
UINT
 
y
,

314 
UINT
 
keys
)

325 
WORD
 
wSèã
;

326 
DWORD
 
dwStyÀ
;

328 
wSèã
 = 
	`˚nBuâ⁄_FnSèπ
–
hwnd
);

329 
dwStyÀ
 = 
	`GëWödowL⁄g
(
hwnd
, 
GWL_STYLE
);

330 if–
	`GET_PBCAPTURE
–
hwnd
)) {

331 if–!
	`PtInsideWödow
–
hwnd
, 
x
, 
y
) ) {

332 if–
	`GET_PBWASINSIDE
–
hwnd
)) {

333 
	`˚nBuâ⁄_SëSèã
–
hwnd
, 
PUSH_DOWN
, 
FALSE
);

334 
	`SET_PBWASINSIDE
–
hwnd
, 
FALSE
 );

335 
	`Rñó£C≠tuª
();

336 
	`˚nBuâ⁄_FnEnd
–
hwnd
, 
wSèã
);

339 if–!
	`GET_PBWASINSIDE
–
hwnd
) ) {

340 
	`˚nBuâ⁄_SëSèã
–
hwnd
, 
PUSH_DOWN
, 
TRUE
 );

341 
	`SET_PBWASINSIDE
–
hwnd
, 
TRUE
 );

342 
	`GëC≠tuª
();

343 
	`˚nBuâ⁄_FnEnd
–
hwnd
, 
wSèã
);

347 
	`˚nBuâ⁄_FnEnd
–
hwnd
, 
wSèã
);

349 
	}
}

351 
WINAPI


352 
	$˚nBuâ⁄_OnPaöt
(

353 
HWND
 
hwnd
,

354 
HDC
 
hDCwP¨am
)

356 
UINT
 
wEnumSèã
;

357 
DWORD
 
dwStyÀ
;

359 if–
	`GET_PBSTATE
–
hwnd
Ë& 
PUSH_DISABLED
)

360 
wEnumSèã
 = 
PBS_DISABLED
;

361 if–
	`GET_PBSTATE
–
hwnd
Ë& 
PUSH_DOWN
)

362 
wEnumSèã
 = 
PBS_FOCUSDOWN
;

363 if–
	`GET_PBSTATE
–
hwnd
Ë& 
PUSH_CHECKED
)

364 
wEnumSèã
 = 
PBS_CHECKED
;

367 if–
	`GET_PBSTATE
–
hwnd
Ë& 
PUSH_FOCUS
)

368 
wEnumSèã
 = 
PBS_FOCUSUP
;

370 
wEnumSèã
 = 
PBS_UP
;

371 if–
	`GET_PBSTATE
–
hwnd
Ë& 
PUSH_DEFAULT
)

372 
wEnumSèã
 |
PBS_DEFAULT
;

376 
dwStyÀ
 = 
	`GëWödowL⁄g
(
hwnd
, 
GWL_STYLE
);

377 ()(
dwStyÀ
 & 0x0f)) {

378 
BS_GROUPBOX
:

379 
	`DøwGroupBox
–
hwnd
, 
hDCwP¨am
, 
dwStyÀ
);

382 
	`DøwPushBuâ⁄
–
hwnd
, 
hDCwP¨am
, 
wEnumSèã
, 
dwStyÀ
);

384 
	}
}

386 
WINAPI


387 
	$DøwPushBuâ⁄
(
HWND
 
hwnd
,
HDC
 
hDCwP¨am
,
UINT
 
wEnumSèã
,
DWORD
 
dwStyÀ
)

389 
HDC
 
hdc
;

390 
HBRUSH
 
hNewBrush
;

391 
RECT
 
ª˘
;

392 
RECT
 
ª˘Clõ¡
;

393 
RECT
 
ª˘Save
;

394 
RECT
 
rc
;

395 
iFa˚Off£t
 = 0;

396 
INT
 
uiHeight
;

397 
INT
 
uiWidth
;

398 
COLORREF
 
¸Old
;

399 
COLORREF
 
¸BkOld
;

400 
ﬁdBkMode
;

401 
HFONT
 
hNewF⁄t
;

402 
HFONT
 
hOldF⁄t
;

403 
HPEN
 
hOldPí
;

404 
COLORREF
 
hOldCﬁ‹
;

405 
PAINTSTRUCT
 
ps
;

406 
buf
[256];

407 
	#uiWidthFøme
 0

	)

408 
	#uiWidthShadow
 2

	)

410 
hdc
 = 
	`BegöPaöt
(
hwnd
, &
ps
);

411 if(!
hdc
)

412 
Rëu∫
;

414 
	`GëWödowText
(
hwnd
, 
buf
, (buf));

415 
	`GëClõ¡Re˘
–
hwnd
, &
ª˘Clõ¡
 );

416 
uiWidth
 = 
ª˘Clõ¡
.
right
 -Ñe˘Clõ¡.
À·
;

417 
uiHeight
 = 
ª˘Clõ¡
.
bŸtom
 -Ñe˘Clõ¡.
t›
;

419 
hNewBrush
 = (
HBRUSH
Ë
	`GëStockObje˘
(
LTGRAY_BRUSH
);

420 
¸Old
 = 
	`SëTextCﬁ‹
–
hdc
, 
	`GëSysCﬁ‹
–
COLOR_BTNTEXT
));

421 
¸BkOld
 = 
	`SëBkCﬁ‹
–
hdc
, 
	`GëSysCﬁ‹
–
COLOR_BTNFACE
));

423 
rc
 = 
ª˘Clõ¡
;

424 ()(
dwStyÀ
 & 0x0f)) {

425 
BS_PUSHBUTTON
:

426 
BS_DEFPUSHBUTTON
:

427 if–
wEnumSèã
 & 
PBS_FOCUSDOWN
) {

428 if(
dwStyÀ
 & 
BS_BITMAP
)

429 
	`DøwDIB
(
hdc
, 
rc
.
À·
+1,Ñc.
t›
+1, (
PMWIMAGEHDR
)
hwnd
->
u£rd©a
);

430 
	`Døw3dBox
(
hdc
, 
rc
.
À·
,Ñc.
t›
,Ñc.
right
-rc.À·,Ñc.
bŸtom
-rc.top,

431 
	`GëSysCﬁ‹
(
COLOR_WINDOWFRAME
), GetSysColor(COLOR_WINDOWFRAME));

432 
	`In£tR
(&
rc
, 1, 1);

433 
	`Døw3dBox
(
hdc
, 
rc
.
À·
,Ñc.
t›
,Ñc.
right
-rc.À·,Ñc.
bŸtom
-rc.top,

434 
	`GëSysCﬁ‹
(
COLOR_BTNSHADOW
), GetSysColor(COLOR_BTNSHADOW));

435 
	`In£tR
(&
rc
, 1, 1);

436 if(!(
dwStyÀ
 & 
BS_BITMAP
))

437 
	`Fa°FûlRe˘
(
hdc
, &
rc
, 
	`GëSysCﬁ‹
(
COLOR_BTNFACE
));

438 
iFa˚Off£t
 = 1;

440 if(
dwStyÀ
 & 
BS_BITMAP
)

441 
	`DøwDIB
(
hdc
, 
rc
.
À·
,Ñc.
t›
, (
PMWIMAGEHDR
)
hwnd
->
u£rd©a
);

442 if(
wEnumSèã
 & 
PBS_DEFAULT
) {

443 
	`Døw3dBox
(
hdc
, 
rc
.
À·
,Ñc.
t›
,

444 
rc
.
right
-rc.
À·
,Ñc.
bŸtom
-rc.
t›
,

445 
	`GëSysCﬁ‹
(
COLOR_WINDOWFRAME
),

446 
	`GëSysCﬁ‹
(
COLOR_WINDOWFRAME
));

447 
	`In£tR
(&
rc
, 1, 1);

449 
	`Døw3dBox
(
hdc
, 
rc
.
À·
,Ñc.
t›
,Ñc.
right
-rc.À·,Ñc.
bŸtom
-rc.top,

450 
	`GëSysCﬁ‹
(
COLOR_BTNHIGHLIGHT
),GëSysCﬁ‹(
COLOR_WINDOWFRAME
));

451 
	`In£tR
(&
rc
, 1, 1);

452 
	`Døw3dBox
(
hdc
, 
rc
.
À·
,Ñc.
t›
,Ñc.
right
-rc.À·,Ñc.
bŸtom
-rc.top,

453 
	`GëSysCﬁ‹
(
COLOR_3DLIGHT
), GëSysCﬁ‹(
COLOR_BTNSHADOW
));

454 
	`In£tR
(&
rc
, 1, 1);

455 if(!(
dwStyÀ
 & 
BS_BITMAP
))

456 
	`Fa°FûlRe˘
(
hdc
, &
rc
, 
	`GëSysCﬁ‹
(
COLOR_BTNFACE
));

457 
iFa˚Off£t
 = 0;

461 
BS_CHECKBOX
:

462 
BS_AUTOCHECKBOX
:

463 
	`Fa°FûlRe˘
(
hdc
, &
rc
, 
	`GëSysCﬁ‹
(
COLOR_BTNFACE
));

466 
rc
.
right
 =Ñc.
À·
 + 12;

467 
rc
.
bŸtom
 =Ñc.
t›
 + 12;

470 
	`Døw3dIn£t
(
hdc
, 
rc
.
À·
,Ñc.
t›
, 12, 12);

471 
	`In£tR
(&
rc
, 2, 2);

472 
	`Fa°FûlRe˘
(
hdc
, &
rc
, 
	`GëSysCﬁ‹
(
COLOR_BTNHIGHLIGHT
));

473 
iFa˚Off£t
 = 1;

474 if(
wEnumSèã
 & 
PBS_CHECKED
) {

475 
	`MoveToEx
(
hdc
, 
rc
.
À·
,Ñc.
t›
,
NULL
);

476 
	`LöeTo
(
hdc
, 
rc
.
right
,Ñc.
bŸtom
);

477 
	`MoveToEx
(
hdc
, 
rc
.
À·
,Ñc.
bŸtom
,
NULL
);

478 
	`LöeTo
(
hdc
, 
rc
.
right
,Ñc.
t›
);

482 
BS_AUTORADIOBUTTON
:

483 
BS_RADIOBUTTON
:

484 
	`Fa°FûlRe˘
(
hdc
, &
rc
, 
	`GëSysCﬁ‹
(
COLOR_BTNFACE
));

485 
rc
.
À·
 = 0;

486 
rc
.
t›
 += 1;

487 
rc
.
right
 =Ñc.
À·
 + 10;

488 
rc
.
bŸtom
 =Ñc.
t›
 + 10;

490 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
NULL_BRUSH
));

491 
hOldPí
 = 
	`Sñe˘Obje˘
(
hdc
, 
	`Cª©ePí
(
PS_SOLID
, 1,

492 
	`GëSysCﬁ‹
(
COLOR_BTNSHADOW
)));

493 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
WHITE_BRUSH
));

494 
	`EŒù£
(
hdc
,
rc
.
À·
,rc.
t›
,Ñc.
right
,rc.
bŸtom
);

495 
	`In£tR
(&
rc
, 1, 1);

497 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
WHITE_BRUSH
));

498 
	`DñëeObje˘
(
	`Sñe˘Obje˘
(
hdc
,

499 
	`Cª©ePí
(
PS_SOLID
, 1,
	`GëSysCﬁ‹
(
COLOR_WINDOWFRAME
))));

500 
	`EŒù£
(
hdc
,
rc
.
À·
,rc.
t›
,Ñc.
right
,rc.
bŸtom
);

501 
	`DñëeObje˘
(
	`Sñe˘Obje˘
(
hdc
, 
hOldPí
));

503 
iFa˚Off£t
 = 0;

504 if(
wEnumSèã
 & 
PBS_CHECKED
)

505 
	`EŒù£
(
hdc
, 
rc
.
À·
+2,Ñc.
t›
+2,Ñc.
right
-2,

506 
rc
.
bŸtom
-2);

513 if(
buf
[ 0]) {

514 
hNewF⁄t
 = 
	`GëStockObje˘
–
DEFAULT_GUI_FONT
);

515 
hOldF⁄t
 = 
	`Sñe˘Obje˘
–
hdc
, 
hNewF⁄t
);

518 
ª˘
.
À·
 = 0;

519 
ª˘
.
t›
 = 0;

520 
	`DøwText
–
hdc
, 
buf
, -1, &
ª˘
, 
DT_CALCRECT
 | 
DT_LEFT
 |

521 
DT_SINGLELINE
 | 
DT_TOP
);

522 
ª˘Save
 = 
ª˘
;

527 ()(
dwStyÀ
 & (
BS_LEFT
|
BS_CENTER
|
BS_RIGHT
))) {

528 
BS_CENTER
:

530 
ª˘
.
À·
 = (
uiWidth
 - (ª˘.
right
 -Ñect.left)) / 2

531 + 
iFa˚Off£t
;

533 
BS_LEFT
:

534 
ª˘
.
À·
 = 
uiWidthFøme
 + 
uiWidthShadow
 + 2

535 + 
iFa˚Off£t
;

537 
BS_RIGHT
:

538 
ª˘
.
À·
 = (ª˘.
right
 -Ñe˘.À·Ë+ 
uiWidthFøme


539 + 
uiWidthShadow
 + 4 + 
iFa˚Off£t
;

543 ()(
dwStyÀ
 & 0x0f)) {

544 
BS_CHECKBOX
:

545 
BS_AUTOCHECKBOX
:

546 
BS_AUTORADIOBUTTON
:

547 
BS_RADIOBUTTON
:

548 
ª˘
.
À·
 = 12;

552 
ª˘
.
right
 +ª˘.
À·
 - 
ª˘Save
.left;

554 ()(
dwStyÀ
 & (
BS_TOP
|
BS_VCENTER
|
BS_BOTTOM
))) {

555 
BS_VCENTER
:

557 
ª˘
.
t›
 = (
uiHeight
 - (ª˘.
bŸtom
 -Ñect.top)) / 2

558 + 
iFa˚Off£t
;

560 
BS_TOP
:

561 
ª˘
.
t›
 = 2 + 
uiWidthFøme
 + 
uiWidthShadow


562 + 
iFa˚Off£t
;

564 
BS_BOTTOM
:

565 
ª˘
.
t›
 = 
uiHeight
 - 
uiWidthFøme
 - 
uiWidthShadow
 -

566 (
ª˘
.
bŸtom
 -Ñe˘.
t›
Ë- 1 + 
iFa˚Off£t
;

569 ()(
dwStyÀ
 & 0x0f)) {

570 
BS_CHECKBOX
:

571 
BS_AUTOCHECKBOX
:

572 
BS_AUTORADIOBUTTON
:

573 
BS_RADIOBUTTON
:

574 
ª˘
.
t›
 = 0;

577 
ª˘
.
bŸtom
 +ª˘.
t›
 - 
ª˘Save
.top;

579 
ﬁdBkMode
 = 
	`SëBkMode
–
hdc
, 
TRANSPARENT
);

580 if(
wEnumSèã
 & 
PBS_DISABLED
)

581 
hOldCﬁ‹
 = 
	`SëTextCﬁ‹
–
hdc
,

582 
	`GëSysCﬁ‹
–
COLOR_GRAYTEXT
));

584 
hOldCﬁ‹
 = 
	`SëTextCﬁ‹
–
hdc
,

585 
	`GëSysCﬁ‹
–
COLOR_BTNTEXT
));

587 
	`DøwText
–
hdc
, 
buf
, -1, &
ª˘
,
DT_LEFT
 | 
DT_SINGLELINE
 | 
DT_TOP
);

589 
	`SëBkMode
–
hdc
, 
ﬁdBkMode
);

590 
	`SëTextCﬁ‹
–
hdc
, 
hOldCﬁ‹
);

591 
	`Sñe˘Obje˘
–
hdc
, 
hOldF⁄t
);

595 if–(!(
wEnumSèã
&
PBS_CHECKED
Ë&& (wEnumSèã&
PBS_FOCUSDOWN
)) ||

596 (
wEnumSèã
 & 
PBS_FOCUSUP
)) {

597 
ª˘
 = 
ª˘Clõ¡
;

598 
uiWidth
 = 
uiWidthFøme
 + 
uiWidthShadow
 + 2;

599 
ª˘
.
À·
 +
uiWidth
;

600 
ª˘
.
t›
 +
uiWidth
;

601 
ª˘
.
right
 -
uiWidth
;

602 
ª˘
.
bŸtom
 -
uiWidth
;

603 if((
dwStyÀ
 & (
BS_FLAT
|
BS_NOFOCUSRECT
)) == 0)

604 
	`DøwFocusRe˘
–
hdc
, &
ª˘
);

608 
	`SëTextCﬁ‹
–
hdc
, 
¸Old
);

609 
	`SëBkCﬁ‹
–
hdc
, 
¸BkOld
);

611 
Rëu∫
:

612 
	`EndPaöt
(
hwnd
, &
ps
);

613 
	}
}

615 
WINAPI


616 
	$˚nBuâ⁄_OnSëFocus
(

617 
HWND
 
hwnd
,

618 
HWND
 
hwndOldFocus
)

626 
WORD
 
wSèã
;

628 
wSèã
 = 
	`˚nBuâ⁄_FnSèπ
–
hwnd
);

631 
	`˚nBuâ⁄_FnEnd
–
hwnd
, 
wSèã
);

632 
	}
}

634 
WINAPI


635 
	$˚nBuâ⁄_OnSëStyÀ
(

636 
HWND
 
hwnd
,

637 
WORD
 
°yÀ
,

638 
BOOL
 
bRedøw
)

640 
WORD
 
wSèã
;

642 
wSèã
 = 
	`˚nBuâ⁄_FnSèπ
–
hwnd
);

643 
	`˚nBuâ⁄_SëSèã
–
hwnd
, 
PUSH_DEFAULT
,

644 (
°yÀ
 & 0x0fË=
BS_DEFPUSHBUTTON
);

645 
	`˚nBuâ⁄_FnEnd
–
hwnd
, 
wSèã
);

646 
	}
}

648 
WINAPI


649 
	$˚nBuâ⁄_OnSëSèã
(

650 
HWND
 
hwnd
,

651 
WORD
 
wSèã
)

653 
WORD
 
wSèãOld
;

655 
wSèãOld
 = 
	`˚nBuâ⁄_FnSèπ
–
hwnd
);

656 
	`˚nBuâ⁄_SëSèã
–
hwnd
, 
PUSH_DOWN
, (
wSèã
 ? 
TRUE
 : 
FALSE
 ) );

657 
	`˚nBuâ⁄_FnEnd
–
hwnd
, 
wSèãOld
);

658 
	}
}

660 
WINAPI


661 
	$˚nBuâ⁄_SëSèã
(

662 
HWND
 
hwnd
,

663 
WORD
 
wSèã
,

664 
BOOL
 
bE«bÀ
 )

670 
WORD
 
wNewSèã
;

671 
WORD
 
wOldSèã
;

672 
RECT
 
ª˘Clõ¡
;

674 
wOldSèã
 = 
	`GET_PBSTATE
–
hwnd
);

675 
wNewSèã
 = (
bE«bÀ
 ? (
wOldSèã
 | 
wSèã
) : (wOldState & ~wState));

677 i‡(
wOldSèã
 !
wNewSèã
)

678 { 
	`SET_PBSTATE
–
hwnd
, 
wNewSèã
 );

679 
	`GëClõ¡Re˘
(
hwnd
, &
ª˘Clõ¡
);

680 
	`InvÆid©eRe˘
(
hwnd
, &
ª˘Clõ¡
, 
FALSE
);

682 
	}
}

685 
WINAPI


686 
	$˚nBuâ⁄_OnSëF⁄t
(

687 
HWND
 
hwnd
,

688 
HFONT
 
hF⁄t
,

689 
BOOL
 
bRedøw
)

691 
BOOL
 
bDñëeF⁄t
 = 
FALSE
;

692 
HFONT
 
hF⁄tNew
 = 0;

693 
LOGFONT
 
logF⁄t
;

696 if–
	`GëObje˘
–
hF⁄t
, –
logF⁄t
), &logFont) != 0) {

697 if–
logF⁄t
.
lfWeight
 !
FW_NORMAL
) {

698 
logF⁄t
.
lfWeight
 = 
FW_NORMAL
;

699 if––
hF⁄tNew
 = 
	`Cª©eF⁄tIndúe˘
–&
logF⁄t
)) != 0) {

700 
hF⁄t
 = 
hF⁄tNew
;

701 
bDñëeF⁄t
 = 
TRUE
;

706 if–
	`GET_PBDELETEFONT
–
hwnd
))

707 
	`DñëeObje˘
–
	`GET_PBFONT
–
hwnd
));

709 
	`SET_PBDELETEFONT
–
hwnd
, 
bDñëeF⁄t
);

710 
	`SET_PBFONT
–
hwnd
, 
hF⁄t
);

712 
	`FORWARD_WM_SETFONT
–
hwnd
, 
hF⁄t
, 
bRedøw
, 
DefWödowProc
);

713 
	}
}

716 
WINAPI


717 
	$˚nBuâ⁄_OnSëText
(

718 
HWND
 
hwnd
,

719 
LPCSTR
 
ÕszText
)

729 
	`FORWARD_WM_SETTEXT
–
hwnd
, 
ÕszText
, 
DefWödowProc
);

730 
	`InvÆid©eRe˘
–
hwnd
, 
NULL
, 
FALSE
);

731 
	`Upd©eWödow
–
hwnd
);

732 
	}
}

734 
LRESULT
 
CALLBACK


735 
	$˚nBuâ⁄WndFn
(

736 
HWND
 
hwnd
,

737 
UINT
 
mesßge
,

738 
WPARAM
 
wP¨am
,

739 
LPARAM
 
lP¨am
)

745  
mesßge
) {

746 
	`HANDLE_MSG
–
hwnd
, 
WM_CREATE
, 
˚nBuâ⁄_OnCª©e
);

748 
	`HANDLE_MSG
–
hwnd
, 
WM_SETFOCUS
, 
˚nBuâ⁄_OnSëFocus
);

749 
	`HANDLE_MSG
–
hwnd
, 
WM_KILLFOCUS
, 
˚nBuâ⁄_OnKûlFocus
);

750 
	`HANDLE_MSG
–
hwnd
, 
WM_LBUTTONDOWN
, 
˚nBuâ⁄_OnLBuâ⁄Down
);

751 
	`HANDLE_MSG
–
hwnd
, 
WM_LBUTTONDBLCLK
, 
˚nBuâ⁄_OnLBuâ⁄Down
);

752 
	`HANDLE_MSG
–
hwnd
, 
WM_LBUTTONUP
, 
˚nBuâ⁄_OnLBuâ⁄Up
);

753 
	`HANDLE_MSG
–
hwnd
, 
WM_MOUSEMOVE
, 
˚nBuâ⁄_OnMou£Move
);

756 
	`HANDLE_MSG
–
hwnd
, 
WM_ERASEBKGND
, 
˚nBuâ⁄_OnEø£Bkgnd
);

757 
	`HANDLE_MSG
–
hwnd
, 
WM_PAINT_SPECIAL
, 
˚nBuâ⁄_OnPaöt
);

759 
	`HANDLE_MSG
–
hwnd
, 
BM_SETSTYLE
, 
˚nBuâ⁄_OnSëStyÀ
);

760 
	`HANDLE_MSG
–
hwnd
, 
BM_GETSTATE
, 
˚nBuâ⁄_OnGëSèã
);

761 
	`HANDLE_MSG
–
hwnd
, 
BM_SETSTATE
, 
˚nBuâ⁄_OnSëSèã
);

764 
	`HANDLE_MSG
–
hwnd
, 
WM_SETTEXT
, 
˚nBuâ⁄_OnSëText
);

766 
BM_GETCHECK
:

768  
	`˚nBuâ⁄_OnGëSèã
(
hwnd
);

770 ––
	`GET_PBSTATE
(
hwnd
Ë& 
PUSH_CHECKED
) == PUSH_CHECKED);

773 
BM_SETCHECK
:

775 
	`˚nBuâ⁄_OnSëSèã
(
hwnd
, (
WORD
)
wP¨am
);

778 
WORD
 
wSèãOld
;

780 
wSèãOld
 = 
	`˚nBuâ⁄_FnSèπ
–
hwnd
);

781 
	`˚nBuâ⁄_SëSèã
–
hwnd
, 
PUSH_CHECKED
,

782 ((
WORD
)
wP¨am
 ? 
TRUE
 : 
FALSE
) );

783 
	`˚nBuâ⁄_FnEnd
–
hwnd
, 
wSèãOld
);

787 
BM_SETIMAGE
:

788 
hwnd
->
u£rd©a
 = (
DWORD
)
wP¨am
;

789 
	`InvÆid©eRe˘
(
hwnd
, 
NULL
, 
FALSE
);

792 
WM_NCMOUSEMOVE
:

793 i‡(
	`SídMesßge
(
hwnd
,
WM_NCHITTEST
,0,
lP¨am
Ë!
HTCLIENT
){

794 
	`˚nBuâ⁄_OnMou£Move
(
hwnd
,
	`LOWORD
 (
lP¨am
),
	`HIWORD
 (lParam),0);

799  
	`DefWödowProc
–
hwnd
, 
mesßge
, 
wP¨am
, 
lP¨am
);

800 
	}
}

803 
WINAPI


804 
	$MwBuâ⁄Regi°î
(
HINSTANCE
 
hIn°™˚
)

806  
	`MwRegi°îBuâ⁄C⁄åﬁ
(
hIn°™˚
);

807 
	}
}

809 
WINAPI


810 
	$MwRegi°îBuâ⁄C⁄åﬁ
(
HINSTANCE
 
hIn°™˚
)

812 
WNDCLASS
 
wc
;

814 
wc
.
°yÀ
 = 
CS_HREDRAW
 | 
CS_VREDRAW
 | 
CS_DBLCLKS
 | 
CS_GLOBALCLASS
;

815 
wc
.
Õ‚WndProc
 = (
WNDPROC
)
˚nBuâ⁄WndFn
;

816 
wc
.
cbClsExåa
 = 0;

817 
wc
.
cbWndExåa
 = 10;

818 
wc
.
hIn°™˚
 = hInstance;

819 
wc
.
hIc⁄
 = 
NULL
;

820 
wc
.
hCurs‹
 = 0;

821 
wc
.
hbrBackground

	`GëStockObje˘
(
LTGRAY_BRUSH
);

822 
wc
.
ÕszMíuName
 = 
NULL
;

823 
wc
.
ÕszCœssName
= "BUTTON";

825  
	`Regi°îCœss
(&
wc
);

826 
	}
}

828 
WINAPI


829 
	$DøwGroupBox
(
HWND
 
hwnd
,
HDC
 
hDCwP¨am
,
DWORD
 
dwStyÀ
)

831 
HDC
 
hdc
;

832 
HFONT
 
hF⁄t
;

833 
RECT
 
rcClõ¡
;

834 
RECT
 
rcText
;

835 
RECT
 
rc
;

836 
PAINTSTRUCT
 
ps
;

837 
buf
[256];

838 
HPEN
 
hPíT›
, 
hPíBŸtom
, 
hﬁdPí
;

839 
COLORREF
 
¸T›
,
¸BŸtom
;

842 
hdc
 = 
	`BegöPaöt
(
hwnd
, &
ps
);

843 if(!
hdc
)

844 
Rëu∫
;

846 
	`GëWödowText
(
hwnd
, 
buf
, (buf));

847 
	`GëClõ¡Re˘
–
hwnd
, &
rcClõ¡
 );

849 
hF⁄t
 = 
	`GëStockObje˘
–
DEFAULT_GUI_FONT
);

850 i‡(
hF⁄t
)

851 
hF⁄t
 = 
	`Sñe˘Obje˘
(
hdc
,hFont);

853 
rc
.
À·
 = 0;

854 
rc
.
t›
 = 0;

855 
	`DøwText
–
hdc
, 
buf
, -1, &
rc
, 
DT_CALCRECT
);

857 if(
buf
[ 0]) {

858 
	`SëTextCﬁ‹
(
hdc
,
	`GëSysCﬁ‹
(
COLOR_WINDOWTEXT
));

859 
	`SëBkMode
(
hdc
,
TRANSPARENT
);

860 
	`SëRe˘
(&
rcText
,8,2,
rc
.
right
+8,rc.
bŸtom
+2);

861 
	`DøwText
(
hdc
,
buf
,-1,&
rcText
,
DT_CENTER
);

864 
¸T›
=
	`GëSysCﬁ‹
(
COLOR_BTNHIGHLIGHT
);

865 
¸BŸtom
=
	`GëSysCﬁ‹
(
COLOR_BTNSHADOW
);

867 
hPíT›
 = 
	`Cª©ePí
–
PS_SOLID
, 1, 
¸T›
);

868 
hPíBŸtom
 = 
	`Cª©ePí
–
PS_SOLID
, 1, 
¸BŸtom
);

869 
hﬁdPí
 = 
	`Sñe˘Obje˘
–
hdc
, 
hPíT›
);

871 
	`MoveToEx
(
hdc
,0,
rc
.
bŸtom
/2,
NULL
);

873 if(
buf
[ 0]) {

874 
	`LöeTo
(
hdc
,5,
rc
.
bŸtom
/2);

875 
	`MoveToEx
(
hdc
,
rc
.
right
+11,rc.
bŸtom
/2,
NULL
);

876 
	`LöeTo
(
hdc
,
rcClõ¡
.
right
-1,
rc
.
bŸtom
/2);

879 
	`LöeTo
(
hdc
,
rcClõ¡
.
right
-1,
rc
.
bŸtom
/2);

881 
	`LöeTo
(
hdc
,
rcClõ¡
.
right
-1,rcClõ¡.
bŸtom
-1);

883 
	`Sñe˘Obje˘
–
hdc
, 
hPíBŸtom
);

884 
	`LöeTo
(
hdc
,
rcClõ¡
.
À·
,rcClõ¡.
bŸtom
-1);

885 
	`LöeTo
(
hdc
,
rcClõ¡
.
À·
,
rc
.
bŸtom
/2);

887 
	`Sñe˘Obje˘
–
hdc
, 
hﬁdPí
);

888 
	`DñëeObje˘
–
hPíT›
);

889 
	`DñëeObje˘
–
hPíBŸtom
);

891 i‡(
hF⁄t
)

892 
	`Sñe˘Obje˘
(
hdc
,
hF⁄t
);

894 
Rëu∫
:

895 
	`EndPaöt
(
hwnd
, &
ps
);

896 
	}
}

899 
WINAPI


900 
	$CheckRadioBuâ⁄
(
HWND
 
hDlg
, 
nIDFú°
,
nIDLa°
,
nIDCheckBuâ⁄
)

902 
HWND
 
hWndCheck
,
hWndTemp
;

903 
DWORD
 
dwStyÀ
;

905 i‡(!(
hWndCheck
 = 
	`GëDlgIãm
(
hDlg
,
nIDCheckBuâ⁄
)))

908 
hWndTemp
=
hDlg
->
chûdªn
; hWndTemp; hWndTemp=hWndTemp->
siblögs
) {

909 if(
hWndCheck
 =
hWndTemp
) ;

910 
dwStyÀ
 = 
	`GëWödowL⁄g
(
hWndTemp
,
GWL_STYLE
);

911 i‡((
hWndTemp
->
id
 >(
WORD
)
nIDFú°
) &&

912 (
hWndTemp
->
id
 <(
WORD
)
nIDLa°
) &&

913 ((
	`LOWORD
(
dwStyÀ
Ë=
BS_RADIOBUTTON
) ||

914 (
	`LOWORD
(
dwStyÀ
Ë=
BS_AUTORADIOBUTTON
)))

915 
	`SídMesßge
(
hWndTemp
,
BM_SETCHECK
,
FALSE
,0);

917 
	`SídMesßge
(
hWndCheck
,
BM_SETCHECK
,
TRUE
,0);

918 
	}
}

	@mwin/winlib/caret.c

8 
	~<°dio.h
>

9 
	~<°dlib.h
>

10 
	~<sys/time.h
>

11 #i‚de‡
__ECOS


12 
	~<mÆloc.h
>

14 
	~"wödows.h
"

15 
	~"devi˚.h
"

17 
	#DEF_BLINK_TIME
 500

	)

20 
HWND
 
	mhwnd
;

21 
	mx
;

22 
	my
;

23 
	mnWidth
;

24 
	mnHeight
;

25 
BOOL
 
	mfShown
;

26 
	mnShowCou¡
;

27 
UINT
 
	mnBlökTime
;

28 } 
	tCARETINFO
;

31 
CARETINFO
 
	gsysC¨ë
;

34 
MwShowC¨ë
();

35 
MwHideC¨ë
();

36 
MwUpd©eC¨ë
();

38 
BOOL
 
WINAPI


39 
	$Cª©eC¨ë
(
HWND
 
hwnd
, 
HBITMAP
 
hBôm≠
, 
nWidth
, 
nHeight
)

42 
	`De°royC¨ë
();

44 i‡(
nWidth
 <= 0)

45 
nWidth
 = 1;

46 i‡(
nHeight
 <= 0)

47 
nHeight
 = 1;

49 
sysC¨ë
.
hwnd
 = hwnd;

50 
sysC¨ë
.
x
 = 0;

51 
sysC¨ë
.
y
 = 0;

52 
sysC¨ë
.
nWidth
 =ÇWidth;

53 
sysC¨ë
.
nHeight
 =ÇHeight;

54 
sysC¨ë
.
fShown
 = 
FALSE
;

55 
sysC¨ë
.
nShowCou¡
 = 0;

56 
sysC¨ë
.
nBlökTime
 = 
DEF_BLINK_TIME
;

57  
TRUE
;

58 
	}
}

60 
BOOL
 
WINAPI


61 
	$De°royC¨ë
(
VOID
)

63 i‡(
sysC¨ë
.
fShown
)

64 
	`MwHideC¨ë
();

65 
sysC¨ë
.
hwnd
 = 
NULL
;

66 
sysC¨ë
.
fShown
 = 
FALSE
;

67  
TRUE
;

68 
	}
}

70 
BOOL
 
WINAPI


71 
	$HideC¨ë
(
HWND
 
hwnd
)

73 i‡(
hwnd
 =
NULL
)

74 
hwnd
 = 
sysC¨ë
.hwnd;

75 i‡(
hwnd
 =
NULL
 || hwnd !
sysC¨ë
.hwnd)

76  
FALSE
;

79 i‡(--
sysC¨ë
.
nShowCou¡
 == 0) {

80 
	`MwHideC¨ë
();

81  
TRUE
;

83  
FALSE
;

84 
	}
}

86 
BOOL
 
WINAPI


87 
	$ShowC¨ë
(
HWND
 
hwnd
)

89 i‡(
hwnd
 =
NULL
)

90 
hwnd
 = 
sysC¨ë
.hwnd;

91 i‡(
hwnd
 =
NULL
 || hwnd !
sysC¨ë
.hwnd || sysC¨ë.
nShowCou¡
 < 0)

92  
FALSE
;

94 i‡(++
sysC¨ë
.
nShowCou¡
 > 1)

95  
TRUE
;

98 
	`MwShowC¨ë
();

99  
TRUE
;

100 
	}
}

102 
BOOL
 
WINAPI


103 
	$SëC¨ëPos
(
nX
, 
nY
)

105 i‡(
sysC¨ë
.
fShown
 && (sysC¨ë.
x
 !
nX
 || sysC¨ë.
y
 !
nY
)) {

106 
	`MwUpd©eC¨ë
();

107 
sysC¨ë
.
x
 = 
nX
;

108 
sysC¨ë
.
y
 = 
nY
;

109 
	`MwUpd©eC¨ë
();

110  
TRUE
;

112 
sysC¨ë
.
x
 = 
nX
;

113 
sysC¨ë
.
y
 = 
nY
;

114  
TRUE
;

115 
	}
}

117 
BOOL
 
WINAPI


118 
	$GëC¨ëPos
(
LPPOINT
 
ÕPoöt
)

120 
ÕPoöt
->
x
 = 
sysC¨ë
.x;

121 
ÕPoöt
->
y
 = 
sysC¨ë
.y;

122  
TRUE
;

123 
	}
}

125 
UINT
 
WINAPI


126 
	$GëC¨ëBlökTime
(
VOID
)

128  
sysC¨ë
.
nBlökTime
;

129 
	}
}

131 
BOOL
 
WINAPI


132 
	$SëC¨ëBlökTime
(
UINT
 
uMSec⁄ds
)

134 
sysC¨ë
.
nBlökTime
 = 
uMSec⁄ds
;

136  
TRUE
;

137 
	}
}

140 
	$MwShowC¨ë
()

142 i‡(
sysC¨ë
.
fShown
)

144 
	`MwUpd©eC¨ë
();

145 
sysC¨ë
.
fShown
 = 
TRUE
;

146 
	}
}

149 
	$MwHideC¨ë
()

151 i‡(!
sysC¨ë
.
fShown
)

153 
	`MwUpd©eC¨ë
();

154 
sysC¨ë
.
fShown
 = 
FALSE
;

155 
	}
}

159 
	$MwUpd©eC¨ë
()

161 
ﬁdmode
;

162 
HDC
 
hdc
;

163 
HPEN
 
h≥n
;

164 
HBRUSH
 
hbr
;

166 
ﬁdmode
 = 
	`GdSëMode
(
MWMODE_XOR
);

167 
hdc
 = 
	`GëDC
(
sysC¨ë
.
hwnd
);

168 
h≥n
 = 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
WHITE_PEN
));

171 i‡(
sysC¨ë
.
nWidth
 == 1) {

172 
	`MoveToEx
(
hdc
, 
sysC¨ë
.
x
, sysC¨ë.
y
, 
NULL
);

173 
	`LöeTo
(
hdc
, 
sysC¨ë
.
x
, sysC¨ë.
y
+sysC¨ë.
nHeight
);

175 
hbr
 = 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
WHITE_BRUSH
));

176 
	`Re˘™gÀ
(
hdc
, 
sysC¨ë
.
x
, sysC¨ë.
y
,

177 
sysC¨ë
.
x
+sysC¨ë.
nWidth
,

178 
sysC¨ë
.
y
+sysC¨ë.
nHeight
);

179 
	`Sñe˘Obje˘
(
hdc
, 
hbr
);

181 
	`Sñe˘Obje˘
(
hdc
, 
h≥n
);

182 
	`Rñó£DC
(
sysC¨ë
.
hwnd
, 
hdc
);

183 
	`GdSëMode
(
ﬁdmode
);

184 
	}
}

	@mwin/winlib/combobox.c

34 
	~<°dio.h
>

35 
	~<°dlib.h
>

36 
	~<°rög.h
>

37 
	~"wödows.h
"

38 
	~"wödowsx.h
"

39 
	~"mwsy°em.h
"

42 #ifde‡
PSP


43 
	#Ârötf
(...Ëdÿ{} 0)

	)

47 
	#WöMÆloc
(
n
Ë
	`mÆloc
(“))

	)

48 
	#WöFªe
(
p
Ë
	`‰ì
’)

	)

50 
	#GET_WM_COMMAND_ID
(
wp
, 
Õ
Ë
	`LOWORD
(wp)

	)

51 
	#GET_WM_COMMAND_HWND
(
wp
, 
Õ
Ë(
HWND
)÷p)

	)

52 
	#GET_WM_COMMAND_CMD
(
wp
, 
Õ
Ë
	`HIWORD
(wp)

	)

53 
	#GET_WM_COMMAND_MPS
(
id
, 
hwnd
, 
cmd
) \

54 (
WPARAM
)
	`MAKELONG
(
id
, 
cmd
), (
LONG
)(
hwnd
)

	)

55 
	#LOSHORT
(
x
Ë()
	`LOWORD
(x)

	)

56 
	#Edô_SëSñ
(
hwndCé
, 
ichSèπ
, 
ichEnd
Ë(()
	`SídMesßge
((hwndCé), 
EM_SETSEL
, (ichSèπ), (ichEnd)))

	)

60 
HFONT
 
	mhF⁄t
;

61 
HWND
 
	mhWndP¨ít
;

62 
UINT
 
	mnID
;

63 
WORD
 
	mwSèãFœgs
;

64 
UINT
 
	mwStyÀ
;

65 
BOOL
 
	mbExãnded
;

66 
BOOL
 
	mbRedøw
;

67 
HWND
 
	mEdôC⁄åﬁ
;

68 
HWND
 
	mLi°BoxC⁄åﬁ
;

69 
RECT
 
	mBuâ⁄Re˘
;

70 
RECT
 
	mLi°BoxRe˘
;

71 
UINT
 
	muHeight
;

72 
WNDPROC
 
	mÕ‚OldSètic
;

73 
UINT
 
	mnLi°Iãms
;

74 } 
	tCOMBOBOX
;

76 
	#CWD_LPCBDATA
 0

	)

77 
	#CBC_EDITID
 1

	)

79 
	#CSF_CAPTUREACTIVE
 0x0001

	)

80 
	#CSF_LOCALBUTTONDOWN
 0x0002

	)

81 
	#CSF_BUTTONDOWN
 0x0004

	)

82 
	#CSF_LBOXBUTTONDOWN
 0x0008

	)

83 
	#CSF_FOCUS
 0x0010

	)

84 
	#CSF_HASDROPPED
 0x0020

	)

86 
	#SET_STATE
(
Õ
, 
wMask
Ë÷p->
wSèãFœgs
 |(wMask))

	)

87 
	#CLEAR_STATE
(
Õ
, 
wMask
Ë÷p->
wSèãFœgs
 &~(wMask))

	)

88 
	#IS_SET
(
Õ
, 
wMask
Ë÷p->
wSèãFœgs
 & (wMask))

	)

90 
	#BOWNERDRAW
(
l
Ë(÷)->
wStyÀ
 & (
CBS_OWNERDRAWFIXED
|
CBS_OWNERDRAWVARIABLE
))

	)

123 
	$Døw3DBuâ⁄Re˘
(
HDC
 
hDC
, 
HPEN
 
hPíHigh
, HPEN 
hPíShadow
,

124 
RECT
 
rc
, 
BOOL
 
fClicked
)

126 
HPEN
 
hPíOld
;

127 
POINT
 
Õt
[6];

129 
POINT
 
p3
[3];

130 
shrök
=1;

132 
hPíOld
 = 
	`Sñe˘Obje˘
(
hDC
, 
hPíShadow
);

133 i‡(
fClicked
) {

134 
Õt
[0].
x
 =Ü±[1].x = 
rc
.
À·
;

135 
Õt
[1].
y
 =Ü±[2].y = 
rc
.
t›
;

136 
Õt
[2].
x
 = 
rc
.
right
-1;

137 
Õt
[0].
y
 = 
rc
.
bŸtom
-1;

138 
	`Pﬁylöe
(
hDC
,
Õt
,3);

141 
Õt
[0].
x
 =Ü±[1].x = 
rc
.
right
-1;

142 
Õt
[0].
y
 = 
rc
.
t›
;

143 
Õt
[1].
y
 =Ü±[2].y = 
rc
.
bŸtom
-1;

144 
Õt
[2].
x
 = 
rc
.
À·
;

145 
Õt
[3].
x
 = 
rc
.
À·
+1;

146 
Õt
[3].
y
 =Ü±[4].y = 
rc
.
bŸtom
-2;

147 
Õt
[4].
x
 =Ü±[5].x = 
rc
.
right
-2;

148 
Õt
[5].
y
 = 
rc
.
t›
+1;

149 
	`Pﬁylöe
(
hDC
,
Õt
,6);

151 
	`Sñe˘Obje˘
(
hDC
, 
hPíHigh
);

152 
Õt
[0].
x
 = 
rc
.
right
-1;

153 
Õt
[0].
y
 =Ü±[1].y = 
rc
.
t›
;

154 
Õt
[1].
x
 =Ü±[2].x = 
rc
.
À·
;

155 
Õt
[2].
y
 = 
rc
.
bŸtom
-1;

156 
Õt
[3].
x
 =Ü±[4].x = 
rc
.
À·
+1;

157 
Õt
[3].
y
 = 
rc
.
bŸtom
-2;

158 
Õt
[4].
y
 =Ü±[5].y = 
rc
.
t›
+1;

159 
Õt
[5].
x
 = 
rc
.
right
-2;

160 
	`Pﬁylöe
(
hDC
,
Õt
,6);

163 
	`Sñe˘Obje˘
(
hDC
,
	`GëStockObje˘
(
BLACK_BRUSH
));

165 
p3
[0].
x

rc
.
À·
 + (‘c.
right
-rc.left)/2) - 1;

166 
p3
[0].
y

rc
.
bŸtom
 - 4 - 
shrök
;

167 
p3
[1].
x

rc
.
À·
 + 2 + 
shrök
 - 1;

168 
p3
[1].
y

rc
.
bŸtom
-‘c.bŸtom-rc.
t›
Ë+ 2 + 
shrök
;

169 
p3
[2].
x

rc
.
À·
 + (‘c.
right
-rc.À·)-4Ë- 
shrök
;

170 
p3
[2].
y

rc
.
bŸtom
-‘c.bŸtom-rc.
t›
Ë+ 2 + 
shrök
;

171 
	`Pﬁyg⁄
(
hDC
,
p3
,3);

173 
	`Sñe˘Obje˘
(
hDC
,
hPíOld
);

174 
	}
}

178 
LRESULT
 
DefLISTBOXProc
(
HWND
, 
UINT
, 
WPARAM
, 
LPARAM
);

179 
LRESULT
 
Li°boxCålProc
(
HWND
, 
UINT
, 
WPARAM
, 
LPARAM
);

183 
HPEN
 
	$GëSysCﬁ‹Pí
(
cﬁ‹
)

185  
NULL
;

186 
	}
}

187 
HBRUSH
 
	$GëSysCﬁ‹Brush
(
cﬁ‹
)

189  
NULL
;

190 
	}
}

193 
HWND
 
	tHWND32
;

196 
HANDLE
 
	tHCLASS32
;

197 
HCLASS32
 
	$FödCœss
(
LPCSTR
 
°r
, 
HINSTANCE
 
hIn°™˚
)

199  
NULL
;

200 
	}
}

204 
HWND
 
	$TWIN_C⁄vîtToSysS¸ﬁl
(
HWND
 
hwnd
, 
BOOL
 
°©us
, 
LPPOINT
 
µ
)

206  
NULL
;

207 
	}
}

209 
HWND
 
li°wp
;

210 
HWND
 
	$WödowFromPoöt
(
POINT
 
±
)

212 
HWND
 
wp
,
wp1
;

213 
dx
,
dy
,
dx1
,
dy1
;

215  
NULL
;

217 
wp1
=
NULL
;

218 (
dx
))

221 
dx
=0x7fffffff;

222 
dy
=0x7fffffff;

225 
dx
=0x7fff;

226 
dy
=0x7fff;

229 
wp
=
li°wp
; wp; wp=wp->
√xt
)

231 i‡(
wp
->
wöª˘
.
À·
 <
±
.
x
 &&Öt.x <wp->wöª˘.
right
)

233 
dx1
=(
wp
->
wöª˘
.
right
-
±
.
x
);

234 i‡(
dx1
<
dx
)

236 
wp1
=
wp
;

237 
dx
=
dx1
;

239 
dx1
=(
±
.
x
-
wp
->
wöª˘
.
À·
);

240 i‡(
dx1
<
dx
)

242 
wp1
=
wp
;

243 
dx
=
dx1
;

246 i‡(
wp
->
wöª˘
.
t›
 <
±
.
y
 &&Öt.y <wp->wöª˘.
bŸtom
)

248 
dy1
=(
wp
->
wöª˘
.
bŸtom
-
±
.
y
);

249 i‡(
dy1
<
dy
)

251 
wp1
=
wp
;

252 
dy
=
dy1
;

254 
dy1
=(
±
.
y
-
wp
->
wöª˘
.
t›
);

255 i‡(
dy1
<
dy
)

257 
wp1
=
wp
;

258 
dy
=
dy1
;

263  
wp1
;

264 
	}
}

267 
CBoxDøwBuâ⁄
(
HWND
,
UINT
,
COMBOBOX
 *);

268 
CBoxSídMou£ToLBox
(
COMBOBOX
 *, 
UINT
, 
WPARAM
, 
POINT
);

269 
CBoxC≠tuª
(
HWND
, 
WORD
);

270 
CBoxDøwEdô
(
COMBOBOX
 *, 
HWND
, 
UINT
);

271 
CBoxDøwSètic
(
COMBOBOX
 *, 
HWND
, 
UINT
);

274 
LRESULT
 
DefCBProc
(
HWND
 , 
UINT
 , 
WPARAM
 , 
LPARAM
 );

277 
WNDPROC
 
	gÕComboBöToN©
 = 0;

280 
LRESULT
 
CALLBACK


281 
DefComboboxProc
(
HWND
 
hWnd
, 
UINT
 
uMsg
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
);

283 
WINAPI
 
	$MwRegi°îComboboxC⁄åﬁ
(
HINSTANCE
 
hIn°™˚
)

285 
WNDCLASS
 
wc
;

287 
wc
.
°yÀ
 = 
CS_HREDRAW
 | 
CS_VREDRAW
 | 
CS_DBLCLKS
 | 
CS_GLOBALCLASS
;

288 
wc
.
Õ‚WndProc
 = (
WNDPROC
)
DefComboboxProc
;

289 
wc
.
cbClsExåa
 = 0;

290 
wc
.
cbWndExåa
 = 0;

291 
wc
.
hIn°™˚
 = hInstance;

292 
wc
.
hIc⁄
 = 
NULL
;

293 
wc
.
hCurs‹
 = 0;

294 
wc
.
hbrBackground

	`GëStockObje˘
(
WHITE_BRUSH
);

295 
wc
.
ÕszMíuName
 = 
NULL
;

296 
wc
.
ÕszCœssName
= "COMBOBOX";

298  
	`Regi°îCœss
(&
wc
);

299 
	}
}

301 
LRESULT
 
CALLBACK


302 
	$DefComboboxProc
(
HWND
 
hWnd
, 
UINT
 
uMsg
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
)

304 
PAINTSTRUCT
 
ps
;

305 
HDC
 
hDC
;

306 
TEXTMETRIC
 
tm
;

308 
MEASUREITEMSTRUCT
 
mis
;

310 
COMBOBOX
 *
Õ
 = (COMBOBOX *)
NULL
;

311 
LRESULT
 
rc
;

312 
HINSTANCE
 
hIn°
;

313 
POINT
 
˝
,
˝S¸ìn
,
µ
;

314 
UINT
 
uiKey
;

315 
LPCREATESTRUCT
 
Õcs
;

317 
LPWINDOWPOS
 
Õwp
;

320 
HCLASS32
 
hComboCœss32
;

321 
LPMEASUREITEMSTRUCT
 
Õmis
;

322 
LPDRAWITEMSTRUCT
 
Õdis
;

323 
LPDELETEITEMSTRUCT
 
Õdlis
;

325 
DWORD
 
dwStyÀ
,
dwExStyÀ
;

326 
WORD
 
wEdôWidth
 = 0,
wEdôHeight
;

327 
WORD
 
wCBN
;

329 
RECT
 
rcClõ¡
;

332 
rc
 = 
CB_OKAY
;

333 i‡((
uMsg
 !
WM_CREATE
 ) &&

334 !(
Õ
 = (
COMBOBOX
 *)
hWnd
->
u£rd©a
 ))

335  
rc
;

337 
uMsg
) {

339 
WM_SIZE
:

340 
WM_ENABLE
:

341 
WM_LBUTTONDBLCLK
:

342 
WM_COMPAREITEM
:

343 
WM_CUT
:

344 
WM_CLEAR
:

347 
WM_SETFOCUS
:

348 
	`SET_STATE
(
Õ
, 
CSF_FOCUS
);

349 i‡((
Õ
->
wStyÀ
 & 0x0FË=
CBS_DROPDOWNLIST
)

351 
uiKey
 = (
UINT
)
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETCURSEL
, 0, 0L);

352 
	`CBoxDøwSètic
(
Õ
, 
hWnd
, 
uiKey
);

354 i‡(
Õ
->
EdôC⁄åﬁ
)

356 
	`SëFocus
(
Õ
->
EdôC⁄åﬁ
);

360 
WM_KILLFOCUS
:

361 
	`CLEAR_STATE
(
Õ
, 
CSF_FOCUS
);

362 i‡((
Õ
->
wStyÀ
 & 0x0FË=
CBS_DROPDOWNLIST
)

364 
uiKey
 = (
UINT
)
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETCURSEL
, 0, 0L);

365 
	`CBoxDøwSètic
(
Õ
, 
hWnd
, 
uiKey
);

372 i‡((
Õ
->
wStyÀ
 & 0x0FË!
CBS_SIMPLE
 && 
wP¨am
 !(
WPARAM
Óp->
Li°BoxC⁄åﬁ
 && wParam != 0)

373 
	`SídMesßge
(
hWnd
, 
CB_SHOWDROPDOWN
, 0, 0L);

374 
	`Ârötf
(
°dîr
," 385: WM_KILLFOCUS\n");

378 
WM_KEYDOWN
:

386 
nCur
 = 
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETCURSEL
,0, 0L);

387 
nPªvCur
 = 
nCur
;

388 
nCou¡
 = 
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETCOUNT
, 0, 0L);

390 i‡(
nCou¡
 == 0)

393 
wP¨am
)

395 
VK_HOME
:

396 
nCur
 = 0;

399 
VK_END
:

400 
nCur
 = 
nCou¡
 - 1;

403 
VK_UP
:

404 
nCur
--;

407 
VK_DOWN
:

408 
nCur
++;

415 i‡(
nCur
 >
nCou¡
)

416 
nCur
 = 
nCou¡
 - 1;

417 i‡(
nCur
 < 0)

418 
nCur
 = 0;

420 
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_SETCURSEL
, 
nCur
, 0L);

421 
	`SídMesßge
(
Õ
->
hWndP¨ít
, 
WM_COMMAND
, 
	`GET_WM_COMMAND_MPS
÷p->
nID
, 
hWnd
, 
CBN_SELCHANGE
));

422 i‡(
nCur
 !
nPªvCur
)

423  
	`SídMesßge
(
Õ
->
hWndP¨ít
, 
WM_COMMAND
, 
	`GET_WM_COMMAND_MPS
÷p->
nID
, 
hWnd
, 
CBN_SELENDOK
));

424 
	`InvÆid©eRe˘
(
hWnd
, 
NULL
, 1);

429 
WM_CHAR
:

431 
nNewCur
;

432 
nOldCur
;

434 i‡(
Õ
->
EdôC⁄åﬁ
)

436 
	`SídMesßge
(
Õ
->
EdôC⁄åﬁ
, 
uMsg
, 
wP¨am
, 
lP¨am
);

439 
nOldCur
 = 
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETCURSEL
,0, 0L);

440 
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
uMsg
, 
wP¨am
, 
lP¨am
);

441 
nNewCur
 = 
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETCURSEL
, 0, 0L);

442 i‡(
nNewCur
 !
nOldCur
)

444 
	`SídMesßge
(
Õ
->
hWndP¨ít
, 
WM_COMMAND
, 
	`GET_WM_COMMAND_MPS
÷p->
nID
, 
hWnd
, 
CBN_SELCHANGE
));

445 
	`InvÆid©eRe˘
(
hWnd
, 
NULL
, 1);

452 
WM_SETREDRAW
:

453 
Õ
->
bRedøw
 = 
wP¨am
;

454 i‡(
Õ
->
EdôC⁄åﬁ
)

455 
	`SídMesßge
(
Õ
->
EdôC⁄åﬁ
, 
WM_SETREDRAW
, 
wP¨am
, 
lP¨am
);

456 i‡(
Õ
->
Li°BoxC⁄åﬁ
)

457 
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
WM_SETREDRAW
, 
wP¨am
, 
lP¨am
);

460 
WM_CREATE
:

461 
Õ
 = (
COMBOBOX
 *)
	`WöMÆloc
((COMBOBOX));

462 
	`mem£t
((
LPSTR
)
Õ
,'\0',(
COMBOBOX
));

465 
hWnd
->
u£rd©a
=(
DWORD
)
Õ
;

468 
hIn°
 = 
NULL
;

471 
Õcs
 = (
LPCREATESTRUCT
)
lP¨am
;

472 
Õ
->
bRedøw
 = 1;

473 
Õ
->
wSèãFœgs
 = 0;

474 
Õ
->
wStyÀ
 = (
UINT
)
	`LOWORD
(
Õcs
->
°yÀ
);

475 i‡(!
	`BOWNERDRAW
(
Õ
))

476 
Õ
->
wStyÀ
 |
CBS_HASSTRINGS
;

477 
Õ
->
bExãnded
 = 
TRUE
;

478 
Õ
->
hF⁄t
 = 0;

479 
Õ
->
hWndP¨ít
 = 
Õcs
->
hwndP¨ít
;

480 
Õ
->
nID
 = (
UINT
)
Õcs
->
hMíu
;

486 
mis
.
CéTy≥
 = 
ODT_COMBOBOX
;

487 
mis
.
CéID
 = (
UINT
)
Õcs
->
hMíu
;

488 
mis
.
ôemID
 = (
UINT
)-1;

489 
mis
.
ôemD©a
 = 0L;

490 
	`SídMesßge
(
Õcs
->
hwndP¨ít
, 
WM_MEASUREITEM
, (
WPARAM
Ópcs->
hMíu
, (
LPARAM
)&
mis
);

496 
hDC
 = 
	`GëDC
((
HWND
)0);

497 
	`GëTextMërics
(
hDC
,&
tm
);

498 
	`Rñó£DC
((
HWND
)0,
hDC
);

503 
wEdôHeight
 = 
tm
.
tmHeight
 +Åm.
tmI¡î«lLódög
 * 3;

505 
Õ
->
uHeight
 = (
UINT
)
wEdôHeight
;

507 i‡((
Õ
->
wStyÀ
 & 0x0FË!
CBS_SIMPLE
)

509 
Õ
->
Buâ⁄Re˘
.
t›
 = 0;

510 
Õ
->
Buâ⁄Re˘
.
À·
 = 
Õcs
->
cx
 - 1 - 
	`GëSy°emMërics
(
SM_CXVSCROLL
);

511 
Õ
->
Buâ⁄Re˘
.
right
 = 
Õcs
->
cx
;

512 
Õ
->
Buâ⁄Re˘
.
bŸtom
 = 
wEdôHeight
;

514 
	`SëWödowPos
(
hWnd
, 0,

515 0, 0, 
Õcs
->
cx
, ()
wEdôHeight
,

516 
SWP_NOACTIVATE
 | 
SWP_NOMOVE
 | 
SWP_NOZORDER
 | 
SWP_NOREDRAW
);

518 
	`SëRe˘Em±y
(&
Õ
->
Buâ⁄Re˘
);

520 i‡((
Õ
->
wStyÀ
 & 0xfË!
CBS_DROPDOWNLIST
)

522 
dwStyÀ
 = 
WS_CHILD
 | 
WS_VISIBLE
 | 
WS_BORDER
;

523 i‡(
Õ
->
wStyÀ
 & 
CBS_AUTOHSCROLL
)

524 
dwStyÀ
 |
ES_AUTOHSCROLL
;

525 i‡(
Õ
->
wStyÀ
 & 
CBS_OEMCONVERT
)

526 
dwStyÀ
 |
ES_OEMCONVERT
;

528 i‡((
Õ
->
wStyÀ
 & 0x0FË=
CBS_SIMPLE
)

530 
	`Ârötf
(
°dîr
," 528: wEdôWidth =Üpcs->cx=%d\n",
Õcs
->
cx
);

531 
wEdôWidth
 = 
Õcs
->
cx
;

535 
	`Ârötf
(
°dîr
," 533: wEdôWidth =Üp->Buâ⁄Re˘.À· - 5=%d;\n",
Õ
->
Buâ⁄Re˘
.
À·
 - 5);

536 
wEdôWidth
 = 
Õ
->
Buâ⁄Re˘
.
À·
 - 5;

539 
Õ
->
EdôC⁄åﬁ
 = 
	`Cª©eWödow
("EDIT", 
NULL
, 
dwStyÀ
,

540 0, 0, 
wEdôWidth
, 
wEdôHeight
,

541 
hWnd
, (
HMENU
)
CBC_EDITID
,

542 
hIn°
,(
LPVOID
)
NULL
);

545 
Õ
->
EdôC⁄åﬁ
 = 0;

549 
dwExStyÀ
 = 0L;

550 
dwStyÀ
 = 
WS_BORDER
 | 
LBS_NOTIFY
 ;

551 i‡((
Õ
->
wStyÀ
 & 0xfË=
CBS_SIMPLE
)

552 
dwStyÀ
 |
WS_VISIBLE
 | 
WS_CHILD
;

554 
dwStyÀ
 |
WS_POPUP
;

556 i‡(
Õ
->
wStyÀ
 & 
CBS_DISABLENOSCROLL
)

557 
dwStyÀ
 |
LBS_DISABLENOSCROLL
;

559 i‡(
Õ
->
wStyÀ
 & 
CBS_HASSTRINGS
)

560 
dwStyÀ
 |
LBS_HASSTRINGS
;

561 i‡(
Õ
->
wStyÀ
 & 
CBS_NOINTEGRALHEIGHT
)

562 
dwStyÀ
 |
LBS_NOINTEGRALHEIGHT
;

563 i‡(
Õ
->
wStyÀ
 & 
CBS_OWNERDRAWFIXED
)

564 
dwStyÀ
 |
LBS_OWNERDRAWFIXED
;

565 i‡(
Õ
->
wStyÀ
 & 
CBS_OWNERDRAWVARIABLE
)

566 
dwStyÀ
 |
LBS_OWNERDRAWVARIABLE
;

567 i‡(
Õ
->
wStyÀ
 & 
CBS_SORT
)

568 
dwStyÀ
 |
LBS_SORT
;

569 i‡(
Õcs
->
°yÀ
 & 
WS_VSCROLL
)

570 
dwStyÀ
 |
WS_VSCROLL
;

573 i‡((
Õ
->
wStyÀ
 & 0xfË=
CBS_SIMPLE
) {

574 
Õ
->
Li°BoxRe˘
.
À·
 = 5;

575 
Õ
->
Li°BoxRe˘
.
t›
 = 
wEdôHeight
 - 1;

576 
Õ
->
Li°BoxRe˘
.
right
 = 
Õcs
->
cx
;

577 
Õ
->
Li°BoxRe˘
.
bŸtom
 = 
Õcs
->
cy
 - 2;

579 
Õ
->
Li°BoxRe˘
.
À·
 = 
Õcs
->
x
;

580 
Õ
->
Li°BoxRe˘
.
right
 =Üp->Li°BoxRe˘.
À·
 + 
Õcs
->
cx
 - 1;

581 
Õ
->
Li°BoxRe˘
.
t›
 = 
Õcs
->
y
 + 
wEdôHeight
 - 1;

582 
Õ
->
Li°BoxRe˘
.
bŸtom
 =Üp->Li°BoxRe˘.
t›
 + 
Õcs
->
cy
 + 1;

583 i‡((
Õ
->
wStyÀ
 & 0x0FË=
CBS_DROPDOWN
) {

584 
Õ
->
Li°BoxRe˘
.
À·
 += 5;

587 #ifde‡
LATER


588 
˝
.
x
 = ((
Õ
->
wStyÀ
 & 0xfË=
CBS_DROPDOWNLIST
)?0:5;

589 
˝
.
y
 = 
wEdôHeight
 - 1;

590 i‡((
Õ
->
wStyÀ
 & 0xfË!
CBS_SIMPLE
)

591 
	`Clõ¡ToS¸ìn
(
hWnd
,&
˝
);

592 
Õ
->
Li°BoxRe˘
.
À·
 = 
˝
.
x
;

593 
Õ
->
Li°BoxRe˘
.
t›
 = 
˝
.
y
;

594 
Õ
->
Li°BoxRe˘
.
right
 = 
˝
.
x
 + 
Õcs
->
cx
;

595 i‡((
Õ
->
wStyÀ
 & 0xfË!
CBS_DROPDOWNLIST
)

596 
Õ
->
Li°BoxRe˘
.
right
 -= 5;

597 
Õ
->
Li°BoxRe˘
.
bŸtom
 =Üp->Li°BoxRe˘.
t›
 + 
Õcs
->
cy
 -

598 
wEdôHeight
 + 1;

601 
Õ
->
Li°BoxC⁄åﬁ
 = 
	`Cª©eWödowEx
(
dwExStyÀ
,"LISTBOX",

602 
NULL
, 
dwStyÀ
,

603 
Õ
->
Li°BoxRe˘
.
À·
,Üp->Li°BoxRe˘.
t›
,

604 
Õ
->
Li°BoxRe˘
.
right
 -Üp->Li°BoxRe˘.
À·
,

605 
Õ
->
Li°BoxRe˘
.
bŸtom
 -Üp->Li°BoxRe˘.
t›
,

606 
hWnd
, 0,

607 
hIn°
,(
LPVOID
)
NULL
);

608 #i‡
MWCLIENT


610 
	`GrLowîWödow
(
Õ
->
Li°BoxC⁄åﬁ
->
wid
);

612 
	`MwLowîWödow
(
Õ
->
Li°BoxC⁄åﬁ
);

614 #ifde‡ 
LATER


617 i‡(
dwStyÀ
 & 
WS_POPUP
)

619 
	`SëWödowPos
(
Õ
->
Li°BoxC⁄åﬁ
, 
HWND_TOP
,

621 
SWP_NOREDRAW
 | 
SWP_NOACTIVATE
 | 
SWP_NOSIZE
 | 
SWP_NOMOVE
);

629 i‡(
Õcs
->
°yÀ
 & 
WS_VSCROLL
)

631 
HWND32
 
hWnd32
 = 
	`GETHWND32
(
hWnd
);

633 
	`SëRe˘Em±y
(&
hWnd32
->
rcNC
);

635 
hWnd32
->
wWidth
 = (
WORD
ËhWnd32->
rWnd
.
right
-hWnd32->rWnd.
À·
;

636 
hWnd32
->
wHeight
 = (
WORD
)hWnd32->
rWnd
.
bŸtom
-hWnd32->rWnd.
t›
;

637 
	`RELEASEWININFO
(
hWnd32
);

644 
dwStyÀ
 = 
	`GëWödowL⁄g
(
hWnd
, 
GWL_STYLE
);

645 
dwStyÀ
 &~(
WS_VSCROLL
 | 
WS_HSCROLL
 | 
WS_BORDER
 | 
WS_DLGFRAME
 | 
WS_THICKFRAME
);

646 
	`SëWödowL⁄g
(
hWnd
, 
GWL_STYLE
, 
dwStyÀ
);

647 
Õ
->
nLi°Iãms
 = 0;

648  
TRUE
;

650 
WM_DESTROY
:

651 i‡(
	`IsWödow
(
Õ
->
Li°BoxC⁄åﬁ
))

652 
	`De°royWödow
(
Õ
->
Li°BoxC⁄åﬁ
);

653 i‡(
	`IsWödow
(
Õ
->
EdôC⁄åﬁ
))

654 
	`De°royWödow
(
Õ
->
EdôC⁄åﬁ
);

655 
	`WöFªe
((
LPSTR
)
Õ
);

658 
WM_GETDLGCODE
:

659  (
LRESULT
)(
DLGC_WANTCHARS
|
DLGC_WANTARROWS
);

662 
WM_NCLBUTTONDOWN
:

664 
WM_LBUTTONDOWN
:

666 i‡((
Õ
->
wStyÀ
 & 0xfË=
CBS_SIMPLE
)

669 
˝
.
x
 = ()()
	`LOWORD
(
lP¨am
);

670 
˝
.
y
 = ()()
	`HIWORD
(
lP¨am
);

672 
	`S¸ìnToClõ¡
(
hWnd
, &
˝
);

674 i‡(!
	`IS_SET
(
Õ
, 
CSF_CAPTUREACTIVE
))

677 i‡(
	`PtInRe˘
(&
Õ
->
Buâ⁄Re˘
, 
˝
) ||

678 (
Õ
->
wStyÀ
 & 0x0FË=
CBS_DROPDOWNLIST
)

680 i‡(
	`PtInRe˘
(&
Õ
->
Buâ⁄Re˘
, 
˝
))

681 
	`CBoxDøwBuâ⁄
(
hWnd
, 1, 
Õ
);

683 
˝
.
x
 = ((
Õ
->
wStyÀ
 & 0xfË!
CBS_DROPDOWNLIST
) ? 5 : 0;

684 
˝
.
y
 = 
Õ
->
uHeight
 - 1;

686 
	`Clõ¡ToS¸ìn
(
hWnd
, &
˝
);

688 
	`Ârötf
(
°dîr
," (1)lp->ListBoxRect:(%d,%d,%d,%d)\n",

689 
Õ
->
Li°BoxRe˘
.
À·
,

690 
Õ
->
Li°BoxRe˘
.
t›
,

691 
Õ
->
Li°BoxRe˘
.
right
,

692 
Õ
->
Li°BoxRe˘
.
bŸtom
);

694 
	`Off£tRe˘
(&
Õ
->
Li°BoxRe˘
, 
˝
.
x
 -Üp->Li°BoxRe˘.
À·
, cp.
y
 -Üp->Li°BoxRe˘.
t›
);

696 
	`Ârötf
(
°dîr
," (2)lp->ListBoxRect:(%d,%d,%d,%d)\n",

697 
Õ
->
Li°BoxRe˘
.
À·
,

698 
Õ
->
Li°BoxRe˘
.
t›
,

699 
Õ
->
Li°BoxRe˘
.
right
,

700 
Õ
->
Li°BoxRe˘
.
bŸtom
);

702 
	`SëWödowPos
(
Õ
->
Li°BoxC⁄åﬁ
, 
HWND_TOP
,

703 
˝
.
x
, cp.
y
, 0, 0,

704 
SWP_NOSIZE
 | 
SWP_NOACTIVATE
);

706 
	`SídMesßge
(
Õ
->
hWndP¨ít
, 
WM_COMMAND
, 
	`GET_WM_COMMAND_MPS
÷p->
nID
,
hWnd
,
CBN_DROPDOWN
));

713 
nôems
 = 
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
,
LB_GETCOUNT
,0,0L);

716 i‡(
Õ
->
Li°BoxRe˘
.
bŸtom
 -Üp->Li°BoxRe˘.
t›
 <

717 ((
Õ
->
uHeight
-2Ë* 
nôems
))

720 
nôems
 = (nitems > 12 ? 12 :Çitems);

723 
Õ
->
Li°BoxRe˘
.
bŸtom
 =

724 
Õ
->
Li°BoxRe˘
.
t›
 + (÷p->
uHeight
-2Ë* 
nôems
);

726 
	`Ârötf
(
°dîr
," (2.5)lp->ListBoxRect:(%d,%d,%d,%d)\n",

727 
Õ
->
Li°BoxRe˘
.
À·
,

728 
Õ
->
Li°BoxRe˘
.
t›
,

729 
Õ
->
Li°BoxRe˘
.
right
,

730 
Õ
->
Li°BoxRe˘
.
bŸtom
);

733 
	`Ârötf
(
°dîr
," 706: fixed: SëWödowPos÷p->Li°BoxC⁄åﬁ,,%d,%d,...)\n",
˝
.
x
,˝.
y
);

735 
	`SëWödowPos
(
Õ
->
Li°BoxC⁄åﬁ
,
HWND_TOP
,0,0,

736 
Õ
->
Li°BoxRe˘
.
right
 -Üp->Li°BoxRe˘.
À·
,

737 
Õ
->
Li°BoxRe˘
.
bŸtom
 -Üp->Li°BoxRe˘.
t›
,

738 
SWP_NOMOVE
 | 
SWP_NOACTIVATE
 | 
SWP_NOZORDER
);

740 
	`SëWödowPos
(
Õ
->
Li°BoxC⁄åﬁ
,
HWND_TOP
,
˝
.
x
,˝.
y
,

741 
Õ
->
Li°BoxRe˘
.
right
 -Üp->Li°BoxRe˘.
À·
,

742 
Õ
->
Li°BoxRe˘
.
bŸtom
 -Üp->Li°BoxRe˘.
t›
,

743 
SWP_NOMOVE
 | 
SWP_NOACTIVATE
 | 
SWP_NOZORDER
);

749 
	`SET_STATE
(
Õ
, 
CSF_HASDROPPED
);

752 
	`ShowWödow
(
Õ
->
Li°BoxC⁄åﬁ
, 
SW_SHOW
);

754 
	`SëFocus
(
Õ
->
Li°BoxC⁄åﬁ
);

756 
	`SëF‹egroundWödow
(
Õ
->
Li°BoxC⁄åﬁ
);

758 
	`CBoxC≠tuª
(
hWnd
, 1);

759 
	`SET_STATE
(
Õ
, 
CSF_CAPTUREACTIVE
);

760 
	`SET_STATE
(
Õ
, 
CSF_BUTTONDOWN
);

765 
HWND
 
hwndNewFocus
 = 0;

767 
˝S¸ìn
 = 
˝
;

769 i‡((
Õ
->
wStyÀ
 & 0xfË!
CBS_SIMPLE
)

771 
	`Clõ¡ToS¸ìn
(
hWnd
, &
˝S¸ìn
);

772 
hwndNewFocus
 = 
	`WödowFromPoöt
(
˝S¸ìn
);

775 
	`Ârötf
(
°dîr
," (3)lp->ListBoxRect:(%d,%d,%d,%d)\n",

776 
Õ
->
Li°BoxRe˘
.
À·
,

777 
Õ
->
Li°BoxRe˘
.
t›
,

778 
Õ
->
Li°BoxRe˘
.
right
,

779 
Õ
->
Li°BoxRe˘
.
bŸtom
);

781 i‡(
	`PtInRe˘
(&
Õ
->
Li°BoxRe˘
, 
˝S¸ìn
))

783 
	`CBoxSídMou£ToLBox
(
Õ
, 
WM_LBUTTONDOWN
, 
wP¨am
, 
˝S¸ìn
);

787 i‡(
	`PtInRe˘
(&
Õ
->
Buâ⁄Re˘
, 
˝
))

788 
	`CBoxDøwBuâ⁄
(
hWnd
, 0, 
Õ
);

789 i‡((
Õ
->
wStyÀ
 & 0x0FË=
CBS_DROPDOWN
 && 
hwndNewFocus
 =Õ->
EdôC⁄åﬁ
)

792 
	`SídMesßge
(
Õ
->
hWndP¨ít
, 
WM_COMMAND
, 
	`GET_WM_COMMAND_MPS
÷p->
nID
,
hWnd
,
CBN_CLOSEUP
));

794 
	`Ârötf
(
°dîr
," 802: (hide) SetWindowPos(lp->ListBoxControl, , 0, 0, 0, 0,..)\n");

796 
	`SëWödowPos
(
Õ
->
Li°BoxC⁄åﬁ
, 0,

798 
SWP_NOMOVE
 | 
SWP_NOSIZE
 | 
SWP_NOACTIVATE
 | 
SWP_NOZORDER
 | 
SWP_HIDEWINDOW
);

799 #i‡
MWCLIENT


800 
	`MwLowîWödow
(
Õ
->
Li°BoxC⁄åﬁ
);

802 
	`CBoxC≠tuª
(
hWnd
, 0);

803 
	`CLEAR_STATE
(
Õ
, 
CSF_BUTTONDOWN
);

805 
	`CLEAR_STATE
(
Õ
, 
CSF_CAPTUREACTIVE
);

807 i‡(
hwndNewFocus
 && hwndNewFocu†!
hWnd
)

809 
	`S¸ìnToClõ¡
(
hwndNewFocus
, &
˝S¸ìn
);

810 
	`SëFocus
(
hwndNewFocus
);

812 
	`SídMesßge
(
hwndNewFocus
, 
WM_LBUTTONDOWN
, 
wP¨am
, 
	`MAKELONG
(
˝S¸ìn
.
x
, cpS¸ìn.
y
));

819 
WM_NCMOUSEMOVE
:

821 
WM_MOUSEMOVE
:

823 i‡(!
	`IS_SET
(
Õ
,
CSF_BUTTONDOWN
Ë&& (÷p->
wStyÀ
 & 0xfË=
CBS_SIMPLE
))

826 
˝
.
x
 = ()()
	`LOWORD
(
lP¨am
);

827 
˝
.
y
 = ()()
	`HIWORD
(
lP¨am
);

829 
	`S¸ìnToClõ¡
(
hWnd
, &
˝
);

832 i‡(
	`IS_SET
(
Õ
, 
CSF_CAPTUREACTIVE
))

834 i‡(
	`PtInRe˘
(&
Õ
->
Buâ⁄Re˘
,
˝
))

836 i‡(!
	`IS_SET
(
Õ
, 
CSF_LOCALBUTTONDOWN
))

837 
	`CBoxDøwBuâ⁄
(
hWnd
, 1, 
Õ
);

840 i‡((
Õ
->
wStyÀ
 & 0xfË!
CBS_SIMPLE
)

841 
	`Clõ¡ToS¸ìn
(
hWnd
,&
˝
);

842 i‡(
	`PtInRe˘
(&
Õ
->
Li°BoxRe˘
,
˝
))

844 
	`CBoxSídMou£ToLBox
(
Õ
,
WM_MOUSEMOVE
,
wP¨am
,
˝
);

846 i‡(
	`IS_SET
(
Õ
,
CSF_LOCALBUTTONDOWN
Ë&& (÷p->
wStyÀ
 & 0xfË!
CBS_SIMPLE
))

847 
	`CBoxDøwBuâ⁄
(
hWnd
,0,
Õ
);

852 
WM_NCLBUTTONUP
:

854 
WM_LBUTTONUP
:

856 i‡(!
	`IS_SET
(
Õ
, 
CSF_CAPTUREACTIVE
))

859 
˝
.
x
 = ()()
	`LOWORD
(
lP¨am
);

860 
˝
.
y
 = ()()
	`HIWORD
(
lP¨am
);

862 
	`S¸ìnToClõ¡
(
hWnd
, &
˝
);

865 
	`CLEAR_STATE
(
Õ
,
CSF_BUTTONDOWN
);

867 i‡(
	`PtInRe˘
(&
Õ
->
Buâ⁄Re˘
, 
˝
))

870 i‡(
	`PtInRe˘
(&
Õ
->
Buâ⁄Re˘
, 
˝
))

871 
	`CBoxDøwBuâ⁄
(
hWnd
, 0, 
Õ
);

872 i‡(
	`IS_SET
(
Õ
, 
CSF_LBOXBUTTONDOWN
))

874 i‡((
Õ
->
wStyÀ
 & 0xfË!
CBS_SIMPLE
)

875 
	`Clõ¡ToS¸ìn
(
hWnd
, &
˝
);

876 
	`CBoxSídMou£ToLBox
(
Õ
, 
WM_LBUTTONUP
, 
wP¨am
, 
˝
);

877 
	`CLEAR_STATE
(
Õ
,
CSF_LBOXBUTTONDOWN
);

881 i‡((
Õ
->
wStyÀ
 & 0xfË!
CBS_SIMPLE
)

882 
	`Clõ¡ToS¸ìn
(
hWnd
, &
˝
);

884 i‡(
	`PtInRe˘
(&
Õ
->
Li°BoxRe˘
, 
˝
))

886 
uiKey
 = (
UINT
)
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETCURSEL
, 0, 0);

887 i‡(
uiKey
 !(
UINT
)
LB_ERR
)

889 i‡(
Õ
->
EdôC⁄åﬁ
)

891 
	`SëFocus
(
Õ
->
EdôC⁄åﬁ
);

893 
	`CBoxDøwEdô
(
Õ
, 
hWnd
, 
uiKey
);

896 
	`SëFocus
(
hWnd
);

898 
	`CBoxDøwSètic
(
Õ
, 
hWnd
, 
uiKey
);

902  
	`SídMesßge
(
Õ
->
hWndP¨ít
, 
WM_COMMAND
, 
	`GET_WM_COMMAND_MPS
÷p->
nID
,
hWnd
,
CBN_SELENDOK
));

903 
	`SídMesßge
(
Õ
->
hWndP¨ít
, 
WM_COMMAND
, 
	`GET_WM_COMMAND_MPS
÷p->
nID
,
hWnd
,
CBN_CLOSEUP
));

905 
	`Ârötf
(
°dîr
," 844: (hide) SetWindowPos(lp->ListBoxControl, , 0, 0, 0, 0,..)\n");

907 
	`SëWödowPos
(
Õ
->
Li°BoxC⁄åﬁ
, 0,

909 
SWP_NOMOVE
 | 
SWP_NOSIZE
 | 
SWP_NOACTIVATE
 | 
SWP_NOZORDER
 | 
SWP_HIDEWINDOW
);

911 
	`CBoxC≠tuª
(
hWnd
, 0);

912 
	`CLEAR_STATE
(
Õ
,
CSF_CAPTUREACTIVE
);

915 
	`CBoxSídMou£ToLBox
(
Õ
, 
WM_LBUTTONUP
, 
wP¨am
, 
˝
);

916 
	`CLEAR_STATE
(
Õ
,
CSF_LBOXBUTTONDOWN
);

917 #i‡
MWCLIENT


919 
	`GrLowîWödow
(
Õ
->
Li°BoxC⁄åﬁ
->
wid
);

921 
	`MwLowîWödow
(
Õ
->
Li°BoxC⁄åﬁ
);

927 i‡(
	`IS_SET
(
Õ
, 
CSF_LBOXBUTTONDOWN
))

929 i‡((
Õ
->
wStyÀ
 & 0xfË!
CBS_SIMPLE
)

930 
	`Clõ¡ToS¸ìn
(
hWnd
, &
˝
);

931 
	`CBoxSídMou£ToLBox
(
Õ
, 
WM_LBUTTONUP
, 
wP¨am
, 
˝
);

932 
	`CLEAR_STATE
(
Õ
,
CSF_LBOXBUTTONDOWN
);

936 
WM_ERASEBKGND
:

939 
WM_PAINT
:

940 
	`BegöPaöt
(
hWnd
,&
ps
);

941 
	`EndPaöt
(
hWnd
,&
ps
);

943 i‡(!
	`IsWödowVisibÀ
(
hWnd
Ë|| !
Õ
->
bRedøw
)

946 i‡((
Õ
->
wStyÀ
 & 0xfË!
CBS_SIMPLE
)

947 
	`CBoxDøwBuâ⁄
(
hWnd
, 
	`IS_SET
(
Õ
,
CSF_LOCALBUTTONDOWN
),Üp);

948 
uiKey
 = (
UINT
)
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETCURSEL
, 0, 0);

949 i‡(
Õ
->
EdôC⁄åﬁ
)

950 
	`CBoxDøwEdô
(
Õ
, 
hWnd
, 
uiKey
);

951 
	`CBoxDøwSètic
(
Õ
, 
hWnd
, 
uiKey
);

954 
WM_COMMAND
:

955 i‡(
	`GET_WM_COMMAND_ID
(
wP¨am
,
lP¨am
Ë=
CBC_EDITID
) {

957 ()
	`GET_WM_COMMAND_CMD
(
wP¨am
,
lP¨am
)) {

958 
EN_SETFOCUS
:

959 #ifde‡ 
LATER


960 
wCBN
 = 
CBN_SETFOCUS
;

962 
wCBN
 = 0;

965 
EN_KILLFOCUS
:

966 
wCBN
 = 
CBN_KILLFOCUS
;

968 
EN_CHANGE
:

970 
ödex
 = 0;

971 
sz
[128];

977 
	`SídMesßge
(
Õ
->
EdôC⁄åﬁ
, 
WM_GETTEXT
, (
sz
)-1, (
LPARAM
)sz);

978 i‡–
	`°æí
(
sz
) > 0 )

979 
ödex
 = ()
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_FINDSTRING
, -1, (
LPARAM
)
sz
);

980 i‡(
ödex
 =
LB_ERR
)

981 
ödex
 = 0;

982 
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_SETTOPINDEX
, 
ödex
, 0L);

983 
wCBN
 = 
CBN_EDITCHANGE
;

986 
EN_UPDATE
:

987 
wCBN
 = 
CBN_EDITUPDATE
;

989 
EN_ERRSPACE
:

990 
wCBN
 = 
CBN_ERRSPACE
;

993 
wCBN
 = 0;

996 i‡(
wCBN
)

997  
	`SídMesßge
(
Õ
->
hWndP¨ít
,
WM_COMMAND
,

998 
	`GET_WM_COMMAND_MPS
(
Õ
->
nID
,
hWnd
,
wCBN
));

1000  
rc
;

1002 i‡(
	`GET_WM_COMMAND_ID
(
wP¨am
,
lP¨am
) == 0) {

1004 ()
	`GET_WM_COMMAND_CMD
(
wP¨am
,
lP¨am
)) {

1005 
LBN_ERRSPACE
:

1006 
wCBN
 = 
CBN_ERRSPACE
;

1008 
LBN_SELCHANGE
:

1009 i‡((
Õ
->
wStyÀ
 & 0xfË=
CBS_SIMPLE
)

1011 
uiKey
 = (
UINT
)
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETCURSEL
, 0, 0);

1012 i‡(
uiKey
 !(
UINT
)
LB_ERR
)

1013 i‡(
Õ
->
EdôC⁄åﬁ
)

1015 
	`CBoxDøwEdô
(
Õ
, 
hWnd
, 
uiKey
);

1018 
wCBN
 = 
CBN_SELCHANGE
;

1020 
LBN_DBLCLK
:

1021 
wCBN
 = 
CBN_DBLCLK
;

1023 
LBN_SELCANCEL
:

1024 
wCBN
 = 0;

1026 
LBN_SETFOCUS
:

1027 
wCBN
 = 
CBN_SETFOCUS
;

1029 
LBN_KILLFOCUS
:

1030 
wCBN
 = 
CBN_KILLFOCUS
;

1033 
wCBN
 = 0;

1036 i‡(
wCBN
)

1037  
	`SídMesßge
(
Õ
->
hWndP¨ít
, 
WM_COMMAND
, 
	`GET_WM_COMMAND_MPS
÷p->
nID
,
hWnd
,
wCBN
));

1039  
rc
;

1043 
WM_GETTEXT
:

1044 i‡–
Õ
->
EdôC⁄åﬁ
 )

1045  
	`SídMesßge
(
Õ
->
EdôC⁄åﬁ
,
uMsg
,
wP¨am
,
lP¨am
);

1046 i‡–
Õ
->
Li°BoxC⁄åﬁ
 ) {

1047 
WPARAM
 
£l
, 
Àn
;

1049 
£l
 = (
WPARAM
)
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETCURSEL
, 0, 0);

1050 i‡–
£l
 !(
WPARAM
)
LB_ERR
 ) {

1051 
Àn
 = (
WPARAM
)
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETTEXTLEN
, 0, 0);

1052 i‡–
Àn
 <
wP¨am
 )

1053  
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETTEXT
, 
£l
, 
lP¨am
);

1056  
CB_ERR
;

1058 
WM_GETTEXTLENGTH
:

1059 i‡–
Õ
->
EdôC⁄åﬁ
 )

1060  
	`SídMesßge
(
Õ
->
EdôC⁄åﬁ
,
uMsg
,
wP¨am
,
lP¨am
);

1061 i‡–
Õ
->
Li°BoxC⁄åﬁ
 ) {

1062 
WPARAM
 
£l
;

1064 
£l
 = (
WPARAM
)
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETCURSEL
, 0, 0);

1065 i‡–
£l
 !(
WPARAM
)
LB_ERR
 )

1066  
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETTEXTLEN
, 
£l
, 0);

1068  
CB_ERR
;

1070 
WM_SETTEXT
:

1071 i‡–
Õ
->
EdôC⁄åﬁ
 )

1072  
	`SídMesßge
(
Õ
->
EdôC⁄åﬁ
,
uMsg
,
wP¨am
,
lP¨am
);

1073  
CB_ERR
;

1076 
WM_SETFONT
:

1077 
Õ
->
hF⁄t
 = (
HFONT
)
wP¨am
;

1079 
hDC
 = 
	`GëDC
(
hWnd
);

1080 
	`Sñe˘Obje˘
(
hDC
,
Õ
->
hF⁄t
);

1081 
	`GëTextMërics
(
hDC
,&
tm
);

1082 
	`Rñó£DC
(
hWnd
,
hDC
);

1083 
wEdôHeight
 = 
tm
.
tmHeight
 + 3 *Åm.
tmI¡î«lLódög
;

1085 i‡(
wEdôHeight
 =
Õ
->
uHeight
)

1088 
Õ
->
uHeight
 = (
UINT
)
wEdôHeight
;

1089 
Õ
->
Buâ⁄Re˘
.
bŸtom
 = 
wEdôHeight
;

1094 
	`ShowWödow
(
hWnd
, 
SW_HIDE
);

1095 
	`GëClõ¡Re˘
(
hWnd
,&
rcClõ¡
);

1096 i‡((
Õ
->
wStyÀ
 & 0xfË!
CBS_SIMPLE
)

1097 
	`SëWödowPos
(
hWnd
, 0,

1098 0, 0, 
rcClõ¡
.
right
, ()
wEdôHeight
,

1099 
SWP_NOACTIVATE
 | 
SWP_NOMOVE
 | 
SWP_NOZORDER
 | 
SWP_NOREDRAW
);

1100 
	`SëWödowPos
(
hWnd
, 0,

1101 0, 0, 
rcClõ¡
.
right
, ()
wEdôHeight
 + 
Õ
->
Li°BoxRe˘
.
bŸtom
 -Üp->Li°BoxRe˘.
t›
 + 1,

1102 
SWP_NOACTIVATE
 | 
SWP_NOMOVE
 | 
SWP_NOZORDER
 | 
SWP_NOREDRAW
);

1103 
	`ShowWödow
(
hWnd
, 
SW_SHOWNA
);

1105 i‡(
Õ
->
EdôC⁄åﬁ
)

1106 
	`SídMesßge
(
Õ
->
EdôC⁄åﬁ
, 
WM_SETFONT
, 
wP¨am
,
lP¨am
);

1107 
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
WM_SETFONT
, 
wP¨am
,
lP¨am
);

1109 if(
	`LOWORD
(
lP¨am
))

1110 
	`RedøwWödow
(
hWnd
,(c⁄° 
RECT
 *)0,(
HRGN
)0,

1111 
RDW_INVALIDATE
 | 
RDW_ERASE
 | 
RDW_UPDATENOW
 );

1112  (
LRESULT
)0;

1114 
WM_GETFONT
:

1115  
Õ
->
hF⁄t
;

1118 
WM_MOVE
:

1120 
Õwp
 = (
LPWINDOWPOS
)
lP¨am
;

1122 
µ
.
x
=
	`LOWORD
(
lP¨am
);

1123 
µ
.
y
=
	`HIWORD
(
lP¨am
);

1127 
Õ
->
Buâ⁄Re˘
.
right
 = (
hWnd
->
wöª˘
.right-hWnd->wöª˘.
À·
);

1128 i‡((
Õ
->
wStyÀ
 & 0xfË=
CBS_SIMPLE
)

1129 
Õ
->
Buâ⁄Re˘
.
À·
 =Üp->Buâ⁄Re˘.
right
;

1130 
Õ
->
Buâ⁄Re˘
.
À·
 = (
hWnd
->
wöª˘
.
right
-hWnd->winrect.left) - 1 -

1131 
	`GëSy°emMërics
(
SM_CXVSCROLL
);

1133 i‡(
Õ
->
EdôC⁄åﬁ
)

1135 
wEdôWidth
 = 
Õ
->
Buâ⁄Re˘
.
À·
 + 1;

1136 i‡((
Õ
->
wStyÀ
 & 0xfË=
CBS_SIMPLE
)

1137 
wEdôWidth
 --;

1138 i‡((
Õ
->
wStyÀ
 & 0xfË=
CBS_DROPDOWN
)

1139 
wEdôWidth
 -= 5;

1140 
	`SëWödowPos
(
Õ
->
EdôC⁄åﬁ
,(
HWND
)0,

1142 
wEdôWidth
, 
Õ
->
uHeight
,

1143 
SWP_NOACTIVATE
|
SWP_NOMOVE
|
SWP_NOZORDER
);

1145 i‡(
Õ
->
Li°BoxC⁄åﬁ
)

1147 i‡((
Õ
->
wStyÀ
 & 0x0FË=
CBS_SIMPLE
)

1149 
Õ
->
Li°BoxRe˘
.
À·
 = 5;

1150 
Õ
->
Li°BoxRe˘
.
t›
 =Üp->
uHeight
 - 1;

1151 
Õ
->
Li°BoxRe˘
.
right
 = (
hWnd
->
wöª˘
.right-hWnd->wöª˘.
À·
);

1152 
Õ
->
Li°BoxRe˘
.
bŸtom
 = (
hWnd
->
wöª˘
.bŸtom-hWnd->wöª˘.
t›
) - 2;

1155 
POINT
 
˝
;

1156 
˝
.
x
 = 0;

1157 
˝
.
y
 = 
Õ
->
uHeight
 - 1;

1158 
	`Clõ¡ToS¸ìn
(
hWnd
, &
˝
);

1159 
	`Off£tRe˘
(&
Õ
->
Li°BoxRe˘
, 
˝
.
x
 -Üp->Li°BoxRe˘.
À·
, cp.
y
 -Üp->Li°BoxRe˘.
t›
);

1161 
Õ
->
Li°BoxRe˘
.
right
 =Üp->Li°BoxRe˘.
À·
 + (
hWnd
->
wöª˘
.right-hWnd->winrect.left) ;

1162 i‡((
Õ
->
wStyÀ
 & 0xfË!
CBS_DROPDOWNLIST
)

1163 
Õ
->
Li°BoxRe˘
.
right
 -= 5;

1166 
	`SëWödowPos
(
Õ
->
Li°BoxC⁄åﬁ
,(
HWND
)0,

1167 
Õ
->
Li°BoxRe˘
.
À·
,Üp->Li°BoxRe˘.
t›
,

1168 
Õ
->
Li°BoxRe˘
.
right
 -Üp->Li°BoxRe˘.
À·
,

1169 
Õ
->
Li°BoxRe˘
.
bŸtom
 -Üp->Li°BoxRe˘.
t›
,

1170 
SWP_NOACTIVATE
|
SWP_NOZORDER
);

1174 i‡((
Õ
->
wStyÀ
 & 0xfË!
CBS_SIMPLE
)

1175 
Õwp
->
cy
 = ()
Õ
->
uHeight
;

1179  (
LRESULT
)0;

1181 
WM_WINDOWPOSCHANGED
:

1182 
	`DefWödowProc
(
hWnd
,
uMsg
,
wP¨am
,
lP¨am
);

1183 
Õwp
 = (
LPWINDOWPOS
)
lP¨am
;

1184 i‡(
Õwp
) {

1185 i‡(!(
Õwp
->
Êags
 & 
SWP_NOSIZE
))

1187 
	`RedøwWödow
(
hWnd
,(c⁄° 
RECT
 *)0,(
HRGN
)0,

1188 
RDW_INVALIDATE
|
RDW_ERASE
);

1190 
	`InvÆid©eRe˘
(
hWnd
,
NULL
,
TRUE
);

1193  (
LRESULT
)0;

1199 
WM_DRAWITEM
:

1200 
Õdis
 = (
LPDRAWITEMSTRUCT
)
lP¨am
;

1201 
Õdis
->
CéTy≥
 = 
ODT_COMBOBOX
;

1202 
Õdis
->
CéID
 = 
Õ
->
nID
;

1203 
Õdis
->
hwndIãm
 = 
hWnd
;

1204  
	`SídMesßge
(
Õ
->
hWndP¨ít
,
WM_DRAWITEM
,

1205 (
WPARAM
)
Õ
->
nID
,
lP¨am
);

1207 
WM_MEASUREITEM
:

1208 
Õmis
 = (
LPMEASUREITEMSTRUCT
)
lP¨am
;

1209 
Õmis
->
CéTy≥
 = 
ODT_COMBOBOX
;

1210 
Õmis
->
CéID
 = 
Õ
->
nID
;

1211  
	`SídMesßge
(
Õ
->
hWndP¨ít
,
WM_MEASUREITEM
,

1212 (
WPARAM
)
Õ
->
nID
,
lP¨am
);

1214 
WM_DELETEITEM
:

1215 
Õdlis
 = (
LPDELETEITEMSTRUCT
)
lP¨am
;

1216 
Õdlis
->
CéTy≥
 = 
ODT_COMBOBOX
;

1217 
Õdlis
->
CéID
 = 
Õ
->
nID
;

1218 
Õdlis
->
hwndIãm
 = 
hWnd
;

1219  
	`SídMesßge
(
Õ
->
hWndP¨ít
,
WM_DELETEITEM
,

1220 (
WPARAM
)
Õ
->
nID
,
lP¨am
);

1222 
WM_CONVERT
:

1223 i‡(!
ÕComboBöToN©
) {

1224 
hComboCœss32
 = 
	`FödCœss
("COMBOBOX",0);

1225 
ÕComboBöToN©
 = (
WNDPROC
)
	`GëCœssH™dÀL⁄g
(

1226 
hComboCœss32
,
GCL_BINTONAT
);

1228 i‡(
ÕComboBöToN©
)

1229  
	`ÕComboBöToN©
(
hWnd
, 
uMsg
, 
wP¨am
, 
lP¨am
);

1231  (
LRESULT
)0;

1235  
	`DefCBProc
–
hWnd
, 
uMsg
, 
wP¨am
, 
lP¨am
);

1237  
rc
;

1238 
	}
}

1243 
LRESULT
 
	$DefCBProc
(
HWND
 
hWnd
, 
UINT
 
uMsg
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
)

1245 
Àn
,
ödex
;

1246 
COMBOBOX
 *
Õ
;

1247 *
£À˘i⁄
;

1248 
rc
;

1249 
POINT
 
˝
;

1251 
Õ
 = (
COMBOBOX
 *Ë
hWnd
->
u£rd©a
 ;

1252 
uMsg
) {

1256 
CB_ADDSTRING
:

1257 
Õ
->
nLi°Iãms
++;

1258  
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
,
LB_ADDSTRING
,

1259 
wP¨am
,
lP¨am
);

1261 
CB_DELETESTRING
:

1262 i‡(
Õ
->
nLi°Iãms
)

1263 
Õ
->
nLi°Iãms
--;

1264  
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
,
LB_DELETESTRING
,

1265 
wP¨am
,
lP¨am
);

1267 
CB_DIR
:

1268  
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
,
LB_DIR
,

1269 
wP¨am
,
lP¨am
);

1271 
CB_FINDSTRING
:

1272  
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
,
LB_FINDSTRING
,

1273 
wP¨am
,
lP¨am
);

1275 
CB_FINDSTRINGEXACT
:

1276  
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
,
LB_FINDSTRINGEXACT
,

1277 
wP¨am
,
lP¨am
);

1279 
CB_GETCOUNT
:

1280  
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
,
LB_GETCOUNT
,

1281 
wP¨am
,
lP¨am
);

1283 
CB_GETCURSEL
:

1284  
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
,
LB_GETCURSEL
,

1285 
wP¨am
,
lP¨am
);

1287 
CB_GETITEMDATA
:

1288  
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
,
LB_GETITEMDATA
,

1289 
wP¨am
,
lP¨am
);

1291 
CB_GETITEMHEIGHT
:

1292  
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
,
LB_GETITEMHEIGHT
,

1293 
wP¨am
,
lP¨am
);

1295 
CB_GETLBTEXT
:

1296  
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
,
LB_GETTEXT
,

1297 
wP¨am
,
lP¨am
);

1299 
CB_GETLBTEXTLEN
:

1300  
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
,
LB_GETTEXTLEN
,

1301 
wP¨am
,
lP¨am
);

1303 
CB_INSERTSTRING
:

1304  
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
,
LB_INSERTSTRING
,

1305 
wP¨am
,
lP¨am
);

1307 
CB_SETITEMDATA
:

1308  
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
,
LB_SETITEMDATA
,

1309 
wP¨am
,
lP¨am
);

1314 
CB_GETEDITSEL
:

1315  
	`SídMesßge
(
Õ
->
EdôC⁄åﬁ
,
EM_GETSEL
,0,0);

1317 
CB_LIMITTEXT
:

1318  
	`SídMesßge
(
Õ
->
EdôC⁄åﬁ
,
EM_LIMITTEXT
,

1319 
wP¨am
,
lP¨am
);

1321 
CB_SETEDITSEL
:

1322  
	`SídMesßge
(
Õ
->
EdôC⁄åﬁ
,
EM_SETSEL
,

1323 
wP¨am
,
lP¨am
);

1328 
CB_GETDROPPEDCONTROLRECT
:

1329 
	`C›yRe˘
((
LPRECT
)
lP¨am
,&
Õ
->
Li°BoxRe˘
);

1331 
CB_GETDROPPEDSTATE
:

1332  
	`IS_SET
(
Õ
,
CSF_CAPTUREACTIVE
);

1334 
CB_GETEXTENDEDUI
:

1335  (
LRESULT
)
Õ
->
bExãnded
;

1337 
CB_RESETCONTENT
:

1338 
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
,
LB_RESETCONTENT
,0,0);

1339 i‡(
Õ
->
EdôC⁄åﬁ
)

1340 
	`SídMesßge
(
Õ
->
EdôC⁄åﬁ
,
WM_SETTEXT
,0,(
LPARAM
)(
LPSTR
)"");

1343 
CB_SELECTSTRING
:

1344 
ödex
 = ()
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_SELECTSTRING
, 
wP¨am
, 
lP¨am
);

1345 i‡(
ödex
 =
LB_ERR
)

1346  
CB_ERR
;

1348 
Àn
 = ()
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETTEXTLEN
, 
ödex
, 0);

1349 i‡(
Àn
 <= 0)

1350  
CB_ERR
;

1352 
£À˘i⁄
 = (
LPSTR
)
	`WöMÆloc
((
UINT
)
Àn
+1);

1353 
rc
 = ()
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETTEXT
, (
WPARAM
)
ödex
, (
LPARAM
)
£À˘i⁄
);

1354 i‡(
Õ
->
EdôC⁄åﬁ
)

1355 
rc
 = ()
	`SídMesßge
(
Õ
->
EdôC⁄åﬁ
, 
WM_SETTEXT
, 0, (
LPARAM
)
£À˘i⁄
);

1356 
	`CBoxDøwSètic
(
Õ
, 
hWnd
, 
ödex
);

1357 
	`WöFªe
(
£À˘i⁄
);

1360 
CB_SETCURSEL
:

1361 
rc
 = ()
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_SETCURSEL
, 
wP¨am
, 
lP¨am
);

1362 i‡(
rc
 =
LB_ERR
)

1363  
CB_ERR
;

1364 
Àn
 = ()
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETTEXTLEN
, 
wP¨am
, 0);

1365 i‡(
Àn
 <= 0)

1366  
CB_ERR
;

1368 
£À˘i⁄
 = (
LPSTR
)
	`WöMÆloc
((
UINT
)
Àn
+1);

1369 
rc
 = ()
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETTEXT
, 
wP¨am
, (
LPARAM
)
£À˘i⁄
);

1370 i‡(
Õ
->
EdôC⁄åﬁ
)

1371 
rc
 = ()
	`SídMesßge
(
Õ
->
EdôC⁄åﬁ
, 
WM_SETTEXT
, 0, (
LPARAM
)
£À˘i⁄
);

1372 
	`CBoxDøwSètic
(
Õ
, 
hWnd
, 
wP¨am
);

1373 
	`WöFªe
(
£À˘i⁄
);

1374  (
LRESULT
)
wP¨am
;

1376 
CB_SETEXTENDEDUI
:

1377 
Õ
->
bExãnded
 = (
BOOL
)
wP¨am
;

1380 
CB_SETITEMHEIGHT
:

1383 
CB_SHOWDROPDOWN
:

1384 i‡((
Õ
->
wStyÀ
 & 0xfË=
CBS_SIMPLE
)

1386 i‡(
wP¨am
)

1388 i‡(
	`IS_SET
(
Õ
,
CSF_CAPTUREACTIVE
))

1391 
˝
.
x
 = ((
Õ
->
wStyÀ
 & 0xfË!
CBS_DROPDOWNLIST
) ? 5 : 0;

1392 
˝
.
y
 = 
Õ
->
uHeight
 -1;

1394 
	`Clõ¡ToS¸ìn
(
hWnd
, &
˝
);

1395 
	`Off£tRe˘
(&
Õ
->
Li°BoxRe˘
, 
˝
.
x
 -Üp->Li°BoxRe˘.
À·
, cp.
y
 -Üp->Li°BoxRe˘.
t›
);

1397 
	`SëWödowPos
(
Õ
->
Li°BoxC⁄åﬁ
, 0,

1398 
˝
.
x
, cp.
y
, 0, 0,

1399 
SWP_NOSIZE
 | 
SWP_NOZORDER
 | 
SWP_NOACTIVATE
);

1401 
	`SídMesßge
(
Õ
->
hWndP¨ít
,
WM_COMMAND
, 
	`GET_WM_COMMAND_MPS
÷p->
nID
,
hWnd
,
CBN_DROPDOWN
));

1403 
	`Ârötf
(
°dîr
," 1330: SetWindowPos(lp->ListBoxControl, , 0, 0, 0, 0,..)\n");

1405 
	`SëWödowPos
(
Õ
->
Li°BoxC⁄åﬁ
, 
HWND_TOP
,

1407 
SWP_NOMOVE
 | 
SWP_NOSIZE
 | 
SWP_NOACTIVATE
 | 
SWP_SHOWWINDOW
);

1409 
	`CBoxC≠tuª
(
hWnd
, 1);

1410 
	`SET_STATE
(
Õ
,
CSF_CAPTUREACTIVE
);

1414 i‡(!
	`IS_SET
(
Õ
,
CSF_CAPTUREACTIVE
))

1417 
	`SídMesßge
(
Õ
->
hWndP¨ít
, 
WM_COMMAND
, 
	`GET_WM_COMMAND_MPS
÷p->
nID
,
hWnd
,
CBN_CLOSEUP
));

1419 
	`Ârötf
(
°dîr
," 1343: (hide) SetWindowPos(lp->ListBoxControl, , 0, 0, 0, 0,..)\n");

1421 
	`SëWödowPos
(
Õ
->
Li°BoxC⁄åﬁ
, 0,

1423 
SWP_NOMOVE
 | 
SWP_NOSIZE
 | 
SWP_NOACTIVATE
 | 
SWP_NOZORDER
 | 
SWP_HIDEWINDOW
);

1425 
	`CBoxC≠tuª
(
hWnd
, 0);

1426 
	`CLEAR_STATE
(
Õ
, 
CSF_CAPTUREACTIVE
);

1434  
	`DefWödowProc
–
hWnd
, 
uMsg
, 
wP¨am
, 
lP¨am
);

1436  
CB_OKAY
;

1437 
	}
}

1441 
	$CBoxDøwBuâ⁄
(
HWND
 
hWnd
,
UINT
 
wSèã
,
COMBOBOX
 *
Õ
)

1443 
HDC
 
hDC
;

1444 
x
,
y
;

1445 
dx
,
dy
;

1447 
cx
,
cy
;

1448 
nWidth
,
nHeight
;

1449 
BITMAP
 
bmpCombo
;

1450 
HBITMAP
 
hbmpCombo
 = 0;

1451 
HBITMAP
 
hbmpOld
 = 0;

1452 
HDC
 
hdcSrc
;

1453 
COLORREF
 
rgbText
, 
rgbBk
;

1455 
HBRUSH
 
hBrush
;

1456 
HPEN
 
hPíHigh
,
hPíShadow
;

1457 
RECT
 
rc
;

1459 
hDC
 = 
	`GëDC
(
hWnd
);

1461 
	`C›yRe˘
(&
rc
,&
Õ
->
Buâ⁄Re˘
);

1462 
x
 = 
rc
.
À·
;

1463 
y
 = 
rc
.
t›
;

1464 
dx
 = 
rc
.
right
;

1465 
dy
 = 
rc
.
bŸtom
;

1467 
hPíHigh
 = 
	`GëStockObje˘
(
WHITE_PEN
);

1469 
hPíShadow
 = 
	`GëSysCﬁ‹Pí
(
COLOR_BTNSHADOW
);

1471 
hPíShadow
 = 
	`Cª©ePí
(
PS_SOLID
,1,
	`GëSysCﬁ‹
(
COLOR_BTNSHADOW
));

1474 
hBrush
 = 
	`GëSysCﬁ‹Brush
(
COLOR_BTNFACE
);

1476 
hBrush
 = 
	`Cª©eSﬁidBrush
(
	`GëSysCﬁ‹
(
COLOR_BTNFACE
));

1478 
	`FûlRe˘
(
hDC
, &
rc
, 
hBrush
);

1480 
hBrush
 = 
	`GëStockObje˘
(
BLACK_BRUSH
);

1481 
FûlRe˘
 (
hDC
, &
Õ
->
Buâ⁄Re˘
, 
hBrush
);

1483 
	`Sñe˘Obje˘
(
hDC
,
	`GëStockObje˘
(
BLACK_PEN
));

1484 
	`Re˘™gÀ
(
hDC
,
Õ
->
Buâ⁄Re˘
.
À·
,Õ->Buâ⁄Re˘.
t›
,Õ->Buâ⁄Re˘.
right
,Õ->Buâ⁄Re˘.
bŸtom
);

1486 
rc
.
À·
 +1;Ñc.
right
 -= 1;

1487 
rc
.
t›
 +1;Ñc.
bŸtom
 -= 1;

1489 
	`Døw3DBuâ⁄Re˘
(
hDC
,
hPíHigh
,
hPíShadow
,
rc
,
wSèã
);

1492 i‡(
hbmpCombo
 == 0)

1494 
hbmpCombo
 = 
	`LﬂdBôm≠
(0,(
LPSTR
)
OBM_COMBO
);

1495 
	`GëObje˘
(
hbmpCombo
, (
BITMAP
), (
LPVOID
)&
bmpCombo
);

1496 
nWidth
 = 
bmpCombo
.
bmWidth
;

1497 
nHeight
 = 
bmpCombo
.
bmHeight
;

1503 
hdcSrc
 = 
	`Cª©eCom∑tibÀDC
(
hDC
);

1504 
hbmpOld
 = 
	`Sñe˘Obje˘
(
hdcSrc
, 
hbmpCombo
);

1508 
rgbText
 = 
	`SëTextCﬁ‹
(
hDC
,
	`GëSysCﬁ‹
(
COLOR_BTNTEXT
));

1509 
rgbBk
 = 
	`SëBkCﬁ‹
(
hDC
,
	`GëSysCﬁ‹
(
COLOR_BTNFACE
));

1511 
cx
 = (
dx
 - 
x
 - 
nWidth
)/2;

1512 
cy
 = (
dy
 - 
y
 - 
nHeight
)/2;

1513 i‡(
wSèã
)

1514 { 
cx
++; 
cy
++; }

1515 
	`BôB…
(
hDC
, 
x
+
cx
, 
y
+
cy
, 
nWidth
, 
nHeight
, 
hdcSrc
, 0, 0, 
SRCCOPY
);

1517 
	`SëTextCﬁ‹
(
hDC
, 
rgbText
);

1518 
	`SëBkCﬁ‹
(
hDC
, 
rgbBk
);

1519 
	`Sñe˘Obje˘
(
hdcSrc
,
hbmpOld
);

1520 
	`DñëeDC
(
hdcSrc
);

1523 
	`DñëeObje˘
(
hBrush
);

1524 
	`DñëeObje˘
(
hPíShadow
);

1526 
	`Rñó£DC
(
hWnd
,
hDC
);

1528 i‡(
wSèã
)

1529 
	`SET_STATE
(
Õ
,
CSF_LOCALBUTTONDOWN
);

1531 
	`CLEAR_STATE
(
Õ
,
CSF_LOCALBUTTONDOWN
);

1532 
	}
}

1538 
LRESULT
 
	$DefCOMBOLBOXProc
(
HWND
 
hWnd
, 
UINT
 
msg
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
)

1541  
	`DefLISTBOXProc
(
hWnd
, 
msg
, 
wP¨am
,
lP¨am
);

1543  
	`Li°boxCålProc
(
hWnd
, 
msg
, 
wP¨am
,
lP¨am
);

1544 
	}
}

1550 
	$CBoxSídMou£ToLBox
(
COMBOBOX
 *
Õ
, 
UINT
 
uiMsg
, 
WPARAM
 
wP¨am
, 
POINT
 
±S¸ìn
)

1552 
POINT
 
±
;

1553 
nNCHô
;

1555 
HWND
 
hWndS¸ﬁl
;

1557 
±
 = 
±S¸ìn
;

1558 
	`S¸ìnToClõ¡
(
Õ
->
Li°BoxC⁄åﬁ
,&
±
);

1560 
nNCHô
 = 
	`LOSHORT
(
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
WM_NCHITTEST
, 0, 
	`MAKELPARAM
(
±S¸ìn
.
x
,±S¸ìn.
y
)));

1562 
nNCHô
)

1564 
HTCLIENT
:

1565 i‡(
uiMsg
 =
WM_MOUSEMOVE
 && !
	`IS_SET
(
Õ
,
CSF_LBOXBUTTONDOWN
))

1567 
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
WM_LBUTTONDOWN
, 0, 
	`MAKELONG
((
WORD
)
±
.
x
,(WORDÌt.
y
));

1569 
	`SET_STATE
(
Õ
, 
CSF_BUTTONDOWN
 | 
CSF_LBOXBUTTONDOWN
);

1571 
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
uiMsg
, 
wP¨am
, 
	`MAKELONG
((
WORD
)
±
.
x
,(WORDÌt.
y
));

1575 
HTVSCROLL
:

1576 i‡(0 !(
hWndS¸ﬁl
 = 
	`TWIN_C⁄vîtToSysS¸ﬁl
(
Õ
->
Li°BoxC⁄åﬁ
, 
TRUE
 , &
±
)))

1577 
	`SídMesßge
(
hWndS¸ﬁl
, 
uiMsg
, 
wP¨am
, 
	`MAKELONG
((
WORD
)
±
.
x
,(WORDÌt.
y
));

1583 
	}
}

1588 
	$CBoxC≠tuª
(
HWND
 
hWnd
, 
WORD
 
wFunc
)

1590 
HWND
 
hWndC≠tuª
 = (HWND)0;

1592 i‡(
wFunc
)

1594 
hWndC≠tuª
 = 
	`SëC≠tuª
(
hWnd
);

1596 
	`SëFocus
(
hWnd
);

1599 i‡(!
hWndC≠tuª
)

1600 
	`Rñó£C≠tuª
();

1602 #ifde‡ 
LATER


1603 
	`SëC≠tuª
(
hWndC≠tuª
);

1605 
	`Rñó£C≠tuª
();

1607 
hWndC≠tuª
 = (
HWND
)0;

1610 
	}
}

1615 
	$CBoxDøwEdô
(
COMBOBOX
 *
Õ
, 
HWND
 
hWnd
, 
UINT
 
uiKey
)

1617 
nLí
;

1618 
LPVOID
 
ÕD©a
;

1620 
HRGN
 
hRgn
;

1621 
DRAWITEMSTRUCT
 
dis
;

1629 i‡(
Õ
->
wStyÀ
 & 
CBS_HASSTRINGS
)

1631 i‡(
uiKey
 =(
UINT
)
LB_ERR
)

1633 
nLí
 = ()
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETTEXTLEN
, 
uiKey
, 0L);

1634 i‡(
nLí
 <= 0)

1636 
ÕD©a
 = (
LPVOID
)
	`WöMÆloc
(
nLí
+1);

1637 
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETTEXT
, 
uiKey
, (
LPARAM
)
ÕD©a
);

1638 
	`SídMesßge
(
Õ
->
EdôC⁄åﬁ
, 
WM_SETTEXT
, 
	`°æí
(
ÕD©a
), (
LPARAM
)lpData);

1639 
	`Edô_SëSñ
(
Õ
->
EdôC⁄åﬁ
, 0, -1);

1640 
	`WöFªe
((
LPSTR
)
ÕD©a
);

1644 
dis
.
CéTy≥
 = 
ODT_COMBOBOX
;

1645 
dis
.
CéID
 = (
UINT
)
Õ
->
nID
;

1646 
dis
.
ôemID
 = -1;

1647 
dis
.
ôemA˘i⁄
 = 
ODA_DRAWENTIRE
;

1648 
dis
.
ôemSèã
 = 
ODS_FOCUS
;

1649 
dis
.
hwndIãm
 = 
hWnd
;

1650 
dis
.
ôemD©a
 = 0;

1651 
	`GëClõ¡Re˘
(
Õ
->
EdôC⁄åﬁ
,&
dis
.
rcIãm
);

1652 
dis
.
rcIãm
.
À·
 += 3;

1653 
dis
.
rcIãm
.
right
 -= 3;

1654 
dis
.
rcIãm
.
t›
 += 2;

1655 
dis
.
rcIãm
.
bŸtom
 -= 2;

1657 
dis
.
hDC
 = 
	`GëDC
(
Õ
->
EdôC⁄åﬁ
);

1658 
hRgn
 = 
	`Cª©eRe˘RgnIndúe˘
(&
dis
.
rcIãm
);

1659 
	`Sñe˘ClùRgn
(
dis
.
hDC
,
hRgn
);

1660 
	`Sñe˘Obje˘
(
dis
.
hDC
, 
Õ
->
hF⁄t
);

1661 
	`SídMesßge
(
Õ
->
hWndP¨ít
, 
WM_DRAWITEM
, (
WPARAM
)(
UINT
Óp->
nID
, (
LPARAM
)&
dis
);

1662 
	`Rñó£DC
(
Õ
->
EdôC⁄åﬁ
,
dis
.
hDC
);

1663 
	`DñëeObje˘
(
hRgn
);

1666 
	}
}

1671 
	$CBoxDøwSètic
(
COMBOBOX
 *
Õ
, 
HWND
 
hWnd
, 
UINT
 
uiKey
)

1673 
nLí
;

1674 
HDC
 
hdc
;

1675 
LPVOID
 
ÕD©a
;

1676 
RECT
 
rcClõ¡
;

1677 
HFONT
 
hf⁄Old
 = 0;

1679 
HRGN
 
hRgn
;

1680 
DRAWITEMSTRUCT
 
dis
;

1682 
HBRUSH
 
hbrSètic
, 
hbrOld
;

1686 
hdc
 = 
	`GëDC
(
hWnd
);

1687 
rcClõ¡
.
À·
 = 0;

1688 
rcClõ¡
.
t›
 = 0;

1689 
rcClõ¡
.
right
 = 
Õ
->
Buâ⁄Re˘
.
À·
+1;

1690 
rcClõ¡
.
bŸtom
 = 
Õ
->
uHeight
;

1691 
hbrSètic
 = 
	`Cª©eSﬁidBrush
(
	`GëSysCﬁ‹
(
COLOR_WINDOW
));

1692 
hbrOld
 = 
	`Sñe˘Obje˘
(
hdc
, 
hbrSètic
);

1693 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
BLACK_PEN
));

1694 
	`Re˘™gÀ
(
hdc
, 
rcClõ¡
.
À·
,ÑcClõ¡.
t›
,ÑcClõ¡.
right
,ÑcClõ¡.
bŸtom
);

1695 
	`Sñe˘Obje˘
(
hdc
, 
hbrOld
);

1696 
	`DñëeObje˘
(
hbrSètic
);

1697 
	`Rñó£DC
(
hWnd
, 
hdc
);

1699 i‡(
uiKey
 =(
UINT
)
LB_ERR
)

1706 
hdc
 = 
	`GëDC
(
hWnd
);

1707 
nLí
 = ()
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETTEXTLEN
, (
WPARAM
)
uiKey
, 0L);

1708 i‡(
nLí
 > 0)

1710 
ÕD©a
 = (
LPVOID
)
	`WöMÆloc
(
nLí
+1);

1711 
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETTEXT
, 
uiKey
, (
LPARAM
)
ÕD©a
);

1712 
	`SëBkMode
(
hdc
, 
TRANSPARENT
);

1713 i‡(!
	`IS_SET
(
Õ
, 
CSF_FOCUS
))

1715 
	`SëTextCﬁ‹
(
hdc
, 
	`GëSysCﬁ‹
(
COLOR_WINDOWTEXT
));

1716 
rcClõ¡
.
À·
 += 2;

1719 
	`InÊ©eRe˘
(&
rcClõ¡
, -2, -2);

1720 
hbrSètic
 = 
	`Cª©eSﬁidBrush
(
	`GëSysCﬁ‹
(
COLOR_HIGHLIGHT
));

1721 
hbrOld
 = 
	`Sñe˘Obje˘
(
hdc
, 
hbrSètic
);

1722 
	`FûlRe˘
(
hdc
, &
rcClõ¡
, 
hbrSètic
);

1724 
	`DøwFocusRe˘
(
hdc
, &
rcClõ¡
);

1726 
	`Sñe˘Obje˘
(
hdc
, 
hbrOld
);

1727 
	`DñëeObje˘
(
hbrSètic
);

1728 
	`SëTextCﬁ‹
(
hdc
, 
	`GëSysCﬁ‹
(
COLOR_HIGHLIGHTTEXT
));

1730 i‡(
Õ
->
hF⁄t
)

1731 
hf⁄Old
 = 
	`Sñe˘Obje˘
(
hdc
, 
Õ
->
hF⁄t
);

1732 
	`DøwText
(
hdc
, (
LPSTR
)
ÕD©a
, 
nLí
, &
rcClõ¡
, 
DT_VCENTER
 | 
DT_SINGLELINE
 | 
DT_NOPREFIX
);

1733 i‡(
Õ
->
hF⁄t
)

1734 
	`Sñe˘Obje˘
(
hdc
, 
hf⁄Old
);

1735 
	`WöFªe
((
LPVOID
)
ÕD©a
);

1737 
	`Rñó£DC
(
hWnd
, 
hdc
);

1741 
dis
.
CéTy≥
 = 
ODT_COMBOBOX
;

1742 
dis
.
CéID
 = (
UINT
)
Õ
->
nID
;

1743 
dis
.
ôemID
 = 
uiKey
;

1744 
dis
.
ôemA˘i⁄
 = 
ODA_DRAWENTIRE
;

1745 
dis
.
ôemSèã
 = 
ODS_FOCUS
;

1746 
dis
.
hwndIãm
 = 
hWnd
;

1747 
dis
.
ôemD©a
 = 
	`SídMesßge
(
Õ
->
Li°BoxC⁄åﬁ
, 
LB_GETITEMDATA
, 
uiKey
, 0L);

1748 
	`GëClõ¡Re˘
(
hWnd
, &
dis
.
rcIãm
);

1749 
dis
.
rcIãm
.
À·
 += 3;

1750 
dis
.
rcIãm
.
right
 = 
Õ
->
Buâ⁄Re˘
.
À·
 - 2;

1751 
dis
.
rcIãm
.
t›
 += 2;

1752 
dis
.
rcIãm
.
bŸtom
 -= 2;

1754 
dis
.
hDC
 = 
	`GëDC
(
hWnd
);

1755 
hRgn
 = 
	`Cª©eRe˘RgnIndúe˘
(&
dis
.
rcIãm
);

1756 
	`Sñe˘ClùRgn
(
dis
.
hDC
, 
hRgn
);

1757 
	`Sñe˘Obje˘
(
dis
.
hDC
, 
Õ
->
hF⁄t
);

1758 
	`SídMesßge
(
Õ
->
hWndP¨ít
, 
WM_DRAWITEM
, (
WPARAM
)(
UINT
Óp->
nID
, (
LPARAM
)&
dis
);

1759 
	`Rñó£DC
(
hWnd
, 
dis
.
hDC
);

1760 
	`DñëeObje˘
(
hRgn
);

1764 
	}
}

	@mwin/winlib/draw3d.c

1 
	~"wödows.h
"

2 
	~"wötoﬁs.h
"

23 
WINAPI


24 
	$Døw3dShadow
(
HDC
 
hDC
,
x
,
y
,
w
,
h
,
COLORREF
 
¸T›
,COLORREF 
¸BŸtom
)

26 
HPEN
 
hPíT›
, 
hPíBŸtom
, 
hﬁdPí
;

28 
hPíT›
 = 
	`Cª©ePí
–
PS_SOLID
, 1, 
¸T›
);

29 
hPíBŸtom
 = 
	`Cª©ePí
–
PS_SOLID
, 1, 
¸BŸtom
);

30 
hﬁdPí
 = 
	`Sñe˘Obje˘
–
hDC
, 
hPíT›
);

31 
	`MoveToEx
–
hDC
, 
x
, 
y
+
h
-2, 
NULL
);

32 
	`LöeTo
–
hDC
, 
x
, 
y
);

33 
	`LöeTo
–
hDC
, 
x
+
w
-1, 
y
);

35 
	`Sñe˘Obje˘
–
hDC
, 
hPíBŸtom
);

36 
	`MoveToEx
–
hDC
, 
x
+
w
-1, 
y
+1, 
NULL
);

37 
	`LöeTo
–
hDC
, 
x
+
w
-1, 
y
+
h
-1);

38 
	`LöeTo
–
hDC
, 
x
, 
y
+
h
-1);

40 
	`Sñe˘Obje˘
–
hDC
, 
hﬁdPí
);

41 
	`DñëeObje˘
–
hPíT›
);

42 
	`DñëeObje˘
–
hPíBŸtom
);

43 
	}
}

53 
WINAPI


54 
	$Døw3dBox
(
HDC
 
hDC
,
x
,
y
,
w
,
h
,
COLORREF
 
¸T›
,COLORREF 
¸BŸtom
)

56 
HPEN
 
hPíT›
, 
hPíBŸtom
, 
hﬁdPí
;

58 
hPíT›
 = 
	`Cª©ePí
–
PS_SOLID
, 1, 
¸T›
);

59 
hPíBŸtom
 = 
	`Cª©ePí
–
PS_SOLID
, 1, 
¸BŸtom
);

60 
hﬁdPí
 = 
	`Sñe˘Obje˘
–
hDC
, 
hPíT›
);

61 
	`MoveToEx
–
hDC
, 
x
, 
y
+
h
-2, 
NULL
);

62 
	`LöeTo
–
hDC
, 
x
, 
y
);

63 
	`MoveToEx
–
hDC
, 
x
, 
y
, 
NULL
);

64 
	`LöeTo
–
hDC
, 
x
+
w
-1, 
y
);

66 
	`Sñe˘Obje˘
–
hDC
, 
hPíBŸtom
);

67 
	`MoveToEx
–
hDC
, 
x
+
w
-1, 
y
, 
NULL
);

68 
	`LöeTo
–
hDC
, 
x
+
w
-1, 
y
+
h
-1);

69 
	`LöeTo
–
hDC
, 
x
-1, 
y
+
h
-1);

71 
	`Sñe˘Obje˘
–
hDC
, 
hﬁdPí
);

72 
	`DñëeObje˘
–
hPíT›
);

73 
	`DñëeObje˘
–
hPíBŸtom
);

74 
	}
}

79 
WINAPI


80 
	$Døw3dIn£t
(
HDC
 
hDC
,
x
,
y
,
w
,
h
)

82 
	`Døw3dBox
(
hDC
, 
x
, 
y
, 
w
, 
h
,

83 
	`GëSysCﬁ‹
(
COLOR_BTNSHADOW
), GëSysCﬁ‹(
COLOR_BTNHIGHLIGHT
));

84 ++
x
; ++
y
; 
w
 -2; 
h
 -= 2;

85 
	`Døw3dBox
(
hDC
, 
x
, 
y
, 
w
, 
h
,

86 
	`GëSysCﬁ‹
(
COLOR_WINDOWFRAME
), GëSysCﬁ‹(
COLOR_3DLIGHT
));

87 
	}
}

92 
WINAPI


93 
	$Døw3dOut£t
(
HDC
 
hDC
,
x
,
y
,
w
,
h
)

95 
	`Døw3dBox
(
hDC
, 
x
, 
y
, 
w
, 
h
,

96 
	`GëSysCﬁ‹
(
COLOR_3DLIGHT
), GëSysCﬁ‹(
COLOR_WINDOWFRAME
));

97 ++
x
; ++
y
; 
w
 -2; 
h
 -= 2;

98 
	`Døw3dBox
(
hDC
, 
x
, 
y
, 
w
, 
h
,

99 
	`GëSysCﬁ‹
(
COLOR_BTNHIGHLIGHT
), GëSysCﬁ‹(
COLOR_BTNSHADOW
));

100 
	}
}

105 
WINAPI


106 
	$Døw3dPushDown
(
HDC
 
hDC
, 
x
, 
y
, 
w
, 
h
)

108 
	`Døw3dBox
(
hDC
, 
x
, 
y
, 
w
, 
h
, 
	`GëSysCﬁ‹
(
COLOR_BTNSHADOW
),

109 
	`GëSysCﬁ‹
(
COLOR_BTNSHADOW
));

110 
	}
}

115 
WINAPI


116 
	$Døw3dUpDownSèã
(
HDC
 
hDC
, 
x
, 
y
, 
w
, 
h
, 
BOOL
 
fDown
)

118 i‡(
fDown
)

119 
	`Døw3dPushDown
(
hDC
, 
x
, 
y
, 
w
, 
h
);

120 
	`Døw3dOut£t
(
hDC
, 
x
, 
y
, 
w
, 
h
);

121 
	}
}

123 
WINAPI


124 
	$Døw3dUpFøme
(
HDC
 
hDC
, 
l
, 
t
, 
r
, 
b
)

126 
RECT
 
rc
;

127 
HBRUSH
 
hbr
;

129 
	`SëRe˘
(&
rc
, 
l
, 
t
, 
r
, 
b
);

130 
	`Døw3dBox
(
hDC
, 
rc
.
À·
,Ñc.
t›
,

131 
rc
.
right
-rc.
À·
,Ñc.
bŸtom
-rc.
t›
,

132 
	`GëSysCﬁ‹
(
COLOR_3DLIGHT
),

133 
	`GëSysCﬁ‹
(
COLOR_WINDOWFRAME
));

134 
	`InÊ©eRe˘
(&
rc
, -1, -1);

135 
	`Døw3dBox
(
hDC
, 
rc
.
À·
,Ñc.
t›
,

136 
rc
.
right
-rc.
À·
,Ñc.
bŸtom
-rc.
t›
,

137 
	`GëSysCﬁ‹
(
COLOR_BTNHIGHLIGHT
),

138 
	`GëSysCﬁ‹
(
COLOR_BTNSHADOW
));

139 
	`InÊ©eRe˘
(&
rc
, -1, -1);

141 
hbr
 = 
	`Cª©eSﬁidBrush
(
	`GëSysCﬁ‹
(
COLOR_BTNFACE
));

142 
	`FûlRe˘
(
hDC
, &
rc
, 
hbr
);

143 
	`DñëeObje˘
(
hbr
);

144 
	}
}

	@mwin/winlib/edit.c

51 
	~<°dio.h
>

52 
	~<°dlib.h
>

53 
	~<°rög.h
>

54 
	#MWINCLUDECOLORS


	)

55 
	~"wödows.h
"

56 
	~"wötoﬁs.h
"

57 
	~"devi˚.h
"

59 #i‡
HAVE_HZK_SUPPORT
 || 
HAVE_BIG5_SUPPORT


60 
	#USE_BIG5


	)

61 
	#DEFAULT_FONT
 
SYSTEM_FIXED_FONT


	)

63 
	#DEFAULT_FONT
 
DEFAULT_GUI_FONT


	)

66 
	#WIDTH_EDIT_BORDER
 2

	)

67 
	#MARGIN_EDIT_LEFT
 1

	)

68 
	#MARGIN_EDIT_TOP
 1

	)

69 
	#MARGIN_EDIT_RIGHT
 2

	)

70 
	#MARGIN_EDIT_BOTTOM
 1

	)

72 
	#LEN_SLEDIT_BUFFER
 3000

	)

73 
	#LEN_SLEDIT_UNDOBUFFER
 1024

	)

75 
	#EST_FOCUSED
 0x00000001L

	)

76 
	#EST_MODIFY
 0x00000002L

	)

77 
	#EST_READONLY
 0x00000004L

	)

78 
	#EST_REPLACE
 0x00000008L

	)

80 
	#EDIT_OP_NONE
 0x00

	)

81 
	#EDIT_OP_DELETE
 0x01

	)

82 
	#EDIT_OP_INSERT
 0x02

	)

83 
	#EDIT_OP_REPLACE
 0x03

	)

85 
	sègSLEDITDATA
 {

86 
HFONT
 
	mhF⁄t
;

87 
	mbuf„rLí
;

89 
	md©aEnd
;

90 
	medôPos
;

91 
	mˇªtOff
;

92 
	m°¨tPos
;

94 
	m£lSèπ
;

95 
	m£lEnd
;

97 
	m∑sswdCh¨
;

99 
	mÀ·M¨gö
;

100 
	mt›M¨gö
;

101 
	mrightM¨gö
;

102 
	mbŸtomM¨gö
;

104 
	mh¨dLimô
;

106 
	mœ°Op
;

107 
	mœ°Pos
;

108 
	maf„˘edLí
;

109 
	mundoBuf„rLí
;

110 
	mundoBuf„r
 [
LEN_SLEDIT_UNDOBUFFER
];

111 
	mbuf„r
 [
LEN_SLEDIT_BUFFER
];

112 } 
	tSLEDITDATA
, *
	tPSLEDITDATA
;

114 
LRESULT
 
CALLBACK


115 
SLEdôCålProc
 (
HWND
 
hWnd
, 
UINT
 
mesßge
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
);

117 
	$GëSysCh¨Height
 (
HWND
 
hwnd
)

119 #i‚de‡
USE_BIG5


120 
HDC
 
hdc
;

121 
xw
, 
xh
, 
xb
;

123 
hdc
 = 
	`GëDC
(
hwnd
);

124 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
DEFAULT_FONT
));

125 
	`GdSëF⁄t
(
hdc
->
f⁄t
->
pf⁄t
);

126 
	`GdGëTextSize
(
hdc
->
f⁄t
->
pf⁄t
,"X",1, &
xw
,&
xh
,&
xb
,
MWTF_ASCII
);

127 
	`Rñó£DC
(
hwnd
,
hdc
);

129  
xh
;

133 
	}
}

135 
	$GëSysCh¨Width
 (
HWND
 
hwnd
)

137 #i‚de‡
USE_BIG5


138 
HDC
 
hdc
;

139 
xw
, 
xh
, 
xb
;

141 
hdc
 = 
	`GëDC
(
hwnd
);

142 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
DEFAULT_FONT
));

143 
	`GdSëF⁄t
(
hdc
->
f⁄t
->
pf⁄t
);

144 
	`GdGëTextSize
(
hdc
->
f⁄t
->
pf⁄t
,"X",1, &
xw
,&
xh
,&
xb
,
MWTF_ASCII
);

145 
	`Rñó£DC
(
hwnd
,
hdc
);

147  
xw
;

151 
	}
}

153 
	$GëSysCCh¨Width
 (
HWND
 
hwnd
)

155  (2*
	`GëSysCh¨Width
(
hwnd
));

156 
	}
}

158 
WINAPI
 
	$MwRegi°îEdôC⁄åﬁ
(
HINSTANCE
 
hIn°™˚
)

160 
WNDCLASS
 
wc
;

162 
wc
.
°yÀ
 = 
CS_HREDRAW
 | 
CS_VREDRAW
 | 
CS_DBLCLKS
 | 
CS_GLOBALCLASS
;

163 
wc
.
Õ‚WndProc
 = (
WNDPROC
)
SLEdôCålProc
;

164 
wc
.
cbClsExåa
 = 0;

165 
wc
.
cbWndExåa
 = 0;

166 
wc
.
hIn°™˚
 = hInstance;

167 
wc
.
hIc⁄
 = 
NULL
;

168 
wc
.
hCurs‹
 = 0;

169 
wc
.
hbrBackground

	`GëStockObje˘
(
WHITE_BRUSH
);

170 
wc
.
ÕszMíuName
 = 
NULL
;

171 
wc
.
ÕszCœssName
= "EDIT";

173  
	`Regi°îCœss
(&
wc
);

174 
	}
}

176 
	$edtGëOutWidth
 (c⁄° 
HWND
 
pCål
)

178  
pCål
->
˛úe˘
.
right
 -ÖCål->˛úe˘.
À·


179 - ((
PSLEDITDATA
)(
pCål
->
u£rd©a2
))->
À·M¨gö


180 - ((
PSLEDITDATA
)(
pCål
->
u£rd©a2
))->
rightM¨gö
;

181 
	}
}

183 
	$edtGëSèπDi•PosAtEnd
 (c⁄° 
HWND
 
pCål
, 
PSLEDITDATA
 
pSLEdôD©a
)

185 
nOutWidth
 = 
	`edtGëOutWidth
 (
pCål
);

186 
ídPos
 = 
pSLEdôD©a
->
d©aEnd
;

187 
√wSèπPos
 = 
pSLEdôD©a
->
°¨tPos
;

188 c⁄° * 
buf„r
 = 
pSLEdôD©a
->buffer;

190 
TRUE
) {

191 i‡((
ídPos
 - 
√wSèπPos
Ë* 
	`GëSysCh¨Width
 (
pCål
Ë< 
nOutWidth
)

195 i‡((
BYTE
)
buf„r
 [
√wSèπPos
] > 0xA0)

197 
√wSèπPos
 ++;

198 i‡(
√wSèπPos
 < 
pSLEdôD©a
->
d©aEnd
)

200 #i‚de‡
USE_BIG5


201 i‡((
BYTE
)
buf„r
 [
√wSèπPos
] > 0xA0)

203 i‡–((
BYTE
)
buf„r
 [
√wSèπPos
] >= 0x40 && (BYTE)buffer[newStartPos] <= 0x7e) ||

204 ((
BYTE
)
buf„r
 [
√wSèπPos
] >= 0xa1 && (BYTE)buffer[newStartPos] <= 0xfe))

206 
√wSèπPos
 ++;

210 
√wSèπPos
 ++;

213  
√wSèπPos
;

214 
	}
}

216 
	$edtGëDi•Lí
 (c⁄° 
HWND
 
pCål
)

218 
i
, 
n
 = 0;

219 
nOutWidth
 = 
	`edtGëOutWidth
 (
pCål
);

220 
nTextWidth
 = 0;

221 
PSLEDITDATA
 
pSLEdôD©a
 = (PSLEDITDATA)(
pCål
->
u£rd©a2
);

222 c⁄° * 
buf„r
 = 
pSLEdôD©a
->buffer;

224 
i
 = 
pSLEdôD©a
->
°¨tPos
; i <ÖSLEdôD©a->
d©aEnd
; i++) {

226 i‡((
BYTE
)
buf„r
 [
i
] > 0xA0)

228 
i
++;

229 i‡(
i
 < 
pSLEdôD©a
->
d©aEnd
)

231 #i‚de‡
USE_BIG5


232 i‡((
BYTE
)
buf„r
 [
i
] > 0xA0)

234 i‡–((
BYTE
)
buf„r
 [
i
] >= 0x40 && (BYTE)buffer[i] <= 0x7e) ||

235 ((
BYTE
)
buf„r
 [
i
] >= 0xa1 && (BYTE)buffer[i] <= 0xfe))

238 
nTextWidth
 +
	`GëSysCCh¨Width
 (
pCål
);

239 
n
 += 2;

242 
i
--;

246 
nTextWidth
 +
	`GëSysCh¨Width
 (
pCål
);

247 
n
++;

252 
nTextWidth
 +
	`GëSysCh¨Width
 (
pCål
);

253 
n
++;

256 i‡(
nTextWidth
 > 
nOutWidth
)

260  
n
;

261 
	}
}

263 
	$edtGëOff£t
 (
HWND
 
hwnd
,c⁄° 
SLEDITDATA
* 
pSLEdôD©a
, 
x
)

265 
i
;

266 
√wOff
 = 0;

267 
nTextWidth
 = 0;

268 c⁄° * 
buf„r
 = 
pSLEdôD©a
->buffer;

270 
x
 -
pSLEdôD©a
->
À·M¨gö
;

271 
i
 = 
pSLEdôD©a
->
°¨tPos
; i <ÖSLEdôD©a->
d©aEnd
; i++) {

272 i‡((
nTextWidth
 + (
	`GëSysCh¨Width
(
hwnd
Ë>> 1)Ë>
x
)

276 i‡((
BYTE
)
buf„r
 [
i
] > 0xA0)

278 
i
++;

279 i‡(
i
 < 
pSLEdôD©a
->
d©aEnd
)

281 #i‚de‡
USE_BIG5


282 i‡((
BYTE
)
buf„r
 [
i
] > 0xA0)

284 i‡–((
BYTE
)
buf„r
 [
i
] >= 0x40 && (BYTE)buffer[i] <= 0x7e) ||

285 ((
BYTE
)
buf„r
 [
i
] >= 0xa1 && (BYTE)buffer[i] <= 0xfe))

288 
nTextWidth
 +
	`GëSysCCh¨Width
 (
hwnd
);

289 
√wOff
 += 2;

292 
i
 --;

296 
nTextWidth
 +
	`GëSysCh¨Width
 (
hwnd
);

297 
√wOff
 ++;

302 
nTextWidth
 +
	`GëSysCh¨Width
 (
hwnd
);

303 
√wOff
 ++;

308  
√wOff
;

309 
	}
}

311 
BOOL
 
	$edtIsACCh¨Bef‹ePosôi⁄
 (c⁄° * 
°rög
, 
pos
)

313 i‡(
pos
 < 2)

314  
FALSE
;

317 #i‚de‡
USE_BIG5


319 i‡((
BYTE
)
°rög
 [
pos
 - 2] > 0xA0 && (BYTE)string [pos - 1] > 0xA0)

320  
TRUE
;

322 i‡((
BYTE
)
°rög
 [
pos
 - 2] > 0xA0)

324 i‡–((
BYTE
)
°rög
 [
pos
 - 1] >= 0x40 && (BYTE)string[pos - 1] <= 0x7e) ||

325 ((
BYTE
)
°rög
 [
pos
 - 1] >= 0xa1 && (BYTE)string[pos - 1] <= 0xfe))

326  
TRUE
;

330  
FALSE
;

331 
	}
}

333 
BOOL
 
	$edtIsACCh¨AtPosôi⁄
 (c⁄° * 
°rög
, 
Àn
, 
pos
)

335 i‡(
pos
 > (
Àn
 - 2))

336  
FALSE
;

339 #i‚de‡
USE_BIG5


340 i‡((
BYTE
)
°rög
 [
pos
] > 0xA0 && (BYTE)string [pos + 1] > 0xA0)

341  
TRUE
;

343 i‡((
BYTE
)
°rög
 [
pos
] > 0xA0)

345 i‡–((
BYTE
)
°rög
 [
pos
 + 1] >= 0x40 && (BYTE)string [pos + 1] <= 0x7e) ||

346 ((
BYTE
)
°rög
 [
pos
 + 1] >= 0xa1 && (BYTE)string [pos + 1] <= 0xfe)) {

349  
TRUE
;

354  
FALSE
;

355 
	}
}

357 
LRESULT
 
CALLBACK


358 
	$SLEdôCålProc
 (
HWND
 
hWnd
, 
UINT
 
mesßge
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
)

360 
HWND
 
pCål
;

361 
DWORD
 
dwStyÀ
;

362 
HDC
 
hdc
;

363 
PSLEDITDATA
 
pSLEdôD©a
;

364 
RECT
 
rc
;

366 
pCål
 = 
hWnd
;

367 
dwStyÀ
 = 
pCål
->
°yÀ
;

369 
mesßge
)

371 
WM_CREATE
:

372 i‡(!(
pSLEdôD©a
 = 
	`mÆloc
 ( (
SLEDITDATA
)))) {

373 #i‚de‡
PSP


374 
	`Ârötf
 (
°dîr
, "EDIT: mallocÉrror!\n");

379 
pSLEdôD©a
->
hF⁄t
 = 
	`GëStockObje˘
(
DEFAULT_FONT
);

381 
pSLEdôD©a
->
buf„rLí
 = 
LEN_SLEDIT_BUFFER
;

382 
pSLEdôD©a
->
edôPos
 = 0;

383 
pSLEdôD©a
->
ˇªtOff
 = 0;

384 
pSLEdôD©a
->
°¨tPos
 = 0;

386 
pSLEdôD©a
->
£lSèπ
 = 0;

387 
pSLEdôD©a
->
£lEnd
 = 0;

388 
pSLEdôD©a
->
∑sswdCh¨
 = '*';

389 
pSLEdôD©a
->
À·M¨gö
 = 
MARGIN_EDIT_LEFT
;

390 
pSLEdôD©a
->
t›M¨gö
 = 
MARGIN_EDIT_TOP
;

391 
pSLEdôD©a
->
rightM¨gö
 = 
MARGIN_EDIT_RIGHT
;

392 
pSLEdôD©a
->
bŸtomM¨gö
 = 
MARGIN_EDIT_BOTTOM
;

394 
pSLEdôD©a
->
h¨dLimô
 = -1;

397 
pSLEdôD©a
->
œ°Op
 = 
EDIT_OP_NONE
;

398 
pSLEdôD©a
->
œ°Pos
 = 0;

399 
pSLEdôD©a
->
af„˘edLí
 = 0;

400 
pSLEdôD©a
->
undoBuf„rLí
 = 
LEN_SLEDIT_UNDOBUFFER
;

401 
pSLEdôD©a
->
undoBuf„r
 [0] = '\0';

403 
pSLEdôD©a
->
d©aEnd
 = 
	`°æí
 (
pCål
->
szTôÀ
);

404 
	`mem˝y
 (
pSLEdôD©a
->
buf„r
, 
pCål
->
szTôÀ
,

405 
	`mö
 (
LEN_SLEDIT_BUFFER
, 
pSLEdôD©a
->
d©aEnd
));

407 
pCål
->
u£rd©a2
 = (
DWORD
Ë
pSLEdôD©a
;

409 
pCål
->
u£rd©a
 = 0;

412 
WM_DESTROY
:

413 
	`De°royC¨ë
 ();

415 
	`‰ì
 ((*)
pCål
->
u£rd©a2
);

418 
WM_CHANGESIZE
:

420 
pCål
->
˛
 =ÖCål->
À·
 + 
WIDTH_EDIT_BORDER
;

421 
pCål
->
˘
 =ÖCål->
t›
 + 
WIDTH_EDIT_BORDER
;

422 
pCål
->
¸
 =ÖCål->
right
 - 
WIDTH_EDIT_BORDER
;

423 
pCål
->
cb
 =ÖCål->
bŸtom
 - 
WIDTH_EDIT_BORDER
;

429 
WM_SETFONT
:

431 
pSLEdôD©a
 = (
PSLEDITDATA
Ë(
pCål
->
u£rd©a2
);

432 
pSLEdôD©a
->
hF⁄t
 = (
HFONT
)
wP¨am
;

434 
	`ShowWödow
(
hWnd
, 
SW_HIDE
);

435 
	`ShowWödow
(
hWnd
, 
SW_SHOWNA
);

437 if(
	`LOWORD
(
lP¨am
))

438 
	`InvÆid©eRe˘
(
hWnd
,
NULL
,
TRUE
);

440  (
LRESULT
)0;

442 
WM_GETFONT
:

443 
pSLEdôD©a
 = (
PSLEDITDATA
Ë(
pCål
->
u£rd©a2
);

444  (
LRESULT
)
pSLEdôD©a
->
hF⁄t
;

448 
WM_SETCURSOR
:

449 i‡(
dwStyÀ
 & 
WS_DISABLED
)

451 
	`SëCurs‹
 (
	`GëSy°emCurs‹
 (
IDC_ARROW
));

456 
WM_KILLFOCUS
:

457 
pCål
->
u£rd©a
 &~
EST_FOCUSED
;

459 
	`HideC¨ë
 (
hWnd
);

460 
	`De°royC¨ë
 ();

462 
	`SídMesßge
 (
	`GëP¨ít
 (
hWnd
), 
WM_COMMAND
,

463 (
WPARAM
Ë
	`MAKELONG
 (
pCål
->
id
, 
EN_KILLFOCUS
), (
LPARAM
)
hWnd
);

466 
WM_SETFOCUS
:

467 i‡(
pCål
->
u£rd©a
 & 
EST_FOCUSED
)

470 
pCål
->
u£rd©a
 |
EST_FOCUSED
;

472 
pSLEdôD©a
 = (
PSLEDITDATA
Ë(
pCål
->
u£rd©a2
);

475 
	`Cª©eC¨ë
 (
hWnd
, 
NULL
, 1 ,

476 
hWnd
->
˛úe˘
.
bŸtom
-hWnd->˛úe˘.
t›
-2);

477 
	`SëC¨ëPos
 (
pSLEdôD©a
->
ˇªtOff
 * 
	`GëSysCh¨Width
 (
hWnd
)

478 + 
pSLEdôD©a
->
À·M¨gö
,ÖSLEdôD©a->
t›M¨gö
);

479 
	`ShowC¨ë
 (
hWnd
);

481 
	`SídMesßge
 (
	`GëP¨ít
 (
hWnd
), 
WM_COMMAND
,

482 (
WPARAM
Ë
	`MAKELONG
 (
pCål
->
id
, 
EN_SETFOCUS
), (
LPARAM
Ë
hWnd
);

485 
WM_ENABLE
:

486 i‡–(!(
dwStyÀ
 & 
WS_DISABLED
Ë&& !
wP¨am
)

487 || ((
dwStyÀ
 & 
WS_DISABLED
Ë&& 
wP¨am
) ) {

488 i‡(
wP¨am
)

489 
pCål
->
°yÀ
 &~
WS_DISABLED
;

491 
pCål
->
°yÀ
 |
WS_DISABLED
;

493 
	`InvÆid©eRe˘
 (
hWnd
, 
NULL
, 
FALSE
);

497 
WM_NCCALCSIZE
:

499 
LPNCCALCSIZE_PARAMS
 
Õnc
;

502 
Õnc
 = (
LPNCCALCSIZE_PARAMS
)
lP¨am
;

503 if(
	`GëWödowL⁄g
(
hWnd
, 
GWL_STYLE
Ë& 
WS_BORDER
)

504 
	`InÊ©eRe˘
(&
Õnc
->
rgrc
[0], -2, -2);

508 
WM_NCPAINT
:

509 
hdc
 = 
wP¨am
? (
HDC
)wP¨am: 
	`GëWödowDC
 (
hWnd
);

510 
	`GëWödowRe˘
(
hWnd
, &
rc
);

512 i‡(
dwStyÀ
 & 
WS_BORDER
)

513 
	`Døw3dIn£t
(
hdc
, 
rc
.
À·
,Ñc.
t›
,

514 
rc
.
right
-rc.
À·
,Ñc.
bŸtom
-rc.
t›
);

516 i‡(!
wP¨am
)

517 
	`Rñó£DC
 (
hWnd
, 
hdc
);

520 
WM_PAINT
:

522 
di•Lí
;

523 * 
di•Buf„r
;

524 
RECT
 
ª˘
,
rc
;

525 
PAINTSTRUCT
 
ps
;

527 
HGDIOBJ
 
ﬁdf⁄t
;

528 
ﬁdf⁄t
=
NULL
;

530 
hdc
 = 
	`BegöPaöt
 (
hWnd
,&
ps
);

531 
	`GëClõ¡Re˘
 (
hWnd
, &
ª˘
);

533 i‡(
dwStyÀ
 & 
WS_DISABLED
)

536 
	`SëBrushCﬁ‹
 (
hdc
, 
LTGRAY
 );

537 
	`FûlBox
 (
hdc
, 0, 0, 
ª˘
.
right
,Ñe˘.
bŸtom
);

539 
rc
.
À·
=0;Ñc.
t›
=0;Ñc.
bŸtom
=
ª˘
.bŸtom;Ñc.
right
=rect.right;

540 
	`FûlRe˘
(
hdc
,&
rc
,
	`GëStockObje˘
(
LTGRAY_BRUSH
));

542 
	`SëBkCﬁ‹
 (
hdc
, 
LTGRAY
 );

547 
	`SëBrushCﬁ‹
 (
hdc
, 
WHITE
 );

548 
	`FûlBox
 (
hdc
, 0, 0, 
ª˘
.
right
,Ñe˘.
bŸtom
);

550 
rc
.
À·
=0;Ñc.
t›
=0;Ñc.
bŸtom
=
ª˘
.bŸtom;Ñc.
right
=rect.right;

551 
	`FûlRe˘
(
hdc
,&
rc
,
	`GëStockObje˘
(
WHITE_BRUSH
));

553 
	`SëBkCﬁ‹
 (
hdc
, 
WHITE
 );

556 
	`SëTextCﬁ‹
 (
hdc
, 
BLACK
 );

557 
di•Lí
 = 
	`edtGëDi•Lí
 (
pCål
);

558 i‡(
di•Lí
 == 0)

560 
	`EndPaöt
 (
hWnd
, &
ps
);

564 
pSLEdôD©a
 = (
PSLEDITDATA
Ë(
pCål
->
u£rd©a2
);

566 #ifde‡
_DEBUG


567 i‡(
pSLEdôD©a
->
°¨tPos
 >ÖSLEdôD©a->
d©aEnd
)

568 
	`Ârötf
 (
°dîr
, "ASSERT failure: %s.\n", "Edit Paint");

571 
di•Buf„r
 = 
	`ALLOCA
(
di•Lí
 + 1);

573 i‡(
dwStyÀ
 & 
ES_PASSWORD
)

574 
	`mem£t
 (
di•Buf„r
, '*', 
di•Lí
);

576 
	`mem˝y
 (
di•Buf„r
,

577 
pSLEdôD©a
->
buf„r
 +ÖSLEdôD©a->
°¨tPos
,

578 
di•Lí
);

580 
di•Buf„r
 [
di•Lí
] = '\0';

583 
ª˘
.
À·
 +
pSLEdôD©a
->
À·M¨gö
;

584 
ª˘
.
t›
 +
pSLEdôD©a
->
t›M¨gö
;

585 
ª˘
.
right
 -
pSLEdôD©a
->
rightM¨gö
;

586 
ª˘
.
bŸtom
 -
pSLEdôD©a
->
bŸtomM¨gö
;

590 
	`ClùRe˘I¡î£˘
 (
hdc
, &
ª˘
);

592 
	`GdSëClùRe˘s
(
hdc
->
psd
,1,&
ª˘
);

596 #ifde‡
USE_BIG5


597 
ﬁdf⁄t
=
	`Sñe˘Obje˘
(
hdc
,
	`Cª©eF⁄t
(12,

599 
FF_DONTCARE
|
DEFAULT_PITCH
,

602 
	`Sñe˘Obje˘
(
hdc
, 
pSLEdôD©a
->
hF⁄t
);

604 
	`TextOut
 (
hdc
, 
pSLEdôD©a
->
À·M¨gö
,ÖSLEdôD©a->
t›M¨gö
,

605 
di•Buf„r
,-1);

607 #ifde‡
USE_BIG5


608 
	`DñëeObje˘
(
	`Sñe˘Obje˘
(
hdc
,
ﬁdf⁄t
));

611 
	`EndPaöt
 (
hWnd
, &
ps
);

613 
	`FREEA
(
di•Buf„r
);

617 
WM_KEYDOWN
:

619 
BOOL
 
bCh™ge
 = 
FALSE
;

620 
i
;

621 
RECT
 
InvRe˘
;

622 
dñëed
;

624 
pSLEdôD©a
 = (
PSLEDITDATA
Ë(
pCål
->
u£rd©a2
);

626 ()(
wP¨am
))

629 
SCANCODE_ENTER
:

630 
	`SídMesßge
 (
	`GëP¨ít
 (
hWnd
), 
WM_COMMAND
,

631 (
WPARAM
Ë
	`MAKELONG
 (
pCål
->
id
, 
EN_ENTER
), (
LPARAM
Ë
hWnd
);

634 
SCANCODE_HOME
:

635 i‡(
pSLEdôD©a
->
edôPos
 == 0)

638 
pSLEdôD©a
->
edôPos
 = 0;

639 
pSLEdôD©a
->
ˇªtOff
 = 0;

641 
	`SëC¨ëPos
 (
pSLEdôD©a
->
ˇªtOff
 * 
	`GëSysCh¨Width
 (
hWnd
)

642 + 
pSLEdôD©a
->
À·M¨gö
,ÖSLEdôD©a->
t›M¨gö
);

643 i‡(
pSLEdôD©a
->
°¨tPos
 != 0)

644 
	`InvÆid©eRe˘
 (
hWnd
, 
NULL
, 
FALSE
);

646 
pSLEdôD©a
->
°¨tPos
 = 0;

649 
SCANCODE_END
:

651 
√wSèπPos
;

653 i‡(
pSLEdôD©a
->
edôPos
 =pSLEdôD©a->
d©aEnd
)

656 
√wSèπPos
 = 
	`edtGëSèπDi•PosAtEnd
 (
pCål
, 
pSLEdôD©a
);

658 
pSLEdôD©a
->
edôPos
 =ÖSLEdôD©a->
d©aEnd
;

659 
pSLEdôD©a
->
ˇªtOff
 =ÖSLEdôD©a->
edôPos
 - 
√wSèπPos
;

661 
	`SëC¨ëPos
 (
pSLEdôD©a
->
ˇªtOff
 * 
	`GëSysCh¨Width
 (
hWnd
)

662 + 
pSLEdôD©a
->
À·M¨gö
,ÖSLEdôD©a->
t›M¨gö
);

663 i‡(
pSLEdôD©a
->
°¨tPos
 !
√wSèπPos
)

664 
	`InvÆid©eRe˘
 (
hWnd
, 
NULL
, 
FALSE
);

666 
pSLEdôD©a
->
°¨tPos
 = 
√wSèπPos
;

671 
VK_LEFT
:

673 
BOOL
 
bS¸ﬁl
 = 
FALSE
;

674 
s¸ﬁlSãp
;

676 i‡(
pSLEdôD©a
->
edôPos
 == 0)

679 i‡(
	`edtIsACCh¨Bef‹ePosôi⁄
 (
pSLEdôD©a
->
buf„r
,

680 
pSLEdôD©a
->
edôPos
))

682 
s¸ﬁlSãp
 = 2;

683 
pSLEdôD©a
->
edôPos
 -= 2;

686 
s¸ﬁlSãp
 = 1;

687 
pSLEdôD©a
->
edôPos
 --;

690 
pSLEdôD©a
->
ˇªtOff
 -
s¸ﬁlSãp
;

691 i‡(
pSLEdôD©a
->
ˇªtOff
 == 0

692 && 
pSLEdôD©a
->
edôPos
 != 0)

694 
bS¸ﬁl
 = 
TRUE
;

696 i‡(
	`edtIsACCh¨Bef‹ePosôi⁄
 (
pSLEdôD©a
->
buf„r
,

697 
pSLEdôD©a
->
edôPos
))

699 
pSLEdôD©a
->
°¨tPos
 -= 2;

700 
pSLEdôD©a
->
ˇªtOff
 = 2;

704 
pSLEdôD©a
->
°¨tPos
 --;

705 
pSLEdôD©a
->
ˇªtOff
 = 1;

708 i‡(
pSLEdôD©a
->
ˇªtOff
 < 0)

710 
pSLEdôD©a
->
°¨tPos
 = 0;

711 
pSLEdôD©a
->
ˇªtOff
 = 0;

714 
	`SëC¨ëPos
 (
pSLEdôD©a
->
ˇªtOff
 * 
	`GëSysCh¨Width
 (
hWnd
)

715 + 
pSLEdôD©a
->
À·M¨gö
,ÖSLEdôD©a->
t›M¨gö
);

717 i‡(
bS¸ﬁl
)

718 
	`InvÆid©eRe˘
 (
hWnd
, 
NULL
, 
FALSE
);

722 
VK_RIGHT
:

724 
BOOL
 
bS¸ﬁl
 = 
FALSE
;

725 
s¸ﬁlSãp
, 
moveSãp
;

727 i‡(
pSLEdôD©a
->
edôPos
 =pSLEdôD©a->
d©aEnd
)

730 i‡(
	`edtIsACCh¨AtPosôi⁄
 (
pSLEdôD©a
->
buf„r
,

731 
pSLEdôD©a
->
d©aEnd
,

732 
pSLEdôD©a
->
°¨tPos
))

734 i‡(
	`edtIsACCh¨AtPosôi⁄
 (
pSLEdôD©a
->
buf„r
,

735 
pSLEdôD©a
->
d©aEnd
,

736 
pSLEdôD©a
->
edôPos
))

738 
s¸ﬁlSãp
 = 2;

739 
moveSãp
 = 2;

740 
pSLEdôD©a
->
edôPos
 += 2;

744 
s¸ﬁlSãp
 = 2;

745 
moveSãp
 = 1;

746 
pSLEdôD©a
->
edôPos
 ++;

751 i‡(
	`edtIsACCh¨AtPosôi⁄
 (
pSLEdôD©a
->
buf„r
,

752 
pSLEdôD©a
->
d©aEnd
,

753 
pSLEdôD©a
->
edôPos
))

755 i‡(
	`edtIsACCh¨AtPosôi⁄
 (
pSLEdôD©a
->
buf„r
,

756 
pSLEdôD©a
->
d©aEnd
,

757 
pSLEdôD©a
->
°¨tPos
 + 1))

758 
s¸ﬁlSãp
 = 3;

760 
s¸ﬁlSãp
 = 2;

762 
moveSãp
 = 2;

763 
pSLEdôD©a
->
edôPos
 += 2;

767 
s¸ﬁlSãp
 = 1;

768 
moveSãp
 = 1;

769 
pSLEdôD©a
->
edôPos
 ++;

773 
pSLEdôD©a
->
ˇªtOff
 +
moveSãp
;

774 i‡(
pSLEdôD©a
->
ˇªtOff
 * 
	`GëSysCh¨Width
 (
hWnd
)

775 > 
	`edtGëOutWidth
 (
pCål
))

777 
bS¸ﬁl
 = 
TRUE
;

778 
pSLEdôD©a
->
°¨tPos
 +
s¸ﬁlSãp
;

780 
pSLEdôD©a
->
ˇªtOff
 =

781 
pSLEdôD©a
->
edôPos
 -ÖSLEdôD©a->
°¨tPos
;

784 
	`SëC¨ëPos
 (
pSLEdôD©a
->
ˇªtOff
 * 
	`GëSysCh¨Width
 (
hWnd
)

785 + 
pSLEdôD©a
->
À·M¨gö
,ÖSLEdôD©a->
t›M¨gö
);

786 i‡(
bS¸ﬁl
)

787 
	`InvÆid©eRe˘
 (
hWnd
, 
NULL
, 
FALSE
);

791 
SCANCODE_INSERT
:

792 
pCål
->
u£rd©a
 ^
EST_REPLACE
;

795 
VK_DELETE
:

796 i‡((
pCål
->
u£rd©a
 & 
EST_READONLY
)

797 || (
pSLEdôD©a
->
edôPos
 =pSLEdôD©a->
d©aEnd
)){

799 
	`Pög
 ();

804 i‡(
	`edtIsACCh¨AtPosôi⁄
 (
pSLEdôD©a
->
buf„r
,

805 
pSLEdôD©a
->
d©aEnd
,ÖSLEdôD©a->
edôPos
))

806 
dñëed
 = 2;

808 
dñëed
 = 1;

810 
i
 = 
pSLEdôD©a
->
edôPos
;

811 
i
 < 
pSLEdôD©a
->
d©aEnd
 - 
dñëed
; i++)

812 
pSLEdôD©a
->
buf„r
 [
i
]

813 
pSLEdôD©a
->
buf„r
 [
i
 + 
dñëed
];

815 
pSLEdôD©a
->
d©aEnd
 -
dñëed
;

816 
bCh™ge
 = 
TRUE
;

818 
InvRe˘
.
À·
 = 
pSLEdôD©a
->
À·M¨gö


819 + 
pSLEdôD©a
->
ˇªtOff
 * 
	`GëSysCh¨Width
 (
hWnd
);

820 
InvRe˘
.
t›
 = 
pSLEdôD©a
->
t›M¨gö
;

821 
InvRe˘
.
right
 = 
pCål
->
˛úe˘
.righà-ÖCål->˛úe˘.
À·
;

822 
InvRe˘
.
bŸtom
 = 
pCål
->
˛úe˘
.bŸtom -ÖCål->˛úe˘.
t›
;

824 
	`InvÆid©eRe˘
 (
hWnd
, &
InvRe˘
, 
FALSE
);

827 
VK_BACK
:

828 i‡((
pCål
->
u£rd©a
 & 
EST_READONLY
)

829 || (
pSLEdôD©a
->
edôPos
 == 0)) {

831 
	`Pög
 ();

836 i‡(
	`edtIsACCh¨Bef‹ePosôi⁄
 (
pSLEdôD©a
->
buf„r
,

837 
pSLEdôD©a
->
edôPos
))

838 
dñëed
 = 2;

840 
dñëed
 = 1;

842 
i
 = 
pSLEdôD©a
->
edôPos
;

843 
i
 < 
pSLEdôD©a
->
d©aEnd
;

844 
i
++)

845 
pSLEdôD©a
->
buf„r
 [
i
 - 
dñëed
]

846 
pSLEdôD©a
->
buf„r
 [
i
];

848 
pSLEdôD©a
->
d©aEnd
 -
dñëed
;

849 
pSLEdôD©a
->
edôPos
 -
dñëed
;

850 
bCh™ge
 = 
TRUE
;

852 
pSLEdôD©a
->
ˇªtOff
 -
dñëed
;

853 i‡(
pSLEdôD©a
->
ˇªtOff
 == 0

854 && 
pSLEdôD©a
->
edôPos
 != 0) {

855 i‡(
	`edtIsACCh¨Bef‹ePosôi⁄
 (
pSLEdôD©a
->
buf„r
,

856 
pSLEdôD©a
->
edôPos
)) {

857 
pSLEdôD©a
->
°¨tPos
 -= 2;

858 
pSLEdôD©a
->
ˇªtOff
 = 2;

861 
pSLEdôD©a
->
°¨tPos
 --;

862 
pSLEdôD©a
->
ˇªtOff
 = 1;

865 
InvRe˘
.
À·
 = 
pSLEdôD©a
->
À·M¨gö
;

866 
InvRe˘
.
t›
 = 
pSLEdôD©a
->
t›M¨gö
;

867 
InvRe˘
.
right
 = 
pCål
->
˛úe˘
.right -

868 
pCål
->
˛úe˘
.
À·
;

869 
InvRe˘
.
bŸtom
 = 
pCål
->
˛úe˘
.bottom -

870 
pCål
->
˛úe˘
.
t›
;

873 
InvRe˘
.
À·
 = 
pSLEdôD©a
->
À·M¨gö


874 + 
pSLEdôD©a
->
ˇªtOff
 * 
	`GëSysCh¨Width
 (
hWnd
);

875 
InvRe˘
.
t›
 = 
pSLEdôD©a
->
t›M¨gö
;

876 
InvRe˘
.
right
 = 
pCål
->
˛úe˘
.right -

877 
pCål
->
˛úe˘
.
À·
;

878 
InvRe˘
.
bŸtom
 = 
pCål
->
˛úe˘
.bottom -

879 
pCål
->
˛úe˘
.
t›
;

882 
	`SëC¨ëPos
 (
pSLEdôD©a
->
ˇªtOff
 * 
	`GëSysCh¨Width
 (
hWnd
)

883 + 
pSLEdôD©a
->
À·M¨gö
,ÖSLEdôD©a->
t›M¨gö
);

884 
	`InvÆid©eRe˘
 (
hWnd
, &
InvRe˘
, 
FALSE
);

891 i‡(
bCh™ge
)

892 
	`SídMesßge
 (
	`GëP¨ít
 (
hWnd
), 
WM_COMMAND
,

893 (
WPARAM
Ë
	`MAKELONG
 (
pCål
->
id
, 
EN_CHANGE
), (
LPARAM
Ë
hWnd
);

897 
WM_CHAR
:

899 
ch¨Buf„r
 [2];

900 
i
, 
ch¨s
, 
s¸ﬁlSãp
, 
ö£πög
;

901 
RECT
 
InvRe˘
;

903 
pSLEdôD©a
 = (
PSLEDITDATA
Ë(
pCål
->
u£rd©a2
);

905 i‡(
dwStyÀ
 & 
ES_READONLY
) {

908 
	`Pög
();

913 i‡(
	`HIBYTE
 (
wP¨am
)) {

914 
ch¨Buf„r
 [0] = 
	`LOBYTE
 (
wP¨am
);

915 
ch¨Buf„r
 [1] = 
	`HIBYTE
 (
wP¨am
);

916 
ch¨s
 = 2;

919 
ch¨Buf„r
 [0] = 
	`LOBYTE
 (
wP¨am
);

920 
ch¨s
 = 1;

923 i‡(
ch¨s
 == 1) {

924 
ch¨Buf„r
 [0])

939 i‡(
pCål
->
u£rd©a
 & 
EST_REPLACE
) {

940 i‡(
pSLEdôD©a
->
d©aEnd
 =pSLEdôD©a->
edôPos
)

941 
ö£πög
 = 
ch¨s
;

942 i‡(
	`edtIsACCh¨AtPosôi⁄
 (
pSLEdôD©a
->
buf„r
,

943 
pSLEdôD©a
->
d©aEnd
,

944 
pSLEdôD©a
->
edôPos
)) {

945 i‡(
ch¨s
 == 2)

946 
ö£πög
 = 0;

948 
ö£πög
 = -1;

951 i‡(
ch¨s
 == 2)

952 
ö£πög
 = 1;

954 
ö£πög
 = 0;

958 
ö£πög
 = 
ch¨s
;

961 i‡(
pSLEdôD©a
->
d©aEnd
 + 
ö£πög
 >ÖSLEdôD©a->
buf„rLí
) {

964 
	`Pög
 ();

966 
	`SídMesßge
 (
	`GëP¨ít
 (
hWnd
), 
WM_COMMAND
,

967 (
WPARAM
Ë
	`MAKELONG
 (
pCål
->
id
, 
EN_MAXTEXT
), (
LPARAM
Ë
hWnd
);

970 i‡((
pSLEdôD©a
->
h¨dLimô
 >= 0)

971 && ((
pSLEdôD©a
->
d©aEnd
 + 
ö£πög
)

972 > 
pSLEdôD©a
->
h¨dLimô
)) {

974 
	`Pög
 ();

976 
	`SídMesßge
 (
	`GëP¨ít
 (
hWnd
), 
WM_COMMAND
,

977 (
WPARAM
Ë
	`MAKELONG
 (
pCål
->
id
, 
EN_MAXTEXT
), (
LPARAM
Ë
hWnd
);

981 i‡(
ö£πög
 == -1) {

982 
i
 = 
pSLEdôD©a
->
edôPos
; i <ÖSLEdôD©a->
d©aEnd
-1; i++)

983 
pSLEdôD©a
->
buf„r
 [
i
] =ÖSLEditData->buffer [i + 1];

985 i‡(
ö£πög
 > 0) {

986 
i
 = 
pSLEdôD©a
->
d©aEnd
 + 
ö£πög
 - 1;

987 
i
 > 
pSLEdôD©a
->
edôPos
 + 
ö£πög
 - 1;

988 
i
--)

989 
pSLEdôD©a
->
buf„r
 [
i
]

990 
pSLEdôD©a
->
buf„r
 [
i
 - 
ö£πög
];

993 
i
 = 0; i < 
ch¨s
; i++)

994 
pSLEdôD©a
->
buf„r
 [pSLEdôD©a->
edôPos
 + 
i
]

995 
ch¨Buf„r
 [
i
];

997 
pSLEdôD©a
->
edôPos
 +
ch¨s
;

998 
pSLEdôD©a
->
ˇªtOff
 +
ch¨s
;

999 
pSLEdôD©a
->
d©aEnd
 +
ö£πög
;

1001 i‡(
pSLEdôD©a
->
ˇªtOff
 * 
	`GëSysCh¨Width
 (
hWnd
)

1002 > 
	`edtGëOutWidth
 (
pCål
))

1004 i‡(
	`edtIsACCh¨AtPosôi⁄
 (
pSLEdôD©a
->
buf„r
,

1005 
pSLEdôD©a
->
d©aEnd
,

1006 
pSLEdôD©a
->
°¨tPos
))

1007 
s¸ﬁlSãp
 = 2;

1009 i‡(
ch¨s
 == 2) {

1010 i‡(
	`edtIsACCh¨AtPosôi⁄
 (
pSLEdôD©a
->
buf„r
,

1011 
pSLEdôD©a
->
d©aEnd
,

1012 
pSLEdôD©a
->
°¨tPos
 + 1))

1013 
s¸ﬁlSãp
 = 3;

1015 
s¸ﬁlSãp
 = 2;

1018 
s¸ﬁlSãp
 = 1;

1021 
pSLEdôD©a
->
°¨tPos
 +
s¸ﬁlSãp
;

1023 
pSLEdôD©a
->
ˇªtOff
 =

1024 
pSLEdôD©a
->
edôPos
 -ÖSLEdôD©a->
°¨tPos
;

1026 
InvRe˘
.
À·
 = 
pSLEdôD©a
->
À·M¨gö
;

1027 
InvRe˘
.
t›
 = 
pSLEdôD©a
->
t›M¨gö
;

1028 
InvRe˘
.
right
 = 
pCål
->
˛úe˘
.righà-ÖCål->˛úe˘.
À·
;

1029 
InvRe˘
.
bŸtom
 = 
pCål
->
˛úe˘
.bŸtom -ÖCål->˛úe˘.
t›
;

1032 
InvRe˘
.
À·
 = 
pSLEdôD©a
->
À·M¨gö


1033 + (
pSLEdôD©a
->
ˇªtOff
 - 
ch¨s
)

1034 * 
	`GëSysCh¨Width
 (
hWnd
);

1035 
InvRe˘
.
t›
 = 
pSLEdôD©a
->
t›M¨gö
;

1036 
InvRe˘
.
right
 = 
pCål
->
˛úe˘
.righà-ÖCål->˛úe˘.
À·
;

1037 
InvRe˘
.
bŸtom
 = 
pCål
->
˛úe˘
.bŸtom -ÖCål->˛úe˘.
t›
;

1040 
	`SëC¨ëPos
 (
pSLEdôD©a
->
ˇªtOff
 * 
	`GëSysCh¨Width
 (
hWnd
)

1041 + 
pSLEdôD©a
->
À·M¨gö
,ÖSLEdôD©a->
t›M¨gö
);

1042 
	`InvÆid©eRe˘
 (
hWnd
, &
InvRe˘
, 
FALSE
);

1044 
	`SídMesßge
 (
	`GëP¨ít
 (
hWnd
), 
WM_COMMAND
,

1045 (
WPARAM
Ë
	`MAKELONG
 (
pCål
->
id
, 
EN_CHANGE
), (
LPARAM
Ë
hWnd
);

1049 
WM_GETTEXTLENGTH
:

1050 
pSLEdôD©a
 = (
PSLEDITDATA
Ë(
pCål
->
u£rd©a2
);

1051  
pSLEdôD©a
->
d©aEnd
;

1053 
WM_GETTEXT
:

1055 * 
buf„r
 = (*)
lP¨am
;

1056 
Àn
;

1058 
pSLEdôD©a
 = (
PSLEDITDATA
Ë(
pCål
->
u£rd©a2
);

1060 
Àn
 = 
	`mö
 (()
wP¨am
, 
pSLEdôD©a
->
d©aEnd
);

1062 
	`mem˝y
 (
buf„r
, 
pSLEdôD©a
->buf„r, 
Àn
);

1063 
buf„r
 [
Àn
] = '\0';

1065  
Àn
;

1069 
WM_SETTEXT
:

1071 
Àn
;

1073 i‡(
dwStyÀ
 & 
ES_READONLY
)

1076 
pSLEdôD©a
 = (
PSLEDITDATA
Ë(
pCål
->
u£rd©a2
);

1079 
Àn
 = 
	`°æí
 ((*)
lP¨am
);

1080 
Àn
 = 
	`mö
 (Àn, 
pSLEdôD©a
->
buf„rLí
);

1082 i‡(
pSLEdôD©a
->
h¨dLimô
 >= 0)

1083 
Àn
 = 
	`mö
 (Àn, 
pSLEdôD©a
->
h¨dLimô
);

1085 
pSLEdôD©a
->
d©aEnd
 = 
Àn
;

1086 
	`mem˝y
 (
pSLEdôD©a
->
buf„r
, (*)
lP¨am
, 
Àn
);

1088 
pSLEdôD©a
->
edôPos
 = 0;

1089 
pSLEdôD©a
->
ˇªtOff
 = 0;

1090 
pSLEdôD©a
->
°¨tPos
 = 0;

1092 
	`InvÆid©eRe˘
 (
hWnd
, 
NULL
, 
FALSE
);

1096 
WM_LBUTTONDBLCLK
:

1099 
WM_LBUTTONDOWN
:

1101 
√wOff
;

1103 
pSLEdôD©a
 = (
PSLEDITDATA
Ë(
pCål
->
u£rd©a2
);

1104 
√wOff
 = 
	`edtGëOff£t
 (
hWnd
,
pSLEdôD©a
, 
	`LOWORD
 (
lP¨am
));

1106 i‡(
√wOff
 !
pSLEdôD©a
->
ˇªtOff
)

1108 
pSLEdôD©a
->
edôPos
 +
√wOff
 -ÖSLEdôD©a->
ˇªtOff
;

1109 
pSLEdôD©a
->
ˇªtOff
 = 
√wOff
;

1111 
	`SëC¨ëPos
 (
pSLEdôD©a
->
ˇªtOff
 * 
	`GëSysCh¨Width
 (
hWnd
)

1112 + 
pSLEdôD©a
->
À·M¨gö
,ÖSLEdôD©a->
t›M¨gö
);

1117 
WM_LBUTTONUP
:

1120 
WM_MOUSEMOVE
:

1123 
WM_GETDLGCODE
:

1124  
DLGC_WANTCHARS
 | 
DLGC_HASSETSEL
 | 
DLGC_WANTARROWS
;

1126 
EM_SETREADONLY
:

1127 i‡(
wP¨am
)

1128 
pCål
->
°yÀ
 |
ES_READONLY
;

1130 
pCål
->
°yÀ
 &~
ES_READONLY
;

1133 
EM_SETPASSWORDCHAR
:

1134 
pSLEdôD©a
 = (
PSLEDITDATA
Ë(
pCål
->
u£rd©a2
);

1136 i‡(
pSLEdôD©a
->
∑sswdCh¨
 !()
wP¨am
) {

1137 i‡(
dwStyÀ
 & 
ES_PASSWORD
) {

1138 
pSLEdôD©a
->
∑sswdCh¨
 = ()
wP¨am
;

1139 
	`InvÆid©eRe˘
 (
hWnd
, 
NULL
, 
TRUE
);

1144 
EM_GETPASSWORDCHAR
:

1146 * 
∑sswdch¨
;

1148 
pSLEdôD©a
 = (
PSLEDITDATA
Ë(
pCål
->
u£rd©a2
);

1149 
∑sswdch¨
 = (*Ë
lP¨am
;

1151 *
∑sswdch¨
 = 
pSLEdôD©a
->
∑sswdCh¨
;

1155 
EM_LIMITTEXT
:

1157 
√wLimô
 = ()
wP¨am
;

1159 i‡(
√wLimô
 >= 0) {

1160 
pSLEdôD©a
 = (
PSLEDITDATA
Ë(
pCål
->
u£rd©a2
);

1161 i‡(
pSLEdôD©a
->
buf„rLí
 < 
√wLimô
)

1162 
pSLEdôD©a
->
h¨dLimô
 = -1;

1164 
pSLEdôD©a
->
h¨dLimô
 = 
√wLimô
;

1170  
	`DefWödowProc
 (
hWnd
, 
mesßge
, 
wP¨am
, 
lP¨am
);

1174 
	}
}

	@mwin/winlib/fastfill.c

1 
	~"wödows.h
"

2 
	~"wötoﬁs.h
"

11 
WINAPI


12 
	$Fa°FûlRe˘
(
HDC
 
hdc
,
LPRECT
 
Õª˘
,
COLORREF
 
¸
)

14 
COLORREF
 
¸Old
;

16 
¸Old
 = 
	`SëBkCﬁ‹
–
hdc
, 
¸
);

17 
	`ExtTextOut
–
hdc
, 0, 0, 
ETO_OPAQUE
 | 
ETO_CLIPPED
, 
Õª˘
, 
NULL
, 0, NULL);

18 
	`SëBkCﬁ‹
–
hdc
, 
¸Old
);

19 
	}
}

	@mwin/winlib/graph3d.c

7 
	#MWINCLUDECOLORS


	)

8 
	~"wödows.h
"

9 
	~"devi˚.h
"

10 
	~"gøph3d.h
"

11 
	#USEBLIT
 1

	)

13 
	gnxpix
;

14 
	gnypix
;

15 
vec1
 
	gxsˇÀ
;

16 
vec1
 
	gysˇÀ
;

17 
vec3
 
	geye
;

18 
vec3
 
	gdúe˘
;

19 
	gQ
[5][5];

20 
HDC
 
	ghdc
;

21 
HDC
 
	ghdcMem
;

22 
HBITMAP
 
	ghbmp
, 
	ghbmpOrg
;

26 
	$look3
(
vec1
 
x
, vec1 
y
, vec1 
z
)

28 
eye
.
x
 = x;

29 
eye
.
y
 = y;

30 
eye
.
z
 = z;

31 
dúe˘
.
x
 = -
eye
.x;

32 
dúe˘
.
y
 = -
eye
.y;

33 
dúe˘
.
z
 = -
eye
.z;

34 
	`födQ
();

35 
	}
}

38 
	$öô3
(
HDC
 
hDC
, 
HWND
 
memhwnd
)

40 
HBRUSH
 
hbr
;

42 
hdc
 = 
hDC
;

43 if(
hdc
) {

44 
nxpix
 = 
hdc
->
hwnd
->
˛úe˘
.
right
 - hdc->hwnd->˛úe˘.
À·
;

45 
nypix
 = 
hdc
->
hwnd
->
˛úe˘
.
bŸtom
 - hdc->hwnd->˛úe˘.
t›
;

46 
xsˇÀ
 = (
vec1
)(
nxpix
-1) /Çxpix *Çxpix/2;

47 
ysˇÀ
 = (
vec1
)(
nypix
-1) /Çypix *Çypix/2;

49 if(
memhwnd
) {

50 
hdcMem
 = 
	`Cª©eCom∑tibÀDC
(
NULL
);

51 if(
hdcMem
) {

52 
hbmp
 = 
	`Cª©eCom∑tibÀBôm≠
(
hdcMem
,

53 
nxpix
, 
nypix
);

54 
hbmpOrg
 = 
	`Sñe˘Obje˘
(
hdcMem
, 
hbmp
);

55 
hdc
 = 
hdcMem
;

57 
hbr
 = (
HBRUSH
)
	`GëCœssL⁄g
(
memhwnd
, 
GCL_HBRBACKGROUND
);

58 
	`FûlRe˘
(
hdc
, 
NULL
, 
hbr
);

61 
	`Sñe˘Obje˘
(
hdc
, 
	`Cª©ePí
(
PS_SOLID
, 1, 
BLACK
));

63 
	}
}

66 
	$∑öt3
(
HDC
 
hDC
)

68 if(
hdcMem
) {

69 
	`BôB…
(
hDC
, 0, 0, 
nxpix
, 
nypix
, 
hdcMem
, 0, 0, 
SRCCOPY
);

70 
	`DñëeObje˘
(
	`Sñe˘Obje˘
(
hdcMem
, 
hbmpOrg
));

71 
	`DñëeDC
(
hdcMem
);

73 
hdcMem
 = 
NULL
;

74 
	}
}

77 
	$fx
(
vec1
 
x
)

79  ()(
x
 * 
xsˇÀ
 + 
nxpix
*0.5 - 0.5);

80 
	}
}

83 
	$fy
(
vec1
 
y
)

85  ()(
y
 * 
ysˇÀ
 + 
nypix
*0.5 - 0.5);

86 
	}
}

89 
	$movëo3
(
vec2
 
±
)

91 
	`MoveToEx
(
hdc
, 
	`fx
(
±
.
x
), 
	`fy
’t.
y
), 
NULL
);

92 
	}
}

95 
	$£tcﬁ‹3
(
MWCOLORVAL
 
c
)

97 if(
hdc
)

98 
hdc
->
≥n
->
cﬁ‹
 = 
c
;

99 
	}
}

102 
	$löëo3
(
vec2
 
±
)

104 
	`LöeTo
(
hdc
, 
	`fx
(
±
.
x
), 
	`fy
’t.
y
));

105 
	}
}

108 
	$pﬁyfûl
(
n
, 
vec2
 
poöts
[])

110 
i
;

111 
xoff
, 
yoff
;

112 
MWPOINT
 
pv
[
MAXPOLY
];

114 if(!
hdc
)

118 
xoff
 = 
hdc
->
hwnd
->
˛úe˘
.
À·
;

119 
yoff
 = 
hdc
->
hwnd
->
˛úe˘
.
t›
;

122 if(
n
 > 2) {

123 
i
=0; i<
n
; ++i) {

124 
pv
[
i
].
x
 = 
	`fx
(
poöts
[i].xË+ 
xoff
;

125 
pv
[
i
].
y
 = 
	`fy
(
poöts
[i].yË+ 
yoff
;

132 
	`GdSëF‹egroundCﬁ‹
(
hdc
->
psd
, hdc->
≥n
->
cﬁ‹
);

133 
	`GdFûlPﬁy
(
hdc
->
psd
, 
n
, 
pv
);

135 
	}
}

138 
	$squ¨e
()

140 
vec2
 
±0
, 
±1
, 
±2
, 
±3
;

142 
±0
.
x
 = -1;Öt0.
y
 = 1;

143 
±1
.
x
 = -1;Öt1.
y
 = -1;

144 
±2
.
x
 = 1;Öt2.
y
 = -1;

145 
±3
.
x
 = 1;Öt3.
y
 = 1;

146 
	`movëo3
(
±0
);

147 
	`löëo3
(
±1
);

148 
	`löëo3
(
±2
);

149 
	`löëo3
(
±3
);

150 
	`löëo3
(
±0
);

151 
	}
}

154 
	$cú˛e3
(
vec1
 
r
)

156 
vec1
 
thëa
 = 0;

157 
vec1
 
thöc
 = 2*
pi
/100;

158 
i
;

159 
vec2
 
±
;

161 
±
.
x
 = 
r
;

162 
±
.
y
 = 0.0;

163 
	`movëo3
(
±
);

165 
i
=0; i<100; ++i) {

166 
thëa
 =Åhë®+ 
thöc
;

167 
±
.
x
 = 
r
*
	`cos
(
thëa
);

168 
±
.
y
 = 
r
*
	`sö
(
thëa
);

169 
	`löëo3
(
±
);

171 
	}
}

174 
	$daisy
(
vec1
 
r
,
poöts
)

176 
i
, 
j
;

177 
vec1
 
thëa
 = 0;

178 
vec1
 
thöc
;

179 
vec2
 
±
[100];

182 
thöc
 = 2*
pi
/
poöts
;

183 
i
=0; i<
poöts
; ++i) {

184 
±
[
i
].
x
 = 
r
*
	`cos
(
thëa
);

185 
±
[
i
].
y
 = 
r
*
	`sö
(
thëa
);

186 
thëa
 +
thöc
;

190 
i
=0; i<
poöts
-1; ++i) {

191 
j
=
i
+1; j<
poöts
; ++j) {

192 
	`movëo3
(
±
[
i
]);

193 
	`löëo3
(
±
[
j
]);

196 
	}
}

199 
	$ro£
(
vec1
 
r
,
Àvñs
,
poöts
)

201 
i
, 
j
, 
m
, 
n
;

202 
vec1
 
r1
, 
thëa
, 
thöc
;

203 
vec2
 
ö√r
[100];

204 
vec2
 
ouãr
[100];

205 
vec2
 
åüngÀ
[3];

207 
m
 = 
Àvñs
;

208 
n
 = 
poöts
;

209 
thöc
 = 2*
pi
/
n
;

212 
i
=0; i<
n
; ++i) {

213 
ö√r
[
i
].
x
 = 0.0;

214 
ö√r
[
i
].
y
 = 0.0;

218 
j
=1; j<=
m
; ++j) {

219 
thëa
 = -
j
*
pi
/
n
;

220 
r1
 = 
r
 * (
vec1
)
j
/
m
;

223 
i
=0; i<
n
; ++i) {

224 
thëa
 +
thöc
;

225 
ouãr
[
i
].
x
 = 
r1
*
	`cos
(
thëa
);

226 
ouãr
[
i
].
y
 = 
r1
*
	`sö
(
thëa
);

232 
i
=0; i<
n
; ++i) {

233 
åüngÀ
[0] = 
ouãr
[
i
];

234 
åüngÀ
[1] = 
ouãr
[(
i
+1Ë% 
n
];

235 
åüngÀ
[2] = 
ö√r
[
i
];

238 
	`£tcﬁ‹3
(
RED
);

239 
	`pﬁyfûl
(3, 
åüngÀ
);

243 
	`£tcﬁ‹3
(
WHITE
);

244 
	`movëo3
(
åüngÀ
[0]);

245 
	`löëo3
(
åüngÀ
[1]);

246 
	`löëo3
(
åüngÀ
[2]);

247 
	`löëo3
(
åüngÀ
[0]);

252 
i
=0; i<
n
; ++i)

253 
ö√r
[
i
] = 
ouãr
[i];

255 
	}
}

259 
	$åüngÀ
(
vec2
 
v0
, vec2 
v1
, vec2 
v2
)

261 
vec2
 
pﬁy
[3];

263 
pﬁy
[0] = 
v0
;

264 
pﬁy
[1] = 
v1
;

265 
pﬁy
[2] = 
v2
;

267 
	`£tcﬁ‹3
(
GREEN
);

268 
	`pﬁyfûl
(3, 
pﬁy
);

269 
	`£tcﬁ‹3
(
BLACK
);

270 
	`movëo3
(
pﬁy
[2]);

271 
	`löëo3
(
pﬁy
[0]);

272 
	`löëo3
(
pﬁy
[1]);

273 
	`löëo3
(
pﬁy
[2]);

274 
	}
}

278 
	$quadrû©îÆ
(
vec2
 
v0
, vec2 
v1
, vec2 
v2
, vec2 
v3
)

280 
vec2
 
pﬁy
[4];

282 
pﬁy
[0] = 
v0
;

283 
pﬁy
[1] = 
v1
;

284 
pﬁy
[2] = 
v2
;

285 
pﬁy
[3] = 
v3
;

286 
	`£tcﬁ‹3
(
GREEN
);

287 
	`pﬁyfûl
(4, 
pﬁy
);

288 
	`£tcﬁ‹3
(
BLACK
);

289 
	`movëo3
(
pﬁy
[3]);

290 
	`löëo3
(
pﬁy
[0]);

291 
	`löëo3
(
pﬁy
[1]);

292 
	`löëo3
(
pﬁy
[2]);

293 
	`löëo3
(
pﬁy
[3]);

294 
	}
}

298 
	$∑tch
(
vec2
 
v0
, vec2 
v1
, vec2 
v2
, vec2 
v3
)

300 
vec1
 
díom
;

301 
vec1
 
mu
;

302 
vec2
 
v4
;

304 
díom
 = (
v1
.
x
-
v0
.x)*(
v3
.
y
-
v2
.y) - (v1.y-v0.y)*(v3.x-v2.x);

305 if(
	`Ábs
(
díom
Ë> 
ïsû⁄
) {

306 
mu
 = ((
v2
.
x
-
v0
.x)*(
v3
.
y
-v2.yË- (v2.y-v0.y)*(v3.x-v2.x))/
díom
;

311 if(
mu
 >= 0 && mu <= 1) {

312 
v4
.
x
 = (1-
mu
)*
v0
.x + mu*
v1
.x;

313 
v4
.
y
 = (1-
mu
)*
v0
.y + mu*
v1
.y;

314 
	`åüngÀ
(
v0
, 
v2
, 
v4
);

315 
	`åüngÀ
(
v1
, 
v3
, 
v4
);

321 
díom
 = (
v2
.
x
-
v0
.x)*(
v3
.
y
-
v1
.y) - (v2.y-v0.y)*(v3.x-v1.x);

322 if(
	`Ábs
(
díom
Ë> 
ïsû⁄
) {

323 
mu
 = ((
v1
.
x
-
v0
.x)*(
v3
.
y
-v1.yË- (v1.y-v0.y)*(v3.x-v1.x))/
díom
;

328 if(
mu
 >= 0 && mu <= 1) {

329 
v4
.
x
 = (1-
mu
)*
v0
.x + mu*
v2
.x;

330 
v4
.
y
 = (1-
mu
)*
v0
.y + mu*
v2
.y;

331 
	`åüngÀ
(
v0
, 
v1
, 
v4
);

332 
	`åüngÀ
(
v2
, 
v3
, 
v4
);

338 
	`quadrû©îÆ
(
v0
, 
v1
, 
v3
, 
v2
);

340 
	}
}

343 
vec1


344 
	$∂Ÿ‚
(
vec1
 
x
, vec1 
z
)

346 
vec1
 
t
;

349 
t
 = 
	`sqπ
(
x
*x + 
z
*z);

350 if(
	`Ábs
(
t
Ë< 
ïsû⁄
)

352  4.0 * 
	`sö
(
t
) /Å;

353 
	}
}

357 
	$døwgrid
(
vec1
 
xmö
, vec1 
xmax
, 
nx
, vec1 
zmö
, vec1 
zmax
, 
nz
)

359 
i
, 
j
;

360 
vec1
 
xi
, 
x°ï
, 
yij
;

361 
vec1
 
zj
, 
z°ï
;

362 
vec2
 
v
[2][100];

363 
S
[5][5];

366 
	`sˇÀ3
(1.0/(
xmax
-
xmö
)*2, 1.0/(xmax-xmö)*2, 1.0/(
zmax
-
zmö
), 
S
);

367 
	`mu…3
(
Q
, 
S
, Q);

370 
x°ï
 = (
xmax
-
xmö
)/
nx
;

371 
z°ï
 = (
zmax
-
zmö
)/
nz
;

372 
xi
 = 
xmö
;

373 
zj
 = 
zmö
;

379 
i
=0; i<=
nx
; ++i) {

380 
yij
 = 
	`∂Ÿ‚
(
xi
, 
zj
);

381 
v
[0][
i
].
x
 = 
Q
[1][1]*
xi
 + Q[1][2]*
yij
 + Q[1][3]*
zj
;

382 
v
[0][
i
].
y
 = 
Q
[2][1]*
xi
 + Q[2][2]*
yij
 + Q[2][3]*
zj
;

383 
xi
 +
x°ï
;

387 
j
=0; j<
nz
; ++j) {

388 
xi
 = 
xmö
;

389 
zj
 +
z°ï
;

396 
i
=0; i<=
nx
; ++i) {

397 
yij
 = 
	`∂Ÿ‚
(
xi
, 
zj
);

398 
v
[1][
i
].
x
 = 
Q
[1][1]*
xi
 + Q[1][2]*
yij
 + Q[1][3]*
zj
;

399 
v
[1][
i
].
y
 = 
Q
[2][1]*
xi
 + Q[2][2]*
yij
 + Q[2][3]*
zj
;

400 
xi
 +
x°ï
;

404 
i
=0; i<
nx
; ++i)

405 
	`∑tch
(
v
[0][
i
], v[0][i+1], v[1][i], v[1][i+1]);

408 
i
=0; i<=
nx
; ++i)

409 
v
[0][
i
] = v[1][i];

411 
	}
}

416 
vec1


417 
	$™gÀ
(
vec1
 
x
, vec1 
y
)

419 if(
	`Ábs
(
x
Ë< 
ïsû⁄
)

420 if(
	`Ábs
(
y
Ë< 
ïsû⁄
)

423 if(
y
 > 0.0)

424  
pi
*0.5;

425  
pi
*1.5;

427 if(
x
 < 0.0)

428  
	`©™
(
y
/
x
Ë+ 
pi
;

429  
	`©™
(
y
/
x
);

430 
	}
}

437 
	$sˇÀ3
(
vec1
 
sx
, vec1 
sy
, vec1 
sz
, 
A
[][5])

439 
i
, 
j
;

441 
i
=1; i<5; ++i)

442 
j
=1; j<5; ++j)

443 
A
[
i
][
j
] = 0.0;

444 
A
[1][1] = 
sx
;

445 
A
[2][2] = 
sy
;

446 
A
[3][3] = 
sz
;

447 
A
[4][4] = 1.0;

448 
	}
}

454 
	$å™3
(
vec1
 
tx
, vec1 
ty
, vec1 
tz
, 
A
[][5])

456 
i
, 
j
;

458 
i
=1; i<5; ++i) {

459 
j
=1; j<5; ++j)

460 
A
[
i
][
j
] = 0.0;

461 
A
[
i
][i] = 1.0;

463 
A
[1][4] = -
tx
;

464 
A
[2][4] = -
ty
;

465 
A
[3][4] = -
tz
;

466 
	}
}

473 
	$rŸ3
(
m
, 
vec1
 
thëa
, 
A
[][5])

475 
i
, 
j
, 
m1
, 
m2
;

476 
vec1
 
c
, 
s
;

478 
i
=1; i<5; ++i)

479 
j
=1; j<5; ++j)

480 
A
[
i
][
j
] = 0.0;

481 
A
[
m
][m] = 1.0;

482 
A
[4][4] = 1.0;

483 
m1
 = (
m
 % 3) + 1;

484 
m2
 = (
m1
 % 3) + 1;

485 
c
 = 
	`cos
(
thëa
);

486 
s
 = 
	`sö
(
thëa
);

487 
A
[
m1
][m1] = 
c
;

488 
A
[
m2
][m2] = 
c
;

489 
A
[
m1
][
m2
] = 
s
;

490 
A
[
m2
][
m1
] = 
s
;

491 
	}
}

495 
	$mu…3
(
A
[][5], 
B
[][5], 
C
[][5])

497 
i
, 
j
, 
k
;

498 
vec1
 
ab
;

500 
i
=1; i<5; ++i)

501 
j
=1; j<5; ++j) {

502 
ab
 = 0;

503 
k
=1; k<5; ++k)

504 
ab
 +
A
[
i
][
k
] * 
B
[k][
j
];

505 
C
[
i
][
j
] = 
ab
;

507 
	}
}

511 
	$födQ
()

513 
vec1
 
Æpha
, 
bëa
, 
gamma
, 
v
, 
w
;

514 
E
[5][5];

515 
F
[5][5];

516 
G
[5][5];

517 
H
[5][5];

518 
U
[5][5];

521 
	`å™3
(
eye
.
x
,Éye.
y
,Éye.
z
, 
F
);

524 
Æpha
 = 
	`™gÀ
(-
dúe˘
.
x
, -dúe˘.
y
);

525 
	`rŸ3
(3, 
Æpha
, 
G
);

528 
v
 = 
	`sqπ
(
dúe˘
.
x
*dúe˘.x + dúe˘.
y
*direct.y);

529 
bëa
 = 
	`™gÀ
(-
dúe˘
.
z
, 
v
);

530 
	`rŸ3
(2, 
bëa
, 
H
);

533 
w
 = 
	`sqπ
(
v
*v + 
dúe˘
.
z
*direct.z);

534 
gamma
 = 
	`™gÀ
(-
dúe˘
.
x
*
w
, dúe˘.
y
*dúe˘.
z
);

535 
	`rŸ3
(3, -
gamma
, 
U
);

538 
	`mu…3
(
G
, 
F
, 
Q
);

539 
	`mu…3
(
H
, 
Q
, 
E
);

540 
	`mu…3
(
U
, 
E
, 
Q
);

541 
	}
}

	@mwin/winlib/insetr.c

1 
	~"wödows.h
"

2 
	~"wötoﬁs.h
"

7 
WINAPI


8 
	$In£tR
(
LPRECT
 
Õrc
,
h
,
v
)

10 
Õrc
->
t›
 +
v
;

11 
Õrc
->
À·
 +
h
;

12 
Õrc
->
right
 -2*
h
-1;

13 
Õrc
->
bŸtom
 -2*
v
-1;

14 
	}
}

	@mwin/winlib/listbox.c

57 
	~<°dio.h
>

58 
	~<°dlib.h
>

59 
	~<°rög.h
>

60 
	#MWINCLUDECOLORS


	)

61 
	~"wödows.h
"

62 
	~"wötoﬁs.h
"

63 
	~"devi˚.h
"

65 
	#FixSåAŒoc
(
n
Ë
	`mÆloc
(“)+1)

	)

66 
	#FªeFixSå
(
p
Ë
	`‰ì
’)

	)

68 
	#LBIF_NORMAL
 0x0000L

	)

69 
	#LBIF_SELECTED
 0x0001L

	)

70 
	#LBIF_CHECKED
 0x0010L

	)

71 
	#LBIF_PARTCHECKED
 0x0020L

	)

72 
	#LBIF_CHECKMARKMASK
 0x00F0L

	)

74 
	#CMFLAG_BLANK
 0

	)

75 
	#CMFLAG_CHECKED
 1

	)

76 
	#CMFLAG_PARTCHECKED
 2

	)

77 
	s_LISTBOXITEMINFO
 {

78 
	mösPos
;

79 * 
	m°rög
;

80 
	mcmFœg
;

81 
HICON
 
	mhIc⁄
;

82 } 
	tLISTBOXITEMINFO
, *
	tPLISTBOXITEMINFO
;

84 
	s_LISTBOXITEM
 {

85 * 
	mkey
;

86 
DWORD
 
	mdwFœgs
;

87 
DWORD
 
	mdwD©a
;

88 
DWORD
 
	mdwAddD©a
;

89 
_LISTBOXITEM
* 
	m√xt
;

90 } 
	tLISTBOXITEM
, *
	tPLISTBOXITEM
;

92 
	#DEF_LB_BUFFER_LEN
 5

	)

94 
	#LBF_FOCUS
 0x0001

	)

95 
	#LBF_NOTHINGSELECTED
 0x0002

	)

97 
	s_LISTBOXDATA
 {

98 
DWORD
 
	mdwFœgs
;

100 
	môemCou¡
;

101 
	môemT›
;

102 
	môemVisibÀs
;

104 
	môemHûighãd
;

105 
	môemHeight
;

107 
LISTBOXITEM
* 
	mhód
;

109 
	mbuffLí
;

110 
LISTBOXITEM
* 
	mbuffSèπ
;

111 
LISTBOXITEM
* 
	mbuffEnd
;

112 
LISTBOXITEM
* 
	m‰ìLi°
;

113 } 
	tLISTBOXDATA
, *
	tPLISTBOXDATA
;

115 
Li°boxC⁄åﬁCÀ™up
 ();

116 
LRESULT
 
CALLBACK


117 
Li°boxCålProc
 (
HWND
 
hwnd
, 
UINT
 
mesßge
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
);

119 
	#ITEM_BOTTOM
(
x
Ë(x->
ôemT›
 + x->
ôemVisibÀs
 - 1)

	)

121 
	#LST_WIDTH_CHECKMARK
 11

	)

122 
	#LST_HEIGHT_CHECKMARK
 11

	)

123 
	#LST_INTER_BMPTEXT
 2

	)

125 
WINAPI
 
	$MwRegi°îLi°boxC⁄åﬁ
(
HINSTANCE
 
hIn°™˚
)

127 
WNDCLASS
 
wc
;

129 
BITMAP
 
sg_bmpCheckM¨k
;

130 i‡(!
	`LﬂdSy°emBôm≠
 (&
sg_bmpCheckM¨k
, "checkmark")) {

131 
	`Ârötf
 (
°dîr
, "Load ListBox Check Mark Bitmap failure!\n");

132  
FALSE
;

135 
wc
.
°yÀ
 = 
CS_HREDRAW
 | 
CS_VREDRAW
 | 
CS_DBLCLKS
 | 
CS_GLOBALCLASS
;

136 
wc
.
Õ‚WndProc
 = (
WNDPROC
)
Li°boxCålProc
;

137 
wc
.
cbClsExåa
 = 0;

138 
wc
.
cbWndExåa
 = 0;

139 
wc
.
hIn°™˚
 = hInstance;

140 
wc
.
hIc⁄
 = 
NULL
;

141 
wc
.
hCurs‹
 = 0;

142 
wc
.
hbrBackground

	`GëStockObje˘
(
WHITE_BRUSH
);

143 
wc
.
ÕszMíuName
 = 
NULL
;

144 
wc
.
ÕszCœssName
= "LISTBOX";

146  
	`Regi°îCœss
(&
wc
);

147 
	}
}

149 
	$Li°boxC⁄åﬁCÀ™up
 ()

152 
	`U∆ﬂdBôm≠
 (&
sg_bmpCheckM¨k
);

154 
	}
}

156 
LRESULT
 
	$NŸifyP¨ít
 (
HWND
 
hwnd
, 
id
, 
code
)

158  
	`SídMesßge
 (
	`GëP¨ít
 (
hwnd
), 
WM_COMMAND
,

159 (
WPARAM
Ë
	`MAKELONG
 (
id
, 
code
), (
LPARAM
)
hwnd
);

160 
	}
}

162 
BOOL
 
	$l°InôLi°BoxD©a
 (
HWND
 
hwnd
,
LISTBOXDATA
* 
pD©a
, 
Àn
)

164 
i
, 
xw
, 
xh
, 
xb
;

165 
PLISTBOXITEM
 
∂bi
;

166 
HDC
 
hdc
;

168 
	`mem£t
 (
pD©a
, 0,  (
LISTBOXDATA
));

170 
pD©a
->
ôemHeight
 = 
	`GëSysCh¨Height
 ();

172 
hdc
=
	`GëDC
(
hwnd
);

173 #i‡
MWCLIENT


174 
	`GrSëGCF⁄t
(
hdc
->
gc
,hdc->
f⁄t
->
f⁄tid
);

175 
	`GrGëGCTextSize
(
hdc
->
gc
,"X",1,

176 
MWTF_ASCII
,&
xw
,&
xh
,&
xb
);

178 
	`GdSëF⁄t
(
hdc
->
f⁄t
->
pf⁄t
);

179 
	`GdGëTextSize
(
hdc
->
f⁄t
->
pf⁄t
,"X",1,

180 &
xw
,&
xh
,&
xb
,
MWTF_ASCII
);

182 
	`Rñó£DC
(
hwnd
,
hdc
);

183 
pD©a
->
ôemHeight
=
xh
 + 1;

185 
pD©a
->
ôemHûighãd
 = 0;

186 
pD©a
->
dwFœgs
 = 
LBF_NOTHINGSELECTED
;

189 i‡(!(
pD©a
->
buffSèπ
 = 
	`mÆloc
 (
Àn
 *  (
LISTBOXITEM
))))

190  
FALSE
;

192 
pD©a
->
buffLí
 = 
Àn
;

193 
pD©a
->
buffEnd
 =ÖD©a->
buffSèπ
 + 
Àn
;

194 
pD©a
->
‰ìLi°
 =ÖD©a->
buffSèπ
;

196 
∂bi
 = 
pD©a
->
‰ìLi°
;

197 
i
 = 0; i < 
Àn
 - 1; i++) {

198 
∂bi
->
√xt
 =Ölbi + 1;

199 
∂bi
 ++;

201 
∂bi
->
√xt
 = 
NULL
;

203  
TRUE
;

204 
	}
}

206 
	$l°Li°BoxCÀ™Up
 (
LISTBOXDATA
* 
pD©a
)

208 
PLISTBOXITEM
 
∂bi
;

209 
PLISTBOXITEM
 
√xt
;

211 
∂bi
 = 
pD©a
->
hód
;

212 
∂bi
) {

213 
	`FªeFixSå
 (
∂bi
->
key
);

214 
√xt
 = 
∂bi
->next;

215 i‡(
∂bi
 < 
pD©a
->
buffSèπ
 ||Ölbò>ÖD©a->
buffEnd
)

216 
	`‰ì
 (
∂bi
);

218 
∂bi
 = 
√xt
;

221 
	`‰ì
 (
pD©a
->
buffSèπ
);

222 
	}
}

224 
	$l°Re£tLi°BoxC⁄ã¡
 (
PLISTBOXDATA
 
pD©a
)

226 
i
;

227 
PLISTBOXITEM
 
∂bi
, 
√xt
;

229 
pD©a
->
ôemCou¡
 = 0;

230 
pD©a
->
ôemT›
 = 0;

231 
pD©a
->
ôemHûighãd
 = 0;

233 
pD©a
->
ôemVisibÀs
 = 0;

236 
∂bi
 = 
pD©a
->
hód
;

237 
∂bi
) {

238 
	`FªeFixSå
 (
∂bi
->
key
);

239 
√xt
 = 
∂bi
->next;

240 i‡(
∂bi
 < 
pD©a
->
buffSèπ
 ||Ölbò>ÖD©a->
buffEnd
)

241 
	`‰ì
 (
∂bi
);

243 
∂bi
 = 
√xt
;

246 
pD©a
->
hód
 = 
NULL
;

247 
pD©a
->
‰ìLi°
 =ÖD©a->
buffSèπ
;

249 
∂bi
 = 
pD©a
->
‰ìLi°
;

250 
i
 = 0; i < 
pD©a
->
buffLí
 - 1; i++) {

251 
∂bi
->
√xt
 =Ölbi + 1;

252 
∂bi
 ++;

254 
∂bi
->
√xt
 = 
NULL
;

255 
	}
}

257 
PLISTBOXITEM
 
	$l°AŒocIãm
 (
PLISTBOXDATA
 
pD©a
)

259 
PLISTBOXITEM
 
∂bi
;

261 i‡(
pD©a
->
‰ìLi°
) {

262 
∂bi
 = 
pD©a
->
‰ìLi°
;

263 
pD©a
->
‰ìLi°
 = 
∂bi
->
√xt
;

266 
∂bi
 = (
PLISTBOXITEM
Ë
	`mÆloc
 ( (
LISTBOXITEM
));

268  
∂bi
;

269 
	}
}

271 
	$l°FªeIãm
 (
PLISTBOXDATA
 
pD©a
, 
PLISTBOXITEM
 
∂bi
)

273 i‡(
∂bi
 < 
pD©a
->
buffSèπ
 ||Ölbò>ÖD©a->
buffEnd
)

274 
	`‰ì
 (
∂bi
);

276 
∂bi
->
√xt
 = 
pD©a
->
‰ìLi°
;

277 
pD©a
->
‰ìLi°
 = 
∂bi
;

279 
	}
}

281 
	$l°AddNewIãm
 (
DWORD
 
dwStyÀ
,

282 
PLISTBOXDATA
 
pD©a
, 
PLISTBOXITEM
 
√wIãm
, 
pos
)

284 
PLISTBOXITEM
 
∂bi
;

285 
PLISTBOXITEM
 
ösPosIãm
 = 
NULL
;

286 
ösPos
 = 0;

288 
√wIãm
->
√xt
 = 
NULL
;

289 i‡(!
pD©a
->
hód
)

290 
ösPosIãm
 = 
NULL
;

291 i‡(
dwStyÀ
 & 
LBS_SORT
) {

292 
∂bi
 = 
pD©a
->
hód
;

294 i‡(
	`°rcmp
 (
√wIãm
->
key
, 
∂bi
->key) < 0) {

295 
ösPosIãm
 = 
NULL
;

296 
ösPos
 = 0;

299 
∂bi
->
√xt
) {

300 i‡(
	`°rcmp
 (
√wIãm
->
key
, 
∂bi
->
√xt
->key) <= 0)

303 
∂bi
 =Ölbi->
√xt
;

304 
ösPos
 ++;

306 
ösPosIãm
 = 
∂bi
;

310 
∂bi
 = 
pD©a
->
hód
;

312 i‡(
pos
 < 0) {

313 
∂bi
->
√xt
) {

314 
∂bi
 =Ölbi->
√xt
;

315 
ösPos
 ++;

317 
ösPosIãm
 = 
∂bi
;

319 i‡(
pos
 > 0) {

320 
ödex
 = 0;

322 
∂bi
->
√xt
) {

323 i‡(
pos
 =
ödex
)

325 
∂bi
 =Ölbi->
√xt
;

326 
ödex
 ++;

327 
ösPos
 ++;

329 
ösPosIãm
 = 
∂bi
;

333 i‡(
ösPosIãm
) {

334 
∂bi
 = 
ösPosIãm
->
√xt
;

335 
ösPosIãm
->
√xt
 = 
√wIãm
;

336 
√wIãm
->
√xt
 = 
∂bi
;

338 
ösPos
 ++;

341 
∂bi
 = 
pD©a
->
hód
;

342 
pD©a
->
hód
 = 
√wIãm
;

343 
√wIãm
->
√xt
 = 
∂bi
;

346 
pD©a
->
ôemCou¡
 ++;

347  
ösPos
;

348 
	}
}

350 
PLISTBOXITEM
 
	$l°RemoveIãm
 (
PLISTBOXDATA
 
pD©a
, * 
pos
)

352 
ödex
 = 0;

353 
PLISTBOXITEM
 
∂bi
, 
¥ev
;

355 i‡(!
pD©a
->
hód
)

356  
NULL
;

358 i‡(*
pos
 < 0) {

359 
¥ev
 = 
pD©a
->
hód
;

360 
∂bi
 = 
pD©a
->
hód
;

361 
∂bi
->
√xt
) {

362 
¥ev
 = 
∂bi
;

363 
∂bi
 =Ölbi->
√xt
;

364 
ödex
 ++;

367 i‡(
∂bi
 =
pD©a
->
hód
) {

368 
pD©a
->
hód
 =ÖD©a->hód->
√xt
;

369 *
pos
 = 0;

370  
∂bi
;

373 
¥ev
->
√xt
 = 
∂bi
->next;

374 *
pos
 = 
ödex
;

375  
∂bi
;

378 i‡(*
pos
 == 0) {

379 
∂bi
 = 
pD©a
->
hód
;

380 
pD©a
->
hód
 = 
∂bi
->
√xt
;

381  
∂bi
;

384 
ödex
 = 0;

385 
¥ev
 = 
pD©a
->
hód
;

386 
∂bi
 = 
pD©a
->
hód
;

387 
∂bi
->
√xt
) {

388 i‡(*
pos
 =
ödex
)

391 
¥ev
 = 
∂bi
;

392 
∂bi
 =Ölbi->
√xt
;

393 
ödex
 ++;

396 i‡(
∂bi
 =
pD©a
->
hód
) {

397 
pD©a
->
hód
 =ÖD©a->hód->
√xt
;

398 *
pos
 = 0;

399  
∂bi
;

402 
¥ev
->
√xt
 = 
∂bi
->next;

403 *
pos
 = 
ödex
;

404  
∂bi
;

408  
NULL
;

409 
	}
}

411 
	$l°GëIãmsRe˘
 (
PLISTBOXDATA
 
pD©a
, 
°¨t
, 
íd
, 
RECT
* 
¥c
)

413 i‡(
°¨t
 < 0)

414 
°¨t
 = 0;

416 
¥c
->
t›
 = (
°¨t
 - 
pD©a
->
ôemT›
)*pD©a->
ôemHeight
;

418 i‡(
íd
 >= 0)

419 
¥c
->
bŸtom
 = (
íd
 - 
pD©a
->
ôemT›
 + 1)*pD©a->
ôemHeight
;

421 
	}
}

423 
	$l°InvÆid©eIãm
 (
HWND
 
hwnd
, 
PLISTBOXDATA
 
pD©a
, 
pos
,
BOOL
 
fEBk
)

425 
RECT
 
rcInv
;

427 i‡(
pos
 < 
pD©a
->
ôemT›
 ||Öo†> (pD©a->ôemT› +ÖD©a->
ôemVisibÀs
))

430 
	`GëClõ¡Re˘
 (
hwnd
, &
rcInv
);

431 
rcInv
.
t›
 = (
pos
 - 
pD©a
->
ôemT›
)*pD©a->
ôemHeight
;

432 
rcInv
.
bŸtom
 =ÑcInv.
t›
 + 
pD©a
->
ôemHeight
;

434 
	`InvÆid©eRe˘
 (
hwnd
, &
rcInv
, 
fEBk
);

435 
	}
}

437 
BOOL
 
	$l°InvÆid©eUndîIãm
 (
HWND
 
hwnd
, 
PLISTBOXDATA
 
pD©a
, 
pos
)

439 
RECT
 
rcInv
;

441 i‡(
pos
 > (
pD©a
->
ôemT›
 +ÖD©a->
ôemVisibÀs
))

442  
FALSE
;

444 i‡(
pos
 <
pD©a
->
ôemT›
) {

445 
	`InvÆid©eRe˘
 (
hwnd
, 
NULL
, 
TRUE
);

446  
TRUE
;

449 
	`GëClõ¡Re˘
 (
hwnd
, &
rcInv
);

451 
	`l°GëIãmsRe˘
 (
pD©a
, 
pos
, -1, &
rcInv
);

453 i‡(
rcInv
.
t›
 <ÑcInv.
bŸtom
)

454 
	`InvÆid©eRe˘
 (
hwnd
, &
rcInv
, 
TRUE
);

456  
TRUE
;

457 
	}
}

459 
PLISTBOXITEM
 
	$l°GëIãm
 (
PLISTBOXDATA
 
pD©a
, 
pos
)

461 
i
;

462 
PLISTBOXITEM
 
∂bi
;

464 
∂bi
 = 
pD©a
->
hód
;

465 
i
=0; i < 
pos
 && 
∂bi
; i++)

466 
∂bi
 =Ölbi->
√xt
;

468  
∂bi
;

469 
	}
}

471 
	$l°FödIãm
 (
PLISTBOXDATA
 
pD©a
, 
°¨t
, * 
key
, 
BOOL
 
bExa˘
)

473 
PLISTBOXITEM
 
∂bi
;

474 
keyÀn
 = 
	`°æí
 (
key
);

476 i‡(
°¨t
 >(
pD©a
->
ôemCou¡
 - 1))

477 
°¨t
 = 0;

479 
∂bi
 = 
	`l°GëIãm
 (
pD©a
, 
°¨t
);

481 
∂bi
)

483 i‡(
bExa˘
 && (
keyÀn
 !
	`°æí
 (
∂bi
->
key
))) {

484 
∂bi
 =Ölbi->
√xt
;

485 
°¨t
 ++;

489 i‡(
	`°∫ˇ£cmp
 (
key
, 
∂bi
->key, 
keyÀn
) == 0)

490  
°¨t
;

492 
∂bi
 =Ölbi->
√xt
;

493 
°¨t
 ++;

496  
LB_ERR
;

497 
	}
}

499 
	$l°OnDøwSLi°BoxIãms
 (
HDC
 
hdc
, 
DWORD
 
dwStyÀ
,

500 
PLISTBOXDATA
 
pD©a
, 
width
)

502 
PLISTBOXITEM
 
∂bi
;

503 
i
;

504 
x
 = 0, 
y
 = 0;

505 
off£t
;

506 
RECT
 
rc
;

507 
COLORREF
 
bk
;

509 
∂bi
 = 
	`l°GëIãm
 (
pD©a
,ÖD©a->
ôemT›
);

511 
i
 = 0; 
∂bi
 && i < (
pD©a
->
ôemVisibÀs
 + 1); i++) {

513 i‡(
∂bi
->
dwFœgs
 & 
LBIF_SELECTED
) {

514 
	`SëBkCﬁ‹
 (
hdc
, 
bk
 = 
BLUE
);

515 
	`SëTextCﬁ‹
 (
hdc
, 
WHITE
);

518 
	`SëBkCﬁ‹
 (
hdc
, 
bk
 = 
WHITE
);

519 
	`SëTextCﬁ‹
 (
hdc
, 
BLACK
);

521 
rc
.
À·
 = 0;

522 
rc
.
t›
 = 
y
;

523 
rc
.
right
 = 
width
;

524 
rc
.
bŸtom
 = 
y
 + 
pD©a
->
ôemHeight
;

525 
	`Fa°FûlRe˘
(
hdc
, &
rc
, 
bk
);

527 i‡(
dwStyÀ
 & 
LBS_CHECKBOX
) {

528 
x
 = 
LST_INTER_BMPTEXT
;

529 i‡(
∂bi
->
dwFœgs
 & 
LBIF_CHECKED
)

530 
off£t
 = 0;

531 i‡(
∂bi
->
dwFœgs
 & 
LBIF_PARTCHECKED
)

532 
off£t
 = 
LST_WIDTH_CHECKMARK
 << 1;

534 
off£t
 = 
LST_WIDTH_CHECKMARK
;

536 
	`FûlBoxWôhBôm≠P¨t
 (
hdc
,

537 
x
, 
y
 + ((
pD©a
->
ôemHeight
 - 
LST_HEIGHT_CHECKMARK
)>>1),

538 
LST_WIDTH_CHECKMARK
, 
LST_HEIGHT_CHECKMARK
,

540 &
sg_bmpCheckM¨k
,

541 
off£t
, 0);

543 
x
 +
LST_WIDTH_CHECKMARK
 + 
LST_INTER_BMPTEXT
;

546 i‡(
dwStyÀ
 & 
LBS_USEICON
 && 
∂bi
->
dwD©a
) {

547 
	`DøwIc⁄
 (
hdc
,

548 
x
, 
y
, 
pD©a
->
ôemHeight
,ÖData->itemHeight,

549 (
HICON
Ë
∂bi
->
dwD©a
);

550 
x
 +
pD©a
->
ôemHeight
 + 
LST_INTER_BMPTEXT
;

556 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
DEFAULT_GUI_FONT
));

558 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
SYSTEM_FIXED_FONT
));

559 
	`TextOut
 (
hdc
, 
x
+2, 
y
, 
∂bi
->
key
,-1);

561 
y
 +
pD©a
->
ôemHeight
;

562 
∂bi
 =Ölbi->
√xt
;

564 
	}
}

566 
	$l°Sñe˘Iãm
 (
DWORD
 
dwStyÀ
, 
PLISTBOXDATA
 
pD©a
, 
√wSñ
)

568 
PLISTBOXITEM
 
∂bi
, 
√wIãm
;

569 
ödex
;

571 
√wIãm
 = 
	`l°GëIãm
 (
pD©a
, 
√wSñ
);

573 i‡(!
√wIãm
)  -1;

575 #ifde‡
_DEBUG


576 i‡(!
√wIãm
)

577 
	`Ârötf
 (
°dîr
, "ASSERT failed:Ñeturn value ofÜstGetItem"

581 i‡(
dwStyÀ
 & 
LBS_MULTIPLESEL
) {

582 
√wIãm
->
dwFœgs
 ^
LBIF_SELECTED
;

583  
√wSñ
;

586 
ödex
 = 0;

587 
∂bi
 = 
pD©a
->
hód
;

588 
∂bi
) {

589 i‡(
∂bi
->
dwFœgs
 & 
LBIF_SELECTED
) {

590 i‡(
ödex
 !
√wSñ
) {

591 
∂bi
->
dwFœgs
 &~
LBIF_SELECTED
;

592 
√wIãm
->
dwFœgs
 |
LBIF_SELECTED
;

593  
ödex
;

598 
∂bi
 =Ölbi->
√xt
;

599 
ödex
 ++;

602 
√wIãm
->
dwFœgs
 |
LBIF_SELECTED
;

604 
	}
}

606 
	$l°DøwFocusRe˘
 (
HDC
 
hdc
, 
PLISTBOXDATA
 
pD©a
, 
RECT
* 
rc
)

608 
HGDIOBJ
 
ﬁdbrush
,
ﬁd≥n
;

610 i‡(
pD©a
->
ôemHûighãd
 <ÖD©a->
ôemT›


611 || 
pD©a
->
ôemHûighãd
 > (pD©a->
ôemT›
 +ÖD©a->
ôemVisibÀs
))

614 i‡(
pD©a
->
dwFœgs
 & 
LBF_FOCUS
) {

615 
	`l°GëIãmsRe˘
 (
pD©a
,ÖD©a->
ôemHûighãd
,ÖD©a->ôemHûighãd, 
rc
);

617 
	`InÊ©eRe˘
 (
rc
, -1, -1);

619 
	`FocusRe˘
 (
hdc
, 
rc
->
À·
 - 1,Ñc->
t›
,Ñc->
right
,Ñc->
bŸtom
);

621 
ﬁdbrush
=
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
NULL_BRUSH
));

622 
ﬁd≥n
=
	`Sñe˘Obje˘
(
hdc
, 
	`Cª©ePí
(
PS_SOLID
, 1,

623 
	`GëSysCﬁ‹
(
COLOR_BTNHIGHLIGHT
)));

625 
	`GdSëMode
(
MWMODE_XOR
);

627 
	`Re˘™gÀ
 (
hdc
, 
rc
->
À·
,Ñc->
t›
,Ñc->
right
,Ñc->
bŸtom
);

629 
	`GdSëMode
(
MWMODE_SET
);

631 
	`Sñe˘Obje˘
(
hdc
,
ﬁdbrush
);

632 
	`DñëeObje˘
(
	`Sñe˘Obje˘
(
hdc
,
ﬁd≥n
));

635 
	}
}

637 
	$l°CÆcP¨ams
 (c⁄° 
RECT
* 
rcClõ¡
, 
PLISTBOXDATA
 
pD©a
)

639 
	#RECTHP
(
¥c
Ë’rc->
bŸtom
 -Örc->
t›
)

	)

640 
pD©a
->
ôemVisibÀs
 = (
	`RECTHP
 (
rcClõ¡
)Ë/ÖD©a->
ôemHeight
;

643 if–((
	`RECTHP
 (
rcClõ¡
)Ë% 
pD©a
->
ôemHeight
) )

644 
pD©a
->
ôemVisibÀs
++;

646 
	}
}

648 
BOOL
 
SëS¸ﬁlPos
 (
HWND
 
hWnd
, 
iSB¨
, 
iNewPos
);

649 
BOOL
 
E«bÀS¸ﬁlB¨
 (
HWND
 
hWnd
, 
iSB¨
, BOOL 
bE«bÀ
);

651 
	$l°SëVS¸ﬁlInfo
 (
HWND
 
hwnd
, 
PLISTBOXDATA
 
pD©a
, 
BOOL
 
fRedøw
)

653 
SCROLLINFO
 
si
;

655 i‡(
pD©a
->
ôemVisibÀs
 >pD©a->
ôemCou¡
)

657 
	`SëS¸ﬁlPos
 (
hwnd
, 
SB_VERT
, 0);

658 
	`E«bÀS¸ﬁlB¨
 (
hwnd
, 
SB_VERT
, 
FALSE
);

662 
si
.
fMask
 = 
SIF_RANGE
 | 
SIF_PAGE
 | 
SIF_POS
;

663 
si
.
nMax
 = 
pD©a
->
ôemCou¡
 - 1;

664 
si
.
nMö
 = 0;

665 
si
.
nPage
 = 
	`mö
 (
pD©a
->
ôemVisibÀs
, (pD©a->
ôemCou¡
 -ÖD©a->
ôemT›
));

666 
si
.
nPos
 = 
pD©a
->
ôemT›
;

668 
	`SëS¸ﬁlInfo
 (
hwnd
, 
SB_VERT
, &
si
, 
fRedøw
);

669 
	`E«bÀS¸ﬁlB¨
 (
hwnd
, 
SB_VERT
, 
TRUE
);

670 
	}
}

672 
LRESULT
 
CALLBACK


673 
	$Li°boxCålProc
 (
HWND
 
hwnd
, 
UINT
 
mesßge
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
)

675 
HDC
 
hdc
;

676 
HWND
 
pCål
;

677 
PLISTBOXDATA
 
pD©a
;

678 
DWORD
 
dwStyÀ
;

680 
pCål
 = 
hwnd
;

681 
dwStyÀ
 = 
pCål
->
°yÀ
;

683 
mesßge
)

685 
WM_CREATE
:

686 
pD©a
 = (
LISTBOXDATA
*Ë
	`mÆloc
 ((LISTBOXDATA));

687 i‡(
pD©a
 =
NULL
)

690 
pCål
->
u£rd©a
 = (
DWORD
)
pD©a
;

691 i‡(!
	`l°InôLi°BoxD©a
 (
hwnd
, 
pD©a
, 
DEF_LB_BUFFER_LEN
)) {

692 
	`‰ì
 (
pD©a
);

697 
WM_SIZE
:

699 
RECT
 
rc
;

701 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

702 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

703 
	`l°CÆcP¨ams
 (&
rc
, 
pD©a
);

707 
WM_DESTROY
:

708 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

709 
	`l°Li°BoxCÀ™Up
 (
pD©a
);

710 
	`‰ì
 (
pD©a
);

713 
LB_RESETCONTENT
:

714 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

715 
	`l°Re£tLi°BoxC⁄ã¡
 (
pD©a
);

716 
	`InvÆid©eRe˘
 (
hwnd
, 
NULL
, 
TRUE
);

719 
LB_ADDSTRING
:

720 
LB_INSERTSTRING
:

722 * 
°rög
 = 
NULL
;

723 
PLISTBOXITEMINFO
 
∂bii
 = 
NULL
;

724 
PLISTBOXITEM
 
√wIãm
;

725 
pos
;

727 i‡(
dwStyÀ
 & 
LBS_CHECKBOX
 || dwStyÀ & 
LBS_USEICON
) {

728 
∂bii
 = (
PLISTBOXITEMINFO
)
lP¨am
;

729 i‡(!
∂bii
)

730  
LB_ERR
;

732 
°rög
 = 
∂bii
->string;

735 
°rög
 = (*)
lP¨am
;

736 i‡(
°rög
 =
NULL
 || string [0] == '\0')

737  
LB_ERR
;

740 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

741 
√wIãm
 = 
	`l°AŒocIãm
 (
pD©a
);

742 i‡(!
√wIãm
) {

743 
	`NŸifyP¨ít
 (
hwnd
, 
pCål
->
id
, 
LBN_ERRSPACE
);

744  
LB_ERRSPACE
;

747 
√wIãm
->
key
 = 
	`FixSåAŒoc
 (
	`°æí
 (
°rög
));

748 
	`°r˝y
 (
√wIãm
->
key
, 
°rög
);

749 
√wIãm
->
dwFœgs
 = 
LBIF_NORMAL
;

750 i‡(
∂bii
) {

751 
∂bii
->
cmFœg
) {

752 
CMFLAG_CHECKED
:

753 
√wIãm
->
dwFœgs
 |
LBIF_CHECKED
;

755 
CMFLAG_PARTCHECKED
:

756 
√wIãm
->
dwFœgs
 |
LBIF_PARTCHECKED
;

760 i‡(
dwStyÀ
 & 
LBS_USEICON
)

761 
√wIãm
->
dwD©a
 = (
DWORD
)
∂bii
->
hIc⁄
;

763 
√wIãm
->
dwD©a
 = 0L;

765 
√wIãm
->
dwAddD©a
 = 0L;

767 i‡(
mesßge
 =
LB_ADDSTRING
)

768 
pos
 = 
	`l°AddNewIãm
 (
dwStyÀ
, 
pD©a
, 
√wIãm
, -1);

770 
pos
 = 
	`l°AddNewIãm
 (
dwStyÀ
, 
pD©a
, 
√wIãm
, ()
wP¨am
);

772 
	`l°InvÆid©eUndîIãm
 (
hwnd
, 
pD©a
, 
pos
);

774 
	`l°SëVS¸ﬁlInfo
 (
hwnd
, 
pD©a
, 
TRUE
);

776  
pos
;

780 
LB_DELETESTRING
:

782 
PLISTBOXITEM
 
ªmoved
;

783 
dñëe
;

785 
dñëe
 = ()
wP¨am
;

787 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

788 
ªmoved
 = 
	`l°RemoveIãm
 (
pD©a
, &
dñëe
);

789 i‡(
ªmoved
) {

790 
	`FªeFixSå
 (
ªmoved
->
key
);

791 
	`l°FªeIãm
 (
pD©a
, 
ªmoved
);

793 
pD©a
->
ôemCou¡
 --;

795 i‡(
pD©a
->
ôemT›
 != 0

796 && 
pD©a
->
ôemCou¡
 <pD©a->
ôemVisibÀs
) {

797 
pD©a
->
ôemT›
 = 0;

798 
	`InvÆid©eRe˘
 (
hwnd
, 
NULL
, 
TRUE
);

801 
	`l°InvÆid©eUndîIãm
 (
hwnd
, 
pD©a
, 
dñëe
);

802 i‡(
dñëe
 <
pD©a
->
ôemT›
) {

803 
pD©a
->
ôemT›
 --;

804 i‡(
pD©a
->
ôemT›
 < 0)

805 
pD©a
->
ôemT›
 = 0;

809 i‡(
pD©a
->
ôemHûighãd
 >pD©a->
ôemCou¡
) {

810 
pD©a
->
ôemHûighãd
 =ÖD©a->
ôemCou¡
 - 1;

811 i‡(
pD©a
->
ôemHûighãd
 < 0)

812 
pD©a
->
ôemHûighãd
 = 0;

815 i‡(
pD©a
->
ôemHûighãd
 <ÖD©a->
ôemT›
)

816 
pD©a
->
ôemHûighãd
 =ÖD©a->
ôemT›
;

817 i‡(
pD©a
->
ôemHûighãd
 > 
	`ITEM_BOTTOM
 (pData))

818 
pD©a
->
ôemHûighãd
 = 
	`ITEM_BOTTOM
 (pData);

820 
	`l°SëVS¸ﬁlInfo
 (
hwnd
, 
pD©a
, 
TRUE
);

825 
LB_FINDSTRING
:

826 if–*(*)
lP¨am
 == '\0' )

827  
LB_ERR
;

829 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

830  
	`l°FödIãm
(
pD©a
, ()
wP¨am
, (*)
lP¨am
, 
FALSE
);

832 
LB_FINDSTRINGEXACT
:

833 if–*(*)
lP¨am
 == '\0' )

834  
LB_ERR
;

836 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

837  
	`l°FödIãm
(
pD©a
, ()
wP¨am
, (*)
lP¨am
, 
TRUE
);

839 
LB_SETTOPINDEX
:

841 
√wT›
 = (Ë
wP¨am
;

843 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

845 i‡(
√wT›
 <0)

846 
√wT›
 = 0;

847 i‡(
√wT›
 > 
pD©a
->
ôemCou¡
 -ÖD©a->
ôemVisibÀs
)

848 
√wT›
 = 
pD©a
->
ôemCou¡
 -ÖD©a->
ôemVisibÀs
;

850 i‡(
pD©a
->
ôemT›
 !
√wT›
) {

851 
pD©a
->
ôemT›
 = 
√wT›
;

853 i‡(
pD©a
->
ôemHûighãd
 <ÖD©a->
ôemT›
)

854 
pD©a
->
ôemHûighãd
 =ÖD©a->
ôemT›
;

855 i‡(
pD©a
->
ôemHûighãd
 > 
	`ITEM_BOTTOM
 (pData))

856 
pD©a
->
ôemHûighãd
 = 
	`ITEM_BOTTOM
 (pData);

858 
	`l°SëVS¸ﬁlInfo
 (
hwnd
, 
pD©a
, 
TRUE
);

860 
	`InvÆid©eRe˘
 (
hwnd
, 
NULL
, 
TRUE
);

865 
LB_SETCURSEL
:

866 
LB_SETCARETINDEX
:

868 
√w
 = ()
wP¨am
;

869 
ﬁd
, 
√wT›
;

871 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

872 i‡(
√w
 < 0 ||Çew > 
pD©a
->
ôemCou¡
 - 1)

873  
LB_ERR
;

875 
ﬁd
 = 
pD©a
->
ôemHûighãd
;

876 i‡(
√w
 >0 &&Çew !
ﬁd
) {

877 i‡(
pD©a
->
ôemCou¡
 - 
√w
 >pD©a->
ôemVisibÀs
)

878 
√wT›
 = 
√w
;

880 
√wT›
 = 
	`max
 (
pD©a
->
ôemCou¡
 -ÖD©a->
ôemVisibÀs
, 0);

882 
pD©a
->
ôemT›
 = 
√wT›
;

883 
pD©a
->
ôemHûighãd
 = 
√w
;

884 
	`l°SëVS¸ﬁlInfo
 (
hwnd
, 
pD©a
, 
TRUE
);

887 i‡(!(
dwStyÀ
 & 
LBS_MULTIPLESEL
))

888 
	`l°Sñe˘Iãm
 (
dwStyÀ
, 
pD©a
, 
√w
);

889 
	`InvÆid©eRe˘
 (
hwnd
, 
NULL
, 
TRUE
);

891  
ﬁd
;

895 
LB_GETCOUNT
:

896 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

897  
pD©a
->
ôemCou¡
;

900 
LB_GETCURSEL
:

902 
PLISTBOXITEM
 
∂bi
;

903 
ödex
 = 0;

905 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

906 i‡(
dwStyÀ
 & 
LBS_MULTIPLESEL
)

907  
pD©a
->
ôemHûighãd
;

909 
∂bi
 = 
pD©a
->
hód
;

910 
∂bi
) {

911 i‡(
∂bi
->
dwFœgs
 & 
LBIF_SELECTED
)

912  
ödex
;

914 
ödex
 ++;

915 
∂bi
 =Ölbi->
√xt
;

918  
LB_ERR
;

922 
LB_GETSELCOUNT
:

924 
nSñ
;

925 
PLISTBOXITEM
 
∂bi
;

927 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

929 
nSñ
 = 0;

930 
∂bi
 = 
pD©a
->
hód
;

931 
∂bi
) {

932 i‡(
∂bi
->
dwFœgs
 & 
LBIF_SELECTED
)

933 
nSñ
 ++;

934 
∂bi
 =Ölbi->
√xt
;

937  
nSñ
;

941 
LB_GETTOPINDEX
:

942 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

943  
pD©a
->
ôemT›
;

946 
LB_GETCARETINDEX
:

947 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

948  
pD©a
->
ôemHûighãd
;

951 
LB_GETTEXTLEN
:

953 
PLISTBOXITEM
 
∂bi
;

955 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

956 
∂bi
 = 
	`l°GëIãm
 (
pD©a
, ()
wP¨am
);

957 i‡(
∂bi
)

958  
	`°æí
 (
∂bi
->
key
);

960  
LB_ERR
;

964 
LB_GETTEXT
:

966 
PLISTBOXITEM
 
∂bi
;

968 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

969 
∂bi
 = 
	`l°GëIãm
 (
pD©a
, ()
wP¨am
);

970 i‡(
∂bi
)

971 
	`°r˝y
 ((*)
lP¨am
, 
∂bi
->
key
);

973  
LB_ERR
;

977 
LB_SETTEXT
:

979 
PLISTBOXITEM
 
∂bi
;

980 * 
√wSå
;

982 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

983 
∂bi
 = 
	`l°GëIãm
 (
pD©a
, ()
wP¨am
);

984 i‡(
∂bi
) {

985 
√wSå
 = 
	`FixSåAŒoc
 (
	`°æí
 ((*)
lP¨am
));

986 i‡(
√wSå
) {

987 
	`FªeFixSå
 (
∂bi
->
key
);

988 
∂bi
->
key
 = 
√wSå
;

989 
	`°r˝y
 (
∂bi
->
key
, (*)
lP¨am
);

990 
	`l°InvÆid©eIãm
 (
hwnd
, 
pD©a
, ()
wP¨am
, 
TRUE
);

993  
LB_ERR
;

996  
LB_ERR
;

1000 
LB_GETITEMDATA
:

1002 
PLISTBOXITEM
 
∂bi
;

1003 
PLISTBOXITEMINFO
 
∂bii
;

1005 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

1006 i‡(!(
∂bi
 = 
	`l°GëIãm
 (
pD©a
, ()
wP¨am
)))

1007  
LB_ERR
;

1009 i‡(!(
dwStyÀ
 & 
LBS_CHECKBOX
 || dwStyÀ & 
LBS_USEICON
)) {

1010  
∂bi
->
dwD©a
;

1013 
∂bii
 = (
PLISTBOXITEMINFO
)
lP¨am
;

1014 i‡(!
∂bii
)

1015  
LB_ERR
;

1017 i‡(
∂bi
->
dwFœgs
 & 
LBIF_CHECKED
)

1018 
∂bii
->
cmFœg
 = 
CMFLAG_CHECKED
;

1019 i‡(
∂bi
->
dwFœgs
 & 
LBIF_PARTCHECKED
)

1020 
∂bii
->
cmFœg
 = 
CMFLAG_PARTCHECKED
;

1022 
∂bii
->
cmFœg
 = 
CMFLAG_BLANK
;

1023 
∂bii
->
hIc⁄
 = (
HICON
)
∂bi
->
dwD©a
;

1025  
LB_OKAY
;

1029 
LB_SETITEMDATA
:

1031 
PLISTBOXITEM
 
∂bi
;

1032 
PLISTBOXITEMINFO
 
∂bii
;

1034 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

1035 i‡(!(
∂bi
 = 
	`l°GëIãm
 (
pD©a
, ()
wP¨am
)))

1036  
LB_ERR
;

1038 i‡(!(
dwStyÀ
 & 
LBS_CHECKBOX
 || dwStyÀ & 
LBS_USEICON
)) {

1039 
∂bi
->
dwD©a
 = (
DWORD
)
lP¨am
;

1040  
LB_OKAY
;

1043 
∂bii
 = (
PLISTBOXITEMINFO
)
lP¨am
;

1044 i‡(!
∂bii
)

1045  
LB_ERR
;

1047 
∂bi
->
dwFœgs
 &~
LBIF_CHECKMARKMASK
;

1048 
∂bii
->
cmFœg
) {

1049 
CMFLAG_CHECKED
:

1050 
∂bi
->
dwFœgs
 |
LBIF_CHECKED
;

1052 
CMFLAG_PARTCHECKED
:

1053 
∂bi
->
dwFœgs
 |
LBIF_PARTCHECKED
;

1057 i‡(
dwStyÀ
 & 
LBS_USEICON
)

1058 
∂bi
->
dwD©a
 = (
DWORD
)
∂bii
->
hIc⁄
;

1060 
∂bi
->
dwD©a
 = 0;

1062 
	`l°InvÆid©eIãm
 (
hwnd
, 
pD©a
, ()
wP¨am
, 
TRUE
);

1064  
LB_OKAY
;

1068 
LB_GETITEMADDDATA
:

1070 
PLISTBOXITEM
 
∂bi
;

1072 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

1073 i‡(!(
∂bi
 = 
	`l°GëIãm
 (
pD©a
, ()
wP¨am
)))

1074  
LB_ERR
;

1076  
∂bi
->
dwAddD©a
;

1080 
LB_SETITEMADDDATA
:

1082 
PLISTBOXITEM
 
∂bi
;

1084 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

1085 i‡(!(
∂bi
 = 
	`l°GëIãm
 (
pD©a
, ()
wP¨am
)))

1086  
LB_ERR
;

1088 
∂bi
->
dwAddD©a
 = (
DWORD
)
lP¨am
;

1090  
LB_OKAY
;

1094 
LB_GETCHECKMARK
:

1096 
PLISTBOXITEM
 
∂bi
;

1098 i‡(!(
dwStyÀ
 & 
LBS_CHECKBOX
))

1099  
LB_ERR
;

1101 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

1102 i‡(!(
∂bi
 = 
	`l°GëIãm
 (
pD©a
, ()
wP¨am
)))

1103  
LB_ERR
;

1105 i‡(
∂bi
->
dwFœgs
 & 
LBIF_CHECKED
)

1106  
CMFLAG_CHECKED
;

1108 i‡(
∂bi
->
dwFœgs
 & 
LBIF_PARTCHECKED
)

1109  
CMFLAG_PARTCHECKED
;

1111  
CMFLAG_BLANK
;

1115 
LB_SETCHECKMARK
:

1117 
PLISTBOXITEM
 
∂bi
;

1119 i‡(!(
dwStyÀ
 & 
LBS_CHECKBOX
))

1120  
LB_ERR
;

1122 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

1123 i‡(!(
∂bi
 = 
	`l°GëIãm
 (
pD©a
, ()
wP¨am
)))

1124  
LB_ERR
;

1126 
∂bi
->
dwFœgs
 &~
LBIF_CHECKMARKMASK
;

1127 
lP¨am
) {

1128 
CMFLAG_CHECKED
:

1129 
∂bi
->
dwFœgs
 |
LBIF_CHECKED
;

1131 
CMFLAG_PARTCHECKED
:

1132 
∂bi
->
dwFœgs
 |
LBIF_PARTCHECKED
;

1136 
	`l°InvÆid©eIãm
 (
hwnd
, 
pD©a
, ()
wP¨am
, 
TRUE
);

1138  
LB_OKAY
;

1142 
LB_GETSELITEMS
:

1144 
nIãm
;

1145 
nSñ
 = 0;

1146 
ödex
 = 0;

1147 * 
pI¡
;

1148 
PLISTBOXITEM
 
∂bi
;

1150 
nIãm
 = ()
wP¨am
;

1151 
pI¡
 = (*)
lP¨am
;

1153 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

1154 
∂bi
 = 
pD©a
->
hód
;

1155 
∂bi
) {

1157 i‡(
∂bi
->
dwFœgs
 & 
LBIF_SELECTED
) {

1158 i‡(
pI¡
) {

1159 i‡(
nSñ
 < 
nIãm
)

1160 *(
pI¡
 + 
nSñ
Ë
ödex
;

1162  
nIãm
;

1164 
nSñ
 ++;

1167 
∂bi
 =Ölbi->
√xt
;

1168 
ödex
 ++;

1171  
nSñ
;

1175 
LB_GETSEL
:

1177 
PLISTBOXITEM
 
∂bi
;

1179 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

1180 
∂bi
 = 
	`l°GëIãm
 (
pD©a
, ()
wP¨am
);

1181 i‡(
∂bi
)

1182  
∂bi
->
dwFœgs
 & 
LBIF_SELECTED
;

1184  
LB_ERR
;

1188 
LB_SETSEL
:

1190 
PLISTBOXITEM
 
∂bi
;

1192 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

1193 
∂bi
 = 
	`l°GëIãm
 (
pD©a
, ()
lP¨am
);

1194 i‡(
∂bi
) {

1195 
pD©a
->
dwFœgs
 &~
LBF_NOTHINGSELECTED
;

1196 i‡(
wP¨am
 == -1)

1197 
∂bi
->
dwFœgs
 ^
LBIF_SELECTED
;

1198 i‡(
wP¨am
 == 0)

1199 
∂bi
->
dwFœgs
 &~
LBIF_SELECTED
;

1201 
∂bi
->
dwFœgs
 |
LBIF_SELECTED
;

1203 
	`l°InvÆid©eIãm
 (
hwnd
, 
pD©a
, ()
lP¨am
, 
FALSE
);

1206  
LB_ERR
;

1210 
LB_GETITEMHEIGHT
:

1211 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

1212  
pD©a
->
ôemHeight
;

1215 
LB_SETITEMHEIGHT
:

1216 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

1217 i‡(
pD©a
->
ôemHeight
 !
	`LOWORD
 (
lP¨am
)) {

1218 
RECT
 
rcClõ¡
;

1220 
pD©a
->
ôemHeight
 = 
	`LOWORD
 (
lP¨am
);

1221 
	`GëClõ¡Re˘
 (
hwnd
, &
rcClõ¡
);

1222 
	`l°CÆcP¨ams
 (&
rcClõ¡
, 
pD©a
);

1224 
	`l°SëVS¸ﬁlInfo
 (
hwnd
, 
pD©a
, 
TRUE
);

1225 
	`InvÆid©eRe˘
 (
hwnd
, 
NULL
, 
TRUE
);

1229 
WM_SETFOCUS
:

1231 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

1233 i‡(
pD©a
->
dwFœgs
 & 
LBF_FOCUS
)

1236 
pD©a
->
dwFœgs
 |
LBF_FOCUS
;

1237 
	`InvÆid©eRe˘
(
hwnd
, 
NULL
, 
TRUE
);

1239 
	`NŸifyP¨ít
 (
hwnd
, 
pCål
->
id
, 
LBN_SETFOCUS
);

1243 
WM_KILLFOCUS
:

1245 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

1247 
pD©a
->
dwFœgs
 &~
LBF_FOCUS
;

1248 
	`InvÆid©eRe˘
(
hwnd
, 
NULL
, 
TRUE
);

1250 
	`NŸifyP¨ít
 (
hwnd
, 
pCål
->
id
, 
LBN_KILLFOCUS
);

1254 
WM_GETDLGCODE
:

1255  
DLGC_WANTARROWS
 | 
DLGC_WANTCHARS
;

1257 
WM_GETTEXTLENGTH
:

1258 
WM_GETTEXT
:

1259 
WM_SETTEXT
:

1262 
WM_SETFONT
:

1265 
WM_GETFONT
:

1268 
WM_NCCALCSIZE
:

1270 
LPNCCALCSIZE_PARAMS
 
Õnc
;

1273 
Õnc
 = (
LPNCCALCSIZE_PARAMS
)
lP¨am
;

1274 if(
	`GëWödowL⁄g
(
hwnd
, 
GWL_STYLE
Ë& 
WS_BORDER
)

1275 
	`InÊ©eRe˘
(&
Õnc
->
rgrc
[0], -2, -2);

1279 
WM_NCPAINT
:

1281 
RECT
 
rc
;

1283 
hdc
 = 
wP¨am
? (
HDC
)wP¨am: 
	`GëWödowDC
 (
hwnd
);

1284 
	`GëWödowRe˘
(
hwnd
, &
rc
);

1286 i‡(
dwStyÀ
 & 
WS_BORDER
)

1287 
	`Døw3dIn£t
(
hdc
, 
rc
.
À·
,Ñc.
t›
,

1288 
rc
.
right
-rc.
À·
,Ñc.
bŸtom
-rc.
t›
);

1290 i‡(!
wP¨am
)

1291 
	`Rñó£DC
 (
hwnd
, 
hdc
);

1295 
WM_PAINT
:

1297 
RECT
 
rc
;

1298 
PAINTSTRUCT
 
ps
;

1300 
hdc
 = 
	`BegöPaöt
 (
hwnd
,&
ps
);

1301 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

1307 i‡(
pD©a
->
dwFœgs
 & 
LBF_NOTHINGSELECTED
) {

1308 
	`l°Sñe˘Iãm
 (
hwnd
->
°yÀ
, 
pD©a
,ÖD©a->
ôemT›
);

1309 
pD©a
->
dwFœgs
 &~
LBF_NOTHINGSELECTED
;

1311 
	`GëClõ¡Re˘
 (
hwnd
, &
rc
);

1312 
	`l°OnDøwSLi°BoxIãms
 (
hdc
, 
dwStyÀ
, 
pD©a
, 
rc
.
right
-rc.
À·
);

1313 
	`l°DøwFocusRe˘
 (
hdc
, 
pD©a
, &
rc
);

1315 
	`EndPaöt
 (
hwnd
, &
ps
);

1319 
WM_LBUTTONDBLCLK
:

1320 i‡(
dwStyÀ
 & 
LBS_NOTIFY
)

1321 
	`NŸifyP¨ít
 (
hwnd
, 
pCål
->
id
, 
LBN_DBLCLK
);

1324 
WM_LBUTTONDOWN
:

1326 
ﬁdSñ
, 
mou£X
, 
mou£Y
, 
hô
;

1327 
RECT
 
rcInv
;

1329 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

1330 i‡(
pD©a
->
ôemCou¡
 == 0)

1333 
mou£X
 = 
	`LOWORD
 (
lP¨am
);

1334 
mou£Y
 = 
	`HIWORD
 (
lP¨am
);

1335 
hô
 = 
mou£Y
 / 
pD©a
->
ôemHeight
;

1336 
hô
 +
pD©a
->
ôemT›
;

1338 i‡(
hô
 >
pD©a
->
ôemCou¡
)

1341 
	`GëClõ¡Re˘
 (
hwnd
, &
rcInv
);

1342 
ﬁdSñ
 = 
	`l°Sñe˘Iãm
 (
dwStyÀ
, 
pD©a
, 
hô
);

1343 i‡((
dwStyÀ
 & 
LBS_NOTIFY
Ë&& (
ﬁdSñ
 !
hô
))

1344 
	`NŸifyP¨ít
 (
hwnd
, 
pCål
->
id
, 
LBN_SELCHANGE
);

1345 i‡(
ﬁdSñ
 >= 0) {

1346 i‡(
ﬁdSñ
 >
pD©a
->
ôemT›


1347 && (
ﬁdSñ
 <
pD©a
->
ôemT›
 +ÖD©a->
ôemVisibÀs
)) {

1348 
	`l°GëIãmsRe˘
 (
pD©a
, 
ﬁdSñ
, oldSñ, &
rcInv
);

1349 
	`InvÆid©eRe˘
 (
hwnd
, &
rcInv
, 
TRUE
);

1353 
	`l°GëIãmsRe˘
 (
pD©a
, 
hô
, hô, &
rcInv
);

1354 
	`InvÆid©eRe˘
 (
hwnd
, &
rcInv
, 
TRUE
);

1356 i‡(
pD©a
->
ôemHûighãd
 !
hô
)

1358 
hdc
 = 
	`GëDC
(
hwnd
);

1360 
	`l°DøwFocusRe˘
 (
hdc
, 
pD©a
, &
rcInv
);

1361 
	`Rñó£DC
 (
hwnd
,
hdc
);

1363 
pD©a
->
ôemHûighãd
 = 
hô
;

1365 i‡(
dwStyÀ
 & 
LBS_CHECKBOX
) {

1366 i‡(
mou£X
 > 0 && mou£X < 
LST_WIDTH_CHECKMARK
) {

1367 
	`NŸifyP¨ít
 (
hwnd
, 
pCål
->
id
, 
LBN_CLICKCHECKMARK
);

1369 i‡(
dwStyÀ
 & 
LBS_AUTOCHECK
) {

1370 
PLISTBOXITEM
 
∂bi
;

1372 
∂bi
 = 
	`l°GëIãm
 (
pD©a
, 
hô
);

1374 
∂bi
->
dwFœgs
 & 
LBIF_CHECKMARKMASK
) {

1375 
LBIF_CHECKED
:

1376 
∂bi
->
dwFœgs
 &~
LBIF_CHECKMARKMASK
;

1379 
∂bi
->
dwFœgs
 &~
LBIF_CHECKMARKMASK
;

1380 
∂bi
->
dwFœgs
 |
LBIF_CHECKED
;

1384 
	`l°InvÆid©eIãm
 (
hwnd
, 
pD©a
, 
hô
, 
TRUE
);

1389 
	`l°SëVS¸ﬁlInfo
 (
hwnd
, 
pD©a
, 
TRUE
);

1393 
WM_LBUTTONUP
:

1396 
WM_MOUSEMOVE
:

1399 
WM_KEYDOWN
:

1401 
ﬁdSñ
, 
√wSñ
, 
√wT›
;

1402 
RECT
 
rcInv
;

1404 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

1405 
√wT›
 = 
pD©a
->
ôemT›
;

1406 
√wSñ
 = 
pD©a
->
ôemHûighãd
;

1407 
	`LOWORD
 (
wP¨am
))

1409 
VK_HOME
:

1410 
√wSñ
 = 0;

1411 
√wT›
 = 0;

1414 
VK_END
:

1415 
√wSñ
 = 
pD©a
->
ôemCou¡
 - 1;

1416 i‡(
pD©a
->
ôemCou¡
 >ÖD©a->
ôemVisibÀs
)

1417 
√wT›
 = 
pD©a
->
ôemCou¡
 -ÖD©a->
ôemVisibÀs
;

1419 
√wT›
 = 0;

1422 
VK_DOWN
:

1423 
√wSñ
 ++;

1424 i‡(
√wSñ
 >
pD©a
->
ôemCou¡
)

1426 i‡(
√wSñ
 > 
	`ITEM_BOTTOM
 (
pD©a
))

1427 
√wT›
 ++;

1430 
VK_UP
:

1431 
√wSñ
 --;

1432 i‡(
√wSñ
 < 0)

1434 i‡(
√wSñ
 < 
pD©a
->
ôemT›
)

1435 
√wT›
 --;

1438 
VK_NEXT
:

1439 
√wSñ
 +
pD©a
->
ôemVisibÀs
;

1440 i‡(
√wSñ
 >
pD©a
->
ôemCou¡
)

1441 
√wSñ
 = 
pD©a
->
ôemCou¡
 - 1;

1443 i‡(
pD©a
->
ôemCou¡
 - 
√wSñ
 >pD©a->
ôemVisibÀs
)

1444 
√wT›
 = 
√wSñ
;

1446 
√wT›
 = 
	`max
 (
pD©a
->
ôemCou¡
-pD©a->
ôemVisibÀs
, 0);

1449 
VK_PRIOR
:

1450 
√wSñ
 -
pD©a
->
ôemVisibÀs
;

1451 i‡(
√wSñ
 < 0)

1452 
√wSñ
 = 0;

1454 
√wT›
 -
pD©a
->
ôemVisibÀs
;

1455 i‡(
√wT›
 < 0)

1456 
√wT›
 = 0;

1463 
	`GëClõ¡Re˘
 (
hwnd
, &
rcInv
);

1464 i‡(
pD©a
->
ôemHûighãd
 !
√wSñ
) {

1465 i‡(
pD©a
->
ôemT›
 !
√wT›
) {

1466 
pD©a
->
ôemT›
 = 
√wT›
;

1467 
pD©a
->
ôemHûighãd
 = 
√wSñ
;

1468 i‡(!(
dwStyÀ
 & 
LBS_MULTIPLESEL
)) {

1469 
ﬁdSñ
 = 
	`l°Sñe˘Iãm
 (
dwStyÀ
, 
pD©a
, 
√wSñ
);

1470 i‡((
dwStyÀ
 & 
LBS_NOTIFY
Ë&& (
ﬁdSñ
 !
√wSñ
))

1471 
	`NŸifyP¨ít
 (
hwnd
, 
pCål
->
id
, 
LBN_SELCHANGE
);

1473 
	`InvÆid©eRe˘
 (
hwnd
, 
NULL
, 
TRUE
);

1476 i‡(!(
dwStyÀ
 & 
LBS_MULTIPLESEL
)) {

1477 
ﬁdSñ
 = 
	`l°Sñe˘Iãm
 (
dwStyÀ
, 
pD©a
, 
√wSñ
);

1478 i‡((
dwStyÀ
 & 
LBS_NOTIFY
Ë&& (
ﬁdSñ
 !
√wSñ
))

1479 
	`NŸifyP¨ít
 (
hwnd
, 
pCål
->
id
, 
LBN_SELCHANGE
);

1480 i‡(
ﬁdSñ
 >= 0) {

1481 i‡(
ﬁdSñ
 >
pD©a
->
ôemT›


1482 && 
ﬁdSñ
 <(
	`ITEM_BOTTOM
 (
pD©a
) + 1)) {

1483 
	`l°GëIãmsRe˘
 (
pD©a
, 
ﬁdSñ
, oldSñ, &
rcInv
);

1484 
	`InvÆid©eRe˘
 (
hwnd
, &
rcInv
, 
TRUE
);

1488 i‡(
√wSñ
 < 
√wT›
) {

1489 
pD©a
->
ôemHûighãd
 = 
√wSñ
;

1493 
	`l°GëIãmsRe˘
 (
pD©a
,ÖD©a->
ôemHûighãd
,

1494 
pD©a
->
ôemHûighãd
, &
rcInv
);

1496 
hdc
 = 
	`GëDC
(
hwnd
);

1498 
	`l°DøwFocusRe˘
 (
hdc
, 
pD©a
, &
rcInv
);

1499 
	`Rñó£DC
 (
hwnd
,
hdc
);

1501 
pD©a
->
ôemHûighãd
 = 
√wSñ
;

1502 
	`l°GëIãmsRe˘
 (
pD©a
, 
√wSñ
,ÇewSñ, &
rcInv
);

1503 
	`InvÆid©eRe˘
 (
hwnd
, &
rcInv
, 
TRUE
);

1507 
hdc
 = 
	`GëDC
(
hwnd
);

1509 
	`l°DøwFocusRe˘
 (
hdc
, 
pD©a
, &
rcInv
);

1510 
pD©a
->
ôemHûighãd
 = 
√wSñ
;

1511 
	`GëClõ¡Re˘
 (
hwnd
, &
rcInv
);

1512 
	`l°DøwFocusRe˘
 (
hdc
, 
pD©a
, &
rcInv
);

1513 
	`Rñó£DC
 (
hwnd
,
hdc
);

1516 
	`l°SëVS¸ﬁlInfo
 (
hwnd
, 
pD©a
, 
TRUE
);

1521 
WM_CHAR
:

1523 
hód
 [2];

1524 
ödex
;

1525 
√wT›
;

1527 
hód
 [0] = (Ë(
wP¨am
);

1528 
hód
 [1] = '\0';

1530 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

1532 i‡(
hód
[0] == ' ') {

1533 i‡(
dwStyÀ
 & 
LBS_MULTIPLESEL
) {

1534 
RECT
 
rcInv
;

1536 
	`GëClõ¡Re˘
 (
hwnd
, &
rcInv
);

1537 
	`l°Sñe˘Iãm
 (
dwStyÀ
, 
pD©a
,ÖD©a->
ôemHûighãd
);

1538 
	`l°GëIãmsRe˘
 (
pD©a
,

1539 
pD©a
->
ôemHûighãd
,

1540 
pD©a
->
ôemHûighãd
,

1541 &
rcInv
);

1542 
	`InvÆid©eRe˘
 (
hwnd
, &
rcInv
, 
TRUE
);

1544 i‡(
dwStyÀ
 & 
LBS_CHECKBOX
) {

1545 
	`NŸifyP¨ít
 (
hwnd
, 
pCål
->
id
, 
LBN_CLICKCHECKMARK
);

1547 i‡(
dwStyÀ
 & 
LBS_AUTOCHECK
) {

1548 
PLISTBOXITEM
 
∂bi
;

1550 
∂bi
 = 
	`l°GëIãm
 (
pD©a
,ÖD©a->
ôemHûighãd
);

1552 
∂bi
->
dwFœgs
 & 
LBIF_CHECKMARKMASK
) {

1553 
LBIF_CHECKED
:

1554 
∂bi
->
dwFœgs
 &~
LBIF_CHECKMARKMASK
;

1557 
∂bi
->
dwFœgs
 &~
LBIF_CHECKMARKMASK
;

1558 
∂bi
->
dwFœgs
 |
LBIF_CHECKED
;

1562 
	`l°InvÆid©eIãm
 (
hwnd
, 
pD©a
,

1563 
pD©a
->
ôemHûighãd
, 
TRUE
);

1569 
ödex
 = 
	`l°FödIãm
 (
pD©a
,ÖD©a->
ôemHûighãd
 + 1, 
hód
, 
FALSE
);

1570 i‡(
ödex
 < 0) {

1571 
ödex
 = 
	`l°FödIãm
 (
pD©a
, 0, 
hód
, 
FALSE
);

1574 i‡(
ödex
 >= 0) {

1575 i‡(
pD©a
->
ôemCou¡
 - 
ödex
 >pD©a->
ôemVisibÀs
)

1576 
√wT›
 = 
ödex
;

1578 
√wT›
 = 
	`max
 (
pD©a
->
ôemCou¡
 -ÖD©a->
ôemVisibÀs
, 0);

1580 
pD©a
->
ôemT›
 = 
√wT›
;

1581 
pD©a
->
ôemHûighãd
 = 
ödex
;

1582 i‡(!(
dwStyÀ
 & 
LBS_MULTIPLESEL
))

1583 
	`l°Sñe˘Iãm
 (
dwStyÀ
, 
pD©a
, 
ödex
);

1584 
	`InvÆid©eRe˘
 (
hwnd
, 
NULL
, 
TRUE
);

1586 
	`l°SëVS¸ﬁlInfo
 (
hwnd
, 
pD©a
, 
TRUE
);

1591 
WM_VSCROLL
:

1593 
√wT›
;

1594 
s¸ﬁlHeight
 = 0;

1596 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

1597 
√wT›
 = 
pD©a
->
ôemT›
;

1598 
wP¨am
)

1600 
SB_LINEDOWN
:

1603 
	`¥ötf
("ôemVisibÀs:%d\n",
pD©a
->
ôemVisibÀs
);

1604 
	`¥ötf
("SB_LINEDOWN:(%d:%d)\n",

1605 
	`ITEM_BOTTOM
 (
pD©a
),’D©a->
ôemCou¡
 - 1 ));

1607 i‡(
	`ITEM_BOTTOM
 (
pD©a
Ë< (pD©a->
ôemCou¡
 - 1 ))

1609 
√wT›
 ++;

1610 
s¸ﬁlHeight
 = -
pD©a
->
ôemHeight
;

1614 
SB_LINEUP
:

1615 i‡(
pD©a
->
ôemT›
 > 0)

1617 
√wT›
 --;

1618 
s¸ﬁlHeight
 = 
pD©a
->
ôemHeight
;

1622 
SB_PAGEDOWN
:

1623 i‡((
pD©a
->
ôemT›
 + (pD©a->
ôemVisibÀs
 << 1)) <=

1624 
pD©a
->
ôemCou¡
)

1625 
√wT›
 +
pD©a
->
ôemVisibÀs
;

1627 
√wT›
 = 
pD©a
->
ôemCou¡
 -ÖD©a->
ôemVisibÀs
;

1629 i‡(
√wT›
 < 0)

1632 
s¸ﬁlHeight
 = -(
√wT›
 - 
pD©a
->
ôemT›
)

1633 *
pD©a
->
ôemHeight
;

1636 
SB_PAGEUP
:

1637 i‡(
pD©a
->
ôemT›
 >pD©a->
ôemVisibÀs
)

1638 
√wT›
 -
pD©a
->
ôemVisibÀs
;

1640 
√wT›
 = 0;

1642 
s¸ﬁlHeight
 = (
pD©a
->
ôemT›
 - 
√wT›
)*pD©a->
ôemHeight
;

1645 
SB_THUMBTRACK
:

1646 
√wT›
 = ()
lP¨am
;

1647 
s¸ﬁlHeight
 = (
pD©a
->
ôemT›
 - 
√wT›
)*pD©a->
ôemHeight
;

1651 i‡(
s¸ﬁlHeight
)

1653 
pD©a
->
ôemT›
 = 
√wT›
;

1655 
	`S¸ﬁlWödow
 (
hwnd
, 0, 
s¸ﬁlHeight
, 
NULL
, NULL);

1657 
	`SídMesßge
 (
hwnd
, 
WM_PAINT
, 0, 0);

1659 
	`l°SëVS¸ﬁlInfo
 (
hwnd
, 
pD©a
, 
TRUE
);

1666 
WM_HSCROLL
:

1667 
pD©a
 = (
PLISTBOXDATA
)
pCål
->
u£rd©a
;

1668 
wP¨am
)

1670 
SB_LINERIGHT
:

1673 
SB_LINELEFT
:

1676 
SB_PAGELEFT
:

1679 
SB_PAGERIGHT
:

1685  
	`DefWödowProc
 (
hwnd
, 
mesßge
, 
wP¨am
, 
lP¨am
);

1688 
	}
}

	@mwin/winlib/medit.c

50 
	~<°dio.h
>

51 
	~<°dlib.h
>

52 
	~<°rög.h
>

53 
	~<sys/time.h
>

54 
	#MWINCLUDECOLORS


	)

55 
	~"wödows.h
"

56 
	~"wötoﬁs.h
"

57 
	~"devi˚.h
"

59 #i‡
HAVE_HZK_SUPPORT
 || 
HAVE_BIG5_SUPPORT


60 
	#USE_BIG5


	)

62 
	#DEFAULT_FONT
 
DEFAULT_GUI_FONT


	)

65 
	#WIDTH_MEDIT_BORDER
 2

	)

66 
	#MARGIN_MEDIT_LEFT
 1

	)

67 
	#MARGIN_MEDIT_TOP
 1

	)

68 
	#MARGIN_MEDIT_RIGHT
 2

	)

69 
	#MARGIN_MEDIT_BOTTOM
 1

	)

71 
	#LEN_MLEDIT_BUFFER
 3000

	)

72 
	#LEN_MLEDIT_UNDOBUFFER
 1024

	)

74 
	#EST_FOCUSED
 0x00000001L

	)

75 
	#EST_MODIFY
 0x00000002L

	)

76 
	#EST_READONLY
 0x00000004L

	)

77 
	#EST_REPLACE
 0x00000008L

	)

79 
	#MEDIT_OP_NONE
 0x00

	)

80 
	#MEDIT_OP_DELETE
 0x01

	)

81 
	#MEDIT_OP_INSERT
 0x02

	)

82 
	#MEDIT_OP_REPLACE
 0x03

	)

84 
	sègLINEDATA
 {

85 
	mlöeNO
;

86 
	md©aEnd
;

87 
ègLINEDATA
 *
	m¥evious
;

88 
ègLINEDATA
 *
	m√xt
;

89 
	mbuf„r
[
LEN_MLEDIT_BUFFER
+1];

90 }
	tLINEDATA
;

91 
LINEDATA
* 
	tPLINEDATA
;

93 
	#ATTENG
 0

	)

94 
	#ATTCHL
 1

	)

95 
	#ATTCHR
 2

	)

96 
	g©å
[
LEN_MLEDIT_BUFFER
];

98 
	sègMLEDITDATA
 {

99 
	mtŸÆLí
;

101 
	medôPos
;

102 
	mˇªtPos
;

103 
	medôLöe
;

104 
	mdi•Pos
;

105 
	mSèπlöeDi•
;

106 
	mEndlöeDi•
;

107 
	mlöesDi•
;

108 
	mlöes
;

109 
	mMaxlöesDi•
;

111 
	m£lSèπPos
;

112 
	m£lSèπLöe
;

113 
	m£lEndPos
;

114 
	m£lEndLöe
;

116 
	m∑sswdCh¨
;

118 
	mÀ·M¨gö
;

119 
	mt›M¨gö
;

120 
	mrightM¨gö
;

121 
	mbŸtomM¨gö
;

123 
	mh¨dLimô
;

125 
	mœ°Op
;

126 
	mœ°Pos
;

127 
	mœ°Löe
;

128 
	maf„˘edLí
;

129 
	mundoBuf„rLí
;

130 
	mundoBuf„r
 [
LEN_MLEDIT_UNDOBUFFER
];

132 
PLINEDATA
 
	mhód
;

133 
PLINEDATA
 
	mèû
;

134 }
	tMLEDITDATA
;

135 
MLEDITDATA
* 
	tPMLEDITDATA
;

137 
BOOL
 
Regi°îMLEdôC⁄åﬁ
 ();

139 
MLEdôCålProc
 (
HWND
 
hWnd
, 
mesßge
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
);

141 
	#PIXEL_övÆid
 (-1)

	)

142 
HWND
 
sg_hC¨ëWnd
;

143 
HWND
 
roŸwp
;

145 
	$GëSysCh¨Height
 (
HWND
 
hwnd
)

147 #i‚de‡
USE_BIG5


148 
HDC
 
hdc
;

149 
xw
, 
xh
, 
xb
;

151 
hdc
 = 
	`GëDC
(
hwnd
);

152 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
DEFAULT_FONT
));

153 
	`GdSëF⁄t
(
hdc
->
f⁄t
->
pf⁄t
);

154 
	`GdGëTextSize
(
hdc
->
f⁄t
->
pf⁄t
,"X",1, &
xw
,&
xh
,&
xb
,
MWTF_ASCII
);

155 
	`Rñó£DC
(
hwnd
,
hdc
);

157  
xh
;

161 
	}
}

163 
	$GëSysCh¨Width
 (
HWND
 
hwnd
)

165 #i‚de‡
USE_BIG5


166 
HDC
 
hdc
;

167 
xw
, 
xh
, 
xb
;

169 
hdc
 = 
	`GëDC
(
hwnd
);

170 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
DEFAULT_FONT
));

171 
	`GdSëF⁄t
(
hdc
->
f⁄t
->
pf⁄t
);

172 
	`GdGëTextSize
(
hdc
->
f⁄t
->
pf⁄t
,"X",1, &
xw
,&
xh
,&
xb
,
MWTF_ASCII
);

173 
	`Rñó£DC
(
hwnd
,
hdc
);

175  
xw
;

179 
	}
}

181 
	$GëSysCCh¨Width
 (
HWND
 
hwnd
)

183  (2*
	`GëSysCh¨Width
(
hwnd
));

184 
	}
}

185 * 
	$GëWödowC≠ti⁄
 (
HWND
 
hWnd
)

187  
hWnd
->
szTôÀ
;

188 
	}
}

190 
DWORD
 
	$GëWödowAddôi⁄ÆD©a
 (
HWND
 
hWnd
)

192  
hWnd
->
u£rd©a
;

193 
	}
}

195 
DWORD
 
	$SëWödowAddôi⁄ÆD©a
 (
HWND
 
hWnd
, 
DWORD
 
√wD©a
)

197 
DWORD
 
ﬁdO√
 = 0L;

199 
ﬁdO√
 = 
hWnd
->
u£rd©a
;

200 
hWnd
->
u£rd©a
 = 
√wD©a
;

202  
ﬁdO√
;

203 
	}
}

205 
DWORD
 
	$GëWödowAddôi⁄ÆD©a2
 (
HWND
 
hWnd
)

207  
hWnd
->
u£rd©a2
;

208 
	}
}

210 
DWORD
 
	$SëWödowAddôi⁄ÆD©a2
 (
HWND
 
hWnd
, 
DWORD
 
√wD©a
)

212 
DWORD
 
ﬁdO√
 = 0L;

214 
ﬁdO√
 = 
hWnd
->
u£rd©a2
;

215 
hWnd
->
u£rd©a2
 = 
√wD©a
;

217  
ﬁdO√
;

218 
	}
}

220 
DWORD
 
	$GëWödowStyÀ
 (
HWND
 
hWnd
)

222  
hWnd
->
°yÀ
;

223 
	}
}

225 
BOOL
 
	$Ex˛udeWödowStyÀ
 (
HWND
 
hWnd
, 
DWORD
 
dwStyÀ
)

227 i‡(
hWnd
 =
roŸwp
 )

228  
FALSE
;

230 
hWnd
->
°yÀ
 &~
dwStyÀ
;

231  
TRUE
;

232 
	}
}

234 
BOOL
 
	$In˛udeWödowStyÀ
 (
HWND
 
hWnd
, 
DWORD
 
dwStyÀ
)

237 i‡(
hWnd
 =
roŸwp
 )

238  
FALSE
;

240 
hWnd
->
°yÀ
 |
dwStyÀ
;

241  
TRUE
;

242 
	}
}

244 
WINAPI
 
	$MwRegi°îMEdôC⁄åﬁ
(
HINSTANCE
 
hIn°™˚
)

246 
WNDCLASS
 
wc
;

248 
wc
.
°yÀ
 = 
CS_HREDRAW
 | 
CS_VREDRAW
 | 
CS_DBLCLKS
 | 
CS_GLOBALCLASS
;

249 
wc
.
Õ‚WndProc
 = (
WNDPROC
)
MLEdôCålProc
;

250 
wc
.
cbClsExåa
 = 0;

251 
wc
.
cbWndExåa
 = 0;

252 
wc
.
hIn°™˚
 = hInstance;

253 
wc
.
hIc⁄
 = 
NULL
;

254 
wc
.
hCurs‹
 = 0;

255 
wc
.
hbrBackground

	`GëStockObje˘
(
WHITE_BRUSH
);

256 
wc
.
ÕszMíuName
 = 
NULL
;

257 
wc
.
ÕszCœssName
= "MEDIT";

259  
	`Regi°îCœss
(&
wc
);

260 
	}
}

262 
ölöe
 
	$edtGëOutWidth
 (
HWND
 
hWnd
)

264 
PMLEDITDATA
 
pMLEdôD©a
 =(PMLEDITDATAË
	`GëWödowAddôi⁄ÆD©a2
(
hWnd
);

265 
RECT
 
rc
;

266 
	`GëClõ¡Re˘
(
hWnd
,&
rc
);

267  
rc
.
right
 -Ñc.
À·


268 - 
pMLEdôD©a
->
À·M¨gö


269 - 
pMLEdôD©a
->
rightM¨gö
;

270 
	}
}

272 
	$edtGëSèπDi•PosAtEnd
 (
HWND
 
hWnd
,

273 
PLINEDATA
 
pLöeD©a
)

275 
nOutWidth
 = 
	`edtGëOutWidth
 (
hWnd
);

276 
ídPos
 = 
pLöeD©a
->
d©aEnd
;

277 
PMLEDITDATA
 
pMLEdôD©a
 =(PMLEDITDATAË
	`GëWödowAddôi⁄ÆD©a2
(
hWnd
);

278 
√wSèπPos
 = 
pMLEdôD©a
->
di•Pos
;

279 c⁄° * 
buf„r
 = 
pLöeD©a
->buffer;

281 if(
ídPos
 < 
√wSèπPos
)

283 
TRUE
)

285 i‡((
ídPos
 - 
√wSèπPos
Ë* 
	`GëSysCh¨Width
 (
hWnd
Ë< 
nOutWidth
)

289 i‡((
BYTE
)
buf„r
 [
√wSèπPos
] > 0xA0)

291 
√wSèπPos
 ++;

292 i‡(
√wSèπPos
 < 
pLöeD©a
->
d©aEnd
)

294 #i‚de‡
USE_BIG5


295 i‡((
BYTE
)
buf„r
 [
√wSèπPos
] > 0xA0)

297 i‡–((
BYTE
)
buf„r
 [
√wSèπPos
] >= 0x40 && (BYTE)buffer[newStartPos] <= 0x7e) ||

298 ((
BYTE
)
buf„r
 [
√wSèπPos
] >= 0xa1 && (BYTE)buffer[newStartPos] <= 0xfe))

300 
√wSèπPos
 ++;

304 
√wSèπPos
 ++;

306  
√wSèπPos
;

307 
	}
}

309 
	$edtGëDi•Lí
 (
HWND
 
hWnd
,
PLINEDATA
 
pLöeD©a
)

311 
i
, 
n
 = 0;

312 
nOutWidth
 = 
	`edtGëOutWidth
 (
hWnd
);

313 
nTextWidth
 = 0;

314 
PMLEDITDATA
 
pMLEdôD©a
 =(PMLEDITDATAË
	`GëWödowAddôi⁄ÆD©a2
(
hWnd
);

315 c⁄° * 
buf„r
 = 
pLöeD©a
->buffer;

317 if(
buf„r
[0]==0||
pLöeD©a
->
d©aEnd
<
pMLEdôD©a
->
di•Pos
)

320 
i
 = 
pMLEdôD©a
->
di•Pos
; i < 
pLöeD©a
->
d©aEnd
; i++)

323 i‡((
BYTE
)
buf„r
 [
i
] > 0xA0)

325 
i
++;

326 i‡(
i
 < 
pLöeD©a
->
d©aEnd
)

328 #i‚de‡
USE_BIG5


329 i‡((
BYTE
)
buf„r
 [
i
] > 0xA0)

331 i‡–((
BYTE
)
buf„r
 [
i
] >= 0x40 && (BYTE)buffer[i] <= 0x7e) ||

332 ((
BYTE
)
buf„r
 [
i
] >= 0xa1 && (BYTE)buffer[i] <= 0xfe))

335 
nTextWidth
 +
	`GëSysCCh¨Width
 (
hWnd
);

336 
n
 += 2;

339 
i
--;

343 
nTextWidth
 +
	`GëSysCh¨Width
 (
hWnd
);

344 
n
++;

349 
nTextWidth
 +
	`GëSysCh¨Width
 (
hWnd
);

350 
n
++;

353 i‡(
nTextWidth
 > 
nOutWidth
)

357  
n
;

358 
	}
}

360 
	$edtGëOff£t
 (
HWND
 
hwnd
,c⁄° 
MLEDITDATA
* 
pMLEdôD©a
, 
PLINEDATA
 
pLöeD©a
, 
x
)

362 
i
;

363 
√wOff
 = 0;

364 
nTextWidth
 = 0;

365 c⁄° * 
buf„r
 = 
pLöeD©a
->buffer;

367 if(
pLöeD©a
->
d©aEnd
<
pMLEdôD©a
->
di•Pos
)

368  
pLöeD©a
->
d©aEnd
;

370 
x
 -
pMLEdôD©a
->
À·M¨gö
;

371 
i
 = 
pMLEdôD©a
->
di•Pos
; i < 
pLöeD©a
->
d©aEnd
; i++) {

372 i‡((
nTextWidth
 + (
	`GëSysCh¨Width
(
hwnd
Ë>> 1)Ë>
x
)

376 i‡((
BYTE
)
buf„r
 [
i
] > 0xA0)

378 
i
++;

380 i‡(
nTextWidth
 + 
	`GëSysCCh¨Width
(
hwnd
)/2 >
x
)

383 i‡(
i
 < 
pLöeD©a
->
d©aEnd
)

385 #i‚de‡
USE_BIG5


386 i‡((
BYTE
)
buf„r
 [
i
] > 0xA0)

388 i‡–((
BYTE
)
buf„r
 [
i
] >= 0x40 && (BYTE)buffer[i] <= 0x7e) ||

389 ((
BYTE
)
buf„r
 [
i
] >= 0xa1 && (BYTE)buffer[i] <= 0xfe))

392 
nTextWidth
 +
	`GëSysCCh¨Width
 (
hwnd
);

393 
√wOff
 += 2;

396 
i
 --;

400 
nTextWidth
 +
	`GëSysCh¨Width
 (
hwnd
);

401 
√wOff
 ++;

406 
nTextWidth
 +
	`GëSysCh¨Width
 (
hwnd
);

407 
√wOff
 ++;

410  
√wOff
;

411 
	}
}

413 
	$edtGëLöeNO
 (
HWND
 
hwnd
,c⁄° 
MLEDITDATA
* 
pMLEdôD©a
, 
x
)

415 
∆öe
 = 0;

416 if(
x
>=0)

418 
∆öe
 = 
x
 / 
	`GëSysCh¨Height
(
hwnd
);

419 i‡(
∆öe
 <
pMLEdôD©a
->
löesDi•
)

420  
∆öe
;

423 
	}
}

425 
BOOL
 
	$edtIsACCh¨AtPosôi⁄
 (c⁄° * 
°rög
, 
Àn
, 
pos
)

427 i‡(
pos
 > (
Àn
 - 2))

428  
FALSE
;

431 #i‚de‡
USE_BIG5


432 i‡((
BYTE
)
°rög
 [
pos
] > 0xA0 && (BYTE)string [pos + 1] > 0xA0)

433  
TRUE
;

435 i‡((
BYTE
)
°rög
 [
pos
] > 0xA0)

437 i‡–((
BYTE
)
°rög
 [
pos
 + 1] >= 0x40 && (BYTE)string [pos + 1] <= 0x7e) ||

438 ((
BYTE
)
°rög
 [
pos
 + 1] >= 0xa1 && (BYTE)string [pos + 1] <= 0xfe)) {

441  
TRUE
;

446  
FALSE
;

447 
	}
}

449 
	$°r2©å
(c⁄° * 
°r
,
Àn
)

451 
i
=0;

454 i‡(
	`edtIsACCh¨AtPosôi⁄
(
°r
,
Àn
,
i
))

456 
©å
[
i
]=
ATTCHL
;

457 
©å
[
i
+1]=
ATTCHR
;

458 
i
+=2;

462 
©å
[
i
]=
ATTENG
;

463 
i
++;

465 }
i
<
Àn
);

466 
	}
}

468 
BOOL
 
	$edtIsACCh¨Bef‹ePosôi⁄
 (c⁄° * 
°rög
,
Àn
, 
pos
)

470 i‡(
pos
 < 2)

471  
FALSE
;

474 #i‚de‡
USE_BIG5


476 i‡((
BYTE
)
°rög
 [
pos
 - 2] > 0xA0 && (BYTE)string [pos - 1] > 0xA0)

477  
TRUE
;

480 i‡((
BYTE
)
°rög
 [
pos
 - 2] > 0xA0)

482 i‡–((
BYTE
)
°rög
 [
pos
 - 1] >= 0x40 && (BYTE)string[pos - 1] <= 0x7e) ||

483 ((
BYTE
)
°rög
 [
pos
 - 1] >= 0xa1 && (BYTE)string[pos - 1] <= 0xfe))

484  
TRUE
;

487 
	`°r2©å
(
°rög
,
Àn
);

488 i‡(
©å
[
pos
-1]==
ATTENG
Ë 
FALSE
;

489  
TRUE
;

493  
FALSE
;

494 
	}
}

497 
BOOL
 
	$edtIsACCh¨FromBegö
(c⁄° * 
°rög
,
Àn
,
pos
)

499 
i
;

500 if(
pos
 == 0)

501  
TRUE
;

502 if(
Àn
 == 0)

503  
FALSE
;

504 
i
=0;i<
Àn
;)

506 if–
	`edtIsACCh¨AtPosôi⁄
(
°rög
,
Àn
,
i
) )

507 
i
 += 2;

509 
i
++;

510 if(
i
==
pos
)

511  
TRUE
;

513  
FALSE
;

514 
	}
}

516 
	$GëRETURNPos
(*
°r
)

518 
i
;

519 
i
=0;i<
	`°æí
(
°r
);i++)

521 if(
°r
[
i
]==10)

522  
i
;

525 
	}
}

527 
	$MLEdôInôBuf„r
 (
PMLEDITDATA
 
pMLEdôD©a
,*
•ˇ±i⁄
)

529 *
ˇ±i⁄
=
•ˇ±i⁄
;

530 
off1
;

531 
löeNO
=0;

532 
PLINEDATA
 
pLöeD©a
;

533 i‡(!(
pMLEdôD©a
->
hód
 = 
	`mÆloc
 ( (
LINEDATA
)))) {

534 
	`Ârötf
 (
°dîr
, "EDITLINE: mallocÉrror!\n");

537 
pMLEdôD©a
->
hód
->
¥evious
 = 
NULL
;

538 
pLöeD©a
=
pMLEdôD©a
->
hód
;

539  (
off1
 = 
	`GëRETURNPos
(
ˇ±i⁄
)) != -1)

541 
off1
 = 
	`mö
(off1, 
LEN_MLEDIT_BUFFER
);

542 
	`mem˝y
(
pLöeD©a
->
buf„r
,
ˇ±i⁄
,
off1
);

543 
pLöeD©a
->
buf„r
[
off1
] = '\0';

544 
ˇ±i⁄
+=
	`mö
(
off1
,
LEN_MLEDIT_BUFFER
)+1;

545 
pLöeD©a
->
löeNO
 =ÜineNO;

546 
pMLEdôD©a
->
di•Pos
 = 0;

547 
pLöeD©a
->
d©aEnd
 = 
	`°æí
’LöeD©a->
buf„r
);

548 
pLöeD©a
->
√xt
 = 
	`mÆloc
 ( (
LINEDATA
));

549 
pLöeD©a
->
√xt
->
¥evious
 =ÖLineData;

550 
pLöeD©a
 =ÖLöeD©a->
√xt
;

551 
löeNO
++;

553 
off1
 = 
	`mö
(
	`°æí
(
ˇ±i⁄
),
LEN_MLEDIT_BUFFER
);

554 
	`mem˝y
(
pLöeD©a
->
buf„r
,
ˇ±i⁄
,
off1
);

555 
pLöeD©a
->
buf„r
[
off1
] = '\0';

556 
pLöeD©a
->
löeNO
 =ÜineNO++;

557 
pMLEdôD©a
->
di•Pos
 = 0;

558 
pLöeD©a
->
d©aEnd
 = 
	`°æí
’LöeD©a->
buf„r
);

559 
pLöeD©a
->
√xt
 = 
NULL
;

560 
pMLEdôD©a
->
löes
 = 
löeNO
 ;

561 
	}
}

563 
PLINEDATA
 
	$GëLöeD©a
(
PMLEDITDATA
 
pMLEdôD©a
,
löeNO
)

565 
PLINEDATA
 
pLöeD©a
=
pMLEdôD©a
->
hód
;

566 
pLöeD©a
)

568 if(
pLöeD©a
->
löeNO
==lineNO)

569  
pLöeD©a
;

570 
pLöeD©a
 =ÖLöeD©a->
√xt
;

572  
NULL
;

573 
	}
}

575 
	$MLEdôCålProc
 (
HWND
 
hWnd
, 
mesßge
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
)

577 
DWORD
 
dwStyÀ
;

578 
DWORD
 
dw
;

579 
HDC
 
hdc
;

580 
PLINEDATA
 
pLöeD©a
;

581 
RECT
 
˛õ¡Re˘
;

582 
PMLEDITDATA
 
pMLEdôD©a
;

583 
dwStyÀ
 = 
	`GëWödowStyÀ
(
hWnd
);

585 
mesßge
)

587 
WM_CREATE
:

589 i‡(!(
pMLEdôD©a
 = 
	`mÆloc
 ( (
MLEDITDATA
)))) {

590 
	`Ârötf
 (
°dîr
, "EDIT: mallocÉrror!\n");

594 
pMLEdôD©a
->
tŸÆLí
 = 
LEN_MLEDIT_BUFFER
;

595 
pMLEdôD©a
->
edôPos
 = 0;

596 
pMLEdôD©a
->
edôLöe
 = 0;

597 
pMLEdôD©a
->
ˇªtPos
 = 0;

599 
	`MLEdôInôBuf„r
(
pMLEdôD©a
,
	`GëWödowC≠ti⁄
(
hWnd
));

601 
	`GëClõ¡Re˘
(
hWnd
,&
˛õ¡Re˘
);

602 
pMLEdôD©a
->
MaxlöesDi•
 = (
˛õ¡Re˘
.
bŸtom
-˛õ¡Re˘.
t›
)/
	`GëSysCh¨Height
(
hWnd
);

603 
pMLEdôD©a
->
löesDi•
 = 
	`mö
’MLEdôD©a->
MaxlöesDi•
,pMLEdôD©a->
löes
);

604 
pMLEdôD©a
->
SèπlöeDi•
 = 0;

605 
pMLEdôD©a
->
EndlöeDi•
 =ÖMLEdôD©a->
SèπlöeDi•
 +ÖMLEdôD©a->
löesDi•
 - 1;

607 
pMLEdôD©a
->
£lSèπPos
 = 0;

608 
pMLEdôD©a
->
£lEndPos
 = 0;

609 
pMLEdôD©a
->
∑sswdCh¨
 = '*';

610 
pMLEdôD©a
->
À·M¨gö
 = 
MARGIN_MEDIT_LEFT
;

611 
pMLEdôD©a
->
t›M¨gö
 = 
MARGIN_MEDIT_TOP
;

612 
pMLEdôD©a
->
rightM¨gö
 = 
MARGIN_MEDIT_RIGHT
;

613 
pMLEdôD©a
->
bŸtomM¨gö
 = 
MARGIN_MEDIT_BOTTOM
;

615 
pMLEdôD©a
->
h¨dLimô
 = -1;

618 
pMLEdôD©a
->
œ°Op
 = 
MEDIT_OP_NONE
;

619 
pMLEdôD©a
->
œ°Pos
 = 0;

620 
pMLEdôD©a
->
af„˘edLí
 = 0;

621 
pMLEdôD©a
->
undoBuf„rLí
 = 
LEN_MLEDIT_UNDOBUFFER
;

622 
pMLEdôD©a
->
undoBuf„r
 [0] = '\0';

623 
	`SëWödowAddôi⁄ÆD©a2
(
hWnd
,(
DWORD
)
pMLEdôD©a
);

624 
	`SëWödowAddôi⁄ÆD©a
(
hWnd
,(
DWORD
)0);

627 
WM_DESTROY
:

629 
PLINEDATA
 
ãmp
;

630 
pMLEdôD©a
 =(
PMLEDITDATA
Ë
	`GëWödowAddôi⁄ÆD©a2
(
hWnd
);

631 
	`De°royC¨ë
 ();

632 
pLöeD©a
 = 
pMLEdôD©a
->
hód
;

633 
pLöeD©a
)

636 
ãmp
 = 
pLöeD©a
->
√xt
;

637 
	`‰ì
(
pLöeD©a
);

638 
pLöeD©a
 = 
ãmp
;

640 
	`‰ì
(
pMLEdôD©a
);

644 
WM_SETFONT
:

647 
WM_GETFONT
:

651 
WM_SETCURSOR
:

652 i‡(
dwStyÀ
 & 
WS_DISABLED
) {

653 
	`SëCurs‹
 (
	`GëSy°emCurs‹
 (
IDC_ARROW
));

658 
WM_SIZECHANGED
:

663 
WM_KILLFOCUS
:

665 
dw

	`GëWödowAddôi⁄ÆD©a
(
hWnd
);

666 
dw
&~
EST_FOCUSED
;

667 
	`SëWödowAddôi⁄ÆD©a
(
hWnd
,
dw
);

669 
	`HideC¨ë
 (
hWnd
);

670 
	`De°royC¨ë
 ();

672 
	`SídMesßge
 (
	`GëP¨ít
 (
hWnd
),

673 
WM_COMMAND
,

674 (
WPARAM
Ë
	`MAKELONG
 (
	`GëDlgCålID
(
hWnd
), 
EN_KILLFOCUS
),

675 (
LPARAM
)
hWnd
);

679 
WM_SETFOCUS
:

681 
dw

	`GëWödowAddôi⁄ÆD©a
(
hWnd
);

682 i‡(
dw
 & 
EST_FOCUSED
)

685 
dw
 |
EST_FOCUSED
;

686 
	`SëWödowAddôi⁄ÆD©a
(
hWnd
,
dw
);

688 
pMLEdôD©a
 =(
PMLEDITDATA
Ë
	`GëWödowAddôi⁄ÆD©a2
(
hWnd
);

692 
	`Cª©eC¨ë
 (
hWnd
, 
NULL
, 1,

693 
hWnd
->
˛úe˘
.
bŸtom
-hWnd->˛úe˘.
t›
-2);

694 
	`SëC¨ëPos
 (
pMLEdôD©a
->
ˇªtPos
 * 
	`GëSysCh¨Width
 (
hWnd
)

695 + 
pMLEdôD©a
->
À·M¨gö
,ÖMLEdôD©a->
t›M¨gö
);

696 
	`ShowC¨ë
(
hWnd
);

698 
	`SídMesßge
 (
	`GëP¨ít
 (
hWnd
),

699 
WM_COMMAND
,

700 (
WPARAM
Ë
	`MAKELONG
 (
	`GëDlgCålID
(
hWnd
), 
EN_SETFOCUS
),

701 (
LPARAM
Ë
hWnd
);

705 
WM_ENABLE
:

706 i‡–(!(
dwStyÀ
 & 
WS_DISABLED
Ë&& !
wP¨am
)

707 || ((
dwStyÀ
 & 
WS_DISABLED
Ë&& 
wP¨am
) ) {

708 i‡(
wP¨am
)

709 
	`Ex˛udeWödowStyÀ
(
hWnd
,
WS_DISABLED
);

711 
	`In˛udeWödowStyÀ
(
hWnd
,
WS_DISABLED
);

713 
	`InvÆid©eRe˘
 (
hWnd
, 
NULL
, 
FALSE
);

717 
WM_NCPAINT
:

719 
RECT
 
rc
;

721 i‡(
wP¨am
)

722 
hdc
 = (
HDC
)
wP¨am
;

724 
hdc
 = 
	`GëDC
 (
hWnd
);

726 i‡(
lP¨am
)

727 
	`ClùRe˘I¡î£˘
 (
hdc
, (
RECT
*)
lP¨am
);

730 
hdc
 = 
wP¨am
? (
HDC
)wP¨am: 
	`GëWödowDC
 (
hWnd
);

731 
	`GëWödowRe˘
(
hWnd
, &
rc
);

733 i‡(
dwStyÀ
 & 
WS_BORDER
)

736 
RECT
 
rc
;

737 
	`GëWödowRe˘
(
hWnd
,&
rc
);

738 
	`Døw3DDownFøme
 (
hdc
, 0, 0,

739 
rc
.
right
 -Ñc.
À·
 - 1,

740 
rc
.
bŸtom
 -Ñc.
t›
 - 1,

741 
PIXEL_övÆid
);

743 
	`Døw3dIn£t
(
hdc
, 
rc
.
À·
,Ñc.
t›
,

744 
rc
.
right
-rc.
À·
,Ñc.
bŸtom
-rc.
t›
);

747 i‡(!
wP¨am
) {

748 
	`Rñó£DC
(
hWnd
,
hdc
);

753 
WM_PAINT
:

755 
di•Lí
,
i
;

756 * 
di•Buf„r
;

757 
RECT
 
ª˘
,
rc
;

758 
PAINTSTRUCT
 
ps
;

759 #ifde‡
USE_BIG5


760 
HGDIOBJ
 
ﬁdf⁄t
=
NULL
;

763 
hdc
 = 
	`BegöPaöt
 (
hWnd
,&
ps
);

764 
	`GëClõ¡Re˘
 (
hWnd
, &
ª˘
);

766 i‡(
dwStyÀ
 & 
WS_DISABLED
)

768 
rc
.
À·
=0;Ñc.
t›
=0;Ñc.
bŸtom
=
ª˘
.bŸtom;Ñc.
right
=rect.right;

769 
	`FûlRe˘
(
hdc
,&
rc
,
	`GëStockObje˘
(
LTGRAY_BRUSH
));

770 
	`SëBkCﬁ‹
 (
hdc
, 
LTGRAY
 );

773 
rc
.
À·
=0;Ñc.
t›
=0;Ñc.
bŸtom
=
ª˘
.bŸtom;Ñc.
right
=rect.right;

774 
	`FûlRe˘
(
hdc
,&
rc
,
	`GëStockObje˘
(
WHITE_BRUSH
));

775 
	`SëBkCﬁ‹
 (
hdc
, 
WHITE
 );

778 
	`SëTextCﬁ‹
 (
hdc
, 
BLACK
 );

780 
pMLEdôD©a
 =(
PMLEDITDATA
Ë
	`GëWödowAddôi⁄ÆD©a2
(
hWnd
);

781 
i
 = 
pMLEdôD©a
->
SèπlöeDi•
; i <pMLEdôD©a->
EndlöeDi•
; i++)

783 
pLöeD©a

	`GëLöeD©a
(
pMLEdôD©a
,
i
);

784 
di•Lí
 = 
	`edtGëDi•Lí
 (
hWnd
,
pLöeD©a
);

785 i‡(
di•Lí
 =0 && 
pMLEdôD©a
->
EndlöeDi•
 >pMLEdôD©a->
löes
) {

789 #ifde‡
_DEBUG


790 i‡(
pMLEdôD©a
->
di•Pos
 > 
pLöeD©a
->
d©aEnd
)

791 
	`Ârötf
 (
°dîr
, "ASSERT failure: %s.\n", "Edit Paint");

794 
di•Buf„r
 = 
	`Æloˇ
 (
LEN_MLEDIT_BUFFER
+1);

796 i‡(
dwStyÀ
 & 
ES_PASSWORD
)

797 
	`mem£t
 (
di•Buf„r
, '*', 
pLöeD©a
->
d©aEnd
);

798 
	`mem˝y
 (
di•Buf„r
,

799 
pLöeD©a
->
buf„r
,

800 
pLöeD©a
->
d©aEnd
);

801 
di•Buf„r
[
pLöeD©a
->
d©aEnd
] = '\0';

804 
ª˘
.
À·
 = 
pMLEdôD©a
->
À·M¨gö
;

805 
ª˘
.
t›
 = 
pMLEdôD©a
->
t›M¨gö
 ;

806 
ª˘
.
right
 = 
pMLEdôD©a
->
rightM¨gö
;

807 
ª˘
.
bŸtom
 = 
pMLEdôD©a
->
bŸtomM¨gö
;

809 
	`¥ötf
("löeNO=%d,löes=%d,edôLöe=%d\n",
pLöeD©a
->
löeNO
,
pMLEdôD©a
->
löes
,

810 
pMLEdôD©a
->
edôLöe
);

811 
	`¥ötf
("--di•Buf„r=%s--\n",
di•Buf„r
);

812 
	`ClùRe˘I¡î£˘
 (
hdc
, &
ª˘
);

815 #ifde‡
USE_BIG5


816 
ﬁdf⁄t
=
	`Sñe˘Obje˘
(
hdc
,
	`Cª©eF⁄t
(12,

818 
FF_DONTCARE
|
DEFAULT_PITCH
,

821 
	`TextOut
 (
hdc
,

822 
pMLEdôD©a
->
À·M¨gö
 -ÖMLEdôD©a->
di•Pos
 * 
	`GëSysCh¨Width
(
hWnd
) ,

823 
	`GëSysCh¨Height
(
hWnd
)*(
pLöeD©a
->
löeNO
 - 
pMLEdôD©a
->
SèπlöeDi•
)

824 + 
pMLEdôD©a
->
t›M¨gö
,

825 
di•Buf„r
,-1);

827 #ifde‡
USE_BIG5


828 
	`DñëeObje˘
(
	`Sñe˘Obje˘
(
hdc
,
ﬁdf⁄t
));

830 
	`EndPaöt
 (
hWnd
, &
ps
);

834 
WM_KEYDOWN
:

836 
BOOL
 
bCh™ge
 = 
FALSE
;

837 
i
;

838 
dñëed
;

839 
PLINEDATA
 
ãmp
 = 
NULL
;

840 * 
ãmpP
 = 
NULL
;

842 
pMLEdôD©a
 =(
PMLEDITDATA
Ë
	`GëWödowAddôi⁄ÆD©a2
(
hWnd
);

844 
	`LOWORD
 (
wP¨am
))

847 
VK_RETURN
:

849 
pLöeD©a
 = 
	`GëLöeD©a
(
pMLEdôD©a
,pMLEdôD©a->
edôLöe
);

850 i‡(
pMLEdôD©a
->
edôPos
 < 
pLöeD©a
->
d©aEnd
)

851 
ãmpP
 = 
pLöeD©a
->
buf„r
 + 
pMLEdôD©a
->
edôPos
;

852 
ãmp
 = 
pLöeD©a
->
√xt
;

853 
pLöeD©a
->
√xt
 = 
	`mÆloc
–(
LINEDATA
) );

854 
pLöeD©a
->
√xt
->
¥evious
 =ÖLineData;

855 
pLöeD©a
->
√xt
->√xà
ãmp
;

856 if(
ãmp
)

858 
ãmp
->
¥evious
 = 
pLöeD©a
->
√xt
;

860 
ãmp
 = 
pLöeD©a
->
√xt
;

861 
ãmp
->
löeNO
 = 
pMLEdôD©a
->
edôLöe
 + 1;

862 if(
ãmpP
)

864 
	`mem˝y
(
ãmp
->
buf„r
,
ãmpP
,
	`°æí
(tempP));

865 
ãmp
->
d©aEnd
 = 
	`°æí
(
ãmpP
);

868 
ãmp
->
d©aEnd
 = 0;

869 
ãmp
->
buf„r
[ãmp->
d©aEnd
] = '\0';

870 
pLöeD©a
->
d©aEnd
 = 
pMLEdôD©a
->
edôPos
;

871 
pLöeD©a
->
buf„r
[pLöeD©a->
d©aEnd
]='\0';

872 
ãmp
 =Åemp->
√xt
;

873 
ãmp
)

875 
ãmp
->
löeNO
++;

876 
ãmp
 =Åemp->
√xt
;

878 
pMLEdôD©a
->
edôPos
 = 0;

879 
pMLEdôD©a
->
ˇªtPos
= 0;

880 
pMLEdôD©a
->
di•Pos
 = 0;

881 if(
pMLEdôD©a
->
löesDi•
 <ÖMLEdôD©a->
MaxlöesDi•
)

883 
pMLEdôD©a
->
EndlöeDi•
++;

884 
pMLEdôD©a
->
löesDi•
++;

886 if(
pMLEdôD©a
->
edôLöe
 =pMLEdôD©a->
EndlöeDi•
)

888 
pMLEdôD©a
->
SèπlöeDi•
++;

889 
pMLEdôD©a
->
EndlöeDi•
++;

891 
pMLEdôD©a
->
edôLöe
++;

892 
pMLEdôD©a
->
löes
++;

893 
	`SëC¨ëPos
 (
pMLEdôD©a
->
ˇªtPos
 * 
	`GëSysCh¨Width
 (
hWnd
)

894 + 
pMLEdôD©a
->
À·M¨gö
,

895 (
pMLEdôD©a
->
edôLöe
 -ÖMLEdôD©a->
SèπlöeDi•
Ë* 
	`GëSysCh¨Height
(
hWnd
)

896 +
pMLEdôD©a
->
t›M¨gö
);

897 
	`InvÆid©eRe˘
 (
hWnd
, 
NULL
, 
FALSE
);

900 
VK_HOME
:

902 
PLINEDATA
 
ãmp
;

903 i‡(
pMLEdôD©a
->
edôPos
 == 0)

906 
pMLEdôD©a
->
edôPos
 = 0;

907 
pMLEdôD©a
->
ˇªtPos
 = 0;

909 
	`SëC¨ëPos
 (
pMLEdôD©a
->
À·M¨gö
,

910 (
pMLEdôD©a
->
edôLöe
-pMLEdôD©a->
SèπlöeDi•
Ë* 
	`GëSysCh¨Height
(
hWnd
)

911 +
pMLEdôD©a
->
t›M¨gö
);

912 
ãmp
 = 
	`GëLöeD©a
(
pMLEdôD©a
,pMLEdôD©a->
edôLöe
);

913 i‡(
pMLEdôD©a
->
di•Pos
 != 0)

915 
pMLEdôD©a
->
di•Pos
 = 0;

916 
	`InvÆid©eRe˘
 (
hWnd
, 
NULL
, 
FALSE
);

920 
VK_END
:

922 
√wSèπPos
;

923 
pLöeD©a
 = 
	`GëLöeD©a
(
pMLEdôD©a
,pMLEdôD©a->
edôLöe
);

924 i‡(
pMLEdôD©a
->
edôPos
 =
pLöeD©a
->
d©aEnd
)

926 
√wSèπPos
 = 
	`edtGëSèπDi•PosAtEnd
 (
hWnd
, 
pLöeD©a
);

928 
pMLEdôD©a
->
edôPos
 = 
pLöeD©a
->
d©aEnd
;

929 
pMLEdôD©a
->
ˇªtPos
 =ÖMLEdôD©a->
edôPos
 - 
√wSèπPos
;

931 
	`SëC¨ëPos
 (
pMLEdôD©a
->
ˇªtPos
 * 
	`GëSysCh¨Width
 (
hWnd
)

932 + 
pMLEdôD©a
->
À·M¨gö
,

933 (
pMLEdôD©a
->
edôLöe
-pMLEdôD©a->
SèπlöeDi•
Ë* 
	`GëSysCh¨Height
(
hWnd
)

934 + 
pMLEdôD©a
->
t›M¨gö
);

936 i‡(
pMLEdôD©a
->
di•Pos
 !
√wSèπPos
)

937 
	`InvÆid©eRe˘
 (
hWnd
, 
NULL
, 
FALSE
);

938 
pMLEdôD©a
->
di•Pos
 = 
√wSèπPos
;

942 
VK_LEFT
:

944 
BOOL
 
bS¸ﬁl
 = 
FALSE
;

945 
s¸ﬁlSãp
,
√wSèπPos
;

946 
PLINEDATA
 
ãmp
;

947 
pLöeD©a
 = 
	`GëLöeD©a
(
pMLEdôD©a
,pMLEdôD©a->
edôLöe
);

948 i‡(
pMLEdôD©a
->
edôPos
 == 0 )

950 
ãmp
 = 
pLöeD©a
->
¥evious
;

951 if(
ãmp
 && 
pMLEdôD©a
->
edôLöe
 >ÖMLEdôD©a->
SèπlöeDi•
)

953 
pMLEdôD©a
->
edôLöe
 --;

954 
pMLEdôD©a
->
edôPos
 = 
ãmp
->
d©aEnd
;

955 
√wSèπPos
 = 
	`edtGëSèπDi•PosAtEnd
 (
hWnd
, 
ãmp
);

956 
pMLEdôD©a
->
ˇªtPos
 =ÖMLEdôD©a->
edôPos
 - 
√wSèπPos
;

957 i‡(
pMLEdôD©a
->
di•Pos
 !
√wSèπPos
)

959 
pMLEdôD©a
->
di•Pos
 = 
√wSèπPos
;

960 
bS¸ﬁl
 = 
TRUE
;

967 { i‡(
	`edtIsACCh¨Bef‹ePosôi⁄
 (
pLöeD©a
->
buf„r
,

968 
pLöeD©a
->
d©aEnd
,

969 
pMLEdôD©a
->
edôPos
)) {

970 
s¸ﬁlSãp
 = 2;

971 
pMLEdôD©a
->
edôPos
 -= 2;

974 
s¸ﬁlSãp
 = 1;

975 
pMLEdôD©a
->
edôPos
 --;

978 
pMLEdôD©a
->
ˇªtPos
 -
s¸ﬁlSãp
;

979 i‡(
pMLEdôD©a
->
ˇªtPos
 == 0

980 && 
pMLEdôD©a
->
edôPos
 != 0) {

982 
bS¸ﬁl
 = 
TRUE
;

984 i‡(
	`edtIsACCh¨Bef‹ePosôi⁄
 (
pLöeD©a
->
buf„r
,

985 
pLöeD©a
->
d©aEnd
,

986 
pMLEdôD©a
->
edôPos
)) {

987 
pMLEdôD©a
->
di•Pos
 -= 2;

988 
pMLEdôD©a
->
ˇªtPos
 = 2;

991 
pMLEdôD©a
->
di•Pos
--;

992 
pMLEdôD©a
->
ˇªtPos
 = 1;

995 i‡(
pMLEdôD©a
->
ˇªtPos
 < 0) {

996 
pMLEdôD©a
->
di•Pos
 = 0;

997 
pMLEdôD©a
->
ˇªtPos
 = 0;

1000 
	`SëC¨ëPos
 (
pMLEdôD©a
->
ˇªtPos
 * 
	`GëSysCh¨Width
 (
hWnd
)

1001 + 
pMLEdôD©a
->
À·M¨gö
,

1002 (
pMLEdôD©a
->
edôLöe
 -ÖMLEdôD©a->
SèπlöeDi•
Ë* 
	`GëSysCh¨Height
(
hWnd
)

1003 + 
pMLEdôD©a
->
t›M¨gö
);

1005 i‡(
bS¸ﬁl
)

1006 
	`InvÆid©eRe˘
 (
hWnd
, 
NULL
, 
FALSE
);

1010 
VK_RIGHT
:

1012 
BOOL
 
bS¸ﬁl
 = 
FALSE
;

1013 
s¸ﬁlSãp
, 
moveSãp
;

1014 
PLINEDATA
 
ãmp
;

1016 
pLöeD©a
 = 
	`GëLöeD©a
(
pMLEdôD©a
,pMLEdôD©a->
edôLöe
);

1017 i‡(
pMLEdôD©a
->
edôPos
 =
pLöeD©a
->
d©aEnd
)

1019 
ãmp
 = 
pLöeD©a
->
√xt
;

1020 if(
ãmp
)

1022 
pMLEdôD©a
->
edôLöe
++;

1023 
pMLEdôD©a
->
edôPos
 = 0;

1024 
pMLEdôD©a
->
ˇªtPos
 = 0;

1025 if(
pMLEdôD©a
->
di•Pos
 !=0)

1027 
pMLEdôD©a
->
di•Pos
 = 0;

1028 
bS¸ﬁl
 = 
TRUE
;

1036 i‡(
	`edtIsACCh¨AtPosôi⁄
 (
pLöeD©a
->
buf„r
,

1037 
pLöeD©a
->
d©aEnd
,

1038 
pMLEdôD©a
->
di•Pos
)) {

1039 i‡(
	`edtIsACCh¨AtPosôi⁄
 (
pLöeD©a
->
buf„r
,

1040 
pLöeD©a
->
d©aEnd
,

1041 
pMLEdôD©a
->
edôPos
)) {

1042 
s¸ﬁlSãp
 = 2;

1043 
moveSãp
 = 2;

1044 
pMLEdôD©a
->
edôPos
 += 2;

1047 
s¸ﬁlSãp
 = 2;

1048 
moveSãp
 = 1;

1049 
pMLEdôD©a
->
edôPos
 ++;

1053 i‡(
	`edtIsACCh¨AtPosôi⁄
 (
pLöeD©a
->
buf„r
,

1054 
pLöeD©a
->
d©aEnd
,

1055 
pMLEdôD©a
->
edôPos
)) {

1057 i‡(
	`edtIsACCh¨AtPosôi⁄
 (
pLöeD©a
->
buf„r
,

1058 
pLöeD©a
->
d©aEnd
,

1059 
pMLEdôD©a
->
di•Pos
 + 1))

1060 
s¸ﬁlSãp
 = 3;

1062 
s¸ﬁlSãp
 = 2;

1064 
moveSãp
 = 2;

1065 
pMLEdôD©a
->
edôPos
 += 2;

1068 
s¸ﬁlSãp
 = 1;

1069 
moveSãp
 = 1;

1070 
pMLEdôD©a
->
edôPos
 ++;

1074 
pMLEdôD©a
->
ˇªtPos
 +
moveSãp
;

1075 i‡(
pMLEdôD©a
->
ˇªtPos
 * 
	`GëSysCh¨Width
 (
hWnd
)

1076 > 
	`edtGëOutWidth
 (
hWnd
)) {

1077 
bS¸ﬁl
 = 
TRUE
;

1078 
pMLEdôD©a
->
di•Pos
 +
s¸ﬁlSãp
;

1079 
pMLEdôD©a
->
ˇªtPos
 =

1080 
pMLEdôD©a
->
edôPos
 -ÖMLEdôD©a->
di•Pos
;

1083 
	`SëC¨ëPos
 (
pMLEdôD©a
->
ˇªtPos
 * 
	`GëSysCh¨Width
 (
hWnd
)

1084 + 
pMLEdôD©a
->
À·M¨gö
,

1085 (
pMLEdôD©a
->
edôLöe
 -ÖMLEdôD©a->
SèπlöeDi•
Ë* 
	`GëSysCh¨Height
 (
hWnd
)

1086 + 
pMLEdôD©a
->
t›M¨gö
);

1088 i‡(
bS¸ﬁl
)

1089 
	`InvÆid©eRe˘
 (
hWnd
, 
NULL
, 
FALSE
);

1093 
VK_UP
:

1095 
BOOL
 
bS¸ﬁl
 = 
FALSE
;

1096 
√wSèπPos
;

1097 
PLINEDATA
 
ãmp
;

1098 
pLöeD©a
 = 
	`GëLöeD©a
(
pMLEdôD©a
,pMLEdôD©a->
edôLöe
);

1099 
ãmp
 = 
pLöeD©a
->
¥evious
;

1100 if(
pMLEdôD©a
->
edôLöe
 == 0)

1102 i‡(
pMLEdôD©a
->
edôLöe
 =pMLEdôD©a->
SèπlöeDi•
)

1104 
bS¸ﬁl
 = 
TRUE
;

1105 
pMLEdôD©a
->
SèπlöeDi•
--;

1106 
pMLEdôD©a
->
EndlöeDi•
--;

1108 
pMLEdôD©a
->
edôLöe
--;

1110 if–
pMLEdôD©a
->
edôPos
 >
ãmp
->
d©aEnd
 )

1112 
pMLEdôD©a
->
edôPos
 = 
ãmp
->
d©aEnd
;

1113 
pMLEdôD©a
->
di•Pos
 = 0;

1114 
√wSèπPos
 = 
	`edtGëSèπDi•PosAtEnd
 (
hWnd
, 
ãmp
);

1115 
pMLEdôD©a
->
di•Pos
 = 
√wSèπPos
;

1116 
pMLEdôD©a
->
ˇªtPos
 =ÖMLEdôD©a->
edôPos
 - 
√wSèπPos
;

1117 
bS¸ﬁl
 = 
TRUE
;

1121 
√wSèπPos
 = 
	`edtGëOff£t
(
hWnd
, 
pMLEdôD©a
,
ãmp
,

1122 
pMLEdôD©a
->
ˇªtPos
 * 
	`GëSysCh¨Width
 (
hWnd
)

1123 + 
pMLEdôD©a
->
À·M¨gö
);

1124 if(!
	`edtIsACCh¨FromBegö
(
ãmp
->
buf„r
,ãmp->
d©aEnd
,

1125 
pMLEdôD©a
->
di•Pos
))

1127 
bS¸ﬁl
 = 
TRUE
;

1128 
pMLEdôD©a
->
di•Pos
--;

1129 
√wSèπPos
 = 
	`edtGëOff£t
(
hWnd
, 
pMLEdôD©a
,
ãmp
,

1130 
pMLEdôD©a
->
ˇªtPos
 * 
	`GëSysCh¨Width
 (
hWnd
)

1131 + 
pMLEdôD©a
->
À·M¨gö
+
	`GëSysCh¨Width
(
hWnd
)/2);

1133 
pMLEdôD©a
->
edôPos
 = 
√wSèπPos
 +ÖMLEdôD©a->
di•Pos
;

1134 
pMLEdôD©a
->
ˇªtPos
 = 
√wSèπPos
;

1136 
	`SëC¨ëPos
 (
pMLEdôD©a
->
ˇªtPos
 * 
	`GëSysCh¨Width
 (
hWnd
)

1137 + 
pMLEdôD©a
->
À·M¨gö
,

1138 (
pMLEdôD©a
->
edôLöe
 -ÖMLEdôD©a->
SèπlöeDi•
Ë* 
	`GëSysCh¨Height
(
hWnd
)

1139 + 
pMLEdôD©a
->
t›M¨gö
);

1140 if(
bS¸ﬁl
)

1141 
	`InvÆid©eRe˘
(
hWnd
,
NULL
,
FALSE
);

1144 
VK_DOWN
:

1146 
BOOL
 
bS¸ﬁl
 = 
FALSE
;

1147 
√wSèπPos
;

1148 
PLINEDATA
 
ãmp
;

1149 
pLöeD©a
 = 
	`GëLöeD©a
(
pMLEdôD©a
,pMLEdôD©a->
edôLöe
);

1150 
ãmp
 = 
pLöeD©a
->
√xt
;

1151 if(
pMLEdôD©a
->
edôLöe
 =pMLEdôD©a->
löes
-1)

1153 i‡(
pMLEdôD©a
->
edôLöe
 =pMLEdôD©a->
EndlöeDi•
)

1155 
bS¸ﬁl
 = 
TRUE
;

1156 
pMLEdôD©a
->
SèπlöeDi•
++;

1157 
pMLEdôD©a
->
EndlöeDi•
++;

1159 
pMLEdôD©a
->
edôLöe
++;

1161 if–
pMLEdôD©a
->
edôPos
 >
ãmp
->
d©aEnd
 )

1163 
pMLEdôD©a
->
edôPos
 = 
ãmp
->
d©aEnd
;

1164 
pMLEdôD©a
->
di•Pos
 = 0;

1165 
√wSèπPos
 = 
	`edtGëSèπDi•PosAtEnd
 (
hWnd
, 
ãmp
);

1166 
pMLEdôD©a
->
di•Pos
 = 
√wSèπPos
;

1167 
pMLEdôD©a
->
ˇªtPos
 =ÖMLEdôD©a->
edôPos
 - 
√wSèπPos
;

1168 
bS¸ﬁl
 = 
TRUE
;

1172 
√wSèπPos
 = 
	`edtGëOff£t
(
hWnd
, 
pMLEdôD©a
,
ãmp
,

1173 
pMLEdôD©a
->
ˇªtPos
 * 
	`GëSysCh¨Width
 (
hWnd
)

1174 + 
pMLEdôD©a
->
À·M¨gö
);

1175 if(!
	`edtIsACCh¨FromBegö
(
ãmp
->
buf„r
,ãmp->
d©aEnd
,

1176 
pMLEdôD©a
->
di•Pos
))

1178 
bS¸ﬁl
 = 
TRUE
;

1179 
pMLEdôD©a
->
di•Pos
--;

1180 
√wSèπPos
 = 
	`edtGëOff£t
(
hWnd
, 
pMLEdôD©a
,
ãmp
,

1181 
pMLEdôD©a
->
ˇªtPos
 * 
	`GëSysCh¨Width
 (
hWnd
)

1182 + 
pMLEdôD©a
->
À·M¨gö
+
	`GëSysCh¨Width
(
hWnd
)/2);

1184 
pMLEdôD©a
->
edôPos
 = 
√wSèπPos
 +ÖMLEdôD©a->
di•Pos
;

1185 
pMLEdôD©a
->
ˇªtPos
 = 
√wSèπPos
;

1187 
	`SëC¨ëPos
 (
pMLEdôD©a
->
ˇªtPos
 * 
	`GëSysCh¨Width
 (
hWnd
)

1188 + 
pMLEdôD©a
->
À·M¨gö
,

1189 (
pMLEdôD©a
->
edôLöe
 -ÖMLEdôD©a->
SèπlöeDi•
Ë* 
	`GëSysCh¨Height
(
hWnd
)

1190 + 
pMLEdôD©a
->
t›M¨gö
);

1191 if(
bS¸ﬁl
)

1192 
	`InvÆid©eRe˘
(
hWnd
,
NULL
,
FALSE
);

1196 
VK_INSERT
:

1197 
dw
 = 
	`GëWödowAddôi⁄ÆD©a
(
hWnd
);

1198 
dw
 ^
EST_REPLACE
;

1199 
	`SëWödowAddôi⁄ÆD©a
(
hWnd
,
dw
);

1202 
VK_DELETE
:

1204 
PLINEDATA
 
ãmp
;

1205 
À·Lí
;

1206 
pLöeD©a
 = 
	`GëLöeD©a
(
pMLEdôD©a
,pMLEdôD©a->
edôLöe
);

1207 i‡((
	`GëWödowAddôi⁄ÆD©a
(
hWnd
Ë& 
EST_READONLY
) ){

1209 
	`pög
 ();

1213 
ãmp
 = 
pLöeD©a
->
√xt
;

1214 i‡(
pLöeD©a
->
d©aEnd
 =
pMLEdôD©a
->
edôPos
 && 
ãmp
)

1216 if(
pLöeD©a
->
d©aEnd
 + 
ãmp
->d©aEnd <
LEN_MLEDIT_BUFFER
)

1218 
	`mem˝y
(
pLöeD©a
->
buf„r
+pLöeD©a->
d©aEnd
,
ãmp
->buffer,temp->dataEnd);

1219 
pLöeD©a
->
d©aEnd
 +
ãmp
->dataEnd;

1220 
pLöeD©a
->
buf„r
[pLöeD©a->
d©aEnd
] = '\0';

1221 if(
ãmp
->
√xt
)

1223 
pLöeD©a
->
√xt
 = 
ãmp
->next;

1224 
ãmp
->
√xt
->
¥evious
 = 
pLöeD©a
;

1227 
pLöeD©a
->
√xt
 = 
NULL
;

1228 
	`‰ì
(
ãmp
);

1229 
ãmp
 = 
pLöeD©a
->
√xt
;

1230 
ãmp
)

1232 
ãmp
->
löeNO
--;

1233 
ãmp
 =Åemp->
√xt
;

1235 if(
pMLEdôD©a
->
löes
 <pMLEdôD©a->
MaxlöesDi•
)

1237 
pMLEdôD©a
->
EndlöeDi•
--;

1238 
pMLEdôD©a
->
löesDi•
--;

1240 if(
pMLEdôD©a
->
EndlöeDi•
 >pMLEdôD©a->
löes
-1)

1242 
pMLEdôD©a
->
EndlöeDi•
--;

1243 if(
pMLEdôD©a
->
SèπlöeDi•
 !=0)

1244 
pMLEdôD©a
->
SèπlöeDi•
--;

1246 
pMLEdôD©a
->
löesDi•
--;

1248 
pMLEdôD©a
->
löes
--;

1250 i‡(
ãmp
->
d©aEnd
 > 0)

1252 
À·Lí
 = 
LEN_MLEDIT_BUFFER
 - 
pLöeD©a
->
d©aEnd
;

1253 
	`mem˝y
(
pLöeD©a
->
buf„r
+pLöeD©a->
d©aEnd
,
ãmp
->buf„r,
À·Lí
);

1254 
pLöeD©a
->
d©aEnd
 +=
À·Lí
;

1255 
pLöeD©a
->
buf„r
[pLöeD©a->
d©aEnd
] = '\0';

1256 
	`mem˝y
(
ãmp
->
buf„r
,ãmp->buf„r+
À·Lí
,ãmp->
d©aEnd
-leftLen);

1257 
ãmp
->
d©aEnd
 -=
À·Lí
;

1258 
ãmp
->
buf„r
[ãmp->
d©aEnd
] = '\0';

1261 i‡(
pMLEdôD©a
->
edôPos
 !
pLöeD©a
->
d©aEnd
)

1263 i‡(
	`edtIsACCh¨AtPosôi⁄
 (
pLöeD©a
->
buf„r
,

1264 
pLöeD©a
->
d©aEnd
,

1265 
pMLEdôD©a
->
edôPos
))

1266 
dñëed
 = 2;

1268 
dñëed
 = 1;

1270 
i
 = 
pMLEdôD©a
->
edôPos
;

1271 
i
 < 
pLöeD©a
->
d©aEnd
 - 
dñëed
;

1272 
i
++)

1273 
pLöeD©a
->
buf„r
 [
i
]

1274 
pLöeD©a
->
buf„r
 [
i
 + 
dñëed
];

1276 
pLöeD©a
->
d©aEnd
 -
dñëed
;

1277 
pLöeD©a
->
buf„r
[pLöeD©a->
d©aEnd
] = '\0';

1279 
bCh™ge
 = 
TRUE
;

1280 
	`InvÆid©eRe˘
 (
hWnd
, 
NULL
,
FALSE
);

1284 
VK_BACK
:

1286 
PLINEDATA
 
ãmp
;

1287 
À·Lí
,
ãmpEnd
;

1288 i‡((
	`GëWödowAddôi⁄ÆD©a
(
hWnd
Ë& 
EST_READONLY
) ){

1290 
	`Pög
 ();

1294 
pLöeD©a
 = 
	`GëLöeD©a
(
pMLEdôD©a
,pMLEdôD©a->
edôLöe
);

1295 
ãmp
 = 
pLöeD©a
->
¥evious
;

1296 i‡(
pMLEdôD©a
->
edôPos
 =0 && 
ãmp
)

1298 
ãmpEnd
 = 
ãmp
->
d©aEnd
;

1299 if(
pLöeD©a
->
d©aEnd
 + 
ãmp
->d©aEnd <
LEN_MLEDIT_BUFFER
)

1301 
	`mem˝y
(
ãmp
->
buf„r
+ãmp->
d©aEnd
,
pLöeD©a
->buffer,pLineData->dataEnd);

1302 
ãmp
->
d©aEnd
 +=
pLöeD©a
->dataEnd;

1303 
ãmp
->
buf„r
[ãmp->
d©aEnd
] = '\0';

1304 if(
pLöeD©a
->
√xt
)

1306 
ãmp
->
√xt
 = 
pLöeD©a
->next;

1307 
pLöeD©a
->
√xt
->
¥evious
 = 
ãmp
;

1310 
ãmp
->
√xt
 = 
NULL
;

1311 
	`‰ì
(
pLöeD©a
);

1312 
pLöeD©a
 = 
ãmp
;

1313 
ãmp
 =Åemp->
√xt
;

1314 
ãmp
)

1316 
ãmp
->
löeNO
--;

1317 
ãmp
 =Åemp->
√xt
;

1319 if(
pMLEdôD©a
->
SèπlöeDi•
 =pMLEdôD©a->
edôLöe


1320 && 
pMLEdôD©a
->
SèπlöeDi•
 != 0)

1322 
pMLEdôD©a
->
SèπlöeDi•
--;

1323 if(
pMLEdôD©a
->
EndlöeDi•
 =pMLEdôD©a->
löes
)

1324 
pMLEdôD©a
->
EndlöeDi•
--;

1326 if(
pMLEdôD©a
->
löes
 <pMLEdôD©a->
MaxlöesDi•
)

1328 
pMLEdôD©a
->
löesDi•
--;

1329 
pMLEdôD©a
->
EndlöeDi•
--;

1331 
pMLEdôD©a
->
löes
--;

1333 i‡(
pLöeD©a
->
d©aEnd
 > 0)

1335 
À·Lí
 = 
LEN_MLEDIT_BUFFER
 - 
ãmp
->
d©aEnd
;

1336 
	`mem˝y
(
ãmp
->
buf„r
+ãmp->
d©aEnd
,
pLöeD©a
->buf„r,
À·Lí
);

1337 
ãmp
->
d©aEnd
 +=
À·Lí
;

1338 
ãmp
->
buf„r
[ãmp->
d©aEnd
] = '\0';

1339 
	`mem˝y
(
pLöeD©a
->
buf„r
,pLöeD©a->buf„r+
À·Lí
,pLöeD©a->
d©aEnd
-leftLen);

1340 
pLöeD©a
->
d©aEnd
 -=
À·Lí
;

1341 
pLöeD©a
->
buf„r
[pLöeD©a->
d©aEnd
] = '\0';

1343 
pMLEdôD©a
->
edôLöe
--;

1344 
pMLEdôD©a
->
edôPos
 = 
ãmpEnd
;

1345 
pMLEdôD©a
->
di•Pos
 = 
ãmpEnd
;

1347 i‡(
pMLEdôD©a
->
ˇªtPos
 == 0

1348 && 
pMLEdôD©a
->
edôPos
 != 0) {

1349 i‡(
	`edtIsACCh¨Bef‹ePosôi⁄
 (
pLöeD©a
->
buf„r
,

1350 
pLöeD©a
->
d©aEnd
,

1351 
pMLEdôD©a
->
edôPos
)) {

1352 
pMLEdôD©a
->
di•Pos
 -= 2;

1353 
pMLEdôD©a
->
ˇªtPos
 = 2;

1356 
pMLEdôD©a
->
di•Pos
--;

1357 
pMLEdôD©a
->
ˇªtPos
 = 1;

1360 i‡(
pMLEdôD©a
->
ˇªtPos
 < 0) {

1361 
pMLEdôD©a
->
di•Pos
 = 0;

1362 
pMLEdôD©a
->
ˇªtPos
 = 0;

1365 i‡(
pMLEdôD©a
->
edôPos
 != 0 )

1367 i‡(
	`edtIsACCh¨Bef‹ePosôi⁄
 (
pLöeD©a
->
buf„r
,

1368 
pLöeD©a
->
d©aEnd
,

1369 
pMLEdôD©a
->
edôPos
))

1370 
dñëed
 = 2;

1372 
dñëed
 = 1;

1374 
i
 = 
pMLEdôD©a
->
edôPos
;

1375 
i
 < 
pLöeD©a
->
d©aEnd
;

1376 
i
++)

1377 
pLöeD©a
->
buf„r
 [
i
 - 
dñëed
]

1378 
pLöeD©a
->
buf„r
 [
i
];

1380 
pLöeD©a
->
d©aEnd
 -
dñëed
;

1381 
pMLEdôD©a
->
edôPos
 -
dñëed
;

1382 
pMLEdôD©a
->
ˇªtPos
 -
dñëed
;

1383 i‡(
pMLEdôD©a
->
ˇªtPos
 == 0

1384 && 
pMLEdôD©a
->
edôPos
 != 0) {

1385 i‡(
	`edtIsACCh¨Bef‹ePosôi⁄
 (
pLöeD©a
->
buf„r
,

1386 
pLöeD©a
->
d©aEnd
,

1387 
pMLEdôD©a
->
edôPos
)) {

1388 
pMLEdôD©a
->
di•Pos
 -= 2;

1389 
pMLEdôD©a
->
ˇªtPos
 = 2;

1392 
pMLEdôD©a
->
di•Pos
 --;

1393 
pMLEdôD©a
->
ˇªtPos
 = 1;

1398 
bCh™ge
 = 
TRUE
;

1399 
	`SëC¨ëPos
 (
pMLEdôD©a
->
ˇªtPos
 * 
	`GëSysCh¨Width
 (
hWnd
)

1400 + 
pMLEdôD©a
->
À·M¨gö
,

1401 (
pMLEdôD©a
->
edôLöe
 -ÖMLEdôD©a->
SèπlöeDi•
Ë* 
	`GëSysCh¨Height
(
hWnd
)

1402 + 
pMLEdôD©a
->
t›M¨gö
);

1403 
	`InvÆid©eRe˘
 (
hWnd
, 
NULL
, 
FALSE
);

1411 i‡(
bCh™ge
)

1412 
	`SídMesßge
 (
	`GëP¨ít
 (
hWnd
), 
WM_COMMAND
,

1413 (
WPARAM
Ë
	`MAKELONG
 (
	`GëDlgCålID
(
hWnd
), 
EN_CHANGE
),

1414 (
LPARAM
Ë
hWnd
);

1418 
WM_CHAR
:

1420 
ch¨Buf„r
 [2];

1421 
i
, 
ch¨s
, 
s¸ﬁlSãp
, 
ö£πög
;

1422 
UINT
 
f‹m©
;

1424 
pMLEdôD©a
 = (
PMLEDITDATA
)
	`GëWödowAddôi⁄ÆD©a2
(
hWnd
);

1426 
pLöeD©a
 = 
	`GëLöeD©a
(
pMLEdôD©a
,pMLEdôD©a->
edôLöe
);

1428 i‡(
dwStyÀ
 & 
ES_READONLY
) {

1430 
	`Pög
 ();

1434 i‡(
	`HIBYTE
 (
wP¨am
)) {

1435 
ch¨Buf„r
 [0] = 
	`LOBYTE
 (
wP¨am
);

1436 
ch¨Buf„r
 [1] = 
	`HIBYTE
 (
wP¨am
);

1437 
ch¨s
 = 2;

1440 
ch¨Buf„r
 [0] = 
	`LOBYTE
 (
wP¨am
);

1441 
ch¨s
 = 1;

1444 i‡(
ch¨s
 == 1) {

1445 
ch¨Buf„r
 [0])

1459 i‡(
	`GëWödowAddôi⁄ÆD©a
(
hWnd
Ë& 
EST_REPLACE
) {

1460 i‡(
pLöeD©a
->
d©aEnd
 =
pMLEdôD©a
->
edôPos
)

1461 
ö£πög
 = 
ch¨s
;

1462 i‡(
	`edtIsACCh¨AtPosôi⁄
 (
pLöeD©a
->
buf„r
,

1463 
pLöeD©a
->
d©aEnd
,

1464 
pMLEdôD©a
->
edôPos
)) {

1465 i‡(
ch¨s
 == 2)

1466 
ö£πög
 = 0;

1468 
ö£πög
 = -1;

1471 i‡(
ch¨s
 == 2)

1472 
ö£πög
 = 1;

1474 
ö£πög
 = 0;

1478 
ö£πög
 = 
ch¨s
;

1481 i‡(
pLöeD©a
->
d©aEnd
 + 
ö£πög
 > 
pMLEdôD©a
->
tŸÆLí
) {

1483 
	`Pög
 ();

1485 
	`SídMesßge
 (
	`GëP¨ít
 (
hWnd
), 
WM_COMMAND
,

1486 (
WPARAM
Ë
	`MAKELONG
 (
	`GëDlgCålID
(
hWnd
), 
EN_MAXTEXT
),

1487 (
LPARAM
Ë
hWnd
);

1490 i‡((
pMLEdôD©a
->
h¨dLimô
 >= 0)

1491 && ((
pLöeD©a
->
d©aEnd
 + 
ö£πög
)

1492 > 
pMLEdôD©a
->
h¨dLimô
)) {

1494 
	`Pög
 ();

1496 
	`SídMesßge
 (
	`GëP¨ít
 (
hWnd
), 
WM_COMMAND
,

1497 (
WPARAM
Ë
	`MAKELONG
 (
	`GëDlgCålID
(
hWnd
), 
EN_MAXTEXT
),

1498 (
LPARAM
Ë
hWnd
);

1501 i‡(
ö£πög
 == -1) {

1502 
i
 = 
pMLEdôD©a
->
edôPos
; i < 
pLöeD©a
->
d©aEnd
-1; i++)

1503 
pLöeD©a
->
buf„r
 [
i
] =ÖLineData->buffer [i + 1];

1505 i‡(
ö£πög
 > 0) {

1506 
i
 = 
pLöeD©a
->
d©aEnd
 + 
ö£πög
 - 1;

1507 
i
 > 
pMLEdôD©a
->
edôPos
 + 
ö£πög
 - 1;

1508 
i
--)

1509 
pLöeD©a
->
buf„r
 [
i
]

1510 
pLöeD©a
->
buf„r
 [
i
 - 
ö£πög
];

1512 
i
 = 0; i < 
ch¨s
; i++)

1513 
pLöeD©a
->
buf„r
 [
pMLEdôD©a
->
edôPos
 + 
i
]

1514 
ch¨Buf„r
 [
i
];

1516 
pMLEdôD©a
->
edôPos
 +
ch¨s
;

1517 
pMLEdôD©a
->
ˇªtPos
 +
ch¨s
;

1518 
pLöeD©a
->
d©aEnd
 +
ö£πög
;

1519 
pLöeD©a
->
buf„r
[pLöeD©a->
d©aEnd
] = '\0';

1520 i‡(
pMLEdôD©a
->
ˇªtPos
 * 
	`GëSysCh¨Width
 (
hWnd
)

1521 > 
	`edtGëOutWidth
 (
hWnd
))

1523 i‡(
	`edtIsACCh¨AtPosôi⁄
 (
pLöeD©a
->
buf„r
,

1524 
pLöeD©a
->
d©aEnd
,

1525 
pMLEdôD©a
->
di•Pos
))

1526 
s¸ﬁlSãp
 = 2;

1528 i‡(
ch¨s
 == 2) {

1529 i‡(
	`edtIsACCh¨AtPosôi⁄
 (
pLöeD©a
->
buf„r
,

1530 
pLöeD©a
->
d©aEnd
,

1531 
pMLEdôD©a
->
di•Pos
 + 1))

1532 
s¸ﬁlSãp
 = 3;

1534 
s¸ﬁlSãp
 = 2;

1537 
s¸ﬁlSãp
 = 1;

1540 
pMLEdôD©a
->
di•Pos
 +
s¸ﬁlSãp
;

1542 
pMLEdôD©a
->
ˇªtPos
 =

1543 
pMLEdôD©a
->
edôPos
 -ÖMLEdôD©a->
di•Pos
;

1546 
	`SëC¨ëPos
 (
pMLEdôD©a
->
ˇªtPos
 * 
	`GëSysCh¨Width
 (
hWnd
)

1547 + 
pMLEdôD©a
->
À·M¨gö
,

1548 (
pMLEdôD©a
->
edôLöe
 -ÖMLEdôD©a->
SèπlöeDi•
Ë* 
	`GëSysCh¨Height
(
hWnd
)

1549 + 
pMLEdôD©a
->
t›M¨gö
);

1550 
	`InvÆid©eRe˘
 (
hWnd
, 
NULL
,
FALSE
);

1551 
f‹m©
 = 
DT_NOPREFIX
;

1552 
	`SídMesßge
 (
	`GëP¨ít
 (
hWnd
), 
WM_COMMAND
,

1553 (
WPARAM
Ë
	`MAKELONG
 (
	`GëDlgCålID
(
hWnd
), 
EN_CHANGE
),

1554 (
LPARAM
Ë
hWnd
);

1558 
WM_GETTEXTLENGTH
:

1560 
PLINEDATA
 
ãmp
;

1561 
löeNO
 = ()
wP¨am
;

1562 
pMLEdôD©a
 = (
PMLEDITDATA
)
	`GëWödowAddôi⁄ÆD©a2
(
hWnd
);

1563 
ãmp
 = 
pMLEdôD©a
->
hód
;

1564 
ãmp
)

1566 i‡(
ãmp
->
löeNO
 ==ÜineNO)

1567  
ãmp
->
d©aEnd
;

1568 
ãmp
 =Åemp->
√xt
;

1572 
WM_GETTEXT
:

1574 
PLINEDATA
 
ãmp
;

1575 
Àn
,
tŸÆ
 = 0,
löeNO
;

1576 * 
buf„r
 = (*)
lP¨am
;

1577 
pMLEdôD©a
 = (
PMLEDITDATA
)
	`GëWödowAddôi⁄ÆD©a2
(
hWnd
);

1578 
Àn
 = ()
wP¨am
;

1579 
löeNO
 = ()
wP¨am
;

1580 
ãmp
 = 
pMLEdôD©a
->
hód
;

1581 
ãmp
 && 
tŸÆ
 +Åemp->
d©aEnd
 < 
Àn
)

1583 
	`mem˝y
(
buf„r
+
tŸÆ
,
ãmp
->buf„r,ãmp->
d©aEnd
);

1584 
tŸÆ
 +
ãmp
->
d©aEnd
;

1585 
ãmp
 =Åemp->
√xt
;

1592 
WM_GETLINETEXT
:

1594 
PLINEDATA
 
ãmp
;

1595 * 
buf„r
 = (*)
lP¨am
;

1596 
löeNO
,
Àn
;

1598 
pMLEdôD©a
 = (
PMLEDITDATA
)
	`GëWödowAddôi⁄ÆD©a2
(
hWnd
);

1599 
löeNO
 = ()
wP¨am
;

1600 
ãmp
 = 
	`GëLöeD©a
(
pMLEdôD©a
,
löeNO
);

1601 if(
ãmp
)

1603 
Àn
 = 
	`mö
 (()
wP¨am
, 
ãmp
->
d©aEnd
);

1604 
	`mem˝y
 (
buf„r
, 
ãmp
->buf„r,
Àn
);

1605 
buf„r
 [
Àn
] = '\0';

1611 
WM_SETTEXT
:

1613 
	`MLEdôInôBuf„r
(
pMLEdôD©a
,(*)
lP¨am
);

1619 
WM_SETLINETEXT
:

1621 
Àn
,
löeNO
;

1622 
PLINEDATA
 
ãmp
;

1624 i‡(
dwStyÀ
 & 
ES_READONLY
)

1627 
pMLEdôD©a
 = (
PMLEDITDATA
)
	`GëWödowAddôi⁄ÆD©a2
(
hWnd
);

1629 
Àn
 = 
	`°æí
 ((*)
lP¨am
);

1630 
löeNO
 = ()
wP¨am
;

1631 
ãmp
 = 
pMLEdôD©a
->
hód
;

1632 
Àn
 = 
	`mö
 (Àn, 
pMLEdôD©a
->
tŸÆLí
);

1634 i‡(
pMLEdôD©a
->
h¨dLimô
 >= 0)

1635 
Àn
 = 
	`mö
 (Àn, 
pMLEdôD©a
->
h¨dLimô
);

1636 
ãmp
)

1638 if(
ãmp
->
löeNO
 ==ÜineNO)

1640 
ãmp
->
d©aEnd
 = 
Àn
;

1641 
	`mem˝y
 (
ãmp
->
buf„r
, (*)
lP¨am
, 
Àn
);

1643 
ãmp
 =Åemp->
√xt
;

1645 
pMLEdôD©a
->
edôPos
 = 0;

1646 
pMLEdôD©a
->
ˇªtPos
 = 0;

1647 
pMLEdôD©a
->
di•Pos
 = 0;

1648 
	`InvÆid©eRe˘
 (
hWnd
, 
NULL
, 
FALSE
);

1652 
WM_LBUTTONDBLCLK
:

1655 
WM_LBUTTONDOWN
:

1657 
√wOff
,
löeNO
;

1658 
PLINEDATA
 
ãmp
;

1659 
BOOL
 
bS¸ﬁl
 = 
FALSE
;

1661 
pMLEdôD©a
 = (
PMLEDITDATA
)
	`GëWödowAddôi⁄ÆD©a2
(
hWnd
);

1662 
löeNO
 = 
	`edtGëLöeNO
 (
hWnd
,
pMLEdôD©a
, 
	`HIWORD
 (
lP¨am
));

1663 i‡–
löeNO
 < 0 )

1665 
löeNO
 +
pMLEdôD©a
->
SèπlöeDi•
;

1666 i‡(
löeNO
 <
pMLEdôD©a
->
EndlöeDi•
 &&ÜöeNO <pMLEdôD©a->
löes
-1 )

1668 
ãmp
 = 
	`GëLöeD©a
(
pMLEdôD©a
,
löeNO
);

1669 
√wOff
 = 
	`edtGëOff£t
 (
hWnd
,
pMLEdôD©a
,
ãmp
, 
	`LOWORD
 (
lP¨am
));

1670 if(!
	`edtIsACCh¨FromBegö
(
ãmp
->
buf„r
,ãmp->
d©aEnd
,
pMLEdôD©a
->
di•Pos
))

1672 
bS¸ﬁl
 = 
TRUE
;

1673 
pMLEdôD©a
->
di•Pos
--;

1674 
√wOff
 = 
	`edtGëOff£t
 (
hWnd
,
pMLEdôD©a
,
ãmp
, 
	`LOWORD
(
lP¨am
)+
	`GëSysCh¨Width
(hWnd)/2);

1676 i‡(
√wOff
 !
pMLEdôD©a
->
ˇªtPos
 || 
löeNO
 !pMLEdôD©a->
edôLöe
) {

1677 
pMLEdôD©a
->
edôLöe
 = 
ãmp
->
löeNO
;

1678 
pMLEdôD©a
->
edôPos
 = 
√wOff
 +pMLEdôD©a->
di•Pos
;

1679 
pMLEdôD©a
->
ˇªtPos
 = 
√wOff
;

1680 
	`SëC¨ëPos
 (
pMLEdôD©a
->
ˇªtPos
 * 
	`GëSysCh¨Width
 (
hWnd
)

1681 + 
pMLEdôD©a
->
À·M¨gö
,

1682 (
pMLEdôD©a
->
edôLöe
 -ÖMLEdôD©a->
SèπlöeDi•
Ë* 
	`GëSysCh¨Height
(
hWnd
)

1683 + 
pMLEdôD©a
->
t›M¨gö
);

1685 if(
bS¸ﬁl
)

1686 
	`InvÆid©eRe˘
(
hWnd
,
NULL
,
FALSE
);

1691 
WM_LBUTTONUP
:

1694 
WM_MOUSEMOVE
:

1697 
WM_GETDLGCODE
:

1698  
DLGC_WANTCHARS
 | 
DLGC_HASSETSEL
 | 
DLGC_WANTARROWS
;

1700 
EM_SETREADONLY
:

1701 i‡(
wP¨am
)

1702 
	`In˛udeWödowStyÀ
(
hWnd
,
ES_READONLY
);

1704 
	`Ex˛udeWödowStyÀ
(
hWnd
,
ES_READONLY
);

1707 
EM_SETPASSWORDCHAR
:

1708 
pMLEdôD©a
 = (
PMLEDITDATA
)
	`GëWödowAddôi⁄ÆD©a2
(
hWnd
);

1710 i‡(
pMLEdôD©a
->
∑sswdCh¨
 !()
wP¨am
) {

1711 i‡(
dwStyÀ
 & 
ES_PASSWORD
) {

1712 
pMLEdôD©a
->
∑sswdCh¨
 = ()
wP¨am
;

1713 
	`InvÆid©eRe˘
 (
hWnd
, 
NULL
, 
TRUE
);

1718 
EM_GETPASSWORDCHAR
:

1720 * 
∑sswdch¨
;

1722 
pMLEdôD©a
 = (
PMLEDITDATA
)
	`GëWödowAddôi⁄ÆD©a2
(
hWnd
);

1723 
∑sswdch¨
 = (*Ë
lP¨am
;

1725 *
∑sswdch¨
 = 
pMLEdôD©a
->
∑sswdCh¨
;

1729 
EM_LIMITTEXT
:

1731 
√wLimô
 = ()
wP¨am
;

1733 i‡(
√wLimô
 >= 0) {

1734 
pMLEdôD©a
 = (
PMLEDITDATA
)
	`GëWödowAddôi⁄ÆD©a2
(
hWnd
);

1735 i‡(
pMLEdôD©a
->
tŸÆLí
 < 
√wLimô
)

1736 
pMLEdôD©a
->
h¨dLimô
 = -1;

1738 
pMLEdôD©a
->
h¨dLimô
 = 
√wLimô
;

1744  
	`DefWödowProc
 (
hWnd
, 
mesßge
, 
wP¨am
, 
lP¨am
);

1749 
	}
}

	@mwin/winlib/mwuser.c

1 
	~"wödows.h
"

4 
	$MwU£rInô
(
ac
,**
av
)

7 
	}
}

	@mwin/winlib/obsolete.c

21 
	ggr_w¨nög_libmwölib_is_obsﬁëe
[] =

	@mwin/winlib/progbar.c

49 
	~<°dio.h
>

50 
	~<°dlib.h
>

51 
	~<°rög.h
>

52 
	#MWINCLUDECOLORS


	)

53 
	~"wödows.h
"

54 
	~"wötoﬁs.h
"

55 
	~"devi˚.h
"

57 
	#TEST
 1

	)

59 
	#WIDTH_PBAR_BORDER
 2

	)

61 
	s_PROGRESSDATA
 {

62 
	mnMö
;

63 
	mnMax
;

64 
	mnPos
;

65 
	mnSãpInc
;

66 } 
	tPROGRESSDATA
, *
	tPPROGRESSDATA
;

68 
LRESULT
 
CALLBACK


69 
ProgªssB¨CålProc
 (
HWND
 
hwnd
, 
UINT
 
mesßge
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
);

71 
WINAPI
 
	$MwRegi°îProgªssB¨C⁄åﬁ
(
HINSTANCE
 
hIn°™˚
)

73 
WNDCLASS
 
wc
;

75 
wc
.
°yÀ
 = 
CS_HREDRAW
 | 
CS_VREDRAW
 | 
CS_DBLCLKS
 | 
CS_GLOBALCLASS
;

76 
wc
.
Õ‚WndProc
 = (
WNDPROC
)
ProgªssB¨CålProc
;

77 
wc
.
cbClsExåa
 = 0;

78 
wc
.
cbWndExåa
 = 0;

79 
wc
.
hIn°™˚
 = hInstance;

80 
wc
.
hIc⁄
 = 
NULL
;

81 
wc
.
hCurs‹
 = 0;

82 
wc
.
hbrBackground

	`GëStockObje˘
(
LTGRAY_BRUSH
);

83 
wc
.
ÕszMíuName
 = 
NULL
;

84 
wc
.
ÕszCœssName
= "PROGBAR";

86  
	`Regi°îCœss
(&
wc
);

87 
	}
}

90 
	$FûlBox
(
HDC
 
hdc
, 
x
, 
y
, 
w
, 
h
, 
COLORREF
 
¸
)

92 
RECT
 
rc
;

94 i‡(
w
 <= 0)

96 
	`SëRe˘
(&
rc
, 
x
, 
y
, x+
w
, y+
h
);

97 
	`Fa°FûlRe˘
(
hdc
, &
rc
, 
¸
);

98 
	}
}

101 
	$GëSysCh¨Width
(
HDC
 
hdc
)

103 
cw
, 
ch
, 
cb
;

105 
	`GdGëTextSize
(
hdc
->
f⁄t
->
pf⁄t
,"X",1, &
cw
,&
ch
,&
cb
,
MWTF_ASCII
);

106  
cw
;

107 
	}
}

110 
	$GëSysCh¨Height
(
HDC
 
hdc
)

112 
cw
, 
ch
, 
cb
;

114 
	`GdGëTextSize
(
hdc
->
f⁄t
->
pf⁄t
,"X",1, &
cw
,&
ch
,&
cb
,
MWTF_ASCII
);

115  
ch
;

116 
	}
}

118 
	$pb¨OnDøw
 (
HWND
 
hwnd
, 
HDC
 
hdc
, 
PROGRESSDATA
* 
pD©a
, 
BOOL
 
fVîtiˇl
,

119 
BOOL
 
fEø£
)

121 
x
, 
y
, 
w
, 
h
;

122 
nAŒP¨t
;

123 
nNowP¨t
;

124 
whO√
, 
nRem
;

125 
ix
, 
iy
;

126 
i
;

127 
°ï
;

128 
COLORREF
 
¸
;

129 
RECT
 
rcClõ¡
;

130 
szText
[8];

132 i‡(!
hdc
 || (
pD©a
->
nMax
 =pD©a->
nMö
))

135 i‡((
pD©a
->
nMax
 -ÖD©a->
nMö
) > 5)

136 
°ï
 = 5;

138 
°ï
 = 1;

140 
	`GëClõ¡Re˘
 (
hwnd
, &
rcClõ¡
);

141 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
DEFAULT_GUI_FONT
));

143 
x
 = 
rcClõ¡
.
À·
 + 
WIDTH_PBAR_BORDER
;

144 
y
 = 
rcClõ¡
.
t›
 + 
WIDTH_PBAR_BORDER
;

145 
w
 = (
rcClõ¡
.
right
 -ÑcClõ¡.
À·
Ë- (
WIDTH_PBAR_BORDER
 << 1);

146 
h
 = (
rcClõ¡
.
bŸtom
 -ÑcClõ¡.
t›
Ë- (
WIDTH_PBAR_BORDER
 << 1);

148 
nAŒP¨t
 = (
pD©a
->
nMax
 -ÖD©a->
nMö
Ë/ 
°ï
;

149 
nNowP¨t
 = (
pD©a
->
nPos
 -ÖD©a->
nMö
Ë/ 
°ï
;

150 i‡(
fVîtiˇl
) {

151 
whO√
 = 
h
 / 
nAŒP¨t
;

152 
nRem
 = 
h
 % 
nAŒP¨t
;

154 
whO√
 = 
w
 / 
nAŒP¨t
;

155 
nRem
 = 
w
 % 
nAŒP¨t
;

158 i‡(
fEø£
)

159 
	`FûlBox
 (
hdc
, 
x
, 
y
, 
w
, 
h
, 
	`GëSysCﬁ‹
(
COLOR_BTNSHADOW
));

161 if(
whO√
 >= 4) {

162 i‡(
fVîtiˇl
) {

163 
i
 = 0, 
iy
 = 
y
 + 
h
 - 1; i < 
nNowP¨t
; ++i) {

165 i‡((
iy
 - 
whO√
Ë< 
y
)

166 
whO√
 = 
iy
 - 
y
;

169 
	`FûlBox
 (
hdc
, 
x
, 
iy
 - 
whO√
, 
w
, whO√ - 1, 
BLUE
);

171 
iy
 -
whO√
 + 1;

173 if(
nRem
 > 0) {

174 
iy
 --;

175 
nRem
 --;

181 
i
 = 0, 
ix
 = 
x
 + 1; i < 
nNowP¨t
; ++i) {

183 i‡((
ix
 + 
whO√
Ë> (
x
 + 
w
))

184 
whO√
 = 
x
 + 
w
 - 
ix
;

186 
	`FûlBox
 (
hdc
, 
ix
, 
y
, 
whO√
 - 1, 
h
, 
BLUE
);

187 
ix
 +
whO√
 + 1;

189 if(
nRem
 > 0) {

190 
ix
 ++;

191 
nRem
 --;

199 
d
 = 
nNowP¨t
*100/
nAŒP¨t
;

200 
maxw
 = 
	`GëSysCh¨Width
 (
hdc
) << 2;

201 
ch¨h
 = 
	`GëSysCh¨Height
 (
hdc
);

203 i‡(
d
 > 50)

204 
¸
 = 
BLUE
;

206 
¸
 = 
	`GëSysCﬁ‹
(
COLOR_BTNSHADOW
);

207 
	`FûlBox
 (
hdc
, 
x
 + ((
w
 - 
maxw
)>>1), 
y
 + ((
h
 - 
ch¨h
) > 1), maxw,

208 
ch¨h
 - 1, 
¸
);

209 
	`FûlBox
 (
hdc
, 
x
, 
y
, ()(()
w
*
d
/100L), 
h
, 
BLUE
);

210 
	`SëTextCﬁ‹
 (
hdc
, 
WHITE
);

211 
	`SëBkMode
 (
hdc
, 
TRANSPARENT
);

212 
	`•rötf
 (
szText
, "%d%%", 
d
);

213 
	`TextOut
 (
hdc
, 
x
 + ((
w
 - 
	`GëSysCh¨Width
 (hdcË* 
	`°æí
 (
szText
) )>>1),

214 
y
 + ((
h
 - 
	`GëSysCh¨Height
(
hdc
) )>>1),

215 
szText
, 
	`°æí
(szText));

217 
	}
}

219 
	$pb¨N‹mÆizeP¨ams
 (c⁄° 
HWND
 
pCål
,

220 
PROGRESSDATA
* 
pD©a
, 
BOOL
 
fNŸify
)

222 i‡(
pD©a
->
nPos
 >ÖD©a->
nMax
) {

223 i‡(
fNŸify
)

224 
	`SídMesßge
 (
	`GëP¨ít
 ((
HWND
)
pCål
), 
WM_COMMAND
,

225 (
WPARAM
)
	`MAKELONG
 (
pCål
->
id
, 
PBN_REACHMAX
), (
LPARAM
)pCtrl);

226 
pD©a
->
nPos
 =ÖD©a->
nMax
;

229 i‡(
pD©a
->
nPos
 <ÖD©a->
nMö
) {

230 i‡(
fNŸify
)

231 
	`SídMesßge
 (
	`GëP¨ít
 ((
HWND
)
pCål
), 
WM_COMMAND
,

232 (
WPARAM
)
	`MAKELONG
 (
pCål
->
id
, 
PBN_REACHMIN
), (
LPARAM
)pCtrl);

233 
pD©a
->
nPos
 =ÖD©a->
nMö
;

235 
	}
}

237 
LRESULT
 
CALLBACK


238 
	$ProgªssB¨CålProc
 (
HWND
 
hwnd
, 
UINT
 
mesßge
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
)

240 
HDC
 
hdc
;

241 
HWND
 
pCål
;

242 
PROGRESSDATA
* 
pD©a
;

243 
BOOL
 
fEø£
;

244 
RECT
 
rc
;

245 
PAINTSTRUCT
 
ps
;

246 
pos
;

248 
pCål
 = 
hwnd
;

250 
mesßge
)

252 
WM_CREATE
:

253 i‡(!(
pD©a
 = 
	`mÆloc
 ( (
PROGRESSDATA
)))) {

254 #i‚de‡
PSP


255 
	`Ârötf
(
°dîr
, "CreateÖrogress bar control failure!\n");

260 #i‡
TEST


261 
pD©a
->
nMax
 = 1000;

262 
pD©a
->
nMö
 = 0;

263 
pD©a
->
nPos
 = 500;

264 
pD©a
->
nSãpInc
 = 100;

266 
pD©a
->
nMax
 = 100;

267 
pD©a
->
nMö
 = 0;

268 
pD©a
->
nPos
 = 0;

269 
pD©a
->
nSãpInc
 = 10;

272 
pCål
->
u£rd©a
 = (
DWORD
)
pD©a
;

275 
WM_DESTROY
:

276 
	`‰ì
 ((*)(
pCål
->
u£rd©a
));

279 
WM_GETDLGCODE
:

280  
DLGC_STATIC
;

282 
WM_NCPAINT
:

283 if(
	`GëWödowL⁄g
(
hwnd
, 
GWL_STYLE
Ë& 
WS_BORDER
) {

284 
	`GëWödowRe˘
(
hwnd
, &
rc
);

285 
hdc
 = 
	`GëWödowDC
(
hwnd
);

286 
	`Døw3dBox
(
hdc
, 
rc
.
À·
,Ñc.
t›
,Ñc.
right
-rc.left,

287 
rc
.
bŸtom
-rc.
t›
, 
	`GëSysCﬁ‹
(
COLOR_BTNSHADOW
),

288 
	`GëSysCﬁ‹
(
COLOR_BTNHIGHLIGHT
));

292 
WM_PAINT
:

293 
hdc
 = 
	`BegöPaöt
 (
hwnd
,&
ps
);

294 
	`pb¨OnDøw
 (
hwnd
, 
hdc
, (
PROGRESSDATA
 *)
pCål
->
u£rd©a
,

295 
hwnd
->
°yÀ
 & 
PBS_VERTICAL
, 
TRUE
);

296 
	`EndPaöt
 (
hwnd
, &
ps
);

299 
PBM_SETRANGE
:

300 
pD©a
 = (
PROGRESSDATA
 *)
pCål
->
u£rd©a
;

301 
pD©a
->
nMö
 = 
	`mö
 (
wP¨am
, 
lP¨am
);

302 
pD©a
->
nMax
 = 
	`max
 (
wP¨am
, 
lP¨am
);

303 i‡(
pD©a
->
nPos
 >ÖD©a->
nMax
)

304 
pD©a
->
nPos
 =ÖD©a->
nMax
;

305 i‡(
pD©a
->
nPos
 <ÖD©a->
nMö
)

306 
pD©a
->
nPos
 =ÖD©a->
nMö
;

309 
PBM_SETSTEP
:

310 
pD©a
 = (
PROGRESSDATA
 *)
pCål
->
u£rd©a
;

311 
pD©a
->
nSãpInc
 = 
wP¨am
;

314 
PBM_SETPOS
:

315 
pD©a
 = (
PROGRESSDATA
 *)
pCål
->
u£rd©a
;

317 i‡(
pD©a
->
nPos
 =
wP¨am
)

320 
fEø£
 = (
wP¨am
 < 
pD©a
->
nPos
);

321 
pD©a
->
nPos
 = 
wP¨am
;

322 
	`pb¨N‹mÆizeP¨ams
 (
pCål
, 
pD©a
, 
hwnd
->
°yÀ
 & 
PBS_NOTIFY
);

323 
	`InvÆid©eRe˘
(
hwnd
, 
NULL
, 
fEø£
);

326 
PBM_DELTAPOS
:

327 
pD©a
 = (
PROGRESSDATA
 *)
pCål
->
u£rd©a
;

329 i‡(
wP¨am
 == 0)

332 
fEø£
 = (
wP¨am
 < 0);

333 
pD©a
->
nPos
 +
wP¨am
;

334 
	`pb¨N‹mÆizeP¨ams
 (
pCål
, 
pD©a
, 
hwnd
->
°yÀ
 & 
PBS_NOTIFY
);

335 
	`InvÆid©eRe˘
(
hwnd
, 
NULL
, 
fEø£
);

338 
PBM_STEPIT
:

339 
pD©a
 = (
PROGRESSDATA
 *)
pCål
->
u£rd©a
;

341 i‡(
pD©a
->
nSãpInc
 == 0)

344 
fEø£
 = (
pD©a
->
nSãpInc
 < 0);

345 
pD©a
->
nPos
 +pD©a->
nSãpInc
;

346 
	`pb¨N‹mÆizeP¨ams
 (
pCål
, 
pD©a
, 
hwnd
->
°yÀ
 & 
PBS_NOTIFY
);

347 
	`InvÆid©eRe˘
(
hwnd
, 
NULL
, 
fEø£
);

350 #i‡
TEST


351 
WM_LBUTTONDOWN
:

352 
WM_LBUTTONDBLCLK
:

353 
pD©a
 = (
PROGRESSDATA
 *)
pCål
->
u£rd©a
;

354 
pos
 = 
pD©a
->
nPos
;

355 
pos
 +
pD©a
->
nSãpInc
;

356 i‡(
pos
 > 
pD©a
->
nMax
)

357 
pos
 = 
pD©a
->
nMö
;

358 
	`SídMesßge
(
hwnd
, 
PBM_SETPOS
, 
pos
, 0L);

362  
	`DefWödowProc
 (
hwnd
, 
mesßge
, 
wP¨am
, 
lP¨am
);

365 
	}
}

	@mwin/winlib/ptinsid.c

1 
	~"wödows.h
"

2 
	~"wötoﬁs.h
"

4 
BOOL
 
WINAPI


5 
	$PtInsideWödow
(
HWND
 
hwnd
,
UINT
 
x
,UINT 
y
)

10 
RECT
 
˛õ¡Re˘
;

11 
POINT
 
buâ⁄Poöt
;

13 
buâ⁄Poöt
.
x
 = x;

14 
buâ⁄Poöt
.
y
 = y;

16 
	`GëClõ¡Re˘
–
hwnd
, &
˛õ¡Re˘
);

17  
	`PtInRe˘
–&
˛õ¡Re˘
, 
buâ⁄Poöt
);

18 
	}
}

	@mwin/winlib/scrlbar.c

8 
	~<°dio.h
>

9 
	~<°dlib.h
>

10 
	~<°rög.h
>

11 
	#MWINCLUDECOLORS


	)

12 
	~"wödows.h
"

13 
	~"wöã∫.h
"

14 
	~"wötoﬁs.h
"

15 
	~"mwsy°em.h
"

18 #ifde‡
PSP


19 
	#Ârötf
(...Ëdÿ{} 0)

	)

24 
	#SBS_UNKNOWN
 0x0000

	)

25 
	#SBS_LEFTARROW
 0x0001

	)

26 
	#SBS_RIGHTARROW
 0x0002

	)

27 
	#SBS_LEFTSPACE
 0x0004

	)

28 
	#SBS_RIGHTSPACE
 0x0008

	)

29 
	#SBS_HORZTHUMB
 0x0010

	)

30 
	#SBS_UPARROW
 0x0020

	)

31 
	#SBS_DOWNARROW
 0x0040

	)

32 
	#SBS_UPSPACE
 0x0080

	)

33 
	#SBS_DOWNSPACE
 0x0100

	)

34 
	#SBS_VERTTHUMB
 0x0200

	)

35 
	#SBS_MASK
 0x03ff

	)

36 
	#SBS_DISABLED
 0x4000

	)

37 
	#SBS_HIDE
 0x8000

	)

40 
	#MWM_DEFBARLEN
 18

	)

41 
	#MWM_MINBARLEN
 8

	)

43 
LRESULT
 
CALLBACK


44 
S¸ﬁlb¨C⁄åﬁProc
 (
HWND
 
hwnd
, 
UINT
 
mesßge
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
);

47 
WINAPI
 
	$MwRegi°îS¸ﬁlb¨C⁄åﬁ
(
HINSTANCE
 
hIn°™˚
)

49 
WNDCLASS
 
wc
;

51 
wc
.
°yÀ
 = 
CS_HREDRAW
 | 
CS_VREDRAW
 | 
CS_DBLCLKS
 | 
CS_GLOBALCLASS
;

52 
wc
.
Õ‚WndProc
 = (
WNDPROC
)
S¸ﬁlb¨C⁄åﬁProc
;

53 
wc
.
cbClsExåa
 = 0;

54 
wc
.
cbWndExåa
 = 0;

55 
wc
.
hIn°™˚
 = hInstance;

56 
wc
.
hIc⁄
 = 
NULL
;

57 
wc
.
hCurs‹
 = 0;

58 
wc
.
hbrBackground

	`GëStockObje˘
(
WHITE_BRUSH
);

59 
wc
.
ÕszMíuName
 = 
NULL
;

60 
wc
.
ÕszCœssName
= "SCROLLBAR";

62  
	`Regi°îCœss
(&
wc
);

63 
	}
}

65 
DWORD
 
	$GëWödowStyÀ
 (
HWND
 
hwnd
)

67  
hwnd
->
°yÀ
;

68 
	}
}

71 
	$wndGëB‹dî
(
HWND
 
hwnd
)

73 i‡(
hwnd
->
°yÀ
 & 
WS_BORDER
) {

74 i‡((
hwnd
->
°yÀ
 & 
WS_CAPTION
) == WS_CAPTION)

75  
mwSYSMETRICS_CXFRAME
;

76  
mwSYSMETRICS_CXBORDER
;

79 
	}
}

81 
BOOL


82 
	$wndGëVS¸ﬁlB¨Re˘
 (
HWND
 
hwnd
, 
RECT
* 
rcVB¨
)

84 
cx
,
cy
; 
RECT
 
rc
;

85 
MWSCROLLBARINFO
* 
pD©a
;

87 
pD©a
 = (
MWSCROLLBARINFO
 *)
hwnd
->
u£rd©a
;

88 
rc
 = 
hwnd
->
wöª˘
;

89 
cx
=
rc
.
right
-rc.
À·
;

90 
cy
=
rc
.
bŸtom
-rc.
t›
;

92 
rcVB¨
->
À·
 = 
hwnd
->
wöª˘
.
right
 - 
cx


93 - 
	`wndGëB‹dî
 (
hwnd
);

94 
rcVB¨
->
right
 = 
hwnd
->
wöª˘
.righà- 
	`wndGëB‹dî
 (hwnd);

95 
rcVB¨
->
t›
 = 
hwnd
->
wöª˘
.top;

96 
rcVB¨
->
bŸtom
 = 
hwnd
->
wöª˘
.bŸtom - 
	`wndGëB‹dî
 (hwnd);

98  
TRUE
;

99 
	}
}

101 
BOOL


102 
	$wndGëHS¸ﬁlB¨Re˘
 (
HWND
 
hwnd
, 
RECT
* 
rcHB¨
)

104 
cx
,
cy
; 
RECT
 
rc
;

105 
MWSCROLLBARINFO
* 
pD©a
;

107 
pD©a
 = (
MWSCROLLBARINFO
 *)
hwnd
->
u£rd©a
;

108 
rc
 = 
hwnd
->
wöª˘
;

109 
cx
=
rc
.
right
-rc.
À·
;

110 
cy
=
rc
.
bŸtom
-rc.
t›
;

112 
rcHB¨
->
t›
 = 
hwnd
->
wöª˘
.
bŸtom
 - 
cy


113 - 
	`wndGëB‹dî
 (
hwnd
);

114 
rcHB¨
->
bŸtom
 = 
hwnd
->
wöª˘
.bŸtom - 
	`wndGëB‹dî
 (hwnd);

115 
rcHB¨
->
À·
 = 
hwnd
->
wöª˘
.left;

116 
rcHB¨
->
right
 = 
hwnd
->
wöª˘
.righà- 
	`wndGëB‹dî
 (hwnd);

118  
TRUE
;

119 
	}
}

122 
	$MwPaötS¸ﬁlb¨s
(
HWND
 
hwnd
, 
HDC
 
hdc
, 
DWORD
 
°yÀ
)

124 
BOOL
 
vîtb¨
 = (
°yÀ
==
SBS_VERT
);

125 
BOOL
 
h‹zb¨
 = (
°yÀ
==
SBS_HORZ
);

126 
BOOL
 
fGŸDC
 = 
FALSE
;

127 
RECT
 
rc
,
rc2
;

129 
POINT
 
p3
[3];

130 
shrök
=2;

132 
°¨t
 = 0;

133 
RECT
 
rcHB¨
, 
rcVB¨
;

135 
cx
,
cy
;

136 
MWSCROLLBARINFO
* 
pD©a
;

138 
pD©a
 = (
MWSCROLLBARINFO
 *)
hwnd
->
u£rd©a
;

139 
rc
 = 
hwnd
->
wöª˘
;

140 
cx
=
rc
.
right
-rc.
À·
;

141 
cy
=
rc
.
bŸtom
-rc.
t›
;

143 i‡(!
hdc
 && (
h‹zb¨
 || 
vîtb¨
)) {

144 
hdc
 = 
	`GëWödowDC
(
hwnd
);

145 
fGŸDC
 = 
TRUE
;

148 i‡(
vîtb¨
) {

152 
rc2
.
À·
=
rc
.À·;Ñc2.
right
Ùc2.À·+ 
cx
;

153 
rc2
.
t›
=
rc
.top;

154 
rc2
.
bŸtom
Ùc2.
t›
+ 
cx
;

155 
	`FûlRe˘
(
hdc
, &
rc2
, (
HBRUSH
)(
COLOR_BTNFACE
+1));

156 
rc2
.
t›
=
rc
.
bŸtom
- 
cx
;

157 
rc2
.
bŸtom
Ùc2.
t›
+ 
cx
;

158 
	`FûlRe˘
(
hdc
, &
rc2
, (
HBRUSH
)(
COLOR_BTNFACE
+1));

161 
	`Døw3dUpDownSèã
(
hdc
, 
rc
.
À·
,Ñc.
t›
,

162 
cx
, cx,

163 
pD©a
->
°©us
 & 
SBS_UPARROW
);

165 
	`Døw3dUpDownSèã
(
hdc
, 
rc
.
À·
,rc.
bŸtom
-
cx
,

166 
cx
, cx,

167 
pD©a
->
°©us
 & 
SBS_DOWNARROW
);

169 
	`Sñe˘Obje˘
(
hdc
,
	`GëStockObje˘
(
BLACK_BRUSH
));

171 
p3
[0].
x

rc
.
À·
 + (
cx
/2) - 1;

172 
p3
[0].
y

rc
.
t›
 + 2 + 
shrök
;

173 
p3
[1].
x

rc
.
À·
 + 2 + 
shrök
 - 1;

174 
p3
[1].
y

rc
.
t›
 + (
cx
-4Ë- 
shrök
;

175 
p3
[2].
x

rc
.
À·
 + (
cx
-4Ë- 
shrök
;

176 
p3
[2].
y

rc
.
t›
 + (
cx
-4Ë- 
shrök
;

177 
	`Pﬁyg⁄
(
hdc
,
p3
,3);

179 
p3
[0].
x

rc
.
À·
 + (
cx
/2) - 1;

180 
p3
[0].
y

rc
.
bŸtom
 - 4 - 
shrök
;

181 
p3
[1].
x

rc
.
À·
 + 2 + 
shrök
 - 1;

182 
p3
[1].
y

rc
.
bŸtom
-
cx
 + 2 + 
shrök
;

183 
p3
[2].
x

rc
.
À·
 + (
cx
-4Ë- 
shrök
;

184 
p3
[2].
y

rc
.
bŸtom
-
cx
 + 2 + 
shrök
;

185 
	`Pﬁyg⁄
(
hdc
,
p3
,3);

189 
	`wndGëVS¸ﬁlB¨Re˘
 (
hwnd
, &
rcVB¨
);

190 
rcVB¨
.
À·
 -- ;

193 
°¨t
 = 
rcVB¨
.
t›
 + 
cx
 + 
pD©a
->
b¨Sèπ
;

195 i‡(
°¨t
 + 
pD©a
->
b¨Lí
 > 
rcVB¨
.
bŸtom
)

196 
°¨t
 = 
rcVB¨
.
bŸtom
 - 
pD©a
->
b¨Lí
;

198 i‡(
pD©a
->
b¨Lí
 == 0)

199 
pD©a
->
b¨Lí
=
rc
.
bŸtom
-rc.
t›
-(
cx
*2);

202 
rc2
.
À·
=
rc
.À·;Ñc2.
right
=rc.right ;

203 
rc2
.
t›
=
rc
.t›+
cx
;

204 
rc2
.
bŸtom
=
°¨t
;

205 i‡(
rc2
.
bŸtom
>rc2.
t›
)

206 
	`FûlRe˘
(
hdc
, &
rc2
, (
HBRUSH
)
	`GëStockObje˘
(
DKGRAY_BRUSH
));

208 
rc2
.
t›
=
°¨t
+
pD©a
->
b¨Lí
;

209 
rc2
.
bŸtom
=
rc
.bŸtom-
cx
;

210 i‡(
rc2
.
bŸtom
>rc2.
t›
)

211 
	`FûlRe˘
(
hdc
, &
rc2
, (
HBRUSH
)
	`GëStockObje˘
(
DKGRAY_BRUSH
));

213 
	`Døw3dUpFøme
 (
hdc
, 
rcVB¨
.
À·
, 
°¨t
,ÑcVB¨.
right
,

214 
°¨t
 + 
pD©a
->
b¨Lí
);

220 i‡(
h‹zb¨
) {

223 
rc2
.
t›
=
rc
.t›;Ñc2.
bŸtom
Ùc2.t›+ 
cy
;

224 
rc2
.
À·
=
rc
.left;

225 
rc2
.
right
Ùc2.
À·
+ 
cy
;

226 
	`FûlRe˘
(
hdc
, &
rc2
, (
HBRUSH
)(
COLOR_BTNFACE
+1));

227 
rc2
.
À·
=
rc
.
right
- 
cy
;

228 
rc2
.
right
Ùc2.
À·
+ 
cy
;

229 
	`FûlRe˘
(
hdc
, &
rc2
, (
HBRUSH
)(
COLOR_BTNFACE
+1));

232 
	`Døw3dUpDownSèã
(
hdc
, 
rc
.
À·
,Ñc.
t›
,

233 
cy
, cy,

234 
pD©a
->
°©us
 & 
SBS_LEFTARROW
);

236 
	`Døw3dUpDownSèã
(
hdc
, 
rc
.
right
-
cy
,Ñc.
t›
,

237 
cy
, cy,

238 
pD©a
->
°©us
 & 
SBS_RIGHTARROW
);

240 
	`Sñe˘Obje˘
(
hdc
,
	`GëStockObje˘
(
BLACK_BRUSH
));

242 
p3
[0].
x

rc
.
À·
 + 2 + 
shrök
;

243 
p3
[0].
y

rc
.
t›
 + (
cy
/2) ;

244 
p3
[1].
x

rc
.
À·
 + (
cy
-4Ë- 
shrök
 ;

245 
p3
[1].
y

rc
.
t›
 + 2 + 
shrök
;

246 
p3
[2].
x

rc
.
À·
 + (
cy
-4Ë- 
shrök
;

247 
p3
[2].
y

rc
.
bŸtom
 - 4 - 
shrök
 + 1;

248 
	`Pﬁyg⁄
(
hdc
,
p3
,3);

250 
p3
[0].
x

rc
.
right
 - 4 - 
shrök
;

251 
p3
[0].
y

rc
.
t›
 + (
cy
/2) ;

252 
p3
[1].
x

rc
.
right
-
cy
 + 2 + 
shrök
 ;

253 
p3
[1].
y

rc
.
t›
 + 2 + 
shrök
;

254 
p3
[2].
x

rc
.
right
-
cy
 + 2 + 
shrök
;

255 
p3
[2].
y

rc
.
bŸtom
 - 4 - 
shrök
 + 1;

256 
	`Pﬁyg⁄
(
hdc
,
p3
,3);

260 
	`wndGëHS¸ﬁlB¨Re˘
 (
hwnd
, &
rcHB¨
);

261 
rcHB¨
.
t›
 -- ;

264 
°¨t
 = 
rcHB¨
.
À·
 + 
cy
 + 
pD©a
->
b¨Sèπ
;

266 i‡(
°¨t
 + 
pD©a
->
b¨Lí
 > 
rcHB¨
.
right
)

267 
°¨t
 = 
rcHB¨
.
right
 - 
pD©a
->
b¨Lí
;

269 i‡(
pD©a
->
b¨Lí
 == 0)

270 
pD©a
->
b¨Lí
=
rc
.
right
-rc.
À·
-(
cy
*2);

273 
rc2
.
t›
=
rc
.t›;Ñc2.
bŸtom
=rc.bottom ;

274 
rc2
.
À·
=
rc
.À·+
cy
;

275 
rc2
.
right
=
°¨t
;

276 i‡(
rc2
.
right
>rc2.
À·
)

277 
	`FûlRe˘
(
hdc
, &
rc2
, (
HBRUSH
)
	`GëStockObje˘
(
DKGRAY_BRUSH
));

279 
rc2
.
À·
=
°¨t
+
pD©a
->
b¨Lí
;

280 
rc2
.
right
=
rc
.right-
cy
;

281 i‡(
rc2
.
right
>rc2.
À·
)

282 
	`FûlRe˘
(
hdc
, &
rc2
, (
HBRUSH
)
	`GëStockObje˘
(
DKGRAY_BRUSH
));

284 
	`Døw3dUpFøme
 (
hdc
, 
°¨t
, 
rcHB¨
.
t›
, sèπ + 
pD©a
->
b¨Lí
,

285 
rcHB¨
.
bŸtom
);

291 i‡(
fGŸDC
)

292 
	`Rñó£DC
(
hwnd
, 
hdc
);

293 
	}
}

297 
	$MwH™dÀMesßgeS¸ﬁlb¨
(
HWND
 
hwnd
, 
WPARAM
 
hôcode
, 
LPARAM
 
lP¨am
, 
UINT
 
msg
, 
DWORD
 
°yÀ
)

299 
pos
 = 
SBS_UNKNOWN
;

300 
BOOL
 
vîtb¨
 = (
°yÀ
==
SBS_VERT
);

301 
BOOL
 
h‹zb¨
 = (
°yÀ
==
SBS_HORZ
);

302 * 
pSèt
;

303 
POINT
 
±
;

304 
RECT
 
rc
;

306 
BOOL
 
bDøw
;

308 
downPos
 = 
SBS_UNKNOWN
;

309 
sbCode
;

310 
√wThumbPos
;

312 
ôemMovóbÀ
,
ôemCou¡
,
ôemVisibÀ
,
moveR™ge
;

313 
moveT›
,
moveBŸtom
,
moveLe·
,
moveRight
;

315 
cx
,
cy
;

316 
MWSCROLLBARINFO
* 
pD©a
;

318 
pD©a
 = (
MWSCROLLBARINFO
 *)
hwnd
->
u£rd©a
;

319 
rc
 = 
hwnd
->
wöª˘
;

320 
cx
=
rc
.
right
-rc.
À·
;

321 
cy
=
rc
.
bŸtom
-rc.
t›
;

323 
	`POINTSTOPOINT
(
±
, 
lP¨am
);

325 i‡(
vîtb¨
)

327 
pSèt
 = &
pD©a
->
°©us
;

328 
rc
 = 
hwnd
->
wöª˘
;

329 
rc
.
bŸtom
 =Ñc.
t›
 + 
cx
;

330 i‡(
	`PtInRe˘
(&
rc
, 
±
))

332 
pos
 = 
SBS_UPARROW
;

335 
rc
.
bŸtom
 = 
hwnd
->
wöª˘
.bottom;

336 
rc
.
t›
 =Ñc.
bŸtom
 - 
cx
;

337 i‡(
	`PtInRe˘
(&
rc
, 
±
))

339 
pos
 = 
SBS_DOWNARROW
;

342 
pos
 = 
SBS_VERTTHUMB
;

343 } i‡(
h‹zb¨
)

345 
pSèt
 = &
pD©a
->
°©us
;

346 
rc
 = 
hwnd
->
wöª˘
;

347 
rc
.
right
 =Ñc.
À·
 + 
cy
;

348 i‡(
	`PtInRe˘
(&
rc
, 
±
)) {

349 
pos
 = 
SBS_LEFTARROW
;

352 
rc
.
right
 = 
hwnd
->
wöª˘
.right;

353 
rc
.
À·
 =Ñc.
right
 - 
cy
;

354 i‡(
	`PtInRe˘
(&
rc
, 
±
)) {

355 
pos
 = 
SBS_RIGHTARROW
;

358 
pos
 = 
SBS_HORZTHUMB
;

364 i‡(
pos
 =
SBS_UNKNOWN
)

367 *
pSèt
 &~
SBS_MASK
;

369 i‡(
msg
 =
WM_NCLBUTTONDOWN
 || msg =
WM_NCLBUTTONDBLCLK
)

370 *
pSèt
 |
pos
;

371 *
pSèt
 &~
pos
;

373 i‡(
msg
 =
WM_NCLBUTTONDOWN
 || msg =
WM_NCLBUTTONDBLCLK
)

374 
bDøw
=
TRUE
;

376 i‡(
bDøw
)

377 
	`MwPaötS¸ﬁlb¨s
(
hwnd
, 
NULL
,
°yÀ
);

379 i‡(
pos
 =
SBS_UPARROW
 ||Öo†=
SBS_LEFTARROW
)

381 i‡(
pD©a
->
curPos
 !pD©a->
möPos
)

382 
sbCode
 = 
SB_LINEUP
;

384 i‡(
pos
 =
SBS_DOWNARROW
 ||Öo†=
SBS_RIGHTARROW
)

386 i‡(
pD©a
->
curPos
 !pD©a->
maxPos
)

387 
sbCode
 = 
SB_LINEDOWN
;

389 i‡(
pos
 =
SBS_VERTTHUMB
 ||Öo†=
SBS_HORZTHUMB
)

391 
sbCode
 = 
SB_THUMBTRACK
;

394 
msg
)

396 
WM_NCLBUTTONDOWN
:

397 
WM_NCLBUTTONDBLCLK
:

398 
downPos
 = 
pos
;

401 
WM_NCMOUSEMOVE
:

402 i‡(
vîtb¨
)

404 i‡(
sbCode
 =
SB_THUMBTRACK
 && 
downPos
 =
SBS_VERTTHUMB
)

408 
rc
 = 
hwnd
->
wöª˘
;

409 
moveT›
 = 
rc
.
t›
 + 
cx
;

410 
moveBŸtom
 = 
hwnd
->
wöª˘
.
bŸtom
 - 
cx
;

411 
moveR™ge
 = 
moveBŸtom
 - 
moveT›
;

413 
ôemCou¡
 = 
pD©a
->
maxPos
 -ÖD©a->
möPos
 + 1;

414 
ôemVisibÀ
 = 
pD©a
->
∑geSãp
;

415 
ôemMovóbÀ
 = 
ôemCou¡
 - 
ôemVisibÀ
 + 1;

417 
√wThumbPos
 = ((
±
.
y
 - 
moveT›
Ë* 
ôemMovóbÀ
Ë/ 
moveR™ge
;

418 
	`¥ötf
("((%d-%d)*%d)/%d=%d\n",

419 
±
.
y
,
moveT›
,
ôemMovóbÀ
,
moveR™ge
,
√wThumbPos
);

421 i‡–
√wThumbPos
 >
pD©a
->
möPos
 &&

422 
√wThumbPos
 <
pD©a
->
maxPos
)

424 
	`SídMesßge
 (
hwnd
,

425 
WM_VSCROLL
, 
SB_THUMBTRACK
, 
√wThumbPos
);

427 
	`SídMesßge
 (
	`GëP¨ít
(
hwnd
),

428 
WM_VSCROLL
, 
SB_THUMBTRACK
, 
√wThumbPos
);

433 i‡(
h‹zb¨
)

435 i‡(
sbCode
 =
SB_THUMBTRACK
 && 
downPos
 =
SBS_HORZTHUMB
)

439 
rc
 = 
hwnd
->
wöª˘
;

440 
moveLe·
 = 
rc
.
À·
 + 
cy
;

441 
moveRight
 = 
hwnd
->
wöª˘
.
right
 - 
cy
;

442 
moveR™ge
 = 
moveRight
 - 
moveLe·
;

444 
ôemCou¡
 = 
pD©a
->
maxPos
 -ÖD©a->
möPos
 + 1;

445 
ôemVisibÀ
 = 
pD©a
->
∑geSãp
;

446 
ôemMovóbÀ
 = 
ôemCou¡
 - 
ôemVisibÀ
 + 1;

448 
√wThumbPos
 = ((
±
.
x
 - 
moveLe·
Ë* 
ôemMovóbÀ
Ë/ 
moveR™ge
;

449 
	`¥ötf
("((%d-%d)*%d)/%d=%d\n",

450 
±
.
y
,
moveLe·
,
ôemMovóbÀ
,
moveR™ge
,
√wThumbPos
);

452 i‡–
√wThumbPos
 >
pD©a
->
möPos
 &&

453 
√wThumbPos
 <
pD©a
->
maxPos
)

455 
	`SídMesßge
 (
hwnd
,

456 
WM_HSCROLL
, 
SB_THUMBTRACK
, 
√wThumbPos
);

458 
	`SídMesßge
 (
	`GëP¨ít
(
hwnd
),

459 
WM_HSCROLL
, 
SB_THUMBTRACK
, 
√wThumbPos
);

466 
WM_NCLBUTTONUP
:

467 
bDøw
=
FALSE
;

468 
downPos
 = 
SBS_UNKNOWN
;

470 i‡(
sbCode
==
SB_THUMBTRACK
)

472 i‡(
vîtb¨
)

476 
rc
 = 
hwnd
->
wöª˘
;

477 
moveT›
 = 
rc
.
t›
 + 
cx
;

478 
moveBŸtom
 = 
hwnd
->
wöª˘
.
bŸtom
 - 
cx
;

479 
moveR™ge
 = 
moveBŸtom
 - 
moveT›
;

481 
ôemCou¡
 = 
pD©a
->
maxPos
 -ÖD©a->
möPos
 + 1;

482 
ôemVisibÀ
 = 
pD©a
->
∑geSãp
;

483 
ôemMovóbÀ
 = 
ôemCou¡
 - 
ôemVisibÀ
 + 1;

485 
√wThumbPos
 = ((
±
.
y
 - 
moveT›
Ë* 
ôemMovóbÀ
Ë/ 
moveR™ge
;

486 
	`¥ötf
("((%d-%d)*%d)/%d=%d\n",

487 
±
.
y
,
moveT›
,
ôemMovóbÀ
,
moveR™ge
,
√wThumbPos
);

489 i‡–
√wThumbPos
 >
pD©a
->
möPos
 &&

490 
√wThumbPos
 <
pD©a
->
maxPos
)

492 
	`SídMesßge
 (
hwnd
,

493 
WM_VSCROLL
, 
SB_THUMBTRACK
, 
√wThumbPos
);

495 
	`SídMesßge
 (
	`GëP¨ít
(
hwnd
),

496 
WM_VSCROLL
, 
SB_THUMBTRACK
, 
√wThumbPos
);

500 i‡(
h‹zb¨
)

504 
rc
 = 
hwnd
->
wöª˘
;

505 
moveLe·
 = 
rc
.
À·
 + 
cy
;

506 
moveRight
 = 
hwnd
->
wöª˘
.
right
 - 
cy
;

507 
moveR™ge
 = 
moveRight
 - 
moveLe·
;

509 
ôemCou¡
 = 
pD©a
->
maxPos
 -ÖD©a->
möPos
 + 1;

510 
ôemVisibÀ
 = 
pD©a
->
∑geSãp
;

511 
ôemMovóbÀ
 = 
ôemCou¡
 - 
ôemVisibÀ
 + 1;

513 
√wThumbPos
 = ((
±
.
x
 - 
moveLe·
Ë* 
ôemMovóbÀ
Ë/ 
moveR™ge
;

514 
	`¥ötf
("((%d-%d)*%d)/%d=%d\n",

515 
±
.
y
,
moveLe·
,
ôemMovóbÀ
,
moveR™ge
,
√wThumbPos
);

517 i‡–
√wThumbPos
 >
pD©a
->
möPos
 &&

518 
√wThumbPos
 <
pD©a
->
maxPos
)

520 
	`SídMesßge
 (
hwnd
,

521 
WM_HSCROLL
, 
SB_THUMBTRACK
, 
√wThumbPos
);

523 
	`SídMesßge
 (
	`GëP¨ít
(
hwnd
),

524 
WM_HSCROLL
, 
SB_THUMBTRACK
, 
√wThumbPos
);

531 i‡(
vîtb¨
)

533 
	`SídMesßge
 (
hwnd
, 
WM_VSCROLL
, 
sbCode
, 0);

534 
	`SídMesßge
 (
	`GëP¨ít
(
hwnd
), 
WM_VSCROLL
, 
sbCode
, 0);

536 i‡(
h‹zb¨
)

538 
	`SídMesßge
 (
hwnd
, 
WM_HSCROLL
, 
sbCode
, 0);

539 
	`SídMesßge
 (
	`GëP¨ít
(
hwnd
), 
WM_HSCROLL
, 
sbCode
, 0);

544 
	}
}

547 
BOOL


548 
	$PtInRe˘2
(c⁄° 
RECT
 *
Õrc
, 
x
, 
y
)

550 
POINT
 
p
;

552 
p
.
x
 = x;

553 
p
.
y
 = y;

554  
	`PtInRe˘
(
Õrc
, 
p
);

555 
	}
}

558 
	$wndS¸ﬁlB¨Pos
 (
HWND
 
hwnd
, 
BOOL
 
bIsHB¨
, 
RECT
* 
rcB¨
)

560 
UINT
 
moveR™ge
;

561 
PMWSCROLLBARINFO
 
pSB¨
;

562 
cx
,
cy
;

563 
RECT
 
rc
;

565 
rc
 = 
hwnd
->
wöª˘
;

566 
cx
=
rc
.
right
-rc.
À·
;

567 
cy
=
rc
.
bŸtom
-rc.
t›
;

568 
pSB¨
 = (
MWSCROLLBARINFO
 *)
hwnd
->
u£rd©a
;

570 i‡(
pSB¨
->
möPos
 =pSB¨->
maxPos
) {

571 
pSB¨
->
°©us
 |
SBS_HIDE
;

575 i‡(
bIsHB¨
)

576 
moveR™ge
 = (
rcB¨
->
right
 -ÑcB¨->
À·
Ë- (
cy
 << 1);

578 
moveR™ge
 = (
rcB¨
->
bŸtom
 -ÑcB¨->
t›
Ë- (
cx
 << 1);

581 i‡(
pSB¨
->
∑geSãp
 == 0)

583 
pSB¨
->
b¨Lí
 = 
MWM_DEFBARLEN
;

585 i‡(
pSB¨
->
b¨Lí
 > 
moveR™ge
)

586 
pSB¨
->
b¨Lí
 = 
MWM_MINBARLEN
;

590 
pSB¨
->
b¨Lí
 = 
moveR™ge
 *ÖSB¨->
∑geSãp
 /

591 (
pSB¨
->
maxPos
 -ÖSB¨->
möPos
 + 1);

592 i‡(
pSB¨
->
b¨Lí
 < 
MWM_MINBARLEN
)

593 
pSB¨
->
b¨Lí
 = 
MWM_MINBARLEN
;

596 
pSB¨
->
b¨Sèπ
 = 
moveR™ge
 * (pSB¨->
curPos
 -ÖSB¨->
möPos
) /

597 (
pSB¨
->
maxPos
 -ÖSB¨->
möPos
 + 1);

600 i‡(
pSB¨
->
b¨Sèπ
 +ÖSB¨->
b¨Lí
 > 
moveR™ge
)

601 
pSB¨
->
b¨Sèπ
 = 
moveR™ge
 -ÖSB¨->
b¨Lí
;

604 i‡(
pSB¨
->
b¨Sèπ
 < 0)

605 
pSB¨
->
b¨Sèπ
 = 0;

606 
	}
}

608 
PMWSCROLLBARINFO
 
	$wndGëS¸ﬁlB¨
 (
HWND
 
pWö
)

610 
MWSCROLLBARINFO
* 
pD©a
;

612 
pD©a
 = (
MWSCROLLBARINFO
 *)
pWö
->
u£rd©a
;

614 i‡(!
	`°rcmp
(
pWö
->
pCœss
->
ÕszCœssName
,"SCROLLBAR"))

615  
pD©a
;

617  
NULL
;

618 
	}
}

620 
BOOL
 
	$E«bÀS¸ﬁlB¨Ex
 (
HWND
 
hWnd
, 
iSB¨
, 
BOOL
 
bE«bÀ
)

622 
PMWSCROLLBARINFO
 
pSB¨
;

623 
HWND
 
pWö
;

624 
BOOL
 
bPªvSèã
;

625 
RECT
 
rcB¨
;

627 
DWORD
 
dwStyÀ
;

629 
pWö
 = (
HWND
)
hWnd
;

631 i‡–!(
pSB¨
 = 
	`wndGëS¸ﬁlB¨
 (
pWö
)) )

632  
FALSE
;

634 
bPªvSèã
 = !(
pSB¨
->
°©us
 & 
SBS_DISABLED
);

636 i‡(
bE«bÀ
 && !
bPªvSèã
)

637 
pSB¨
->
°©us
 &~
SBS_DISABLED
;

638 i‡(!
bE«bÀ
 && 
bPªvSèã
)

639 
pSB¨
->
°©us
 |
SBS_DISABLED
;

641  
FALSE
;

643 
dwStyÀ
 = (
	`GëWödowStyÀ
 (
hWnd
Ë& 
SBS_TYPEMASK
);

645 i‡(
dwStyÀ
 =
SBS_VERT
)

647 
	`wndGëVS¸ﬁlB¨Re˘
 (
pWö
, &
rcB¨
);

648 
rcB¨
.
À·
 --;

649 
rcB¨
.
right
 --;

653 
	`wndGëHS¸ﬁlB¨Re˘
 (
pWö
, &
rcB¨
);

654 
rcB¨
.
t›
 --;

655 
rcB¨
.
bŸtom
 --;

658 
	`SídMesßge
 (
hWnd
, 
WM_NCPAINT
, 0, (
LPARAM
)(&
rcB¨
));

660 
	`MwPaötS¸ﬁlb¨s
(
hWnd
,
NULL
,
dwStyÀ
);

663  
TRUE
;

664 
	}
}

666 
BOOL
 
	$GëS¸ﬁlPosEx
 (
HWND
 
hWnd
, 
iSB¨
, * 
pPos
)

668 
PMWSCROLLBARINFO
 
pSB¨
;

669 
HWND
 
pWö
;

671 
pWö
 = (
HWND
)
hWnd
;

673 i‡–!(
pSB¨
 = 
	`wndGëS¸ﬁlB¨
 (
pWö
)) )

674  
FALSE
;

676 *
pPos
 = 
pSB¨
->
curPos
;

677  
TRUE
;

678 
	}
}

680 
BOOL
 
	$GëS¸ﬁlR™geEx
 (
HWND
 
hWnd
, 
iSB¨
, * 
pMöPos
, * 
pMaxPos
)

682 
PMWSCROLLBARINFO
 
pSB¨
;

683 
HWND
 
pWö
;

685 
pWö
 = (
HWND
)
hWnd
;

687 i‡–!(
pSB¨
 = 
	`wndGëS¸ﬁlB¨
 (
pWö
)) )

688  
FALSE
;

690 *
pMöPos
 = 
pSB¨
->
möPos
;

691 *
pMaxPos
 = 
pSB¨
->
maxPos
;

692  
TRUE
;

693 
	}
}

695 
BOOL
 
	$SëS¸ﬁlPosEx
 (
HWND
 
hWnd
, 
iSB¨
, 
iNewPos
)

697 
PMWSCROLLBARINFO
 
pSB¨
;

698 
HWND
 
pWö
;

699 
RECT
 
rcB¨
;

701 
DWORD
 
dwStyÀ
;

703 
pWö
 = (
HWND
)
hWnd
;

705 i‡–!(
pSB¨
 = 
	`wndGëS¸ﬁlB¨
 (
pWö
)) )

706  
FALSE
;

708 i‡(
iNewPos
 < 
pSB¨
->
möPos
)

709 
pSB¨
->
curPos
 =ÖSB¨->
möPos
;

711 
pSB¨
->
curPos
 = 
iNewPos
;

714 
max
 = 
pSB¨
->
maxPos
;

715 
max
 -((
pSB¨
->
∑geSãp
 - 1) > 0)?(pSBar->pageStep - 1):0;

717 i‡(
pSB¨
->
curPos
 > 
max
)

718 
pSB¨
->
curPos
 = 
max
;

721 
dwStyÀ
 = (
	`GëWödowStyÀ
 (
hWnd
Ë& 
SBS_TYPEMASK
);

723 i‡(
dwStyÀ
 =
SBS_VERT
)

725 
	`wndGëVS¸ﬁlB¨Re˘
 (
pWö
, &
rcB¨
);

726 
rcB¨
.
À·
 --;

727 
rcB¨
.
right
 --;

731 
	`wndGëHS¸ﬁlB¨Re˘
 (
pWö
, &
rcB¨
);

732 
rcB¨
.
t›
 --;

733 
rcB¨
.
bŸtom
 --;

736 
	`wndS¸ﬁlB¨Pos
 (
pWö
, 
dwStyÀ
 =
SBS_HORZ
, &
rcB¨
);

739 
	`SídMesßge
 (
hWnd
, 
WM_NCPAINT
, 0, (
LPARAM
)(&
rcB¨
));

741 
	`MwPaötS¸ﬁlb¨s
(
hWnd
,
NULL
,
dwStyÀ
);

743  
TRUE
;

744 
	}
}

746 
BOOL
 
	$SëS¸ﬁlR™geEx
 (
HWND
 
hWnd
, 
iSB¨
, 
iMöPos
, 
iMaxPos
)

748 
PMWSCROLLBARINFO
 
pSB¨
;

749 
HWND
 
pWö
;

750 
RECT
 
rcB¨
;

752 
DWORD
 
dwStyÀ
;

754 
pWö
 = (
HWND
)
hWnd
;

756 i‡–!(
pSB¨
 = 
	`wndGëS¸ﬁlB¨
 (
pWö
)) )

757  
FALSE
;

759 
pSB¨
->
möPos
 = (
iMöPos
 < 
iMaxPos
)?iMinPos:iMaxPos;

760 
pSB¨
->
maxPos
 = (
iMöPos
 > 
iMaxPos
)?iMinPos:iMaxPos;

763 i‡(
pSB¨
->
curPos
 <ÖSB¨->
möPos
)

764 
pSB¨
->
curPos
 =ÖSB¨->
möPos
;

766 i‡(
pSB¨
->
∑geSãp
 <= 0)

767 
pSB¨
->
∑geSãp
 = 0;

768 i‡(
pSB¨
->
∑geSãp
 > (pSB¨->
maxPos
 -ÖSB¨->
möPos
 + 1))

769 
pSB¨
->
∑geSãp
 =ÖSB¨->
maxPos
 -ÖSB¨->
möPos
 + 1;

772 
max
 = 
pSB¨
->
maxPos
;

773 
max
 -((
pSB¨
->
∑geSãp
 - 1) > 0)?(pSBar->pageStep - 1):0;

775 i‡(
pSB¨
->
curPos
 > 
max
)

776 
pSB¨
->
curPos
 = 
max
;

779 
dwStyÀ
 = (
	`GëWödowStyÀ
 (
hWnd
Ë& 
SBS_TYPEMASK
);

781 i‡(
dwStyÀ
 =
SBS_VERT
)

783 
	`wndGëVS¸ﬁlB¨Re˘
 (
pWö
, &
rcB¨
);

784 
rcB¨
.
À·
 --;

785 
rcB¨
.
right
 --;

789 
	`wndGëHS¸ﬁlB¨Re˘
 (
pWö
, &
rcB¨
);

790 
rcB¨
.
t›
 --;

791 
rcB¨
.
bŸtom
 --;

793 
	`wndS¸ﬁlB¨Pos
 (
pWö
, 
dwStyÀ
 =
SBS_HORZ
, &
rcB¨
);

796 
	`SídMesßge
 (
hWnd
, 
WM_NCPAINT
, 0, (
LPARAM
)(&
rcB¨
));

798 
	`MwPaötS¸ﬁlb¨s
(
hWnd
,
NULL
,
dwStyÀ
);

801  
TRUE
;

802 
	}
}

804 
BOOL
 
	$SëS¸ﬁlInfoEx
 (
HWND
 
hWnd
, 
iSB¨
,

805 
LPCSCROLLINFO
 
Õsi
, 
BOOL
 
fRedøw
)

807 
PMWSCROLLBARINFO
 
pSB¨
;

808 
HWND
 
pWö
;

809 
RECT
 
rcB¨
;

811 
DWORD
 
dwStyÀ
;

813 
pWö
 = (
HWND
)
hWnd
;

815 i‡–!(
pSB¨
 = 
	`wndGëS¸ﬁlB¨
 (
pWö
)) )

816  
FALSE
;

818 if–
Õsi
->
fMask
 & 
SIF_RANGE
 )

820 
pSB¨
->
möPos
 = (
Õsi
->
nMö
 <Üpsi->
nMax
)?lpsi->nMin:lpsi->nMax;

821 
pSB¨
->
maxPos
 = (
Õsi
->
nMö
 <Üpsi->
nMax
)?lpsi->nMax:lpsi->nMin;

824 if–
Õsi
->
fMask
 & 
SIF_POS
 )

825 
pSB¨
->
curPos
 = 
Õsi
->
nPos
;

827 if–
Õsi
->
fMask
 & 
SIF_PAGE
 )

828 
pSB¨
->
∑geSãp
 = 
Õsi
->
nPage
;

831 i‡(
pSB¨
->
curPos
 <ÖSB¨->
möPos
)

832 
pSB¨
->
curPos
 =ÖSB¨->
möPos
;

834 i‡(
pSB¨
->
∑geSãp
 <= 0)

835 
pSB¨
->
∑geSãp
 = 0;

836 i‡(
pSB¨
->
∑geSãp
 > (pSB¨->
maxPos
 -ÖSB¨->
möPos
 + 1))

837 
pSB¨
->
∑geSãp
 =ÖSB¨->
maxPos
 -ÖSB¨->
möPos
 + 1;

840 
max
 = 
pSB¨
->
maxPos
;

841 
max
 -((
pSB¨
->
∑geSãp
 - 1) > 0)?(pSBar->pageStep - 1):0;

843 i‡(
pSB¨
->
curPos
 > 
max
)

844 
pSB¨
->
curPos
 = 
max
;

847 
dwStyÀ
 = (
	`GëWödowStyÀ
 (
hWnd
Ë& 
SBS_TYPEMASK
);

849 if(
fRedøw
)

851 i‡(
dwStyÀ
 =
SBS_VERT
)

853 
	`wndGëVS¸ﬁlB¨Re˘
 (
pWö
, &
rcB¨
);

854 
rcB¨
.
À·
 --;

855 
rcB¨
.
right
 --;

859 
	`wndGëHS¸ﬁlB¨Re˘
 (
pWö
, &
rcB¨
);

860 
rcB¨
.
t›
 --;

861 
rcB¨
.
bŸtom
 --;

863 
	`wndS¸ﬁlB¨Pos
 (
pWö
, 
dwStyÀ
 =
SBS_HORZ
, &
rcB¨
);

866 
	`SídMesßge
 (
hWnd
, 
WM_NCPAINT
, 0, (
LPARAM
)(&
rcB¨
));

868 
	`MwPaötS¸ﬁlb¨s
(
hWnd
,
NULL
,
dwStyÀ
);

872  
TRUE
;

873 
	}
}

875 
BOOL
 
	$GëS¸ﬁlInfoEx
(
HWND
 
hWnd
, 
iSB¨
, 
LPSCROLLINFO
 
Õsi
)

877 
PMWSCROLLBARINFO
 
pSB¨
;

878 
HWND
 
pWö
;

880 
pWö
 = (
HWND
)
hWnd
;

882 i‡–!(
pSB¨
 = 
	`wndGëS¸ﬁlB¨
 (
pWö
)) )

883  
FALSE
;

885 if–
Õsi
->
fMask
 & 
SIF_RANGE
 )

887 
Õsi
->
nMö
 = 
pSB¨
->
möPos
;

888 
Õsi
->
nMax
 = 
pSB¨
->
maxPos
;

891 if–
Õsi
->
fMask
 & 
SIF_POS
 )

893 
Õsi
->
nPos
 = 
pSB¨
->
curPos
;

896 if–
Õsi
->
fMask
 & 
SIF_PAGE
 )

897 
Õsi
->
nPage
 = 
pSB¨
->
∑geSãp
;

899  
TRUE
;

900 
	}
}

902 
BOOL
 
	$ShowS¸ﬁlB¨Ex
 (
HWND
 
hWnd
, 
iSB¨
, 
BOOL
 
bShow
)

904 
PMWSCROLLBARINFO
 
pSB¨
;

905 
HWND
 
pWö
;

906 
BOOL
 
bPªvSèã
;

907 
RECT
 
rcB¨
;

909 
DWORD
 
dwStyÀ
;

911 
pWö
 = (
HWND
)
hWnd
;

913 i‡–!(
pSB¨
 = 
	`wndGëS¸ﬁlB¨
 (
pWö
)) )

914  
FALSE
;

916 
bPªvSèã
 = !(
pSB¨
->
°©us
 & 
SBS_HIDE
);

918 i‡(
bShow
 && !
bPªvSèã
)

919 
pSB¨
->
°©us
 &~
SBS_HIDE
;

920 i‡(!
bShow
 && 
bPªvSèã
)

921 
pSB¨
->
°©us
 |
SBS_HIDE
;

923  
FALSE
;

926 
	`SídMesßge
 (
hWnd
, 
WM_CHANGESIZE
, 0, 0);

929 
dwStyÀ
 = (
	`GëWödowStyÀ
 (
hWnd
Ë& 
SBS_TYPEMASK
);

931 i‡(
dwStyÀ
 =
SBS_VERT
)

932 
	`wndGëVS¸ﬁlB¨Re˘
 (
pWö
, &
rcB¨
);

934 
	`wndGëHS¸ﬁlB¨Re˘
 (
pWö
, &
rcB¨
);

937 
RECT
 
rcWö
, 
rcClõ¡
;

939 
	`mem˝y
 (&
rcWö
, &
pWö
->
wöª˘
.
À·
,  (
RECT
));

941 
rcClõ¡
.
À·
 = 0;

942 
rcClõ¡
.
t›
 = 0;

943 
rcClõ¡
.
right
 = 
pWö
->
˛úe˘
.righà-ÖWö->˛úe˘.
À·
;

944 
rcClõ¡
.
bŸtom
 = 
pWö
->
˛úe˘
.bŸtom -ÖWö->˛úe˘.
t›
;

946 
	`SídMesßge
 (
hWnd
, 
WM_SIZECHANGED
,

947 (
WPARAM
)&
rcWö
, (
LPARAM
)&
rcClõ¡
);

951 i‡(
bShow
) {

952 
	`SídMesßge
 (
hWnd
, 
WM_NCPAINT
, 0, 0);

955 
rcB¨
.
À·
 -
pWö
->
˛úe˘
.left;

956 
rcB¨
.
t›
 -
pWö
->
˛úe˘
.top;

957 
rcB¨
.
right
 -
pWö
->
˛úe˘
.
À·
;

958 
rcB¨
.
bŸtom
 -
pWö
->
˛úe˘
.
t›
;

959 
	`SídMesßge
 (
hWnd
, 
WM_NCPAINT
, 0, 0);

960 
	`InvÆid©eRe˘
 (
hWnd
, &
rcB¨
, 
TRUE
);

963  
TRUE
;

964 
	}
}

966 
	$sbSëS¸ﬁlInfo
 (
HWND
 
hwnd
, 
PMWSCROLLBARINFO
 
pD©a
, 
BOOL
 
fRedøw
)

968 
SCROLLINFO
 
si
;

970 
ôemCou¡
,
ôemVisibÀs
;

972 
ôemCou¡
 = 
pD©a
->
maxPos
 -ÖD©a->
möPos
 + 1;

973 
ôemVisibÀs
 = 
pD©a
->
∑geSãp
;

975 i‡(
ôemVisibÀs
 >
ôemCou¡
)

977 
	`SëS¸ﬁlPosEx
 (
hwnd
, 0, 0);

978 
	`E«bÀS¸ﬁlB¨Ex
 (
hwnd
, 0, 
FALSE
);

982 
si
.
fMask
 = 
SIF_RANGE
 | 
SIF_PAGE
 | 
SIF_POS
;

983 
si
.
nMax
 = 
ôemCou¡
 - 1;

984 
si
.
nMö
 = 0;

986 
si
.
nPage
 = 
ôemVisibÀs
;

988 
si
.
nPos
 = 
pD©a
->
curPos
;

990 
	`SëS¸ﬁlInfoEx
 (
hwnd
, 0, &
si
, 
fRedøw
);

991 
	`E«bÀS¸ﬁlB¨Ex
 (
hwnd
, 0, 
TRUE
);

992 
	}
}

994 
LRESULT
 
CALLBACK


995 
	$S¸ﬁlb¨C⁄åﬁProc
 (
HWND
 
hwnd
, 
UINT
 
mesßge
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
)

997 
DWORD
 
dwStyÀ
;

998 
MWSCROLLBARINFO
* 
pD©a
;

1000 
moveR™ge
;

1001 
RECT
 
rcB¨
;

1003 
dwStyÀ
 = (
	`GëWödowStyÀ
 (
hwnd
Ë& 
SBS_TYPEMASK
);

1004 
mesßge
)

1006 
WM_CREATE
:

1007 i‡(!(
pD©a
 = 
	`mÆloc
 ( (
MWSCROLLBARINFO
))))

1009 
	`Ârötf
(
°dîr
, "Create scroll bar control failure!\n");

1013 
pD©a
->
möPos
=0;

1015 
pD©a
->
maxPos
=0;

1016 i‡(
dwStyÀ
==
SBS_VERT
)

1017 
moveR™ge
=((
hwnd
->
wöª˘
.
bŸtom
-hwnd->wöª˘.
t›
)

1018 -((
hwnd
->
wöª˘
.
right
-hwnd->wöª˘.
À·
)<<1));

1020 
moveR™ge
=((
hwnd
->
wöª˘
.
right
-hwnd->wöª˘.
À·
)

1021 -((
hwnd
->
wöª˘
.
bŸtom
-hwnd->wöª˘.
t›
)<<1));

1022 i‡(
moveR™ge
 > 
MWM_MINBARLEN
)

1026 
pD©a
->
maxPos
=
moveR™ge
 / 
MWM_MINBARLEN
;

1027 if–(
moveR™ge
 % 
MWM_MINBARLEN
) )

1028 
pD©a
->
maxPos
++;

1030 
	`¥ötf
("maxPos=%d\n",
pD©a
->
maxPos
);

1032 
pD©a
->
curPos
=0;

1035 
pD©a
->
∑geSãp
=1;

1036 i‡–(
pD©a
->
maxPos
 - 2) > 1)

1037 
pD©a
->
∑geSãp
 =ÖD©a->
maxPos
 - 2;

1038 
	`¥ötf
("∑geSãp=%d\n",
pD©a
->
∑geSãp
);

1040 
pD©a
->
b¨Sèπ
=0;

1041 
pD©a
->
b¨Lí
=
MWM_MINBARLEN
;

1042 
pD©a
->
°©us
=
SBS_UNKNOWN
;

1044 
pD©a
->
rc
=
hwnd
->
wöª˘
;

1046 
hwnd
->
u£rd©a
 = (
DWORD
)
pD©a
;

1048 i‡(
dwStyÀ
 =
SBS_VERT
)

1050 
	`wndGëVS¸ﬁlB¨Re˘
 (
hwnd
, &
rcB¨
);

1051 
rcB¨
.
À·
 --;

1052 
rcB¨
.
right
 --;

1056 
	`wndGëHS¸ﬁlB¨Re˘
 (
hwnd
, &
rcB¨
);

1057 
rcB¨
.
t›
 --;

1058 
rcB¨
.
bŸtom
 --;

1061 
	`wndS¸ﬁlB¨Pos
 (
hwnd
, 
dwStyÀ
 =
SBS_HORZ
, &
rcB¨
);

1065 
WM_DESTROY
:

1066 
	`‰ì
 ((*)(
hwnd
->
u£rd©a
));

1069 
WM_PAINT
:

1070 
	`MwPaötS¸ﬁlb¨s
(
hwnd
,
NULL
,
dwStyÀ
);

1073 
WM_NCLBUTTONDOWN
:

1074 
WM_NCLBUTTONDBLCLK
:

1075 
WM_NCMOUSEMOVE
:

1076 
WM_NCLBUTTONUP
:

1077 
	`MwH™dÀMesßgeS¸ﬁlb¨
(
hwnd
, 
wP¨am
, 
lP¨am
, 
mesßge
, 
dwStyÀ
);

1080 
WM_HSCROLL
:

1081 
WM_VSCROLL
:

1083 
√wT›
,
ôemCou¡
,
ôemVisibÀs
;

1085 
pD©a
 = (
MWSCROLLBARINFO
 *)
hwnd
->
u£rd©a
;

1086 
√wT›
 = 
pD©a
->
curPos
;

1087 
ôemCou¡
 = 
pD©a
->
maxPos
 -ÖD©a->
möPos
 + 1;

1088 
ôemVisibÀs
 = 
pD©a
->
∑geSãp
;

1090 
wP¨am
)

1092 
SB_LINEDOWN
:

1093 
	#ITEM_BOTTOM
(
x
Ë(x->
curPos
 + 
ôemVisibÀs
 - 1)

	)

1094 i‡(
	`ITEM_BOTTOM
 (
pD©a
Ë< (
ôemCou¡
 - 1 ))

1096 
√wT›
 ++;

1100 
SB_LINEUP
:

1101 i‡(
pD©a
->
curPos
 > 0)

1103 
√wT›
 --;

1107 
SB_PAGEDOWN
:

1108 i‡((
pD©a
->
curPos
 + (
ôemVisibÀs
 << 1)) <=

1109 
ôemCou¡
)

1110 
√wT›
 +
ôemVisibÀs
;

1112 
√wT›
 = 
ôemCou¡
 - 
ôemVisibÀs
;

1114 i‡(
√wT›
 < 0)

1119 
SB_PAGEUP
:

1120 i‡(
pD©a
->
curPos
 >
ôemVisibÀs
)

1121 
√wT›
 -
ôemVisibÀs
;

1123 
√wT›
 = 0;

1127 
SB_THUMBTRACK
:

1128 
√wT›
 = ()
lP¨am
;

1132 
pD©a
->
curPos
 = 
√wT›
;

1134 
	`SídMesßge
 (
hwnd
, 
WM_PAINT
, 0, 0);

1136 
	`sbSëS¸ﬁlInfo
 (
hwnd
, 
pD©a
, 
TRUE
);

1143  
	`DefWödowProc
 (
hwnd
, 
mesßge
, 
wP¨am
, 
lP¨am
);

1146 
	}
}

	@mwin/winlib/static.c

45 
	~<°dio.h
>

46 
	~<°dlib.h
>

47 
	~<°rög.h
>

48 
	#MWINCLUDECOLORS


	)

49 
	~"wödows.h
"

50 
	~"wötoﬁs.h
"

51 
	~"devi˚.h
"

54 
	#FONT_NAME
 
SYSTEM_FIXED_FONT


	)

56 
LRESULT
 
CALLBACK


57 
SèticC⁄åﬁProc
 (
HWND
 
hwnd
, 
UINT
 
mesßge
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
);

59 
WINAPI
 
	$MwRegi°îSèticC⁄åﬁ
(
HINSTANCE
 
hIn°™˚
)

61 
WNDCLASS
 
wc
;

63 
wc
.
°yÀ
 = 
CS_HREDRAW
 | 
CS_VREDRAW
 | 
CS_DBLCLKS
 | 
CS_GLOBALCLASS
;

64 
wc
.
Õ‚WndProc
 = (
WNDPROC
)
SèticC⁄åﬁProc
;

65 
wc
.
cbClsExåa
 = 0;

66 
wc
.
cbWndExåa
 = 0;

67 
wc
.
hIn°™˚
 = hInstance;

68 
wc
.
hIc⁄
 = 
NULL
;

69 
wc
.
hCurs‹
 = 0;

70 
wc
.
hbrBackground

	`GëStockObje˘
(
WHITE_BRUSH
);

71 
wc
.
ÕszMíuName
 = 
NULL
;

72 
wc
.
ÕszCœssName
= "STATIC";

74  
	`Regi°îCœss
(&
wc
);

75 
	}
}

78 
	#RECTW
(
rc
Ë‘c.
right
-rc.
À·
)

	)

79 
	#RECTH
(
rc
Ë‘c.
bŸtom
-rc.
t›
)

	)

81 
DWORD
 
	$GëWödowStyÀ
 (
HWND
 
hwnd
)

83  
hwnd
->
°yÀ
;

84 
	}
}

86 
COLORREF
 
	$GëWödowBkCﬁ‹
 (
HWND
 
hwnd
)

88 
MWBRUSHOBJ
 *
hbr
;

89 
hbr
=(
MWBRUSHOBJ
 *)
hwnd
->
pCœss
->
hbrBackground
;

90  
hbr
->
cﬁ‹
;

91 
	}
}

93 *
	$GëWödowC≠ti⁄
 (
HWND
 
hwnd
)

95  
hwnd
->
szTôÀ
;

96 
	}
}

98 
	$SëWödowC≠ti⁄
 (
HWND
 
hwnd
,*
ˇ±i⁄
)

100 i‡(
	`°æí
(
ˇ±i⁄
)<=63)

101 
	`°r˝y
(
hwnd
->
szTôÀ
,
ˇ±i⁄
);

104 
	`°∫˝y
(
hwnd
->
szTôÀ
,
ˇ±i⁄
,63);

105 
hwnd
->
szTôÀ
[63]='\0';

107 
	}
}

109 
	$GëSysCh¨Height
 (
HWND
 
hwnd
)

111 
HDC
 
hdc
;

112 
xw
, 
xh
, 
xb
;

114 
hdc
 = 
	`GëDC
(
hwnd
);

116 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
FONT_NAME
));

118 #i‡
MWCLIENT


119 
	`GrGëGCTextSize
(
hdc
->
gc
, "X", 1, 
MWTF_ASCII
, &
xw
, &
xh
, &
xb
);

121 
	`GdGëTextSize
(
hdc
->
f⁄t
->
pf⁄t
,"X",1, &
xw
,&
xh
,&
xb
,
MWTF_ASCII
);

123 
	`Rñó£DC
(
hwnd
,
hdc
);

125  
xh
;

126 
	}
}

128 
	$GëSysCh¨Width
 (
HWND
 
hwnd
)

130 
HDC
 
hdc
;

131 
xw
, 
xh
, 
xb
;

133 
hdc
 = 
	`GëDC
(
hwnd
);

135 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
FONT_NAME
));

137 #i‡
MWCLIENT


138 
	`GrGëGCTextSize
(
hdc
->
gc
, "X", 1, 
MWTF_ASCII
, &
xw
, &
xh
, &
xb
);

140 
	`GdGëTextSize
(
hdc
->
f⁄t
->
pf⁄t
,"X",1, &
xw
,&
xh
,&
xb
,
MWTF_ASCII
);

142 
	`Rñó£DC
(
hwnd
,
hdc
);

144  
xw
;

145 
	}
}

148 
LRESULT
 
CALLBACK


149 
	$SèticC⁄åﬁProc
 (
HWND
 
hwnd
, 
UINT
 
mesßge
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
)

151 
RECT
 
rcClõ¡
;

152 
HDC
 
hdc
;

153 * 
•C≠ti⁄
;

154 
HWND
 
pCål
;

155 
UINT
 
uF‹m©
;

156 
DWORD
 
dwStyÀ
;

158 
pCål
 = 
hwnd
;

159 
mesßge
) {

160 
WM_CREATE
:

163 
WM_DESTROY
:

166 
STM_GETIMAGE
:

167  ()(
pCål
->
u£rd©a
);

169 
STM_SETIMAGE
:

171 
pOldVÆue
;

173 
pOldVÆue
 = ()(
pCål
->
u£rd©a
);

174 
pCål
->
u£rd©a
 = (
DWORD
)
wP¨am
;

175 
	`InvÆid©eRe˘
 (
hwnd
, 
NULL
, 
FALSE
);

176  
pOldVÆue
;

179 
WM_GETDLGCODE
:

180  
DLGC_STATIC
;

183 
WM_PAINT
:

185 
PAINTSTRUCT
 
ps
;

186 
RECT
 
rc
;

187 
HBRUSH
 
hbr
;

189 
hdc
 = 
	`BegöPaöt
 (
hwnd
,&
ps
);

191 
	`GëClõ¡Re˘
 (
hwnd
, &
rcClõ¡
);

193 
	`Fa°FûlRe˘
(
hdc
, &
rcClõ¡
, 
	`GëSysCﬁ‹
(
COLOR_BTNFACE
));

195 
dwStyÀ
 = 
	`GëWödowStyÀ
 (
hwnd
);

197 
dwStyÀ
 & 
SS_TYPEMASK
)

199 
SS_GRAYRECT
:

201 
	`SëBrushCﬁ‹
 (
hdc
, 
LTGRAY
);

202 
	`FûlBox
(
hdc
, 0, 0, 
	`RECTW
(
rcClõ¡
), 
	`RECTH
(rcClient));

204 
rc
.
À·
=0;Ñc.
t›
=0;Ñc.
bŸtom
=
	`RECTH
(
rcClõ¡
);Ñc.
right
=
	`RECTW
(rcClient);

205 
	`FûlRe˘
(
hdc
,&
rc
,
	`GëStockObje˘
(
LTGRAY_BRUSH
));

209 
SS_GRAYFRAME
:

211 
	`Døw3DDownFøme
 (
hdc
,

212 0, 0, 
rcClõ¡
.
right
,ÑcClõ¡.
bŸtom
,

213 
DKGRAY
);

215 
	`Døw3dIn£t
(
hdc
, 0, 0,

216 
rcClõ¡
.
right
,ÑcClõ¡.
bŸtom
);

220 
SS_BITMAP
:

222 
	`FûlBoxWôhBôm≠
(
hdc
, 0, 0, 0, 0,

223 (
PBITMAP
)(
pCål
->
u£rd©a
));

227 
SS_ICON
:

229 
hIc⁄
 = (
HICON
)(
pCål
->
u£rd©a
);

230 
	`DøwIc⁄
 (
hdc
, 0, 0, 0, 0, 
hIc⁄
);

234 
SS_SIMPLE
:

236 
	`SëBrushCﬁ‹
 (
hdc
, 
	`GëWödowBkCﬁ‹
 (
hwnd
));

237 
	`FûlBox
 (
hdc
, 0, 0, 
rcClõ¡
.
right
,ÑcClõ¡.
bŸtom
);

239 
hbr
=
	`Cª©eSﬁidBrush
(
	`GëWödowBkCﬁ‹
(
hwnd
));

240 
rc
.
À·
=0;Ñc.
t›
=0;Ñc.
bŸtom
=
rcClõ¡
.bŸtom;Ñc.
right
=rcClient.right;

241 
	`FûlRe˘
(
hdc
,&
rc
,
hbr
);

242 
	`DñëeObje˘
(
hbr
);

244 i‡(
dwStyÀ
 & 
WS_DISABLED
)

245 
	`SëTextCﬁ‹
 (
hdc
, 
DKGRAY
);

247 
	`SëTextCﬁ‹
 (
hdc
, 
BLACK
);

248 
	`SëBkCﬁ‹
(
hdc
, 
	`GëSysCﬁ‹
(
COLOR_BTNFACE
));

249 
•C≠ti⁄
 = 
	`GëWödowC≠ti⁄
 (
hwnd
);

250 i‡(
•C≠ti⁄
)

252 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
FONT_NAME
));

253 
	`TextOut
 (
hdc
, 0, 0, 
•C≠ti⁄
, -1);

257 
SS_LEFT
:

258 
SS_CENTER
:

259 
SS_RIGHT
:

260 
SS_LEFTNOWORDWRAP
:

261 
uF‹m©
 = 
DT_TOP
;

262 i‡–(
dwStyÀ
 & 
SS_TYPEMASK
Ë=
SS_LEFT
)

263 
uF‹m©
 |
DT_LEFT
 | 
DT_WORDBREAK
;

264 i‡–(
dwStyÀ
 & 
SS_TYPEMASK
Ë=
SS_CENTER
)

265 
uF‹m©
 |
DT_CENTER
 | 
DT_WORDBREAK
;

266 i‡–(
dwStyÀ
 & 
SS_TYPEMASK
Ë=
SS_RIGHT
)

267 
uF‹m©
 |
DT_RIGHT
 | 
DT_WORDBREAK
;

268 i‡–(
dwStyÀ
 & 
SS_TYPEMASK
Ë=
SS_LEFTNOWORDWRAP
)

269 
uF‹m©
 |
DT_LEFT
 | 
DT_SINGLELINE
 | 
DT_EXPANDTABS
;

271 i‡(
dwStyÀ
 & 
WS_DISABLED
)

272 
	`SëTextCﬁ‹
 (
hdc
, 
DKGRAY
);

274 
	`SëTextCﬁ‹
 (
hdc
, 
BLACK
);

277 
	`SëBkCﬁ‹
 (
hdc
, 
	`GëWödowBkCﬁ‹
 (
hwnd
));

279 
	`SëBkCﬁ‹
(
hdc
, 
	`GëSysCﬁ‹
(
COLOR_BTNFACE
));

280 
•C≠ti⁄
 = 
	`GëWödowC≠ti⁄
 (
hwnd
);

281 i‡(
dwStyÀ
 & 
SS_NOPREFIX
)

282 
uF‹m©
 |
DT_NOPREFIX
;

284 i‡(
•C≠ti⁄
)

286 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
FONT_NAME
));

287 
	`DøwText
 (
hdc
, 
•C≠ti⁄
, -1, &
rcClõ¡
, 
uF‹m©
);

291 
SS_GROUPBOX
:

293 
	`Døw3DB‹dî
 (
hdc
, 
rcClõ¡
.
À·
,

294 
rcClõ¡
.
t›
 + (
	`GëSysCh¨Height
(
hwnd
) >> 1),

295 
rcClõ¡
.
right
,ÑcClõ¡.
bŸtom
);

297 
	`Døw3dIn£t
(
hdc
, 
rcClõ¡
.
À·
,

298 
rcClõ¡
.
t›
+(
	`GëSysCh¨Height
(
hwnd
) >> 1),

299 
rcClõ¡
.
right
-rcClõ¡.
À·
,

300 
rcClõ¡
.
bŸtom
-rcClõ¡.
t›
);

302 i‡(
dwStyÀ
 & 
WS_DISABLED
)

303 
	`SëTextCﬁ‹
 (
hdc
, 
DKGRAY
);

305 
	`SëTextCﬁ‹
 (
hdc
, 
BLACK
);

308 
	`SëBkCﬁ‹
(
hdc
, 
	`GëWödowBkCﬁ‹
 (
	`GëP¨ít
 (
hwnd
)));

310 
	`SëBkCﬁ‹
(
hdc
, 
	`GëSysCﬁ‹
(
COLOR_BTNFACE
));

311 
•C≠ti⁄
 = 
	`GëWödowC≠ti⁄
 (
hwnd
);

312 i‡(
•C≠ti⁄
)

314 
	`Sñe˘Obje˘
(
hdc
, 
	`GëStockObje˘
(
FONT_NAME
));

315 
	`TextOut
 (
hdc
, 
	`GëSysCh¨Width
 (
hwnd
), 2, 
•C≠ti⁄
, -1);

319 
	`EndPaöt
 (
hwnd
, &
ps
);

324 
WM_LBUTTONDBLCLK
:

325 i‡(
	`GëWödowStyÀ
 (
hwnd
Ë& 
SS_NOTIFY
)

326 
	`SídMesßge
 (
	`GëP¨ít
(
hwnd
), 
WM_COMMAND
,

327 (
WPARAM
)
	`MAKELONG
(
pCål
->
id
, 
STN_DBLCLK
),

328 (
LPARAM
)
hwnd
);

331 
WM_LBUTTONDOWN
:

334 
WM_NCLBUTTONDBLCLK
:

337 
WM_NCLBUTTONDOWN
:

340 
WM_NCHITTEST
:

341 
dwStyÀ
 = 
	`GëWödowStyÀ
 (
hwnd
);

342 i‡((
dwStyÀ
 & 
SS_TYPEMASK
Ë=
SS_GROUPBOX
)

343  
HTTRANSPARENT
;

346 i‡(
	`GëWödowStyÀ
 (
hwnd
Ë& 
SS_NOTIFY
)

347  
HTCLIENT
;

350  
HTNOWHERE
;

355 
WM_GETFONT
:

357 
WM_SETFONT
:

360 
WM_SETTEXT
:

361 
	`SëWödowC≠ti⁄
 (
hwnd
, (*)
lP¨am
);

362 
	`InvÆid©eRe˘
 (
hwnd
, 
NULL
, 
TRUE
);

366  
	`DefWödowProc
 (
hwnd
, 
mesßge
, 
wP¨am
, 
lP¨am
);

369 
	}
}

	@mwin/winmain.c

6 
	~<°dio.h
>

7 
	~<°dlib.h
>

8 
	~<°rög.h
>

9 
	~<sig«l.h
>

12 #ifde‡
PSP


13 
	~<p•kî√l.h
>

14 
	~<p•utûs.h
>

15 
	#exô
(...Ë
	`s˚Kî√lExôGame
()

	)

16 
	#¥ötf
 
p•DebugS¸ìnPrötf


	)

19 #i‚de‡
__PACIFIC__


20 
	~<î∫o.h
>

21 
	~<sys/ty≥s.h
>

24 #i‡
UNIX
 | 
DOS_DJGPP


25 
	~<uni°d.h
>

26 #i‡
_MINIX


27 
	~<sys/times.h
>

29 
	~<sys/time.h
>

33 #i‡
ELKS


34 
	~<löuxmt/posix_ty≥s.h
>

35 
	~<löuxmt/time.h
>

38 #i‡
RTEMS


39 
	~<πems/mw_uid.h
>

42 
	~"wödows.h
"

43 
	~"wöã∫.h
"

44 
	~"devi˚.h
"

49 
HWND
 
	gli°wp
;

50 
HWND
 
	groŸwp
;

51 
HWND
 
	gfocuswp
;

52 
HWND
 
	gmou£wp
;

53 
HWND
 
	gˇ±uªwp
;

54 
HWND
 
	gdøgwp
;

55 
HCURSOR
 
	gcurcurs‹
;

56 
MWCOORD
 
	gcurs‹x
;

57 
MWCOORD
 
	gcurs‹y
;

58 
DWORD
 
	g°¨tTicks
;

59 
	gkeyb_fd
;

60 
	gmou£_fd
;

61 
	gesˇ≥_quôs
 = 1;

63 #i‡
PSP


65 
	$exô_ˇŒback
()

67 
	`s˚Kî√lExôGame
();

69 
	}
}

71 
	$CÆlbackThªad
(*
¨g
)

73 
cbid
;

75 
cbid
 = 
	`s˚Kî√lCª©eCÆlback
("Exô CÆlback", 
exô_ˇŒback
, 
NULL
);

76 
	`s˚Kî√lRegi°îExôCÆlback
(
cbid
);

77 
	`s˚Kî√lSÀïThªadCB
();

78 
	}
}

82 
	$maö
(
ac
,**
av
)

84 #i‡
PSP


85 
thid
;

86 
thid
 = 
	`s˚Kî√lCª©eThªad
("upd©e_thªad", 
CÆlbackThªad
, 0x11, 0xFA0, 0, 0);

87 if(
thid
 >= 0)

88 
	`s˚Kî√lSèπThªad
(
thid
, 0, 0);

90 
	`p•DebugS¸ìnInô
();

91 
	`¥ötf
("\n Microwindows init.....");

95 if(
	`MwU£rInô
(
ac
, 
av
) < 0)

96 
	`exô
(1);

98 if(
	`MwO≥n
() < 0)

99 
	`exô
(1);

102 
	`WöMaö
(
NULL
, NULL, NULL, 
SW_SHOW
);

104 
	`MwClo£
();

106 
	`exô
(0);

107 
	}
}

114 
	$MwO≥n
()

119 if(
	`MwInôülize
() < 0)

122 
	}
}

128 
	$MwClo£
()

130 
	`MwTîmö©e
();

131 
	}
}

133 #i‡(
UNIX
 | 
DOS_DJGPP
Ë&& !
_MINIX


149 
HWND
 
	mªad
;

150 
HWND
 
	mwrôe
;

151 
HWND
 
	mex˚±
;

152 
	m√xt
;

153 } 
	tWNDUSERFD
;

155 
WNDUSERFD
 
	gu£ºegfd
[
FD_SETSIZE
];

156 
	gu£ºegfd_hód
;

159 
	$MwRegi°îFdI≈ut
(
HWND
 
hwnd
, 
fd
)

161 i‡(
fd
 < 
FD_SETSIZE
 && fd !
mou£_fd
 && fd !
keyb_fd
) {

162 i‡(!
u£ºegfd
[
fd
].
ªad
) {

163 
u£ºegfd
[
fd
].
ªad
 = 
hwnd
;

164 i‡(
u£ºegfd
[
fd
].
√xt
 =-1 && !u£ºegfd[fd].
wrôe
 && !u£ºegfd[fd].
ex˚±
) {

165 
u£ºegfd
[
fd
].
√xt
 = 
u£ºegfd_hód
;

166 
u£ºegfd_hód
 = 
fd
;

170 
	}
}

173 
	$MwUƒegi°îFdI≈ut
(
HWND
 
hwnd
, 
fd
)

175 i‡(
fd
 < 
FD_SETSIZE
 && fd !
mou£_fd
 && fd !
keyb_fd
) {

176 i‡(
u£ºegfd
[
fd
].
ªad
 =
hwnd
) {

177 
u£ºegfd
[
fd
].
ªad
 = 
NULL
;

178 i‡(!
u£ºegfd
[
fd
].
wrôe
 && !u£ºegfd[fd].
ex˚±
) {

179 *
li°fd
 = &
u£ºegfd_hód
;

180 *
li°fd
 != -1) {

181 i‡(*
li°fd
 =
fd
) {

182 *
li°fd
 = 
u£ºegfd
[
fd
].
√xt
;

183 
u£ºegfd
[
fd
].
√xt
 = -1;

186 
li°fd
 = &
u£ºegfd
[*li°fd].
√xt
;

188 
u£ºegfd_hód
 = 
fd
;

192 
	}
}

195 
	$MwRegi°îFdOuçut
(
HWND
 
hwnd
, 
fd
)

197 i‡(
fd
 < 
FD_SETSIZE
 && fd !
mou£_fd
 && fd !
keyb_fd
) {

198 i‡(!
u£ºegfd
[
fd
].
wrôe
) {

199 
u£ºegfd
[
fd
].
wrôe
 = 
hwnd
;

200 i‡(
u£ºegfd
[
fd
].
√xt
 =-1 && !u£ºegfd[fd].
ªad
 && !u£ºegfd[fd].
ex˚±
) {

201 
u£ºegfd
[
fd
].
√xt
 = 
u£ºegfd_hód
;

202 
u£ºegfd_hód
 = 
fd
;

206 
	}
}

209 
	$MwUƒegi°îFdOuçut
(
HWND
 
hwnd
, 
fd
)

211 i‡(
fd
 < 
FD_SETSIZE
 && fd !
mou£_fd
 && fd !
keyb_fd
) {

212 i‡(
u£ºegfd
[
fd
].
wrôe
 =
hwnd
) {

213 
u£ºegfd
[
fd
].
wrôe
 = 
NULL
;

214 i‡(!
u£ºegfd
[
fd
].
ªad
 && !u£ºegfd[fd].
ex˚±
) {

215 *
li°fd
 = &
u£ºegfd_hód
;

216 *
li°fd
 != -1) {

217 i‡(*
li°fd
 =
fd
) {

218 *
li°fd
 = 
u£ºegfd
[
fd
].
√xt
;

219 
u£ºegfd
[
fd
].
√xt
 = -1;

222 
li°fd
 = &
u£ºegfd
[*li°fd].
√xt
;

224 
u£ºegfd_hód
 = 
fd
;

228 
	}
}

231 
	$MwRegi°îFdEx˚±
(
HWND
 
hwnd
, 
fd
)

233 i‡(
fd
 < 
FD_SETSIZE
 && fd !
mou£_fd
 && fd !
keyb_fd
) {

234 i‡(!
u£ºegfd
[
fd
].
ex˚±
) {

235 
u£ºegfd
[
fd
].
ex˚±
 = 
hwnd
;

236 i‡(
u£ºegfd
[
fd
].
√xt
 =-1 && !u£ºegfd[fd].
ªad
 && !u£ºegfd[fd].
wrôe
) {

237 
u£ºegfd
[
fd
].
√xt
 = 
u£ºegfd_hód
;

238 
u£ºegfd_hód
 = 
fd
;

242 
	}
}

245 
	$MwUƒegi°îFdEx˚±
(
HWND
 
hwnd
, 
fd
)

247 i‡(
fd
 < 
FD_SETSIZE
 && fd !
mou£_fd
 && fd !
keyb_fd
) {

248 i‡(
u£ºegfd
[
fd
].
ex˚±
 =
hwnd
) {

249 
u£ºegfd
[
fd
].
ex˚±
 = 
NULL
;

250 i‡(!
u£ºegfd
[
fd
].
ªad
 && !u£ºegfd[fd].
wrôe
) {

251 *
li°fd
 = &
u£ºegfd_hód
;

252 *
li°fd
 != -1) {

253 i‡(*
li°fd
 =
fd
) {

254 *
li°fd
 = 
u£ºegfd
[
fd
].
√xt
;

255 
u£ºegfd
[
fd
].
√xt
 = -1;

258 
li°fd
 = &
u£ºegfd
[*li°fd].
√xt
;

260 
u£ºegfd_hód
 = 
fd
;

264 
	}
}

268 #i‡
MSDOS
 | 
_MINIX


270 
	$MwSñe˘
()

273 if(
mou£dev
.
	`Pﬁl
())

274 
	`MwCheckMou£Evít
())

278 if(
kbddev
.
	`Pﬁl
())

279 
	`MwCheckKeybﬂrdEvít
())

282 
	`MwH™dÀTimîs
();

283 
	}
}

286 #i‡
PSP


289 
	$MwSñe˘
()

291 
mou£evíts
 = 0;

292 
keybdevíts
 = 0;

295 
mou£dev
.
	`Pﬁl
() > 0)

297 
	`MwCheckMou£Evít
();

298 i‡(
mou£evíts
++ > 10)

304 
kbddev
.
	`Pﬁl
() > 0)

306 
	`MwCheckKeybﬂrdEvít
();

307 i‡(
keybdevíts
++ > 10)

312 i‡(
mou£evíts
==0 && 
keybdevíts
==0)

313 
	`s˚Kî√lDñayThªad
(100);

315 
	`MwH™dÀTimîs
();

316 
	}
}

321 #i‡
UNIX
 && 
deföed
(
HAVESELECT
)

322 #i‡
ANIMATEPALETTE


323 
	gÁde
 = 0;

327 
	$MwSñe˘
()

329 
fd_£t
 
rfds
;

330 
fd_£t
 
wfds
;

331 
fd_£t
 
efds
;

332 
fd
;

333 
e
;

334 
£tsize
 = 0;

335 
UINT
 
timeout
;

336 
timevÆ
 
to
;

339 if(
s¸dev
.
PªSñe˘
)

340 
s¸dev
.
	`PªSñe˘
(&scrdev);

343 
	`FD_ZERO
(&
rfds
);

344 
	`FD_ZERO
(&
wfds
);

345 
	`FD_ZERO
(&
efds
);

347 if(
mou£_fd
 >= 0) {

348 
	`FD_SET
(
mou£_fd
, &
rfds
);

349 if(
mou£_fd
 > 
£tsize
)

350 
£tsize
 = 
mou£_fd
;

352 if(
keyb_fd
 >= 0) {

353 
	`FD_SET
(
keyb_fd
, &
rfds
);

354 if(
keyb_fd
 > 
£tsize
)

355 
£tsize
 = 
keyb_fd
;

359 
fd
 = 
u£ºegfd_hód
;

360 
fd
 != -1) {

361 i‡(
u£ºegfd
[
fd
].
ªad
Ë
	`FD_SET
(fd, &
rfds
);

362 i‡(
u£ºegfd
[
fd
].
wrôe
Ë
	`FD_SET
(fd, &
wfds
);

363 i‡(
u£ºegfd
[
fd
].
ex˚±
Ë
	`FD_SET
(fd, &
efds
);

364 if(
fd
 > 
£tsize
) setsize = fd;

365 
fd
 = 
u£ºegfd
[fd].
√xt
;

368 ++
£tsize
;

375 if(
døgwp
)

376 
timeout
 = 
to
.
tv_£c
 =Åo.
tv_u£c
 = 0L;

378 
timeout
 = 
	`MwGëNextTimeoutVÆue
();

379 #i‡
ANIMATEPALETTE


380 if(
Áde
 < 100)

381 
timeout
 = 40;

383 i‡(!
timeout
)Åimeout = 10;

384 #i‡
MW_FEATURE_TIMERS


385 
	`GdGëNextTimeout
(&
to
, 
timeout
);

387 
to
.
tv_£c
 = 
timeout
 / 1000;

388 
to
.
tv_u£c
 = (
timeout
 % 1000) * 1000;

393 if((
e
 = 
	`£À˘
(
£tsize
, &
rfds
, &
wfds
, &
efds
, &
to
)) > 0) {

396 if(
mou£_fd
 >0 && 
	`FD_ISSET
(mou£_fd, &
rfds
))

397 
	`MwCheckMou£Evít
())

401 if(
keyb_fd
 >0 && 
	`FD_ISSET
(keyb_fd, &
rfds
))

402 
	`MwCheckKeybﬂrdEvít
())

406 
fd
 = 
u£ºegfd_hód
;

407 
fd
 != -1) {

408 i‡(
u£ºegfd
[
fd
].
ªad
 && 
	`FD_ISSET
(fd, &
rfds
))

409 
	`Po°Mesßge
(
u£ºegfd
[
fd
].
ªad
, 
WM_FDINPUT
, fd, 0);

410 i‡(
u£ºegfd
[
fd
].
wrôe
 && 
	`FD_ISSET
(fd, &
wfds
))

411 
	`Po°Mesßge
(
u£ºegfd
[
fd
].
wrôe
, 
WM_FDOUTPUT
, fd, 0);

412 i‡(
u£ºegfd
[
fd
].
ex˚±
 && 
	`FD_ISSET
(fd, &
efds
))

413 
	`Po°Mesßge
(
u£ºegfd
[
fd
].
ex˚±
, 
WM_FDEXCEPT
, fd, 0);

414 
fd
 = 
u£ºegfd
[fd].
√xt
;

417 if(
e
 == 0) {

419 #i‡
MW_FEATURE_TIMERS


420 if(
	`GdTimeout
(Ë=
FALSE
)

423 #i‡
ANIMATEPALETTE


424 if(
Áde
 <= 100) {

425 
	`£tÁdñevñ
(&
s¸dev
, 
Áde
);

426 
Áde
 += 5;

429 
	`MwH™dÀTimîs
();

431 if(
î∫o
 !
EINTR
)

432 
	`EPRINTF
("Select() call in main failed\n");

433 
	}
}

436 #i‡
RTEMS


437 
MWBOOL
 
MwCheckMou£Evít
();

438 
MWBOOL
 
MwCheckKeybﬂrdEvít
();

439 
MW_UID_MESSAGE
 
m_kbd
;

440 
MW_UID_MESSAGE
 
m_mou
;

441 
HWND
 
døgwp
;

443 
	$MwSñe˘
 ()

445 
MW_UID_MESSAGE
 
m
;

446 
rc
;

447 
timeout
 = 0;

450 i‡(
s¸dev
.
PªSñe˘
)

451 
s¸dev
.
	`PªSñe˘
 (&scrdev);

458 i‡(!
døgwp
) {

459 
timeout
 = 
	`MwGëNextTimeoutVÆue
 ();

460 i‡(
timeout
 < 10)

461 
timeout
 = 10;

464 
m
.
ty≥
 = 
MV_UID_INVALID
;

467 
rc
 = 
	`uid_ªad_mesßge
 (&
m
, 
timeout
);

470 i‡(
rc
 < 0) {

471 i‡–
î∫o
 !
ETIMEDOUT
 )

472 
	`EPRINTF
 ("Ñc%d,Éºno=%d\n", 
rc
, 
î∫o
);

474 
	`MwH™dÀTimîs
 ();

480 
m
.
ty≥
) {

481 
MV_UID_REL_POS
:

482 
MV_UID_ABS_POS
:

483 
m_mou
 = 
m
;

484 
	`MwCheckMou£Evít
 ()) ;

486 
MV_UID_KBD
:

487 
m_kbd
 = 
m
;

488 
	`MwCheckKeybﬂrdEvít
();

490 
MV_UID_TIMER
:

491 
MV_UID_INVALID
:

495 
	}
}

498 #i‡
VTSWITCH


500 
	$CheckVtCh™ge
(*
¨g
)

502 if(
	`MwCheckVtCh™ge
()) {

503 #i‡
ANIMATEPALETTE


504 
Áde
 = 0;

506 
	`MwRedøwS¸ìn
();

508 
	`GdAddTimî
(50, 
CheckVtCh™ge
, 
NULL
);

509 
	}
}

517 
	$MwInôülize
()

519 
HWND
 
wp
;

520 
PSD
 
psd
;

521 
WNDCLASS
 
wc
;

522 
fd
;

523 
MWCURSOR
 
¨row
 = {

526 
	`RGB
(255, 255, 255), RGB(0, 0, 0),

537 
MWLISTHEAD
 
mwCœssHód
;

539 #i‡(
UNIX
 | 
DOS_DJGPP
Ë&& !
_MINIX


540 
fd
 = 0; fd < 
FD_SETSIZE
; fd++) {

541 
u£ºegfd
[
fd
].
ªad
 = 
NULL
;

542 
u£ºegfd
[
fd
].
wrôe
 = 
NULL
;

543 
u£ºegfd
[
fd
].
ex˚±
 = 
NULL
;

544 
u£ºegfd
[
fd
].
√xt
 = -1;

546 
u£ºegfd_hód
 = -1;

549 #i‚de‡
MW_NOSIGNALS


551 
	`sig«l
(
SIGTERM
, (*)
MwTîmö©e
);

554 
°¨tTicks
 = 
	`GëTickCou¡
();

556 i‡((
keyb_fd
 = 
	`GdO≥nKeybﬂrd
()) == -1) {

557 
	`EPRINTF
("Cannot initialise keyboard\n");

561 i‡((
psd
 = 
	`GdO≥nS¸ìn
()Ë=
NULL
) {

562 
	`EPRINTF
("Cannot initialise screen\n");

563 
	`GdClo£Keybﬂrd
();

567 i‡((
mou£_fd
 = 
	`GdO≥nMou£
()) == -1) {

568 
	`EPRINTF
("Cannot initialise mouse\n");

569 
	`GdClo£S¸ìn
(
psd
);

570 
	`GdClo£Keybﬂrd
();

574 #i‡
ANIMATEPALETTE


575 
	`£tÁdñevñ
(
psd
, 0);

580 
wc
.
°yÀ
 = 
CS_DBLCLKS
 | 
CS_VREDRAW
 | 
CS_HREDRAW
;

581 
wc
.
Õ‚WndProc
 = (
WNDPROC
)
DefWödowProc
;

582 
wc
.
cbClsExåa
 = 0;

583 
wc
.
cbWndExåa
 = 0;

584 
wc
.
hIn°™˚
 = 0;

585 
wc
.
hIc⁄
 = 0;

586 
wc
.
hCurs‹
 = 0;

587 
wc
.
hbrBackground
 = 
	`Cª©eSﬁidBrush
(
	`GëSysCﬁ‹
(
COLOR_BACKGROUND
));

588 
wc
.
ÕszMíuName
 = 
NULL
;

589 
wc
.
ÕszCœssName
 = "DeskTop";

590 
	`Regi°îCœss
–&
wc
);

592 
wp
 = 
	`GdIãmNew
(
hwnd
);

593 i‡(!
wp
) {

594 
	`EPRINTF
("No memory forÑoot window\n");

595 
	`GdClo£Mou£
();

596 
	`GdClo£S¸ìn
(
psd
);

597 
	`GdClo£Keybﬂrd
();

602 
wp
->
°yÀ
 = 
WS_CLIPCHILDREN
 | 
WS_VISIBLE
;

603 
wp
->
ex°yÀ
 = 0;

604 
wp
->
pCœss
 = (
PWNDCLASS
)
mwCœssHód
.
hód
;

605 
wp
->
∑ª¡
 = 
NULL
;

606 
wp
->
chûdªn
 = 
NULL
;

607 
wp
->
siblögs
 = 
NULL
;

608 
wp
->
√xt
 = 
NULL
;

609 
	`SëRe˘
(&
wp
->
wöª˘
, 0, 0, 
psd
->
xvúåes
,Ösd->
yvúåes
);

610 
	`MwCÆcClõ¡Re˘
(
wp
);

611 
wp
->
curs‹
 = 
NULL
;

612 
wp
->
unm≠cou¡
 = 0;

613 
wp
->
id
 = 0;

614 
	`°r˝y
(
wp
->
szTôÀ
, "Microwindows");

615 
wp
->
gŸPaötMsg
 = 
PAINT_PAINTED
;

616 #i‡
UPDATEREGIONS


617 
wp
->
upd©e
 = 
	`GdAŒocRegi⁄
();

620 
li°wp
 = 
wp
;

621 
roŸwp
 = 
wp
;

622 
focuswp
 = 
wp
;

623 
mou£wp
 = 
wp
;

626 
	`InvÆid©eRe˘
(
roŸwp
, 
NULL
, 
TRUE
);

628 #i‡
VTSWITCH


629 
	`MwInôVt
();

631 
	`GdAddTimî
(50, 
CheckVtCh™ge
, 
NULL
);

637 
curcurs‹
 = 
NULL
;

638 
curs‹x
 = -1;

639 
curs‹y
 = -1;

640 
	`GdShowCurs‹
(
psd
);

641 
	`MwMoveCurs‹
(
psd
->
xvúåes
 / 2,Ösd->
yvúåes
 / 2);

642 
	`MwSëCurs‹
(
roŸwp
, &
¨row
);

647 
	`GdRe°ri˘Mou£
(0, 0, 
psd
->
xvúåes
 - 1,Ösd->
yvúåes
 - 1);

648 
	`GdMoveMou£
(
psd
->
xvúåes
 / 2,Ösd->
yvúåes
 / 2);

651 
	}
}

657 
	$MwTîmö©e
()

659 
	`GdClo£S¸ìn
(&
s¸dev
);

660 
	`GdClo£Mou£
();

661 
	`GdClo£Keybﬂrd
();

662 #i‡
VTSWITCH


663 
	`MwRedøwVt
(
mwvãrm
);

664 
	`MwExôVt
();

666 
	`exô
(0);

667 
	}
}

673 
DWORD
 
WINAPI


674 
	$GëTickCou¡
(
VOID
)

676 #i‡
MSDOS


677 
	~<time.h
>

678  (
DWORD
)(
	`˛ock
(Ë* 1000 / 
CLOCKS_PER_SEC
);

680 #i‡
_MINIX


681 
tms
 
t
;

683  (
DWORD
)
	`times
(&
t
) * 16;

685 #i‡
UNIX


686 
timevÆ
 
t
;

688 
	`gëtimeofday
(&
t
, 
NULL
);

689  ((
t
.
tv_£c
 * 1000Ë+ (t.
tv_u£c
 / 25000Ë* 25Ë- 
°¨tTicks
;

695 
	}
}

697 
VOID
 
WINAPI


698 
	$SÀï
(
DWORD
 
dwMûli£c⁄ds
)

700 
i
, 
j
, 
k
;

701 c⁄° 
lo›s_≥r_ms
 = 20000;

704 
i
=0; i < 
dwMûli£c⁄ds
; i++)

705 
j
=0; j < 
lo›s_≥r_ms
; j++)

706 
k
 = 
i
 * 
j
;

707 
	}
}

	@mwin/winrgn.c

14 
	~"wödows.h
"

15 
	~"devi˚.h
"

16 
	~<°dlib.h
>

17 
	~<°rög.h
>

20 
	#GDI_GëObjPå
(
hrgn
,
ty≥
Ë(hrgn)

	)

23 
HRGN
 
REGION_Cª©eRegi⁄
();

27 
	#EMPTY_REGION
(
pReg
) { \

28 (
pReg
)->
numRe˘s
 = 0; \

29 (
pReg
)->
exã¡s
.
À·
 = (pReg)->exã¡s.
t›
 = 0; \

30 (
pReg
)->
exã¡s
.
right
 = (pReg)->exã¡s.
bŸtom
 = 0; \

31 (
pReg
)->
ty≥
 = 
NULLREGION
; \

32 }

	)

37 
HRGN


38 
	$REGION_Cª©eRegi⁄
()

40 
MWRGNOBJ
 *
obj
;

42 
obj
 = 
	`GdIãmNew
(
MWRGNOBJ
);

43 if(!
obj
)

44  
NULL
;

45 
obj
->
hdr
.
ty≥
 = 
OBJ_REGION
;

46 
obj
->
hdr
.
°ockobj
 = 
FALSE
;

47 if(!(
obj
->
rgn
 = 
	`GdAŒocRegi⁄
())) {

48 
	`GdIãmFªe
(
obj
);

49  
NULL
;

51  (
HRGN
)
obj
;

52 
	}
}

55 
INT
 
WINAPI


56 
	$Off£tRgn
–
HRGN
 
hrgn
, 
INT
 
x
, INT 
y
 )

58 
MWRGNOBJ
 * 
obj
 = (MWRGNOBJ *Ë
	`GDI_GëObjPå
–
hrgn
, 
OBJ_REGION
 );

60 i‡(
obj
)

62 
	`GdOff£tRegi⁄
(
obj
->
rgn
, 
x
, 
y
);

63  
obj
->
rgn
->
ty≥
;

65  
ERRORREGION
;

66 
	}
}

69 
INT
 
WINAPI


70 
	$GëRgnBox
–
HRGN
 
hrgn
, 
LPRECT
 
ª˘
 )

72 
MWRGNOBJ
 * 
obj
 = (MWRGNOBJ *Ë
	`GDI_GëObjPå
–
hrgn
, 
OBJ_REGION
 );

73 i‡(
obj
)

74  
	`GdGëRegi⁄Box
(
obj
->
rgn
, 
ª˘
);

75  
ERRORREGION
;

76 
	}
}

79 
HRGN
 
WINAPI


80 
	$Cª©eRe˘Rgn
(
INT
 
À·
, INT 
t›
, INT 
right
, INT 
bŸtom
)

82 
HRGN
 
hrgn
;

84 i‡(!(
hrgn
 = 
	`REGION_Cª©eRegi⁄
()))

87 
	`SëRe˘Rgn
(
hrgn
, 
À·
, 
t›
, 
right
, 
bŸtom
);

88  
hrgn
;

89 
	}
}

92 
HRGN
 
WINAPI


93 
	$Cª©eRe˘RgnIndúe˘
–c⁄° 
RECT
* 
ª˘
 )

95  
	`Cª©eRe˘Rgn
–
ª˘
->
À·
,Ñe˘->
t›
,Ñe˘->
right
,Ñe˘->
bŸtom
 );

96 
	}
}

102 
VOID
 
WINAPI


103 
	$SëRe˘Rgn
–
HRGN
 
hrgn
, 
INT
 
À·
, INT 
t›
, INT 
right
, INT 
bŸtom
 )

105 
MWRGNOBJ
 * 
obj
;

106 
MWCLIPREGION
 *
rgn
;

110 i‡(!(
obj
 = (
MWRGNOBJ
 *Ë
	`GDI_GëObjPå
–
hrgn
, 
OBJ_REGION
 ))) ;

112 i‡(
À·
 > 
right
Ë{ 
INT
 
tmp
 =Üeft;Üeft =Ñight;Ñight =Åmp; }

113 i‡(
t›
 > 
bŸtom
Ë{ 
INT
 
tmp
 =Åop;Åop = bottom; bottom =Åmp; }

115 
rgn
 = 
obj
->rgn;

116 
	`GdSëRe˘Regi⁄
(
rgn
, 
À·
, 
t›
, 
right
, 
bŸtom
);

117 
	}
}

120 
HRGN
 
WINAPI


121 
	$Cª©eRoundRe˘Rgn
–
INT
 
À·
, INT 
t›
, INT 
right
, INT 
bŸtom
,

122 
INT
 
ñlù£_width
, INT 
ñlù£_height
 )

124 
MWRGNOBJ
 * 
obj
;

125 
HRGN
 
hrgn
;

126 
asq
, 
bsq
, 
d
, 
xd
, 
yd
;

127 
RECT
 
ª˘
;

130 i‡(
ñlù£_width
 =0 || 
ñlù£_height
 == 0)

131  
	`Cª©eRe˘Rgn
–
À·
, 
t›
, 
right
, 
bŸtom
 );

134 i‡(
À·
 > 
right
Ë{ 
INT
 
tmp
 =Üeft;Üeft =Ñight;Ñight =Åmp; }

135 i‡(
t›
 > 
bŸtom
Ë{ 
INT
 
tmp
 =Åop;Åop = bottom; bottom =Åmp; }

137 
ñlù£_width
 = 
	`abs
(ellipse_width);

138 
ñlù£_height
 = 
	`abs
(ellipse_height);

142 i‡(!(
hrgn
 = 
	`REGION_Cª©eRegi⁄
()))

144 
obj
 = (
MWRGNOBJ
 *)
hrgn
;

150 i‡(
ñlù£_width
 > 
right
-
À·
)Éllipse_width =Ñight-left;

151 i‡(
ñlù£_height
 > 
bŸtom
-
t›
)Éllipse_height = bottom-top;

156 
asq
 = 
ñlù£_width
 *Éllipse_width / 4;

157 
bsq
 = 
ñlù£_height
 *Éllipse_height / 4;

158 i‡(
asq
 == 0)ásq = 1;

159 i‡(
bsq
 == 0) bsq = 1;

160 
d
 = 
bsq
 - 
asq
 * 
ñlù£_height
 / 2 +ásq / 4;

161 
xd
 = 0;

162 
yd
 = 
asq
 * 
ñlù£_height
;

164 
ª˘
.
À·
 =Üe· + 
ñlù£_width
 / 2;

165 
ª˘
.
right
 =Ñighà- 
ñlù£_width
 / 2;

169 
xd
 < 
yd
)

171 i‡(
d
 > 0)

174 
ª˘
.
t›
 =Åop++;

175 
ª˘
.
bŸtom
 =Ñe˘.
t›
 + 1;

176 
	`GdUni⁄Re˘WôhRegi⁄
–&
ª˘
, 
obj
->
rgn
 );

177 
ª˘
.
t›
 = --
bŸtom
;

178 
ª˘
.
bŸtom
 =Ñe˘.
t›
 + 1;

179 
	`GdUni⁄Re˘WôhRegi⁄
–&
ª˘
, 
obj
->
rgn
 );

180 
yd
 -2*
asq
;

181 
d
 -
yd
;

183 
ª˘
.
À·
--;

184 
ª˘
.
right
++;

185 
xd
 +2*
bsq
;

186 
d
 +
bsq
 + 
xd
;

191 
d
 +(3 * (
asq
-
bsq
Ë/ 2 - (
xd
+
yd
)) / 2;

192 
yd
 >= 0)

195 
ª˘
.
t›
 =Åop++;

196 
ª˘
.
bŸtom
 =Ñe˘.
t›
 + 1;

197 
	`GdUni⁄Re˘WôhRegi⁄
–&
ª˘
, 
obj
->
rgn
 );

198 
ª˘
.
t›
 = --
bŸtom
;

199 
ª˘
.
bŸtom
 =Ñe˘.
t›
 + 1;

200 
	`GdUni⁄Re˘WôhRegi⁄
–&
ª˘
, 
obj
->
rgn
 );

201 i‡(
d
 < 0)

203 
ª˘
.
À·
--;

204 
ª˘
.
right
++;

205 
xd
 +2*
bsq
;

206 
d
 +
xd
;

208 
yd
 -2*
asq
;

209 
d
 +
asq
 - 
yd
;

214 i‡(
t›
 <
bŸtom
)

216 
ª˘
.
t›
 =Åop;

217 
ª˘
.
bŸtom
 = bottom;

218 
	`GdUni⁄Re˘WôhRegi⁄
–&
ª˘
, 
obj
->
rgn
 );

220 
obj
->
rgn
->
ty≥
 = 
SIMPLEREGION
;

221  
hrgn
;

222 
	}
}

225 
HRGN
 
WINAPI


226 
	$Cª©eEŒùticRgn
–
INT
 
À·
, INT 
t›
, INT 
right
, INT 
bŸtom
 )

228  
	`Cª©eRoundRe˘Rgn
(
À·
, 
t›
, 
right
, 
bŸtom
,Ñight-left, bottom-top);

229 
	}
}

232 
HRGN
 
WINAPI


233 
	$Cª©eEŒùticRgnIndúe˘
–c⁄° 
RECT
 *
ª˘
 )

235  
	`Cª©eRoundRe˘Rgn
–
ª˘
->
À·
,Ñe˘->
t›
,Ñe˘->
right
,

236 
ª˘
->
bŸtom
,Ñe˘->
right
 -Ñe˘->
À·
,

237 
ª˘
->
bŸtom
 -Ñe˘->
t›
 );

238 
	}
}

240 
HRGN
 
WINAPI


241 
	$Cª©ePﬁyg⁄Rgn
(c⁄° 
POINT
 *
poöts
, 
INT
 
cou¡
, INT 
mode
)

243 #i‡
POLYREGIONS


244 
HRGN
 
hrgn
;

245 
MWRGNOBJ
 * 
obj
;

246 
MWCLIPREGION
 * 
rgn
;

248 i‡(!(
hrgn
 = 
	`REGION_Cª©eRegi⁄
()))

249  
NULL
;

250 
obj
 = (
MWRGNOBJ
 *)
	`GDI_GëObjPå
(
hrgn
, 
OBJ_REGION
);

251 i‡(!
obj
)

252  
NULL
;

254 
rgn
 = 
	`GdAŒocPﬁyg⁄Regi⁄
((
POINT
 *)
poöts
, 
cou¡
, 
mode
);

255 i‡(!
rgn
)

256  
hrgn
;

257 
	`GdDe°royRegi⁄
(
obj
->
rgn
);

258 
obj
->
rgn
 =Ñgn;

259  
hrgn
;

261 
	}
}

263 
DWORD
 
WINAPI


264 
	$GëRegi⁄D©a
(
HRGN
 
hrgn
, 
DWORD
 
cou¡
, 
LPRGNDATA
 
rgnd©a
)

266 
DWORD
 
size
;

267 
MWRGNOBJ
 *
obj
 = (MWRGNOBJ *Ë
	`GDI_GëObjPå
–
hrgn
, 
OBJ_REGION
 );

268 
MWCLIPREGION
 *
rgn
;

272 if(!
obj
)  0;

274 
rgn
 = 
obj
->rgn;

275 
size
 = 
rgn
->
numRe˘s
 * (
RECT
);

276 if(
cou¡
 < (
size
 + (
RGNDATAHEADER
)Ë|| 
rgnd©a
 =
NULL
)

277  
size
 + (
RGNDATAHEADER
);

279 
rgnd©a
->
rdh
.
dwSize
 = (
RGNDATAHEADER
);

280 
rgnd©a
->
rdh
.
iTy≥
 = 
RDH_RECTANGLES
;

281 
rgnd©a
->
rdh
.
nCou¡
 = 
rgn
->
numRe˘s
;

282 
rgnd©a
->
rdh
.
nRgnSize
 = 
size
;

283 
rgnd©a
->
rdh
.
rcBound
.
À·
 = 
rgn
->
exã¡s
.left;

284 
rgnd©a
->
rdh
.
rcBound
.
t›
 = 
rgn
->
exã¡s
.top;

285 
rgnd©a
->
rdh
.
rcBound
.
right
 = 
rgn
->
exã¡s
.right;

286 
rgnd©a
->
rdh
.
rcBound
.
bŸtom
 = 
rgn
->
exã¡s
.bottom;

288 
	`mem˝y
–
rgnd©a
->
Buf„r
, 
rgn
->
ª˘s
, 
size
 );

291 
	}
}

295 
HRGN
 
WINAPI


296 
	$ExtCª©eRegi⁄
(c⁄° 
XFORM
* 
ÕXf‹m
, 
DWORD
 
dwCou¡
, c⁄° 
RGNDATA
* 
rgnd©a
)

298 
HRGN
 
hrgn
 = 
	`Cª©eRe˘Rgn
(0, 0, 0, 0);

299 
MWRGNOBJ
 *
obj
 = (MWRGNOBJ *Ë
	`GDI_GëObjPå
–
hrgn
, 
OBJ_REGION
 );

300 
RECT
 *
pCurRe˘
, *
pEndRe˘
;

304 if(!
hrgn
)

306 
	`WARN
(
ªgi⁄
, "Can't createáÑegion!\n");

309 if(
ÕXf‹m
)

310 
	`WARN
(
ªgi⁄
, "XformÇot implemented - ignoring\n");

312 if(
rgnd©a
->
rdh
.
iTy≥
 !
RDH_RECTANGLES
)

314 
	`WARN
(
ªgi⁄
, "TypeÇot RDH_RECTANGLES\n");

315 
	`DñëeObje˘
–
hrgn
 );

319 
pEndRe˘
 = (
RECT
 *)
rgnd©a
->
Buf„r
 +Ñgnd©a->
rdh
.
nCou¡
;

320 
pCurRe˘
 = (
RECT
 *)
rgnd©a
->
Buf„r
;ÖCurRe˘ < 
pEndRe˘
;ÖCurRect++)

321 
	`GdUni⁄Re˘WôhRegi⁄
–
pCurRe˘
, 
obj
->
rgn
 );

323  
hrgn
;

324 
	}
}

328 
BOOL
 
WINAPI


329 
	$PtInRegi⁄
–
HRGN
 
hrgn
, 
INT
 
x
, INT 
y
 )

331 
MWRGNOBJ
 * 
obj
;

333 
obj
 = (
MWRGNOBJ
 *Ë
	`GDI_GëObjPå
–
hrgn
, 
OBJ_REGION
 );

334 if(!
obj
)

335  
FALSE
;

336  
	`GdPtInRegi⁄
(
obj
->
rgn
, 
x
, 
y
);

337 
	}
}

342 
BOOL
 
WINAPI


343 
	$Re˘InRegi⁄
–
HRGN
 
hrgn
, c⁄° 
RECT
 *
ª˘
 )

345 
MWRGNOBJ
 * 
obj
;

347 
obj
 = (
MWRGNOBJ
 *Ë
	`GDI_GëObjPå
–
hrgn
, 
OBJ_REGION
 );

348 if(!
obj
)

349  
FALSE
;

350  (
	`GdRe˘InRegi⁄
(
obj
->
rgn
, 
ª˘
Ë=
MWRECT_OUT
? 
FALSE
: 
TRUE
);

351 
	}
}

353 
BOOL
 
WINAPI


354 
	$EquÆRgn
–
HRGN
 
hrgn1
, HRGN 
hrgn2
 )

356 
MWRGNOBJ
 *
obj1
, *
obj2
;

358 i‡((
obj1
 = (
MWRGNOBJ
 *Ë
	`GDI_GëObjPå
–
hrgn1
, 
OBJ_REGION
 )))

359 i‡((
obj2
 = (
MWRGNOBJ
 *Ë
	`GDI_GëObjPå
–
hrgn2
, 
OBJ_REGION
 )))

360  
	`GdEquÆRegi⁄
(
obj1
->
rgn
, 
obj2
->rgn);

361  
FALSE
;

362 
	}
}

370 
BOOL


371 
	$REGION_Uni⁄Re˘WôhRgn
–
HRGN
 
hrgn
, c⁄° 
RECT
 *
ÕRe˘
 )

373 
MWRGNOBJ
 *
obj
 = (MWRGNOBJ *)
hrgn
;

375 if(!
obj
Ë 
FALSE
;

376 
	`GdUni⁄Re˘WôhRegi⁄
–
ÕRe˘
, 
obj
->
rgn
 );

377  
TRUE
;

378 
	}
}

385 
BOOL


386 
	$REGION_FømeRgn
–
HRGN
 
hDe°
, HRGN 
hSrc
, 
INT
 
x
, INT 
y
 )

388 
BOOL
 
bRë
;

389 
MWRGNOBJ
 *
§cObj
 = (MWRGNOBJ*Ë
	`GDI_GëObjPå
–
hSrc
, 
OBJ_REGION
 );

391 i‡(
§cObj
->
rgn
->
numRe˘s
 != 0)

393 
MWRGNOBJ
* 
de°Obj
 = (MWRGNOBJ*Ë
	`GDI_GëObjPå
–
hDe°
, 
OBJ_REGION
 );

394 
RECT
 *
pRe˘
, *
pEndRe˘
;

395 
RECT
 
ãmpRe˘
;

397 
	`EMPTY_REGION
–
de°Obj
->
rgn
 );

399 
pEndRe˘
 = 
§cObj
->
rgn
->
ª˘s
 + srcObj->rgn->
numRe˘s
;

400 
pRe˘
 = 
§cObj
->
rgn
->
ª˘s
;ÖRe˘ < 
pEndRe˘
;ÖRect++)

402 
ãmpRe˘
.
À·
 = 
pRe˘
->À· - 
x
;

403 
ãmpRe˘
.
t›
 = 
pRe˘
->t› - 
y
;

404 
ãmpRe˘
.
right
 = 
pRe˘
->righà+ 
x
;

405 
ãmpRe˘
.
bŸtom
 = 
pRe˘
->bŸtom + 
y
;

406 
	`GdUni⁄Re˘WôhRegi⁄
–&
ãmpRe˘
, 
de°Obj
->
rgn
 );

408 
	`GdSubåa˘Regi⁄
–
de°Obj
->
rgn
, de°Obj->rgn, 
§cObj
->rgn );

409 
bRë
 = 
TRUE
;

412 
bRë
 = 
FALSE
;

413  
bRë
;

414 
	}
}

420 
INT
 
WINAPI


421 
	$ComböeRgn
(
HRGN
 
hDe°
, HRGN 
hSrc1
, HRGN 
hSrc2
, 
INT
 
mode
)

423 
MWRGNOBJ
 *
de°Obj
 = (MWRGNOBJ *Ë
	`GDI_GëObjPå
–
hDe°
, 
OBJ_REGION
);

424 
INT
 
ªsu…
 = 
ERRORREGION
;

428 i‡(
de°Obj
)

430 
MWRGNOBJ
 *
§c1Obj
 = (MWRGNOBJ *Ë
	`GDI_GëObjPå
–
hSrc1
, 
OBJ_REGION
);

432 i‡(
§c1Obj
)

437 i‡(
mode
 =
RGN_COPY
)

439 
	`GdC›yRegi⁄
–
de°Obj
->
rgn
, 
§c1Obj
->rgn );

440 
ªsu…
 = 
de°Obj
->
rgn
->
ty≥
;

444 
MWRGNOBJ
 *
§c2Obj
 = (MWRGNOBJ *Ë
	`GDI_GëObjPå
–
hSrc2
, 
OBJ_REGION
);

446 i‡(
§c2Obj
)

451 
mode
)

453 
RGN_AND
:

454 
	`GdI¡î£˘Regi⁄
–
de°Obj
->
rgn
, 
§c1Obj
->rgn, 
§c2Obj
->rgn);

456 
RGN_OR
:

457 
	`GdUni⁄Regi⁄
–
de°Obj
->
rgn
, 
§c1Obj
->rgn, 
§c2Obj
->rgn );

459 
RGN_XOR
:

460 
	`GdX‹Regi⁄
–
de°Obj
->
rgn
, 
§c1Obj
->rgn, 
§c2Obj
->rgn );

462 
RGN_DIFF
:

463 
	`GdSubåa˘Regi⁄
–
de°Obj
->
rgn
, 
§c1Obj
->rgn, 
§c2Obj
->rgn );

466 
ªsu…
 = 
de°Obj
->
rgn
->
ty≥
;

474  
ªsu…
;

475 
	}
}

483 
BOOL
 
WINAPI


484 
	$I¡î£˘Re˘
–
LPRECT
 
de°
, c⁄° 
RECT
 *
§c1
, c⁄° RECT *
§c2
 )

486 i‡(
	`IsRe˘Em±y
(
§c1
Ë|| IsRe˘Em±y(
§c2
) ||

487 (
§c1
->
À·
 >
§c2
->
right
) || (src2->left >= src1->right) ||

488 (
§c1
->
t›
 >
§c2
->
bŸtom
) || (src2->top >= src1->bottom))

490 
	`SëRe˘Em±y
–
de°
 );

491  
FALSE
;

493 
de°
->
À·
 = 
	`MWMAX
–
§c1
->À·, 
§c2
->left );

494 
de°
->
right
 = 
	`MWMIN
–
§c1
->right, 
§c2
->right );

495 
de°
->
t›
 = 
	`MWMAX
–
§c1
->t›, 
§c2
->top );

496 
de°
->
bŸtom
 = 
	`MWMIN
–
§c1
->bŸtom, 
§c2
->bottom );

497  
TRUE
;

498 
	}
}

501 
BOOL
 
WINAPI


502 
	$Uni⁄Re˘
–
LPRECT
 
de°
, c⁄° 
RECT
 *
§c1
, c⁄° RECT *
§c2
 )

504 i‡(
	`IsRe˘Em±y
(
§c1
))

506 i‡(
	`IsRe˘Em±y
(
§c2
))

508 
	`SëRe˘Em±y
–
de°
 );

509  
FALSE
;

511 *
de°
 = *
§c2
;

515 i‡(
	`IsRe˘Em±y
(
§c2
)Ë*
de°
 = *
§c1
;

518 
de°
->
À·
 = 
	`MWMIN
–
§c1
->À·, 
§c2
->left );

519 
de°
->
right
 = 
	`MWMAX
–
§c1
->right, 
§c2
->right );

520 
de°
->
t›
 = 
	`MWMIN
–
§c1
->t›, 
§c2
->top );

521 
de°
->
bŸtom
 = 
	`MWMAX
–
§c1
->bŸtom, 
§c2
->bottom );

524  
TRUE
;

525 
	}
}

528 
BOOL
 
WINAPI


529 
	$EquÆRe˘
–c⁄° 
RECT
* 
ª˘1
, c⁄° RECT* 
ª˘2
 )

531  ((
ª˘1
->
À·
 =
ª˘2
->À·Ë&& (ª˘1->
right
 ==Ñect2->right) &&

532 (
ª˘1
->
t›
 =
ª˘2
->t›Ë&& (ª˘1->
bŸtom
 ==Ñect2->bottom));

533 
	}
}

536 
BOOL
 
WINAPI


537 
	$Subåa˘Re˘
–
LPRECT
 
de°
, c⁄° 
RECT
 *
§c1
, c⁄° RECT *
§c2
 )

539 
RECT
 
tmp
;

541 i‡(
	`IsRe˘Em±y
–
§c1
 ))

543 
	`SëRe˘Em±y
–
de°
 );

544  
FALSE
;

546 *
de°
 = *
§c1
;

547 i‡(
	`I¡î£˘Re˘
–&
tmp
, 
§c1
, 
§c2
 ))

549 i‡(
	`EquÆRe˘
–&
tmp
, 
de°
 ))

551 
	`SëRe˘Em±y
–
de°
 );

552  
FALSE
;

554 i‡((
tmp
.
t›
 =
de°
->t›Ë&& (tmp.
bŸtom
 == dest->bottom))

556 i‡(
tmp
.
À·
 =
de°
->À·Ëde°->À· =Åmp.
right
;

557 i‡(
tmp
.
right
 =
de°
->rightËde°->righàtmp.
À·
;

559 i‡((
tmp
.
À·
 =
de°
->À·Ë&& (tmp.
right
 == dest->right))

561 i‡(
tmp
.
t›
 =
de°
->t›Ëde°->t› =Åmp.
bŸtom
;

562 i‡(
tmp
.
bŸtom
 =
de°
->bŸtomËde°->bŸtom =Åmp.
t›
;

565  
TRUE
;

566 
	}
}

	@mwin/winsbar.c

8 
	#MWINCLUDECOLORS


	)

9 
	~"wödows.h
"

10 
	~"wöã∫.h
"

11 
	~"wötoﬁs.h
"

12 
	~<°dlib.h
>

13 
	~<°rög.h
>

14 
	~<°dio.h
>

17 
	#SBS_UNKNOWN
 0x0000

	)

18 
	#SBS_LEFTARROW
 0x0001

	)

19 
	#SBS_RIGHTARROW
 0x0002

	)

20 
	#SBS_LEFTSPACE
 0x0004

	)

21 
	#SBS_RIGHTSPACE
 0x0008

	)

22 
	#SBS_HORZTHUMB
 0x0010

	)

23 
	#SBS_UPARROW
 0x0020

	)

24 
	#SBS_DOWNARROW
 0x0040

	)

25 
	#SBS_UPSPACE
 0x0080

	)

26 
	#SBS_DOWNSPACE
 0x0100

	)

27 
	#SBS_VERTTHUMB
 0x0200

	)

28 
	#SBS_MASK
 0x03ff

	)

29 
	#SBS_DISABLED
 0x4000

	)

30 
	#SBS_HIDE
 0x8000

	)

32 
	#HSCROLLBARVISIBLE
(
hwnd
Ë((hwnd)->
°yÀ
 & 
WS_HSCROLL
)

	)

33 
	#VSCROLLBARVISIBLE
(
hwnd
Ë((hwnd)->
°yÀ
 & 
WS_VSCROLL
)

	)

40 
	$MwAdju°NCS¸ﬁlb¨s
(
HWND
 
hwnd
)

42 
BOOL
 
vîtb¨
 = 
	`VSCROLLBARVISIBLE
(
hwnd
);

43 
BOOL
 
h‹zb¨
 = 
	`HSCROLLBARVISIBLE
(
hwnd
);

45 i‡(
vîtb¨
) {

46 
hwnd
->
˛úe˘
.
right
 -
mwSYSMETRICS_CXVSCROLL
;

47 i‡(
h‹zb¨
)

48 
hwnd
->
˛úe˘
.
bŸtom
 -
mwSYSMETRICS_CYHSCROLL
;

49 
hwnd
->
vs¸ﬁl
.
rc
.
À·
 = hwnd->
˛úe˘
.
right
;

50 
hwnd
->
vs¸ﬁl
.
rc
.
right
 = hwnd->
˛úe˘
.right +

51 
mwSYSMETRICS_CXVSCROLL
;

52 
hwnd
->
vs¸ﬁl
.
rc
.
t›
 = hwnd->
˛úe˘
.top;

53 
hwnd
->
vs¸ﬁl
.
rc
.
bŸtom
 = hwnd->
˛úe˘
.bottom;

55 
	`SëRe˘Em±y
(&
hwnd
->
vs¸ﬁl
.
rc
);

56 i‡(
h‹zb¨
) {

57 i‡(!
vîtb¨
)

58 
hwnd
->
˛úe˘
.
bŸtom
 -
mwSYSMETRICS_CYHSCROLL
;

59 
hwnd
->
hs¸ﬁl
.
rc
.
t›
 = hwnd->
˛úe˘
.
bŸtom
;

60 
hwnd
->
hs¸ﬁl
.
rc
.
bŸtom
 = hwnd->
˛úe˘
.bottom +

61 
mwSYSMETRICS_CYHSCROLL
;

62 
hwnd
->
hs¸ﬁl
.
rc
.
À·
 = hwnd->
˛úe˘
.left;

63 
hwnd
->
hs¸ﬁl
.
rc
.
right
 = hwnd->
˛úe˘
.right;

65 
	`SëRe˘Em±y
(&
hwnd
->
hs¸ﬁl
.
rc
);

66 
	}
}

69 
	$wndGëB‹dî
(
HWND
 
hwnd
)

71 i‡(
hwnd
->
°yÀ
 & 
WS_BORDER
) {

72 i‡((
hwnd
->
°yÀ
 & 
WS_CAPTION
) == WS_CAPTION)

73  
mwSYSMETRICS_CXFRAME
;

74  
mwSYSMETRICS_CXBORDER
;

77 
	}
}

79 
BOOL


80 
	$wndGëVS¸ﬁlB¨Re˘
 (
HWND
 
hwnd
, 
RECT
* 
rcVB¨
)

82 i‡(
hwnd
->
°yÀ
 & 
WS_VSCROLL
) {

83 
rcVB¨
->
À·
 = 
hwnd
->
wöª˘
.
right
 - 
mwSYSMETRICS_CXVSCROLL


84 - 
	`wndGëB‹dî
 (
hwnd
);

85 
rcVB¨
->
right
 = 
hwnd
->
wöª˘
.righà- 
	`wndGëB‹dî
 (hwnd);

86 
rcVB¨
->
t›
 = 
hwnd
->
˛úe˘
.top;

87 
rcVB¨
->
bŸtom
 = 
hwnd
->
wöª˘
.bŸtom - 
	`wndGëB‹dî
 (hwnd);

89 i‡(
hwnd
->
°yÀ
 & 
WS_HSCROLL
 && !(hwnd->
hs¸ﬁl
.
°©us
 & 
SBS_HIDE
))

90 
rcVB¨
->
bŸtom
 -
mwSYSMETRICS_CYHSCROLL
;

92  
TRUE
;

95  
FALSE
;

96 
	}
}

98 
BOOL


99 
	$wndGëHS¸ﬁlB¨Re˘
 (
HWND
 
hwnd
, 
RECT
* 
rcHB¨
)

101 i‡(
hwnd
->
°yÀ
 & 
WS_HSCROLL
) {

102 
rcHB¨
->
t›
 = 
hwnd
->
wöª˘
.
bŸtom
 - 
mwSYSMETRICS_CYHSCROLL


103 - 
	`wndGëB‹dî
 (
hwnd
);

104 
rcHB¨
->
bŸtom
 = 
hwnd
->
wöª˘
.bŸtom - 
	`wndGëB‹dî
 (hwnd);

105 
rcHB¨
->
À·
 = 
hwnd
->
˛úe˘
.left;

106 
rcHB¨
->
right
 = 
hwnd
->
wöª˘
.righà- 
	`wndGëB‹dî
 (hwnd);

108 i‡(
hwnd
->
°yÀ
 & 
WS_VSCROLL
 && !(hwnd->
vs¸ﬁl
.
°©us
 & 
SBS_HIDE
))

109 
rcHB¨
->
right
 -
mwSYSMETRICS_CXVSCROLL
;

111  
TRUE
;

114  
FALSE
;

115 
	}
}

118 
	$MwPaötNCS¸ﬁlb¨s
(
HWND
 
hwnd
, 
HDC
 
hdc
)

120 
BOOL
 
vîtb¨
 = 
	`VSCROLLBARVISIBLE
(
hwnd
);

121 
BOOL
 
h‹zb¨
 = 
	`HSCROLLBARVISIBLE
(
hwnd
);

122 
BOOL
 
fGŸDC
 = 
FALSE
;

123 
RECT
 
rc
,
rc2
;

125 
POINT
 
p3
[3];

126 
shrök
=2;

128 
°¨t
 = 0;

129 
RECT
 
rcHB¨
, 
rcVB¨
;

132 i‡(!
hdc
 && (
h‹zb¨
 || 
vîtb¨
)) {

133 
hdc
 = 
	`GëWödowDC
(
hwnd
);

134 
fGŸDC
 = 
TRUE
;

137 i‡(
h‹zb¨
 && 
vîtb¨
) {

138 
rc
.
À·
 = 
hwnd
->
˛úe˘
.
right
;

139 
rc
.
t›
 = 
hwnd
->
˛úe˘
.
bŸtom
;

140 
rc
.
right
 =Ñc.
À·
 + 
mwSYSMETRICS_CXVSCROLL
;

141 
rc
.
bŸtom
 =Ñc.
t›
 + 
mwSYSMETRICS_CYHSCROLL
;

142 
	`FûlRe˘
(
hdc
, &
rc
, (
HBRUSH
)(
COLOR_BTNFACE
+1));

144 i‡(
vîtb¨
) {

145 
rc
 = 
hwnd
->
vs¸ﬁl
.rc;

148 
rc2
.
À·
=
rc
.À·;Ñc2.
right
Ùc2.À·+ 
mwSYSMETRICS_CXVSCROLL
;

149 
rc2
.
t›
=
rc
.top;

150 
rc2
.
bŸtom
Ùc2.
t›
+ 
mwSYSMETRICS_CYHSCROLL
;

151 
	`FûlRe˘
(
hdc
, &
rc2
, (
HBRUSH
)(
COLOR_BTNFACE
+1));

152 
rc2
.
t›
=
rc
.
bŸtom
- 
mwSYSMETRICS_CYHSCROLL
;

153 
rc2
.
bŸtom
Ùc2.
t›
+ 
mwSYSMETRICS_CYHSCROLL
;

154 
	`FûlRe˘
(
hdc
, &
rc2
, (
HBRUSH
)(
COLOR_BTNFACE
+1));

157 
	`Døw3dUpDownSèã
(
hdc
, 
rc
.
À·
,Ñc.
t›
,

158 
mwSYSMETRICS_CXVSCROLL
, 
mwSYSMETRICS_CYHSCROLL
,

159 
hwnd
->
vs¸ﬁl
.
°©us
 & 
SBS_UPARROW
);

161 
	`Døw3dUpDownSèã
(
hdc
, 
rc
.
À·
,rc.
bŸtom
-
mwSYSMETRICS_CYHSCROLL
,

162 
mwSYSMETRICS_CXVSCROLL
, 
mwSYSMETRICS_CYHSCROLL
,

163 
hwnd
->
vs¸ﬁl
.
°©us
 & 
SBS_DOWNARROW
);

165 
	`Sñe˘Obje˘
(
hdc
,
	`GëStockObje˘
(
BLACK_BRUSH
));

167 
p3
[0].
x

rc
.
À·
 + (
mwSYSMETRICS_CXVSCROLL
/2) - 1;

168 
p3
[0].
y

rc
.
t›
 + 2 + 
shrök
;

169 
p3
[1].
x

rc
.
À·
 + 2 + 
shrök
 - 1;

170 
p3
[1].
y

rc
.
t›
 + (
mwSYSMETRICS_CYHSCROLL
-4Ë- 
shrök
;

171 
p3
[2].
x

rc
.
À·
 + (
mwSYSMETRICS_CXVSCROLL
-4Ë- 
shrök
;

172 
p3
[2].
y

rc
.
t›
 + (
mwSYSMETRICS_CYHSCROLL
-4Ë- 
shrök
;

173 
	`Pﬁyg⁄
(
hdc
,
p3
,3);

175 
p3
[0].
x

rc
.
À·
 + (
mwSYSMETRICS_CXVSCROLL
/2) - 1;

176 
p3
[0].
y

rc
.
bŸtom
 - 4 - 
shrök
;

177 
p3
[1].
x

rc
.
À·
 + 2 + 
shrök
 - 1;

178 
p3
[1].
y

rc
.
bŸtom
-
mwSYSMETRICS_CYHSCROLL
 + 2 + 
shrök
;

179 
p3
[2].
x

rc
.
À·
 + (
mwSYSMETRICS_CXVSCROLL
-4Ë- 
shrök
;

180 
p3
[2].
y

rc
.
bŸtom
-
mwSYSMETRICS_CYHSCROLL
 + 2 + 
shrök
;

181 
	`Pﬁyg⁄
(
hdc
,
p3
,3);

185 
	`wndGëVS¸ﬁlB¨Re˘
 (
hwnd
, &
rcVB¨
);

186 
rcVB¨
.
À·
 -- ;

187 
rcVB¨
.
right
 -- ;

189 
°¨t
 = 
rcVB¨
.
t›
 + 
mwSYSMETRICS_CYVSCROLL
 + 
hwnd
->
vs¸ﬁl
.
b¨Sèπ
;

191 i‡(
°¨t
 + 
hwnd
->
vs¸ﬁl
.
b¨Lí
 > 
rcVB¨
.
bŸtom
)

192 
°¨t
 = 
rcVB¨
.
bŸtom
 - 
hwnd
->
vs¸ﬁl
.
b¨Lí
;

194 i‡(
hwnd
->
vs¸ﬁl
.
b¨Lí
 == 0)

195 
hwnd
->
vs¸ﬁl
.
b¨Lí
=
rc
.
bŸtom
-rc.
t›
-(
mwSYSMETRICS_CYVSCROLL
*2);

198 
rc2
.
À·
=
rc
.À·;Ñc2.
right
=rc.right ;

199 
rc2
.
t›
=
rc
.t›+
mwSYSMETRICS_CYHSCROLL
;

200 
rc2
.
bŸtom
=
°¨t
;

201 i‡(
rc2
.
bŸtom
>rc2.
t›
)

202 
	`FûlRe˘
(
hdc
, &
rc2
, (
HBRUSH
)
	`GëStockObje˘
(
DKGRAY_BRUSH
));

204 
rc2
.
t›
=
°¨t
+
hwnd
->
vs¸ﬁl
.
b¨Lí
;

205 
rc2
.
bŸtom
=
rc
.bŸtom-
mwSYSMETRICS_CYHSCROLL
;

206 i‡(
rc2
.
bŸtom
>rc2.
t›
)

207 
	`FûlRe˘
(
hdc
, &
rc2
, (
HBRUSH
)
	`GëStockObje˘
(
DKGRAY_BRUSH
));

209 
	`Døw3dUpFøme
 (
hdc
, 
rcVB¨
.
À·
, 
°¨t
,ÑcVB¨.
right
,

210 
°¨t
 + 
hwnd
->
vs¸ﬁl
.
b¨Lí
);

215 i‡(
h‹zb¨
) {

216 
rc
 = 
hwnd
->
hs¸ﬁl
.rc;

220 
rc2
.
t›
=
rc
.t›;Ñc2.
bŸtom
Ùc2.t›+ 
mwSYSMETRICS_CYHSCROLL
;

221 
rc2
.
À·
=
rc
.left;

222 
rc2
.
right
Ùc2.
À·
+ 
mwSYSMETRICS_CXVSCROLL
;

223 
	`FûlRe˘
(
hdc
, &
rc2
, (
HBRUSH
)(
COLOR_BTNFACE
+1));

224 
rc2
.
À·
=
rc
.
right
- 
mwSYSMETRICS_CXVSCROLL
;

225 
rc2
.
right
Ùc2.
À·
+ 
mwSYSMETRICS_CXVSCROLL
;

226 
	`FûlRe˘
(
hdc
, &
rc2
, (
HBRUSH
)(
COLOR_BTNFACE
+1));

230 
	`Døw3dUpDownSèã
(
hdc
, 
rc
.
À·
,Ñc.
t›
,

231 
mwSYSMETRICS_CXVSCROLL
, 
mwSYSMETRICS_CYHSCROLL
,

232 
hwnd
->
hs¸ﬁl
.
°©us
 & 
SBS_LEFTARROW
);

234 
	`Døw3dUpDownSèã
(
hdc
, 
rc
.
right
-
mwSYSMETRICS_CXVSCROLL
,Ñc.
t›
,

235 
mwSYSMETRICS_CXVSCROLL
, 
mwSYSMETRICS_CYHSCROLL
,

236 
hwnd
->
hs¸ﬁl
.
°©us
 & 
SBS_RIGHTARROW
);

238 
	`Sñe˘Obje˘
(
hdc
,
	`GëStockObje˘
(
BLACK_BRUSH
));

240 
p3
[0].
x

rc
.
À·
 + 2 + 
shrök
;

241 
p3
[0].
y

rc
.
t›
 + (
mwSYSMETRICS_CYHSCROLL
/2) ;

242 
p3
[1].
x

rc
.
À·
 + (
mwSYSMETRICS_CXVSCROLL
-4Ë- 
shrök
 ;

243 
p3
[1].
y

rc
.
t›
 + 2 + 
shrök
;

244 
p3
[2].
x

rc
.
À·
 + (
mwSYSMETRICS_CXVSCROLL
-4Ë- 
shrök
;

245 
p3
[2].
y

rc
.
bŸtom
 - 4 - 
shrök
 + 1;

246 
	`Pﬁyg⁄
(
hdc
,
p3
,3);

248 
p3
[0].
x

rc
.
right
 - 4 - 
shrök
;

249 
p3
[0].
y

rc
.
t›
 + (
mwSYSMETRICS_CYHSCROLL
/2) ;

250 
p3
[1].
x

rc
.
right
-
mwSYSMETRICS_CXVSCROLL
 + 2 + 
shrök
 ;

251 
p3
[1].
y

rc
.
t›
 + 2 + 
shrök
;

252 
p3
[2].
x

rc
.
right
-
mwSYSMETRICS_CXVSCROLL
 + 2 + 
shrök
;

253 
p3
[2].
y

rc
.
bŸtom
 - 4 - 
shrök
 + 1;

254 
	`Pﬁyg⁄
(
hdc
,
p3
,3);

258 
	`wndGëHS¸ﬁlB¨Re˘
 (
hwnd
, &
rcHB¨
);

259 
rcHB¨
.
t›
 -- ;

260 
rcHB¨
.
bŸtom
 -- ;

262 
°¨t
 = 
rcHB¨
.
À·
 + 
mwSYSMETRICS_CXHSCROLL
 + 
hwnd
->
hs¸ﬁl
.
b¨Sèπ
;

264 i‡(
°¨t
 + 
hwnd
->
hs¸ﬁl
.
b¨Lí
 > 
rcHB¨
.
right
)

265 
°¨t
 = 
rcHB¨
.
right
 - 
hwnd
->
hs¸ﬁl
.
b¨Lí
;

267 i‡(
hwnd
->
hs¸ﬁl
.
b¨Lí
 == 0)

268 
hwnd
->
hs¸ﬁl
.
b¨Lí
=
rc
.
right
-rc.
À·
-(
mwSYSMETRICS_CXHSCROLL
*2);

271 
rc2
.
t›
=
rc
.t›;Ñc2.
bŸtom
=rc.bottom ;

272 
rc2
.
À·
=
rc
.À·+
mwSYSMETRICS_CXVSCROLL
;

273 
rc2
.
right
=
°¨t
;

274 i‡(
rc2
.
right
>rc2.
À·
)

275 
	`FûlRe˘
(
hdc
, &
rc2
, (
HBRUSH
)
	`GëStockObje˘
(
DKGRAY_BRUSH
));

277 
rc2
.
À·
=
°¨t
+
hwnd
->
hs¸ﬁl
.
b¨Lí
;

278 
rc2
.
right
=
rc
.right-
mwSYSMETRICS_CXVSCROLL
;

279 i‡(
rc2
.
right
>rc2.
À·
)

280 
	`FûlRe˘
(
hdc
, &
rc2
, (
HBRUSH
)
	`GëStockObje˘
(
DKGRAY_BRUSH
));

282 
	`Døw3dUpFøme
 (
hdc
, 
°¨t
, 
rcHB¨
.
t›
, sèπ + 
hwnd
->
hs¸ﬁl
.
b¨Lí
,

283 
rcHB¨
.
bŸtom
);

290 i‡(
fGŸDC
)

291 
	`Rñó£DC
(
hwnd
, 
hdc
);

292 
	}
}

296 
	$MwH™dÀNCMesßgeS¸ﬁlb¨
(
HWND
 
hwnd
, 
UINT
 
msg
, 
WPARAM
 
hôcode
, 
LPARAM
 
lP¨am
)

298 
pos
 = 
SBS_UNKNOWN
;

299 
BOOL
 
vîtb¨
 = 
	`VSCROLLBARVISIBLE
(
hwnd
);

300 
BOOL
 
h‹zb¨
 = 
	`HSCROLLBARVISIBLE
(
hwnd
);

301 * 
pSèt
;

302 
POINT
 
±
;

303 
RECT
 
rc
;

305 
BOOL
 
bDøw
;

307 
downPos
 = 
SBS_UNKNOWN
;

308 
sbCode
;

309 
√wThumbPos
;

311 
ôemMovóbÀ
,
ôemCou¡
,
ôemVisibÀ
,
moveR™ge
;

312 
moveT›
,
moveBŸtom
,
moveLe·
,
moveRight
;

314 
	`POINTSTOPOINT
(
±
, 
lP¨am
);

316 i‡(
hôcode
 =
HTVSCROLL
 && 
vîtb¨
)

318 
pSèt
 = &
hwnd
->
vs¸ﬁl
.
°©us
;

319 
rc
 = 
hwnd
->
vs¸ﬁl
.rc;

320 
rc
.
bŸtom
 =Ñc.
t›
 + 
mwSYSMETRICS_CYVSCROLL
;

321 i‡(
	`PtInRe˘
(&
rc
, 
±
))

323 
pos
 = 
SBS_UPARROW
;

326 
rc
.
bŸtom
 = 
hwnd
->
vs¸ﬁl
.rc.bottom;

327 
rc
.
t›
 =Ñc.
bŸtom
 - 
mwSYSMETRICS_CYVSCROLL
;

328 i‡(
	`PtInRe˘
(&
rc
, 
±
))

330 
pos
 = 
SBS_DOWNARROW
;

333 
pos
 = 
SBS_VERTTHUMB
;

334 } i‡(
hôcode
 =
HTHSCROLL
 && 
h‹zb¨
)

336 
pSèt
 = &
hwnd
->
hs¸ﬁl
.
°©us
;

337 
rc
 = 
hwnd
->
hs¸ﬁl
.rc;

338 
rc
.
right
 =Ñc.
À·
 + 
mwSYSMETRICS_CXHSCROLL
;

339 i‡(
	`PtInRe˘
(&
rc
, 
±
)) {

340 
pos
 = 
SBS_LEFTARROW
;

343 
rc
.
right
 = 
hwnd
->
hs¸ﬁl
.rc.right;

344 
rc
.
À·
 =Ñc.
right
 - 
mwSYSMETRICS_CXHSCROLL
;

345 i‡(
	`PtInRe˘
(&
rc
, 
±
)) {

346 
pos
 = 
SBS_RIGHTARROW
;

349 
pos
 = 
SBS_HORZTHUMB
;

355 i‡(
pos
 =
SBS_UNKNOWN
)

358 *
pSèt
 &~
SBS_MASK
;

360 i‡(
msg
 =
WM_NCLBUTTONDOWN
 || msg =
WM_NCLBUTTONDBLCLK
)

361 *
pSèt
 |
pos
;

362 *
pSèt
 &~
pos
;

364 i‡(
msg
 =
WM_NCLBUTTONDOWN
 || msg =
WM_NCLBUTTONDBLCLK
)

365 
bDøw
=
TRUE
;

367 i‡(
bDøw
)

368 
	`MwPaötNCS¸ﬁlb¨s
(
hwnd
, 
NULL
);

370 i‡(
pos
 =
SBS_UPARROW
 ||Öo†=
SBS_LEFTARROW
)

372 i‡(
hwnd
->
vs¸ﬁl
.
curPos
 !hwnd->vs¸ﬁl.
möPos
)

373 
sbCode
 = 
SB_LINEUP
;

375 i‡(
pos
 =
SBS_DOWNARROW
 ||Öo†=
SBS_RIGHTARROW
)

377 i‡(
hwnd
->
vs¸ﬁl
.
curPos
 !hwnd->vs¸ﬁl.
maxPos
)

378 
sbCode
 = 
SB_LINEDOWN
;

380 i‡(
pos
 =
SBS_VERTTHUMB
 ||Öo†=
SBS_HORZTHUMB
)

382 
sbCode
 = 
SB_THUMBTRACK
;

385 
msg
)

387 
WM_NCLBUTTONDOWN
:

388 
WM_NCLBUTTONDBLCLK
:

389 
downPos
 = 
pos
;

390 #i‡
MWCLIENT


391 
	`InvÆid©eRe˘
(
hwnd
,
NULL
,
TRUE
);

395 
WM_NCMOUSEMOVE
:

396 i‡(
hôcode
 =
HTVSCROLL
 && 
vîtb¨
)

398 i‡(
sbCode
 =
SB_THUMBTRACK
 && 
downPos
 =
SBS_VERTTHUMB
)

402 
rc
 = 
hwnd
->
vs¸ﬁl
.rc;

403 
moveT›
 = 
rc
.
t›
 + 
mwSYSMETRICS_CYVSCROLL
;

404 
moveBŸtom
 = 
hwnd
->
vs¸ﬁl
.
rc
.
bŸtom
 - 
mwSYSMETRICS_CYVSCROLL
;

405 
moveR™ge
 = 
moveBŸtom
 - 
moveT›
;

407 
ôemCou¡
 = 
hwnd
->
vs¸ﬁl
.
maxPos
 - hwnd->vs¸ﬁl.
möPos
 + 1;

408 
ôemVisibÀ
 = 
hwnd
->
vs¸ﬁl
.
∑geSãp
;

409 
ôemMovóbÀ
 = 
ôemCou¡
 - 
ôemVisibÀ
 + 1;

411 
√wThumbPos
 = ((
±
.
y
 - 
moveT›
Ë* 
ôemMovóbÀ
Ë/ 
moveR™ge
;

412 
	`¥ötf
("((%d-%d)*%d)/%d=%d\n",

413 
±
.
y
,
moveT›
,
ôemMovóbÀ
,
moveR™ge
,
√wThumbPos
);

415 i‡–
√wThumbPos
 >
hwnd
->
vs¸ﬁl
.
möPos
 &&

416 
√wThumbPos
 <
hwnd
->
vs¸ﬁl
.
maxPos
)

417 
	`SídMesßge
 (
hwnd
,

418 
WM_VSCROLL
, 
SB_THUMBTRACK
, 
√wThumbPos
);

423 i‡(
hôcode
 =
HTHSCROLL
 && 
h‹zb¨
)

425 i‡(
sbCode
 =
SB_THUMBTRACK
 && 
downPos
 =
SBS_HORZTHUMB
)

429 
rc
 = 
hwnd
->
hs¸ﬁl
.rc;

430 
moveLe·
 = 
rc
.
À·
 + 
mwSYSMETRICS_CXHSCROLL
;

431 
moveRight
 = 
hwnd
->
hs¸ﬁl
.
rc
.
right
 - 
mwSYSMETRICS_CXHSCROLL
;

432 
moveR™ge
 = 
moveRight
 - 
moveLe·
;

434 
ôemCou¡
 = 
hwnd
->
hs¸ﬁl
.
maxPos
 - hwnd->hs¸ﬁl.
möPos
 + 1;

435 
ôemVisibÀ
 = 
hwnd
->
hs¸ﬁl
.
∑geSãp
;

436 
ôemMovóbÀ
 = 
ôemCou¡
 - 
ôemVisibÀ
 + 1;

438 
√wThumbPos
 = ((
±
.
x
 - 
moveLe·
Ë* 
ôemMovóbÀ
Ë/ 
moveR™ge
;

439 
	`¥ötf
("((%d-%d)*%d)/%d=%d\n",

440 
±
.
y
,
moveLe·
,
ôemMovóbÀ
,
moveR™ge
,
√wThumbPos
);

442 i‡–
√wThumbPos
 >
hwnd
->
hs¸ﬁl
.
möPos
 &&

443 
√wThumbPos
 <
hwnd
->
hs¸ﬁl
.
maxPos
)

444 
	`SídMesßge
 (
hwnd
,

445 
WM_HSCROLL
, 
SB_THUMBTRACK
, 
√wThumbPos
);

452 
WM_NCLBUTTONUP
:

453 
bDøw
=
FALSE
;

454 
downPos
 = 
SBS_UNKNOWN
;

456 i‡(
sbCode
==
SB_THUMBTRACK
)

458 i‡(
hôcode
 =
HTVSCROLL
 && 
vîtb¨
)

462 
rc
 = 
hwnd
->
vs¸ﬁl
.rc;

463 
moveT›
 = 
rc
.
t›
 + 
mwSYSMETRICS_CYVSCROLL
;

464 
moveBŸtom
 = 
hwnd
->
vs¸ﬁl
.
rc
.
bŸtom
 - 
mwSYSMETRICS_CYVSCROLL
;

465 
moveR™ge
 = 
moveBŸtom
 - 
moveT›
;

467 
ôemCou¡
 = 
hwnd
->
vs¸ﬁl
.
maxPos
 - hwnd->vs¸ﬁl.
möPos
 + 1;

468 
ôemVisibÀ
 = 
hwnd
->
vs¸ﬁl
.
∑geSãp
;

469 
ôemMovóbÀ
 = 
ôemCou¡
 - 
ôemVisibÀ
 + 1;

471 
√wThumbPos
 = ((
±
.
y
 - 
moveT›
Ë* 
ôemMovóbÀ
Ë/ 
moveR™ge
;

472 
	`¥ötf
("((%d-%d)*%d)/%d=%d\n",

473 
±
.
y
,
moveT›
,
ôemMovóbÀ
,
moveR™ge
,
√wThumbPos
);

475 i‡–
√wThumbPos
 >
hwnd
->
vs¸ﬁl
.
möPos
 &&

476 
√wThumbPos
 <
hwnd
->
vs¸ﬁl
.
maxPos
)

477 
	`SídMesßge
 (
hwnd
,

478 
WM_VSCROLL
, 
SB_THUMBTRACK
, 
√wThumbPos
);

482 i‡(
hôcode
 =
HTHSCROLL
 && 
h‹zb¨
)

486 
rc
 = 
hwnd
->
hs¸ﬁl
.rc;

487 
moveLe·
 = 
rc
.
À·
 + 
mwSYSMETRICS_CXHSCROLL
;

488 
moveRight
 = 
hwnd
->
hs¸ﬁl
.
rc
.
right
 - 
mwSYSMETRICS_CXHSCROLL
;

489 
moveR™ge
 = 
moveRight
 - 
moveLe·
;

491 
ôemCou¡
 = 
hwnd
->
hs¸ﬁl
.
maxPos
 - hwnd->hs¸ﬁl.
möPos
 + 1;

492 
ôemVisibÀ
 = 
hwnd
->
hs¸ﬁl
.
∑geSãp
;

493 
ôemMovóbÀ
 = 
ôemCou¡
 - 
ôemVisibÀ
 + 1;

495 
√wThumbPos
 = ((
±
.
x
 - 
moveLe·
Ë* 
ôemMovóbÀ
Ë/ 
moveR™ge
;

496 
	`¥ötf
("((%d-%d)*%d)/%d=%d\n",

497 
±
.
y
,
moveLe·
,
ôemMovóbÀ
,
moveR™ge
,
√wThumbPos
);

499 i‡–
√wThumbPos
 >
hwnd
->
hs¸ﬁl
.
möPos
 &&

500 
√wThumbPos
 <
hwnd
->
hs¸ﬁl
.
maxPos
)

501 
	`SídMesßge
 (
hwnd
,

502 
WM_HSCROLL
, 
SB_THUMBTRACK
, 
√wThumbPos
);

508 i‡(
hôcode
 =
HTVSCROLL
 && 
vîtb¨
)

509 
	`SídMesßge
 (
hwnd
, 
WM_VSCROLL
, 
sbCode
, 0);

511 i‡(
hôcode
 =
HTHSCROLL
 && 
h‹zb¨
)

512 
	`SídMesßge
 (
hwnd
, 
WM_HSCROLL
, 
sbCode
, 0);

517 
	}
}

520 
BOOL


521 
	$PtInRe˘2
(c⁄° 
RECT
 *
Õrc
, 
x
, 
y
)

523 
POINT
 
p
;

525 
p
.
x
 = x;

526 
p
.
y
 = y;

527  
	`PtInRe˘
(
Õrc
, 
p
);

528 
	}
}

534 
	$wndS¸ﬁlB¨Pos
 (
HWND
 
hwnd
, 
BOOL
 
bIsHB¨
, 
RECT
* 
rcB¨
)

536 
UINT
 
moveR™ge
;

537 
PMWSCROLLBARINFO
 
pSB¨
;

539 i‡(
bIsHB¨
)

540 
pSB¨
 = &
hwnd
->
hs¸ﬁl
;

542 
pSB¨
 = &
hwnd
->
vs¸ﬁl
;

544 i‡(
pSB¨
->
möPos
 =pSB¨->
maxPos
) {

545 
pSB¨
->
°©us
 |
SBS_HIDE
;

549 i‡(
bIsHB¨
)

550 
moveR™ge
 = (
rcB¨
->
right
 -ÑcB¨->
À·
Ë- (
mwSYSMETRICS_CXHSCROLL
<<1);

552 
moveR™ge
 = (
rcB¨
->
bŸtom
 -ÑcB¨->
t›
Ë- (
mwSYSMETRICS_CYVSCROLL
<<1);

554 
	#MWM_DEFBARLEN
 18

	)

555 
	#MWM_MINBARLEN
 8

	)

557 i‡(
pSB¨
->
∑geSãp
 == 0)

559 
pSB¨
->
b¨Lí
 = 
MWM_DEFBARLEN
;

561 i‡(
pSB¨
->
b¨Lí
 > 
moveR™ge
)

562 
pSB¨
->
b¨Lí
 = 
MWM_MINBARLEN
;

566 
pSB¨
->
b¨Lí
 = 
moveR™ge
 *ÖSB¨->
∑geSãp
 /

567 (
pSB¨
->
maxPos
 -ÖSB¨->
möPos
 + 1);

568 i‡(
pSB¨
->
b¨Lí
 < 
MWM_MINBARLEN
)

569 
pSB¨
->
b¨Lí
 = 
MWM_MINBARLEN
;

572 
pSB¨
->
b¨Sèπ
 = 
moveR™ge
 * (pSB¨->
curPos
 -ÖSB¨->
möPos
) /

573 (
pSB¨
->
maxPos
 -ÖSB¨->
möPos
 + 1);

576 i‡(
pSB¨
->
b¨Sèπ
 +ÖSB¨->
b¨Lí
 > 
moveR™ge
)

577 
pSB¨
->
b¨Sèπ
 = 
moveR™ge
 -ÖSB¨->
b¨Lí
;

580 i‡(
pSB¨
->
b¨Sèπ
 < 0)

581 
pSB¨
->
b¨Sèπ
 = 0;

582 
	}
}

584 
PMWSCROLLBARINFO
 
	$wndGëS¸ﬁlB¨
 (
HWND
 
pWö
, 
iSB¨
)

586 i‡(
iSB¨
 =
SB_HORZ
) {

587 i‡(
pWö
->
°yÀ
 & 
WS_HSCROLL
)

588  &
pWö
->
hs¸ﬁl
;

590 i‡(
iSB¨
 =
SB_VERT
) {

591 i‡(
pWö
->
°yÀ
 & 
WS_VSCROLL
)

592  &
pWö
->
vs¸ﬁl
;

595  
NULL
;

596 
	}
}

598 
BOOL
 
	$E«bÀS¸ﬁlB¨
 (
HWND
 
hWnd
, 
iSB¨
, 
BOOL
 
bE«bÀ
)

600 
PMWSCROLLBARINFO
 
pSB¨
;

601 
HWND
 
pWö
;

602 
BOOL
 
bPªvSèã
;

603 
RECT
 
rcB¨
;

605 
pWö
 = (
HWND
)
hWnd
;

607 i‡–!(
pSB¨
 = 
	`wndGëS¸ﬁlB¨
 (
pWö
, 
iSB¨
)) )

608  
FALSE
;

610 
bPªvSèã
 = !(
pSB¨
->
°©us
 & 
SBS_DISABLED
);

612 i‡(
bE«bÀ
 && !
bPªvSèã
)

613 
pSB¨
->
°©us
 &~
SBS_DISABLED
;

614 i‡(!
bE«bÀ
 && 
bPªvSèã
)

615 
pSB¨
->
°©us
 |
SBS_DISABLED
;

617  
FALSE
;

619 i‡(
iSB¨
 =
SB_VERT
)

621 
	`wndGëVS¸ﬁlB¨Re˘
 (
pWö
, &
rcB¨
);

622 
rcB¨
.
À·
 --;

623 
rcB¨
.
right
 --;

627 
	`wndGëHS¸ﬁlB¨Re˘
 (
pWö
, &
rcB¨
);

628 
rcB¨
.
t›
 --;

629 
rcB¨
.
bŸtom
 --;

632 
	`SídMesßge
 (
hWnd
, 
WM_NCPAINT
, 0, (
LPARAM
)(&
rcB¨
));

634 
	`MwPaötNCS¸ﬁlb¨s
(
hWnd
,
NULL
);

637  
TRUE
;

638 
	}
}

640 
BOOL
 
	$GëS¸ﬁlPos
 (
HWND
 
hWnd
, 
iSB¨
, * 
pPos
)

642 
PMWSCROLLBARINFO
 
pSB¨
;

643 
HWND
 
pWö
;

645 
pWö
 = (
HWND
)
hWnd
;

647 i‡–!(
pSB¨
 = 
	`wndGëS¸ﬁlB¨
 (
pWö
, 
iSB¨
)) )

648  
FALSE
;

650 *
pPos
 = 
pSB¨
->
curPos
;

651  
TRUE
;

652 
	}
}

654 
BOOL
 
	$GëS¸ﬁlR™ge
 (
HWND
 
hWnd
, 
iSB¨
, * 
pMöPos
, * 
pMaxPos
)

656 
PMWSCROLLBARINFO
 
pSB¨
;

657 
HWND
 
pWö
;

659 
pWö
 = (
HWND
)
hWnd
;

661 i‡–!(
pSB¨
 = 
	`wndGëS¸ﬁlB¨
 (
pWö
, 
iSB¨
)) )

662  
FALSE
;

664 *
pMöPos
 = 
pSB¨
->
möPos
;

665 *
pMaxPos
 = 
pSB¨
->
maxPos
;

666  
TRUE
;

667 
	}
}

669 
BOOL
 
	$SëS¸ﬁlPos
 (
HWND
 
hWnd
, 
iSB¨
, 
iNewPos
)

671 
PMWSCROLLBARINFO
 
pSB¨
;

672 
HWND
 
pWö
;

673 
RECT
 
rcB¨
;

675 
pWö
 = (
HWND
)
hWnd
;

677 i‡–!(
pSB¨
 = 
	`wndGëS¸ﬁlB¨
 (
pWö
, 
iSB¨
)) )

678  
FALSE
;

680 i‡(
iNewPos
 < 
pSB¨
->
möPos
)

681 
pSB¨
->
curPos
 =ÖSB¨->
möPos
;

683 
pSB¨
->
curPos
 = 
iNewPos
;

686 
max
 = 
pSB¨
->
maxPos
;

687 
max
 -((
pSB¨
->
∑geSãp
 - 1) > 0)?(pSBar->pageStep - 1):0;

689 i‡(
pSB¨
->
curPos
 > 
max
)

690 
pSB¨
->
curPos
 = 
max
;

693 i‡(
iSB¨
 =
SB_VERT
)

695 
	`wndGëVS¸ﬁlB¨Re˘
 (
pWö
, &
rcB¨
);

696 
rcB¨
.
À·
 --;

697 
rcB¨
.
right
 --;

701 
	`wndGëHS¸ﬁlB¨Re˘
 (
pWö
, &
rcB¨
);

702 
rcB¨
.
t›
 --;

703 
rcB¨
.
bŸtom
 --;

706 
	`wndS¸ﬁlB¨Pos
 (
pWö
, 
iSB¨
 =
SB_HORZ
, &
rcB¨
);

709 
	`SídMesßge
 (
hWnd
, 
WM_NCPAINT
, 0, (
LPARAM
)(&
rcB¨
));

711 
	`MwPaötNCS¸ﬁlb¨s
(
hWnd
,
NULL
);

713  
TRUE
;

714 
	}
}

716 
BOOL
 
	$SëS¸ﬁlR™ge
 (
HWND
 
hWnd
, 
iSB¨
, 
iMöPos
, 
iMaxPos
)

718 
PMWSCROLLBARINFO
 
pSB¨
;

719 
HWND
 
pWö
;

720 
RECT
 
rcB¨
;

722 
pWö
 = (
HWND
)
hWnd
;

724 i‡–!(
pSB¨
 = 
	`wndGëS¸ﬁlB¨
 (
pWö
, 
iSB¨
)) )

725  
FALSE
;

727 
pSB¨
->
möPos
 = (
iMöPos
 < 
iMaxPos
)?iMinPos:iMaxPos;

728 
pSB¨
->
maxPos
 = (
iMöPos
 > 
iMaxPos
)?iMinPos:iMaxPos;

731 i‡(
pSB¨
->
curPos
 <ÖSB¨->
möPos
)

732 
pSB¨
->
curPos
 =ÖSB¨->
möPos
;

734 i‡(
pSB¨
->
∑geSãp
 <= 0)

735 
pSB¨
->
∑geSãp
 = 0;

736 i‡(
pSB¨
->
∑geSãp
 > (pSB¨->
maxPos
 -ÖSB¨->
möPos
 + 1))

737 
pSB¨
->
∑geSãp
 =ÖSB¨->
maxPos
 -ÖSB¨->
möPos
 + 1;

740 
max
 = 
pSB¨
->
maxPos
;

741 
max
 -((
pSB¨
->
∑geSãp
 - 1) > 0)?(pSBar->pageStep - 1):0;

743 i‡(
pSB¨
->
curPos
 > 
max
)

744 
pSB¨
->
curPos
 = 
max
;

747 i‡(
iSB¨
 =
SB_VERT
)

749 
	`wndGëVS¸ﬁlB¨Re˘
 (
pWö
, &
rcB¨
);

750 
rcB¨
.
À·
 --;

751 
rcB¨
.
right
 --;

755 
	`wndGëHS¸ﬁlB¨Re˘
 (
pWö
, &
rcB¨
);

756 
rcB¨
.
t›
 --;

757 
rcB¨
.
bŸtom
 --;

759 
	`wndS¸ﬁlB¨Pos
 (
pWö
, 
iSB¨
 =
SB_HORZ
, &
rcB¨
);

762 
	`SídMesßge
 (
hWnd
, 
WM_NCPAINT
, 0, (
LPARAM
)(&
rcB¨
));

764 
	`MwPaötNCS¸ﬁlb¨s
(
hWnd
,
NULL
);

767  
TRUE
;

768 
	}
}

770 
BOOL
 
	$SëS¸ﬁlInfo
 (
HWND
 
hWnd
, 
iSB¨
,

771 
LPCSCROLLINFO
 
Õsi
, 
BOOL
 
fRedøw
)

773 
PMWSCROLLBARINFO
 
pSB¨
;

774 
HWND
 
pWö
;

775 
RECT
 
rcB¨
;

777 
pWö
 = (
HWND
)
hWnd
;

779 i‡–!(
pSB¨
 = 
	`wndGëS¸ﬁlB¨
 (
pWö
, 
iSB¨
)) )

780  
FALSE
;

782 if–
Õsi
->
fMask
 & 
SIF_RANGE
 )

784 
pSB¨
->
möPos
 = (
Õsi
->
nMö
 <Üpsi->
nMax
)?lpsi->nMin:lpsi->nMax;

785 
pSB¨
->
maxPos
 = (
Õsi
->
nMö
 <Üpsi->
nMax
)?lpsi->nMax:lpsi->nMin;

788 if–
Õsi
->
fMask
 & 
SIF_POS
 )

789 
pSB¨
->
curPos
 = 
Õsi
->
nPos
;

791 if–
Õsi
->
fMask
 & 
SIF_PAGE
 )

792 
pSB¨
->
∑geSãp
 = 
Õsi
->
nPage
;

795 i‡(
pSB¨
->
curPos
 <ÖSB¨->
möPos
)

796 
pSB¨
->
curPos
 =ÖSB¨->
möPos
;

798 i‡(
pSB¨
->
∑geSãp
 <= 0)

799 
pSB¨
->
∑geSãp
 = 0;

800 i‡(
pSB¨
->
∑geSãp
 > (pSB¨->
maxPos
 -ÖSB¨->
möPos
 + 1))

801 
pSB¨
->
∑geSãp
 =ÖSB¨->
maxPos
 -ÖSB¨->
möPos
 + 1;

804 
max
 = 
pSB¨
->
maxPos
;

805 
max
 -((
pSB¨
->
∑geSãp
 - 1) > 0)?(pSBar->pageStep - 1):0;

807 i‡(
pSB¨
->
curPos
 > 
max
)

808 
pSB¨
->
curPos
 = 
max
;

811 if(
fRedøw
)

813 i‡(
iSB¨
 =
SB_VERT
)

815 
	`wndGëVS¸ﬁlB¨Re˘
 (
pWö
, &
rcB¨
);

816 
rcB¨
.
À·
 --;

817 
rcB¨
.
right
 --;

821 
	`wndGëHS¸ﬁlB¨Re˘
 (
pWö
, &
rcB¨
);

822 
rcB¨
.
t›
 --;

823 
rcB¨
.
bŸtom
 --;

825 
	`wndS¸ﬁlB¨Pos
 (
pWö
, 
iSB¨
 =
SB_HORZ
, &
rcB¨
);

828 
	`SídMesßge
 (
hWnd
, 
WM_NCPAINT
, 0, (
LPARAM
)(&
rcB¨
));

830 
	`MwPaötNCS¸ﬁlb¨s
(
hWnd
,
NULL
);

834  
TRUE
;

835 
	}
}

837 
BOOL
 
	$GëS¸ﬁlInfo
(
HWND
 
hWnd
, 
iSB¨
, 
LPSCROLLINFO
 
Õsi
)

839 
PMWSCROLLBARINFO
 
pSB¨
;

840 
HWND
 
pWö
;

842 
pWö
 = (
HWND
)
hWnd
;

844 i‡–!(
pSB¨
 = 
	`wndGëS¸ﬁlB¨
 (
pWö
, 
iSB¨
)) )

845  
FALSE
;

847 if–
Õsi
->
fMask
 & 
SIF_RANGE
 )

849 
Õsi
->
nMö
 = 
pSB¨
->
möPos
;

850 
Õsi
->
nMax
 = 
pSB¨
->
maxPos
;

853 if–
Õsi
->
fMask
 & 
SIF_POS
 )

855 
Õsi
->
nPos
 = 
pSB¨
->
curPos
;

858 if–
Õsi
->
fMask
 & 
SIF_PAGE
 )

859 
Õsi
->
nPage
 = 
pSB¨
->
∑geSãp
;

861  
TRUE
;

862 
	}
}

864 
BOOL
 
	$ShowS¸ﬁlB¨
 (
HWND
 
hWnd
, 
iSB¨
, 
BOOL
 
bShow
)

866 
PMWSCROLLBARINFO
 
pSB¨
;

867 
HWND
 
pWö
;

868 
BOOL
 
bPªvSèã
;

869 
RECT
 
rcB¨
;

871 
pWö
 = (
HWND
)
hWnd
;

873 i‡–!(
pSB¨
 = 
	`wndGëS¸ﬁlB¨
 (
pWö
, 
iSB¨
)) )

874  
FALSE
;

876 
bPªvSèã
 = !(
pSB¨
->
°©us
 & 
SBS_HIDE
);

878 i‡(
bShow
 && !
bPªvSèã
)

879 
pSB¨
->
°©us
 &~
SBS_HIDE
;

880 i‡(!
bShow
 && 
bPªvSèã
)

881 
pSB¨
->
°©us
 |
SBS_HIDE
;

883  
FALSE
;

885 
	`SídMesßge
 (
hWnd
, 
WM_CHANGESIZE
, 0, 0);

887 i‡(
iSB¨
 =
SB_VERT
)

888 
	`wndGëVS¸ﬁlB¨Re˘
 (
pWö
, &
rcB¨
);

890 
	`wndGëHS¸ﬁlB¨Re˘
 (
pWö
, &
rcB¨
);

893 
RECT
 
rcWö
, 
rcClõ¡
;

895 
	`mem˝y
 (&
rcWö
, &
pWö
->
wöª˘
.
À·
,  (
RECT
));

897 
rcClõ¡
.
À·
 = 0;

898 
rcClõ¡
.
t›
 = 0;

899 
rcClõ¡
.
right
 = 
pWö
->
˛úe˘
.righà-ÖWö->˛úe˘.
À·
;

900 
rcClõ¡
.
bŸtom
 = 
pWö
->
˛úe˘
.bŸtom -ÖWö->˛úe˘.
t›
;

902 
SídMesßge
 (
hWnd
, 
WM_SIZECHANGED
,

903 (
WPARAM
)&
rcWö
, (
LPARAM
)&
rcClõ¡
);

907 i‡(
bShow
) {

908 
	`SídMesßge
 (
hWnd
, 
WM_NCPAINT
, 0, 0);

911 
rcB¨
.
À·
 -
pWö
->
˛úe˘
.left;

912 
rcB¨
.
t›
 -
pWö
->
˛úe˘
.top;

913 
rcB¨
.
right
 -
pWö
->
˛úe˘
.
À·
;

914 
rcB¨
.
bŸtom
 -
pWö
->
˛úe˘
.
t›
;

915 
	`SídMesßge
 (
hWnd
, 
WM_NCPAINT
, 0, 0);

916 
	`InvÆid©eRe˘
 (
hWnd
, &
rcB¨
, 
TRUE
);

919  
TRUE
;

920 
	}
}

	@mwin/winuser.c

6 
	~"wödows.h
"

7 
	~"wöã∫.h
"

8 
	~"devi˚.h
"

9 
	~<°dlib.h
>

10 
	~<°rög.h
>

12 
	#PAINTONCE
 1

	)

13 
	#MOUSETEST
 1

	)

15 
MWLISTHEAD
 
	gmwMsgHód
;

16 
MWLISTHEAD
 
	gmwCœssHód
;

18 
	gmwSYSMETRICS_CYCAPTION
 = 12;

19 
	gmwSYSMETRICS_CXFRAME
 = 3;

20 
	gmwSYSMETRICS_CYFRAME
 = 3;

21 
	gmwSYSMETRICS_CXBORDER
 = 1;

22 
	gmwSYSMETRICS_CYBORDER
 = 1;

23 
	gmwSYSMETRICS_CXVSCROLL
 = 13;

24 
	gmwSYSMETRICS_CYHSCROLL
 = 13;

25 
	gmwSYSMETRICS_CXHSCROLL
 = 13;

26 
	gmwSYSMETRICS_CYVSCROLL
 = 13;

27 
	gmwSYSMETRICS_CXDOUBLECLK
 = 2;

28 
	gmwSYSMETRICS_CYDOUBLECLK
 = 2;

29 
	gmw∑ötSîül
 = 1;

30 
	gmw∑ötNC
 = 1;

31 
BOOL
 
	gmwf‹˚NC∑öt
 = 
FALSE
;

33 
MwOff£tChûdªn
(
HWND
 
hwnd
, 
offx
, 
offy
);

35 
LRESULT
 
WINAPI


36 
	$CÆlWödowProc
(
WNDPROC
 
ÕPªvWndFunc
, 
HWND
 
hwnd
, 
UINT
 
Msg
, 
WPARAM
 
wP¨am
,

37 
LPARAM
 
lP¨am
)

39  (*
ÕPªvWndFunc
)(
hwnd
, 
Msg
, 
wP¨am
, 
lP¨am
);

40 
	}
}

42 
LRESULT
 
WINAPI


43 
	$SídMesßge
(
HWND
 
hwnd
, 
UINT
 
Msg
,
WPARAM
 
wP¨am
,
LPARAM
 
lP¨am
)

45 if(
hwnd
 && hwnd->
pCœss
) {

46 
hwnd
->
∑ötSîül
 = 
mw∑ötSîül
;

47  (*
hwnd
->
pCœss
->
Õ‚WndProc
)(hwnd, 
Msg
, 
wP¨am
, 
lP¨am
);

50 
	}
}

52 
BOOL
 
WINAPI


53 
	$Po°Mesßge
(
HWND
 
hwnd
, 
UINT
 
Msg
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
)

55 
MSG
 * 
pMsg
;

57 #i‡
PAINTONCE


59 if(
Msg
 =
WM_PAINT
) {

60 
hwnd
->
gŸPaötMsg
 = 
PAINT_NEEDSPAINT
;

61  
TRUE
;

64 #i‡
MOUSETEST


66 if(
Msg
 =
WM_MOUSEMOVE
) {

67 
PMWLIST
 
p
;

68 
p
=
mwMsgHód
.
hód
;Ö;Öı->
√xt
) {

69 
pMsg
 = 
	`GdIãmAddr
(
p
, 
MSG
, 
lök
);

70 if(
pMsg
->
hwnd
 =hwnd &&ÖMsg->
mesßge
 =
Msg
) {

71 
pMsg
->
wP¨am
 = wParam;

72 
pMsg
->
lP¨am
 =ÜParam;

73 
pMsg
->
time
 = 
	`GëTickCou¡
();

74 
pMsg
->
±
.
x
 = 
curs‹x
;

75 
pMsg
->
±
.
y
 = 
curs‹y
;

76  
TRUE
;

81 
pMsg
 = 
	`GdIãmNew
(
MSG
);

82 if(!
pMsg
)

83  
FALSE
;

84 
pMsg
->
hwnd
 = hwnd;

85 
pMsg
->
mesßge
 = 
Msg
;

86 
pMsg
->
wP¨am
 = wParam;

87 
pMsg
->
lP¨am
 =ÜParam;

88 
pMsg
->
time
 = 
	`GëTickCou¡
();

89 
pMsg
->
±
.
x
 = 
curs‹x
;

90 
pMsg
->
±
.
y
 = 
curs‹y
;

91 
	`GdLi°Add
(&
mwMsgHód
, &
pMsg
->
lök
);

92  
TRUE
;

93 
	}
}

96 
BOOL
 
WINAPI


97 
	$Po°ThªadMesßge
(
DWORD
 
dwThªadId
, 
UINT
 
Msg
, 
WPARAM
 
wP¨am
, 
LPARAM
 
lP¨am
)

99  
	`Po°Mesßge
(
NULL
, 
Msg
, 
wP¨am
, 
lP¨am
);

100 
	}
}

102 
VOID
 
WINAPI


103 
	$Po°QuôMesßge
(
nExôCode
)

105 
	`Po°Mesßge
(
NULL
, 
WM_QUIT
, 
nExôCode
, 0L);

106 
	}
}

108 
BOOL


109 
	$chkPaötMsg
(
HWND
 
wp
, 
LPMSG
 
ÕMsg
)

116 if(
wp
->
gŸPaötMsg
 =
PAINT_NEEDSPAINT
 &&

117 (!
døgwp
 || døgw∞=
wp
)) {

118 
∑öt
:

119 
wp
->
gŸPaötMsg
 = 
PAINT_PAINTED
;

120 
ÕMsg
->
hwnd
 = 
wp
;

121 
ÕMsg
->
mesßge
 = 
WM_PAINT
;

122 
ÕMsg
->
wP¨am
 = 0;

123 
ÕMsg
->
lP¨am
 = 0;

124 
ÕMsg
->
time
 = 0;

125 
ÕMsg
->
±
.
x
 = 
curs‹x
;

126 
ÕMsg
->
±
.
y
 = 
curs‹y
;

127  
TRUE
;

128 } if(
døgwp
 && 
wp
->
gŸPaötMsg
 =
PAINT_NEEDSPAINT
) {

132 
	`MwSñe˘
();

133 if(
mwMsgHód
.
hód
 =
NULL
)

134 
∑öt
;

136  
FALSE
;

137 
	}
}

139 
BOOL
 
WINAPI


140 
	$PìkMesßge
(
LPMSG
 
ÕMsg
, 
HWND
 
hwnd
, 
UINT
 
uMsgFûãrMö
, UINT 
uMsgFûãrMax
,

141 
UINT
 
wRemoveMsg
)

143 
HWND
 
wp
;

144 
PMSG
 
pNxtMsg
;

147 if(
mwMsgHód
.
hód
 =
NULL
) {

148 #i‡
PAINTONCE


150 
wp
=
li°wp
; wp; wp=wp->
√xt
) {

151 if(!(
wp
->
°yÀ
 & 
WS_CHILD
)) {

152 if(
	`chkPaötMsg
(
wp
, 
ÕMsg
))

153  
TRUE
;

156 
wp
=
li°wp
; wp; wp=wp->
√xt
) {

157 if(
wp
->
°yÀ
 & 
WS_CHILD
) {

158 if(
	`chkPaötMsg
(
wp
, 
ÕMsg
))

159  
TRUE
;

163 
	`MwSñe˘
();

166 if(
mwMsgHód
.
hód
 =
NULL
)

167  
FALSE
;

169 
pNxtMsg
 = (
PMSG
)
mwMsgHód
.
hód
;

170 if(
wRemoveMsg
 & 
PM_REMOVE
)

171 
	`GdLi°Remove
(&
mwMsgHód
, &
pNxtMsg
->
lök
);

172 *
ÕMsg
 = *
pNxtMsg
;

173 if(
wRemoveMsg
 & 
PM_REMOVE
)

174 
	`GdIãmFªe
(
pNxtMsg
);

175  
TRUE
;

176 
	}
}

178 
BOOL
 
WINAPI


179 
	$GëMesßge
(
LPMSG
 
ÕMsg
,
HWND
 
hwnd
,
UINT
 
wMsgFûãrMö
,UINT 
wMsgFûãrMax
)

185 !
	`PìkMesßge
(
ÕMsg
, 
hwnd
, 
wMsgFûãrMö
, 
wMsgFûãrMax
,
PM_REMOVE
))

187  
ÕMsg
->
mesßge
 !
WM_QUIT
;

188 
	}
}

190 
BOOL
 
WINAPI


191 
	$Tøn¶©eMesßge
(
CONST
 
MSG
 *
ÕMsg
)

194 if(
ÕMsg
 && (ÕMsg->
mesßge
 =
WM_KEYDOWN
))

195 
	`Po°Mesßge
(
ÕMsg
->
hwnd
, 
WM_CHAR
,ÜpMsg->
wP¨am
,ÜpMsg->
lP¨am
);

196  
FALSE
;

197 
	}
}

199 
LONG
 
WINAPI


200 
	$Di•©chMesßge
(
CONST
 
MSG
 *
ÕMsg
)

202  
	`SídMesßge
(
ÕMsg
->
hwnd
,ÜpMsg->
mesßge
,ÜpMsg->
wP¨am
,

203 
ÕMsg
->
lP¨am
);

204 
	}
}

207 
PWNDCLASS


208 
	$MwFödCœssByName
(
LPCSTR
 
ÕCœssName
)

210 
PMWLIST
 
p
;

211 
PWNDCLASS
 
pCœss
;

213 
p
=
mwCœssHód
.
hód
;Ö;Öı->
√xt
) {

214 
pCœss
 = 
	`GdIãmAddr
(
p
, 
WNDCLASS
, 
lök
);

215 if(
	`°rcmpi
(
pCœss
->
szCœssName
, 
ÕCœssName
) == 0)

216  
pCœss
;

218  
NULL
;

219 
	}
}

221 
ATOM
 
WINAPI


222 
	$Regi°îCœss
(
CONST
 
WNDCLASS
 *
ÕWndCœss
)

224 
PWNDCLASS
 
pCœss
;

227 
pCœss
 = 
	`MwFödCœssByName
(
ÕWndCœss
->
ÕszCœssName
);

228 if(
pCœss
)

232 
pCœss
 = 
	`GdIãmNew
(
WNDCLASS
);

233 if(!
pCœss
)

235 *
pCœss
 = *
ÕWndCœss
;

236 
	`°r˝y
(
pCœss
->
szCœssName
, 
ÕWndCœss
->
ÕszCœssName
);

237 
	`GdLi°Add
(&
mwCœssHód
, &
pCœss
->
lök
);

240 
	}
}

242 
BOOL
 
WINAPI


243 
	$Uƒegi°îCœss
(
LPCSTR
 
ÕCœssName
, 
HINSTANCE
 
hIn°™˚
)

245 
PWNDCLASS
 
pCœss
;

247 
pCœss
 = 
	`MwFödCœssByName
(
ÕCœssName
);

248 if(!
pCœss
)

249  
FALSE
;

250 
	`GdLi°Remove
(&
mwCœssHód
, &
pCœss
->
lök
);

251 
	`DñëeObje˘
(
pCœss
->
hbrBackground
);

252 
	`GdIãmFªe
(
pCœss
);

253  
TRUE
;

254 
	}
}

256 
HWND
 
WINAPI


257 
	$Cª©eWödowEx
(
DWORD
 
dwExStyÀ
, 
LPCSTR
 
ÕCœssName
, LPCSTR 
ÕWödowName
,

258 
DWORD
 
dwStyÀ
, 
x
, 
y
, 
nWidth
, 
nHeight
,

259 
HWND
 
hwndP¨ít
, 
HMENU
 
hMíu
, 
HINSTANCE
 
hIn°™˚
, 
LPVOID
 
ÕP¨am
)

261 
HWND
 
pwp
;

262 
HWND
 
wp
;

263 
HWND
 
hwndOw√r
;

264 
PWNDCLASS
 
pCœss
;

265 
CREATESTRUCT
 
cs
;

266 
√xtx
 = 20;

267 
√xty
 = 20;

269 
pCœss
 = 
	`MwFödCœssByName
(
ÕCœssName
);

270 if(!
pCœss
)

271  
NULL
;

273 if(
x
 =
CW_USEDEFAULT
 || 
y
 == CW_USEDEFAULT) {

274 
x
 = 
√xtx
;

275 
√xtx
 += 10;

276 
y
 = 
√xty
;

277 
√xty
 += 10;

278 if(
√xtx
 > 200)

279 
√xtx
 = 
√xty
 = 20;

281 if(
nWidth
 =
CW_USEDEFAULT
 || 
nHeight
 == CW_USEDEFAULT) {

282 
nWidth
 = 250;

283 
nHeight
 = 250;

286 if(
hwndP¨ít
 =
NULL
) {

287 if(
dwStyÀ
 & 
WS_CHILD
)

288  
NULL
;

289 
pwp
 = 
roŸwp
;

291 
pwp
 = 
hwndP¨ít
;

294 if(
dwStyÀ
 & 
WS_POPUP
)

295 
pwp
 = 
roŸwp
;

298 if(
dwStyÀ
 & 
WS_CHILD
)

299 
hwndOw√r
 = 
NULL
;

300 
hwndOw√r
 = 
hwndP¨ít
;

302 
wp
 = (
HWND
)
	`GdIãmAŒoc
((
hwnd
Ë- 1 + 
pCœss
->
cbWndExåa
);

303 if(!
wp
)

304  
NULL
;

307 
dwStyÀ
 |
WS_CLIPSIBLINGS
 | 
WS_CLIPCHILDREN
;

309 
wp
->
pCœss
 =ÖClass;

310 
wp
->
°yÀ
 = 
dwStyÀ
;

311 
wp
->
ex°yÀ
 = 
dwExStyÀ
;

312 
wp
->
∑ª¡
 = 
pwp
;

313 
wp
->
ow√r
 = 
hwndOw√r
;

314 
wp
->
chûdªn
 = 
NULL
;

315 
wp
->
siblögs
 = 
pwp
->
chûdªn
;

316 
pwp
->
chûdªn
 = 
wp
;

317 
wp
->
√xt
 = 
li°wp
;

318 
li°wp
 = 
wp
;

319 
wp
->
wöª˘
.
À·
 = 
pwp
->
˛úe˘
.À· + 
x
;

320 
wp
->
wöª˘
.
t›
 = 
pwp
->
˛úe˘
.t› + 
y
;

321 
wp
->
wöª˘
.
right
 = wp->wöª˘.
À·
 + 
nWidth
;

322 
wp
->
wöª˘
.
bŸtom
 = wp->wöª˘.
t›
 + 
nHeight
;

323 
wp
->
curs‹
 = 
pwp
->cursor;

324 
wp
->
curs‹
->
u£cou¡
++;

325 
wp
->
unm≠cou¡
 = 
pwp
->unmapcount + 1;

326 
wp
->
id
 = ()
hMíu
;

327 
wp
->
gŸPaötMsg
 = 
PAINT_PAINTED
;

328 
	`°rz˝y
(
wp
->
szTôÀ
, 
ÕWödowName
, (wp->szTitle));

329 #i‡
UPDATEREGIONS


330 
wp
->
upd©e
 = 
	`GdAŒocRegi⁄
();

332 
wp
->
√xåabyãs
 = 
pCœss
->
cbWndExåa
;

335 
	`MwCÆcClõ¡Re˘
(
wp
);

337 
cs
.
ÕCª©eP¨ams
 = 
ÕP¨am
;

338 
cs
.
hIn°™˚
 = hInstance;

339 
cs
.
hMíu
 = hMenu;

340 
cs
.
hwndP¨ít
 = hwndParent;

341 
cs
.
cy
 = 
nHeight
;

342 
cs
.
cx
 = 
nWidth
;

343 
cs
.
y
 = y;

344 
cs
.
x
 = x;

345 
cs
.
°yÀ
 = 
dwStyÀ
;

346 
cs
.
ÕszName
 = 
ÕWödowName
;

347 
cs
.
ÕszCœss
 = 
ÕCœssName
;

348 
cs
.
dwExStyÀ
 = dwExStyle;

350 if(
	`SídMesßge
(
wp
, 
WM_CREATE
, 0, (
LPARAM
)(
LPSTR
)&
cs
) == -1) {

351 
	`MwDe°royWödow
(
wp
, 
FALSE
);

352  
NULL
;

356 
	`MwSídSizeMove
(
wp
, 
TRUE
, TRUE);

358 if(
wp
->
°yÀ
 & 
WS_VISIBLE
) {

359 
	`MwShowWödow
(
wp
, 
TRUE
);

360 
	`SëFocus
(
wp
);

363  
wp
;

364 
	}
}

366 
BOOL
 
WINAPI


367 
	$De°royWödow
(
HWND
 
hwnd
)

369 
	`MwDe°royWödow
(
hwnd
, 
TRUE
);

370  
TRUE
;

371 
	}
}

378 
	$MwDe°royWödow
(
HWND
 
hwnd
,
BOOL
 
bSídMsg
)

380 
HWND
 
wp
 = 
hwnd
;

381 
HWND
 
¥evwp
;

382 
PMWLIST
 
p
;

383 
PMSG
 
pmsg
;

385 i‡(
wp
 =
roŸwp
)

391 i‡(
wp
->
unm≠cou¡
 == 0)

392 
	`MwHideWödow
(
wp
, 
FALSE
, FALSE);

394 if(
bSídMsg
)

395 
	`SídMesßge
(
hwnd
, 
WM_DESTROY
, 0, 0L);

400 
wp
->
pCœss
 = 
NULL
;

405 
wp
->
chûdªn
)

406 
	`MwDe°royWödow
(
wp
->
chûdªn
, 
bSídMsg
);

411 i‡(
wp
->
curs‹
->
u£cou¡
-- == 1) {

412 
	`‰ì
(
wp
->
curs‹
);

413 
wp
->
curs‹
 = 
NULL
;

419 
¥evwp
 = 
wp
->
∑ª¡
->
chûdªn
;

420 i‡(
¥evwp
 =
wp
)

421 
wp
->
∑ª¡
->
chûdªn
 = wp->
siblögs
;

423 
¥evwp
->
siblögs
 !
wp
)

424 
¥evwp
 =Öªvwp->
siblögs
;

425 
¥evwp
->
siblögs
 = 
wp
->siblings;

427 
wp
->
siblögs
 = 
NULL
;

432 
¥evwp
 = 
li°wp
;

433 i‡(
¥evwp
 =
wp
)

434 
li°wp
 = 
wp
->
√xt
;

436 
¥evwp
->
√xt
 !
wp
)

437 
¥evwp
 =Öªvwp->
√xt
;

438 
¥evwp
->
√xt
 = 
wp
->next;

440 
wp
->
√xt
 = 
NULL
;

448 
p
=
mwMsgHód
.
hód
;Ö; ) {

449 
pmsg
 = 
	`GdIãmAddr
(
p
, 
MSG
, 
lök
);

450 if(
pmsg
->
hwnd
 =
wp
) {

451 
p
 =Ö->
√xt
;

452 
	`GdLi°Remove
(&
mwMsgHód
, &
pmsg
->
lök
);

453 
	`GdIãmFªe
(
p
);

455 
p
 =Ö->
√xt
;

460 i‡(
wp
 =
ˇ±uªwp
) {

461 
ˇ±uªwp
 = 
NULL
;

462 
	`MwCheckMou£Wödow
();

465 i‡(
wp
 =
	`MwGëT›Wödow
(
focuswp
))

466 
	`SëFocus
(
roŸwp
->
chûdªn
?Ñootwp->children:Ñootwp);

469 if(
wp
->
owndc
) {

470 
HDC
 
hdc
 = 
wp
->
owndc
;

471 
wp
->
owndc
 = 
NULL
;

472 
	`Rñó£DC
(
wp
, 
hdc
);

474 #i‡
UPDATEREGIONS


475 
	`GdDe°royRegi⁄
(
wp
->
upd©e
);

477 
	`GdIãmFªe
(
wp
);

478 
	}
}

480 
BOOL
 
WINAPI


481 
	$IsWödow
(
HWND
 
hwnd
)

483 
HWND
 
wp
;

485 
wp
=
li°wp
; wp; wp=wp->
√xt
)

486 if(
wp
 =
hwnd
)

487  
TRUE
;

488  
FALSE
;

489 
	}
}

491 
BOOL
 
WINAPI


492 
	$ShowWödow
(
HWND
 
hwnd
, 
nCmdShow
)

494 if(!
hwnd
)

495  
FALSE
;

499 
nCmdShow
) {

500 
SW_HIDE
:

501 i‡(!(
hwnd
->
°yÀ
 & 
WS_VISIBLE
))

502  
FALSE
;

503 
	`MwHideWödow
(
hwnd
, 
TRUE
, TRUE);

504 
hwnd
->
°yÀ
 &~
WS_VISIBLE
;

508 i‡(
hwnd
->
°yÀ
 & 
WS_VISIBLE
)

509  
FALSE
;

510 
hwnd
->
°yÀ
 |
WS_VISIBLE
;

511 
	`MwShowWödow
(
hwnd
, 
TRUE
);

513  
TRUE
;

514 
	}
}

516 
BOOL
 
WINAPI


517 
	$InvÆid©eRe˘
(
HWND
 
hwnd
, 
CONST
 
RECT
 *
ÕRe˘
, 
BOOL
 
bEø£
)

520 if(!
hwnd
)

521 
	`MwRedøwS¸ìn
();

523 #i‡
UPDATEREGIONS


524 
RECT
 
rc
;

527 if(!
ÕRe˘
)

528 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

529 
rc
 = *
ÕRe˘
;

530 
rc
.
bŸtom
 +
mwSYSMETRICS_CYCAPTION
 +

531 
mwSYSMETRICS_CYFRAME
 + 1;

532 
rc
.
right
 +
mwSYSMETRICS_CXFRAME
;

533 
	`MwUni⁄Upd©eRegi⁄
(
hwnd
, 
rc
.
À·
,Ñc.
t›
,

534 
rc
.
right
-rc.
À·
,Ñc.
bŸtom
-rc.
t›
, 
TRUE
);

537 if(
hwnd
->
upd©e
->
numRe˘s
 != 0)

539 if(
hwnd
->
gŸPaötMsg
 =
PAINT_PAINTED
)

540 
hwnd
->
gŸPaötMsg
 = 
PAINT_NEEDSPAINT
;

542  
TRUE
;

543 
	}
}

545 #i‡
UPDATEREGIONS


547 
BOOL
 
WINAPI


548 
	$InvÆid©eRgn
(
HWND
 
hwnd
, 
HRGN
 
hrgn
, 
BOOL
 
bEø£
)

551 if(
hwnd
) {

552 if(!
hrgn
)

554  
	`InvÆid©eRe˘
(
hwnd
, 
NULL
, 
bEø£
);

557 
	`GdOff£tRegi⁄
(((
MWRGNOBJ
 *)
hrgn
)->
rgn
,

558 
hwnd
->
˛úe˘
.
À·
, hwnd->˛úe˘.
t›
);

559 
	`GdUni⁄Regi⁄
(
hwnd
->
upd©e
, hwnd->update,

560 ((
MWRGNOBJ
 *)
hrgn
)->
rgn
);

561 
	`GdOff£tRegi⁄
(((
MWRGNOBJ
 *)
hrgn
)->
rgn
,

562 -
hwnd
->
˛úe˘
.
À·
, -hwnd->˛úe˘.
t›
);

565 if(
hwnd
->
upd©e
->
numRe˘s
 != 0)

566 if(
hwnd
->
gŸPaötMsg
 =
PAINT_PAINTED
)

567 
hwnd
->
gŸPaötMsg
 = 
PAINT_NEEDSPAINT
;

569  
TRUE
;

570 
	}
}

572 
BOOL
 
WINAPI


573 
	$VÆid©eRe˘
(
HWND
 
hwnd
, 
CONST
 
RECT
 *
Õrc
)

575 
RECT
 
rc
;

577 if(!
hwnd
)

578 
	`MwRedøwS¸ìn
();

581 if(!
Õrc
)

582 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

583 
rc
 = *
Õrc
;

584 
rc
.
bŸtom
 +
mwSYSMETRICS_CYCAPTION
 +

585 
mwSYSMETRICS_CYFRAME
 + 1;

586 
rc
.
right
 +
mwSYSMETRICS_CXFRAME
;

587 
	`MwUni⁄Upd©eRegi⁄
(
hwnd
, 
rc
.
À·
,Ñc.
t›
,

588 
rc
.
right
-rc.
À·
,Ñc.
bŸtom
-rc.
t›
, 
FALSE
);

591 if(
hwnd
->
upd©e
->
numRe˘s
 == 0)

592 if(
hwnd
->
gŸPaötMsg
 =
PAINT_NEEDSPAINT
)

593 
hwnd
->
gŸPaötMsg
 = 
PAINT_PAINTED
;

595  
TRUE
;

596 
	}
}

599 
BOOL
 
WINAPI


600 
	$VÆid©eRgn
(
HWND
 
hwnd
, 
HRGN
 
hrgn
)

602 if(
hwnd
) {

603 if(!
hrgn
)

605  
	`VÆid©eRe˘
(
hwnd
, 
NULL
);

608 
	`GdOff£tRegi⁄
(((
MWRGNOBJ
 *)
hrgn
)->
rgn
,

609 
hwnd
->
˛úe˘
.
À·
, hwnd->˛úe˘.
t›
);

610 
	`GdSubåa˘Regi⁄
(
hwnd
->
upd©e
, hwnd->update,

611 ((
MWRGNOBJ
 *)
hrgn
)->
rgn
);

612 
	`GdOff£tRegi⁄
(((
MWRGNOBJ
 *)
hrgn
)->
rgn
,

613 -
hwnd
->
˛úe˘
.
À·
, -hwnd->˛úe˘.
t›
);

616 if(
hwnd
->
upd©e
->
numRe˘s
 == 0)

617 if(
hwnd
->
gŸPaötMsg
 =
PAINT_NEEDSPAINT
)

618 
hwnd
->
gŸPaötMsg
 = 
PAINT_PAINTED
;

620  
TRUE
;

621 
	}
}

624 
BOOL
 
WINAPI


625 
	$Upd©eWödow
(
HWND
 
hwnd
)

627 #i‡
PAINTONCE


628 if(
hwnd
 && hwnd->
gŸPaötMsg
 =
PAINT_NEEDSPAINT
) {

629 
	`SídMesßge
(
hwnd
, 
WM_PAINT
, 0, 0L);

630 
hwnd
->
gŸPaötMsg
 = 
PAINT_PAINTED
;

631  
TRUE
;

633  
FALSE
;

636 
	`SídMesßge
(
hwnd
, 
WM_PAINT
, 0, 0L);

637  
TRUE
;

639 
	}
}

641 
HWND
 
WINAPI


642 
	$GëFocus
(
VOID
)

644  
focuswp
;

645 
	}
}

647 
HWND
 
WINAPI


648 
	$SëFocus
(
HWND
 
hwnd
)

650 
HWND
 
ﬁdfocus
;

651 
HWND
 
t›
, 
t›2
;

654 if(!
hwnd
 || hwnd->
unm≠cou¡
)

655 
hwnd
 = 
roŸwp
;

657 if(
hwnd
 =
focuswp
)

658  
focuswp
;

660 
ﬁdfocus
 = 
focuswp
;

661 
	`SídMesßge
(
ﬁdfocus
, 
WM_KILLFOCUS
, (
WPARAM
)
hwnd
, 0L);

662 
focuswp
 = 
hwnd
;

663 
	`SídMesßge
(
focuswp
, 
WM_SETFOCUS
, (
WPARAM
)
ﬁdfocus
, 0L);

666 
t›
 = 
	`MwGëT›Wödow
(
ﬁdfocus
);

667 
t›2
 = 
	`MwGëT›Wödow
(
focuswp
);

668 if(
t›2
 !
t›
) {

670 
	`SídMesßge
(
t›
, 
WM_ACTIVATE
, (
WPARAM
)
	`MAKELONG
(
WA_INACTIVE
, 0),

671 (
LPARAM
)
t›2
);

673 
	`MwPaötNCAªa
(
t›
);

680 
	`MwUni⁄Upd©eRegi⁄
(
t›2
, 0, 0,

681 
t›2
->
wöª˘
.
right
-t›2->wöª˘.
À·
,

682 
mwSYSMETRICS_CYCAPTION
+4, 
TRUE
);

685 
	`SídMesßge
(
t›
, 
WM_ACTIVATE
, (
WPARAM
)
	`MAKELONG
(
WA_ACTIVE
, 0),

686 (
LPARAM
)
t›
);

687 
	`MwPaötNCAªa
(
t›2
);

690  
ﬁdfocus
;

691 
	}
}

695 
BOOL
 
WINAPI


696 
	$SëF‹egroundWödow
(
HWND
 
hwnd
)

699 
	`SëFocus
(
hwnd
);

702 
	`SëWödowPos
(
	`MwGëT›Wödow
(
hwnd
), 
HWND_TOP
, 0, 0, 0, 0,

703 
SWP_NOMOVE
|
SWP_NOSIZE
);

705  
TRUE
;

706 
	}
}

709 
HWND
 
WINAPI


710 
	$SëA˘iveWödow
(
HWND
 
hwnd
)

712 
HWND
 
ﬁdA˘ive
;

714 
ﬁdA˘ive
 = 
	`GëA˘iveWödow
();

715 
	`SëFocus
(
hwnd
);

716  
ﬁdA˘ive
;

717 
	}
}

720 
HWND
 
WINAPI


721 
	$GëA˘iveWödow
(
VOID
)

723  
	`MwGëT›Wödow
(
focuswp
);

724 
	}
}

727 
BOOL
 
WINAPI


728 
	$BrögWödowToT›
(
HWND
 
hwnd
)

730  
	`SëF‹egroundWödow
(
hwnd
);

731 
	}
}

733 
HWND
 
WINAPI


734 
	$GëDeskt›Wödow
(
VOID
)

736  
roŸwp
;

737 
	}
}

739 
HWND


740 
	$MwGëT›Wödow
(
HWND
 
hwnd
)

742 
hwnd
->
°yÀ
 & 
WS_CHILD
)

743 
hwnd
 = hwnd->
∑ª¡
;

744  
hwnd
;

745 
	}
}

747 
HWND
 
WINAPI


748 
	$GëP¨ít
(
HWND
 
hwnd
)

751 if(!
hwnd
 || !(hwnd->
°yÀ
 & (
WS_POPUP
|
WS_CHILD
)))

752  
NULL
;

753 if(
hwnd
->
°yÀ
 & 
WS_POPUP
)

754  
hwnd
->
ow√r
;

755  
hwnd
->
∑ª¡
;

756 
	}
}

758 
BOOL
 
WINAPI


759 
	$E«bÀWödow
(
HWND
 
hwnd
, 
BOOL
 
bE«bÀ
)

761 if(
bE«bÀ
 && (
hwnd
->
°yÀ
 & 
WS_DISABLED
)) {

763 
hwnd
->
°yÀ
 &~
WS_DISABLED
;

764 
	`SídMesßge
(
hwnd
, 
WM_ENABLE
, 
TRUE
, 0L);

765  
TRUE
;

767 if(!
bE«bÀ
 && !(
hwnd
->
°yÀ
 & 
WS_DISABLED
)) {

769 
hwnd
->
°yÀ
 |
WS_DISABLED
;

772 if(
hwnd
 =
focuswp
)

773 
	`SëFocus
(
NULL
);

774 
	`SídMesßge
(
hwnd
, 
WM_ENABLE
, 
FALSE
, 0L);

775  
FALSE
;

777  (
hwnd
->
°yÀ
 & 
WS_DISABLED
) != 0;

778 
	}
}

781 
BOOL
 
WINAPI


782 
	$Adju°WödowRe˘Ex
(
LPRECT
 
ÕRe˘
, 
DWORD
 
dwStyÀ
, 
BOOL
 
bMíu
, DWORD 
dwExStyÀ
)

784 
yoff£t
;

786 if(
dwStyÀ
 & 
WS_BORDER
) {

787 if((
dwStyÀ
 & 
WS_CAPTION
) == WS_CAPTION) {

788 
	`InÊ©eRe˘
(
ÕRe˘
, 
mwSYSMETRICS_CXFRAME
,

789 
mwSYSMETRICS_CYFRAME
);

790 
yoff£t
 = 
mwSYSMETRICS_CYCAPTION
 + 1;

791 
ÕRe˘
->
t›
 -
yoff£t
;

792 
ÕRe˘
->
bŸtom
 -
yoff£t
;

794 
	`InÊ©eRe˘
(
ÕRe˘
, 1, 1);

797 if(
ÕRe˘
->
À·
 < 0) {

798 
ÕRe˘
->
right
 -ÕRe˘->
À·
;

799 
ÕRe˘
->
À·
 = 0;

801 if(
ÕRe˘
->
t›
 < 0) {

802 
ÕRe˘
->
bŸtom
 -ÕRe˘->
t›
;

803 
ÕRe˘
->
t›
 = 0;

806  
TRUE
;

807 
	}
}

811 
	$MwCÆcClõ¡Re˘
(
HWND
 
hwnd
)

813 
NCCALCSIZE_PARAMS
 
nccs
;

816 
nccs
.
rgrc
[0] = 
hwnd
->
wöª˘
;

817 
	`SídMesßge
(
hwnd
, 
WM_NCCALCSIZE
, 
FALSE
, (
LPARAM
)(
LPSTR
)&
nccs
);

818 
hwnd
->
˛úe˘
 = 
nccs
.
rgrc
[0];

821 
	`MwAdju°NCS¸ﬁlb¨s
(
hwnd
);

822 
	}
}

824 
BOOL
 
WINAPI


825 
	$GëClõ¡Re˘
(
HWND
 
hwnd
, 
LPRECT
 
ÕRe˘
)

827 if(!
hwnd
 || !
ÕRe˘
)

828  
FALSE
;

831 
ÕRe˘
->
À·
 = 0;

832 
ÕRe˘
->
t›
 = 0;

833 
ÕRe˘
->
right
 = 
hwnd
->
˛úe˘
.righà- hwnd->˛úe˘.
À·
;

834 
ÕRe˘
->
bŸtom
 = 
hwnd
->
˛úe˘
.bŸtom - hwnd->˛úe˘.
t›
;

835  
TRUE
;

836 
	}
}

838 
BOOL
 
WINAPI


839 
	$GëWödowRe˘
(
HWND
 
hwnd
, 
LPRECT
 
ÕRe˘
)

841 if(!
hwnd
 || !
ÕRe˘
)

842  
FALSE
;

845 *
ÕRe˘
 = 
hwnd
->
wöª˘
;

846  
TRUE
;

847 
	}
}

849 
BOOL
 
WINAPI


850 
	$Clõ¡ToS¸ìn
(
HWND
 
hwnd
, 
LPPOINT
 
ÕPoöt
)

852 if(!
hwnd
 || !
ÕPoöt
)

853  
FALSE
;

854 
	`M≠WödowPoöts
(
hwnd
, 
NULL
, 
ÕPoöt
, 1);

855  
TRUE
;

856 
	}
}

858 
BOOL
 
WINAPI


859 
	$S¸ìnToClõ¡
(
HWND
 
hwnd
, 
LPPOINT
 
ÕPoöt
)

861 if(!
hwnd
 || !
ÕPoöt
)

862  
FALSE
;

863 
	`M≠WödowPoöts
(
NULL
, 
hwnd
, 
ÕPoöt
, 1);

864  
TRUE
;

865 
	}
}

867 
WINAPI


868 
	$M≠WödowPoöts
(
HWND
 
hwndFrom
, HWND 
hwndTo
, 
LPPOINT
 
ÕPoöts
, 
UINT
 
cPoöts
)

870 
MWCOORD
 
offx
 = 0;

871 
MWCOORD
 
offy
 = 0;

874 if(
hwndFrom
) {

875 
offx
 = 
hwndFrom
->
˛úe˘
.
À·
;

876 
offy
 = 
hwndFrom
->
˛úe˘
.
t›
;

880 if(
hwndTo
) {

881 
offx
 -
hwndTo
->
˛úe˘
.
À·
;

882 
offy
 -
hwndTo
->
˛úe˘
.
t›
;

886 
cPoöts
--) {

887 
ÕPoöts
->
x
 +
offx
;

888 
ÕPoöts
->
y
 +
offy
;

889 ++
ÕPoöts
;

891  ()
	`MAKELONG
(
offx
, 
offy
);

892 
	}
}

894 
BOOL
 
WINAPI


895 
	$SëRe˘
(
LPRECT
 
Õrc
, 
xLe·
, 
yT›
, 
xRight
, 
yBŸtom
)

897 
Õrc
->
À·
 = 
xLe·
;

898 
Õrc
->
t›
 = 
yT›
;

899 
Õrc
->
right
 = 
xRight
;

900 
Õrc
->
bŸtom
 = 
yBŸtom
;

901  
TRUE
;

902 
	}
}

904 
BOOL
 
WINAPI


905 
	$SëRe˘Em±y
(
LPRECT
 
Õrc
)

907 
Õrc
->
À·
 =Ü¥c->
right
 =Ü¥c->
t›
 =Ü¥c->
bŸtom
 = 0;

908  
TRUE
;

909 
	}
}

911 
BOOL
 
WINAPI


912 
	$C›yRe˘
(
LPRECT
 
ÕrcD°
, 
CONST
 
RECT
 *
ÕrcSrc
)

914 *
ÕrcD°
 = *
ÕrcSrc
;

915  
TRUE
;

916 
	}
}

918 
BOOL
 
WINAPI


919 
	$IsRe˘Em±y
(
CONST
 
RECT
 *
Õrc
)

923  
Õrc
->
right
 <Õrc->
À·
 ||Ü¥c->
bŸtom
 <Õrc->
t›
;

924 
	}
}

926 
BOOL
 
WINAPI


927 
	$InÊ©eRe˘
(
LPRECT
 
Õrc
, 
dx
, 
dy
)

929 
Õrc
->
À·
 -
dx
;

930 
Õrc
->
t›
 -
dy
;

931 
Õrc
->
right
 +
dx
;

932 
Õrc
->
bŸtom
 +
dy
;

933  
TRUE
;

934 
	}
}

936 
BOOL
 
WINAPI


937 
	$Off£tRe˘
(
LPRECT
 
Õrc
, 
dx
, 
dy
)

939 
Õrc
->
À·
 +
dx
;

940 
Õrc
->
right
 +
dx
;

941 
Õrc
->
t›
 +
dy
;

942 
Õrc
->
bŸtom
 +
dy
;

943  
TRUE
;

944 
	}
}

947 
BOOL
 
WINAPI


948 
	$MwPTINRECT
(
CONST
 
RECT
 *
Õrc
, 
POINT
 
±
)

950  (
±
.
x
 >
Õrc
->
À·
 &&Öt.x <Ü¥c->
right
 &&

951 
±
.
y
 >
Õrc
->
t›
 &&Öt.y <Ü¥c->
bŸtom
);

952 
	}
}

954 
LONG
 
WINAPI


955 
	$GëWödowL⁄g
(
HWND
 
hwnd
, 
nIndex
)

957 
nIndex
) {

958 
GWL_WNDPROC
:

959  (
LONG
)
hwnd
->
pCœss
->
Õ‚WndProc
;

960 
GWL_HINSTANCE
:

963 
GWL_HWNDPARENT
:

964  (
LONG
)
hwnd
->
∑ª¡
;

965 
GWL_ID
:

966  
hwnd
->
id
;

967 
GWL_STYLE
:

968  
hwnd
->
°yÀ
;

969 
GWL_EXSTYLE
:

970  
hwnd
->
ex°yÀ
;

971 
GWL_USERDATA
:

972  
hwnd
->
u£rd©a
;

974 if(
nIndex
+3 < 
hwnd
->
√xåabyãs
)

975  *(
LONG
 *)&
hwnd
->
exåabyãs
[
nIndex
];

978 
	}
}

980 
LONG
 
WINAPI


981 
	$SëWödowL⁄g
(
HWND
 
hwnd
, 
nIndex
, 
LONG
 
lNewL⁄g
)

983 
LONG
 
ﬁdvÆ
 = 0;

985 
nIndex
) {

986 
GWL_USERDATA
:

987 
ﬁdvÆ
 = 
hwnd
->
u£rd©a
;

988 
hwnd
->
u£rd©a
 = 
lNewL⁄g
;

990 
GWL_WNDPROC
:

991 
ﬁdvÆ
 = (
LONG
)
hwnd
->
pCœss
->
Õ‚WndProc
;

992 
hwnd
->
pCœss
->
Õ‚WndProc
 = (
WNDPROC
)
lNewL⁄g
;

994 
GWL_HINSTANCE
:

995 
GWL_HWNDPARENT
:

996 
GWL_ID
:

997 
GWL_STYLE
:

998 
GWL_EXSTYLE
:

1002 if(
nIndex
+3 < 
hwnd
->
√xåabyãs
) {

1003 
ﬁdvÆ
 = 
	`GëWödowL⁄g
(
hwnd
, 
nIndex
);

1004 *(
LONG
 *)&
hwnd
->
exåabyãs
[
nIndex
] = 
lNewL⁄g
;

1008  
ﬁdvÆ
;

1009 
	}
}

1011 
WORD
 
WINAPI


1012 
	$GëWödowW‹d
(
HWND
 
hwnd
, 
nIndex
)

1014 if(
nIndex
+1 < 
hwnd
->
√xåabyãs
)

1015  *(
WORD
 *)&
hwnd
->
exåabyãs
[
nIndex
];

1017 
	}
}

1019 
WORD
 
WINAPI


1020 
	$SëWödowW‹d
(
HWND
 
hwnd
, 
nIndex
, 
WORD
 
wNewW‹d
)

1022 
WORD
 
ﬁdvÆ
 = 0;

1024 if(
nIndex
+1 < 
hwnd
->
√xåabyãs
) {

1025 
ﬁdvÆ
 = 
	`GëWödowW‹d
(
hwnd
, 
nIndex
);

1026 *(
WORD
 *)&
hwnd
->
exåabyãs
[
nIndex
] = 
wNewW‹d
;

1028  
ﬁdvÆ
;

1029 
	}
}

1031 
DWORD
 
WINAPI


1032 
	$GëCœssL⁄g
(
HWND
 
hwnd
, 
nIndex
)

1034 
nIndex
) {

1035 
GCL_HBRBACKGROUND
:

1036  (
DWORD
)
hwnd
->
pCœss
->
hbrBackground
;

1037 
GCL_CBWNDEXTRA
:

1038  (
DWORD
)
hwnd
->
pCœss
->
cbWndExåa
;

1041 
	}
}

1043 
WINAPI


1044 
	$GëWödowTextLígth
(
HWND
 
hwnd
)

1046  
	`SídMesßge
(
hwnd
, 
WM_GETTEXTLENGTH
, 0, 0L);

1047 
	}
}

1049 
WINAPI


1050 
	$GëWödowText
(
HWND
 
hwnd
, 
LPSTR
 
ÕSåög
, 
nMaxCou¡
)

1052  
	`SídMesßge
(
hwnd
, 
WM_GETTEXT
, 
nMaxCou¡
,(
LPARAM
)(
LPSTR
)
ÕSåög
);

1053 
	}
}

1055 
BOOL
 
WINAPI


1056 
	$SëWödowText
(
HWND
 
hwnd
, 
LPCSTR
 
ÕSåög
)

1058  
	`SídMesßge
(
hwnd
, 
WM_SETTEXT
, 0, (
LPARAM
)(
LPCSTR
)
ÕSåög
);

1059 
	}
}

1063 
	$MwOff£tChûdªn
(
HWND
 
hwnd
, 
offx
, 
offy
)

1065 
HWND
 
˝
;

1068 
˝
=
hwnd
->
chûdªn
; cp; cp=˝->
siblögs
) {

1071 
	`Off£tRe˘
(&
˝
->
wöª˘
, 
offx
, 
offy
);

1072 
	`Off£tRe˘
(&
˝
->
˛úe˘
, 
offx
, 
offy
);

1075 if(!
	`IsRe˘Em±y
(&
˝
->
vs¸ﬁl
.
rc
))

1076 
	`Off£tRe˘
(&
˝
->
vs¸ﬁl
.
rc
, 
offx
, 
offy
);

1077 if(!
	`IsRe˘Em±y
(&
˝
->
hs¸ﬁl
.
rc
))

1078 
	`Off£tRe˘
(&
˝
->
hs¸ﬁl
.
rc
, 
offx
, 
offy
);

1079 
	`MwOff£tChûdªn
(
˝
, 
offx
, 
offy
);

1081 
	}
}

1083 
BOOL


1084 
	$SëWödowPos
(
HWND
 
hwnd
, HWND 
hwndIn£πA·î
, 
x
, 
y
, 
cx
, 
cy
,

1085 
UINT
 
fuFœgs
)

1087 
hiddí
;

1088 
BOOL
 
bMove
, 
bSize
, 
bZ‹dî
;

1089 
MWCOORD
 
offx
 = 0, 
offy
 = 0;

1090 
WINDOWPOS
 
wöpos
;

1092 if(!
hwnd
 || hwnd =
roŸwp
 || 
cx
 < 0 || 
cy
 < 0)

1093  
FALSE
;

1097 if((
fuFœgs
 & 
SWP_SHOWWINDOW
))

1098  
	`ShowWödow
(
hwnd
, 
SW_SHOW
);

1100 if((
fuFœgs
 & 
SWP_HIDEWINDOW
))

1101  
	`ShowWödow
(
hwnd
, 
SW_HIDE
);

1104 if(
hwnd
->
°yÀ
 & 
WS_CHILD
) {

1105 
x
 +
hwnd
->
∑ª¡
->
˛úe˘
.
À·
;

1106 
y
 +
hwnd
->
∑ª¡
->
˛úe˘
.
t›
;

1108 
x
 +
hwnd
->
∑ª¡
->
wöª˘
.
À·
;

1109 
y
 +
hwnd
->
∑ª¡
->
wöª˘
.
t›
;

1112 
bMove
 = !(
fuFœgs
 & 
SWP_NOMOVE
) &&

1113 (
hwnd
->
wöª˘
.
À·
 !
x
 || hwnd->wöª˘.
t›
 !
y
);

1114 
bSize
 = !(
fuFœgs
 & 
SWP_NOSIZE
) &&

1115 ((
hwnd
->
wöª˘
.
right
 - hwnd->wöª˘.
À·
Ë!
cx
 ||

1116 (
hwnd
->
wöª˘
.
bŸtom
 - hwnd->wöª˘.
t›
Ë!
cy
);

1117 
bZ‹dî
 = !(
fuFœgs
 & 
SWP_NOZORDER
);

1118 if(!
bMove
 && !
bSize
 && !
bZ‹dî
)

1119  
TRUE
;

1122 
hiddí
 = 
hwnd
->
unm≠cou¡
 || (
fuFœgs
 & 
SWP_NOREDRAW
);

1124 if(
bZ‹dî
) {

1125 ()
hwndIn£πA·î
) {

1126 ()
HWND_TOP
:

1127 
	`MwRai£Wödow
(
hwnd
);

1129 ()
HWND_BOTTOM
:

1130 
	`MwLowîWödow
(
hwnd
);

1137 if(!
hiddí
)

1138 
	`MwHideWödow
(
hwnd
, 
FALSE
, FALSE);

1141 if(
bMove
) {

1142 
offx
 = 
x
 - 
hwnd
->
wöª˘
.
À·
;

1143 
offy
 = 
y
 - 
hwnd
->
wöª˘
.
t›
;

1145 if(
bMove
 || 
bSize
) {

1146 
hwnd
->
wöª˘
.
À·
 = 
x
;

1147 
hwnd
->
wöª˘
.
t›
 = 
y
;

1148 
hwnd
->
wöª˘
.
right
 = 
x
 + 
cx
;

1149 
hwnd
->
wöª˘
.
bŸtom
 = 
y
 + 
cy
;

1151 if(
bMove
)

1152 
	`MwOff£tChûdªn
(
hwnd
, 
offx
, 
offy
);

1154 if(
bMove
 || 
bSize
) {

1155 
	`MwCÆcClõ¡Re˘
(
hwnd
);

1159 
wöpos
.
hwnd
 = hwnd;

1160 
wöpos
.
hwndIn£πA·î
 = hwndInsertAfter;

1161 
wöpos
.
x
 = x;

1162 
wöpos
.
y
 = y;

1163 
wöpos
.
cx
 = cx;

1164 
wöpos
.
cy
 = cy;

1165 
wöpos
.
Êags
 = 
fuFœgs
;

1166 
	`SídMesßge
(
hwnd
, 
WM_WINDOWPOSCHANGED
, 0, (
LPARAM
)&
wöpos
);

1168 
	`MwSídSizeMove
(
hwnd
, 
bSize
, 
bMove
);

1171 ++
mw∑ötSîül
;

1172 ++
mw∑ötNC
;

1173 if(!
bZ‹dî
 && !
hiddí
)

1174 
	`MwShowWödow
(
hwnd
, 
FALSE
);

1176  
TRUE
;

1177 
	}
}

1179 
BOOL
 
WINAPI


1180 
	$MoveWödow
(
HWND
 
hwnd
, 
x
, 
y
, 
nWidth
, 
nHeight
, 
BOOL
 
bRïaöt
)

1182 
UINT
 
Êags
 = 
SWP_NOZORDER
 | 
SWP_NOACTIVATE
;

1184 if(!
bRïaöt
)

1185 
Êags
 |
SWP_NOREDRAW
;

1186  
	`SëWödowPos
(
hwnd
, 0, 
x
, 
y
, 
nWidth
, 
nHeight
, 
Êags
);

1187 
	}
}

1190 
	$MwSídSizeMove
(
HWND
 
hwnd
, 
BOOL
 
bSize
, BOOL 
bMove
)

1192 
DWORD
 
dwStyÀ
;

1193 
RECT
 
rc
;

1195 if(
bSize
) {

1196 
	`GëClõ¡Re˘
(
hwnd
, &
rc
);

1197 
	`SídMesßge
(
hwnd
, 
WM_SIZE
, 
SIZE_RESTORED
,

1198 
	`MAKELONG
(
rc
.
right
,Ñc.
bŸtom
));

1200 if(
bMove
) {

1201 
dwStyÀ
 = 
	`GëWödowL⁄g
(
hwnd
, 
GWL_STYLE
);

1202 
	`GëWödowRe˘
(
hwnd
, &
rc
);

1204 if(
dwStyÀ
 & 
WS_CHILD
)

1205 
	`S¸ìnToClõ¡
(
hwnd
->
∑ª¡
, (
LPPOINT
)&
rc
.
À·
);

1206 
	`SídMesßge
(
hwnd
, 
WM_MOVE
, 0, 
	`MAKELONG
(
rc
.
À·
,Ñc.
t›
));

1208 
	}
}

1217 
	$MwSëCurs‹
(
HWND
 
wp
, 
PMWCURSOR
 
pcurs‹
)

1219 
HCURSOR
 
˝
;

1220 
byãs
;

1222 if(!
wp
 || !
pcurs‹
)

1225 
byãs
 = 
	`MWIMAGE_SIZE
(
pcurs‹
->
width
,pcurs‹->
height
)

1226 * (
MWIMAGEBITS
);

1232 
˝
 = 
wp
->
curs‹
;

1233 i‡(!
˝
 || cp->
u£cou¡
-- > 1) {

1234 
˝
 = 
	`GdIãmNew
(
hcurs‹
);

1235 if(!
˝
)

1239 
˝
->
u£cou¡
 = 1;

1240 
˝
->
curs‹
.
width
 = 
pcurs‹
->width;

1241 
˝
->
curs‹
.
height
 = 
pcurs‹
->height;

1242 
˝
->
curs‹
.
hŸx
 = 
pcurs‹
->hotx;

1243 
˝
->
curs‹
.
hŸy
 = 
pcurs‹
->hoty;

1244 
˝
->
curs‹
.
fgcﬁ‹
 = 
pcurs‹
->fgcolor;

1245 
˝
->
curs‹
.
bgcﬁ‹
 = 
pcurs‹
->bgcolor;

1246 
	`mem˝y
(
˝
->
curs‹
.
image
, 
pcurs‹
->image, 
byãs
);

1247 
	`mem˝y
(
˝
->
curs‹
.
mask
, 
pcurs‹
->mask, 
byãs
);

1248 
wp
->
curs‹
 = 
˝
;

1253 i‡(
˝
 =
curcurs‹
 || curcurs‹ =
NULL
) {

1254 
	`GdMoveCurs‹
(
curs‹x
 - 
˝
->
curs‹
.
hŸx
,

1255 
curs‹y
 - 
˝
->
curs‹
.
hŸy
);

1256 
	`GdSëCurs‹
(&
˝
->
curs‹
);

1258 
	}
}

1260 
BOOL
 
WINAPI


1261 
	$GëCurs‹Pos
(
LPPOINT
 
ÕPoöt
)

1263 
MWCOORD
 
x
, 
y
;

1265 if(
ÕPoöt
) {

1266 
	`GdGëCurs‹Pos
(&
x
, &
y
);

1267 
ÕPoöt
->
x
 = x;

1268 
ÕPoöt
->
y
 = y;

1269  
TRUE
;

1271  
FALSE
;

1272 
	}
}

1274 
HWND
 
WINAPI


1275 
	$GëC≠tuª
(
VOID
)

1277  
ˇ±uªwp
;

1278 
	}
}

1280 
HWND
 
WINAPI


1281 
	$SëC≠tuª
(
HWND
 
hwnd
)

1283 
HWND
 
ﬁdC≠tuª
 = 
ˇ±uªwp
;

1285 
ˇ±uªwp
 = 
hwnd
;

1286 
	`MwCheckMou£Wödow
();

1287  
ﬁdC≠tuª
;

1288 
	}
}

1290 
BOOL
 
WINAPI


1291 
	$Rñó£C≠tuª
(
VOID
)

1293 
ˇ±uªwp
 = 
NULL
;

1294 
	`MwCheckMou£Wödow
();

1295  
TRUE
;

1296 
	}
}

1298 
	stimî
 {

1299 
HWND
 
	mhwnd
;

1300 
UINT
 
	midTimî
;

1301 
UINT
 
	muTimeout
;

1302 
DWORD
 
	mdwClockExpúes
;

1303 
TIMERPROC
 
	mÕTimîFunc
;

1306 
timî
 
	gtimî
;

1308 
UINT
 
WINAPI


1309 
	$SëTimî
(
HWND
 
hwnd
, 
UINT
 
idTimî
, UINT 
uTimeout
, 
TIMERPROC
 
ÕTimîFunc
)

1311 
UINT
 
√xtID
 = 0;

1314 
timî
.
hwnd
 = hwnd;

1315 
timî
.
idTimî
 = 
hwnd
? idTimî: ++
√xtID
;

1316 
timî
.
uTimeout
 = uTimeout;

1317 
timî
.
dwClockExpúes
 = 
	`GëTickCou¡
(Ë+ 
uTimeout
;

1318 
timî
.
ÕTimîFunc
 =ÜpTimerFunc;

1320  
timî
.
idTimî
;

1321 
	}
}

1323 
BOOL
 
WINAPI


1324 
	$KûlTimî
(
HWND
 
hwnd
, 
UINT
 
idTimî
)

1326 if(
timî
.
hwnd
 =hwnd &&Åimî.
idTimî
 == idTimer) {

1327 
timî
.
uTimeout
 = 0;

1328  
TRUE
;

1330  
FALSE
;

1331 
	}
}

1336 
UINT


1337 
	$MwGëNextTimeoutVÆue
()

1339 
timeout
;

1341 if(
timî
.
uTimeout
) {

1342 
timeout
 = 
timî
.
dwClockExpúes
 - 
	`GëTickCou¡
();

1343 if(
timeout
 > 0)

1344  
timeout
;

1347 
	}
}

1353 
	$MwH™dÀTimîs
()

1355 
timeout
;

1356 
DWORD
 
dwTime
;

1359 if(
timî
.
uTimeout
 == 0)

1363 
dwTime
 = 
	`GëTickCou¡
();

1364 
timeout
 = 
timî
.
dwClockExpúes
 - 
dwTime
;

1365 if(
timeout
 > 0)

1369 if(
timî
.
ÕTimîFunc
)

1370 
timî
.
	`ÕTimîFunc
—imî.
hwnd
, 
WM_TIMER
,Åimî.
idTimî
, 
dwTime
);

1371 
	`Po°Mesßge
(
timî
.
hwnd
, 
WM_TIMER
,Åimî.
idTimî
, 0);

1374 
timî
.
dwClockExpúes
 = 
dwTime
 +Åimî.
uTimeout
;

1375 
	}
}

1377 
WINAPI


1378 
	$GëSy°emMërics
(
nIndex
)

1380 
nIndex
) {

1381 
SM_CXSCREEN
:

1382  
s¸dev
.
xvúåes
;

1383 
SM_CYSCREEN
:

1384  
s¸dev
.
yvúåes
;

1385 
SM_CXVSCROLL
:

1386  
mwSYSMETRICS_CXVSCROLL
;

1387 
SM_CYHSCROLL
:

1388  
mwSYSMETRICS_CYHSCROLL
;

1389 
SM_CYCAPTION
:

1391  
mwSYSMETRICS_CYCAPTION
 + 1;

1392 
SM_CXBORDER
:

1393  
mwSYSMETRICS_CXBORDER
;

1394 
SM_CYBORDER
:

1395  
mwSYSMETRICS_CYBORDER
;

1396 
SM_CYMENU
:

1398 
SM_CYVSCROLL
:

1399  
mwSYSMETRICS_CYVSCROLL
;

1400 
SM_CXHSCROLL
:

1401  
mwSYSMETRICS_CXHSCROLL
;

1402 
SM_CXFRAME
:

1403 
SM_CXDLGFRAME
:

1404  
mwSYSMETRICS_CXFRAME
;

1405 
SM_CYFRAME
:

1406 
SM_CYDLGFRAME
:

1407  
mwSYSMETRICS_CYFRAME
;

1410 
	}
}

1412 
HWND
 
WINAPI


1413 
	$GëDlgIãm
(
HWND
 
hDlg
, 
nIDDlgIãm
)

1415 
HWND
 
wp
;

1417 if(
hDlg
) {

1418 
wp
=
hDlg
->
chûdªn
; wp; wp=wp->
siblögs
)

1419 if(
wp
->
id
 =
nIDDlgIãm
)

1420  
wp
;

1423 
	}
}

	@nanox/client.c

24 
	~<°dio.h
>

25 
	~<°dlib.h
>

26 
	~<uni°d.h
>

27 
	~<°rög.h
>

28 
	~<°ddef.h
>

29 
	~<sig«l.h
>

30 
	~<î∫o.h
>

31 
	~<time.h
>

32 #i‡
HAVE_SHAREDMEM_SUPPORT


33 
	~<sys/ty≥s.h
>

34 
	~<sys/ùc.h
>

35 
	~<sys/shm.h
>

37 
	~<sys/time.h
>

38 
	~<sys/sockë.h
>

39 #i‡
ELKS


40 
	~<löuxmt/«.h
>

41 
	~<löuxmt/time.h
>

42 
	#ADDR_FAM
 
AF_NANO


	)

43 #ñi‡
__ECOS


44 
	~<√töë/ö.h
>

45 
	~<¨∑/öë.h
>

46 
	~<sys/£À˘.h
>

47 
	~<cyg/kî√l/k≠i.h
>

48 
	#ADDR_FAM
 
AF_INET


	)

49 
	#_NO_SVR_MAPPING


	)

50 
	#gëpid
(Ë(()
	`cyg_thªad_£lf
())

	)

52 
	~<sys/un.h
>

53 #i‡
hpux


54 
	~<sys/time.h
>

56 #ifde‡
__GLIBC__


57 
	~<sys/£À˘.h
>

61 
	~"«no-X.h
"

62 
	~"£rv.h
"

63 
	~"nx¥Ÿo.h
"

64 
	~"lock.h
"

66 #i‚de‡
ADDR_FAM


71 
	#ADDR_FAM
 
AF_UNIX


	)

74 
	#GR_CLOSE_FIX
 1

	)

82 
	#SHM_BLOCK_SIZE
 4096

	)

84 #i‚de‡
__ECOS


86 
	gnxSockë
 = -1;

87 
LOCK_DECLARE
(
nxGlobÆLock
);

88 #i‡
HAVE_SHAREDMEM_SUPPORT


89 * 
	gnxSh¨edMem
 = 0;

90 
	gnxSh¨edMemSize
;

93 
	gªgfdmax
 = -1;

94 
fd_£t
 
	gªgfd£t
;

99 *
	gnxEº‹Såögs
[] = {

100 
GR_ERROR_STRINGS


103 
EVENT_LIST
 * 
	gevli°
;

111 
GR_FNCALLBACKEVENT
 
	gEº‹Func
 = 
GrDeÁu…Eº‹H™dÀr
;

117 
	gecos_«nox_˛õ¡_d©a_ödex
 = 
CYGNUM_KERNEL_THREADS_DATA_MAX
;

121 
QueueEvít
(
GR_EVENT
 *
ï
);

122 
GëNextQueuedEvít
(
GR_EVENT
 *
ï
);

123 
_GrGëNextEvítTimeout
(
GR_EVENT
 *
ï
, 
GR_TIMEOUT
 
timeout
);

124 
_GrPìkEvít
(
GR_EVENT
 * 
ï
);

138 
	$RódBlock
(*
b
, 
n
)

140 
i
 = 0;

141 *
v
;

142 
	`ACCESS_PER_THREAD_DATA
()

144 
v
 = (*Ë
b
;

146 
	`nxFlushReq
(0L,0);

147 
v
 < ((*Ë
b
 + 
n
)) {

148 
i
 = 
	`ªad
(
nxSockë
, 
v
, ((*Ë
b
 + 
n
 - v));

149 i‡–
i
 <= 0 ) {

150 i‡–
i
 == 0 ) {

154 
	`EPRINTF
("nxclient:Üost connectionÅo Nano-X "

156 
	`exô
(1);

158 i‡–
î∫o
 =
EINTR
 ||Éºnÿ=
EAGAIN
 )

161 
	`EPRINTF
("nx˛õ¡: badÑódblock %d,Éºnÿ%d\n", 
i
, 
î∫o
);

164 
v
 +
i
;

168 
	}
}

178 
	$RódByã
()

180 
c
;

182 if(
	`RódBlock
(&
c
, 1) == -1)

184  (Ë
c
;

185 
	}
}

198 
	$CheckF‹Clõ¡D©a
(
GR_EVENT
 *
evp
)

200 
GR_EVENT_CLIENT_DATA
 *
evít
;

202 if(
evp
->
ty≥
 =
GR_EVENT_TYPE_CLIENT_DATA
) {

203 
evít
 = (
GR_EVENT_CLIENT_DATA
 *)
evp
;

204 if(!
evít
->
d©Æí
) {

205 
evít
->
d©a
 = 
NULL
;

208 if(!(
evít
->
d©a
 = 
	`mÆloc
”vít->
d©Æí
))) ;

209 
	`RódBlock
(
evít
->
d©a
,Évít->
d©Æí
);

211 
	}
}

224 
	$CheckBlockTy≥
(
∑ckëty≥
)

226 
b
;

227 
GR_EVENT
 
evít
;

229 
	`RódBlock
(&
b
,(b)) != -1) {

230 i‡(
b
 =
∑ckëty≥
)

231  
b
;

233 i‡(
b
 =
GrNumGëNextEvít
) {

238 
	`RódBlock
(&
evít
, (event));

239 
	`CheckF‹Clõ¡D©a
(&
evít
);

240 
	`QueueEvít
(&
evít
);

242 
	`EPRINTF
("nxclient %d: WrongÖacketÅype %d "

243 "”x≥˘ed %d)\n", 
	`gëpid
(),
b
, 
∑ckëty≥
);

246 
	`EPRINTF
("nx˛õ¡ %d: C‹ru±edÖackë\n", 
	`gëpid
());

248 
	}
}

263 
	$Ty≥dRódBlock
(*
b
, 
n
, 
ty≥
)

265 
r
;

267 
r
 = 
	`CheckBlockTy≥
(
ty≥
);

268 i‡(
r
 !
ty≥
)

270  
	`RódBlock
(
b
, 
n
);

271 
	}
}

285 
	$CheckEº‹Evít
(
GR_EVENT
 *
ï
)

287 
	`ACCESS_PER_THREAD_DATA
()

289 i‡(
ï
->
ty≥
 =
GR_EVENT_TYPE_ERROR
) {

290 i‡(
Eº‹Func
) {

292 
	`Eº‹Func
(
ï
);

295 
ï
->
ty≥
 = 
GR_EVENT_TYPE_NONE
;

298 
	}
}

308 
	$GrO≥n
()

310 
size_t
 
size
;

311 
nxO≥nReq
 
ªq
;

312 
åõs
;

313 
ªt
 = 0;

314 #i‡
ADDR_FAM
 =
AF_NANO


315 
sockaddr_«
 
«me
;

316 #ñi‡
ADDR_FAM
 =
AF_INET


317 
sockaddr_ö
 
«me
;

318 
ho°ít
 *
he
;

320 *
sockaddr
 = 
	`gëív
("NXDISPLAY");

321 i‡(!
sockaddr
)

322 
sockaddr
 = "127.0.0.1";

323 #ñi‡
ADDR_FAM
 =
AF_UNIX


324 
sockaddr_un
 
«me
;

326 *
sock«me
 = 
	`gëív
("NXDISPLAY");

327 i‡(!
sock«me
)

328 
sock«me
 = 
GR_NAMED_SOCKET
;

332 
	`ACCESS_PER_THREAD_DATA
()

335 i‡(
nxSockë
 >= 0)

336  
nxSockë
;

339 i‡((
nxSockë
 = 
	`sockë
(
ADDR_FAM
, 
SOCK_STREAM
, 0)) == -1)

343 
	`LOCK_INIT
(&
nxGlobÆLock
);

345 #i‡
ADDR_FAM
 =
AF_NANO


346 
«me
.
sun_Ámûy
 = 
AF_NANO
;

347 
«me
.
sun_no
 = 
GR_ELKS_SOCKET
;

348 
size
 = (
sockaddr_«
);

349 #ñi‡
ADDR_FAM
 =
AF_INET


350 
«me
.
sö_Ámûy
 = 
AF_INET
;

351 
«me
.
sö_p‹t
 = 
	`ht⁄s
(
GR_NUM_SOCKET
);

352 i‡(!(
he
 = 
	`gëho°by«me
(
sockaddr
))) {

353 
	`EPRINTF
("nx˛õ¡: C™'àªsﬁvêaddªs†f‹ sîvî %s\n", 
sockaddr
);

354 
	`˛o£
(
nxSockë
);

355 
nxSockë
 = -1;

358 
«me
.
sö_addr
 = *(
ö_addr
 *)
he
->
h_addr_li°
[0];

359 
size
 = (
sockaddr_ö
);

360 #ñi‡
ADDR_FAM
 =
AF_UNIX


361 
«me
.
sun_Ámûy
 = 
AF_UNIX
;

362 
	`°r˝y
(
«me
.
sun_∑th
, 
sock«me
);

363 
size
 = (
	`off£tof
(
sockaddr_un
, 
sun_∑th
) +

364 
	`°æí
(
«me
.
sun_∑th
) + 1);

371 
åõs
=1;Åries<=10; ++tries) {

372 
time•ec
 
ªq
;

374 
ªt
 = 
	`c⁄√˘
(
nxSockë
, (
sockaddr
 *Ë&
«me
, 
size
);

375 i‡(
ªt
 >= 0)

377 #i‡
ADDR_FAM
 =
AF_INET


378 
ªq
.
tv_£c
 = 0;

379 
ªq
.
tv_n£c
 = 100000000L;

381 
ªq
.
tv_£c
 = 2;

382 
ªq
.
tv_n£c
 = 0;

384 
	`«no¶ìp
(&
ªq
, 
NULL
);

385 
	`EPRINTF
("nx˛õ¡:Ñëry c⁄√˘áâem± %d\n", 
åõs
);

387 i‡(
ªt
 == -1) {

388 
	`˛o£
(
nxSockë
);

389 
nxSockë
 = -1;

393 
	`£tbuf
(
°dout
, 
NULL
);

394 
	`£tbuf
(
°dîr
, 
NULL
);

408 
ªq
.
ªqTy≥
 = 
GrNumO≥n
;

409 
ªq
.
hûígth
 = 0;

410 
ªq
.
Àngth
 = (req);

412 
ªq
.
pid
 = 
	`gëpid
();

414 
	`nxWrôeSockë
((*)&
ªq
,(req));

415  
nxSockë
;

416 
	}
}

418 #i‡
GR_CLOSE_FIX


420 
	$mySig«lh™dÀr
(
sig
)

422 i‡(
sig
 =
SIGALRM
) {

423 
	`EPRINTF
("Oops!ÇxFlushReq()Åimed out,Éxiting\n");

424 
	`exô
(127);

426 
	}
}

436 
	$GrClo£
()

438 
	`ACCESS_PER_THREAD_DATA
()

440 #i‡
GR_CLOSE_FIX


442 * 
ﬁdSig«lH™dÀr
 = 
	`sig«l
(
SIGALRM
, 
mySig«lh™dÀr
);

443 
	`Æ¨m
(1);

445 
	`LOCK
(&
nxGlobÆLock
);

446 
	`AŒocReq
(
Clo£
);

447 
	`GrFlush
();

448 
	`UNLOCK
(&
nxGlobÆLock
);

450 #i‡
GR_CLOSE_FIX


451 
	`Æ¨m
(0);

452 
	`sig«l
(
SIGALRM
, 
ﬁdSig«lH™dÀr
);

454 
	`˛o£
(
nxSockë
);

455 
nxSockë
 = -1;

456 
	`LOCK_FREE
(&
nxGlobÆLock
);

457 
	}
}

465 
	$GrFlush
()

467 
	`nxFlushReq
(0L,1);

469 #ifde‡
NOTUSED


470 
GR_EVENT
 
evít
;

473 
	`_GrPìkEvít
(&
evít
)) {

474 
	`_GrGëNextEvítTimeout
(&
evít
, 0L);

475 
	`QueueEvít
(&
evít
);

478 
	}
}

492 
	$GrDeÁu…Eº‹H™dÀr
(
GR_EVENT
 *
ï
)

494 i‡(
ï
->
ty≥
 =
GR_EVENT_TYPE_ERROR
) {

495 
	`EPRINTF
("nx˛õ¡ %d: Eº‹ (%sË", 
	`gëpid
(), 
ï
->
îr‹
.
«me
);

496 
	`EPRINTF
(
nxEº‹Såögs
[
ï
->
îr‹
.
code
],Ép->îr‹.
id
);

497 
	`GrClo£
();

498 
	`exô
(1);

500 
	}
}

512 
GR_FNCALLBACKEVENT


513 
	$GrSëEº‹H™dÀr
(
GR_FNCALLBACKEVENT
 
‚cb
)

515 
GR_FNCALLBACKEVENT
 
‹ig
;

516 
	`ACCESS_PER_THREAD_DATA
()

518 
	`LOCK
(&
nxGlobÆLock
);

519 
‹ig
 = 
Eº‹Func
;

520 
Eº‹Func
 = 
‚cb
;

521 
	`UNLOCK
(&
nxGlobÆLock
);

522  
‹ig
;

523 
	}
}

534 
	$GrDñay
(
GR_TIMEOUT
 
m£cs
)

536 
timevÆ
Åimeval;

538 
timevÆ
.
tv_£c
 = 
m£cs
 / 1000;

539 
timevÆ
.
tv_u£c
 = (
m£cs
 % 1000) * 1000;

540 
	`£À˘
(0, 
NULL
, NULL, NULL, &
timevÆ
);

541 
	}
}

551 
	$GrGëS¸ìnInfo
(
GR_SCREEN_INFO
 *
sù
)

553 
	`LOCK
(&
nxGlobÆLock
);

554 
	`AŒocReq
(
GëS¸ìnInfo
);

555 
	`Ty≥dRódBlock
(
sù
, (
GR_SCREEN_INFO
),
GrNumGëS¸ìnInfo
);

556 
	`UNLOCK
(&
nxGlobÆLock
);

557 
	}
}

570 
GR_COLOR


571 
	$GrGëSysCﬁ‹
(
ödex
)

573 
nxGëSysCﬁ‹Req
 *
ªq
;

574 
GR_COLOR
 
cﬁ‹
;

576 
	`LOCK
(&
nxGlobÆLock
);

577 
ªq
 = 
	`AŒocReq
(
GëSysCﬁ‹
);

578 
ªq
->
ödex
 = index;

579 if(
	`Ty≥dRódBlock
(&
cﬁ‹
, (cﬁ‹),
GrNumGëSysCﬁ‹
) == -1)

580 
cﬁ‹
 = 0;

581 
	`UNLOCK
(&
nxGlobÆLock
);

582  
cﬁ‹
;

583 
	}
}

594 
	$GrGëF⁄tInfo
(
GR_FONT_ID
 
f⁄t
, 
GR_FONT_INFO
 *
fù
)

596 
nxGëF⁄tInfoReq
 *
ªq
;

598 
	`LOCK
(&
nxGlobÆLock
);

599 
ªq
 = 
	`AŒocReq
(
GëF⁄tInfo
);

600 
ªq
->
f⁄tid
 = 
f⁄t
;

601 
	`Ty≥dRódBlock
(
fù
, (
GR_FONT_INFO
),
GrNumGëF⁄tInfo
);

602 
	`UNLOCK
(&
nxGlobÆLock
);

603 
	}
}

615 
	$GrGëGCInfo
(
GR_GC_ID
 
gc
, 
GR_GC_INFO
 *
gcù
)

617 
nxGëGCInfoReq
 *
ªq
;

619 
	`LOCK
(&
nxGlobÆLock
);

620 
ªq
 = 
	`AŒocReq
(
GëGCInfo
);

621 
ªq
->
gcid
 = 
gc
;

622 
	`Ty≥dRódBlock
(
gcù
, (
GR_GC_INFO
),
GrNumGëGCInfo
);

623 
	`UNLOCK
(&
nxGlobÆLock
);

624 
	}
}

642 
	$GrGëGCTextSize
(
GR_GC_ID
 
gc
, *
°r
, 
cou¡
, 
GR_TEXTFLAGS
 
Êags
,

643 
GR_SIZE
 *
ªtwidth
, GR_SIZE *
ªtheight
, GR_SIZE *
ªtba£
)

645 
nxGëGCTextSizeReq
 *
ªq
;

646 
size
;

649 if(
cou¡
 =-1 && (
Êags
&
MWTF_PACKMASK
Ë=
MWTF_ASCII
)

650 
cou¡
 = 
	`°æí
((*)
°r
);

652 
size
 = 
	`nxCÆcSåögByãs
(
°r
, 
cou¡
, 
Êags
);

654 
	`LOCK
(&
nxGlobÆLock
);

655 
ªq
 = 
	`AŒocReqExåa
(
GëGCTextSize
, 
size
);

656 
ªq
->
gcid
 = 
gc
;

657 
ªq
->
Êags
 = flags;

658 
ªq
->
ch¨cou¡
 = 
cou¡
;

659 
	`mem˝y
(
	`GëReqD©a
(
ªq
), 
°r
, 
size
);

660 
	`Ty≥dRódBlock
(
ªtwidth
, (*ªtwidth),
GrNumGëGCTextSize
);

661 
	`RódBlock
(
ªtheight
, (*retheight));

662 
	`RódBlock
(
ªtba£
, (*retbase));

663 
	`UNLOCK
(&
nxGlobÆLock
);

664 
	}
}

676 
	$GrRegi°îI≈ut
(
fd
)

678 
	`ACCESS_PER_THREAD_DATA
()

680 i‡(
fd
 < 0)

683 
	`LOCK
(&
nxGlobÆLock
);

684 
	`FD_SET
(
fd
, &
ªgfd£t
);

685 i‡(
fd
 >
ªgfdmax
)Ñegfdmax = fd + 1;

686 
	`UNLOCK
(&
nxGlobÆLock
);

687 
	}
}

698 
	$GrUƒegi°îI≈ut
(
fd
)

700 
i
, 
max
;

701 
	`ACCESS_PER_THREAD_DATA
()

703 
	`LOCK
(&
nxGlobÆLock
);

706 i‡(
fd
 == -1) {

707 
	`FD_ZERO
(&
ªgfd£t
);

708 
ªgfdmax
 = -1;

709 
	`UNLOCK
(&
nxGlobÆLock
);

713 
	`FD_CLR
(
fd
, &
ªgfd£t
);

715 
i
 = 0, 
max
 = 
ªgfdmax
,Ñegfdmax = -1; i < max; i++)

716 i‡(
	`FD_ISSET
(
i
, &
ªgfd£t
))

717 
ªgfdmax
 = 
i
 + 1;

718 
	`UNLOCK
(&
nxGlobÆLock
);

719 
	}
}

747 
	$GrPª∑ªSñe˘
(*
maxfd
,*
rfd£t
)

749 
fd_£t
 *
rfds
 = 
rfd£t
;

750 
fd
;

752 
	`ACCESS_PER_THREAD_DATA
()

754 
	`LOCK
(&
nxGlobÆLock
);

755 
	`AŒocReq
(
GëNextEvít
);

756 
	`GrFlush
();

758 
	`FD_SET
(
nxSockë
, 
rfds
);

759 if(
nxSockë
 > *
maxfd
)

760 *
maxfd
 = 
nxSockë
;

763 
fd
 = 0; fd < 
ªgfdmax
; fd++) {

764 i‡(
	`FD_ISSET
(
fd
, &
ªgfd£t
)) {

765 
	`FD_SET
(
fd
, 
rfds
);

766 i‡(
fd
 > *
maxfd
) *maxfd = fd;

769 
	`UNLOCK
(&
nxGlobÆLock
);

770 
	}
}

787 
	$GrSîvi˚Sñe˘
(*
rfd£t
, 
GR_FNCALLBACKEVENT
 
‚cb
)

789 
fd_£t
 * 
rfds
 = 
rfd£t
;

790 
fd
;

791 
GR_EVENT
 
ev
;

793 
	`ACCESS_PER_THREAD_DATA
()

794 
	`LOCK
(&
nxGlobÆLock
);

802 i‡(
evli°
) {

804 
	`GëNextQueuedEvít
(&
ev
);

805 
	`CheckEº‹Evít
(&
ev
);

806 
	`‚cb
(&
ev
);

809 if(
	`FD_ISSET
(
nxSockë
, 
rfds
)) {

810 
	`Ty≥dRódBlock
(&
ev
, ”v),
GrNumGëNextEvít
);

811 
	`CheckF‹Clõ¡D©a
(&
ev
);

812 
	`CheckEº‹Evít
(&
ev
);

813 
	`‚cb
(&
ev
);

818 
fd
 = 0; fd < 
ªgfdmax
; fd++) {

819 i‡(
	`FD_ISSET
(
fd
, &
ªgfd£t
Ë&& FD_ISSET(fd, 
rfds
)) {

820 
ev
.
ty≥
 = 
GR_EVENT_TYPE_FDINPUT
;

821 
ev
.
fdöput
.
fd
 = fd;

822 
	`‚cb
(&
ev
);

825 
	`UNLOCK
(&
nxGlobÆLock
);

826 
	}
}

838 
	$GrMaöLo›
(
GR_FNCALLBACKEVENT
 
‚cb
)

840 
fd_£t
 
rfds
;

841 
£tsize
 = 0;

844 
	`FD_ZERO
(&
rfds
);

845 
	`GrPª∑ªSñe˘
(&
£tsize
, &
rfds
);

846 if(
	`£À˘
(
£tsize
+1, &
rfds
, 
NULL
, NULL, NULL) > 0)

847 
	`GrSîvi˚Sñe˘
(&
rfds
, 
‚cb
);

849 
	}
}

859 
	$QueueEvít
(
GR_EVENT
 *
ï
)

861 
EVENT_LIST
 * 
ñp
;

862 
EVENT_LIST
 * 
¥evñp
;

863 
	`ACCESS_PER_THREAD_DATA
()

865 
ñp
 = 
	`mÆloc
((
EVENT_LIST
));

866 i‡(
ñp
) {

867 
ñp
->
evít
 = *
ï
;

868 
ñp
->
√xt
 = 
NULL
;

871 i‡(!
evli°
) {

872 
evli°
 = 
ñp
;

875 
¥evñp
 = 
evli°
;

876 
¥evñp
->
√xt
)

877 
¥evñp
 =Öªvñp->
√xt
;

878 
¥evñp
->
√xt
 = 
ñp
;

880 
	}
}

890 
	$GëNextQueuedEvít
(
GR_EVENT
 *
ï
)

892 
EVENT_LIST
 *
ñp
;

894 
	`ACCESS_PER_THREAD_DATA
()

896 *
ï
 = 
evli°
->
evít
;

897 
ñp
 = 
evli°
;

898 
evli°
 =Évli°->
√xt
;

899 
	`‰ì
(
ñp
);

900 
	}
}

912 
	$GrGëNextEvít
(
GR_EVENT
 *
ï
)

914 
	`GrGëNextEvítTimeout
(
ï
, 0L);

915 
	}
}

934 
	$GrGëNextEvítTimeout
(
GR_EVENT
 * 
ï
, 
GR_TIMEOUT
 
timeout
)

936 
	`LOCK
(&
nxGlobÆLock
);

937 i‡(
evli°
) {

939 
	`GëNextQueuedEvít
(
ï
);

940 
	`CheckEº‹Evít
(
ï
);

941 
	`UNLOCK
(&
nxGlobÆLock
);

945 
	`_GrGëNextEvítTimeout
(
ï
,
timeout
);

946 
	`UNLOCK
(&
nxGlobÆLock
);

947 
	}
}

969 
	$_GrGëNextEvítTimeout
(
GR_EVENT
 *
ï
, 
GR_TIMEOUT
 
timeout
)

971 
fd_£t
 
rfds
;

972 
£tsize
 = 0;

973 
e
;

974 
timevÆ
 
to
;

975 
	`ACCESS_PER_THREAD_DATA
()

978 
	`FD_ZERO
(&
rfds
);

988 
	`GrPª∑ªSñe˘
(&
£tsize
, &
rfds
);

989 i‡(
timeout
) {

990 
to
.
tv_£c
 = 
timeout
 / 1000;

991 
to
.
tv_u£c
 = (
timeout
 % 1000) * 1000;

994 if((
e
 = 
	`£À˘
(
£tsize
+1, &
rfds
, 
NULL
, NULL, 
timeout
 ? &
to
 : NULL))>0) {

995 
fd
;

997 if(
	`FD_ISSET
(
nxSockë
, &
rfds
)) {

1002 
	`Ty≥dRódBlock
(
ï
, (*ï),
GrNumGëNextEvít
);

1003 
	`CheckF‹Clõ¡D©a
(
ï
);

1004 
	`CheckEº‹Evít
(
ï
);

1009 
fd
 = 0; fd < 
ªgfdmax
; fd++) {

1010 i‡(
	`FD_ISSET
(
fd
, &
ªgfd£t
Ë&& FD_ISSET(fd, &
rfds
)) {

1011 
ï
->
ty≥
 = 
GR_EVENT_TYPE_FDINPUT
;

1012 
ï
->
fdöput
.
fd
 = fd;

1017 i‡(
e
 == 0) {

1022 
ï
->
ty≥
 = 
GR_EVENT_TYPE_TIMEOUT
;

1024 if(
î∫o
 =
EINTR
) {

1025 
ï
->
ty≥
 = 
GR_EVENT_TYPE_NONE
;

1027 
	`EPRINTF
("nxclient: select failed\n");

1028 
	`GrClo£
();

1029 
	`exô
(1);

1032 
	}
}

1045 
	$GrPìkEvít
(
GR_EVENT
 *
ï
)

1047 
ªt
;

1048 
	`ACCESS_PER_THREAD_DATA
()

1050 
	`LOCK
(&
nxGlobÆLock
);

1051 i‡(
evli°
) {

1052 *
ï
 = 
evli°
->
evít
;

1053 
	`CheckEº‹Evít
(
ï
);

1054 
	`UNLOCK
(&
nxGlobÆLock
);

1058 
ªt
 = 
	`_GrPìkEvít
(
ï
);

1059 
	`UNLOCK
(&
nxGlobÆLock
);

1060  
ªt
;

1061 
	}
}

1064 
	$_GrPìkEvít
(
GR_EVENT
 * 
ï
)

1066 
ªt
;

1068 
	`AŒocReq
(
PìkEvít
);

1069 
	`Ty≥dRódBlock
(
ï
, (*ï),
GrNumPìkEvít
);

1070 
	`CheckF‹Clõ¡D©a
(
ï
);

1071 
ªt
 = 
	`RódByã
();

1072 
	`CheckEº‹Evít
(
ï
);

1073  (
ªt
 > 0);

1074 
	}
}

1084 
	$GrPìkWaôEvít
(
GR_EVENT
 *
ï
)

1086 
EVENT_LIST
 * 
ñp
;

1088 
	`ACCESS_PER_THREAD_DATA
()

1090 
	`LOCK
(&
nxGlobÆLock
);

1091 i‡(
evli°
) {

1092 *
ï
 = 
evli°
->
evít
;

1093 
	`CheckEº‹Evít
(
ï
);

1094 
	`UNLOCK
(&
nxGlobÆLock
);

1099 
	`GrGëNextEvít
(
ï
);

1102 
ñp
 = 
	`mÆloc
((
EVENT_LIST
));

1103 i‡(
ñp
) {

1104 
ñp
->
evít
 = *
ï
;

1105 
ñp
->
√xt
 = 
evli°
;

1109 
	`GrPìkEvít
(
ï
);

1111 
	`UNLOCK
(&
nxGlobÆLock
);

1112 
	}
}

1124 
	$GrCheckNextEvít
(
GR_EVENT
 *
ï
)

1126 
	`ACCESS_PER_THREAD_DATA
()

1128 
	`LOCK
(&
nxGlobÆLock
);

1129 i‡(
evli°
) {

1131 
	`GëNextQueuedEvít
(
ï
);

1132 
	`CheckEº‹Evít
(
ï
);

1133 
	`UNLOCK
(&
nxGlobÆLock
);

1137 
	`AŒocReq
(
CheckNextEvít
);

1138 
	`Ty≥dRódBlock
(
ï
, (*ï),
GrNumGëNextEvít
);

1139 
	`CheckF‹Clõ¡D©a
(
ï
);

1140 
	`CheckEº‹Evít
(
ï
);

1141 
	`UNLOCK
(&
nxGlobÆLock
);

1142 
	}
}

1145 
GR_BOOL


1146 
	$GëTy≥dEvítCÆlback
(
GR_WINDOW_ID
 
wid
, 
GR_EVENT_MASK
 
mask
, 
GR_UPDATE_TYPE
 
upd©e
,

1147 
GR_EVENT
 *
ï
, *
¨g
)

1149 
GR_EVENT_MASK
 
emask
 = 
	`GR_EVENTMASK
(
ï
->
ty≥
);

1151 
	`DPRINTF
("GëTy≥dEvítCÆlback: wid %d mask %x upd©ê%d from %dÅy≥ %d\n", 
wid
, ()
mask
, 
upd©e
, 
ï
->
gíîÆ
.wid,Ép->
ty≥
);

1154 i‡(
wid
 && (wid !
ï
->
gíîÆ
.wid))

1157 i‡(
mask
) {

1158 i‡((
mask
 & 
emask
) == 0)

1161 i‡(
upd©e
 && ((
mask
 & 
emask
Ë=
GR_EVENT_MASK_UPDATE
))

1162 i‡(
upd©e
 !
ï
->upd©e.
uty≥
)

1167 
	}
}

1187 
	$GrGëTy≥dEvít
(
GR_WINDOW_ID
 
wid
, 
GR_EVENT_MASK
 
mask
, 
GR_UPDATE_TYPE
 
upd©e
,

1188 
GR_EVENT
 *
ï
, 
GR_BOOL
 
block
)

1190  
	`GrGëTy≥dEvítPªd
(
wid
, 
mask
, 
upd©e
, 
ï
, 
block
,

1191 
GëTy≥dEvítCÆlback
, 
NULL
);

1192 
	}
}

1215 
	$GrGëTy≥dEvítPªd
(
GR_WINDOW_ID
 
wid
, 
GR_EVENT_MASK
 
mask
, 
GR_UPDATE_TYPE
 
upd©e
,

1216 
GR_EVENT
 *
ï
, 
GR_BOOL
 
block
, 
GR_TYPED_EVENT_CALLBACK
 
m©ch‚
, *
¨g
)

1218 
EVENT_LIST
 *
ñp
, *
¥evñp
;

1219 
GR_EVENT
 
evít
;

1221 
	`ACCESS_PER_THREAD_DATA
();

1223 
	`LOCK
(&
nxGlobÆLock
);

1225 
	`_GrPìkEvít
(&
evít
)) {

1226 
gëevít
:

1227 
	`_GrGëNextEvítTimeout
(&
evít
, 0L);

1228 
	`QueueEvít
(&
evít
);

1234 
¥evñp
 = 
NULL
;

1235 
ñp
 = 
evli°
;

1236 
ñp
) {

1237 i‡(
	`m©ch‚
(
wid
, 
mask
, 
upd©e
, &
ñp
->
evít
, 
¨g
)) {

1239 i‡(
¥evñp
 =
NULL
)

1240 
evli°
 = 
ñp
->
√xt
;

1241 
¥evñp
->
√xt
 = 
ñp
->next;

1242 *
ï
 = 
ñp
->
evít
;

1244 
	`UNLOCK
(&
nxGlobÆLock
);

1245  
ï
->
ty≥
;

1247 
¥evñp
 = 
ñp
;

1248 
ñp
 =ÉÕ->
√xt
;

1252 i‡(
block
)

1253 
gëevít
;

1256 
ï
->
ty≥
 = 
GR_EVENT_TYPE_NONE
;

1257 
	`UNLOCK
(&
nxGlobÆLock
);

1258  
GR_EVENT_TYPE_NONE
;

1259 
	}
}

1270 
	$GrSñe˘Evíts
(
GR_WINDOW_ID
 
wid
, 
GR_EVENT_MASK
 
evítmask
)

1272 
nxSñe˘EvítsReq
 *
ªq
;

1274 
	`LOCK
(&
nxGlobÆLock
);

1275 
ªq
 = 
	`AŒocReq
(
Sñe˘Evíts
);

1276 
ªq
->
wödowid
 = 
wid
;

1277 
ªq
->
evítmask
 =Éventmask;

1278 
	`UNLOCK
(&
nxGlobÆLock
);

1279 
	}
}

1296 
GR_WINDOW_ID


1297 
	$GrNewWödow
(
GR_WINDOW_ID
 
∑ª¡
, 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
width
,

1298 
GR_SIZE
 
height
, GR_SIZE 
b‹dîsize
, 
GR_COLOR
 
background
,

1299 
GR_COLOR
 
b‹dîcﬁ‹
)

1301 
nxNewWödowReq
 *
ªq
;

1302 
GR_WINDOW_ID
 
wid
;

1304 
	`LOCK
(&
nxGlobÆLock
);

1305 
ªq
 = 
	`AŒocReq
(
NewWödow
);

1306 
ªq
->
∑ª¡id
 = 
∑ª¡
;

1307 
ªq
->
x
 = x;

1308 
ªq
->
y
 = y;

1309 
ªq
->
width
 = width;

1310 
ªq
->
height
 = height;

1311 
ªq
->
backgroundcﬁ‹
 = 
background
;

1312 
ªq
->
b‹dîcﬁ‹
 = bordercolor;

1313 
ªq
->
b‹dîsize
 = bordersize;

1314 if(
	`Ty≥dRódBlock
(&
wid
, (wid),
GrNumNewWödow
) == -1)

1315 
wid
 = 0;

1316 
	`UNLOCK
(&
nxGlobÆLock
);

1317  
wid
;

1318 
	}
}

1334 
GR_WINDOW_ID


1335 
	$GrNewPixm≠
(
GR_SIZE
 
width
, GR_SIZE 
height
, *
pixñs
)

1337 
nxNewPixm≠Req
 *
ªq
;

1338 
GR_WINDOW_ID
 
wid
;

1340 
	`LOCK
(&
nxGlobÆLock
);

1341 
ªq
 = 
	`AŒocReq
(
NewPixm≠
);

1342 
ªq
->
width
 = width;

1343 
ªq
->
height
 = height;

1344 if(
	`Ty≥dRódBlock
(&
wid
, (wid), 
GrNumNewPixm≠
) == -1)

1345 
wid
 = 0;

1346 
	`UNLOCK
(&
nxGlobÆLock
);

1347  
wid
;

1348 
	}
}

1363 
GR_WINDOW_ID


1364 
	$GrNewI≈utWödow
(
GR_WINDOW_ID
 
∑ª¡
, 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
width
,

1365 
GR_SIZE
 
height
)

1367 
nxNewI≈utWödowReq
 *
ªq
;

1368 
GR_WINDOW_ID
 
wid
;

1370 
	`LOCK
(&
nxGlobÆLock
);

1371 
ªq
 = 
	`AŒocReq
(
NewI≈utWödow
);

1372 
ªq
->
∑ª¡id
 = 
∑ª¡
;

1373 
ªq
->
x
 = x;

1374 
ªq
->
y
 = y;

1375 
ªq
->
width
 = width;

1376 
ªq
->
height
 = height;

1377 if(
	`Ty≥dRódBlock
(&
wid
, (wid), 
GrNumNewI≈utWödow
) == -1)

1378 
wid
 = 0;

1379 
	`UNLOCK
(&
nxGlobÆLock
);

1380  
wid
;

1381 
	}
}

1394 
	$GrDe°royWödow
(
GR_WINDOW_ID
 
wid
)

1396 
nxDe°royWödowReq
 *
ªq
;

1398 
	`LOCK
(&
nxGlobÆLock
);

1399 
ªq
 = 
	`AŒocReq
(
De°royWödow
);

1400 
ªq
->
wödowid
 = 
wid
;

1401 
	`UNLOCK
(&
nxGlobÆLock
);

1402 
	}
}

1413 
	$GrGëWödowInfo
(
GR_WINDOW_ID
 
wid
, 
GR_WINDOW_INFO
 *
öf›å
)

1415 
nxGëWödowInfoReq
 *
ªq
;

1417 
	`LOCK
(&
nxGlobÆLock
);

1418 
ªq
 = 
	`AŒocReq
(
GëWödowInfo
);

1419 
ªq
->
wödowid
 = 
wid
;

1420 
	`Ty≥dRódBlock
(
öf›å
, (
GR_WINDOW_INFO
), 
GrNumGëWödowInfo
);

1421 
	`UNLOCK
(&
nxGlobÆLock
);

1422 
	}
}

1432 
GR_GC_ID


1433 
	$GrNewGC
()

1435 
GR_GC_ID
 
gc
;

1437 
	`LOCK
(&
nxGlobÆLock
);

1438 
	`AŒocReq
(
NewGC
);

1439 if(
	`Ty≥dRódBlock
(&
gc
, (gc),
GrNumNewGC
) == -1)

1440 
gc
 = 0;

1441 
	`UNLOCK
(&
nxGlobÆLock
);

1442  
gc
;

1443 
	}
}

1454 
GR_GC_ID


1455 
	$GrC›yGC
(
GR_GC_ID
 
gc
)

1457 
nxC›yGCReq
 *
ªq
;

1458 
GR_GC_ID
 
√wgc
;

1460 
	`LOCK
(&
nxGlobÆLock
);

1461 
ªq
 = 
	`AŒocReq
(
C›yGC
);

1462 
ªq
->
gcid
 = 
gc
;

1463 if(
	`Ty≥dRódBlock
(&
√wgc
, “ewgc),
GrNumC›yGC
) == -1)

1464 
√wgc
 = 0;

1465 
	`UNLOCK
(&
nxGlobÆLock
);

1466  
√wgc
;

1467 
	}
}

1477 
	$GrDe°royGC
(
GR_GC_ID
 
gc
)

1479 
nxDe°royGCReq
 *
ªq
;

1481 
	`LOCK
(&
nxGlobÆLock
);

1482 
ªq
 = 
	`AŒocReq
(
De°royGC
);

1483 
ªq
->
gcid
 = 
gc
;

1484 
	`UNLOCK
(&
nxGlobÆLock
);

1485 
	}
}

1495 
GR_REGION_ID


1496 
	$GrNewRegi⁄
()

1498 
GR_REGION_ID
 
ªgi⁄
;

1500 
	`LOCK
(&
nxGlobÆLock
);

1501 
	`AŒocReq
(
NewRegi⁄
);

1502 if(
	`Ty≥dRódBlock
(&
ªgi⁄
, ‘egi⁄),
GrNumNewRegi⁄
) == -1)

1503 
ªgi⁄
 = 0;

1504 
	`UNLOCK
(&
nxGlobÆLock
);

1505  
ªgi⁄
;

1506 
	}
}

1516 
	$GrDe°royRegi⁄
(
GR_REGION_ID
 
ªgi⁄
)

1518 
nxDe°royRegi⁄Req
 *
ªq
;

1520 
	`LOCK
(&
nxGlobÆLock
);

1521 
ªq
 = 
	`AŒocReq
(
De°royRegi⁄
);

1522 
ªq
->
ªgi⁄id
 = 
ªgi⁄
;

1523 
	`UNLOCK
(&
nxGlobÆLock
);

1524 
	}
}

1536 
	$GrUni⁄Re˘WôhRegi⁄
(
GR_REGION_ID
 
ªgi⁄
, 
GR_RECT
 *
ª˘
)

1538 
nxUni⁄Re˘WôhRegi⁄Req
 *
ªq
;

1540 
	`LOCK
(&
nxGlobÆLock
);

1541 
ªq
 = 
	`AŒocReq
(
Uni⁄Re˘WôhRegi⁄
);

1542 if(
ª˘
)

1543 
	`mem˝y
(&
ªq
->
ª˘
,Ñect, (*rect));

1544 
ªq
->
ªgi⁄id
 = 
ªgi⁄
;

1545 
	`UNLOCK
(&
nxGlobÆLock
);

1546 
	}
}

1559 
	$GrUni⁄Regi⁄
(
GR_REGION_ID
 
d°_rgn
, GR_REGION_ID 
§c_rgn1
,

1560 
GR_REGION_ID
 
§c_rgn2
)

1562 
nxUni⁄Regi⁄Req
 *
ªq
;

1564 
	`LOCK
(&
nxGlobÆLock
);

1565 
ªq
 = 
	`AŒocReq
(
Uni⁄Regi⁄
);

1566 
ªq
->
ªgi⁄id
 = 
d°_rgn
;

1567 
ªq
->
§¸egi⁄id1
 = 
§c_rgn1
;

1568 
ªq
->
§¸egi⁄id2
 = 
§c_rgn2
;

1569 
	`UNLOCK
(&
nxGlobÆLock
);

1570 
	}
}

1583 
	$GrSubåa˘Regi⁄
(
GR_REGION_ID
 
d°_rgn
, GR_REGION_ID 
§c_rgn1
,

1584 
GR_REGION_ID
 
§c_rgn2
)

1586 
nxSubåa˘Regi⁄Req
 *
ªq
;

1588 
	`LOCK
(&
nxGlobÆLock
);

1589 
ªq
 = 
	`AŒocReq
(
Subåa˘Regi⁄
);

1590 
ªq
->
ªgi⁄id
 = 
d°_rgn
;

1591 
ªq
->
§¸egi⁄id1
 = 
§c_rgn1
;

1592 
ªq
->
§¸egi⁄id2
 = 
§c_rgn2
;

1593 
	`UNLOCK
(&
nxGlobÆLock
);

1594 
	}
}

1608 
	$GrX‹Regi⁄
(
GR_REGION_ID
 
d°_rgn
, GR_REGION_ID 
§c_rgn1
,

1609 
GR_REGION_ID
 
§c_rgn2
)

1611 
nxX‹Regi⁄Req
 *
ªq
;

1613 
	`LOCK
(&
nxGlobÆLock
);

1614 
ªq
 = 
	`AŒocReq
(
X‹Regi⁄
);

1615 
ªq
->
ªgi⁄id
 = 
d°_rgn
;

1616 
ªq
->
§¸egi⁄id1
 = 
§c_rgn1
;

1617 
ªq
->
§¸egi⁄id2
 = 
§c_rgn2
;

1618 
	`UNLOCK
(&
nxGlobÆLock
);

1619 
	}
}

1633 
	$GrI¡î£˘Regi⁄
(
GR_REGION_ID
 
d°_rgn
, GR_REGION_ID 
§c_rgn1
,

1634 
GR_REGION_ID
 
§c_rgn2
)

1636 
nxI¡î£˘Regi⁄Req
 *
ªq
;

1638 
	`LOCK
(&
nxGlobÆLock
);

1639 
ªq
 = 
	`AŒocReq
(
I¡î£˘Regi⁄
);

1640 
ªq
->
ªgi⁄id
 = 
d°_rgn
;

1641 
ªq
->
§¸egi⁄id1
 = 
§c_rgn1
;

1642 
ªq
->
§¸egi⁄id2
 = 
§c_rgn2
;

1643 
	`UNLOCK
(&
nxGlobÆLock
);

1644 
	}
}

1658 
	$GrSëGCRegi⁄
(
GR_GC_ID
 
gc
, 
GR_REGION_ID
 
ªgi⁄
)

1660 
nxSëGCRegi⁄Req
 *
ªq
;

1662 
	`LOCK
(&
nxGlobÆLock
);

1663 
ªq
 = 
	`AŒocReq
(
SëGCRegi⁄
);

1664 
ªq
->
gcid
 = 
gc
;

1665 
ªq
->
ªgi⁄id
 = 
ªgi⁄
;

1666 
	`UNLOCK
(&
nxGlobÆLock
);

1667 
	}
}

1680 
	$GrSëGCClùOrigö
(
GR_GC_ID
 
gc
, 
xoff
, 
yoff
)

1682 
nxSëGCClùOrigöReq
 *
ªq
;

1684 
	`LOCK
(&
nxGlobÆLock
);

1685 
ªq
 = 
	`AŒocReq
(
SëGCClùOrigö
);

1686 
ªq
->
gcid
 = 
gc
;

1687 
ªq
->
xoff
 = xoff;

1688 
ªq
->
yoff
 = yoff;

1689 
	`UNLOCK
(&
nxGlobÆLock
);

1690 
	}
}

1702 
	$GrSëGCGøphicsExposuª
(
GR_GC_ID
 
gc
, 
GR_BOOL
 
exposuª
)

1704 
nxSëGCGøphicsExposuªReq
 *
ªq
;

1706 
	`LOCK
(&
nxGlobÆLock
);

1707 
ªq
 = 
	`AŒocReq
(
SëGCGøphicsExposuª
);

1708 
ªq
->
gcid
 = 
gc
;

1709 
ªq
->
exposuª
 =Éxposure;

1710 
	`UNLOCK
(&
nxGlobÆLock
);

1711 
	}
}

1724 
GR_BOOL


1725 
	$GrPoötInRegi⁄
(
GR_REGION_ID
 
ªgi⁄
, 
GR_COORD
 
x
, GR_COORD 
y
)

1727 
nxPoötInRegi⁄Req
 *
ªq
;

1728 
GR_BOOL
 
ªt_vÆue
;

1730 
	`LOCK
(&
nxGlobÆLock
);

1731 
ªq
 = 
	`AŒocReq
(
PoötInRegi⁄
);

1732 
ªq
->
ªgi⁄id
 = 
ªgi⁄
;

1733 
ªq
->
x
 = x;

1734 
ªq
->
y
 = y;

1735 if(
	`Ty≥dRódBlock
(&
ªt_vÆue
, (ret_value),

1736 
GrNumPoötInRegi⁄
) == -1)

1737 
ªt_vÆue
 = 
GR_FALSE
;

1738 
	`UNLOCK
(&
nxGlobÆLock
);

1739  
ªt_vÆue
;

1740 
	}
}

1758 
	$GrRe˘InRegi⁄
(
GR_REGION_ID
 
ªgi⁄
, 
GR_COORD
 
x
, GR_COORD 
y
, GR_COORD 
w
,

1759 
GR_COORD
 
h
)

1761 
nxRe˘InRegi⁄Req
 *
ªq
;

1762 
ªt_vÆue
;

1764 
	`LOCK
(&
nxGlobÆLock
);

1765 
ªq
 = 
	`AŒocReq
(
Re˘InRegi⁄
);

1766 
ªq
->
ªgi⁄id
 = 
ªgi⁄
;

1767 
ªq
->
x
 = x;

1768 
ªq
->
y
 = y;

1769 
ªq
->
w
 = w;

1770 
ªq
->
h
 = h;

1771 if(
	`Ty≥dRódBlock
(&
ªt_vÆue
, (ret_value),

1772 
GrNumRe˘InRegi⁄
) == -1)

1773 
ªt_vÆue
 = 0;

1774 
	`UNLOCK
(&
nxGlobÆLock
);

1775  ()
ªt_vÆue
;

1776 
	}
}

1786 
GR_BOOL


1787 
	$GrEm±yRegi⁄
(
GR_REGION_ID
 
ªgi⁄
)

1789 
nxEm±yRegi⁄Req
 *
ªq
;

1790 
GR_BOOL
 
ªt_vÆue
;

1792 
	`LOCK
(&
nxGlobÆLock
);

1793 
ªq
 = 
	`AŒocReq
(
Em±yRegi⁄
);

1794 
ªq
->
ªgi⁄id
 = 
ªgi⁄
;

1795 if(
	`Ty≥dRódBlock
(&
ªt_vÆue
, (ret_value),

1796 
GrNumEm±yRegi⁄
) == -1)

1797 
ªt_vÆue
 = 
GR_FALSE
;

1798 
	`UNLOCK
(&
nxGlobÆLock
);

1799  
ªt_vÆue
;

1800 
	}
}

1812 
GR_BOOL


1813 
	$GrEquÆRegi⁄
(
GR_REGION_ID
 
rgn1
, GR_REGION_ID 
rgn2
)

1815 
nxEquÆRegi⁄Req
 *
ªq
;

1816 
GR_BOOL
 
ªt_vÆue
;

1818 
	`LOCK
(&
nxGlobÆLock
);

1819 
ªq
 = 
	`AŒocReq
(
EquÆRegi⁄
);

1820 
ªq
->
ªgi⁄1
 = 
rgn1
;

1821 
ªq
->
ªgi⁄2
 = 
rgn2
;

1822 if(
	`Ty≥dRódBlock
(&
ªt_vÆue
, (ret_value),

1823 
GrNumEquÆRegi⁄
) == -1)

1824 
ªt_vÆue
 = 
GR_FALSE
;

1825 
	`UNLOCK
(&
nxGlobÆLock
);

1826  
ªt_vÆue
;

1827 
	}
}

1839 
	$GrOff£tRegi⁄
(
GR_REGION_ID
 
ªgi⁄
, 
GR_SIZE
 
dx
, GR_SIZE 
dy
)

1841 
nxOff£tRegi⁄Req
 *
ªq
;

1843 
	`LOCK
(&
nxGlobÆLock
);

1844 
ªq
 = 
	`AŒocReq
(
Off£tRegi⁄
);

1845 
ªq
->
ªgi⁄
 =Ñegion;

1846 
ªq
->
dx
 = dx;

1847 
ªq
->
dy
 = dy;

1848 
	`UNLOCK
(&
nxGlobÆLock
);

1849 
	}
}

1865 
	$GrGëRegi⁄Box
(
GR_REGION_ID
 
ªgi⁄
, 
GR_RECT
 *
ª˘
)

1867 
nxGëRegi⁄BoxReq
 *
ªq
;

1868 
ªt_vÆue
;

1870 i‡(!
ª˘
)

1871  
GR_FALSE
;

1873 
	`LOCK
(&
nxGlobÆLock
);

1874 
ªq
 = 
	`AŒocReq
(
GëRegi⁄Box
);

1875 
ªq
->
ªgi⁄id
 = 
ªgi⁄
;

1876 if(
	`Ty≥dRódBlock
(
ª˘
, (*ª˘), 
GrNumGëRegi⁄Box
) == -1)

1877  
GR_FALSE
;

1878 if(
	`Ty≥dRódBlock
(&
ªt_vÆue
, (ret_value),

1879 
GrNumGëRegi⁄Box
) == -1)

1880 
ªt_vÆue
 = 
GR_FALSE
;

1881 
	`UNLOCK
(&
nxGlobÆLock
);

1882  
ªt_vÆue
;

1883 
	}
}

1896 
GR_REGION_ID


1897 
	$GrNewPﬁyg⁄Regi⁄
(
mode
, 
GR_COUNT
 
cou¡
, 
GR_POINT
 *
poöts
)

1899 
nxNewPﬁyg⁄Regi⁄Req
 *
ªq
;

1900 
size
;

1901 
GR_REGION_ID
 
ªgi⁄
;

1903 if(
cou¡
 == 0)

1904  
	`GrNewRegi⁄
();

1906 if(
poöts
 =
NULL
)

1909 
	`LOCK
(&
nxGlobÆLock
);

1910 
size
 = ()
cou¡
 * (
GR_POINT
);

1911 
ªq
 = 
	`AŒocReqExåa
(
NewPﬁyg⁄Regi⁄
, 
size
);

1912 
ªq
->
mode
 = mode;

1914 
	`mem˝y
(
	`GëReqD©a
(
ªq
), 
poöts
, 
size
);

1916 if(
	`Ty≥dRódBlock
(&
ªgi⁄
, (region),

1917 
GrNumNewPﬁyg⁄Regi⁄
) == -1)

1918 
ªgi⁄
 = 0;

1919 
	`UNLOCK
(&
nxGlobÆLock
);

1920  
ªgi⁄
;

1921 
	}
}

1934 
	$GrM≠Wödow
(
GR_WINDOW_ID
 
wid
)

1936 
nxM≠WödowReq
 *
ªq
;

1938 
	`LOCK
(&
nxGlobÆLock
);

1939 
ªq
 = 
	`AŒocReq
(
M≠Wödow
);

1940 
ªq
->
wödowid
 = 
wid
;

1941 
	`UNLOCK
(&
nxGlobÆLock
);

1942 
	}
}

1953 
	$GrUnm≠Wödow
(
GR_WINDOW_ID
 
wid
)

1955 
nxUnm≠WödowReq
 *
ªq
;

1957 
	`LOCK
(&
nxGlobÆLock
);

1958 
ªq
 = 
	`AŒocReq
(
Unm≠Wödow
);

1959 
ªq
->
wödowid
 = 
wid
;

1960 
	`UNLOCK
(&
nxGlobÆLock
);

1961 
	}
}

1972 
	$GrRai£Wödow
(
GR_WINDOW_ID
 
wid
)

1974 
nxRai£WödowReq
 *
ªq
;

1976 
	`LOCK
(&
nxGlobÆLock
);

1977 
ªq
 = 
	`AŒocReq
(
Rai£Wödow
);

1978 
ªq
->
wödowid
 = 
wid
;

1979 
	`UNLOCK
(&
nxGlobÆLock
);

1980 
	}
}

1991 
	$GrLowîWödow
(
GR_WINDOW_ID
 
wid
)

1993 
nxLowîWödowReq
 *
ªq
;

1995 
	`LOCK
(&
nxGlobÆLock
);

1996 
ªq
 = 
	`AŒocReq
(
LowîWödow
);

1997 
ªq
->
wödowid
 = 
wid
;

1998 
	`UNLOCK
(&
nxGlobÆLock
);

1999 
	}
}

2012 
	$GrMoveWödow
(
GR_WINDOW_ID
 
wid
, 
GR_COORD
 
x
, GR_COORD 
y
)

2014 
nxMoveWödowReq
 *
ªq
;

2016 
	`LOCK
(&
nxGlobÆLock
);

2017 
ªq
 = 
	`AŒocReq
(
MoveWödow
);

2018 
ªq
->
wödowid
 = 
wid
;

2019 
ªq
->
x
 = x;

2020 
ªq
->
y
 = y;

2021 
	`UNLOCK
(&
nxGlobÆLock
);

2022 
	}
}

2034 
	$GrResizeWödow
(
GR_WINDOW_ID
 
wid
, 
GR_SIZE
 
width
, GR_SIZE 
height
)

2036 
nxResizeWödowReq
 *
ªq
;

2038 
	`LOCK
(&
nxGlobÆLock
);

2039 
ªq
 = 
	`AŒocReq
(
ResizeWödow
);

2040 
ªq
->
wödowid
 = 
wid
;

2041 
ªq
->
width
 = width;

2042 
ªq
->
height
 = height;

2043 
	`UNLOCK
(&
nxGlobÆLock
);

2044 
	}
}

2059 
	$GrRï¨ítWödow
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
pwid
, 
GR_COORD
 
x
, GR_COORD 
y
)

2061 
nxRï¨ítWödowReq
 *
ªq
;

2063 
	`LOCK
(&
nxGlobÆLock
);

2064 
ªq
 = 
	`AŒocReq
(
Rï¨ítWödow
);

2065 
ªq
->
wödowid
 = 
wid
;

2066 
ªq
->
∑ª¡id
 = 
pwid
;

2067 
ªq
->
x
 = x;

2068 
ªq
->
y
 = y;

2069 
	`UNLOCK
(&
nxGlobÆLock
);

2070 
	}
}

2087 
	$GrCÀ¨Aªa
(
GR_WINDOW_ID
 
wid
, 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
width
,

2088 
GR_SIZE
 
height
, 
GR_BOOL
 
expo£Êag
)

2090 
nxCÀ¨AªaReq
 *
ªq
;

2092 
	`LOCK
(&
nxGlobÆLock
);

2093 
ªq
 = 
	`AŒocReq
(
CÀ¨Aªa
);

2094 
ªq
->
wödowid
 = 
wid
;

2095 
ªq
->
x
 = x;

2096 
ªq
->
y
 = y;

2097 
ªq
->
width
 = width;

2098 
ªq
->
height
 = height;

2099 
ªq
->
expo£Êag
 =Éxposeflag;

2100 
	`UNLOCK
(&
nxGlobÆLock
);

2101 
	}
}

2110 
GR_WINDOW_ID


2111 
	$GrGëFocus
()

2113 
GR_WINDOW_ID
 
wid
;

2115 
	`LOCK
(&
nxGlobÆLock
);

2116 
	`AŒocReq
(
GëFocus
);

2117 if(
	`Ty≥dRódBlock
(&
wid
, (wid), 
GrNumGëFocus
) == -1)

2118 
wid
 = 0;

2119 
	`UNLOCK
(&
nxGlobÆLock
);

2120  
wid
;

2121 
	}
}

2131 
	$GrSëFocus
(
GR_WINDOW_ID
 
wid
)

2133 
nxSëFocusReq
 *
ªq
;

2135 
	`LOCK
(&
nxGlobÆLock
);

2136 
ªq
 = 
	`AŒocReq
(
SëFocus
);

2137 
ªq
->
wödowid
 = 
wid
;

2138 
	`UNLOCK
(&
nxGlobÆLock
);

2139 
	}
}

2154 
	$GrSëWödowCurs‹
(
GR_WINDOW_ID
 
wid
, 
GR_CURSOR_ID
 
cid
)

2156 
nxSëWödowCurs‹Req
 *
ªq
;

2158 
	`LOCK
(&
nxGlobÆLock
);

2159 
ªq
 = 
	`AŒocReq
(
SëWödowCurs‹
);

2160 
ªq
->
wödowid
 = 
wid
;

2161 
ªq
->
curs‹id
 = 
cid
;

2162 
	`UNLOCK
(&
nxGlobÆLock
);

2163 
	}
}

2179 
GR_CURSOR_ID


2180 
	$GrNewCurs‹
(
GR_SIZE
 
width
, GR_SIZE 
height
, 
GR_COORD
 
hŸx
, GR_COORD 
hŸy
,

2181 
GR_COLOR
 
f‹eground
, GR_COLOR 
background
,

2182 
GR_BITMAP
 *
fgbôm≠
, GR_BITMAP *
bgbôm≠
)

2184 
nxNewCurs‹Req
 *
ªq
;

2185 
bôm≠size
;

2186 * 
d©a
;

2187 
GR_CURSOR_ID
 
curs‹id
;

2189 
bôm≠size
 = 
	`GR_BITMAP_SIZE
(
width
, 
height
Ë* (
GR_BITMAP
);

2190 
	`LOCK
(&
nxGlobÆLock
);

2191 
ªq
 = 
	`AŒocReqExåa
(
NewCurs‹
, 
bôm≠size
*2);

2192 
ªq
->
width
 = width;

2193 
ªq
->
height
 = height;

2194 
ªq
->
hŸx
 = hotx;

2195 
ªq
->
hŸy
 = hoty;

2196 
ªq
->
fgcﬁ‹
 = 
f‹eground
;

2197 
ªq
->
bgcﬁ‹
 = 
background
;

2198 
d©a
 = 
	`GëReqD©a
(
ªq
);

2199 
	`mem˝y
(
d©a
, 
fgbôm≠
, 
bôm≠size
);

2200 
	`mem˝y
(
d©a
+
bôm≠size
, 
bgbôm≠
, bitmapsize);

2202 if(
	`Ty≥dRódBlock
(&
curs‹id
, (curs‹id), 
GrNumNewCurs‹
) == -1)

2203 
curs‹id
 = 0;

2204 
	`UNLOCK
(&
nxGlobÆLock
);

2205  
curs‹id
;

2206 
	}
}

2222 
	$GrMoveCurs‹
(
GR_COORD
 
x
, GR_COORD 
y
)

2224 
nxMoveCurs‹Req
 *
ªq
;

2226 
	`LOCK
(&
nxGlobÆLock
);

2227 
ªq
 = 
	`AŒocReq
(
MoveCurs‹
);

2228 
ªq
->
x
 = x;

2229 
ªq
->
y
 = y;

2230 
	`UNLOCK
(&
nxGlobÆLock
);

2231 
	}
}

2243 
	$GrSëGCF‹eground
(
GR_GC_ID
 
gc
, 
GR_COLOR
 
f‹eground
)

2245 
nxSëGCF‹egroundReq
 *
ªq
;

2247 
	`LOCK
(&
nxGlobÆLock
);

2248 
ªq
 = 
	`AŒocReq
(
SëGCF‹eground
);

2249 
ªq
->
gcid
 = 
gc
;

2250 
ªq
->
cﬁ‹
 = 
f‹eground
;

2251 
	`UNLOCK
(&
nxGlobÆLock
);

2252 
	}
}

2264 
	$GrSëGCBackground
(
GR_GC_ID
 
gc
, 
GR_COLOR
 
background
)

2266 
nxSëGCBackgroundReq
 *
ªq
;

2268 
	`LOCK
(&
nxGlobÆLock
);

2269 
ªq
 = 
	`AŒocReq
(
SëGCBackground
);

2270 
ªq
->
gcid
 = 
gc
;

2271 
ªq
->
cﬁ‹
 = 
background
;

2272 
	`UNLOCK
(&
nxGlobÆLock
);

2273 
	}
}

2286 
	$GrSëGCF‹egroundPixñVÆ
(
GR_GC_ID
 
gc
, 
GR_PIXELVAL
 
f‹eground
)

2288 
nxSëGCF‹egroundPixñVÆReq
 *
ªq
;

2290 
	`LOCK
(&
nxGlobÆLock
);

2291 
ªq
 = 
	`AŒocReq
(
SëGCF‹egroundPixñVÆ
);

2292 
ªq
->
gcid
 = 
gc
;

2293 
ªq
->
pixñvÆ
 = 
f‹eground
;

2294 
	`UNLOCK
(&
nxGlobÆLock
);

2295 
	}
}

2308 
	$GrSëGCBackgroundPixñVÆ
(
GR_GC_ID
 
gc
, 
GR_PIXELVAL
 
background
)

2310 
nxSëGCBackgroundPixñVÆReq
 *
ªq
;

2312 
	`LOCK
(&
nxGlobÆLock
);

2313 
ªq
 = 
	`AŒocReq
(
SëGCBackgroundPixñVÆ
);

2314 
ªq
->
gcid
 = 
gc
;

2315 
ªq
->
pixñvÆ
 = 
background
;

2316 
	`UNLOCK
(&
nxGlobÆLock
);

2317 
	}
}

2329 
	$GrSëGCMode
(
GR_GC_ID
 
gc
, 
mode
)

2331 
nxSëGCModeReq
 *
ªq
;

2333 
	`LOCK
(&
nxGlobÆLock
);

2334 
ªq
 = 
	`AŒocReq
(
SëGCMode
);

2335 
ªq
->
gcid
 = 
gc
;

2336 
ªq
->
mode
 = mode;

2337 
	`UNLOCK
(&
nxGlobÆLock
);

2338 
	}
}

2349 
	$GrSëGCLöeAâribuãs
(
GR_GC_ID
 
gc
, 
löe°yÀ
)

2351 
nxSëGCLöeAâribuãsReq
 *
ªq
;

2353 
	`LOCK
(&
nxGlobÆLock
);

2354 
ªq
 = 
	`AŒocReq
(
SëGCLöeAâribuãs
);

2355 
ªq
->
gcid
 = 
gc
;

2356 
ªq
->
löe°yÀ
 =Üinestyle;

2357 
	`UNLOCK
(&
nxGlobÆLock
);

2358 
	}
}

2372 
	$GrSëGCDash
(
GR_GC_ID
 
gc
, *
dashes
, 
cou¡
)

2374 
nxSëGCDashReq
 *
ªq
;

2375 
size
;

2377 
size
 = 
cou¡
 * ();

2378 
	`LOCK
(&
nxGlobÆLock
);

2379 
ªq
 = 
	`AŒocReqExåa
(
SëGCDash
, 
size
);

2380 
ªq
->
gcid
 = 
gc
;

2381 
ªq
->
cou¡
 = count;

2382 
	`mem˝y
(
	`GëReqD©a
(
ªq
), 
dashes
, 
size
);

2383 
	`UNLOCK
(&
nxGlobÆLock
);

2384 
	}
}

2397 
	$GrSëGCFûlMode
(
GR_GC_ID
 
gc
, 
fûlmode
)

2399 
nxSëGCFûlModeReq
 *
ªq
;

2401 
	`LOCK
(&
nxGlobÆLock
);

2402 
ªq
 = 
	`AŒocReq
(
SëGCFûlMode
);

2403 
ªq
->
gcid
 = 
gc
;

2404 
ªq
->
fûlmode
 = fillmode;

2405 
	`UNLOCK
(&
nxGlobÆLock
);

2406 
	}
}

2421 
	$GrSëGCStù∂e
(
GR_GC_ID
 
gc
, 
GR_BITMAP
 *
bôm≠
, 
width
, 
height
)

2423 
nxSëGCStù∂eReq
 *
ªq
;

2424 
size
;

2426 
size
 = 
	`GR_BITMAP_SIZE
(
width
, 
height
Ë* (
GR_BITMAP
);

2427 
	`LOCK
(&
nxGlobÆLock
);

2428 
ªq
 = 
	`AŒocReqExåa
(
SëGCStù∂e
, 
size
);

2429 
ªq
->
gcid
 = 
gc
;

2430 
ªq
->
width
 = width;

2431 
ªq
->
height
 = height;

2432 
	`mem˝y
(
	`GëReqD©a
(
ªq
), 
bôm≠
, 
size
);

2433 
	`UNLOCK
(&
nxGlobÆLock
);

2434 
	}
}

2449 
	$GrSëGCTûe
(
GR_GC_ID
 
gc
, 
GR_WINDOW_ID
 
pixm≠
, 
width
, 
height
)

2451 
nxSëGCTûeReq
 *
ªq
;

2453 
	`LOCK
(&
nxGlobÆLock
);

2454 
ªq
 = 
	`AŒocReq
(
SëGCTûe
);

2455 
ªq
->
gcid
 = 
gc
;

2456 
ªq
->
pixm≠
 =Öixmap;

2457 
ªq
->
width
 = width;

2458 
ªq
->
height
 = height;

2459 
	`UNLOCK
(&
nxGlobÆLock
);

2460 
	}
}

2474 
	$GrSëGCTSOff£t
(
GR_GC_ID
 
gc
, 
xoff
, 
yoff
)

2476 
nxSëGCTSOff£tReq
 *
ªq
;

2478 
	`LOCK
(&
nxGlobÆLock
);

2479 
ªq
 = 
	`AŒocReq
(
SëGCTSOff£t
);

2480 
ªq
->
gcid
 = 
gc
;

2481 
ªq
->
xoff£t
 = 
xoff
;

2482 
ªq
->
yoff£t
 = 
yoff
;

2483 
	`UNLOCK
(&
nxGlobÆLock
);

2484 
	}
}

2497 
	$GrSëGCU£Background
(
GR_GC_ID
 
gc
, 
GR_BOOL
 
Êag
)

2499 
nxSëGCU£BackgroundReq
 *
ªq
;

2501 
	`LOCK
(&
nxGlobÆLock
);

2502 
ªq
 = 
	`AŒocReq
(
SëGCU£Background
);

2503 
ªq
->
gcid
 = 
gc
;

2504 
ªq
->
Êag
 = flag;

2505 
	`UNLOCK
(&
nxGlobÆLock
);

2506 
	}
}

2524 
GR_FONT_ID


2525 
	$GrCª©eF⁄t
(
GR_CHAR
 *
«me
, 
GR_COORD
 
height
, 
GR_LOGFONT
 *
∂ogf⁄t
)

2527 
GR_FONT_ID
 
f⁄tid
;

2529 
	`LOCK
(&
nxGlobÆLock
);

2531 i‡(
∂ogf⁄t
)

2533 
nxCª©eLogF⁄tReq
 *
ªq
;

2534 
ªq
 = 
	`AŒocReq
(
Cª©eLogF⁄t
);

2535 
	`mem˝y
(&
ªq
->
lf
, 
∂ogf⁄t
, (*plogfont));

2537 i‡(
	`Ty≥dRódBlock
(&
f⁄tid
, (f⁄tid), 
GrNumCª©eLogF⁄t
) == -1)

2538 
f⁄tid
 = 0;

2542 
nxCª©eF⁄tReq
 *
ªq
;

2544 i‡(!
«me
)

2545 
«me
 = "";

2547 
ªq
 = 
	`AŒocReqExåa
(
Cª©eF⁄t
, 
	`°æí
(
«me
) + 1);

2548 
ªq
->
height
 = height;

2549 
	`°r˝y
((*)
	`GëReqD©a
(
ªq
), 
«me
);

2551 i‡(
	`Ty≥dRódBlock
(&
f⁄tid
, (f⁄tid), 
GrNumCª©eF⁄t
) == -1)

2552 
f⁄tid
 = 0;

2555 
	`UNLOCK
(&
nxGlobÆLock
);

2556  
f⁄tid
;

2557 
	}
}

2569 
	$GrGëF⁄tLi°
(
GR_FONTLIST
 ***
f⁄ts
, *
numf⁄ts
)

2571 
nxGëF⁄tLi°Req
 *
ªq
;

2572 *
tmp°r
;

2573 
GR_FONTLIST
 **
Êi°
;

2574 
num
, 
Àn
, 
i
;

2576 
	`LOCK
(&
nxGlobÆLock
);

2577 
ªq
 = 
	`AŒocReq
(
GëF⁄tLi°
);

2579 i‡(
	`Ty≥dRódBlock
(&
num
, (), 
GrNumGëF⁄tLi°
) == -1)

2580 
num
 = 0;

2582 *
numf⁄ts
 = 
num
;

2584 if(
num
 == -1)

2587 
Êi°
 = (
GR_FONTLIST
**)
	`mÆloc
(
num
 * (GR_FONTLIST*));

2589 
i
 = 0; i < 
num
; i++)

2590 
Êi°
[
i
] = (
GR_FONTLIST
*)
	`mÆloc
((GR_FONTLIST*));

2592 
i
 = 0; i < 
num
; i++) {

2593 
	`RódBlock
(&
Àn
, ());

2594 
tmp°r
 = (*)
	`mÆloc
(
Àn
 * ());

2595 
	`RódBlock
(
tmp°r
, 
Àn
 * ());

2596 
Êi°
[
i
]->
â«me
 = 
tmp°r
;

2598 
	`RódBlock
(&
Àn
, ());

2599 
tmp°r
 = (*)
	`mÆloc
(
Àn
 * ());

2600 
	`RódBlock
(
tmp°r
, 
Àn
 * ());

2601 
Êi°
[
i
]->
mw«me
 = 
tmp°r
;

2605 *
f⁄ts
 = 
Êi°
;

2606 
	`UNLOCK
(&
nxGlobÆLock
);

2607 
	}
}

2618 
	$GrFªeF⁄tLi°
(
GR_FONTLIST
 ***
f⁄ts
, 
numf⁄ts
)

2620 
i
;

2621 
MWFONTLIST
 *
g
, **
li°
 = *
f⁄ts
;

2623 
	`LOCK
(&
nxGlobÆLock
);

2624 
i
 = 0; i < 
numf⁄ts
; i++) {

2625 
g
 = 
li°
[
i
];

2626 if(
g
) {

2627 if(
g
->
mw«me
)

2628 
	`‰ì
(
g
->
mw«me
);

2629 if(
g
->
â«me
)

2630 
	`‰ì
(
g
->
â«me
);

2631 
	`‰ì
(
g
);

2634 
	`‰ì
(
li°
);

2635 *
f⁄ts
 = 0;

2636 
	`UNLOCK
(&
nxGlobÆLock
);

2637 
	}
}

2648 
	$GrSëF⁄tSize
(
GR_FONT_ID
 
f⁄tid
, 
GR_COORD
 
size
)

2650 
nxSëF⁄tSizeReq
 *
ªq
;

2652 
	`LOCK
(&
nxGlobÆLock
);

2653 
ªq
 = 
	`AŒocReq
(
SëF⁄tSize
);

2654 
ªq
->
f⁄tid
 = fontid;

2655 
ªq
->
f⁄tsize
 = 
size
;

2656 
	`UNLOCK
(&
nxGlobÆLock
);

2657 
	}
}

2668 
	$GrSëF⁄tRŸ©i⁄
(
GR_FONT_ID
 
f⁄tid
, 
ã¡hdegªes
)

2670 
nxSëF⁄tRŸ©i⁄Req
 *
ªq
;

2672 
	`LOCK
(&
nxGlobÆLock
);

2673 
ªq
 = 
	`AŒocReq
(
SëF⁄tRŸ©i⁄
);

2674 
ªq
->
f⁄tid
 = fontid;

2675 
ªq
->
ã¡hdegªes
 =Åenthdegrees;

2676 
	`UNLOCK
(&
nxGlobÆLock
);

2677 
	}
}

2690 
	$GrSëF⁄tAâr
(
GR_FONT_ID
 
f⁄tid
, 
£tÊags
, 
˛rÊags
)

2692 
nxSëF⁄tAârReq
 *
ªq
;

2694 
	`LOCK
(&
nxGlobÆLock
);

2695 
ªq
 = 
	`AŒocReq
(
SëF⁄tAâr
);

2696 
ªq
->
f⁄tid
 = fontid;

2697 
ªq
->
£tÊags
 = setflags;

2698 
ªq
->
˛rÊags
 = clrflags;

2699 
	`UNLOCK
(&
nxGlobÆLock
);

2700 
	}
}

2712 
	$GrDe°royF⁄t
(
GR_FONT_ID
 
f⁄tid
)

2714 
nxDe°royF⁄tReq
 *
ªq
;

2716 
	`LOCK
(&
nxGlobÆLock
);

2717 
ªq
 = 
	`AŒocReq
(
De°royF⁄t
);

2718 
ªq
->
f⁄tid
 = fontid;

2719 
	`UNLOCK
(&
nxGlobÆLock
);

2720 
	}
}

2732 
	$GrSëGCF⁄t
(
GR_GC_ID
 
gc
, 
GR_FONT_ID
 
f⁄t
)

2734 
nxSëGCF⁄tReq
 *
ªq
;

2736 
	`LOCK
(&
nxGlobÆLock
);

2737 
ªq
 = 
	`AŒocReq
(
SëGCF⁄t
);

2738 
ªq
->
gcid
 = 
gc
;

2739 
ªq
->
f⁄tid
 = 
f⁄t
;

2740 
	`UNLOCK
(&
nxGlobÆLock
);

2741 
	}
}

2757 
	$GrLöe
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x1
, GR_COORD 
y1
, GR_COORD 
x2
,

2758 
GR_COORD
 
y2
)

2760 
nxLöeReq
 *
ªq
;

2762 
	`LOCK
(&
nxGlobÆLock
);

2763 
ªq
 = 
	`AŒocReq
(
Löe
);

2764 
ªq
->
døwid
 = 
id
;

2765 
ªq
->
gcid
 = 
gc
;

2766 
ªq
->
x1
 = x1;

2767 
ªq
->
y1
 = y1;

2768 
ªq
->
x2
 = x2;

2769 
ªq
->
y2
 = y2;

2770 
	`UNLOCK
(&
nxGlobÆLock
);

2771 
	}
}

2787 
	$GrRe˘
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
width
,

2788 
GR_SIZE
 
height
)

2790 
nxRe˘Req
 *
ªq
;

2792 
	`LOCK
(&
nxGlobÆLock
);

2793 
ªq
 = 
	`AŒocReq
(
Re˘
);

2794 
ªq
->
døwid
 = 
id
;

2795 
ªq
->
gcid
 = 
gc
;

2796 
ªq
->
x
 = x;

2797 
ªq
->
y
 = y;

2798 
ªq
->
width
 = width;

2799 
ªq
->
height
 = height;

2800 
	`UNLOCK
(&
nxGlobÆLock
);

2801 
	}
}

2817 
	$GrFûlRe˘
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

2818 
GR_SIZE
 
width
, GR_SIZE 
height
)

2820 
nxFûlRe˘Req
 *
ªq
;

2822 
	`LOCK
(&
nxGlobÆLock
);

2823 
ªq
 = 
	`AŒocReq
(
FûlRe˘
);

2824 
ªq
->
døwid
 = 
id
;

2825 
ªq
->
gcid
 = 
gc
;

2826 
ªq
->
x
 = x;

2827 
ªq
->
y
 = y;

2828 
ªq
->
width
 = width;

2829 
ªq
->
height
 = height;

2830 
	`UNLOCK
(&
nxGlobÆLock
);

2831 
	}
}

2847 
	$GrEŒù£
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
rx
,

2848 
GR_SIZE
 
ry
)

2850 
nxEŒù£Req
 *
ªq
;

2852 
	`LOCK
(&
nxGlobÆLock
);

2853 
ªq
 = 
	`AŒocReq
(
EŒù£
);

2854 
ªq
->
døwid
 = 
id
;

2855 
ªq
->
gcid
 = 
gc
;

2856 
ªq
->
x
 = x;

2857 
ªq
->
y
 = y;

2858 
ªq
->
rx
 =Ñx;

2859 
ªq
->
ry
 =Ñy;

2860 
	`UNLOCK
(&
nxGlobÆLock
);

2861 
	}
}

2877 
	$GrFûlEŒù£
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

2878 
GR_SIZE
 
rx
, GR_SIZE 
ry
)

2880 
nxFûlEŒù£Req
 *
ªq
;

2882 
	`LOCK
(&
nxGlobÆLock
);

2883 
ªq
 = 
	`AŒocReq
(
FûlEŒù£
);

2884 
ªq
->
døwid
 = 
id
;

2885 
ªq
->
gcid
 = 
gc
;

2886 
ªq
->
x
 = x;

2887 
ªq
->
y
 = y;

2888 
ªq
->
rx
 =Ñx;

2889 
ªq
->
ry
 =Ñy;

2890 
	`UNLOCK
(&
nxGlobÆLock
);

2891 
	}
}

2914 
	$GrArc
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

2915 
GR_SIZE
 
rx
, GR_SIZE 
ry
, 
GR_COORD
 
ax
, GR_COORD 
ay
,

2916 
GR_COORD
 
bx
, GR_COORD 
by
, 
ty≥
)

2918 
nxArcReq
 *
ªq
;

2920 
	`LOCK
(&
nxGlobÆLock
);

2921 
ªq
 = 
	`AŒocReq
(
Arc
);

2922 
ªq
->
døwid
 = 
id
;

2923 
ªq
->
gcid
 = 
gc
;

2924 
ªq
->
x
 = x;

2925 
ªq
->
y
 = y;

2926 
ªq
->
rx
 =Ñx;

2927 
ªq
->
ry
 =Ñy;

2928 
ªq
->
ax
 =áx;

2929 
ªq
->
ay
 =áy;

2930 
ªq
->
bx
 = bx;

2931 
ªq
->
by
 = by;

2932 
ªq
->
ty≥
 =Åype;

2933 
	`UNLOCK
(&
nxGlobÆLock
);

2934 
	}
}

2956 
	$GrArcAngÀ
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

2957 
GR_SIZE
 
rx
, GR_SIZE 
ry
, 
GR_COORD
 
™gÀ1
, GR_COORD 
™gÀ2
, 
ty≥
)

2959 
nxArcAngÀReq
 *
ªq
;

2961 
	`LOCK
(&
nxGlobÆLock
);

2962 
ªq
 = 
	`AŒocReq
(
ArcAngÀ
);

2963 
ªq
->
døwid
 = 
id
;

2964 
ªq
->
gcid
 = 
gc
;

2965 
ªq
->
x
 = x;

2966 
ªq
->
y
 = y;

2967 
ªq
->
rx
 =Ñx;

2968 
ªq
->
ry
 =Ñy;

2969 
ªq
->
™gÀ1
 =ángle1;

2970 
ªq
->
™gÀ2
 =ángle2;

2971 
ªq
->
ty≥
 =Åype;

2972 
	`UNLOCK
(&
nxGlobÆLock
);

2973 
	}
}

2993 
	$GrBôm≠
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
width
,

2994 
GR_SIZE
 
height
, 
GR_BITMAP
 *
imagebôs
)

2996 
nxBôm≠Req
 *
ªq
;

2997 
bôm≠size
;

2999 
bôm≠size
 = ()
	`GR_BITMAP_SIZE
(
width
, 
height
Ë* (
GR_BITMAP
);

3000 
	`LOCK
(&
nxGlobÆLock
);

3001 
ªq
 = 
	`AŒocReqExåa
(
Bôm≠
, 
bôm≠size
);

3002 
ªq
->
døwid
 = 
id
;

3003 
ªq
->
gcid
 = 
gc
;

3004 
ªq
->
x
 = x;

3005 
ªq
->
y
 = y;

3006 
ªq
->
width
 = width;

3007 
ªq
->
height
 = height;

3008 
	`mem˝y
(
	`GëReqD©a
(
ªq
), 
imagebôs
, 
bôm≠size
);

3009 
	`UNLOCK
(&
nxGlobÆLock
);

3010 
	}
}

3026 
	$GrDøwImageBôs
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

3027 
GR_IMAGE_HDR
 *
pimage
)

3029 
nxDøwImageBôsReq
 *
ªq
;

3030 
imagesize
;

3031 
∑lsize
;

3032 *
addr
;

3034 
imagesize
 = 
pimage
->
pôch
 *Öimage->
height
;

3035 
∑lsize
 = 
pimage
->∑lsizê* (
MWPALENTRY
);

3036 
	`LOCK
(&
nxGlobÆLock
);

3037 
ªq
 = 
	`AŒocReqExåa
(
DøwImageBôs
, 
imagesize
 + 
∑lsize
);

3038 
ªq
->
døwid
 = 
id
;

3039 
ªq
->
gcid
 = 
gc
;

3040 
ªq
->
x
 = x;

3041 
ªq
->
y
 = y;

3043 
ªq
->
width
 = 
pimage
->width;

3044 
ªq
->
height
 = 
pimage
->height;

3045 
ªq
->
∂™es
 = 
pimage
->planes;

3046 
ªq
->
bµ
 = 
pimage
->bpp;

3047 
ªq
->
pôch
 = 
pimage
->pitch;

3048 
ªq
->
byã•îpixñ
 = 
pimage
->bytesperpixel;

3049 
ªq
->
com¥essi⁄
 = 
pimage
->compression;

3050 
ªq
->
∑lsize
 = 
pimage
->palsize;

3051 
ªq
->
å™scﬁ‹
 = 
pimage
->transcolor;

3052 
addr
 = 
	`GëReqD©a
(
ªq
);

3053 
	`mem˝y
(
addr
, 
pimage
->
imagebôs
, 
imagesize
);

3054 
	`mem˝y
(
addr
+
imagesize
, 
pimage
->
∑Àâe
, 
∑lsize
);

3055 
	`UNLOCK
(&
nxGlobÆLock
);

3056 
	}
}

3058 #i‡
MW_FEATURE_IMAGES
 && 
deföed
(
HAVE_FILEIO
)

3083 
	$GrDøwImageFromFûe
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

3084 
GR_SIZE
 
width
, GR_SIZE 
height
, * 
∑th
, 
Êags
)

3086 
nxDøwImageFromFûeReq
 *
ªq
;

3088 
	`LOCK
(&
nxGlobÆLock
);

3089 
ªq
 = 
	`AŒocReqExåa
(
DøwImageFromFûe
, 
	`°æí
(
∑th
)+1);

3090 
ªq
->
døwid
 = 
id
;

3091 
ªq
->
gcid
 = 
gc
;

3092 
ªq
->
x
 = x;

3093 
ªq
->
y
 = y;

3094 
ªq
->
width
 = width;

3095 
ªq
->
height
 = height;

3096 
ªq
->
Êags
 = flags;

3097 
	`mem˝y
(
	`GëReqD©a
(
ªq
), 
∑th
, 
	`°æí
(path)+1);

3098 
	`UNLOCK
(&
nxGlobÆLock
);

3099 
	}
}

3102 #i‡
MW_FEATURE_IMAGES
 && 
deföed
(
HAVE_FILEIO
)

3118 
GR_IMAGE_ID


3119 
	$GrLﬂdImageFromFûe
(*
∑th
, 
Êags
)

3121 
nxLﬂdImageFromFûeReq
 *
ªq
;

3122 
GR_IMAGE_ID
 
imageid
;

3124 
	`LOCK
(&
nxGlobÆLock
);

3125 
ªq
 = 
	`AŒocReqExåa
(
LﬂdImageFromFûe
, 
	`°æí
(
∑th
)+1);

3126 
ªq
->
Êags
 = flags;

3127 
	`mem˝y
(
	`GëReqD©a
(
ªq
), 
∑th
, 
	`°æí
(path)+1);

3129 if(
	`Ty≥dRódBlock
(&
imageid
, (imageid),

3130 
GrNumLﬂdImageFromFûe
) == -1)

3131 
imageid
 = 0;

3132 
	`UNLOCK
(&
nxGlobÆLock
);

3133  
imageid
;

3134 
	}
}

3137 #i‡
MW_FEATURE_IMAGES


3155 
	$GrDøwImageToFô
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

3156 
GR_SIZE
 
width
, GR_SIZE 
height
, 
GR_IMAGE_ID
 
imageid
)

3158 
nxDøwImageToFôReq
 *
ªq
;

3160 
	`LOCK
(&
nxGlobÆLock
);

3161 
ªq
 = 
	`AŒocReq
(
DøwImageToFô
);

3162 
ªq
->
døwid
 = 
id
;

3163 
ªq
->
gcid
 = 
gc
;

3164 
ªq
->
x
 = x;

3165 
ªq
->
y
 = y;

3166 
ªq
->
width
 = width;

3167 
ªq
->
height
 = height;

3168 
ªq
->
imageid
 = imageid;

3169 
	`UNLOCK
(&
nxGlobÆLock
);

3170 
	}
}

3173 #i‡
MW_FEATURE_IMAGES


3182 
	$GrFªeImage
(
GR_IMAGE_ID
 
id
)

3184 
nxFªeImageReq
 *
ªq
;

3186 
	`LOCK
(&
nxGlobÆLock
);

3187 
ªq
 = 
	`AŒocReq
(
FªeImage
);

3188 
ªq
->
id
 = id;

3189 
	`UNLOCK
(&
nxGlobÆLock
);

3190 
	}
}

3193 #i‡
MW_FEATURE_IMAGES


3204 
	$GrGëImageInfo
(
GR_IMAGE_ID
 
id
, 
GR_IMAGE_INFO
 *
iù
)

3206 
nxGëImageInfoReq
 *
ªq
;

3208 
	`LOCK
(&
nxGlobÆLock
);

3209 
ªq
 = 
	`AŒocReq
(
GëImageInfo
);

3210 
ªq
->
id
 = id;

3211 
	`Ty≥dRódBlock
(
iù
, (
GR_IMAGE_INFO
), 
GrNumGëImageInfo
);

3212 
	`UNLOCK
(&
nxGlobÆLock
);

3213 
	}
}

3224 
	$£ndImageBuf„r
(c⁄° *
buf„r
, 
size
)

3226 
bufid
;

3227 
bufsize
 = 
size
;

3228 c⁄° *
buÂå
 = (c⁄° *)
buf„r
;

3229 
nxImageBuf„rAŒocReq
 *
Æloc
;

3230 
nxImageBuf„rSídReq
 *
£nd
;

3233 
Æloc
 = 
	`AŒocReq
(
ImageBuf„rAŒoc
);

3234 
Æloc
->
size
 = size;

3235 
	`Ty≥dRódBlock
(&
bufid
, (bufid), 
GrNumImageBuf„rAŒoc
);

3237 i‡(
bufid
 < 0)

3241 
bufsize
 > 0) {

3242 
chunk
 = (
MAXREQUESTSZ
 - (
nxImageBuf„rSídReq
));

3243 i‡(
chunk
 > 
bufsize
)

3244 
chunk
 = 
bufsize
;

3246 
£nd
 = 
	`AŒocReqExåa
(
ImageBuf„rSíd
, 
chunk
);

3247 
£nd
->
buf„r_id
 = 
bufid
;

3248 
£nd
->
size
 = 
chunk
;

3250 
	`mem˝y
(
	`GëReqD©a
(
£nd
), 
buÂå
, 
chunk
);

3251 
buÂå
 +
chunk
;

3252 
bufsize
 -
chunk
;

3255  
bufid
;

3256 
	}
}

3258 #i‡
MW_FEATURE_IMAGES


3270 
GR_IMAGE_ID


3271 
	$GrLﬂdImageFromBuf„r
(*
buf„r
, 
size
, 
Êags
)

3273 
nxLﬂdImageFromBuf„rReq
 *
ªq
;

3274 
bufid
;

3275 
GR_IMAGE_ID
 
imageid
;

3277 
	`LOCK
(&
nxGlobÆLock
);

3279 
bufid
 = 
	`£ndImageBuf„r
(
buf„r
, 
size
);

3281 i‡(!
bufid
) {

3282 
	`UNLOCK
(&
nxGlobÆLock
);

3288 
ªq
 = 
	`AŒocReq
(
LﬂdImageFromBuf„r
);

3289 
ªq
->
Êags
 = flags;

3290 
ªq
->
buf„r
 = 
bufid
;

3292 i‡(
	`Ty≥dRódBlock
(&
imageid
, (imageid),

3293 
GrNumLﬂdImageFromBuf„r
) == -1)

3294 
imageid
 = 0;

3295 
	`UNLOCK
(&
nxGlobÆLock
);

3296  
imageid
;

3297 
	}
}

3300 #i‡
MW_FEATURE_IMAGES


3319 
	$GrDøwImageFromBuf„r
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

3320 
GR_SIZE
 
width
, GR_SIZE 
height
, *
buf„r
, 
size
, 
Êags
)

3322 
nxDøwImageFromBuf„rReq
 *
ªq
;

3323 
bufid
;

3325 
	`LOCK
(&
nxGlobÆLock
);

3327 
bufid
 = 
	`£ndImageBuf„r
(
buf„r
, 
size
);

3329 i‡(!
bufid
) {

3330 
	`UNLOCK
(&
nxGlobÆLock
);

3336 
ªq
 = 
	`AŒocReq
(
DøwImageFromBuf„r
);

3337 
ªq
->
Êags
 = flags;

3338 
ªq
->
døwid
 = 
id
;

3339 
ªq
->
gcid
 = 
gc
;

3340 
ªq
->
x
 = x;

3341 
ªq
->
y
 = y;

3342 
ªq
->
width
 = width;

3343 
ªq
->
height
 = height;

3344 
ªq
->
Êags
 = flags;

3345 
ªq
->
buf„r
 = 
bufid
;

3346 
	`UNLOCK
(&
nxGlobÆLock
);

3347 
	}
}

3391 
	$GrAªa
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
width
,

3392 
GR_SIZE
 
height
, *
pixñs
, 
pixty≥
)

3394 
nxAªaReq
 *
ªq
;

3395 
size
;

3396 
chunk_y
;

3397 
pixsize
;

3400 
pixty≥
) {

3401 
MWPF_RGB
:

3402 
pixsize
 = (
MWCOLORVAL
);

3404 
MWPF_PIXELVAL
:

3405 
pixsize
 = (
MWPIXELVAL
);

3407 
MWPF_PALETTE
:

3408 
MWPF_TRUECOLOR332
:

3409 
pixsize
 = ();

3411 
MWPF_TRUECOLOR0888
:

3412 
pixsize
 = ();

3414 
MWPF_TRUECOLOR888
:

3415 
pixsize
 = 3;

3417 
MWPF_TRUECOLOR565
:

3418 
MWPF_TRUECOLOR555
:

3419 
pixsize
 = ();

3425 
	`LOCK
(&
nxGlobÆLock
);

3427 
height
 > 0) {

3428 
chunk_y
 = (
MAXREQUESTSZ
 - (
nxAªaReq
)) /

3429 (()
width
 * 
pixsize
);

3430 if(
chunk_y
 > 
height
)

3431 
chunk_y
 = 
height
;

3432 
size
 = 
chunk_y
 * (()
width
 * 
pixsize
);

3433 
ªq
 = 
	`AŒocReqExåa
(
Aªa
, 
size
);

3434 
ªq
->
døwid
 = 
id
;

3435 
ªq
->
gcid
 = 
gc
;

3436 
ªq
->
x
 = x;

3437 
ªq
->
y
 = y;

3438 
ªq
->
width
 = width;

3439 
ªq
->
height
 = 
chunk_y
;

3440 
ªq
->
pixty≥
 =Öixtype;

3441 
	`mem˝y
(
	`GëReqD©a
(
ªq
), 
pixñs
, 
size
);

3442 
pixñs
 = (*)(((*ÌixñsË+ 
size
);

3443 
y
 +
chunk_y
;

3444 
height
 -
chunk_y
;

3446 
	`UNLOCK
(&
nxGlobÆLock
);

3447 
	}
}

3468 
	$GrC›yAªa
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

3469 
GR_SIZE
 
width
, GR_SIZE 
height
, 
GR_DRAW_ID
 
§cid
,

3470 
GR_COORD
 
§cx
, GR_COORD 
§cy
, 
›
)

3472 
nxC›yAªaReq
 *
ªq
;

3474 
	`LOCK
(&
nxGlobÆLock
);

3475 
ªq
 = 
	`AŒocReq
(
C›yAªa
);

3476 
ªq
->
døwid
 = 
id
;

3477 
ªq
->
gcid
 = 
gc
;

3478 
ªq
->
x
 = x;

3479 
ªq
->
y
 = y;

3480 
ªq
->
width
 = width;

3481 
ªq
->
height
 = height;

3482 
ªq
->
§cid
 = srcid;

3483 
ªq
->
§cx
 = srcx;

3484 
ªq
->
§cy
 = srcy;

3485 
ªq
->
›
 = op;

3486 
	`UNLOCK
(&
nxGlobÆLock
);

3487 
	}
}

3507 
	$GrRódAªa
(
GR_DRAW_ID
 
id
,
GR_COORD
 
x
,GR_COORD 
y
,
GR_SIZE
 
width
,

3508 
GR_SIZE
 
height
, 
GR_PIXELVAL
 *
pixñs
)

3510 
nxRódAªaReq
 *
ªq
;

3511 
size
;

3513 
	`LOCK
(&
nxGlobÆLock
);

3514 
ªq
 = 
	`AŒocReq
(
RódAªa
);

3515 
ªq
->
døwid
 = 
id
;

3516 
ªq
->
x
 = x;

3517 
ªq
->
y
 = y;

3518 
ªq
->
width
 = width;

3519 
ªq
->
height
 = height;

3520 
size
 = ()
width
 * 
height
 * (
MWPIXELVAL
);

3521 
	`Ty≥dRódBlock
(
pixñs
, 
size
, 
GrNumRódAªa
);

3522 
	`UNLOCK
(&
nxGlobÆLock
);

3523 
	}
}

3537 
	$GrPoöt
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
)

3539 
nxPoötReq
 *
ªq
;

3541 
	`LOCK
(&
nxGlobÆLock
);

3542 
ªq
 = 
	`AŒocReq
(
Poöt
);

3543 
ªq
->
døwid
 = 
id
;

3544 
ªq
->
gcid
 = 
gc
;

3545 
ªq
->
x
 = x;

3546 
ªq
->
y
 = y;

3547 
	`UNLOCK
(&
nxGlobÆLock
);

3548 
	}
}

3562 
	$GrPoöts
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COUNT
 
cou¡
, 
GR_POINT
 *
poöâabÀ
)

3564 
nxPoötsReq
 *
ªq
;

3565 
size
;

3567 
size
 = ()
cou¡
 * (
GR_POINT
);

3568 
	`LOCK
(&
nxGlobÆLock
);

3569 
ªq
 = 
	`AŒocReqExåa
(
Poöts
, 
size
);

3570 
ªq
->
døwid
 = 
id
;

3571 
ªq
->
gcid
 = 
gc
;

3572 
	`mem˝y
(
	`GëReqD©a
(
ªq
), 
poöâabÀ
, 
size
);

3573 
	`UNLOCK
(&
nxGlobÆLock
);

3574 
	}
}

3590 
	$GrPﬁy
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COUNT
 
cou¡
, 
GR_POINT
 *
poöâabÀ
)

3592 
nxPﬁyReq
 *
ªq
;

3593 
size
;

3595 
	`LOCK
(&
nxGlobÆLock
);

3596 
size
 = ()
cou¡
 * (
GR_POINT
);

3597 
ªq
 = 
	`AŒocReqExåa
(
Pﬁy
, 
size
);

3598 
ªq
->
døwid
 = 
id
;

3599 
ªq
->
gcid
 = 
gc
;

3600 
	`mem˝y
(
	`GëReqD©a
(
ªq
), 
poöâabÀ
, 
size
);

3601 
	`UNLOCK
(&
nxGlobÆLock
);

3602 
	}
}

3618 
	$GrFûlPﬁy
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COUNT
 
cou¡
,
GR_POINT
 *
poöâabÀ
)

3620 
nxFûlPﬁyReq
 *
ªq
;

3621 
size
;

3623 
	`LOCK
(&
nxGlobÆLock
);

3624 
size
 = ()
cou¡
 * (
GR_POINT
);

3625 
ªq
 = 
	`AŒocReqExåa
(
FûlPﬁy
, 
size
);

3626 
ªq
->
døwid
 = 
id
;

3627 
ªq
->
gcid
 = 
gc
;

3628 
	`mem˝y
(
	`GëReqD©a
(
ªq
), 
poöâabÀ
, 
size
);

3629 
	`UNLOCK
(&
nxGlobÆLock
);

3630 
	}
}

3648 
	$GrText
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
, *
°r
,

3649 
GR_COUNT
 
cou¡
, 
GR_TEXTFLAGS
 
Êags
)

3651 
nxTextReq
 *
ªq
;

3652 
size
;

3655 if(
cou¡
 =-1 && (
Êags
&
MWTF_PACKMASK
Ë=
MWTF_ASCII
)

3656 
cou¡
 = 
	`°æí
((*)
°r
);

3658 
size
 = 
	`nxCÆcSåögByãs
(
°r
, 
cou¡
, 
Êags
);

3660 
	`LOCK
(&
nxGlobÆLock
);

3661 
ªq
 = 
	`AŒocReqExåa
(
Text
, 
size
);

3662 
ªq
->
døwid
 = 
id
;

3663 
ªq
->
gcid
 = 
gc
;

3664 
ªq
->
x
 = x;

3665 
ªq
->
y
 = y;

3666 
ªq
->
cou¡
 = count;

3667 
ªq
->
Êags
 = flags;

3668 
	`mem˝y
(
	`GëReqD©a
(
ªq
), 
°r
, 
size
);

3669 
	`UNLOCK
(&
nxGlobÆLock
);

3670 
	}
}

3682 
	$GrGëSy°emPÆëã
(
GR_PALETTE
 *
∑l
)

3684 
	`LOCK
(&
nxGlobÆLock
);

3685 
	`AŒocReq
(
GëSy°emPÆëã
);

3686 
	`Ty≥dRódBlock
(
∑l
, (*∑l), 
GrNumGëSy°emPÆëã
);

3687 
	`UNLOCK
(&
nxGlobÆLock
);

3688 
	}
}

3700 
	$GrSëSy°emPÆëã
(
GR_COUNT
 
fú°
, 
GR_PALETTE
 *
∑l
)

3702 
nxSëSy°emPÆëãReq
 *
ªq
;

3704 
	`LOCK
(&
nxGlobÆLock
);

3705 
ªq
 = 
	`AŒocReq
(
SëSy°emPÆëã
);

3706 
ªq
->
fú°
 = first;

3707 
ªq
->
cou¡
 = 
∑l
->count;

3708 
	`mem˝y
(
ªq
->
∑Àâe
, 
∑l
->∑Àâe, (
GR_PALENTRY
Ë*ÖÆ->
cou¡
);

3709 
	`UNLOCK
(&
nxGlobÆLock
);

3710 
	}
}

3723 
	$GrFödCﬁ‹
(
GR_COLOR
 
c
, 
GR_PIXELVAL
 *
ªçixñ
)

3725 
nxFödCﬁ‹Req
 *
ªq
;

3727 
	`LOCK
(&
nxGlobÆLock
);

3728 
ªq
 = 
	`AŒocReq
(
FödCﬁ‹
);

3729 
ªq
->
cﬁ‹
 = 
c
;

3730 
	`Ty≥dRódBlock
(
ªçixñ
, (*ªçixñ), 
GrNumFödCﬁ‹
);

3731 
	`UNLOCK
(&
nxGlobÆLock
);

3732 
	}
}

3752 
	$GrReqShmCmds
(
shmsize
)

3754 #i‡
HAVE_SHAREDMEM_SUPPORT


3755 
nxReqShmCmdsReq
 
ªq
;

3756 
key
, 
shmid
;

3758 i‡(
nxSh¨edMem
 != 0)

3761 
	`LOCK
(&
nxGlobÆLock
);

3762 
	`GrFlush
();

3764 
shmsize
 = (shmsize+
SHM_BLOCK_SIZE
-1) & ~(SHM_BLOCK_SIZE-1);

3765 
ªq
.
ªqTy≥
 = 
GrNumReqShmCmds
;

3766 
ªq
.
hûígth
 = 0;

3767 
ªq
.
Àngth
 = (req);

3768 
ªq
.
size
 = 
shmsize
;

3770 
	`nxWrôeSockë
((*)&
ªq
,(req));

3771 
	`RódBlock
(&
key
,(key));

3773 i‡(!
key
) {

3774 
	`EPRINTF
("nxclient:Ço shared memory support on server\n");

3775 
	`UNLOCK
(&
nxGlobÆLock
);

3779 
shmid
 = 
	`shmgë
(
key
, 
shmsize
, 0);

3780 i‡(
shmid
 == -1) {

3781 
	`EPRINTF
("nx˛õ¡: C™'àshmgë key %d: %m\n", 
key
);

3782 
	`UNLOCK
(&
nxGlobÆLock
);

3786 
nxSh¨edMem
 = 
	`shm©
(
shmid
, 0, 0);

3787 
	`shm˘l
(
shmid
,
IPC_RMID
,0);

3788 i‡(
nxSh¨edMem
 == (*)-1) {

3789 
	`UNLOCK
(&
nxGlobÆLock
);

3793 
nxSh¨edMemSize
 = 
shmsize
;

3794 
	`nxAssignReqbuf„r
(
nxSh¨edMem
, 
shmsize
);

3795 
	`UNLOCK
(&
nxGlobÆLock
);

3797 
	}
}

3813 
	$GrInje˘PoöãrEvít
(
GR_COORD
 
x
, GR_COORD 
y
, 
buâ⁄
, 
visibÀ
)

3815 
nxInje˘EvítReq
 *
ªq
;

3817 
	`LOCK
(&
nxGlobÆLock
);

3818 
ªq
 = 
	`AŒocReq
(
Inje˘Evít
);

3819 
ªq
->
evít_ty≥
 = 
GR_INJECT_EVENT_POINTER
;

3820 
ªq
->
evít
.
poöãr
.
visibÀ
 = visible;

3821 
ªq
->
evít
.
poöãr
.
x
 = x;

3822 
ªq
->
evít
.
poöãr
.
y
 = y;

3823 
ªq
->
evít
.
poöãr
.
buâ⁄
 = button;

3825 
	`GrFlush
();

3826 
	`UNLOCK
(&
nxGlobÆLock
);

3827 
	}
}

3844 
	$GrInje˘KeybﬂrdEvít
(
GR_WINDOW_ID
 
wid
, 
GR_KEY
 
keyvÆue
,

3845 
GR_KEYMOD
 
modifõrs
, 
GR_SCANCODE
 
sˇncode
, 
GR_BOOL
 
¥es£d
)

3847 
nxInje˘EvítReq
 *
ªq
;

3849 
	`LOCK
(&
nxGlobÆLock
);

3850 
ªq
 = 
	`AŒocReq
(
Inje˘Evít
);

3851 
ªq
->
evít_ty≥
 = 
GR_INJECT_EVENT_KEYBOARD
;

3852 
ªq
->
evít
.
keybﬂrd
.
wid
 = wid;

3853 
ªq
->
evít
.
keybﬂrd
.
keyvÆue
 = keyvalue;

3854 
ªq
->
evít
.
keybﬂrd
.
modifõr
 = 
modifõrs
;

3855 
ªq
->
evít
.
keybﬂrd
.
sˇncode
 = scancode;

3856 
ªq
->
evít
.
keybﬂrd
.
¥es£d
 =Öressed;

3858 
	`GrFlush
();

3859 
	`UNLOCK
(&
nxGlobÆLock
);

3860 
	}
}

3872 
	$GrSëWMPr›îtõs
(
GR_WINDOW_ID
 
wid
, 
GR_WM_PROPERTIES
 *
¥›s
)

3874 
nxSëWMPr›îtõsReq
 *
ªq
;

3875 *
addr
;

3876 
s
;

3878 i‡((
¥›s
->
Êags
 & 
GR_WM_FLAGS_TITLE
Ë&&Ör›s->
tôÀ
)

3879 
s
 = 
	`°æí
(
¥›s
->
tôÀ
) + 1;

3880 
s
 = 0;

3882 
	`LOCK
(&
nxGlobÆLock
);

3883 
ªq
 = 
	`AŒocReqExåa
(
SëWMPr›îtõs
, 
s
 + (
GR_WM_PROPERTIES
));

3884 
ªq
->
wödowid
 = 
wid
;

3885 
addr
 = 
	`GëReqD©a
(
ªq
);

3886 
	`mem˝y
(
addr
, 
¥›s
, (
GR_WM_PROPERTIES
));

3887 i‡(
s
)

3888 
	`mem˝y
(
addr
 + (
GR_WM_PROPERTIES
), 
¥›s
->
tôÀ
, 
s
);

3889 
	`UNLOCK
(&
nxGlobÆLock
);

3890 
	}
}

3904 
	$GrGëWMPr›îtõs
(
GR_WINDOW_ID
 
wid
, 
GR_WM_PROPERTIES
 *
¥›s
)

3906 
nxGëWMPr›îtõsReq
 *
ªq
;

3907 
UINT16
 
ãxéí
;

3908 
GR_CHAR
 
c
;

3910 
	`LOCK
(&
nxGlobÆLock
);

3911 
ªq
 = 
	`AŒocReq
(
GëWMPr›îtõs
);

3912 
ªq
->
wödowid
 = 
wid
;

3914 
	`Ty≥dRódBlock
(
¥›s
, (
GR_WM_PROPERTIES
), 
GrNumGëWMPr›îtõs
);

3915 
	`RódBlock
(&
ãxéí
, (textlen));

3916 if(!
ãxéí
) {

3917 
¥›s
->
tôÀ
 = 
NULL
;

3918 
	`UNLOCK
(&
nxGlobÆLock
);

3921 if(!(
¥›s
->
tôÀ
 = 
	`mÆloc
(
ãxéí
))) {

3924 
ãxéí
--)

3925 
	`RódBlock
(&
c
, 1);

3927 
	`RódBlock
(
¥›s
->
tôÀ
, 
ãxéí
);

3929 
	`UNLOCK
(&
nxGlobÆLock
);

3930 
	}
}

3943 
	$GrClo£Wödow
(
GR_WINDOW_ID
 
wid
)

3945 
nxClo£WödowReq
 *
ªq
;

3947 
	`LOCK
(&
nxGlobÆLock
);

3948 
ªq
 = 
	`AŒocReq
(
Clo£Wödow
);

3949 
ªq
->
wödowid
 = 
wid
;

3950 
	`UNLOCK
(&
nxGlobÆLock
);

3951 
	}
}

3963 
	$GrKûlWödow
(
GR_WINDOW_ID
 
wid
)

3965 
nxKûlWödowReq
 *
ªq
;

3967 
	`LOCK
(&
nxGlobÆLock
);

3968 
ªq
 = 
	`AŒocReq
(
KûlWödow
);

3969 
ªq
->
wödowid
 = 
wid
;

3970 
	`UNLOCK
(&
nxGlobÆLock
);

3971 
	}
}

3984 
	$GrSëS¸ìnSavîTimeout
(
GR_TIMEOUT
 
timeout
)

3986 
nxSëS¸ìnSavîTimeoutReq
 *
ªq
;

3988 
	`LOCK
(&
nxGlobÆLock
);

3989 
ªq
 = 
	`AŒocReq
(
SëS¸ìnSavîTimeout
);

3990 
ªq
->
timeout
 =Åimeout;

3991 
	`UNLOCK
(&
nxGlobÆLock
);

3992 
	}
}

4013 
	$GrSëSñe˘i⁄Ow√r
(
GR_WINDOW_ID
 
wid
, 
GR_CHAR
 *
ty≥li°
)

4015 
nxSëSñe˘i⁄Ow√rReq
 *
ªq
;

4016 *
p
;

4017 
Àn
;

4019 
	`LOCK
(&
nxGlobÆLock
);

4020 if(
wid
) {

4021 
Àn
 = 
	`°æí
(
ty≥li°
) + 1;

4022 
ªq
 = 
	`AŒocReqExåa
(
SëSñe˘i⁄Ow√r
, 
Àn
);

4023 
p
 = 
	`GëReqD©a
(
ªq
);

4024 
	`mem˝y
(
p
, 
ty≥li°
, 
Àn
);

4026 
ªq
 = 
	`AŒocReq
(
SëSñe˘i⁄Ow√r
);

4029 
ªq
->
wid
 = wid;

4030 
	`UNLOCK
(&
nxGlobÆLock
);

4031 
	}
}

4048 
GR_WINDOW_ID


4049 
	$GrGëSñe˘i⁄Ow√r
(
GR_CHAR
 **
ty≥li°
)

4051 
nxGëSñe˘i⁄Ow√rReq
 *
ªq
;

4052 
UINT16
 
ãxéí
;

4053 
GR_CHAR
 
c
;

4054 
GR_WINDOW_ID
 
wid
;

4056 
	`LOCK
(&
nxGlobÆLock
);

4057 
ªq
 = 
	`AŒocReq
(
GëSñe˘i⁄Ow√r
);

4058 
	`Ty≥dRódBlock
(&
wid
, (wid), 
GrNumGëSñe˘i⁄Ow√r
);

4059 if(
wid
) {

4060 
	`RódBlock
(&
ãxéí
, (textlen));

4061 if(!(*
ty≥li°
 = 
	`mÆloc
(
ãxéí
))) {

4064 
ãxéí
--)

4065 
	`RódBlock
(&
c
, 1);

4067 
	`RódBlock
(*
ty≥li°
, 
ãxéí
);

4071 
	`UNLOCK
(&
nxGlobÆLock
);

4072  
wid
;

4073 
	}
}

4098 
	$GrReque°Clõ¡D©a
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
rid
, 
GR_SERIALNO
 
£rül
,

4099 
GR_MIMETYPE
 
mimëy≥
)

4101 
nxReque°Clõ¡D©aReq
 *
ªq
;

4103 
	`LOCK
(&
nxGlobÆLock
);

4104 
ªq
 = 
	`AŒocReq
(
Reque°Clõ¡D©a
);

4105 
ªq
->
wid
 = wid;

4106 
ªq
->
rid
 =Ñid;

4107 
ªq
->
£rül
 = serial;

4108 
ªq
->
mimëy≥
 = mimetype;

4109 
	`UNLOCK
(&
nxGlobÆLock
);

4110 
	}
}

4132 
	$GrSídClõ¡D©a
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
did
, 
GR_SERIALNO
 
£rül
,

4133 
GR_LENGTH
 
Àn
, GR_LENGTH 
thi¶í
, *
d©a
)

4135 
nxSídClõ¡D©aReq
 *
ªq
;

4136 *
p
;

4137 
GR_LENGTH
 
l
, 
pos
 = 0;

4139 
	`LOCK
(&
nxGlobÆLock
);

4140 
pos
 < 
Àn
) {

4141 
l
 = 
MAXREQUESTSZ
 - (
nxSídClõ¡D©aReq
);

4142 if(
l
 > (
Àn
 - 
pos
))Ü =Üen -Öos;

4143 
ªq
 = 
	`AŒocReqExåa
(
SídClõ¡D©a
, 
l
);

4144 
ªq
->
wid
 = wid;

4145 
ªq
->
did
 = did;

4146 
ªq
->
£rül
 = serial;

4147 
ªq
->
Àn
 =Üen;

4148 
p
 = 
	`GëReqD©a
(
ªq
);

4149 
	`mem˝y
(
p
, ((*)
d©a
 + 
pos
), 
l
);

4150 
pos
 +
l
;

4152 
	`UNLOCK
(&
nxGlobÆLock
);

4153 
	}
}

4163 
	$GrBñl
()

4165 
	`LOCK
(&
nxGlobÆLock
);

4166 
	`AŒocReq
(
Bñl
);

4167 
	`UNLOCK
(&
nxGlobÆLock
);

4168 
	}
}

4184 
	$GrSëBackgroundPixm≠
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
pixm≠
, 
Êags
)

4186 
nxSëBackgroundPixm≠Req
 *
ªq
;

4188 
	`LOCK
(&
nxGlobÆLock
);

4189 
ªq
 = 
	`AŒocReq
(
SëBackgroundPixm≠
);

4190 
ªq
->
wid
 = wid;

4191 
ªq
->
pixm≠
 =Öixmap;

4192 
ªq
->
Êags
 = flags;

4193 
	`UNLOCK
(&
nxGlobÆLock
);

4194 
	}
}

4205 
	$GrDe°royCurs‹
(
GR_CURSOR_ID
 
cid
)

4207 
nxDe°royCurs‹Req
 *
ªq
;

4209 
	`LOCK
(&
nxGlobÆLock
);

4210 
ªq
 = 
	`AŒocReq
(
De°royCurs‹
);

4211 
ªq
->
curs‹id
 = 
cid
;

4212 
	`UNLOCK
(&
nxGlobÆLock
);

4213 
	}
}

4227 
	$GrQuîyTªe
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID *
∑ª¡id
, GR_WINDOW_ID **
chûdªn
,

4228 
GR_COUNT
 *
nchûdªn
)

4230 
nxQuîyTªeReq
 *
ªq
;

4231 
GR_COUNT
 
cou¡
;

4232 
GR_WINDOW_ID
 
dummy
;

4234 
	`LOCK
(&
nxGlobÆLock
);

4235 
ªq
 = 
	`AŒocReq
(
QuîyTªe
);

4236 
ªq
->
wödowid
 = 
wid
;

4238 
	`Ty≥dRódBlock
(
∑ª¡id
, (*∑ª¡id), 
GrNumQuîyTªe
);

4239 
	`RódBlock
(
nchûdªn
, (*nchildren));

4240 i‡(!*
nchûdªn
) {

4241 *
chûdªn
 = 
NULL
;

4242 
	`UNLOCK
(&
nxGlobÆLock
);

4245 
cou¡
 = *
nchûdªn
;

4246 if(!(*
chûdªn
 = 
	`mÆloc
(
cou¡
 * (
GR_WINDOW_ID
)))) {

4249 
cou¡
--)

4250 
	`RódBlock
(&
dummy
, (
GR_WINDOW_ID
));

4252 
	`RódBlock
(*
chûdªn
, 
cou¡
 * (
GR_WINDOW_ID
));

4254 
	`UNLOCK
(&
nxGlobÆLock
);

4255 
	}
}

4257 #i‡
YOU_WANT_TO_IMPLEMENT_DRAG_AND_DROP


4280 
	$GrRegi°îDøgAndDr›Wödow
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
iid
, 
GR_CHAR
 *
ty≥li°
)

4282 
	}
}

4286 #i‡
MW_FEATURE_TIMERS


4298 
GR_TIMER_ID


4299 
	$GrCª©eTimî
 (
GR_WINDOW_ID
 
wid
, 
GR_TIMEOUT
 
≥riod
)

4301 
nxCª©eTimîReq
 *
ªq
;

4302 
GR_TIMER_ID
 
timîid
;

4304 
	`LOCK
(&
nxGlobÆLock
);

4305 
ªq
 = 
	`AŒocReq
(
Cª©eTimî
);

4306 
ªq
->
wid
 = wid;

4307 
ªq
->
≥riod
 =Öeriod;

4309 if(
	`Ty≥dRódBlock
(&
timîid
,  (timîid), 
GrNumCª©eTimî
) == -1)

4310 
timîid
 = 0;

4311 
	`UNLOCK
(&
nxGlobÆLock
);

4312  
timîid
;

4313 
	}
}

4316 #i‡
MW_FEATURE_TIMERS


4327 
	$GrDe°royTimî
 (
GR_TIMER_ID
 
tid
)

4329 
nxDe°royTimîReq
 *
ªq
;

4331 
	`LOCK
(&
nxGlobÆLock
);

4332 
ªq
 = 
	`AŒocReq
(
De°royTimî
);

4333 
ªq
->
timîid
 = 
tid
;

4334 
	`UNLOCK
(&
nxGlobÆLock
);

4335 
	}
}

4346 
	$GrSëP‹åaôMode
(
p‹åaômode
)

4348 
nxSëP‹åaôModeReq
 *
ªq
;

4350 
	`LOCK
(&
nxGlobÆLock
);

4351 
ªq
 = 
	`AŒocReq
(
SëP‹åaôMode
);

4352 
ªq
->
p‹åaômode
 =Öortraitmode;

4353 
	`UNLOCK
(&
nxGlobÆLock
);

4354 
	}
}

4367 
	$GrQuîyPoöãr
(
GR_WINDOW_ID
 *
mwö
, 
GR_COORD
 *
x
, GR_COORD *
y
, 
GR_BUTTON
 *
bmask
)

4369 
nxQuîyPoöãrReq
 *
ªq
;

4371 
	`LOCK
(&
nxGlobÆLock
);

4372 
ªq
 = 
	`AŒocReq
(
QuîyPoöãr
);

4373 
	`Ty≥dRódBlock
(
mwö
, (*mwö), 
GrNumQuîyPoöãr
);

4374 
	`RódBlock
(
x
, (*x));

4375 
	`RódBlock
(
y
, (*y));

4376 
	`RódBlock
(
bmask
, (*bmask));

4377 
	`UNLOCK
(&
nxGlobÆLock
);

4378 
	}
}

4388 
	$GrQueueLígth
()

4390 
cou¡
 = 0;

4391 
EVENT_LIST
 *
p
;

4393 
	`ACCESS_PER_THREAD_DATA
();

4394 
	`LOCK
(&
nxGlobÆLock
);

4395 
p
 = 
evli°
;Ö;Ö =Ö->
√xt
)

4396 ++
cou¡
;

4398 
	`UNLOCK
(&
nxGlobÆLock
);

4399  
cou¡
;

4400 
	}
}

4414 
GR_REGION_ID


4415 
	$GrNewBôm≠Regi⁄
(
GR_BITMAP
 *
bôm≠
, 
GR_SIZE
 
width
, GR_SIZE 
height
)

4417 
size
;

4418 
GR_REGION_ID
 
ªgi⁄
;

4419 
nxNewBôm≠Regi⁄Req
 * 
ªq
;

4421 
size
 = (
GR_BITMAP
Ë* 
height
 * (((
width
 - 1) / 16) + 1);

4423 
	`LOCK
(&
nxGlobÆLock
);

4424 
ªq
 = 
	`AŒocReqExåa
(
NewBôm≠Regi⁄
, 
size
);

4425 
ªq
->
width
 = width;

4426 
ªq
->
height
 = height;

4427 
	`mem˝y
(
	`GëReqD©a
(
ªq
), 
bôm≠
, 
size
);

4429 if(
	`Ty≥dRódBlock
(&
ªgi⁄
, ‘egi⁄), 
GrNumNewBôm≠Regi⁄
) < 0)

4430 
ªgi⁄
 = 0;

4431 
	`UNLOCK
(&
nxGlobÆLock
);

4432  
ªgi⁄
;

4433 
	}
}

4471 
	$GrSëWödowRegi⁄
(
GR_WINDOW_ID
 
wid
, 
GR_REGION_ID
 
rid
, 
ty≥
)

4473 
nxSëWödowRegi⁄Req
 *
ªq
;

4475 
	`LOCK
(&
nxGlobÆLock
);

4476 
ªq
 = 
	`AŒocReq
(
SëWödowRegi⁄
);

4477 
ªq
->
wid
 = wid;

4478 
ªq
->
rid
 =Ñid;

4479 
ªq
->
ty≥
 =Åype;

4480 
	`UNLOCK
(&
nxGlobÆLock
);

4481 
	}
}

4511 
	$GrSåëchAªa
(
GR_DRAW_ID
 
d°id
, 
GR_GC_ID
 
gc
,

4512 
GR_COORD
 
dx1
, GR_COORD 
dy1
,

4513 
GR_COORD
 
dx2
, GR_COORD 
dy2
,

4514 
GR_DRAW_ID
 
§cid
,

4515 
GR_COORD
 
sx1
, GR_COORD 
sy1
,

4516 
GR_COORD
 
sx2
, GR_COORD 
sy2
,

4517 
›
)

4519 
nxSåëchAªaReq
 *
ªq
;

4521 
	`LOCK
(&
nxGlobÆLock
);

4522 
ªq
 = 
	`AŒocReq
(
SåëchAªa
);

4523 
ªq
->
døwid
 = 
d°id
;

4524 
ªq
->
gcid
 = 
gc
;

4525 
ªq
->
dx1
 = dx1;

4526 
ªq
->
dy1
 = dy1;

4527 
ªq
->
dx2
 = dx2;

4528 
ªq
->
dy2
 = dy2;

4529 
ªq
->
§cid
 = srcid;

4530 
ªq
->
sx1
 = sx1;

4531 
ªq
->
sy1
 = sy1;

4532 
ªq
->
sx2
 = sx2;

4533 
ªq
->
sy2
 = sy2;

4534 
ªq
->
›
 = op;

4535 
	`UNLOCK
(&
nxGlobÆLock
);

4536 
	}
}

4568 
GR_BOOL


4569 
	$GrGøbKey
(
GR_WINDOW_ID
 
id
, 
GR_KEY
 
key
, 
ty≥
)

4571 
ªt
 = 0;

4572 
nxGøbKeyReq
 *
ªq
;

4574 i‡(()
ty≥
 > 
GR_GRAB_MAX
)

4575  
GR_FALSE
;

4577 
	`LOCK
(&
nxGlobÆLock
);

4578 
ªq
 = 
	`AŒocReq
(
GøbKey
);

4579 
ªq
->
wid
 = 
id
;

4580 
ªq
->
ty≥
 =Åype;

4581 
ªq
->
key
 = key;

4584 i‡(
	`Ty≥dRódBlock
(&
ªt
, ‘ë), 
GrNumGøbKey
) < 0)

4585 
ªt
 = -1;

4587 
	`UNLOCK
(&
nxGlobÆLock
);

4588  (
GR_BOOL
)
ªt
;

4589 
	}
}

4600 
	$GrUngøbKey
(
GR_WINDOW_ID
 
id
, 
GR_KEY
 
key
)

4602 
nxGøbKeyReq
 *
ªq
;

4604 
	`LOCK
(&
nxGlobÆLock
);

4605 
ªq
 = 
	`AŒocReq
(
GøbKey
);

4606 
ªq
->
wid
 = 
id
;

4607 
ªq
->
ty≥
 = 
GR_GRAB_MAX
 + 1;

4608 
ªq
->
key
 = key;

4609 
	`UNLOCK
(&
nxGlobÆLock
);

4610 
	}
}

4621 
	$GrSëTønsf‹m
(
GR_TRANSFORM
 *
å™s
)

4623 
nxSëTønsf‹mReq
 *
ªq
;

4625 
	`LOCK
(&
nxGlobÆLock
);

4627 
ªq
 = 
	`AŒocReq
(
SëTønsf‹m
);

4628 
ªq
->
mode
 = 
å™s
? 1: 0;

4630 i‡(
å™s
) {

4631 
ªq
->
å™s_a
 = 
å™s
->
a
;

4632 
ªq
->
å™s_b
 = 
å™s
->
b
;

4633 
ªq
->
å™s_c
 = 
å™s
->
c
;

4634 
ªq
->
å™s_d
 = 
å™s
->
d
;

4635 
ªq
->
å™s_e
 = 
å™s
->
e
;

4636 
ªq
->
å™s_f
 = 
å™s
->
f
;

4637 
ªq
->
å™s_s
 = 
å™s
->
s
;

4640 
	`UNLOCK
(&
nxGlobÆLock
);

4641 
	}
}

4643 #i‡
HAVE_FREETYPE_2_SUPPORT


4679 
GR_FONT_ID


4680 
	$GrCª©eF⁄tFromBuf„r
(c⁄° *
buf„r
, 
Àngth
,

4681 c⁄° *
f‹m©
, 
GR_COORD
 
height
)

4683 
GR_FONT_ID
 
ªsu…
;

4684 
nxCª©eF⁄tFromBuf„rReq
 *
ªq
;

4685 
bufid
;

4687 
	`LOCK
(&
nxGlobÆLock
);

4690 
bufid
 = 
	`£ndImageBuf„r
(
buf„r
, 
Àngth
);

4692 i‡(!
bufid
) {

4693 
	`UNLOCK
(&
nxGlobÆLock
);

4697 
ªq
 = 
	`AŒocReq
(
Cª©eF⁄tFromBuf„r
);

4698 
ªq
->
height
 = height;

4699 
ªq
->
buf„r_id
 = 
bufid
;

4701 i‡(
f‹m©
 =
NULL
)

4702 
f‹m©
 = "";

4704 
	`°∫˝y
(
ªq
->
f‹m©
, format, (req->format) - 1);

4705 
ªq
->
f‹m©
[(req->format) - 1] = '\0';

4707 i‡(
Ty≥dRódBlock


4708 (&
ªsu…
, ‘esu…), 
GrNumCª©eF⁄tFromBuf„r
) == -1)

4709 
ªsu…
 = 0;

4711 
	`UNLOCK
(&
nxGlobÆLock
);

4712  
ªsu…
;

4713 
	}
}

4726 
GR_FONT_ID


4727 
	$GrC›yF⁄t
(
GR_FONT_ID
 
f⁄tid
, 
GR_COORD
 
height
)

4729 
GR_FONT_ID
 
ªsu…
;

4730 
nxC›yF⁄tReq
 *
ªq
;

4732 
	`LOCK
(&
nxGlobÆLock
);

4733 
ªq
 = 
	`AŒocReq
(
C›yF⁄t
);

4734 
ªq
->
f⁄tid
 = fontid;

4735 
ªq
->
height
 = height;

4737 i‡(
	`Ty≥dRódBlock
(&
ªsu…
, ‘esu…), 
GrNumC›yF⁄t
) == -1)

4738 
ªsu…
 = 0;

4740 
	`UNLOCK
(&
nxGlobÆLock
);

4741  
ªsu…
;

4742 
	}
}

	@nanox/clientfb.c

6 
	~<°dio.h
>

7 
	~<°dlib.h
>

8 
	~<uni°d.h
>

9 #ifde‡
LINUX


10 
	~<f˙é.h
>

11 
	~<sys/io˘l.h
>

12 
	~<sys/mm™.h
>

13 
	~<asm/∑ge.h
>

14 
	~<löux/fb.h
>

16 
	~"«no-X.h
"

17 
	~"lock.h
"

19 
	#CG6_RAM
 0x70016000

	)

21 
LOCK_EXTERN
(
nxGlobÆLock
);

24 * 
	gphy•ixñs
 = 
NULL
;

25 
GR_SCREEN_INFO
 
	gsöfo
;

26 
GR_BOOL
 
	gsöfo_vÆid
 = 
GR_FALSE
;

27 #ifde‡
LINUX


28 
	g‰ame_fd
 = -1;

29 * 
	g‰ame_m≠
 = 
NULL
;

30 
	g‰ame_Àn
 = 0;

40 
	$GrO≥nClõ¡Fømebuf„r
()

42 #ifde‡
LINUX


43 
‰ame_off£t
;

44 * 
fbdev
;

45 
fb_fix_s¸ìnöfo
 
föfo
;

47 
	`LOCK
(&
nxGlobÆLock
);

50 i‡(
phy•ixñs
) {

51 
	`UNLOCK
(&
nxGlobÆLock
);

52  
phy•ixñs
;

63 
	`GrGëS¸ìnInfo
(&
söfo
);

64 
söfo_vÆid
 = 
GR_TRUE
;

65 i‡(!
söfo
.
fbdrivî
) {

66 
	`UNLOCK
(&
nxGlobÆLock
);

67  
NULL
;

73 i‡(!(
fbdev
 = 
	`gëív
("FRAMEBUFFER")))

74 
fbdev
 = "/dev/fb0";

75 
‰ame_fd
 = 
	`›í
(
fbdev
, 
O_RDWR
);

76 i‡(
‰ame_fd
 < 0) {

77 
	`¥ötf
("Can't open framebuffer device\n");

78 
	`UNLOCK
(&
nxGlobÆLock
);

79  
NULL
;

83 i‡(
	`io˘l
(
‰ame_fd
, 
FBIOGET_FSCREENINFO
, &
föfo
) < 0 ) {

84 
	`¥ötf
("Couldn't get fb hardware info\n");

85 
îr
;

89 
föfo
.
visuÆ
) {

90 
FB_VISUAL_TRUECOLOR
:

91 
FB_VISUAL_PSEUDOCOLOR
:

92 
FB_VISUAL_STATIC_PSEUDOCOLOR
:

93 
FB_VISUAL_DIRECTCOLOR
:

96 
	`¥ötf
("Unsupported fb color map\n");

97 
îr
;

101 
‰ame_off£t
 = ((()
föfo
.
smem_°¨t
) -

102 ((()
föfo
.
smem_°¨t
)&~(
PAGE_SIZE
-1)));

103 
‰ame_Àn
 = 
föfo
.
smem_Àn
 + 
‰ame_off£t
;

104 
‰ame_m≠
 = (*)
	`mm≠
(
NULL
, 
‰ame_Àn
, 
PROT_READ
|
PROT_WRITE
,

105 
MAP_SHARED
, 
‰ame_fd
,

106 #ifde‡
ARCH_LINUX_SPARC


107 
CG6_RAM
);

111 i‡(
‰ame_m≠
 == (*)-1) {

112 
	`¥ötf
("UnableÅo memory mapÅhe video hardware\n");

113 
‰ame_m≠
 = 
NULL
;

114 
îr
;

116 
phy•ixñs
 = 
‰ame_m≠
 + 
‰ame_off£t
;

117 
	`UNLOCK
(&
nxGlobÆLock
);

118  
phy•ixñs
;

120 
îr
:

121 
	`˛o£
(
‰ame_fd
);

122 
	`UNLOCK
(&
nxGlobÆLock
);

124  
NULL
;

125 
	}
}

131 
	$GrClo£Clõ¡Fømebuf„r
()

133 #ifde‡
LINUX


134 
	`LOCK
(&
nxGlobÆLock
);

135 i‡(
‰ame_fd
 >= 0) {

136 i‡(
‰ame_m≠
) {

137 
	`munm≠
(
‰ame_m≠
, 
‰ame_Àn
);

138 
‰ame_m≠
 = 
NULL
;

139 
phy•ixñs
 = 
NULL
;

141 
	`˛o£
(
‰ame_fd
);

142 
‰ame_fd
 = -1;

145 
söfo_vÆid
 = 
GR_FALSE
;

147 
	`UNLOCK
(&
nxGlobÆLock
);

149 
	}
}

161 
	$GrGëWödowFBInfo
(
GR_WINDOW_ID
 
wid
, 
GR_WINDOW_FB_INFO
 *
fböfo
)

163 
physoff£t
;

164 
x
, 
y
;

165 
GR_WINDOW_INFO
 
öfo
;

166 
œ°_p‹åaô
 = -1;

168 
	`LOCK
(&
nxGlobÆLock
);

171 i‡(!
söfo_vÆid
 || (
œ°_p‹åaô
 !
söfo
.
p‹åaô
)) {

172 
	`GrGëS¸ìnInfo
(&
söfo
);

173 
söfo_vÆid
 = 
GR_TRUE
;

175 
œ°_p‹åaô
 = 
söfo
.
p‹åaô
;

178 
	`GrGëWödowInfo
(
wid
, &
öfo
);

180 
fböfo
->
bµ
 = 
söfo
.bpp;

181 
fböfo
->
byã•p
 = (
söfo
.
bµ
+7)/8;

182 
fböfo
->
pixty≥
 = 
söfo
.pixtype;

183 
fböfo
->
p‹åaô_mode
 = 
söfo
.
p‹åaô
;

185 
fböfo
->
p‹åaô_mode
) {

186 
MWPORTRAIT_RIGHT
:

187 
MWPORTRAIT_LEFT
:

194 
fböfo
->
xªs
 = 
söfo
.
rows
;

195 
fböfo
->
yªs
 = 
söfo
.
cﬁs
;

198 
fböfo
->
xªs
 = 
söfo
.
cﬁs
;

199 
fböfo
->
yªs
 = 
söfo
.
rows
;

202 
fböfo
->
xvúåes
 = 
söfo
.
cﬁs
;

203 
fböfo
->
yvúåes
 = 
söfo
.
rows
;

204 
fböfo
->
pôch
 = fböfo->
xªs
 * fböfo->
byã•p
;

207 
x
 = 
öfo
.x;

208 
y
 = 
öfo
.y;

209 
öfo
.
∑ª¡
 != 0) {

210 
	`GrGëWödowInfo
(
öfo
.
∑ª¡
, &info);

211 
x
 +
öfo
.x;

212 
y
 +
öfo
.y;

214 
fböfo
->
x
 = x;

215 
fböfo
->
y
 = y;

218 
fböfo
->
phy•ixñs
 =Öhyspixels;

221 
physoff£t
 = 
fböfo
->
y
*fböfo->
pôch
 + fböfo->
x
*fböfo->
byã•p
;

222 
fböfo
->
wöpixñs
 = 
phy•ixñs
? (phy•ixñ†+ 
physoff£t
): 
NULL
;

224 
	`UNLOCK
(&
nxGlobÆLock
);

225 
	}
}

	@nanox/error.c

11 
	~<°dio.h
>

12 
	~<°d¨g.h
>

13 
	~<°rög.h
>

14 #i‡(
UNIX
 | 
DOS_DJGPP
)

15 
	~<uni°d.h
>

17 
	~"devi˚.h
"

19 #i‡
MW_FEATURE_GDERROR


24 
	$GdEº‹
(c⁄° *
f‹m©
, ...)

26 
va_li°
 
¨gs
;

27 
buf
[1024];

29 
	`va_°¨t
(
¨gs
, 
f‹m©
);

31 
	`v•rötf
(
buf
, 
f‹m©
, 
¨gs
);

32 #ifde‡
PSP


33 
	`p•DebugS¸ìnPrötf
("%s\n",
buf
);

35 
	`wrôe
(2, 
buf
, 
	`°æí
(buf));

38 
	`va_íd
(
¨gs
);

40 
	}
}

46 
	$GdEº‹NuŒ
(c⁄° *
f‹m©
, ...)

49 
	}
}

	@nanox/nxdraw.c

6 
	#MWINCLUDECOLORS


	)

7 
	~<°dio.h
>

8 
	~"«no-X.h
"

9 
	~"nxdøw.h
"

12 
	$nxPaötNCAªa
(
GR_DRAW_ID
 
id
, 
w
, 
h
, 
GR_CHAR
 *
tôÀ
, 
GR_BOOL
 
a˘ive
,

13 
GR_WM_PROPS
 
¥›s
)

15 
x
 = 0;

16 
y
 = 0;

17 
GR_GC_ID
 
gc
 = 
	`GrNewGC
();

18 
GR_RECT
 
r
;

22 i‡(
¥›s
 & 
GR_WM_PROPS_APPFRAME
) {

24 
	`nxDøw3dOut£t
(
id
, 
x
, 
y
, 
w
, 
h
);

25 
x
 +2; 
y
 +2; 
w
 -4; 
h
 -= 4;

28 
	`GrSëGCF‹eground
(
gc
, 
	`GrGëSysCﬁ‹
(
GR_COLOR_APPWINDOW
));

29 
	`GrRe˘
(
id
, 
gc
, 
x
, 
y
, 
w
, 
h
);

30 
x
 +1; 
y
 +1; 
w
 -2; 
h
 -= 2;

31 } i‡(
¥›s
 & 
GR_WM_PROPS_BORDER
) {

33 
	`GrSëGCF‹eground
(
gc
, 
	`GrGëSysCﬁ‹
(
GR_COLOR_WINDOWFRAME
));

34 
	`GrRe˘
(
id
, 
gc
, 
x
, 
y
, 
w
, 
h
);

35 
x
 +1; 
y
 +1; 
w
 -2; 
h
 -= 2;

38 i‡(!(
¥›s
 & 
GR_WM_PROPS_CAPTION
))

39 
out
;

42 
	`GrSëGCF‹eground
(
gc
,

43 
	`GrGëSysCﬁ‹
(
a˘ive
? 
GR_COLOR_ACTIVECAPTION
:

44 
GR_COLOR_INACTIVECAPTION
));

45 
	`GrFûlRe˘
(
id
, 
gc
, 
x
, 
y
, 
w
, 
CYCAPTION
);

48 i‡(
tôÀ
) {

49 
	`GrSëGCF‹eground
(
gc
,

50 
	`GrGëSysCﬁ‹
(
a˘ive
? 
GR_COLOR_ACTIVECAPTIONTEXT
:

51 
GR_COLOR_INACTIVECAPTIONTEXT
));

52 
	`GrSëGCU£Background
(
gc
, 
GR_FALSE
);

57 
	`GrText
(
id
, 
gc
, 
x
+4, 
y
-1, 
tôÀ
, -1, 
GR_TFASCII
|
GR_TFTOP
);

59 
y
 +
CYCAPTION
;

62 i‡(
¥›s
 & 
GR_WM_PROPS_APPFRAME
) {

63 
	`GrSëGCF‹eground
(
gc
, 
	`GrGëSysCﬁ‹
(
GR_COLOR_APPWINDOW
));

64 
	`GrLöe
(
id
, 
gc
, 
x
, 
y
, x+
w
-1, y);

67 i‡(
¥›s
 & 
GR_WM_PROPS_CLOSEBOX
) {

69 
r
.
x
 = x + 
w
 - 
CXCLOSEBOX
 - 2;

70 
r
.
y
 = y - 
CYCAPTION
 + 2;

71 
r
.
width
 = 
CXCLOSEBOX
;

72 
r
.
height
 = 
CYCLOSEBOX
;

74 
	`nxDøw3dBox
(
id
, 
r
.
x
,Ñ.
y
,Ñ.
width
,Ñ.
height
,

75 
	`GrGëSysCﬁ‹
(
GR_COLOR_BTNHIGHLIGHT
),

76 
	`GrGëSysCﬁ‹
(
GR_COLOR_WINDOWFRAME
));

77 
	`nxInÊ©eRe˘
(&
r
, -1, -1);

78 
	`GrSëGCF‹eground
(
gc
, 
	`GrGëSysCﬁ‹
(
GR_COLOR_APPWINDOW
));

79 
	`GrFûlRe˘
(
id
, 
gc
, 
r
.
x
,Ñ.
y
,Ñ.
width
,Ñ.
height
);

81 
	`nxInÊ©eRe˘
(&
r
, -1, -1);

82 
	`GrSëGCF‹eground
(
gc
, 
	`GrGëSysCﬁ‹
(
GR_COLOR_BTNTEXT
));

83 
	`GrLöe
(
id
, 
gc
, 
r
.
x
,Ñ.
y
,Ñ.x+r.
width
-1,Ñ.y+r.
height
-1);

84 
	`GrLöe
(
id
, 
gc
, 
r
.
x
,Ñ.
y
+r.
height
-1,Ñ.x+r.
width
-1,Ñ.y);

89 
y
++;

90 
h
 -
CYCAPTION
+1;

91 
	`GrSëGCF‹eground
(
gc
, 
	`GrGëSysCﬁ‹
(
GR_COLOR_APPWINDOW
));

92 
	`GrFûlRe˘
(
id
, 
gc
, 
x
, 
y
, 
w
, 
h
);

95 
out
:

96 
	`GrDe°royGC
(
gc
);

97 
	}
}

103 
	$nxInÊ©eRe˘
(
GR_RECT
 *
¥c
, 
GR_SIZE
 
dx
, GR_SIZE 
dy
)

105 
¥c
->
x
 -
dx
;

106 
¥c
->
y
 -
dy
;

107 
¥c
->
width
 +
dx
 * 2;

108 
¥c
->
height
 +
dy
 * 2;

109 
	}
}

124 
	$nxDøw3dShadow
(
GR_DRAW_ID
 
id
,
x
,
y
,
w
,
h
,
GR_COLOR
 
¸T›
,

125 
GR_COLOR
 
¸BŸtom
)

127 
GR_GC_ID
 
gc
 = 
	`GrNewGC
();

129 
	`GrSëGCF‹eground
(
gc
, 
¸T›
);

132 
	`GrLöe
(
id
, 
gc
, 
x
, 
y
+
h
-2, x, y);

134 
	`GrLöe
(
id
, 
gc
, 
x
, 
y
, x+
w
-2, y);

136 
	`GrSëGCF‹eground
(
gc
, 
¸BŸtom
);

139 
	`GrLöe
(
id
, 
gc
, 
x
+
w
-1, 
y
+1, x+w-1, y+
h
-2);

141 
	`GrLöe
(
id
, 
gc
, 
x
+
w
-1, 
y
+
h
-1, x, y+h-1);

143 
	`GrDe°royGC
(
gc
);

144 
	}
}

155 
	$nxDøw3dBox
(
GR_WINDOW_ID
 
id
,
x
,
y
,
w
,
h
,
GR_COLOR
 
¸T›
,

156 
GR_COLOR
 
¸BŸtom
)

158 
GR_GC_ID
 
gc
 = 
	`GrNewGC
();

160 
	`GrSëGCF‹eground
(
gc
, 
¸T›
);

163 
	`GrLöe
(
id
, 
gc
, 
x
, 
y
+
h
-2, x, y+1);

166 
	`GrLöe
(
id
, 
gc
, 
x
, 
y
, x+
w
-2, y);

168 
	`GrSëGCF‹eground
(
gc
, 
¸BŸtom
);

169 
	`GrLöe
(
id
, 
gc
, 
x
+
w
-1, 
y
, x+w-1, y+
h
-2);

172 
	`GrLöe
(
id
, 
gc
, 
x
+
w
-1, 
y
+
h
-1, x, y+h-1);

175 
	`GrDe°royGC
(
gc
);

176 
	}
}

182 
	$nxDøw3dIn£t
(
GR_DRAW_ID
 
id
,
x
,
y
,
w
,
h
)

184 
	`nxDøw3dBox
(
id
, 
x
, 
y
, 
w
, 
h
,

185 
	`GrGëSysCﬁ‹
(
GR_COLOR_BTNSHADOW
),

186 
	`GrGëSysCﬁ‹
(
GR_COLOR_BTNHIGHLIGHT
));

187 ++
x
; ++
y
; 
w
 -2; 
h
 -= 2;

188 
	`nxDøw3dBox
(
id
, 
x
, 
y
, 
w
, 
h
,

189 
	`GrGëSysCﬁ‹
(
GR_COLOR_WINDOWFRAME
),

190 
	`GrGëSysCﬁ‹
(
GR_COLOR_3DLIGHT
));

191 
	}
}

197 
	$nxDøw3dOut£t
(
GR_DRAW_ID
 
id
,
x
,
y
,
w
,
h
)

199 
	`nxDøw3dBox
(
id
, 
x
, 
y
, 
w
, 
h
,

200 
	`GrGëSysCﬁ‹
(
GR_COLOR_3DLIGHT
),

201 
	`GrGëSysCﬁ‹
(
GR_COLOR_WINDOWFRAME
));

202 ++
x
; ++
y
; 
w
 -2; 
h
 -= 2;

203 
	`nxDøw3dBox
(
id
, 
x
, 
y
, 
w
, 
h
,

204 
	`GrGëSysCﬁ‹
(
GR_COLOR_BTNHIGHLIGHT
),

205 
	`GrGëSysCﬁ‹
(
GR_COLOR_BTNSHADOW
));

206 
	}
}

212 
	$nxDøw3dPushDown
(
GR_DRAW_ID
 
id
, 
x
, 
y
, 
w
, 
h
)

214 
	`nxDøw3dBox
(
id
, 
x
, 
y
, 
w
, 
h
, 
	`GrGëSysCﬁ‹
(
GR_COLOR_BTNSHADOW
),

215 
	`GrGëSysCﬁ‹
(
GR_COLOR_BTNSHADOW
));

216 
	}
}

222 
	$nxDøw3dUpDownSèã
(
GR_DRAW_ID
 
id
, 
x
, 
y
, 
w
, 
h
, 
GR_BOOL
 
fDown
)

224 i‡(
fDown
)

225 
	`nxDøw3dPushDown
(
id
, 
x
, 
y
, 
w
, 
h
);

226 
	`nxDøw3dOut£t
(
id
, 
x
, 
y
, 
w
, 
h
);

227 
	}
}

231 
	$nxDøw3dUpFøme
(
GR_DRAW_ID
 
id
, 
l
, 
t
, 
r
, 
b
)

233 
RECT
 
rc
;

234 
HBRUSH
 
hbr
;

236 
	`SëRe˘
(&
rc
, 
l
, 
t
, 
r
, 
b
);

237 
	`nxDøw3dBox
(
hDC
, 
rc
.
À·
,Ñc.
t›
,

238 
rc
.
right
-rc.
À·
,Ñc.
bŸtom
-rc.
t›
,

239 
	`GrGëSysCﬁ‹
(
GR_COLOR_3DLIGHT
),

240 
	`GrGëSysCﬁ‹
(
GR_COLOR_WINDOWFRAME
));

241 
	`nxInÊ©eRe˘
(&
rc
, -1, -1);

242 
	`nxDøw3dBox
(
hDC
, 
rc
.
À·
,Ñc.
t›
,

243 
rc
.
right
-rc.
À·
,Ñc.
bŸtom
-rc.
t›
,

244 
	`GrGëSysCﬁ‹
(
GR_COLOR_BTNHIGHLIGHT
),

245 
	`GrGëSysCﬁ‹
(
GR_COLOR_BTNSHADOW
));

246 
	`nxInÊ©eRe˘
(&
rc
, -1, -1);

248 
hbr
 = 
	`Cª©eSﬁidBrush
(
	`GrGëSysCﬁ‹
(
GR_COLOR_APPWINDOW
));

249 
	`FûlRe˘
(
hDC
, &
rc
, 
hbr
);

250 
	`DñëeObje˘
(
hbr
);

251 
	}
}

	@nanox/nxproto.c

6 
	~<°dio.h
>

7 
	~<uni°d.h
>

8 
	~<°dlib.h
>

9 
	~<as£π.h
>

10 
	~<î∫o.h
>

11 
	~<°rög.h
>

12 
	~"£rv.h
"

13 
	~"nx¥Ÿo.h
"

14 
	~"lock.h
"

16 
	#SZREQBUF
 2048

	)

18 #i‚de‡
__ECOS


19 
REQBUF
 
	gªqbuf
;

20 
nxSockë
;

21 * 
nxSh¨edMem
;

22 
LOCK_EXTERN
(
nxGlobÆLock
);

27 
	$nxAŒocReq
(
ty≥
, 
size
, 
exåa
)

29 
nxReq
 * 
ªq
;

30 
Æig√d_Àn
;

31 
	`ACCESS_PER_THREAD_DATA
();

34 if(
exåa
)

35 
	`as£π
((
size
 & ()(
ALIGNSZ
-1)) == 0);

38 
Æig√d_Àn
 = (
size
 + 
exåa
 + ()(
ALIGNSZ
-1)) & ~()(ALIGNSZ-1);

41 
	`as£π
(
Æig√d_Àn
 <
MAXREQUESTSZ
);

44 if(
ªqbuf
.
buÂå
 + 
Æig√d_Àn
 >ªqbuf.
bufmax
)

45 
	`nxFlushReq
(
Æig√d_Àn
,1);

48 
ªq
 = (
nxReq
 *)
ªqbuf
.
buÂå
;

49 
ªq
->
ªqTy≥
 = (
BYTE8
)
ty≥
;

50 
ªq
->
hûígth
 = (
BYTE8
)((
size
 + 
exåa
) >> 16);

51 
ªq
->
Àngth
 = (
UINT16
)(
size
 + 
exåa
);

52 
ªqbuf
.
buÂå
 +
Æig√d_Àn
;

53  
ªq
;

54 
	}
}

56 
	$nxAŒocReqbuf„r
(
√wsize
)

58 
	`ACCESS_PER_THREAD_DATA
();

60 if(
√wsize
 < ()
SZREQBUF
)

61 
√wsize
 = 
SZREQBUF
;

62 
ªqbuf
.
buf„r
 = 
	`mÆloc
(
√wsize
);

63 if(!
ªqbuf
.
buf„r
) {

64 
	`EPRINTF
("nxFlushReq: Can'tállocate initialÑequest buffer\n");

65 
	`exô
(1);

67 
ªqbuf
.
buÂå
 =Ñeqbuf.
buf„r
;

68 
ªqbuf
.
bufmax
 =Ñeqbuf.
buf„r
 + 
√wsize
;

69 
	}
}

72 
	$nxAssignReqbuf„r
(*
buf„r
, 
size
)

74 
	`ACCESS_PER_THREAD_DATA
();

76 i‡–
ªqbuf
.
buf„r
 != 0 )

77 
	`‰ì
(
ªqbuf
.
buf„r
);

78 
ªqbuf
.
buf„r
 = buffer;

79 
ªqbuf
.
buÂå
 =Ñeqbuf.
buf„r
;

80 
ªqbuf
.
bufmax
 =Ñeqbuf.
buf„r
 + 
size
;

81 
	}
}

85 
	$nxWrôeSockë
(*
buf
, 
todo
)

87 
wrôãn
;

88 
	`ACCESS_PER_THREAD_DATA
();

91 
wrôãn
 = 
	`wrôe
(
nxSockë
, 
buf
, 
todo
);

92 i‡–
wrôãn
 < 0 ) {

93 i‡–
î∫o
 =
EAGAIN
 ||Éºnÿ=
EINTR
 )

95 
	`EPRINTF
("nxFlushReq: write failed: %m\n");

96 
	`exô
(1);

98 
buf
 +
wrôãn
;

99 
todo
 -
wrôãn
;

100 }  
todo
 > 0 );

101 
	}
}

105 
	$nxFlushReq
(
√wsize
, 
ª∂y_√eded
)

107 
	`ACCESS_PER_THREAD_DATA
();

108 
	`LOCK
(&
nxGlobÆLock
);

111 if(
ªqbuf
.
buf„r
 =
NULL
) {

112 
	`nxAŒocReqbuf„r
(
√wsize
);

113 
	`UNLOCK
(&
nxGlobÆLock
);

118 if(
ªqbuf
.
buÂå
 >Ñeqbuf.
buf„r
) {

119 * 
buf
 = 
ªqbuf
.
buf„r
;

120 
todo
 = 
ªqbuf
.
buÂå
 -Ñeqbuf.
buf„r
;

122 #i‡
HAVE_SHAREDMEM_SUPPORT


123 i‡–
nxSh¨edMem
 != 0 ) {

151 
c
;

152 
nxShmCmdsFlushReq
 
ªq
;

154 
ªq
.
ªqTy≥
 = 
GrNumShmCmdsFlush
;

155 
ªq
.
hûígth
 = 0;

156 
ªq
.
Àngth
 = (req);

157 
ªq
.
size
 = 
todo
;

158 
ªq
.
ª∂y
 = 
ª∂y_√eded
;

160 
	`nxWrôeSockë
((*)&
ªq
,(req));

162 i‡–
ª∂y_√eded
 )

163  
	`ªad
(
nxSockë
, &
c
, 1) != 1 )

166 
ªqbuf
.
buÂå
 =Ñeqbuf.
buf„r
;

168 i‡–
ªqbuf
.
buf„r
 + 
√wsize
 >Ñeqbuf.
bufmax
 ) {

170 
	`EPRINTF
("nxFlushReq: shmÑegionÅoo small\n");

171 
	`exô
(1);

173 
	`UNLOCK
(&
nxGlobÆLock
);

179 
	`nxWrôeSockë
(
buf
,
todo
);

180 
ªqbuf
.
buÂå
 =Ñeqbuf.
buf„r
;

184 if(
ªqbuf
.
buÂå
 + 
√wsize
 >ªqbuf.
bufmax
) {

185 
ªqbuf
.
buf„r
 = 
	`GdRóŒoc
‘eqbuf.buf„r,Ñeqbuf.
bufmax
 -Ñeqbuf.buf„r, 
√wsize
);

186 if(!
ªqbuf
.
buf„r
) {

187 
	`EPRINTF
("nxFlushReq: Can'tÑeallocateÑequest buffer\n");

188 
	`exô
(1);

190 
ªqbuf
.
buÂå
 =Ñeqbuf.
buf„r
;

191 
ªqbuf
.
bufmax
 =Ñeqbuf.
buf„r
 + 
√wsize
;

193 
	`UNLOCK
(&
nxGlobÆLock
);

194 
	}
}

198 
	$nxCÆcSåögByãs
(*
°r
, 
cou¡
, 
GR_TEXTFLAGS
 
Êags
)

200 
nbyãs
;

203 if(
Êags
 & (
MWTF_UC16
|
MWTF_XCHAR2B
))

204 
nbyãs
 = 
cou¡
 * 2;

205 if(
Êags
 & 
MWTF_UC32
)

206 
nbyãs
 = 
cou¡
 * 4;

208 
nbyãs
 = 
cou¡
;

210  
nbyãs
;

211 
	}
}

	@nanox/nxproto.h

36 
	#MAXREQUESTSZ
 30000

	)

38 
	tBYTE8
;

39 
	tUINT16
;

40 
	tINT16
;

41 
	tUINT32
;

43 #i‡
ELKS


44 
UINT16
 
	tIDTYPE
;

45 
	#ALIGNSZ
 2

	)

47 
UINT32
 
	tIDTYPE
;

48 
	#ALIGNSZ
 4

	)

53 
BYTE8
 
	mªqTy≥
;

54 
BYTE8
 
	mhûígth
;

55 
UINT16
 
	mÀngth
;

56 } 
	tnxReq
;

59 
	#AŒocReq
(
«me
) \

60 ((
nx
##
«me
##
Req
 *)
	`nxAŒocReq
(
GrNum
##«me,“x##«me##Req), 0))

	)

63 
	#AŒocReqExåa
(
«me
,
n
) \

64 ((
nx
##
«me
##
Req
 *)
	`nxAŒocReq
(
GrNum
##«me,“x##«me##Req), 
n
))

	)

67 
	#GëReqD©a
(
ªq
Ë((*)((*Ïeq + (* (ªq))))

	)

71 
	#GëReqLí
(
ªq
Ë((‘eq)->
hûígth
 << 16Ë| (ªq)->
Àngth
)

	)

74 
	#GëReqV¨Lí
(
ªq
Ë(
	`GëReqLí
‘eqË- (* (ªq)))

	)

77 
	#GëReqAlig√dLí
(
ªq
Ë((
	`GëReqLí
‘eqË+ (
ALIGNSZ
-1)Ë& ~(ALIGNSZ-1))

	)

79 * 
nxAŒocReq
(
ty≥
, 
size
, 
exåa
);

80 
nxFlushReq
(
√wsize
, 
ª∂y_√eded
);

81 
nxAssignReqbuf„r
(*
buf„r
, 
size
);

82 
nxWrôeSockë
(*
buf
, 
todo
);

83 
nxCÆcSåögByãs
(*
°r
, 
cou¡
, 
GR_TEXTFLAGS
 
Êags
);

85 #i‡
nŸyë


88 
BYTE8
 
	mªpTy≥
;

89 
BYTE8
 
	mhûígth
;

90 
UINT16
 
	mÀngth
;

91 } 
	tnxRïly
;

94 
	#GrNumEº‹Rïly
 255

	)

95 
	#GrNumEvítRïly
 254

	)

98 
	#GrNumO≥n
 0

	)

100 
BYTE8
 
	mªqTy≥
;

101 
BYTE8
 
	mhûígth
;

102 
UINT16
 
	mÀngth
;

103 
UINT32
 
	mpid
;

104 } 
	tnxO≥nReq
;

106 
	#GrNumClo£
 1

	)

108 
BYTE8
 
	mªqTy≥
;

109 
BYTE8
 
	mhûígth
;

110 
UINT16
 
	mÀngth
;

111 } 
	tnxClo£Req
;

113 
	#GrNumGëS¸ìnInfo
 2

	)

115 
BYTE8
 
	mªqTy≥
;

116 
BYTE8
 
	mhûígth
;

117 
UINT16
 
	mÀngth
;

118 } 
	tnxGëS¸ìnInfoReq
;

120 
	#GrNumNewWödow
 3

	)

122 
BYTE8
 
	mªqTy≥
;

123 
BYTE8
 
	mhûígth
;

124 
UINT16
 
	mÀngth
;

125 
IDTYPE
 
	m∑ª¡id
;

126 
INT16
 
	mx
;

127 
INT16
 
	my
;

128 
INT16
 
	mwidth
;

129 
INT16
 
	mheight
;

130 
UINT32
 
	mbackgroundcﬁ‹
;

131 
UINT32
 
	mb‹dîcﬁ‹
;

132 
INT16
 
	mb‹dîsize
;

133 } 
	tnxNewWödowReq
;

135 
	#GrNumNewI≈utWödow
 4

	)

137 
BYTE8
 
	mªqTy≥
;

138 
BYTE8
 
	mhûígth
;

139 
UINT16
 
	mÀngth
;

140 
IDTYPE
 
	m∑ª¡id
;

141 
INT16
 
	mx
;

142 
INT16
 
	my
;

143 
INT16
 
	mwidth
;

144 
INT16
 
	mheight
;

145 } 
	tnxNewI≈utWödowReq
;

147 
	#GrNumDe°royWödow
 5

	)

149 
BYTE8
 
	mªqTy≥
;

150 
BYTE8
 
	mhûígth
;

151 
UINT16
 
	mÀngth
;

152 
IDTYPE
 
	mwödowid
;

153 } 
	tnxDe°royWödowReq
;

155 
	#GrNumNewGC
 6

	)

157 
BYTE8
 
	mªqTy≥
;

158 
BYTE8
 
	mhûígth
;

159 
UINT16
 
	mÀngth
;

160 } 
	tnxNewGCReq
;

162 
	#GrNumC›yGC
 7

	)

164 
BYTE8
 
	mªqTy≥
;

165 
BYTE8
 
	mhûígth
;

166 
UINT16
 
	mÀngth
;

167 
IDTYPE
 
	mgcid
;

168 } 
	tnxC›yGCReq
;

170 
	#GrNumGëGCInfo
 8

	)

172 
BYTE8
 
	mªqTy≥
;

173 
BYTE8
 
	mhûígth
;

174 
UINT16
 
	mÀngth
;

175 
IDTYPE
 
	mgcid
;

176 } 
	tnxGëGCInfoReq
;

178 
	#GrNumDe°royGC
 9

	)

180 
BYTE8
 
	mªqTy≥
;

181 
BYTE8
 
	mhûígth
;

182 
UINT16
 
	mÀngth
;

183 
IDTYPE
 
	mgcid
;

184 } 
	tnxDe°royGCReq
;

186 
	#GrNumM≠Wödow
 10

	)

188 
BYTE8
 
	mªqTy≥
;

189 
BYTE8
 
	mhûígth
;

190 
UINT16
 
	mÀngth
;

191 
IDTYPE
 
	mwödowid
;

192 } 
	tnxM≠WödowReq
;

194 
	#GrNumUnm≠Wödow
 11

	)

196 
BYTE8
 
	mªqTy≥
;

197 
BYTE8
 
	mhûígth
;

198 
UINT16
 
	mÀngth
;

199 
IDTYPE
 
	mwödowid
;

200 } 
	tnxUnm≠WödowReq
;

202 
	#GrNumRai£Wödow
 12

	)

204 
BYTE8
 
	mªqTy≥
;

205 
BYTE8
 
	mhûígth
;

206 
UINT16
 
	mÀngth
;

207 
IDTYPE
 
	mwödowid
;

208 } 
	tnxRai£WödowReq
;

210 
	#GrNumLowîWödow
 13

	)

212 
BYTE8
 
	mªqTy≥
;

213 
BYTE8
 
	mhûígth
;

214 
UINT16
 
	mÀngth
;

215 
IDTYPE
 
	mwödowid
;

216 } 
	tnxLowîWödowReq
;

218 
	#GrNumMoveWödow
 14

	)

220 
BYTE8
 
	mªqTy≥
;

221 
BYTE8
 
	mhûígth
;

222 
UINT16
 
	mÀngth
;

223 
IDTYPE
 
	mwödowid
;

224 
INT16
 
	mx
;

225 
INT16
 
	my
;

226 } 
	tnxMoveWödowReq
;

228 
	#GrNumResizeWödow
 15

	)

230 
BYTE8
 
	mªqTy≥
;

231 
BYTE8
 
	mhûígth
;

232 
UINT16
 
	mÀngth
;

233 
IDTYPE
 
	mwödowid
;

234 
INT16
 
	mwidth
;

235 
INT16
 
	mheight
;

236 } 
	tnxResizeWödowReq
;

238 
	#GrNumGëWödowInfo
 16

	)

240 
BYTE8
 
	mªqTy≥
;

241 
BYTE8
 
	mhûígth
;

242 
UINT16
 
	mÀngth
;

243 
IDTYPE
 
	mwödowid
;

244 } 
	tnxGëWödowInfoReq
;

246 
	#GrNumGëF⁄tInfo
 17

	)

248 
BYTE8
 
	mªqTy≥
;

249 
BYTE8
 
	mhûígth
;

250 
UINT16
 
	mÀngth
;

251 
IDTYPE
 
	mf⁄tid
;

252 } 
	tnxGëF⁄tInfoReq
;

254 
	#GrNumSëFocus
 18

	)

256 
BYTE8
 
	mªqTy≥
;

257 
BYTE8
 
	mhûígth
;

258 
UINT16
 
	mÀngth
;

259 
IDTYPE
 
	mwödowid
;

260 } 
	tnxSëFocusReq
;

262 
	#GrNumSëWödowCurs‹
 19

	)

264 
BYTE8
 
	mªqTy≥
;

265 
BYTE8
 
	mhûígth
;

266 
UINT16
 
	mÀngth
;

267 
IDTYPE
 
	mwödowid
;

268 
IDTYPE
 
	mcurs‹id
;

269 } 
	tnxSëWödowCurs‹Req
;

271 
	#GrNumCÀ¨Aªa
 20

	)

273 
BYTE8
 
	mªqTy≥
;

274 
BYTE8
 
	mhûígth
;

275 
UINT16
 
	mÀngth
;

276 
IDTYPE
 
	mwödowid
;

277 
INT16
 
	mx
;

278 
INT16
 
	my
;

279 
INT16
 
	mwidth
;

280 
INT16
 
	mheight
;

281 
UINT16
 
	mexpo£Êag
;

282 } 
	tnxCÀ¨AªaReq
;

284 
	#GrNumSñe˘Evíts
 21

	)

286 
BYTE8
 
	mªqTy≥
;

287 
BYTE8
 
	mhûígth
;

288 
UINT16
 
	mÀngth
;

289 
IDTYPE
 
	mwödowid
;

290 
UINT32
 
	mevítmask
;

291 } 
	tnxSñe˘EvítsReq
;

293 
	#GrNumGëNextEvít
 22

	)

295 
BYTE8
 
	mªqTy≥
;

296 
BYTE8
 
	mhûígth
;

297 
UINT16
 
	mÀngth
;

298 } 
	tnxGëNextEvítReq
;

300 
	#GrNumCheckNextEvít
 23

	)

302 
BYTE8
 
	mªqTy≥
;

303 
BYTE8
 
	mhûígth
;

304 
UINT16
 
	mÀngth
;

305 } 
	tnxCheckNextEvítReq
;

307 
	#GrNumPìkEvít
 24

	)

309 
BYTE8
 
	mªqTy≥
;

310 
BYTE8
 
	mhûígth
;

311 
UINT16
 
	mÀngth
;

312 } 
	tnxPìkEvítReq
;

314 
	#GrNumLöe
 25

	)

316 
BYTE8
 
	mªqTy≥
;

317 
BYTE8
 
	mhûígth
;

318 
UINT16
 
	mÀngth
;

319 
IDTYPE
 
	mdøwid
;

320 
IDTYPE
 
	mgcid
;

321 
INT16
 
	mx1
;

322 
INT16
 
	my1
;

323 
INT16
 
	mx2
;

324 
INT16
 
	my2
;

325 } 
	tnxLöeReq
;

327 
	#GrNumPoöt
 26

	)

329 
BYTE8
 
	mªqTy≥
;

330 
BYTE8
 
	mhûígth
;

331 
UINT16
 
	mÀngth
;

332 
IDTYPE
 
	mdøwid
;

333 
IDTYPE
 
	mgcid
;

334 
INT16
 
	mx
;

335 
INT16
 
	my
;

336 } 
	tnxPoötReq
;

338 
	#GrNumRe˘
 27

	)

340 
BYTE8
 
	mªqTy≥
;

341 
BYTE8
 
	mhûígth
;

342 
UINT16
 
	mÀngth
;

343 
IDTYPE
 
	mdøwid
;

344 
IDTYPE
 
	mgcid
;

345 
INT16
 
	mx
;

346 
INT16
 
	my
;

347 
INT16
 
	mwidth
;

348 
INT16
 
	mheight
;

349 } 
	tnxRe˘Req
;

351 
	#GrNumFûlRe˘
 28

	)

353 
BYTE8
 
	mªqTy≥
;

354 
BYTE8
 
	mhûígth
;

355 
UINT16
 
	mÀngth
;

356 
IDTYPE
 
	mdøwid
;

357 
IDTYPE
 
	mgcid
;

358 
INT16
 
	mx
;

359 
INT16
 
	my
;

360 
INT16
 
	mwidth
;

361 
INT16
 
	mheight
;

362 } 
	tnxFûlRe˘Req
;

364 
	#GrNumPﬁy
 29

	)

366 
BYTE8
 
	mªqTy≥
;

367 
BYTE8
 
	mhûígth
;

368 
UINT16
 
	mÀngth
;

369 
IDTYPE
 
	mdøwid
;

370 
IDTYPE
 
	mgcid
;

372 } 
	tnxPﬁyReq
;

374 
	#GrNumFûlPﬁy
 30

	)

376 
BYTE8
 
	mªqTy≥
;

377 
BYTE8
 
	mhûígth
;

378 
UINT16
 
	mÀngth
;

379 
IDTYPE
 
	mdøwid
;

380 
IDTYPE
 
	mgcid
;

382 } 
	tnxFûlPﬁyReq
;

384 
	#GrNumEŒù£
 31

	)

386 
BYTE8
 
	mªqTy≥
;

387 
BYTE8
 
	mhûígth
;

388 
UINT16
 
	mÀngth
;

389 
IDTYPE
 
	mdøwid
;

390 
IDTYPE
 
	mgcid
;

391 
INT16
 
	mx
;

392 
INT16
 
	my
;

393 
INT16
 
	mrx
;

394 
INT16
 
	mry
;

395 } 
	tnxEŒù£Req
;

397 
	#GrNumFûlEŒù£
 32

	)

399 
BYTE8
 
	mªqTy≥
;

400 
BYTE8
 
	mhûígth
;

401 
UINT16
 
	mÀngth
;

402 
IDTYPE
 
	mdøwid
;

403 
IDTYPE
 
	mgcid
;

404 
INT16
 
	mx
;

405 
INT16
 
	my
;

406 
INT16
 
	mrx
;

407 
INT16
 
	mry
;

408 } 
	tnxFûlEŒù£Req
;

410 
	#GrNumSëGCF‹eground
 33

	)

412 
BYTE8
 
	mªqTy≥
;

413 
BYTE8
 
	mhûígth
;

414 
UINT16
 
	mÀngth
;

415 
IDTYPE
 
	mgcid
;

416 
UINT32
 
	mcﬁ‹
;

417 } 
	tnxSëGCF‹egroundReq
;

419 
	#GrNumSëGCBackground
 34

	)

421 
BYTE8
 
	mªqTy≥
;

422 
BYTE8
 
	mhûígth
;

423 
UINT16
 
	mÀngth
;

424 
IDTYPE
 
	mgcid
;

425 
UINT32
 
	mcﬁ‹
;

426 } 
	tnxSëGCBackgroundReq
;

428 
	#GrNumSëGCU£Background
 35

	)

430 
BYTE8
 
	mªqTy≥
;

431 
BYTE8
 
	mhûígth
;

432 
UINT16
 
	mÀngth
;

433 
IDTYPE
 
	mgcid
;

434 
UINT16
 
	mÊag
;

435 } 
	tnxSëGCU£BackgroundReq
;

437 
	#GrNumSëGCMode
 36

	)

439 
BYTE8
 
	mªqTy≥
;

440 
BYTE8
 
	mhûígth
;

441 
UINT16
 
	mÀngth
;

442 
IDTYPE
 
	mgcid
;

443 
UINT16
 
	mmode
;

444 } 
	tnxSëGCModeReq
;

446 
	#GrNumSëGCF⁄t
 37

	)

448 
BYTE8
 
	mªqTy≥
;

449 
BYTE8
 
	mhûígth
;

450 
UINT16
 
	mÀngth
;

451 
IDTYPE
 
	mgcid
;

452 
IDTYPE
 
	mf⁄tid
;

453 } 
	tnxSëGCF⁄tReq
;

455 
	#GrNumGëGCTextSize
 38

	)

457 
BYTE8
 
	mªqTy≥
;

458 
BYTE8
 
	mhûígth
;

459 
UINT16
 
	mÀngth
;

460 
IDTYPE
 
	mgcid
;

461 
UINT32
 
	mÊags
;

462 
UINT32
 
	mch¨cou¡
;

464 } 
	tnxGëGCTextSizeReq
;

466 
	#GrNumRódAªa
 39

	)

468 
BYTE8
 
	mªqTy≥
;

469 
BYTE8
 
	mhûígth
;

470 
UINT16
 
	mÀngth
;

471 
IDTYPE
 
	mdøwid
;

472 
INT16
 
	mx
;

473 
INT16
 
	my
;

474 
INT16
 
	mwidth
;

475 
INT16
 
	mheight
;

476 } 
	tnxRódAªaReq
;

478 
	#GrNumAªa
 40

	)

480 
BYTE8
 
	mªqTy≥
;

481 
BYTE8
 
	mhûígth
;

482 
UINT16
 
	mÀngth
;

483 
IDTYPE
 
	mdøwid
;

484 
IDTYPE
 
	mgcid
;

485 
INT16
 
	mx
;

486 
INT16
 
	my
;

487 
INT16
 
	mwidth
;

488 
INT16
 
	mheight
;

489 
INT16
 
	mpixty≥
;

490 
INT16
 
	m∑d
;

492 } 
	tnxAªaReq
;

494 
	#GrNumBôm≠
 41

	)

496 
BYTE8
 
	mªqTy≥
;

497 
BYTE8
 
	mhûígth
;

498 
UINT16
 
	mÀngth
;

499 
IDTYPE
 
	mdøwid
;

500 
IDTYPE
 
	mgcid
;

501 
INT16
 
	mx
;

502 
INT16
 
	my
;

503 
INT16
 
	mwidth
;

504 
INT16
 
	mheight
;

506 } 
	tnxBôm≠Req
;

508 
	#GrNumText
 42

	)

510 
BYTE8
 
	mªqTy≥
;

511 
BYTE8
 
	mhûígth
;

512 
UINT16
 
	mÀngth
;

513 
IDTYPE
 
	mdøwid
;

514 
IDTYPE
 
	mgcid
;

515 
INT16
 
	mx
;

516 
INT16
 
	my
;

517 
INT16
 
	mcou¡
;

518 
INT16
 
	m∑d
;

519 
UINT32
 
	mÊags
;

521 } 
	tnxTextReq
;

523 
	#GrNumNewCurs‹
 43

	)

525 
BYTE8
 
	mªqTy≥
;

526 
BYTE8
 
	mhûígth
;

527 
UINT16
 
	mÀngth
;

528 
INT16
 
	mwidth
;

529 
INT16
 
	mheight
;

530 
INT16
 
	mhŸx
;

531 
INT16
 
	mhŸy
;

532 
UINT32
 
	mfgcﬁ‹
;

533 
UINT32
 
	mbgcﬁ‹
;

536 } 
	tnxNewCurs‹Req
;

538 
	#GrNumMoveCurs‹
 44

	)

540 
BYTE8
 
	mªqTy≥
;

541 
BYTE8
 
	mhûígth
;

542 
UINT16
 
	mÀngth
;

543 
INT16
 
	mx
;

544 
INT16
 
	my
;

545 } 
	tnxMoveCurs‹Req
;

547 
	#GrNumGëSy°emPÆëã
 45

	)

549 
BYTE8
 
	mªqTy≥
;

550 
BYTE8
 
	mhûígth
;

551 
UINT16
 
	mÀngth
;

552 } 
	tnxGëSy°emPÆëãReq
;

554 
	#GrNumFödCﬁ‹
 46

	)

556 
BYTE8
 
	mªqTy≥
;

557 
BYTE8
 
	mhûígth
;

558 
UINT16
 
	mÀngth
;

559 
UINT32
 
	mcﬁ‹
;

560 } 
	tnxFödCﬁ‹Req
;

562 
	#GrNumRï¨ítWödow
 47

	)

564 
BYTE8
 
	mªqTy≥
;

565 
BYTE8
 
	mhûígth
;

566 
UINT16
 
	mÀngth
;

567 
IDTYPE
 
	mwödowid
;

568 
IDTYPE
 
	m∑ª¡id
;

569 
INT16
 
	mx
;

570 
INT16
 
	my
;

571 } 
	tnxRï¨ítWödowReq
;

573 
	#GrNumDøwImageFromFûe
 48

	)

575 
BYTE8
 
	mªqTy≥
;

576 
BYTE8
 
	mhûígth
;

577 
UINT16
 
	mÀngth
;

578 
IDTYPE
 
	mdøwid
;

579 
IDTYPE
 
	mgcid
;

580 
INT16
 
	mx
;

581 
INT16
 
	my
;

582 
INT16
 
	mwidth
;

583 
INT16
 
	mheight
;

584 
IDTYPE
 
	mÊags
;

586 } 
	tnxDøwImageFromFûeReq
;

588 
	#GrNumLﬂdImageFromFûe
 49

	)

590 
BYTE8
 
	mªqTy≥
;

591 
BYTE8
 
	mhûígth
;

592 
UINT16
 
	mÀngth
;

593 
INT16
 
	mÊags
;

594 
INT16
 
	m∑d
;

595 } 
	tnxLﬂdImageFromFûeReq
;

597 
	#GrNumNewPixm≠
 50

	)

599 
BYTE8
 
	mªqTy≥
;

600 
BYTE8
 
	mhûígth
;

601 
UINT16
 
	mÀngth
;

602 
INT16
 
	mwidth
;

603 
INT16
 
	mheight
;

605 } 
	tnxNewPixm≠Req
;

607 
	#GrNumC›yAªa
 51

	)

609 
BYTE8
 
	mªqTy≥
;

610 
BYTE8
 
	mhûígth
;

611 
UINT16
 
	mÀngth
;

612 
IDTYPE
 
	mdøwid
;

613 
IDTYPE
 
	mgcid
;

614 
INT16
 
	mx
;

615 
INT16
 
	my
;

616 
INT16
 
	mwidth
;

617 
INT16
 
	mheight
;

618 
IDTYPE
 
	m§cid
;

619 
INT16
 
	m§cx
;

620 
INT16
 
	m§cy
;

621 
UINT32
 
	m›
;

622 } 
	tnxC›yAªaReq
;

624 
	#GrNumSëF⁄tSize
 52

	)

626 
BYTE8
 
	mªqTy≥
;

627 
BYTE8
 
	mhûígth
;

628 
UINT16
 
	mÀngth
;

629 
IDTYPE
 
	mf⁄tid
;

630 
INT16
 
	mf⁄tsize
;

631 } 
	tnxSëF⁄tSizeReq
;

633 
	#GrNumCª©eF⁄t
 53

	)

635 
BYTE8
 
	mªqTy≥
;

636 
BYTE8
 
	mhûígth
;

637 
UINT16
 
	mÀngth
;

638 
INT16
 
	mheight
;

639 
INT16
 
	m∑ddög
;

640 } 
	tnxCª©eF⁄tReq
;

642 
	#GrNumDe°royF⁄t
 54

	)

644 
BYTE8
 
	mªqTy≥
;

645 
BYTE8
 
	mhûígth
;

646 
UINT16
 
	mÀngth
;

647 
IDTYPE
 
	mf⁄tid
;

648 } 
	tnxDe°royF⁄tReq
;

650 
	#GrNumReqShmCmds
 55

	)

652 
BYTE8
 
	mªqTy≥
;

653 
BYTE8
 
	mhûígth
;

654 
UINT16
 
	mÀngth
;

655 
UINT32
 
	msize
;

656 } 
	tnxReqShmCmdsReq
;

658 
	#GrNumShmCmdsFlush
 56

	)

660 
BYTE8
 
	mªqTy≥
;

661 
BYTE8
 
	mhûígth
;

662 
UINT16
 
	mÀngth
;

663 
UINT32
 
	msize
;

664 
UINT32
 
	mª∂y
;

665 } 
	tnxShmCmdsFlushReq
;

667 
	#GrNumSëF⁄tRŸ©i⁄
 57

	)

669 
BYTE8
 
	mªqTy≥
;

670 
BYTE8
 
	mhûígth
;

671 
UINT16
 
	mÀngth
;

672 
IDTYPE
 
	mf⁄tid
;

673 
INT16
 
	mã¡hdegªes
;

674 } 
	tnxSëF⁄tRŸ©i⁄Req
;

676 
	#GrNumSëF⁄tAâr
 58

	)

678 
BYTE8
 
	mªqTy≥
;

679 
BYTE8
 
	mhûígth
;

680 
UINT16
 
	mÀngth
;

681 
IDTYPE
 
	mf⁄tid
;

682 
INT16
 
	m£tÊags
;

683 
INT16
 
	m˛rÊags
;

684 } 
	tnxSëF⁄tAârReq
;

686 
	#GrNumSëSy°emPÆëã
 59

	)

688 
BYTE8
 
	mªqTy≥
;

689 
BYTE8
 
	mhûígth
;

690 
UINT16
 
	mÀngth
;

691 
INT16
 
	mfú°
;

692 
INT16
 
	mcou¡
;

693 
MWPALENTRY
 
	m∑Àâe
[256];

694 } 
	tnxSëSy°emPÆëãReq
;

696 
	#GrNumInje˘Evít
 60

	)

697 
	#GR_INJECT_EVENT_POINTER
 0

	)

698 
	#GR_INJECT_EVENT_KEYBOARD
 1

	)

700 
BYTE8
 
	mªqTy≥
;

701 
BYTE8
 
	mhûígth
;

702 
UINT16
 
	mÀngth
;

705 
INT16
 
	mx
;

706 
INT16
 
	my
;

707 
UINT16
 
	mbuâ⁄
;

708 
BYTE8
 
	mvisibÀ
;

709 } 
	mpoöãr
;

711 
IDTYPE
 
	mwid
;

712 
UINT16
 
	mkeyvÆue
;

713 
UINT16
 
	mmodifõr
;

714 
BYTE8
 
	msˇncode
;

715 
BYTE8
 
	m¥es£d
;

716 } 
	mkeybﬂrd
;

717 } 
	mevít
;

718 
UINT16
 
	mevít_ty≥
;

719 } 
	tnxInje˘EvítReq
;

721 
	#GrNumNewRegi⁄
 61

	)

723 
BYTE8
 
	mªqTy≥
;

724 
BYTE8
 
	mhûígth
;

725 
UINT16
 
	mÀngth
;

726 } 
	tnxNewRegi⁄Req
;

728 
	#GrNumDe°royRegi⁄
 62

	)

730 
BYTE8
 
	mªqTy≥
;

731 
BYTE8
 
	mhûígth
;

732 
UINT16
 
	mÀngth
;

733 
IDTYPE
 
	mªgi⁄id
;

734 } 
	tnxDe°royRegi⁄Req
;

736 
	#GrNumUni⁄Re˘WôhRegi⁄
 63

	)

738 
BYTE8
 
	mªqTy≥
;

739 
BYTE8
 
	mhûígth
;

740 
UINT16
 
	mÀngth
;

741 
IDTYPE
 
	mªgi⁄id
;

742 
GR_RECT
 
	mª˘
;

743 } 
	tnxUni⁄Re˘WôhRegi⁄Req
;

745 
	#GrNumUni⁄Regi⁄
 64

	)

747 
BYTE8
 
	mªqTy≥
;

748 
BYTE8
 
	mhûígth
;

749 
UINT16
 
	mÀngth
;

750 
IDTYPE
 
	mªgi⁄id
;

751 
IDTYPE
 
	m§¸egi⁄id1
;

752 
IDTYPE
 
	m§¸egi⁄id2
;

753 } 
	tnxUni⁄Regi⁄Req
;

755 
	#GrNumI¡î£˘Regi⁄
 65

	)

757 
BYTE8
 
	mªqTy≥
;

758 
BYTE8
 
	mhûígth
;

759 
UINT16
 
	mÀngth
;

760 
IDTYPE
 
	mªgi⁄id
;

761 
IDTYPE
 
	m§¸egi⁄id1
;

762 
IDTYPE
 
	m§¸egi⁄id2
;

763 } 
	tnxI¡î£˘Regi⁄Req
;

765 
	#GrNumSëGCRegi⁄
 66

	)

767 
BYTE8
 
	mªqTy≥
;

768 
BYTE8
 
	mhûígth
;

769 
UINT16
 
	mÀngth
;

770 
IDTYPE
 
	mgcid
;

771 
IDTYPE
 
	mªgi⁄id
;

772 } 
	tnxSëGCRegi⁄Req
;

774 
	#GrNumSubåa˘Regi⁄
 67

	)

776 
BYTE8
 
	mªqTy≥
;

777 
BYTE8
 
	mhûígth
;

778 
UINT16
 
	mÀngth
;

779 
IDTYPE
 
	mªgi⁄id
;

780 
IDTYPE
 
	m§¸egi⁄id1
;

781 
IDTYPE
 
	m§¸egi⁄id2
;

782 } 
	tnxSubåa˘Regi⁄Req
;

784 
	#GrNumX‹Regi⁄
 68

	)

786 
BYTE8
 
	mªqTy≥
;

787 
BYTE8
 
	mhûígth
;

788 
UINT16
 
	mÀngth
;

789 
IDTYPE
 
	mªgi⁄id
;

790 
IDTYPE
 
	m§¸egi⁄id1
;

791 
IDTYPE
 
	m§¸egi⁄id2
;

792 } 
	tnxX‹Regi⁄Req
;

794 
	#GrNumPoötInRegi⁄
 69

	)

796 
BYTE8
 
	mªqTy≥
;

797 
BYTE8
 
	mhûígth
;

798 
UINT16
 
	mÀngth
;

799 
IDTYPE
 
	mªgi⁄id
;

800 
INT16
 
	mx
;

801 
INT16
 
	my
;

802 } 
	tnxPoötInRegi⁄Req
;

804 
	#GrNumRe˘InRegi⁄
 70

	)

806 
BYTE8
 
	mªqTy≥
;

807 
BYTE8
 
	mhûígth
;

808 
UINT16
 
	mÀngth
;

809 
IDTYPE
 
	mªgi⁄id
;

810 
INT16
 
	mx
;

811 
INT16
 
	my
;

812 
INT16
 
	mw
;

813 
INT16
 
	mh
;

814 } 
	tnxRe˘InRegi⁄Req
;

816 
	#GrNumEm±yRegi⁄
 71

	)

818 
BYTE8
 
	mªqTy≥
;

819 
BYTE8
 
	mhûígth
;

820 
UINT16
 
	mÀngth
;

821 
IDTYPE
 
	mªgi⁄id
;

822 } 
	tnxEm±yRegi⁄Req
;

824 
	#GrNumEquÆRegi⁄
 72

	)

826 
BYTE8
 
	mªqTy≥
;

827 
BYTE8
 
	mhûígth
;

828 
UINT16
 
	mÀngth
;

829 
IDTYPE
 
	mªgi⁄1
;

830 
IDTYPE
 
	mªgi⁄2
;

831 } 
	tnxEquÆRegi⁄Req
;

833 
	#GrNumOff£tRegi⁄
 73

	)

835 
BYTE8
 
	mªqTy≥
;

836 
BYTE8
 
	mhûígth
;

837 
UINT16
 
	mÀngth
;

838 
IDTYPE
 
	mªgi⁄
;

839 
INT16
 
	mdx
;

840 
INT16
 
	mdy
;

841 } 
	tnxOff£tRegi⁄Req
;

843 
	#GrNumGëRegi⁄Box
 74

	)

845 
BYTE8
 
	mªqTy≥
;

846 
BYTE8
 
	mhûígth
;

847 
UINT16
 
	mÀngth
;

848 
IDTYPE
 
	mªgi⁄id
;

849 } 
	tnxGëRegi⁄BoxReq
;

851 
	#GrNumNewPﬁyg⁄Regi⁄
 75

	)

853 
BYTE8
 
	mªqTy≥
;

854 
BYTE8
 
	mhûígth
;

855 
UINT16
 
	mÀngth
;

856 
UINT16
 
	mmode
;

857 
UINT16
 
	m∑d
;

859 } 
	tnxNewPﬁyg⁄Regi⁄Req
;

861 
	#GrNumArc
 76

	)

863 
BYTE8
 
	mªqTy≥
;

864 
BYTE8
 
	mhûígth
;

865 
UINT16
 
	mÀngth
;

866 
IDTYPE
 
	mdøwid
;

867 
IDTYPE
 
	mgcid
;

868 
INT16
 
	mx
;

869 
INT16
 
	my
;

870 
INT16
 
	mrx
;

871 
INT16
 
	mry
;

872 
INT16
 
	max
;

873 
INT16
 
	may
;

874 
INT16
 
	mbx
;

875 
INT16
 
	mby
;

876 
INT16
 
	mty≥
;

877 } 
	tnxArcReq
;

879 
	#GrNumArcAngÀ
 77

	)

881 
BYTE8
 
	mªqTy≥
;

882 
BYTE8
 
	mhûígth
;

883 
UINT16
 
	mÀngth
;

884 
IDTYPE
 
	mdøwid
;

885 
IDTYPE
 
	mgcid
;

886 
INT16
 
	mx
;

887 
INT16
 
	my
;

888 
INT16
 
	mrx
;

889 
INT16
 
	mry
;

890 
INT16
 
	m™gÀ1
;

891 
INT16
 
	m™gÀ2
;

892 
INT16
 
	mty≥
;

893 } 
	tnxArcAngÀReq
;

895 
	#GrNumSëWMPr›îtõs
 78

	)

897 
BYTE8
 
	mªqTy≥
;

898 
BYTE8
 
	mhûígth
;

899 
UINT16
 
	mÀngth
;

900 
IDTYPE
 
	mwödowid
;

903 } 
	tnxSëWMPr›îtõsReq
;

905 
	#GrNumGëWMPr›îtõs
 79

	)

907 
BYTE8
 
	mªqTy≥
;

908 
BYTE8
 
	mhûígth
;

909 
UINT16
 
	mÀngth
;

910 
IDTYPE
 
	mwödowid
;

911 } 
	tnxGëWMPr›îtõsReq
;

913 
	#GrNumClo£Wödow
 80

	)

915 
BYTE8
 
	mªqTy≥
;

916 
BYTE8
 
	mhûígth
;

917 
UINT16
 
	mÀngth
;

918 
IDTYPE
 
	mwödowid
;

919 } 
	tnxClo£WödowReq
;

921 
	#GrNumKûlWödow
 81

	)

923 
BYTE8
 
	mªqTy≥
;

924 
BYTE8
 
	mhûígth
;

925 
UINT16
 
	mÀngth
;

926 
IDTYPE
 
	mwödowid
;

927 } 
	tnxKûlWödowReq
;

929 
	#GrNumDøwImageToFô
 82

	)

931 
BYTE8
 
	mªqTy≥
;

932 
BYTE8
 
	mhûígth
;

933 
UINT16
 
	mÀngth
;

934 
IDTYPE
 
	mdøwid
;

935 
IDTYPE
 
	mgcid
;

936 
INT16
 
	mx
;

937 
INT16
 
	my
;

938 
INT16
 
	mwidth
;

939 
INT16
 
	mheight
;

940 
IDTYPE
 
	mimageid
;

941 } 
	tnxDøwImageToFôReq
;

943 
	#GrNumFªeImage
 83

	)

945 
BYTE8
 
	mªqTy≥
;

946 
BYTE8
 
	mhûígth
;

947 
UINT16
 
	mÀngth
;

948 
IDTYPE
 
	mid
;

949 } 
	tnxFªeImageReq
;

951 
	#GrNumGëImageInfo
 84

	)

953 
BYTE8
 
	mªqTy≥
;

954 
BYTE8
 
	mhûígth
;

955 
UINT16
 
	mÀngth
;

956 
IDTYPE
 
	mid
;

957 } 
	tnxGëImageInfoReq
;

959 
	#GrNumDøwImageBôs
 85

	)

961 
BYTE8
 
	mªqTy≥
;

962 
BYTE8
 
	mhûígth
;

963 
UINT16
 
	mÀngth
;

964 
IDTYPE
 
	mdøwid
;

965 
IDTYPE
 
	mgcid
;

966 
INT16
 
	mx
;

967 
INT16
 
	my
;

968 
INT16
 
	mwidth
;

969 
INT16
 
	mheight
;

970 
INT16
 
	m∂™es
;

971 
INT16
 
	mbµ
;

972 
INT16
 
	mpôch
;

973 
INT16
 
	mbyã•îpixñ
;

974 
INT16
 
	mcom¥essi⁄
;

975 
INT16
 
	m∑lsize
;

976 
UINT32
 
	må™scﬁ‹
;

979 } 
	tnxDøwImageBôsReq
;

981 
	#GrNumPoöts
 86

	)

983 
BYTE8
 
	mªqTy≥
;

984 
BYTE8
 
	mhûígth
;

985 
UINT16
 
	mÀngth
;

986 
IDTYPE
 
	mdøwid
;

987 
IDTYPE
 
	mgcid
;

989 } 
	tnxPoötsReq
;

991 
	#GrNumGëFocus
 87

	)

993 
BYTE8
 
	mªqTy≥
;

994 
BYTE8
 
	mhûígth
;

995 
UINT16
 
	mÀngth
;

996 } 
	tnxGëFocusReq
;

998 
	#GrNumGëSysCﬁ‹
 88

	)

1000 
BYTE8
 
	mªqTy≥
;

1001 
BYTE8
 
	mhûígth
;

1002 
UINT16
 
	mÀngth
;

1003 
UINT16
 
	mödex
;

1004 } 
	tnxGëSysCﬁ‹Req
;

1006 
	#GrNumSëS¸ìnSavîTimeout
 89

	)

1008 
BYTE8
 
	mªqTy≥
;

1009 
BYTE8
 
	mhûígth
;

1010 
UINT16
 
	mÀngth
;

1011 
UINT32
 
	mtimeout
;

1012 } 
	tnxSëS¸ìnSavîTimeoutReq
;

1014 
	#GrNumSëSñe˘i⁄Ow√r
 90

	)

1016 
BYTE8
 
	mªqTy≥
;

1017 
BYTE8
 
	mhûígth
;

1018 
UINT16
 
	mÀngth
;

1019 
IDTYPE
 
	mwid
;

1021 } 
	tnxSëSñe˘i⁄Ow√rReq
;

1023 
	#GrNumGëSñe˘i⁄Ow√r
 91

	)

1025 
BYTE8
 
	mªqTy≥
;

1026 
BYTE8
 
	mhûígth
;

1027 
UINT16
 
	mÀngth
;

1028 } 
	tnxGëSñe˘i⁄Ow√rReq
;

1030 
	#GrNumReque°Clõ¡D©a
 92

	)

1032 
BYTE8
 
	mªqTy≥
;

1033 
BYTE8
 
	mhûígth
;

1034 
UINT16
 
	mÀngth
;

1035 
IDTYPE
 
	mwid
;

1036 
IDTYPE
 
	mrid
;

1037 
UINT32
 
	m£rül
;

1038 
UINT16
 
	mmimëy≥
;

1039 } 
	tnxReque°Clõ¡D©aReq
;

1041 
	#GrNumSídClõ¡D©a
 93

	)

1043 
BYTE8
 
	mªqTy≥
;

1044 
BYTE8
 
	mhûígth
;

1045 
UINT16
 
	mÀngth
;

1046 
IDTYPE
 
	mwid
;

1047 
IDTYPE
 
	mdid
;

1048 
UINT32
 
	m£rül
;

1049 
UINT32
 
	mÀn
;

1051 } 
	tnxSídClõ¡D©aReq
;

1053 
	#GrNumBñl
 94

	)

1055 
BYTE8
 
	mªqTy≥
;

1056 
BYTE8
 
	mhûígth
;

1057 
UINT16
 
	mÀngth
;

1058 } 
	tnxBñlReq
;

1060 
	#GrNumSëBackgroundPixm≠
 95

	)

1062 
BYTE8
 
	mªqTy≥
;

1063 
BYTE8
 
	mhûígth
;

1064 
UINT16
 
	mÀngth
;

1065 
IDTYPE
 
	mwid
;

1066 
IDTYPE
 
	mpixm≠
;

1067 
UINT32
 
	mÊags
;

1068 } 
	tnxSëBackgroundPixm≠Req
;

1070 
	#GrNumDe°royCurs‹
 96

	)

1072 
BYTE8
 
	mªqTy≥
;

1073 
BYTE8
 
	mhûígth
;

1074 
UINT16
 
	mÀngth
;

1075 
IDTYPE
 
	mcurs‹id
;

1076 } 
	tnxDe°royCurs‹Req
;

1078 
	#GrNumQuîyTªe
 97

	)

1080 
BYTE8
 
	mªqTy≥
;

1081 
BYTE8
 
	mhûígth
;

1082 
UINT16
 
	mÀngth
;

1083 
IDTYPE
 
	mwödowid
;

1084 } 
	tnxQuîyTªeReq
;

1086 
	#GrNumCª©eTimî
 98

	)

1088 
BYTE8
 
	mªqTy≥
;

1089 
BYTE8
 
	mhûígth
;

1090 
UINT16
 
	mÀngth
;

1091 
IDTYPE
 
	mwid
;

1092 
UINT32
 
	m≥riod
;

1093 } 
	tnxCª©eTimîReq
;

1095 
	#GrNumDe°royTimî
 99

	)

1097 
BYTE8
 
	mªqTy≥
;

1098 
BYTE8
 
	mhûígth
;

1099 
UINT16
 
	mÀngth
;

1100 
IDTYPE
 
	mtimîid
;

1101 } 
	tnxDe°royTimîReq
;

1103 
	#GrNumSëP‹åaôMode
 100

	)

1105 
BYTE8
 
	mªqTy≥
;

1106 
BYTE8
 
	mhûígth
;

1107 
UINT16
 
	mÀngth
;

1108 
UINT32
 
	mp‹åaômode
;

1109 } 
	tnxSëP‹åaôModeReq
;

1111 
	#GrNumImageBuf„rAŒoc
 101

	)

1114 
BYTE8
 
	mªqTy≥
;

1115 
BYTE8
 
	mhûígth
;

1116 
UINT16
 
	mÀngth
;

1117 
UINT32
 
	msize
;

1118 } 
	tnxImageBuf„rAŒocReq
;

1120 
	#GrNumImageBuf„rSíd
 102

	)

1123 
BYTE8
 
	mªqTy≥
;

1124 
BYTE8
 
	mhûígth
;

1125 
UINT16
 
	mÀngth
;

1126 
UINT32
 
	mbuf„r_id
;

1127 
UINT32
 
	msize
;

1128 } 
	tnxImageBuf„rSídReq
;

1130 
	#GrNumLﬂdImageFromBuf„r
 103

	)

1132 
BYTE8
 
	mªqTy≥
;

1133 
BYTE8
 
	mhûígth
;

1134 
UINT16
 
	mÀngth
;

1135 
UINT32
 
	mbuf„r
;

1136 
INT16
 
	mÊags
;

1137 
INT16
 
	m∑d
;

1138 } 
	tnxLﬂdImageFromBuf„rReq
;

1140 
	#GrNumDøwImageFromBuf„r
 104

	)

1142 
BYTE8
 
	mªqTy≥
;

1143 
BYTE8
 
	mhûígth
;

1144 
UINT16
 
	mÀngth
;

1145 
IDTYPE
 
	mdøwid
;

1146 
IDTYPE
 
	mgcid
;

1147 
INT16
 
	mx
;

1148 
INT16
 
	my
;

1149 
INT16
 
	mwidth
;

1150 
INT16
 
	mheight
;

1151 
UINT32
 
	mbuf„r
;

1152 
IDTYPE
 
	mÊags
;

1153 } 
	tnxDøwImageFromBuf„rReq
;

1155 
	#GrNumGëF⁄tLi°
 105

	)

1157 
BYTE8
 
	mªqTy≥
;

1158 
BYTE8
 
	mhûígth
;

1159 
UINT16
 
	mÀngth
;

1160 } 
	tnxGëF⁄tLi°Req
;

1162 
	#GrNumSëGCClùOrigö
 106

	)

1165 
BYTE8
 
	mªqTy≥
;

1166 
BYTE8
 
	mhûígth
;

1167 
UINT16
 
	mÀngth
;

1168 
IDTYPE
 
	mgcid
;

1169 
UINT32
 
	mxoff
;

1170 
UINT32
 
	myoff
;

1171 } 
	tnxSëGCClùOrigöReq
;

1173 
	#GrNumSëGCGøphicsExposuª
 107

	)

1176 
BYTE8
 
	mªqTy≥
;

1177 
BYTE8
 
	mhûígth
;

1178 
UINT16
 
	mÀngth
;

1179 
IDTYPE
 
	mgcid
;

1180 
UINT16
 
	mexposuª
;

1181 } 
	tnxSëGCGøphicsExposuªReq
;

1183 
	#GrNumQuîyPoöãr
 108

	)

1186 
BYTE8
 
	mªqTy≥
;

1187 
BYTE8
 
	mhûígth
;

1188 
UINT16
 
	mÀngth
;

1189 } 
	tnxQuîyPoöãrReq
;

1191 
	#GrNumSëGCLöeAâribuãs
 109

	)

1194 
BYTE8
 
	mªqTy≥
;

1195 
BYTE8
 
	mhûígth
;

1196 
UINT16
 
	mÀngth
;

1197 
IDTYPE
 
	mgcid
;

1198 
UINT16
 
	mlöe°yÀ
;

1199 } 
	tnxSëGCLöeAâribuãsReq
;

1201 
	#GrNumSëGCDash
 110

	)

1204 
BYTE8
 
	mªqTy≥
;

1205 
BYTE8
 
	mhûígth
;

1206 
UINT16
 
	mÀngth
;

1207 
IDTYPE
 
	mgcid
;

1208 
UINT16
 
	mcou¡
;

1209 } 
	tnxSëGCDashReq
;

1211 
	#GrNumSëGCFûlMode
 111

	)

1214 
BYTE8
 
	mªqTy≥
;

1215 
BYTE8
 
	mhûígth
;

1216 
UINT16
 
	mÀngth
;

1217 
IDTYPE
 
	mgcid
;

1218 
UINT16
 
	mfûlmode
;

1219 } 
	tnxSëGCFûlModeReq
;

1221 
	#GrNumSëGCStù∂e
 112

	)

1224 
BYTE8
 
	mªqTy≥
;

1225 
BYTE8
 
	mhûígth
;

1226 
UINT16
 
	mÀngth
;

1227 
IDTYPE
 
	mgcid
;

1228 
INT16
 
	mwidth
;

1229 
INT16
 
	mheight
;

1230 } 
	tnxSëGCStù∂eReq
;

1232 
	#GrNumSëGCTSOff£t
 113

	)

1235 
BYTE8
 
	mªqTy≥
;

1236 
BYTE8
 
	mhûígth
;

1237 
UINT16
 
	mÀngth
;

1238 
IDTYPE
 
	mgcid
;

1239 
INT16
 
	mxoff£t
;

1240 
INT16
 
	myoff£t
;

1241 } 
	tnxSëGCTSOff£tReq
;

1243 
	#GrNumSëGCTûe
 114

	)

1246 
BYTE8
 
	mªqTy≥
;

1247 
BYTE8
 
	mhûígth
;

1248 
UINT16
 
	mÀngth
;

1249 
IDTYPE
 
	mgcid
;

1250 
IDTYPE
 
	mpixm≠
;

1251 
INT16
 
	mwidth
;

1252 
INT16
 
	mheight
;

1253 } 
	tnxSëGCTûeReq
;

1255 
	#GrNumNewBôm≠Regi⁄
 115

	)

1258 
BYTE8
 
	mªqTy≥
;

1259 
BYTE8
 
	mhûígth
;

1260 
UINT16
 
	mÀngth
;

1261 
INT16
 
	mwidth
;

1262 
INT16
 
	mheight
;

1264 } 
	tnxNewBôm≠Regi⁄Req
;

1266 
	#GrNumSëWödowRegi⁄
 116

	)

1269 
BYTE8
 
	mªqTy≥
;

1270 
BYTE8
 
	mhûígth
;

1271 
UINT16
 
	mÀngth
;

1272 
IDTYPE
 
	mwid
;

1273 
IDTYPE
 
	mrid
;

1274 
UINT16
 
	mty≥
;

1275 } 
	tnxSëWödowRegi⁄Req
;

1277 
	#GrNumSëGCF‹egroundPixñVÆ
 117

	)

1280 
BYTE8
 
	mªqTy≥
;

1281 
BYTE8
 
	mhûígth
;

1282 
UINT16
 
	mÀngth
;

1283 
IDTYPE
 
	mgcid
;

1284 
UINT32
 
	mpixñvÆ
;

1285 } 
	tnxSëGCF‹egroundPixñVÆReq
;

1287 
	#GrNumSëGCBackgroundPixñVÆ
 118

	)

1290 
BYTE8
 
	mªqTy≥
;

1291 
BYTE8
 
	mhûígth
;

1292 
UINT16
 
	mÀngth
;

1293 
IDTYPE
 
	mgcid
;

1294 
UINT32
 
	mpixñvÆ
;

1295 } 
	tnxSëGCBackgroundPixñVÆReq
;

1297 
	#GrNumCª©eLogF⁄t
 119

	)

1299 
BYTE8
 
	mªqTy≥
;

1300 
BYTE8
 
	mhûígth
;

1301 
UINT16
 
	mÀngth
;

1302 
MWLOGFONT
 
	mlf
;

1303 } 
	tnxCª©eLogF⁄tReq
;

1305 
	#GrNumSåëchAªa
 120

	)

1307 
BYTE8
 
	mªqTy≥
;

1308 
BYTE8
 
	mhûígth
;

1309 
UINT16
 
	mÀngth
;

1310 
IDTYPE
 
	mdøwid
;

1311 
IDTYPE
 
	mgcid
;

1312 
INT16
 
	mdx1
;

1313 
INT16
 
	mdy1
;

1314 
INT16
 
	mdx2
;

1315 
INT16
 
	mdy2
;

1316 
IDTYPE
 
	m§cid
;

1317 
INT16
 
	msx1
;

1318 
INT16
 
	msy1
;

1319 
INT16
 
	msx2
;

1320 
INT16
 
	msy2
;

1321 
UINT32
 
	m›
;

1322 } 
	tnxSåëchAªaReq
;

1324 
	#GrNumGøbKey
 121

	)

1326 
BYTE8
 
	mªqTy≥
;

1327 
BYTE8
 
	mhûígth
;

1328 
UINT16
 
	mÀngth
;

1329 
IDTYPE
 
	mwid
;

1330 
INT16
 
	mty≥
;

1331 
UINT16
 
	mkey
;

1332 } 
	tnxGøbKeyReq
;

1334 
	#GrNumSëTønsf‹m
 122

	)

1336 
BYTE8
 
	mªqTy≥
;

1337 
BYTE8
 
	mhûígth
;

1338 
UINT16
 
	mÀngth
;

1339 
UINT32
 
	mmode
;

1340 
UINT32
 
	må™s_a
;

1341 
UINT32
 
	må™s_b
;

1342 
UINT32
 
	må™s_c
;

1343 
UINT32
 
	må™s_d
;

1344 
UINT32
 
	må™s_e
;

1345 
UINT32
 
	må™s_f
;

1346 
UINT32
 
	må™s_s
;

1347 } 
	tnxSëTønsf‹mReq
;

1349 
	#GrNumCª©eF⁄tFromBuf„r
 123

	)

1351 
BYTE8
 
	mªqTy≥
;

1352 
BYTE8
 
	mhûígth
;

1353 
UINT16
 
	mÀngth
;

1354 
UINT32
 
	mbuf„r_id
;

1355 
BYTE8
 
	mf‹m©
[16];

1356 
INT16
 
	mheight
;

1357 
UINT16
 
	m∑ddög
;

1358 } 
	tnxCª©eF⁄tFromBuf„rReq
;

1360 
	#GrNumC›yF⁄t
 124

	)

1362 
BYTE8
 
	mªqTy≥
;

1363 
BYTE8
 
	mhûígth
;

1364 
UINT16
 
	mÀngth
;

1365 
IDTYPE
 
	mf⁄tid
;

1366 
INT16
 
	mheight
;

1367 } 
	tnxC›yF⁄tReq
;

1369 
	#GrTŸÆNumCÆls
 125

	)

	@nanox/nxtransform.c

11 
	~<°dio.h
>

12 
	~<°rög.h
>

13 
	~"«no-X.h
"

15 
CÆcTønsf‹m©i⁄C€fficõ¡sBëãr
(
GR_CAL_DATA
 * 
ßm∂es
,

16 
GR_TRANSFORM
 * 
±c
);

19 
	$GrCÆcTønsf‹m
(
GR_CAL_DATA
 * 
d©a
, 
GR_TRANSFORM
 * 
å™s
)

21  
	`CÆcTønsf‹m©i⁄C€fficõ¡sBëãr
(
d©a
, 
å™s
);

22 
	}
}

26 
	$GrSaveTønsf‹mD©a
(
GR_TRANSFORM
 * 
å™s
, *
fûíame
)

28 
FILE
 *
out
 = 
	`f›í
(
fûíame
, "w");

29 i‡(!
out
)

32 
	`Ârötf
(
out
, "# Nano-XÅouchscreen data\n");

33 
	`Ârötf
(
out
, "# Generatedáutomatically, doÇotÉdit\n\n");

35 
	`Ârötf
(
out
, "%d %d %d %d %d %d %d\n",

36 
å™s
->
a
,Åøns->
b
,Åøns->
c
,

37 
å™s
->
d
,Åøns->
e
,Åøns->
f
,Åøns->
s
);

39 
	`Ârötf
(
out
, "\n# ---\n");

40 
	`f˛o£
(
out
);

43 
	}
}

46 
	$GrLﬂdTønsf‹mD©a
(*
fûíame
, 
GR_TRANSFORM
 * 
å™s
)

48 
ªt
 = 0;

49 
FILE
 *
ö
 = 0;

51 i‡(!
å™s
)

53 
	`mem£t
(
å™s
, '\0', (
GR_TRANSFORM
));

55 
ö
 = 
	`f›í
(
fûíame
, "r");

56 i‡(!
ö
)

59 !
	`„of
(
ö
Ë&& !
	`„º‹
(in)) {

60 
buf„r
[128];

61 i‡(!
	`fgës
(
buf„r
, (buf„rË- 1, 
ö
))

64 i‡(
buf„r
[0] == '#')

67 i‡(
	`ssˇnf
(
buf„r
, "%d %d %d %d %d %d %d",

68 &
å™s
->
a
, &å™s->
b
, &å™s->
c
,

69 &
å™s
->
d
, &å™s->
e
, &å™s->
f
, &å™s->
s
) == 7)

70 
exô_lﬂd
;

73 
ªt
 = -1;

74 
exô_lﬂd
:

76 
	`f˛o£
(
ö
);

77  
ªt
;

78 
	}
}

90 
	$CÆcTønsf‹m©i⁄C€fficõ¡sBëãr
(
GR_CAL_DATA
 * 
ßm∂es
,

91 
GR_TRANSFORM
 * 
±c
)

99 
i
, 
j
, 
r
, 
k
;

100 
ve˘‹
[3][2];

101 
m©rix
[3][3];

102 
p
, 
q
;

104 
ve˘‹
[0][0] = 0.0; vector[0][1] = 0.0;

105 
ve˘‹
[1][0] = 
ßm∂es
->
xªs
; vector[1][1] = 0.0;

106 
ve˘‹
[2][0] = 
ßm∂es
->
xªs
; ve˘‹[2][1] = sam∂es->
yªs
;

108 
m©rix
[0][0] = 
ßm∂es
->
möx
; m©rix[0][1] = sam∂es->
möy
; matrix[0][2] = 1.0;

109 
m©rix
[1][0] = 
ßm∂es
->
maxx
; m©rix[1][1] = sam∂es->
möy
; matrix[1][2] = 1.0;

110 
m©rix
[2][0] = 
ßm∂es
->
maxx
; m©rix[2][1] = sam∂es->
maxy
; matrix[2][2] = 1.0;

112 
i
 = 0; i < 3; i++) {

113 
p
 = 
m©rix
[
i
][i];

115 
j
 = 0; j < 3; j++) {

116 
m©rix
[
i
][
j
] = m©rix[i][j] / 
p
;

119 
j
 = 0; j < 2; j++) {

120 
ve˘‹
[
i
][
j
] = ve˘‹[i][j] / 
p
;

123 
r
 = 0;Ñ < 3;Ñ++) {

124 i‡(
r
 !
i
) {

125 
q
 = 
m©rix
[
r
][
i
];

127 
m©rix
[
r
][
i
] = 0.0;

129 
k
 = 
i
 + 1; k < 3; k++) {

130 
m©rix
[
r
][
k
] =

131 
m©rix
[
r
][
k
] -

132 (
q
 * 
m©rix
[
i
][
k
]);

135 
k
 = 0; k < 2; k++) {

136 
ve˘‹
[
r
][
k
] =

137 
ve˘‹
[
r
][
k
] -

138 (
q
 * 
ve˘‹
[
i
][
k
]);

144 
±c
->
s
 = 1 << 16;

145 
±c
->
a
 = 
ve˘‹
[0][0] *Ötc->
s
;

146 
±c
->
b
 = 
ve˘‹
[1][0] *Ötc->
s
;

147 
±c
->
c
 = 
ve˘‹
[2][0] *Ötc->
s
;

148 
±c
->
d
 = 
ve˘‹
[0][1] *Ötc->
s
;

149 
±c
->
e
 = 
ve˘‹
[1][1] *Ötc->
s
;

150 
±c
->
f
 = 
ve˘‹
[2][1] *Ötc->
s
;

153 
	}
}

	@nanox/nxutil.c

8 
	~<°dio.h
>

9 
	~<°dlib.h
>

10 
	#MWINCLUDECOLORS


	)

11 
	~"«no-X.h
"

12 
	~"devi˚.h
"

17 
GR_WINDOW_ID


18 
	$GrNewWödowEx
(
GR_WM_PROPS
 
¥›s
, 
GR_CHAR
 * 
tôÀ
, 
GR_WINDOW_ID
 
∑ª¡
,

19 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
width
, GR_SIZE 
height
,

20 
GR_COLOR
 
background
)

22 
GR_WINDOW_ID
 
wid
;

23 
GR_WM_PROPERTIES
 
wm¥›s
;

26 
wid
 = 
	`GrNewWödow
(
∑ª¡
, 
x
, 
y
, 
width
, 
height
, 0, 
background
, 
BLACK
);

27 i‡(
wid
) {

29 
wm¥›s
.
Êags
 = 
GR_WM_FLAGS_PROPS
 | 
GR_WM_FLAGS_TITLE
;

30 
wm¥›s
.
¥›s
 =Örops;

31 
wm¥›s
.
tôÀ
 =Åitle;

32 
	`GrSëWMPr›îtõs
(
wid
, &
wm¥›s
);

34  
wid
;

35 
	}
}

39 
	$GrDøwLöes
(
GR_DRAW_ID
 
w
, 
GR_GC_ID
 
gc
, 
GR_POINT
 * 
poöts
, 
GR_COUNT
 
cou¡
)

41 
GR_POINT
 
beg
, 
íd
;

43 i‡(
cou¡
 < 1)

45 i‡(
cou¡
 == 1) {

46 
	`GrPoöt
(
w
, 
gc
, 
poöts
->
x
,Öoöts->
y
);

50 
beg
 = *
poöts
++;

51 --
cou¡
 > 0) {

52 
íd
 = *
poöts
++;

53 
	`GrLöe
(
w
, 
gc
, 
beg
.
x
, beg.
y
, 
íd
.x,Énd.y);

54 
beg
 = 
íd
;

56 
	}
}

61 
GR_CURSOR_ID


62 
	$GrSëCurs‹
(
GR_WINDOW_ID
 
wid
, 
GR_SIZE
 
width
, GR_SIZE 
height
, 
GR_COORD
 
hŸx
,

63 
GR_COORD
 
hŸy
, 
GR_COLOR
 
f‹eground
, GR_COLOR 
background
,

64 
GR_BITMAP
 * 
fgbôm≠
, GR_BITMAP * 
bgbôm≠
)

66 
GR_CURSOR_ID
 
cid
;

68 
cid
 = 
	`GrNewCurs‹
(
width
, 
height
, 
hŸx
, 
hŸy
, 
f‹eground
,

69 
background
, 
fgbôm≠
, 
bgbôm≠
);

70 i‡(
cid
)

71 
	`GrSëWödowCurs‹
(
wid
, 
cid
);

72  
cid
;

73 
	}
}

76 
	gªvbyã
[256] = {

118 
GR_BITMAP
 *

119 
	$GrNewBôm≠FromD©a
(
GR_SIZE
 
width
, GR_SIZE 
height
, GR_SIZE 
bôs_width
,

120 
GR_SIZE
 
bôs_height
, *
bôs
, 
Êags
)

122 
x
, 
y
;

123 
xb
;

124 
bªv
 = 
Êags
 & 
GR_BMDATA_BYTEREVERSE
;

125 
bsw≠
 = 
Êags
 & 
GR_BMDATA_BYTESWAP
;

126 *
öbuf
 = 
bôs
;

127 *
p
;

128 
GR_BITMAP
 *
buf
;

134 
xb
 = (
width
 + 7) / 8;

135 
buf
 = (
GR_BITMAP
 *Ë
	`mÆloc
(((
xb
 + 1Ë& ~01Ë* 
height
);

136 i‡(!
buf
)

137  
NULL
;

140 
p
 = (*Ë
buf
;

142 
y
 = 0; y < 
height
; ++y) {

143 
x
 = 0; x < 
xb
;) {

147 i‡((
xb
 - 
x
) == 1) {

148 
c
 = *
öbuf
++;

149 *
p
++ = 
bªv
 ? 
ªvbyã
[
c
] : c;

150 
x
++;

152 i‡(
bsw≠
) {

154 
c
 = *
öbuf
++;

155 
p
[1] = 
bªv
 ? 
ªvbyã
[
c
] : c;

156 i‡(
x
 < 
xb
 - 1) {

157 
c
 = *
öbuf
++;

158 
p
[0] = 
bªv
 ? 
ªvbyã
[
c
] : c;

160 
p
[0] = 0;

163 
c
 = *
öbuf
++;

164 
p
[0] = 
bªv
 ? 
ªvbyã
[
c
] : c;

165 i‡(
x
 < 
xb
 - 1) {

166 
c
 = *
öbuf
++;

167 
p
[1] = 
bªv
 ? 
ªvbyã
[
c
] : c;

169 
p
[1] = 0;

172 
x
 += 2;

173 
p
 += 2;

176 
öbuf
 +(
bôs_width
 + 7Ë/ 8 - (
width
 + 7) / 8;

179 i‡(
xb
 & 1)

180 *
p
++ = 0;

182  
buf
;

183 
	}
}

188 
GR_WINDOW_ID


189 
	$GrNewPixm≠FromD©a
(
GR_SIZE
 
width
, GR_SIZE 
height
, 
GR_COLOR
 
f‹eground
,

190 
GR_COLOR
 
background
, *
bôs
, 
Êags
)

192 
GR_WINDOW_ID
 
pid
;

193 
GR_GC_ID
 
gc
;

194 
GR_BITMAP
 *
buf
;

196 
pid
 = 
	`GrNewPixm≠
(
width
, 
height
, 
NULL
);

197 i‡(
pid
) {

198 
gc
 = 
	`GrNewGC
();

199 
	`GrSëGCF‹eground
(
gc
, 
f‹eground
);

200 
	`GrSëGCBackground
(
gc
, 
background
);

202 
buf
 = 
	`GrNewBôm≠FromD©a
(
width
, 
height
, width, height,

203 
bôs
, 
Êags
);

204 i‡(
buf
) {

205 
	`GrBôm≠
(
pid
, 
gc
, 0, 0, 
width
, 
height
, 
buf
);

206 
	`‰ì
(
buf
);

208 
	`GrDe°royGC
(
gc
);

210  
pid
;

211 
	}
}

217 
GR_BITMAP
 *

218 
	$GrNewBôm≠FromPixm≠
(
GR_WINDOW_ID
 
pixm≠
, 
MWCOORD
 
x
, MWCOORD 
y
,

219 
GR_SIZE
 
width
, GR_SIZE 
height
)

221 
w
, 
h
;

222 
bwidth
, 
rowsize
;

223 
GR_PIXELVAL
 *
pixñ
, *
buf„r
;

224 
GR_BITMAP
 *
bôm≠
;

226 
buf„r
 = 
	`mÆloc
(
width
 * 
height
 * (
GR_PIXELVAL
));

227 i‡(!
buf„r
)

228  
NULL
;

230 
bwidth
 = (
width
 + 15) / 16;

231 
rowsize
 = (
GR_BITMAP
Ë* ((
bwidth
 + 1) & ~01);

232 
bôm≠
 = (
GR_BITMAP
 *Ë
	`ˇŒoc
(
rowsize
, 
height
);

233 i‡(!
bôm≠
) {

234 
	`‰ì
(
buf„r
);

235  
NULL
;

239 
	`GrRódAªa
(
pixm≠
, 
x
, 
y
, 
width
, 
height
, (*Ë
buf„r
);

241 
pixñ
 = 
buf„r
;

242 
h
 = 0; h < 
height
; h++) {

243 
w
 = 0; w < 
width
; w++) {

244 i‡(*
pixñ
++)

245 
bôm≠
[(
h
 * 
bwidth
Ë+ (
w
 >> 4)] |=

246 (1 << (15 - (
w
 % 16)));

249 
	`‰ì
(
buf„r
);

250  
bôm≠
;

251 
	}
}

256 
GR_REGION_ID


257 
	$GrNewRegi⁄FromPixm≠
(
GR_WINDOW_ID
 
§c
, 
MWCOORD
 
x
, MWCOORD 
y
, 
GR_SIZE
 
width
,

258 
GR_SIZE
 
height
)

260 
w
, 
h
;

261 
mx
, 
my
, 
mw
, 
mh
;

262 
GR_REGION_ID
 
r
;

263 
GR_PIXELVAL
 *
pixñ
;

264 
GR_PIXELVAL
 *
buf„r
;

265 
GR_WINDOW_INFO
 
wöfo
;

267 i‡(!
§c
)

271 
	`GrGëWödowInfo
(
§c
, &
wöfo
);

272 
buf„r
 = 
	`ALLOCA
(
wöfo
.
width
 * wöfo.
height
 * (
GR_PIXELVAL
));

273 i‡(!
buf„r
)

275 
	`GrRódAªa
(
§c
, 0, 0, 
wöfo
.
width
, wöfo.
height
, 
buf„r
);

278 
r
 = 
	`GrNewRegi⁄
();

279 
pixñ
 = 
buf„r
;

280 
mx
 = 
	`MWMIN
(0, 
x
);

281 
my
 = 
	`MWMIN
(0, 
y
);

282 
mw
 = 
	`MWMIN
(
wöfo
.
width
, width);

283 
mh
 = 
	`MWMIN
(
wöfo
.
height
, height);

284 
h
 = 
my
; h < 
mh
; h++) {

285 
°©e
 = 0;

286 
GR_RECT
 
loˇl
;

288 
w
 = 
mx
; w < 
mw
; w++) {

289 i‡(*
pixñ
++) {

290 i‡(
°©e
 != 0)

293 
loˇl
.
x
 = 
w
;

294 
loˇl
.
y
 = 
h
;

295 
loˇl
.
height
 = 1;

296 
°©e
 = 1;

298 i‡(
°©e
 == 0)

301 
loˇl
.
width
 = (
w
 -Üoˇl.
x
);

302 
	`GrUni⁄Re˘WôhRegi⁄
(
r
, &
loˇl
);

303 
°©e
 = 0;

307 i‡(
°©e
 != 0) {

308 
loˇl
.
width
 = ((
wöfo
.width - 1Ë-Üoˇl.
x
);

309 
	`GrUni⁄Re˘WôhRegi⁄
(
r
, &
loˇl
);

312 
	`FREEA
(
buf„r
);

314  
r
;

315 
	}
}

	@nanox/serv.h

1 #i‚def 
_SERV_H


2 
	#_SERV_H


	)

15 
	~"mwsy°em.h
"

18 #i‡
deföed
(
__ECOS
Ë&& !deföed(
_NO_SVR_MAPPING
)

25 
	#nxEº‹Såögs
 
SVR_nxEº‹Såögs


	)

26 
	#GrArcAngÀ
 
SVR_GrArcAngÀ


	)

27 
	#GrArc
 
SVR_GrArc


	)

28 
	#GrAªa
 
SVR_GrAªa


	)

29 
	#GrBñl
 
SVR_GrBñl


	)

30 
	#GrBôm≠
 
SVR_GrBôm≠


	)

31 
	#GrCheckNextEvít
 
SVR_GrCheckNextEvít


	)

32 
	#GrCÀ¨Aªa
 
SVR_GrCÀ¨Aªa


	)

33 
	#GrClo£
 
SVR_GrClo£


	)

34 
	#GrClo£Wödow
 
SVR_GrClo£Wödow


	)

35 
	#GrC›yAªa
 
SVR_GrC›yAªa


	)

36 
	#GrC›yGC
 
SVR_GrC›yGC


	)

37 
	#GrCª©eF⁄t
 
SVR_GrCª©eF⁄t


	)

38 
	#GrCª©eTimî
 
SVR_GrCª©eTimî


	)

39 
	#GrDñay
 
SVR_GrDñay


	)

40 
	#GrDe°royCurs‹
 
SVR_GrDe°royCurs‹


	)

41 
	#GrDe°royF⁄t
 
SVR_GrDe°royF⁄t


	)

42 
	#GrDe°royGC
 
SVR_GrDe°royGC


	)

43 
	#GrDe°royRegi⁄
 
SVR_GrDe°royRegi⁄


	)

44 
	#GrDe°royTimî
 
SVR_GrDe°royTimî


	)

45 
	#GrDe°royWödow
 
SVR_GrDe°royWödow


	)

46 
	#GrDøwImageBôs
 
SVR_GrDøwImageBôs


	)

47 
	#GrDøwImageFromBuf„r
 
SVR_GrDøwImageFromBuf„r


	)

48 
	#GrDøwImageFromFûe
 
SVR_GrDøwImageFromFûe


	)

49 
	#GrDøwImageToFô
 
SVR_GrDøwImageToFô


	)

50 
	#GrEŒù£
 
SVR_GrEŒù£


	)

51 
	#GrEm±yRegi⁄
 
SVR_GrEm±yRegi⁄


	)

52 
	#GrEquÆRegi⁄
 
SVR_GrEquÆRegi⁄


	)

53 
	#GrFûlEŒù£
 
SVR_GrFûlEŒù£


	)

54 
	#GrFûlPﬁy
 
SVR_GrFûlPﬁy


	)

55 
	#GrFûlRe˘
 
SVR_GrFûlRe˘


	)

56 
	#GrFödCﬁ‹
 
SVR_GrFödCﬁ‹


	)

57 
	#GrFªeF⁄tLi°
 
SVR_GrFªeF⁄tLi°


	)

58 
	#GrFªeImage
 
SVR_GrFªeImage


	)

59 
	#GrGëFocus
 
SVR_GrGëFocus


	)

60 
	#GrGëF⁄tInfo
 
SVR_GrGëF⁄tInfo


	)

61 
	#GrGëF⁄tLi°
 
SVR_GrGëF⁄tLi°


	)

62 
	#GrGëGCInfo
 
SVR_GrGëGCInfo


	)

63 
	#GrGëGCTextSize
 
SVR_GrGëGCTextSize


	)

64 
	#GrGëImageInfo
 
SVR_GrGëImageInfo


	)

65 
	#GrGëRegi⁄Box
 
SVR_GrGëRegi⁄Box


	)

66 
	#GrGëS¸ìnInfo
 
SVR_GrGëS¸ìnInfo


	)

67 
	#GrGëSñe˘i⁄Ow√r
 
SVR_GrGëSñe˘i⁄Ow√r


	)

68 
	#GrGëSysCﬁ‹
 
SVR_GrGëSysCﬁ‹


	)

69 
	#GrGëSy°emPÆëã
 
SVR_GrGëSy°emPÆëã


	)

70 
	#GrGëWödowInfo
 
SVR_GrGëWödowInfo


	)

71 
	#GrGëWMPr›îtõs
 
SVR_GrGëWMPr›îtõs


	)

72 
	#GrInje˘KeybﬂrdEvít
 
SVR_GrInje˘KeybﬂrdEvít


	)

73 
	#GrInje˘PoöãrEvít
 
SVR_GrInje˘PoöãrEvít


	)

74 
	#GrI¡î£˘Regi⁄
 
SVR_GrI¡î£˘Regi⁄


	)

75 
	#GrKûlWödow
 
SVR_GrKûlWödow


	)

76 
	#GrLöe
 
SVR_GrLöe


	)

77 
	#GrLﬂdImageFromFûe
 
SVR_GrLﬂdImageFromFûe


	)

78 
	#GrLowîWödow
 
SVR_GrLowîWödow


	)

79 
	#GrM≠Wödow
 
SVR_GrM≠Wödow


	)

80 
	#GrMoveCurs‹
 
SVR_GrMoveCurs‹


	)

81 
	#GrMoveWödow
 
SVR_GrMoveWödow


	)

82 
	#GrNewCurs‹
 
SVR_GrNewCurs‹


	)

83 
	#GrNewGC
 
SVR_GrNewGC


	)

84 
	#GrNewI≈utWödow
 
SVR_GrNewI≈utWödow


	)

85 
	#GrNewPixm≠
 
SVR_GrNewPixm≠


	)

86 
	#GrNewPﬁyg⁄Regi⁄
 
SVR_GrNewPﬁyg⁄Regi⁄


	)

87 
	#GrNewRegi⁄
 
SVR_GrNewRegi⁄


	)

88 
	#GrNewWödow
 
SVR_GrNewWödow


	)

89 
	#GrOff£tRegi⁄
 
SVR_GrOff£tRegi⁄


	)

90 
	#GrO≥n
 
SVR_GrO≥n


	)

91 
	#GrPìkEvít
 
SVR_GrPìkEvít


	)

92 
	#GrPoötInRegi⁄
 
SVR_GrPoötInRegi⁄


	)

93 
	#GrPoöts
 
SVR_GrPoöts


	)

94 
	#GrPoöt
 
SVR_GrPoöt


	)

95 
	#GrPﬁy
 
SVR_GrPﬁy


	)

96 
	#GrQuîyTªe
 
SVR_GrQuîyTªe


	)

97 
	#GrRai£Wödow
 
SVR_GrRai£Wödow


	)

98 
	#GrRódAªa
 
SVR_GrRódAªa


	)

99 
	#GrRe˘InRegi⁄
 
SVR_GrRe˘InRegi⁄


	)

100 
	#GrRe˘
 
SVR_GrRe˘


	)

101 
	#GrRï¨ítWödow
 
SVR_GrRï¨ítWödow


	)

102 
	#GrReque°Clõ¡D©a
 
SVR_GrReque°Clõ¡D©a


	)

103 
	#GrResizeWödow
 
SVR_GrResizeWödow


	)

104 
	#GrSñe˘Evíts
 
SVR_GrSñe˘Evíts


	)

105 
	#GrSídClõ¡D©a
 
SVR_GrSídClõ¡D©a


	)

106 
	#GrSëBackgroundPixm≠
 
SVR_GrSëBackgroundPixm≠


	)

107 
	#GrSëCurs‹
 
SVR_GrSëCurs‹


	)

108 
	#GrSëFocus
 
SVR_GrSëFocus


	)

109 
	#GrSëF⁄tAâr
 
SVR_GrSëF⁄tAâr


	)

110 
	#GrSëF⁄tRŸ©i⁄
 
SVR_GrSëF⁄tRŸ©i⁄


	)

111 
	#GrSëF⁄tSize
 
SVR_GrSëF⁄tSize


	)

112 
	#GrSëGCBackground
 
SVR_GrSëGCBackground


	)

113 
	#GrSëGCClùOrigö
 
SVR_GrSëGCClùOrigö


	)

114 
	#GrSëGCF⁄t
 
SVR_GrSëGCF⁄t


	)

115 
	#GrSëGCF‹eground
 
SVR_GrSëGCF‹eground


	)

116 
	#GrSëGCGøphicsExposuª
 
SVR_GrSëGCGøphicsExposuª


	)

117 
	#GrSëGCMode
 
SVR_GrSëGCMode


	)

118 
	#GrSëGCRegi⁄
 
SVR_GrSëGCRegi⁄


	)

119 
	#GrSëGCU£Background
 
SVR_GrSëGCU£Background


	)

120 
	#GrSëP‹åaôMode
 
SVR_GrSëP‹åaôMode


	)

121 
	#GrSëS¸ìnSavîTimeout
 
SVR_GrSëS¸ìnSavîTimeout


	)

122 
	#GrSëSñe˘i⁄Ow√r
 
SVR_GrSëSñe˘i⁄Ow√r


	)

123 
	#GrSëSy°emPÆëã
 
SVR_GrSëSy°emPÆëã


	)

124 
	#GrSëWödowCurs‹
 
SVR_GrSëWödowCurs‹


	)

125 
	#GrSëWMPr›îtõs
 
SVR_GrSëWMPr›îtõs


	)

126 
	#GrSubåa˘Regi⁄
 
SVR_GrSubåa˘Regi⁄


	)

127 
	#GrText
 
SVR_GrText


	)

128 
	#GrUni⁄Re˘WôhRegi⁄
 
SVR_GrUni⁄Re˘WôhRegi⁄


	)

129 
	#GrUni⁄Regi⁄
 
SVR_GrUni⁄Regi⁄


	)

130 
	#GrUnm≠Wödow
 
SVR_GrUnm≠Wödow


	)

131 
	#GrX‹Regi⁄
 
SVR_GrX‹Regi⁄


	)

134 
	~"«no-X.h
"

135 
	~"devi˚.h
"

143 #i‡
NONETWORK


146 
	~"lock.h
"

148 
LOCK_EXTERN
(
gr_£rvî_muãx
);

150 
	#SERVER_LOCK_DECLARE
 
	`LOCK_DECLARE
(
gr_£rvî_muãx
);

	)

151 
	#SERVER_LOCK_INIT
(Ë
	`LOCK_INIT
(&
gr_£rvî_muãx
)

	)

152 
	#SERVER_LOCK
(Ë
	`LOCK
(&
gr_£rvî_muãx
)

	)

153 
	#SERVER_UNLOCK
(Ë
	`UNLOCK
(&
gr_£rvî_muãx
)

	)

158 
	#SERVER_LOCK_DECLARE


	)

159 
	#SERVER_LOCK_INIT
(Ëdÿ{} 0Ë

	)

160 
	#SERVER_LOCK
(Ëdÿ{} 0Ë

	)

161 
	#SERVER_UNLOCK
(Ëdÿ{} 0Ë

	)

169 
	tGR_DRAW_TYPE
;

171 
	#GR_DRAW_TYPE_NONE
 0

	)

172 
	#GR_DRAW_TYPE_WINDOW
 1

	)

173 
	#GR_DRAW_TYPE_PIXMAP
 2

	)

175 
	#GR_MAX_MODE
 
MWMODE_MAX


	)

179 
gr_evít_li°
 
	tGR_EVENT_LIST
;

180 
	sgr_evít_li°
 {

181 
GR_EVENT_LIST
 *
	m√xt
;

182 
GR_EVENT
 
	mevít
;

188 
gr_˛õ¡
 
	tGR_CLIENT
;

189 
	sgr_˛õ¡
 {

190 
	mid
;

191 
GR_EVENT_LIST
 *
	mevíthód
;

192 
GR_EVENT_LIST
 *
	mevíâaû
;

193 
GR_CLIENT
 *
	m√xt
;

194 
GR_CLIENT
 *
	m¥ev
;

195 
	mwaôög_f‹_evít
;

196 *
	mshm_cmds
;

197 
	mshm_cmds_size
;

198 
	mshm_cmds_shmid
;

199 
	m¥o˚ssid
;

205 
gr_evít_˛õ¡
 
	tGR_EVENT_CLIENT
;

206 
	sgr_evít_˛õ¡
 {

207 
GR_EVENT_CLIENT
 *
	m√xt
;

208 
GR_EVENT_MASK
 
	mevítmask
;

209 
GR_CLIENT
 *
	m˛õ¡
;

215 
gr_gc
 
	tGR_GC
;

216 
	sgr_gc
 {

217 
GR_GC_ID
 
	mid
;

218 
	mmode
;

219 
GR_REGION_ID
 
	mªgi⁄id
;

220 
GR_COORD
 
	mxoff
;

221 
GR_COORD
 
	myoff
;

222 
GR_FONT_ID
 
	mf⁄tid
;

223 
GR_COLOR
 
	mf‹eground
;

224 
GR_COLOR
 
	mbackground
;

225 
GR_BOOL
 
	mfgi•ixñvÆ
;

226 
GR_BOOL
 
	mbgi•ixñvÆ
;

227 
GR_BOOL
 
	mu£background
;

228 
GR_BOOL
 
	mexposuª
;

230 
	mlöe°yÀ
;

231 
	mdashmask
;

232 
	mdashcou¡
;

234 
	mfûlmode
;

235 
GR_STIPPLE
 
	m°ù∂e
;

237 
PSD
 
	mpsd
;

238 
GR_SIZE
 
	mwidth
;

239 
GR_SIZE
 
	mheight
;

240 } 
	mtûe
;

241 
GR_POINT
 
	mts_off£t
;

243 
GR_BOOL
 
	mch™ged
;

244 
GR_CLIENT
 *
	mow√r
;

245 
GR_GC
 *
	m√xt
;

251 
gr_ªgi⁄
 
	tGR_REGION
;

252 
	sgr_ªgi⁄
 {

253 
MWCLIPREGION
 * 
	mrgn
;

254 
GR_REGION_ID
 
	mid
;

255 
GR_CLIENT
 * 
	mow√r
;

256 
GR_REGION
 * 
	m√xt
;

262 
gr_f⁄t
 
	tGR_FONT
;

263 
	sgr_f⁄t
 {

264 
PMWFONT
 
	mpf⁄t
;

265 
	mf⁄tsize
;

266 
GR_FONT_ID
 
	mid
;

267 
GR_CLIENT
 * 
	mow√r
;

268 
GR_FONT
 * 
	m√xt
;

274 
gr_curs‹
 
	tGR_CURSOR
;

275 
	sgr_curs‹
 {

276 
GR_CURSOR_ID
 
	mid
;

277 
GR_CLIENT
 *
	mow√r
;

278 
GR_CURSOR
 *
	m√xt
;

279 
MWCURSOR
 
	mcurs‹
;

286 
GR_WINDOW_ID
 
	mwid
;

287 
GR_CHAR
 *
	mty≥li°
;

288 } 
	tGR_SELECTIONOWNER
;

291 #i‡
MW_FEATURE_IMAGES


295 
gr_image
 
	tGR_IMAGE
;

296 
	sgr_image
 {

297 
GR_IMAGE_ID
 
	mid
;

298 
GR_CLIENT
 * 
	mow√r
;

299 
GR_IMAGE
 * 
	m√xt
;

303 #i‡
MW_FEATURE_TIMERS


307 
gr_timî
 
	tGR_TIMER
;

308 
	sgr_timî


310 
GR_TIMER_ID
 
	mid
;

311 
GR_CLIENT
 *
	mow√r
;

312 
GR_WINDOW_ID
 
	mwid
;

313 
MWTIMER
 *
	mtimî
;

314 
GR_TIMER
 *
	m√xt
;

325 
	sgr_døwabÀ
 {

326 
GR_COORD
 
	mx
;

327 
GR_COORD
 
	my
;

328 
GR_SIZE
 
	mwidth
;

329 
GR_SIZE
 
	mheight
;

330 
_mws¸ìndevi˚
 *
	mpsd
;

331 
GR_WINDOW_ID
 
	mid
;

332 } 
	tGR_DRAWABLE
;

338 
gr_pixm≠
 
	tGR_PIXMAP
;

339 
gr_wödow
 
	tGR_WINDOW
;

340 
	sgr_wödow
 {

341 
GR_COORD
 
	mx
;

342 
GR_COORD
 
	my
;

343 
GR_SIZE
 
	mwidth
;

344 
GR_SIZE
 
	mheight
;

345 
_mws¸ìndevi˚
 *
	mpsd
;

346 
GR_WINDOW_ID
 
	mid
;

349 
GR_WINDOW
 *
	m√xt
;

350 
GR_CLIENT
 *
	mow√r
;

351 
GR_WINDOW
 *
	m∑ª¡
;

352 
GR_WINDOW
 *
	mchûdªn
;

353 
GR_WINDOW
 *
	msiblögs
;

354 
GR_SIZE
 
	mb‹dîsize
;

355 
GR_COLOR
 
	mb‹dîcﬁ‹
;

356 
GR_COLOR
 
	mbackground
;

357 
GR_PIXMAP
 *
	mbgpixm≠
;

358 
	mbgpixm≠Êags
;

359 
GR_EVENT_MASK
 
	mn›r›mask
;

360 
GR_EVENT_CLIENT
 *
	mevít˛õ¡s
;

361 
GR_CURSOR_ID
 
	mcurs‹id
;

362 
GR_BOOL
 
	mm≠≥d
;

363 
GR_BOOL
 
	mªÆized
;

364 
GR_BOOL
 
	mouçut
;

365 
GR_WM_PROPS
 
	m¥›s
;

366 
GR_CHAR
 *
	mtôÀ
;

367 
MWCLIPREGION
 *
	m˛ùªgi⁄
;

374 
	sgr_pixm≠
 {

375 
GR_COORD
 
	mx
;

376 
GR_COORD
 
	my
;

377 
GR_SIZE
 
	mwidth
;

378 
GR_SIZE
 
	mheight
;

379 
_mws¸ìndevi˚
 *
	mpsd
;

380 
GR_WINDOW_ID
 
	mid
;

383 
GR_PIXMAP
 *
	m√xt
;

384 
GR_CLIENT
 *
	mow√r
;

390 
gr_gøbbed_key
 
	tGR_GRABBED_KEY
;

391 
	sgr_gøbbed_key
 {

392 
GR_GRABBED_KEY
 *
	m√xt
;

393 
GR_CLIENT
 *
	mow√r
;

394 
	mty≥
;

395 
GR_WINDOW_ID
 
	mwid
;

396 
GR_KEY
 
	mkey
;

410 
GsInôülize
();

411 
GsClo£
(
fd
);

412 
GsSñe˘
(
GR_TIMEOUT
 
timeout
);

413 
GsTîmö©e
();

414 
GR_TIMEOUT
 
GsGëTickCou¡
();

415 
GsRedøwS¸ìn
();

416 
GsEº‹
(
GR_ERROR
 
code
, 
GR_ID
 
id
);

417 
GR_BOOL
 
GsCheckMou£Evít
();

418 
GR_BOOL
 
GsCheckKeybﬂrdEvít
();

419 
GsRódKeybﬂrd
(
GR_CHAR
 *
buf
, *
modifõrs
);

420 
GsO≥nKeybﬂrd
();

421 
GsGëBuâ⁄Info
(*
buâ⁄s
);

422 
GsGëModifõrInfo
(*
modifõrs
);

423 
GsClo£Keybﬂrd
();

424 
GsExpo£Aªa
(
GR_WINDOW
 *
wp
, 
GR_COORD
 
roŸx
, GR_COORD 
roŸy
,

425 
GR_SIZE
 
width
, GR_SIZE 
height
, 
GR_WINDOW
 *
°›wp
);

426 
GsCheckCurs‹
();

427 
GsWpNŸifyA˘iv©e
(
GR_WINDOW
 *
wp
);

428 
GsWpSëFocus
(
GR_WINDOW
 *
wp
);

429 
GsWpDøwBackgroundPixm≠
(
GR_WINDOW
 *
wp
, 
GR_PIXMAP
 *
pm
,

430 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
width
, GR_SIZE 
height
);

431 
GsWpTûeBackgroundPixm≠
(
GR_WINDOW
 *
wp
, 
GR_PIXMAP
 *
pm
,

432 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
width
, GR_SIZE 
height
);

433 
GsWpCÀ¨Wödow
(
GR_WINDOW
 *
wp
, 
GR_COORD
 
x
, GR_COORD 
y
,

434 
GR_SIZE
 
width
, GR_SIZE 
height
, 
GR_BOOL
 
expo£Êag
);

435 
GsWpUƒólizeWödow
(
GR_WINDOW
 *
wp
, 
GR_BOOL
 
ãmp_unm≠
);

436 
GsWpRólizeWödow
(
GR_WINDOW
 *
wp
, 
GR_BOOL
 
ãmp
);

437 
GsWpDe°royWödow
(
GR_WINDOW
 *
wp
);

438 
GsSëP‹åaôMode
(
mode
);

439 
GsSëP‹åaôModeFromXY
(
GR_COORD
 
roŸx
, GR_COORD 
roŸy
);

440 
GsSëClùWödow
(
GR_WINDOW
 *
wp
, 
MWCLIPREGION
 *
u£ºegi⁄
,

441 
Êags
);

442 
GsH™dÀMou£Sètus
(
GR_COORD
 
√wx
, GR_COORD 
√wy
,

443 
√wbuâ⁄s
);

444 
GsFªePosôi⁄Evít
(
GR_CLIENT
 *
˛õ¡
, 
GR_WINDOW_ID
 
wid
,

445 
GR_WINDOW_ID
 
subwid
);

446 
GsDñivîBuâ⁄Evít
(
GR_EVENT_TYPE
 
ty≥
, 
buâ⁄s
,

447 
ch™gebuâ⁄s
, 
modifõrs
);

448 
GsDñivîMŸi⁄Evít
(
GR_EVENT_TYPE
 
ty≥
, 
buâ⁄s
,

449 
MWKEYMOD
 
modifõrs
);

450 
GsDñivîKeybﬂrdEvít
(
GR_WINDOW_ID
 
wid
, 
GR_EVENT_TYPE
 
ty≥
,

451 
GR_KEY
 
keyvÆue
, 
GR_KEYMOD
 
modifõrs
,

452 
GR_SCANCODE
 
sˇncode
);

453 
GsDñivîExposuªEvít
(
GR_WINDOW
 *
wp
, 
GR_COORD
 
x
, GR_COORD 
y
,

454 
GR_SIZE
 
width
, GR_SIZE 
height
);

455 
GsFªeExposuªEvít
(
GR_CLIENT
 *
˛õ¡
, 
GR_WINDOW_ID
 
wid
,

456 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
width
, GR_SIZE 
height
);

457 
GsDñivîUpd©eEvít
(
GR_WINDOW
 *
wp
, 
GR_UPDATE_TYPE
 
uty≥
,

458 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
width
, GR_SIZE 
height
);

459 
GsDñivîGíîÆEvít
(
GR_WINDOW
 *
wp
, 
GR_EVENT_TYPE
 
ty≥
,

460 
GR_WINDOW
 *
Ÿhî
);

461 
GsDñivîP‹åaôCh™gedEvít
();

462 
GsDñivîS¸ìnSavîEvít
(
GR_BOOL
 
a˘iv©e
);

463 
GsDñivîRawMou£Evít
(
x
, 
y
, 
buâ⁄s
, );

464 
GsDñivîClõ¡D©aReqEvít
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
rid
,

465 
GR_SERIALNO
 
£rül
, 
GR_MIMETYPE
 
mimëy≥
);

466 
GsDñivîClõ¡D©aEvít
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
rid
,

467 
GR_SERIALNO
 
£rül
, 
GR_LENGTH
 
Àn
, GR_LENGTH 
thi¶í
,

468 *
d©a
);

469 
GsDñivîSñe˘i⁄Ch™gedEvít
(
GR_WINDOW_ID
 
ﬁd_ow√r
,

470 
GR_WINDOW_ID
 
√w_ow√r
);

471 #i‡
MW_FEATURE_TIMERS


472 
GsDñivîTimîEvít
(
GR_CLIENT
 *
˛õ¡
, 
GR_WINDOW_ID
 
wid
,

473 
GR_TIMER_ID
 
tid
);

474 
GR_TIMER
 *
GsFödTimî
(
GR_TIMER_ID
 
timî_id
);

475 
GsTimîCB
(*
¨g
);

478 
GsCheckMou£Wödow
();

479 
GsCheckFocusWödow
();

480 
GR_DRAW_TYPE
 
GsPª∑ªDøwög
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gcid
,

481 
GR_DRAWABLE
 **
ªtdp
);

482 
GR_BOOL
 
GsCheckOvîœp
(
GR_WINDOW
 *
t›wp
, GR_WINDOW *
bŸwp
);

483 
GR_EVENT
 *
GsAŒocEvít
(
GR_CLIENT
 *
˛õ¡
);

484 
GR_WINDOW
 *
GsFödWödow
(
GR_WINDOW_ID
 
id
);

485 
GR_PIXMAP
 *
GsFödPixm≠
(
GR_WINDOW_ID
 
id
);

486 
GR_GC
 *
GsFödGC
(
GR_GC_ID
 
gcid
);

487 
GR_REGION
 *
GsFödRegi⁄
(
GR_REGION_ID
 
ªgi⁄id
);

488 
GR_FONT
 *
GsFödF⁄t
(
GR_FONT_ID
 
f⁄tid
);

489 
GR_CURSOR
 *
GsFödCurs‹
(
GR_CURSOR_ID
 
curs‹id
);

490 
GR_WINDOW
 *
GsPª∑ªWödow
(
GR_WINDOW_ID
 
wid
);

491 
GR_WINDOW
 *
GsFödVisibÀWödow
(
GR_COORD
 
x
, GR_COORD 
y
);

492 
GsDøwB‹dî
(
GR_WINDOW
 *
wp
);

493 
GsCuºítVt
();

494 
GsRedøwVt
(
t
);

495 
GsO≥nSockë
();

496 
GsClo£Sockë
();

497 
GsAc˚±Clõ¡
();

498 
GsAc˚±Clõ¡Fd
(
i
);

499 
GsPutCh
(
fd
, 
c
);

500 
GR_CLIENT
 *
GsFödClõ¡
(
fd
);

501 
GsDe°royClõ¡Resour˚s
(
GR_CLIENT
 * 
˛õ¡
);

502 
GsDr›Clõ¡
(
fd
);

503 
GsRód
(
fd
, *
buf
, 
c
);

504 
GsWrôe
(
fd
, *
buf
, 
c
);

505 
GsH™dÀClõ¡
(
fd
);

506 
GsRe£tS¸ìnSavî
();

507 
GsA˘iv©eS¸ìnSavî
(*
¨g
);

508 
GrGëNextEvítWøµîFöish
();

513 * 
curfunc
;

514 
GR_WINDOW_ID
 
ˇchewödowid
;

515 
GR_WINDOW_ID
 
ˇchïixm≠id
;

516 
GR_GC_ID
 
ˇchegcid
;

517 
GR_GC
 *
ˇcheg˝
;

518 
GR_GC
 *
li°g˝
;

519 
GR_REGION
 *
li°ªgi⁄p
;

520 
GR_FONT
 *
li°f⁄ç
;

521 #i‡
MW_FEATURE_IMAGES


522 
GR_IMAGE
 *
li°imagï
;

524 
GR_CURSOR
 *
li°curs‹p
;

525 
GR_CURSOR
 *
°dcurs‹
;

526 
GR_GC
 *
curg˝
;

527 
GR_WINDOW
 *
ˇchewp
;

528 
GR_PIXMAP
 *
ˇchïp
;

529 
GR_WINDOW
 *
li°wp
;

530 
GR_PIXMAP
 *
li°µ
;

531 
GR_WINDOW
 *
roŸwp
;

532 
GR_WINDOW
 *
˛ùwp
;

533 
GR_WINDOW
 *
focuswp
;

534 
GR_WINDOW
 *
mou£wp
;

535 
GR_WINDOW
 *
gøbbuâ⁄wp
;

536 
GR_CURSOR
 *
curcurs‹
;

537 
GR_COORD
 
curs‹x
;

538 
GR_COORD
 
curs‹y
;

539 
GR_BUTTON
 
curbuâ⁄s
;

540 
GR_CLIENT
 *
cur˛õ¡
;

541 *
cuºít_shm_cmds
;

542 
cuºít_shm_cmds_size
;

543 
GR_EVENT_LIST
 *
evít‰ì
;

544 
GR_BOOL
 
focusfixed
;

545 
GR_SCREEN_INFO
 
söfo
;

546 
PMWFONT
 
°df⁄t
;

547 
esˇ≥_quôs
;

548 
c⁄√˘cou¡
;

549 #i‡
MW_FEATURE_TIMERS


550 
GR_TIMEOUT
 
s¸ìnßvî_dñay
;

552 
GR_TIMER_ID
 
ˇche_timî_id
;

553 
GR_TIMER
 *
ˇche_timî
;

554 
GR_TIMER
 *
li°_timî
;

556 
GR_GRABBED_KEY
 *
li°_gøbbed_keys
;

558 
GR_BOOL
 
s¸ìnßvî_a˘ive
;

559 
GR_SELECTIONOWNER
 
£À˘i⁄_ow√r
;

560 
aut›‹åaô
;

561 
MWCOORD
 
nxªs
;

562 
MWCOORD
 
nyªs
;

569 
	#GR_NAMED_SOCKET
 "/tmp/.«no-X"

	)

570 
	#GR_NUM_SOCKET
 6600

	)

571 
	#GR_ELKS_SOCKET
 79

	)

573 #i‡
VTSWITCH


577 
MwInôVt
();

578 
MwCuºítVt
();

579 
MwCheckVtCh™ge
();

580 
MwRedøwVt
(
t
);

581 
MwExôVt
();

582 
mwvãrm
;

	@nanox/srvclip.c

1 
	~"devi˚.h
"

3 #i‡
DYNAMICREGIONS


4 
	~"§v˛ù2.c
"

6 
	~"§v˛ù1.c
"

	@nanox/srvclip1.c

7 
	~<°dio.h
>

8 
	~<°dlib.h
>

9 
	~"£rv.h
"

14 
	#GAPVAL
(
À·g≠
, 
rightg≠
, 
t›g≠
, 
bŸtomg≠
) \

15 (((
À·g≠
Ë<< 3Ë+ ((
rightg≠
Ë<< 2Ë+ ((
t›g≠
Ë<< 1Ë+ (
bŸtomg≠
))

	)

17 
GR_COUNT
 
GsS∂ôClùRe˘
(
MWCLIPRECT
 *
§¸e˘
, MWCLIPRECT *
de°ª˘
,

18 
GR_COORD
 
möx
, GR_COORD 
möy
, GR_COORD 
maxx
,

19 
GR_COORD
 
maxy
);

29 
	$GsSëClùWödow
(
GR_WINDOW
 *
wp
, 
MWCLIPREGION
 *
u£ºegi⁄
, 
Êags
)

31 
GR_WINDOW
 *
pwp
;

32 
GR_WINDOW
 *
sibwp
;

33 
MWCLIPRECT
 *
˛ù
;

34 
GR_COUNT
 
cou¡
;

35 
GR_COUNT
 
√wcou¡
;

36 
GR_COUNT
 
i
;

37 
GR_COORD
 
möx
;

38 
GR_COORD
 
möy
;

39 
GR_COORD
 
maxx
;

40 
GR_COORD
 
maxy
;

41 
GR_COORD
 
diff
;

42 
GR_SIZE
 
bs
;

43 
GR_BOOL
 
toom™y
;

44 
MWCLIPRECT
 
˛ùª˘s
[
MAX_CLIPRECTS
];

46 i‡(
wp
->
unm≠cou¡
 || !wp->
ouçut
 || (w∞=
˛ùwp
))

49 
˛ùwp
 = 
wp
;

55 
cou¡
 = 1;

56 
˛ù
 = 
˛ùª˘s
;

57 
˛ù
->
x
 = 
wp
->x;

58 
˛ù
->
y
 = 
wp
->y;

59 
˛ù
->
width
 = 
wp
->width;

60 
˛ù
->
height
 = 
wp
->height;

67 
pwp
 = 
wp
;

68 
pwp
 !
roŸwp
) {

69 
pwp
 =Öwp->
∑ª¡
;

71 
diff
 = 
pwp
->
x
 - 
˛ù
->x;

72 i‡(
diff
 > 0) {

73 
˛ù
->
width
 -
diff
;

74 
˛ù
->
x
 = 
pwp
->x;

77 
diff
 = (
pwp
->
x
 +Öwp->
width
Ë- (
˛ù
->x + clip->width);

78 i‡(
diff
 < 0)

79 
˛ù
->
width
 +
diff
;

81 
diff
 = 
pwp
->
y
 - 
˛ù
->y;

82 i‡(
diff
 > 0) {

83 
˛ù
->
height
 -
diff
;

84 
˛ù
->
y
 = 
pwp
->y;

87 
diff
 = (
pwp
->
y
 +Öwp->
height
Ë- (
˛ù
->y + clip->height);

88 i‡(
diff
 < 0)

89 
˛ù
->
height
 +
diff
;

96 i‡((
˛ù
->
width
 <0Ë|| (˛ù->
height
 <= 0)) {

97 
	`GdSëClùRe˘s
(
˛ùwp
->
psd
, 1, 
˛ùª˘s
);

108 
toom™y
 = 
GR_FALSE
;

109 
pwp
 = 
wp
;

111 
pwp
 !
NULL
) {

112 
wp
 = 
pwp
;

113 
pwp
 = 
wp
->
∑ª¡
;

115 if(!
pwp
) {

117 
sibwp
 = 
roŸwp
->
chûdªn
;

118 
wp
 = 
NULL
;

120 
sibwp
 = 
pwp
->
chûdªn
;

122 ; 
sibwp
 !
wp
; sibw∞sibwp->
siblögs
) {

123 i‡(
sibwp
->
unm≠cou¡
 || !sibwp->
ouçut
)

126 
bs
 = 
sibwp
->
b‹dîsize
;

127 
möx
 = 
sibwp
->
x
 - 
bs
;

128 
möy
 = 
sibwp
->
y
 - 
bs
;

129 
maxx
 = 
sibwp
->
x
 + sibwp->
width
 + 
bs
 - 1;

130 
maxy
 = 
sibwp
->
y
 + sibwp->
height
 + 
bs
 - 1;

132 
√wcou¡
 = 
cou¡
;

133 
i
 = 0; i < 
cou¡
; i++) {

134 i‡(
√wcou¡
 > 
MAX_CLIPRECTS
 - 3) {

135 
toom™y
 = 
GR_TRUE
;

138 
√wcou¡
 +
	`GsS∂ôClùRe˘
(&
˛ùª˘s
[
i
],

139 &
˛ùª˘s
[
√wcou¡
],

140 
möx
, 
möy
, 
maxx
, 
maxy
);

142 
cou¡
 = 
√wcou¡
;

144 if(
pwp
 =
roŸwp
)

148 i‡(
toom™y
) {

149 
	`GsEº‹
(
GR_ERROR_TOO_MUCH_CLIPPING
, 
wp
->
id
);

150 
˛ù
->
x
 = 0;

151 
˛ù
->
y
 = 0;

152 
˛ù
->
width
 = -1;

153 
˛ù
->
height
 = -1;

154 
cou¡
 = 1;

160 
	`GdSëClùRe˘s
(
˛ùwp
->
psd
, 
cou¡
, 
˛ùª˘s
);

161 
	}
}

175 
GR_COUNT


176 
	$GsS∂ôClùRe˘
(
MWCLIPRECT
 *
§¸e˘
, MWCLIPRECT *
de°ª˘
, 
GR_COORD
 
möx
,

177 
GR_COORD
 
möy
, GR_COORD 
maxx
, GR_COORD 
maxy
)

179 
GR_COORD
 
x
;

180 
GR_COORD
 
y
;

181 
GR_SIZE
 
width
;

182 
GR_SIZE
 
height
;

183 
GR_COORD
 
dx
;

184 
GR_COORD
 
dy
;

185 
g≠s
;

191 
x
 = 
§¸e˘
->x;

192 
y
 = 
§¸e˘
->y;

193 
width
 = 
§¸e˘
->width;

194 
height
 = 
§¸e˘
->height;

196 i‡((
möx
 > 
maxx
Ë|| (
möy
 > 
maxy
Ë|| (maxx < 
x
Ë|| (maxy < 
y
) ||

197 (
x
 + 
width
 <
möx
Ë|| (
y
 + 
height
 <
möy
))

206 
g≠s
 = 0;

207 i‡(
x
 < 
möx
)

208 
g≠s
 |
	`GAPVAL
(1, 0, 0, 0);

209 i‡(
x
 + 
width
 - 1 > 
maxx
)

210 
g≠s
 |
	`GAPVAL
(0, 1, 0, 0);

211 i‡(
y
 < 
möy
)

212 
g≠s
 |
	`GAPVAL
(0, 0, 1, 0);

213 i‡(
y
 + 
height
 - 1 > 
maxy
)

214 
g≠s
 |
	`GAPVAL
(0, 0, 0, 1);

216 
g≠s
) {

217 
	`GAPVAL
(0, 0, 0, 0):

218 
§¸e˘
->
x
 = 0;

219 
§¸e˘
->
y
 = 0;

220 
§¸e˘
->
width
 = 0;

221 
§¸e˘
->
height
 = 0;

224 
	`GAPVAL
(0, 0, 0, 1):

225 
dy
 = 
maxy
 - 
y
 + 1;

226 
§¸e˘
->
y
 +
dy
;

227 
§¸e˘
->
height
 -
dy
;

230 
	`GAPVAL
(0, 0, 1, 0):

231 
§¸e˘
->
height
 = 
möy
 - 
y
;

234 
	`GAPVAL
(0, 0, 1, 1):

235 
§¸e˘
->
height
 = 
möy
 - 
y
;

236 
de°ª˘
->
x
 = x;

237 
de°ª˘
->
width
 = width;

238 
de°ª˘
->
y
 = 
maxy
 + 1;

239 
de°ª˘
->
height
 = 
y
 + heighà- 
maxy
 - 1;

242 
	`GAPVAL
(0, 1, 0, 0):

243 
dx
 = 
maxx
 - 
x
 + 1;

244 
§¸e˘
->
x
 +
dx
;

245 
§¸e˘
->
width
 -
dx
;

248 
	`GAPVAL
(0, 1, 0, 1):

249 
dx
 = 
maxx
 - 
x
 + 1;

250 
§¸e˘
->
x
 +
dx
;

251 
§¸e˘
->
width
 -
dx
;

252 
§¸e˘
->
height
 = 
maxy
 - 
y
 + 1;

253 
de°ª˘
->
x
 = x;

254 
de°ª˘
->
width
 = width;

255 
de°ª˘
->
y
 = 
maxy
 + 1;

256 
de°ª˘
->
height
 = 
y
 + heighà- 
maxy
 - 1;

259 
	`GAPVAL
(0, 1, 1, 0):

260 
dx
 = 
maxx
 - 
x
 + 1;

261 
§¸e˘
->
height
 = 
möy
 - 
y
;

262 
de°ª˘
->
x
 = x + 
dx
;

263 
de°ª˘
->
width
 = width - 
dx
;

264 
de°ª˘
->
y
 = 
möy
;

265 
de°ª˘
->
height
 = 
y
 + heighà- 
möy
;

268 
	`GAPVAL
(0, 1, 1, 1):

269 
dx
 = 
maxx
 - 
x
 + 1;

270 
§¸e˘
->
height
 = 
möy
 - 
y
;

271 
de°ª˘
->
x
 = x;

272 
de°ª˘
->
width
 = width;

273 
de°ª˘
->
y
 = 
maxy
 + 1;

274 
de°ª˘
->
height
 = 
y
 + heighà- 
maxy
 - 1;

275 
de°ª˘
++;

276 
de°ª˘
->
x
 = x + 
dx
;

277 
de°ª˘
->
width
 = width - 
dx
;

278 
de°ª˘
->
y
 = 
möy
;

279 
de°ª˘
->
height
 = 
maxy
 - 
möy
 + 1;

282 
	`GAPVAL
(1, 0, 0, 0):

283 
§¸e˘
->
width
 = 
möx
 - 
x
;

286 
	`GAPVAL
(1, 0, 0, 1):

287 
§¸e˘
->
width
 = 
möx
 - 
x
;

288 
§¸e˘
->
height
 = 
maxy
 - 
y
 + 1;

289 
de°ª˘
->
x
 = x;

290 
de°ª˘
->
width
 = width;

291 
de°ª˘
->
y
 = 
maxy
 + 1;

292 
de°ª˘
->
height
 = 
y
 + heighà- 
maxy
 - 1;

295 
	`GAPVAL
(1, 0, 1, 0):

296 
§¸e˘
->
height
 = 
möy
 - 
y
;

297 
de°ª˘
->
x
 = x;

298 
de°ª˘
->
width
 = 
möx
 - 
x
;

299 
de°ª˘
->
y
 = 
möy
;

300 
de°ª˘
->
height
 = 
y
 + heighà- 
möy
;

303 
	`GAPVAL
(1, 0, 1, 1):

304 
§¸e˘
->
height
 = 
möy
 - 
y
;

305 
de°ª˘
->
x
 = x;

306 
de°ª˘
->
width
 = 
möx
 - 
x
;

307 
de°ª˘
->
y
 = 
möy
;

308 
de°ª˘
->
height
 = 
maxy
 - 
möy
 + 1;

309 
de°ª˘
++;

310 
de°ª˘
->
x
 = x;

311 
de°ª˘
->
width
 = width;

312 
de°ª˘
->
y
 = 
maxy
 + 1;

313 
de°ª˘
->
height
 = 
y
 + heighà- 
maxy
 - 1;

316 
	`GAPVAL
(1, 1, 0, 0):

317 
de°ª˘
->
x
 = 
maxx
 + 1;

318 
de°ª˘
->
width
 = 
x
 + width - 
maxx
 - 1;

319 
de°ª˘
->
y
 = y;

320 
de°ª˘
->
height
 = height;

321 
§¸e˘
->
width
 = 
möx
 - 
x
;

324 
	`GAPVAL
(1, 1, 0, 1):

325 
dy
 = 
maxy
 - 
y
 + 1;

326 
§¸e˘
->
y
 +
dy
;

327 
§¸e˘
->
height
 -
dy
;

328 
de°ª˘
->
x
 = x;

329 
de°ª˘
->
width
 = 
möx
 - 
x
;

330 
de°ª˘
->
y
 = y;

331 
de°ª˘
->
height
 = 
dy
;

332 
de°ª˘
++;

333 
de°ª˘
->
x
 = 
maxx
 + 1;

334 
de°ª˘
->
width
 = 
x
 + width - 
maxx
 - 1;

335 
de°ª˘
->
y
 = y;

336 
de°ª˘
->
height
 = 
dy
;

339 
	`GAPVAL
(1, 1, 1, 0):

340 
§¸e˘
->
height
 = 
möy
 - 
y
;

341 
de°ª˘
->
x
 = x;

342 
de°ª˘
->
width
 = 
möx
 - 
x
;

343 
de°ª˘
->
y
 = 
möy
;

344 
de°ª˘
->
height
 = 
y
 + heighà- 
möy
;

345 
de°ª˘
++;

346 
de°ª˘
->
x
 = 
maxx
 + 1;

347 
de°ª˘
->
width
 = 
x
 + width - 
maxx
 - 1;

348 
de°ª˘
->
y
 = 
möy
;

349 
de°ª˘
->
height
 = 
y
 + heighà- 
möy
;

352 
	`GAPVAL
(1, 1, 1, 1):

353 
§¸e˘
->
height
 = 
möy
 - 
y
;

354 
de°ª˘
->
x
 = x;

355 
de°ª˘
->
width
 = 
möx
 - 
x
;

356 
de°ª˘
->
y
 = 
möy
;

357 
de°ª˘
->
height
 = 
maxy
 - 
möy
 + 1;

358 
de°ª˘
++;

359 
de°ª˘
->
x
 = 
maxx
 + 1;

360 
de°ª˘
->
width
 = 
x
 + width - 
maxx
 - 1;

361 
de°ª˘
->
y
 = 
möy
;

362 
de°ª˘
->
height
 = 
maxy
 - 
möy
 + 1;

363 
de°ª˘
++;

364 
de°ª˘
->
x
 = x;

365 
de°ª˘
->
width
 = width;

366 
de°ª˘
->
y
 = 
maxy
 + 1;

367 
de°ª˘
->
height
 = 
y
 + heighà- 
maxy
 - 1;

371 
	}
}

	@nanox/srvclip2.c

9 
	~<°dio.h
>

10 
	~<°dlib.h
>

11 
	~"£rv.h
"

22 
	$GsSëClùWödow
(
GR_WINDOW
 *
wp
, 
MWCLIPREGION
 *
u£ºegi⁄
, 
Êags
)

24 
GR_WINDOW
 *
‹gwp
;

25 
GR_WINDOW
 *
pwp
;

26 
GR_WINDOW
 *
sibwp
;

27 
GR_COORD
 
möx
;

28 
GR_COORD
 
möy
;

29 
GR_COORD
 
maxx
;

30 
GR_COORD
 
maxy
;

31 
GR_COORD
 
diff
;

32 
GR_SIZE
 
bs
;

33 
GR_COORD
 
x
, 
y
, 
width
, 
height
;

34 
MWCLIPREGION
 *
vis
, *
r
;

36 i‡(!
wp
->
ªÆized
 || !wp->
ouçut
)

39 
˛ùwp
 = 
wp
;

45 
x
 = 
wp
->x;

46 
y
 = 
wp
->y;

47 
width
 = 
wp
->width;

48 
height
 = 
wp
->height;

55 
pwp
 = 
wp
;

56 
pwp
 !
roŸwp
) {

57 
pwp
 =Öwp->
∑ª¡
;

59 
diff
 = 
pwp
->
x
 - x;

60 i‡(
diff
 > 0) {

61 
width
 -
diff
;

62 
x
 = 
pwp
->x;

65 
diff
 = (
pwp
->
x
 +Öwp->
width
) - (x + width);

66 i‡(
diff
 < 0)

67 
width
 +
diff
;

69 
diff
 = 
pwp
->
y
 - y;

70 i‡(
diff
 > 0) {

71 
height
 -
diff
;

72 
y
 = 
pwp
->y;

75 
diff
 = (
pwp
->
y
 +Öwp->
height
) - (y + height);

76 i‡(
diff
 < 0)

77 
height
 +
diff
;

84 i‡(
width
 <0 || 
height
 <= 0) {

85 
	`GdSëClùRegi⁄
(
˛ùwp
->
psd
, 
NULL
);

93 
vis
 = 
	`GdAŒocRe˘Regi⁄
(
x
, 
y
, x+
width
, y+
height
);

94 i‡(
wp
->
˛ùªgi⁄
) {

95 
	`GdOff£tRegi⁄
(
wp
->
˛ùªgi⁄
, wp->
x
, wp->
y
);

96 
	`GdI¡î£˘Regi⁄
(
vis
, vis, 
wp
->
˛ùªgi⁄
);

97 
	`GdOff£tRegi⁄
(
wp
->
˛ùªgi⁄
, -wp->
x
, -wp->
y
);

103 
r
 = 
	`GdAŒocRegi⁄
();

112 
‹gwp
 = 
wp
;

113 
pwp
 = 
wp
;

114 
pwp
 !
NULL
) {

115 
wp
 = 
pwp
;

116 
pwp
 = 
wp
->
∑ª¡
;

118 if(!
pwp
) {

120 i‡(!(
Êags
 & 
GR_MODE_EXCLUDECHILDREN
))

122 
sibwp
 = 
roŸwp
->
chûdªn
;

123 
sibwp
 = 
NULL
;

124 
wp
 = 
NULL
;

126 
sibwp
 = 
pwp
->
chûdªn
;

129 ; 
sibwp
 !
wp
; sibw∞sibwp->
siblögs
) {

130 i‡(!
sibwp
->
ªÆized
 || !sibwp->
ouçut
)

133 
bs
 = 
sibwp
->
b‹dîsize
;

134 
möx
 = 
sibwp
->
x
 - 
bs
;

135 
möy
 = 
sibwp
->
y
 - 
bs
;

136 
maxx
 = 
sibwp
->
x
 + sibwp->
width
 + 
bs
;

137 
maxy
 = 
sibwp
->
y
 + sibwp->
height
 + 
bs
;

139 
	`GdSëRe˘Regi⁄
(
r
, 
möx
, 
möy
, 
maxx
, 
maxy
);

140 
	`GdSubåa˘Regi⁄
(
vis
, vis, 
r
);

142 i‡(
sibwp
->
˛ùªgi⁄
) {

144 
	`GdOff£tRegi⁄
(
sibwp
->
˛ùªgi⁄
,

145 
sibwp
->
x
, sibwp->
y
);

146 
	`GdSubåa˘Regi⁄
(
vis
, vis, 
sibwp
->
˛ùªgi⁄
);

147 
	`GdOff£tRegi⁄
(
sibwp
->
˛ùªgi⁄
,

148 -
sibwp
->
x
, -sibwp->
y
);

153 i‡(
pwp
 =
roŸwp
)

157 
wp
 = 
‹gwp
;

162 if(
wp
 !
roŸwp
 && !(
Êags
 & 
GR_MODE_EXCLUDECHILDREN
)) {

163 
sibwp
=
wp
->
chûdªn
; sibwp; sibw∞sibwp->
siblögs
) {

164 i‡(!
sibwp
->
ªÆized
 || !sibwp->
ouçut
)

167 
bs
 = 
sibwp
->
b‹dîsize
;

168 
möx
 = 
sibwp
->
x
 - 
bs
;

169 
möy
 = 
sibwp
->
y
 - 
bs
;

170 
maxx
 = 
sibwp
->
x
 + sibwp->
width
 + 
bs
;

171 
maxy
 = 
sibwp
->
y
 + sibwp->
height
 + 
bs
;

173 
	`GdSëRe˘Regi⁄
(
r
, 
möx
, 
möy
, 
maxx
, 
maxy
);

174 
	`GdSubåa˘Regi⁄
(
vis
, vis, 
r
);

176 i‡(
wp
->
˛ùªgi⁄
) {

178 
	`GdOff£tRegi⁄
(
sibwp
->
˛ùªgi⁄
,

179 
sibwp
->
x
, sibwp->
y
);

180 
	`GdSubåa˘Regi⁄
(
vis
, vis, 
sibwp
->
˛ùªgi⁄
);

181 
	`GdOff£tRegi⁄
(
sibwp
->
˛ùªgi⁄
,

182 -
sibwp
->
x
, -sibwp->
y
);

190 i‡(
u£ºegi⁄
) {

192 
	`GdOff£tRegi⁄
(
u£ºegi⁄
, 
wp
->
x
, wp->
y
);

193 
	`GdI¡î£˘Regi⁄
(
vis
, vis, 
u£ºegi⁄
);

194 
	`GdOff£tRegi⁄
(
u£ºegi⁄
, -
wp
->
x
, -wp->
y
);

200 
	`GdSëClùRegi⁄
(
˛ùwp
->
psd
, 
vis
);

205 
	`GdDe°royRegi⁄
(
r
);

206 
	}
}

	@nanox/srvevent.c

9 
	~<°dio.h
>

10 
	~<°dlib.h
>

11 
	~<°rög.h
>

12 
	~"£rv.h
"

15 *
	gnxEº‹Såögs
[] = {

16 
GR_ERROR_STRINGS


19 
MOUSEDEVICE
 
mou£dev
;

21 #i‡
NONETWORK


28 
GR_FNCALLBACKEVENT
 
	gEº‹Func
 = 
GrDeÁu…Eº‹H™dÀr
;

35 
	$GrDeÁu…Eº‹H™dÀr
(
GR_EVENT
 *
ï
)

37 i‡(
ï
->
ty≥
 =
GR_EVENT_TYPE_ERROR
) {

38 
	`EPRINTF
("nx˛õ¡: Eº‹ (%sË", 
ï
->
îr‹
.
«me
);

39 
	`EPRINTF
(
nxEº‹Såögs
[
ï
->
îr‹
.
code
],Ép->îr‹.
id
);

40 
	`GrClo£
();

41 
	`exô
(1);

43 
	}
}

51 
GR_FNCALLBACKEVENT


52 
	$GrSëEº‹H™dÀr
(
GR_FNCALLBACKEVENT
 
‚cb
)

54 
GR_FNCALLBACKEVENT
 
‹ig
;

56 
	`SERVER_LOCK
();

58 
‹ig
 = 
Eº‹Func
;

59 
Eº‹Func
 = 
‚cb
;

61 
	`SERVER_UNLOCK
();

63  
‹ig
;

64 
	}
}

76 
	$GsEº‹
(
GR_ERROR
 
code
, 
GR_ID
 
id
)

78 
GR_EVENT_ERROR
 *
ï
;

80 
	`EPRINTF
("nano-X: GsError ");

81 if(
curfunc
)

82 
	`EPRINTF
("(%sË", 
curfunc
);

83 
	`EPRINTF
(
nxEº‹Såögs
[
code
], 
id
);

86 i‡(!
cur˛õ¡
)

93 i‡(
code
 =
GR_ERROR_MALLOC_FAILED
)

97 
ï
 = (
GR_EVENT_ERROR
 *)
	`GsAŒocEvít
(
cur˛õ¡
);

98 
ï
->
ty≥
 = 
GR_EVENT_TYPE_ERROR
;

99 
ï
->
«me
[0] = 0;

100 if(
curfunc
) {

101 
	`°∫˝y
(
ï
->
«me
, 
curfunc
, (
GR_FUNC_NAME
));

102 
ï
->
«me
[(
GR_FUNC_NAME
)-1] = '\0';

104 
ï
->
code
 = code;

105 
ï
->
id
 = id;

106 
	}
}

114 
GR_EVENT
 *
	$GsAŒocEvít
(
GR_CLIENT
 *
˛õ¡
)

116 
GR_EVENT_LIST
 *
ñp
;

117 
GR_CLIENT
 *
ﬁdcur˛õ¡
;

123 
ñp
 = 
evít‰ì
;

124 i‡(
ñp
)

125 
evít‰ì
 = 
ñp
->
√xt
;

127 
ñp
 = (
GR_EVENT_LIST
 *Ë
	`mÆloc
((GR_EVENT_LIST));

128 i‡(
ñp
 =
NULL
) {

129 
ﬁdcur˛õ¡
 = 
cur˛õ¡
;

130 
cur˛õ¡
 = 
˛õ¡
;

131 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 0);

132 
cur˛õ¡
 = 
ﬁdcur˛õ¡
;

133  
NULL
;

140 i‡(
˛õ¡
->
evíthód
)

141 i‡(!
˛õ¡
->
evíâaû
)

142 
˛õ¡
->
evíâaû
 = 
ñp
;

144 
˛õ¡
->
evíâaû
->
√xt
 = 
ñp
;

146 
˛õ¡
->
evíthód
 = 
ñp
;

148 
˛õ¡
->
evíâaû
 = 
ñp
;

149 
ñp
->
√xt
 = 
NULL
;

150 
ñp
->
evít
.
ty≥
 = 
GR_EVENT_TYPE_NONE
;

152  &
ñp
->
evít
;

153 
	}
}

160 
GR_BOOL
 
	$GsCheckMou£Evít
()

162 
GR_COORD
 
roŸx
;

163 
GR_COORD
 
roŸy
;

164 
√wbuâ⁄s
;

165 
mou£°©us
;

168 
mou£°©us
 = 
	`GdRódMou£
(&
roŸx
, &
roŸy
, &
√wbuâ⁄s
);

169 if(
mou£°©us
 < 0) {

170 
	`GsEº‹
(
GR_ERROR_MOUSE_ERROR
, 0);

171  
FALSE
;

172 } if(
mou£°©us
) {

173 
	`GsH™dÀMou£Sètus
(
roŸx
, 
roŸy
, 
√wbuâ⁄s
);

176 i‡(
aut›‹åaô
)

177 
	`GsSëP‹åaôModeFromXY
(
roŸx
, 
roŸy
);

178  
TRUE
;

180  
FALSE
;

181 
	}
}

188 
GR_BOOL
 
	$GsCheckKeybﬂrdEvít
()

190 
MWKEY
 
mwkey
;

191 
MWKEYMOD
 
modifõrs
;

192 
MWSCANCODE
 
sˇncode
;

193 
key°©us
;

196 
key°©us
 = 
	`GdRódKeybﬂrd
(&
mwkey
, &
modifõrs
, &
sˇncode
);

198 if(
key°©us
 < 0) {

199 if(
key°©us
 == -2)

200 
	`GsTîmö©e
();

201 
	`GsEº‹
(
GR_ERROR_KEYBOARD_ERROR
, 0);

202  
FALSE
;

203 } if(
key°©us
) {

204 
mwkey
) {

205 
MWKEY_QUIT
:

206 
	`GsTîmö©e
();

208 
MWKEY_REDRAW
:

209 
	`GsRedøwS¸ìn
();

211 
MWKEY_PRINT
:

212 i‡(
key°©us
 == 1)

213 
	`GdC≠tuªS¸ìn
("screen.bmp");

217 
	`GsDñivîKeybﬂrdEvít
(0,

218 (
key°©us
==1?

219 
GR_EVENT_TYPE_KEY_DOWN
: 
GR_EVENT_TYPE_KEY_UP
),

220 
mwkey
, 
modifõrs
, 
sˇncode
);

221  
TRUE
;

223  
FALSE
;

224 
	}
}

231 
	$GsH™dÀMou£Sètus
(
GR_COORD
 
√wx
, GR_COORD 
√wy
, 
√wbuâ⁄s
)

233 
ch™gebuâ⁄s
;

234 
MWKEYMOD
 
modifõrs
;

236 
	`GdGëModifõrInfo
(
NULL
, &
modifõrs
);

239 i‡(
mou£dev
.
Êags
 & 
MOUSE_RAW
) {

240 
	`GsDñivîRawMou£Evít
(
√wx
, 
√wy
, 
√wbuâ⁄s
, 
modifõrs
);

251 i‡((
√wx
 !
curs‹x
Ë|| (
√wy
 !
curs‹y
)) {

252 
	`GsRe£tS¸ìnSavî
();

253 
	`GrMoveCurs‹
(
√wx
, 
√wy
);

255 
	`GsDñivîMŸi⁄Evít
(
GR_EVENT_TYPE_MOUSE_MOTION
,

256 
√wbuâ⁄s
, 
modifõrs
);

257 
	`GsDñivîMŸi⁄Evít
(
GR_EVENT_TYPE_MOUSE_POSITION
,

258 
√wbuâ⁄s
, 
modifõrs
);

264 
ch™gebuâ⁄s
 = (
curbuâ⁄s
 & ~
√wbuâ⁄s
);

265 i‡(
ch™gebuâ⁄s
) {

267 
	`GsRe£tS¸ìnSavî
();

268 
	`GsDñivîBuâ⁄Evít
(
GR_EVENT_TYPE_BUTTON_UP
,

269 
√wbuâ⁄s
, 
ch™gebuâ⁄s
, 
modifõrs
);

276 
ch™gebuâ⁄s
 = (~
curbuâ⁄s
 & 
√wbuâ⁄s
);

277 i‡(
ch™gebuâ⁄s
) {

278 i‡((
√wbuâ⁄s
&(
GR_BUTTON_L
|
GR_BUTTON_R
)) == (GR_BUTTON_L|GR_BUTTON_R))

279 
	`GsTîmö©e
();

280 
	`GsRe£tS¸ìnSavî
();

281 
	`GsDñivîBuâ⁄Evít
(
GR_EVENT_TYPE_BUTTON_DOWN
,

282 
√wbuâ⁄s
, 
ch™gebuâ⁄s
, 
modifõrs
);

285 
curbuâ⁄s
 = 
√wbuâ⁄s
;

286 
	}
}

303 
	$GsDñivîBuâ⁄Evít
(
GR_EVENT_TYPE
 
ty≥
, 
buâ⁄s
, 
ch™gebuâ⁄s
,

304 
modifõrs
)

306 
GR_EVENT_BUTTON
 *
ï
;

307 
GR_WINDOW
 *
wp
;

308 
GR_EVENT_CLIENT
 *
e˝
;

309 
GR_CLIENT
 *
˛õ¡
;

310 
GR_WINDOW_ID
 
subwid
;

311 
GR_EVENT_MASK
 
evítmask
;

312 
GR_EVENT_MASK
 
ãmpmask
;

314 
evítmask
 = 
	`GR_EVENTMASK
(
ty≥
);

315 i‡(
evítmask
 == 0)

324 
wp
 = 
mou£wp
;

325 
subwid
 = 
wp
->
id
;

327 i‡(
gøbbuâ⁄wp
) {

329 (
wp
 !
roŸwp
Ë&& (w∞!
gøbbuâ⁄wp
))

330 
wp
 = wp->
∑ª¡
;

331 i‡(
wp
 !
gøbbuâ⁄wp
)

332 
subwid
 = 
gøbbuâ⁄wp
->
id
;

334 
wp
 = 
gøbbuâ⁄wp
;

338 
e˝
 = 
wp
->
evít˛õ¡s
;É˝;É˝ =É˝->
√xt
) {

339 i‡((
e˝
->
evítmask
 &Éventmask) == 0)

342 
˛õ¡
 = 
e˝
->client;

350 i‡((
ty≥
 =
GR_EVENT_TYPE_BUTTON_DOWN
)

351 && (
gøbbuâ⁄wp
 =
NULL
))

353 
ãmpmask
 = 
GR_EVENT_MASK_BUTTON_UP
;

354 i‡(
e˝
->
evítmask
 & 
ãmpmask
) {

355 
	`DPRINTF
("«no-X: im∂icô gøb o¿wödow %d\n", 
wp
->
id
);

356 
gøbbuâ⁄wp
 = 
wp
;

360 
ï
 = (
GR_EVENT_BUTTON
 *Ë
	`GsAŒocEvít
(
˛õ¡
);

361 i‡(
ï
 =
NULL
)

364 
ï
->
ty≥
 =Åype;

365 
ï
->
wid
 = 
wp
->
id
;

366 
ï
->
subwid
 = subwid;

367 
ï
->
roŸx
 = 
curs‹x
;

368 
ï
->
roŸy
 = 
curs‹y
;

369 
ï
->
x
 = 
curs‹x
 - 
wp
->x;

370 
ï
->
y
 = 
curs‹y
 - 
wp
->y;

371 
ï
->
buâ⁄s
 = buttons;

372 
ï
->
ch™gebuâ⁄s
 = changebuttons;

373 
ï
->
modifõrs
 = modifiers;

374 
ï
->
time
 = 
	`GsGëTickCou¡
();

382 i‡(
gøbbuâ⁄wp
) {

383 i‡(
buâ⁄s
 == 0) {

384 
	`DPRINTF
("«no-X: im∂icô ungøb o¿wödow %d\n", 
gøbbuâ⁄wp
->
id
);

385 
gøbbuâ⁄wp
 = 
NULL
;

386 
	`GrMoveCurs‹
(
curs‹x
, 
curs‹y
);

391 i‡((
wp
 =
roŸwp
Ë|| (wp->
n›r›mask
 & 
evítmask
))

394 
wp
 = wp->
∑ª¡
;

396 
	}
}

412 
	$GsDñivîMŸi⁄Evít
(
GR_EVENT_TYPE
 
ty≥
, 
buâ⁄s
, 
MWKEYMOD
 
modifõrs
)

414 
GR_EVENT_MOUSE
 *
ï
;

415 
GR_WINDOW
 *
wp
;

416 
GR_EVENT_CLIENT
 *
e˝
;

417 
GR_CLIENT
 *
˛õ¡
;

418 
GR_WINDOW_ID
 
subwid
;

419 
GR_EVENT_MASK
 
evítmask
;

421 
evítmask
 = 
	`GR_EVENTMASK
(
ty≥
);

422 i‡(
evítmask
 == 0)

425 
wp
 = 
mou£wp
;

426 
subwid
 = 
wp
->
id
;

428 i‡(
gøbbuâ⁄wp
) {

430 (
wp
 !
roŸwp
Ë&& (w∞!
gøbbuâ⁄wp
))

431 
wp
 = wp->
∑ª¡
;

432 i‡(
wp
 !
gøbbuâ⁄wp
)

433 
subwid
 = 
gøbbuâ⁄wp
->
id
;

435 
wp
 = 
gøbbuâ⁄wp
;

439 
e˝
 = 
wp
->
evít˛õ¡s
;É˝;É˝ =É˝->
√xt
) {

440 i‡((
e˝
->
evítmask
 &Éventmask) == 0)

443 
˛õ¡
 = 
e˝
->client;

450 i‡(
ty≥
 =
GR_EVENT_TYPE_MOUSE_POSITION
)

451 
	`GsFªePosôi⁄Evít
(
˛õ¡
, 
wp
->
id
, 
subwid
);

453 
ï
 = (
GR_EVENT_MOUSE
 *Ë
	`GsAŒocEvít
(
˛õ¡
);

454 i‡(
ï
 =
NULL
)

457 
ï
->
ty≥
 =Åype;

458 
ï
->
wid
 = 
wp
->
id
;

459 
ï
->
subwid
 = subwid;

460 
ï
->
roŸx
 = 
curs‹x
;

461 
ï
->
roŸy
 = 
curs‹y
;

462 
ï
->
x
 = 
curs‹x
 - 
wp
->x;

463 
ï
->
y
 = 
curs‹y
 - 
wp
->y;

464 
ï
->
buâ⁄s
 = buttons;

465 
ï
->
modifõrs
 = modifiers;

468 i‡((
wp
 =
roŸwp
Ë|| 
gøbbuâ⁄wp
 ||

469 (
wp
->
n›r›mask
 & 
evítmask
))

472 
wp
 = wp->
∑ª¡
;

474 
	}
}

486 
	$GsDñivîKeybﬂrdEvít
(
GR_WINDOW_ID
 
wid
, 
GR_EVENT_TYPE
 
ty≥
,

487 
GR_KEY
 
keyvÆue
, 
GR_KEYMOD
 
modifõrs
, 
GR_SCANCODE
 
sˇncode
)

489 
GR_EVENT_KEYSTROKE
 *
ï
;

490 
GR_WINDOW
 *
wp
;

491 
GR_WINDOW
 *
ãmpwp
;

492 
GR_EVENT_CLIENT
 *
e˝
;

493 
GR_WINDOW_ID
 
subwid
;

494 
GR_EVENT_MASK
 
evítmask
;

495 
GR_WINDOW
 *
kwp
;

496 
GR_GRABBED_KEY
 *
keygøb
;

498 
evítmask
 = 
	`GR_EVENTMASK
(
ty≥
);

499 i‡(
evítmask
 == 0)

502 
	`GsRe£tS¸ìnSavî
();

517 
keygøb
 = 
li°_gøbbed_keys
; keygøb !
NULL
; keygøb = keygøb->
√xt
) {

518 i‡(
keygøb
->
key
 =
keyvÆue
) {

519 i‡((
keygøb
->
ty≥
 =
GR_GRAB_HOTKEY
)

520 || (
keygøb
->
ty≥
 =
GR_GRAB_HOTKEY_EXCLUSIVE
)) {

521 
ï
 = (
GR_EVENT_KEYSTROKE
 *Ë
	`GsAŒocEvít
(
keygøb
->
ow√r
);

522 i‡(
ï
 =
NULL
)

525 
ï
->
ty≥
 =Åype;

526 
ï
->
wid
 = 
keygøb
->wid;

527 
ï
->
subwid
 = 
keygøb
->
wid
;

528 
ï
->
roŸx
 = 
curs‹x
;

529 
ï
->
roŸy
 = 
curs‹y
;

530 
ï
->
x
 = 
curs‹x
;

531 
ï
->
y
 = 
curs‹y
;

532 
ï
->
buâ⁄s
 = 
curbuâ⁄s
;

533 
ï
->
modifõrs
 = modifiers;

534 
ï
->
ch
 = 
keyvÆue
;

535 
ï
->
sˇncode
 = scancode;

536 
ï
->
hŸkey
 = 
GR_TRUE
;

537 i‡(
keygøb
->
ty≥
 =
GR_GRAB_HOTKEY_EXCLUSIVE
)

551 i‡(
keygøb
 !
NULL
) {

557 
wp
 = 
	`GsFödWödow
(
keygøb
->
wid
);

558 i‡(
wp
 =
NULL
)

562 
kwp
 = 
focuswp
;

563 
kwp
 !
wp
 && kw∞!
roŸwp
)

564 
kwp
 = kwp->
∑ª¡
;

571 i‡(
kwp
 !
wp
 && (
keygøb
->
ty≥
 !
GR_GRAB_EXCLUSIVE_MOUSE
 || w∞!
mou£wp
))

574 
subwid
 = 
wp
->
id
;

577 i‡(
wid
) {

578 
kwp
 = 
	`GsFödWödow
(
wid
);

579 i‡(!
kwp
)

582 
kwp
 = 
focuswp
;

583 
wp
 = 
mou£wp
;

584 
subwid
 = 
wp
->
id
;

591 
ãmpwp
 = 
wp
;

592 
ãmpwp
 !
kwp
 &&Åempw∞!
roŸwp
)

593 
ãmpwp
 =Åempwp->
∑ª¡
;

595 i‡(
ãmpwp
 !
kwp
) {

596 
wp
 = 
kwp
;

597 
subwid
 = 
wp
->
id
;

607 
e˝
 = 
wp
->
evít˛õ¡s
;É˝;É˝ =É˝->
√xt
) {

609 i‡((
e˝
->
evítmask
 &Éventmask) == 0)

612 
ï
 = (
GR_EVENT_KEYSTROKE
 *Ë
	`GsAŒocEvít
(
e˝
->
˛õ¡
);

613 i‡(
ï
 =
NULL
)

616 
ï
->
ty≥
 =Åype;

617 
ï
->
wid
 = 
wp
->
id
;

618 
ï
->
subwid
 = subwid;

619 
ï
->
roŸx
 = 
curs‹x
;

620 
ï
->
roŸy
 = 
curs‹y
;

621 
ï
->
x
 = 
curs‹x
 - 
wp
->x;

622 
ï
->
y
 = 
curs‹y
 - 
wp
->y;

623 
ï
->
buâ⁄s
 = 
curbuâ⁄s
;

624 
ï
->
modifõrs
 = modifiers;

625 
ï
->
ch
 = 
keyvÆue
;

626 
ï
->
sˇncode
 = scancode;

627 
ï
->
hŸkey
 = 
GR_FALSE
;

631 i‡((
wp
 =
roŸwp
Ë|| (w∞=
kwp
) ||

632 (
wp
->
n›r›mask
 & 
evítmask
))

635 
wp
 = wp->
∑ª¡
;

637 
	}
}

645 
	$GsDñivîExposuªEvít
(
GR_WINDOW
 *
wp
, 
GR_COORD
 
x
, GR_COORD 
y
,

646 
GR_SIZE
 
width
, GR_SIZE 
height
)

648 
GR_EVENT_EXPOSURE
 *
ï
;

649 
GR_EVENT_CLIENT
 *
e˝
;

651 i‡(!
wp
->
ªÆized
 || !wp->
ouçut
)

654 
e˝
 = 
wp
->
evít˛õ¡s
;É˝;É˝ =É˝->
√xt
) {

655 i‡((
e˝
->
evítmask
 & 
GR_EVENT_MASK_EXPOSURE
) == 0)

658 
	`GsFªeExposuªEvít
(
e˝
->
˛õ¡
, 
wp
->
id
, 
x
, 
y
, 
width
, 
height
);

660 
ï
 = (
GR_EVENT_EXPOSURE
 *Ë
	`GsAŒocEvít
(
e˝
->
˛õ¡
);

661 i‡(
ï
 =
NULL
)

664 
ï
->
ty≥
 = 
GR_EVENT_TYPE_EXPOSURE
;

665 
ï
->
wid
 = 
wp
->
id
;

666 
ï
->
x
 = x;

667 
ï
->
y
 = y;

668 
ï
->
width
 = width;

669 
ï
->
height
 = height;

671 
	}
}

680 
	$GsFªeExposuªEvít
(
GR_CLIENT
 *
˛õ¡
, 
GR_WINDOW_ID
 
wid
, 
GR_COORD
 
x
,

681 
GR_COORD
 
y
, 
GR_SIZE
 
width
, GR_SIZE 
height
)

683 
GR_EVENT_LIST
 *
ñp
;

684 
GR_EVENT_LIST
 *
¥evñp
;

686 
¥evñp
 = 
NULL
;

687 
ñp
 = 
˛õ¡
->
evíthód
;ÉÕ; 
¥evñp
 =ÉÕ,ÉÕ =ÉÕ->
√xt
) {

688 i‡(
ñp
->
evít
.
ty≥
 !
GR_EVENT_TYPE_EXPOSURE
 ||

689 
ñp
->
evít
.
exposuª
.
wid
 != wid)

691 i‡(
ñp
->
evít
.
exposuª
.
x
 < x ||ÉÕ->evít.exposuª.
y
 < y ||

692 
ñp
->
evít
.
exposuª
.
x
+ñp->evít.exposuª.
width
 > x+width ||

693 
ñp
->
evít
.
exposuª
.
y
+ñp->evít.exposuª.
height
 > y+height)

699 i‡(
¥evñp
)

700 
¥evñp
->
√xt
 = 
ñp
->next;

702 
˛õ¡
->
evíthód
 = 
ñp
->
√xt
;

703 i‡(
˛õ¡
->
evíâaû
 =
ñp
)

704 
˛õ¡
->
evíâaû
 = 
¥evñp
;

706 
ñp
->
√xt
 = 
evít‰ì
;

707 
evít‰ì
 = 
ñp
;

710 
	}
}

716 
	$GsDñivîUpd©eEvít
(
GR_WINDOW
 *
wp
, 
GR_UPDATE_TYPE
 
uty≥
, 
GR_COORD
 
x
,

717 
GR_COORD
 
y
, 
GR_SIZE
 
width
, GR_SIZE 
height
)

719 
GR_EVENT_MASK
 
cmask
 = 
GR_EVENT_MASK_UPDATE
;

720 
GR_EVENT_UPDATE
 *
ï
;

721 
GR_EVENT_CLIENT
 *
e˝
;

722 
GR_WINDOW_ID
 
id
 = 
wp
->id;

723 
lcou¡
 = 0;

726 i‡(
wp
->
∑ª¡
) {

727 
x
 -
wp
->
∑ª¡
->x;

728 
y
 -
wp
->
∑ª¡
->y;

731 
upd©e_agaö
:

732 
e˝
 = 
wp
->
evít˛õ¡s
;É˝;É˝ =É˝->
√xt
) {

733 i‡((
e˝
->
evítmask
 & 
cmask
) == 0)

736 
ï
 = (
GR_EVENT_UPDATE
 *Ë
	`GsAŒocEvít
(
e˝
->
˛õ¡
);

737 i‡(
ï
 =
NULL
)

740 
ï
->
ty≥
 = 
lcou¡
?

741 
GR_EVENT_TYPE_CHLD_UPDATE
: 
GR_EVENT_TYPE_UPDATE
;

742 
ï
->
uty≥
 = utype;

743 
ï
->
wid
 = 
wp
->
id
;

744 
ï
->
subwid
 = 
id
;

745 
ï
->
x
 = x;

746 
ï
->
y
 = y;

747 
ï
->
width
 = width;

748 
ï
->
height
 = height;

753 i‡(!
lcou¡
++) {

754 
wp
 = wp->
∑ª¡
;

756 i‡(
wp
 =
NULL
)

758 
cmask
 = 
GR_EVENT_MASK_CHLD_UPDATE
;

759 
upd©e_agaö
;

761 
	}
}

769 
	$GsDñivîGíîÆEvít
(
GR_WINDOW
 *
wp
, 
GR_EVENT_TYPE
 
ty≥
, GR_WINDOW *
Ÿhî
)

771 
GR_EVENT_GENERAL
 *
gp
;

772 
GR_EVENT_CLIENT
 *
e˝
;

773 
GR_EVENT_MASK
 
evítmask
;

775 
evítmask
 = 
	`GR_EVENTMASK
(
ty≥
);

776 i‡(
evítmask
 == 0)

779 
e˝
 = 
wp
->
evít˛õ¡s
;É˝;É˝ =É˝->
√xt
) {

780 i‡((
e˝
->
evítmask
 &Éventmask) == 0)

783 
gp
 = (
GR_EVENT_GENERAL
 *Ë
	`GsAŒocEvít
(
e˝
->
˛õ¡
);

784 i‡(
gp
 =
NULL
)

787 
gp
->
ty≥
 =Åype;

788 
gp
->
wid
 = 
wp
->
id
;

789 i‡(
Ÿhî
)

790 
gp
->
Ÿhîid
 = 
Ÿhî
->
id
;

791 
gp
->
Ÿhîid
 = 0;

793 
	}
}

800 
	$GsDñivîP‹åaôCh™gedEvít
()

802 
GR_WINDOW
 *
wp
;

803 
GR_EVENT_GENERAL
 *
gp
;

804 
GR_EVENT_CLIENT
 *
e˝
;

806 
wp
=
li°wp
; wp; wp=wp->
√xt
) {

807 
e˝
 = 
wp
->
evít˛õ¡s
;É˝;É˝ =É˝->
√xt
) {

808 i‡((
e˝
->
evítmask
 & 
GR_EVENT_MASK_PORTRAIT_CHANGED
) == 0)

811 
gp
 = (
GR_EVENT_GENERAL
 *Ë
	`GsAŒocEvít
(
e˝
->
˛õ¡
);

812 i‡(
gp
 =
NULL
)

815 
gp
->
ty≥
 = 
GR_EVENT_TYPE_PORTRAIT_CHANGED
;

816 
gp
->
wid
 = 
wp
->
id
;

817 
gp
->
Ÿhîid
 = 0;

820 
	}
}

830 
	$GsDñivîS¸ìnSavîEvít
(
GR_BOOL
 
a˘iv©e
)

832 
GR_EVENT_SCREENSAVER
 *
gp
;

833 
GR_EVENT_CLIENT
 *
e˝
;

835 
e˝
 = 
roŸwp
->
evít˛õ¡s
;É˝;É˝ =É˝->
√xt
) {

836 i‡((
e˝
->
evítmask
 & 
GR_EVENT_MASK_SCREENSAVER
) == 0)

839 
gp
 = (
GR_EVENT_SCREENSAVER
 *Ë
	`GsAŒocEvít
(
e˝
->
˛õ¡
);

840 i‡(
gp
 =
NULL
)

843 
gp
->
ty≥
 = 
GR_EVENT_TYPE_SCREENSAVER
;

844 
gp
->
a˘iv©e
 =áctivate;

846 
	}
}

853 
	$GsDñivîClõ¡D©aReqEvít
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
rid
,

854 
GR_SERIALNO
 
£rül
, 
GR_MIMETYPE
 
mimëy≥
)

856 
GR_EVENT_CLIENT_DATA_REQ
 *
gp
;

857 
GR_EVENT_CLIENT
 *
e˝
;

858 
GR_WINDOW
 *
wp
;

860 if(!(
wp
 = 
	`GsFödWödow
(
wid
)))

863 
e˝
 = 
wp
->
evít˛õ¡s
;É˝;É˝ =É˝->
√xt
) {

864 i‡((
e˝
->
evítmask
 & 
GR_EVENT_MASK_CLIENT_DATA_REQ
) == 0)

867 
gp
 = (
GR_EVENT_CLIENT_DATA_REQ
 *Ë
	`GsAŒocEvít
(
e˝
->
˛õ¡
);

868 i‡(
gp
 =
NULL
)

871 
gp
->
ty≥
 = 
GR_EVENT_TYPE_CLIENT_DATA_REQ
;

872 
gp
->
wid
 = wid;

873 
gp
->
rid
 =Ñid;

874 
gp
->
£rül
 = serial;

875 
gp
->
mimëy≥
 = mimetype;

878 
	}
}

885 
	$GsDñivîClõ¡D©aEvít
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
rid
,

886 
GR_SERIALNO
 
£rül
, 
GR_LENGTH
 
Àn
, GR_LENGTH 
thi¶í
, *
d©a
)

888 
GR_EVENT_CLIENT_DATA
 *
gp
;

889 
GR_EVENT_CLIENT
 *
e˝
;

890 
GR_WINDOW
 *
wp
;

892 if(!(
wp
 = 
	`GsFödWödow
(
wid
)))

895 
e˝
 = 
wp
->
evít˛õ¡s
;É˝;É˝ =É˝->
√xt
) {

896 i‡((
e˝
->
evítmask
 & 
GR_EVENT_MASK_CLIENT_DATA
) == 0)

899 
gp
 = (
GR_EVENT_CLIENT_DATA
 *Ë
	`GsAŒocEvít
(
e˝
->
˛õ¡
);

900 i‡(
gp
 =
NULL
)

903 
gp
->
ty≥
 = 
GR_EVENT_TYPE_CLIENT_DATA
;

904 
gp
->
wid
 = wid;

905 
gp
->
rid
 =Ñid;

906 
gp
->
£rül
 = serial;

907 
gp
->
Àn
 =Üen;

908 
gp
->
d©Æí
 = 
thi¶í
;

909 if(!(
gp
->
d©a
 = 
	`mÆloc
(
thi¶í
))) {

910 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 
wid
);

913 
	`mem˝y
(
gp
->
d©a
, d©a, 
thi¶í
);

916 
	}
}

925 
	$GsFªePosôi⁄Evít
(
GR_CLIENT
 *
˛õ¡
, 
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
subwid
)

927 
GR_EVENT_LIST
 *
ñp
;

928 
GR_EVENT_LIST
 *
¥evñp
;

930 
¥evñp
 = 
NULL
;

931 
ñp
 = 
˛õ¡
->
evíthód
;ÉÕ; 
¥evñp
 =ÉÕ,ÉÕ =ÉÕ->
√xt
) {

932 i‡(
ñp
->
evít
.
ty≥
 !
GR_EVENT_TYPE_MOUSE_POSITION
)

934 i‡(
ñp
->
evít
.
mou£
.
wid
 != wid)

936 i‡(
ñp
->
evít
.
mou£
.
subwid
 != subwid)

942 i‡(
¥evñp
)

943 
¥evñp
->
√xt
 = 
ñp
->next;

945 
˛õ¡
->
evíthód
 = 
ñp
->
√xt
;

946 i‡(
˛õ¡
->
evíâaû
 =
ñp
)

947 
˛õ¡
->
evíâaû
 = 
¥evñp
;

949 
ñp
->
√xt
 = 
evít‰ì
;

950 
evít‰ì
 = 
ñp
;

953 
	}
}

962 
	$GsDñivîSñe˘i⁄Ch™gedEvít
(
GR_WINDOW_ID
 
ﬁd_ow√r
, GR_WINDOW_ID 
√w_ow√r
)

964 
GR_EVENT_SELECTION_CHANGED
 *
gp
;

965 
GR_EVENT_CLIENT
 *
e˝
;

966 
GR_WINDOW
 *
wp
;

968 if(!(
wp
 = 
	`GsFödWödow
(
ﬁd_ow√r
)))

971 
e˝
 = 
wp
->
evít˛õ¡s
;É˝;É˝ =É˝->
√xt
) {

972 i‡((
e˝
->
evítmask
 & 
GR_EVENT_MASK_SELECTION_CHANGED
) == 0)

975 
gp
 = (
GR_EVENT_SELECTION_CHANGED
 *Ë
	`GsAŒocEvít
(
e˝
->
˛õ¡
);

976 i‡(
gp
 =
NULL
)

979 
gp
->
ty≥
 = 
GR_EVENT_TYPE_SELECTION_CHANGED
;

980 
gp
->
√w_ow√r
 =Çew_owner;

982 
	}
}

989 
	$GsDñivîRawMou£Evít
(
rx
, 
ry
, 
buâ⁄s
, 
modifõrs
)

991 
i
;

993 
GR_WINDOW
 *
wp
;

994 
GR_CLIENT
 *
˛õ¡
;

995 
GR_WINDOW_ID
 
subwid
;

997 
GR_EVENT_CLIENT
 *
e˝
;

1002 
wp
 = 
mou£wp
;

1003 
subwid
 = 
wp
->
id
;

1005 
e˝
 = 
wp
->
evít˛õ¡s
;É˝;É˝ =É˝->
√xt
) {

1006 
GR_EVENT_MOUSE
 *
ï
;

1008 i‡((
e˝
->
evítmask
 & 
GR_EVENT_MASK_MOUSE_POSITION
) == 0)

1011 
˛õ¡
 = 
e˝
->client;

1013 
	`GsFªePosôi⁄Evít
(
˛õ¡
, 
wp
->
id
, 
subwid
);

1015 
ï
 = (
GR_EVENT_MOUSE
 *Ë
	`GsAŒocEvít
(
˛õ¡
);

1016 i‡(
ï
 =
NULL
)

1019 
ï
->
ty≥
 = 
GR_EVENT_TYPE_MOUSE_POSITION
;

1020 
ï
->
wid
 = 
wp
->
id
;

1021 
ï
->
subwid
 = subwid;

1022 
ï
->
roŸx
 = 
rx
;

1023 
ï
->
roŸy
 = 
ry
;

1024 
ï
->
x
 = 0;

1025 
ï
->
y
 = 0;

1026 
ï
->
buâ⁄s
 = buttons;

1027 
ï
->
modifõrs
 = modifiers;

1029 i‡((
wp
 =
roŸwp
)

1030 || (
wp
->
n›r›mask
 & 
GR_EVENT_MASK_MOUSE_POSITION
))

1033 
wp
 = wp->
∑ª¡
;

1037 
i
 = 0; i < 2; i++) {

1038 
GR_EVENT_BUTTON
 *
gp
;

1039 
cbuâ⁄s
 = 0;

1040 
GR_EVENT_TYPE
 
ëy≥
 = (
i
 =0Ë? 
GR_EVENT_TYPE_BUTTON_DOWN
 :

1041 
GR_EVENT_TYPE_BUTTON_UP
;

1043 i‡(
i
 == 0)

1044 
cbuâ⁄s
 = (
curbuâ⁄s
 & ~
buâ⁄s
);

1046 
cbuâ⁄s
 = (~
buâ⁄s
 & 
curbuâ⁄s
);

1047 i‡(!
cbuâ⁄s
)

1050 
wp
 = 
mou£wp
;

1051 
subwid
 = 
wp
->
id
;

1053 
e˝
 = 
wp
->
evít˛õ¡s
;É˝;É˝ =É˝->
√xt
) {

1054 
˛õ¡
 = 
e˝
->client;

1056 i‡((
e˝
->
evítmask
 & 
	`GR_EVENTMASK
(
ëy≥
)) == 0)

1059 
gp
 = (
GR_EVENT_BUTTON
 *Ë
	`GsAŒocEvít
(
e˝
->
˛õ¡
);

1061 i‡(
gp
 =
NULL
)

1064 
gp
->
ty≥
 = 
ëy≥
;

1065 
gp
->
wid
 = 
wp
->
id
;

1066 
gp
->
subwid
 = subwid;

1067 
gp
->
roŸx
 = 
rx
;

1068 
gp
->
roŸy
 = 
ry
;

1069 
gp
->
x
 = 0;

1070 
gp
->
y
 = 0;

1071 
gp
->
buâ⁄s
 = buttons;

1072 
gp
->
ch™gebuâ⁄s
 = 
cbuâ⁄s
;

1073 
gp
->
modifõrs
 = modifiers;

1074 
gp
->
time
 = 
	`GsGëTickCou¡
();

1076 i‡((
wp
 =
roŸwp
Ë|| (wp->
n›r›mask
 & 
	`GR_EVENTMASK
(
ëy≥
)))

1079 
wp
 = wp->
∑ª¡
;

1083 
curbuâ⁄s
 = 
buâ⁄s
;

1084 
	}
}

1087 
	$GsDñivîTimîEvít
(
GR_CLIENT
 * 
˛õ¡
, 
GR_WINDOW_ID
 
wid
, 
GR_TIMER_ID
 
tid
)

1089 
GR_EVENT_TIMER
 *
evít
;

1090 
GR_EVENT_CLIENT
 *
e˝
;

1091 
GR_WINDOW
 *
wp
;

1093 i‡((
wp
 = 
	`GsFödWödow
(
wid
)Ë=
NULL
)

1096 
e˝
 = 
wp
->
evít˛õ¡s
;É˝ !
NULL
;É˝ =É˝->
√xt
) {

1097 i‡((
e˝
->
˛õ¡
 == client)

1098 && ((
e˝
->
evítmask
 & 
GR_EVENT_MASK_TIMER
) != 0)) {

1099 
evít
 = (
GR_EVENT_TIMER
 *Ë
	`GsAŒocEvít
(
˛õ¡
);

1100 i‡(
evít
 =
NULL
)

1103 
evít
->
ty≥
 = 
GR_EVENT_TYPE_TIMER
;

1104 
evít
->
wid
 = wid;

1105 
evít
->
tid
 =Åid;

1108 
	}
}

	@nanox/srvfunc.c

9 
	~<°dio.h
>

10 
	~<°dlib.h
>

11 
	~<°rög.h
>

12 
	#MWINCLUDECOLORS


	)

13 
	~"£rv.h
"

15 
	g√xtid
 = 
GR_ROOT_WINDOW_ID
 + 1;

17 
CheckNextEvít
(
GR_EVENT
 *
ï
, 
GR_BOOL
 
doCheckEvít
);

23 
	$GrGëS¸ìnInfo
(
GR_SCREEN_INFO
 *
sù
)

25 
	`SERVER_LOCK
();

27 
	`GdGëS¸ìnInfo
(
roŸwp
->
psd
, 
sù
);

30 
sù
->
vs_width
 = 
nxªs
?Çxªs: sù->
cﬁs
;

31 
sù
->
vs_height
 = 
nyªs
?Çyªs: sù->
rows
;

34 
sù
->
ws_width
 = sù->
vs_width
;

35 
sù
->
ws_height
 = sù->
vs_height
 - 22;

37 
	`SERVER_UNLOCK
();

38 
	}
}

46 
	$GrGëGCTextSize
(
GR_GC_ID
 
gc
, *
°r
, 
cou¡
, 
GR_TEXTFLAGS
 
Êags
,

47 
GR_SIZE
 *
ªtwidth
, GR_SIZE *
ªtheight
, GR_SIZE *
ªtba£
)

49 
GR_GC
 *
g˝
;

50 
GR_FONT
 *
f⁄ç
;

51 
PMWFONT
 
pf
;

53 
	`SERVER_LOCK
();

55 
g˝
 = 
	`GsFödGC
(
gc
);

56 i‡(
g˝
 =
NULL
)

57 
f⁄ç
 = 
NULL
;

59 
f⁄ç
 = 
	`GsFödF⁄t
(
g˝
->
f⁄tid
);

60 
pf
 = 
f⁄ç
? f⁄ç->
pf⁄t
: 
°df⁄t
;

61 
	`GdGëTextSize
(
pf
, 
°r
, 
cou¡
, 
ªtwidth
, 
ªtheight
, 
ªtba£
, 
Êags
);

63 
	`SERVER_UNLOCK
();

64 
	}
}

66 #i‡
NONETWORK


74 
	$GrGëNextEvít
(
GR_EVENT
 *
ï
)

76 
	`GrGëNextEvítTimeout
(
ï
, 0L);

77 
	}
}

85 
	$GrGëNextEvítTimeout
(
GR_EVENT
 *
ï
, 
GR_TIMEOUT
 
timeout
)

87 
	`SERVER_LOCK
();

91 
cur˛õ¡
->
evíthód
 =
NULL
)

92 
	`GsSñe˘
(
timeout
);

93 
	`CheckNextEvít
(
ï
, 
GR_FALSE
);

94 
	`SERVER_UNLOCK
();

95 
	}
}

101 
	$GrPìkWaôEvít
(
GR_EVENT
 *
ï
)

103 
	`SERVER_LOCK
();

104 
cur˛õ¡
->
evíthód
 =
NULL
)

105 
	`GsSñe˘
(0L);

106 
	`GrPìkEvít
(
ï
);

107 
	`SERVER_UNLOCK
();

108 
	}
}

118 
	$GrCheckNextEvít
(
GR_EVENT
 *
ï
)

120 
	`SERVER_LOCK
();

121 
	`CheckNextEvít
(
ï
, 
GR_TRUE
);

122 
	`SERVER_UNLOCK
();

123 
	}
}

126 
	$CheckNextEvít
(
GR_EVENT
 *
ï
, 
GR_BOOL
 
doCheckEvít
)

128 
GR_EVENT_LIST
 * 
ñp
;

132 i‡(
doCheckEvít
)

133 
	`GsSñe˘
(1L);

136 if(!
	`GrPìkEvít
(
ï
))

140 
ñp
 = 
cur˛õ¡
->
evíthód
;

142 #i‡
NONETWORK


144 i‡(
doCheckEvít
 && 
ñp
->
evít
.
ty≥
 =
GR_EVENT_TYPE_TIMEOUT
)

145 
ï
->
ty≥
 = 
GR_EVENT_TYPE_NONE
;

149 
cur˛õ¡
->
evíthód
 = 
ñp
->
√xt
;

150 i‡(
cur˛õ¡
->
evíâaû
 =
ñp
)

151 
cur˛õ¡
->
evíâaû
 = 
NULL
;

153 
ñp
->
√xt
 = 
evít‰ì
;

154 
evít‰ì
 = 
ñp
;

155 
	}
}

163 
	$GrPìkEvít
(
GR_EVENT
 *
ï
)

165 
GR_EVENT_LIST
 * 
ñp
;

167 
	`SERVER_LOCK
();

168 
ñp
 = 
cur˛õ¡
->
evíthód
;

169 #i‡
NONETWORK


171 i‡(
ñp
 =
NULL
) {

172 
	`GsSñe˘
(-1L);

173 
ñp
 = 
cur˛õ¡
->
evíthód
;

176 if(
ñp
 =
NULL
) {

177 
ï
->
ty≥
 = 
GR_EVENT_TYPE_NONE
;

178 
	`SERVER_UNLOCK
();

183 *
ï
 = 
ñp
->
evít
;

185 
	`SERVER_UNLOCK
();

187 
	}
}

193 
	$GrGëWödowInfo
(
GR_WINDOW_ID
 
wid
, 
GR_WINDOW_INFO
 *
öf›å
)

195 
GR_WINDOW
 *
wp
;

196 
GR_PIXMAP
 *
µ
;

197 
GR_EVENT_CLIENT
 *
evp
;

199 
	`SERVER_LOCK
();

202 
wp
 = 
	`GsFödWödow
(
wid
);

203 i‡(
wp
) {

204 
öf›å
->
wid
 = wid;

206 
öf›å
->
x
 = 
wp
->x - (wp->
∑ª¡
 ? wp->parent->x : 0);

207 
öf›å
->
y
 = 
wp
->y - (wp->
∑ª¡
 ? wp->parent->y : 0);

208 
öf›å
->
width
 = 
wp
->width;

209 
öf›å
->
height
 = 
wp
->height;

210 
öf›å
->
∑ª¡
 = 
wp
->∑ª¡? wp->∑ª¡->
id
: 0;

211 
öf›å
->
chûd
 = 
wp
->
chûdªn
? wp->chûdªn->
id
: 0;

212 
öf›å
->
siblög
 = 
wp
->
siblögs
? wp->siblögs->
id
: 0;

213 
öf›å
->
m≠≥d
 = 
wp
->mapped;

214 
öf›å
->
ªÆized
 = 
wp
->realized;

215 
öf›å
->
öput⁄ly
 = !
wp
->
ouçut
;

216 
öf›å
->
b‹dîsize
 = 
wp
->bordersize;

217 
öf›å
->
b‹dîcﬁ‹
 = 
wp
->bordercolor;

218 
öf›å
->
background
 = 
wp
->background;

219 
öf›å
->
¥›s
 = 
wp
->props;

220 
öf›å
->
curs‹
 = 
wp
->
curs‹id
;

221 
öf›å
->
¥o˚ssid
 = 
wp
->
ow√r
? wp->owner->processid: 0;

222 
öf›å
->
evítmask
 = 0;

224 
evp
 = 
wp
->
evít˛õ¡s
;Évp;Év∞evp->
√xt
) {

225 i‡(
evp
->
˛õ¡
 =
cur˛õ¡
)

226 
öf›å
->
evítmask
 = 
evp
->eventmask;

228 
	`SERVER_UNLOCK
();

233 
µ
 = 
	`GsFödPixm≠
(
wid
);

234 i‡(
µ
) {

235 
öf›å
->
wid
 = wid;

236 
öf›å
->
x
 = 
µ
->x;

237 
öf›å
->
y
 = 
µ
->y;

238 
öf›å
->
width
 = 
µ
->width;

239 
öf›å
->
height
 = 
µ
->height;

240 
öf›å
->
∑ª¡
 = 0;

241 
öf›å
->
chûd
 = 0;

242 
öf›å
->
siblög
 = 0;

243 
öf›å
->
m≠≥d
 = 
GR_FALSE
;

244 
öf›å
->
ªÆized
 = 
GR_TRUE
;

245 
öf›å
->
öput⁄ly
 = 
GR_FALSE
;

246 
öf›å
->
b‹dîsize
 = 0;

247 
öf›å
->
b‹dîcﬁ‹
 = 0;

248 
öf›å
->
background
 = 0;

249 
öf›å
->
evítmask
 = 0;

250 
öf›å
->
curs‹
 = 0;

251 
öf›å
->
¥o˚ssid
 = 
µ
->
ow√r
?Öp->owner->processid: 0;

252 
	`SERVER_UNLOCK
();

257 
	`mem£t
(
öf›å
, 0, (
GR_WINDOW_INFO
));

258 
	`SERVER_UNLOCK
();

259 
	}
}

266 
	$GrDe°royWödow
(
GR_WINDOW_ID
 
wid
)

268 
GR_WINDOW
 *
wp
;

269 
GR_PIXMAP
 *
µ
;

270 
GR_PIXMAP
 *
¥evµ
;

271 
PSD
 
psd
;

273 
	`SERVER_LOCK
();

275 
wp
 = 
	`GsFödWödow
(
wid
);

276 i‡(
wp
) {

277 
	`GsWpDe°royWödow
(
wp
);

279 
µ
 = 
	`GsFödPixm≠
(
wid
);

280 i‡(
µ
) {

281 
psd
 = 
µ
->psd;

283 i‡(
psd
->
Êags
 & 
PSF_ADDRMALLOC
)

284 
	`‰ì
(
psd
->
addr
);

287 
psd
->
	`FªeMemGC
(psd);

292 
¥evµ
 = 
li°µ
;

293 i‡(
¥evµ
 =
µ
)

294 
li°µ
 = 
µ
->
√xt
;

296 
¥evµ
->
√xt
 !
µ
)

297 
¥evµ
 =Öªvµ->
√xt
;

298 
¥evµ
->
√xt
 = 
µ
->next;

305 i‡(
µ
 =
ˇchïp
) {

306 
ˇchïixm≠id
 = 0;

307 
ˇchïp
 = 
NULL
;

309 
	`‰ì
(
µ
);

313 
	`SERVER_UNLOCK
();

314 
	}
}

321 
	$GrRai£Wödow
(
GR_WINDOW_ID
 
wid
)

323 
GR_WINDOW
 *
wp
;

324 
GR_WINDOW
 *
¥evwp
;

325 
GR_BOOL
 
ovîœp
;

327 
	`SERVER_LOCK
();

329 
wp
 = 
	`GsFödWödow
(
wid
);

330 i‡((
wp
 =
NULL
Ë|| (w∞=
roŸwp
)) {

331 
	`SERVER_UNLOCK
();

338 
¥evwp
 = 
wp
->
∑ª¡
->
chûdªn
;

339 i‡(
¥evwp
 =
wp
) {

340 
	`SERVER_UNLOCK
();

349 
ovîœp
 = 
GR_FALSE
;

350 
¥evwp
->
siblögs
 !
wp
) {

351 
ovîœp
 |
	`GsCheckOvîœp
(
¥evwp
, 
wp
);

352 
¥evwp
 =Öªvwp->
siblögs
;

354 
ovîœp
 |
	`GsCheckOvîœp
(
¥evwp
, 
wp
);

360 
¥evwp
->
siblögs
 = 
wp
->siblings;

361 
wp
->
siblögs
 = wp->
∑ª¡
->
chûdªn
;

362 
wp
->
∑ª¡
->
chûdªn
 = wp;

367 i‡(
ovîœp
) {

368 
	`GsDøwB‹dî
(
wp
);

369 
	`GsExpo£Aªa
(
wp
, wp->
x
, wp->
y
, wp->
width
, wp->
height
, 
NULL
);

372 
	`SERVER_UNLOCK
();

373 
	}
}

379 
	$GrLowîWödow
(
GR_WINDOW_ID
 
wid
)

381 
GR_WINDOW
 *
wp
;

382 
GR_WINDOW
 *
¥evwp
;

383 
GR_WINDOW
 *
sibwp
;

384 
GR_WINDOW
 *
expwp
;

386 
	`SERVER_LOCK
();

388 
wp
 = 
	`GsFödWödow
(
wid
);

389 i‡((
wp
 =
NULL
Ë|| (w∞=
roŸwp
)) {

390 
	`SERVER_UNLOCK
();

393 i‡(
wp
->
siblögs
 =
NULL
) {

394 
	`SERVER_UNLOCK
();

401 
¥evwp
 = 
wp
->
∑ª¡
->
chûdªn
;

402 i‡(
¥evwp
 !
wp
) {

403 
¥evwp
->
siblögs
 !
wp
)

404 
¥evwp
 =Öªvwp->
siblögs
;

412 
expwp
 = 
wp
->
siblögs
;

413 
sibwp
 = 
wp
;

414 
sibwp
->
siblögs
)

415 
sibwp
 = sibwp->
siblögs
;

421 i‡(
¥evwp
 =
wp
)

422 
wp
->
∑ª¡
->
chûdªn
 = wp->
siblögs
;

424 
¥evwp
->
siblögs
 = 
wp
->siblings;

425 
sibwp
->
siblögs
 = 
wp
;

427 
wp
->
siblögs
 = 
NULL
;

433 
expwp
 && (expw∞!
wp
)) {

434 i‡(
	`GsCheckOvîœp
(
wp
, 
expwp
)) {

435 
	`GsExpo£Aªa
(
expwp
, 
wp
->
x
 - wp->
b‹dîsize
,

436 
wp
->
y
 - wp->
b‹dîsize
,

437 
wp
->
width
 + wp->
b‹dîsize
 * 2,

438 
wp
->
height
 + wp->
b‹dîsize
 * 2, 
NULL
);

440 
expwp
 =Éxpwp->
siblögs
;

443 
	`SERVER_UNLOCK
();

444 
	}
}

448 
	$Off£tWödow
(
GR_WINDOW
 *
wp
, 
GR_COORD
 
offx
, GR_COORD 
offy
)

450 
GR_WINDOW
 *
˝
;

452 
wp
->
x
 +
offx
;

453 
wp
->
y
 +
offy
;

454 
˝
=
wp
->
chûdªn
; cp; cp=˝->
siblögs
)

455 
	`Off£tWödow
(
˝
, 
offx
, 
offy
);

456 
	}
}

460 
	$DñivîUpd©eMoveEvítAndChûdªn
(
GR_WINDOW
 *
wp
)

462 
GR_WINDOW
 * 
chûdwp
;

464 
	`GsDñivîUpd©eEvít
(
wp
, 
GR_UPDATE_MOVE
, wp->
x
, wp->
y
,

465 
wp
->
width
, wp->
height
);

467 
chûdwp
 = 
wp
->
chûdªn
; chûdwp; chûdw∞chûdwp->
siblögs
)

468 
	`DñivîUpd©eMoveEvítAndChûdªn
(
chûdwp
);

469 
	}
}

475 
	$GrMoveWödow
(
GR_WINDOW_ID
 
wid
, 
GR_COORD
 
x
, GR_COORD 
y
)

477 
GR_WINDOW
 *
wp
;

478 
GR_COORD
 
offx
, 
offy
;

480 
	`SERVER_LOCK
();

482 
wp
 = 
	`GsFödWödow
(
wid
);

483 i‡(
wp
 =
NULL
) {

484 
	`SERVER_UNLOCK
();

487 i‡(
wp
 =
roŸwp
) {

488 
	`GsEº‹
(
GR_ERROR_ILLEGAL_ON_ROOT_WINDOW
, 
wid
);

489 
	`SERVER_UNLOCK
();

493 
x
 +
wp
->
∑ª¡
->x;

494 
y
 +
wp
->
∑ª¡
->y;

495 
offx
 = 
x
 - 
wp
->x;

496 
offy
 = 
y
 - 
wp
->y;

498 i‡(
wp
->
x
 =x && wp->
y
 == y) {

499 
	`SERVER_UNLOCK
();

506 i‡(
wp
->
m≠≥d
 && w∞=wp->
∑ª¡
->
chûdªn


507 && 
wp
->
∑ª¡
->
id
 =
GR_ROOT_WINDOW_ID


513 && !
wp
->
˛ùªgi⁄


515 
ﬁdx
 = 
wp
->
x
;

516 
ﬁdy
 = 
wp
->
y
;

517 
GR_WINDOW_ID
 
pixid
 = 
	`GrNewPixm≠
(
wp
->
width
, wp->
height
,
NULL
);

518 
GR_GC_ID
 
gc
 = 
	`GrNewGC
();

519 
GR_WINDOW
 * 
°›wp
 = 
wp
;

520 
X
, 
Y
, 
W
, 
H
;

523 
	`GdHideCurs‹
(
roŸwp
->
psd
);

526 
	`GrSëGCMode
(
gc
, 
GR_MODE_COPY
|
GR_MODE_EXCLUDECHILDREN
);

529 
	`GrC›yAªa
(
pixid
, 
gc
, 0, 0, 
wp
->
width
, wp->
height
,

530 
GR_ROOT_WINDOW_ID
, 
ﬁdx
, 
ﬁdy
, 
MWROP_COPY
);

533 
	`Off£tWödow
(
wp
, 
offx
, 
offy
);

536 
˛ùwp
 = 
NULL
;

539 
	`GrC›yAªa
(
GR_ROOT_WINDOW_ID
, 
gc
, 
wp
->
x
, wp->
y
, wp->
width
,

540 
wp
->
height
, 
pixid
, 0, 0, 
MWROP_COPY
);

547 i‡((
ﬁdx
 < 0 && 
wp
->
x
 > oldx) ||

548 (
ﬁdy
 < 0 && 
wp
->
y
 > oldy) ||

549 (
ﬁdx
+
wp
->
width
 > 
roŸwp
->width && wp->
x
 < oldx) ||

550 (
ﬁdy
+
wp
->
height
 > 
roŸwp
->heighà&& wp->
y
 < oldy))

551 
°›wp
 = 
NULL
;

557 
X
 = 
	`MWMIN
(
ﬁdx
, 
wp
->
x
);

558 
Y
 = 
	`MWMIN
(
ﬁdy
, 
wp
->
y
);

559 
W
 = 
	`MWMAX
(
ﬁdx
, 
wp
->
x
Ë+ wp->
width
 - 
X
;

560 
H
 = 
	`MWMAX
(
ﬁdy
, 
wp
->
y
Ë+ wp->
height
 - 
Y
;

561 
	`GsExpo£Aªa
(
roŸwp
, 
X
, 
Y
, 
W
, 
H
, 
°›wp
);

563 
	`GdShowCurs‹
(
roŸwp
->
psd
);

564 
	`GrDe°royGC
(
gc
);

565 
	`GrDe°royWödow
(
pixid
);

566 
	`DñivîUpd©eMoveEvítAndChûdªn
(
wp
);

567 
	`SERVER_UNLOCK
();

573 i‡(
wp
->
m≠≥d
 && w∞=wp->
∑ª¡
->
chûdªn
) {

574 
ﬁdx
 = 
wp
->
x
;

575 
ﬁdy
 = 
wp
->
y
;

576 
X
, 
Y
, 
W
, 
H
;

578 
	`Off£tWödow
(
wp
, 
offx
, 
offy
);

581 
˛ùwp
 = 
NULL
;

583 
X
 = 
	`MWMIN
(
ﬁdx
, 
wp
->
x
);

584 
Y
 = 
	`MWMIN
(
ﬁdy
, 
wp
->
y
);

585 
W
 = 
	`MWMAX
(
ﬁdx
, 
wp
->
x
Ë+ wp->
width
 - 
X
;

586 
H
 = 
	`MWMAX
(
ﬁdy
, 
wp
->
y
Ë+ wp->
height
 - 
Y
;

587 
	`GsExpo£Aªa
(
roŸwp
, 
X
, 
Y
, 
W
, 
H
, 
NULL
);

588 
	`DñivîUpd©eMoveEvítAndChûdªn
(
wp
);

589 
	`SERVER_UNLOCK
();

597 
	`GsWpUƒólizeWödow
(
wp
, 
GR_TRUE
);

598 
	`Off£tWödow
(
wp
, 
offx
, 
offy
);

599 
	`GsWpRólizeWödow
(
wp
, 
GR_FALSE
);

600 
	`DñivîUpd©eMoveEvítAndChûdªn
(
wp
);

602 
	`SERVER_UNLOCK
();

604 
	}
}

610 
	$GrResizeWödow
(
GR_WINDOW_ID
 
wid
, 
GR_SIZE
 
width
, GR_SIZE 
height
)

612 
GR_WINDOW
 *
wp
;

614 
	`SERVER_LOCK
();

616 
wp
 = 
	`GsFödWödow
(
wid
);

617 i‡(
wp
 =
NULL
) {

618 
	`SERVER_UNLOCK
();

621 i‡(
wp
 =
roŸwp
) {

622 
	`GsEº‹
(
GR_ERROR_ILLEGAL_ON_ROOT_WINDOW
, 
wid
);

623 
	`SERVER_UNLOCK
();

626 i‡((
width
 <0Ë|| (
height
 <= 0)) {

627 
	`GsEº‹
(
GR_ERROR_BAD_WINDOW_SIZE
, 
wid
);

628 
	`SERVER_UNLOCK
();

632 i‡((
wp
->
width
 =widthË&& (wp->
height
 == height)) {

633 
	`SERVER_UNLOCK
();

637 i‡(!
wp
->
ªÆized
 || !wp->
ouçut
) {

638 
wp
->
width
 = width;

639 
wp
->
height
 = height;

640 
	`SERVER_UNLOCK
();

648 
	`GsWpUƒólizeWödow
(
wp
, 
GR_TRUE
);

649 
wp
->
width
 = width;

650 
wp
->
height
 = height;

652 
	`GsDñivîUpd©eEvít
(
wp
, 
GR_UPDATE_SIZE
, wp->
x
, wp->
y
, 
width
, 
height
);

653 
	`GsWpRólizeWödow
(
wp
, 
GR_FALSE
);

655 
	`SERVER_UNLOCK
();

656 
	}
}

662 
	$GrRï¨ítWödow
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
pwid
, 
GR_COORD
 
x
, GR_COORD 
y
)

664 
GR_WINDOW
 *
wp
;

665 
GR_WINDOW
 *
pwp
;

666 
GR_WINDOW
 **
mysib±r
;

667 
GR_COORD
 
offx
, 
offy
;

669 
	`SERVER_LOCK
();

671 
wp
 = 
	`GsFödWödow
(
wid
);

672 
pwp
 = 
	`GsFödWödow
(
pwid
);

673 i‡(!
wp
 || !
pwp
 || wp ==Öwp) {

674 
	`SERVER_UNLOCK
();

677 i‡(
wp
 =
roŸwp
) {

678 
	`GsEº‹
(
GR_ERROR_ILLEGAL_ON_ROOT_WINDOW
, 
wid
);

679 
	`SERVER_UNLOCK
();

684 
x
 +
pwp
->x;

685 
y
 +
pwp
->y;

686 
offx
 = 
x
 - 
wp
->x;

687 
offy
 = 
y
 - 
wp
->y;

693 
	`GsWpUƒólizeWödow
(
wp
, 
GR_TRUE
);

696 
mysib±r
 = &(
wp
->
∑ª¡
->
chûdªn
); *mysibptr != wp;

697 
mysib±r
 = &((*mysib±r)->
siblögs
))

700 *
mysib±r
 = 
wp
->
siblögs
;

701 
wp
->
∑ª¡
 = 
pwp
;

702 
wp
->
siblögs
 = 
pwp
->
chûdªn
;

703 
pwp
->
chûdªn
 = 
wp
;

705 i‡(
offx
 || 
offy
)

706 
	`Off£tWödow
(
wp
, 
offx
, 
offy
);

715 
	`GsWpRólizeWödow
(
wp
, 
GR_TRUE
);

718 
	`GsDñivîUpd©eEvít
(
wp
, 
GR_UPDATE_REPARENT
, wp->
x
, wp->
y
, wp->
width
, wp->
height
);

720 
	`SERVER_UNLOCK
();

721 
	}
}

723 
	g√xtgcid
 = 1000;

728 
GR_GC_ID


729 
	$GrNewGC
()

731 
GR_GC
 *
g˝
;

733 
	`SERVER_LOCK
();

735 
g˝
 = (
GR_GC
 *Ë
	`mÆloc
((GR_GC));

736 i‡(
g˝
 =
NULL
) {

737 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 0);

738 
	`SERVER_UNLOCK
();

742 
g˝
->
id
 = 
√xtgcid
++;

743 
g˝
->
mode
 = 
GR_MODE_COPY
;

744 
g˝
->
ªgi⁄id
 = 0;

745 
g˝
->
xoff
 = 0;

746 
g˝
->
yoff
 = 0;

747 
g˝
->
f⁄tid
 = 0;

748 
g˝
->
f‹eground
 = 
WHITE
;

749 
g˝
->
background
 = 
BLACK
;

750 
g˝
->
fgi•ixñvÆ
 = 
GR_FALSE
;

751 
g˝
->
bgi•ixñvÆ
 = 
GR_FALSE
;

752 
g˝
->
u£background
 = 
GR_TRUE
;

754 
g˝
->
exposuª
 = 
GR_TRUE
;

756 
g˝
->
löe°yÀ
 = 
GR_LINE_SOLID
;

757 
g˝
->
fûlmode
 = 
GR_FILL_SOLID
;

759 
g˝
->
dashcou¡
 = 0;

760 
g˝
->
dashmask
 = 0;

762 
g˝
->
°ù∂e
.
bôm≠
 = 
NULL
;

763 
g˝
->
°ù∂e
.
width
 = 0;

764 
g˝
->
°ù∂e
.
height
 = 0;

766 
g˝
->
tûe
.
psd
 = 
NULL
;

767 
g˝
->
tûe
.
width
 = 0;

768 
g˝
->
tûe
.
height
 = 0;

770 
g˝
->
ts_off£t
.
x
 = 0;

771 
g˝
->
ts_off£t
.
y
 = 0;

773 
g˝
->
ch™ged
 = 
GR_TRUE
;

774 
g˝
->
ow√r
 = 
cur˛õ¡
;

775 
g˝
->
√xt
 = 
li°g˝
;

777 
li°g˝
 = 
g˝
;

779 
	`SERVER_UNLOCK
();

781  
g˝
->
id
;

782 
	}
}

788 
	$GrDe°royGC
(
GR_GC_ID
 
gc
)

790 
GR_GC
 *
g˝
;

791 
GR_GC
 *
¥evg˝
;

793 
	`SERVER_LOCK
();

795 
g˝
 = 
	`GsFödGC
(
gc
);

796 i‡(
g˝
 =
NULL
) {

797 
	`SERVER_UNLOCK
();

801 i‡(
gc
 =
ˇchegcid
) {

802 
ˇchegcid
 = 0;

803 
ˇcheg˝
 = 
NULL
;

805 i‡(
g˝
 =
curg˝
)

806 
curg˝
 = 
NULL
;

808 i‡(
li°g˝
 =
g˝
)

809 
li°g˝
 = 
g˝
->
√xt
;

811 
¥evg˝
 = 
li°g˝
;

812 
¥evg˝
->
√xt
 !
g˝
)

813 
¥evg˝
 =Öªvg˝->
√xt
;

815 
¥evg˝
->
√xt
 = 
g˝
->next;

818 i‡(
g˝
->
°ù∂e
.
bôm≠
)

819 
	`‰ì
(
g˝
->
°ù∂e
.
bôm≠
);

820 
	`‰ì
(
g˝
);

822 
	`SERVER_UNLOCK
();

823 
	}
}

829 
GR_GC_ID


830 
	$GrC›yGC
(
GR_GC_ID
 
gc
)

832 
GR_GC
 *
ﬁdg˝
;

833 
GR_GC
 *
g˝
;

834 
GR_GC_ID
 
id
;

836 
	`SERVER_LOCK
();

838 
ﬁdg˝
 = 
	`GsFödGC
(
gc
);

839 i‡(
ﬁdg˝
 =
NULL
) {

840 
	`SERVER_UNLOCK
();

844 
g˝
 = (
GR_GC
 *Ë
	`mÆloc
((GR_GC));

845 i‡(
g˝
 =
NULL
) {

846 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 0);

847 
	`SERVER_UNLOCK
();

855 *
g˝
 = *
ﬁdg˝
;

856 
g˝
->
id
 = 
√xtgcid
++;

857 
id
 = 
g˝
->id;

858 
g˝
->
ch™ged
 = 
GR_TRUE
;

859 
g˝
->
ow√r
 = 
cur˛õ¡
;

860 
g˝
->
√xt
 = 
li°g˝
;

861 
li°g˝
 = 
g˝
;

863 
	`SERVER_UNLOCK
();

865  
id
;

866 
	}
}

872 
	$GrGëGCInfo
(
GR_GC_ID
 
gc
, 
GR_GC_INFO
 *
gcù
)

874 
GR_GC
 *
g˝
;

876 
	`SERVER_LOCK
();

881 
g˝
 = 
li°g˝
; g˝ && (g˝->
id
 !
gc
); g˝ = g˝->
√xt
)

884 i‡(
g˝
 =
NULL
) {

885 
	`mem£t
(
gcù
, 0, (
GR_GC_INFO
));

886 
	`SERVER_UNLOCK
();

890 
gcù
->
gcid
 = 
gc
;

891 
gcù
->
mode
 = 
g˝
->mode;

892 
gcù
->
ªgi⁄
 = 
g˝
->
ªgi⁄id
;

893 
gcù
->
xoff
 = 
g˝
->xoff;

894 
gcù
->
yoff
 = 
g˝
->yoff;

895 
gcù
->
f⁄t
 = 
g˝
->
f⁄tid
;

896 
gcù
->
f‹eground
 = 
g˝
->foreground;

897 
gcù
->
background
 = 
g˝
->background;

898 
gcù
->
fgi•ixñvÆ
 = 
g˝
->fgispixelval;

899 
gcù
->
bgi•ixñvÆ
 = 
g˝
->bgispixelval;

900 
gcù
->
u£background
 = 
g˝
->usebackground;

901 
gcù
->
exposuª
 = 
g˝
->exposure;

903 
	`SERVER_UNLOCK
();

904 
	}
}

906 
	g√xåegi⁄id
 = 1000;

911 
GR_REGION_ID


912 
	$GrNewRegi⁄
()

914 
GR_REGION
 *
ªgi⁄p
;

915 
GR_REGION_ID
 
id
;

917 
	`SERVER_LOCK
();

919 
ªgi⁄p
 = (
GR_REGION
 *Ë
	`mÆloc
((GR_REGION));

920 i‡(
ªgi⁄p
 =
NULL
) {

921 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 0);

922 
	`SERVER_UNLOCK
();

926 
ªgi⁄p
->
rgn
 = 
	`GdAŒocRegi⁄
();

927 
ªgi⁄p
->
id
 = 
√xåegi⁄id
++;

928 
ªgi⁄p
->
ow√r
 = 
cur˛õ¡
;

929 
ªgi⁄p
->
√xt
 = 
li°ªgi⁄p
;

931 
li°ªgi⁄p
 = 
ªgi⁄p
;

933 
id
 = 
ªgi⁄p
->id;

935 
	`SERVER_UNLOCK
();

937  
id
;

938 
	}
}

944 
GR_REGION_ID


945 
	$GrNewPﬁyg⁄Regi⁄
(
mode
, 
GR_COUNT
 
cou¡
, 
GR_POINT
 *
poöts
)

947 #i‡
POLYREGIONS


948 
GR_REGION
 *
ªgi⁄p
;

949 
GR_REGION_ID
 
id
;

951 
	`SERVER_LOCK
();

953 
ªgi⁄p
 = (
GR_REGION
 *Ë
	`mÆloc
((GR_REGION));

954 i‡(
ªgi⁄p
 =
NULL
) {

955 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 0);

956 
	`SERVER_UNLOCK
();

960 
ªgi⁄p
->
rgn
 = 
	`GdAŒocPﬁyg⁄Regi⁄
(
poöts
, 
cou¡
, 
mode
);

961 
ªgi⁄p
->
id
 = 
√xåegi⁄id
++;

962 
ªgi⁄p
->
ow√r
 = 
cur˛õ¡
;

963 
ªgi⁄p
->
√xt
 = 
li°ªgi⁄p
;

965 
li°ªgi⁄p
 = 
ªgi⁄p
;

967 
id
 = 
ªgi⁄p
->id;

969 
	`SERVER_UNLOCK
();

971  
id
;

975 
	}
}

981 
	$GrDe°royRegi⁄
(
GR_REGION_ID
 
ªgi⁄
)

983 
GR_REGION
 *
ªgi⁄p
;

984 
GR_REGION
 *
¥evªgi⁄p
;

986 
	`SERVER_LOCK
();

988 
ªgi⁄p
 = 
	`GsFödRegi⁄
(
ªgi⁄
);

989 i‡(
ªgi⁄p
 =
NULL
) {

990 
	`SERVER_UNLOCK
();

994 i‡(
li°ªgi⁄p
 =
ªgi⁄p
) {

995 
li°ªgi⁄p
 = 
ªgi⁄p
->
√xt
;

997 
¥evªgi⁄p
 = 
li°ªgi⁄p
;

998 
¥evªgi⁄p
->
√xt
 !
ªgi⁄p
)

999 
¥evªgi⁄p
 =Öªvªgi⁄p->
√xt
;

1001 
¥evªgi⁄p
->
√xt
 = 
ªgi⁄p
->next;

1003 
	`GdDe°royRegi⁄
(
ªgi⁄p
->
rgn
);

1004 
	`‰ì
(
ªgi⁄p
);

1006 
	`SERVER_UNLOCK
();

1007 
	}
}

1014 
	$GrUni⁄Re˘WôhRegi⁄
(
GR_REGION_ID
 
ªgi⁄
, 
GR_RECT
 *
ª˘
)

1016 
GR_REGION
 *
ªgi⁄p
;

1017 
MWRECT
 
rc
;

1019 
	`SERVER_LOCK
();

1021 
ªgi⁄p
 = 
	`GsFödRegi⁄
(
ªgi⁄
);

1022 i‡(
ªgi⁄p
) {

1024 
rc
.
À·
 = 
ª˘
->
x
;

1025 
rc
.
t›
 = 
ª˘
->
y
;

1026 
rc
.
right
 = 
ª˘
->
x
 +Ñe˘->
width
;

1027 
rc
.
bŸtom
 = 
ª˘
->
y
 +Ñe˘->
height
;

1028 
	`GdUni⁄Re˘WôhRegi⁄
(&
rc
, 
ªgi⁄p
->
rgn
);

1031 
	`SERVER_UNLOCK
();

1032 
	}
}

1038 
	$GrUni⁄Regi⁄
(
GR_REGION_ID
 
d°_rgn
, GR_REGION_ID 
§c_rgn1
,

1039 
GR_REGION_ID
 
§c_rgn2
)

1041 
GR_REGION
 *
ªgi⁄p
;

1042 
GR_REGION
 *
§¸egi⁄p1
;

1043 
GR_REGION
 *
§¸egi⁄p2
;

1045 
	`SERVER_LOCK
();

1047 
ªgi⁄p
 = 
	`GsFödRegi⁄
(
d°_rgn
);

1048 i‡(
ªgi⁄p
 =
NULL
) {

1049 
	`SERVER_UNLOCK
();

1053 
§¸egi⁄p1
 = 
	`GsFödRegi⁄
(
§c_rgn1
);

1054 i‡(
§¸egi⁄p1
 =
NULL
) {

1055 
	`SERVER_UNLOCK
();

1059 
§¸egi⁄p2
 = 
	`GsFödRegi⁄
(
§c_rgn2
);

1060 i‡(
§¸egi⁄p2
 =
NULL
) {

1061 
	`SERVER_UNLOCK
();

1065 
	`GdUni⁄Regi⁄
(
ªgi⁄p
->
rgn
, 
§¸egi⁄p1
->rgn, 
§¸egi⁄p2
->rgn);

1067 
	`SERVER_UNLOCK
();

1068 
	}
}

1074 
	$GrSubåa˘Regi⁄
(
GR_REGION_ID
 
d°_rgn
, GR_REGION_ID 
§c_rgn1
,

1075 
GR_REGION_ID
 
§c_rgn2
)

1077 
GR_REGION
 *
ªgi⁄p
;

1078 
GR_REGION
 *
§¸egi⁄p1
;

1079 
GR_REGION
 *
§¸egi⁄p2
;

1081 
	`SERVER_LOCK
();

1083 
ªgi⁄p
 = 
	`GsFödRegi⁄
(
d°_rgn
);

1084 i‡(
ªgi⁄p
 =
NULL
) {

1085 
	`SERVER_UNLOCK
();

1089 
§¸egi⁄p1
 = 
	`GsFödRegi⁄
(
§c_rgn1
);

1090 i‡(
§¸egi⁄p1
 =
NULL
) {

1091 
	`SERVER_UNLOCK
();

1095 
§¸egi⁄p2
 = 
	`GsFödRegi⁄
(
§c_rgn2
);

1096 i‡(
§¸egi⁄p2
 =
NULL
) {

1097 
	`SERVER_UNLOCK
();

1101 
	`GdSubåa˘Regi⁄
(
ªgi⁄p
->
rgn
, 
§¸egi⁄p1
->rgn, 
§¸egi⁄p2
->rgn);

1103 
	`SERVER_UNLOCK
();

1104 
	}
}

1110 
	$GrX‹Regi⁄
(
GR_REGION_ID
 
d°_rgn
, GR_REGION_ID 
§c_rgn1
,

1111 
GR_REGION_ID
 
§c_rgn2
)

1113 
GR_REGION
 *
ªgi⁄p
;

1114 
GR_REGION
 *
§¸egi⁄p1
;

1115 
GR_REGION
 *
§¸egi⁄p2
;

1117 
	`SERVER_LOCK
();

1119 
ªgi⁄p
 = 
	`GsFödRegi⁄
(
d°_rgn
);

1120 i‡(
ªgi⁄p
 =
NULL
) {

1121 
	`SERVER_UNLOCK
();

1125 
§¸egi⁄p1
 = 
	`GsFödRegi⁄
(
§c_rgn1
);

1126 i‡(
§¸egi⁄p1
 =
NULL
) {

1127 
	`SERVER_UNLOCK
();

1131 
§¸egi⁄p2
 = 
	`GsFödRegi⁄
(
§c_rgn2
);

1132 i‡(
§¸egi⁄p2
 =
NULL
) {

1133 
	`SERVER_UNLOCK
();

1137 
	`GdX‹Regi⁄
(
ªgi⁄p
->
rgn
, 
§¸egi⁄p1
->rgn, 
§¸egi⁄p2
->rgn);

1139 
	`SERVER_UNLOCK
();

1140 
	}
}

1146 
	$GrI¡î£˘Regi⁄
(
GR_REGION_ID
 
d°_rgn
, GR_REGION_ID 
§c_rgn1
,

1147 
GR_REGION_ID
 
§c_rgn2
)

1149 
GR_REGION
 *
ªgi⁄p
;

1150 
GR_REGION
 *
§¸egi⁄p1
;

1151 
GR_REGION
 *
§¸egi⁄p2
;

1153 
	`SERVER_LOCK
();

1155 
ªgi⁄p
 = 
	`GsFödRegi⁄
(
d°_rgn
);

1156 i‡(
ªgi⁄p
 =
NULL
) {

1157 
	`SERVER_UNLOCK
();

1161 
§¸egi⁄p1
 = 
	`GsFödRegi⁄
(
§c_rgn1
);

1162 i‡(
§¸egi⁄p1
 =
NULL
) {

1163 
	`SERVER_UNLOCK
();

1167 
§¸egi⁄p2
 = 
	`GsFödRegi⁄
(
§c_rgn2
);

1168 i‡(
§¸egi⁄p2
 =
NULL
) {

1169 
	`SERVER_UNLOCK
();

1173 
	`GdI¡î£˘Regi⁄
(
ªgi⁄p
->
rgn
, 
§¸egi⁄p1
->rgn, 
§¸egi⁄p2
->rgn);

1175 
	`SERVER_UNLOCK
();

1176 
	}
}

1182 
	$GrSëGCRegi⁄
(
GR_GC_ID
 
gc
, 
GR_REGION_ID
 
ªgi⁄
)

1184 
GR_GC
 *
g˝
;

1186 
	`SERVER_LOCK
();

1188 
g˝
 = 
	`GsFödGC
(
gc
);

1189 i‡(
g˝
) {

1190 
g˝
->
ªgi⁄id
 = 
ªgi⁄
;

1191 
g˝
->
ch™ged
 = 
GR_TRUE
;

1194 
	`SERVER_UNLOCK
();

1195 
	}
}

1201 
	$GrSëGCClùOrigö
(
GR_GC_ID
 
gc
, 
xoff
, 
yoff
)

1203 
GR_GC
 *
g˝
;

1205 
	`SERVER_LOCK
();

1207 
g˝
 = 
	`GsFödGC
(
gc
);

1208 i‡(
g˝
) {

1209 
g˝
->
xoff
 = xoff;

1210 
g˝
->
yoff
 = yoff;

1211 
g˝
->
ch™ged
 = 
GR_TRUE
;

1214 
	`SERVER_UNLOCK
();

1215 
	}
}

1220 
GR_BOOL


1221 
	$GrPoötInRegi⁄
(
GR_REGION_ID
 
ªgi⁄
, 
GR_COORD
 
x
, GR_COORD 
y
)

1223 
GR_REGION
 *
ªgi⁄p
;

1224 
GR_BOOL
 
ªsu…
;

1226 
	`SERVER_LOCK
();

1228 
ªgi⁄p
 = 
	`GsFödRegi⁄
(
ªgi⁄
);

1229 i‡(
ªgi⁄p
 =
NULL
) {

1230 
	`SERVER_UNLOCK
();

1231  
GR_FALSE
;

1234 
ªsu…
 = 
	`GdPtInRegi⁄
(
ªgi⁄p
->
rgn
, 
x
, 
y
);

1236 
	`SERVER_UNLOCK
();

1238  
ªsu…
;

1239 
	}
}

1246 
	$GrRe˘InRegi⁄
(
GR_REGION_ID
 
ªgi⁄
, 
GR_COORD
 
x
, GR_COORD 
y
, GR_COORD 
w
,

1247 
GR_COORD
 
h
)

1249 
GR_REGION
 *
ªgi⁄p
;

1250 
MWRECT
 
ª˘
;

1251 
ªsu…
;

1253 
	`SERVER_LOCK
();

1255 
ªgi⁄p
 = 
	`GsFödRegi⁄
(
ªgi⁄
);

1256 i‡(
ªgi⁄p
 =
NULL
) {

1257 
	`SERVER_UNLOCK
();

1258  
MWRECT_OUT
;

1261 
ª˘
.
À·
 = 
x
;

1262 
ª˘
.
t›
 = 
y
;

1263 
ª˘
.
right
 = 
x
 + 
w
;

1264 
ª˘
.
bŸtom
 = 
y
 + 
h
;

1265 
ªsu…
 = 
	`GdRe˘InRegi⁄
(
ªgi⁄p
->
rgn
, &
ª˘
);

1267 
	`SERVER_UNLOCK
();

1269  
ªsu…
;

1270 
	}
}

1275 
GR_BOOL


1276 
	$GrEm±yRegi⁄
(
GR_REGION_ID
 
ªgi⁄
)

1278 
GR_REGION
 *
ªgi⁄p
;

1279 
GR_BOOL
 
ªsu…
;

1281 
	`SERVER_LOCK
();

1283 
ªgi⁄p
 = 
	`GsFödRegi⁄
(
ªgi⁄
);

1284 i‡(
ªgi⁄p
 =
NULL
) {

1285 
	`SERVER_UNLOCK
();

1286  
GR_TRUE
;

1289 
ªsu…
 = 
	`GdEm±yRegi⁄
(
ªgi⁄p
->
rgn
);

1291 
	`SERVER_UNLOCK
();

1293  
ªsu…
;

1294 
	}
}

1299 
GR_BOOL


1300 
	$GrEquÆRegi⁄
(
GR_REGION_ID
 
rgn1
, GR_REGION_ID 
rgn2
)

1302 
GR_REGION
 *
¥gn1
;

1303 
GR_REGION
 *
¥gn2
;

1304 
GR_BOOL
 
ªsu…
;

1306 
	`SERVER_LOCK
();

1308 
¥gn1
 = 
	`GsFödRegi⁄
(
rgn1
);

1309 
¥gn2
 = 
	`GsFödRegi⁄
(
rgn2
);

1311 i‡(!
¥gn1
 && !
¥gn2
) {

1312 
ªsu…
 = 
GR_TRUE
;

1313 } i‡(!
¥gn1
 || !
¥gn2
) {

1314 
ªsu…
 = 
GR_FALSE
;

1316 
ªsu…
 = 
	`GdEquÆRegi⁄
(
¥gn1
->
rgn
, 
¥gn2
->rgn);

1319 
	`SERVER_UNLOCK
();

1321  
ªsu…
;

1322 
	}
}

1328 
	$GrOff£tRegi⁄
(
GR_REGION_ID
 
ªgi⁄
, 
GR_SIZE
 
dx
, GR_SIZE 
dy
)

1330 
GR_REGION
 *
ªgi⁄p
;

1332 
	`SERVER_LOCK
();

1334 
ªgi⁄p
 = 
	`GsFödRegi⁄
(
ªgi⁄
);

1335 i‡(
ªgi⁄p
)

1336 
	`GdOff£tRegi⁄
(
ªgi⁄p
->
rgn
, 
dx
, 
dy
);

1338 
	`SERVER_UNLOCK
();

1339 
	}
}

1345 
	$GrGëRegi⁄Box
(
GR_REGION_ID
 
ªgi⁄
, 
GR_RECT
 *
ª˘
)

1347 
GR_REGION
 *
ªgi⁄p
;

1348 
MWRECT
 
rc
;

1349 
ªt_vÆ
;

1351 
	`SERVER_LOCK
();

1353 
ªgi⁄p
 = 
	`GsFödRegi⁄
(
ªgi⁄
);

1354 i‡(
ªgi⁄p
 =
NULL
) {

1355 
	`mem£t
(
ª˘
, 0, (
GR_RECT
));

1356 
	`SERVER_UNLOCK
();

1357  
MWREGION_ERROR
;

1360 
ªt_vÆ
 = 
	`GdGëRegi⁄Box
(
ªgi⁄p
->
rgn
, &
rc
);

1362 
ª˘
->
x
 = 
rc
.
À·
;

1363 
ª˘
->
y
 = 
rc
.
t›
;

1364 
ª˘
->
width
 = 
rc
.
right
 -Ñc.
À·
;

1365 
ª˘
->
height
 = 
rc
.
bŸtom
 -Ñc.
t›
;

1367 
	`SERVER_UNLOCK
();

1369  
ªt_vÆ
;

1370 
	}
}

1372 
	g√xtf⁄tid
 = 1000;

1377 
GR_FONT_ID


1378 
	$GrCª©eF⁄t
(
GR_CHAR
 *
«me
, 
GR_COORD
 
height
, 
GR_LOGFONT
 *
∂ogf⁄t
)

1380 
GR_FONT
 *
f⁄ç
;

1382 
	`SERVER_LOCK
();

1384 
f⁄ç
 = (
GR_FONT
 *Ë
	`mÆloc
((GR_FONT));

1385 i‡(
f⁄ç
 =
NULL
) {

1386 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 0);

1387 
	`SERVER_UNLOCK
();

1391 i‡(
∂ogf⁄t
)

1392 
f⁄ç
->
pf⁄t
 = 
	`GdCª©eF⁄t
(&
s¸dev
, 
NULL
, 0, 
∂ogf⁄t
);

1394 
f⁄ç
->
pf⁄t
 = 
	`GdCª©eF⁄t
(&
s¸dev
, (c⁄° *)
«me
, 
height
, 
NULL
);

1397 i‡(!
f⁄ç
->
pf⁄t
) {

1398 
	`‰ì
(
f⁄ç
);

1402 
f⁄ç
->
id
 = 
√xtf⁄tid
++;

1403 
f⁄ç
->
ow√r
 = 
cur˛õ¡
;

1404 
f⁄ç
->
√xt
 = 
li°f⁄ç
;

1406 
li°f⁄ç
 = 
f⁄ç
;

1408 
	`SERVER_UNLOCK
();

1410  
f⁄ç
->
id
;

1411 
	}
}

1413 #i‡
HAVE_FREETYPE_2_SUPPORT


1418 
GR_FONT_ID


1419 
	$GrCª©eF⁄tFromBuf„r
(c⁄° *
buf„r
, 
Àngth
,

1420 c⁄° *
f‹m©
, 
GR_COORD
 
height
)

1422 
GR_FONT
 *
f⁄ç
;

1424 
	`SERVER_LOCK
();

1426 
f⁄ç
 = (
GR_FONT
 *)
	`mÆloc
((GR_FONT));

1427 i‡(
f⁄ç
 =
NULL
) {

1428 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 0);

1429 
	`SERVER_UNLOCK
();

1438 
f⁄ç
->
pf⁄t
 = 
	`GdCª©eF⁄tFromBuf„r
(&
s¸dev
, 
buf„r
, 
Àngth
, 
f‹m©
,

1439 
height
);

1440 i‡(
f⁄ç
->
pf⁄t
 =
NULL
) {

1442 
	`‰ì
(
f⁄ç
);

1443 
	`SERVER_UNLOCK
();

1447 
f⁄ç
->
id
 = 
√xtf⁄tid
++;

1448 
f⁄ç
->
ow√r
 = 
cur˛õ¡
;

1449 
f⁄ç
->
√xt
 = 
li°f⁄ç
;

1450 
li°f⁄ç
 = 
f⁄ç
;

1452 
	`SERVER_UNLOCK
();

1453  
f⁄ç
->
id
;

1454 
	}
}

1460 
GR_FONT_ID


1461 
	$GrC›yF⁄t
(
GR_FONT_ID
 
f⁄tid
, 
GR_COORD
 
height
)

1463 
GR_FONT
 *
§cf⁄ç
;

1464 
GR_FONT
 *
f⁄ç
;

1466 
	`SERVER_LOCK
();

1468 
f⁄ç
 = (
GR_FONT
 *)
	`mÆloc
((GR_FONT));

1469 i‡(
f⁄ç
 =
NULL
) {

1470 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 0);

1471 
	`SERVER_UNLOCK
();

1475 
§cf⁄ç
 = 
	`GsFödF⁄t
(
f⁄tid
);

1476 i‡(
§cf⁄ç
)

1477 
f⁄ç
->
pf⁄t
 = 
	`GdDu∂iˇãF⁄t
(&
s¸dev
, 
§cf⁄ç
->pf⁄t,
height
);

1479 
f⁄ç
->
pf⁄t
 = 
	`GdCª©eF⁄t
(&
s¸dev
, 
NULL
, 
height
, NULL);

1481 
f⁄ç
->
id
 = 
√xtf⁄tid
++;

1482 
f⁄ç
->
ow√r
 = 
cur˛õ¡
;

1483 
f⁄ç
->
√xt
 = 
li°f⁄ç
;

1484 
li°f⁄ç
 = 
f⁄ç
;

1486 
	`SERVER_UNLOCK
();

1487  
f⁄ç
->
id
;

1488 
	}
}

1493 
	$GrSëF⁄tSize
(
GR_FONT_ID
 
f⁄tid
, 
GR_COORD
 
size
)

1495 
GR_FONT
 *
f⁄ç
;

1497 
	`SERVER_LOCK
();

1499 
f⁄ç
 = 
	`GsFödF⁄t
(
f⁄tid
);

1500 i‡(
f⁄ç
)

1501 
	`GdSëF⁄tSize
(
f⁄ç
->
pf⁄t
, 
size
);

1503 
	`SERVER_UNLOCK
();

1504 
	}
}

1508 
	$GrSëF⁄tRŸ©i⁄
(
GR_FONT_ID
 
f⁄tid
, 
ã¡hdegªes
)

1510 
GR_FONT
 *
f⁄ç
;

1512 
	`SERVER_LOCK
();

1514 
f⁄ç
 = 
	`GsFödF⁄t
(
f⁄tid
);

1515 i‡(
f⁄ç
)

1516 
	`GdSëF⁄tRŸ©i⁄
(
f⁄ç
->
pf⁄t
, 
ã¡hdegªes
);

1518 
	`SERVER_UNLOCK
();

1519 
	}
}

1523 
	$GrSëF⁄tAâr
(
GR_FONT_ID
 
f⁄tid
, 
£tÊags
, 
˛rÊags
)

1525 
GR_FONT
 *
f⁄ç
;

1527 
	`SERVER_LOCK
();

1529 
f⁄ç
 = 
	`GsFödF⁄t
(
f⁄tid
);

1530 i‡(
f⁄ç
)

1531 
	`GdSëF⁄tAâr
(
f⁄ç
->
pf⁄t
, 
£tÊags
, 
˛rÊags
);

1533 
	`SERVER_UNLOCK
();

1534 
	}
}

1540 
	$GrDe°royF⁄t
(
GR_FONT_ID
 
f⁄tid
)

1542 
GR_FONT
 *
f⁄ç
;

1543 
GR_FONT
 *
¥evf⁄ç
;

1545 
	`SERVER_LOCK
();

1547 
f⁄ç
 = 
	`GsFödF⁄t
(
f⁄tid
);

1548 i‡(
f⁄ç
 =
NULL
) {

1549 
	`SERVER_UNLOCK
();

1553 i‡(
li°f⁄ç
 =
f⁄ç
)

1554 
li°f⁄ç
 = 
f⁄ç
->
√xt
;

1556 
¥evf⁄ç
 = 
li°f⁄ç
;

1557 
¥evf⁄ç
->
√xt
 !
f⁄ç
)

1558 
¥evf⁄ç
 =Öªvf⁄ç->
√xt
;

1560 
¥evf⁄ç
->
√xt
 = 
f⁄ç
->next;

1562 
	`GdDe°royF⁄t
(
f⁄ç
->
pf⁄t
);

1563 
	`‰ì
(
f⁄ç
);

1565 
	`SERVER_UNLOCK
();

1566 
	}
}

1573 
	$GrGëF⁄tInfo
(
GR_FONT_ID
 
f⁄t
, 
GR_FONT_INFO
 *
fù
)

1575 
GR_FONT
 *
f⁄ç
;

1576 
PMWFONT
 
pf
;

1578 
	`SERVER_LOCK
();

1580 i‡(
f⁄t
 == 0)

1581 
pf
 = 
°df⁄t
;

1583 
f⁄ç
 = 
	`GsFödF⁄t
(
f⁄t
);

1584 i‡(!
f⁄ç
) {

1585 
	`mem£t
(
fù
, 0, (
GR_FONT_INFO
));

1586 
	`SERVER_UNLOCK
();

1589 
pf
 = 
f⁄ç
->
pf⁄t
;

1591 
	`GdGëF⁄tInfo
(
pf
, 
fù
);

1593 
	`SERVER_UNLOCK
();

1594 
	}
}

1601 
	$GrSñe˘Evíts
(
GR_WINDOW_ID
 
wid
, 
GR_EVENT_MASK
 
evítmask
)

1603 
GR_WINDOW
 *
wp
;

1604 
GR_EVENT_CLIENT
 *
evp
;

1606 
	`SERVER_LOCK
();

1608 
wp
 = 
	`GsFödWödow
(
wid
);

1609 i‡(
wp
 =
NULL
) {

1610 
	`SERVER_UNLOCK
();

1618 
evp
 = 
wp
->
evít˛õ¡s
;Évp;Év∞evp->
√xt
) {

1619 i‡(
evp
->
˛õ¡
 =
cur˛õ¡
) {

1620 
evp
->
evítmask
 =Éventmask;

1621 
	`SERVER_UNLOCK
();

1630 
evp
 = (
GR_EVENT_CLIENT
 *Ë
	`mÆloc
((GR_EVENT_CLIENT));

1631 i‡(
evp
 =
NULL
) {

1632 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 
wid
);

1633 
	`SERVER_UNLOCK
();

1637 
evp
->
˛õ¡
 = 
cur˛õ¡
;

1638 
evp
->
evítmask
 =Éventmask;

1639 
evp
->
√xt
 = 
wp
->
evít˛õ¡s
;

1640 
wp
->
evít˛õ¡s
 = 
evp
;

1648 i‡(
wid
==
GR_ROOT_WINDOW_ID
 && (
evítmask
 & 
GR_EVENT_MASK_CHLD_UPDATE
)) {

1649 
wp
 = 
li°wp
; wp; w∞wp->
√xt
) {

1650 i‡(
wp
->
ªÆized
)

1651 
	`GsDñivîUpd©eEvít
(
wp
, 
GR_UPDATE_MAP
,

1652 
wp
->
x
, wp->
y
, wp->
width
, wp->
height
);

1656 
	`SERVER_UNLOCK
();

1657 
	}
}

1659 
GR_WINDOW
 *

1660 
	$NewWödow
(
GR_WINDOW
 *
pwp
, 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
width
,

1661 
GR_SIZE
 
height
, GR_SIZE 
b‹dîsize
, 
GR_COLOR
 
background
,

1662 
GR_COLOR
 
b‹dîcﬁ‹
)

1664 
GR_WINDOW
 *
wp
;

1666 i‡(
width
 <0 || 
height
 <0 || 
b‹dîsize
 < 0) {

1667 
	`GsEº‹
(
GR_ERROR_BAD_WINDOW_SIZE
, 0);

1668  
NULL
;

1671 
wp
 = (
GR_WINDOW
 *Ë
	`mÆloc
((GR_WINDOW));

1672 i‡(
wp
 =
NULL
) {

1673 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 0);

1674  
NULL
;

1677 
wp
->
id
 = 
√xtid
++;

1678 
wp
->
psd
 = 
roŸwp
->psd;

1679 
wp
->
∑ª¡
 = 
pwp
;

1680 
wp
->
chûdªn
 = 
NULL
;

1681 
wp
->
siblögs
 = 
pwp
->
chûdªn
;

1682 
wp
->
√xt
 = 
li°wp
;

1683 
wp
->
x
 = 
pwp
->x + x;

1684 
wp
->
y
 = 
pwp
->y + y;

1685 
wp
->
width
 = width;

1686 
wp
->
height
 = height;

1687 
wp
->
b‹dîsize
 = bordersize;

1688 
wp
->
background
 = background;

1689 
wp
->
bgpixm≠
 = 
NULL
;

1690 
wp
->
bgpixm≠Êags
 = 
GR_BACKGROUND_TILE
;

1691 
wp
->
b‹dîcﬁ‹
 = bordercolor;

1692 
wp
->
n›r›mask
 = 0;

1693 
wp
->
evít˛õ¡s
 = 
NULL
;

1694 
wp
->
ow√r
 = 
cur˛õ¡
;

1695 
wp
->
curs‹id
 = 
pwp
->cursorid;

1696 
wp
->
m≠≥d
 = 
GR_FALSE
;

1697 
wp
->
ªÆized
 = 
GR_FALSE
;

1698 
wp
->
ouçut
 = 
GR_TRUE
;

1699 
wp
->
¥›s
 = 0;

1700 
wp
->
tôÀ
 = 
NULL
;

1701 
wp
->
˛ùªgi⁄
 = 
NULL
;

1703 
pwp
->
chûdªn
 = 
wp
;

1704 
li°wp
 = 
wp
;

1706  
wp
;

1707 
	}
}

1714 
GR_WINDOW_ID


1715 
	$GrNewWödow
(
GR_WINDOW_ID
 
∑ª¡
, 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
width
,

1716 
GR_SIZE
 
height
, GR_SIZE 
b‹dîsize
, 
GR_COLOR
 
background
,

1717 
GR_COLOR
 
b‹dîcﬁ‹
)

1719 
GR_WINDOW
 *
pwp
;

1720 
GR_WINDOW
 *
wp
;

1721 
GR_WINDOW_ID
 
id
;

1723 
	`SERVER_LOCK
();

1725 
pwp
 = 
	`GsFödWödow
(
∑ª¡
);

1726 i‡(
pwp
 =
NULL
) {

1727 
	`SERVER_UNLOCK
();

1731 i‡(!
pwp
->
ouçut
) {

1732 
	`GsEº‹
(
GR_ERROR_INPUT_ONLY_WINDOW
, 
pwp
->
id
);

1733 
	`SERVER_UNLOCK
();

1737 
wp
 = 
	`NewWödow
(
pwp
, 
x
, 
y
, 
width
, 
height
, 
b‹dîsize
, 
background
,

1738 
b‹dîcﬁ‹
);

1739 
id
 = 
wp
? wp->id: 0;

1741 
	`SERVER_UNLOCK
();

1743  
id
;

1744 
	}
}

1752 
GR_WINDOW_ID


1753 
	$GrNewI≈utWödow
(
GR_WINDOW_ID
 
∑ª¡
, 
GR_COORD
 
x
, GR_COORD 
y
,

1754 
GR_SIZE
 
width
, GR_SIZE 
height
)

1756 
GR_WINDOW
 *
pwp
;

1757 
GR_WINDOW
 *
wp
;

1758 
GR_WINDOW_ID
 
id
;

1760 
	`SERVER_LOCK
();

1762 
pwp
 = 
	`GsFödWödow
(
∑ª¡
);

1763 i‡(
pwp
 =
NULL
) {

1764 
	`SERVER_UNLOCK
();

1768 
wp
 = 
	`NewWödow
(
pwp
, 
x
, 
y
, 
width
, 
height
, 0, 
BLACK
, BLACK);

1769 i‡(
wp
) {

1771 
wp
->
ouçut
 = 
GR_FALSE
;

1772 
id
 = 
wp
->id;

1773 
	`SERVER_UNLOCK
();

1774  
id
;

1776 
	`SERVER_UNLOCK
();

1778 
	}
}

1784 
GR_WINDOW_ID


1785 
	$GrNewPixm≠
(
GR_SIZE
 
width
, GR_SIZE 
height
, * 
pixñs
)

1787 
GR_PIXMAP
 *
µ
;

1788 
PSD
 
psd
;

1789 
size
, 
löñí
, 
bµ
, 
∂™es
;

1790 
GR_WINDOW_ID
 
id
;

1792 i‡(
width
 <0 || 
height
 <= 0) {

1798 
	`SERVER_LOCK
();

1805 
∂™es
 = 
roŸwp
->
psd
->planes;

1806 
bµ
 = 
roŸwp
->
psd
->bpp;

1807 
psd
 = 
roŸwp
->psd->
	`AŒoˇãMemGC
(rootwp->psd);

1808 i‡(!
psd
) {

1809 
	`SERVER_UNLOCK
();

1813 
µ
 = (
GR_PIXMAP
 *Ë
	`mÆloc
((GR_PIXMAP));

1814 i‡(
µ
 =
NULL
) {

1815 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 0);

1816 
psd
->
	`FªeMemGC
(psd);

1817 
	`SERVER_UNLOCK
();

1821 
	`GdCÆcMemGCAŒoc
(
psd
, 
width
, 
height
, 0, 0, &
size
, &
löñí
);

1824 i‡(!
pixñs
) {

1825 
pixñs
 = 
	`ˇŒoc
(
size
, 1);

1826 
psd
->
Êags
 |
PSF_ADDRMALLOC
;

1828 i‡(!
pixñs
) {

1829 
	`‰ì
(
µ
);

1830 
psd
->
	`FªeMemGC
(psd);

1831 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 0);

1832 
	`SERVER_UNLOCK
();

1836 
µ
->
id
 = 
√xtid
++;

1837 
µ
->
√xt
 = 
li°µ
;

1838 
µ
->
psd
 =Ösd;

1839 
µ
->
x
 = 0;

1840 
µ
->
y
 = 0;

1841 
µ
->
width
 = width;

1842 
µ
->
height
 = height;

1843 
µ
->
ow√r
 = 
cur˛õ¡
;

1845 
psd
->
	`M≠MemGC
’sd, 
width
, 
height
, 
∂™es
, 
bµ
, 
löñí
, 
size
,

1846 
pixñs
);

1848 
li°µ
 = 
µ
;

1850 
id
 = 
µ
->id;

1852 
	`SERVER_UNLOCK
();

1854  
id
;

1855 
	}
}

1861 
	$GrM≠Wödow
(
GR_WINDOW_ID
 
wid
)

1863 
GR_WINDOW
 *
wp
;

1865 
	`SERVER_LOCK
();

1867 
wp
 = 
	`GsFödWödow
(
wid
);

1868 i‡(!
wp
 || wp->
m≠≥d
) {

1869 
	`SERVER_UNLOCK
();

1873 
wp
->
m≠≥d
 = 
GR_TRUE
;

1875 
	`GsWpRólizeWödow
(
wp
, 
GR_FALSE
);

1877 
	`SERVER_UNLOCK
();

1878 
	}
}

1884 
	$GrUnm≠Wödow
(
GR_WINDOW_ID
 
wid
)

1886 
GR_WINDOW
 *
wp
;

1888 
	`SERVER_LOCK
();

1890 
wp
 = 
	`GsFödWödow
(
wid
);

1891 i‡(!
wp
 || !wp->
m≠≥d
) {

1892 
	`SERVER_UNLOCK
();

1896 
	`GsWpUƒólizeWödow
(
wp
, 
GR_FALSE
);

1898 
wp
->
m≠≥d
 = 
GR_FALSE
;

1900 
	`SERVER_UNLOCK
();

1901 
	}
}

1908 
	$GrCÀ¨Aªa
(
GR_WINDOW_ID
 
wid
, 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
width
,

1909 
GR_SIZE
 
height
, 
GR_BOOL
 
expo£Êag
)

1911 
GR_WINDOW
 *
wp
;

1913 
	`SERVER_LOCK
();

1915 
wp
 = 
	`GsPª∑ªWödow
(
wid
);

1916 i‡(
wp
) {

1917 i‡(
width
 == 0)

1918 
width
 = 
wp
->width;

1919 i‡(
height
 == 0)

1920 
height
 = 
wp
->height;

1921 
	`GsWpCÀ¨Wödow
(
wp
, 
x
, 
y
, 
width
, 
height
, 
expo£Êag
);

1924 
	`SERVER_UNLOCK
();

1925 
	}
}

1928 
GR_WINDOW_ID


1929 
	$GrGëFocus
()

1931 
GR_WINDOW_ID
 
id
;

1933 
	`SERVER_LOCK
();

1934 
id
 = 
focuswp
->id;

1935 
	`SERVER_UNLOCK
();

1937  
id
;

1938 
	}
}

1946 
	$GrSëFocus
(
GR_WINDOW_ID
 
wid
)

1948 
GR_WINDOW
 *
wp
;

1950 
	`SERVER_LOCK
();

1952 
wp
 = 
	`GsFödWödow
(
wid
);

1953 i‡(
wp
 =
NULL
) {

1954 
	`SERVER_UNLOCK
();

1958 i‡(!
wp
->
ªÆized
) {

1959 
	`GsEº‹
(
GR_ERROR_UNMAPPED_FOCUS_WINDOW
, 
wid
);

1960 
	`SERVER_UNLOCK
();

1965 i‡(
wp
->
¥›s
 & 
GR_WM_PROPS_NOFOCUS
) {

1966 
	`SERVER_UNLOCK
();

1970 
focusfixed
 = (
wp
 !
roŸwp
);

1971 
	`GsWpSëFocus
(
wp
);

1973 
	`SERVER_UNLOCK
();

1974 
	}
}

1979 
	g√xtcurs‹id
 = 1000;

1980 
GR_CURSOR_ID


1981 
	$GrNewCurs‹
(
GR_SIZE
 
width
, GR_SIZE 
height
, 
GR_COORD
 
hŸx
, GR_COORD 
hŸy
,

1982 
GR_COLOR
 
f‹eground
, GR_COLOR 
background
, 
GR_BITMAP
 *
fgbôm≠
,

1983 
GR_BITMAP
 *
bgbôm≠
)

1985 
GR_CURSOR
 *
˝
;

1986 
byãs
;

1987 
GR_CURSOR_ID
 
id
;

1989 
	`SERVER_LOCK
();

1994 i‡(
width
 <0 || width > 
MWMAX_CURSOR_SIZE
 ||

1995 
height
 <0 || heighà> 
MWMAX_CURSOR_SIZE
) {

1996 
	`GsEº‹
(
GR_ERROR_BAD_CURSOR_SIZE
, 0);

1997 
	`SERVER_UNLOCK
();

2001 
˝
 = (
GR_CURSOR
 *)
	`mÆloc
((GR_CURSOR));

2002 i‡(
˝
 =
NULL
) {

2003 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 0);

2004 
	`SERVER_UNLOCK
();

2009 
˝
->
curs‹
.
width
 = width;

2010 
˝
->
curs‹
.
height
 = height;

2011 
˝
->
curs‹
.
hŸx
 = hotx;

2012 
˝
->
curs‹
.
hŸy
 = hoty;

2013 
˝
->
curs‹
.
fgcﬁ‹
 = 
f‹eground
;

2014 
˝
->
curs‹
.
bgcﬁ‹
 = 
background
;

2016 
byãs
 = 
	`GR_BITMAP_SIZE
(
width
, 
height
Ë* (
GR_BITMAP
);

2017 
	`mem˝y
(&
˝
->
curs‹
.
image
, 
fgbôm≠
, 
byãs
);

2018 
	`mem˝y
(&
˝
->
curs‹
.
mask
, 
bgbôm≠
, 
byãs
);

2020 
˝
->
id
 = 
√xtcurs‹id
++;

2021 
˝
->
ow√r
 = 
cur˛õ¡
;

2022 
˝
->
√xt
 = 
li°curs‹p
;

2023 
li°curs‹p
 = 
˝
;

2025 
id
 = 
˝
->id;

2027 
	`SERVER_UNLOCK
();

2029  
id
;

2030 
	}
}

2036 
	$GrDe°royCurs‹
(
GR_CURSOR_ID
 
cid
)

2038 
GR_CURSOR
 *
curs‹p
;

2039 
GR_CURSOR
 *
¥evcurs‹p
;

2041 
	`SERVER_LOCK
();

2043 
curs‹p
 = 
	`GsFödCurs‹
(
cid
);

2044 i‡(
curs‹p
 =
NULL
) {

2045 
	`SERVER_UNLOCK
();

2049 i‡(
li°curs‹p
 =
curs‹p
)

2050 
li°curs‹p
 = 
curs‹p
->
√xt
;

2052 
¥evcurs‹p
 = 
li°curs‹p
;

2053 
¥evcurs‹p
->
√xt
 !
curs‹p
)

2054 
¥evcurs‹p
 =Öªvcurs‹p->
√xt
;

2056 
¥evcurs‹p
->
√xt
 = 
curs‹p
->next;

2059 i‡(
curcurs‹
 =
curs‹p
)

2060 
curcurs‹
 = 
NULL
;

2062 
	`‰ì
(
curs‹p
);

2063 
	`GsCheckCurs‹
();

2065 
	`SERVER_UNLOCK
();

2066 
	}
}

2076 
	$GrSëWödowCurs‹
(
GR_WINDOW_ID
 
wid
, 
GR_CURSOR_ID
 
cid
)

2078 
GR_WINDOW
 *
wp
;

2079 
GR_CURSOR
 *
˝
;

2081 
	`SERVER_LOCK
();

2083 
wp
 = 
	`GsFödWödow
(
wid
);

2084 i‡(
wp
 =
NULL
) {

2085 
	`SERVER_UNLOCK
();

2089 i‡(
cid
 == 0)

2090 
˝
 = 
°dcurs‹
;

2092 
˝
 = 
	`GsFödCurs‹
(
cid
);

2093 i‡(!
˝
) {

2094 
	`SERVER_UNLOCK
();

2098 
wp
->
curs‹id
 = 
cid
;

2103 i‡(
˝
 =
curcurs‹
 || curcurs‹ =
NULL
) {

2104 
	`GdMoveCurs‹
(
curs‹x
 - 
˝
->
curs‹
.
hŸx
,

2105 
curs‹y
 - 
˝
->
curs‹
.
hŸy
);

2106 
	`GdSëCurs‹
(&
˝
->
curs‹
);

2109 
	`GsCheckCurs‹
();

2111 
	`SERVER_UNLOCK
();

2112 
	}
}

2123 
	$GrMoveCurs‹
(
GR_COORD
 
x
, GR_COORD 
y
)

2126 
	`SERVER_LOCK
();

2132 i‡(
x
 !
curs‹x
 || 
y
 !
curs‹y
) {

2133 if(
curcurs‹
) {

2134 
	`GdMoveCurs‹
(
x
 - 
curcurs‹
->
curs‹
.
hŸx
,

2135 
y
 - 
curcurs‹
->
curs‹
.
hŸy
);

2136 
	`GdMoveMou£
(
x
, 
y
);

2138 
curs‹x
 = 
x
;

2139 
curs‹y
 = 
y
;

2147 
	`GsCheckMou£Wödow
();

2148 
	`GsCheckFocusWödow
();

2149 
	`GsCheckCurs‹
();

2151 
	`SERVER_UNLOCK
();

2152 
	}
}

2158 
	$GrSëGCF‹eground
(
GR_GC_ID
 
gc
, 
GR_COLOR
 
f‹eground
)

2160 
GR_GC
 *
g˝
;

2162 
	`SERVER_LOCK
();

2164 
g˝
 = 
	`GsFödGC
(
gc
);

2165 i‡(
g˝
 && ((g˝->
f‹eground
 !f‹egroundË|| g˝->
fgi•ixñvÆ
)) {

2166 
g˝
->
f‹eground
 = foreground;

2167 
g˝
->
fgi•ixñvÆ
 = 
GR_FALSE
;

2168 
g˝
->
ch™ged
 = 
GR_TRUE
;

2171 
	`SERVER_UNLOCK
();

2172 
	}
}

2178 
	$GrSëGCBackground
(
GR_GC_ID
 
gc
, 
GR_COLOR
 
background
)

2180 
GR_GC
 *
g˝
;

2182 
	`SERVER_LOCK
();

2184 
g˝
 = 
	`GsFödGC
(
gc
);

2185 i‡(
g˝
 && ((g˝->
background
 !backgroundË|| g˝->
bgi•ixñvÆ
)) {

2186 
g˝
->
background
 = background;

2187 
g˝
->
bgi•ixñvÆ
 = 
GR_FALSE
;

2188 
g˝
->
ch™ged
 = 
GR_TRUE
;

2191 
	`SERVER_UNLOCK
();

2192 
	}
}

2198 
	$GrSëGCF‹egroundPixñVÆ
(
GR_GC_ID
 
gc
, 
GR_PIXELVAL
 
f‹eground
)

2200 
GR_GC
 *
g˝
;

2202 
	`SERVER_LOCK
();

2204 
g˝
 = 
	`GsFödGC
(
gc
);

2205 i‡(
g˝
 && ((g˝->
f‹eground
 !f‹egroundË|| !g˝->
fgi•ixñvÆ
)) {

2206 
g˝
->
f‹eground
 = foreground;

2207 
g˝
->
fgi•ixñvÆ
 = 
GR_TRUE
;

2208 
g˝
->
ch™ged
 = 
GR_TRUE
;

2211 
	`SERVER_UNLOCK
();

2212 
	}
}

2218 
	$GrSëGCBackgroundPixñVÆ
(
GR_GC_ID
 
gc
, 
GR_PIXELVAL
 
background
)

2220 
GR_GC
 *
g˝
;

2222 
	`SERVER_LOCK
();

2224 
g˝
 = 
	`GsFödGC
(
gc
);

2225 i‡(
g˝
 && ((g˝->
background
 !backgroundË|| !g˝->
bgi•ixñvÆ
)) {

2226 
g˝
->
background
 = background;

2227 
g˝
->
bgi•ixñvÆ
 = 
GR_TRUE
;

2228 
g˝
->
ch™ged
 = 
GR_TRUE
;

2231 
	`SERVER_UNLOCK
();

2232 
	}
}

2238 
	$GrSëGCU£Background
(
GR_GC_ID
 
gc
, 
GR_BOOL
 
Êag
)

2240 
GR_GC
 *
g˝
;

2242 
	`SERVER_LOCK
();

2244 
Êag
 = (flag != 0);

2245 
g˝
 = 
	`GsFödGC
(
gc
);

2246 i‡(
g˝
 && g˝->
u£background
 !
Êag
) {

2247 
g˝
->
u£background
 = 
Êag
;

2248 
g˝
->
ch™ged
 = 
GR_TRUE
;

2251 
	`SERVER_UNLOCK
();

2252 
	}
}

2258 
	$GrSëGCMode
(
GR_GC_ID
 
gc
, 
mode
)

2260 
GR_GC
 *
g˝
;

2262 
	`SERVER_LOCK
();

2264 
g˝
 = 
	`GsFödGC
(
gc
);

2265 i‡(!
g˝
 || g˝->
mode
 == mode) {

2266 
	`SERVER_UNLOCK
();

2269 i‡((
mode
 & 
GR_MODE_DRAWMASK
Ë> 
GR_MAX_MODE
) {

2270 
	`GsEº‹
(
GR_ERROR_BAD_DRAWING_MODE
, 
gc
);

2271 
	`SERVER_UNLOCK
();

2275 
g˝
->
mode
 = mode;

2276 
g˝
->
ch™ged
 = 
GR_TRUE
;

2278 
	`SERVER_UNLOCK
();

2279 
	}
}

2285 
	$GrSëGCLöeAâribuãs
(
GR_GC_ID
 
gc
, 
löe°yÀ
)

2287 
GR_GC
 *
g˝
;

2289 
	`SERVER_LOCK
();

2291 
g˝
 = 
	`GsFödGC
(
gc
);

2292 i‡(!
g˝
) {

2293 
	`SERVER_UNLOCK
();

2297 
löe°yÀ
) {

2298 
GR_LINE_SOLID
:

2299 
GR_LINE_ONOFF_DASH
:

2300 
g˝
->
löe°yÀ
 =Üinestyle;

2304 
	`GsEº‹
(
GR_ERROR_BAD_LINE_ATTRIBUTE
, 
gc
);

2305 
	`SERVER_UNLOCK
();

2308 
g˝
->
ch™ged
 = 
GR_TRUE
;

2310 
	`SERVER_UNLOCK
();

2311 
	}
}

2319 
	$GrSëGCDash
(
GR_GC_ID
 
gc
, *
dashes
, 
cou¡
)

2321 
GR_GC
 *
g˝
;

2322 
dmask
 = 0;

2323 
dcou¡
 = 0;

2324 
⁄off
 = 1;

2325 
i
;

2327 
	`SERVER_LOCK
();

2329 
g˝
 = 
	`GsFödGC
(
gc
);

2330 i‡(!
g˝
) {

2331 
	`SERVER_UNLOCK
();

2336 
i
 = 0; i < 
cou¡
; i++) {

2337 
b
 = 0;

2339 ; 
b
 < 
dashes
[
i
]; b++) {

2340 i‡(
⁄off
)

2341 
dmask
 |(1 << 
dcou¡
);

2342 i‡((++
dcou¡
) == 32)

2346 
⁄off
 = (onoff + 1) % 2;

2347 i‡(
dcou¡
 == 32)

2350 
g˝
->
dashmask
 = 
dmask
;

2351 
g˝
->
dashcou¡
 = 
dcou¡
;

2352 
g˝
->
ch™ged
 = 
GR_TRUE
;

2354 
	`SERVER_UNLOCK
();

2355 
	}
}

2358 
	$GrSëGCFûlMode
(
GR_GC_ID
 
gc
, 
fûlmode
)

2360 
GR_GC
 *
g˝
;

2362 
	`SERVER_LOCK
();

2364 
g˝
 = 
	`GsFödGC
(
gc
);

2365 i‡(!
g˝
) {

2366 
	`SERVER_UNLOCK
();

2370 
fûlmode
) {

2371 
GR_FILL_SOLID
:

2372 
GR_FILL_STIPPLE
:

2373 
GR_FILL_OPAQUE_STIPPLE
:

2374 
GR_FILL_TILE
:

2375 
g˝
->
fûlmode
 = fillmode;

2379 
	`GsEº‹
(
GR_ERROR_BAD_FILL_MODE
, 
gc
);

2380 
	`SERVER_UNLOCK
();

2383 
g˝
->
ch™ged
 = 
GR_TRUE
;

2385 
	`SERVER_UNLOCK
();

2386 
	}
}

2389 
	$GrSëGCStù∂e
(
GR_GC_ID
 
gc
, 
GR_BITMAP
 * 
bôm≠
, 
GR_SIZE
 
width
, GR_SIZE 
height
)

2391 
GR_GC
 *
g˝
;

2393 
	`SERVER_LOCK
();

2395 
g˝
 = 
	`GsFödGC
(
gc
);

2396 i‡(!
g˝
) {

2397 
	`SERVER_UNLOCK
();

2401 i‡(
g˝
->
°ù∂e
.
bôm≠
)

2402 
	`‰ì
(
g˝
->
°ù∂e
.
bôm≠
);

2404 i‡(!
bôm≠
) {

2405 
g˝
->
°ù∂e
.
bôm≠
 = 0;

2406 
g˝
->
°ù∂e
.
width
 = g˝->°ù∂e.
height
 = 0;

2407 
g˝
->
ch™ged
 = 
GR_TRUE
;

2408 
	`SERVER_UNLOCK
();

2412 
g˝
->
°ù∂e
.
bôm≠
 =

2413 
	`mÆloc
(
	`GR_BITMAP_SIZE
(
width
, 
height
Ë* (
GR_BITMAP
));

2414 
	`mem˝y
(
g˝
->
°ù∂e
.
bôm≠
, bitmap,

2415 
	`GR_BITMAP_SIZE
(
width
, 
height
Ë* (
GR_BITMAP
));

2417 
g˝
->
°ù∂e
.
width
 = width;

2418 
g˝
->
°ù∂e
.
height
 = height;

2419 
g˝
->
ch™ged
 = 
GR_TRUE
;

2421 
	`SERVER_UNLOCK
();

2422 
	}
}

2425 
	$GrSëGCTûe
(
GR_GC_ID
 
gc
, 
GR_WINDOW_ID
 
pixm≠
, 
GR_SIZE
 
width
, GR_SIZE 
height
)

2427 
GR_WINDOW
 *
wö
;

2428 
GR_GC
 *
g˝
;

2430 
	`SERVER_LOCK
();

2432 
g˝
 = 
	`GsFödGC
(
gc
);

2433 i‡(!
g˝
) {

2434 
	`SERVER_UNLOCK
();

2438 i‡(!
pixm≠
) {

2439 
g˝
->
tûe
.
psd
 = 
NULL
;

2440 
g˝
->
tûe
.
width
 = g˝->tûe.
height
 = 0;

2441 
g˝
->
ch™ged
 = 
GR_TRUE
;

2442 
	`SERVER_UNLOCK
();

2446 
wö
 = 
	`GsFödWödow
(
pixm≠
);

2447 i‡(
wö
)

2448 
g˝
->
tûe
.
psd
 = 
wö
->psd;

2450 
GR_PIXMAP
 *
pix
 = 
	`GsFödPixm≠
(
pixm≠
);

2451 i‡(!
pix
) {

2452 
g˝
->
tûe
.
psd
 = 
NULL
;

2453 
g˝
->
tûe
.
width
 = g˝->tûe.
height
 = 0;

2454 
g˝
->
ch™ged
 = 
GR_TRUE
;

2455 
	`SERVER_UNLOCK
();

2458 
g˝
->
tûe
.
psd
 = 
pix
->psd;

2462 
g˝
->
tûe
.
width
 = width;

2463 
g˝
->
tûe
.
height
 = height;

2464 
g˝
->
ch™ged
 = 
GR_TRUE
;

2466 
	`SERVER_UNLOCK
();

2467 
	}
}

2470 
	$GrSëGCTSOff£t
(
GR_GC_ID
 
gc
, 
GR_COORD
 
xoff
, GR_COORD 
yoff
)

2472 
GR_GC
 *
g˝
;

2474 
	`SERVER_LOCK
();

2476 
g˝
 = 
	`GsFödGC
(
gc
);

2477 i‡(
g˝
) {

2478 
g˝
->
ts_off£t
.
x
 = 
xoff
;

2479 
g˝
->
ts_off£t
.
y
 = 
yoff
;

2480 
g˝
->
ch™ged
 = 
GR_TRUE
;

2483 
	`SERVER_UNLOCK
();

2484 
	}
}

2490 
	$GrSëGCGøphicsExposuª
(
GR_GC_ID
 
gc
, 
GR_BOOL
 
exposuª
)

2492 
GR_GC
 *
g˝
;

2494 
	`SERVER_LOCK
();

2496 
g˝
 = 
	`GsFödGC
(
gc
);

2497 i‡(
g˝
) {

2498 
g˝
->
exposuª
 =Éxposure;

2499 
g˝
->
ch™ged
 = 
GR_TRUE
;

2502 
	`SERVER_UNLOCK
();

2503 
	}
}

2510 
	$GrSëGCF⁄t
(
GR_GC_ID
 
gc
, 
GR_FONT_ID
 
f⁄t
)

2512 
GR_GC
 *
g˝
;

2514 
	`SERVER_LOCK
();

2516 
g˝
 = 
	`GsFödGC
(
gc
);

2517 i‡(
g˝
 && g˝->
f⁄tid
 !
f⁄t
) {

2518 
g˝
->
f⁄tid
 = 
f⁄t
;

2519 
g˝
->
ch™ged
 = 
GR_TRUE
;

2522 
	`SERVER_UNLOCK
();

2523 
	}
}

2530 
	$GrLöe
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x1
, GR_COORD 
y1
, GR_COORD 
x2
,

2531 
GR_COORD
 
y2
)

2533 
GR_DRAWABLE
 *
dp
;

2535 
	`SERVER_LOCK
();

2537 
	`GsPª∑ªDøwög
(
id
, 
gc
, &
dp
)) {

2538 
GR_DRAW_TYPE_WINDOW
:

2539 
GR_DRAW_TYPE_PIXMAP
:

2540 
	`GdLöe
(
dp
->
psd
, dp->
x
 + 
x1
, dp->
y
 + 
y1
,

2541 
dp
->
x
 + 
x2
, dp->
y
 + 
y2
, 
TRUE
);

2545 
	`SERVER_UNLOCK
();

2546 
	}
}

2555 
	$GrRe˘
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
width
,

2556 
GR_SIZE
 
height
)

2558 
GR_DRAWABLE
 *
dp
;

2560 
	`SERVER_LOCK
();

2562 
	`GsPª∑ªDøwög
(
id
, 
gc
, &
dp
)) {

2563 
GR_DRAW_TYPE_WINDOW
:

2564 
GR_DRAW_TYPE_PIXMAP
:

2565 
	`GdRe˘
(
dp
->
psd
, dp->
x
 + x, dp->
y
 + y, 
width
, 
height
);

2569 
	`SERVER_UNLOCK
();

2570 
	}
}

2577 
	$GrFûlRe˘
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

2578 
GR_SIZE
 
width
, GR_SIZE 
height
)

2580 
GR_DRAWABLE
 *
dp
;

2582 
	`SERVER_LOCK
();

2584 
	`GsPª∑ªDøwög
(
id
, 
gc
, &
dp
)) {

2585 
GR_DRAW_TYPE_WINDOW
:

2586 
GR_DRAW_TYPE_PIXMAP
:

2587 
	`GdFûlRe˘
(
dp
->
psd
, dp->
x
 + x, dp->
y
 + y, 
width
,
height
);

2591 
	`SERVER_UNLOCK
();

2592 
	}
}

2599 
	$GrEŒù£
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
rx
,

2600 
GR_SIZE
 
ry
)

2602 
GR_DRAWABLE
 *
dp
;

2604 
	`SERVER_LOCK
();

2606 
	`GsPª∑ªDøwög
(
id
, 
gc
, &
dp
)) {

2607 
GR_DRAW_TYPE_WINDOW
:

2608 
GR_DRAW_TYPE_PIXMAP
:

2609 
	`GdEŒù£
(
dp
->
psd
, dp->
x
 + x, dp->
y
 + y, 
rx
, 
ry
, 
FALSE
);

2613 
	`SERVER_UNLOCK
();

2614 
	}
}

2621 
	$GrFûlEŒù£
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
rx
,

2622 
GR_SIZE
 
ry
)

2624 
GR_DRAWABLE
 *
dp
;

2626 
	`SERVER_LOCK
();

2628 
	`GsPª∑ªDøwög
(
id
, 
gc
, &
dp
)) {

2629 
GR_DRAW_TYPE_WINDOW
:

2630 
GR_DRAW_TYPE_PIXMAP
:

2631 
	`GdEŒù£
(
dp
->
psd
, dp->
x
 + x, dp->
y
 + y, 
rx
, 
ry
, 
TRUE
);

2635 
	`SERVER_UNLOCK
();

2636 
	}
}

2643 
	$GrArc
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

2644 
GR_SIZE
 
rx
, GR_SIZE 
ry
, 
GR_COORD
 
ax
, GR_COORD 
ay
,

2645 
GR_COORD
 
bx
, GR_COORD 
by
, 
ty≥
)

2647 
GR_DRAWABLE
 *
dp
;

2649 
	`SERVER_LOCK
();

2651 
	`GsPª∑ªDøwög
(
id
, 
gc
, &
dp
)) {

2652 
GR_DRAW_TYPE_WINDOW
:

2653 
GR_DRAW_TYPE_PIXMAP
:

2654 
	`GdArc
(
dp
->
psd
, dp->
x
 + x, dp->
y
 + y, 
rx
, 
ry
, 
ax
, 
ay
,

2655 
bx
, 
by
, 
ty≥
);

2660 
	`SERVER_UNLOCK
();

2661 
	}
}

2668 
	$GrArcAngÀ
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

2669 
GR_SIZE
 
rx
, GR_SIZE 
ry
, 
GR_COORD
 
™gÀ1
, GR_COORD 
™gÀ2
, 
ty≥
)

2671 
GR_DRAWABLE
 *
dp
;

2673 
	`SERVER_LOCK
();

2675 
	`GsPª∑ªDøwög
(
id
, 
gc
, &
dp
)) {

2676 
GR_DRAW_TYPE_WINDOW
:

2677 
GR_DRAW_TYPE_PIXMAP
:

2678 
	`GdArcAngÀ
(
dp
->
psd
, dp->
x
 + x, dp->
y
 + y, 
rx
, 
ry
,

2679 
™gÀ1
, 
™gÀ2
, 
ty≥
);

2683 
	`SERVER_UNLOCK
();

2684 
	}
}

2696 
	$GrBôm≠
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
width
,

2697 
GR_SIZE
 
height
, 
GR_BITMAP
 *
imagebôs
)

2699 
GR_DRAWABLE
 *
dp
;

2701 
	`SERVER_LOCK
();

2703 
	`GsPª∑ªDøwög
(
id
, 
gc
, &
dp
)) {

2704 
GR_DRAW_TYPE_WINDOW
:

2705 
GR_DRAW_TYPE_PIXMAP
:

2706 
	`GdBôm≠
(
dp
->
psd
, dp->
x
 + x, dp->
y
 + y, 
width
, 
height
,

2707 
imagebôs
);

2711 
	`SERVER_UNLOCK
();

2712 
	}
}

2716 
	$GrDøwImageBôs
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

2717 
GR_IMAGE_HDR
 *
pimage
)

2719 
GR_DRAWABLE
 *
dp
;

2721 
	`SERVER_LOCK
();

2723 
	`GsPª∑ªDøwög
(
id
, 
gc
, &
dp
)) {

2724 
GR_DRAW_TYPE_WINDOW
:

2725 
GR_DRAW_TYPE_PIXMAP
:

2726 
	`GdDøwImage
(
dp
->
psd
, dp->
x
 + x, dp->
y
 + y, 
pimage
);

2730 
	`SERVER_UNLOCK
();

2731 
	}
}

2733 #i‡
MW_FEATURE_IMAGES
 && 
deföed
(
HAVE_FILEIO
)

2736 
	$GrDøwImageFromFûe
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

2737 
GR_SIZE
 
width
, GR_SIZE 
height
, * 
∑th
, 
Êags
)

2739 
GR_DRAWABLE
 *
dp
;

2741 
	`SERVER_LOCK
();

2743 
	`GsPª∑ªDøwög
(
id
, 
gc
, &
dp
)) {

2744 
GR_DRAW_TYPE_WINDOW
:

2745 
GR_DRAW_TYPE_PIXMAP
:

2746 
	`GdDøwImageFromFûe
(
dp
->
psd
, dp->
x
 + x, dp->
y
 + y,

2747 
width
, 
height
, 
∑th
, 
Êags
);

2751 
	`SERVER_UNLOCK
();

2752 
	}
}

2755 
GR_IMAGE_ID


2756 
	$GrLﬂdImageFromFûe
(*
∑th
, 
Êags
)

2758 
GR_IMAGE_ID
 
id
;

2759 
GR_IMAGE
 * 
imagï
;

2761 
	`SERVER_LOCK
();

2763 
id
 = 
	`GdLﬂdImageFromFûe
(&
s¸dev
, 
∑th
, 
Êags
);

2764 i‡(!
id
) {

2765 
	`SERVER_UNLOCK
();

2769 
imagï
 = (
GR_IMAGE
 *Ë
	`mÆloc
((GR_IMAGE));

2770 i‡(!
imagï
) {

2771 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 0);

2772 
	`GdFªeImage
(
id
);

2773 
	`SERVER_UNLOCK
();

2777 
imagï
->
id
 = id;

2778 
imagï
->
ow√r
 = 
cur˛õ¡
;

2779 
imagï
->
√xt
 = 
li°imagï
;

2780 
li°imagï
 = 
imagï
;

2782 
	`SERVER_UNLOCK
();

2783  
id
;

2784 
	}
}

2787 #i‡
MW_FEATURE_IMAGES


2790 
	$GrDøwImageFromBuf„r
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

2791 
GR_SIZE
 
width
, GR_SIZE 
height
, *
buf„r
, 
size
, 
Êags
)

2793 
GR_DRAWABLE
 *
dp
;

2795 
	`SERVER_LOCK
();

2797 
	`GsPª∑ªDøwög
(
id
, 
gc
, &
dp
)) {

2798 
GR_DRAW_TYPE_WINDOW
:

2799 
GR_DRAW_TYPE_PIXMAP
:

2800 
	`GdDøwImageFromBuf„r
(
dp
->
psd
, dp->
x
 + x, dp->
y
 + y,

2801 
width
, 
height
, 
buf„r
, 
size
, 
Êags
);

2805 
	`SERVER_UNLOCK
();

2806 
	}
}

2809 
GR_IMAGE_ID


2810 
	$GrLﬂdImageFromBuf„r
(*
buf„r
, 
size
, 
Êags
)

2812 
GR_IMAGE_ID
 
id
;

2813 
GR_IMAGE
 * 
imagï
;

2815 
	`SERVER_LOCK
();

2817 
id
 = 
	`GdLﬂdImageFromBuf„r
(&
s¸dev
, 
buf„r
, 
size
, 
Êags
);

2818 i‡(!
id
) {

2819 
	`SERVER_UNLOCK
();

2823 
imagï
 = (
GR_IMAGE
 *Ë
	`mÆloc
((GR_IMAGE));

2824 i‡(!
imagï
) {

2825 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 0);

2826 
	`GdFªeImage
(
id
);

2827 
	`SERVER_UNLOCK
();

2831 
imagï
->
id
 = id;

2832 
imagï
->
ow√r
 = 
cur˛õ¡
;

2833 
imagï
->
√xt
 = 
li°imagï
;

2834 
li°imagï
 = 
imagï
;

2836 
	`SERVER_UNLOCK
();

2838  
id
;

2839 
	}
}

2843 
	$GrDøwImageToFô
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

2844 
GR_SIZE
 
width
, GR_SIZE 
height
, 
GR_IMAGE_ID
 
imageid
)

2846 
GR_DRAWABLE
 *
dp
;

2848 
	`SERVER_LOCK
();

2850 
	`GsPª∑ªDøwög
(
id
, 
gc
, &
dp
)) {

2851 
GR_DRAW_TYPE_WINDOW
:

2852 
GR_DRAW_TYPE_PIXMAP
:

2853 
	`GdDøwImageToFô
(
dp
->
psd
, dp->
x
 + x, dp->
y
 + y,

2854 
width
, 
height
, 
imageid
);

2859 
	`SERVER_UNLOCK
();

2860 
	}
}

2864 
	$GrFªeImage
(
GR_IMAGE_ID
 
id
)

2866 
GR_IMAGE
 *
imagï
;

2867 
GR_IMAGE
 *
¥evimagï
;

2869 
	`SERVER_LOCK
();

2871 
imagï
 = 
li°imagï
; imagï; imagï = imagï->
√xt
) {

2872 i‡(
imagï
->
id
 == id) {

2874 i‡(
li°imagï
 =
imagï
)

2875 
li°imagï
 = 
imagï
->
√xt
;

2877 
¥evimagï
 = 
li°imagï
;

2878 
¥evimagï
->
√xt
 !
imagï
)

2879 
¥evimagï
 =Öªvimagï->
√xt
;

2881 
¥evimagï
->
√xt
 = 
imagï
->next;

2884 
	`GdFªeImage
(
imagï
->
id
);

2885 
	`‰ì
(
imagï
);

2886 
	`SERVER_UNLOCK
();

2891 
	`SERVER_UNLOCK
();

2892 
	}
}

2896 
	$GrGëImageInfo
(
GR_IMAGE_ID
 
id
, 
GR_IMAGE_INFO
 *
iù
)

2898 
	`SERVER_LOCK
();

2899 
	`GdGëImageInfo
(
id
, 
iù
);

2900 
	`SERVER_UNLOCK
();

2901 
	}
}

2911 
	$GrAªa
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
width
,

2912 
GR_SIZE
 
height
, *
pixñs
, 
pixty≥
)

2914 
GR_DRAWABLE
 *
dp
;

2916 
	`SERVER_LOCK
();

2918 
	`GsPª∑ªDøwög
(
id
, 
gc
, &
dp
)) {

2919 
GR_DRAW_TYPE_WINDOW
:

2920 
GR_DRAW_TYPE_PIXMAP
:

2921 
	`GdAªa
(
dp
->
psd
, dp->
x
 + x, dp->
y
 + y, 
width
, 
height
,

2922 
pixñs
, 
pixty≥
);

2926 
	`SERVER_UNLOCK
();

2927 
	}
}

2933 
	$GrC›yAªa
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

2934 
GR_SIZE
 
width
, GR_SIZE 
height
, 
GR_DRAW_ID
 
§cid
,

2935 
GR_COORD
 
§cx
, GR_COORD 
§cy
, 
›
)

2937 
GR_GC
 *
g˝
;

2938 
GR_BOOL
 
exposuª
 = 
GR_TRUE
;

2940 
GR_DRAWABLE
 *
dp
;

2941 
GR_WINDOW
 *
swp
;

2942 
GR_PIXMAP
 *
•p
 = 
NULL
;

2943 
GR_DRAW_TYPE
 
ty≥
;

2944 
PSD
 
§˝sd
;

2946 
	`SERVER_LOCK
();

2948 
§˝sd
 = 
NULL
;

2950 
swp
 = 
	`GsFödWödow
(
§cid
);

2951 
ty≥
 = 
	`GsPª∑ªDøwög
(
id
, 
gc
, &
dp
);

2952 i‡(
ty≥
 =
GR_DRAW_TYPE_NONE
) {

2953 
	`SERVER_UNLOCK
();

2957 i‡(
swp
) {

2958 
§˝sd
 = 
swp
->
psd
;

2959 
§cx
 +
swp
->
x
;

2960 
§cy
 +
swp
->
y
;

2962 
•p
 = 
	`GsFödPixm≠
(
§cid
);

2963 i‡(
•p
)

2964 
§˝sd
 = 
•p
->
psd
;

2966 i‡(!
§˝sd
) {

2967 
	`SERVER_UNLOCK
();

2971 #i‡
DYNAMICREGIONS


2972 
g˝
 = 
	`GsFödGC
(
gc
);

2973 i‡(
g˝
)

2974 
exposuª
 = 
g˝
->exposure;

2983 i‡(
exposuª
 && 
swp
 && (
§˝sd
 =
dp
->
psd
Ë&& swp->
evít˛õ¡s
 &&

2984 (
swp
->
evít˛õ¡s
->
evítmask
 & 
GR_EVENT_MASK_EXPOSURE
)) {

2985 
MWRECT
 
rc
;

2986 
MWCLIPREGION
 *
˛ùªgi⁄
;

2989 if(
§cx
+
width
 > 
§˝sd
->
xvúåes
)

2990 
width
 = 
§˝sd
->
xvúåes
 - 
§cx
;

2991 if(
§cy
+
height
 > 
§˝sd
->
yvúåes
)

2992 
height
 = 
§˝sd
->
yvúåes
 - 
§cy
;

2994 
rc
.
À·
 = 
§cx
;

2995 
rc
.
t›
 = 
§cy
;

2996 
rc
.
right
 = 
§cx
 + 
width
;

2997 
rc
.
bŸtom
 = 
§cy
 + 
height
;

3005 i‡(
	`GdRe˘InRegi⁄
(
˛ùªgi⁄
, &
rc
Ë!
MWRECT_ALLIN
) {

3006 
	`EPRINTF
("nano-X: skipping blit, sendingÉxposeÉvent\n");

3007 
	`GsDñivîExposuªEvít
(
swp
, 
dp
->
x
+x, dp->
y
+y,

3008 
width
, 
height
);

3009 
	`SERVER_UNLOCK
();

3015 i‡(
›
 =
MWROP_USE_GC_MODE
) {

3016 
GR_GC
 *
g˝
 = 
	`GsFödGC
(
gc
);

3018 i‡(
g˝
 =
NULL
) {

3019 
›
 = 
MWROP_COPY
;

3021 
›
 = 
	`MWMODE_TO_ROP
(
g˝
->
mode
);

3026 
	`GdCheckCurs‹
(
§˝sd
, 
§cx
, 
§cy
, srcx+
width
, srcy+
height
);

3027 
	`GdBlô
(
dp
->
psd
, dp->
x
+x, dp->
y
+y, 
width
, 
height
, 
§˝sd
, 
§cx
, 
§cy
,
›
);

3028 
	`GdFixCurs‹
(
§˝sd
);

3030 
	`SERVER_UNLOCK
();

3031 
	}
}

3042 
	$GrRódAªa
(
GR_DRAW_ID
 
id
,
GR_COORD
 
x
,GR_COORD 
y
,
GR_SIZE
 
width
,GR_SIZE 
height
,

3043 
GR_PIXELVAL
 *
pixñs
)

3045 
GR_WINDOW
 *
wp
;

3046 
GR_PIXMAP
 *
µ
 = 
NULL
;

3048 
	`SERVER_LOCK
();

3050 i‡((
wp
 = 
	`GsFödWödow
(
id
)Ë=
NULL
 && (
µ
 = 
	`GsFödPixm≠
(id)) == NULL){

3051 
	`GsEº‹
(
GR_ERROR_BAD_WINDOW_ID
, 
id
);

3052 
	`SERVER_UNLOCK
();

3056 i‡(
wp
 !
NULL
) {

3057 i‡(!
wp
->
ªÆized
 || (
x
 >wp->
width
Ë|| (
y
 >wp->
height
) ||

3058 (
x
 + 
width
 <0Ë|| (
y
 + 
height
 <= 0)) {

3067 
	`SERVER_UNLOCK
();

3070 
	`GdRódAªa
(
wp
->
psd
, wp->
x
+x, wp->
y
+y, 
width
, 
height
, 
pixñs
);

3072 i‡(
µ
 !
NULL
) {

3073 i‡((
x
 >
µ
->
width
Ë|| (
y
 >µ->
height
) ||

3074 (
x
 + 
width
 <0Ë|| (
y
 + 
height
 <= 0)) {

3075 
	`SERVER_UNLOCK
();

3078 
	`GdRódAªa
(
µ
->
psd
, 
x
, 
y
, 
width
, 
height
, 
pixñs
);

3081 
	`SERVER_UNLOCK
();

3082 
	}
}

3089 
	$GrPoöt
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
)

3091 
GR_DRAWABLE
 *
dp
;

3093 
	`SERVER_LOCK
();

3095 
	`GsPª∑ªDøwög
(
id
, 
gc
, &
dp
)) {

3096 
GR_DRAW_TYPE_WINDOW
:

3097 
GR_DRAW_TYPE_PIXMAP
:

3098 
	`GdPoöt
(
dp
->
psd
, dp->
x
 + x, dp->
y
 + y);

3102 
	`SERVER_UNLOCK
();

3103 
	}
}

3110 
	$GrPoöts
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COUNT
 
cou¡
, 
GR_POINT
 *
poöâabÀ
)

3112 
GR_DRAWABLE
 *
dp
;

3113 
GR_POINT
 *
µ
;

3114 
GR_COUNT
 
i
;

3115 
PSD
 
psd
;

3117 
	`SERVER_LOCK
();

3119 
	`GsPª∑ªDøwög
(
id
, 
gc
, &
dp
)) {

3120 
GR_DRAW_TYPE_WINDOW
:

3121 
GR_DRAW_TYPE_PIXMAP
:

3122 
psd
 = 
dp
->psd;

3125 
	`SERVER_UNLOCK
();

3129 
µ
 = 
poöâabÀ
;

3130 
i
 = 
cou¡
; i-- > 0; 
µ
++) {

3131 
	`GdPoöt
(
psd
, 
µ
->
x
 + 
dp
->x,Öp->
y
 + dp->y);

3134 
	`SERVER_UNLOCK
();

3135 
	}
}

3143 
	$GrPﬁy
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COUNT
 
cou¡
, 
GR_POINT
 *
poöâabÀ
)

3145 
GR_DRAWABLE
 *
dp
;

3146 
GR_POINT
 *
µ
;

3147 
GR_COUNT
 
i
;

3148 
PSD
 
psd
;

3150 
	`SERVER_LOCK
();

3152 
	`GsPª∑ªDøwög
(
id
, 
gc
, &
dp
)) {

3153 
GR_DRAW_TYPE_WINDOW
:

3154 
GR_DRAW_TYPE_PIXMAP
:

3155 
psd
 = 
dp
->psd;

3158 
	`SERVER_UNLOCK
();

3166 
µ
 = 
poöâabÀ
;

3167 
i
 = 
cou¡
; i-- > 0; 
µ
++) {

3168 
µ
->
x
 +
dp
->x;

3169 
µ
->
y
 +
dp
->y;

3172 
	`GdPﬁy
(
psd
, 
cou¡
, 
poöâabÀ
);

3174 #ifde‡
NONETWORK


3180 
µ
 = 
poöâabÀ
;

3181 
i
 = 
cou¡
; i-- > 0; 
µ
++) {

3182 
µ
->
x
 -
dp
->x;

3183 
µ
->
y
 -
dp
->y;

3187 
	`SERVER_UNLOCK
();

3188 
	}
}

3196 
	$GrFûlPﬁy
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COUNT
 
cou¡
, 
GR_POINT
 *
poöâabÀ
)

3198 
GR_DRAWABLE
 *
dp
;

3199 
GR_POINT
 *
µ
;

3200 
GR_COUNT
 
i
;

3201 
PSD
 
psd
;

3203 
	`SERVER_LOCK
();

3205 
	`GsPª∑ªDøwög
(
id
, 
gc
, &
dp
)) {

3206 
GR_DRAW_TYPE_WINDOW
:

3207 
GR_DRAW_TYPE_PIXMAP
:

3208 
psd
 = 
dp
->psd;

3211 
	`SERVER_UNLOCK
();

3219 
µ
 = 
poöâabÀ
;

3220 
i
 = 
cou¡
; i-- > 0; 
µ
++) {

3221 
µ
->
x
 +
dp
->x;

3222 
µ
->
y
 +
dp
->y;

3225 
	`GdFûlPﬁy
(
psd
, 
cou¡
, 
poöâabÀ
);

3227 #ifde‡
NONETWORK


3233 
µ
 = 
poöâabÀ
;

3234 
i
 = 
cou¡
; i-- > 0; 
µ
++) {

3235 
µ
->
x
 -
dp
->x;

3236 
µ
->
y
 -
dp
->y;

3240 
	`SERVER_UNLOCK
();

3241 
	}
}

3248 
	$GrText
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
, *
°r
,

3249 
GR_COUNT
 
cou¡
, 
GR_TEXTFLAGS
 
Êags
)

3251 
GR_DRAWABLE
 *
dp
;

3253 
	`SERVER_LOCK
();

3256 if((
Êags
&(
MWTF_TOP
|
MWTF_BASELINE
|
MWTF_BOTTOM
)) == 0)

3257 
Êags
 |
MWTF_BASELINE
;

3259 
	`GsPª∑ªDøwög
(
id
, 
gc
, &
dp
)) {

3260 
GR_DRAW_TYPE_WINDOW
:

3261 
GR_DRAW_TYPE_PIXMAP
:

3262 
	`GdText
(
dp
->
psd
, dp->
x
 + x, dp->
y
 + y, 
°r
, 
cou¡
,
Êags
);

3266 
	`SERVER_UNLOCK
();

3267 
	}
}

3271 
	$GrGëSy°emPÆëã
(
GR_PALETTE
 *
∑l
)

3274 
	`SERVER_LOCK
();

3277 
	`mem£t
(
∑l
, 0, (
GR_PALETTE
 *));

3279 if(
roŸwp
->
psd
->
pixty≥
 =
MWPF_PALETTE
) {

3280 
∑l
->
cou¡
 = ()
roŸwp
->
psd
->
ncﬁ‹s
;

3281 
	`GdGëPÆëã
(
roŸwp
->
psd
, 0, 
∑l
->
cou¡
,ÖÆ->
∑Àâe
);

3284 
	`SERVER_UNLOCK
();

3285 
	}
}

3289 
	$GrSëSy°emPÆëã
(
GR_COUNT
 
fú°
, 
GR_PALETTE
 *
∑l
)

3291 
	`SERVER_LOCK
();

3293 
	`GdSëPÆëã
(
roŸwp
->
psd
, 
fú°
, 
∑l
->
cou¡
,ÖÆ->
∑Àâe
);

3294 i‡(
fú°
 == 0)

3295 
	`GsRedøwS¸ìn
();

3297 
	`SERVER_UNLOCK
();

3298 
	}
}

3302 
	$GrFödCﬁ‹
(
GR_COLOR
 
c
, 
GR_PIXELVAL
 *
ªçixñ
)

3304 
	`SERVER_LOCK
();

3305 *
ªçixñ
 = 
	`GdFödCﬁ‹
(&
s¸dev
, 
c
);

3306 
	`SERVER_UNLOCK
();

3307 
	}
}

3311 
	$GrInje˘PoöãrEvít
(
GR_COORD
 
x
, GR_COORD 
y
, 
buâ⁄
, 
visibÀ
)

3313 
	`SERVER_LOCK
();

3315 i‡(
visibÀ
 != 0) {

3316 i‡(
visibÀ
 == 1)

3317 
	`GdShowCurs‹
(&
s¸dev
);

3319 
	`GdHideCurs‹
(&
s¸dev
);

3322 
	`GdMoveMou£
(
x
, 
y
);

3323 
	`GsH™dÀMou£Sètus
(
x
, 
y
, 
buâ⁄
);

3325 
	`SERVER_UNLOCK
();

3326 
	}
}

3329 
	$GrInje˘KeybﬂrdEvít
(
GR_WINDOW_ID
 
wid
, 
GR_KEY
 
keyvÆue
, 
GR_KEYMOD
 
modifõrs
,

3330 
GR_SCANCODE
 
sˇncode
, 
GR_BOOL
 
¥es£d
)

3332 
	`SERVER_LOCK
();

3335 
	`GsDñivîKeybﬂrdEvít
(
wid
,

3336 
¥es£d
? 
GR_EVENT_TYPE_KEY_DOWN
: 
GR_EVENT_TYPE_KEY_UP
,

3337 
keyvÆue
, 
modifõrs
, 
sˇncode
);

3339 
	`SERVER_UNLOCK
();

3340 
	}
}

3347 
	$GrSëWMPr›îtõs
(
GR_WINDOW_ID
 
wid
, 
GR_WM_PROPERTIES
 *
¥›s
)

3349 
GR_WINDOW
 *
wp
;

3350 
é
 = 0;

3352 
	`SERVER_LOCK
();

3355 
wp
 = 
	`GsFödWödow
(
wid
);

3356 if(!
wp
) {

3357 
	`GsEº‹
(
GR_ERROR_BAD_WINDOW_ID
, 
wid
);

3358 
	`SERVER_UNLOCK
();

3363 i‡(
¥›s
->
Êags
 & 
GR_WM_FLAGS_PROPS
)

3364 
wp
->
¥›s
 =Örops->props;

3367 i‡(
¥›s
->
Êags
 & 
GR_WM_FLAGS_TITLE
) {

3369 if(
wp
->
tôÀ
)

3370 
	`‰ì
(
wp
->
tôÀ
);

3373 if(
¥›s
->
tôÀ
)

3374 
é
 = 
	`°æí
((c⁄° *)
¥›s
->
tôÀ
) + 1;

3377 if(!
¥›s
->
tôÀ
 || 
é
 == 1) {

3378 
wp
->
tôÀ
 = 
NULL
;

3381 if(!(
wp
->
tôÀ
 = 
	`mÆloc
(
é
)))

3382 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 
wid
);

3384 
	`mem˝y
(
wp
->
tôÀ
, 
¥›s
->tôÀ, 
é
);

3388 
	`GsWpNŸifyA˘iv©e
(
focuswp
);

3392 i‡(
¥›s
->
Êags
 & 
GR_WM_FLAGS_BACKGROUND
) {

3393 i‡(
wp
->
background
 !
¥›s
->background) {

3394 
wp
->
background
 = 
¥›s
->background;

3395 
	`GsExpo£Aªa
(
wp
, wp->
x
, wp->
y
, wp->
width
, wp->
height
,

3396 
NULL
);

3401 i‡(
¥›s
->
Êags
 & 
GR_WM_FLAGS_BORDERSIZE
) {

3402 i‡(
wp
->
b‹dîsize
 !
¥›s
->bordersize) {

3404 
	`GsWpUƒólizeWödow
(
wp
, 
GR_TRUE
);

3405 
wp
->
b‹dîsize
 = 
¥›s
->bordersize;

3406 
	`GsWpRólizeWödow
(
wp
, 
GR_TRUE
);

3411 i‡(
¥›s
->
Êags
 & 
GR_WM_FLAGS_BORDERCOLOR
) {

3412 i‡(
wp
->
b‹dîcﬁ‹
 !
¥›s
->bordercolor) {

3413 
wp
->
b‹dîcﬁ‹
 = 
¥›s
->bordercolor;

3414 i‡(
wp
->
b‹dîsize
)

3415 
	`GsDøwB‹dî
(
wp
);

3419 
	`SERVER_UNLOCK
();

3420 
	}
}

3426 
	$GrGëWMPr›îtõs
(
GR_WINDOW_ID
 
wid
, 
GR_WM_PROPERTIES
 *
¥›s
)

3428 
GR_WINDOW
 *
wp
;

3430 
	`SERVER_LOCK
();

3433 
wp
 = 
	`GsFödWödow
(
wid
);

3434 if(!
wp
) {

3436 
	`mem£t
(
¥›s
, 0, (
GR_WM_PROPERTIES
));

3437 
	`SERVER_UNLOCK
();

3442 
¥›s
->
Êags
 = 
GR_WM_FLAGS_PROPS
 | 
GR_WM_FLAGS_TITLE
 |

3443 
GR_WM_FLAGS_BACKGROUND
 | 
GR_WM_FLAGS_BORDERSIZE
 |

3444 
GR_WM_FLAGS_BORDERCOLOR
;

3445 
¥›s
->¥›†
wp
->props;

3446 
¥›s
->
tôÀ
 = 
wp
->title;

3447 
¥›s
->
background
 = 
wp
->background;

3448 
¥›s
->
b‹dîsize
 = 
wp
->bordersize;

3449 
¥›s
->
b‹dîcﬁ‹
 = 
wp
->bordercolor;

3451 
	`SERVER_UNLOCK
();

3452 
	}
}

3455 
	$GrClo£Wödow
(
GR_WINDOW_ID
 
wid
)

3457 
GR_WINDOW
 *
wp
;

3459 
	`SERVER_LOCK
();

3462 
wp
 = 
	`GsFödWödow
(
wid
);

3463 if(!
wp
) {

3469 
	`SERVER_UNLOCK
();

3474 
	`GsDñivîGíîÆEvít
(
wp
, 
GR_EVENT_TYPE_CLOSE_REQ
, 
NULL
);

3476 
	`SERVER_UNLOCK
();

3477 
	}
}

3480 
	$GrKûlWödow
(
GR_WINDOW_ID
 
wid
)

3482 
GR_WINDOW
 *
wp
;

3484 
	`SERVER_LOCK
();

3487 
wp
 = 
	`GsFödWödow
(
wid
);

3488 if(!
wp
) {

3489 
	`GsEº‹
(
GR_ERROR_BAD_WINDOW_ID
, 
wid
);

3490 
	`SERVER_UNLOCK
();

3495 
	`GsClo£
(
wp
->
ow√r
->
id
);

3497 
	`SERVER_UNLOCK
();

3498 
	}
}

3504 
	#A


	)

3506 
	#A_RGB
(
r
,
g
,
b
)

	)

3507 
	#B_RGB
(
r
,
g
,
b
)

	)

3508 
	#C_RGB
(
r
,
g
,
b
)

	)

3510 #ifde‡
A


3511 #unde‡
A_RGB


3512 
	#A_RGB
(
r
,
g
,
b
Ë
	`GR_RGB
‘,g,b),

	)

3514 #ifde‡
B


3515 #unde‡
B_RGB


3516 
	#B_RGB
(
r
,
g
,
b
Ë
	`GR_RGB
‘,g,b),

	)

3518 #ifde‡
C


3519 #unde‡
C_RGB


3520 
	#C_RGB
(
r
,
g
,
b
Ë
	`GR_RGB
‘,g,b),

	)

3523 
	#MAXSYSCOLORS
 20

	)

3525 
GR_COLOR
 
	gsysCﬁ‹s
[
MAXSYSCOLORS
] = {

3527 
GR_RGB
( 0, 128, 128),

3530 
A_RGB
(128, 0, 0)

3531 
B_RGB
(128, 0, 128)

3532 
C_RGB
(128, 0, 128)

3533 
GR_RGB
(255, 255, 255),

3534 
A_RGB
(162, 141, 104)

3535 
B_RGB
(128, 128, 128)

3536 
C_RGB
( 0, 64, 128)

3537 
GR_RGB
(192, 192, 192),

3540 
GR_RGB
( 0, 0, 0),

3541 
A_RGB
(162, 141, 104)

3542 
B_RGB
(128, 128, 128)

3543 
C_RGB
(128, 128, 128)

3544 
A_RGB
(213, 204, 187)

3545 
B_RGB
(223, 223, 223)

3546 
C_RGB
(192, 192, 192)

3547 
A_RGB
(234, 230, 221)

3548 
B_RGB
(255, 255, 255)

3549 
C_RGB
(223, 223, 223)

3552 
A_RGB
(213, 204, 187)

3553 
B_RGB
(192, 192, 192)

3554 
C_RGB
(160, 160, 160)

3555 
GR_RGB
( 0, 0, 0),

3558 
A_RGB
(213, 204, 187)

3559 
B_RGB
(192, 192, 192)

3560 
C_RGB
(160, 160, 160)

3561 
GR_RGB
( 0, 0, 0),

3564 
GR_RGB
(255, 255, 255),

3565 
GR_RGB
( 0, 0, 0),

3566 
GR_RGB
(128, 0, 0),

3567 
GR_RGB
(255, 255, 255),

3568 
GR_RGB
( 64, 64, 64),

3571 
A_RGB
(213, 204, 187)

3572 
B_RGB
(192, 192, 192)

3573 
C_RGB
(160, 160, 160)

3574 
GR_RGB
( 0, 0, 0),

3578 
GR_COLOR


3579 
	$GrGëSysCﬁ‹
(
ödex
)

3581 
GR_COLOR
 
cﬁ‹
 = 0;

3582 
	`SERVER_LOCK
();

3583 if(
ödex
 >0 && index < 
MAXSYSCOLORS
)

3584 
cﬁ‹
 = 
sysCﬁ‹s
[
ödex
];

3585 
	`SERVER_UNLOCK
();

3586  
cﬁ‹
;

3587 
	}
}

3590 
	$GrSëS¸ìnSavîTimeout
(
GR_TIMEOUT
 
timeout
)

3592 #i‡
MW_FEATURE_TIMERS


3593 
MWTIMER
 *
timî
;

3595 
	`SERVER_LOCK
();

3597 
s¸ìnßvî_dñay
 = 
timeout
 * 1000;

3599 if((
timî
 = 
	`GdFödTimî
(
GsA˘iv©eS¸ìnSavî
)))

3600 
	`GdDe°royTimî
(
timî
);

3603 i‡(
timeout
 == 0) {

3604 
	`SERVER_UNLOCK
();

3608 
	`GdAddTimî
(
s¸ìnßvî_dñay
, 
GsA˘iv©eS¸ìnSavî
,

3609 
GsA˘iv©eS¸ìnSavî
);

3611 
	`SERVER_UNLOCK
();

3613 
	}
}

3616 
	$GrSëSñe˘i⁄Ow√r
(
GR_WINDOW_ID
 
wid
, 
GR_CHAR
 *
ty≥li°
)

3618 
GR_WINDOW_ID
 
ﬁdwid
 = 
£À˘i⁄_ow√r
.
wid
;

3620 
	`SERVER_LOCK
();

3622 if(
£À˘i⁄_ow√r
.
ty≥li°
Ë
	`‰ì
(selection_owner.typelist);

3624 
£À˘i⁄_ow√r
.
wid
 = wid;

3626 if(
wid
) {

3627 if(!(
£À˘i⁄_ow√r
.
ty≥li°
 = (
GR_CHAR
 *)
	`°rdup
((const *)typelist))) {

3628 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 
wid
);

3629 
£À˘i⁄_ow√r
.
wid
 = 0;

3631 } 
£À˘i⁄_ow√r
.
ty≥li°
 = 
NULL
;

3633 
	`GsDñivîSñe˘i⁄Ch™gedEvít
(
ﬁdwid
, 
wid
);

3635 
	`SERVER_UNLOCK
();

3636 
	}
}

3638 
GR_WINDOW_ID


3639 
	$GrGëSñe˘i⁄Ow√r
(
GR_CHAR
 **
ty≥li°
)

3641 
GR_WINDOW_ID
 
ªsu…
;

3643 
	`SERVER_LOCK
();

3644 *
ty≥li°
 = 
£À˘i⁄_ow√r
.typelist;

3645 
ªsu…
 = 
£À˘i⁄_ow√r
.
wid
;

3646 
	`SERVER_UNLOCK
();

3648  
ªsu…
;

3649 
	}
}

3652 
	$GrReque°Clõ¡D©a
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
rid
, 
GR_SERIALNO
 
£rül
,

3653 
GR_MIMETYPE
 
mimëy≥
)

3655 
	`SERVER_LOCK
();

3656 
	`GsDñivîClõ¡D©aReqEvít
(
rid
, 
wid
, 
£rül
, 
mimëy≥
);

3657 
	`SERVER_UNLOCK
();

3658 
	}
}

3661 
	$GrSídClõ¡D©a
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
did
, 
GR_SERIALNO
 
£rül
,

3662 
GR_LENGTH
 
Àn
, GR_LENGTH 
thi¶í
, *
d©a
)

3664 *
p
;

3666 
	`SERVER_LOCK
();

3668 if(!(
p
 = 
	`mÆloc
(
Àn
))) {

3669 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 
wid
);

3670 
	`SERVER_UNLOCK
();

3673 
	`mem˝y
(
p
, 
d©a
, 
thi¶í
);

3675 
	`GsDñivîClõ¡D©aEvít
(
did
, 
wid
, 
£rül
, 
Àn
, 
thi¶í
, 
p
);

3677 
	`SERVER_UNLOCK
();

3678 
	}
}

3685 
	$GrSëBackgroundPixm≠
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
pixm≠
, 
Êags
)

3687 
GR_WINDOW
 *
wp
;

3688 
GR_PIXMAP
 *
µ
 = 
NULL
;

3690 
	`SERVER_LOCK
();

3692 i‡(!(
wp
 = 
	`GsFödWödow
(
wid
))) {

3693 
	`GsEº‹
(
GR_ERROR_BAD_WINDOW_ID
, 
wid
);

3694 
	`SERVER_UNLOCK
();

3698 i‡(
pixm≠
 && !(
µ
 = 
	`GsFödPixm≠
(pixmap))) {

3699 
	`GsEº‹
(
GR_ERROR_BAD_WINDOW_ID
, 
pixm≠
);

3700 
	`SERVER_UNLOCK
();

3703 
wp
->
bgpixm≠
 = 
µ
;

3704 
wp
->
bgpixm≠Êags
 = 
Êags
;

3706 
	`SERVER_UNLOCK
();

3707 
	}
}

3710 
	$GrGëF⁄tLi°
(
GR_FONTLIST
 ***
f⁄ts
, *
numf⁄ts
)

3712 
	`SERVER_LOCK
();

3713 
	`GdGëF⁄tLi°
(
f⁄ts
,
numf⁄ts
);

3714 
	`SERVER_UNLOCK
();

3715 
	}
}

3718 
	$GrFªeF⁄tLi°
(
GR_FONTLIST
 ***
f⁄ts
, 
numf⁄ts
)

3720 
	`SERVER_LOCK
();

3721 
	`GdFªeF⁄tLi°
(
f⁄ts
, 
numf⁄ts
);

3722 
	`SERVER_UNLOCK
();

3723 
	}
}

3729 
	$GrSåëchAªa
(
GR_DRAW_ID
 
d°id
, 
GR_GC_ID
 
gc
,

3730 
GR_COORD
 
dx1
, GR_COORD 
dy1
,

3731 
GR_COORD
 
dx2
, GR_COORD 
dy2
,

3732 
GR_DRAW_ID
 
§cid
,

3733 
GR_COORD
 
sx1
, GR_COORD 
sy1
,

3734 
GR_COORD
 
sx2
, GR_COORD 
sy2
,

3735 
›
)

3737 
GR_DRAWABLE
 *
dp
;

3738 
GR_WINDOW
 *
swp
;

3739 
GR_PIXMAP
 *
•p
 = 
NULL
;

3740 
GR_DRAW_TYPE
 
ty≥
;

3741 
PSD
 
§˝sd
;

3743 
	`SERVER_LOCK
();

3745 
§˝sd
 = 
NULL
;

3747 
ty≥
 = 
	`GsPª∑ªDøwög
(
d°id
, 
gc
, &
dp
);

3748 i‡(
ty≥
 =
GR_DRAW_TYPE_NONE
) {

3749 
	`SERVER_UNLOCK
();

3753 
dx1
 +
dp
->
x
;

3754 
dy1
 +
dp
->
y
;

3755 
dx2
 +
dp
->
x
;

3756 
dy2
 +
dp
->
y
;

3758 
swp
 = 
	`GsFödWödow
(
§cid
);

3759 i‡(
swp
) {

3760 
§˝sd
 = 
swp
->
psd
;

3761 
sx1
 +
swp
->
x
;

3762 
sy1
 +
swp
->
y
;

3763 
sx2
 +
swp
->
x
;

3764 
sy2
 +
swp
->
y
;

3766 
•p
 = 
	`GsFödPixm≠
(
§cid
);

3767 i‡(
•p
)

3768 
§˝sd
 = 
•p
->
psd
;

3770 i‡(!
§˝sd
) {

3771 
	`SERVER_UNLOCK
();

3775 i‡(
›
 =
MWROP_USE_GC_MODE
) {

3776 
GR_GC
 *
g˝
;

3777 
g˝
 = 
	`GsFödGC
(
gc
);

3778 i‡(
g˝
 =
NULL
) {

3779 
›
 = 
MWROP_COPY
;

3781 
›
 = 
	`MWMODE_TO_ROP
(
g˝
->
mode
);

3792 
	`GdSåëchBlôEx
(
dp
->
psd
, 
dx1
, 
dy1
, 
dx2
, 
dy2
,

3793 
§˝sd
, 
sx1
, 
sy1
, 
sx2
, 
sy2
, 
›
);

3797 
	`SERVER_UNLOCK
();

3798 
	}
}

3805 
	$GrQuîyTªe
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID *
∑ª¡id
, GR_WINDOW_ID **
chûdªn
,

3806 
GR_COUNT
 *
nchûdªn
)

3808 
GR_WINDOW
 *
wp
;

3809 
GR_WINDOW
 *
˝
;

3810 
GR_WINDOW_ID
 *
ªèºay
;

3811 
GR_COUNT
 
n
 = 0;

3813 
	`SERVER_LOCK
();

3815 
wp
 = 
	`GsFödWödow
(
wid
);

3816 i‡(!
wp
) {

3817 *
∑ª¡id
 = 0;

3818 
nochûdªn
:

3819 *
chûdªn
 = 
NULL
;

3820 *
nchûdªn
 = 0;

3821 
	`SERVER_UNLOCK
();

3824 *
∑ª¡id
 = 
wp
->
∑ª¡
? wp->∑ª¡->
id
: 0;

3827 
˝
=
wp
->
chûdªn
; cp; cp=˝->
siblögs
)

3828 ++
n
;

3829 i‡(
n
 == 0)

3830 
nochûdªn
;

3833 
ªèºay
 = (
GR_WINDOW_ID
 *)
	`mÆloc
(
n
 * (GR_WINDOW_ID));

3834 i‡(!
ªèºay
) {

3835 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 0);

3836 
nochûdªn
;

3840 
n
 = 0;

3841 
˝
=
wp
->
chûdªn
; cp; cp=˝->
siblögs
) {

3842 
ªèºay
[
n
++] = 
˝
->
id
;

3844 *
chûdªn
 = 
ªèºay
;

3845 *
nchûdªn
 = 
n
;

3847 
	`SERVER_UNLOCK
();

3848 
	}
}

3851 #i‡
MW_FEATURE_TIMERS


3852 
	g√xt_timî_id
 = 1000;

3865 
GR_TIMER_ID


3866 
	$GrCª©eTimî
 (
GR_WINDOW_ID
 
wid
, 
GR_TIMEOUT
 
≥riod
)

3868 
GR_TIMER
 *
timî
;

3869 
GR_TIMER_ID
 
id
;

3871 
	`SERVER_LOCK
();

3874 
timî
 = (
GR_TIMER
*Ë
	`mÆloc
 ( (GR_TIMER));

3875 i‡(
timî
 =
NULL
)

3877 
	`GsEº‹
 (
GR_ERROR_MALLOC_FAILED
, 0);

3878 
	`SERVER_UNLOCK
();

3883 
timî
->timî = 
	`GdAddPîiodicTimî
 (
≥riod
, 
GsTimîCB
,Åimer);

3884 i‡(
timî
->timî =
NULL
)

3886 
	`‰ì
 (
timî
);

3887 
	`GsEº‹
 (
GR_ERROR_MALLOC_FAILED
, 0);

3888 
	`SERVER_UNLOCK
();

3896 
timî
->
id
 = 
√xt_timî_id
++;

3897 
timî
->
ow√r
 = 
cur˛õ¡
;

3898 
timî
->
wid
 = wid;

3899 
timî
->
√xt
 = 
li°_timî
;

3900 
li°_timî
 = 
timî
;

3902 
id
 = 
timî
->id;

3904 
	`SERVER_UNLOCK
();

3906  
id
;

3907 
	}
}

3915 
	$GrDe°royTimî
 (
GR_TIMER_ID
 
tid
)

3917 
GR_TIMER
 *
timî
;

3918 
GR_TIMER
 *
¥ev_timî
;

3920 
	`SERVER_LOCK
();

3923 
timî
 = 
	`GsFödTimî
 (
tid
);

3924 i‡(
timî
 =
NULL
) {

3925 
	`SERVER_UNLOCK
();

3929 i‡(
tid
 =
ˇche_timî_id
)

3931 
ˇche_timî_id
 = 0;

3932 
ˇche_timî
 = 
NULL
;

3936 
	`GdDe°royTimî
 (
timî
->timer);

3939 i‡(
li°_timî
 =
timî
)

3941 
li°_timî
 = 
timî
->
√xt
;

3945 
¥ev_timî
 = 
li°_timî
;

3946 
¥ev_timî
->
√xt
 !
timî
)

3948 
¥ev_timî
 =Öªv_timî->
√xt
;

3950 
¥ev_timî
->
√xt
 = 
timî
->next;

3952 
	`‰ì
 (
timî
);

3954 
	`SERVER_UNLOCK
();

3955 
	}
}

3965 
	$GrSëP‹åaôMode
(
p‹åaômode
)

3967 
	`SERVER_LOCK
();

3968 
	`GsSëP‹åaôMode
(
p‹åaômode
);

3969 
	`SERVER_UNLOCK
();

3970 
	}
}

3981 
	$GrQuîyPoöãr
(
GR_WINDOW_ID
 *
mwö
, 
GR_COORD
 *
x
, GR_COORD *
y
, 
GR_BUTTON
 *
bmask
)

3983 
	`SERVER_LOCK
();

3984 *
mwö
 = 
mou£wp
->
id
;

3985 *
x
 = 
curs‹x
;

3986 *
y
 = 
curs‹y
;

3987 *
bmask
 = 
curbuâ⁄s
;

3988 
	`SERVER_UNLOCK
();

3989 
	}
}

3998 
GR_REGION_ID


3999 
	$GrNewBôm≠Regi⁄
(
GR_BITMAP
 *
bôm≠
, 
GR_SIZE
 
width
, GR_SIZE 
height
)

4001 #i‡
DYNAMICREGIONS


4002 
GR_REGION
 *
ªgi⁄p
;

4003 
GR_REGION_ID
 
id
;

4005 
	`SERVER_LOCK
();

4007 i‡(!(
ªgi⁄p
 = 
	`mÆloc
((
GR_REGION
)))) {

4008 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 0);

4009 
	`SERVER_UNLOCK
();

4013 
ªgi⁄p
->
rgn
 = 
	`GdAŒocBôm≠Regi⁄
(
bôm≠
, 
width
, 
height
);

4014 
ªgi⁄p
->
id
 = 
√xåegi⁄id
++;

4015 
ªgi⁄p
->
ow√r
 = 
cur˛õ¡
;

4016 
ªgi⁄p
->
√xt
 = 
li°ªgi⁄p
;

4018 
li°ªgi⁄p
 = 
ªgi⁄p
;

4019 
id
 = 
ªgi⁄p
->id;

4021 
	`SERVER_UNLOCK
();

4023  
id
;

4027 
	}
}

4047 
	$GrSëWödowRegi⁄
(
GR_WINDOW_ID
 
wid
, 
GR_REGION_ID
 
rid
, 
ty≥
)

4049 #i‡
DYNAMICREGIONS


4050 
GR_WINDOW
 *
wp
;

4051 
GR_REGION
 *
ªgi⁄
;

4052 
MWCLIPREGION
 *
√wªgi⁄
;

4054 
	`SERVER_LOCK
();

4058 i‡(!(
wp
 = 
	`GsFödWödow
(
wid
))) {

4059 
	`GsEº‹
(
GR_ERROR_BAD_WINDOW_ID
, 
wid
);

4060 
	`SERVER_UNLOCK
();

4064 i‡(
rid
) {

4065 i‡(!(
ªgi⁄
 = 
	`GsFödRegi⁄
(
rid
))) {

4066 
	`GsEº‹
(
GR_ERROR_BAD_REGION_ID
, 
rid
);

4067 
	`SERVER_UNLOCK
();

4071 i‡(!(
√wªgi⁄
 = 
	`GdAŒocRegi⁄
())) {

4072 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 0);

4073 
	`SERVER_UNLOCK
();

4077 
	`GdC›yRegi⁄
(
√wªgi⁄
, 
ªgi⁄
->
rgn
);

4078 } 
√wªgi⁄
 = 
NULL
;

4080 i‡(
wp
->
˛ùªgi⁄
)

4081 
	`GdDe°royRegi⁄
(
wp
->
˛ùªgi⁄
);

4082 
wp
->
˛ùªgi⁄
 = 
√wªgi⁄
;

4084 
	`SERVER_UNLOCK
();

4086 
	}
}

4095 
	$GrSëTønsf‹m
(
GR_TRANSFORM
 *
å™s
)

4097 
	`SERVER_LOCK
();

4098 
	`GdSëTønsf‹m
(
å™s
);

4099 
	`SERVER_UNLOCK
();

4100 
	}
}

4114 
GR_BOOL


4115 
	$GrGøbKey
(
GR_WINDOW_ID
 
id
, 
GR_KEY
 
key
, 
ty≥
)

4117 
GR_GRABBED_KEY
 *
keygøb
;

4118 
GR_GRABBED_KEY
 *
œ°_keygøb
;

4120 i‡(()
ty≥
 > 
GR_GRAB_MAX
)

4121  
GR_FALSE
;

4123 
	`SERVER_LOCK
();

4126 
œ°_keygøb
 = 
NULL
;

4127 
keygøb
 = 
li°_gøbbed_keys
; keygøb !
NULL
;

4128 
keygøb
 = keygøb->
√xt
) {

4129 
œ°_keygøb
 = 
keygøb
;

4130 i‡(
keygøb
->
key
 == key) {

4131 i‡((
keygøb
->
wid
 =
id
)

4132 && (
keygøb
->
ty≥
 ==Åype)

4133 && (
keygøb
->
ow√r
 =
cur˛õ¡
)) {

4137 
	`SERVER_UNLOCK
();

4138  
GR_TRUE
;

4140 i‡((
ty≥
 !
GR_GRAB_HOTKEY
)

4141 && (
keygøb
->
ty≥
 !
GR_GRAB_HOTKEY
)) {

4146 
	`SERVER_UNLOCK
();

4147  
GR_FALSE
;

4153 
keygøb
 = (
GR_GRABBED_KEY
 *)
	`mÆloc
((GR_GRABBED_KEY));

4154 i‡(
keygøb
 =
NULL
) {

4155 
	`GsEº‹
(
GR_ERROR_MALLOC_FAILED
, 0);

4156 
	`SERVER_UNLOCK
();

4157  
GR_FALSE
;

4161 
keygøb
->
key
 = key;

4162 
keygøb
->
wid
 = 
id
;

4163 
keygøb
->
ty≥
 =Åype;

4164 
keygøb
->
ow√r
 = 
cur˛õ¡
;

4173 i‡((
ty≥
 !
GR_GRAB_HOTKEY
Ë|| (
œ°_keygøb
 =
NULL
)) {

4175 
keygøb
->
√xt
 = 
li°_gøbbed_keys
;

4176 
li°_gøbbed_keys
 = 
keygøb
;

4179 
keygøb
->
√xt
 = 
NULL
;

4180 
œ°_keygøb
->
√xt
 = 
keygøb
;

4183 
	`SERVER_UNLOCK
();

4184  
GR_TRUE
;

4185 
	}
}

4194 
	$GrUngøbKey
(
GR_WINDOW_ID
 
id
, 
GR_KEY
 
key
)

4196 
GR_GRABBED_KEY
 *
keygøb
;

4197 
GR_GRABBED_KEY
 **
keygøb_¥ev_√xt
;

4199 
	`SERVER_LOCK
();

4201 
keygøb_¥ev_√xt
 = &
li°_gøbbed_keys
;

4202 
keygøb
 = 
li°_gøbbed_keys
;

4203 
keygøb
 !
NULL
) {

4204 i‡((
keygøb
->
key
 =keyË&& (keygøb->
wid
 =
id
) &&

4205 (
keygøb
->
ow√r
 =
cur˛õ¡
)) {

4206 *
keygøb_¥ev_√xt
 = 
keygøb
->
√xt
;

4207 
	`‰ì
(
keygøb
);

4208 
	`SERVER_UNLOCK
();

4211 
keygøb_¥ev_√xt
 = &
keygøb
->
√xt
;

4212 
keygøb
 = keygøb->
√xt
;

4215 
	`SERVER_UNLOCK
();

4216 
	}
}

	@nanox/srvmain.c

10 
	~<°dio.h
>

11 
	~<°dlib.h
>

12 
	~<sig«l.h
>

13 
	~<°rög.h
>

15 #ifde‡
PSP


16 
	~<p•kî√l.h
>

17 
	~<p•debug.h
>

20 #ifde‡
__PACIFIC__


21 
	~<unixio.h
>

23 
	~<î∫o.h
>

24 
	~<sys/ty≥s.h
>

27 #ifde‡
DOS_TURBOC


28 
	~<io.h
>

31 
	#MWINCLUDECOLORS


	)

32 
	~"£rv.h
"

33 #i‡
UNIX
 | 
DOS_DJGPP


34 
	~<uni°d.h
>

35 #i‡
_MINIX


36 
	~<sys/times.h
>

38 
	~<sys/time.h
>

42 #i‡
ELKS


43 
	~<löuxmt/posix_ty≥s.h
>

44 
	~<löuxmt/time.h
>

47 #i‡
RTEMS


48 
	~<πems/mw_uid.h
>

54 
GR_WINDOW_ID
 
	gˇchewödowid
;

55 
GR_WINDOW_ID
 
	gˇchïixm≠id
;

56 
GR_GC_ID
 
	gˇchegcid
;

57 
GR_WINDOW
 *
	gˇchewp
;

58 
GR_GC
 *
	gˇcheg˝
;

59 
GR_PIXMAP
 *
	gˇchïp
;

60 
GR_PIXMAP
 *
	gli°µ
;

61 
GR_WINDOW
 *
	gli°wp
;

62 
GR_WINDOW
 *
	groŸwp
;

63 
GR_GC
 *
	gli°g˝
;

64 
GR_REGION
 *
	gli°ªgi⁄p
;

65 
GR_FONT
 *
	gli°f⁄ç
;

66 #i‡
MW_FEATURE_IMAGES


67 
GR_IMAGE
 *
	gli°imagï
;

69 
GR_CURSOR
 *
	gli°curs‹p
;

70 
GR_CURSOR
 *
	g°dcurs‹
;

71 
GR_GC
 *
	gcurg˝
;

72 
GR_WINDOW
 *
	g˛ùwp
;

73 
GR_WINDOW
 *
	gfocuswp
;

74 
GR_WINDOW
 *
	gmou£wp
;

75 
GR_WINDOW
 *
	ggøbbuâ⁄wp
;

76 
GR_CURSOR
 *
	gcurcurs‹
;

77 
GR_COORD
 
	gcurs‹x
;

78 
GR_COORD
 
	gcurs‹y
;

79 
GR_BUTTON
 
	gcurbuâ⁄s
;

80 
GR_CLIENT
 *
	gcur˛õ¡
;

81 
GR_EVENT_LIST
 *
	gevít‰ì
;

82 
GR_BOOL
 
	gfocusfixed
;

83 
PMWFONT
 
	g°df⁄t
;

84 
	gesˇ≥_quôs
 = 
TRUE
;

85 *
	g¥og«me
;

87 
	gcuºít_fd
;

88 
	gc⁄√˘cou¡
 = 0;

89 
GR_CLIENT
 *
	groŸ_˛õ¡
;

90 
GR_CLIENT
 *
	gcuºít_˛õ¡
;

91 *
	gcuºít_shm_cmds
;

92 
	gcuºít_shm_cmds_size
;

93 
	gkeyb_fd
;

94 #ifde‡
MW_FEATURE_TWO_KEYBOARDS


95 
	gkeyb2_fd
;

97 
	gmou£_fd
;

98 *
	gcurfunc
;

99 
GR_BOOL
 
	gs¸ìnßvî_a˘ive
;

100 
GR_SELECTIONOWNER
 
	g£À˘i⁄_ow√r
;

101 
GR_TIMEOUT
 
	g°¨tTicks
;

102 
	gaut›‹åaô
 = 
FALSE
;

103 
MWCOORD
 
	gnxªs
;

104 
MWCOORD
 
	gnyªs
;

106 #i‡
MW_FEATURE_TIMERS


107 
GR_TIMEOUT
 
	gs¸ìnßvî_dñay
;

108 
GR_TIMER_ID
 
	gˇche_timî_id
;

109 
GR_TIMER
 *
	gˇche_timî
;

110 
GR_TIMER
 *
	gli°_timî
;

112 
GR_GRABBED_KEY
 *
	gli°_gøbbed_keys
 = 
NULL
;

114 
	g≥rsi°ít_mode
 = 
FALSE
;

115 
	gp‹åaômode
 = 
MWPORTRAIT_NONE
;

117 
	gSERVER_LOCK_DECLARE


119 #i‡!
NONETWORK


120 
	gun_sock
;

123 
	$ußge
()

125 
	`¥ötf
("Usage: %s [-e] [-p] [-A] [-NLRD] [-x#] [-y#] [-c <fontconfig-file> ...]\n",

126 
¥og«me
);

127 
	`exô
(1);

128 
	}
}

135 
	$maö
(
¨gc
, *
¨gv
[])

137 
t
;

139 
¥og«me
 = 
¨gv
[0];

141 
t
 = 1;

142  
t
 < 
¨gc
 ) {

143 i‡–!
	`°rcmp
("-e",
¨gv
[
t
])) {

144 
esˇ≥_quôs
 = 
FALSE
;

145 ++
t
;

148 i‡–!
	`°rcmp
("-p",
¨gv
[
t
]) ) {

149 
≥rsi°ít_mode
 = 
TRUE
;

150 ++
t
;

153 i‡–!
	`°rcmp
("-A",
¨gv
[
t
]) ) {

154 
aut›‹åaô
 = 
TRUE
;

155 ++
t
;

158 i‡–!
	`°rcmp
("-N",
¨gv
[
t
]) ) {

159 
p‹åaômode
 = 
MWPORTRAIT_NONE
;

160 ++
t
;

163 i‡–!
	`°rcmp
("-L",
¨gv
[
t
]) ) {

164 
p‹åaômode
 = 
MWPORTRAIT_LEFT
;

165 ++
t
;

168 i‡–!
	`°rcmp
("-R",
¨gv
[
t
]) ) {

169 
p‹åaômode
 = 
MWPORTRAIT_RIGHT
;

170 ++
t
;

173 i‡–!
	`°rcmp
("-D",
¨gv
[
t
]) ) {

174 
p‹åaômode
 = 
MWPORTRAIT_DOWN
;

175 ++
t
;

178 i‡–!
	`°rcmp
("-x",
¨gv
[
t
]) ) {

179 i‡(++
t
 >
¨gc
)

180 
	`ußge
();

181 
nxªs
 = 
	`©oi
(
¨gv
[
t
]);

182 ++
t
;

185 i‡–!
	`°rcmp
("-y",
¨gv
[
t
]) ) {

186 i‡(++
t
 >
¨gc
)

187 
	`ußge
();

188 
nyªs
 = 
	`©oi
(
¨gv
[
t
]);

189 ++
t
;

192 #i‡
FONTMAPPER


193 i‡–!
	`°rcmp
("-c",
¨gv
[
t
]) ) {

194 
	`ªad_c⁄figfûe
(*
fûe
);

196 i‡(++
t
 >
¨gc
)

197 
	`ußge
();

198 
	`ªad_c⁄figfûe
(
¨gv
[
t
]);

199 ++
t
;

203 
	`ußge
();

207 if(
	`GsInôülize
() < 0)

208 
	`exô
(1);

211 
	`GsSñe˘
(0L);

213 
	}
}

217 
	$GsAc˚±Clõ¡Fd
(
i
)

219 
GR_CLIENT
 *
˛õ¡
, *
˛
;

221 if(!(
˛õ¡
 = 
	`mÆloc
((
GR_CLIENT
)))) {

222 #i‚de‡
NONETWORK


223 
	`˛o£
(
i
);

228 
˛õ¡
->
id
 = 
i
;

229 
˛õ¡
->
evíthód
 = 
NULL
;

230 
˛õ¡
->
evíâaû
 = 
NULL
;

232 
˛õ¡
->
√xt
 = 
NULL
;

233 
˛õ¡
->
¥ev
 = 
NULL
;

234 
˛õ¡
->
waôög_f‹_evít
 = 
FALSE
;

235 
˛õ¡
->
shm_cmds
 = 0;

237 if(
c⁄√˘cou¡
++ == 0)

238 
roŸ_˛õ¡
 = 
˛õ¡
;

240 
˛
 = 
roŸ_˛õ¡
;

241 
˛
->
√xt
)

242 
˛
 = cl->
√xt
;

243 
˛õ¡
->
¥ev
 = 
˛
;

244 
˛
->
√xt
 = 
˛õ¡
;

246 
	}
}

248 #i‡
PSP


250 
	$exô_ˇŒback
()

252 
	`s˚Kî√lExôGame
();

254 
	}
}

256 
	$CÆlbackThªad
(*
¨g
)

258 
cbid
;

260 
cbid
 = 
	`s˚Kî√lCª©eCÆlback
("Exô CÆlback", 
exô_ˇŒback
, 
NULL
);

261 
	`s˚Kî√lRegi°îExôCÆlback
(
cbid
);

262 
	`s˚Kî√lSÀïThªadCB
();

263 
	}
}

266 
	$GrO≥n
()

268 
thid
;

269 
thid
 = 
	`s˚Kî√lCª©eThªad
("upd©e_thªad", 
CÆlbackThªad
, 0x11, 0xFA0, 0, 0);

270 if(
thid
 >= 0)

271 
	`s˚Kî√lSèπThªad
(
thid
, 0, 0);

273 
	`SERVER_LOCK
();

274 
esˇ≥_quôs
 = 1;

279 i‡(
c⁄√˘cou¡
 <= 0) {

280 if(
	`GsInôülize
() < 0) {

281 
	`SERVER_UNLOCK
();

284 
	`GsAc˚±Clõ¡Fd
(999);

285 
cur˛õ¡
 = 
roŸ_˛õ¡
;

287 
	`SERVER_UNLOCK
();

290 
	}
}

299 
	$GrO≥n
()

301 #i‡
NONETWORK


302 
	`SERVER_LOCK
();

303 
esˇ≥_quôs
 = 1;

308 i‡(
c⁄√˘cou¡
 <= 0) {

309 if(
	`GsInôülize
() < 0) {

310 
	`SERVER_UNLOCK
();

313 
	`GsAc˚±Clõ¡Fd
(999);

314 
cur˛õ¡
 = 
roŸ_˛õ¡
;

316 
	`SERVER_UNLOCK
();

319 
	}
}

327 
	$GrClo£
()

329 
	`SERVER_LOCK
();

330 
	`GsClo£
(
cuºít_fd
);

331 
	`SERVER_UNLOCK
();

332 
	}
}

338 
	$GsClo£
(
fd
)

340 
	`GsDr›Clõ¡
(
fd
);

341 if(!
≥rsi°ít_mode
 && 
c⁄√˘cou¡
 == 0)

342 
	`GsTîmö©e
();

343 
	}
}

345 #i‡
NONETWORK


348 
	$GsDr›Clõ¡
(
fd
)

350 --
c⁄√˘cou¡
;

351 
	}
}

354 #i‡
UNIX
 | 
DOS_DJGPP


355 #i‡
NONETWORK
 && 
deföed
(
HAVESELECT
)

361 
	gªgfdmax
 = -1;

362 
fd_£t
 
	gªgfd£t
;

365 
	$GrRegi°îI≈ut
(
fd
)

367 
	`SERVER_LOCK
();

368 
	`FD_SET
(
fd
, &
ªgfd£t
);

369 i‡(
fd
 >
ªgfdmax
)Ñegfdmax = fd + 1;

370 
	`SERVER_UNLOCK
();

371 
	}
}

374 
	$GrUƒegi°îI≈ut
(
fd
)

376 
i
, 
max
;

378 
	`SERVER_LOCK
();

381 i‡(
fd
 == -1) {

382 
	`FD_ZERO
(&
ªgfd£t
);

383 
ªgfdmax
 = -1;

384 
	`SERVER_UNLOCK
();

388 
	`FD_CLR
(
fd
, &
ªgfd£t
);

390 
i
 = 0, 
max
 = 
ªgfdmax
,Ñegfdmax = -1; i < max; i++)

391 i‡(
	`FD_ISSET
(
i
, &
ªgfd£t
))

392 
ªgfdmax
 = 
i
 + 1;

394 
	`SERVER_UNLOCK
();

395 
	}
}

405 
	$GrDñay
(
GR_TIMEOUT
 
m£cs
)

407 #ifde‡
PSP


408 
	`s˚Kî√lDñayThªad
(1000 * 
m£cs
);

411 #i‡
UNIX
 && 
	`deföed
(
HAVESELECT
)

412 
timevÆ
Åimeval;

414 
timevÆ
.
tv_£c
 = 
m£cs
 / 1000;

415 
timevÆ
.
tv_u£c
 = (
m£cs
 % 1000) * 1000;

416 
	`£À˘
(0, 
NULL
, NULL, NULL, &
timevÆ
);

418 
	}
}

420 #i‡
NONETWORK


422 
	$GrFlush
()

424 
	}
}

427 
	$GrMaöLo›
(
GR_FNCALLBACKEVENT
 
‚cb
)

429 
GR_EVENT
 
evít
;

432 
	`GrGëNextEvít
(&
evít
);

433 
	`‚cb
(&
evít
);

435 
	}
}

438 
	$GrReqShmCmds
(
shmsize
)

441 
	}
}

445 #i‡
VXWORKS


447 
	#POLLTIME
 100

	)

448 
	#MAX_MOUSEEVENTS
 10

	)

449 
	#MAX_KEYBDEVENTS
 10

	)

451 
GdSÀï
(
dwMûli£c⁄ds
);

454 
	$GsSñe˘
(
GR_TIMEOUT
 
timeout
)

456 
mou£evíts
 = 0;

457 
keybdevíts
 = 0;

458 
GR_TIMEOUT
 
waôtime
 = 0;

459 
GR_EVENT_GENERAL
 *
gp
;

467 if(
s¸dev
.
PªSñe˘
)

469 
s¸dev
.
	`PªSñe˘
(&scrdev);

474 
mou£dev
.
	`Pﬁl
() > 0)

476 
	`GsCheckMou£Evít
();

477 i‡(
mou£evíts
++ > 
MAX_MOUSEEVENTS
)

486 
kbddev
.
	`Pﬁl
() > 0)

488 
	`GsCheckKeybﬂrdEvít
();

489 i‡(
keybdevíts
++ > 
MAX_KEYBDEVENTS
)

498 i‡((
mou£evíts
 > 0Ë|| (
keybdevíts
 > 0))

506 
	`GdSÀï
(
POLLTIME
);

507 
waôtime
 +
POLLTIME
;

511 i‡(
waôtime
 >
timeout
)

514 i‡(
timeout
 != 0)

520 i‡((
gp
 = (
GR_EVENT_GENERAL
 *)
	`GsAŒocEvít
(
cur˛õ¡
)Ë!
NULL
)

522 
gp
->
ty≥
 = 
GR_EVENT_TYPE_TIMEOUT
;

529 
	}
}

531 #ñi‡
PSP


533 
	#POLLTIME
 1

	)

534 
	#MAX_MOUSEEVENTS
 10

	)

535 
	#MAX_KEYBDEVENTS
 10

	)

538 
	$GsSñe˘
(
GR_TIMEOUT
 
timeout
)

540 
mou£evíts
 = 0;

541 
keybdevíts
 = 0;

542 
GR_TIMEOUT
 
waôtime
 = 0;

543 
GR_EVENT_GENERAL
 *
gp
;

550 if(
s¸dev
.
PªSñe˘
)

552 
s¸dev
.
	`PªSñe˘
(&scrdev);

557 
mou£dev
.
	`Pﬁl
() > 0)

559 
	`GsCheckMou£Evít
();

560 i‡(
mou£evíts
++ > 
MAX_MOUSEEVENTS
)

569 
kbddev
.
	`Pﬁl
() > 0)

571 
	`GsCheckKeybﬂrdEvít
();

572 i‡(
keybdevíts
++ > 
MAX_KEYBDEVENTS
)

581 i‡((
mou£evíts
 > 0Ë|| (
keybdevíts
 > 0))

589 
	`GrDñay
(
POLLTIME
);

590 
waôtime
 +
POLLTIME
;

594 i‡(
waôtime
 >
timeout
)

597 i‡(
timeout
 != 0)

603 i‡((
gp
 = (
GR_EVENT_GENERAL
 *)
	`GsAŒocEvít
(
cur˛õ¡
)Ë!
NULL
)

605 
gp
->
ty≥
 = 
GR_EVENT_TYPE_TIMEOUT
;

612 
	}
}

615 #ñi‡
MSDOS
 | 
_MINIX


618 
	$GsSñe˘
(
GR_TIMEOUT
 
timeout
)

621 if(
mou£dev
.
	`Pﬁl
())

622 
	`GsCheckMou£Evít
())

626 if(
kbddev
.
	`Pﬁl
())

627 
	`GsCheckKeybﬂrdEvít
())

630 
	}
}

632 #ñi‡
UNIX
 && 
deföed
(
HAVESELECT
)

635 
	$GsSñe˘
(
GR_TIMEOUT
 
timeout
)

637 
fd_£t
 
rfds
;

638 
e
;

639 
£tsize
 = 0;

640 
timevÆ
 
tout
;

641 
timevÆ
 *
to
;

642 #i‡
NONETWORK


643 
fd
;

647 if(
roŸwp
->
psd
->
PªSñe˘
)

648 
roŸwp
->
psd
->
	`PªSñe˘
(rootwp->psd);

651 
	`FD_ZERO
(&
rfds
);

652 if(
mou£_fd
 >= 0) {

653 
	`FD_SET
(
mou£_fd
, &
rfds
);

654 i‡(
mou£_fd
 > 
£tsize
)

655 
£tsize
 = 
mou£_fd
;

657 if(
keyb_fd
 >= 0) {

658 
	`FD_SET
(
keyb_fd
, &
rfds
);

659 i‡(
keyb_fd
 > 
£tsize
)

660 
£tsize
 = 
keyb_fd
;

662 #ifde‡
MW_FEATURE_TWO_KEYBOARDS


663 if(
keyb2_fd
 >= 0) {

664 
	`FD_SET
(
keyb2_fd
, &
rfds
);

665 i‡(
keyb2_fd
 > 
£tsize
)

666 
£tsize
 = 
keyb2_fd
;

669 #i‡
NONETWORK


671 
fd
 = 0; fd < 
ªgfdmax
; fd++) {

672 i‡(!
	`FD_ISSET
(
fd
, &
ªgfd£t
))

675 
	`FD_SET
(
fd
, &
rfds
);

676 i‡(
fd
 > 
£tsize
) setsize = fd;

680 
	`FD_SET
(
un_sock
, &
rfds
);

681 i‡(
un_sock
 > 
£tsize
) setsize = un_sock;

682 
cur˛õ¡
 = 
roŸ_˛õ¡
;

683 
cur˛õ¡
) {

684 if(
cur˛õ¡
->
waôög_f‹_evít
 && cur˛õ¡->
evíthód
) {

685 
cur˛õ¡
->
waôög_f‹_evít
 = 
FALSE
;

686 
	`GrGëNextEvítWøµîFöish
(
cur˛õ¡
->
id
);

689 
	`FD_SET
(
cur˛õ¡
->
id
, &
rfds
);

690 if(
cur˛õ¡
->
id
 > 
£tsize
) setsize = curclient->id;

691 
cur˛õ¡
 = cur˛õ¡->
√xt
;

695 i‡(
timeout
 =(
GR_TIMEOUT
) -1L) {

697 
tout
.
tv_£c
 = 0;

698 
tout
.
tv_u£c
 = 0;

699 
to
 = &
tout
;

701 #i‡
MW_FEATURE_TIMERS


702 if(
	`GdGëNextTimeout
(&
tout
, 
timeout
Ë=
TRUE
)

703 
to
 = &
tout
;

706 
to
 = 
NULL
;

710 if((
e
 = 
	`£À˘
(
£tsize
+1, &
rfds
, 
NULL
, NULL, 
to
)) > 0) {

712 if(
mou£_fd
 >0 && 
	`FD_ISSET
(mou£_fd, &
rfds
))

713 
	`GsCheckMou£Evít
())

717 if–(
keyb_fd
 >0 && 
	`FD_ISSET
(keyb_fd, &
rfds
))

718 #ifde‡
MW_FEATURE_TWO_KEYBOARDS


719 || (
keyb2_fd
 >0 && 
	`FD_ISSET
(keyb2_fd, &
rfds
))

722 
	`GsCheckKeybﬂrdEvít
())

725 #i‡
NONETWORK


727 
fd
 = 0; fd < 
ªgfdmax
; fd++) {

728 
GR_EVENT_FDINPUT
 * 
gp
;

730 i‡(!
	`FD_ISSET
(
fd
, &
ªgfd£t
Ë|| !FD_ISSET(fd, &
rfds
))

733 
gp
 =(
GR_EVENT_FDINPUT
 *)
	`GsAŒocEvít
(
cur˛õ¡
);

734 if(
gp
) {

735 
gp
->
ty≥
 = 
GR_EVENT_TYPE_FDINPUT
;

736 
gp
->
fd
 = fd;

742 if(
	`FD_ISSET
(
un_sock
, &
rfds
))

743 
	`GsAc˚±Clõ¡
();

746 
cur˛õ¡
 = 
roŸ_˛õ¡
;

747 
cur˛õ¡
) {

748 
GR_CLIENT
 *
cur˛õ¡_√xt
;

751 
cur˛õ¡_√xt
 = 
cur˛õ¡
->
√xt
;

752 if(
	`FD_ISSET
(
cur˛õ¡
->
id
, &
rfds
))

753 
	`GsH™dÀClõ¡
(
cur˛õ¡
->
id
);

754 
cur˛õ¡
 = 
cur˛õ¡_√xt
;

758 i‡(
e
 == 0) {

759 #i‡
NONETWORK


767 #i‡
MW_FEATURE_TIMERS


768 if(
	`GdTimeout
(Ë=
TRUE
)

771 
GR_EVENT_GENERAL
 * 
gp
;

772 
gp
 = (
GR_EVENT_GENERAL
 *)
	`GsAŒocEvít
(
cur˛õ¡
);

773 if(
gp
)

774 
gp
->
ty≥
 = 
GR_EVENT_TYPE_TIMEOUT
;

777 #i‡
MW_FEATURE_TIMERS


778 
	`GdTimeout
();

782 if(
î∫o
 !
EINTR
)

783 
	`EPRINTF
("Select() call in main failed\n");

784 
	}
}

786 #i‡
NONETWORK


811 
	$GrPª∑ªSñe˘
(*
maxfd
, *
rfd£t
)

813 
fd_£t
 *
rfds
 = (fd_£à*Ë
rfd£t
;

814 
fd
;

816 
	`SERVER_LOCK
();

819 if(
roŸwp
->
psd
->
PªSñe˘
)

820 
roŸwp
->
psd
->
	`PªSñe˘
(rootwp->psd);

822 if(
mou£_fd
 >= 0) {

823 
	`FD_SET
(
mou£_fd
, 
rfds
);

824 i‡(
mou£_fd
 > *
maxfd
)

825 *
maxfd
 = 
mou£_fd
;

827 if(
keyb_fd
 >= 0) {

828 
	`FD_SET
(
keyb_fd
, 
rfds
);

829 i‡(
keyb_fd
 > *
maxfd
)

830 *
maxfd
 = 
keyb_fd
;

832 #ifde‡
MW_FEATURE_TWO_KEYBOARDS


833 if(
keyb2_fd
 >= 0) {

834 
	`FD_SET
(
keyb2_fd
, 
rfds
);

835 i‡(
keyb2_fd
 > *
maxfd
)

836 *
maxfd
 = 
keyb2_fd
;

841 
fd
 = 0; fd < 
ªgfdmax
; fd++) {

842 i‡(!
	`FD_ISSET
(
fd
, &
ªgfd£t
))

845 
	`FD_SET
(
fd
, 
rfds
);

846 i‡(
fd
 > *
maxfd
)

847 *
maxfd
 = 
fd
;

850 
	`SERVER_UNLOCK
();

851 
	}
}

866 
	$GrSîvi˚Sñe˘
(*
rfd£t
, 
GR_FNCALLBACKEVENT
 
‚cb
)

868 
fd_£t
 * 
rfds
 = 
rfd£t
;

869 
GR_EVENT_LIST
 * 
ñp
;

870 
GR_EVENT
 
ev
;

871 
fd
;

873 
	`SERVER_LOCK
();

876 if(
mou£_fd
 >0 && 
	`FD_ISSET
(mou£_fd, 
rfds
))

877 
	`GsCheckMou£Evít
())

881 if–(
keyb_fd
 >0 && 
	`FD_ISSET
(keyb_fd, 
rfds
))

882 #ifde‡
MW_FEATURE_TWO_KEYBOARDS


883 || (
keyb2_fd
 >0 && 
	`FD_ISSET
(keyb2_fd, 
rfds
))

886 
	`GsCheckKeybﬂrdEvít
())

890 (
ñp
 = 
cur˛õ¡
->
evíthód
Ë!
NULL
) {

892 
ev
 = 
ñp
->
evít
;

895 
cur˛õ¡
->
evíthód
 = 
ñp
->
√xt
;

896 i‡(
cur˛õ¡
->
evíâaû
 =
ñp
)

897 
cur˛õ¡
->
evíâaû
 = 
NULL
;

899 
ñp
->
√xt
 = 
evít‰ì
;

900 
evít‰ì
 = 
ñp
;

902 
	`‚cb
(&
ev
);

906 
fd
 = 0; fd < 
ªgfdmax
; fd++) {

907 i‡(!
	`FD_ISSET
(
fd
, &
ªgfd£t
Ë|| !FD_ISSET(fd, 
rfds
))

910 
ev
.
ty≥
 = 
GR_EVENT_TYPE_FDINPUT
;

911 
ev
.
fdöput
.
fd
 = fd;

912 
	`‚cb
(&
ev
);

915 
	`SERVER_UNLOCK
();

916 
	}
}

922 #i‡
RTEMS


923 
MW_UID_MESSAGE
 
m_kbd
;

924 
MW_UID_MESSAGE
 
m_mou
;

927 
	$GsSñe˘
 (
GR_TIMEOUT
 
timeout
)

929 
MW_UID_MESSAGE
 
m
;

930 
rc
;

933 i‡(
s¸dev
.
PªSñe˘
)

934 
s¸dev
.
	`PªSñe˘
 (&scrdev);

937 
m
.
ty≥
 = 
MV_UID_INVALID
;

940 
rc
 = 
	`uid_ªad_mesßge
 (&
m
, 
timeout
);

943 i‡(
rc
 < 0) {

944 i‡(
î∫o
 !
ETIMEDOUT
)

945 
	`EPRINTF
 ("Ñc%d,Éºno=%d\n", 
rc
, 
î∫o
);

953 
m
.
ty≥
) {

954 
MV_UID_REL_POS
:

955 
MV_UID_ABS_POS
:

956 
m_mou
 = 
m
;

957 
	`GsCheckMou£Evít
 ()) ;

959 
MV_UID_KBD
:

960 
m_kbd
 = 
m
;

961 
	`GsCheckKeybﬂrdEvít
 ();

963 
MV_UID_TIMER
:

964 
MV_UID_INVALID
:

968 
	}
}

971 #i‡
VTSWITCH


973 
	$CheckVtCh™ge
(*
¨g
)

975 if(
	`MwCheckVtCh™ge
())

976 
	`GsRedøwS¸ìn
();

977 
	`GdAddTimî
(50, 
CheckVtCh™ge
, 
NULL
);

978 
	}
}

986 
	$GsInôülize
()

988 
GR_WINDOW
 *
wp
;

989 
PSD
 
psd
;

990 
GR_CURSOR_ID
 
cid
;

991 
MWIMAGEBITS
 
curs‹bôs
[16] = {

997 
MWIMAGEBITS
 
curs‹mask
[16] = {

1005 
	`SERVER_LOCK_INIT
();

1007 
	`£tbuf
(
°dout
, 
NULL
);

1008 
	`£tbuf
(
°dîr
, 
NULL
);

1010 
wp
 = (
GR_WINDOW
 *Ë
	`mÆloc
((GR_WINDOW));

1011 i‡(
wp
 =
NULL
) {

1012 
	`EPRINTF
("CannotállocateÑoot window\n");

1016 
°¨tTicks
 = 
	`GsGëTickCou¡
();

1018 #i‚de‡
MW_NOSIGNALS


1020 
	`sig«l
(
SIGTERM
, (*)
GsTîmö©e
);

1023 #i‡
MW_FEATURE_TIMERS


1024 
s¸ìnßvî_dñay
 = 0;

1026 
s¸ìnßvî_a˘ive
 = 
GR_FALSE
;

1028 
£À˘i⁄_ow√r
.
wid
 = 0;

1029 
£À˘i⁄_ow√r
.
ty≥li°
 = 
NULL
;

1031 #i‡!
NONETWORK


1032 #i‚de‡
MW_NOSIGNALS


1034 
	`sig«l
(
SIGPIPE
, 
SIG_IGN
);

1035 
	`sig«l
(
SIGHUP
, 
SIG_IGN
);

1038 i‡(
	`GsO≥nSockë
() < 0) {

1039 
	`EPRINTF
("Cannot bindÅoÇamed socket\n");

1040 
	`‰ì
(
wp
);

1045 i‡((
keyb_fd
 = 
	`GdO≥nKeybﬂrd
()) == -1) {

1046 
	`EPRINTF
("Cannot initialise keyboard\n");

1048 
	`‰ì
(
wp
);

1052 #ifde‡
MW_FEATURE_TWO_KEYBOARDS


1053 i‡((
keyb2_fd
 = 
	`GdO≥nKeybﬂrd2
()) == -1) {

1054 
	`EPRINTF
("Cannot initialise second keyboard\n");

1056 
	`‰ì
(
wp
);

1061 i‡((
psd
 = 
	`GdO≥nS¸ìn
()Ë=
NULL
) {

1062 
	`EPRINTF
("Cannot initialise screen\n");

1064 
	`GdClo£Keybﬂrd
();

1065 
	`‰ì
(
wp
);

1068 
	`GdSëP‹åaôMode
(
psd
, 
p‹åaômode
);

1070 i‡((
mou£_fd
 = 
	`GdO≥nMou£
()) == -1) {

1071 
	`EPRINTF
("Cannot initialise mouse\n");

1073 
	`GdClo£S¸ìn
(
psd
);

1074 
	`GdClo£Keybﬂrd
();

1075 
	`‰ì
(
wp
);

1082 #i‡(
HAVE_BIG5_SUPPORT
 | 
HAVE_GB2312_SUPPORT
 | 
HAVE_JISX0213_SUPPORT
 | 
HAVE_KSC5601_SUPPORT
)

1084 
°df⁄t
 = 
	`GdCª©eF⁄t
(
psd
, 
MWFONT_SYSTEM_FIXED
, 0, 
NULL
);

1086 
°df⁄t
 = 
	`GdCª©eF⁄t
(
psd
, 
MWFONT_SYSTEM_VAR
, 0, 
NULL
);

1092 
wp
->
psd
 =Ösd;

1093 
wp
->
id
 = 
GR_ROOT_WINDOW_ID
;

1094 
wp
->
∑ª¡
 = 
NULL
;

1095 
wp
->
ow√r
 = 
NULL
;

1096 
wp
->
chûdªn
 = 
NULL
;

1097 
wp
->
siblögs
 = 
NULL
;

1098 
wp
->
√xt
 = 
NULL
;

1099 
wp
->
x
 = 0;

1100 
wp
->
y
 = 0;

1101 
wp
->
width
 = 
psd
->
xvúåes
;

1102 
wp
->
height
 = 
psd
->
yvúåes
;

1103 
wp
->
b‹dîsize
 = 0;

1104 
wp
->
background
 = 
BLACK
;

1105 
wp
->
b‹dîcﬁ‹
 = wp->
background
;

1106 
wp
->
n›r›mask
 = 0;

1107 
wp
->
bgpixm≠
 = 
NULL
;

1108 
wp
->
bgpixm≠Êags
 = 
GR_BACKGROUND_TILE
;

1109 
wp
->
evít˛õ¡s
 = 
NULL
;

1110 
wp
->
curs‹id
 = 0;

1111 
wp
->
m≠≥d
 = 
GR_TRUE
;

1112 
wp
->
ªÆized
 = 
GR_TRUE
;

1113 
wp
->
ouçut
 = 
GR_TRUE
;

1114 
wp
->
¥›s
 = 0;

1115 
wp
->
tôÀ
 = 
NULL
;

1116 
wp
->
˛ùªgi⁄
 = 
NULL
;

1118 
li°µ
 = 
NULL
;

1119 
li°wp
 = 
wp
;

1120 
roŸwp
 = 
wp
;

1121 
focuswp
 = 
wp
;

1122 
mou£wp
 = 
wp
;

1123 
focusfixed
 = 
GR_FALSE
;

1128 
curcurs‹
 = 
NULL
;

1129 
curs‹x
 = -1;

1130 
curs‹y
 = -1;

1131 
	`GdShowCurs‹
(
psd
);

1132 
	`GrMoveCurs‹
(
psd
->
xvúåes
 / 2,Ösd->
yvúåes
 / 2);

1133 
cid
 = 
	`GrNewCurs‹
(16, 16, 0, 0, 
WHITE
, 
BLACK
, 
curs‹bôs
, 
curs‹mask
);

1134 
	`GrSëWödowCurs‹
(
GR_ROOT_WINDOW_ID
, 
cid
);

1135 
°dcurs‹
 = 
	`GsFödCurs‹
(
cid
);

1137 #i‡
VTSWITCH


1138 
	`MwInôVt
();

1140 
	`GdAddTimî
(50, 
CheckVtCh™ge
, 
NULL
);

1142 
psd
->
	`FûlRe˘
’sd, 0, 0,Ösd->
xvúåes
-1,Ösd->
yvúåes
-1,

1143 
	`GdFödCﬁ‹
(
psd
, 
wp
->
background
));

1148 
curbuâ⁄s
 = 0;

1149 
	`GdRe°ri˘Mou£
(0, 0, 
psd
->
xvúåes
 - 1,Ösd->
yvúåes
 - 1);

1150 
	`GdMoveMou£
(
psd
->
xvúåes
 / 2,Ösd->
yvúåes
 / 2);

1153 
	`GsRedøwS¸ìn
();

1165 
c⁄√˘cou¡
 = 0;

1167 
	}
}

1173 
	$GsTîmö©e
()

1175 #i‡!
NONETWORK


1176 
	`GsClo£Sockë
();

1178 
	`GdClo£S¸ìn
(
roŸwp
->
psd
);

1179 
	`GdClo£Mou£
();

1180 
	`GdClo£Keybﬂrd
();

1181 #i‡
VTSWITCH


1182 
	`MwRedøwVt
(
mwvãrm
);

1184 
	`exô
(0);

1185 
	}
}

1191 
GR_TIMEOUT


1192 
	$GsGëTickCou¡
()

1194 #i‡
MSDOS


1195 
	~<time.h
>

1196  ()(
	`˛ock
(Ë* 1000 / 
CLOCKS_PER_SEC
);

1198 #i‡
_MINIX


1199 
tms
 
t
;

1201  ()
	`times
(&
t
) * 16;

1203 #i‡
UNIX


1204 
timevÆ
 
t
;

1206 
	`gëtimeofday
(&
t
, 
NULL
);

1207  ((
t
.
tv_£c
 * 1000Ë+ (t.
tv_u£c
 / 25000Ë* 25Ë- 
°¨tTicks
;

1213 
	}
}

1216 
	$GrBñl
()

1218 
	`SERVER_LOCK
();

1219 #i‚de‡
PSP


1220 
	`wrôe
(2, "\7", 1);

1222 
	`SERVER_UNLOCK
();

1223 
	}
}

	@nanox/srvnet.c

18 
	~<°dio.h
>

19 
	~<°ddef.h
>

20 
	~<°dlib.h
>

21 
	~<uni°d.h
>

22 
	~<î∫o.h
>

23 
	~<°rög.h
>

24 
	~<sys/sockë.h
>

25 #i‡
HAVE_SHAREDMEM_SUPPORT


26 
	~<sys/ty≥s.h
>

27 
	~<sys/ùc.h
>

28 
	~<sys/shm.h
>

30 #i‡
ELKS


31 
	~<löuxmt/«.h
>

32 #ñi‡
__ECOS


33 
	~<√töë/ö.h
>

36 #i‚de‡
TRIMEDIA


37 
	~<sys/un.h
>

40 
	~"£rv.h
"

41 
	~"nx¥Ÿo.h
"

44 #i‚de‡
SOCK_STREAM


45 
	#SOCK_STREAM
 2

	)

48 
un_sock
;

49 
GR_CLIENT
 *
roŸ_˛õ¡
;

50 
cuºít_fd
;

52 
GsWrôeTy≥
(,);

59 #i‡(!
MW_FEATURE_TIMERS
Ë|| (!
MW_FEATURE_IMAGES
Ë|| (!
deföed
(
HAVE_FILEIO
))

61 
	$GrNŸIm∂emíãdWøµî
(*
r
)

63 
	`EPRINTF
("«no-X: Fun˘i⁄ %s(ËnŸ im∂emíãd\n", 
curfunc
);

64 
	}
}

68 
	$GrO≥nWøµî
(*
r
)

70 
nxO≥nReq
 *
ªq
 = 
r
;

73 
cur˛õ¡
->
¥o˚ssid
 = 
ªq
->
pid
;

75 
	`GrO≥n
();

76 
	}
}

79 
	$GrClo£Wøµî
(*
r
)

81 
	`GrClo£
();

82 
	}
}

85 
	$GrGëS¸ìnInfoWøµî
(*
r
)

87 
GR_SCREEN_INFO
 
si
;

89 
	`GrGëS¸ìnInfo
(&
si
);

90 
	`GsWrôeTy≥
(
cuºít_fd
,
GrNumGëS¸ìnInfo
);

91 
	`GsWrôe
(
cuºít_fd
, &
si
, (si));

92 
	}
}

95 
	$GrGëSysCﬁ‹Wøµî
(*
r
)

97 
nxGëSysCﬁ‹Req
 *
ªq
 = 
r
;

98 
GR_COLOR
 
cﬁ‹
 = 
	`GrGëSysCﬁ‹
(
ªq
->
ödex
);

100 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumGëSysCﬁ‹
);

101 
	`GsWrôe
(
cuºít_fd
, &
cﬁ‹
, (color));

102 
	}
}

105 
	$GrNewWödowWøµî
(*
r
)

107 
nxNewWödowReq
 *
ªq
 = 
r
;

108 
GR_WINDOW_ID
 
wid
;

110 
wid
 = 
	`GrNewWödow
(
ªq
->
∑ª¡id
,Ñeq->
x
,Ñeq->
y
,Ñeq->
width
,

111 
ªq
->
height
,Ñeq->
b‹dîsize
,Ñeq->
backgroundcﬁ‹
,

112 
ªq
->
b‹dîcﬁ‹
);

114 
	`GsWrôeTy≥
(
cuºít_fd
,
GrNumNewWödow
);

115 
	`GsWrôe
(
cuºít_fd
, &
wid
, (wid));

116 
	}
}

120 
	$GrNewPixm≠Wøµî
(*
r
)

122 
nxNewPixm≠Req
 *
ªq
 = 
r
;

123 
GR_WINDOW_ID
 
wid
;

128 
wid
 = 
	`GrNewPixm≠
(
ªq
->
width
,Ñeq->
height
, 0);

130 
	`GsWrôeTy≥
(
cuºít_fd
,
GrNumNewPixm≠
);

131 
	`GsWrôe
(
cuºít_fd
, &
wid
, (wid));

132 
	}
}

135 
	$GrNewI≈utWödowWøµî
(*
r
)

137 
nxNewI≈utWödowReq
 *
ªq
 = 
r
;

138 
GR_WINDOW_ID
 
wid
;

140 
wid
 = 
	`GrNewI≈utWödow
(
ªq
->
∑ª¡id
,Ñeq->
x
,Ñeq->
y
,Ñeq->
width
,

141 
ªq
->
height
);

142 
	`GsWrôeTy≥
(
cuºít_fd
,
GrNumNewI≈utWödow
);

143 
	`GsWrôe
(
cuºít_fd
, &
wid
, (wid));

144 
	}
}

147 
	$GrDe°royWödowWøµî
(*
r
)

149 
nxDe°royWödowReq
 *
ªq
 = 
r
;

151 
	`GrDe°royWödow
(
ªq
->
wödowid
);

152 
	}
}

155 
	$GrNewGCWøµî
(*
r
)

157 
GR_GC_ID
 
gc
 = 
	`GrNewGC
();

159 
	`GsWrôeTy≥
(
cuºít_fd
,
GrNumNewGC
);

160 
	`GsWrôe
(
cuºít_fd
, &
gc
, (gc));

161 
	}
}

164 
	$GrC›yGCWøµî
(*
r
)

166 
nxC›yGCReq
 *
ªq
 = 
r
;

167 
GR_GC_ID
 
g˙ew
;

169 
g˙ew
 = 
	`GrC›yGC
(
ªq
->
gcid
);

170 
	`GsWrôeTy≥
(
cuºít_fd
,
GrNumC›yGC
);

171 
	`GsWrôe
(
cuºít_fd
, &
g˙ew
, (gcnew));

172 
	}
}

175 
	$GrGëGCInfoWøµî
(*
r
)

177 
nxGëGCInfoReq
 *
ªq
 = 
r
;

178 
GR_GC_INFO
 
gcöfo
;

180 
	`GrGëGCInfo
(
ªq
->
gcid
, &
gcöfo
);

181 
	`GsWrôeTy≥
(
cuºít_fd
,
GrNumGëGCInfo
);

182 
	`GsWrôe
(
cuºít_fd
, &
gcöfo
, (gcinfo));

183 
	}
}

186 
	$GrDe°royGCWøµî
(*
r
)

188 
nxDe°royGCReq
 *
ªq
 = 
r
;

190 
	`GrDe°royGC
(
ªq
->
gcid
);

191 
	}
}

194 
	$GrNewRegi⁄Wøµî
(*
r
)

196 
GR_REGION_ID
 
ªgi⁄
 = 
	`GrNewRegi⁄
();

198 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumNewRegi⁄
);

199 
	`GsWrôe
(
cuºít_fd
, &
ªgi⁄
, (region));

200 
	}
}

203 
	$GrDe°royRegi⁄Wøµî
(*
r
)

205 
nxDe°royRegi⁄Req
 *
ªq
 = 
r
;

207 
	`GrDe°royRegi⁄
(
ªq
->
ªgi⁄id
);

208 
	}
}

211 
	$GrI¡î£˘Regi⁄Wøµî
(*
r
)

213 
nxI¡î£˘Regi⁄Req
 *
ªq
 = 
r
;

215 
	`GrI¡î£˘Regi⁄
(
ªq
->
ªgi⁄id
,Ñeq->
§¸egi⁄id1
,

216 
ªq
->
§¸egi⁄id2
);

217 
	}
}

220 
	$GrUni⁄Re˘WôhRegi⁄Wøµî
(*
r
)

222 
nxUni⁄Re˘WôhRegi⁄Req
 *
ªq
 = 
r
;

224 
	`GrUni⁄Re˘WôhRegi⁄
(
ªq
->
ªgi⁄id
, &‘eq->
ª˘
));

225 
	}
}

228 
	$GrUni⁄Regi⁄Wøµî
(*
r
)

230 
nxUni⁄Regi⁄Req
 *
ªq
 = 
r
;

232 
	`GrUni⁄Regi⁄
(
ªq
->
ªgi⁄id
,Ñeq->
§¸egi⁄id1
,Ñeq->
§¸egi⁄id2
);

233 
	}
}

236 
	$GrSubåa˘Regi⁄Wøµî
(*
r
)

238 
nxSubåa˘Regi⁄Req
 *
ªq
 = 
r
;

240 
	`GrSubåa˘Regi⁄
(
ªq
->
ªgi⁄id
,Ñeq->
§¸egi⁄id1
,Ñeq->
§¸egi⁄id2
);

241 
	}
}

244 
	$GrX‹Regi⁄Wøµî
(*
r
)

246 
nxX‹Regi⁄Req
 *
ªq
 = 
r
;

248 
	`GrX‹Regi⁄
(
ªq
->
ªgi⁄id
,Ñeq->
§¸egi⁄id1
,Ñeq->
§¸egi⁄id2
);

249 
	}
}

252 
	$GrPoötInRegi⁄Wøµî
(*
r
)

254 
nxPoötInRegi⁄Req
 *
ªq
 = 
r
;

255 
GR_BOOL
 
ªt_vÆue
 = 
	`GrPoötInRegi⁄
(
ªq
->
ªgi⁄id
,Ñeq->
x
,Ñeq->
y
);

257 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumPoötInRegi⁄
);

258 
	`GsWrôe
(
cuºít_fd
, &
ªt_vÆue
, (ret_value));

259 
	}
}

262 
	$GrRe˘InRegi⁄Wøµî
(*
r
)

264 
nxRe˘InRegi⁄Req
 *
ªq
 = 
r
;

265 
ªt_vÆue
;

267 
ªt_vÆue
 = ()
	`GrRe˘InRegi⁄
(
ªq
->
ªgi⁄id
,

268 
ªq
->
x
,Ñeq->
y
,Ñeq->
w
,Ñeq->
h
);

270 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumRe˘InRegi⁄
);

271 
	`GsWrôe
(
cuºít_fd
, &
ªt_vÆue
, (ret_value));

272 
	}
}

275 
	$GrEm±yRegi⁄Wøµî
(*
r
)

277 
nxEm±yRegi⁄Req
 *
ªq
 = 
r
;

278 
GR_BOOL
 
ªt_vÆue
;

280 
ªt_vÆue
 = 
	`GrEm±yRegi⁄
(
ªq
->
ªgi⁄id
);

281 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumEm±yRegi⁄
);

282 
	`GsWrôe
(
cuºít_fd
, &
ªt_vÆue
, (ret_value));

283 
	}
}

286 
	$GrEquÆRegi⁄Wøµî
(*
r
)

288 
nxEquÆRegi⁄Req
 *
ªq
 = 
r
;

289 
GR_BOOL
 
ªt_vÆue
;

291 
ªt_vÆue
 = 
	`GrEquÆRegi⁄
(
ªq
->
ªgi⁄1
,Ñeq->
ªgi⁄2
);

292 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumEquÆRegi⁄
);

293 
	`GsWrôe
(
cuºít_fd
, &
ªt_vÆue
, (ret_value));

294 
	}
}

297 
	$GrOff£tRegi⁄Wøµî
(*
r
)

299 
nxOff£tRegi⁄Req
 *
ªq
 = 
r
;

301 
	`GrOff£tRegi⁄
(
ªq
->
ªgi⁄
,Ñeq->
dx
,Ñeq->
dy
);

302 
	}
}

305 
	$GrSëGCRegi⁄Wøµî
(*
r
)

307 
nxSëGCRegi⁄Req
 *
ªq
 = 
r
;

309 
	`GrSëGCRegi⁄
(
ªq
->
gcid
,Ñeq->
ªgi⁄id
);

310 
	}
}

313 
	$GrSëGCClùOrigöWøµî
(*
r
)

315 
nxSëGCClùOrigöReq
 *
ªq
 = 
r
;

316 
	`GrSëGCClùOrigö
(
ªq
->
gcid
,Ñeq->
xoff
,Ñeq->
yoff
);

317 
	}
}

320 
	$GrSëGCGøphicsExposuªWøµî
(*
r
)

322 
nxSëGCGøphicsExposuªReq
 *
ªq
 = 
r
;

323 
	`GrSëGCGøphicsExposuª
(
ªq
->
gcid
,Ñeq->
exposuª
);

324 
	}
}

327 
	$GrGëRegi⁄BoxWøµî
(*
r
)

329 
nxRe˘InRegi⁄Req
 *
ªq
 = 
r
;

330 
GR_BOOL
 
ªt_vÆue
;

331 
GR_RECT
 
ªt_ª˘
;

333 
ªt_vÆue
 = 
	`GrGëRegi⁄Box
(
ªq
->
ªgi⁄id
, &
ªt_ª˘
);

335 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumGëRegi⁄Box
);

336 
	`GsWrôe
(
cuºít_fd
, &
ªt_ª˘
, (ret_rect));

337 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumGëRegi⁄Box
);

338 
	`GsWrôe
(
cuºít_fd
, &
ªt_vÆue
, (ret_value));

339 
	}
}

342 
	$GrNewPﬁyg⁄Regi⁄Wøµî
(*
r
)

344 
GR_REGION_ID
 
ªgi⁄
;

345 
nxNewPﬁyg⁄Regi⁄Req
 *
ªq
 = 
r
;

346 
cou¡
;

349 
cou¡
 = 
	`GëReqV¨Lí
(
ªq
Ë/ (
GR_POINT
);

350 
ªgi⁄
 = 
	`GrNewPﬁyg⁄Regi⁄
(
ªq
->
mode
, 
cou¡
,

351 (
GR_POINT
 *)
	`GëReqD©a
(
ªq
));

353 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumNewPﬁyg⁄Regi⁄
);

354 
	`GsWrôe
(
cuºít_fd
, &
ªgi⁄
, (region));

355 
	}
}

358 
	$GrM≠WödowWøµî
(*
r
)

360 
nxM≠WödowReq
 *
ªq
 = 
r
;

362 
	`GrM≠Wödow
(
ªq
->
wödowid
);

363 
	}
}

366 
	$GrUnm≠WödowWøµî
(*
r
)

368 
nxUnm≠WödowReq
 *
ªq
 = 
r
;

370 
	`GrUnm≠Wödow
(
ªq
->
wödowid
);

371 
	}
}

374 
	$GrRai£WödowWøµî
(*
r
)

376 
nxRai£WödowReq
 *
ªq
 = 
r
;

378 
	`GrRai£Wödow
(
ªq
->
wödowid
);

379 
	}
}

382 
	$GrLowîWödowWøµî
(*
r
)

384 
nxLowîWödowReq
 *
ªq
 = 
r
;

386 
	`GrLowîWödow
(
ªq
->
wödowid
);

387 
	}
}

390 
	$GrMoveWödowWøµî
(*
r
)

392 
nxMoveWödowReq
 *
ªq
 = 
r
;

394 
	`GrMoveWödow
(
ªq
->
wödowid
,Ñeq->
x
,Ñeq->
y
);

395 
	}
}

398 
	$GrResizeWödowWøµî
(*
r
)

400 
nxResizeWödowReq
 *
ªq
 = 
r
;

402 
	`GrResizeWödow
(
ªq
->
wödowid
,Ñeq->
width
,Ñeq->
height
);

403 
	}
}

406 
	$GrRï¨ítWödowWøµî
(*
r
)

408 
nxRï¨ítWödowReq
 *
ªq
 = 
r
;

410 
	`GrRï¨ítWödow
(
ªq
->
wödowid
,Ñeq->
∑ª¡id
,Ñeq->
x
,Ñeq->
y
);

411 
	}
}

414 
	$GrGëWödowInfoWøµî
(*
r
)

416 
nxGëWödowInfoReq
 *
ªq
 = 
r
;

417 
GR_WINDOW_INFO
 
wi
;

419 
	`GrGëWödowInfo
(
ªq
->
wödowid
, &
wi
);

420 
	`GsWrôeTy≥
(
cuºít_fd
,
GrNumGëWödowInfo
);

421 
	`GsWrôe
(
cuºít_fd
, &
wi
, (wi));

422 
	}
}

425 
	$GrGëF⁄tInfoWøµî
(*
r
)

427 
nxGëF⁄tInfoReq
 *
ªq
 = 
r
;

428 
GR_FONT_INFO
 
fi
;

430 
	`GrGëF⁄tInfo
(
ªq
->
f⁄tid
, &
fi
);

431 
	`GsWrôeTy≥
(
cuºít_fd
,
GrNumGëF⁄tInfo
);

432 
	`GsWrôe
(
cuºít_fd
, &
fi
, (fi));

433 
	}
}

436 
	$GrGëFocusWøµî
(*
r
)

438 
GR_WINDOW_ID
 
wid
 = 
	`GrGëFocus
();

440 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumGëFocus
);

441 
	`GsWrôe
(
cuºít_fd
, &
wid
, (wid));

442 
	}
}

445 
	$GrSëFocusWøµî
(*
r
)

447 
nxSëFocusReq
 *
ªq
 = 
r
;

449 
	`GrSëFocus
(
ªq
->
wödowid
);

450 
	}
}

453 
	$GrSëWödowCurs‹Wøµî
(*
r
)

455 
nxSëWödowCurs‹Req
 *
ªq
 = 
r
;

457 
	`GrSëWödowCurs‹
(
ªq
->
wödowid
,Ñeq->
curs‹id
);

458 
	}
}

461 
	$GrCÀ¨AªaWøµî
(*
r
)

463 
nxCÀ¨AªaReq
 *
ªq
 = 
r
;

465 
	`GrCÀ¨Aªa
(
ªq
->
wödowid
,Ñeq->
x
,Ñeq->
y
,Ñeq->
width
,

466 
ªq
->
height
,Ñeq->
expo£Êag
);

467 
	}
}

470 
	$GrSñe˘EvítsWøµî
(*
r
)

472 
nxSñe˘EvítsReq
 *
ªq
 = 
r
;

474 
	`GrSñe˘Evíts
(
ªq
->
wödowid
,Ñeq->
evítmask
);

475 
	}
}

478 
	$GrGëNextEvítWøµî
(*
r
)

482 
cur˛õ¡
->
waôög_f‹_evít
 = 
TRUE
;

484 
GR_EVENT
 
evt
;

487 
	`GrCheckNextEvít
(&
evt
);

488 if(
evt
.
ty≥
 =
GR_EVENT_TYPE_NONE
) {

490 
cur˛õ¡
->
waôög_f‹_evít
 = 
TRUE
;

494 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumGëNextEvít
);

495 
	`GsWrôe
(
cuºít_fd
, &
evt
, (evt));

496 if(
evt
.
ty≥
 =
GR_EVENT_TYPE_CLIENT_DATA
) {

497 
	`GsWrôe
(
fd
, 
evt
.
d©a
,Évt.
d©Æí
);

498 
	`‰ì
(
evt
.
d©a
);

501 
	}
}

507 
	$GrGëNextEvítWøµîFöish
(
fd
)

509 
GR_EVENT
 
evt
;

510 
GR_EVENT_CLIENT_DATA
 *
cde
;

514 
	`GrCheckNextEvít
(&
evt
);

516 
	`GsWrôeTy≥
(
fd
,
GrNumGëNextEvít
);

517 
	`GsWrôe
(
fd
, &
evt
, (evt));

518 if(
evt
.
ty≥
 =
GR_EVENT_TYPE_CLIENT_DATA
) {

519 
cde
 = (
GR_EVENT_CLIENT_DATA
 *)&
evt
;

520 if(
cde
->
d©a
) {

521 
	`GsWrôe
(
fd
, 
cde
->
d©a
, cde->
d©Æí
);

522 
	`‰ì
(
cde
->
d©a
);

523 } 
cde
->
d©Æí
 = 0;

525 
	}
}

528 
	$GrCheckNextEvítWøµî
(*
r
)

530 
GR_EVENT
 
evt
;

531 
GR_EVENT_CLIENT_DATA
 *
cde
;

533 
	`GrCheckNextEvít
(&
evt
);

535 
	`GsWrôeTy≥
(
cuºít_fd
,
GrNumGëNextEvít
);

536 
	`GsWrôe
(
cuºít_fd
, &
evt
, (evt));

537 if(
evt
.
ty≥
 =
GR_EVENT_TYPE_CLIENT_DATA
) {

538 
cde
 = (
GR_EVENT_CLIENT_DATA
 *)&
evt
;

539 if(
cde
->
d©a
) {

540 
	`GsWrôe
(
cuºít_fd
, 
cde
->
d©a
, cde->
d©Æí
);

541 
	`‰ì
(
cde
->
d©a
);

542 } 
cde
->
d©Æí
 = 0;

544 
	}
}

547 
	$GrPìkEvítWøµî
(*
r
)

549 
GR_EVENT
 
evt
;

550 
GR_CHAR
 
ªt
;

551 
GR_EVENT_CLIENT_DATA
 *
cde
;

553 
ªt
 = 
	`GrPìkEvít
(&
evt
);

555 
	`GsWrôeTy≥
(
cuºít_fd
,
GrNumPìkEvít
);

556 
	`GsWrôe
(
cuºít_fd
, &
evt
, (evt));

557 if(
evt
.
ty≥
 =
GR_EVENT_TYPE_CLIENT_DATA
) {

558 
cde
 = (
GR_EVENT_CLIENT_DATA
 *)&
evt
;

559 if(
cde
->
d©a
) {

560 
	`GsWrôe
(
cuºít_fd
, 
cde
->
d©a
, cde->
d©Æí
);

561 
	`‰ì
(
cde
->
d©a
);

562 } 
cde
->
d©Æí
 = 0;

564 
	`GsWrôe
(
cuºít_fd
, &
ªt
, (
GR_CHAR
));

567 i‡(
ªt
 == 0) {

569 
cur˛õ¡
->
waôög_f‹_evít
 = 
TRUE
;

571 
	}
}

574 
	$GrLöeWøµî
(*
r
)

576 
nxLöeReq
 *
ªq
 = 
r
;

578 
	`GrLöe
(
ªq
->
døwid
,Ñeq->
gcid
,Ñeq->
x1
,Ñeq->
y1
,Ñeq->
x2
,Ñeq->
y2
);

579 
	}
}

582 
	$GrPoötWøµî
(*
r
)

584 
nxPoötReq
 *
ªq
 = 
r
;

586 
	`GrPoöt
(
ªq
->
døwid
,Ñeq->
gcid
,Ñeq->
x
,Ñeq->
y
);

588 
	}
}

591 
	$GrPoötsWøµî
(*
r
)

593 
nxPoötsReq
 *
ªq
 = 
r
;

594 
cou¡
;

596 
cou¡
 = 
	`GëReqV¨Lí
(
ªq
Ë/ (
GR_POINT
);

597 
	`GrPoöts
(
ªq
->
døwid
,Ñeq->
gcid
, 
cou¡
, (
GR_POINT
 *)
	`GëReqD©a
(req));

598 
	}
}

601 
	$GrRe˘Wøµî
(*
r
)

603 
nxRe˘Req
 *
ªq
 = 
r
;

605 
	`GrRe˘
(
ªq
->
døwid
,Ñeq->
gcid
,Ñeq->
x
,Ñeq->
y
,Ñeq->
width
,Ñeq->
height
);

606 
	}
}

609 
	$GrFûlRe˘Wøµî
(*
r
)

611 
nxFûlRe˘Req
 *
ªq
 = 
r
;

613 
	`GrFûlRe˘
(
ªq
->
døwid
,Ñeq->
gcid
,Ñeq->
x
,Ñeq->
y
,Ñeq->
width
,

614 
ªq
->
height
);

615 
	}
}

618 
	$GrPﬁyWøµî
(*
r
)

620 
nxPﬁyReq
 *
ªq
 = 
r
;

621 
cou¡
;

623 
cou¡
 = 
	`GëReqV¨Lí
(
ªq
Ë/ (
GR_POINT
);

624 
	`GrPﬁy
(
ªq
->
døwid
,Ñeq->
gcid
, 
cou¡
, (
GR_POINT
 *)
	`GëReqD©a
(req));

625 
	}
}

629 
	$GrFûlPﬁyWøµî
(*
r
)

631 
nxPﬁyReq
 *
ªq
 = 
r
;

632 
cou¡
;

634 
cou¡
 = 
	`GëReqV¨Lí
(
ªq
Ë/ (
GR_POINT
);

635 
	`GrFûlPﬁy
(
ªq
->
døwid
,Ñeq->
gcid
, 
cou¡
, (
GR_POINT
 *)
	`GëReqD©a
(req));

636 
	}
}

639 
	$GrEŒù£Wøµî
(*
r
)

641 
nxEŒù£Req
 *
ªq
 = 
r
;

643 
	`GrEŒù£
(
ªq
->
døwid
,Ñeq->
gcid
,Ñeq->
x
,Ñeq->
y
,Ñeq->
rx
,Ñeq->
ry
);

644 
	}
}

647 
	$GrFûlEŒù£Wøµî
(*
r
)

649 
nxFûlEŒù£Req
 *
ªq
 = 
r
;

651 
	`GrFûlEŒù£
(
ªq
->
døwid
,Ñeq->
gcid
,Ñeq->
x
,Ñeq->
y
,Ñeq->
rx
,Ñeq->
ry
);

652 
	}
}

655 
	$GrArcWøµî
(*
r
)

657 
nxArcReq
 *
ªq
 = 
r
;

659 
	`GrArc
(
ªq
->
døwid
,Ñeq->
gcid
,Ñeq->
x
,Ñeq->
y
,Ñeq->
rx
,Ñeq->
ry
,

660 
ªq
->
ax
,Ñeq->
ay
,Ñeq->
bx
,Ñeq->
by
,Ñeq->
ty≥
);

661 
	}
}

664 
	$GrArcAngÀWøµî
(*
r
)

666 
nxArcAngÀReq
 *
ªq
 = 
r
;

668 
	`GrArcAngÀ
(
ªq
->
døwid
,Ñeq->
gcid
,Ñeq->
x
,Ñeq->
y
,Ñeq->
rx
,Ñeq->
ry
,

669 
ªq
->
™gÀ1
,Ñeq->
™gÀ2
,Ñeq->
ty≥
);

670 
	}
}

673 
	$GrSëGCF‹egroundWøµî
(*
r
)

675 
nxSëGCF‹egroundReq
 *
ªq
 = 
r
;

677 
	`GrSëGCF‹eground
(
ªq
->
gcid
,Ñeq->
cﬁ‹
);

678 
	}
}

681 
	$GrSëGCBackgroundWøµî
(*
r
)

683 
nxSëGCBackgroundReq
 *
ªq
 = 
r
;

685 
	`GrSëGCBackground
(
ªq
->
gcid
,Ñeq->
cﬁ‹
);

686 
	}
}

689 
	$GrSëGCF‹egroundPixñVÆWøµî
(*
r
)

691 
nxSëGCF‹egroundPixñVÆReq
 *
ªq
 = 
r
;

693 
	`GrSëGCF‹egroundPixñVÆ
(
ªq
->
gcid
,Ñeq->
pixñvÆ
);

694 
	}
}

697 
	$GrSëGCBackgroundPixñVÆWøµî
(*
r
)

699 
nxSëGCBackgroundPixñVÆReq
 *
ªq
 = 
r
;

701 
	`GrSëGCBackgroundPixñVÆ
(
ªq
->
gcid
,Ñeq->
pixñvÆ
);

702 
	}
}

705 
	$GrSëGCU£BackgroundWøµî
(*
r
)

707 
nxSëGCU£BackgroundReq
 *
ªq
 = 
r
;

709 
	`GrSëGCU£Background
(
ªq
->
gcid
,Ñeq->
Êag
);

710 
	}
}

713 
	$GrSëGCModeWøµî
(*
r
)

715 
nxSëGCModeReq
 *
ªq
 = 
r
;

717 
	`GrSëGCMode
(
ªq
->
gcid
,Ñeq->
mode
);

718 
	}
}

721 
	$GrSëGCLöeAâribuãsWøµî
(*
r
)

723 
nxSëGCLöeAâribuãsReq
 *
ªq
 = 
r
;

725 
	`GrSëGCLöeAâribuãs
(
ªq
->
gcid
,Ñeq->
löe°yÀ
);

726 
	}
}

729 
	$GrSëGCDashWøµî
(*
r
)

731 
nxSëGCDashReq
 *
ªq
 = 
r
;

732 *
buf„r
 = 
	`ALLOCA
(
ªq
->
cou¡
);

734 
	`mem˝y
((*Ë
buf„r
, 
	`GëReqD©a
(
ªq
),Ñeq->
cou¡
);

735 
	`GrSëGCDash
(
ªq
->
gcid
, 
buf„r
,Ñeq->
cou¡
);

736 
	`FREEA
(
buf„r
);

737 
	}
}

741 
	$GrSëGCFûlModeWøµî
(*
r
)

743 
nxSëGCFûlModeReq
 *
ªq
 = 
r
;

745 
	`GrSëGCFûlMode
(
ªq
->
gcid
,Ñeq->
fûlmode
);

746 
	}
}

749 
	$GrSëGCStù∂eWøµî
(*
r
)

751 
nxSëGCStù∂eReq
 *
ªq
 = 
r
;

752 
GR_BITMAP
 *
buf„r
;

754 
buf„r
 = 
	`ALLOCA
(
	`GR_BITMAP_SIZE
(
ªq
->
width
,Ñeq->
height
) *

755 (
GR_BITMAP
));

757 
	`mem˝y
((*Ë
buf„r
, 
	`GëReqD©a
(
ªq
),

758 
	`GR_BITMAP_SIZE
(
ªq
->
width
,Ñeq->
height
Ë* (
GR_BITMAP
));

760 
	`GrSëGCStù∂e
(
ªq
->
gcid
, (
GR_BITMAP
 *)
buf„r
,Ñeq->
width
,Ñeq->
height
);

761 
	`FREEA
(
buf„r
);

762 
	}
}

765 
	$GrSëGCTûeWøµî
(*
r
)

767 
nxSëGCTûeReq
 *
ªq
 = 
r
;

769 
	`GrSëGCTûe
(
ªq
->
gcid
,Ñeq->
pixm≠
,Ñeq->
width
,Ñeq->
height
);

770 
	}
}

773 
	$GrSëGCTSOff£tWøµî
(*
r
)

775 
nxSëGCTSOff£tReq
 *
ªq
 = 
r
;

777 
	`GrSëGCTSOff£t
(
ªq
->
gcid
,Ñeq->
xoff£t
,Ñeq->
yoff£t
);

778 
	}
}

781 
	$GrCª©eF⁄tWøµî
(*
r
)

783 
nxCª©eF⁄tReq
 *
ªq
 = 
r
;

784 
GR_FONT_ID
 
f⁄tid
;

786 
f⁄tid
 = 
	`GrCª©eF⁄t
(
	`GëReqD©a
(
ªq
),Ñeq->
height
, 
NULL
);

788 
	`GsWrôeTy≥
(
cuºít_fd
,
GrNumCª©eF⁄t
);

789 
	`GsWrôe
(
cuºít_fd
, &
f⁄tid
, (fontid));

790 
	}
}

793 
	$GrCª©eLogF⁄tWøµî
(*
r
)

795 
nxCª©eLogF⁄tReq
 *
ªq
 = 
r
;

796 
GR_FONT_ID
 
f⁄tid
;

798 
f⁄tid
 = 
	`GrCª©eF⁄t
(
NULL
, 0, &
ªq
->
lf
);

800 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumCª©eLogF⁄t
);

801 
	`GsWrôe
(
cuºít_fd
, &
f⁄tid
, (fontid));

802 
	}
}

805 
	$GrSëF⁄tSizeWøµî
(*
r
)

807 
nxSëF⁄tSizeReq
 *
ªq
 = 
r
;

809 
	`GrSëF⁄tSize
(
ªq
->
f⁄tid
,Ñeq->
f⁄tsize
);

810 
	}
}

813 
	$GrSëF⁄tRŸ©i⁄Wøµî
(*
r
)

815 
nxSëF⁄tRŸ©i⁄Req
 *
ªq
 = 
r
;

817 
	`GrSëF⁄tRŸ©i⁄
(
ªq
->
f⁄tid
,Ñeq->
ã¡hdegªes
);

818 
	}
}

821 
	$GrSëF⁄tAârWøµî
(*
r
)

823 
nxSëF⁄tAârReq
 *
ªq
 = 
r
;

825 
	`GrSëF⁄tAâr
(
ªq
->
f⁄tid
,Ñeq->
£tÊags
,Ñeq->
˛rÊags
);

826 
	}
}

829 
	$GrDe°royF⁄tWøµî
(*
r
)

831 
nxDe°royF⁄tReq
 *
ªq
 = 
r
;

833 
	`GrDe°royF⁄t
(
ªq
->
f⁄tid
);

834 
	}
}

837 
	$GrSëGCF⁄tWøµî
(*
r
)

839 
nxSëGCF⁄tReq
 *
ªq
 = 
r
;

841 
	`GrSëGCF⁄t
(
ªq
->
gcid
,Ñeq->
f⁄tid
);

842 
	}
}

845 
	$GrGëGCTextSizeWøµî
(*
r
)

847 
nxGëGCTextSizeReq
 *
ªq
 = 
r
;

848 
GR_SIZE
 
ªtwidth
, 
ªtheight
, 
ªtba£
;

850 
	`GrGëGCTextSize
(
ªq
->
gcid
, 
	`GëReqD©a
‘eq),Ñeq->
ch¨cou¡
,

851 
ªq
->
Êags
, &
ªtwidth
, &
ªtheight
, &
ªtba£
);

853 
	`GsWrôeTy≥
(
cuºít_fd
,
GrNumGëGCTextSize
);

854 
	`GsWrôe
(
cuºít_fd
, &
ªtwidth
, (retwidth));

855 
	`GsWrôe
(
cuºít_fd
, &
ªtheight
, (retheight));

856 
	`GsWrôe
(
cuºít_fd
, &
ªtba£
, (retbase));

857 
	}
}

861 
	$GrRódAªaWøµî
(*
r
)

863 
nxRódAªaReq
 *
ªq
 = 
r
;

864 
size
;

865 
GR_PIXELVAL
 * 
¨ó
;

868 
size
 = 
ªq
->
width
 *Ñeq->
height
 * (
GR_PIXELVAL
);

870 if(!(
¨ó
 = 
	`mÆloc
(
size
))) {

875 
	`GrRódAªa
(
ªq
->
døwid
,Ñeq->
x
,Ñeq->
y
,Ñeq->
width
,Ñeq->
height
, 
¨ó
);

876 
	`GsWrôeTy≥
(
cuºít_fd
,
GrNumRódAªa
);

877 
	`GsWrôe
(
cuºít_fd
, 
¨ó
, 
size
);

878 
	`‰ì
(
¨ó
);

879 
	}
}

883 
	$GrAªaWøµî
(*
r
)

885 
nxAªaReq
 *
ªq
 = 
r
;

887 
	`GrAªa
(
ªq
->
døwid
,Ñeq->
gcid
,Ñeq->
x
,Ñeq->
y
,Ñeq->
width
,Ñeq->
height
,

888 
	`GëReqD©a
(
ªq
),Ñeq->
pixty≥
);

889 
	}
}

893 
	$GrBôm≠Wøµî
(*
r
)

895 
nxBôm≠Req
 *
ªq
 = 
r
;

897 
	`GrBôm≠
(
ªq
->
døwid
,Ñeq->
gcid
,Ñeq->
x
,Ñeq->
y
,Ñeq->
width
,

898 
ªq
->
height
, 
	`GëReqD©a
(req));

899 
	}
}

902 
	$GrDøwImageBôsWøµî
(*
r
)

904 
nxDøwImageBôsReq
 *
ªq
 = 
r
;

905 * 
addr
;

906 
imagesize
;

907 
GR_IMAGE_HDR
 
hdr
;

909 
hdr
.
width
 = 
ªq
->width;

910 
hdr
.
height
 = 
ªq
->height;

911 
hdr
.
∂™es
 = 
ªq
->planes;

912 
hdr
.
bµ
 = 
ªq
->bpp;

913 
hdr
.
pôch
 = 
ªq
->pitch;

914 
hdr
.
byã•îpixñ
 = 
ªq
->bytesperpixel;

915 
hdr
.
com¥essi⁄
 = 
ªq
->compression;

916 
hdr
.
∑lsize
 = 
ªq
->palsize;

917 
hdr
.
å™scﬁ‹
 = 
ªq
->transcolor;

918 
addr
 = 
	`GëReqD©a
(
ªq
);

919 
hdr
.
imagebôs
 = (
MWUCHAR
 *)
addr
;

920 
imagesize
 = 
hdr
.
pôch
 * hdr.
height
;

921 
hdr
.
∑Àâe
 = (
MWPALENTRY
 *)(
addr
 + 
imagesize
);

922 
	`GrDøwImageBôs
(
ªq
->
døwid
,Ñeq->
gcid
,Ñeq->
x
,Ñeq->
y
, &
hdr
);

923 
	}
}

926 
	$GrC›yAªaWøµî
(*
r
)

928 
nxC›yAªaReq
 *
ªq
 = 
r
;

930 
	`GrC›yAªa
(
ªq
->
døwid
,Ñeq->
gcid
,Ñeq->
x
,Ñeq->
y
,Ñeq->
width
,Ñeq->
height
,

931 
ªq
->
§cid
,Ñeq->
§cx
,Ñeq->
§cy
,Ñeq->
›
);

932 
	}
}

935 
	$GrTextWøµî
(*
r
)

937 
nxTextReq
 *
ªq
 = 
r
;

939 
	`GrText
(
ªq
->
døwid
,Ñeq->
gcid
,Ñeq->
x
,Ñeq->
y
, 
	`GëReqD©a
(req),

940 
ªq
->
cou¡
,Ñeq->
Êags
);

941 
	}
}

944 
	$GrNewCurs‹Wøµî
(*
r
)

946 
nxNewCurs‹Req
 *
ªq
 = 
r
;

947 
v¨Àn
;

948 * 
bôm≠
;

949 
GR_CURSOR_ID
 
curs‹id
;

951 
v¨Àn
 = 
	`GëReqV¨Lí
(
ªq
);

952 
bôm≠
 = 
	`GëReqD©a
(
ªq
);

954 
curs‹id
 = 
	`GrNewCurs‹
(
ªq
->
width
,Ñeq->
height
,

955 
ªq
->
hŸx
,Ñeq->
hŸy
,Ñeq->
fgcﬁ‹
,Ñeq->
bgcﬁ‹
,

956 (
GR_BITMAP
 *)
bôm≠
, (GR_BITMAP *)(bôm≠+
v¨Àn
/2));

958 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumNewCurs‹
);

959 
	`GsWrôe
(
cuºít_fd
, &
curs‹id
, (cursorid));

960 
	}
}

963 
	$GrMoveCurs‹Wøµî
(*
r
)

965 
nxMoveCurs‹Req
 *
ªq
 = 
r
;

967 
	`GrMoveCurs‹
(
ªq
->
x
,Ñeq->
y
);

968 
	}
}

971 
	$GrGëSy°emPÆëãWøµî
(*
r
)

973 
GR_PALETTE
 
∑l
;

975 
	`GrGëSy°emPÆëã
(&
∑l
);

976 
	`GsWrôeTy≥
(
cuºít_fd
,
GrNumGëSy°emPÆëã
);

977 
	`GsWrôe
(
cuºít_fd
, &
∑l
, (pal));

978 
	}
}

981 
	$GrSëSy°emPÆëãWøµî
(*
r
)

983 
nxSëSy°emPÆëãReq
 *
ªq
 = 
r
;

984 
GR_PALETTE
 
∑l
;

986 
∑l
.
cou¡
 = 
ªq
->count;

987 
	`mem˝y
(
∑l
.
∑Àâe
, 
ªq
->palette, (pal.palette));

988 
	`GrSëSy°emPÆëã
(
ªq
->
fú°
, &
∑l
);

989 
	}
}

992 
	$GrFödCﬁ‹Wøµî
(*
r
)

994 
nxFödCﬁ‹Req
 *
ªq
 = 
r
;

995 
GR_PIXELVAL
 
pixñ
;

997 
	`GrFödCﬁ‹
(
ªq
->
cﬁ‹
, &
pixñ
);

998 
	`GsWrôeTy≥
(
cuºít_fd
,
GrNumFödCﬁ‹
);

999 
	`GsWrôe
(
cuºít_fd
, &
pixñ
, (pixel));

1000 
	}
}

1003 
	$GrInje˘EvítWøµî
(*
r
)

1005 
nxInje˘EvítReq
 *
ªq
 = 
r
;

1007 
ªq
->
evít_ty≥
) {

1008 
GR_INJECT_EVENT_POINTER
:

1009 
	`GrInje˘PoöãrEvít
(
ªq
->
evít
.
poöãr
.
x
,

1010 
ªq
->
evít
.
poöãr
.
y
,

1011 
ªq
->
evít
.
poöãr
.
buâ⁄
,

1012 
ªq
->
evít
.
poöãr
.
visibÀ
);

1015 
GR_INJECT_EVENT_KEYBOARD
:

1016 
	`GrInje˘KeybﬂrdEvít
(
ªq
->
evít
.
keybﬂrd
.
wid
,

1017 
ªq
->
evít
.
keybﬂrd
.
keyvÆue
,

1018 
ªq
->
evít
.
keybﬂrd
.
modifõr
,

1019 
ªq
->
evít
.
keybﬂrd
.
sˇncode
,

1020 
ªq
->
evít
.
keybﬂrd
.
¥es£d
);

1023 
	}
}

1026 
	$GrSëWMPr›îtõsWøµî
(*
r
)

1028 
nxSëWMPr›îtõsReq
 *
ªq
 = 
r
;

1029 
GR_WM_PROPERTIES
 *
¥›s
 = 
	`GëReqD©a
(
ªq
);

1031 if(
	`GëReqV¨Lí
(
ªq
Ë- (
GR_WM_PROPERTIES
))

1032 
¥›s
->
tôÀ
 = (
GR_CHAR
 *Ìr›†+ (
GR_WM_PROPERTIES
);

1034 
¥›s
->
tôÀ
 = 
NULL
;

1035 
	`GrSëWMPr›îtõs
(
ªq
->
wödowid
, 
¥›s
);

1036 
	}
}

1039 
	$GrGëWMPr›îtõsWøµî
(*
r
)

1041 
nxGëWMPr›îtõsReq
 *
ªq
 = 
r
;

1042 
UINT16
 
ãxéí
;

1043 
GR_WM_PROPERTIES
 
¥›s
;

1045 
	`GrGëWMPr›îtõs
(
ªq
->
wödowid
, &
¥›s
);

1047 if(
¥›s
.
tôÀ
)

1048 
ãxéí
 = 
	`°æí
((c⁄° *)
¥›s
.
tôÀ
) + 1;

1049 
ãxéí
 = 0;

1051 
	`GsWrôeTy≥
(
cuºít_fd
,
GrNumGëWMPr›îtõs
);

1052 
	`GsWrôe
(
cuºít_fd
, &
¥›s
, (props));

1053 
	`GsWrôe
(
cuºít_fd
, &
ãxéí
, (textlen));

1054 if(
ãxéí
)

1055 
	`GsWrôe
(
cuºít_fd
, 
¥›s
.
tôÀ
, 
ãxéí
);

1056 
	}
}

1059 
	$GrClo£WödowWøµî
(*
r
)

1061 
nxClo£WödowReq
 *
ªq
 = 
r
;

1063 
	`GrClo£Wödow
(
ªq
->
wödowid
);

1064 
	}
}

1067 
	$GrKûlWödowWøµî
(*
r
)

1069 
nxKûlWödowReq
 *
ªq
 = 
r
;

1071 
	`GrKûlWödow
(
ªq
->
wödowid
);

1072 
	}
}

1074 #i‡
MW_FEATURE_IMAGES
 && 
deföed
(
HAVE_FILEIO
)

1076 
	$GrDøwImageFromFûeWøµî
(*
r
)

1078 
nxDøwImageFromFûeReq
 *
ªq
 = 
r
;

1080 
	`GrDøwImageFromFûe
(
ªq
->
døwid
,Ñeq->
gcid
,Ñeq->
x
,Ñeq->
y
,Ñeq->
width
,

1081 
ªq
->
height
, 
	`GëReqD©a
‘eq),Ñeq->
Êags
);

1082 
	}
}

1085 
	$GrLﬂdImageFromFûeWøµî
(*
r
)

1087 
nxLﬂdImageFromFûeReq
 *
ªq
 = 
r
;

1088 
GR_IMAGE_ID
 
id
;

1090 
id
 = 
	`GrLﬂdImageFromFûe
(
	`GëReqD©a
(
ªq
),Ñeq->
Êags
);

1091 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumLﬂdImageFromFûe
);

1092 
	`GsWrôe
(
cuºít_fd
, &
id
, (id));

1093 
	}
}

1095 
	#GrDøwImageFromFûeWøµî
 
GrNŸIm∂emíãdWøµî


	)

1096 
	#GrLﬂdImageFromFûeWøµî
 
GrNŸIm∂emíãdWøµî


	)

1099 #i‡
MW_FEATURE_IMAGES


1101 
	$GrDøwImageToFôWøµî
(*
r
)

1103 
nxDøwImageToFôReq
 *
ªq
 = 
r
;

1105 
	`GrDøwImageToFô
(
ªq
->
døwid
,Ñeq->
gcid
,Ñeq->
x
,Ñeq->
y
,Ñeq->
width
,

1106 
ªq
->
height
,Ñeq->
imageid
);

1107 
	}
}

1110 
	$GrFªeImageWøµî
(*
r
)

1112 
nxFªeImageReq
 *
ªq
 = 
r
;

1114 
	`GrFªeImage
(
ªq
->
id
);

1115 
	}
}

1118 
	$GrGëImageInfoWøµî
(*
r
)

1120 
nxGëImageInfoReq
 *
ªq
 = 
r
;

1121 
GR_IMAGE_INFO
 
öfo
;

1123 
	`GrGëImageInfo
(
ªq
->
id
, &
öfo
);

1124 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumGëImageInfo
);

1125 
	`GsWrôe
(
cuºít_fd
, &
öfo
, (info));

1126 
	}
}

1128 
	#GrDøwImageToFôWøµî
 
GrNŸIm∂emíãdWøµî


	)

1129 
	#GrFªeImageWøµî
 
GrNŸIm∂emíãdWøµî


	)

1130 
	#GrGëImageInfoWøµî
 
GrNŸIm∂emíãdWøµî


	)

1134 
	$GrSëS¸ìnSavîTimeoutWøµî
(*
r
)

1136 
nxSëS¸ìnSavîTimeoutReq
 *
ªq
 = 
r
;

1138 
	`GrSëS¸ìnSavîTimeout
(
ªq
->
timeout
);

1139 
	}
}

1142 
	$GrSëSñe˘i⁄Ow√rWøµî
(*
r
)

1144 
nxSëSñe˘i⁄Ow√rReq
 *
ªq
 = 
r
;

1146 
	`GrSëSñe˘i⁄Ow√r
(
ªq
->
wid
, 
	`GëReqD©a
(req));

1147 
	}
}

1150 
	$GrGëSñe˘i⁄Ow√rWøµî
(*
r
)

1152 
GR_CHAR
 *
ty≥li°
;

1153 
GR_WINDOW_ID
 
wid
;

1154 
Àn
;

1156 
wid
 = 
	`GrGëSñe˘i⁄Ow√r
(&
ty≥li°
);

1157 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumGëSñe˘i⁄Ow√r
);

1158 
	`GsWrôe
(
cuºít_fd
, &
wid
, (wid));

1160 if(
wid
) {

1161 
Àn
 = 
	`°æí
((c⁄° *)
ty≥li°
) + 1;

1162 
	`GsWrôe
(
cuºít_fd
, &
Àn
, (len));

1163 
	`GsWrôe
(
cuºít_fd
, 
ty≥li°
, 
Àn
);

1165 
	}
}

1168 
	$GrReque°Clõ¡D©aWøµî
(*
r
)

1170 
nxReque°Clõ¡D©aReq
 *
ªq
 = 
r
;

1172 
	`GrReque°Clõ¡D©a
(
ªq
->
wid
,Ñeq->
rid
,Ñeq->
£rül
,Ñeq->
mimëy≥
);

1173 
	}
}

1176 
	$GrSídClõ¡D©aWøµî
(*
r
)

1178 
nxSídClõ¡D©aReq
 *
ªq
 = 
r
;

1180 
	`GrSídClõ¡D©a
(
ªq
->
wid
,Ñeq->
did
,Ñeq->
£rül
,Ñeq->
Àn
,

1181 
	`GëReqV¨Lí
(
ªq
), 
	`GëReqD©a
(req));

1182 
	}
}

1185 
	$GrBñlWøµî
(*
r
)

1187 
	`GrBñl
();

1188 
	}
}

1191 
	$GrSëBackgroundPixm≠Wøµî
(*
r
)

1193 
nxSëBackgroundPixm≠Req
 *
ªq
 = 
r
;

1195 
	`GrSëBackgroundPixm≠
(
ªq
->
wid
,Ñeq->
pixm≠
,Ñeq->
Êags
);

1196 
	}
}

1199 
	$GrDe°royCurs‹Wøµî
(*
r
)

1201 
nxDe°royCurs‹Req
 *
ªq
 = 
r
;

1203 
	`GrDe°royCurs‹
(
ªq
->
curs‹id
);

1204 
	}
}

1207 
	$GrQuîyTªeWøµî
(*
r
)

1209 
nxQuîyTªeReq
 *
ªq
 = 
r
;

1210 
GR_WINDOW_ID
 
∑ª¡id
;

1211 
GR_WINDOW_ID
 * 
chûdªn
;

1212 
GR_COUNT
 
nchûdªn
;

1214 
	`GrQuîyTªe
(
ªq
->
wödowid
, &
∑ª¡id
, &
chûdªn
, &
nchûdªn
);

1216 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumQuîyTªe
);

1217 
	`GsWrôe
(
cuºít_fd
, &
∑ª¡id
, (parentid));

1218 
	`GsWrôe
(
cuºít_fd
, &
nchûdªn
, (nchildren));

1219 i‡(
nchûdªn
) {

1220 
	`GsWrôe
(
cuºít_fd
, 
chûdªn
, 
nchûdªn
 * (
GR_WINDOW_ID
));

1221 
	`‰ì
(
chûdªn
);

1223 
	}
}

1225 #i‡
MW_FEATURE_TIMERS


1227 
	$GrCª©eTimîWøµî
(*
r
)

1229 
nxCª©eTimîReq
 *
ªq
 = 
r
;

1230 
GR_TIMER_ID
 
timîid
;

1232 
timîid
 = 
	`GrCª©eTimî
(
ªq
->
wid
,Ñeq->
≥riod
);

1234 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumCª©eTimî
);

1235 
	`GsWrôe
(
cuºít_fd
, &
timîid
,  (timerid));

1236 
	}
}

1238 
	#GrCª©eTimîWøµî
 
GrNŸIm∂emíãdWøµî


	)

1241 
	simage_li°
 {

1242 *
	md©a
;

1243 
	mid
;

1244 
	msize
;

1245 
	moff£t
;

1247 
image_li°
 *
	m√xt
;

1248 } 
	timagñi°_t
;

1250 
imagñi°_t
 *
	gimageLi°Hód
 = 0;

1251 
imagñi°_t
 *
	gimageLi°Taû
 = 0;

1252 
	gimageLi°Id
 = 0;

1254 
imagñi°_t
 *
	$födImageBuf„r
(
buf„r_id
)

1256 
imagñi°_t
 *
buf„r
 = 0;

1258 
buf„r
 = 
imageLi°Hód
; buf„r; buf„∏buf„r->
√xt
)

1259 i‡(
buf„r
->
id
 =
buf„r_id
)

1262  
buf„r
;

1263 
	}
}

1265 
	$‰ìImageBuf„r
(
imagñi°_t
 *
buf„r
)

1267 
imagñi°_t
 *
¥ev
 = 0;

1268 
imagñi°_t
 *
±r
 = 
imageLi°Hód
;

1270 
±r
) {

1271 i‡(
±r
 =
buf„r
) {

1272 i‡(
¥ev
)

1273 
¥ev
->
√xt
 = 
buf„r
->next;

1275 
imageLi°Hód
 = 
buf„r
->
√xt
;

1277 i‡(!
imageLi°Hód
Ë
imageLi°Taû
 = 0;

1279 
	`‰ì
(
buf„r
->
d©a
);

1280 
	`‰ì
(
buf„r
);

1284 
¥ev
 = 
±r
;

1285 
±r
 =Öå->
√xt
;

1287 
	}
}

1290 
	$GrImageBuf„rAŒocWøµî
(*
r
)

1292 
nxImageBuf„rAŒocReq
 *
ªq
 = 
r
;

1296 i‡(!
imageLi°Taû
) {

1297 
imageLi°Hód
 = 
imageLi°Taû
 = (
imagñi°_t
 *Ë
	`mÆloc
((imagelist_t));

1300 
imageLi°Taû
->
√xt
 = (
imagñi°_t
 *Ë
	`mÆloc
((imagelist_t));

1301 
imageLi°Taû
 = imageLi°Taû->
√xt
;

1304 
imageLi°Taû
->
id
 = ++
imageLi°Id
;

1305 
imageLi°Taû
->
d©a
 = (*Ë
	`mÆloc
(
ªq
->
size
);

1306 
imageLi°Taû
->
size
 = 
ªq
->size;

1307 
imageLi°Taû
->
off£t
 = 0;

1309 
imageLi°Taû
->
√xt
 = 0;

1311 
	`GsWrôeTy≥
(
cuºít_fd
,
GrNumImageBuf„rAŒoc
);

1312 
	`GsWrôe
(
cuºít_fd
, &
imageLi°Taû
->
id
, ());

1313 
	}
}

1316 
	$GrImageBuf„rSídWøµî
(*
r
)

1318 
csize
;

1319 
imagñi°_t
 *
buf„r
;

1320 
nxImageBuf„rSídReq
 *
ªq
 = 
r
;

1322 
buf„r
 = 
	`födImageBuf„r
(
ªq
->
buf„r_id
);

1324 i‡(!
buf„r
) ;

1326 i‡(
buf„r
->
off£t
 + 
ªq
->
size
 >= buffer->size)

1327 
csize
 = 
buf„r
->
size
 - buf„r->
off£t
;

1329 
csize
 = 
ªq
->
size
;

1331 i‡(!
csize
) ;

1333 
	`mem˝y
((*Ë(((*)
buf„r
->
d©a
Ë+ buf„r->
off£t
),

1334 
	`GëReqD©a
(
ªq
), 
csize
);

1336 
buf„r
->
off£t
 +
csize
;

1337 
	}
}

1339 #i‡
MW_FEATURE_IMAGES


1341 
	$GrLﬂdImageFromBuf„rWøµî
(*
r
)

1343 
GR_IMAGE_ID
 
id
;

1344 
imagñi°_t
 *
buf„r
;

1345 
nxLﬂdImageFromBuf„rReq
 *
ªq
 = 
r
;

1347 
buf„r
 = 
	`födImageBuf„r
(
ªq
->buffer);

1349 i‡(!
buf„r
) ;

1351 
id
 = 
	`GrLﬂdImageFromBuf„r
(
buf„r
->
d©a
, buf„r->
size
, 
ªq
->
Êags
);

1353 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumLﬂdImageFromBuf„r
);

1354 
	`GsWrôe
(
cuºít_fd
, &
id
, (id));

1356 
	`‰ìImageBuf„r
(
buf„r
);

1357 
	}
}

1360 
	$GrDøwImageFromBuf„rWøµî
(*
r
)

1362 
imagñi°_t
 *
buf„r
;

1363 
nxDøwImageFromBuf„rReq
 *
ªq
 = 
r
;

1365 
buf„r
 = 
	`födImageBuf„r
(
ªq
->buffer);

1367 i‡(!
buf„r
) ;

1369 
	`GrDøwImageFromBuf„r
(
ªq
->
døwid
,Ñeq->
gcid
,Ñeq->
x
,Ñeq->
y
,Ñeq->
width
,

1370 
ªq
->
height
, 
buf„r
->
d©a
, buf„r->
size
,

1371 
ªq
->
Êags
);

1373 
	`‰ìImageBuf„r
(
buf„r
);

1374 
	}
}

1376 
	#GrLﬂdImageFromBuf„rWøµî
 
GrNŸIm∂emíãdWøµî


	)

1377 
	#GrDøwImageFromBuf„rWøµî
 
GrNŸIm∂emíãdWøµî


	)

1381 #i‡
MW_FEATURE_TIMERS


1383 
	$GrDe°royTimîWøµî
(*
r
)

1385 
nxDe°royTimîReq
 *
ªq
 = 
r
;

1387 
	`GrDe°royTimî
(
ªq
->
timîid
);

1388 
	}
}

1390 
	#GrDe°royTimîWøµî
 
GrNŸIm∂emíãdWøµî


	)

1394 
	$GrSëP‹åaôModeWøµî
(*
r
)

1396 
nxSëP‹åaôModeReq
 *
ªq
 = 
r
;

1398 
	`GrSëP‹åaôMode
(
ªq
->
p‹åaômode
);

1399 
	}
}

1402 
	$GrQuîyPoöãrWøµî
(*
r
)

1404 
GR_WINDOW_ID
 
mwö
;

1405 
GR_COORD
 
x
, 
y
;

1406 
GR_BUTTON
 
bmask
;

1408 
	`GrQuîyPoöãr
(&
mwö
, &
x
, &
y
, &
bmask
);

1410 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumQuîyPoöãr
);

1412 
	`GsWrôe
(
cuºít_fd
, &
mwö
, (mwin));

1413 
	`GsWrôe
(
cuºít_fd
, &
x
, (x));

1414 
	`GsWrôe
(
cuºít_fd
, &
y
, (y));

1415 
	`GsWrôe
(
cuºít_fd
, &
bmask
, (bmask));

1416 
	}
}

1424 
	#SHMKEY_BASE
 1000000

	)

1425 
	#SHMKEY_MAX
 256

	)

1428 
	$GrReqShmCmdsWøµî
(*
r
)

1430 #i‡
HAVE_SHAREDMEM_SUPPORT


1431 
nxReqShmCmdsReq
 *
ªq
 = 
r
;

1432 
key
, 
shmid
;

1433 *
tmp
;

1435 i‡–
cur˛õ¡
->
shm_cmds
 != 0 )

1436 
bad
;

1438  
key
=
SHMKEY_BASE
; key < SHMKEY_BASE+
SHMKEY_MAX
; key++ ) {

1439 
shmid
 = 
	`shmgë
(
key
,
ªq
->
size
,
IPC_CREAT
|
IPC_EXCL
|0666);

1440 i‡–
shmid
 == -1 ) {

1441 i‡–
î∫o
 !
EEXIST
 )

1442 
bad
;

1444 
tmp
 = 
	`shm©
(
shmid
,0,0);

1445 i‡–
tmp
 == (*)-1 )

1446 
bad
;

1447 
cur˛õ¡
->
shm_cmds
 = 
tmp
;

1448 
cur˛õ¡
->
shm_cmds_shmid
 = 
shmid
;

1449 
cur˛õ¡
->
shm_cmds_size
 = 
ªq
->
size
;

1450 
föish
;

1454 
bad
:

1455 
key
 = 0;

1457 
föish
:

1458 
	`DPRINTF
("Shm: Reque° key gø¡ed=%d\n",
key
);

1459 
	`GsWrôe
(
cuºít_fd
, &
key
, (key));

1462 
key
 = 0;

1463 
	`GsWrôe
(
cuºít_fd
, &
key
, (key));

1465 
	}
}

1468 
	$GrGëF⁄tLi°Wøµî
(*
r
)

1470 
MWFONTLIST
 **
li°
;

1471 
num
;

1472 
i
, 
âÀn
, 
mwÀn
;

1474 
	`GrGëF⁄tLi°
(&
li°
, &
num
);

1476 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumGëF⁄tLi°
);

1479 
	`GsWrôe
(
cuºít_fd
, &
num
, ());

1481 if(
num
 != -1) {

1482 
i
 = 0; i < 
num
; i++) {

1483 
âÀn
 = 
	`°æí
(
li°
[
i
]->
â«me
) + 1;

1484 
mwÀn
 = 
	`°æí
(
li°
[
i
]->
mw«me
) + 1;

1486 
	`GsWrôe
(
cuºít_fd
, &
âÀn
, ());

1487 
	`GsWrôe
(
cuºít_fd
, 
li°
[
i
]->
â«me
, 
âÀn
 * ());

1489 
	`GsWrôe
(
cuºít_fd
, &
mwÀn
, ());

1490 
	`GsWrôe
(
cuºít_fd
, 
li°
[
i
]->
mw«me
, 
mwÀn
 * ());

1493 
	`GrFªeF⁄tLi°
(&
li°
, 
num
);

1495 
	}
}

1498 
	$GrNewBôm≠Regi⁄Wøµî
(*
r
)

1500 
GR_REGION_ID
 
ªgi⁄
;

1501 
nxNewBôm≠Regi⁄Req
 *
ªq
 = 
r
;

1503 
ªgi⁄
 = 
	`GrNewBôm≠Regi⁄
(
	`GëReqD©a
(
ªq
),Ñeq->
width
,Ñeq->
height
);

1505 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumNewBôm≠Regi⁄
);

1506 
	`GsWrôe
(
cuºít_fd
, &
ªgi⁄
, (region));

1507 
	}
}

1510 
	$GrSëWödowRegi⁄Wøµî
(*
r
)

1512 
nxSëWödowRegi⁄Req
 *
ªq
 = 
r
;

1514 
	`GrSëWödowRegi⁄
(
ªq
->
wid
,Ñeq->
rid
,Ñeq->
ty≥
);

1515 
	}
}

1518 
	$GrSåëchAªaWøµî
(*
r
)

1520 
nxSåëchAªaReq
 *
ªq
 = 
r
;

1522 
	`GrSåëchAªa
(
ªq
->
døwid
,Ñeq->
gcid
,

1523 
ªq
->
dx1
,Ñeq->
dy1
,

1524 
ªq
->
dx2
,Ñeq->
dy2
,

1525 
ªq
->
§cid
,

1526 
ªq
->
sx1
,Ñeq->
sy1
,

1527 
ªq
->
sx2
,Ñeq->
sy2
,

1528 
ªq
->
›
);

1529 
	}
}

1533 
	$GrGøbKeyWøµî
(*
r
)

1535 
nxGøbKeyReq
 *
ªq
 = 
r
;

1537 i‡(
ªq
->
ty≥
 !
GR_GRAB_MAX
 + 1) {

1538 
ªt
 = 
	`GrGøbKey
(
ªq
->
wid
,Ñeq->
key
,Ñeq->
ty≥
);

1539 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumGøbKey
);

1540 
	`GsWrôe
(
cuºít_fd
, &
ªt
, (ret));

1542 
	`GrUngøbKey
(
ªq
->
wid
,Ñeq->
key
);

1543 
	}
}

1546 
	$GrSëTønsf‹mWøµî
(*
r
)

1548 
nxSëTønsf‹mReq
 *
ªq
 = 
r
;

1549 
GR_TRANSFORM
 
å™s
;

1551 i‡(
ªq
->
mode
) {

1552 
å™s
.
a
 = 
ªq
->
å™s_a
;

1553 
å™s
.
b
 = 
ªq
->
å™s_b
;

1554 
å™s
.
c
 = 
ªq
->
å™s_c
;

1555 
å™s
.
d
 = 
ªq
->
å™s_d
;

1556 
å™s
.
e
 = 
ªq
->
å™s_e
;

1557 
å™s
.
f
 = 
ªq
->
å™s_f
;

1558 
å™s
.
s
 = 
ªq
->
å™s_s
;

1559 
	`GrSëTønsf‹m
(&
å™s
);

1561 
	`GrSëTønsf‹m
(
NULL
);

1562 
	}
}

1565 
	$GrCª©eF⁄tFromBuf„rWøµî
(*
r
)

1567 #i‡
HAVE_FREETYPE_2_SUPPORT


1568 
imagñi°_t
 *
buf„r
;

1569 
nxCª©eF⁄tFromBuf„rReq
 *
ªq
 = 
r
;

1570 
GR_FONT_ID
 
ªsu…
;

1572 
buf„r
 = 
	`födImageBuf„r
(
ªq
->
buf„r_id
);

1573 i‡(!
buf„r
) {

1574 
ªsu…
 = 0;

1576 
ªsu…
 = 
	`GrCª©eF⁄tFromBuf„r
(
buf„r
->
d©a
, buf„r->
size
,

1577 (c⁄° *)
ªq
->
f‹m©
,Ñeq->
height
);

1579 
	`‰ìImageBuf„r
(
buf„r
);

1582 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumCª©eF⁄tFromBuf„r
);

1583 
	`GsWrôe
(
cuºít_fd
, &
ªsu…
, (result));

1585 
	}
}

1588 
	$GrC›yF⁄tWøµî
(*
r
)

1590 #i‡
HAVE_FREETYPE_2_SUPPORT


1591 
nxC›yF⁄tReq
 *
ªq
 = 
r
;

1592 
GR_FONT_ID
 
ªsu…
 = 
	`GrC›yF⁄t
(
ªq
->
f⁄tid
,Ñeq->
height
);

1594 
	`GsWrôeTy≥
(
cuºít_fd
, 
GrNumC›yF⁄t
);

1595 
	`GsWrôe
(
cuºít_fd
, &
ªsu…
, (result));

1597 
	}
}

1600 
GrShmCmdsFlushWøµî
(*
r
);

1605 
	sGrFun˘i⁄
 {

1606 (*
	mfunc
)(*);

1607 
GR_FUNC_NAME
 
	m«me
;

1608 } 
	gGrFun˘i⁄s
[] = {

1609  {
GrO≥nWøµî
, "GrOpen"},

1610  {
GrClo£Wøµî
, "GrClose"},

1611  {
GrGëS¸ìnInfoWøµî
, "GrGetScreenInfo"},

1612  {
GrNewWödowWøµî
, "GrNewWindow"},

1613  {
GrNewI≈utWödowWøµî
, "GrNewInputWindow"},

1614  {
GrDe°royWödowWøµî
, "GrDestroyWindow"},

1615  {
GrNewGCWøµî
, "GrNewGC"},

1616  {
GrC›yGCWøµî
, "GrCopyGC"},

1617  {
GrGëGCInfoWøµî
, "GrGetGCInfo"},

1618  {
GrDe°royGCWøµî
, "GrDestroyGC"},

1619  {
GrM≠WödowWøµî
, "GrMapWindow"},

1620  {
GrUnm≠WödowWøµî
, "GrUnmapWindow"},

1621  {
GrRai£WödowWøµî
, "GrRaiseWindow"},

1622  {
GrLowîWödowWøµî
, "GrLowerWindow"},

1623  {
GrMoveWödowWøµî
, "GrMoveWindow"},

1624  {
GrResizeWödowWøµî
, "GrResizeWindow"},

1625  {
GrGëWödowInfoWøµî
, "GrGetWindowInfo"},

1626  {
GrGëF⁄tInfoWøµî
, "GrGetFontInfo"},

1627  {
GrSëFocusWøµî
, "GrSetFocus"},

1628  {
GrSëWödowCurs‹Wøµî
, "GrSetWindowCursor"},

1629  {
GrCÀ¨AªaWøµî
, "GrClearAreaWrapper"},

1630  {
GrSñe˘EvítsWøµî
, "GrSelectEvents"},

1631  {
GrGëNextEvítWøµî
, "GrGetNextEvent"},

1632  {
GrCheckNextEvítWøµî
, "GrCheckNextEvent"},

1633  {
GrPìkEvítWøµî
, "GrPeekEvent"},

1634  {
GrLöeWøµî
, "GrLine"},

1635  {
GrPoötWøµî
, "GrPoint"},

1636  {
GrRe˘Wøµî
, "GrRect"},

1637  {
GrFûlRe˘Wøµî
, "GrFillRect"},

1638  {
GrPﬁyWøµî
, "GrPoly"},

1639  {
GrFûlPﬁyWøµî
, "GrFillPoly"},

1640  {
GrEŒù£Wøµî
, "GrEllipse"},

1641  {
GrFûlEŒù£Wøµî
, "GrFillEllipse"},

1642  {
GrSëGCF‹egroundWøµî
, "GrSetGCForeground"},

1643  {
GrSëGCBackgroundWøµî
, "GrSetGCBackGround"},

1644  {
GrSëGCU£BackgroundWøµî
, "GrSetGCUseBackGround"},

1645  {
GrSëGCModeWøµî
, "GrSetGCMode"},

1646  {
GrSëGCF⁄tWøµî
, "GrSetGCFont"},

1647  {
GrGëGCTextSizeWøµî
, "GrGetGCTextSize"},

1648  {
GrRódAªaWøµî
, "GrReadArea"},

1649  {
GrAªaWøµî
, "GrArea"},

1650  {
GrBôm≠Wøµî
, "GrBitmap"},

1651  {
GrTextWøµî
, "GrText"},

1652  {
GrNewCurs‹Wøµî
, "GrNewCursor"},

1653  {
GrMoveCurs‹Wøµî
, "GrMoveCursor"},

1654  {
GrGëSy°emPÆëãWøµî
, "GrGetSystemPalette"},

1655  {
GrFödCﬁ‹Wøµî
, "GrFindColor"},

1656  {
GrRï¨ítWödowWøµî
, "GrReparentWindow"},

1657  {
GrDøwImageFromFûeWøµî
, "GrDrawImageFromFile"},

1658  {
GrLﬂdImageFromFûeWøµî
, "GrLoadImageFromFile"},

1659  {
GrNewPixm≠Wøµî
, "GrNewPixmap"},

1660  {
GrC›yAªaWøµî
, "GrCopyArea"},

1661  {
GrSëF⁄tSizeWøµî
, "GrSetFontSize"},

1662  {
GrCª©eF⁄tWøµî
, "GrCreateFont"},

1663  {
GrDe°royF⁄tWøµî
, "GrDestroyFont"},

1664  {
GrReqShmCmdsWøµî
, "GrReqShmCmds"},

1665  {
GrShmCmdsFlushWøµî
, "GrShmCmdsFlush"},

1666  {
GrSëF⁄tRŸ©i⁄Wøµî
, "GrSetFontRotation"},

1667  {
GrSëF⁄tAârWøµî
, "GrSetFontAttr"},

1668  {
GrSëSy°emPÆëãWøµî
, "GrSetSystemPalette"},

1669  {
GrInje˘EvítWøµî
, "GrInjectEvent"},

1670  {
GrNewRegi⁄Wøµî
, "GrNewRegion"},

1671  {
GrDe°royRegi⁄Wøµî
, "GrDestroyRegion"},

1672  {
GrUni⁄Re˘WôhRegi⁄Wøµî
, "GrUnionRectWithRegion"},

1673  {
GrUni⁄Regi⁄Wøµî
, "GrUnionRegion"},

1674  {
GrI¡î£˘Regi⁄Wøµî
, "GrIntersectRegion"},

1675  {
GrSëGCRegi⁄Wøµî
, "GrSetGCRegion"},

1676  {
GrSubåa˘Regi⁄Wøµî
, "GrSubtractRegion"},

1677  {
GrX‹Regi⁄Wøµî
, "GrXorRegion"},

1678  {
GrPoötInRegi⁄Wøµî
, "GrPointInRegion"},

1679  {
GrRe˘InRegi⁄Wøµî
, "GrRectInRegion"},

1680  {
GrEm±yRegi⁄Wøµî
, "GrEmptyRegion"},

1681  {
GrEquÆRegi⁄Wøµî
, "GrEqualRegion"},

1682  {
GrOff£tRegi⁄Wøµî
, "GrOffsetRegion"},

1683  {
GrGëRegi⁄BoxWøµî
, "GrGetRegionBox"},

1684  {
GrNewPﬁyg⁄Regi⁄Wøµî
, "GrNewPolygonRegion"},

1685  {
GrArcWøµî
, "GrArc"},

1686  {
GrArcAngÀWøµî
, "GrArcAngle"},

1687  {
GrSëWMPr›îtõsWøµî
, "GrSetWMProperties"},

1688  {
GrGëWMPr›îtõsWøµî
, "GrGetWMProperties"},

1689  {
GrClo£WödowWøµî
, "GrCloseWindow"},

1690  {
GrKûlWödowWøµî
, "GrKillWindow"},

1691  {
GrDøwImageToFôWøµî
, "GrDrawImageToFit"},

1692  {
GrFªeImageWøµî
, "GrFreeImage"},

1693  {
GrGëImageInfoWøµî
, "GrGetImageInfo"},

1694  {
GrDøwImageBôsWøµî
, "GrDrawImageBits"},

1695  {
GrPoötsWøµî
, "GrPoints"},

1696  {
GrGëFocusWøµî
, "GrGetFocus"},

1697  {
GrGëSysCﬁ‹Wøµî
, "GrGetSysColor"},

1698  {
GrSëS¸ìnSavîTimeoutWøµî
, "GrSetScreenSaverTimeout"},

1699  {
GrSëSñe˘i⁄Ow√rWøµî
, "GrSetSelectionOwner"},

1700  {
GrGëSñe˘i⁄Ow√rWøµî
, "GrGetSelectionOwner"},

1701  {
GrReque°Clõ¡D©aWøµî
, "GrRequestClientData"},

1702  {
GrSídClõ¡D©aWøµî
, "GrSendClientData"},

1703  {
GrBñlWøµî
, "GrBell"},

1704  {
GrSëBackgroundPixm≠Wøµî
, "GrSetBackgroundPixmap"},

1705  {
GrDe°royCurs‹Wøµî
, "GrDestroyCursor"},

1706  {
GrQuîyTªeWøµî
, "GrQueryTree"},

1707  {
GrCª©eTimîWøµî
, "GrCreateTimer"},

1708  {
GrDe°royTimîWøµî
, "GrDestroyTimer"},

1709  {
GrSëP‹åaôModeWøµî
, "GrSetPortraitMode"},

1710  {
GrImageBuf„rAŒocWøµî
, "GrImageBufferAlloc"},

1711  {
GrImageBuf„rSídWøµî
, "GrImageBufferSend"},

1712  {
GrLﬂdImageFromBuf„rWøµî
, "GrLoadImageFromBuffer"},

1713  {
GrDøwImageFromBuf„rWøµî
, "GrDrawImageFromBuffer"},

1714  {
GrGëF⁄tLi°Wøµî
, "GrGetFontList"},

1715  {
GrSëGCClùOrigöWøµî
, "GrSetGCClipOrigin"},

1716  {
GrSëGCGøphicsExposuªWøµî
, "GrSetGCGraphicsExposure"},

1717  {
GrQuîyPoöãrWøµî
, "GrQueryPointer"},

1718  {
GrSëGCLöeAâribuãsWøµî
, "GretGCLineAttributes"},

1719  {
GrSëGCDashWøµî
, "GrSetGCDash"},

1720  {
GrSëGCFûlModeWøµî
, "GrSetGCFillMode"},

1721  {
GrSëGCStù∂eWøµî
, "GrSetGCStipple"},

1722  {
GrSëGCTSOff£tWøµî
, "GrSetGCTSOffset"},

1723  {
GrSëGCTûeWøµî
, "GrSetGCTile" },

1724  {
GrNewBôm≠Regi⁄Wøµî
, "GrNewBitmapRegion"},

1725  {
GrSëWödowRegi⁄Wøµî
, "GrSetWindowRegion"},

1726  {
GrSëGCF‹egroundPixñVÆWøµî
, "GrSetGCForegroundPixelVal"},

1727  {
GrSëGCBackgroundPixñVÆWøµî
, "GrSetGCBackgroundPixelVal"},

1728  {
GrCª©eLogF⁄tWøµî
, "GrCreateLogFont"},

1729  {
GrSåëchAªaWøµî
, "GrStretchArea"},

1730  {
GrGøbKeyWøµî
, "GrGrabKey" },

1731  {
GrSëTønsf‹mWøµî
, "GrSetTransform" },

1732  {
GrCª©eF⁄tFromBuf„rWøµî
, "GrCreateFontFromBuffer"},

1733  {
GrC›yF⁄tWøµî
, "GrCopyFont"},

1737 
	$GrShmCmdsFlushWøµî
(*
r
)

1739 
nxShmCmdsFlushReq
 *
ªq
 = 
r
;

1740 
ª∂y
;

1741 #i‡
HAVE_SHAREDMEM_SUPPORT


1742 
nxReq
 *
¥
;

1743 
Àngth
;

1744 *
do_ªq
, *
do_ªq_œ°
;

1746 i‡–
cuºít_shm_cmds
 =0 || 
cuºít_shm_cmds_size
 < 
ªq
->
size
 ) {

1748 
	`EPRINTF
("nano-X: Ill behaved clientássumes shm ok\n");

1749 i‡–
ªq
->
ª∂y
 ) {

1750 
ª∂y
 = 0;

1751 
	`GsWrôe
(
cuºít_fd
, &
ª∂y
, 1);

1756 
do_ªq
 = 
cuºít_shm_cmds
;

1757 
do_ªq_œ°
 = 
cuºít_shm_cmds
 + 
ªq
->
size
;

1759  
do_ªq
 < 
do_ªq_œ°
 ) {

1760 
¥
 = (
nxReq
 *)
do_ªq
;

1761 
Àngth
 = 
	`GëReqAlig√dLí
(
¥
);

1762 i‡–
¥
->
ªqTy≥
 < 
GrTŸÆNumCÆls
 ) {

1763 
GrFun˘i⁄s
[
¥
->
ªqTy≥
].
	`func
(pr);

1765 
	`EPRINTF
("nano-X: Error bad shm function!\n");

1767 
do_ªq
 +
Àngth
;

1770 i‡–
ªq
->
ª∂y
 ) {

1771 
ª∂y
 = 1;

1772 
	`GsWrôe
(
cuºít_fd
, &
ª∂y
, 1);

1776 i‡–
ªq
->
ª∂y
 ) {

1777 
ª∂y
 = 0;

1778 
	`GsWrôe
(
cuºít_fd
, &
ª∂y
, 1);

1781 
	}
}

1788 
	$GsO≥nSockë
()

1790 #i‡
ELKS


1791 
sockaddr_«
 
sckt
;

1792 #i‚de‡
SUN_LEN


1793 
	#SUN_LEN
(
±r
Ë((
sckt
))

	)

1795 #ñi‡
__ECOS


1796 
sockaddr_ö
 
sckt
;

1797 #i‚de‡
SUN_LEN


1798 
	#SUN_LEN
(
±r
Ë((
sckt
))

	)

1801 
sockaddr_un
 
sckt
;

1802 #i‚de‡
SUN_LEN


1803 
	#SUN_LEN
(
±r
Ë((
size_t
Ë(((
sockaddr_un
 *Ë0)->
sun_∑th
) \

1804 + 
	`°æí
 ((
±r
)->
sun_∑th
))

	)

1808 #i‡
ELKS


1809 if((
un_sock
 = 
	`sockë
(
AF_NANO
, 
SOCK_STREAM
, 0)) == -1)

1812 
sckt
.
sun_Ámûy
 = 
AF_NANO
;

1813 
sckt
.
sun_no
 = 
GR_NUMB_SOCKET
;

1814 #ñi‡
__ECOS


1816 if((
un_sock
 = 
	`sockë
(
AF_INET
, 
SOCK_STREAM
, 0)) == -1)

1820 
	`mem£t
–&
sckt
, '\0', (sckt) );

1821 
sckt
.
sö_Ámûy
 = 
AF_INET
;

1822 
sckt
.
sö_Àn
 = (sckt);

1823 
sckt
.
sö_p‹t
 = 
	`ht⁄s
(6600);

1824 
sckt
.
sö_addr
.
s_addr
 = 
INADDR_ANY
;

1826 i‡(
	`ac˚ss
(
GR_NAMED_SOCKET
, 
F_OK
) == 0) {

1828 if(
	`u∆ök
(
GR_NAMED_SOCKET
))

1833 if((
un_sock
 = 
	`sockë
(
AF_UNIX
, 
SOCK_STREAM
, 0)) == -1)

1837 
sckt
.
sun_Ámûy
 = 
AF_UNIX
;

1838 
	`°∫˝y
(
sckt
.
sun_∑th
, 
GR_NAMED_SOCKET
, (sckt.sun_path));

1840 if(
	`böd
(
un_sock
, (
sockaddr
 *Ë&
sckt
, 
	`SUN_LEN
(&sckt)) < 0)

1844 if(
	`li°í
(
un_sock
, 5) == -1)

1847 
	}
}

1850 
	$GsClo£Sockë
()

1852 if(
un_sock
 != -1)

1853 
	`˛o£
(
un_sock
);

1854 
un_sock
 = -1;

1855 
	`u∆ök
(
GR_NAMED_SOCKET
);

1856 
	}
}

1862 
	$GsAc˚±Clõ¡
()

1864 
i
;

1865 #i‡
ELKS


1866 
sockaddr_«
 
sckt
;

1867 #ñi‡
__ECOS


1868 
sockaddr_ö
 
sckt
;

1870 
sockaddr_un
 
sckt
;

1872 
sockÀn_t
 
size
 = (
sckt
);

1874 if((
i
 = 
	`ac˚±
(
un_sock
, (
sockaddr
 *Ë&
sckt
, &
size
)) == -1) {

1875 
	`EPRINTF
("«no-X: Eº‹ác˚± faûed (%d)\n", 
î∫o
);

1878 
	`GsAc˚±Clõ¡Fd
(
i
);

1879 
	}
}

1886 
GR_CLIENT
 *

1887 
	$GsFödClõ¡
(
fd
)

1889 
GR_CLIENT
 *
˛õ¡
;

1891 
˛õ¡
 = 
roŸ_˛õ¡
;

1893 
˛õ¡
) {

1894 if(
˛õ¡
->
id
 =
fd
)

1895 (
˛õ¡
);

1896 
˛õ¡
 = clõ¡->
√xt
;

1900 
	}
}

1908 
	$GsDe°royClõ¡Resour˚s
(
GR_CLIENT
 * 
˛õ¡
)

1910 
GR_WINDOW
 * 
wp
, *
nwp
;

1911 
GR_PIXMAP
 * 
µ
, *
≈p
;

1912 
GR_GC
 * 
gp
, *
ngp
;

1913 
GR_REGION
 * 
Ω
, *
ƒp
;

1914 
GR_FONT
 * 
Â
, *
nÂ
;

1915 
GR_CURSOR
 * 
˝
, *
n˝
;

1916 
GR_EVENT_CLIENT
 *
e˝
, *
√˝
;

1917 
GR_EVENT_CLIENT
 *
≥˝
 = 
NULL
;

1918 
GR_EVENT_LIST
 *
evp
;

1919 
GR_GRABBED_KEY
 *
kp
, *
nkp
;

1920 #i‡
MW_FEATURE_IMAGES


1921 
GR_IMAGE
 * 
ù
, *
nù
;

1923 #i‡
MW_FEATURE_TIMERS


1924 
GR_TIMER
 * 
ç
, *
¡p
;

1927 
	`DPRINTF
("De°roy clõ¡ %dÑesour˚s\n", 
˛õ¡
->
id
);

1929 
wp
=
li°wp
; wp; wp=
nwp
) {

1930 
nwp
 = 
wp
->
√xt
;

1934 
e˝
 = 
wp
->
evít˛õ¡s
;

1935 
e˝
) {

1936 
√˝
 = 
e˝
->
√xt
;

1937 i‡(
e˝
->
˛õ¡
 == client) {

1938 
	`DPRINTF
–" De°roy wödow %dÉvít˛õ¡ mask %08lx\n", 
wp
->
id
, 
e˝
->
evítmask
);

1939 i‡(
e˝
 =
wp
->
evít˛õ¡s
)

1940 
wp
->
evít˛õ¡s
 = 
e˝
->
√xt
;

1942 
≥˝
->
√xt
 = 
e˝
->next;

1943 
	`‰ì
(
e˝
);

1945 
≥˝
 = 
e˝
;

1946 
e˝
 = 
√˝
;

1948 i‡(
wp
->
ow√r
 =
˛õ¡
) {

1949 
	`DPRINTF
(" De°roy wödow %d\n", 
wp
->
id
);

1950 
	`GrDe°royWödow
(
wp
->
id
);

1955 
µ
=
li°µ
;Öp;Öp=
≈p
) {

1956 
≈p
 = 
µ
->
√xt
;

1957 i‡(
µ
->
ow√r
 =
˛õ¡
) {

1958 
	`DPRINTF
(" De°royÖixm≠ %d\n", 
µ
->
id
);

1959 
	`GrDe°royWödow
(
µ
->
id
);

1964 
gp
=
li°g˝
; gp; gp=
ngp
) {

1965 
ngp
 = 
gp
->
√xt
;

1966 i‡(
gp
->
ow√r
 =
˛õ¡
) {

1967 
	`DPRINTF
(" De°roy g¯%d\n", 
gp
->
id
);

1968 
	`GrDe°royGC
(
gp
->
id
);

1973 
Â
=
li°f⁄ç
; fp; fp=
nÂ
) {

1974 
nÂ
 = 
Â
->
√xt
;

1975 i‡(
Â
->
ow√r
 =
˛õ¡
) {

1976 
	`DPRINTF
(" De°roy f⁄à%d\n", 
Â
->
id
);

1977 
	`GrDe°royF⁄t
(
Â
->
id
);

1982 
Ω
=
li°ªgi⁄p
;Ñp;Ñp=
ƒp
) {

1983 
ƒp
 = 
Ω
->
√xt
;

1984 i‡(
Ω
->
ow√r
 =
˛õ¡
) {

1985 
	`DPRINTF
(" De°royÑegi⁄ %d\n", 
Ω
->
id
);

1986 
	`GrDe°royRegi⁄
(
Ω
->
id
);

1990 #i‡
MW_FEATURE_IMAGES


1992 
ù
=
li°imagï
; ip; ip=
nù
) {

1993 
nù
 = 
ù
->
√xt
;

1994 i‡(
ù
->
ow√r
 =
˛õ¡
) {

1995 
	`DPRINTF
(" De°roy imagê%d\n", 
ù
->
id
);

1996 
	`GrFªeImage
(
ù
->
id
);

2001 #i‡
MW_FEATURE_TIMERS


2003 
ç
=
li°_timî
;Åp;Åp=
¡p
) {

2004 
¡p
 = 
ç
->
√xt
;

2005 i‡(
ç
->
ow√r
 =
˛õ¡
) {

2006 
	`DPRINTF
(" De°royÅimî %d\n", 
ç
->
id
);

2007 
	`GrDe°royTimî
(
ç
->
id
);

2013 
˝
=
li°curs‹p
; cp; cp=
n˝
) {

2014 
n˝
 = 
˝
->
√xt
;

2015 i‡(
˝
->
ow√r
 =
˛õ¡
) {

2016 
	`DPRINTF
(" De°roy curs‹ %d\n", 
˝
->
id
);

2017 
	`GrDe°royCurs‹
(
˝
->
id
);

2022 
kp
=
li°_gøbbed_keys
; kp; k∞
nkp
) {

2023 
nkp
 = 
kp
->
√xt
;

2024 i‡(
kp
->
ow√r
 =
cur˛õ¡
) {

2025 
	`DPRINTF
(" De°roy gøbkey %d,%d\n", 
kp
->
wid
, kp->
key
);

2026 
	`GrUngøbKey
(
kp
->
wid
, kp->
key
);

2031 
evp
 = 
˛õ¡
->
evíthód
;

2032 
evp
) {

2033 
	`DPRINTF
(" De°royÉvíà%d\n", 
evp
->
evít
.
ty≥
);

2034 
˛õ¡
->
evíthód
 = 
evp
->
√xt
;

2035 
evp
->
√xt
 = 
evít‰ì
;

2036 
evít‰ì
 = 
evp
;

2037 
evp
 = 
˛õ¡
->
evíthód
;

2039 
	}
}

2045 
	$GsPrötResour˚s
()

2047 
GR_WINDOW
 *
wp
;

2048 
GR_PIXMAP
 *
µ
;

2049 
GR_GC
 *
gp
;

2050 
GR_REGION
 *
Ω
;

2051 
GR_FONT
 *
Â
;

2052 #i‡
MW_FEATURE_IMAGES


2053 
GR_IMAGE
 *
ù
;

2055 #i‡
MW_FEATURE_TIMERS


2056 
GR_TIMER
 *
ç
;

2060 
	`DPRINTF
("WindowÜist:\n");

2061 
wp
=
li°wp
; wp; wp=wp->
√xt
) {

2062 
	`DPRINTF
("%d(%d),", 
wp
->
id
, wp->
ow√r
? wp->owner->id: 0);

2064 
	`DPRINTF
("\nPixmapÜist:\n");

2065 
µ
=
li°µ
;Öp;Öpıp->
√xt
) {

2066 
	`DPRINTF
("%d(%d),", 
µ
->
id
,Öp->
ow√r
->id);

2068 
	`DPRINTF
("\nGCÜist:\n");

2069 
gp
=
li°g˝
; gp; gp=gp->
√xt
) {

2070 
	`DPRINTF
("%d(%d),", 
gp
->
id
, gp->
ow√r
->id);

2072 
	`DPRINTF
("\nFontÜist:\n");

2073 
Â
=
li°f⁄ç
; fp; fp=Â->
√xt
) {

2074 
	`DPRINTF
("%d(%d),", 
Â
->
id
, fp->
ow√r
->id);

2076 
	`DPRINTF
("\nRegionÜist:\n");

2077 
Ω
=
li°ªgi⁄p
;Ñp;ÑpÙp->
√xt
) {

2078 
	`DPRINTF
("%d(%d),", 
Ω
->
id
,Ñp->
ow√r
->id);

2080 #i‡
MW_FEATURE_IMAGES


2081 
	`DPRINTF
("\nImageÜist:\n");

2082 
ù
=
li°imagï
; ip; ip=ù->
√xt
) {

2083 
	`DPRINTF
("%d(%d),", 
ù
->
id
, ip->
ow√r
->id);

2086 #i‡
MW_FEATURE_TIMERS


2087 
	`DPRINTF
("\nTimerÜist:\n");

2088 
ç
=
li°_timî
;Åp;ÅpÒp->
√xt
) {

2089 
	`DPRINTF
("%d(%d),", 
ç
->
id
,Åp->
ow√r
->id);

2092 
	`DPRINTF
("\n");

2093 
	}
}

2100 
	$GsDr›Clõ¡
(
fd
)

2102 
GR_CLIENT
 *
˛õ¡
;

2104 if((
˛õ¡
 = 
	`GsFödClõ¡
(
fd
))) {

2105 
	`˛o£
(
fd
);

2107 
	`GsDe°royClõ¡Resour˚s
(
˛õ¡
);

2108 if(
˛õ¡
 =
roŸ_˛õ¡
)

2109 
roŸ_˛õ¡
 = 
˛õ¡
->
√xt
;

2111 if(
˛õ¡
->
¥ev
Ë˛õ¡->¥ev->
√xt
 = client->next;

2114 if(
˛õ¡
->
√xt
Ë˛õ¡->√xt->
¥ev
 = client->prev;

2116 #i‡
HAVE_SHAREDMEM_SUPPORT


2117 i‡–
˛õ¡
->
shm_cmds
 != 0 ) {

2119 
	`shm˘l
(
˛õ¡
->
shm_cmds_shmid
,
IPC_RMID
,0);

2120 
	`shmdt
(
˛õ¡
->
shm_cmds
);

2123 
	`GsPrötResour˚s
();

2124 
	`‰ì
(
˛õ¡
);

2126 
˛ùwp
 = 
NULL
;

2127 --
c⁄√˘cou¡
;

2128 } 
	`EPRINTF
("«no-X:ÅryögÅÿdr›Ç⁄-exi°íà˛õ¡ %d.\n", 
fd
);

2129 
	}
}

2136 #i‡
ELKS


2137 
	$GsRód
(
fd
, *
buf
, 
c
)

2139 
	$GsRód
(
fd
, *
buf
, 
c
)

2142 
e
, 
n
;

2144 
n
 = 0;

2146 
n
 < 
c
) {

2147 
e
 = 
	`ªad
(
fd
, ((*)
buf
Ë+ 
n
, 
c
 -Ç);

2148 if(
e
 <= 0) {

2149 i‡(
e
 == 0)

2150 
	`EPRINTF
("«no-X: clõ¡ clo£d sockë: %d\n", 
fd
);

2151 
	`EPRINTF
("nano-X: GsRead failed %d %d: %d\r\n",

2152 
e
, 
n
, 
î∫o
);

2153 
	`GsClo£
(
fd
);

2156 
n
 +
e
;

2160 
	}
}

2165 
	$GsWrôe
(
fd
, *
buf
, 
c
)

2167 
e
, 
n
;

2169 
n
 = 0;

2171 
n
 < 
c
) {

2172 
e
 = 
	`wrôe
(
fd
, ((*Ë
buf
 + 
n
), (
c
 -Ç));

2173 if(
e
 <= 0) {

2174 
	`GsClo£
(
fd
);

2177 
n
 +
e
;

2181 
	}
}

2183 
	$GsWrôeTy≥
(
fd
, 
ty≥
)

2185  
	`GsWrôe
(
fd
,&
ty≥
,(type));

2186 
	}
}

2194 
	$GsH™dÀClõ¡
(
fd
)

2196 
nxReq
 * 
ªq
;

2197 
Àn
;

2198 
buf
[
MAXREQUESTSZ
];

2200 
cuºít_fd
 = 
fd
;

2201 #i‡
HAVE_SHAREDMEM_SUPPORT


2202 
cuºít_shm_cmds
 = 
cur˛õ¡
->
shm_cmds
;

2203 
cuºít_shm_cmds_size
 = 
cur˛õ¡
->
shm_cmds_size
;

2206 if(
	`GsRód
(
fd
, 
buf
, (
nxReq
)))

2209 
Àn
 = 
	`GëReqAlig√dLí
((
nxReq
 *)&
buf
[0]);

2210 if(
Àn
 > (
nxReq
)) {

2211 if(
Àn
 > 
MAXREQUESTSZ
) {

2212 
	`EPRINTF
("nano-X: GsHandleClientÑequestÅooÜarge: %ld > %d\n",

2213 
Àn
, 
MAXREQUESTSZ
);

2214 
	`exô
(1);

2217 if(
	`GsRód
(
fd
, &
buf
[(
nxReq
)], 
Àn
-(nxReq)))

2220 
ªq
 = (
nxReq
 *)&
buf
[0];

2222 if(
ªq
->
ªqTy≥
 < 
GrTŸÆNumCÆls
) {

2223 
curfunc
 = 
GrFun˘i⁄s
[
ªq
->
ªqTy≥
].
«me
;

2225 
GrFun˘i⁄s
[
ªq
->
ªqTy≥
].
	`func
(req);

2227 
	`EPRINTF
("nano-X: GsHandleClient bad function\n");

2229 
	}
}

	@nanox/srvutil.c

10 
	~<°dio.h
>

11 
	~<°dlib.h
>

13 #i‚de‡
__PACIFIC__


14 
	~<f˙é.h
>

17 
	~"£rv.h
"

23 
	$GsRedøwS¸ìn
()

26 
	`GsExpo£Aªa
(
roŸwp
, 0, 0,ÑoŸwp->
width
,ÑoŸwp->
height
, 
NULL
);

27 
	}
}

33 
	$GsA˘iv©eS¸ìnSavî
(*
¨g
)

35 
s¸ìnßvî_a˘ive
 = 
GR_TRUE
;

36 
	`GsDñivîS¸ìnSavîEvít
(
GR_TRUE
);

37 
	}
}

43 
	$GsRe£tS¸ìnSavî
()

45 #i‡
MW_FEATURE_TIMERS


46 
MWTIMER
 *
timî
;

49 if(
s¸ìnßvî_a˘ive
 =
GR_TRUE
) {

50 
s¸ìnßvî_a˘ive
 = 
GR_FALSE
;

51 
	`GsDñivîS¸ìnSavîEvít
(
GR_FALSE
);

53 #i‡
MW_FEATURE_TIMERS


54 if(
s¸ìnßvî_dñay
) {

55 if((
timî
 = 
	`GdFödTimî
(
GsA˘iv©eS¸ìnSavî
)))

56 
	`GdDe°royTimî
(
timî
);

57 
	`GdAddTimî
(
s¸ìnßvî_dñay
, 
GsA˘iv©eS¸ìnSavî
,

58 
GsA˘iv©eS¸ìnSavî
);

61 
	}
}

63 #i‡
MW_FEATURE_TIMERS


65 
	$GsTimîCB
 (*
¨g
)

67 
GR_TIMER
 *
timî
 = (GR_TIMER*Ë
¨g
;

69 
	`GsDñivîTimîEvít
 (
timî
->
ow√r
,Åimî->
wid
,Åimî->
id
);

70 
	}
}

82 
	$GsWpUƒólizeWödow
(
GR_WINDOW
 *
wp
, 
GR_BOOL
 
ãmp_unm≠
)

84 
GR_WINDOW
 *
pwp
;

85 
GR_WINDOW
 *
sibwp
;

86 
GR_WINDOW
 *
chûdwp
;

87 
GR_SIZE
 
bs
;

89 i‡(
wp
 =
roŸwp
) {

90 
	`GsEº‹
(
GR_ERROR_ILLEGAL_ON_ROOT_WINDOW
, 
wp
->
id
);

94 i‡(
wp
 =
˛ùwp
)

95 
˛ùwp
 = 
NULL
;

98 i‡(!
wp
->
ªÆized
)

102 
wp
->
ªÆized
 = 
GR_FALSE
;

104 
chûdwp
 = 
wp
->
chûdªn
; chûdwp; chûdw∞chûdwp->
siblögs
)

105 
	`GsWpUƒólizeWödow
(
chûdwp
, 
ãmp_unm≠
);

107 i‡(!
ãmp_unm≠
 && 
wp
 =
mou£wp
) {

108 
	`GsCheckMou£Wödow
();

109 
	`GsCheckCurs‹
();

112 i‡(!
ãmp_unm≠
 && 
wp
 =
focuswp
) {

113 i‡(
focusfixed
)

115 
focuswp
 = 
roŸwp
;

117 
focusfixed
 = 
GR_FALSE
;

118 
	`GsCheckFocusWödow
();

123 
	`GsDñivîUpd©eEvít
(
wp
,

124 (
ãmp_unm≠
? 
GR_UPDATE_UNMAPTEMP
: 
GR_UPDATE_UNMAP
), 0, 0, 0, 0);

130 i‡(!
wp
->
∑ª¡
->
ªÆized
 || !wp->
ouçut
)

137 
bs
 = 
wp
->
b‹dîsize
;

138 
pwp
 = 
wp
->
∑ª¡
;

139 
	`GsWpCÀ¨Wödow
(
pwp
, 
wp
->
x
 -Öwp->x - 
bs
, wp->
y
 -Öwp->y - bs,

140 
wp
->
width
 + 
bs
 * 2, wp->
height
 + b†* 2, 
GR_TRUE
);

146 
sibwp
 = 
wp
;

147 
sibwp
->
siblögs
) {

148 
sibwp
 = sibwp->
siblögs
;

149 
	`GsExpo£Aªa
(
sibwp
, 
wp
->
x
 - 
bs
, wp->
y
 - bs,

150 
wp
->
width
 + 
bs
 * 2, wp->
height
 + b†* 2, 
NULL
);

152 
	}
}

162 
	$GsWpRólizeWödow
(
GR_WINDOW
 *
wp
, 
GR_BOOL
 
ãmp
)

164 i‡(
wp
 =
roŸwp
) {

165 
	`GsEº‹
(
GR_ERROR_ILLEGAL_ON_ROOT_WINDOW
, 
wp
->
id
);

171 
	#OLDWAY
 0

	)

172 #i‡
OLDWAY


178 i‡(
wp
->
ªÆized
 || !wp->
m≠≥d
 || !wp->
∑ª¡
->realized)

183 i‡(
wp
->
ªÆized
)

190 i‡(!
ãmp
) {

191 
	`GsDñivîUpd©eEvít
(
wp
, 
GR_UPDATE_MAP
, wp->
x
, wp->
y
,

192 
wp
->
width
, wp->
height
);

199 i‡(!
wp
->
m≠≥d
 || !wp->
∑ª¡
->
ªÆized
)

204 
wp
->
ªÆized
 = 
GR_TRUE
;

206 i‡(!
ãmp
) {

207 
	`GsCheckMou£Wödow
();

208 
	`GsCheckFocusWödow
();

209 
	`GsCheckCurs‹
();

212 #i‡
OLDWAY


214 i‡(!
ãmp
) {

215 
	`GsDñivîUpd©eEvít
(
wp
, 
GR_UPDATE_MAP
, wp->
x
, wp->
y
,

216 
wp
->
width
, wp->
height
);

223 i‡(
wp
->
ouçut
) {

224 
	`GsDøwB‹dî
(
wp
);

225 
	`GsWpCÀ¨Wödow
(
wp
, 0, 0, wp->
width
, wp->
height
, 
GR_TRUE
);

231 
wp
 = wp->
chûdªn
; wp; w∞wp->
siblögs
)

232 
	`GsWpRólizeWödow
(
wp
, 
ãmp
);

233 
	}
}

240 
	$GsWpDe°royWödow
(
GR_WINDOW
 *
wp
)

242 
GR_WINDOW
 *
¥evwp
;

243 
GR_EVENT_CLIENT
 *
e˝
;

244 
GR_WINDOW_ID
 
ﬁdwid
;

245 
GR_GRABBED_KEY
 *
keygøb
;

246 
GR_GRABBED_KEY
 **
keygøb_¥ev_√xt
;

248 i‡(
wp
 =
roŸwp
) {

249 
	`GsEº‹
(
GR_ERROR_ILLEGAL_ON_ROOT_WINDOW
, 
wp
->
id
);

254 if(
£À˘i⁄_ow√r
.
wid
 =
wp
->
id
) {

255 
ﬁdwid
 = 
£À˘i⁄_ow√r
.
wid
;

256 
£À˘i⁄_ow√r
.
wid
 = 0;

257 if(
£À˘i⁄_ow√r
.
ty≥li°
)

258 
	`‰ì
(
£À˘i⁄_ow√r
.
ty≥li°
);

259 
	`GsDñivîSñe˘i⁄Ch™gedEvít
(
ﬁdwid
, 0);

265 i‡(
wp
->
ªÆized
)

266 
	`GsWpUƒólizeWödow
(
wp
, 
GR_FALSE
);

269 
	`GsDñivîUpd©eEvít
(
wp
, 
GR_UPDATE_DESTROY
, wp->
x
, wp->
y
,

270 
wp
->
width
, wp->
height
);

275 
wp
->
chûdªn
)

276 
	`GsWpDe°royWödow
(
wp
->
chûdªn
);

281 
wp
->
evít˛õ¡s
) {

282 
e˝
 = 
wp
->
evít˛õ¡s
;

283 
wp
->
evít˛õ¡s
 = 
e˝
->
√xt
;

284 
	`‰ì
(
e˝
);

290 
¥evwp
 = 
wp
->
∑ª¡
->
chûdªn
;

291 i‡(
¥evwp
 =
wp
)

292 
wp
->
∑ª¡
->
chûdªn
 = wp->
siblögs
;

294 
¥evwp
->
siblögs
 !
wp
)

295 
¥evwp
 =Öªvwp->
siblögs
;

296 
¥evwp
->
siblögs
 = 
wp
->siblings;

298 
wp
->
siblögs
 = 
NULL
;

303 
¥evwp
 = 
li°wp
;

304 i‡(
¥evwp
 =
wp
)

305 
li°wp
 = 
wp
->
√xt
;

307 
¥evwp
->
√xt
 !
wp
)

308 
¥evwp
 =Öªvwp->
√xt
;

309 
¥evwp
->
√xt
 = 
wp
->next;

311 
wp
->
√xt
 = 
NULL
;

317 i‡(
wp
 =
˛ùwp
)

318 
˛ùwp
 = 
NULL
;

319 i‡(
wp
 =
gøbbuâ⁄wp
)

320 
gøbbuâ⁄wp
 = 
NULL
;

321 i‡(
wp
 =
ˇchewp
) {

322 
ˇchewödowid
 = 0;

323 
ˇchewp
 = 
NULL
;

325 i‡(
wp
 =
focuswp
) {

328 
focuswp
 = 
roŸwp
;

331 
	`GsCheckMou£Wödow
();

333 if(
wp
->
tôÀ
)

334 
	`‰ì
(
wp
->
tôÀ
);

335 i‡(
wp
->
˛ùªgi⁄
)

336 
	`GdDe°royRegi⁄
(
wp
->
˛ùªgi⁄
);

339 
keygøb_¥ev_√xt
 = &
li°_gøbbed_keys
;

340 
keygøb
 = 
li°_gøbbed_keys
;

341 
keygøb
 !
NULL
) {

342 i‡(
keygøb
->
wid
 =
wp
->
id
){

344 *
keygøb_¥ev_√xt
 = 
keygøb
->
√xt
;

345 
	`‰ì
(
keygøb
);

346 
keygøb
 = *
keygøb_¥ev_√xt
;

348 
keygøb_¥ev_√xt
 = &
keygøb
->
√xt
;

349 
keygøb
 = keygøb->
√xt
;

353 
	`‰ì
(
wp
);

354 
	}
}

369 
	$GsWpDøwBackgroundPixm≠
(
GR_WINDOW
 *
wp
, 
GR_PIXMAP
 *
pm
, 
GR_COORD
 
x
,

370 
GR_COORD
 
y
, 
GR_SIZE
 
width
, GR_SIZE 
height
)

372 
GR_SIZE
 
de°width
, 
de°height
, 
fûlwidth
, 
fûlheight
, 
pmwidth
, 
pmheight
;

373 
GR_COORD
 
‰omx
, 
‰omy
, 
de°x
, 
de°y
, 
pixm≠x
 = 0, 
pixm≠y
 = 0;

375 if(
wp
->
bgpixm≠Êags
 & (
GR_BACKGROUND_TOPLEFT
|
GR_BACKGROUND_STRETCH
)) {

376 
pixm≠x
 = 0;

377 
pixm≠y
 = 0;

378 } if(
wp
->
bgpixm≠Êags
 & 
GR_BACKGROUND_CENTER
) {

379 if(
pm
->
width
 >
wp
->widthË
pixm≠x
 = 0;

380 
pixm≠x
 = (
wp
->
width
 - 
pm
->width) / 2;

381 if(
pm
->
height
 >
wp
->heightË
pixm≠y
 = 0;

382 
pixm≠y
 = (
wp
->
height
 - 
pm
->height) / 2;

385 
	`GsWpTûeBackgroundPixm≠
(
wp
, 
pm
, 
x
, 
y
, 
width
, 
height
);

389 if(
pm
->
width
 > 
wp
->widthË
pmwidth
 = wp->width;

390 
pmwidth
 = 
pm
->
width
;

391 if(
pm
->
height
 > 
wp
->heightË
pmheight
 = wp->height;

392 
pmheight
 = 
pm
->
height
;

394 if(
x
 > 
pixm≠x
) {

395 
de°x
 = 
x
;

396 
‰omx
 = 
x
 - 
pixm≠x
;

397 
de°width
 = 
pixm≠x
 + 
pmwidth
 - 
x
;

399 
de°x
 = 
pixm≠x
;

400 
‰omx
 = 0;

401 
de°width
 = 
x
 + 
width
 - 
pixm≠x
;

404 if(
y
 > 
pixm≠y
) {

405 
de°y
 = 
y
;

406 
‰omy
 = 
y
 - 
pixm≠y
;

407 
de°height
 = 
pixm≠y
 + 
pmheight
 - 
de°y
;

409 
de°y
 = 
pixm≠y
;

410 
‰omy
 = 0;

411 
de°height
 = 
y
 + 
height
 - 
pixm≠y
;

414 if(
de°width
 > 0 && 
de°height
 > 0) {

415 i‡(
wp
->
bgpixm≠Êags
 & 
GR_BACKGROUND_STRETCH
) {

416 
	`GdSåëchBlô
(
wp
->
psd
, 
de°x
 + wp->
x
, 
de°y
 + wp->
y
,

417 
de°width
, 
de°height
, 
pm
->
psd
, 
‰omx
, 
‰omy
,

418 
pm
->
width
,Öm->
height
, 
MWROP_COPY
);

419 } 
	`GdBlô
(
wp
->
psd
, 
de°x
 + wp->
x
, 
de°y
 + wp->
y
, 
de°width
,

420 
de°height
, 
pm
->
psd
, 
‰omx
, 
‰omy
, 
MWROP_COPY
);

423 if(
wp
->
bgpixm≠Êags
 & (
GR_BACKGROUND_TRANS
|
GR_BACKGROUND_STRETCH
))

427 if(
x
 < 
pixm≠x
) {

428 
fûlwidth
 = 
pixm≠x
 - 
x
;

429 if(
fûlwidth
 > 
width
) fillwidth = width;

430 
fûlheight
 = 
height
;

431 
	`GdFûlRe˘
(
wp
->
psd
, wp->
x
 + x, wp->
y
 + y, 
fûlwidth
,
fûlheight
);

433 if((
x
 + 
width
Ë> (
pixm≠x
 + 
pmwidth
)) {

434 
fûlwidth
 = (
x
 + 
width
Ë- (
pixm≠x
 + 
pmwidth
);

435 if(
fûlwidth
 > 
width
) fillwidth = width;

436 
fûlheight
 = 
height
;

437 if(
x
 < (
pixm≠x
 + 
pmwidth
)Ë
de°x
 =Öixm≠x +Ömwidth + 
wp
->x;

438 
de°x
 = 
x
 + 
wp
->x;

439 
	`GdFûlRe˘
(
wp
->
psd
, 
de°x
, wp->
y
 + y, 
fûlwidth
, 
fûlheight
);

441 if(
y
 < 
pixm≠y
) {

442 
fûlheight
 = 
pixm≠y
 - 
y
;

443 if(
fûlheight
 > 
height
) fillheight = height;

444 if(
x
 < 
pixm≠x
Ë
de°x
 =Öixm≠x + 
wp
->x;

445 
de°x
 = 
x
 + 
wp
->x;

446 if((
x
 + 
width
Ë> (
pixm≠x
 + 
pmwidth
))

447 
fûlwidth
 = 
pixm≠x
 + 
pmwidth
 - 
de°x
;

448 
fûlwidth
 = 
x
 + 
width
 - 
de°x
;

449 if((
fûlwidth
 > 0Ë&& (
fûlheight
 > 0)) {

450 
	`GdFûlRe˘
(
wp
->
psd
, 
de°x
, wp->
y
 + y, 
fûlwidth
,

451 
fûlheight
);

454 if((
y
 + 
height
Ë> (
pixm≠y
 + 
pmheight
)) {

455 
fûlheight
 = (
y
 + 
height
Ë- (
pixm≠y
 + 
pmheight
);

456 if(
fûlheight
 > 
height
) fillheight = height;

457 if(
x
 < 
pixm≠x
Ë
de°x
 =Öixm≠x + 
wp
->x;

458 
de°x
 = 
x
 + 
wp
->x;

459 if(
y
 < (
pixm≠y
 + 
pmheight
)Ë
de°y
 =Öixm≠y +Ömheighà+ 
wp
->y;

460 
de°y
 = 
y
 + 
wp
->y;

462 if((
x
 + 
width
Ë> (
pixm≠x
 + 
pmwidth
))

463 
fûlwidth
 = 
pixm≠x
 + 
pmwidth
 - 
de°x
;

464 
fûlwidth
 = 
x
 + 
width
 - 
de°x
;

465 if((
fûlwidth
 > 0Ë&& (
fûlheight
 > 0)) {

466 
	`GdFûlRe˘
(
wp
->
psd
, 
de°x
, 
de°y
, 
fûlwidth
,
fûlheight
);

469 
	}
}

475 
	$GsWpTûeBackgroundPixm≠
(
GR_WINDOW
 *
wp
, 
GR_PIXMAP
 *
pm
, 
GR_COORD
 
x
, GR_COORD 
y
,

476 
GR_SIZE
 
width
, GR_SIZE 
height
)

478 
GR_COORD
 
tûex
 = 0, 
tûey
 = 0, 
‰omx
, 
‰omy
, 
cx
, 
cy
;

479 
GR_SIZE
 
de°width
, 
de°height
, 
pmwidth
, 
pmheight
, 
cwidth
, 
cheight
;

481 if(
pm
->
width
 > 
wp
->widthË
pmwidth
 = wp->width;

482 
pmwidth
 = 
pm
->
width
;

483 if(
pm
->
height
 > 
wp
->heightË
pmheight
 = wp->height;

484 
pmheight
 = 
pm
->
height
;

486 ;
tûey
 < 
wp
->
height
;Åûey +
pmheight
, 
tûex
 = 0) {

487 if(
tûey
 > (
y
 + 
height
)) ;

488 if(
y
 > (
tûey
 + 
pmheight
)) ;

489 if((
tûey
 + 
pmheight
Ë> 
wp
->
height
)

490 
de°height
 = 
wp
->
height
 - 
tûey
;

491 
de°height
 = 
pmheight
;

492 ;
tûex
 < 
wp
->
width
;Åûex +
pmwidth
) {

493 if(
tûex
 > (
x
 + 
width
)) ;

494 if(
x
 > (
tûex
 + 
pmwidth
)) ;

495 if((
tûex
 + 
pmwidth
Ë> 
wp
->
width
)

496 
de°width
 = 
wp
->
width
 - 
tûex
;

497 
de°width
 = 
pmwidth
;

499 if((
tûex
 >
x
Ë&& (—ûex + 
de°width
)<=(x + 
width
))) {

500 
‰omx
 = 0;

501 
cx
 = 
tûex
 + 
wp
->
x
;

502 
cwidth
 = 
de°width
;

504 if(
x
 > 
tûex
) {

505 
‰omx
 = 
x
 - 
tûex
;

506 
cwidth
 = 
de°width
 - 
‰omx
;

508 
‰omx
 = 0;

509 
cwidth
 = 
x
 + 
width
 - 
tûex
;

511 if(
cwidth
 > 
width
) cwidth = width;

512 if(
cwidth
 > 
de°width
) cwidth = destwidth;

513 
cx
 = 
wp
->
x
 + 
tûex
 + 
‰omx
;

516 if((
tûey
 >
y
)&&(—ûey + 
de°height
)<=(y + 
height
))) {

517 
‰omy
 = 0;

518 
cy
 = 
tûey
 + 
wp
->
y
;

519 
cheight
 = 
de°height
;

521 if(
y
 > 
tûey
) {

522 
‰omy
 = 
y
 - 
tûey
;

523 
cheight
 = 
de°height
 - 
‰omy
;

525 
‰omy
 = 0;

526 
cheight
 = 
y
 + 
height
 - 
tûey
;

528 if(
cwidth
 > 
width
) cwidth = width;

529 if(
cheight
 > 
de°height
) cheight = destheight;

530 
cy
 = 
wp
->
y
 + 
tûey
 + 
‰omy
;

533 if((
cwidth
 > 0Ë&& (
cheight
 > 0)) {

534 
	`GdBlô
(
wp
->
psd
, 
cx
, 
cy
, 
cwidth
, 
cheight
,

535 
pm
->
psd
, 
‰omx
, 
‰omy
, 
MWROP_COPY
);

539 
	}
}

548 
	$GsWpCÀ¨Wödow
(
GR_WINDOW
 *
wp
, 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
width
,

549 
GR_SIZE
 
height
, 
GR_BOOL
 
expo£Êag
)

551 i‡(!
wp
->
ªÆized
 || !wp->
ouçut
)

556 i‡(
x
 < 0) {

557 
width
 +
x
;

558 
x
 = 0;

560 i‡(
y
 < 0) {

561 
height
 +
y
;

562 
y
 = 0;

564 i‡(
x
 + 
width
 > 
wp
->width)

565 
width
 = 
wp
->width - 
x
;

566 i‡(
y
 + 
height
 > 
wp
->height)

567 
height
 = 
wp
->heighà- 
y
;

573 i‡((
x
 >
wp
->
width
Ë|| (
y
 >wp->
height
) || (width <= 0) ||

574 (
height
 <= 0))

582 
	`GsSëClùWödow
(
wp
, 
NULL
, 0);

583 
curg˝
 = 
NULL
;

585 
	`GdSëFûlMode
(
GR_FILL_SOLID
);

587 i‡(!(
wp
->
¥›s
 & 
GR_WM_PROPS_NOBACKGROUND
)) {

588 
	`GdSëMode
(
GR_MODE_COPY
);

589 
	`GdSëF‹egroundCﬁ‹
(
wp
->
psd
, wp->
background
);

590 i‡(
wp
->
bgpixm≠
) {

591 
	`GsWpDøwBackgroundPixm≠
(
wp
, wp->
bgpixm≠
, 
x
, 
y
,

592 
width
, 
height
);

594 
	`GdFûlRe˘
(
wp
->
psd
, wp->
x
 + x, wp->
y
 + y, 
width
,
height
);

601 i‡(
expo£Êag
)

602 
	`GsDñivîExposuªEvít
(
wp
, 
x
, 
y
, 
width
, 
height
);

603 
	}
}

612 
	$GsExpo£Aªa
(
GR_WINDOW
 *
wp
, 
GR_COORD
 
roŸx
, GR_COORD 
roŸy
, 
GR_SIZE
 
width
,

613 
GR_SIZE
 
height
, 
GR_WINDOW
 *
°›wp
)

615 i‡(!
wp
->
ªÆized
 || w∞=
°›wp
 || !wp->
ouçut
)

622 i‡((
roŸx
 >
wp
->
x
 + wp->
width
 + wp->
b‹dîsize
) ||

623 (
roŸy
 >
wp
->
y
 + wp->
height
 + wp->
b‹dîsize
) ||

624 (
roŸx
 + 
width
 <
wp
->
x
 - wp->
b‹dîsize
) ||

625 (
roŸy
 + 
height
 <
wp
->
y
 - wp->
b‹dîsize
))

632 i‡((
roŸx
 < 
wp
->
x
Ë|| (
roŸy
 < wp->
y
) ||

633 (
roŸx
 + 
width
 > 
wp
->
x
 + wp->width) ||

634 (
roŸy
 + 
height
 > 
wp
->
y
 + wp->height))

635 
	`GsDøwB‹dî
(
wp
);

641 
	`GsWpCÀ¨Wödow
(
wp
, 
roŸx
 - wp->
x
, 
roŸy
 - wp->
y
,

642 
width
, 
height
, 
GR_TRUE
);

647 
wp
 = wp->
chûdªn
; wp; w∞wp->
siblögs
)

648 
	`GsExpo£Aªa
(
wp
, 
roŸx
, 
roŸy
, 
width
, 
height
, 
°›wp
);

649 
	}
}

657 
	$GsDøwB‹dî
(
GR_WINDOW
 *
wp
)

659 
GR_COORD
 
lmöx
;

660 
GR_COORD
 
rmöx
;

661 
GR_COORD
 
tmöy
;

662 
GR_COORD
 
bmöy
;

663 
GR_COORD
 
t›y
;

664 
GR_COORD
 
bŸy
;

665 
GR_SIZE
 
width
;

666 
GR_SIZE
 
height
;

667 
GR_SIZE
 
bs
;

669 
bs
 = 
wp
->
b‹dîsize
;

670 i‡(
bs
 <= 0)

673 
width
 = 
wp
->width;

674 
height
 = 
wp
->height;

675 
lmöx
 = 
wp
->
x
 - 
bs
;

676 
rmöx
 = 
wp
->
x
 + 
width
;

677 
tmöy
 = 
wp
->
y
 - 
bs
;

678 
bmöy
 = 
wp
->
y
 + 
height
;

679 
t›y
 = 
wp
->
y
;

680 
bŸy
 = 
bmöy
 - 1;

682 
wp
->
x
 -
bs
;

683 
wp
->
y
 -
bs
;

684 
wp
->
width
 +(
bs
 * 2);

685 
wp
->
height
 +(
bs
 * 2);

686 
wp
->
b‹dîsize
 = 0;

688 
˛ùwp
 = 
NULL
;

690 
	`GsSëClùWödow
(
wp
, 
NULL
, 0);

691 
curg˝
 = 
NULL
;

692 
	`GdSëMode
(
GR_MODE_COPY
);

693 
	`GdSëF‹egroundCﬁ‹
(
wp
->
psd
, wp->
b‹dîcﬁ‹
);

694 
	`GdSëDash
(0, 0);

695 
	`GdSëFûlMode
(
GR_FILL_SOLID
);

697 i‡(
bs
 == 1) {

698 
	`GdLöe
(
wp
->
psd
, 
lmöx
, 
tmöy
, 
rmöx
,Åmöy, 
TRUE
);

699 
	`GdLöe
(
wp
->
psd
, 
lmöx
, 
bmöy
, 
rmöx
, bmöy, 
TRUE
);

700 
	`GdLöe
(
wp
->
psd
, 
lmöx
, 
t›y
,Ümöx, 
bŸy
, 
TRUE
);

701 
	`GdLöe
(
wp
->
psd
, 
rmöx
, 
t›y
,Ñmöx, 
bŸy
, 
TRUE
);

703 
	`GdFûlRe˘
(
wp
->
psd
, 
lmöx
, 
tmöy
, 
width
 + 
bs
 * 2, bs);

704 
	`GdFûlRe˘
(
wp
->
psd
, 
lmöx
, 
bmöy
, 
width
 + 
bs
 * 2, bs);

705 
	`GdFûlRe˘
(
wp
->
psd
, 
lmöx
, 
t›y
, 
bs
, 
height
);

706 
	`GdFûlRe˘
(
wp
->
psd
, 
rmöx
, 
t›y
, 
bs
, 
height
);

713 
wp
->
x
 +
bs
;

714 
wp
->
y
 +
bs
;

715 
wp
->
width
 -(
bs
 * 2);

716 
wp
->
height
 -(
bs
 * 2);

717 
wp
->
b‹dîsize
 = 
bs
;

718 
˛ùwp
 = 
NULL
;

719 
	}
}

724 
GR_BOOL


725 
	$GsCheckOvîœp
(
GR_WINDOW
 *
t›wp
, GR_WINDOW *
bŸwp
)

727 
GR_COORD
 
möx1
;

728 
GR_COORD
 
möy1
;

729 
GR_COORD
 
maxx1
;

730 
GR_COORD
 
maxy1
;

731 
GR_COORD
 
möx2
;

732 
GR_COORD
 
möy2
;

733 
GR_COORD
 
maxx2
;

734 
GR_COORD
 
maxy2
;

735 
GR_SIZE
 
bs
;

737 i‡(!
t›wp
->
ouçut
 || !t›wp->
ªÆized
 || !
bŸwp
->realized)

738  
GR_FALSE
;

740 
bs
 = 
t›wp
->
b‹dîsize
;

741 
möx1
 = 
t›wp
->
x
 - 
bs
;

742 
möy1
 = 
t›wp
->
y
 - 
bs
;

743 
maxx1
 = 
t›wp
->
x
 +Å›wp->
width
 + 
bs
 - 1;

744 
maxy1
 = 
t›wp
->
y
 +Å›wp->
height
 + 
bs
 - 1;

746 
bs
 = 
bŸwp
->
b‹dîsize
;

747 
möx2
 = 
bŸwp
->
x
 - 
bs
;

748 
möy2
 = 
bŸwp
->
y
 - 
bs
;

749 
maxx2
 = 
bŸwp
->
x
 + bŸwp->
width
 + 
bs
 - 1;

750 
maxy2
 = 
bŸwp
->
y
 + bŸwp->
height
 + 
bs
 - 1;

752 i‡((
möx1
 > 
maxx2
Ë|| (
möx2
 > 
maxx1
Ë|| (
möy1
 > 
maxy2
)

753 || (
möy2
 > 
maxy1
))

754  
GR_FALSE
;

756  
GR_TRUE
;

757 
	}
}

763 
GR_WINDOW
 *

764 
	$GsFödWödow
(
GR_WINDOW_ID
 
id
)

766 
GR_WINDOW
 *
wp
;

771 i‡(
id
 =
GR_ROOT_WINDOW_ID
)

772  
roŸwp
;

774 i‡((
id
 =
ˇchewödowid
) && id)

775  
ˇchewp
;

780 
wp
 = 
li°wp
; wp; w∞wp->
√xt
) {

781 i‡(
wp
->
id
 == id) {

782 
ˇchewödowid
 = 
id
;

783 
ˇchewp
 = 
wp
;

784  
wp
;

788  
NULL
;

789 
	}
}

797 
GR_PIXMAP
 *

798 
	$GsFödPixm≠
(
GR_WINDOW_ID
 
id
)

800 
GR_PIXMAP
 *
µ
;

802 i‡((
id
 =
ˇchïixm≠id
) && id)

803  
ˇchïp
;

808 
µ
 = 
li°µ
;Öp;Ö∞µ->
√xt
) {

809 i‡(
µ
->
id
 == id) {

810 
ˇchïixm≠id
 = 
id
;

811 
ˇchïp
 = 
µ
;

812  
µ
;

816  
NULL
;

817 
	}
}

825 
GR_GC
 *

826 
	$GsFödGC
(
GR_GC_ID
 
gcid
)

828 
GR_GC
 *
g˝
;

833 i‡((
gcid
 =
ˇchegcid
) && gcid)

834  
ˇcheg˝
;

839 
g˝
 = 
li°g˝
; g˝; g˝ = g˝->
√xt
) {

840 i‡(
g˝
->
id
 =
gcid
) {

841 
ˇchegcid
 = 
gcid
;

842 
ˇcheg˝
 = 
g˝
;

843  
g˝
;

847 
	`GsEº‹
(
GR_ERROR_BAD_GC_ID
, 
gcid
);

849  
NULL
;

850 
	}
}

853 
GR_REGION
 *

854 
	$GsFödRegi⁄
(
GR_REGION_ID
 
ªgi⁄id
)

856 
GR_REGION
 *
ªgi⁄p
;

858 
ªgi⁄p
 = 
li°ªgi⁄p
;Ñegi⁄p;Ñegi⁄∞ªgi⁄p->
√xt
) {

859 i‡(
ªgi⁄p
->
id
 =
ªgi⁄id
) {

860  
ªgi⁄p
;

864  
NULL
;

865 
	}
}

868 
GR_FONT
 *

869 
	$GsFödF⁄t
(
GR_FONT_ID
 
f⁄tid
)

871 
GR_FONT
 *
f⁄ç
;

873 
f⁄ç
 = 
li°f⁄ç
; f⁄ç; f⁄ç = f⁄ç->
√xt
) {

874 i‡(
f⁄ç
->
id
 =
f⁄tid
)

875  
f⁄ç
;

877  
NULL
;

878 
	}
}

881 
GR_CURSOR
 *

882 
	$GsFödCurs‹
(
GR_CURSOR_ID
 
curs‹id
)

884 
GR_CURSOR
 *
curs‹p
;

886 
curs‹p
 = 
li°curs‹p
; curs‹p; curs‹∞curs‹p->
√xt
) {

887 i‡(
curs‹p
->
id
 =
curs‹id
)

888  
curs‹p
;

890  
NULL
;

891 
	}
}

893 #i‡
MW_FEATURE_TIMERS


894 
GR_TIMER
 *

895 
	$GsFödTimî
 (
GR_TIMER_ID
 
timî_id
)

897 
GR_TIMER
 *
timî
;

902 i‡((
timî_id
 =
ˇche_timî_id
) &&Åimer_id)

903  
ˇche_timî
;

908 
timî
 = 
li°_timî
;Åimî !
NULL
;Åimî =Åimî->
√xt
)

910 i‡(
timî
->
id
 =
timî_id
)

912 
ˇche_timî_id
 = 
timî_id
;

913 
ˇche_timî
 = 
timî
;

914  
timî
;

917  
NULL
;

918 
	}
}

928 
GR_DRAW_TYPE


929 
	$GsPª∑ªDøwög
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gcid
, 
GR_DRAWABLE
 **
ªtdp
)

931 
GR_WINDOW
 *
wp
;

932 
GR_PIXMAP
 *
µ
;

933 
GR_GC
 *
g˝
;

934 
GR_FONT
 *
f⁄ç
;

935 
GR_REGION
 *
ªgi⁄p
;

936 
MWCLIPREGION
 *
ªg
;

937 
PMWFONT
 
pf
;

939 *
ªtdp
 = 
NULL
;

941 
g˝
 = 
	`GsFödGC
(
gcid
);

942 i‡(
g˝
 =
NULL
)

943  
GR_DRAW_TYPE_NONE
;

949 i‡(
g˝
 !
curg˝
) {

950 
curg˝
 = 
g˝
;

951 
g˝
->
ch™ged
 = 
GR_TRUE
;

957 
µ
 = 
NULL
;

958 
wp
 = 
	`GsFödWödow
(
id
);

959 i‡(
wp
 =
NULL
) {

960 
µ
 = 
	`GsFödPixm≠
(
id
);

961 i‡(
µ
 =
NULL
)

962  
GR_DRAW_TYPE_NONE
;

964 #i‡
DYNAMICREGIONS


965 
ªg
 = 
	`GdAŒocRe˘Regi⁄
(0, 0, 
µ
->
psd
->
xvúåes
,

966 
µ
->
psd
->
yvúåes
);

968 i‡(
g˝
->
ªgi⁄id
) {

969 
ªgi⁄p
 = 
	`GsFödRegi⁄
(
g˝
->
ªgi⁄id
);

970 i‡(
ªgi⁄p
)

971 
	`GdI¡î£˘Regi⁄
(
ªg
,Ñeg, 
ªgi⁄p
->
rgn
);

973 
	`GdSëClùRegi⁄
(
µ
->
psd
, 
ªg
);

976 
MWCLIPRECT
 
˛ùª˘
;

978 
˛ùª˘
.
x
 = 0;

979 
˛ùª˘
.
y
 = 0;

980 
˛ùª˘
.
width
 = 
µ
->
psd
->
xvúåes
;

981 
˛ùª˘
.
height
 = 
µ
->
psd
->
yvúåes
;

982 
	`GdSëClùRe˘s
(
µ
->
psd
, 1, &
˛ùª˘
);

986 
˛ùwp
 = 
NULL
;

989 i‡(!
wp
->
ouçut
) {

990 
	`GsEº‹
(
GR_ERROR_INPUT_ONLY_WINDOW
, 
id
);

991  
GR_DRAW_TYPE_NONE
;

994 i‡(!
wp
->
ªÆized
)

995  
GR_DRAW_TYPE_NONE
;

1001 i‡(
wp
 !
˛ùwp
 || 
g˝
->
ch™ged
) {

1003 i‡(
g˝
->
ªgi⁄id
)

1004 
ªgi⁄p
 = 
	`GsFödRegi⁄
(
g˝
->
ªgi⁄id
);

1005 
ªgi⁄p
 = 
NULL
;

1010 i‡(
ªgi⁄p
 && (
g˝
->
xoff
 || g˝->
yoff
)) {

1011 
MWCLIPREGION
 *
loˇl
 = 
	`GdAŒocRegi⁄
();

1013 
	`GdC›yRegi⁄
(
loˇl
, 
ªgi⁄p
->
rgn
);

1014 
	`GdOff£tRegi⁄
(
loˇl
, 
g˝
->
xoff
, g˝->
yoff
);

1016 
	`GsSëClùWödow
(
wp
, 
loˇl
,

1017 
g˝
->
mode
 & ~
GR_MODE_DRAWMASK
);

1019 
	`GdDe°royRegi⁄
(
loˇl
);

1021 
	`GsSëClùWödow
(
wp
, 
ªgi⁄p
?Ñegi⁄p->
rgn
: 
NULL
,

1022 
g˝
->
mode
 & ~
GR_MODE_DRAWMASK
);

1031 i‡(
g˝
->
ch™ged
) {

1032 
PSD
 
psd
 = (
wp
 ? wp->psd : 
µ
->psd);

1033 
mask
;

1034 
cou¡
;

1036 i‡(
g˝
->
löe°yÀ
 =
GR_LINE_SOLID
) {

1037 
mask
 = 0;

1038 
cou¡
 = 0;

1040 
mask
 = 
g˝
->
dashmask
;

1041 
cou¡
 = 
g˝
->
dashcou¡
;

1044 i‡(
g˝
->
fgi•ixñvÆ
)

1045 
	`GdSëF‹egroundPixñVÆ
(
psd
, 
g˝
->
f‹eground
);

1047 
	`GdSëF‹egroundCﬁ‹
(
psd
, 
g˝
->
f‹eground
);

1049 i‡(
g˝
->
bgi•ixñvÆ
)

1050 
	`GdSëBackgroundPixñVÆ
(
psd
, 
g˝
->
background
);

1052 
	`GdSëBackgroundCﬁ‹
(
psd
, 
g˝
->
background
);

1054 
	`GdSëMode
(
g˝
->
mode
 & 
GR_MODE_DRAWMASK
);

1055 
	`GdSëU£Background
(
g˝
->
u£background
);

1057 
	`GdSëDash
(&
mask
, &
cou¡
);

1058 
	`GdSëFûlMode
(
g˝
->
fûlmode
);

1059 
	`GdSëTSOff£t
(
g˝
->
ts_off£t
.
x
, g˝->ts_off£t.
y
);

1061 
g˝
->
fûlmode
) {

1062 
GR_FILL_STIPPLE
:

1063 
GR_FILL_OPAQUE_STIPPLE
:

1064 
	`GdSëStù∂eBôm≠
(
g˝
->
°ù∂e
.
bôm≠
,

1065 
g˝
->
°ù∂e
.
width
, g˝->°ù∂e.
height
);

1068 
GR_FILL_TILE
:

1069 
	`GdSëTûePixm≠
(
g˝
->
tûe
.
psd
,

1070 
g˝
->
tûe
.
width
, g˝->tûe.
height
);

1074 
f⁄ç
 = 
	`GsFödF⁄t
(
g˝
->
f⁄tid
);

1075 
pf
 = 
f⁄ç
? f⁄ç->
pf⁄t
: 
°df⁄t
;

1076 
	`GdSëF⁄t
(
pf
);

1077 
g˝
->
ch™ged
 = 
GR_FALSE
;

1080 *
ªtdp
 = 
wp
? (
GR_DRAWABLE
 *)wp: (GR_DRAWABLE *)
µ
;

1081  
wp
? 
GR_DRAW_TYPE_WINDOW
: 
GR_DRAW_TYPE_PIXMAP
;

1082 
	}
}

1090 
GR_WINDOW
 *

1091 
	$GsPª∑ªWödow
(
GR_WINDOW_ID
 
wid
)

1093 
GR_WINDOW
 *
wp
;

1095 
wp
 = 
	`GsFödWödow
(
wid
);

1096 i‡(
wp
 =
NULL
)

1097  
NULL
;

1099 i‡(!
wp
->
ouçut
) {

1100 
	`GsEº‹
(
GR_ERROR_INPUT_ONLY_WINDOW
, 
wid
);

1101  
NULL
;

1104 i‡(!
wp
->
ªÆized
)

1105  
NULL
;

1107 i‡(
wp
 !
˛ùwp
) {

1109 
	`GsSëClùWödow
(
wp
, 
NULL
, 0);

1112  
wp
;

1113 
	}
}

1121 
GR_WINDOW
 *

1122 
	$GsFödVisibÀWödow
(
GR_COORD
 
x
, GR_COORD 
y
)

1124 
GR_WINDOW
 *
wp
;

1125 
GR_WINDOW
 *
ªtwp
;

1127 
wp
 = 
roŸwp
;

1128 
ªtwp
 = 
wp
;

1129 
wp
) {

1130 i‡(
wp
->
ªÆized
 &&

1131 ((!
wp
->
˛ùªgi⁄
 && (wp->
x
 <xË&& (wp->
y
 <= y) &&

1132 (
wp
->
x
 + wp->
width
 > xË&& (wp->
y
 + wp->
height
 > y)) ||

1133 (
wp
->
˛ùªgi⁄
 && 
	`GdPtInRegi⁄
(wp->˛ùªgi⁄, 
x
 - wp->x, 
y
 - wp->y)))) {

1134 
ªtwp
 = 
wp
;

1135 
wp
 = wp->
chûdªn
;

1138 
wp
 = wp->
siblögs
;

1140  
ªtwp
;

1141 
	}
}

1148 
	$GsCheckCurs‹
()

1150 
GR_WINDOW
 *
wp
;

1151 
GR_CURSOR
 *
˝
;

1158 
wp
 = 
gøbbuâ⁄wp
;

1159 i‡(
wp
 =
NULL
)

1160 
wp
 = 
mou£wp
;

1162 
˝
 = 
	`GsFödCurs‹
(
wp
->
curs‹id
);

1163 i‡(!
˝
)

1164 
˝
 = 
°dcurs‹
;

1165 i‡(
˝
 =
curcurs‹
)

1171 
curcurs‹
 = 
˝
;

1172 
	`GdMoveCurs‹
(
curs‹x
 - 
˝
->
curs‹
.
hŸx
, 
curs‹y
 - cp->curs‹.
hŸy
);

1173 
	`GdSëCurs‹
(&
˝
->
curs‹
);

1174 
	}
}

1183 
	$GsCheckMou£Wödow
()

1185 
GR_WINDOW
 *
wp
;

1187 
wp
 = 
gøbbuâ⁄wp
;

1188 i‡(
wp
 =
NULL
)

1189 
wp
 = 
	`GsFödVisibÀWödow
(
curs‹x
, 
curs‹y
);

1190 i‡(
wp
 =
mou£wp
)

1193 
	`GsDñivîGíîÆEvít
(
mou£wp
, 
GR_EVENT_TYPE_MOUSE_EXIT
, 
NULL
);

1195 
mou£wp
 = 
wp
;

1197 
	`GsDñivîGíîÆEvít
(
wp
, 
GR_EVENT_TYPE_MOUSE_ENTER
, 
NULL
);

1198 
	}
}

1208 
	$GsCheckFocusWödow
()

1210 
GR_WINDOW
 *
wp
;

1211 
GR_EVENT_CLIENT
 *
e˝
;

1213 i‡(
focusfixed
)

1220 
wp
 = 
mou£wp
; ;w∞wp->
∑ª¡
) {

1221 i‡(
wp
->
¥›s
 & 
GR_WM_PROPS_NOFOCUS
)

1223 
e˝
 = 
wp
->
evít˛õ¡s
;É˝;É˝ =É˝->
√xt
) {

1224 i‡(
e˝
->
evítmask
 & 
GR_EVENT_MASK_KEY_DOWN
) {

1225 
	`GsWpSëFocus
(
wp
);

1229 i‡((
wp
 =
roŸwp
Ë|| (wp->
n›r›mask
 & 
GR_EVENT_MASK_KEY_DOWN
)) {

1230 
	`GsWpSëFocus
(
roŸwp
);

1234 
	}
}

1238 
	$GsWpNŸifyA˘iv©e
(
GR_WINDOW
 *
wp
)

1240 
GR_WINDOW
 *
pwp
;

1242 
pwp
=
wp
;Öwp->
∑ª¡
;Öwp=pwp->parent)

1243 i‡(
pwp
->
∑ª¡
->
id
 =
GR_ROOT_WINDOW_ID
)

1245 i‡(
pwp
->
id
 !
GR_ROOT_WINDOW_ID
)

1246 
	`GsDñivîUpd©eEvít
(
pwp
, 
GR_UPDATE_ACTIVATE
, 0, 0, 0, 0);

1247 
	}
}

1254 
	$GsWpSëFocus
(
GR_WINDOW
 *
wp
)

1256 
GR_WINDOW
 *
ﬁdfocus
;

1258 i‡(
wp
 =
focuswp
)

1261 
	`GsDñivîGíîÆEvít
(
focuswp
, 
GR_EVENT_TYPE_FOCUS_OUT
, 
wp
);

1262 
	`GsWpNŸifyA˘iv©e
(
focuswp
);

1264 
ﬁdfocus
 = 
focuswp
;

1265 
focuswp
 = 
wp
;

1267 
	`GsDñivîGíîÆEvít
(
wp
, 
GR_EVENT_TYPE_FOCUS_IN
, 
ﬁdfocus
);

1268 
	`GsWpNŸifyA˘iv©e
(
focuswp
);

1269 
	}
}

1275 
	$GsSëP‹åaôMode
(
mode
)

1277 
	`GdSëP‹åaôMode
(&
s¸dev
, 
mode
);

1278 
	`GdRe°ri˘Mou£
(0, 0, 
s¸dev
.
xvúåes
 - 1, s¸dev.
yvúåes
 - 1);

1281 
˛ùwp
 = 
NULL
;

1282 
roŸwp
->
width
 = 
s¸dev
.
xvúåes
;

1283 
roŸwp
->
height
 = 
s¸dev
.
yvúåes
;

1286 
	`GsDñivîP‹åaôCh™gedEvít
();

1289 
	`GsRedøwS¸ìn
();

1290 
	}
}

1297 
	$GsSëP‹åaôModeFromXY
(
GR_COORD
 
roŸx
, GR_COORD 
roŸy
)

1299 
√wmode
;

1301 i‡(
roŸx
 == 0) {

1303 
s¸dev
.
p‹åaô
) {

1304 
MWPORTRAIT_NONE
:

1306 
√wmode
 = 
MWPORTRAIT_LEFT
;

1308 
MWPORTRAIT_LEFT
:

1309 
√wmode
 = 
MWPORTRAIT_DOWN
;

1311 
MWPORTRAIT_DOWN
:

1312 
√wmode
 = 
MWPORTRAIT_RIGHT
;

1314 
MWPORTRAIT_RIGHT
:

1315 
√wmode
 = 
MWPORTRAIT_NONE
;

1318 
	`GsSëP‹åaôMode
(
√wmode
);

1319 
	`GrMoveCurs‹
(5, 
roŸy
);

1320 
	`GdMoveMou£
(5, 
roŸy
);

1321 } i‡(
roŸx
 =
s¸dev
.
xvúåes
-1) {

1323 
s¸dev
.
p‹åaô
) {

1324 
MWPORTRAIT_NONE
:

1326 
√wmode
 = 
MWPORTRAIT_RIGHT
;

1328 
MWPORTRAIT_LEFT
:

1329 
√wmode
 = 
MWPORTRAIT_NONE
;

1331 
MWPORTRAIT_DOWN
:

1332 
√wmode
 = 
MWPORTRAIT_LEFT
;

1334 
MWPORTRAIT_RIGHT
:

1335 
√wmode
 = 
MWPORTRAIT_DOWN
;

1338 
	`GsSëP‹åaôMode
(
√wmode
);

1339 
	`GrMoveCurs‹
(
s¸dev
.
xvúåes
-5, 
roŸy
);

1340 
	`GdMoveMou£
(
s¸dev
.
xvúåes
-5, 
roŸy
);

1342 
	}
}

	@obj/fonts/X6x13.c

2 
	~"devi˚.h
"

19 
MWIMAGEBITS
 
	g_X6x13_bôs
[] = {

6967 
	g_X6x13_off£t
[] = {

7227 
MWCFONT
 
	gf⁄t_X6x13
 = {

7234 
_X6x13_bôs
,

7235 
_X6x13_off£t
,

7238 (
_X6x13_bôs
)/(
MWIMAGEBITS
),

	@obj/mwin/bmp/car8.c

2 
	~"devi˚.h
"

6 
MWPALENTRY
 
	g∑Àâe
[256] = {

7 
RGBDEF
( 0, 0, 0 ),

8 
RGBDEF
( 165, 0, 0 ),

9 
RGBDEF
( 132, 0, 8 ),

10 
RGBDEF
( 140, 0, 8 ),

11 
RGBDEF
( 16, 16, 16 ),

12 
RGBDEF
( 24, 16, 16 ),

13 
RGBDEF
( 41, 16, 16 ),

14 
RGBDEF
( 49, 0, 16 ),

15 
RGBDEF
( 66, 8, 16 ),

16 
RGBDEF
( 90, 8, 16 ),

17 
RGBDEF
( 16, 16, 24 ),

18 
RGBDEF
( 16, 24, 24 ),

19 
RGBDEF
( 24, 24, 24 ),

20 
RGBDEF
( 49, 16, 24 ),

21 
RGBDEF
( 74, 24, 24 ),

22 
RGBDEF
( 99, 24, 24 ),

23 
RGBDEF
( 132, 8, 24 ),

24 
RGBDEF
( 16, 24, 33 ),

25 
RGBDEF
( 41, 41, 33 ),

26 
RGBDEF
( 49, 33, 33 ),

27 
RGBDEF
( 74, 33, 33 ),

28 
RGBDEF
( 99, 107, 33 ),

29 
RGBDEF
( 107, 24, 33 ),

30 
RGBDEF
( 115, 33, 33 ),

31 
RGBDEF
( 132, 24, 33 ),

32 
RGBDEF
( 140, 16, 33 ),

33 
RGBDEF
( 156, 8, 33 ),

34 
RGBDEF
( 156, 16, 33 ),

35 
RGBDEF
( 33, 33, 41 ),

36 
RGBDEF
( 41, 41, 41 ),

37 
RGBDEF
( 107, 41, 41 ),

38 
RGBDEF
( 140, 33, 41 ),

39 
RGBDEF
( 33, 41, 49 ),

40 
RGBDEF
( 33, 49, 49 ),

41 
RGBDEF
( 41, 49, 49 ),

42 
RGBDEF
( 74, 49, 49 ),

43 
RGBDEF
( 140, 49, 49 ),

44 
RGBDEF
( 148, 140, 49 ),

45 
RGBDEF
( 148, 148, 49 ),

46 
RGBDEF
( 49, 57, 57 ),

47 
RGBDEF
( 49, 66, 57 ),

48 
RGBDEF
( 90, 99, 57 ),

49 
RGBDEF
( 107, 115, 57 ),

50 
RGBDEF
( 132, 107, 57 ),

51 
RGBDEF
( 49, 66, 66 ),

52 
RGBDEF
( 57, 66, 66 ),

53 
RGBDEF
( 90, 66, 66 ),

54 
RGBDEF
( 123, 66, 66 ),

55 
RGBDEF
( 140, 66, 66 ),

56 
RGBDEF
( 66, 74, 74 ),

57 
RGBDEF
( 74, 82, 74 ),

58 
RGBDEF
( 90, 74, 74 ),

59 
RGBDEF
( 140, 148, 74 ),

60 
RGBDEF
( 156, 165, 74 ),

61 
RGBDEF
( 74, 82, 82 ),

62 
RGBDEF
( 74, 90, 82 ),

63 
RGBDEF
( 115, 99, 82 ),

64 
RGBDEF
( 123, 82, 82 ),

65 
RGBDEF
( 140, 74, 82 ),

66 
RGBDEF
( 57, 82, 90 ),

67 
RGBDEF
( 66, 82, 90 ),

68 
RGBDEF
( 66, 90, 90 ),

69 
RGBDEF
( 66, 90, 107 ),

70 
RGBDEF
( 66, 99, 115 ),

71 
RGBDEF
( 66, 107, 123 ),

72 
RGBDEF
( 74, 90, 90 ),

73 
RGBDEF
( 82, 107, 115 ),

74 
RGBDEF
( 82, 107, 123 ),

75 
RGBDEF
( 82, 115, 123 ),

76 
RGBDEF
( 82, 115, 140 ),

77 
RGBDEF
( 90, 107, 107 ),

78 
RGBDEF
( 90, 107, 115 ),

79 
RGBDEF
( 90, 115, 123 ),

80 
RGBDEF
( 99, 82, 90 ),

81 
RGBDEF
( 99, 115, 107 ),

82 
RGBDEF
( 99, 115, 115 ),

83 
RGBDEF
( 107, 90, 90 ),

84 
RGBDEF
( 107, 107, 115 ),

85 
RGBDEF
( 115, 123, 115 ),

86 
RGBDEF
( 131, 102, 94 ),

87 
RGBDEF
( 123, 107, 123 ),

88 
RGBDEF
( 156, 115, 123 ),

89 
RGBDEF
( 99, 123, 132 ),

90 
RGBDEF
( 99, 123, 140 ),

91 
RGBDEF
( 107, 132, 132 ),

92 
RGBDEF
( 123, 132, 132 ),

93 
RGBDEF
( 139, 152, 111 ),

94 
RGBDEF
( 148, 165, 132 ),

95 
RGBDEF
( 123, 148, 140 ),

96 
RGBDEF
( 156, 140, 140 ),

97 
RGBDEF
( 82, 123, 148 ),

98 
RGBDEF
( 99, 140, 148 ),

99 
RGBDEF
( 107, 132, 148 ),

100 
RGBDEF
( 107, 140, 148 ),

101 
RGBDEF
( 132, 148, 148 ),

102 
RGBDEF
( 82, 123, 156 ),

103 
RGBDEF
( 99, 132, 156 ),

104 
RGBDEF
( 107, 140, 156 ),

105 
RGBDEF
( 132, 156, 156 ),

106 
RGBDEF
( 123, 156, 165 ),

107 
RGBDEF
( 148, 165, 165 ),

108 
RGBDEF
( 99, 140, 173 ),

109 
RGBDEF
( 115, 148, 173 ),

110 
RGBDEF
( 123, 156, 181 ),

111 
RGBDEF
( 132, 165, 181 ),

112 
RGBDEF
( 148, 173, 181 ),

113 
RGBDEF
( 107, 148, 189 ),

114 
RGBDEF
( 115, 156, 189 ),

115 
RGBDEF
( 132, 173, 189 ),

116 
RGBDEF
( 123, 173, 198 ),

117 
RGBDEF
( 140, 181, 198 ),

118 
RGBDEF
( 123, 189, 206 ),

119 
RGBDEF
( 132, 173, 206 ),

120 
RGBDEF
( 156, 189, 206 ),

121 
RGBDEF
( 140, 189, 214 ),

122 
RGBDEF
( 123, 156, 222 ),

123 
RGBDEF
( 123, 173, 222 ),

124 
RGBDEF
( 140, 198, 231 ),

125 
RGBDEF
( 156, 206, 231 ),

126 
RGBDEF
( 156, 206, 239 ),

127 
RGBDEF
( 165, 0, 24 ),

128 
RGBDEF
( 198, 0, 24 ),

129 
RGBDEF
( 173, 0, 33 ),

130 
RGBDEF
( 181, 0, 33 ),

131 
RGBDEF
( 206, 0, 33 ),

132 
RGBDEF
( 214, 0, 41 ),

133 
RGBDEF
( 222, 0, 41 ),

134 
RGBDEF
( 231, 0, 41 ),

135 
RGBDEF
( 231, 0, 49 ),

136 
RGBDEF
( 165, 8, 24 ),

137 
RGBDEF
( 173, 8, 33 ),

138 
RGBDEF
( 198, 8, 41 ),

139 
RGBDEF
( 214, 8, 41 ),

140 
RGBDEF
( 222, 8, 41 ),

141 
RGBDEF
( 222, 8, 49 ),

142 
RGBDEF
( 239, 8, 49 ),

143 
RGBDEF
( 173, 16, 0 ),

144 
RGBDEF
( 173, 16, 33 ),

145 
RGBDEF
( 165, 16, 41 ),

146 
RGBDEF
( 206, 16, 41 ),

147 
RGBDEF
( 222, 16, 41 ),

148 
RGBDEF
( 231, 16, 41 ),

149 
RGBDEF
( 181, 24, 33 ),

150 
RGBDEF
( 165, 24, 41 ),

151 
RGBDEF
( 206, 24, 41 ),

152 
RGBDEF
( 247, 24, 41 ),

153 
RGBDEF
( 189, 24, 49 ),

154 
RGBDEF
( 222, 24, 49 ),

155 
RGBDEF
( 206, 33, 41 ),

156 
RGBDEF
( 239, 33, 41 ),

157 
RGBDEF
( 181, 41, 33 ),

158 
RGBDEF
( 165, 41, 49 ),

159 
RGBDEF
( 214, 41, 57 ),

160 
RGBDEF
( 189, 49, 49 ),

161 
RGBDEF
( 165, 66, 66 ),

162 
RGBDEF
( 206, 66, 66 ),

163 
RGBDEF
( 189, 74, 66 ),

164 
RGBDEF
( 181, 99, 37 ),

165 
RGBDEF
( 173, 90, 66 ),

166 
RGBDEF
( 189, 99, 74 ),

167 
RGBDEF
( 214, 74, 74 ),

168 
RGBDEF
( 222, 74, 74 ),

169 
RGBDEF
( 206, 90, 82 ),

170 
RGBDEF
( 165, 107, 99 ),

171 
RGBDEF
( 181, 107, 99 ),

172 
RGBDEF
( 222, 90, 82 ),

173 
RGBDEF
( 222, 99, 74 ),

174 
RGBDEF
( 222, 99, 90 ),

175 
RGBDEF
( 231, 66, 66 ),

176 
RGBDEF
( 239, 41, 57 ),

177 
RGBDEF
( 239, 90, 82 ),

178 
RGBDEF
( 247, 66, 74 ),

179 
RGBDEF
( 247, 90, 90 ),

180 
RGBDEF
( 255, 41, 66 ),

181 
RGBDEF
( 255, 57, 74 ),

182 
RGBDEF
( 255, 74, 82 ),

183 
RGBDEF
( 255, 90, 82 ),

184 
RGBDEF
( 255, 90, 90 ),

185 
RGBDEF
( 255, 99, 82 ),

186 
RGBDEF
( 255, 99, 99 ),

187 
RGBDEF
( 181, 139, 78 ),

188 
RGBDEF
( 198, 107, 107 ),

189 
RGBDEF
( 222, 123, 123 ),

190 
RGBDEF
( 222, 132, 115 ),

191 
RGBDEF
( 247, 107, 99 ),

192 
RGBDEF
( 247, 132, 115 ),

193 
RGBDEF
( 255, 107, 107 ),

194 
RGBDEF
( 255, 132, 115 ),

195 
RGBDEF
( 255, 140, 123 ),

196 
RGBDEF
( 222, 156, 132 ),

197 
RGBDEF
( 239, 140, 132 ),

198 
RGBDEF
( 255, 148, 140 ),

199 
RGBDEF
( 255, 165, 140 ),

200 
RGBDEF
( 198, 148, 148 ),

201 
RGBDEF
( 173, 140, 156 ),

202 
RGBDEF
( 193, 181, 65 ),

203 
RGBDEF
( 189, 185, 90 ),

204 
RGBDEF
( 208, 208, 90 ),

205 
RGBDEF
( 230, 226, 82 ),

206 
RGBDEF
( 243, 251, 82 ),

207 
RGBDEF
( 255, 255, 107 ),

208 
RGBDEF
( 255, 255, 115 ),

209 
RGBDEF
( 231, 222, 123 ),

210 
RGBDEF
( 247, 255, 123 ),

211 
RGBDEF
( 247, 173, 148 ),

212 
RGBDEF
( 255, 173, 148 ),

213 
RGBDEF
( 255, 189, 148 ),

214 
RGBDEF
( 165, 173, 156 ),

215 
RGBDEF
( 181, 198, 156 ),

216 
RGBDEF
( 247, 181, 156 ),

217 
RGBDEF
( 192, 186, 170 ),

218 
RGBDEF
( 185, 185, 197 ),

219 
RGBDEF
( 173, 206, 222 ),

220 
RGBDEF
( 198, 214, 214 ),

221 
RGBDEF
( 222, 181, 181 ),

222 
RGBDEF
( 231, 206, 206 ),

223 
RGBDEF
( 255, 181, 156 ),

224 
RGBDEF
( 255, 231, 156 ),

225 
RGBDEF
( 255, 181, 165 ),

226 
RGBDEF
( 255, 181, 173 ),

227 
RGBDEF
( 255, 189, 173 ),

228 
RGBDEF
( 255, 206, 181 ),

229 
RGBDEF
( 255, 214, 198 ),

230 
RGBDEF
( 255, 222, 202 ),

231 
RGBDEF
( 255, 231, 214 ),

232 
RGBDEF
( 255, 247, 222 ),

233 
RGBDEF
( 165, 206, 231 ),

234 
RGBDEF
( 165, 214, 239 ),

235 
RGBDEF
( 181, 222, 239 ),

236 
RGBDEF
( 206, 222, 239 ),

237 
RGBDEF
( 222, 231, 239 ),

238 
RGBDEF
( 255, 247, 239 ),

239 
RGBDEF
( 231, 239, 247 ),

240 
RGBDEF
( 165, 247, 255 ),

241 
RGBDEF
( 173, 222, 255 ),

242 
RGBDEF
( 189, 239, 255 ),

243 
RGBDEF
( 206, 239, 255 ),

244 
RGBDEF
( 222, 247, 255 ),

245 
RGBDEF
( 247, 255, 255 ),

246 
RGBDEF
( 255, 255, 255 ),

247 
RGBDEF
( 0, 0, 0 ),

248 
RGBDEF
( 191, 0, 0 ),

249 
RGBDEF
( 0, 191, 0 ),

250 
RGBDEF
( 191, 191, 0 ),

251 
RGBDEF
( 0, 0, 191 ),

252 
RGBDEF
( 191, 0, 191 ),

253 
RGBDEF
( 0, 191, 191 ),

254 
RGBDEF
( 192, 192, 192 ),

255 
RGBDEF
( 128, 128, 128 ),

256 
RGBDEF
( 255, 0, 0 ),

257 
RGBDEF
( 0, 255, 0 ),

258 
RGBDEF
( 255, 255, 0 ),

259 
RGBDEF
( 0, 0, 255 ),

260 
RGBDEF
( 255, 0, 255 ),

261 
RGBDEF
( 0, 255, 255 ),

262 
RGBDEF
( 255, 255, 255 ),

265 
MWUCHAR
 
	gimagebôs
[] = {

430 
MWIMAGEHDR
 
	gimage_ˇr8
 = {

436 
∑Àâe
,

437 
imagebôs
,

	@obj/mwin/bmp/close4.c

2 
	~"devi˚.h
"

6 
MWPALENTRY
 
	g∑Àâe
[16] = {

7 
RGBDEF
( 0, 0, 0 ),

8 
RGBDEF
( 191, 0, 0 ),

9 
RGBDEF
( 0, 191, 0 ),

10 
RGBDEF
( 191, 191, 0 ),

11 
RGBDEF
( 0, 0, 191 ),

12 
RGBDEF
( 191, 0, 191 ),

13 
RGBDEF
( 0, 191, 191 ),

14 
RGBDEF
( 192, 192, 192 ),

15 
RGBDEF
( 128, 128, 128 ),

16 
RGBDEF
( 255, 0, 0 ),

17 
RGBDEF
( 0, 255, 0 ),

18 
RGBDEF
( 255, 255, 0 ),

19 
RGBDEF
( 0, 0, 255 ),

20 
RGBDEF
( 255, 0, 255 ),

21 
RGBDEF
( 0, 255, 255 ),

22 
RGBDEF
( 255, 255, 255 ),

25 
MWUCHAR
 
	gimagebôs
[] = {

38 
MWIMAGEHDR
 
	gimage_˛o£4
 = {

44 
∑Àâe
,

45 
imagebôs
,

	@obj/mwin/bmp/cs1.c

2 
	~"devi˚.h
"

6 
MWPALENTRY
 
	g∑Àâe
[2] = {

7 
RGBDEF
( 0, 0, 0 ),

8 
RGBDEF
( 255, 255, 255 ),

11 
MWUCHAR
 
	gimagebôs
[] = {

170 
MWIMAGEHDR
 
	gimage_cs1
 = {

176 
∑Àâe
,

177 
imagebôs
,

	@obj/mwin/bmp/max4.c

2 
	~"devi˚.h
"

6 
MWPALENTRY
 
	g∑Àâe
[16] = {

7 
RGBDEF
( 0, 0, 0 ),

8 
RGBDEF
( 191, 0, 0 ),

9 
RGBDEF
( 0, 191, 0 ),

10 
RGBDEF
( 191, 191, 0 ),

11 
RGBDEF
( 0, 0, 191 ),

12 
RGBDEF
( 191, 0, 191 ),

13 
RGBDEF
( 0, 191, 191 ),

14 
RGBDEF
( 192, 192, 192 ),

15 
RGBDEF
( 128, 128, 128 ),

16 
RGBDEF
( 255, 0, 0 ),

17 
RGBDEF
( 0, 255, 0 ),

18 
RGBDEF
( 255, 255, 0 ),

19 
RGBDEF
( 0, 0, 255 ),

20 
RGBDEF
( 255, 0, 255 ),

21 
RGBDEF
( 0, 255, 255 ),

22 
RGBDEF
( 255, 255, 255 ),

25 
MWUCHAR
 
	gimagebôs
[] = {

42 
MWIMAGEHDR
 
	gimage_max4
 = {

48 
∑Àâe
,

49 
imagebôs
,

	@obj/mwin/bmp/microwin.c

2 
	~"devi˚.h
"

6 
MWPALENTRY
 
	g∑Àâe
[16] = {

7 
RGBDEF
( 0, 0, 0 ),

8 
RGBDEF
( 0, 0, 0 ),

9 
RGBDEF
( 0, 0, 0 ),

10 
RGBDEF
( 0, 0, 0 ),

11 
RGBDEF
( 0, 0, 0 ),

12 
RGBDEF
( 0, 0, 0 ),

13 
RGBDEF
( 0, 0, 0 ),

14 
RGBDEF
( 0, 0, 0 ),

15 
RGBDEF
( 0, 0, 0 ),

16 
RGBDEF
( 0, 128, 0 ),

17 
RGBDEF
( 63, 135, 163 ),

18 
RGBDEF
( 0, 0, 255 ),

19 
RGBDEF
( 255, 0, 0 ),

20 
RGBDEF
( 61, 160, 199 ),

21 
RGBDEF
( 119, 190, 217 ),

22 
RGBDEF
( 255, 255, 0 ),

25 
MWUCHAR
 
	gimagebôs
[] = {

399 
MWIMAGEHDR
 
	gimage_mi¸owö
 = {

405 
∑Àâe
,

406 
imagebôs
,

	@obj/mwin/bmp/min4.c

2 
	~"devi˚.h
"

6 
MWPALENTRY
 
	g∑Àâe
[16] = {

7 
RGBDEF
( 0, 0, 0 ),

8 
RGBDEF
( 191, 0, 0 ),

9 
RGBDEF
( 0, 191, 0 ),

10 
RGBDEF
( 191, 191, 0 ),

11 
RGBDEF
( 0, 0, 191 ),

12 
RGBDEF
( 191, 0, 191 ),

13 
RGBDEF
( 0, 191, 191 ),

14 
RGBDEF
( 192, 192, 192 ),

15 
RGBDEF
( 128, 128, 128 ),

16 
RGBDEF
( 255, 0, 0 ),

17 
RGBDEF
( 0, 255, 0 ),

18 
RGBDEF
( 255, 255, 0 ),

19 
RGBDEF
( 0, 0, 255 ),

20 
RGBDEF
( 255, 0, 255 ),

21 
RGBDEF
( 0, 255, 255 ),

22 
RGBDEF
( 255, 255, 255 ),

25 
MWUCHAR
 
	gimagebôs
[] = {

42 
MWIMAGEHDR
 
	gimage_mö4
 = {

48 
∑Àâe
,

49 
imagebôs
,

	@obj/mwin/bmp/penguin.c

2 
	~"devi˚.h
"

6 
MWPALENTRY
 
	g∑Àâe
[256] = {

7 
RGBDEF
( 0, 0, 0 ),

8 
RGBDEF
( 8, 0, 0 ),

9 
RGBDEF
( 8, 8, 0 ),

10 
RGBDEF
( 8, 8, 8 ),

11 
RGBDEF
( 18, 10, 0 ),

12 
RGBDEF
( 33, 0, 0 ),

13 
RGBDEF
( 16, 16, 16 ),

14 
RGBDEF
( 24, 24, 24 ),

15 
RGBDEF
( 39, 27, 4 ),

16 
RGBDEF
( 63, 41, 2 ),

17 
RGBDEF
( 66, 49, 0 ),

18 
RGBDEF
( 74, 41, 0 ),

19 
RGBDEF
( 74, 49, 0 ),

20 
RGBDEF
( 78, 52, 3 ),

21 
RGBDEF
( 90, 60, 2 ),

22 
RGBDEF
( 99, 70, 4 ),

23 
RGBDEF
( 33, 33, 33 ),

24 
RGBDEF
( 41, 41, 41 ),

25 
RGBDEF
( 41, 41, 66 ),

26 
RGBDEF
( 49, 49, 49 ),

27 
RGBDEF
( 63, 63, 60 ),

28 
RGBDEF
( 82, 57, 41 ),

29 
RGBDEF
( 74, 74, 66 ),

30 
RGBDEF
( 74, 74, 74 ),

31 
RGBDEF
( 74, 74, 82 ),

32 
RGBDEF
( 82, 82, 82 ),

33 
RGBDEF
( 90, 90, 90 ),

34 
RGBDEF
( 99, 99, 90 ),

35 
RGBDEF
( 90, 90, 99 ),

36 
RGBDEF
( 99, 99, 99 ),

37 
RGBDEF
( 99, 99, 107 ),

38 
RGBDEF
( 0, 0, 255 ),

39 
RGBDEF
( 141, 96, 1 ),

40 
RGBDEF
( 158, 111, 24 ),

41 
RGBDEF
( 196, 135, 9 ),

42 
RGBDEF
( 211, 154, 5 ),

43 
RGBDEF
( 226, 165, 4 ),

44 
RGBDEF
( 229, 177, 1 ),

45 
RGBDEF
( 237, 179, 8 ),

46 
RGBDEF
( 237, 174, 16 ),

47 
RGBDEF
( 233, 195, 8 ),

48 
RGBDEF
( 247, 193, 12 ),

49 
RGBDEF
( 243, 207, 10 ),

50 
RGBDEF
( 255, 214, 8 ),

51 
RGBDEF
( 255, 189, 16 ),

52 
RGBDEF
( 247, 218, 16 ),

53 
RGBDEF
( 247, 212, 24 ),

54 
RGBDEF
( 249, 216, 47 ),

55 
RGBDEF
( 117, 117, 120 ),

56 
RGBDEF
( 142, 139, 139 ),

57 
RGBDEF
( 181, 164, 145 ),

58 
RGBDEF
( 173, 173, 177 ),

59 
RGBDEF
( 189, 189, 189 ),

60 
RGBDEF
( 202, 202, 202 ),

61 
RGBDEF
( 198, 198, 231 ),

62 
RGBDEF
( 218, 218, 218 ),

63 
RGBDEF
( 231, 214, 140 ),

64 
RGBDEF
( 231, 231, 222 ),

65 
RGBDEF
( 222, 222, 239 ),

66 
RGBDEF
( 239, 236, 236 ),

67 
RGBDEF
( 247, 247, 239 ),

68 
RGBDEF
( 239, 239, 247 ),

69 
RGBDEF
( 247, 247, 247 ),

70 
RGBDEF
( 255, 255, 255 ),

71 
RGBDEF
( 0, 0, 0 ),

72 
RGBDEF
( 191, 0, 0 ),

73 
RGBDEF
( 0, 191, 0 ),

74 
RGBDEF
( 191, 191, 0 ),

75 
RGBDEF
( 0, 0, 191 ),

76 
RGBDEF
( 191, 0, 191 ),

77 
RGBDEF
( 0, 191, 191 ),

78 
RGBDEF
( 192, 192, 192 ),

79 
RGBDEF
( 128, 128, 128 ),

80 
RGBDEF
( 255, 0, 0 ),

81 
RGBDEF
( 0, 255, 0 ),

82 
RGBDEF
( 255, 255, 0 ),

83 
RGBDEF
( 0, 0, 255 ),

84 
RGBDEF
( 255, 0, 255 ),

85 
RGBDEF
( 0, 255, 255 ),

86 
RGBDEF
( 255, 255, 255 ),

87 
RGBDEF
( 0, 0, 0 ),

88 
RGBDEF
( 0, 0, 0 ),

89 
RGBDEF
( 0, 0, 0 ),

90 
RGBDEF
( 0, 0, 0 ),

91 
RGBDEF
( 0, 0, 0 ),

92 
RGBDEF
( 0, 0, 0 ),

93 
RGBDEF
( 0, 0, 0 ),

94 
RGBDEF
( 0, 0, 0 ),

95 
RGBDEF
( 0, 0, 0 ),

96 
RGBDEF
( 0, 0, 0 ),

97 
RGBDEF
( 0, 0, 0 ),

98 
RGBDEF
( 0, 0, 0 ),

99 
RGBDEF
( 0, 0, 0 ),

100 
RGBDEF
( 0, 0, 0 ),

101 
RGBDEF
( 0, 0, 0 ),

102 
RGBDEF
( 0, 0, 0 ),

103 
RGBDEF
( 0, 0, 0 ),

104 
RGBDEF
( 0, 0, 0 ),

105 
RGBDEF
( 0, 0, 0 ),

106 
RGBDEF
( 0, 0, 0 ),

107 
RGBDEF
( 0, 0, 0 ),

108 
RGBDEF
( 0, 0, 0 ),

109 
RGBDEF
( 0, 0, 0 ),

110 
RGBDEF
( 0, 0, 0 ),

111 
RGBDEF
( 0, 0, 0 ),

112 
RGBDEF
( 0, 0, 0 ),

113 
RGBDEF
( 0, 0, 0 ),

114 
RGBDEF
( 0, 0, 0 ),

115 
RGBDEF
( 0, 0, 0 ),

116 
RGBDEF
( 0, 0, 0 ),

117 
RGBDEF
( 0, 0, 0 ),

118 
RGBDEF
( 0, 0, 0 ),

119 
RGBDEF
( 0, 0, 0 ),

120 
RGBDEF
( 0, 0, 0 ),

121 
RGBDEF
( 0, 0, 0 ),

122 
RGBDEF
( 0, 0, 0 ),

123 
RGBDEF
( 0, 0, 0 ),

124 
RGBDEF
( 0, 0, 0 ),

125 
RGBDEF
( 0, 0, 0 ),

126 
RGBDEF
( 0, 0, 0 ),

127 
RGBDEF
( 0, 0, 0 ),

128 
RGBDEF
( 0, 0, 0 ),

129 
RGBDEF
( 0, 0, 0 ),

130 
RGBDEF
( 0, 0, 0 ),

131 
RGBDEF
( 0, 0, 0 ),

132 
RGBDEF
( 0, 0, 0 ),

133 
RGBDEF
( 0, 0, 0 ),

134 
RGBDEF
( 0, 0, 0 ),

135 
RGBDEF
( 0, 0, 0 ),

136 
RGBDEF
( 0, 0, 0 ),

137 
RGBDEF
( 0, 0, 0 ),

138 
RGBDEF
( 0, 0, 0 ),

139 
RGBDEF
( 0, 0, 0 ),

140 
RGBDEF
( 0, 0, 0 ),

141 
RGBDEF
( 0, 0, 0 ),

142 
RGBDEF
( 0, 0, 0 ),

143 
RGBDEF
( 0, 0, 0 ),

144 
RGBDEF
( 0, 0, 0 ),

145 
RGBDEF
( 0, 0, 0 ),

146 
RGBDEF
( 0, 0, 0 ),

147 
RGBDEF
( 0, 0, 0 ),

148 
RGBDEF
( 0, 0, 0 ),

149 
RGBDEF
( 0, 0, 0 ),

150 
RGBDEF
( 0, 0, 0 ),

151 
RGBDEF
( 0, 0, 0 ),

152 
RGBDEF
( 0, 0, 0 ),

153 
RGBDEF
( 0, 0, 0 ),

154 
RGBDEF
( 0, 0, 0 ),

155 
RGBDEF
( 0, 0, 0 ),

156 
RGBDEF
( 0, 0, 0 ),

157 
RGBDEF
( 0, 0, 0 ),

158 
RGBDEF
( 0, 0, 0 ),

159 
RGBDEF
( 0, 0, 0 ),

160 
RGBDEF
( 0, 0, 0 ),

161 
RGBDEF
( 0, 0, 0 ),

162 
RGBDEF
( 0, 0, 0 ),

163 
RGBDEF
( 0, 0, 0 ),

164 
RGBDEF
( 0, 0, 0 ),

165 
RGBDEF
( 0, 0, 0 ),

166 
RGBDEF
( 0, 0, 0 ),

167 
RGBDEF
( 0, 0, 0 ),

168 
RGBDEF
( 0, 0, 0 ),

169 
RGBDEF
( 0, 0, 0 ),

170 
RGBDEF
( 0, 0, 0 ),

171 
RGBDEF
( 0, 0, 0 ),

172 
RGBDEF
( 0, 0, 0 ),

173 
RGBDEF
( 0, 0, 0 ),

174 
RGBDEF
( 0, 0, 0 ),

175 
RGBDEF
( 0, 0, 0 ),

176 
RGBDEF
( 0, 0, 0 ),

177 
RGBDEF
( 0, 0, 0 ),

178 
RGBDEF
( 0, 0, 0 ),

179 
RGBDEF
( 0, 0, 0 ),

180 
RGBDEF
( 0, 0, 0 ),

181 
RGBDEF
( 0, 0, 0 ),

182 
RGBDEF
( 0, 0, 0 ),

183 
RGBDEF
( 0, 0, 0 ),

184 
RGBDEF
( 0, 0, 0 ),

185 
RGBDEF
( 0, 0, 0 ),

186 
RGBDEF
( 0, 0, 0 ),

187 
RGBDEF
( 0, 0, 0 ),

188 
RGBDEF
( 0, 0, 0 ),

189 
RGBDEF
( 0, 0, 0 ),

190 
RGBDEF
( 0, 0, 0 ),

191 
RGBDEF
( 0, 0, 0 ),

192 
RGBDEF
( 0, 0, 0 ),

193 
RGBDEF
( 0, 0, 0 ),

194 
RGBDEF
( 0, 0, 0 ),

195 
RGBDEF
( 0, 0, 0 ),

196 
RGBDEF
( 0, 0, 0 ),

197 
RGBDEF
( 0, 0, 0 ),

198 
RGBDEF
( 0, 0, 0 ),

199 
RGBDEF
( 0, 0, 0 ),

200 
RGBDEF
( 0, 0, 0 ),

201 
RGBDEF
( 0, 0, 0 ),

202 
RGBDEF
( 0, 0, 0 ),

203 
RGBDEF
( 0, 0, 0 ),

204 
RGBDEF
( 0, 0, 0 ),

205 
RGBDEF
( 0, 0, 0 ),

206 
RGBDEF
( 0, 0, 0 ),

207 
RGBDEF
( 0, 0, 0 ),

208 
RGBDEF
( 0, 0, 0 ),

209 
RGBDEF
( 0, 0, 0 ),

210 
RGBDEF
( 0, 0, 0 ),

211 
RGBDEF
( 0, 0, 0 ),

212 
RGBDEF
( 0, 0, 0 ),

213 
RGBDEF
( 0, 0, 0 ),

214 
RGBDEF
( 0, 0, 0 ),

215 
RGBDEF
( 0, 0, 0 ),

216 
RGBDEF
( 0, 0, 0 ),

217 
RGBDEF
( 0, 0, 0 ),

218 
RGBDEF
( 0, 0, 0 ),

219 
RGBDEF
( 0, 0, 0 ),

220 
RGBDEF
( 0, 0, 0 ),

221 
RGBDEF
( 0, 0, 0 ),

222 
RGBDEF
( 0, 0, 0 ),

223 
RGBDEF
( 0, 0, 0 ),

224 
RGBDEF
( 0, 0, 0 ),

225 
RGBDEF
( 0, 0, 0 ),

226 
RGBDEF
( 0, 0, 0 ),

227 
RGBDEF
( 0, 0, 0 ),

228 
RGBDEF
( 0, 0, 0 ),

229 
RGBDEF
( 0, 0, 0 ),

230 
RGBDEF
( 0, 0, 0 ),

231 
RGBDEF
( 0, 0, 0 ),

232 
RGBDEF
( 0, 0, 0 ),

233 
RGBDEF
( 0, 0, 0 ),

234 
RGBDEF
( 0, 0, 0 ),

235 
RGBDEF
( 0, 0, 0 ),

236 
RGBDEF
( 0, 0, 0 ),

237 
RGBDEF
( 0, 0, 0 ),

238 
RGBDEF
( 0, 0, 0 ),

239 
RGBDEF
( 0, 0, 0 ),

240 
RGBDEF
( 0, 0, 0 ),

241 
RGBDEF
( 0, 0, 0 ),

242 
RGBDEF
( 0, 0, 0 ),

243 
RGBDEF
( 0, 0, 0 ),

244 
RGBDEF
( 0, 0, 0 ),

245 
RGBDEF
( 0, 0, 0 ),

246 
RGBDEF
( 0, 0, 0 ),

247 
RGBDEF
( 0, 0, 0 ),

248 
RGBDEF
( 0, 0, 0 ),

249 
RGBDEF
( 0, 0, 0 ),

250 
RGBDEF
( 0, 0, 0 ),

251 
RGBDEF
( 0, 0, 0 ),

252 
RGBDEF
( 0, 0, 0 ),

253 
RGBDEF
( 0, 0, 0 ),

254 
RGBDEF
( 0, 0, 0 ),

255 
RGBDEF
( 0, 0, 0 ),

256 
RGBDEF
( 0, 0, 0 ),

257 
RGBDEF
( 0, 0, 0 ),

258 
RGBDEF
( 0, 0, 0 ),

259 
RGBDEF
( 0, 0, 0 ),

260 
RGBDEF
( 0, 0, 0 ),

261 
RGBDEF
( 0, 0, 0 ),

262 
RGBDEF
( 0, 0, 0 ),

265 
MWUCHAR
 
	gimagebôs
[] = {

419 
MWIMAGEHDR
 
	gimage_≥nguö
 = {

425 
∑Àâe
,

426 
imagebôs
,

	@obj/mwin/bmp/rle8.c

2 
	~"devi˚.h
"

6 
MWPALENTRY
 
	g∑Àâe
[256] = {

7 
RGBDEF
( 8, 8, 16 ),

8 
RGBDEF
( 16, 16, 24 ),

9 
RGBDEF
( 24, 16, 24 ),

10 
RGBDEF
( 74, 16, 24 ),

11 
RGBDEF
( 90, 16, 24 ),

12 
RGBDEF
( 33, 33, 33 ),

13 
RGBDEF
( 41, 24, 33 ),

14 
RGBDEF
( 41, 33, 33 ),

15 
RGBDEF
( 74, 33, 33 ),

16 
RGBDEF
( 24, 24, 41 ),

17 
RGBDEF
( 41, 33, 41 ),

18 
RGBDEF
( 49, 33, 41 ),

19 
RGBDEF
( 49, 49, 41 ),

20 
RGBDEF
( 57, 41, 41 ),

21 
RGBDEF
( 57, 49, 41 ),

22 
RGBDEF
( 74, 41, 41 ),

23 
RGBDEF
( 74, 49, 41 ),

24 
RGBDEF
( 90, 49, 41 ),

25 
RGBDEF
( 107, 49, 41 ),

26 
RGBDEF
( 115, 41, 41 ),

27 
RGBDEF
( 123, 57, 41 ),

28 
RGBDEF
( 57, 49, 49 ),

29 
RGBDEF
( 90, 66, 49 ),

30 
RGBDEF
( 99, 82, 49 ),

31 
RGBDEF
( 115, 66, 49 ),

32 
RGBDEF
( 33, 41, 57 ),

33 
RGBDEF
( 49, 41, 57 ),

34 
RGBDEF
( 49, 49, 57 ),

35 
RGBDEF
( 57, 66, 57 ),

36 
RGBDEF
( 82, 57, 57 ),

37 
RGBDEF
( 90, 66, 57 ),

38 
RGBDEF
( 107, 66, 57 ),

39 
RGBDEF
( 107, 82, 57 ),

40 
RGBDEF
( 123, 74, 57 ),

41 
RGBDEF
( 123, 82, 57 ),

42 
RGBDEF
( 74, 82, 66 ),

43 
RGBDEF
( 99, 82, 66 ),

44 
RGBDEF
( 123, 99, 66 ),

45 
RGBDEF
( 41, 57, 74 ),

46 
RGBDEF
( 57, 49, 74 ),

47 
RGBDEF
( 57, 66, 74 ),

48 
RGBDEF
( 66, 82, 74 ),

49 
RGBDEF
( 90, 66, 74 ),

50 
RGBDEF
( 107, 90, 74 ),

51 
RGBDEF
( 115, 74, 74 ),

52 
RGBDEF
( 115, 99, 74 ),

53 
RGBDEF
( 123, 90, 74 ),

54 
RGBDEF
( 132, 99, 74 ),

55 
RGBDEF
( 132, 115, 74 ),

56 
RGBDEF
( 90, 82, 82 ),

57 
RGBDEF
( 99, 99, 82 ),

58 
RGBDEF
( 41, 66, 90 ),

59 
RGBDEF
( 33, 82, 148 ),

60 
RGBDEF
( 49, 66, 115 ),

61 
RGBDEF
( 49, 66, 123 ),

62 
RGBDEF
( 49, 82, 140 ),

63 
RGBDEF
( 49, 90, 156 ),

64 
RGBDEF
( 57, 82, 107 ),

65 
RGBDEF
( 57, 82, 132 ),

66 
RGBDEF
( 66, 66, 90 ),

67 
RGBDEF
( 66, 74, 90 ),

68 
RGBDEF
( 66, 82, 148 ),

69 
RGBDEF
( 66, 99, 132 ),

70 
RGBDEF
( 66, 99, 148 ),

71 
RGBDEF
( 74, 82, 90 ),

72 
RGBDEF
( 79, 98, 109 ),

73 
RGBDEF
( 107, 90, 107 ),

74 
RGBDEF
( 103, 107, 107 ),

75 
RGBDEF
( 123, 107, 94 ),

76 
RGBDEF
( 115, 107, 123 ),

77 
RGBDEF
( 127, 115, 107 ),

78 
RGBDEF
( 74, 99, 132 ),

79 
RGBDEF
( 82, 107, 132 ),

80 
RGBDEF
( 90, 123, 132 ),

81 
RGBDEF
( 115, 132, 132 ),

82 
RGBDEF
( 107, 123, 148 ),

83 
RGBDEF
( 74, 123, 156 ),

84 
RGBDEF
( 99, 107, 156 ),

85 
RGBDEF
( 123, 140, 156 ),

86 
RGBDEF
( 99, 123, 165 ),

87 
RGBDEF
( 49, 90, 173 ),

88 
RGBDEF
( 57, 99, 173 ),

89 
RGBDEF
( 66, 107, 173 ),

90 
RGBDEF
( 49, 90, 181 ),

91 
RGBDEF
( 66, 107, 181 ),

92 
RGBDEF
( 66, 115, 181 ),

93 
RGBDEF
( 90, 115, 181 ),

94 
RGBDEF
( 107, 140, 181 ),

95 
RGBDEF
( 66, 107, 189 ),

96 
RGBDEF
( 74, 115, 189 ),

97 
RGBDEF
( 74, 123, 198 ),

98 
RGBDEF
( 90, 132, 198 ),

99 
RGBDEF
( 99, 140, 198 ),

100 
RGBDEF
( 115, 148, 198 ),

101 
RGBDEF
( 123, 115, 198 ),

102 
RGBDEF
( 82, 132, 206 ),

103 
RGBDEF
( 99, 148, 206 ),

104 
RGBDEF
( 115, 148, 206 ),

105 
RGBDEF
( 115, 156, 206 ),

106 
RGBDEF
( 57, 107, 214 ),

107 
RGBDEF
( 74, 132, 214 ),

108 
RGBDEF
( 107, 148, 214 ),

109 
RGBDEF
( 99, 148, 222 ),

110 
RGBDEF
( 115, 165, 222 ),

111 
RGBDEF
( 140, 41, 24 ),

112 
RGBDEF
( 140, 49, 41 ),

113 
RGBDEF
( 140, 99, 66 ),

114 
RGBDEF
( 148, 66, 33 ),

115 
RGBDEF
( 148, 66, 49 ),

116 
RGBDEF
( 148, 74, 57 ),

117 
RGBDEF
( 148, 90, 57 ),

118 
RGBDEF
( 156, 82, 57 ),

119 
RGBDEF
( 165, 49, 41 ),

120 
RGBDEF
( 165, 66, 49 ),

121 
RGBDEF
( 165, 90, 57 ),

122 
RGBDEF
( 189, 71, 55 ),

123 
RGBDEF
( 165, 99, 66 ),

124 
RGBDEF
( 148, 115, 74 ),

125 
RGBDEF
( 165, 82, 74 ),

126 
RGBDEF
( 165, 115, 74 ),

127 
RGBDEF
( 156, 111, 82 ),

128 
RGBDEF
( 152, 111, 115 ),

129 
RGBDEF
( 181, 99, 66 ),

130 
RGBDEF
( 181, 115, 74 ),

131 
RGBDEF
( 181, 115, 82 ),

132 
RGBDEF
( 198, 103, 70 ),

133 
RGBDEF
( 198, 123, 74 ),

134 
RGBDEF
( 219, 109, 71 ),

135 
RGBDEF
( 231, 123, 74 ),

136 
RGBDEF
( 145, 134, 87 ),

137 
RGBDEF
( 162, 140, 98 ),

138 
RGBDEF
( 151, 138, 130 ),

139 
RGBDEF
( 181, 123, 82 ),

140 
RGBDEF
( 189, 140, 90 ),

141 
RGBDEF
( 178, 140, 126 ),

142 
RGBDEF
( 189, 156, 82 ),

143 
RGBDEF
( 198, 132, 82 ),

144 
RGBDEF
( 198, 140, 82 ),

145 
RGBDEF
( 214, 140, 82 ),

146 
RGBDEF
( 198, 156, 90 ),

147 
RGBDEF
( 214, 132, 90 ),

148 
RGBDEF
( 201, 155, 112 ),

149 
RGBDEF
( 239, 131, 82 ),

150 
RGBDEF
( 247, 148, 82 ),

151 
RGBDEF
( 231, 148, 90 ),

152 
RGBDEF
( 247, 152, 90 ),

153 
RGBDEF
( 255, 165, 90 ),

154 
RGBDEF
( 232, 156, 109 ),

155 
RGBDEF
( 251, 169, 115 ),

156 
RGBDEF
( 214, 173, 115 ),

157 
RGBDEF
( 247, 178, 101 ),

158 
RGBDEF
( 239, 181, 123 ),

159 
RGBDEF
( 240, 193, 113 ),

160 
RGBDEF
( 255, 198, 123 ),

161 
RGBDEF
( 255, 214, 132 ),

162 
RGBDEF
( 132, 156, 181 ),

163 
RGBDEF
( 132, 173, 206 ),

164 
RGBDEF
( 140, 123, 148 ),

165 
RGBDEF
( 140, 165, 165 ),

166 
RGBDEF
( 140, 173, 198 ),

167 
RGBDEF
( 140, 173, 222 ),

168 
RGBDEF
( 140, 181, 231 ),

169 
RGBDEF
( 148, 181, 222 ),

170 
RGBDEF
( 148, 189, 247 ),

171 
RGBDEF
( 156, 156, 165 ),

172 
RGBDEF
( 156, 165, 165 ),

173 
RGBDEF
( 156, 165, 189 ),

174 
RGBDEF
( 156, 173, 198 ),

175 
RGBDEF
( 156, 189, 222 ),

176 
RGBDEF
( 156, 189, 231 ),

177 
RGBDEF
( 165, 198, 198 ),

178 
RGBDEF
( 165, 198, 222 ),

179 
RGBDEF
( 165, 206, 173 ),

180 
RGBDEF
( 173, 198, 239 ),

181 
RGBDEF
( 173, 206, 247 ),

182 
RGBDEF
( 181, 181, 198 ),

183 
RGBDEF
( 181, 198, 189 ),

184 
RGBDEF
( 181, 198, 239 ),

185 
RGBDEF
( 181, 206, 206 ),

186 
RGBDEF
( 181, 206, 231 ),

187 
RGBDEF
( 189, 173, 148 ),

188 
RGBDEF
( 206, 181, 140 ),

189 
RGBDEF
( 231, 173, 140 ),

190 
RGBDEF
( 247, 198, 140 ),

191 
RGBDEF
( 255, 206, 140 ),

192 
RGBDEF
( 231, 198, 148 ),

193 
RGBDEF
( 255, 222, 148 ),

194 
RGBDEF
( 198, 185, 156 ),

195 
RGBDEF
( 210, 185, 172 ),

196 
RGBDEF
( 222, 181, 189 ),

197 
RGBDEF
( 189, 198, 198 ),

198 
RGBDEF
( 238, 198, 165 ),

199 
RGBDEF
( 222, 206, 201 ),

200 
RGBDEF
( 247, 239, 181 ),

201 
RGBDEF
( 189, 198, 222 ),

202 
RGBDEF
( 198, 214, 222 ),

203 
RGBDEF
( 206, 214, 222 ),

204 
RGBDEF
( 255, 247, 222 ),

205 
RGBDEF
( 198, 214, 231 ),

206 
RGBDEF
( 206, 214, 239 ),

207 
RGBDEF
( 214, 222, 239 ),

208 
RGBDEF
( 231, 231, 239 ),

209 
RGBDEF
( 198, 214, 247 ),

210 
RGBDEF
( 198, 222, 247 ),

211 
RGBDEF
( 214, 231, 247 ),

212 
RGBDEF
( 231, 239, 255 ),

213 
RGBDEF
( 247, 247, 255 ),

214 
RGBDEF
( 0, 0, 0 ),

215 
RGBDEF
( 0, 0, 0 ),

216 
RGBDEF
( 0, 0, 0 ),

217 
RGBDEF
( 0, 0, 0 ),

218 
RGBDEF
( 0, 0, 0 ),

219 
RGBDEF
( 0, 0, 0 ),

220 
RGBDEF
( 0, 0, 0 ),

221 
RGBDEF
( 0, 0, 0 ),

222 
RGBDEF
( 0, 0, 0 ),

223 
RGBDEF
( 0, 0, 0 ),

224 
RGBDEF
( 0, 0, 0 ),

225 
RGBDEF
( 0, 0, 0 ),

226 
RGBDEF
( 0, 0, 0 ),

227 
RGBDEF
( 0, 0, 0 ),

228 
RGBDEF
( 0, 0, 0 ),

229 
RGBDEF
( 0, 0, 0 ),

230 
RGBDEF
( 0, 0, 0 ),

231 
RGBDEF
( 0, 0, 0 ),

232 
RGBDEF
( 0, 0, 0 ),

233 
RGBDEF
( 0, 0, 0 ),

234 
RGBDEF
( 0, 0, 0 ),

235 
RGBDEF
( 0, 0, 0 ),

236 
RGBDEF
( 0, 0, 0 ),

237 
RGBDEF
( 0, 0, 0 ),

238 
RGBDEF
( 0, 0, 0 ),

239 
RGBDEF
( 0, 0, 0 ),

240 
RGBDEF
( 0, 0, 0 ),

241 
RGBDEF
( 0, 0, 0 ),

242 
RGBDEF
( 0, 0, 0 ),

243 
RGBDEF
( 0, 0, 0 ),

244 
RGBDEF
( 0, 0, 0 ),

245 
RGBDEF
( 0, 0, 0 ),

246 
RGBDEF
( 0, 0, 0 ),

247 
RGBDEF
( 0, 0, 0 ),

248 
RGBDEF
( 0, 0, 0 ),

249 
RGBDEF
( 0, 0, 0 ),

250 
RGBDEF
( 0, 0, 0 ),

251 
RGBDEF
( 0, 0, 0 ),

252 
RGBDEF
( 0, 0, 0 ),

253 
RGBDEF
( 0, 0, 0 ),

254 
RGBDEF
( 0, 0, 0 ),

255 
RGBDEF
( 0, 0, 0 ),

256 
RGBDEF
( 0, 0, 0 ),

257 
RGBDEF
( 0, 0, 0 ),

258 
RGBDEF
( 0, 0, 0 ),

259 
RGBDEF
( 0, 0, 0 ),

260 
RGBDEF
( 0, 0, 0 ),

261 
RGBDEF
( 0, 0, 0 ),

262 
RGBDEF
( 0, 0, 0 ),

265 
MWUCHAR
 
	gimagebôs
[] = {

468 
MWIMAGEHDR
 
	gimage_æe8
 = {

474 
∑Àâe
,

475 
imagebôs
,

	@obj/mwin/bmp/under4.c

2 
	~"devi˚.h
"

6 
MWPALENTRY
 
	g∑Àâe
[16] = {

7 
RGBDEF
( 0, 0, 0 ),

8 
RGBDEF
( 191, 0, 0 ),

9 
RGBDEF
( 0, 191, 0 ),

10 
RGBDEF
( 191, 191, 0 ),

11 
RGBDEF
( 0, 0, 191 ),

12 
RGBDEF
( 191, 0, 191 ),

13 
RGBDEF
( 0, 191, 191 ),

14 
RGBDEF
( 192, 192, 192 ),

15 
RGBDEF
( 128, 128, 128 ),

16 
RGBDEF
( 255, 0, 0 ),

17 
RGBDEF
( 0, 255, 0 ),

18 
RGBDEF
( 255, 255, 0 ),

19 
RGBDEF
( 0, 0, 255 ),

20 
RGBDEF
( 255, 0, 255 ),

21 
RGBDEF
( 0, 255, 255 ),

22 
RGBDEF
( 255, 255, 255 ),

25 
MWUCHAR
 
	gimagebôs
[] = {

51 
MWIMAGEHDR
 
	gimage_undî4
 = {

57 
∑Àâe
,

58 
imagebôs
,

	@obj/mwin/bmp/zion208.c

2 
	~"devi˚.h
"

6 
MWPALENTRY
 
	g∑Àâe
[256] = {

7 
RGBDEF
( 8, 8, 16 ),

8 
RGBDEF
( 16, 16, 24 ),

9 
RGBDEF
( 24, 16, 24 ),

10 
RGBDEF
( 74, 16, 24 ),

11 
RGBDEF
( 90, 16, 24 ),

12 
RGBDEF
( 33, 33, 33 ),

13 
RGBDEF
( 41, 24, 33 ),

14 
RGBDEF
( 41, 33, 33 ),

15 
RGBDEF
( 74, 33, 33 ),

16 
RGBDEF
( 24, 24, 41 ),

17 
RGBDEF
( 41, 33, 41 ),

18 
RGBDEF
( 49, 33, 41 ),

19 
RGBDEF
( 49, 49, 41 ),

20 
RGBDEF
( 57, 41, 41 ),

21 
RGBDEF
( 57, 49, 41 ),

22 
RGBDEF
( 74, 41, 41 ),

23 
RGBDEF
( 74, 49, 41 ),

24 
RGBDEF
( 90, 49, 41 ),

25 
RGBDEF
( 107, 49, 41 ),

26 
RGBDEF
( 115, 41, 41 ),

27 
RGBDEF
( 123, 57, 41 ),

28 
RGBDEF
( 57, 49, 49 ),

29 
RGBDEF
( 90, 66, 49 ),

30 
RGBDEF
( 99, 82, 49 ),

31 
RGBDEF
( 115, 66, 49 ),

32 
RGBDEF
( 33, 41, 57 ),

33 
RGBDEF
( 49, 41, 57 ),

34 
RGBDEF
( 49, 49, 57 ),

35 
RGBDEF
( 57, 66, 57 ),

36 
RGBDEF
( 82, 57, 57 ),

37 
RGBDEF
( 90, 66, 57 ),

38 
RGBDEF
( 107, 66, 57 ),

39 
RGBDEF
( 107, 82, 57 ),

40 
RGBDEF
( 123, 74, 57 ),

41 
RGBDEF
( 123, 82, 57 ),

42 
RGBDEF
( 74, 82, 66 ),

43 
RGBDEF
( 99, 82, 66 ),

44 
RGBDEF
( 123, 99, 66 ),

45 
RGBDEF
( 41, 57, 74 ),

46 
RGBDEF
( 57, 49, 74 ),

47 
RGBDEF
( 57, 66, 74 ),

48 
RGBDEF
( 66, 82, 74 ),

49 
RGBDEF
( 90, 66, 74 ),

50 
RGBDEF
( 107, 90, 74 ),

51 
RGBDEF
( 115, 74, 74 ),

52 
RGBDEF
( 115, 99, 74 ),

53 
RGBDEF
( 123, 90, 74 ),

54 
RGBDEF
( 132, 99, 74 ),

55 
RGBDEF
( 132, 115, 74 ),

56 
RGBDEF
( 90, 82, 82 ),

57 
RGBDEF
( 99, 99, 82 ),

58 
RGBDEF
( 41, 66, 90 ),

59 
RGBDEF
( 33, 82, 148 ),

60 
RGBDEF
( 49, 66, 115 ),

61 
RGBDEF
( 49, 66, 123 ),

62 
RGBDEF
( 49, 82, 140 ),

63 
RGBDEF
( 49, 90, 156 ),

64 
RGBDEF
( 57, 82, 107 ),

65 
RGBDEF
( 57, 82, 132 ),

66 
RGBDEF
( 66, 66, 90 ),

67 
RGBDEF
( 66, 74, 90 ),

68 
RGBDEF
( 66, 82, 148 ),

69 
RGBDEF
( 66, 99, 132 ),

70 
RGBDEF
( 66, 99, 148 ),

71 
RGBDEF
( 74, 82, 90 ),

72 
RGBDEF
( 79, 98, 109 ),

73 
RGBDEF
( 107, 90, 107 ),

74 
RGBDEF
( 103, 107, 107 ),

75 
RGBDEF
( 123, 107, 94 ),

76 
RGBDEF
( 115, 107, 123 ),

77 
RGBDEF
( 127, 115, 107 ),

78 
RGBDEF
( 74, 99, 132 ),

79 
RGBDEF
( 82, 107, 132 ),

80 
RGBDEF
( 90, 123, 132 ),

81 
RGBDEF
( 115, 132, 132 ),

82 
RGBDEF
( 107, 123, 148 ),

83 
RGBDEF
( 74, 123, 156 ),

84 
RGBDEF
( 99, 107, 156 ),

85 
RGBDEF
( 123, 140, 156 ),

86 
RGBDEF
( 99, 123, 165 ),

87 
RGBDEF
( 49, 90, 173 ),

88 
RGBDEF
( 57, 99, 173 ),

89 
RGBDEF
( 66, 107, 173 ),

90 
RGBDEF
( 49, 90, 181 ),

91 
RGBDEF
( 66, 107, 181 ),

92 
RGBDEF
( 66, 115, 181 ),

93 
RGBDEF
( 90, 115, 181 ),

94 
RGBDEF
( 107, 140, 181 ),

95 
RGBDEF
( 66, 107, 189 ),

96 
RGBDEF
( 74, 115, 189 ),

97 
RGBDEF
( 74, 123, 198 ),

98 
RGBDEF
( 90, 132, 198 ),

99 
RGBDEF
( 99, 140, 198 ),

100 
RGBDEF
( 115, 148, 198 ),

101 
RGBDEF
( 123, 115, 198 ),

102 
RGBDEF
( 82, 132, 206 ),

103 
RGBDEF
( 99, 148, 206 ),

104 
RGBDEF
( 115, 148, 206 ),

105 
RGBDEF
( 115, 156, 206 ),

106 
RGBDEF
( 57, 107, 214 ),

107 
RGBDEF
( 74, 132, 214 ),

108 
RGBDEF
( 107, 148, 214 ),

109 
RGBDEF
( 99, 148, 222 ),

110 
RGBDEF
( 115, 165, 222 ),

111 
RGBDEF
( 140, 41, 24 ),

112 
RGBDEF
( 140, 49, 41 ),

113 
RGBDEF
( 140, 99, 66 ),

114 
RGBDEF
( 148, 66, 33 ),

115 
RGBDEF
( 148, 66, 49 ),

116 
RGBDEF
( 148, 74, 57 ),

117 
RGBDEF
( 148, 90, 57 ),

118 
RGBDEF
( 156, 82, 57 ),

119 
RGBDEF
( 165, 49, 41 ),

120 
RGBDEF
( 165, 66, 49 ),

121 
RGBDEF
( 165, 90, 57 ),

122 
RGBDEF
( 189, 71, 55 ),

123 
RGBDEF
( 165, 99, 66 ),

124 
RGBDEF
( 148, 115, 74 ),

125 
RGBDEF
( 165, 82, 74 ),

126 
RGBDEF
( 165, 115, 74 ),

127 
RGBDEF
( 156, 111, 82 ),

128 
RGBDEF
( 152, 111, 115 ),

129 
RGBDEF
( 181, 99, 66 ),

130 
RGBDEF
( 181, 115, 74 ),

131 
RGBDEF
( 181, 115, 82 ),

132 
RGBDEF
( 198, 103, 70 ),

133 
RGBDEF
( 198, 123, 74 ),

134 
RGBDEF
( 219, 109, 71 ),

135 
RGBDEF
( 231, 123, 74 ),

136 
RGBDEF
( 145, 134, 87 ),

137 
RGBDEF
( 162, 140, 98 ),

138 
RGBDEF
( 151, 138, 130 ),

139 
RGBDEF
( 181, 123, 82 ),

140 
RGBDEF
( 189, 140, 90 ),

141 
RGBDEF
( 178, 140, 126 ),

142 
RGBDEF
( 189, 156, 82 ),

143 
RGBDEF
( 198, 132, 82 ),

144 
RGBDEF
( 198, 140, 82 ),

145 
RGBDEF
( 214, 140, 82 ),

146 
RGBDEF
( 198, 156, 90 ),

147 
RGBDEF
( 214, 132, 90 ),

148 
RGBDEF
( 201, 155, 112 ),

149 
RGBDEF
( 239, 131, 82 ),

150 
RGBDEF
( 247, 148, 82 ),

151 
RGBDEF
( 231, 148, 90 ),

152 
RGBDEF
( 247, 152, 90 ),

153 
RGBDEF
( 255, 165, 90 ),

154 
RGBDEF
( 232, 156, 109 ),

155 
RGBDEF
( 251, 169, 115 ),

156 
RGBDEF
( 214, 173, 115 ),

157 
RGBDEF
( 247, 178, 101 ),

158 
RGBDEF
( 239, 181, 123 ),

159 
RGBDEF
( 240, 193, 113 ),

160 
RGBDEF
( 255, 198, 123 ),

161 
RGBDEF
( 255, 214, 132 ),

162 
RGBDEF
( 132, 156, 181 ),

163 
RGBDEF
( 132, 173, 206 ),

164 
RGBDEF
( 140, 123, 148 ),

165 
RGBDEF
( 140, 165, 165 ),

166 
RGBDEF
( 140, 173, 198 ),

167 
RGBDEF
( 140, 173, 222 ),

168 
RGBDEF
( 140, 181, 231 ),

169 
RGBDEF
( 148, 181, 222 ),

170 
RGBDEF
( 148, 189, 247 ),

171 
RGBDEF
( 156, 156, 165 ),

172 
RGBDEF
( 156, 165, 165 ),

173 
RGBDEF
( 156, 165, 189 ),

174 
RGBDEF
( 156, 173, 198 ),

175 
RGBDEF
( 156, 189, 222 ),

176 
RGBDEF
( 156, 189, 231 ),

177 
RGBDEF
( 165, 198, 198 ),

178 
RGBDEF
( 165, 198, 222 ),

179 
RGBDEF
( 165, 206, 173 ),

180 
RGBDEF
( 173, 198, 239 ),

181 
RGBDEF
( 173, 206, 247 ),

182 
RGBDEF
( 181, 181, 198 ),

183 
RGBDEF
( 181, 198, 189 ),

184 
RGBDEF
( 181, 198, 239 ),

185 
RGBDEF
( 181, 206, 206 ),

186 
RGBDEF
( 181, 206, 231 ),

187 
RGBDEF
( 189, 173, 148 ),

188 
RGBDEF
( 206, 181, 140 ),

189 
RGBDEF
( 231, 173, 140 ),

190 
RGBDEF
( 247, 198, 140 ),

191 
RGBDEF
( 255, 206, 140 ),

192 
RGBDEF
( 231, 198, 148 ),

193 
RGBDEF
( 255, 222, 148 ),

194 
RGBDEF
( 198, 185, 156 ),

195 
RGBDEF
( 210, 185, 172 ),

196 
RGBDEF
( 222, 181, 189 ),

197 
RGBDEF
( 189, 198, 198 ),

198 
RGBDEF
( 238, 198, 165 ),

199 
RGBDEF
( 222, 206, 201 ),

200 
RGBDEF
( 247, 239, 181 ),

201 
RGBDEF
( 189, 198, 222 ),

202 
RGBDEF
( 198, 214, 222 ),

203 
RGBDEF
( 206, 214, 222 ),

204 
RGBDEF
( 255, 247, 222 ),

205 
RGBDEF
( 198, 214, 231 ),

206 
RGBDEF
( 206, 214, 239 ),

207 
RGBDEF
( 214, 222, 239 ),

208 
RGBDEF
( 231, 231, 239 ),

209 
RGBDEF
( 198, 214, 247 ),

210 
RGBDEF
( 198, 222, 247 ),

211 
RGBDEF
( 214, 231, 247 ),

212 
RGBDEF
( 231, 239, 255 ),

213 
RGBDEF
( 247, 247, 255 ),

214 
RGBDEF
( 0, 0, 0 ),

215 
RGBDEF
( 0, 0, 0 ),

216 
RGBDEF
( 0, 0, 0 ),

217 
RGBDEF
( 0, 0, 0 ),

218 
RGBDEF
( 0, 0, 0 ),

219 
RGBDEF
( 0, 0, 0 ),

220 
RGBDEF
( 0, 0, 0 ),

221 
RGBDEF
( 0, 0, 0 ),

222 
RGBDEF
( 0, 0, 0 ),

223 
RGBDEF
( 0, 0, 0 ),

224 
RGBDEF
( 0, 0, 0 ),

225 
RGBDEF
( 0, 0, 0 ),

226 
RGBDEF
( 0, 0, 0 ),

227 
RGBDEF
( 0, 0, 0 ),

228 
RGBDEF
( 0, 0, 0 ),

229 
RGBDEF
( 0, 0, 0 ),

230 
RGBDEF
( 0, 0, 0 ),

231 
RGBDEF
( 0, 0, 0 ),

232 
RGBDEF
( 0, 0, 0 ),

233 
RGBDEF
( 0, 0, 0 ),

234 
RGBDEF
( 0, 0, 0 ),

235 
RGBDEF
( 0, 0, 0 ),

236 
RGBDEF
( 0, 0, 0 ),

237 
RGBDEF
( 0, 0, 0 ),

238 
RGBDEF
( 0, 0, 0 ),

239 
RGBDEF
( 0, 0, 0 ),

240 
RGBDEF
( 0, 0, 0 ),

241 
RGBDEF
( 0, 0, 0 ),

242 
RGBDEF
( 0, 0, 0 ),

243 
RGBDEF
( 0, 0, 0 ),

244 
RGBDEF
( 0, 0, 0 ),

245 
RGBDEF
( 0, 0, 0 ),

246 
RGBDEF
( 0, 0, 0 ),

247 
RGBDEF
( 0, 0, 0 ),

248 
RGBDEF
( 0, 0, 0 ),

249 
RGBDEF
( 0, 0, 0 ),

250 
RGBDEF
( 0, 0, 0 ),

251 
RGBDEF
( 0, 0, 0 ),

252 
RGBDEF
( 0, 0, 0 ),

253 
RGBDEF
( 0, 0, 0 ),

254 
RGBDEF
( 0, 0, 0 ),

255 
RGBDEF
( 0, 0, 0 ),

256 
RGBDEF
( 0, 0, 0 ),

257 
RGBDEF
( 0, 0, 0 ),

258 
RGBDEF
( 0, 0, 0 ),

259 
RGBDEF
( 0, 0, 0 ),

260 
RGBDEF
( 0, 0, 0 ),

261 
RGBDEF
( 0, 0, 0 ),

262 
RGBDEF
( 0, 0, 0 ),

265 
MWUCHAR
 
	gimagebôs
[] = {

468 
MWIMAGEHDR
 
	gimage_zi⁄208
 = {

474 
∑Àâe
,

475 
imagebôs
,

	@rtems/mw_uid_test.c

4 
	~<°dio.h
>

5 
	~<°dlib.h
>

6 
	~<î∫o.h
>

7 
	~<sys/io˘l.h
>

8 
	~<f˙é.h
>

10 
	~<πems/mw_uid.h
>

11 
	~<πems/kd.h
>

13 c⁄° *
	gQ_NAME
 = "MWQ";

14 
	#Q_MAX_MSGS
 128

	)

21 
	$GsSñe˘
()

23 
MW_UID_MESSAGE
 
m
;

24 
rc
;

27 
m
.
ty≥
 = 
MV_UID_INVALID
;

30 
rc
 = 
	`uid_ªad_mesßge
–&
m
, 100 );

33 if–
rc
 < 0 )

35 if–
î∫o
 !
ETIMEDOUT
 )

36 
	`¥ötf
–"Ñc%d,Éºno=%d\n", 
rc
, 
î∫o
 );

40  
m
.
ty≥
 )

43 
MV_UID_REL_POS
:

44 
	`¥ötf
( "REL Mouse: btns=%X, dx=%d, dy=%d, dz=%d\n",

45 
m
.m.
pos
.
bäs
, m.m.pos.
x
, m.m.pos.
y
, m.m.pos.
z
 );

47 
MV_UID_ABS_POS
:

48 
	`¥ötf
( "ABS Mouse: btns=%X, dx=%d, dy=%d, dz=%d\n",

49 
m
.m.
pos
.
bäs
, m.m.pos.
x
, m.m.pos.
y
, m.m.pos.
z
 );

54 
MV_UID_KBD
:

55 
	`¥ötf
( "Kbd: code=%X, modifiers=%X, mode=%d\n",

56 ()
m
.m.
kbd
.
code
, m.m.kbd.
modifõrs
, m.m.kbd.
mode
 );

60 
MV_UID_TIMER
:

61 
MV_UID_INVALID
:

65 
	}
}

67 
˛o£
( );

68 
	$πems_maö
(
¨gc
, **
¨gv
)

70 
°©us
;

71 
MW_UID_MESSAGE
 
m
;

73 
rc
;

75 
rc
 = 
	`uid_›í_queue
–
Q_NAME
, 
O_CREAT
 | 
O_RDWR
, 
Q_MAX_MSGS
 );

77 
	`¥ötf
–"O≥¿QUEUE=%X\n", 
rc
 );

79 
mou£_fd
 = 
	`›í
–"/dev/mou£", 
O_NONBLOCK
 );

80 
	`uid_ªgi°î_devi˚
–
mou£_fd
, 
Q_NAME
 );

83 
kbd_fd
 = 
	`fûío
–
°dö
 );

84 
	`uid_ªgi°î_devi˚
–
kbd_fd
, 
Q_NAME
 );

86 
ﬁd_mode
 = 0;

88 
rc
 = 
	`uid_£t_kbd_mode
–
kbd_fd
, 
MV_KEY_MODE_SCANCODE
, &
ﬁd_mode
 );

89 
	`¥ötf
–"Kbd OldMode=%X,Ñc=%d\n", 
ﬁd_mode
, 
rc
 );

92 
	`GsSñe˘
();

94 
	`uid_uƒegi°î_devi˚
–
kbd_fd
 );

95 
	`uid_uƒegi°î_devi˚
–
mou£_fd
 );

96 
rc
 = 
	`uid_˛o£_queue
();

97 
	`¥ötf
–"Clo£ QUEUE=%X\n", 
rc
 );

99 
	`˛o£
–
mou£_fd
 );

101 
	`Ârötf
(
°dout
, "AboutÅoÜeave main()\n" );

103 
	}
}

	@rtems/net_cfg.h

20 #ifde‡
__˝lu•lus


28 
	~<°dio.h
>

29 
	~<πems/πems_bsd√t.h
>

36 
	#RTEMS_SET_ETHERNET_ADDRESS


	)

37 #i‡(
deföed
 (
RTEMS_SET_ETHERNET_ADDRESS
))

38 
ëhî√t_addªss
[6] = { 0x20, 0x00, 0x27, 0xAF, 0x03, 0x51 };

41 #unde‡
RTEMS_BSP_NETWORK_DRIVER_NAME


42 
	#RTEMS_BSP_NETWORK_DRIVER_NAME
 "ï0"

	)

44 
πems_3c509_drivî_©èch
–
πems_bsd√t_ifc⁄fig
 *
c⁄fig
 );

45 #unde‡
RTEMS_BSP_NETWORK_DRIVER_ATTACH


46 
	#RTEMS_BSP_NETWORK_DRIVER_ATTACH
 
πems_3c509_drivî_©èch


	)

51 
πems_bsd√t_ifc⁄fig
 
	g√tdrivî_c⁄fig
 =

53 
RTEMS_BSP_NETWORK_DRIVER_NAME
,

54 
RTEMS_BSP_NETWORK_DRIVER_ATTACH
,

56 
NULL
,

58 #i‡(
deföed
 (
RTEMS_USE_BOOTP
))

59 
NULL
,

60 
NULL
,

66 #i‡(
deföed
 (
RTEMS_SET_ETHERNET_ADDRESS
))

67 
ëhî√t_addªss
,

69 
NULL
,

77 
πems_bsd√t_c⁄fig
 
	gπems_bsd√t_c⁄fig
 = {

78 &
√tdrivî_c⁄fig
,

80 #i‡(
deföed
 (
RTEMS_USE_BOOTP
))

81 
πems_bsd√t_do_boŸp
,

83 
NULL
,

90 #i‡(!
deföed
 (
RTEMS_USE_BOOTP
))

103 #i‡(!
deföed
 (
RTEMS_USE_BOOTP
))

104 
	#RTEMS_TFTP_TEST_HOST_NAME
 "192.168.0.2"

	)

105 
	#RTEMS_TFTP_TEST_FILE_NAME
 "roŸ/boŸ.bt"

	)

109 #ifde‡
__˝lu•lus


	@rtems/rtems_init.c

20 
	#CONFIGURE_INIT


	)

21 
	~<°dio.h
>

22 
	~"πemscfg.h
"

25 
	~"√t_cfg.h
"

26 
	~<°dio.h
>

27 
	~<sys/sockë.h
>

28 
	~<√töë/ö.h
>

29 
	~<√tdb.h
>

30 
	~<¨∑/öë.h
>

32 
	~"devi˚.h
"

36 #ifde‡
USE_REMOTE_GDB__


37 
öô_ªmŸe_gdb
( );

38 
	#BREAKPOINT
(Ë
	`asm
(" i¡ $3");

	)

42 *
	gcc_¨gv
[] =

46 
	gcc_¨gc
 = –
cc_¨gv
 ) / ( cc_argv[ 0 ] );

49 
πems_maö
(
¨gc
, **
¨gv
);

54 *
	$POSIX_Inô
–*
¨gumít
 )

56 
size_t
 
°
 = 0;

58 #ifde‡
USE_REMOTE_GDB__


59 
	`öô_ªmŸe_gdb
();

63 
	`DPRINTF
( "\nStarting RTEMS initÅask...\n" );

65 #i‚de‡
NONETWORK


67 
	`πems_bsd√t_öôülize_√tw‹k
();

68 
	`DPRINTF
( "Network Initialization is complete.\n\n" );

71 
°
 = 
_Thªad_Executög
->
Sèπ
.
Inôül_°ack
.
size
;

72 
	`DPRINTF
–"Inô Task Sèck Sizêis: %d\n", 
°
 );

74 
	`πems_maö
–
cc_¨gc
, 
cc_¨gv
 );

75 
	`DPRINTF
( "*** Done ***\n\n\n" );

76 
	`±hªad_exô
–
NULL
 );

77  
NULL
;

78 
	}
}

	@rtems/rtemscfg.h

18 
	~<b•.h
>

19 
	~<ây_drv.h
>

20 
	~<πems/ps2_drv.h
>

21 
	~<πems/fb_vga.h
>

22 
	~<πems/£rül_mou£.h
>

25 #ifde‡
__˝lu•lus


30 
	#CONFIGURE_MAXIMUM_DEVICES
 40

	)

31 
	#CONFIGURE_MAXIMUM_TASKS
 300

	)

32 
	#CONFIGURE_MAXIMUM_TIMERS
 32

	)

33 
	#CONFIGURE_MAXIMUM_SEMAPHORES
 100

	)

34 
	#CONFIGURE_MAXIMUM_MESSAGE_QUEUES
 20

	)

35 
	#CONFIGURE_MAXIMUM_PARTITIONS
 100

	)

36 
	#CONFIGURE_MAXIMUM_REGIONS
 100

	)

39 
	#CONFIGURE_MAXIMUM_POSIX_MUTEXES
 32

	)

40 
	#CONFIGURE_MAXIMUM_POSIX_CONDITION_VARIABLES
 32

	)

41 
	#CONFIGURE_MAXIMUM_POSIX_KEYS
 32

	)

42 
	#CONFIGURE_MAXIMUM_POSIX_QUEUED_SIGNALS
 10

	)

43 
	#CONFIGURE_MAXIMUM_POSIX_THREADS
 256

	)

44 
	#CONFIGURE_MAXIMUM_POSIX_TIMERS
 10

	)

45 
	#CONFIGURE_LIBIO_MAXIMUM_FILE_DESCRIPTORS
 200

	)

48 
	#CONFIGURE_MAXIMUM_POSIX_MESSAGE_QUEUES
 20

	)

50 *
POSIX_Inô
–*
¨gumít
 );

51 
	#CONFIGURE_POSIX_INIT_THREAD_STACK_SIZE
 (512*1024)

	)

52 
	#CONFIGURE_POSIX_INIT_THREAD_TABLE


	)

54 
	#CONFIGURE_HAS_OWN_DEVICE_DRIVER_TABLE


	)

55 
	#CONFIGURE_MICROSECONDS_PER_TICK
 1000

	)

57 
	#PS2_MOUSE
 1

	)

60 
πems_drivî_addªss_èbÀ
 
Devi˚_drivîs
[] =

62 
CONSOLE_DRIVER_TABLE_ENTRY
,

63 
CLOCK_DRIVER_TABLE_ENTRY
,

69 
TTY2_DRIVER_TABLE_ENTRY
,

71 #i‡
PS2_MOUSE


72 
PAUX_DRIVER_TABLE_ENTRY
,

79 
SERIAL_MOUSE_DRIVER_TABLE_ENTRY
,

83 
FBVGA_DRIVER_TABLE_ENTRY
,

85 { 
NULL
,NULL, NULL,NULL,NULL, NULL }

88 
	~<c⁄fdefs.h
>

90 #ifde‡
__˝lu•lus


	@/usr/include/X11/XKBlib.h

29 #i‚de‡
_XKBLIB_H_


30 
	#_XKBLIB_H_


	)

32 
	~<X11/Xlib.h
>

33 
	~<X11/exãnsi⁄s/XKB°r.h
>

35 
	s_XkbAnyEvít
 {

36 
	mty≥
;

37 
	m£rül
;

38 
Boﬁ
 
	m£nd_evít
;

39 
Di•œy
 * 
	mdi•œy
;

40 
Time
 
	mtime
;

41 
	mxkb_ty≥
;

42 
	mdevi˚
;

43 } 
	tXkbAnyEvít
;

45 
	s_XkbNewKeybﬂrdNŸify
 {

46 
	mty≥
;

47 
	m£rül
;

48 
Boﬁ
 
	m£nd_evít
;

49 
Di•œy
 * 
	mdi•œy
;

50 
Time
 
	mtime
;

51 
	mxkb_ty≥
;

52 
	mdevi˚
;

53 
	mﬁd_devi˚
;

54 
	mmö_key_code
;

55 
	mmax_key_code
;

56 
	mﬁd_mö_key_code
;

57 
	mﬁd_max_key_code
;

58 
	mch™ged
;

59 
	mªq_maj‹
;

60 
	mªq_mö‹
;

61 } 
	tXkbNewKeybﬂrdNŸifyEvít
;

63 
	s_XkbM≠NŸifyEvít
 {

64 
	mty≥
;

65 
	m£rül
;

66 
Boﬁ
 
	m£nd_evít
;

67 
Di•œy
 * 
	mdi•œy
;

68 
Time
 
	mtime
;

69 
	mxkb_ty≥
;

70 
	mdevi˚
;

71 
	mch™ged
;

72 
	mÊags
;

73 
	mfú°_ty≥
;

74 
	mnum_ty≥s
;

75 
KeyCode
 
	mmö_key_code
;

76 
KeyCode
 
	mmax_key_code
;

77 
KeyCode
 
	mfú°_key_sym
;

78 
KeyCode
 
	mfú°_key_a˘
;

79 
KeyCode
 
	mfú°_key_behavi‹
;

80 
KeyCode
 
	mfú°_key_ex∂icô
;

81 
KeyCode
 
	mfú°_modm≠_key
;

82 
KeyCode
 
	mfú°_vmodm≠_key
;

83 
	mnum_key_syms
;

84 
	mnum_key_a˘s
;

85 
	mnum_key_behavi‹s
;

86 
	mnum_key_ex∂icô
;

87 
	mnum_modm≠_keys
;

88 
	mnum_vmodm≠_keys
;

89 
	mvmods
;

90 } 
	tXkbM≠NŸifyEvít
;

92 
	s_XkbSèãNŸifyEvít
 {

93 
	mty≥
;

94 
	m£rül
;

95 
Boﬁ
 
	m£nd_evít
;

96 
Di•œy
 * 
	mdi•œy
;

97 
Time
 
	mtime
;

98 
	mxkb_ty≥
;

99 
	mdevi˚
;

100 
	mch™ged
;

101 
	mgroup
;

102 
	mba£_group
;

103 
	mœtched_group
;

104 
	mlocked_group
;

105 
	mmods
;

106 
	mba£_mods
;

107 
	mœtched_mods
;

108 
	mlocked_mods
;

109 
	mcom∑t_°©e
;

110 
	mgøb_mods
;

111 
	mcom∑t_gøb_mods
;

112 
	mlookup_mods
;

113 
	mcom∑t_lookup_mods
;

114 
	m±r_buâ⁄s
;

115 
KeyCode
 
	mkeycode
;

116 
	mevít_ty≥
;

117 
	mªq_maj‹
;

118 
	mªq_mö‹
;

119 } 
	tXkbSèãNŸifyEvít
;

121 
	s_XkbC⁄åﬁsNŸify
 {

122 
	mty≥
;

123 
	m£rül
;

124 
Boﬁ
 
	m£nd_evít
;

125 
Di•œy
 * 
	mdi•œy
;

126 
Time
 
	mtime
;

127 
	mxkb_ty≥
;

128 
	mdevi˚
;

129 
	mch™ged_˘æs
;

130 
	míabÀd_˘æs
;

131 
	míabÀd_˘æ_ch™ges
;

132 
	mnum_groups
;

133 
KeyCode
 
	mkeycode
;

134 
	mevít_ty≥
;

135 
	mªq_maj‹
;

136 
	mªq_mö‹
;

137 } 
	tXkbC⁄åﬁsNŸifyEvít
;

139 
	s_XkbIndiˇt‹NŸify
 {

140 
	mty≥
;

141 
	m£rül
;

142 
Boﬁ
 
	m£nd_evít
;

143 
Di•œy
 * 
	mdi•œy
;

144 
Time
 
	mtime
;

145 
	mxkb_ty≥
;

146 
	mdevi˚
;

147 
	mch™ged
;

148 
	m°©e
;

149 } 
	tXkbIndiˇt‹NŸifyEvít
;

151 
	s_XkbNamesNŸify
 {

152 
	mty≥
;

153 
	m£rül
;

154 
Boﬁ
 
	m£nd_evít
;

155 
Di•œy
 * 
	mdi•œy
;

156 
Time
 
	mtime
;

157 
	mxkb_ty≥
;

158 
	mdevi˚
;

159 
	mch™ged
;

160 
	mfú°_ty≥
;

161 
	mnum_ty≥s
;

162 
	mfú°_lvl
;

163 
	mnum_lvls
;

164 
	mnum_Æü£s
;

165 
	mnum_ødio_groups
;

166 
	mch™ged_vmods
;

167 
	mch™ged_groups
;

168 
	mch™ged_ödiˇt‹s
;

169 
	mfú°_key
;

170 
	mnum_keys
;

171 } 
	tXkbNamesNŸifyEvít
;

173 
	s_XkbCom∑tM≠NŸify
 {

174 
	mty≥
;

175 
	m£rül
;

176 
Boﬁ
 
	m£nd_evít
;

177 
Di•œy
 * 
	mdi•œy
;

178 
Time
 
	mtime
;

179 
	mxkb_ty≥
;

180 
	mdevi˚
;

181 
	mch™ged_groups
;

182 
	mfú°_si
;

183 
	mnum_si
;

184 
	mnum_tŸÆ_si
;

185 } 
	tXkbCom∑tM≠NŸifyEvít
;

187 
	s_XkbBñlNŸify
 {

188 
	mty≥
;

189 
	m£rül
;

190 
Boﬁ
 
	m£nd_evít
;

191 
Di•œy
 * 
	mdi•œy
;

192 
Time
 
	mtime
;

193 
	mxkb_ty≥
;

194 
	mdevi˚
;

195 
	m≥r˚¡
;

196 
	mpôch
;

197 
	mduøti⁄
;

198 
	mbñl_˛ass
;

199 
	mbñl_id
;

200 
Atom
 
	m«me
;

201 
Wödow
 
	mwödow
;

202 
Boﬁ
 
	mevít_⁄ly
;

203 } 
	tXkbBñlNŸifyEvít
;

205 
	s_XkbA˘i⁄Mesßge
 {

206 
	mty≥
;

207 
	m£rül
;

208 
Boﬁ
 
	m£nd_evít
;

209 
Di•œy
 * 
	mdi•œy
;

210 
Time
 
	mtime
;

211 
	mxkb_ty≥
;

212 
	mdevi˚
;

213 
KeyCode
 
	mkeycode
;

214 
Boﬁ
 
	m¥ess
;

215 
Boﬁ
 
	mkey_evít_fﬁlows
;

216 
	mgroup
;

217 
	mmods
;

218 
	mmesßge
[
XkbA˘i⁄MesßgeLígth
+1];

220 } 
	tXkbA˘i⁄MesßgeEvít
;

222 
	s_XkbAc˚ssXNŸify
 {

223 
	mty≥
;

224 
	m£rül
;

225 
Boﬁ
 
	m£nd_evít
;

226 
Di•œy
 * 
	mdi•œy
;

227 
Time
 
	mtime
;

228 
	mxkb_ty≥
;

229 
	mdevi˚
;

230 
	mdëaû
;

231 
	mkeycode
;

232 
	msk_dñay
;

233 
	mdeboun˚_dñay
;

234 } 
	tXkbAc˚ssXNŸifyEvít
;

236 
	s_XkbExãnsi⁄Devi˚NŸify
 {

237 
	mty≥
;

238 
	m£rül
;

239 
Boﬁ
 
	m£nd_evít
;

240 
Di•œy
 * 
	mdi•œy
;

241 
Time
 
	mtime
;

242 
	mxkb_ty≥
;

243 
	mdevi˚
;

244 
	mªas⁄
;

245 
	msuµ‹ãd
;

246 
	munsuµ‹ãd
;

248 
	mfú°_bä
;

249 
	mnum_bäs
;

250 
	mÀds_deföed
;

251 
	mÀd_°©e
;

252 
	mÀd_˛ass
;

253 
	mÀd_id
;

254 } 
	tXkbExãnsi⁄Devi˚NŸifyEvít
;

256 
	u_XkbEvít
 {

257 
	mty≥
;

258 
XkbAnyEvít
 
	m™y
;

259 
XkbNewKeybﬂrdNŸifyEvít
 
	m√w_kbd
;

260 
XkbM≠NŸifyEvít
 
	mm≠
;

261 
XkbSèãNŸifyEvít
 
	m°©e
;

262 
XkbC⁄åﬁsNŸifyEvít
 
	m˘æs
;

263 
XkbIndiˇt‹NŸifyEvít
 
	mödiˇt‹s
;

264 
XkbNamesNŸifyEvít
 
	m«mes
;

265 
XkbCom∑tM≠NŸifyEvít
 
	mcom∑t
;

266 
XkbBñlNŸifyEvít
 
	mbñl
;

267 
XkbA˘i⁄MesßgeEvít
 
	mmesßge
;

268 
XkbAc˚ssXNŸifyEvít
 
	mac˚ssx
;

269 
XkbExãnsi⁄Devi˚NŸifyEvít
 
	mdevi˚
;

270 
XEvít
 
	mc‹e
;

271 } 
	tXkbEvít
;

273 
_XkbKbdDpySèã
 
	tXkbKbdDpySèãRec
,*
	tXkbKbdDpySèãPå
;

276 
	#XkbOD_Suc˚ss
 0

	)

277 
	#XkbOD_BadLibøryVîsi⁄
 1

	)

278 
	#XkbOD_C⁄√˘i⁄Refu£d
 2

	)

279 
	#XkbOD_N⁄XkbSîvî
 3

	)

280 
	#XkbOD_BadSîvîVîsi⁄
 4

	)

283 
	#XkbLC_F‹˚L©ö1Lookup
 (1<<0)

	)

284 
	#XkbLC_C⁄sumeLookupMods
 (1<<1)

	)

285 
	#XkbLC_AlwaysC⁄sumeShi·AndLock
 (1<<2)

	)

286 
	#XkbLC_Ign‹eNewKeybﬂrds
 (1<<3)

	)

287 
	#XkbLC_C⁄åﬁFÆlback
 (1<<4)

	)

288 
	#XkbLC_C⁄sumeKeysOnCompo£Faû
 (1<<29)

	)

289 
	#XkbLC_Compo£LED
 (1<<30)

	)

290 
	#XkbLC_BìpOnCompo£Faû
 (1<<31)

	)

292 
	#XkbLC_AŒCompo£C⁄åﬁs
 (0xc0000000)

	)

293 
	#XkbLC_AŒC⁄åﬁs
 (0xc000001f)

	)

295 
_XFUNCPROTOBEGIN


297 
Boﬁ
 
XkbIgn‹eExãnsi⁄
(

298 
Boﬁ


301 
Di•œy
 *
XkbO≥nDi•œy
(

310 
Boﬁ
 
XkbQuîyExãnsi⁄
(

311 
Di•œy
 * ,

319 
Boﬁ
 
XkbU£Exãnsi⁄
(

320 
Di•œy
 * ,

325 
Boﬁ
 
XkbLibøryVîsi⁄
(

330 
XkbSëXlibC⁄åﬁs
(

331 
Di•œy
* ,

336 
XkbGëXlibC⁄åﬁs
(

337 
Di•œy
*

340 
XkbXlibC⁄åﬁsIm∂emíãd
();

342 
	$Atom
 (*
	tXkbI¡înAtomFunc
)(

343 
	tDi•œy
 * ,

344 
	t_Xc⁄°
 * ,

345 
	tBoﬁ


348 * (*
	tXkbGëAtomNameFunc
)(

349 
	tDi•œy
 * ,

350 
	tAtom


353 
	`XkbSëAtomFuncs
(

354 
XkbI¡înAtomFunc
 ,

355 
XkbGëAtomNameFunc


358 
KeySym
 
	`XkbKeycodeToKeysym
(

359 
Di•œy
 * ,

360 #i‡
NìdWidePrŸŸy≥s


363 
KeyCode
 ,

369 
	`XkbKeysymToModifõrs
(

370 
Di•œy
 * ,

371 
KeySym


374 
Boﬁ
 
	`XkbLookupKeySym
(

375 
Di•œy
 * ,

376 
KeyCode
 ,

379 
KeySym
 *

382 
	`XkbLookupKeyBödög
(

383 
Di•œy
 * ,

384 
KeySym
 ,

391 
Boﬁ
 
	`XkbTøn¶©eKeyCode
(

392 
XkbDescPå
 ,

393 
KeyCode
 ,

396 
KeySym
 *

399 
	`XkbTøn¶©eKeySym
(

400 
Di•œy
 * ,

401 
KeySym
 * ,

408 
Boﬁ
 
	`XkbSëAutoRïótR©e
(

409 
Di•œy
 * ,

415 
Boﬁ
 
	`XkbGëAutoRïótR©e
(

416 
Di•œy
 * ,

422 
Boﬁ
 
	`XkbCh™geE«bÀdC⁄åﬁs
(

423 
Di•œy
 * ,

429 
Boﬁ
 
	`XkbDevi˚Bñl
(

430 
Di•œy
 * ,

431 
Wödow
 ,

436 
Atom


439 
Boﬁ
 
	`XkbF‹˚Devi˚Bñl
(

440 
Di•œy
 * ,

447 
Boﬁ
 
	`XkbDevi˚BñlEvít
(

448 
Di•œy
 * ,

449 
Wödow
 ,

454 
Atom


457 
Boﬁ
 
	`XkbBñl
(

458 
Di•œy
 * ,

459 
Wödow
 ,

461 
Atom


464 
Boﬁ
 
	`XkbF‹˚Bñl
(

465 
Di•œy
 * ,

469 
Boﬁ
 
	`XkbBñlEvít
(

470 
Di•œy
 * ,

471 
Wödow
 ,

473 
Atom


476 
Boﬁ
 
	`XkbSñe˘Evíts
(

477 
Di•œy
 * ,

483 
Boﬁ
 
	`XkbSñe˘EvítDëaûs
(

484 
Di•œy
 * ,

491 
	`XkbNŸeM≠Ch™ges
(

492 
XkbM≠Ch™gesPå
 ,

493 
XkbM≠NŸifyEvít
 * ,

497 
	`XkbNŸeNameCh™ges
(

498 
XkbNameCh™gesPå
 ,

499 
XkbNamesNŸifyEvít
 * ,

503 
Sètus
 
	`XkbGëIndiˇt‹Sèã
(

504 
Di•œy
 * ,

509 
Sètus
 
	`XkbGëDevi˚Indiˇt‹Sèã
(

510 
Di•œy
 * ,

517 
Sètus
 
	`XkbGëIndiˇt‹M≠
(

518 
Di•œy
 * ,

520 
XkbDescPå


523 
Boﬁ
 
	`XkbSëIndiˇt‹M≠
(

524 
Di•œy
 * ,

526 
XkbDescPå


529 
	#XkbNŸeIndiˇt‹M≠Ch™ges
(
o
,
n
,
w
) \

530 ((
o
)->
m≠_ch™ges
|=((
n
)->m≠_ch™ges&(
w
)))

	)

531 
	#XkbNŸeIndiˇt‹SèãCh™ges
(
o
,
n
,
w
)\

532 ((
o
)->
°©e_ch™ges
|=((
n
)->°©e_ch™ges&(
w
)))

	)

533 
	#XkbGëIndiˇt‹M≠Ch™ges
(
d
,
x
,
c
) \

534 (
	`XkbGëIndiˇt‹M≠
((
d
),(
c
)->
m≠_ch™ges
,
x
)

	)

535 
	#XkbCh™geIndiˇt‹M≠s
(
d
,
x
,
c
) \

536 (
	`XkbSëIndiˇt‹M≠
((
d
),(
c
)->
m≠_ch™ges
,
x
))

	)

538 
Boﬁ
 
	`XkbGëNamedIndiˇt‹
(

539 
Di•œy
 * ,

540 
Atom
 ,

542 
Boﬁ
 * ,

543 
XkbIndiˇt‹M≠På
 ,

544 
Boﬁ
 *

547 
Boﬁ
 
	`XkbGëNamedDevi˚Indiˇt‹
(

548 
Di•œy
 * ,

552 
Atom
 ,

554 
Boﬁ
 * ,

555 
XkbIndiˇt‹M≠På
 ,

556 
Boﬁ
 *

559 
Boﬁ
 
	`XkbSëNamedIndiˇt‹
(

560 
Di•œy
 * ,

561 
Atom
 ,

562 
Boﬁ
 ,

563 
Boﬁ
 ,

564 
Boﬁ
 ,

565 
XkbIndiˇt‹M≠På


568 
Boﬁ
 
	`XkbSëNamedDevi˚Indiˇt‹
(

569 
Di•œy
 * ,

573 
Atom
 ,

574 
Boﬁ
 ,

575 
Boﬁ
 ,

576 
Boﬁ
 ,

577 
XkbIndiˇt‹M≠På


580 
Boﬁ
 
	`XkbLockModifõrs
(

581 
Di•œy
 * ,

587 
Boﬁ
 
	`XkbL©chModifõrs
(

588 
Di•œy
 * ,

594 
Boﬁ
 
	`XkbLockGroup
(

595 
Di•œy
 * ,

600 
Boﬁ
 
	`XkbL©chGroup
(

601 
Di•œy
 * ,

606 
Boﬁ
 
	`XkbSëSîvîI¡î«lMods
(

607 
Di•œy
 * ,

615 
Boﬁ
 
	`XkbSëIgn‹eLockMods
(

616 
Di•œy
 * ,

625 
Boﬁ
 
	`XkbVútuÆModsToRól
(

626 
XkbDescPå
 ,

631 
Boﬁ
 
	`XkbCompuãEf„˘iveM≠
(

632 
XkbDescPå
 ,

633 
XkbKeyTy≥På
 ,

637 
Sètus
 
	`XkbInôC™⁄iˇlKeyTy≥s
(

638 
XkbDescPå
 ,

643 
XkbDescPå
 
	`XkbAŒocKeybﬂrd
(

647 
	`XkbFªeKeybﬂrd
(

648 
XkbDescPå
 ,

650 
Boﬁ


653 
Sètus
 
	`XkbAŒocClõ¡M≠
(

654 
XkbDescPå
 ,

659 
Sètus
 
	`XkbAŒocSîvîM≠
(

660 
XkbDescPå
 ,

665 
	`XkbFªeClõ¡M≠
(

666 
XkbDescPå
 ,

668 
Boﬁ


671 
	`XkbFªeSîvîM≠
(

672 
XkbDescPå
 ,

674 
Boﬁ


677 
XkbKeyTy≥På
 
	`XkbAddKeyTy≥
(

678 
XkbDescPå
 ,

679 
Atom
 ,

681 
Boﬁ
 ,

685 
Sètus
 
	`XkbAŒocIndiˇt‹M≠s
(

686 
XkbDescPå


689 
	`XkbFªeIndiˇt‹M≠s
(

690 
XkbDescPå


693 
XkbDescPå
 
	`XkbGëM≠
(

694 
Di•œy
 * ,

699 
Sètus
 
	`XkbGëUpd©edM≠
(

700 
Di•œy
 * ,

702 
XkbDescPå


705 
Sètus
 
	`XkbGëM≠Ch™ges
(

706 
Di•œy
 * ,

707 
XkbDescPå
 ,

708 
XkbM≠Ch™gesPå


712 
Sètus
 
	`XkbRe‰eshKeybﬂrdM≠pög
(

713 
XkbM≠NŸifyEvít
 *

716 
Sètus
 
	`XkbGëKeyTy≥s
(

717 
Di•œy
 * ,

720 
XkbDescPå


723 
Sètus
 
	`XkbGëKeySyms
(

724 
Di•œy
 * ,

727 
XkbDescPå


730 
Sètus
 
	`XkbGëKeyA˘i⁄s
(

731 
Di•œy
 * ,

734 
XkbDescPå


737 
Sètus
 
	`XkbGëKeyBehavi‹s
(

738 
Di•œy
 * ,

741 
XkbDescPå


744 
Sètus
 
	`XkbGëVútuÆMods
(

745 
Di•œy
 * ,

747 
XkbDescPå


750 
Sètus
 
	`XkbGëKeyEx∂icôComp⁄íts
(

751 
Di•œy
 * ,

754 
XkbDescPå


757 
Sètus
 
	`XkbGëKeyModifõrM≠
(

758 
Di•œy
 * ,

761 
XkbDescPå


764 
Sètus
 
	`XkbGëKeyVútuÆModM≠
(

765 
Di•œy
 * ,

768 
XkbDescPå


771 
Sètus
 
	`XkbAŒocC⁄åﬁs
(

772 
XkbDescPå
 ,

776 
	`XkbFªeC⁄åﬁs
(

777 
XkbDescPå
 ,

779 
Boﬁ


782 
Sètus
 
	`XkbGëC⁄åﬁs
(

783 
Di•œy
 * ,

785 
XkbDescPå


788 
Boﬁ
 
	`XkbSëC⁄åﬁs
(

789 
Di•œy
 * ,

791 
XkbDescPå


794 
	`XkbNŸeC⁄åﬁsCh™ges
(

795 
XkbC⁄åﬁsCh™gesPå
 ,

796 
XkbC⁄åﬁsNŸifyEvít
 * ,

800 
	#XkbGëC⁄åﬁsCh™ges
(
d
,
x
,
c
Ë
	`XkbGëC⁄åﬁs
(d,(c)->
ch™ged_˘æs
,x)

	)

801 
	#XkbCh™geC⁄åﬁs
(
d
,
x
,
c
Ë
	`XkbSëC⁄åﬁs
(d,(c)->
ch™ged_˘æs
,x)

	)

803 
Sètus
 
	`XkbAŒocCom∑tM≠
(

804 
XkbDescPå
 ,

809 
	`XkbFªeCom∑tM≠
(

810 
XkbDescPå
 ,

812 
Boﬁ


815 
Sètus
 
	`XkbGëCom∑tM≠
(

816 
Di•œy
 * ,

818 
XkbDescPå


821 
Boﬁ
 
	`XkbSëCom∑tM≠
(

822 
Di•œy
 * ,

824 
XkbDescPå
 ,

825 
Boﬁ


828 
XkbSymI¡î¥ëPå
 
	`XkbAddSymI¡î¥ë
(

829 
XkbDescPå
 ,

830 
XkbSymI¡î¥ëPå
 ,

831 
Boﬁ
 ,

832 
XkbCh™gesPå


835 
Sètus
 
	`XkbAŒocNames
(

836 
XkbDescPå
 ,

842 
Sètus
 
	`XkbGëNames
(

843 
Di•œy
 * ,

845 
XkbDescPå


848 
Boﬁ
 
	`XkbSëNames
(

849 
Di•œy
 * ,

853 
XkbDescPå


856 
Boﬁ
 
	`XkbCh™geNames
(

857 
Di•œy
 * ,

858 
XkbDescPå
 ,

859 
XkbNameCh™gesPå


862 
	`XkbFªeNames
(

863 
XkbDescPå
 ,

865 
Boﬁ


869 
Sètus
 
	`XkbGëSèã
(

870 
Di•œy
 * ,

872 
XkbSèãPå


875 
Boﬁ
 
	`XkbSëM≠
(

876 
Di•œy
 * ,

878 
XkbDescPå


881 
Boﬁ
 
	`XkbCh™geM≠
(

882 
Di•œy
* ,

883 
XkbDescPå
 ,

884 
XkbM≠Ch™gesPå


887 
Boﬁ
 
	`XkbSëDëe˘abÀAutoRïót
(

888 
Di•œy
 * ,

889 
Boﬁ
 ,

890 
Boﬁ
 *

893 
Boﬁ
 
	`XkbGëDëe˘abÀAutoRïót
(

894 
Di•œy
 * ,

895 
Boﬁ
 *

898 
Boﬁ
 
	`XkbSëAutoRe£tC⁄åﬁs
(

899 
Di•œy
 * ,

905 
Boﬁ
 
	`XkbGëAutoRe£tC⁄åﬁs
(

906 
Di•œy
 * ,

911 
Boﬁ
 
	`XkbSëPîClõ¡C⁄åﬁs
(

912 
Di•œy
 * ,

917 
Boﬁ
 
	`XkbGëPîClõ¡C⁄åﬁs
(

918 
Di•œy
 * ,

922 
Sètus
 
	`XkbC›yKeyTy≥
(

923 
XkbKeyTy≥På
 ,

924 
XkbKeyTy≥På


927 
Sètus
 
	`XkbC›yKeyTy≥s
(

928 
XkbKeyTy≥På
 ,

929 
XkbKeyTy≥På
 ,

933 
Sètus
 
	`XkbResizeKeyTy≥
(

934 
XkbDescPå
 ,

937 
Boﬁ
 ,

941 
KeySym
 *
	`XkbResizeKeySyms
(

942 
XkbDescPå
 ,

947 
XkbA˘i⁄
 *
	`XkbResizeKeyA˘i⁄s
(

948 
XkbDescPå
 ,

953 
Sètus
 
	`XkbCh™geTy≥sOfKey
(

954 
XkbDescPå
 ,

959 
XkbM≠Ch™gesPå


962 
Sètus
 
	`XkbCh™geKeycodeR™ge
(

963 
XkbDescPå
 ,

966 
XkbCh™gesPå


971 
XkbComp⁄ítLi°På
 
	`XkbLi°Comp⁄íts
(

972 
Di•œy
 * ,

974 
XkbComp⁄ítNamesPå
 ,

978 
	`XkbFªeComp⁄ítLi°
(

979 
XkbComp⁄ítLi°På


982 
XkbDescPå
 
	`XkbGëKeybﬂrd
(

983 
Di•œy
 * ,

988 
XkbDescPå
 
	`XkbGëKeybﬂrdByName
(

989 
Di•œy
 * ,

991 
XkbComp⁄ítNamesPå
 ,

994 
Boﬁ


999 
	`XkbKeyTy≥sF‹C‹eSymbﬁs
(

1000 
XkbDescPå
 ,

1002 
KeySym
 * ,

1005 
KeySym
 *

1008 
Boﬁ
 
	`XkbAµlyCom∑tM≠ToKey
(

1009 
XkbDescPå
 ,

1010 
KeyCode
 ,

1011 
XkbCh™gesPå


1014 
Boﬁ
 
	`XkbUpd©eM≠FromC‹e
(

1015 
XkbDescPå
 ,

1016 
KeyCode
 ,

1019 
KeySym
 * ,

1020 
XkbCh™gesPå


1025 
XkbDevi˚LedInfoPå
 
	`XkbAddDevi˚LedInfo
(

1026 
XkbDevi˚InfoPå
 ,

1031 
Sètus
 
	`XkbResizeDevi˚Buâ⁄A˘i⁄s
(

1032 
XkbDevi˚InfoPå
 ,

1036 
XkbDevi˚InfoPå
 
	`XkbAŒocDevi˚Info
(

1042 
	`XkbFªeDevi˚Info
(

1043 
XkbDevi˚InfoPå
 ,

1045 
Boﬁ


1048 
	`XkbNŸeDevi˚Ch™ges
(

1049 
XkbDevi˚Ch™gesPå
 ,

1050 
XkbExãnsi⁄Devi˚NŸifyEvít
 * ,

1054 
XkbDevi˚InfoPå
 
	`XkbGëDevi˚Info
(

1055 
Di•œy
 * ,

1062 
Sètus
 
	`XkbGëDevi˚InfoCh™ges
(

1063 
Di•œy
 * ,

1064 
XkbDevi˚InfoPå
 ,

1065 
XkbDevi˚Ch™gesPå


1068 
Sètus
 
	`XkbGëDevi˚Buâ⁄A˘i⁄s
(

1069 
Di•œy
 * ,

1070 
XkbDevi˚InfoPå
 ,

1071 
Boﬁ
 ,

1076 
Sètus
 
	`XkbGëDevi˚LedInfo
(

1077 
Di•œy
 * ,

1078 
XkbDevi˚InfoPå
 ,

1084 
Boﬁ
 
	`XkbSëDevi˚Info
(

1085 
Di•œy
 * ,

1087 
XkbDevi˚InfoPå


1090 
Boﬁ
 
	`XkbCh™geDevi˚Info
(

1091 
Di•œy
* ,

1092 
XkbDevi˚InfoPå
 ,

1093 
XkbDevi˚Ch™gesPå


1096 
Boﬁ
 
	`XkbSëDevi˚LedInfo
(

1097 
Di•œy
 * ,

1098 
XkbDevi˚InfoPå
 ,

1104 
Boﬁ
 
	`XkbSëDevi˚Buâ⁄A˘i⁄s
(

1105 
Di•œy
 * ,

1106 
XkbDevi˚InfoPå
 ,

1113 
	`XkbToC⁄åﬁ
(

1119 
Boﬁ
 
	`XkbSëDebuggögFœgs
(

1120 
Di•œy
 * ,

1130 
Boﬁ
 
	`XkbAµlyVútuÆModCh™ges
(

1131 
XkbDescPå
 ,

1133 
XkbCh™gesPå


1136 
Boﬁ
 
	`XkbUpd©eA˘i⁄VútuÆMods
(

1137 
XkbDescPå
 ,

1138 
XkbA˘i⁄
 * ,

1142 
	`XkbUpd©eKeyTy≥VútuÆMods
(

1143 
XkbDescPå
 ,

1144 
XkbKeyTy≥På
 ,

1146 
XkbCh™gesPå


1149 
_XFUNCPROTOEND


	@/usr/include/X11/Xatom.h

1 #i‚de‡
XATOM_H


2 
	#XATOM_H
 1

	)

9 
	#XA_PRIMARY
 ((
Atom
Ë1)

	)

10 
	#XA_SECONDARY
 ((
Atom
Ë2)

	)

11 
	#XA_ARC
 ((
Atom
Ë3)

	)

12 
	#XA_ATOM
 ((
Atom
Ë4)

	)

13 
	#XA_BITMAP
 ((
Atom
Ë5)

	)

14 
	#XA_CARDINAL
 ((
Atom
Ë6)

	)

15 
	#XA_COLORMAP
 ((
Atom
Ë7)

	)

16 
	#XA_CURSOR
 ((
Atom
Ë8)

	)

17 
	#XA_CUT_BUFFER0
 ((
Atom
Ë9)

	)

18 
	#XA_CUT_BUFFER1
 ((
Atom
Ë10)

	)

19 
	#XA_CUT_BUFFER2
 ((
Atom
Ë11)

	)

20 
	#XA_CUT_BUFFER3
 ((
Atom
Ë12)

	)

21 
	#XA_CUT_BUFFER4
 ((
Atom
Ë13)

	)

22 
	#XA_CUT_BUFFER5
 ((
Atom
Ë14)

	)

23 
	#XA_CUT_BUFFER6
 ((
Atom
Ë15)

	)

24 
	#XA_CUT_BUFFER7
 ((
Atom
Ë16)

	)

25 
	#XA_DRAWABLE
 ((
Atom
Ë17)

	)

26 
	#XA_FONT
 ((
Atom
Ë18)

	)

27 
	#XA_INTEGER
 ((
Atom
Ë19)

	)

28 
	#XA_PIXMAP
 ((
Atom
Ë20)

	)

29 
	#XA_POINT
 ((
Atom
Ë21)

	)

30 
	#XA_RECTANGLE
 ((
Atom
Ë22)

	)

31 
	#XA_RESOURCE_MANAGER
 ((
Atom
Ë23)

	)

32 
	#XA_RGB_COLOR_MAP
 ((
Atom
Ë24)

	)

33 
	#XA_RGB_BEST_MAP
 ((
Atom
Ë25)

	)

34 
	#XA_RGB_BLUE_MAP
 ((
Atom
Ë26)

	)

35 
	#XA_RGB_DEFAULT_MAP
 ((
Atom
Ë27)

	)

36 
	#XA_RGB_GRAY_MAP
 ((
Atom
Ë28)

	)

37 
	#XA_RGB_GREEN_MAP
 ((
Atom
Ë29)

	)

38 
	#XA_RGB_RED_MAP
 ((
Atom
Ë30)

	)

39 
	#XA_STRING
 ((
Atom
Ë31)

	)

40 
	#XA_VISUALID
 ((
Atom
Ë32)

	)

41 
	#XA_WINDOW
 ((
Atom
Ë33)

	)

42 
	#XA_WM_COMMAND
 ((
Atom
Ë34)

	)

43 
	#XA_WM_HINTS
 ((
Atom
Ë35)

	)

44 
	#XA_WM_CLIENT_MACHINE
 ((
Atom
Ë36)

	)

45 
	#XA_WM_ICON_NAME
 ((
Atom
Ë37)

	)

46 
	#XA_WM_ICON_SIZE
 ((
Atom
Ë38)

	)

47 
	#XA_WM_NAME
 ((
Atom
Ë39)

	)

48 
	#XA_WM_NORMAL_HINTS
 ((
Atom
Ë40)

	)

49 
	#XA_WM_SIZE_HINTS
 ((
Atom
Ë41)

	)

50 
	#XA_WM_ZOOM_HINTS
 ((
Atom
Ë42)

	)

51 
	#XA_MIN_SPACE
 ((
Atom
Ë43)

	)

52 
	#XA_NORM_SPACE
 ((
Atom
Ë44)

	)

53 
	#XA_MAX_SPACE
 ((
Atom
Ë45)

	)

54 
	#XA_END_SPACE
 ((
Atom
Ë46)

	)

55 
	#XA_SUPERSCRIPT_X
 ((
Atom
Ë47)

	)

56 
	#XA_SUPERSCRIPT_Y
 ((
Atom
Ë48)

	)

57 
	#XA_SUBSCRIPT_X
 ((
Atom
Ë49)

	)

58 
	#XA_SUBSCRIPT_Y
 ((
Atom
Ë50)

	)

59 
	#XA_UNDERLINE_POSITION
 ((
Atom
Ë51)

	)

60 
	#XA_UNDERLINE_THICKNESS
 ((
Atom
Ë52)

	)

61 
	#XA_STRIKEOUT_ASCENT
 ((
Atom
Ë53)

	)

62 
	#XA_STRIKEOUT_DESCENT
 ((
Atom
Ë54)

	)

63 
	#XA_ITALIC_ANGLE
 ((
Atom
Ë55)

	)

64 
	#XA_X_HEIGHT
 ((
Atom
Ë56)

	)

65 
	#XA_QUAD_WIDTH
 ((
Atom
Ë57)

	)

66 
	#XA_WEIGHT
 ((
Atom
Ë58)

	)

67 
	#XA_POINT_SIZE
 ((
Atom
Ë59)

	)

68 
	#XA_RESOLUTION
 ((
Atom
Ë60)

	)

69 
	#XA_COPYRIGHT
 ((
Atom
Ë61)

	)

70 
	#XA_NOTICE
 ((
Atom
Ë62)

	)

71 
	#XA_FONT_NAME
 ((
Atom
Ë63)

	)

72 
	#XA_FAMILY_NAME
 ((
Atom
Ë64)

	)

73 
	#XA_FULL_NAME
 ((
Atom
Ë65)

	)

74 
	#XA_CAP_HEIGHT
 ((
Atom
Ë66)

	)

75 
	#XA_WM_CLASS
 ((
Atom
Ë67)

	)

76 
	#XA_WM_TRANSIENT_FOR
 ((
Atom
Ë68)

	)

78 
	#XA_LAST_PREDEFINED
 ((
Atom
Ë68)

	)

	@/usr/include/X11/Xlib.h

36 #i‚de‡
_XLIB_H_


37 
	#_XLIB_H_


	)

39 
	#XlibS≥cifiˇti⁄Rñó£
 6

	)

41 #ifde‡
USG


42 #i‚de‡
__TYPES__


43 
	~<sys/ty≥s.h
>

44 
	#__TYPES__


	)

47 #i‡
deföed
(
_POSIX_SOURCE
Ë&& deföed(
MOTOROLA
)

48 #unde‡
_POSIX_SOURCE


49 
	~<sys/ty≥s.h
>

50 
	#_POSIX_SOURCE


	)

52 
	~<sys/ty≥s.h
>

56 #i‡
deföed
(
__SCO__
Ë|| deföed(
__UNIXWARE__
)

57 
	~<°döt.h
>

60 
	~<X11/X.h
>

63 
	~<X11/Xfun˝rŸo.h
>

64 
	~<X11/Xosdefs.h
>

66 #i‚de‡
X_WCHAR


67 #ifde‡
X_NOT_STDC_ENV


68 #i‚de‡
ISC


69 
	#X_WCHAR


	)

74 #i‚de‡
X_WCHAR


75 
	~<°ddef.h
>

77 #ifde‡
__UNIXOS2__


78 
	~<°dlib.h
>

81 
	twch¨_t
;

85 #i‡
deföed
(
ISC
Ë&& deföed(
USE_XMBTOWC
)

86 
	#w˘omb
(
a
,
b
Ë
	`_Xw˘omb
◊,b)

	)

87 
	#mbÀn
(
a
,
b
Ë
	`_XmbÀn
◊,b)

	)

88 #i‚de‡
USE_XWCHAR_STRING


89 
	#mbtowc
(
a
,
b
,
c
Ë
	`_Xmbtowc
◊,b,c)

	)

94 
_XmbÀn
(

95 #ifde‡
ISC


96 c⁄° *
°r
,

97 
size_t
 
Àn


99 *
°r
,

100 
Àn


106 
	#X_HAVE_UTF8_STRING
 1

	)

108 *
	tXPoöãr
;

110 
	#Boﬁ
 

	)

111 
	#Sètus
 

	)

112 
	#True
 1

	)

113 
	#FÆ£
 0

	)

115 
	#QueuedAÃódy
 0

	)

116 
	#QueuedA·îRódög
 1

	)

117 
	#QueuedA·îFlush
 2

	)

119 
	#C⁄√˘i⁄Numbî
(
dpy
Ë(((
_XPrivDi•œy
)dpy)->
fd
)

	)

120 
	#RoŸWödow
(
dpy
, 
s¸
Ë(
	`S¸ìnOfDi•œy
(dpy,s¸)->
roŸ
)

	)

121 
	#DeÁu…S¸ìn
(
dpy
Ë(((
_XPrivDi•œy
)dpy)->
deÁu…_s¸ìn
)

	)

122 
	#DeÁu…RoŸWödow
(
dpy
Ë(
	`S¸ìnOfDi•œy
(dpy,
	`DeÁu…S¸ìn
(dpy))->
roŸ
)

	)

123 
	#DeÁu…VisuÆ
(
dpy
, 
s¸
Ë(
	`S¸ìnOfDi•œy
(dpy,s¸)->
roŸ_visuÆ
)

	)

124 
	#DeÁu…GC
(
dpy
, 
s¸
Ë(
	`S¸ìnOfDi•œy
(dpy,s¸)->
deÁu…_gc
)

	)

125 
	#BœckPixñ
(
dpy
, 
s¸
Ë(
	`S¸ìnOfDi•œy
(dpy,s¸)->
bœck_pixñ
)

	)

126 
	#WhôePixñ
(
dpy
, 
s¸
Ë(
	`S¸ìnOfDi•œy
(dpy,s¸)->
whôe_pixñ
)

	)

127 
	#AŒPœ√s
 (()~0L)

	)

128 
	#QLígth
(
dpy
Ë(((
_XPrivDi•œy
)dpy)->
qÀn
)

	)

129 
	#Di•œyWidth
(
dpy
, 
s¸
Ë(
	`S¸ìnOfDi•œy
(dpy,s¸)->
width
)

	)

130 
	#Di•œyHeight
(
dpy
, 
s¸
Ë(
	`S¸ìnOfDi•œy
(dpy,s¸)->
height
)

	)

131 
	#Di•œyWidthMM
(
dpy
, 
s¸
)(
	`S¸ìnOfDi•œy
(dpy,s¸)->
mwidth
)

	)

132 
	#Di•œyHeightMM
(
dpy
, 
s¸
)(
	`S¸ìnOfDi•œy
(dpy,s¸)->
mheight
)

	)

133 
	#Di•œyPœ√s
(
dpy
, 
s¸
Ë(
	`S¸ìnOfDi•œy
(dpy,s¸)->
roŸ_dïth
)

	)

134 
	#Di•œyCñls
(
dpy
, 
s¸
Ë(
	`DeÁu…VisuÆ
(dpy,s¸)->
m≠_íåõs
)

	)

135 
	#S¸ìnCou¡
(
dpy
Ë(((
_XPrivDi•œy
)dpy)->
ns¸ìns
)

	)

136 
	#SîvîVíd‹
(
dpy
Ë(((
_XPrivDi•œy
)dpy)->
víd‹
)

	)

137 
	#PrŸocﬁVîsi⁄
(
dpy
Ë(((
_XPrivDi•œy
)dpy)->
¥Ÿo_maj‹_vîsi⁄
)

	)

138 
	#PrŸocﬁRevisi⁄
(
dpy
Ë(((
_XPrivDi•œy
)dpy)->
¥Ÿo_mö‹_vîsi⁄
)

	)

139 
	#Víd‹Rñó£
(
dpy
Ë(((
_XPrivDi•œy
)dpy)->
ªÀa£
)

	)

140 
	#Di•œySåög
(
dpy
Ë(((
_XPrivDi•œy
)dpy)->
di•œy_«me
)

	)

141 
	#DeÁu…Dïth
(
dpy
, 
s¸
Ë(
	`S¸ìnOfDi•œy
(dpy,s¸)->
roŸ_dïth
)

	)

142 
	#DeÁu…Cﬁ‹m≠
(
dpy
, 
s¸
)(
	`S¸ìnOfDi•œy
(dpy,s¸)->
cm≠
)

	)

143 
	#Bôm≠Unô
(
dpy
Ë(((
_XPrivDi•œy
)dpy)->
bôm≠_unô
)

	)

144 
	#Bôm≠BôOrdî
(
dpy
Ë(((
_XPrivDi•œy
)dpy)->
bôm≠_bô_‹dî
)

	)

145 
	#Bôm≠Pad
(
dpy
Ë(((
_XPrivDi•œy
)dpy)->
bôm≠_∑d
)

	)

146 
	#ImageByãOrdî
(
dpy
Ë(((
_XPrivDi•œy
)dpy)->
byã_‹dî
)

	)

147 #ifde‡
CRAY


148 
	#NextReque°
(
dpy
Ë
	`XNextReque°
(dpy)

	)

150 
	#NextReque°
(
dpy
Ë(((
_XPrivDi•œy
)dpy)->
ªque°
 + 1)

	)

152 
	#La°KnownReque°Pro˚s£d
(
dpy
Ë(((
_XPrivDi•œy
)dpy)->
œ°_ªque°_ªad
)

	)

155 
	#S¸ìnOfDi•œy
(
dpy
, 
s¸
)(&((
_XPrivDi•œy
)dpy)->
s¸ìns
[s¸])

	)

156 
	#DeÁu…S¸ìnOfDi•œy
(
dpy
Ë
	`S¸ìnOfDi•œy
(dpy,
	`DeÁu…S¸ìn
(dpy))

	)

157 
	#Di•œyOfS¸ìn
(
s
Ë((s)->
di•œy
)

	)

158 
	#RoŸWödowOfS¸ìn
(
s
Ë((s)->
roŸ
)

	)

159 
	#BœckPixñOfS¸ìn
(
s
Ë((s)->
bœck_pixñ
)

	)

160 
	#WhôePixñOfS¸ìn
(
s
Ë((s)->
whôe_pixñ
)

	)

161 
	#DeÁu…Cﬁ‹m≠OfS¸ìn
(
s
)((s)->
cm≠
)

	)

162 
	#DeÁu…DïthOfS¸ìn
(
s
Ë((s)->
roŸ_dïth
)

	)

163 
	#DeÁu…GCOfS¸ìn
(
s
Ë((s)->
deÁu…_gc
)

	)

164 
	#DeÁu…VisuÆOfS¸ìn
(
s
)((s)->
roŸ_visuÆ
)

	)

165 
	#WidthOfS¸ìn
(
s
Ë((s)->
width
)

	)

166 
	#HeightOfS¸ìn
(
s
Ë((s)->
height
)

	)

167 
	#WidthMMOfS¸ìn
(
s
Ë((s)->
mwidth
)

	)

168 
	#HeightMMOfS¸ìn
(
s
Ë((s)->
mheight
)

	)

169 
	#Pœ√sOfS¸ìn
(
s
Ë((s)->
roŸ_dïth
)

	)

170 
	#CñlsOfS¸ìn
(
s
Ë(
	`DeÁu…VisuÆOfS¸ìn
((s))->
m≠_íåõs
)

	)

171 
	#MöCm≠sOfS¸ìn
(
s
Ë((s)->
mö_m≠s
)

	)

172 
	#MaxCm≠sOfS¸ìn
(
s
Ë((s)->
max_m≠s
)

	)

173 
	#D€sSaveUndîs
(
s
Ë((s)->
ßve_undîs
)

	)

174 
	#D€sBackögSt‹e
(
s
Ë((s)->
backög_°‹e
)

	)

175 
	#EvítMaskOfS¸ìn
(
s
Ë((s)->
roŸ_öput_mask
)

	)

180 
	s_XExtD©a
 {

181 
	mnumbî
;

182 
_XExtD©a
 *
	m√xt
;

183 (*
	m‰ì_¥iv©e
)(

184 
_XExtD©a
 *
	mexãnsi⁄


186 
XPoöãr
 
	m¥iv©e_d©a
;

187 } 
	tXExtD©a
;

193 
	mexãnsi⁄
;

194 
	mmaj‹_›code
;

195 
	mfú°_evít
;

196 
	mfú°_îr‹
;

197 } 
	tXExtCodes
;

204 
	mdïth
;

205 
	mbôs_≥r_pixñ
;

206 
	msˇ∆öe_∑d
;

207 } 
	tXPixm≠F‹m©VÆues
;

214 
	mfun˘i⁄
;

215 
	m∂™e_mask
;

216 
	mf‹eground
;

217 
	mbackground
;

218 
	mlöe_width
;

219 
	mlöe_°yÀ
;

220 
	mˇp_°yÀ
;

222 
	mjoö_°yÀ
;

223 
	mfûl_°yÀ
;

225 
	mfûl_ruÀ
;

226 
	m¨c_mode
;

227 
Pixm≠
 
	mtûe
;

228 
Pixm≠
 
	m°ù∂e
;

229 
	mts_x_‹igö
;

230 
	mts_y_‹igö
;

231 
F⁄t
 
	mf⁄t
;

232 
	msubwödow_mode
;

233 
Boﬁ
 
	mgøphics_exposuªs
;

234 
	m˛ù_x_‹igö
;

235 
	m˛ù_y_‹igö
;

236 
Pixm≠
 
	m˛ù_mask
;

237 
	mdash_off£t
;

238 
	mdashes
;

239 } 
	tXGCVÆues
;

246 
	g_XGC


247 #ifde‡
	tXLIB_ILLEGAL_ACCESS


249 
XExtD©a
 *
	gext_d©a
;

250 
GC⁄ãxt
 
	ggid
;

254 *
	tGC
;

260 
XExtD©a
 *
	mext_d©a
;

261 
VisuÆID
 
	mvisuÆid
;

262 #i‡
deföed
(
__˝lu•lus
Ë|| deföed(
c_∂u•lus
)

263 
	mc_˛ass
;

265 
	m˛ass
;

267 
	mªd_mask
, 
	mgªí_mask
, 
	mblue_mask
;

268 
	mbôs_≥r_rgb
;

269 
	mm≠_íåõs
;

270 } 
	tVisuÆ
;

276 
	mdïth
;

277 
	mnvisuÆs
;

278 
VisuÆ
 *
	mvisuÆs
;

279 } 
	tDïth
;

287 
	g_XDi•œy
;

290 
XExtD©a
 *
	mext_d©a
;

291 
_XDi•œy
 *
	mdi•œy
;

292 
Wödow
 
	mroŸ
;

293 
	mwidth
, 
	mheight
;

294 
	mmwidth
, 
	mmheight
;

295 
	mndïths
;

296 
Dïth
 *
	mdïths
;

297 
	mroŸ_dïth
;

298 
VisuÆ
 *
	mroŸ_visuÆ
;

299 
GC
 
	mdeÁu…_gc
;

300 
Cﬁ‹m≠
 
	mcm≠
;

301 
	mwhôe_pixñ
;

302 
	mbœck_pixñ
;

303 
	mmax_m≠s
, 
	mmö_m≠s
;

304 
	mbackög_°‹e
;

305 
Boﬁ
 
	mßve_undîs
;

306 
	mroŸ_öput_mask
;

307 } 
	tS¸ìn
;

313 
XExtD©a
 *
	mext_d©a
;

314 
	mdïth
;

315 
	mbôs_≥r_pixñ
;

316 
	msˇ∆öe_∑d
;

317 } 
	tS¸ìnF‹m©
;

323 
Pixm≠
 
	mbackground_pixm≠
;

324 
	mbackground_pixñ
;

325 
Pixm≠
 
	mb‹dî_pixm≠
;

326 
	mb‹dî_pixñ
;

327 
	mbô_gøvôy
;

328 
	mwö_gøvôy
;

329 
	mbackög_°‹e
;

330 
	mbackög_∂™es
;

331 
	mbackög_pixñ
;

332 
Boﬁ
 
	mßve_undî
;

333 
	mevít_mask
;

334 
	mdo_nŸ_¥›ag©e_mask
;

335 
Boﬁ
 
	movîride_ªdúe˘
;

336 
Cﬁ‹m≠
 
	mcﬁ‹m≠
;

337 
Curs‹
 
	mcurs‹
;

338 } 
	tXSëWödowAâribuãs
;

341 
	mx
, 
	my
;

342 
	mwidth
, 
	mheight
;

343 
	mb‹dî_width
;

344 
	mdïth
;

345 
VisuÆ
 *
	mvisuÆ
;

346 
Wödow
 
	mroŸ
;

347 #i‡
deföed
(
__˝lu•lus
Ë|| deföed(
c_∂u•lus
)

348 
	mc_˛ass
;

350 
	m˛ass
;

352 
	mbô_gøvôy
;

353 
	mwö_gøvôy
;

354 
	mbackög_°‹e
;

355 
	mbackög_∂™es
;

356 
	mbackög_pixñ
;

357 
Boﬁ
 
	mßve_undî
;

358 
Cﬁ‹m≠
 
	mcﬁ‹m≠
;

359 
Boﬁ
 
	mm≠_ö°ÆÀd
;

360 
	mm≠_°©e
;

361 
	mÆl_evít_masks
;

362 
	myour_evít_mask
;

363 
	mdo_nŸ_¥›ag©e_mask
;

364 
Boﬁ
 
	movîride_ªdúe˘
;

365 
S¸ìn
 *
	ms¸ìn
;

366 } 
	tXWödowAâribuãs
;

374 
	mÁmûy
;

375 
	mÀngth
;

376 *
	maddªss
;

377 } 
	tXHo°Addªss
;

383 
	mty≥Àngth
;

384 
	mvÆuñígth
;

385 *
	mty≥
;

386 *
	mvÆue
;

387 } 
	tXSîvîI¡î¥ëedAddªss
;

392 
	s_XImage
 {

393 
	mwidth
, 
	mheight
;

394 
	mxoff£t
;

395 
	mf‹m©
;

396 *
	md©a
;

397 
	mbyã_‹dî
;

398 
	mbôm≠_unô
;

399 
	mbôm≠_bô_‹dî
;

400 
	mbôm≠_∑d
;

401 
	mdïth
;

402 
	mbyãs_≥r_löe
;

403 
	mbôs_≥r_pixñ
;

404 
	mªd_mask
;

405 
	mgªí_mask
;

406 
	mblue_mask
;

407 
XPoöãr
 
	mobd©a
;

408 
	sfuncs
 {

409 
	m_XImage
 *(*
	m¸óã_image
)(

410 
	m_XDi•œy
* ,

411 
	mVisuÆ
* ,

420 (*
	mde°roy_image
Ë(
	m_XImage
 *);

421 (*
	mgë_pixñ
Ë(
	m_XImage
 *, , );

422 (*
	mput_pixñ
Ë(
	m_XImage
 *, , , );

423 
	m_XImage
 *(*
	msub_image
)(_XImage *, , , , );

424 (*
	madd_pixñ
Ë(
	m_XImage
 *, );

425 } 
	mf
;

426 } 
	tXImage
;

432 
	mx
, 
	my
;

433 
	mwidth
, 
	mheight
;

434 
	mb‹dî_width
;

435 
Wödow
 
	msiblög
;

436 
	m°ack_mode
;

437 } 
	tXWödowCh™ges
;

443 
	mpixñ
;

444 
	mªd
, 
	mgªí
, 
	mblue
;

445 
	mÊags
;

446 
	m∑d
;

447 } 
	tXCﬁ‹
;

455 
	mx1
, 
	my1
, 
	mx2
, 
	my2
;

456 } 
	tXSegmít
;

459 
	mx
, 
	my
;

460 } 
	tXPoöt
;

463 
	mx
, 
	my
;

464 
	mwidth
, 
	mheight
;

465 } 
	tXRe˘™gÀ
;

468 
	mx
, 
	my
;

469 
	mwidth
, 
	mheight
;

470 
	m™gÀ1
, 
	m™gÀ2
;

471 } 
	tXArc
;

477 
	mkey_˛ick_≥r˚¡
;

478 
	mbñl_≥r˚¡
;

479 
	mbñl_pôch
;

480 
	mbñl_duøti⁄
;

481 
	mÀd
;

482 
	mÀd_mode
;

483 
	mkey
;

484 
	mauto_ª≥©_mode
;

485 } 
	tXKeybﬂrdC⁄åﬁ
;

490 
	mkey_˛ick_≥r˚¡
;

491 
	mbñl_≥r˚¡
;

492 
	mbñl_pôch
, 
	mbñl_duøti⁄
;

493 
	mÀd_mask
;

494 
	mglobÆ_auto_ª≥©
;

495 
	mauto_ª≥©s
[32];

496 } 
	tXKeybﬂrdSèã
;

501 
Time
 
	mtime
;

502 
	mx
, 
	my
;

503 } 
	tXTimeCo‹d
;

508 
	mmax_key≥rmod
;

509 
KeyCode
 *
	mmodifõrm≠
;

510 } 
	tXModifõrKeym≠
;

518 #i‚de‡
XLIB_ILLEGAL_ACCESS


519 
_XDi•œy
 
	tDi•œy
;

522 
	g_XPriv©e
;

523 
	g_XrmHashBuckëRec
;

526 #ifde‡
XLIB_ILLEGAL_ACCESS


527 
	t_XDi•œy


530 
XExtD©a
 *
	gext_d©a
;

531 
_XPriv©e
 *
	g¥iv©e1
;

532 
	gfd
;

533 
	g¥iv©e2
;

534 
	g¥Ÿo_maj‹_vîsi⁄
;

535 
	g¥Ÿo_mö‹_vîsi⁄
;

536 *
	gvíd‹
;

537 
XID
 
	g¥iv©e3
;

538 
XID
 
	g¥iv©e4
;

539 
XID
 
	g¥iv©e5
;

540 
	g¥iv©e6
;

541 
XID
 (*
ªsour˚_Æloc
)(

542 
	g_XDi•œy
*

544 
	gbyã_‹dî
;

545 
	gbôm≠_unô
;

546 
	gbôm≠_∑d
;

547 
	gbôm≠_bô_‹dî
;

548 
	gnf‹m©s
;

549 
S¸ìnF‹m©
 *
	gpixm≠_f‹m©
;

550 
	g¥iv©e8
;

551 
	gªÀa£
;

552 
_XPriv©e
 *
	g¥iv©e9
, *
	g¥iv©e10
;

553 
	gqÀn
;

554 
	gœ°_ªque°_ªad
;

555 
	gªque°
;

556 
XPoöãr
 
	g¥iv©e11
;

557 
XPoöãr
 
	g¥iv©e12
;

558 
XPoöãr
 
	g¥iv©e13
;

559 
XPoöãr
 
	g¥iv©e14
;

560 
	gmax_ªque°_size
;

561 
_XrmHashBuckëRec
 *
	gdb
;

562 (*
	g¥iv©e15
)(

563 
	g_XDi•œy
*

565 *
	gdi•œy_«me
;

566 
	gdeÁu…_s¸ìn
;

567 
	gns¸ìns
;

568 
S¸ìn
 *
	gs¸ìns
;

569 
	gmŸi⁄_buf„r
;

570 
	g¥iv©e16
;

571 
	gmö_keycode
;

572 
	gmax_keycode
;

573 
XPoöãr
 
	g¥iv©e17
;

574 
XPoöãr
 
	g¥iv©e18
;

575 
	g¥iv©e19
;

576 *
	gxdeÁu…s
;

579 #ifde‡
	tXLIB_ILLEGAL_ACCESS


580 
	tDi•œy
,

582 *
	t_XPrivDi•œy
;

584 #unde‡
_XEVENT_


585 #i‚de‡
_XEVENT_


590 
	mty≥
;

591 
	m£rül
;

592 
Boﬁ
 
	m£nd_evít
;

593 
Di•œy
 *
	mdi•œy
;

594 
Wödow
 
	mwödow
;

595 
Wödow
 
	mroŸ
;

596 
Wödow
 
	msubwödow
;

597 
Time
 
	mtime
;

598 
	mx
, 
	my
;

599 
	mx_roŸ
, 
	my_roŸ
;

600 
	m°©e
;

601 
	mkeycode
;

602 
Boﬁ
 
	mßme_s¸ìn
;

603 } 
	tXKeyEvít
;

604 
XKeyEvít
 
	tXKeyPªs£dEvít
;

605 
XKeyEvít
 
	tXKeyRñó£dEvít
;

608 
	mty≥
;

609 
	m£rül
;

610 
Boﬁ
 
	m£nd_evít
;

611 
Di•œy
 *
	mdi•œy
;

612 
Wödow
 
	mwödow
;

613 
Wödow
 
	mroŸ
;

614 
Wödow
 
	msubwödow
;

615 
Time
 
	mtime
;

616 
	mx
, 
	my
;

617 
	mx_roŸ
, 
	my_roŸ
;

618 
	m°©e
;

619 
	mbuâ⁄
;

620 
Boﬁ
 
	mßme_s¸ìn
;

621 } 
	tXBuâ⁄Evít
;

622 
XBuâ⁄Evít
 
	tXBuâ⁄Pªs£dEvít
;

623 
XBuâ⁄Evít
 
	tXBuâ⁄Rñó£dEvít
;

626 
	mty≥
;

627 
	m£rül
;

628 
Boﬁ
 
	m£nd_evít
;

629 
Di•œy
 *
	mdi•œy
;

630 
Wödow
 
	mwödow
;

631 
Wödow
 
	mroŸ
;

632 
Wödow
 
	msubwödow
;

633 
Time
 
	mtime
;

634 
	mx
, 
	my
;

635 
	mx_roŸ
, 
	my_roŸ
;

636 
	m°©e
;

637 
	mis_höt
;

638 
Boﬁ
 
	mßme_s¸ìn
;

639 } 
	tXMŸi⁄Evít
;

640 
XMŸi⁄Evít
 
	tXPoöãrMovedEvít
;

643 
	mty≥
;

644 
	m£rül
;

645 
Boﬁ
 
	m£nd_evít
;

646 
Di•œy
 *
	mdi•œy
;

647 
Wödow
 
	mwödow
;

648 
Wödow
 
	mroŸ
;

649 
Wödow
 
	msubwödow
;

650 
Time
 
	mtime
;

651 
	mx
, 
	my
;

652 
	mx_roŸ
, 
	my_roŸ
;

653 
	mmode
;

654 
	mdëaû
;

659 
Boﬁ
 
	mßme_s¸ìn
;

660 
Boﬁ
 
	mfocus
;

661 
	m°©e
;

662 } 
	tXCrossögEvít
;

663 
XCrossögEvít
 
	tXE¡îWödowEvít
;

664 
XCrossögEvít
 
	tXLóveWödowEvít
;

667 
	mty≥
;

668 
	m£rül
;

669 
Boﬁ
 
	m£nd_evít
;

670 
Di•œy
 *
	mdi•œy
;

671 
Wödow
 
	mwödow
;

672 
	mmode
;

674 
	mdëaû
;

680 } 
	tXFocusCh™geEvít
;

681 
XFocusCh™geEvít
 
	tXFocusInEvít
;

682 
XFocusCh™geEvít
 
	tXFocusOutEvít
;

686 
	mty≥
;

687 
	m£rül
;

688 
Boﬁ
 
	m£nd_evít
;

689 
Di•œy
 *
	mdi•œy
;

690 
Wödow
 
	mwödow
;

691 
	mkey_ve˘‹
[32];

692 } 
	tXKeym≠Evít
;

695 
	mty≥
;

696 
	m£rül
;

697 
Boﬁ
 
	m£nd_evít
;

698 
Di•œy
 *
	mdi•œy
;

699 
Wödow
 
	mwödow
;

700 
	mx
, 
	my
;

701 
	mwidth
, 
	mheight
;

702 
	mcou¡
;

703 } 
	tXExpo£Evít
;

706 
	mty≥
;

707 
	m£rül
;

708 
Boﬁ
 
	m£nd_evít
;

709 
Di•œy
 *
	mdi•œy
;

710 
DøwabÀ
 
	mdøwabÀ
;

711 
	mx
, 
	my
;

712 
	mwidth
, 
	mheight
;

713 
	mcou¡
;

714 
	mmaj‹_code
;

715 
	mmö‹_code
;

716 } 
	tXGøphicsExpo£Evít
;

719 
	mty≥
;

720 
	m£rül
;

721 
Boﬁ
 
	m£nd_evít
;

722 
Di•œy
 *
	mdi•œy
;

723 
DøwabÀ
 
	mdøwabÀ
;

724 
	mmaj‹_code
;

725 
	mmö‹_code
;

726 } 
	tXNoExpo£Evít
;

729 
	mty≥
;

730 
	m£rül
;

731 
Boﬁ
 
	m£nd_evít
;

732 
Di•œy
 *
	mdi•œy
;

733 
Wödow
 
	mwödow
;

734 
	m°©e
;

735 } 
	tXVisibûôyEvít
;

738 
	mty≥
;

739 
	m£rül
;

740 
Boﬁ
 
	m£nd_evít
;

741 
Di•œy
 *
	mdi•œy
;

742 
Wödow
 
	m∑ª¡
;

743 
Wödow
 
	mwödow
;

744 
	mx
, 
	my
;

745 
	mwidth
, 
	mheight
;

746 
	mb‹dî_width
;

747 
Boﬁ
 
	movîride_ªdúe˘
;

748 } 
	tXCª©eWödowEvít
;

751 
	mty≥
;

752 
	m£rül
;

753 
Boﬁ
 
	m£nd_evít
;

754 
Di•œy
 *
	mdi•œy
;

755 
Wödow
 
	mevít
;

756 
Wödow
 
	mwödow
;

757 } 
	tXDe°royWödowEvít
;

760 
	mty≥
;

761 
	m£rül
;

762 
Boﬁ
 
	m£nd_evít
;

763 
Di•œy
 *
	mdi•œy
;

764 
Wödow
 
	mevít
;

765 
Wödow
 
	mwödow
;

766 
Boﬁ
 
	m‰om_c⁄figuª
;

767 } 
	tXUnm≠Evít
;

770 
	mty≥
;

771 
	m£rül
;

772 
Boﬁ
 
	m£nd_evít
;

773 
Di•œy
 *
	mdi•œy
;

774 
Wödow
 
	mevít
;

775 
Wödow
 
	mwödow
;

776 
Boﬁ
 
	movîride_ªdúe˘
;

777 } 
	tXM≠Evít
;

780 
	mty≥
;

781 
	m£rül
;

782 
Boﬁ
 
	m£nd_evít
;

783 
Di•œy
 *
	mdi•œy
;

784 
Wödow
 
	m∑ª¡
;

785 
Wödow
 
	mwödow
;

786 } 
	tXM≠Reque°Evít
;

789 
	mty≥
;

790 
	m£rül
;

791 
Boﬁ
 
	m£nd_evít
;

792 
Di•œy
 *
	mdi•œy
;

793 
Wödow
 
	mevít
;

794 
Wödow
 
	mwödow
;

795 
Wödow
 
	m∑ª¡
;

796 
	mx
, 
	my
;

797 
Boﬁ
 
	movîride_ªdúe˘
;

798 } 
	tXRï¨ítEvít
;

801 
	mty≥
;

802 
	m£rül
;

803 
Boﬁ
 
	m£nd_evít
;

804 
Di•œy
 *
	mdi•œy
;

805 
Wödow
 
	mevít
;

806 
Wödow
 
	mwödow
;

807 
	mx
, 
	my
;

808 
	mwidth
, 
	mheight
;

809 
	mb‹dî_width
;

810 
Wödow
 
	mabove
;

811 
Boﬁ
 
	movîride_ªdúe˘
;

812 } 
	tXC⁄figuªEvít
;

815 
	mty≥
;

816 
	m£rül
;

817 
Boﬁ
 
	m£nd_evít
;

818 
Di•œy
 *
	mdi•œy
;

819 
Wödow
 
	mevít
;

820 
Wödow
 
	mwödow
;

821 
	mx
, 
	my
;

822 } 
	tXGøvôyEvít
;

825 
	mty≥
;

826 
	m£rül
;

827 
Boﬁ
 
	m£nd_evít
;

828 
Di•œy
 *
	mdi•œy
;

829 
Wödow
 
	mwödow
;

830 
	mwidth
, 
	mheight
;

831 } 
	tXResizeReque°Evít
;

834 
	mty≥
;

835 
	m£rül
;

836 
Boﬁ
 
	m£nd_evít
;

837 
Di•œy
 *
	mdi•œy
;

838 
Wödow
 
	m∑ª¡
;

839 
Wödow
 
	mwödow
;

840 
	mx
, 
	my
;

841 
	mwidth
, 
	mheight
;

842 
	mb‹dî_width
;

843 
Wödow
 
	mabove
;

844 
	mdëaû
;

845 
	mvÆue_mask
;

846 } 
	tXC⁄figuªReque°Evít
;

849 
	mty≥
;

850 
	m£rül
;

851 
Boﬁ
 
	m£nd_evít
;

852 
Di•œy
 *
	mdi•œy
;

853 
Wödow
 
	mevít
;

854 
Wödow
 
	mwödow
;

855 
	m∂a˚
;

856 } 
	tXCúcuœãEvít
;

859 
	mty≥
;

860 
	m£rül
;

861 
Boﬁ
 
	m£nd_evít
;

862 
Di•œy
 *
	mdi•œy
;

863 
Wödow
 
	m∑ª¡
;

864 
Wödow
 
	mwödow
;

865 
	m∂a˚
;

866 } 
	tXCúcuœãReque°Evít
;

869 
	mty≥
;

870 
	m£rül
;

871 
Boﬁ
 
	m£nd_evít
;

872 
Di•œy
 *
	mdi•œy
;

873 
Wödow
 
	mwödow
;

874 
Atom
 
	m©om
;

875 
Time
 
	mtime
;

876 
	m°©e
;

877 } 
	tXPr›îtyEvít
;

880 
	mty≥
;

881 
	m£rül
;

882 
Boﬁ
 
	m£nd_evít
;

883 
Di•œy
 *
	mdi•œy
;

884 
Wödow
 
	mwödow
;

885 
Atom
 
	m£À˘i⁄
;

886 
Time
 
	mtime
;

887 } 
	tXSñe˘i⁄CÀ¨Evít
;

890 
	mty≥
;

891 
	m£rül
;

892 
Boﬁ
 
	m£nd_evít
;

893 
Di•œy
 *
	mdi•œy
;

894 
Wödow
 
	mow√r
;

895 
Wödow
 
	mªque°‹
;

896 
Atom
 
	m£À˘i⁄
;

897 
Atom
 
	mèrgë
;

898 
Atom
 
	m¥›îty
;

899 
Time
 
	mtime
;

900 } 
	tXSñe˘i⁄Reque°Evít
;

903 
	mty≥
;

904 
	m£rül
;

905 
Boﬁ
 
	m£nd_evít
;

906 
Di•œy
 *
	mdi•œy
;

907 
Wödow
 
	mªque°‹
;

908 
Atom
 
	m£À˘i⁄
;

909 
Atom
 
	mèrgë
;

910 
Atom
 
	m¥›îty
;

911 
Time
 
	mtime
;

912 } 
	tXSñe˘i⁄Evít
;

915 
	mty≥
;

916 
	m£rül
;

917 
Boﬁ
 
	m£nd_evít
;

918 
Di•œy
 *
	mdi•œy
;

919 
Wödow
 
	mwödow
;

920 
Cﬁ‹m≠
 
	mcﬁ‹m≠
;

921 #i‡
deföed
(
__˝lu•lus
Ë|| deföed(
c_∂u•lus
)

922 
Boﬁ
 
	mc_√w
;

924 
Boﬁ
 
	m√w
;

926 
	m°©e
;

927 } 
	tXCﬁ‹m≠Evít
;

930 
	mty≥
;

931 
	m£rül
;

932 
Boﬁ
 
	m£nd_evít
;

933 
Di•œy
 *
	mdi•œy
;

934 
Wödow
 
	mwödow
;

935 
Atom
 
	mmesßge_ty≥
;

936 
	mf‹m©
;

938 
	mb
[20];

939 
	ms
[10];

940 
	ml
[5];

941 } 
	md©a
;

942 } 
	tXClõ¡MesßgeEvít
;

945 
	mty≥
;

946 
	m£rül
;

947 
Boﬁ
 
	m£nd_evít
;

948 
Di•œy
 *
	mdi•œy
;

949 
Wödow
 
	mwödow
;

950 
	mªque°
;

952 
	mfú°_keycode
;

953 
	mcou¡
;

954 } 
	tXM≠pögEvít
;

957 
	mty≥
;

958 
Di•œy
 *
	mdi•œy
;

959 
XID
 
	mªsour˚id
;

960 
	m£rül
;

961 
	mîr‹_code
;

962 
	mªque°_code
;

963 
	mmö‹_code
;

964 } 
	tXEº‹Evít
;

967 
	mty≥
;

968 
	m£rül
;

969 
Boﬁ
 
	m£nd_evít
;

970 
Di•œy
 *
	mdi•œy
;

971 
Wödow
 
	mwödow
;

972 } 
	tXAnyEvít
;

978 
	u_XEvít
 {

979 
	mty≥
;

980 
XAnyEvít
 
	mx™y
;

981 
XKeyEvít
 
	mxkey
;

982 
XBuâ⁄Evít
 
	mxbuâ⁄
;

983 
XMŸi⁄Evít
 
	mxmŸi⁄
;

984 
XCrossögEvít
 
	mx¸ossög
;

985 
XFocusCh™geEvít
 
	mxfocus
;

986 
XExpo£Evít
 
	mxexpo£
;

987 
XGøphicsExpo£Evít
 
	mxgøphic£xpo£
;

988 
XNoExpo£Evít
 
	mxn€xpo£
;

989 
XVisibûôyEvít
 
	mxvisibûôy
;

990 
XCª©eWödowEvít
 
	mx¸óãwödow
;

991 
XDe°royWödowEvít
 
	mxde°roywödow
;

992 
XUnm≠Evít
 
	mxunm≠
;

993 
XM≠Evít
 
	mxm≠
;

994 
XM≠Reque°Evít
 
	mxm≠ªque°
;

995 
XRï¨ítEvít
 
	mxª∑ª¡
;

996 
XC⁄figuªEvít
 
	mxc⁄figuª
;

997 
XGøvôyEvít
 
	mxgøvôy
;

998 
XResizeReque°Evít
 
	mxªsizîeque°
;

999 
XC⁄figuªReque°Evít
 
	mxc⁄figuªªque°
;

1000 
XCúcuœãEvít
 
	mxcúcuœã
;

1001 
XCúcuœãReque°Evít
 
	mxcúcuœãªque°
;

1002 
XPr›îtyEvít
 
	mx¥›îty
;

1003 
XSñe˘i⁄CÀ¨Evít
 
	mx£À˘i⁄˛ór
;

1004 
XSñe˘i⁄Reque°Evít
 
	mx£À˘i⁄ªque°
;

1005 
XSñe˘i⁄Evít
 
	mx£À˘i⁄
;

1006 
XCﬁ‹m≠Evít
 
	mxcﬁ‹m≠
;

1007 
XClõ¡MesßgeEvít
 
	mx˛õ¡
;

1008 
XM≠pögEvít
 
	mxm≠pög
;

1009 
XEº‹Evít
 
	mxîr‹
;

1010 
XKeym≠Evít
 
	mxkeym≠
;

1011 
	m∑d
[24];

1012 } 
	tXEvít
;

1015 
	#XAŒocID
(
dpy
Ë((*((
_XPrivDi•œy
)dpy)->
ªsour˚_Æloc
)((dpy)))

	)

1021 
	mlbórög
;

1022 
	mrbórög
;

1023 
	mwidth
;

1024 
	mas˚¡
;

1025 
	mdes˚¡
;

1026 
	m©åibuãs
;

1027 } 
	tXCh¨Såu˘
;

1034 
Atom
 
	m«me
;

1035 
	mˇrd32
;

1036 } 
	tXF⁄tPr›
;

1039 
XExtD©a
 *
	mext_d©a
;

1040 
F⁄t
 
	mfid
;

1041 
	mdúe˘i⁄
;

1042 
	mmö_ch¨_‹_byã2
;

1043 
	mmax_ch¨_‹_byã2
;

1044 
	mmö_byã1
;

1045 
	mmax_byã1
;

1046 
Boﬁ
 
	mÆl_ch¨s_exi°
;

1047 
	mdeÁu…_ch¨
;

1048 
	mn_¥›îtõs
;

1049 
XF⁄tPr›
 *
	m¥›îtõs
;

1050 
XCh¨Såu˘
 
	mmö_bounds
;

1051 
XCh¨Såu˘
 
	mmax_bounds
;

1052 
XCh¨Såu˘
 *
	m≥r_ch¨
;

1053 
	mas˚¡
;

1054 
	mdes˚¡
;

1055 } 
	tXF⁄tSåu˘
;

1061 *
	mch¨s
;

1062 
	mnch¨s
;

1063 
	mdñè
;

1064 
F⁄t
 
	mf⁄t
;

1065 } 
	tXTextIãm
;

1068 
	mbyã1
;

1069 
	mbyã2
;

1071 #i‡
	tdeföed
(
	t__GNUC__
Ë&& deföed(
	t__¨m__
Ë&& !deföed(
	t__ARM_EABI__
)

1072 
	t__©åibuã__
 ((
	t∑cked
))

1074 
	tXCh¨2b
;

1078 
XCh¨2b
 *
	mch¨s
;

1079 
	mnch¨s
;

1080 
	mdñè
;

1081 
F⁄t
 
	mf⁄t
;

1082 } 
	tXTextIãm16
;

1085 uni⁄ { 
Di•œy
 *
	mdi•œy
;

1086 
GC
 
	mgc
;

1087 
VisuÆ
 *
	mvisuÆ
;

1088 
S¸ìn
 *
	ms¸ìn
;

1089 
S¸ìnF‹m©
 *
	mpixm≠_f‹m©
;

1090 
XF⁄tSåu˘
 *
	mf⁄t
; } 
	tXED©aObje˘
;

1093 
XRe˘™gÀ
 
	mmax_ök_exã¡
;

1094 
XRe˘™gÀ
 
	mmax_logiˇl_exã¡
;

1095 } 
	tXF⁄tSëExã¡s
;

1101 
_XOM
 *
	tXOM
;

1102 
_XOC
 *
	tXOC
, *
	tXF⁄tSë
;

1105 *
	mch¨s
;

1106 
	mnch¨s
;

1107 
	mdñè
;

1108 
XF⁄tSë
 
	mf⁄t_£t
;

1109 } 
	tXmbTextIãm
;

1112 
wch¨_t
 *
	mch¨s
;

1113 
	mnch¨s
;

1114 
	mdñè
;

1115 
XF⁄tSë
 
	mf⁄t_£t
;

1116 } 
	tXwcTextIãm
;

1118 
	#XNRequúedCh¨Së
 "ªquúedCh¨Së"

	)

1119 
	#XNQuîyOrõ¡©i⁄
 "quîyOrõ¡©i⁄"

	)

1120 
	#XNBa£F⁄tName
 "ba£F⁄tName"

	)

1121 
	#XNOMAutom©ic
 "omAutom©ic"

	)

1122 
	#XNMissögCh¨Së
 "missögCh¨Së"

	)

1123 
	#XNDeÁu…Såög
 "deÁu…Såög"

	)

1124 
	#XNOrõ¡©i⁄
 "‹õ¡©i⁄"

	)

1125 
	#XNDúe˘i⁄ÆDïídítDøwög
 "dúe˘i⁄ÆDïídítDøwög"

	)

1126 
	#XNC⁄ãxtuÆDøwög
 "c⁄ãxtuÆDøwög"

	)

1127 
	#XNF⁄tInfo
 "f⁄tInfo"

	)

1130 
	mch¨£t_cou¡
;

1131 **
	mch¨£t_li°
;

1132 } 
	tXOMCh¨SëLi°
;

1135 
	mXOMOrõ¡©i⁄_LTR_TTB
,

1136 
	mXOMOrõ¡©i⁄_RTL_TTB
,

1137 
	mXOMOrõ¡©i⁄_TTB_LTR
,

1138 
	mXOMOrõ¡©i⁄_TTB_RTL
,

1139 
	mXOMOrõ¡©i⁄_C⁄ãxt


1140 } 
	tXOrõ¡©i⁄
;

1143 
	mnum_‹õ¡©i⁄
;

1144 
XOrõ¡©i⁄
 *
	m‹õ¡©i⁄
;

1145 } 
	tXOMOrõ¡©i⁄
;

1148 
	mnum_f⁄t
;

1149 
XF⁄tSåu˘
 **
	mf⁄t_°ru˘_li°
;

1150 **
	mf⁄t_«me_li°
;

1151 } 
	tXOMF⁄tInfo
;

1153 
_XIM
 *
	tXIM
;

1154 
_XIC
 *
	tXIC
;

1156 (*
	tXIMProc
)(

1157 
	tXIM
,

1158 
	tXPoöãr
,

1159 
	tXPoöãr


1162 
	$Boﬁ
 (*
	tXICProc
)(

1163 
	tXIC
,

1164 
	tXPoöãr
,

1165 
	tXPoöãr


1168 (*
	tXIDProc
)(

1169 
	tDi•œy
*,

1170 
	tXPoöãr
,

1171 
	tXPoöãr


1174 
	tXIMStyÀ
;

1177 
cou¡_°yÀs
;

1178 
XIMStyÀ
 *
suµ‹ãd_°yÀs
;

1179 } 
	tXIMStyÀs
;

1181 
	#XIMPªedôAªa
 0x0001L

	)

1182 
	#XIMPªedôCÆlbacks
 0x0002L

	)

1183 
	#XIMPªedôPosôi⁄
 0x0004L

	)

1184 
	#XIMPªedôNŸhög
 0x0008L

	)

1185 
	#XIMPªedôN⁄e
 0x0010L

	)

1186 
	#XIMSètusAªa
 0x0100L

	)

1187 
	#XIMSètusCÆlbacks
 0x0200L

	)

1188 
	#XIMSètusNŸhög
 0x0400L

	)

1189 
	#XIMSètusN⁄e
 0x0800L

	)

1191 
	#XNVaNe°edLi°
 "XNVaNe°edLi°"

	)

1192 
	#XNQuîyI≈utStyÀ
 "quîyI≈utStyÀ"

	)

1193 
	#XNClõ¡Wödow
 "˛õ¡Wödow"

	)

1194 
	#XNI≈utStyÀ
 "öputStyÀ"

	)

1195 
	#XNFocusWödow
 "focusWödow"

	)

1196 
	#XNResour˚Name
 "ªsour˚Name"

	)

1197 
	#XNResour˚Cœss
 "ªsour˚Cœss"

	)

1198 
	#XNGeomëryCÆlback
 "geomëryCÆlback"

	)

1199 
	#XNDe°royCÆlback
 "de°royCÆlback"

	)

1200 
	#XNFûãrEvíts
 "fûãrEvíts"

	)

1201 
	#XNPªedôSèπCÆlback
 "¥ìdôSèπCÆlback"

	)

1202 
	#XNPªedôD⁄eCÆlback
 "¥ìdôD⁄eCÆlback"

	)

1203 
	#XNPªedôDøwCÆlback
 "¥ìdôDøwCÆlback"

	)

1204 
	#XNPªedôC¨ëCÆlback
 "¥ìdôC¨ëCÆlback"

	)

1205 
	#XNPªedôSèãNŸifyCÆlback
 "¥ìdôSèãNŸifyCÆlback"

	)

1206 
	#XNPªedôAâribuãs
 "¥ìdôAâribuãs"

	)

1207 
	#XNSètusSèπCÆlback
 "°©usSèπCÆlback"

	)

1208 
	#XNSètusD⁄eCÆlback
 "°©usD⁄eCÆlback"

	)

1209 
	#XNSètusDøwCÆlback
 "°©usDøwCÆlback"

	)

1210 
	#XNSètusAâribuãs
 "°©usAâribuãs"

	)

1211 
	#XNAªa
 "¨ó"

	)

1212 
	#XNAªaNìded
 "¨óNìded"

	)

1213 
	#XNSpŸLoˇti⁄
 "•ŸLoˇti⁄"

	)

1214 
	#XNCﬁ‹m≠
 "cﬁ‹M≠"

	)

1215 
	#XNStdCﬁ‹m≠
 "°dCﬁ‹M≠"

	)

1216 
	#XNF‹eground
 "f‹eground"

	)

1217 
	#XNBackground
 "background"

	)

1218 
	#XNBackgroundPixm≠
 "backgroundPixm≠"

	)

1219 
	#XNF⁄tSë
 "f⁄tSë"

	)

1220 
	#XNLöeS∑˚
 "löeS∑˚"

	)

1221 
	#XNCurs‹
 "curs‹"

	)

1223 
	#XNQuîyIMVÆuesLi°
 "quîyIMVÆuesLi°"

	)

1224 
	#XNQuîyICVÆuesLi°
 "quîyICVÆuesLi°"

	)

1225 
	#XNVisibÀPosôi⁄
 "visibÀPosôi⁄"

	)

1226 
	#XNR6PªedôCÆlback
 "r6PªedôCÆlback"

	)

1227 
	#XNSåögC⁄vîsi⁄CÆlback
 "°rögC⁄vîsi⁄CÆlback"

	)

1228 
	#XNSåögC⁄vîsi⁄
 "°rögC⁄vîsi⁄"

	)

1229 
	#XNRe£tSèã
 "ª£tSèã"

	)

1230 
	#XNHŸKey
 "hŸKey"

	)

1231 
	#XNHŸKeySèã
 "hŸKeySèã"

	)

1232 
	#XNPªedôSèã
 "¥ìdôSèã"

	)

1233 
	#XNSï¨©‹ofNe°edLi°
 "£∑øt‹ofNe°edLi°"

	)

1235 
	#XBuf„rOvîÊow
 -1

	)

1236 
	#XLookupN⁄e
 1

	)

1237 
	#XLookupCh¨s
 2

	)

1238 
	#XLookupKeySym
 3

	)

1239 
	#XLookupBŸh
 4

	)

1241 *
	tXVaNe°edLi°
;

1244 
XPoöãr
 
˛õ¡_d©a
;

1245 
XIMProc
 
ˇŒback
;

1246 } 
	tXIMCÆlback
;

1249 
XPoöãr
 
˛õ¡_d©a
;

1250 
XICProc
 
ˇŒback
;

1251 } 
	tXICCÆlback
;

1253 
	tXIMFìdback
;

1255 
	#XIMRevî£
 1L

	)

1256 
	#XIMUndîlöe
 (1L<<1)

	)

1257 
	#XIMHighlight
 (1L<<2)

	)

1258 
	#XIMPrim¨y
 (1L<<5)

	)

1259 
	#XIMSec⁄d¨y
 (1L<<6)

	)

1260 
	#XIMTîtüry
 (1L<<7)

	)

1261 
	#XIMVisibÀToF‹w¨d
 (1L<<8)

	)

1262 
	#XIMVisibÀToBackw‹d
 (1L<<9)

	)

1263 
	#XIMVisibÀToCíãr
 (1L<<10)

	)

1265 
	s_XIMText
 {

1266 
Àngth
;

1267 
XIMFìdback
 *
„edback
;

1268 
Boﬁ
 
ícodög_is_wch¨
;

1270 *
mu…i_byã
;

1271 
wch¨_t
 *
wide_ch¨
;

1272 } 
°rög
;

1273 } 
	tXIMText
;

1275 
	tXIMPªedôSèã
;

1277 
	#XIMPªedôUnKnown
 0L

	)

1278 
	#XIMPªedôE«bÀ
 1L

	)

1279 
	#XIMPªedôDißbÀ
 (1L<<1)

	)

1281 
	s_XIMPªedôSèãNŸifyCÆlbackSåu˘
 {

1282 
XIMPªedôSèã
 
°©e
;

1283 } 
	tXIMPªedôSèãNŸifyCÆlbackSåu˘
;

1285 
	tXIMRe£tSèã
;

1287 
	#XIMInôülSèã
 1L

	)

1288 
	#XIMPª£rveSèã
 (1L<<1)

	)

1290 
	tXIMSåögC⁄vîsi⁄Fìdback
;

1292 
	#XIMSåögC⁄vîsi⁄Le·Edge
 (0x00000001)

	)

1293 
	#XIMSåögC⁄vîsi⁄RightEdge
 (0x00000002)

	)

1294 
	#XIMSåögC⁄vîsi⁄T›Edge
 (0x00000004)

	)

1295 
	#XIMSåögC⁄vîsi⁄BŸtomEdge
 (0x00000008)

	)

1296 
	#XIMSåögC⁄vîsi⁄C⁄˚Æed
 (0x00000010)

	)

1297 
	#XIMSåögC⁄vîsi⁄Wøµed
 (0x00000020)

	)

1299 
	s_XIMSåögC⁄vîsi⁄Text
 {

1300 
Àngth
;

1301 
XIMSåögC⁄vîsi⁄Fìdback
 *
„edback
;

1302 
Boﬁ
 
ícodög_is_wch¨
;

1304 *
mbs
;

1305 
wch¨_t
 *
wcs
;

1306 } 
°rög
;

1307 } 
	tXIMSåögC⁄vîsi⁄Text
;

1309 
	tXIMSåögC⁄vîsi⁄Posôi⁄
;

1311 
	tXIMSåögC⁄vîsi⁄Ty≥
;

1313 
	#XIMSåögC⁄vîsi⁄Buf„r
 (0x0001)

	)

1314 
	#XIMSåögC⁄vîsi⁄Löe
 (0x0002)

	)

1315 
	#XIMSåögC⁄vîsi⁄W‹d
 (0x0003)

	)

1316 
	#XIMSåögC⁄vîsi⁄Ch¨
 (0x0004)

	)

1318 
	tXIMSåögC⁄vîsi⁄O≥øti⁄
;

1320 
	#XIMSåögC⁄vîsi⁄Sub°ôuti⁄
 (0x0001)

	)

1321 
	#XIMSåögC⁄vîsi⁄RërõvÆ
 (0x0002)

	)

1324 
XIMF‹w¨dCh¨
, 
XIMBackw¨dCh¨
,

1325 
XIMF‹w¨dW‹d
, 
XIMBackw¨dW‹d
,

1326 
XIMC¨ëUp
, 
XIMC¨ëDown
,

1327 
XIMNextLöe
, 
XIMPªviousLöe
,

1328 
XIMLöeSèπ
, 
XIMLöeEnd
,

1329 
XIMAbsﬁuãPosôi⁄
,

1330 
XIMD⁄tCh™ge


1331 } 
	tXIMC¨ëDúe˘i⁄
;

1333 
	s_XIMSåögC⁄vîsi⁄CÆlbackSåu˘
 {

1334 
XIMSåögC⁄vîsi⁄Posôi⁄
 
posôi⁄
;

1335 
XIMC¨ëDúe˘i⁄
 
dúe˘i⁄
;

1336 
XIMSåögC⁄vîsi⁄O≥øti⁄
 
›î©i⁄
;

1337 
Á˘‹
;

1338 
XIMSåögC⁄vîsi⁄Text
 *
ãxt
;

1339 } 
	tXIMSåögC⁄vîsi⁄CÆlbackSåu˘
;

1341 
	s_XIMPªedôDøwCÆlbackSåu˘
 {

1342 
ˇªt
;

1343 
chg_fú°
;

1344 
chg_Àngth
;

1345 
XIMText
 *
ãxt
;

1346 } 
	tXIMPªedôDøwCÆlbackSåu˘
;

1349 
XIMIsInvisibÀ
,

1350 
XIMIsPrim¨y
,

1351 
XIMIsSec⁄d¨y


1352 } 
	tXIMC¨ëStyÀ
;

1354 
	s_XIMPªedôC¨ëCÆlbackSåu˘
 {

1355 
posôi⁄
;

1356 
XIMC¨ëDúe˘i⁄
 
dúe˘i⁄
;

1357 
XIMC¨ëStyÀ
 
°yÀ
;

1358 } 
	tXIMPªedôC¨ëCÆlbackSåu˘
;

1361 
XIMTextTy≥
,

1362 
XIMBôm≠Ty≥


1363 } 
	tXIMSètusD©aTy≥
;

1365 
	s_XIMSètusDøwCÆlbackSåu˘
 {

1366 
XIMSètusD©aTy≥
 
ty≥
;

1368 
XIMText
 *
ãxt
;

1369 
Pixm≠
 
bôm≠
;

1370 } 
d©a
;

1371 } 
	tXIMSètusDøwCÆlbackSåu˘
;

1373 
	s_XIMHŸKeyTriggî
 {

1374 
KeySym
 
keysym
;

1375 
modifõr
;

1376 
modifõr_mask
;

1377 } 
	tXIMHŸKeyTriggî
;

1379 
	s_XIMHŸKeyTriggîs
 {

1380 
num_hŸ_key
;

1381 
XIMHŸKeyTriggî
 *
key
;

1382 } 
	tXIMHŸKeyTriggîs
;

1384 
	tXIMHŸKeySèã
;

1386 
	#XIMHŸKeySèãON
 (0x0001L)

	)

1387 
	#XIMHŸKeySèãOFF
 (0x0002L)

	)

1390 
cou¡_vÆues
;

1391 **
suµ‹ãd_vÆues
;

1392 } 
	tXIMVÆuesLi°
;

1394 
_XFUNCPROTOBEGIN


1396 #i‡
	`deföed
(
WIN32
Ë&& !deföed(
_XLIBINT_
)

1397 
	#_Xdebug
 (*
_Xdebug_p
)

	)

1400 
_Xdebug
;

1402 
XF⁄tSåu˘
 *
	`XLﬂdQuîyF⁄t
(

1403 
Di•œy
* ,

1404 
_Xc⁄°
 *

1407 
XF⁄tSåu˘
 *
	`XQuîyF⁄t
(

1408 
Di•œy
* ,

1409 
XID


1413 
XTimeCo‹d
 *
	`XGëMŸi⁄Evíts
(

1414 
Di•œy
* ,

1415 
Wödow
 ,

1416 
Time
 ,

1417 
Time
 ,

1421 
XModifõrKeym≠
 *
	`XDñëeModifõrm≠E¡ry
(

1422 
XModifõrKeym≠
* ,

1423 #i‡
NìdWidePrŸŸy≥s


1426 
KeyCode
 ,

1431 
XModifõrKeym≠
 *
	`XGëModifõrM≠pög
(

1432 
Di•œy
*

1435 
XModifõrKeym≠
 *
	`XIn£πModifõrm≠E¡ry
(

1436 
XModifõrKeym≠
* ,

1437 #i‡
NìdWidePrŸŸy≥s


1440 
KeyCode
 ,

1445 
XModifõrKeym≠
 *
	`XNewModifõrm≠
(

1449 
XImage
 *
	`XCª©eImage
(

1450 
Di•œy
* ,

1451 
VisuÆ
* ,

1461 
Sètus
 
	`XInôImage
(

1462 
XImage
*

1464 
XImage
 *
	`XGëImage
(

1465 
Di•œy
* ,

1466 
DøwabÀ
 ,

1474 
XImage
 *
	`XGëSubImage
(

1475 
Di•œy
* ,

1476 
DøwabÀ
 ,

1483 
XImage
* ,

1491 
Di•œy
 *
	`XO≥nDi•œy
(

1492 
_Xc⁄°
 *

1495 
	`XrmInôülize
(

1499 *
	`XFëchByãs
(

1500 
Di•œy
* ,

1503 *
	`XFëchBuf„r
(

1504 
Di•œy
* ,

1508 *
	`XGëAtomName
(

1509 
Di•œy
* ,

1510 
Atom


1512 
Sètus
 
	`XGëAtomNames
(

1513 
Di•œy
* ,

1514 
Atom
* ,

1518 *
	`XGëDeÁu…
(

1519 
Di•œy
* ,

1520 
_Xc⁄°
 * ,

1521 
_Xc⁄°
 *

1523 *
	`XDi•œyName
(

1524 
_Xc⁄°
 *

1526 *
	`XKeysymToSåög
(

1527 
KeySym


1530 (*
	$XSynchr⁄ize
(

1531 
Di•œy
* ,

1532 
Boﬁ


1534 
Di•œy
*

1536 (*
	`XSëA·îFun˘i⁄
(

1537 
Di•œy
* ,

1539 
Di•œy
*

1542 
Di•œy
*

1544 
Atom
 
	`XI¡înAtom
(

1545 
Di•œy
* ,

1546 
_Xc⁄°
 * ,

1547 
Boﬁ


1549 
Sètus
 
	`XI¡înAtoms
(

1550 
Di•œy
* ,

1553 
Boﬁ
 ,

1554 
Atom
*

1556 
Cﬁ‹m≠
 
	`XC›yCﬁ‹m≠AndFªe
(

1557 
Di•œy
* ,

1558 
Cﬁ‹m≠


1560 
Cﬁ‹m≠
 
	`XCª©eCﬁ‹m≠
(

1561 
Di•œy
* ,

1562 
Wödow
 ,

1563 
VisuÆ
* ,

1566 
Curs‹
 
	`XCª©ePixm≠Curs‹
(

1567 
Di•œy
* ,

1568 
Pixm≠
 ,

1569 
Pixm≠
 ,

1570 
XCﬁ‹
* ,

1571 
XCﬁ‹
* ,

1575 
Curs‹
 
	`XCª©eGlyphCurs‹
(

1576 
Di•œy
* ,

1577 
F⁄t
 ,

1578 
F⁄t
 ,

1581 
XCﬁ‹
 
_Xc⁄°
 * ,

1582 
XCﬁ‹
 
_Xc⁄°
 *

1584 
Curs‹
 
	`XCª©eF⁄tCurs‹
(

1585 
Di•œy
* ,

1588 
F⁄t
 
	`XLﬂdF⁄t
(

1589 
Di•œy
* ,

1590 
_Xc⁄°
 *

1592 
GC
 
	`XCª©eGC
(

1593 
Di•œy
* ,

1594 
DøwabÀ
 ,

1596 
XGCVÆues
*

1598 
GC⁄ãxt
 
	`XGC⁄ãxtFromGC
(

1599 
GC


1601 
	`XFlushGC
(

1602 
Di•œy
* ,

1603 
GC


1605 
Pixm≠
 
	`XCª©ePixm≠
(

1606 
Di•œy
* ,

1607 
DøwabÀ
 ,

1612 
Pixm≠
 
	`XCª©eBôm≠FromD©a
(

1613 
Di•œy
* ,

1614 
DøwabÀ
 ,

1615 
_Xc⁄°
 * ,

1619 
Pixm≠
 
	`XCª©ePixm≠FromBôm≠D©a
(

1620 
Di•œy
* ,

1621 
DøwabÀ
 ,

1629 
Wödow
 
	`XCª©eSim∂eWödow
(

1630 
Di•œy
* ,

1631 
Wödow
 ,

1640 
Wödow
 
	`XGëSñe˘i⁄Ow√r
(

1641 
Di•œy
* ,

1642 
Atom


1644 
Wödow
 
	`XCª©eWödow
(

1645 
Di•œy
* ,

1646 
Wödow
 ,

1654 
VisuÆ
* ,

1656 
XSëWödowAâribuãs
*

1658 
Cﬁ‹m≠
 *
	`XLi°In°ÆÀdCﬁ‹m≠s
(

1659 
Di•œy
* ,

1660 
Wödow
 ,

1663 **
	`XLi°F⁄ts
(

1664 
Di•œy
* ,

1665 
_Xc⁄°
 * ,

1669 **
	`XLi°F⁄tsWôhInfo
(

1670 
Di•œy
* ,

1671 
_Xc⁄°
 * ,

1674 
XF⁄tSåu˘
**

1676 **
	`XGëF⁄tP©h
(

1677 
Di•œy
* ,

1680 **
	`XLi°Exãnsi⁄s
(

1681 
Di•œy
* ,

1684 
Atom
 *
	`XLi°Pr›îtõs
(

1685 
Di•œy
* ,

1686 
Wödow
 ,

1689 
XHo°Addªss
 *
	`XLi°Ho°s
(

1690 
Di•œy
* ,

1692 
Boﬁ
*

1694 
KeySym
 
	`XKeycodeToKeysym
(

1695 
Di•œy
* ,

1696 #i‡
NìdWidePrŸŸy≥s


1699 
KeyCode
 ,

1703 
KeySym
 
	`XLookupKeysym
(

1704 
XKeyEvít
* ,

1707 
KeySym
 *
	`XGëKeybﬂrdM≠pög
(

1708 
Di•œy
* ,

1709 #i‡
NìdWidePrŸŸy≥s


1712 
KeyCode
 ,

1717 
KeySym
 
	`XSåögToKeysym
(

1718 
_Xc⁄°
 *

1720 
	`XMaxReque°Size
(

1721 
Di•œy
*

1723 
	`XExãndedMaxReque°Size
(

1724 
Di•œy
*

1726 *
	`XResour˚M™agîSåög
(

1727 
Di•œy
*

1729 *
	`XS¸ìnResour˚Såög
(

1730 
S¸ìn
*

1732 
	`XDi•œyMŸi⁄Buf„rSize
(

1733 
Di•œy
*

1735 
VisuÆID
 
	`XVisuÆIDFromVisuÆ
(

1736 
VisuÆ
*

1741 
Sètus
 
	`XInôThªads
(

1745 
	`XLockDi•œy
(

1746 
Di•œy
*

1749 
	`XU∆ockDi•œy
(

1750 
Di•œy
*

1755 
XExtCodes
 *
	`XInôExãnsi⁄
(

1756 
Di•œy
* ,

1757 
_Xc⁄°
 *

1760 
XExtCodes
 *
	`XAddExãnsi⁄
(

1761 
Di•œy
*

1763 
XExtD©a
 *
	`XFödOnExãnsi⁄Li°
(

1764 
XExtD©a
** ,

1767 
XExtD©a
 **
	`XEHódOfExãnsi⁄Li°
(

1768 
XED©aObje˘


1772 
Wödow
 
	`XRoŸWödow
(

1773 
Di•œy
* ,

1776 
Wödow
 
	`XDeÁu…RoŸWödow
(

1777 
Di•œy
*

1779 
Wödow
 
	`XRoŸWödowOfS¸ìn
(

1780 
S¸ìn
*

1782 
VisuÆ
 *
	`XDeÁu…VisuÆ
(

1783 
Di•œy
* ,

1786 
VisuÆ
 *
	`XDeÁu…VisuÆOfS¸ìn
(

1787 
S¸ìn
*

1789 
GC
 
	`XDeÁu…GC
(

1790 
Di•œy
* ,

1793 
GC
 
	`XDeÁu…GCOfS¸ìn
(

1794 
S¸ìn
*

1796 
	`XBœckPixñ
(

1797 
Di•œy
* ,

1800 
	`XWhôePixñ
(

1801 
Di•œy
* ,

1804 
	`XAŒPœ√s
(

1807 
	`XBœckPixñOfS¸ìn
(

1808 
S¸ìn
*

1810 
	`XWhôePixñOfS¸ìn
(

1811 
S¸ìn
*

1813 
	`XNextReque°
(

1814 
Di•œy
*

1816 
	`XLa°KnownReque°Pro˚s£d
(

1817 
Di•œy
*

1819 *
	`XSîvîVíd‹
(

1820 
Di•œy
*

1822 *
	`XDi•œySåög
(

1823 
Di•œy
*

1825 
Cﬁ‹m≠
 
	`XDeÁu…Cﬁ‹m≠
(

1826 
Di•œy
* ,

1829 
Cﬁ‹m≠
 
	`XDeÁu…Cﬁ‹m≠OfS¸ìn
(

1830 
S¸ìn
*

1832 
Di•œy
 *
	`XDi•œyOfS¸ìn
(

1833 
S¸ìn
*

1835 
S¸ìn
 *
	`XS¸ìnOfDi•œy
(

1836 
Di•œy
* ,

1839 
S¸ìn
 *
	`XDeÁu…S¸ìnOfDi•œy
(

1840 
Di•œy
*

1842 
	`XEvítMaskOfS¸ìn
(

1843 
S¸ìn
*

1846 
	`XS¸ìnNumbîOfS¸ìn
(

1847 
S¸ìn
*

1850 (*
	tXEº‹H™dÀr
) (

1851 
	tDi•œy
* ,

1852 
	tXEº‹Evít
*

1855 
XEº‹H™dÀr
 
	`XSëEº‹H™dÀr
 (

1856 
XEº‹H™dÀr


1860 (*
	tXIOEº‹H™dÀr
) (

1861 
	tDi•œy
*

1864 
XIOEº‹H™dÀr
 
	`XSëIOEº‹H™dÀr
 (

1865 
XIOEº‹H™dÀr


1869 
XPixm≠F‹m©VÆues
 *
	`XLi°Pixm≠F‹m©s
(

1870 
Di•œy
* ,

1873 *
	`XLi°Dïths
(

1874 
Di•œy
* ,

1881 
Sètus
 
	`XRec⁄figuªWMWödow
(

1882 
Di•œy
* ,

1883 
Wödow
 ,

1886 
XWödowCh™ges
*

1889 
Sètus
 
	`XGëWMPrŸocﬁs
(

1890 
Di•œy
* ,

1891 
Wödow
 ,

1892 
Atom
** ,

1895 
Sètus
 
	`XSëWMPrŸocﬁs
(

1896 
Di•œy
* ,

1897 
Wödow
 ,

1898 
Atom
* ,

1901 
Sètus
 
	`XIc⁄ifyWödow
(

1902 
Di•œy
* ,

1903 
Wödow
 ,

1906 
Sètus
 
	`XWôhdøwWödow
(

1907 
Di•œy
* ,

1908 
Wödow
 ,

1911 
Sètus
 
	`XGëComm™d
(

1912 
Di•œy
* ,

1913 
Wödow
 ,

1917 
Sètus
 
	`XGëWMCﬁ‹m≠Wödows
(

1918 
Di•œy
* ,

1919 
Wödow
 ,

1920 
Wödow
** ,

1923 
Sètus
 
	`XSëWMCﬁ‹m≠Wödows
(

1924 
Di•œy
* ,

1925 
Wödow
 ,

1926 
Wödow
* ,

1929 
	`XFªeSåögLi°
(

1932 
	`XSëTønsõ¡F‹Höt
(

1933 
Di•œy
* ,

1934 
Wödow
 ,

1935 
Wödow


1940 
	`XA˘iv©eS¸ìnSavî
(

1941 
Di•œy
*

1944 
	`XAddHo°
(

1945 
Di•œy
* ,

1946 
XHo°Addªss
*

1949 
	`XAddHo°s
(

1950 
Di•œy
* ,

1951 
XHo°Addªss
* ,

1955 
	`XAddToExãnsi⁄Li°
(

1956 
_XExtD©a
** ,

1957 
XExtD©a
*

1960 
	`XAddToSaveSë
(

1961 
Di•œy
* ,

1962 
Wödow


1965 
Sètus
 
	`XAŒocCﬁ‹
(

1966 
Di•œy
* ,

1967 
Cﬁ‹m≠
 ,

1968 
XCﬁ‹
*

1971 
Sètus
 
	`XAŒocCﬁ‹Cñls
(

1972 
Di•œy
* ,

1973 
Cﬁ‹m≠
 ,

1974 
Boﬁ
 ,

1981 
Sètus
 
	`XAŒocCﬁ‹Pœ√s
(

1982 
Di•œy
* ,

1983 
Cﬁ‹m≠
 ,

1984 
Boﬁ
 ,

1995 
Sètus
 
	`XAŒocNamedCﬁ‹
(

1996 
Di•œy
* ,

1997 
Cﬁ‹m≠
 ,

1998 
_Xc⁄°
 * ,

1999 
XCﬁ‹
* ,

2000 
XCﬁ‹
*

2003 
	`XAŒowEvíts
(

2004 
Di•œy
* ,

2006 
Time


2009 
	`XAutoRïótOff
(

2010 
Di•œy
*

2013 
	`XAutoRïótOn
(

2014 
Di•œy
*

2017 
	`XBñl
(

2018 
Di•œy
* ,

2022 
	`XBôm≠BôOrdî
(

2023 
Di•œy
*

2026 
	`XBôm≠Pad
(

2027 
Di•œy
*

2030 
	`XBôm≠Unô
(

2031 
Di•œy
*

2034 
	`XCñlsOfS¸ìn
(

2035 
S¸ìn
*

2038 
	`XCh™geA˘ivePoöãrGøb
(

2039 
Di•œy
* ,

2041 
Curs‹
 ,

2042 
Time


2045 
	`XCh™geGC
(

2046 
Di•œy
* ,

2047 
GC
 ,

2049 
XGCVÆues
*

2052 
	`XCh™geKeybﬂrdC⁄åﬁ
(

2053 
Di•œy
* ,

2055 
XKeybﬂrdC⁄åﬁ
*

2058 
	`XCh™geKeybﬂrdM≠pög
(

2059 
Di•œy
* ,

2062 
KeySym
* ,

2066 
	`XCh™gePoöãrC⁄åﬁ
(

2067 
Di•œy
* ,

2068 
Boﬁ
 ,

2069 
Boﬁ
 ,

2075 
	`XCh™gePr›îty
(

2076 
Di•œy
* ,

2077 
Wödow
 ,

2078 
Atom
 ,

2079 
Atom
 ,

2082 
_Xc⁄°
 * ,

2086 
	`XCh™geSaveSë
(

2087 
Di•œy
* ,

2088 
Wödow
 ,

2092 
	`XCh™geWödowAâribuãs
(

2093 
Di•œy
* ,

2094 
Wödow
 ,

2096 
XSëWödowAâribuãs
*

2099 
Boﬁ
 
	`XCheckIfEvít
(

2100 
Di•œy
* ,

2101 
XEvít
* ,

2102 
	$Boﬁ
 (*) (

2103 
Di•œy
* ,

2104 
XEvít
* ,

2105 
XPoöãr


2107 
XPoöãr


2110 
Boﬁ
 
	`XCheckMaskEvít
(

2111 
Di•œy
* ,

2113 
XEvít
*

2116 
Boﬁ
 
	`XCheckTy≥dEvít
(

2117 
Di•œy
* ,

2119 
XEvít
*

2122 
Boﬁ
 
	`XCheckTy≥dWödowEvít
(

2123 
Di•œy
* ,

2124 
Wödow
 ,

2126 
XEvít
*

2129 
Boﬁ
 
	`XCheckWödowEvít
(

2130 
Di•œy
* ,

2131 
Wödow
 ,

2133 
XEvít
*

2136 
	`XCúcuœãSubwödows
(

2137 
Di•œy
* ,

2138 
Wödow
 ,

2142 
	`XCúcuœãSubwödowsDown
(

2143 
Di•œy
* ,

2144 
Wödow


2147 
	`XCúcuœãSubwödowsUp
(

2148 
Di•œy
* ,

2149 
Wödow


2152 
	`XCÀ¨Aªa
(

2153 
Di•œy
* ,

2154 
Wödow
 ,

2159 
Boﬁ


2162 
	`XCÀ¨Wödow
(

2163 
Di•œy
* ,

2164 
Wödow


2167 
	`XClo£Di•œy
(

2168 
Di•œy
*

2171 
	`XC⁄figuªWödow
(

2172 
Di•œy
* ,

2173 
Wödow
 ,

2175 
XWödowCh™ges
*

2178 
	`XC⁄√˘i⁄Numbî
(

2179 
Di•œy
*

2182 
	`XC⁄vîtSñe˘i⁄
(

2183 
Di•œy
* ,

2184 
Atom
 ,

2185 
Atom
 ,

2186 
Atom
 ,

2187 
Wödow
 ,

2188 
Time


2191 
	`XC›yAªa
(

2192 
Di•œy
* ,

2193 
DøwabÀ
 ,

2194 
DøwabÀ
 ,

2195 
GC
 ,

2204 
	`XC›yGC
(

2205 
Di•œy
* ,

2206 
GC
 ,

2208 
GC


2211 
	`XC›yPœ√
(

2212 
Di•œy
* ,

2213 
DøwabÀ
 ,

2214 
DøwabÀ
 ,

2215 
GC
 ,

2225 
	`XDeÁu…Dïth
(

2226 
Di•œy
* ,

2230 
	`XDeÁu…DïthOfS¸ìn
(

2231 
S¸ìn
*

2234 
	`XDeÁu…S¸ìn
(

2235 
Di•œy
*

2238 
	`XDeföeCurs‹
(

2239 
Di•œy
* ,

2240 
Wödow
 ,

2241 
Curs‹


2244 
	`XDñëePr›îty
(

2245 
Di•œy
* ,

2246 
Wödow
 ,

2247 
Atom


2250 
	`XDe°royWödow
(

2251 
Di•œy
* ,

2252 
Wödow


2255 
	`XDe°roySubwödows
(

2256 
Di•œy
* ,

2257 
Wödow


2260 
	`XD€sBackögSt‹e
(

2261 
S¸ìn
*

2264 
Boﬁ
 
	`XD€sSaveUndîs
(

2265 
S¸ìn
*

2268 
	`XDißbÀAc˚ssC⁄åﬁ
(

2269 
Di•œy
*

2273 
	`XDi•œyCñls
(

2274 
Di•œy
* ,

2278 
	`XDi•œyHeight
(

2279 
Di•œy
* ,

2283 
	`XDi•œyHeightMM
(

2284 
Di•œy
* ,

2288 
	`XDi•œyKeycodes
(

2289 
Di•œy
* ,

2294 
	`XDi•œyPœ√s
(

2295 
Di•œy
* ,

2299 
	`XDi•œyWidth
(

2300 
Di•œy
* ,

2304 
	`XDi•œyWidthMM
(

2305 
Di•œy
* ,

2309 
	`XDøwArc
(

2310 
Di•œy
* ,

2311 
DøwabÀ
 ,

2312 
GC
 ,

2321 
	`XDøwArcs
(

2322 
Di•œy
* ,

2323 
DøwabÀ
 ,

2324 
GC
 ,

2325 
XArc
* ,

2329 
	`XDøwImageSåög
(

2330 
Di•œy
* ,

2331 
DøwabÀ
 ,

2332 
GC
 ,

2335 
_Xc⁄°
 * ,

2339 
	`XDøwImageSåög16
(

2340 
Di•œy
* ,

2341 
DøwabÀ
 ,

2342 
GC
 ,

2345 
_Xc⁄°
 
XCh¨2b
* ,

2349 
	`XDøwLöe
(

2350 
Di•œy
* ,

2351 
DøwabÀ
 ,

2352 
GC
 ,

2359 
	`XDøwLöes
(

2360 
Di•œy
* ,

2361 
DøwabÀ
 ,

2362 
GC
 ,

2363 
XPoöt
* ,

2368 
	`XDøwPoöt
(

2369 
Di•œy
* ,

2370 
DøwabÀ
 ,

2371 
GC
 ,

2376 
	`XDøwPoöts
(

2377 
Di•œy
* ,

2378 
DøwabÀ
 ,

2379 
GC
 ,

2380 
XPoöt
* ,

2385 
	`XDøwRe˘™gÀ
(

2386 
Di•œy
* ,

2387 
DøwabÀ
 ,

2388 
GC
 ,

2395 
	`XDøwRe˘™gÀs
(

2396 
Di•œy
* ,

2397 
DøwabÀ
 ,

2398 
GC
 ,

2399 
XRe˘™gÀ
* ,

2403 
	`XDøwSegmíts
(

2404 
Di•œy
* ,

2405 
DøwabÀ
 ,

2406 
GC
 ,

2407 
XSegmít
* ,

2411 
	`XDøwSåög
(

2412 
Di•œy
* ,

2413 
DøwabÀ
 ,

2414 
GC
 ,

2417 
_Xc⁄°
 * ,

2421 
	`XDøwSåög16
(

2422 
Di•œy
* ,

2423 
DøwabÀ
 ,

2424 
GC
 ,

2427 
_Xc⁄°
 
XCh¨2b
* ,

2431 
	`XDøwText
(

2432 
Di•œy
* ,

2433 
DøwabÀ
 ,

2434 
GC
 ,

2437 
XTextIãm
* ,

2441 
	`XDøwText16
(

2442 
Di•œy
* ,

2443 
DøwabÀ
 ,

2444 
GC
 ,

2447 
XTextIãm16
* ,

2451 
	`XE«bÀAc˚ssC⁄åﬁ
(

2452 
Di•œy
*

2455 
	`XEvítsQueued
(

2456 
Di•œy
* ,

2460 
Sètus
 
	`XFëchName
(

2461 
Di•œy
* ,

2462 
Wödow
 ,

2466 
	`XFûlArc
(

2467 
Di•œy
* ,

2468 
DøwabÀ
 ,

2469 
GC
 ,

2478 
	`XFûlArcs
(

2479 
Di•œy
* ,

2480 
DøwabÀ
 ,

2481 
GC
 ,

2482 
XArc
* ,

2486 
	`XFûlPﬁyg⁄
(

2487 
Di•œy
* ,

2488 
DøwabÀ
 ,

2489 
GC
 ,

2490 
XPoöt
* ,

2496 
	`XFûlRe˘™gÀ
(

2497 
Di•œy
* ,

2498 
DøwabÀ
 ,

2499 
GC
 ,

2506 
	`XFûlRe˘™gÀs
(

2507 
Di•œy
* ,

2508 
DøwabÀ
 ,

2509 
GC
 ,

2510 
XRe˘™gÀ
* ,

2514 
	`XFlush
(

2515 
Di•œy
*

2518 
	`XF‹˚S¸ìnSavî
(

2519 
Di•œy
* ,

2523 
	`XFªe
(

2527 
	`XFªeCﬁ‹m≠
(

2528 
Di•œy
* ,

2529 
Cﬁ‹m≠


2532 
	`XFªeCﬁ‹s
(

2533 
Di•œy
* ,

2534 
Cﬁ‹m≠
 ,

2540 
	`XFªeCurs‹
(

2541 
Di•œy
* ,

2542 
Curs‹


2545 
	`XFªeExãnsi⁄Li°
(

2549 
	`XFªeF⁄t
(

2550 
Di•œy
* ,

2551 
XF⁄tSåu˘
*

2554 
	`XFªeF⁄tInfo
(

2556 
XF⁄tSåu˘
* ,

2560 
	`XFªeF⁄tNames
(

2564 
	`XFªeF⁄tP©h
(

2568 
	`XFªeGC
(

2569 
Di•œy
* ,

2570 
GC


2573 
	`XFªeModifõrm≠
(

2574 
XModifõrKeym≠
*

2577 
	`XFªePixm≠
(

2578 
Di•œy
* ,

2579 
Pixm≠


2582 
	`XGeomëry
(

2583 
Di•œy
* ,

2585 
_Xc⁄°
 * ,

2586 
_Xc⁄°
 * ,

2598 
	`XGëEº‹D©aba£Text
(

2599 
Di•œy
* ,

2600 
_Xc⁄°
 * ,

2601 
_Xc⁄°
 * ,

2602 
_Xc⁄°
 * ,

2607 
	`XGëEº‹Text
(

2608 
Di•œy
* ,

2614 
Boﬁ
 
	`XGëF⁄tPr›îty
(

2615 
XF⁄tSåu˘
* ,

2616 
Atom
 ,

2620 
Sètus
 
	`XGëGCVÆues
(

2621 
Di•œy
* ,

2622 
GC
 ,

2624 
XGCVÆues
*

2627 
Sètus
 
	`XGëGeomëry
(

2628 
Di•œy
* ,

2629 
DøwabÀ
 ,

2630 
Wödow
* ,

2639 
Sètus
 
	`XGëIc⁄Name
(

2640 
Di•œy
* ,

2641 
Wödow
 ,

2645 
	`XGëI≈utFocus
(

2646 
Di•œy
* ,

2647 
Wödow
* ,

2651 
	`XGëKeybﬂrdC⁄åﬁ
(

2652 
Di•œy
* ,

2653 
XKeybﬂrdSèã
*

2656 
	`XGëPoöãrC⁄åﬁ
(

2657 
Di•œy
* ,

2663 
	`XGëPoöãrM≠pög
(

2664 
Di•œy
* ,

2669 
	`XGëS¸ìnSavî
(

2670 
Di•œy
* ,

2677 
Sètus
 
	`XGëTønsõ¡F‹Höt
(

2678 
Di•œy
* ,

2679 
Wödow
 ,

2680 
Wödow
*

2683 
	`XGëWödowPr›îty
(

2684 
Di•œy
* ,

2685 
Wödow
 ,

2686 
Atom
 ,

2689 
Boﬁ
 ,

2690 
Atom
 ,

2691 
Atom
* ,

2698 
Sètus
 
	`XGëWödowAâribuãs
(

2699 
Di•œy
* ,

2700 
Wödow
 ,

2701 
XWödowAâribuãs
*

2704 
	`XGøbBuâ⁄
(

2705 
Di•œy
* ,

2708 
Wödow
 ,

2709 
Boﬁ
 ,

2713 
Wödow
 ,

2714 
Curs‹


2717 
	`XGøbKey
(

2718 
Di•œy
* ,

2721 
Wödow
 ,

2722 
Boﬁ
 ,

2727 
	`XGøbKeybﬂrd
(

2728 
Di•œy
* ,

2729 
Wödow
 ,

2730 
Boﬁ
 ,

2733 
Time


2736 
	`XGøbPoöãr
(

2737 
Di•œy
* ,

2738 
Wödow
 ,

2739 
Boﬁ
 ,

2743 
Wödow
 ,

2744 
Curs‹
 ,

2745 
Time


2748 
	`XGøbSîvî
(

2749 
Di•œy
*

2752 
	`XHeightMMOfS¸ìn
(

2753 
S¸ìn
*

2756 
	`XHeightOfS¸ìn
(

2757 
S¸ìn
*

2760 
	`XIfEvít
(

2761 
Di•œy
* ,

2762 
XEvít
* ,

2763 
	$Boﬁ
 (*) (

2764 
Di•œy
* ,

2765 
XEvít
* ,

2766 
XPoöãr


2768 
XPoöãr


2771 
	`XImageByãOrdî
(

2772 
Di•œy
*

2775 
	`XIn°ÆlCﬁ‹m≠
(

2776 
Di•œy
* ,

2777 
Cﬁ‹m≠


2780 
KeyCode
 
	`XKeysymToKeycode
(

2781 
Di•œy
* ,

2782 
KeySym


2785 
	`XKûlClõ¡
(

2786 
Di•œy
* ,

2787 
XID


2790 
Sètus
 
	`XLookupCﬁ‹
(

2791 
Di•œy
* ,

2792 
Cﬁ‹m≠
 ,

2793 
_Xc⁄°
 * ,

2794 
XCﬁ‹
* ,

2795 
XCﬁ‹
*

2798 
	`XLowîWödow
(

2799 
Di•œy
* ,

2800 
Wödow


2803 
	`XM≠Rai£d
(

2804 
Di•œy
* ,

2805 
Wödow


2808 
	`XM≠Subwödows
(

2809 
Di•œy
* ,

2810 
Wödow


2813 
	`XM≠Wödow
(

2814 
Di•œy
* ,

2815 
Wödow


2818 
	`XMaskEvít
(

2819 
Di•œy
* ,

2821 
XEvít
*

2824 
	`XMaxCm≠sOfS¸ìn
(

2825 
S¸ìn
*

2828 
	`XMöCm≠sOfS¸ìn
(

2829 
S¸ìn
*

2832 
	`XMoveResizeWödow
(

2833 
Di•œy
* ,

2834 
Wödow
 ,

2841 
	`XMoveWödow
(

2842 
Di•œy
* ,

2843 
Wödow
 ,

2848 
	`XNextEvít
(

2849 
Di•œy
* ,

2850 
XEvít
*

2853 
	`XNoOp
(

2854 
Di•œy
*

2857 
Sètus
 
	`XP¨£Cﬁ‹
(

2858 
Di•œy
* ,

2859 
Cﬁ‹m≠
 ,

2860 
_Xc⁄°
 * ,

2861 
XCﬁ‹
*

2864 
	`XP¨£Geomëry
(

2865 
_Xc⁄°
 * ,

2872 
	`XPìkEvít
(

2873 
Di•œy
* ,

2874 
XEvít
*

2877 
	`XPìkIfEvít
(

2878 
Di•œy
* ,

2879 
XEvít
* ,

2880 
	$Boﬁ
 (*) (

2881 
Di•œy
* ,

2882 
XEvít
* ,

2883 
XPoöãr


2885 
XPoöãr


2888 
	`XPídög
(

2889 
Di•œy
*

2892 
	`XPœ√sOfS¸ìn
(

2893 
S¸ìn
*

2896 
	`XPrŸocﬁRevisi⁄
(

2897 
Di•œy
*

2900 
	`XPrŸocﬁVîsi⁄
(

2901 
Di•œy
*

2905 
	`XPutBackEvít
(

2906 
Di•œy
* ,

2907 
XEvít
*

2910 
	`XPutImage
(

2911 
Di•œy
* ,

2912 
DøwabÀ
 ,

2913 
GC
 ,

2914 
XImage
* ,

2923 
	`XQLígth
(

2924 
Di•œy
*

2927 
Sètus
 
	`XQuîyBe°Curs‹
(

2928 
Di•œy
* ,

2929 
DøwabÀ
 ,

2936 
Sètus
 
	`XQuîyBe°Size
(

2937 
Di•œy
* ,

2939 
DøwabÀ
 ,

2946 
Sètus
 
	`XQuîyBe°Stù∂e
(

2947 
Di•œy
* ,

2948 
DøwabÀ
 ,

2955 
Sètus
 
	`XQuîyBe°Tûe
(

2956 
Di•œy
* ,

2957 
DøwabÀ
 ,

2964 
	`XQuîyCﬁ‹
(

2965 
Di•œy
* ,

2966 
Cﬁ‹m≠
 ,

2967 
XCﬁ‹
*

2970 
	`XQuîyCﬁ‹s
(

2971 
Di•œy
* ,

2972 
Cﬁ‹m≠
 ,

2973 
XCﬁ‹
* ,

2977 
Boﬁ
 
	`XQuîyExãnsi⁄
(

2978 
Di•œy
* ,

2979 
_Xc⁄°
 * ,

2985 
	`XQuîyKeym≠
(

2986 
Di•œy
* ,

2990 
Boﬁ
 
	`XQuîyPoöãr
(

2991 
Di•œy
* ,

2992 
Wödow
 ,

2993 
Wödow
* ,

2994 
Wödow
* ,

3002 
	`XQuîyTextExã¡s
(

3003 
Di•œy
* ,

3004 
XID
 ,

3005 
_Xc⁄°
 * ,

3010 
XCh¨Såu˘
*

3013 
	`XQuîyTextExã¡s16
(

3014 
Di•œy
* ,

3015 
XID
 ,

3016 
_Xc⁄°
 
XCh¨2b
* ,

3021 
XCh¨Såu˘
*

3024 
Sètus
 
	`XQuîyTªe
(

3025 
Di•œy
* ,

3026 
Wödow
 ,

3027 
Wödow
* ,

3028 
Wödow
* ,

3029 
Wödow
** ,

3033 
	`XRai£Wödow
(

3034 
Di•œy
* ,

3035 
Wödow


3038 
	`XRódBôm≠Fûe
(

3039 
Di•œy
* ,

3040 
DøwabÀ
 ,

3041 
_Xc⁄°
 * ,

3044 
Pixm≠
* ,

3049 
	`XRódBôm≠FûeD©a
(

3050 
_Xc⁄°
 * ,

3058 
	`XRebödKeysym
(

3059 
Di•œy
* ,

3060 
KeySym
 ,

3061 
KeySym
* ,

3063 
_Xc⁄°
 * ,

3067 
	`XRecﬁ‹Curs‹
(

3068 
Di•œy
* ,

3069 
Curs‹
 ,

3070 
XCﬁ‹
* ,

3071 
XCﬁ‹
*

3074 
	`XRe‰eshKeybﬂrdM≠pög
(

3075 
XM≠pögEvít
*

3078 
	`XRemoveFromSaveSë
(

3079 
Di•œy
* ,

3080 
Wödow


3083 
	`XRemoveHo°
(

3084 
Di•œy
* ,

3085 
XHo°Addªss
*

3088 
	`XRemoveHo°s
(

3089 
Di•œy
* ,

3090 
XHo°Addªss
* ,

3094 
	`XRï¨ítWödow
(

3095 
Di•œy
* ,

3096 
Wödow
 ,

3097 
Wödow
 ,

3102 
	`XRe£tS¸ìnSavî
(

3103 
Di•œy
*

3106 
	`XResizeWödow
(

3107 
Di•œy
* ,

3108 
Wödow
 ,

3113 
	`XRe°ackWödows
(

3114 
Di•œy
* ,

3115 
Wödow
* ,

3119 
	`XRŸ©eBuf„rs
(

3120 
Di•œy
* ,

3124 
	`XRŸ©eWödowPr›îtõs
(

3125 
Di•œy
* ,

3126 
Wödow
 ,

3127 
Atom
* ,

3132 
	`XS¸ìnCou¡
(

3133 
Di•œy
*

3136 
	`XSñe˘I≈ut
(

3137 
Di•œy
* ,

3138 
Wödow
 ,

3142 
Sètus
 
	`XSídEvít
(

3143 
Di•œy
* ,

3144 
Wödow
 ,

3145 
Boﬁ
 ,

3147 
XEvít
*

3150 
	`XSëAc˚ssC⁄åﬁ
(

3151 
Di•œy
* ,

3155 
	`XSëArcMode
(

3156 
Di•œy
* ,

3157 
GC
 ,

3161 
	`XSëBackground
(

3162 
Di•œy
* ,

3163 
GC
 ,

3167 
	`XSëClùMask
(

3168 
Di•œy
* ,

3169 
GC
 ,

3170 
Pixm≠


3173 
	`XSëClùOrigö
(

3174 
Di•œy
* ,

3175 
GC
 ,

3180 
	`XSëClùRe˘™gÀs
(

3181 
Di•œy
* ,

3182 
GC
 ,

3185 
XRe˘™gÀ
* ,

3190 
	`XSëClo£DownMode
(

3191 
Di•œy
* ,

3195 
	`XSëComm™d
(

3196 
Di•œy
* ,

3197 
Wödow
 ,

3202 
	`XSëDashes
(

3203 
Di•œy
* ,

3204 
GC
 ,

3206 
_Xc⁄°
 * ,

3210 
	`XSëFûlRuÀ
(

3211 
Di•œy
* ,

3212 
GC
 ,

3216 
	`XSëFûlStyÀ
(

3217 
Di•œy
* ,

3218 
GC
 ,

3222 
	`XSëF⁄t
(

3223 
Di•œy
* ,

3224 
GC
 ,

3225 
F⁄t


3228 
	`XSëF⁄tP©h
(

3229 
Di•œy
* ,

3234 
	`XSëF‹eground
(

3235 
Di•œy
* ,

3236 
GC
 ,

3240 
	`XSëFun˘i⁄
(

3241 
Di•œy
* ,

3242 
GC
 ,

3246 
	`XSëGøphicsExposuªs
(

3247 
Di•œy
* ,

3248 
GC
 ,

3249 
Boﬁ


3252 
	`XSëIc⁄Name
(

3253 
Di•œy
* ,

3254 
Wödow
 ,

3255 
_Xc⁄°
 *

3258 
	`XSëI≈utFocus
(

3259 
Di•œy
* ,

3260 
Wödow
 ,

3262 
Time


3265 
	`XSëLöeAâribuãs
(

3266 
Di•œy
* ,

3267 
GC
 ,

3274 
	`XSëModifõrM≠pög
(

3275 
Di•œy
* ,

3276 
XModifõrKeym≠
*

3279 
	`XSëPœ√Mask
(

3280 
Di•œy
* ,

3281 
GC
 ,

3285 
	`XSëPoöãrM≠pög
(

3286 
Di•œy
* ,

3287 
_Xc⁄°
 * ,

3291 
	`XSëS¸ìnSavî
(

3292 
Di•œy
* ,

3299 
	`XSëSñe˘i⁄Ow√r
(

3300 
Di•œy
* ,

3301 
Atom
 ,

3302 
Wödow
 ,

3303 
Time


3306 
	`XSëSèã
(

3307 
Di•œy
* ,

3308 
GC
 ,

3315 
	`XSëStù∂e
(

3316 
Di•œy
* ,

3317 
GC
 ,

3318 
Pixm≠


3321 
	`XSëSubwödowMode
(

3322 
Di•œy
* ,

3323 
GC
 ,

3327 
	`XSëTSOrigö
(

3328 
Di•œy
* ,

3329 
GC
 ,

3334 
	`XSëTûe
(

3335 
Di•œy
* ,

3336 
GC
 ,

3337 
Pixm≠


3340 
	`XSëWödowBackground
(

3341 
Di•œy
* ,

3342 
Wödow
 ,

3346 
	`XSëWödowBackgroundPixm≠
(

3347 
Di•œy
* ,

3348 
Wödow
 ,

3349 
Pixm≠


3352 
	`XSëWödowB‹dî
(

3353 
Di•œy
* ,

3354 
Wödow
 ,

3358 
	`XSëWödowB‹dîPixm≠
(

3359 
Di•œy
* ,

3360 
Wödow
 ,

3361 
Pixm≠


3364 
	`XSëWödowB‹dîWidth
(

3365 
Di•œy
* ,

3366 
Wödow
 ,

3370 
	`XSëWödowCﬁ‹m≠
(

3371 
Di•œy
* ,

3372 
Wödow
 ,

3373 
Cﬁ‹m≠


3376 
	`XSt‹eBuf„r
(

3377 
Di•œy
* ,

3378 
_Xc⁄°
 * ,

3383 
	`XSt‹eByãs
(

3384 
Di•œy
* ,

3385 
_Xc⁄°
 * ,

3389 
	`XSt‹eCﬁ‹
(

3390 
Di•œy
* ,

3391 
Cﬁ‹m≠
 ,

3392 
XCﬁ‹
*

3395 
	`XSt‹eCﬁ‹s
(

3396 
Di•œy
* ,

3397 
Cﬁ‹m≠
 ,

3398 
XCﬁ‹
* ,

3402 
	`XSt‹eName
(

3403 
Di•œy
* ,

3404 
Wödow
 ,

3405 
_Xc⁄°
 *

3408 
	`XSt‹eNamedCﬁ‹
(

3409 
Di•œy
* ,

3410 
Cﬁ‹m≠
 ,

3411 
_Xc⁄°
 * ,

3416 
	`XSync
(

3417 
Di•œy
* ,

3418 
Boﬁ


3421 
	`XTextExã¡s
(

3422 
XF⁄tSåu˘
* ,

3423 
_Xc⁄°
 * ,

3428 
XCh¨Såu˘
*

3431 
	`XTextExã¡s16
(

3432 
XF⁄tSåu˘
* ,

3433 
_Xc⁄°
 
XCh¨2b
* ,

3438 
XCh¨Såu˘
*

3441 
	`XTextWidth
(

3442 
XF⁄tSåu˘
* ,

3443 
_Xc⁄°
 * ,

3447 
	`XTextWidth16
(

3448 
XF⁄tSåu˘
* ,

3449 
_Xc⁄°
 
XCh¨2b
* ,

3453 
Boﬁ
 
	`XTøn¶©eCo‹dö©es
(

3454 
Di•œy
* ,

3455 
Wödow
 ,

3456 
Wödow
 ,

3461 
Wödow
*

3464 
	`XUndeföeCurs‹
(

3465 
Di•œy
* ,

3466 
Wödow


3469 
	`XUngøbBuâ⁄
(

3470 
Di•œy
* ,

3473 
Wödow


3476 
	`XUngøbKey
(

3477 
Di•œy
* ,

3480 
Wödow


3483 
	`XUngøbKeybﬂrd
(

3484 
Di•œy
* ,

3485 
Time


3488 
	`XUngøbPoöãr
(

3489 
Di•œy
* ,

3490 
Time


3493 
	`XUngøbSîvî
(

3494 
Di•œy
*

3497 
	`XUnö°ÆlCﬁ‹m≠
(

3498 
Di•œy
* ,

3499 
Cﬁ‹m≠


3502 
	`XU∆ﬂdF⁄t
(

3503 
Di•œy
* ,

3504 
F⁄t


3507 
	`XUnm≠Subwödows
(

3508 
Di•œy
* ,

3509 
Wödow


3512 
	`XUnm≠Wödow
(

3513 
Di•œy
* ,

3514 
Wödow


3517 
	`XVíd‹Rñó£
(

3518 
Di•œy
*

3521 
	`XW¨pPoöãr
(

3522 
Di•œy
* ,

3523 
Wödow
 ,

3524 
Wödow
 ,

3533 
	`XWidthMMOfS¸ìn
(

3534 
S¸ìn
*

3537 
	`XWidthOfS¸ìn
(

3538 
S¸ìn
*

3541 
	`XWödowEvít
(

3542 
Di•œy
* ,

3543 
Wödow
 ,

3545 
XEvít
*

3548 
	`XWrôeBôm≠Fûe
(

3549 
Di•œy
* ,

3550 
_Xc⁄°
 * ,

3551 
Pixm≠
 ,

3558 
Boﬁ
 
	`XSuµ‹tsLoˇÀ
 ();

3560 *
	`XSëLoˇÀModifõrs
(

3564 
XOM
 
	`XO≥nOM
(

3565 
Di•œy
* ,

3566 
_XrmHashBuckëRec
* ,

3567 
_Xc⁄°
 * ,

3568 
_Xc⁄°
 *

3571 
Sètus
 
	`XClo£OM
(

3572 
XOM


3575 *
	$XSëOMVÆues
(

3576 
XOM
 ,

3578 Ë
	`_X_SENTINEL
(0);

3580 *
	$XGëOMVÆues
(

3581 
XOM
 ,

3583 Ë
	`_X_SENTINEL
(0);

3585 
Di•œy
 *
	`XDi•œyOfOM
(

3586 
XOM


3589 *
	`XLoˇÀOfOM
(

3590 
XOM


3593 
XOC
 
	$XCª©eOC
(

3594 
XOM
 ,

3596 Ë
	`_X_SENTINEL
(0);

3598 
	`XDe°royOC
(

3599 
XOC


3602 
XOM
 
	`XOMOfOC
(

3603 
XOC


3606 *
	$XSëOCVÆues
(

3607 
XOC
 ,

3609 Ë
	`_X_SENTINEL
(0);

3611 *
	$XGëOCVÆues
(

3612 
XOC
 ,

3614 Ë
	`_X_SENTINEL
(0);

3616 
XF⁄tSë
 
	`XCª©eF⁄tSë
(

3617 
Di•œy
* ,

3618 
_Xc⁄°
 * ,

3624 
	`XFªeF⁄tSë
(

3625 
Di•œy
* ,

3626 
XF⁄tSë


3629 
	`XF⁄tsOfF⁄tSë
(

3630 
XF⁄tSë
 ,

3631 
XF⁄tSåu˘
*** ,

3635 *
	`XBa£F⁄tNameLi°OfF⁄tSë
(

3636 
XF⁄tSë


3639 *
	`XLoˇÀOfF⁄tSë
(

3640 
XF⁄tSë


3643 
Boﬁ
 
	`XC⁄ãxtDïídítDøwög
(

3644 
XF⁄tSë


3647 
Boﬁ
 
	`XDúe˘i⁄ÆDïídítDøwög
(

3648 
XF⁄tSë


3651 
Boﬁ
 
	`XC⁄ãxtuÆDøwög
(

3652 
XF⁄tSë


3655 
XF⁄tSëExã¡s
 *
	`XExã¡sOfF⁄tSë
(

3656 
XF⁄tSë


3659 
	`XmbTextEsˇ≥mít
(

3660 
XF⁄tSë
 ,

3661 
_Xc⁄°
 * ,

3665 
	`XwcTextEsˇ≥mít
(

3666 
XF⁄tSë
 ,

3667 
_Xc⁄°
 
wch¨_t
* ,

3671 
	`Xutf8TextEsˇ≥mít
(

3672 
XF⁄tSë
 ,

3673 
_Xc⁄°
 * ,

3677 
	`XmbTextExã¡s
(

3678 
XF⁄tSë
 ,

3679 
_Xc⁄°
 * ,

3681 
XRe˘™gÀ
* ,

3682 
XRe˘™gÀ
*

3685 
	`XwcTextExã¡s
(

3686 
XF⁄tSë
 ,

3687 
_Xc⁄°
 
wch¨_t
* ,

3689 
XRe˘™gÀ
* ,

3690 
XRe˘™gÀ
*

3693 
	`Xutf8TextExã¡s
(

3694 
XF⁄tSë
 ,

3695 
_Xc⁄°
 * ,

3697 
XRe˘™gÀ
* ,

3698 
XRe˘™gÀ
*

3701 
Sètus
 
	`XmbTextPîCh¨Exã¡s
(

3702 
XF⁄tSë
 ,

3703 
_Xc⁄°
 * ,

3705 
XRe˘™gÀ
* ,

3706 
XRe˘™gÀ
* ,

3709 
XRe˘™gÀ
* ,

3710 
XRe˘™gÀ
*

3713 
Sètus
 
	`XwcTextPîCh¨Exã¡s
(

3714 
XF⁄tSë
 ,

3715 
_Xc⁄°
 
wch¨_t
* ,

3717 
XRe˘™gÀ
* ,

3718 
XRe˘™gÀ
* ,

3721 
XRe˘™gÀ
* ,

3722 
XRe˘™gÀ
*

3725 
Sètus
 
	`Xutf8TextPîCh¨Exã¡s
(

3726 
XF⁄tSë
 ,

3727 
_Xc⁄°
 * ,

3729 
XRe˘™gÀ
* ,

3730 
XRe˘™gÀ
* ,

3733 
XRe˘™gÀ
* ,

3734 
XRe˘™gÀ
*

3737 
	`XmbDøwText
(

3738 
Di•œy
* ,

3739 
DøwabÀ
 ,

3740 
GC
 ,

3743 
XmbTextIãm
* ,

3747 
	`XwcDøwText
(

3748 
Di•œy
* ,

3749 
DøwabÀ
 ,

3750 
GC
 ,

3753 
XwcTextIãm
* ,

3757 
	`Xutf8DøwText
(

3758 
Di•œy
* ,

3759 
DøwabÀ
 ,

3760 
GC
 ,

3763 
XmbTextIãm
* ,

3767 
	`XmbDøwSåög
(

3768 
Di•œy
* ,

3769 
DøwabÀ
 ,

3770 
XF⁄tSë
 ,

3771 
GC
 ,

3774 
_Xc⁄°
 * ,

3778 
	`XwcDøwSåög
(

3779 
Di•œy
* ,

3780 
DøwabÀ
 ,

3781 
XF⁄tSë
 ,

3782 
GC
 ,

3785 
_Xc⁄°
 
wch¨_t
* ,

3789 
	`Xutf8DøwSåög
(

3790 
Di•œy
* ,

3791 
DøwabÀ
 ,

3792 
XF⁄tSë
 ,

3793 
GC
 ,

3796 
_Xc⁄°
 * ,

3800 
	`XmbDøwImageSåög
(

3801 
Di•œy
* ,

3802 
DøwabÀ
 ,

3803 
XF⁄tSë
 ,

3804 
GC
 ,

3807 
_Xc⁄°
 * ,

3811 
	`XwcDøwImageSåög
(

3812 
Di•œy
* ,

3813 
DøwabÀ
 ,

3814 
XF⁄tSë
 ,

3815 
GC
 ,

3818 
_Xc⁄°
 
wch¨_t
* ,

3822 
	`Xutf8DøwImageSåög
(

3823 
Di•œy
* ,

3824 
DøwabÀ
 ,

3825 
XF⁄tSë
 ,

3826 
GC
 ,

3829 
_Xc⁄°
 * ,

3833 
XIM
 
	`XO≥nIM
(

3834 
Di•œy
* ,

3835 
_XrmHashBuckëRec
* ,

3840 
Sètus
 
	`XClo£IM
(

3841 
XIM


3844 *
	$XGëIMVÆues
(

3845 
XIM
 , ...

3846 Ë
	`_X_SENTINEL
(0);

3848 *
	$XSëIMVÆues
(

3849 
XIM
 , ...

3850 Ë
	`_X_SENTINEL
(0);

3852 
Di•œy
 *
	`XDi•œyOfIM
(

3853 
XIM


3856 *
	`XLoˇÀOfIM
(

3857 
XIM


3860 
XIC
 
	$XCª©eIC
(

3861 
XIM
 , ...

3862 Ë
	`_X_SENTINEL
(0);

3864 
	`XDe°royIC
(

3865 
XIC


3868 
	`XSëICFocus
(

3869 
XIC


3872 
	`XUn£tICFocus
(

3873 
XIC


3876 
wch¨_t
 *
	`XwcRe£tIC
(

3877 
XIC


3880 *
	`XmbRe£tIC
(

3881 
XIC


3884 *
	`Xutf8Re£tIC
(

3885 
XIC


3888 *
	$XSëICVÆues
(

3889 
XIC
 , ...

3890 Ë
	`_X_SENTINEL
(0);

3892 *
	$XGëICVÆues
(

3893 
XIC
 , ...

3894 Ë
	`_X_SENTINEL
(0);

3896 
XIM
 
	`XIMOfIC
(

3897 
XIC


3900 
Boﬁ
 
	`XFûãrEvít
(

3901 
XEvít
* ,

3902 
Wödow


3905 
	`XmbLookupSåög
(

3906 
XIC
 ,

3907 
XKeyPªs£dEvít
* ,

3910 
KeySym
* ,

3911 
Sètus
*

3914 
	`XwcLookupSåög
(

3915 
XIC
 ,

3916 
XKeyPªs£dEvít
* ,

3917 
wch¨_t
* ,

3919 
KeySym
* ,

3920 
Sètus
*

3923 
	`Xutf8LookupSåög
(

3924 
XIC
 ,

3925 
XKeyPªs£dEvít
* ,

3928 
KeySym
* ,

3929 
Sètus
*

3932 
XVaNe°edLi°
 
	$XVaCª©eNe°edLi°
(

3934 Ë
	`_X_SENTINEL
(0);

3938 
Boﬁ
 
	`XRegi°îIMIn°™tüãCÆlback
(

3939 
Di•œy
* ,

3940 
_XrmHashBuckëRec
* ,

3943 
XIDProc
 ,

3944 
XPoöãr


3947 
Boﬁ
 
	`XUƒegi°îIMIn°™tüãCÆlback
(

3948 
Di•œy
* ,

3949 
_XrmHashBuckëRec
* ,

3952 
XIDProc
 ,

3953 
XPoöãr


3956 (*
	tXC⁄√˘i⁄W©chProc
)(

3957 
	tDi•œy
* ,

3958 
	tXPoöãr
 ,

3960 
	tBoﬁ
 ,

3961 
	tXPoöãr
*

3965 
Sètus
 
	`XI¡î«lC⁄√˘i⁄Numbîs
(

3966 
Di•œy
* ,

3971 
	`XPro˚ssI¡î«lC⁄√˘i⁄
(

3972 
Di•œy
* ,

3976 
Sètus
 
	`XAddC⁄√˘i⁄W©ch
(

3977 
Di•œy
* ,

3978 
XC⁄√˘i⁄W©chProc
 ,

3979 
XPoöãr


3982 
	`XRemoveC⁄√˘i⁄W©ch
(

3983 
Di•œy
* ,

3984 
XC⁄√˘i⁄W©chProc
 ,

3985 
XPoöãr


3988 
	`XSëAuth‹iz©i⁄
(

3995 
	`_Xmbtowc
(

3996 
wch¨_t
 * ,

3997 #ifde‡
ISC


3999 
size_t


4006 
	`_Xw˘omb
(

4008 
wch¨_t


4011 
_XFUNCPROTOEND


	@/usr/include/X11/Xmd.h

49 #i‚de‡
XMD_H


50 
	#XMD_H
 1

	)

59 #i‡
deföed
(
sun
Ë&& deföed(
__SVR4
)

60 
	~<sys/iß_defs.h
>

63 #ifde‡
CRAY


64 
	#WORD64


	)

66 #i‡
deföed
 (
_LP64
) || \

67 
deföed
(
__Æpha
Ë|| deföed(
__Æpha__
) || \

68 
deföed
(
__ü64__
Ë|| deföed(
ü64
) || \

69 
deföed
(
__•¨c64__
) || \

70 
deföed
(
__s390x__
) || \

71 (
deföed
(
__hµa__
Ë&& deföed(
__LP64__
)) || \

72 
deföed
(
__amd64__
Ë|| deföed(
amd64
) || \

73 
deföed
(
__powîpc64__
) || \

74 (
deföed
(
sgi
Ë&& (
	g_MIPS_SZLONG
 == 64))

75 
	#LONG64


	)

82 #ifde‡
WORD64


83 
	#MUSTCOPY


	)

101 #i‡((
deföed
(
__STDC__
Ë|| deföed(
__˝lu•lus
Ë|| deföed(
c_∂u•lus
)Ë&& !deföed(
UNIXCPP
)Ë|| deföed(
ANSICPP
)

102 
	#_SIZEOF
(
x
Ë
sz_
##
	)
x

103 
	#SIZEOF
(
x
Ë
	`_SIZEOF
(x)

	)

105 
	#SIZEOF
(
x
Ë
sz_
 
	)
x

113 #ifde‡
WORD64


114 
	tINT64
;

115 
	tCARD64
;

116 
	#B32
 :32

	)

117 
	#B16
 :16

	)

118 #ifde‡
UNSIGNEDBITFIELDS


119 
	tINT32
;

120 
	tINT16
;

122 #ifde‡
__STDC__


123 sig√d 
	tINT32
;

124 sig√d 
	tINT16
;

126 
	tINT32
;

127 
	tINT16
;

131 
	#B32


	)

132 
	#B16


	)

133 #ifde‡
LONG64


134 
	tINT64
;

135 
	tINT32
;

137 
	tINT32
;

139 
	tINT16
;

142 #i‡
deföed
(
__STDC__
Ë|| deföed(
sgi
Ë|| deföed(
_AIX
)

143 sig√d 
	tINT8
;

145 
	tINT8
;

148 #ifde‡
LONG64


149 
	tCARD64
;

150 
	tCARD32
;

152 
	tCARD32
;

154 #i‡!
deföed
(
WORD64
Ë&& !deföed(
LONG64
)

155 
	tCARD64
;

157 
	tCARD16
;

158 
	tCARD8
;

160 
CARD32
 
	tBITS32
;

161 
CARD16
 
	tBITS16
;

163 #i‚de‡
I_NEED_OS2_H


164 
CARD8
 
	tBYTE
;

165 
CARD8
 
	tBOOL
;

167 
	#BYTE
 
CARD8


	)

168 
	#BOOL
 
CARD8


	)

174 #i‡
deföed
(
WORD64
Ë&& deföed(
UNSIGNEDBITFIELDS
)

175 
	#cvtINT8toI¡
(
vÆ
Ë(((vÆË& 0x00000080Ë? ((vÆË| 0xffffffffffffff00Ë: (vÆ))

	)

176 
	#cvtINT16toI¡
(
vÆ
Ë(((vÆË& 0x00008000Ë? ((vÆË| 0xffffffffffff0000Ë: (vÆ))

	)

177 
	#cvtINT32toI¡
(
vÆ
Ë(((vÆË& 0x80000000Ë? ((vÆË| 0xffffffff00000000Ë: (vÆ))

	)

178 
	#cvtINT8toSh‹t
(
vÆ
Ë
	`cvtINT8toI¡
(vÆ)

	)

179 
	#cvtINT16toSh‹t
(
vÆ
Ë
	`cvtINT16toI¡
(vÆ)

	)

180 
	#cvtINT32toSh‹t
(
vÆ
Ë
	`cvtINT32toI¡
(vÆ)

	)

181 
	#cvtINT8toL⁄g
(
vÆ
Ë
	`cvtINT8toI¡
(vÆ)

	)

182 
	#cvtINT16toL⁄g
(
vÆ
Ë
	`cvtINT16toI¡
(vÆ)

	)

183 
	#cvtINT32toL⁄g
(
vÆ
Ë
	`cvtINT32toI¡
(vÆ)

	)

185 
	#cvtINT8toI¡
(
vÆ
Ë(vÆ)

	)

186 
	#cvtINT16toI¡
(
vÆ
Ë(vÆ)

	)

187 
	#cvtINT32toI¡
(
vÆ
Ë(vÆ)

	)

188 
	#cvtINT8toSh‹t
(
vÆ
Ë(vÆ)

	)

189 
	#cvtINT16toSh‹t
(
vÆ
Ë(vÆ)

	)

190 
	#cvtINT32toSh‹t
(
vÆ
Ë(vÆ)

	)

191 
	#cvtINT8toL⁄g
(
vÆ
Ë(vÆ)

	)

192 
	#cvtINT16toL⁄g
(
vÆ
Ë(vÆ)

	)

193 
	#cvtINT32toL⁄g
(
vÆ
Ë(vÆ)

	)

198 #ifde‡
MUSTCOPY


202 
	#NEXTPTR
(
p
,
t
Ë(((*ËpË+ 
	`SIZEOF
—))

	)

208 
	#NEXTPTR
(
p
,
t
Ë((— *)’)Ë+ 1)

	)

	@/usr/include/X11/Xutil.h

51 #i‚de‡
_XUTIL_H_


52 
	#_XUTIL_H_


	)

55 
	~<X11/Xlib.h
>

56 
	~<X11/keysym.h
>

62 
	#NoVÆue
 0x0000

	)

63 
	#XVÆue
 0x0001

	)

64 
	#YVÆue
 0x0002

	)

65 
	#WidthVÆue
 0x0004

	)

66 
	#HeightVÆue
 0x0008

	)

67 
	#AŒVÆues
 0x000F

	)

68 
	#XNeg©ive
 0x0010

	)

69 
	#YNeg©ive
 0x0020

	)

76 
	mÊags
;

77 
	mx
, 
	my
;

78 
	mwidth
, 
	mheight
;

79 
	mmö_width
, 
	mmö_height
;

80 
	mmax_width
, 
	mmax_height
;

81 
	mwidth_öc
, 
	mheight_öc
;

83 
	mx
;

84 
	my
;

85 } 
	mmö_a•e˘
, 
	mmax_a•e˘
;

86 
	mba£_width
, 
	mba£_height
;

87 
	mwö_gøvôy
;

88 } 
	tXSizeHöts
;

96 
	#USPosôi⁄
 (1L << 0Ë

	)

97 
	#USSize
 (1L << 1Ë

	)

99 
	#PPosôi⁄
 (1L << 2Ë

	)

100 
	#PSize
 (1L << 3Ë

	)

101 
	#PMöSize
 (1L << 4Ë

	)

102 
	#PMaxSize
 (1L << 5Ë

	)

103 
	#PResizeInc
 (1L << 6Ë

	)

104 
	#PA•e˘
 (1L << 7Ë

	)

105 
	#PBa£Size
 (1L << 8Ë

	)

106 
	#PWöGøvôy
 (1L << 9Ë

	)

109 
	#PAŒHöts
 (
PPosôi⁄
|
PSize
|
PMöSize
|
PMaxSize
|
PResizeInc
|
PA•e˘
)

	)

114 
	mÊags
;

115 
Boﬁ
 
	möput
;

117 
	möôül_°©e
;

118 
Pixm≠
 
	mic⁄_pixm≠
;

119 
Wödow
 
	mic⁄_wödow
;

120 
	mic⁄_x
, 
	mic⁄_y
;

121 
Pixm≠
 
	mic⁄_mask
;

122 
XID
 
	mwödow_group
;

124 } 
	tXWMHöts
;

128 
	#I≈utHöt
 (1L << 0)

	)

129 
	#SèãHöt
 (1L << 1)

	)

130 
	#Ic⁄Pixm≠Höt
 (1L << 2)

	)

131 
	#Ic⁄WödowHöt
 (1L << 3)

	)

132 
	#Ic⁄Posôi⁄Höt
 (1L << 4)

	)

133 
	#Ic⁄MaskHöt
 (1L << 5)

	)

134 
	#WödowGroupHöt
 (1L << 6)

	)

135 
	#AŒHöts
 (
I≈utHöt
|
SèãHöt
|
Ic⁄Pixm≠Höt
|
Ic⁄WödowHöt
| \

136 
Ic⁄Posôi⁄Höt
|
Ic⁄MaskHöt
|
WödowGroupHöt
)

	)

137 
	#XUrgícyHöt
 (1L << 8)

	)

140 
	#WôhdøwnSèã
 0

	)

141 
	#N‹mÆSèã
 1

	)

142 
	#Ic⁄icSèã
 3

	)

147 
	#D⁄tC¨eSèã
 0

	)

148 
	#ZoomSèã
 2

	)

149 
	#I«˘iveSèã
 4

	)

158 *
	mvÆue
;

159 
Atom
 
	mícodög
;

160 
	mf‹m©
;

161 
	mnôems
;

162 } 
	tXTextPr›îty
;

164 
	#XNoMem‹y
 -1

	)

165 
	#XLoˇÀNŸSuµ‹ãd
 -2

	)

166 
	#XC⁄vîãrNŸFound
 -3

	)

169 
	mXSåögStyÀ
,

170 
	mXCompoundTextStyÀ
,

171 
	mXTextStyÀ
,

172 
	mXStdICCTextStyÀ
,

174 
	mXUTF8SåögStyÀ


175 } 
	tXICCEncodögStyÀ
;

178 
	mmö_width
, 
	mmö_height
;

179 
	mmax_width
, 
	mmax_height
;

180 
	mwidth_öc
, 
	mheight_öc
;

181 } 
	tXIc⁄Size
;

184 *
	mªs_«me
;

185 *
	mªs_˛ass
;

186 } 
	tXCœssHöt
;

188 #ifde‡
XUTIL_DEFINE_FUNCTIONS


189 
XDe°royImage
(

190 
XImage
 *
ximage
);

191 
XGëPixñ
(

192 
XImage
 *
ximage
,

193 
x
, 
y
);

194 
XPutPixñ
(

195 
XImage
 *
ximage
,

196 
x
, 
y
,

197 
pixñ
);

198 
XImage
 *
XSubImage
(

199 
XImage
 *
ximage
,

200 
x
, 
y
,

201 
width
, 
height
);

202 
XAddPixñ
(

203 
XImage
 *
ximage
,

204 
vÆue
);

210 
	#XDe°royImage
(
ximage
) \

211 ((*((
ximage
)->
f
.
de°roy_image
))((ximage)))

	)

212 
	#XGëPixñ
(
ximage
, 
x
, 
y
) \

213 ((*((
ximage
)->
f
.
gë_pixñ
))((ximage), (
x
), (
y
)))

	)

214 
	#XPutPixñ
(
ximage
, 
x
, 
y
, 
pixñ
) \

215 ((*((
ximage
)->
f
.
put_pixñ
))((ximage), (
x
), (
y
), (
pixñ
)))

	)

216 
	#XSubImage
(
ximage
, 
x
, 
y
, 
width
, 
height
) \

217 ((*((
ximage
)->
f
.
sub_image
))((ximage), (
x
), (
y
), (
width
), (
height
)))

	)

218 
	#XAddPixñ
(
ximage
, 
vÆue
) \

219 ((*((
ximage
)->
f
.
add_pixñ
))((ximage), (
vÆue
)))

	)

225 
	s_XCompo£Sètus
 {

226 
XPoöãr
 
	mcompo£_±r
;

227 
	mch¨s_m©ched
;

228 } 
	tXCompo£Sètus
;

233 
	#IsKey∑dKey
(
keysym
) \

234 (((
KeySym
)(
keysym
Ë>
XK_KP_S∑˚
Ë&& ((KeySym)(keysymË<
XK_KP_EquÆ
))

	)

236 
	#IsPriv©eKey∑dKey
(
keysym
) \

237 (((
KeySym
)(
keysym
Ë>0x11000000Ë&& ((KeySym)(keysymË<0x1100FFFF))

	)

239 
	#IsCurs‹Key
(
keysym
) \

240 (((
KeySym
)(
keysym
Ë>
XK_Home
Ë&& ((KeySym)(keysymË< 
XK_Sñe˘
))

	)

242 
	#IsPFKey
(
keysym
) \

243 (((
KeySym
)(
keysym
Ë>
XK_KP_F1
Ë&& ((KeySym)(keysymË<
XK_KP_F4
))

	)

245 
	#IsFun˘i⁄Key
(
keysym
) \

246 (((
KeySym
)(
keysym
Ë>
XK_F1
Ë&& ((KeySym)(keysymË<
XK_F35
))

	)

248 
	#IsMiscFun˘i⁄Key
(
keysym
) \

249 (((
KeySym
)(
keysym
Ë>
XK_Sñe˘
Ë&& ((KeySym)(keysymË<
XK_Bªak
))

	)

251 #ifde‡
XK_XKB_KEYS


252 
	#IsModifõrKey
(
keysym
) \

253 ((((
KeySym
)(
keysym
Ë>
XK_Shi·_L
Ë&& ((KeySym)(keysymË<
XK_Hy≥r_R
)) \

254 || (((
KeySym
)(
keysym
Ë>
XK_ISO_Lock
) && \

255 ((
KeySym
)(
keysym
Ë<
XK_ISO_La°_Group_Lock
)) \

256 || ((
KeySym
)(
keysym
Ë=
XK_Mode_swôch
) \

257 || ((
KeySym
)(
keysym
Ë=
XK_Num_Lock
))

	)

259 
	#IsModifõrKey
(
keysym
) \

260 ((((
KeySym
)(
keysym
Ë>
XK_Shi·_L
Ë&& ((KeySym)(keysymË<
XK_Hy≥r_R
)) \

261 || ((
KeySym
)(
keysym
Ë=
XK_Mode_swôch
) \

262 || ((
KeySym
)(
keysym
Ë=
XK_Num_Lock
))

	)

267 
_XRegi⁄
 *
	tRegi⁄
;

271 
	#Re˘™gÀOut
 0

	)

272 
	#Re˘™gÀIn
 1

	)

273 
	#Re˘™gÀP¨t
 2

	)

282 
VisuÆ
 *
	mvisuÆ
;

283 
VisuÆID
 
	mvisuÆid
;

284 
	ms¸ìn
;

285 
	mdïth
;

286 #i‡
deföed
(
__˝lu•lus
Ë|| deföed(
c_∂u•lus
)

287 
	mc_˛ass
;

289 
	m˛ass
;

291 
	mªd_mask
;

292 
	mgªí_mask
;

293 
	mblue_mask
;

294 
	mcﬁ‹m≠_size
;

295 
	mbôs_≥r_rgb
;

296 } 
	tXVisuÆInfo
;

298 
	#VisuÆNoMask
 0x0

	)

299 
	#VisuÆIDMask
 0x1

	)

300 
	#VisuÆS¸ìnMask
 0x2

	)

301 
	#VisuÆDïthMask
 0x4

	)

302 
	#VisuÆCœssMask
 0x8

	)

303 
	#VisuÆRedMaskMask
 0x10

	)

304 
	#VisuÆGªíMaskMask
 0x20

	)

305 
	#VisuÆBlueMaskMask
 0x40

	)

306 
	#VisuÆCﬁ‹m≠SizeMask
 0x80

	)

307 
	#VisuÆBôsPîRGBMask
 0x100

	)

308 
	#VisuÆAŒMask
 0x1FF

	)

315 
Cﬁ‹m≠
 
	mcﬁ‹m≠
;

316 
	mªd_max
;

317 
	mªd_mu…
;

318 
	mgªí_max
;

319 
	mgªí_mu…
;

320 
	mblue_max
;

321 
	mblue_mu…
;

322 
	mba£_pixñ
;

323 
VisuÆID
 
	mvisuÆid
;

324 
XID
 
	mkûlid
;

325 } 
	tXSènd¨dCﬁ‹m≠
;

327 
	#Rñó£ByFªeögCﬁ‹m≠
 ((
XID
Ë1LË

	)

333 
	#Bôm≠Suc˚ss
 0

	)

334 
	#Bôm≠O≥nFaûed
 1

	)

335 
	#Bôm≠FûeInvÆid
 2

	)

336 
	#Bôm≠NoMem‹y
 3

	)

347 
	#XCSUCCESS
 0

	)

348 
	#XCNOMEM
 1

	)

349 
	#XCNOENT
 2

	)

351 
	tXC⁄ãxt
;

353 
	#XUniqueC⁄ãxt
(Ë((
XC⁄ãxt
Ë
	`XrmUniqueQu¨k
())

	)

354 
	#XSåögToC⁄ãxt
(
°rög
Ë((
XC⁄ãxt
Ë
	`XrmSåögToQu¨k
(°rög))

	)

356 
_XFUNCPROTOBEGIN


360 
XCœssHöt
 *
XAŒocCœssHöt
 (

364 
XIc⁄Size
 *
XAŒocIc⁄Size
 (

368 
XSizeHöts
 *
XAŒocSizeHöts
 (

372 
XSènd¨dCﬁ‹m≠
 *
XAŒocSènd¨dCﬁ‹m≠
 (

376 
XWMHöts
 *
XAŒocWMHöts
 (

380 
XClùBox
(

381 
Regi⁄
 ,

382 
XRe˘™gÀ
*

385 
Regi⁄
 
XCª©eRegi⁄
(

389 c⁄° *
XDeÁu…Såög
 ();

391 
XDñëeC⁄ãxt
(

392 
Di•œy
* ,

393 
XID
 ,

394 
XC⁄ãxt


397 
XDe°royRegi⁄
(

398 
Regi⁄


401 
XEm±yRegi⁄
(

402 
Regi⁄


405 
XEquÆRegi⁄
(

406 
Regi⁄
 ,

407 
Regi⁄


410 
XFödC⁄ãxt
(

411 
Di•œy
* ,

412 
XID
 ,

413 
XC⁄ãxt
 ,

414 
XPoöãr
*

417 
Sètus
 
XGëCœssHöt
(

418 
Di•œy
* ,

419 
Wödow
 ,

420 
XCœssHöt
*

423 
Sètus
 
XGëIc⁄Sizes
(

424 
Di•œy
* ,

425 
Wödow
 ,

426 
XIc⁄Size
** ,

430 
Sètus
 
XGëN‹mÆHöts
(

431 
Di•œy
* ,

432 
Wödow
 ,

433 
XSizeHöts
*

436 
Sètus
 
XGëRGBCﬁ‹m≠s
(

437 
Di•œy
* ,

438 
Wödow
 ,

439 
XSènd¨dCﬁ‹m≠
** ,

441 
Atom


444 
Sètus
 
XGëSizeHöts
(

445 
Di•œy
* ,

446 
Wödow
 ,

447 
XSizeHöts
* ,

448 
Atom


451 
Sètus
 
XGëSènd¨dCﬁ‹m≠
(

452 
Di•œy
* ,

453 
Wödow
 ,

454 
XSènd¨dCﬁ‹m≠
* ,

455 
Atom


458 
Sètus
 
XGëTextPr›îty
(

459 
Di•œy
* ,

460 
Wödow
 ,

461 
XTextPr›îty
* ,

462 
Atom


465 
XVisuÆInfo
 *
XGëVisuÆInfo
(

466 
Di•œy
* ,

468 
XVisuÆInfo
* ,

472 
Sètus
 
XGëWMClõ¡Machöe
(

473 
Di•œy
* ,

474 
Wödow
 ,

475 
XTextPr›îty
*

478 
XWMHöts
 *
XGëWMHöts
(

479 
Di•œy
* ,

480 
Wödow


483 
Sètus
 
XGëWMIc⁄Name
(

484 
Di•œy
* ,

485 
Wödow
 ,

486 
XTextPr›îty
*

489 
Sètus
 
XGëWMName
(

490 
Di•œy
* ,

491 
Wödow
 ,

492 
XTextPr›îty
*

495 
Sètus
 
XGëWMN‹mÆHöts
(

496 
Di•œy
* ,

497 
Wödow
 ,

498 
XSizeHöts
* ,

502 
Sètus
 
XGëWMSizeHöts
(

503 
Di•œy
* ,

504 
Wödow
 ,

505 
XSizeHöts
* ,

507 
Atom


510 
Sètus
 
XGëZoomHöts
(

511 
Di•œy
* ,

512 
Wödow
 ,

513 
XSizeHöts
*

516 
XI¡î£˘Regi⁄
(

517 
Regi⁄
 ,

518 
Regi⁄
 ,

519 
Regi⁄


522 
XC⁄vîtCa£
(

523 
KeySym
 ,

524 
KeySym
* ,

525 
KeySym
*

528 
XLookupSåög
(

529 
XKeyEvít
* ,

532 
KeySym
* ,

533 
XCompo£Sètus
*

536 
Sètus
 
XM©chVisuÆInfo
(

537 
Di•œy
* ,

541 
XVisuÆInfo
*

544 
XOff£tRegi⁄
(

545 
Regi⁄
 ,

550 
Boﬁ
 
XPoötInRegi⁄
(

551 
Regi⁄
 ,

556 
Regi⁄
 
XPﬁyg⁄Regi⁄
(

557 
XPoöt
* ,

562 
XRe˘InRegi⁄
(

563 
Regi⁄
 ,

570 
XSaveC⁄ãxt
(

571 
Di•œy
* ,

572 
XID
 ,

573 
XC⁄ãxt
 ,

574 
_Xc⁄°
 *

577 
XSëCœssHöt
(

578 
Di•œy
* ,

579 
Wödow
 ,

580 
XCœssHöt
*

583 
XSëIc⁄Sizes
(

584 
Di•œy
* ,

585 
Wödow
 ,

586 
XIc⁄Size
* ,

590 
XSëN‹mÆHöts
(

591 
Di•œy
* ,

592 
Wödow
 ,

593 
XSizeHöts
*

596 
XSëRGBCﬁ‹m≠s
(

597 
Di•œy
* ,

598 
Wödow
 ,

599 
XSènd¨dCﬁ‹m≠
* ,

601 
Atom


604 
XSëSizeHöts
(

605 
Di•œy
* ,

606 
Wödow
 ,

607 
XSizeHöts
* ,

608 
Atom


611 
XSëSènd¨dPr›îtõs
(

612 
Di•œy
* ,

613 
Wödow
 ,

614 
_Xc⁄°
 * ,

615 
_Xc⁄°
 * ,

616 
Pixm≠
 ,

619 
XSizeHöts
*

622 
XSëTextPr›îty
(

623 
Di•œy
* ,

624 
Wödow
 ,

625 
XTextPr›îty
* ,

626 
Atom


629 
XSëWMClõ¡Machöe
(

630 
Di•œy
* ,

631 
Wödow
 ,

632 
XTextPr›îty
*

635 
XSëWMHöts
(

636 
Di•œy
* ,

637 
Wödow
 ,

638 
XWMHöts
*

641 
XSëWMIc⁄Name
(

642 
Di•œy
* ,

643 
Wödow
 ,

644 
XTextPr›îty
*

647 
XSëWMName
(

648 
Di•œy
* ,

649 
Wödow
 ,

650 
XTextPr›îty
*

653 
XSëWMN‹mÆHöts
(

654 
Di•œy
* ,

655 
Wödow
 ,

656 
XSizeHöts
*

659 
XSëWMPr›îtõs
(

660 
Di•œy
* ,

661 
Wödow
 ,

662 
XTextPr›îty
* ,

663 
XTextPr›îty
* ,

666 
XSizeHöts
* ,

667 
XWMHöts
* ,

668 
XCœssHöt
*

671 
XmbSëWMPr›îtõs
(

672 
Di•œy
* ,

673 
Wödow
 ,

674 
_Xc⁄°
 * ,

675 
_Xc⁄°
 * ,

678 
XSizeHöts
* ,

679 
XWMHöts
* ,

680 
XCœssHöt
*

683 
Xutf8SëWMPr›îtõs
(

684 
Di•œy
* ,

685 
Wödow
 ,

686 
_Xc⁄°
 * ,

687 
_Xc⁄°
 * ,

690 
XSizeHöts
* ,

691 
XWMHöts
* ,

692 
XCœssHöt
*

695 
XSëWMSizeHöts
(

696 
Di•œy
* ,

697 
Wödow
 ,

698 
XSizeHöts
* ,

699 
Atom


702 
XSëRegi⁄
(

703 
Di•œy
* ,

704 
GC
 ,

705 
Regi⁄


708 
XSëSènd¨dCﬁ‹m≠
(

709 
Di•œy
* ,

710 
Wödow
 ,

711 
XSènd¨dCﬁ‹m≠
* ,

712 
Atom


715 
XSëZoomHöts
(

716 
Di•œy
* ,

717 
Wödow
 ,

718 
XSizeHöts
*

721 
XShrökRegi⁄
(

722 
Regi⁄
 ,

727 
Sètus
 
XSåögLi°ToTextPr›îty
(

730 
XTextPr›îty
*

733 
XSubåa˘Regi⁄
(

734 
Regi⁄
 ,

735 
Regi⁄
 ,

736 
Regi⁄


739 
XmbTextLi°ToTextPr›îty
(

740 
Di•œy
* 
di•œy
,

741 ** 
li°
,

742 
cou¡
,

743 
XICCEncodögStyÀ
 
°yÀ
,

744 
XTextPr›îty
* 
ãxt_¥›_ªtu∫


747 
XwcTextLi°ToTextPr›îty
(

748 
Di•œy
* 
di•œy
,

749 
wch¨_t
** 
li°
,

750 
cou¡
,

751 
XICCEncodögStyÀ
 
°yÀ
,

752 
XTextPr›îty
* 
ãxt_¥›_ªtu∫


755 
Xutf8TextLi°ToTextPr›îty
(

756 
Di•œy
* 
di•œy
,

757 ** 
li°
,

758 
cou¡
,

759 
XICCEncodögStyÀ
 
°yÀ
,

760 
XTextPr›îty
* 
ãxt_¥›_ªtu∫


763 
XwcFªeSåögLi°
(

764 
wch¨_t
** 
li°


767 
Sètus
 
XTextPr›îtyToSåögLi°
(

768 
XTextPr›îty
* ,

773 
XmbTextPr›îtyToTextLi°
(

774 
Di•œy
* 
di•œy
,

775 c⁄° 
XTextPr›îty
* 
ãxt_¥›
,

776 *** 
li°_ªtu∫
,

777 * 
cou¡_ªtu∫


780 
XwcTextPr›îtyToTextLi°
(

781 
Di•œy
* 
di•œy
,

782 c⁄° 
XTextPr›îty
* 
ãxt_¥›
,

783 
wch¨_t
*** 
li°_ªtu∫
,

784 * 
cou¡_ªtu∫


787 
Xutf8TextPr›îtyToTextLi°
(

788 
Di•œy
* 
di•œy
,

789 c⁄° 
XTextPr›îty
* 
ãxt_¥›
,

790 *** 
li°_ªtu∫
,

791 * 
cou¡_ªtu∫


794 
XUni⁄Re˘WôhRegi⁄
(

795 
XRe˘™gÀ
* ,

796 
Regi⁄
 ,

797 
Regi⁄


800 
XUni⁄Regi⁄
(

801 
Regi⁄
 ,

802 
Regi⁄
 ,

803 
Regi⁄


806 
XWMGeomëry
(

807 
Di•œy
* ,

809 
_Xc⁄°
 * ,

810 
_Xc⁄°
 * ,

812 
XSizeHöts
* ,

820 
XX‹Regi⁄
(

821 
Regi⁄
 ,

822 
Regi⁄
 ,

823 
Regi⁄


826 
	g_XFUNCPROTOEND


	@/usr/include/X11/keysym.h

52 
	#XK_MISCELLANY


	)

53 
	#XK_XKB_KEYS


	)

54 
	#XK_LATIN1


	)

55 
	#XK_LATIN2


	)

56 
	#XK_LATIN3


	)

57 
	#XK_LATIN4


	)

58 
	#XK_LATIN8


	)

59 
	#XK_LATIN9


	)

60 
	#XK_CAUCASUS


	)

61 
	#XK_GREEK


	)

62 
	#XK_KATAKANA


	)

63 
	#XK_ARABIC


	)

64 
	#XK_CYRILLIC


	)

65 
	#XK_HEBREW


	)

66 
	#XK_THAI


	)

67 
	#XK_KOREAN


	)

68 
	#XK_ARMENIAN


	)

69 
	#XK_GEORGIAN


	)

70 
	#XK_VIETNAMESE


	)

71 
	#XK_CURRENCY


	)

72 
	#XK_MATHEMATICAL


	)

73 
	#XK_BRAILLE


	)

75 
	~<X11/keysymdef.h
>

	@/usr/include/arpa/inet.h

19 #i‚de‡
_ARPA_INET_H


20 
	#_ARPA_INET_H
 1

	)

22 
	~<„©uªs.h
>

23 
	~<√töë/ö.h
>

26 #i‚de‡
__sockÀn_t_deföed


27 
__sockÀn_t
 
	tsockÀn_t
;

28 
	#__sockÀn_t_deföed


	)

31 
__BEGIN_DECLS


35 
ö_addr_t
 
	$öë_addr
 (
__c⁄°
 *
__˝
Ë
__THROW
;

38 
ö_addr_t
 
	$öë_ aof
 (
ö_addr
 
__ö
Ë
__THROW
;

42 
ö_addr
 
	$öë_makóddr
 (
ö_addr_t
 
__√t
, in_addr_à
__ho°
)

43 
__THROW
;

46 
ö_addr_t
 
	$öë_√tof
 (
ö_addr
 
__ö
Ë
__THROW
;

50 
ö_addr_t
 
	$öë_√tw‹k
 (
__c⁄°
 *
__˝
Ë
__THROW
;

54 *
	$öë_¡ﬂ
 (
ö_addr
 
__ö
Ë
__THROW
;

59 
	$öë_±⁄
 (
__af
, 
__c⁄°
 *
__ª°ri˘
 
__˝
,

60 *
__ª°ri˘
 
__buf
Ë
__THROW
;

65 
__c⁄°
 *
	$öë_¡›
 (
__af
, 
__c⁄°
 *
__ª°ri˘
 
__˝
,

66 *
__ª°ri˘
 
__buf
, 
sockÀn_t
 
__Àn
)

67 
__THROW
;

71 #ifde‡
__USE_MISC


74 
	$öë_©⁄
 (
__c⁄°
 *
__˝
, 
ö_addr
 *
__öp
Ë
__THROW
;

78 *
	$öë_√è
 (
ö_addr_t
 
__√t
, *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

83 *
	$öë_√t_¡›
 (
__af
, 
__c⁄°
 *
__˝
, 
__bôs
,

84 *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

89 
	$öë_√t_±⁄
 (
__af
, 
__c⁄°
 *
__˝
,

90 *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

95 
	$öë_nßp_addr
 (
__c⁄°
 *
__˝
,

96 *
__buf
, 
__Àn
Ë
__THROW
;

100 *
	$öë_nßp_¡ﬂ
 (
__Àn
, 
__c⁄°
 *
__˝
,

101 *
__buf
Ë
__THROW
;

104 
__END_DECLS


	@/usr/include/asm/page.h

2 #i‚de‡
__ASM_STUB_PAGE_H


3 
	#__ASM_STUB_PAGE_H


	)

4 #i‡
deföed
 
__x86_64__


5 
	~<asm-x86_64/∑ge.h
>

6 #ñi‡
deföed
 
__i386__


7 
	~<asm-i386/∑ge.h
>

9 #w¨nög 
This
 
machöe
 
≠≥¨s
 
to
 
be
 
√ôhî
 
x86_64
 
n‹
 
i386
.

	@/usr/include/assert.h

24 #ifdef 
_ASSERT_H


26 #unde‡
_ASSERT_H


27 #unde‡
as£π


28 #unde‡
__ASSERT_VOID_CAST


30 #ifdef 
__USE_GNU


31 #unde‡
as£π_≥º‹


36 
	#_ASSERT_H
 1

	)

37 
	~<„©uªs.h
>

39 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,95)

40 
	#__ASSERT_VOID_CAST
 
°©ic_ˇ°
<>

	)

42 
	#__ASSERT_VOID_CAST
 ()

	)

50 #ifdef 
NDEBUG


52 
	#as£π
(
ex¥
Ë(
	`__ASSERT_VOID_CAST
 (0))

	)

60 #ifdef 
__USE_GNU


61 
	#as£π_≥º‹
(
î∫um
Ë(
	`__ASSERT_VOID_CAST
 (0))

	)

66 #i‚de‡
_ASSERT_H_DECLS


67 
	#_ASSERT_H_DECLS


	)

68 
__BEGIN_DECLS


71 
	$__as£π_Áû
 (
__c⁄°
 *
__as£πi⁄
, __c⁄° *
__fûe
,

72 
__löe
, 
__c⁄°
 *
__fun˘i⁄
)

73 
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

76 
	$__as£π_≥º‹_Áû
 (
__î∫um
, 
__c⁄°
 *
__fûe
,

77 
__löe
,

78 
__c⁄°
 *
__fun˘i⁄
)

79 
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

84 
	$__as£π
 (c⁄° *
__as£πi⁄
, c⁄° *
__fûe
, 
__löe
)

85 
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

88 
__END_DECLS


91 
	#as£π
(
ex¥
) \

92 ((
ex¥
) \

93 ? 
	`__ASSERT_VOID_CAST
 (0) \

94 : 
	`__as£π_Áû
 (
	`__STRING
(
ex¥
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

96 #ifdef 
__USE_GNU


97 
	#as£π_≥º‹
(
î∫um
) \

98 (!(
î∫um
) \

99 ? 
	`__ASSERT_VOID_CAST
 (0) \

100 : 
	`__as£π_≥º‹_Áû
 ((
î∫um
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

108 #i‡
deföed
 
__˝lu•lus
 ? 
	`__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

109 
	#__ASSERT_FUNCTION
 
__PRETTY_FUNCTION__


	)

111 #i‡
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

112 
	#__ASSERT_FUNCTION
 
__func__


	)

114 
	#__ASSERT_FUNCTION
 ((
__c⁄°
 *Ë0)

	)

	@/usr/include/byteswap.h

19 #i‚de‡
_BYTESWAP_H


20 
	#_BYTESWAP_H
 1

	)

23 
	~<bôs/byãsw≠.h
>

30 
	#bsw≠_16
(
x
Ë
	`__bsw≠_16
 (x)

	)

33 
	#bsw≠_32
(
x
Ë
	`__bsw≠_32
 (x)

	)

35 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

37 
	#bsw≠_64
(
x
Ë
	`__bsw≠_64
 (x)

	)

	@/usr/include/ctype.h

24 #i‚def 
_CTYPE_H


25 
	#_CTYPE_H
 1

	)

27 
	~<„©uªs.h
>

28 
	~<bôs/ty≥s.h
>

30 
	g__BEGIN_DECLS


32 #i‚de‡
_ISbô


41 
	~<ídün.h
>

42 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


43 
	#_ISbô
(
bô
Ë(1 << (bô))

	)

45 
	#_ISbô
(
bô
Ë((bôË< 8 ? ((1 << (bô)Ë<< 8Ë: ((1 << (bô)Ë>> 8))

	)

50 
	m_ISuµî
 = 
_ISbô
 (0),

51 
	m_ISlowî
 = 
_ISbô
 (1),

52 
	m_ISÆpha
 = 
_ISbô
 (2),

53 
	m_ISdigô
 = 
_ISbô
 (3),

54 
	m_ISxdigô
 = 
_ISbô
 (4),

55 
	m_IS•a˚
 = 
_ISbô
 (5),

56 
	m_IS¥öt
 = 
_ISbô
 (6),

57 
	m_ISgøph
 = 
_ISbô
 (7),

58 
	m_ISbœnk
 = 
_ISbô
 (8),

59 
	m_IS˙ål
 = 
_ISbô
 (9),

60 
	m_ISpun˘
 = 
_ISbô
 (10),

61 
	m_ISÆnum
 = 
_ISbô
 (11)

81 
__c⁄°
 **
	$__˘y≥_b_loc
 ()

82 
	`__©åibuã__
 ((
__c⁄°
));

83 
__c⁄°
 
__öt32_t
 **
	$__˘y≥_tﬁowî_loc
 ()

84 
	`__©åibuã__
 ((
__c⁄°
));

85 
__c⁄°
 
__öt32_t
 **
	$__˘y≥_touµî_loc
 ()

86 
	`__©åibuã__
 ((
__c⁄°
));

88 
	#__is˘y≥
(
c
, 
ty≥
) \

89 ((*
	`__˘y≥_b_loc
 ())[(Ë(
c
)] & (Ë
ty≥
)

	)

91 
	#__ißscii
(
c
Ë(((cË& ~0x7fË=0Ë

	)

92 
	#__tﬂscii
(
c
Ë((cË& 0x7fË

	)

94 
	#__ex˘y≥
(
«me
Ë
	`«me
 (Ë
__THROW


	)

96 
__BEGIN_NAMESPACE_STD


102 
	`__ex˘y≥
 (
iß um
);

103 
	`__ex˘y≥
 (
ißÕha
);

104 
	`__ex˘y≥
 (
is˙ål
);

105 
	`__ex˘y≥
 (
isdigô
);

106 
	`__ex˘y≥
 (
i¶owî
);

107 
	`__ex˘y≥
 (
isgøph
);

108 
	`__ex˘y≥
 (
i•röt
);

109 
	`__ex˘y≥
 (
i•un˘
);

110 
	`__ex˘y≥
 (
is•a˚
);

111 
	`__ex˘y≥
 (
isuµî
);

112 
	`__ex˘y≥
 (
isxdigô
);

116 
	$tﬁowî
 (
__c
Ë
__THROW
;

119 
	$touµî
 (
__c
Ë
__THROW
;

121 
__END_NAMESPACE_STD


125 #ifdef 
__USE_ISOC99


126 
__BEGIN_NAMESPACE_C99


128 
	`__ex˘y≥
 (
isbœnk
);

130 
__END_NAMESPACE_C99


133 #ifde‡
__USE_GNU


135 
	$is˘y≥
 (
__c
, 
__mask
Ë
__THROW
;

138 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


142 
	$ißscii
 (
__c
Ë
__THROW
;

146 
	$tﬂscii
 (
__c
Ë
__THROW
;

150 
	`__ex˘y≥
 (
_touµî
);

151 
	`__ex˘y≥
 (
_tﬁowî
);

155 
	#__tobody
(
c
, 
f
, 
a
, 
¨gs
) \

156 (
__exãnsi⁄__
 \

157 ({ 
__ªs
; \

158 i‡( (
c
) > 1) \

160 i‡(
	`__buûtö_c⁄°™t_p
 (
c
)) \

162 
__c
 = (
c
); \

163 
__ªs
 = 
__c
 < -128 || __¯> 255 ? __¯: (
a
)[__c]; \

166 
__ªs
 = 
f
 
¨gs
; \

169 
__ªs
 = (
a
)[(Ë(
c
)]; \

170 
__ªs
; 
	}
}))

	)

172 #i‡!
deföed
 
__NO_CTYPE
 && !deföed 
__˝lu•lus


173 
	#iß um
(
c
Ë
	`__is˘y≥
((c), 
_ISÆnum
)

	)

174 
	#ißÕha
(
c
Ë
	`__is˘y≥
((c), 
_ISÆpha
)

	)

175 
	#is˙ål
(
c
Ë
	`__is˘y≥
((c), 
_IS˙ål
)

	)

176 
	#isdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISdigô
)

	)

177 
	#i¶owî
(
c
Ë
	`__is˘y≥
((c), 
_ISlowî
)

	)

178 
	#isgøph
(
c
Ë
	`__is˘y≥
((c), 
_ISgøph
)

	)

179 
	#i•röt
(
c
Ë
	`__is˘y≥
((c), 
_IS¥öt
)

	)

180 
	#i•un˘
(
c
Ë
	`__is˘y≥
((c), 
_ISpun˘
)

	)

181 
	#is•a˚
(
c
Ë
	`__is˘y≥
((c), 
_IS•a˚
)

	)

182 
	#isuµî
(
c
Ë
	`__is˘y≥
((c), 
_ISuµî
)

	)

183 
	#isxdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISxdigô
)

	)

185 #ifde‡
__USE_ISOC99


186 
	#isbœnk
(
c
Ë
	`__is˘y≥
((c), 
_ISbœnk
)

	)

189 #ifde‡
__USE_EXTERN_INLINES


190 
__exã∫_ölöe
 

191 
__NTH
 (
	$tﬁowî
 (
__c
))

193  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_tﬁowî_loc
 ())[__c] : __c;

194 
	}
}

196 
__exã∫_ölöe
 

197 
__NTH
 (
	$touµî
 (
__c
))

199  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_touµî_loc
 ())[__c] : __c;

200 
	}
}

203 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


204 
	#tﬁowî
(
c
Ë
	`__tobody
 (c, 
tﬁowî
, *
	`__˘y≥_tﬁowî_loc
 (), (c))

	)

205 
	#touµî
(
c
Ë
	`__tobody
 (c, 
touµî
, *
	`__˘y≥_touµî_loc
 (), (c))

	)

208 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


209 
	#ißscii
(
c
Ë
	`__ißscii
 (c)

	)

210 
	#tﬂscii
(
c
Ë
	`__tﬂscii
 (c)

	)

212 
	#_tﬁowî
(
c
Ë((Ë(*
	`__˘y≥_tﬁowî_loc
 ())[(Ë(c)])

	)

213 
	#_touµî
(
c
Ë((Ë(*
	`__˘y≥_touµî_loc
 ())[(Ë(c)])

	)

219 #ifde‡
__USE_GNU


233 
	~<xloˇÀ.h
>

237 
	#__is˘y≥_l
(
c
, 
ty≥
, 
loˇÀ
) \

238 ((
loˇÀ
)->
__˘y≥_b
[(Ë(
c
)] & (Ë
ty≥
)

	)

240 
	#__ex˘y≥_l
(
«me
) \

241 
	`«me
 (, 
__loˇÀ_t
Ë
__THROW


	)

247 
__ex˘y≥_l
 (
iß um_l
);

248 
__ex˘y≥_l
 (
ißÕha_l
);

249 
__ex˘y≥_l
 (
is˙ål_l
);

250 
__ex˘y≥_l
 (
isdigô_l
);

251 
__ex˘y≥_l
 (
i¶owî_l
);

252 
__ex˘y≥_l
 (
isgøph_l
);

253 
__ex˘y≥_l
 (
i•röt_l
);

254 
__ex˘y≥_l
 (
i•un˘_l
);

255 
__ex˘y≥_l
 (
is•a˚_l
);

256 
__ex˘y≥_l
 (
isuµî_l
);

257 
__ex˘y≥_l
 (
isxdigô_l
);

259 
__ex˘y≥_l
 (
isbœnk_l
);

263 
	$__tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

264 
	$tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

267 
	$__touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

268 
	$touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

270 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


271 
	#__tﬁowî_l
(
c
, 
loˇÀ
) \

272 
	`__tobody
 (
c
, 
__tﬁowî_l
, (
loˇÀ
)->
__˘y≥_tﬁowî
, (c,ÜoˇÀ))

	)

273 
	#__touµî_l
(
c
, 
loˇÀ
) \

274 
	`__tobody
 (
c
, 
__touµî_l
, (
loˇÀ
)->
__˘y≥_touµî
, (c,ÜoˇÀ))

	)

275 
	#tﬁowî_l
(
c
, 
loˇÀ
Ë
	`__tﬁowî_l
 ((c), (loˇÀ))

	)

276 
	#touµî_l
(
c
, 
loˇÀ
Ë
	`__touµî_l
 ((c), (loˇÀ))

	)

280 #i‚de‡
__NO_CTYPE


281 
	#__iß um_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆnum
, (l))

	)

282 
	#__ißÕha_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆpha
, (l))

	)

283 
	#__is˙ål_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS˙ål
, (l))

	)

284 
	#__isdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISdigô
, (l))

	)

285 
	#__i¶owî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISlowî
, (l))

	)

286 
	#__isgøph_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISgøph
, (l))

	)

287 
	#__i•röt_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS¥öt
, (l))

	)

288 
	#__i•un˘_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISpun˘
, (l))

	)

289 
	#__is•a˚_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS•a˚
, (l))

	)

290 
	#__isuµî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISuµî
, (l))

	)

291 
	#__isxdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISxdigô
, (l))

	)

293 
	#__isbœnk_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISbœnk
, (l))

	)

295 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


296 
	#__ißscii_l
(
c
,
l
Ë(÷), 
	`__ißscii
 (c))

	)

297 
	#__tﬂscii_l
(
c
,
l
Ë(÷), 
	`__tﬂscii
 (c))

	)

300 
	#iß um_l
(
c
,
l
Ë
	`__iß um_l
 ((c), (l))

	)

301 
	#ißÕha_l
(
c
,
l
Ë
	`__ißÕha_l
 ((c), (l))

	)

302 
	#is˙ål_l
(
c
,
l
Ë
	`__is˙ål_l
 ((c), (l))

	)

303 
	#isdigô_l
(
c
,
l
Ë
	`__isdigô_l
 ((c), (l))

	)

304 
	#i¶owî_l
(
c
,
l
Ë
	`__i¶owî_l
 ((c), (l))

	)

305 
	#isgøph_l
(
c
,
l
Ë
	`__isgøph_l
 ((c), (l))

	)

306 
	#i•röt_l
(
c
,
l
Ë
	`__i•röt_l
 ((c), (l))

	)

307 
	#i•un˘_l
(
c
,
l
Ë
	`__i•un˘_l
 ((c), (l))

	)

308 
	#is•a˚_l
(
c
,
l
Ë
	`__is•a˚_l
 ((c), (l))

	)

309 
	#isuµî_l
(
c
,
l
Ë
	`__isuµî_l
 ((c), (l))

	)

310 
	#isxdigô_l
(
c
,
l
Ë
	`__isxdigô_l
 ((c), (l))

	)

312 
	#isbœnk_l
(
c
,
l
Ë
	`__isbœnk_l
 ((c), (l))

	)

314 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


315 
	#ißscii_l
(
c
,
l
Ë
	`__ißscii_l
 ((c), (l))

	)

316 
	#tﬂscii_l
(
c
,
l
Ë
	`__tﬂscii_l
 ((c), (l))

	)

323 
__END_DECLS


	@/usr/include/dirent.h

23 #i‚def 
_DIRENT_H


24 
	#_DIRENT_H
 1

	)

26 
	~<„©uªs.h
>

28 
	g__BEGIN_DECLS


30 
	~<bôs/ty≥s.h
>

32 #ifde‡
__USE_XOPEN


33 #i‚de‡
__öo_t_deföed


34 #i‚de‡
__USE_FILE_OFFSET64


35 
__öo_t
 
	töo_t
;

37 
__öo64_t
 
	töo_t
;

39 
	#__öo_t_deföed


	)

41 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__öo64_t_deföed


42 
__öo64_t
 
	töo64_t
;

43 
	#__öo64_t_deföed


	)

62 
	~<bôs/dúít.h
>

64 #i‡(
deföed
 
__USE_BSD
 || deföed 
__USE_MISC
Ë&& !deföed 
d_fûío


65 
	#d_öo
 
d_fûío


	)

82 #ifde‡
_DIRENT_HAVE_D_NAMLEN


83 
	#_D_EXACT_NAMLEN
(
d
Ë((d)->
d_«mÀn
)

	)

84 
	#_D_ALLOC_NAMLEN
(
d
Ë(
	`_D_EXACT_NAMLEN
 (dË+ 1)

	)

86 
	#_D_EXACT_NAMLEN
(
d
Ë(
	`°æí
 ((d)->
d_«me
))

	)

87 #ifde‡
_DIRENT_HAVE_D_RECLEN


88 
	#_D_ALLOC_NAMLEN
(
d
Ë(((*Ë(dË+ (d)->
d_ª˛í
Ë- &(d)->
d_«me
[0])

	)

90 
	#_D_ALLOC_NAMLEN
(
d
Ë( (d)->
d_«me
 > 1 ?  (d)->d_name : \

91 
	`_D_EXACT_NAMLEN
 (
d
Ë+ 1)

	)

96 #ifde‡
__USE_BSD


100 
	mDT_UNKNOWN
 = 0,

101 
	#DT_UNKNOWN
 
DT_UNKNOWN


	)

102 
	mDT_FIFO
 = 1,

103 
	#DT_FIFO
 
DT_FIFO


	)

104 
	mDT_CHR
 = 2,

105 
	#DT_CHR
 
DT_CHR


	)

106 
	mDT_DIR
 = 4,

107 
	#DT_DIR
 
DT_DIR


	)

108 
	mDT_BLK
 = 6,

109 
	#DT_BLK
 
DT_BLK


	)

110 
	mDT_REG
 = 8,

111 
	#DT_REG
 
DT_REG


	)

112 
	mDT_LNK
 = 10,

113 
	#DT_LNK
 
DT_LNK


	)

114 
	mDT_SOCK
 = 12,

115 
	#DT_SOCK
 
DT_SOCK


	)

116 
	mDT_WHT
 = 14

117 
	#DT_WHT
 
DT_WHT


	)

121 
	#IFTODT
(
mode
Ë(((modeË& 0170000Ë>> 12)

	)

122 
	#DTTOIF
(
dúty≥
Ë((dúty≥Ë<< 12)

	)

128 
__dú°ªam
 
	tDIR
;

135 
DIR
 *
	$›ídú
 (
__c⁄°
 *
__«me
Ë
	`__n⁄nuŒ
 ((1));

137 #ifde‡
__USE_GNU


142 
DIR
 *
	`fd›ídú
 (
__fd
);

150 
	$˛o£dú
 (
DIR
 *
__dúp
Ë
	`__n⁄nuŒ
 ((1));

162 #i‚de‡
__USE_FILE_OFFSET64


163 
dúít
 *
	$ªaddú
 (
DIR
 *
__dúp
Ë
	`__n⁄nuŒ
 ((1));

165 #ifde‡
__REDIRECT


166 
dúít
 *
	`__REDIRECT
 (
ªaddú
, (
DIR
 *
__dúp
), 
ªaddú64
)

167 
	`__n⁄nuŒ
 ((1));

169 
	#ªaddú
 
ªaddú64


	)

173 #ifde‡
__USE_LARGEFILE64


174 
dúít64
 *
	$ªaddú64
 (
DIR
 *
__dúp
Ë
	`__n⁄nuŒ
 ((1));

177 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


183 #i‚de‡
__USE_FILE_OFFSET64


184 
	$ªaddú_r
 (
DIR
 *
__ª°ri˘
 
__dúp
,

185 
dúít
 *
__ª°ri˘
 
__íåy
,

186 
dúít
 **
__ª°ri˘
 
__ªsu…
)

187 
	`__n⁄nuŒ
 ((1, 2, 3));

189 #ifde‡
__REDIRECT


190 
	`__REDIRECT
 (
ªaddú_r
,

191 (
DIR
 *
__ª°ri˘
 
__dúp
,

192 
dúít
 *
__ª°ri˘
 
__íåy
,

193 
dúít
 **
__ª°ri˘
 
__ªsu…
),

194 
ªaddú64_r
Ë
	`__n⁄nuŒ
 ((1, 2, 3));

196 
	#ªaddú_r
 
ªaddú64_r


	)

200 #ifde‡
__USE_LARGEFILE64


201 
	$ªaddú64_r
 (
DIR
 *
__ª°ri˘
 
__dúp
,

202 
dúít64
 *
__ª°ri˘
 
__íåy
,

203 
dúít64
 **
__ª°ri˘
 
__ªsu…
)

204 
	`__n⁄nuŒ
 ((1, 2, 3));

209 
	$ªwöddú
 (
DIR
 *
__dúp
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

211 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


212 
	~<bôs/ty≥s.h
>

215 
	$£ekdú
 (
DIR
 *
__dúp
, 
__pos
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

218 
	$ãŒdú
 (
DIR
 *
__dúp
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

221 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_MISC


224 
	$dúfd
 (
DIR
 *
__dúp
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

226 #i‡
deföed
 
__OPTIMIZE__
 && deföed 
_DIR_dúfd


227 
	#dúfd
(
dúp
Ë
	`_DIR_dúfd
 (dúp)

	)

230 #i‚de‡
MAXNAMLEN


232 
	~<bôs/posix1_lim.h
>

235 #ifde‡
NAME_MAX


236 
	#MAXNAMLEN
 
NAME_MAX


	)

238 
	#MAXNAMLEN
 255

	)

242 
	#__√ed_size_t


	)

243 
	~<°ddef.h
>

249 #i‚de‡
__USE_FILE_OFFSET64


250 
	`sˇndú
 (
__c⁄°
 *
__ª°ri˘
 
__dú
,

251 
dúít
 ***
__ª°ri˘
 
__«mñi°
,

252 (*
__£À˘‹
Ë(
__c⁄°
 
dúít
 *),

253 (*
__cmp
Ë(
__c⁄°
 *, __const *))

254 
	`__n⁄nuŒ
 ((1, 2));

256 #ifde‡
__REDIRECT


257 
	`__REDIRECT
 (
sˇndú
,

258 (
__c⁄°
 *
__ª°ri˘
 
__dú
,

259 
dúít
 ***
__ª°ri˘
 
__«mñi°
,

260 (*
__£À˘‹
Ë(
__c⁄°
 
dúít
 *),

261 (*
__cmp
Ë(
__c⁄°
 *, __const *)),

262 
sˇndú64
Ë
	`__n⁄nuŒ
 ((1, 2));

264 
	#sˇndú
 
sˇndú64


	)

268 #i‡
deföed
 
__USE_GNU
 && deföed 
__USE_LARGEFILE64


271 
	`sˇndú64
 (
__c⁄°
 *
__ª°ri˘
 
__dú
,

272 
dúít64
 ***
__ª°ri˘
 
__«mñi°
,

273 (*
__£À˘‹
Ë(
__c⁄°
 
dúít64
 *),

274 (*
__cmp
Ë(
__c⁄°
 *, __const *))

275 
	`__n⁄nuŒ
 ((1, 2));

279 #i‚de‡
__USE_FILE_OFFSET64


280 
	$Æphas‹t
 (
__c⁄°
 *
__e1
, __c⁄° *
__e2
)

281 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

283 #ifde‡
__REDIRECT


284 
	`__REDIRECT_NTH
 (
Æphas‹t
,

285 (
__c⁄°
 *
__e1
, __c⁄° *
__e2
),

286 
Æphas‹t64
Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

288 
	#Æphas‹t
 
Æphas‹t64


	)

292 #i‡
deföed
 
__USE_GNU
 && deföed 
__USE_LARGEFILE64


293 
	$Æphas‹t64
 (
__c⁄°
 *
__e1
, __c⁄° *
__e2
)

294 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

297 #ifde‡
__USE_GNU


299 #i‚de‡
__USE_FILE_OFFSET64


300 
	$vîsi⁄s‹t
 (
__c⁄°
 *
__e1
, __c⁄° *
__e2
)

301 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

303 #ifde‡
__REDIRECT


304 
	`__REDIRECT_NTH
 (
vîsi⁄s‹t
,

305 (
__c⁄°
 *
__e1
, __c⁄° *
__e2
),

306 
vîsi⁄s‹t64
)

307 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

309 
	#vîsi⁄s‹t
 
vîsi⁄s‹t64


	)

313 #ifde‡
__USE_LARGEFILE64


314 
	$vîsi⁄s‹t64
 (
__c⁄°
 *
__e1
, __c⁄° *
__e2
)

315 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

323 #i‚de‡
__USE_FILE_OFFSET64


324 
__ssize_t
 
	$gëdúíåõs
 (
__fd
, *
__ª°ri˘
 
__buf
,

325 
size_t
 
__nbyãs
,

326 
__off_t
 *
__ª°ri˘
 
__ba£p
)

327 
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

329 #ifde‡
__REDIRECT


330 
__ssize_t
 
	`__REDIRECT_NTH
 (
gëdúíåõs
,

331 (
__fd
, *
__ª°ri˘
 
__buf
,

332 
size_t
 
__nbyãs
,

333 
__off64_t
 *
__ª°ri˘
 
__ba£p
),

334 
gëdúíåõs64
Ë
	`__n⁄nuŒ
 ((2, 4));

336 
	#gëdúíåõs
 
gëdúíåõs64


	)

340 #ifde‡
__USE_LARGEFILE64


341 
__ssize_t
 
	$gëdúíåõs64
 (
__fd
, *
__ª°ri˘
 
__buf
,

342 
size_t
 
__nbyãs
,

343 
__off64_t
 *
__ª°ri˘
 
__ba£p
)

344 
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

349 
__END_DECLS


	@/usr/include/endian.h

19 #i‚def 
_ENDIAN_H


20 
	#_ENDIAN_H
 1

	)

22 
	~<„©uªs.h
>

32 
	#__LITTLE_ENDIAN
 1234

	)

33 
	#__BIG_ENDIAN
 4321

	)

34 
	#__PDP_ENDIAN
 3412

	)

37 
	~<bôs/ídün.h
>

41 #i‚de‡
__FLOAT_WORD_ORDER


42 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

45 #ifdef 
__USE_BSD


46 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

47 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

48 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

49 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

52 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


53 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËLO, 
	)
HI

54 #ñi‡
__BYTE_ORDER
 =
__BIG_ENDIAN


55 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËHI, 
	)
LO

	@/usr/include/errno.h

23 #i‚def 
_ERRNO_H


27 #i‚def 
__√ed_Em©h


28 
	#_ERRNO_H
 1

	)

29 
	~<„©uªs.h
>

32 
	g__BEGIN_DECLS


36 
	~<bôs/î∫o.h
>

37 #unde‡
__√ed_Em©h


39 #ifdef 
_ERRNO_H


46 #i‚def 
î∫o


47 
î∫o
;

50 #ifde‡
__USE_GNU


55 *
¥ogøm_övoˇti⁄_«me
, *
¥ogøm_övoˇti⁄_sh‹t_«me
;

59 
	g__END_DECLS


67 #i‡
deföed
 
__USE_GNU
 || deföed 
__√ed_îr‹_t


68 #i‚de‡
__îr‹_t_deföed


69 
	tîr‹_t
;

70 
	#__îr‹_t_deföed
 1

	)

72 #unde‡
__√ed_îr‹_t


	@/usr/include/fcntl.h

24 #i‚def 
_FCNTL_H


25 
	#_FCNTL_H
 1

	)

27 
	~<„©uªs.h
>

30 
	g__BEGIN_DECLS


34 
	~<bôs/f˙é.h
>

37 #ifde‡
__USE_XOPEN


38 
	~<sys/°©.h
>

41 #ifdef 
__USE_MISC


42 #i‚de‡
R_OK


45 
	#R_OK
 4

	)

46 
	#W_OK
 2

	)

47 
	#X_OK
 1

	)

48 
	#F_OK
 0

	)

53 #ifde‡
__USE_XOPEN


54 
	#SEEK_SET
 0

	)

55 
	#SEEK_CUR
 1

	)

56 
	#SEEK_END
 2

	)

59 #ifde‡
__USE_ATFILE


60 
	#AT_FDCWD
 -100

	)

63 
	#AT_SYMLINK_NOFOLLOW
 0x100

	)

64 
	#AT_REMOVEDIR
 0x200

	)

66 
	#AT_SYMLINK_FOLLOW
 0x400

	)

67 
	#AT_EACCESS
 0x200

	)

76 
f˙é
 (
__fd
, 
__cmd
, ...);

84 #i‚de‡
__USE_FILE_OFFSET64


85 
	$›í
 (
__c⁄°
 *
__fûe
, 
__oÊag
, ...Ë
	`__n⁄nuŒ
 ((1));

87 #ifde‡
__REDIRECT


88 
	`__REDIRECT
 (
›í
, (
__c⁄°
 *
__fûe
, 
__oÊag
, ...), 
›í64
)

89 
	`__n⁄nuŒ
 ((1));

91 
	#›í
 
›í64


	)

94 #ifde‡
__USE_LARGEFILE64


95 
	$›í64
 (
__c⁄°
 *
__fûe
, 
__oÊag
, ...Ë
	`__n⁄nuŒ
 ((1));

98 #ifde‡
__USE_ATFILE


108 #i‚de‡
__USE_FILE_OFFSET64


109 
	$›í©
 (
__fd
, 
__c⁄°
 *
__fûe
, 
__oÊag
, ...)

110 
	`__n⁄nuŒ
 ((2));

112 #ifde‡
__REDIRECT


113 
	`__REDIRECT
 (
›í©
, (
__fd
, 
__c⁄°
 *
__fûe
, 
__oÊag
,

114 ...), 
›í©64
Ë
	`__n⁄nuŒ
 ((2));

116 
	#›í©
 
›í©64


	)

120 
	$›í©64
 (
__fd
, 
__c⁄°
 *
__fûe
, 
__oÊag
, ...)

121 
	`__n⁄nuŒ
 ((2));

129 #i‚de‡
__USE_FILE_OFFSET64


130 
	$¸ót
 (
__c⁄°
 *
__fûe
, 
__mode_t
 
__mode
Ë
	`__n⁄nuŒ
 ((1));

132 #ifde‡
__REDIRECT


133 
	`__REDIRECT
 (
¸ót
, (
__c⁄°
 *
__fûe
, 
__mode_t
 
__mode
),

134 
¸ót64
Ë
	`__n⁄nuŒ
 ((1));

136 
	#¸ót
 
¸ót64


	)

139 #ifde‡
__USE_LARGEFILE64


140 
	$¸ót64
 (
__c⁄°
 *
__fûe
, 
__mode_t
 
__mode
Ë
	`__n⁄nuŒ
 ((1));

143 #i‡!
deföed
 
F_LOCK
 && (deföed 
__USE_MISC
 || (deföed 
__USE_XOPEN_EXTENDED
 \

144 && !
deföed
 
__USE_POSIX
))

153 
	#F_ULOCK
 0

	)

154 
	#F_LOCK
 1

	)

155 
	#F_TLOCK
 2

	)

156 
	#F_TEST
 3

	)

158 #i‚de‡
__USE_FILE_OFFSET64


159 
	`lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Àn
);

161 #ifde‡
__REDIRECT


162 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
), 
lockf64
);

164 
	#lockf
 
lockf64


	)

167 #ifde‡
__USE_LARGEFILE64


168 
	`lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
);

172 #ifde‡
__USE_XOPEN2K


175 #i‚de‡
__USE_FILE_OFFSET64


176 
	$posix_Ádvi£
 (
__fd
, 
__off_t
 
__off£t
, __off_à
__Àn
,

177 
__advi£
Ë
__THROW
;

179 #ifde‡
__REDIRECT_NTH


180 
	`__REDIRECT_NTH
 (
posix_Ádvi£
, (
__fd
, 
__off64_t
 
__off£t
,

181 
__off64_t
 
__Àn
, 
__advi£
),

182 
posix_Ádvi£64
);

184 
	#posix_Ádvi£
 
posix_Ádvi£64


	)

187 #ifde‡
__USE_LARGEFILE64


188 
	$posix_Ádvi£64
 (
__fd
, 
__off64_t
 
__off£t
, __off64_à
__Àn
,

189 
__advi£
Ë
__THROW
;

197 #i‚de‡
__USE_FILE_OFFSET64


198 
	`posix_ÁŒoˇã
 (
__fd
, 
__off_t
 
__off£t
, __off_à
__Àn
);

200 #ifde‡
__REDIRECT


201 
	`__REDIRECT
 (
posix_ÁŒoˇã
, (
__fd
, 
__off64_t
 
__off£t
,

202 
__off64_t
 
__Àn
),

203 
posix_ÁŒoˇã64
);

205 
	#posix_ÁŒoˇã
 
posix_ÁŒoˇã64


	)

208 #ifde‡
__USE_LARGEFILE64


209 
	`posix_ÁŒoˇã64
 (
__fd
, 
__off64_t
 
__off£t
, __off64_à
__Àn
);

213 
__END_DECLS


	@/usr/include/ft2build.h

52 #i‚de‡
__FT2_BUILD_UNIX_H__


53 
	#__FT2_BUILD_UNIX_H__


	)

56 
	~<‰ìty≥/c⁄fig/·hódî.h
>

	@/usr/include/getopt.h

21 #i‚de‡
_GETOPT_H


23 #i‚de‡
__√ed_gë›t


24 
	#_GETOPT_H
 1

	)

34 #i‡!
deföed
 
__GNU_LIBRARY__


35 
	~<˘y≥.h
>

38 #i‚de‡
__THROW


39 #i‚de‡
__GNUC_PREREQ


40 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë(0)

	)

42 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,8)

43 
	#__THROW
 
	`throw
 ()

	)

45 
	#__THROW


	)

49 #ifdef 
__˝lu•lus


59 *
›èrg
;

73 
›töd
;

78 
›ãº
;

82 
›t›t
;

84 #i‚de‡
__√ed_gë›t


106 
	s›ti⁄


108 c⁄° *
	g«me
;

111 
	ghas_¨g
;

112 *
	gÊag
;

113 
	gvÆ
;

118 
	#no_¨gumít
 0

	)

119 
	#ªquúed_¨gumít
 1

	)

120 
	#›ti⁄Æ_¨gumít
 2

	)

148 #ifde‡
__GNU_LIBRARY__


152 
gë›t
 (
___¨gc
, *c⁄° *
___¨gv
, c⁄° *
__sh‹t›ts
)

153 
__THROW
;

155 
gë›t
 ();

158 #i‚de‡
__√ed_gë›t


159 
gë›t_l⁄g
 (
___¨gc
, *c⁄° *
___¨gv
,

160 c⁄° *
__sh‹t›ts
,

161 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

162 
__THROW
;

163 
gë›t_l⁄g_⁄ly
 (
___¨gc
, *c⁄° *
___¨gv
,

164 c⁄° *
__sh‹t›ts
,

165 c⁄° 
›ti⁄
 *
__l⁄g›ts
, *
__l⁄göd
)

166 
__THROW
;

170 #ifdef 
__˝lu•lus


175 #unde‡
__√ed_gë›t


	@/usr/include/jpeglib.h

13 #i‚de‡
JPEGLIB_H


14 
	#JPEGLIB_H


	)

16 #ifde‡
__˝lu•lus


27 #i‚de‡
JCONFIG_INCLUDED


28 
	~"jc⁄fig.h
"

30 
	~"jm‹ecfg.h
"

37 
	#JPEG_LIB_VERSION
 62

	)

45 
	#DCTSIZE
 8

	)

46 
	#DCTSIZE2
 64

	)

47 
	#NUM_QUANT_TBLS
 4

	)

48 
	#NUM_HUFF_TBLS
 4

	)

49 
	#NUM_ARITH_TBLS
 16

	)

50 
	#MAX_COMPS_IN_SCAN
 4

	)

51 
	#MAX_SAMP_FACTOR
 4

	)

59 
	#C_MAX_BLOCKS_IN_MCU
 10

	)

60 #i‚de‡
D_MAX_BLOCKS_IN_MCU


61 
	#D_MAX_BLOCKS_IN_MCU
 10

	)

70 
JSAMPLE
 
	tFAR
 *
	tJSAMPROW
;

71 
JSAMPROW
 *
	tJSAMPARRAY
;

72 
JSAMPARRAY
 *
	tJSAMPIMAGE
;

74 
JCOEF
 
	tJBLOCK
[
DCTSIZE2
];

75 
JBLOCK
 
	tFAR
 *
	tJBLOCKROW
;

76 
JBLOCKROW
 *
	tJBLOCKARRAY
;

77 
JBLOCKARRAY
 *
	tJBLOCKIMAGE
;

79 
JCOEF
 
	tFAR
 *
	tJCOEFPTR
;

92 
UINT16
 
qu™tvÆ
[
DCTSIZE2
];

98 
boﬁón
 
£¡_èbÀ
;

99 } 
	tJQUANT_TBL
;

106 
UINT8
 
bôs
[17];

108 
UINT8
 
huffvÆ
[256];

114 
boﬁón
 
£¡_èbÀ
;

115 } 
	tJHUFF_TBL
;

124 
comp⁄ít_id
;

125 
comp⁄ít_ödex
;

126 
h_ßmp_Á˘‹
;

127 
v_ßmp_Á˘‹
;

128 
qu™t_tbl_no
;

133 
dc_tbl_no
;

134 
ac_tbl_no
;

143 
JDIMENSION
 
width_ö_blocks
;

144 
JDIMENSION
 
height_ö_blocks
;

151 
DCT_sˇÀd_size
;

158 
JDIMENSION
 
downßm∂ed_width
;

159 
JDIMENSION
 
downßm∂ed_height
;

164 
boﬁón
 
comp⁄ít_√eded
;

168 
MCU_width
;

169 
MCU_height
;

170 
MCU_blocks
;

171 
MCU_ßm∂e_width
;

172 
œ°_cﬁ_width
;

173 
œ°_row_height
;

179 
JQUANT_TBL
 * 
qu™t_èbÀ
;

182 * 
d˘_èbÀ
;

183 } 
	tj≥g_comp⁄ít_öfo
;

189 
comps_ö_sˇn
;

190 
comp⁄ít_ödex
[
MAX_COMPS_IN_SCAN
];

191 
Ss
, 
Se
;

192 
Ah
, 
Al
;

193 } 
	tj≥g_sˇn_öfo
;

197 
j≥g_m¨kî_°ru˘
 
	tFAR
 * 
	tj≥g_ßved_m¨kî_±r
;

199 
	sj≥g_m¨kî_°ru˘
 {

200 
j≥g_ßved_m¨kî_±r
 
√xt
;

201 
UINT8
 
m¨kî
;

202 
‹igöÆ_Àngth
;

203 
d©a_Àngth
;

204 
JOCTET
 
FAR
 * 
d©a
;

211 
JCS_UNKNOWN
,

212 
JCS_GRAYSCALE
,

213 
JCS_RGB
,

214 
JCS_YCbCr
,

215 
JCS_CMYK
,

216 
JCS_YCCK


217 } 
	tJ_COLOR_SPACE
;

222 
JDCT_ISLOW
,

223 
JDCT_IFAST
,

224 
JDCT_FLOAT


225 } 
	tJ_DCT_METHOD
;

227 #i‚de‡
JDCT_DEFAULT


228 
	#JDCT_DEFAULT
 
JDCT_ISLOW


	)

230 #i‚de‡
JDCT_FASTEST


231 
	#JDCT_FASTEST
 
JDCT_IFAST


	)

237 
JDITHER_NONE
,

238 
JDITHER_ORDERED
,

239 
JDITHER_FS


240 } 
	tJ_DITHER_MODE
;

245 
	#j≥g_comm⁄_fõlds
 \

246 
j≥g_îr‹_mgr
 * 
îr
; \

247 
j≥g_mem‹y_mgr
 * 
mem
; \

248 
j≥g_¥ogªss_mgr
 * 
¥ogªss
; \

249 * 
˛õ¡_d©a
; \

250 
boﬁón
 
is_decom¥ess‹
; \

251 
globÆ_°©e


	)

257 
	sj≥g_comm⁄_°ru˘
 {

258 
j≥g_comm⁄_fõlds
;

265 
j≥g_comm⁄_°ru˘
 * 
	tj_comm⁄_±r
;

266 
j≥g_com¥ess_°ru˘
 * 
	tj_com¥ess_±r
;

267 
j≥g_decom¥ess_°ru˘
 * 
	tj_decom¥ess_±r
;

272 
	sj≥g_com¥ess_°ru˘
 {

273 
j≥g_comm⁄_fõlds
;

276 
j≥g_de°ö©i⁄_mgr
 * 
de°
;

283 
JDIMENSION
 
image_width
;

284 
JDIMENSION
 
image_height
;

285 
öput_comp⁄íts
;

286 
J_COLOR_SPACE
 
ö_cﬁ‹_•a˚
;

288 
öput_gamma
;

298 
d©a_¥ecisi⁄
;

300 
num_comp⁄íts
;

301 
J_COLOR_SPACE
 
j≥g_cﬁ‹_•a˚
;

303 
j≥g_comp⁄ít_öfo
 * 
comp_öfo
;

306 
JQUANT_TBL
 * 
qu™t_tbl_±rs
[
NUM_QUANT_TBLS
];

309 
JHUFF_TBL
 * 
dc_huff_tbl_±rs
[
NUM_HUFF_TBLS
];

310 
JHUFF_TBL
 * 
ac_huff_tbl_±rs
[
NUM_HUFF_TBLS
];

313 
UINT8
 
¨ôh_dc_L
[
NUM_ARITH_TBLS
];

314 
UINT8
 
¨ôh_dc_U
[
NUM_ARITH_TBLS
];

315 
UINT8
 
¨ôh_ac_K
[
NUM_ARITH_TBLS
];

317 
num_sˇns
;

318 c⁄° 
j≥g_sˇn_öfo
 * 
sˇn_öfo
;

324 
boﬁón
 
øw_d©a_ö
;

325 
boﬁón
 
¨ôh_code
;

326 
boﬁón
 
›timize_codög
;

327 
boﬁón
 
CCIR601_ßm∂ög
;

328 
smoŸhög_Á˘‹
;

329 
J_DCT_METHOD
 
d˘_mëhod
;

336 
ª°¨t_öãrvÆ
;

337 
ª°¨t_ö_rows
;

341 
boﬁón
 
wrôe_JFIF_hódî
;

342 
UINT8
 
JFIF_maj‹_vîsi⁄
;

343 
UINT8
 
JFIF_mö‹_vîsi⁄
;

348 
UINT8
 
dísôy_unô
;

349 
UINT16
 
X_dísôy
;

350 
UINT16
 
Y_dísôy
;

351 
boﬁón
 
wrôe_Adobe_m¨kî
;

358 
JDIMENSION
 
√xt_sˇ∆öe
;

367 
boﬁón
 
¥ogªssive_mode
;

368 
max_h_ßmp_Á˘‹
;

369 
max_v_ßmp_Á˘‹
;

371 
JDIMENSION
 
tŸÆ_iMCU_rows
;

382 
comps_ö_sˇn
;

383 
j≥g_comp⁄ít_öfo
 * 
cur_comp_öfo
[
MAX_COMPS_IN_SCAN
];

386 
JDIMENSION
 
MCUs_≥r_row
;

387 
JDIMENSION
 
MCU_rows_ö_sˇn
;

389 
blocks_ö_MCU
;

390 
MCU_membîshù
[
C_MAX_BLOCKS_IN_MCU
];

394 
Ss
, 
Se
, 
Ah
, 
Al
;

399 
j≥g_comp_ma°î
 * 
ma°î
;

400 
j≥g_c_maö_c⁄åﬁÀr
 * 
maö
;

401 
j≥g_c_¥ï_c⁄åﬁÀr
 * 
¥ï
;

402 
j≥g_c_c€f_c⁄åﬁÀr
 * 
c€f
;

403 
j≥g_m¨kî_wrôî
 * 
m¨kî
;

404 
j≥g_cﬁ‹_c⁄vîãr
 * 
cc⁄vît
;

405 
j≥g_downßm∂î
 * 
downßm∂e
;

406 
j≥g_f‹w¨d_d˘
 * 
fd˘
;

407 
j≥g_íå›y_ícodî
 * 
íå›y
;

408 
j≥g_sˇn_öfo
 * 
s¸ùt_•a˚
;

409 
s¸ùt_•a˚_size
;

415 
	sj≥g_decom¥ess_°ru˘
 {

416 
j≥g_comm⁄_fõlds
;

419 
j≥g_sour˚_mgr
 * 
§c
;

424 
JDIMENSION
 
image_width
;

425 
JDIMENSION
 
image_height
;

426 
num_comp⁄íts
;

427 
J_COLOR_SPACE
 
j≥g_cﬁ‹_•a˚
;

434 
J_COLOR_SPACE
 
out_cﬁ‹_•a˚
;

436 
sˇÀ_num
, 
sˇÀ_díom
;

438 
ouçut_gamma
;

440 
boﬁón
 
buf„ªd_image
;

441 
boﬁón
 
øw_d©a_out
;

443 
J_DCT_METHOD
 
d˘_mëhod
;

444 
boﬁón
 
do_Áncy_upßm∂ög
;

445 
boﬁón
 
do_block_smoŸhög
;

447 
boﬁón
 
qu™tize_cﬁ‹s
;

449 
J_DITHER_MODE
 
dôhî_mode
;

450 
boﬁón
 
two_∑ss_qu™tize
;

451 
desúed_numbî_of_cﬁ‹s
;

453 
boﬁón
 
íabÀ_1∑ss_qu™t
;

454 
boﬁón
 
íabÀ_exã∫Æ_qu™t
;

455 
boﬁón
 
íabÀ_2∑ss_qu™t
;

463 
JDIMENSION
 
ouçut_width
;

464 
JDIMENSION
 
ouçut_height
;

465 
out_cﬁ‹_comp⁄íts
;

466 
ouçut_comp⁄íts
;

470 
ªc_outbuf_height
;

482 
a˘uÆ_numbî_of_cﬁ‹s
;

483 
JSAMPARRAY
 
cﬁ‹m≠
;

493 
JDIMENSION
 
ouçut_sˇ∆öe
;

498 
öput_sˇn_numbî
;

499 
JDIMENSION
 
öput_iMCU_row
;

505 
ouçut_sˇn_numbî
;

506 
JDIMENSION
 
ouçut_iMCU_row
;

515 (*
c€f_bôs
)[
DCTSIZE2
];

526 
JQUANT_TBL
 * 
qu™t_tbl_±rs
[
NUM_QUANT_TBLS
];

529 
JHUFF_TBL
 * 
dc_huff_tbl_±rs
[
NUM_HUFF_TBLS
];

530 
JHUFF_TBL
 * 
ac_huff_tbl_±rs
[
NUM_HUFF_TBLS
];

537 
d©a_¥ecisi⁄
;

539 
j≥g_comp⁄ít_öfo
 * 
comp_öfo
;

542 
boﬁón
 
¥ogªssive_mode
;

543 
boﬁón
 
¨ôh_code
;

545 
UINT8
 
¨ôh_dc_L
[
NUM_ARITH_TBLS
];

546 
UINT8
 
¨ôh_dc_U
[
NUM_ARITH_TBLS
];

547 
UINT8
 
¨ôh_ac_K
[
NUM_ARITH_TBLS
];

549 
ª°¨t_öãrvÆ
;

554 
boﬁón
 
ßw_JFIF_m¨kî
;

556 
UINT8
 
JFIF_maj‹_vîsi⁄
;

557 
UINT8
 
JFIF_mö‹_vîsi⁄
;

558 
UINT8
 
dísôy_unô
;

559 
UINT16
 
X_dísôy
;

560 
UINT16
 
Y_dísôy
;

561 
boﬁón
 
ßw_Adobe_m¨kî
;

562 
UINT8
 
Adobe_å™sf‹m
;

564 
boﬁón
 
CCIR601_ßm∂ög
;

570 
j≥g_ßved_m¨kî_±r
 
m¨kî_li°
;

579 
max_h_ßmp_Á˘‹
;

580 
max_v_ßmp_Á˘‹
;

582 
mö_DCT_sˇÀd_size
;

584 
JDIMENSION
 
tŸÆ_iMCU_rows
;

593 
JSAMPLE
 * 
ßm∂e_ønge_limô
;

600 
comps_ö_sˇn
;

601 
j≥g_comp⁄ít_öfo
 * 
cur_comp_öfo
[
MAX_COMPS_IN_SCAN
];

604 
JDIMENSION
 
MCUs_≥r_row
;

605 
JDIMENSION
 
MCU_rows_ö_sˇn
;

607 
blocks_ö_MCU
;

608 
MCU_membîshù
[
D_MAX_BLOCKS_IN_MCU
];

612 
Ss
, 
Se
, 
Ah
, 
Al
;

618 
uƒód_m¨kî
;

623 
j≥g_decomp_ma°î
 * 
ma°î
;

624 
j≥g_d_maö_c⁄åﬁÀr
 * 
maö
;

625 
j≥g_d_c€f_c⁄åﬁÀr
 * 
c€f
;

626 
j≥g_d_po°_c⁄åﬁÀr
 * 
po°
;

627 
j≥g_öput_c⁄åﬁÀr
 * 
öput˘l
;

628 
j≥g_m¨kî_ªadî
 * 
m¨kî
;

629 
j≥g_íå›y_decodî
 * 
íå›y
;

630 
j≥g_övî£_d˘
 * 
id˘
;

631 
j≥g_upßm∂î
 * 
upßm∂e
;

632 
j≥g_cﬁ‹_dec⁄vîãr
 * 
cc⁄vît
;

633 
j≥g_cﬁ‹_qu™tizî
 * 
cqu™tize
;

647 
	sj≥g_îr‹_mgr
 {

649 
JMETHOD
(, 
îr‹_exô
, (
j_comm⁄_±r
 
cöfo
));

651 
JMETHOD
(, 
emô_mesßge
, (
j_comm⁄_±r
 
cöfo
, 
msg_Àvñ
));

653 
JMETHOD
(, 
ouçut_mesßge
, (
j_comm⁄_±r
 
cöfo
));

655 
JMETHOD
(, 
f‹m©_mesßge
, (
j_comm⁄_±r
 
cöfo
, * 
buf„r
));

656 
	#JMSG_LENGTH_MAX
 200

	)

658 
JMETHOD
(, 
ª£t_îr‹_mgr
, (
j_comm⁄_±r
 
cöfo
));

663 
msg_code
;

664 
	#JMSG_STR_PARM_MAX
 80

	)

666 
i
[8];

667 
s
[
JMSG_STR_PARM_MAX
];

668 } 
msg_∑rm
;

672 
åa˚_Àvñ
;

680 
num_w¨nögs
;

692 c⁄° * c⁄° * 
j≥g_mesßge_èbÀ
;

693 
œ°_j≥g_mesßge
;

697 c⁄° * c⁄° * 
add⁄_mesßge_èbÀ
;

698 
fú°_add⁄_mesßge
;

699 
œ°_add⁄_mesßge
;

705 
	sj≥g_¥ogªss_mgr
 {

706 
JMETHOD
(, 
¥ogªss_m⁄ô‹
, (
j_comm⁄_±r
 
cöfo
));

708 
∑ss_cou¡î
;

709 
∑ss_limô
;

710 
com∂ëed_∑s£s
;

711 
tŸÆ_∑s£s
;

717 
	sj≥g_de°ö©i⁄_mgr
 {

718 
JOCTET
 * 
√xt_ouçut_byã
;

719 
size_t
 
‰ì_ö_buf„r
;

721 
JMETHOD
(, 
öô_de°ö©i⁄
, (
j_com¥ess_±r
 
cöfo
));

722 
JMETHOD
(
boﬁón
, 
em±y_ouçut_buf„r
, (
j_com¥ess_±r
 
cöfo
));

723 
JMETHOD
(, 
ãrm_de°ö©i⁄
, (
j_com¥ess_±r
 
cöfo
));

729 
	sj≥g_sour˚_mgr
 {

730 c⁄° 
JOCTET
 * 
√xt_öput_byã
;

731 
size_t
 
byãs_ö_buf„r
;

733 
JMETHOD
(, 
öô_sour˚
, (
j_decom¥ess_±r
 
cöfo
));

734 
JMETHOD
(
boﬁón
, 
fûl_öput_buf„r
, (
j_decom¥ess_±r
 
cöfo
));

735 
JMETHOD
(, 
skù_öput_d©a
, (
j_decom¥ess_±r
 
cöfo
, 
num_byãs
));

736 
JMETHOD
(
boﬁón
, 
ªsync_to_ª°¨t
, (
j_decom¥ess_±r
 
cöfo
, 
desúed
));

737 
JMETHOD
(, 
ãrm_sour˚
, (
j_decom¥ess_±r
 
cöfo
));

752 
	#JPOOL_PERMANENT
 0

	)

753 
	#JPOOL_IMAGE
 1

	)

754 
	#JPOOL_NUMPOOLS
 2

	)

756 
jvút_ßºay_c⁄åﬁ
 * 
	tjvút_ßºay_±r
;

757 
jvút_b¨øy_c⁄åﬁ
 * 
	tjvút_b¨øy_±r
;

760 
	sj≥g_mem‹y_mgr
 {

762 
JMETHOD
(*, 
Æloc_smÆl
, (
j_comm⁄_±r
 
cöfo
, 
poﬁ_id
,

763 
size_t
 
sizeofobje˘
));

764 
JMETHOD
(
FAR
 *, 
Æloc_œrge
, (
j_comm⁄_±r
 
cöfo
, 
poﬁ_id
,

765 
size_t
 
sizeofobje˘
));

766 
JMETHOD
(
JSAMPARRAY
, 
Æloc_ßºay
, (
j_comm⁄_±r
 
cöfo
, 
poﬁ_id
,

767 
JDIMENSION
 
ßm∂e•îrow
,

768 
JDIMENSION
 
numrows
));

769 
JMETHOD
(
JBLOCKARRAY
, 
Æloc_b¨øy
, (
j_comm⁄_±r
 
cöfo
, 
poﬁ_id
,

770 
JDIMENSION
 
block•îrow
,

771 
JDIMENSION
 
numrows
));

772 
JMETHOD
(
jvút_ßºay_±r
, 
ªque°_vút_ßºay
, (
j_comm⁄_±r
 
cöfo
,

773 
poﬁ_id
,

774 
boﬁón
 
¥e_zîo
,

775 
JDIMENSION
 
ßm∂e•îrow
,

776 
JDIMENSION
 
numrows
,

777 
JDIMENSION
 
maxac˚ss
));

778 
JMETHOD
(
jvút_b¨øy_±r
, 
ªque°_vút_b¨øy
, (
j_comm⁄_±r
 
cöfo
,

779 
poﬁ_id
,

780 
boﬁón
 
¥e_zîo
,

781 
JDIMENSION
 
block•îrow
,

782 
JDIMENSION
 
numrows
,

783 
JDIMENSION
 
maxac˚ss
));

784 
JMETHOD
(, 
ªÆize_vút_¨øys
, (
j_comm⁄_±r
 
cöfo
));

785 
JMETHOD
(
JSAMPARRAY
, 
ac˚ss_vút_ßºay
, (
j_comm⁄_±r
 
cöfo
,

786 
jvút_ßºay_±r
 
±r
,

787 
JDIMENSION
 
°¨t_row
,

788 
JDIMENSION
 
num_rows
,

789 
boﬁón
 
wrôabÀ
));

790 
JMETHOD
(
JBLOCKARRAY
, 
ac˚ss_vút_b¨øy
, (
j_comm⁄_±r
 
cöfo
,

791 
jvút_b¨øy_±r
 
±r
,

792 
JDIMENSION
 
°¨t_row
,

793 
JDIMENSION
 
num_rows
,

794 
boﬁón
 
wrôabÀ
));

795 
JMETHOD
(, 
‰ì_poﬁ
, (
j_comm⁄_±r
 
cöfo
, 
poﬁ_id
));

796 
JMETHOD
(, 
£lf_de°ru˘
, (
j_comm⁄_±r
 
cöfo
));

803 
max_mem‹y_to_u£
;

806 
max_Æloc_chunk
;

813 
JMETHOD
(
	tboﬁón
, 
	tj≥g_m¨kî_∑r£r_mëhod
, (
	tj_decom¥ess_±r
 
	tcöfo
));

821 #ifde‡
HAVE_PROTOTYPES


822 
	#JPP
(
¨gli°
Ë
	)
¨gli°

824 
	#JPP
(
¨gli°
Ë()

	)

835 #ifde‡
NEED_SHORT_EXTERNAL_NAMES


836 
	#j≥g_°d_îr‹
 
jStdEº‹


	)

837 
	#j≥g_Cª©eCom¥ess
 
jCªaCom¥ess


	)

838 
	#j≥g_Cª©eDecom¥ess
 
jCªaDecom¥ess


	)

839 
	#j≥g_de°roy_com¥ess
 
jDe°Com¥ess


	)

840 
	#j≥g_de°roy_decom¥ess
 
jDe°Decom¥ess


	)

841 
	#j≥g_°dio_de°
 
jStdDe°


	)

842 
	#j≥g_°dio_§c
 
jStdSrc


	)

843 
	#j≥g_£t_deÁu…s
 
jSëDeÁu…s


	)

844 
	#j≥g_£t_cﬁ‹•a˚
 
jSëCﬁ‹•a˚


	)

845 
	#j≥g_deÁu…_cﬁ‹•a˚
 
jDefCﬁ‹•a˚


	)

846 
	#j≥g_£t_quÆôy
 
jSëQuÆôy


	)

847 
	#j≥g_£t_löór_quÆôy
 
jSëLQuÆôy


	)

848 
	#j≥g_add_qu™t_èbÀ
 
jAddQu™tTabÀ


	)

849 
	#j≥g_quÆôy_sˇlög
 
jQuÆôySˇlög


	)

850 
	#j≥g_sim∂e_¥ogªssi⁄
 
jSimProgªss


	)

851 
	#j≥g_suµªss_èbÀs
 
jSuµªssTabÀs


	)

852 
	#j≥g_Æloc_qu™t_èbÀ
 
jAlcQTabÀ


	)

853 
	#j≥g_Æloc_huff_èbÀ
 
jAlcHTabÀ


	)

854 
	#j≥g_°¨t_com¥ess
 
jSåtCom¥ess


	)

855 
	#j≥g_wrôe_sˇ∆öes
 
jWπSˇ∆öes


	)

856 
	#j≥g_föish_com¥ess
 
jFöCom¥ess


	)

857 
	#j≥g_wrôe_øw_d©a
 
jWπRawD©a


	)

858 
	#j≥g_wrôe_m¨kî
 
jWπM¨kî


	)

859 
	#j≥g_wrôe_m_hódî
 
jWπMHódî


	)

860 
	#j≥g_wrôe_m_byã
 
jWπMByã


	)

861 
	#j≥g_wrôe_èbÀs
 
jWπTabÀs


	)

862 
	#j≥g_ªad_hódî
 
jRódHódî


	)

863 
	#j≥g_°¨t_decom¥ess
 
jSåtDecom¥ess


	)

864 
	#j≥g_ªad_sˇ∆öes
 
jRódSˇ∆öes


	)

865 
	#j≥g_föish_decom¥ess
 
jFöDecom¥ess


	)

866 
	#j≥g_ªad_øw_d©a
 
jRódRawD©a


	)

867 
	#j≥g_has_mu…ùÀ_sˇns
 
jHasMu…S˙


	)

868 
	#j≥g_°¨t_ouçut
 
jSåtOuçut


	)

869 
	#j≥g_föish_ouçut
 
jFöOuçut


	)

870 
	#j≥g_öput_com∂ëe
 
jInCom∂ëe


	)

871 
	#j≥g_√w_cﬁ‹m≠
 
jNewCM≠


	)

872 
	#j≥g_c⁄sume_öput
 
jC⁄sumeI≈ut


	)

873 
	#j≥g_ˇlc_ouçut_dimísi⁄s
 
jCÆcDimísi⁄s


	)

874 
	#j≥g_ßve_m¨kîs
 
jSaveM¨kîs


	)

875 
	#j≥g_£t_m¨kî_¥o˚ss‹
 
jSëM¨kî


	)

876 
	#j≥g_ªad_c€fficõ¡s
 
jRódC€fs


	)

877 
	#j≥g_wrôe_c€fficõ¡s
 
jWπC€fs


	)

878 
	#j≥g_c›y_¸ôiˇl_∑ømëîs
 
jC›yCrô


	)

879 
	#j≥g_ab‹t_com¥ess
 
jAbπCom¥ess


	)

880 
	#j≥g_ab‹t_decom¥ess
 
jAbπDecom¥ess


	)

881 
	#j≥g_ab‹t
 
jAb‹t


	)

882 
	#j≥g_de°roy
 
jDe°roy


	)

883 
	#j≥g_ªsync_to_ª°¨t
 
jResyncRe°¨t


	)

888 
EXTERN
(
j≥g_îr‹_mgr
 *Ë
j≥g_°d_îr‹


889 
JPP
((
j≥g_îr‹_mgr
 * 
îr
));

898 
	#j≥g_¸óã_com¥ess
(
cöfo
) \

899 
	`j≥g_Cª©eCom¥ess
((
cöfo
), 
JPEG_LIB_VERSION
, \

900 (
size_t
Ë(
j≥g_com¥ess_°ru˘
))

	)

901 
	#j≥g_¸óã_decom¥ess
(
cöfo
) \

902 
	`j≥g_Cª©eDecom¥ess
((
cöfo
), 
JPEG_LIB_VERSION
, \

903 (
size_t
Ë(
j≥g_decom¥ess_°ru˘
))

	)

904 
EXTERN
(Ë
j≥g_Cª©eCom¥ess
 
JPP
((
j_com¥ess_±r
 
cöfo
,

905 
vîsi⁄
, 
size_t
 
°ru˘size
));

906 
EXTERN
(Ë
j≥g_Cª©eDecom¥ess
 
JPP
((
j_decom¥ess_±r
 
cöfo
,

907 
vîsi⁄
, 
size_t
 
°ru˘size
));

909 
EXTERN
(Ë
j≥g_de°roy_com¥ess
 
JPP
((
j_com¥ess_±r
 
cöfo
));

910 
EXTERN
(Ë
j≥g_de°roy_decom¥ess
 
JPP
((
j_decom¥ess_±r
 
cöfo
));

914 
EXTERN
(Ë
j≥g_°dio_de°
 
JPP
((
j_com¥ess_±r
 
cöfo
, 
FILE
 * 
outfûe
));

915 
EXTERN
(Ë
j≥g_°dio_§c
 
JPP
((
j_decom¥ess_±r
 
cöfo
, 
FILE
 * 
öfûe
));

918 
EXTERN
(Ë
j≥g_£t_deÁu…s
 
JPP
((
j_com¥ess_±r
 
cöfo
));

920 
EXTERN
(Ë
j≥g_£t_cﬁ‹•a˚
 
JPP
((
j_com¥ess_±r
 
cöfo
,

921 
J_COLOR_SPACE
 
cﬁ‹•a˚
));

922 
EXTERN
(Ë
j≥g_deÁu…_cﬁ‹•a˚
 
JPP
((
j_com¥ess_±r
 
cöfo
));

923 
EXTERN
(Ë
j≥g_£t_quÆôy
 
JPP
((
j_com¥ess_±r
 
cöfo
, 
quÆôy
,

924 
boﬁón
 
f‹˚_ba£löe
));

925 
EXTERN
(Ë
j≥g_£t_löór_quÆôy
 
JPP
((
j_com¥ess_±r
 
cöfo
,

926 
sˇÀ_Á˘‹
,

927 
boﬁón
 
f‹˚_ba£löe
));

928 
EXTERN
(Ë
j≥g_add_qu™t_èbÀ
 
JPP
((
j_com¥ess_±r
 
cöfo
, 
which_tbl
,

929 c⁄° *
basic_èbÀ
,

930 
sˇÀ_Á˘‹
,

931 
boﬁón
 
f‹˚_ba£löe
));

932 
EXTERN
(Ë
j≥g_quÆôy_sˇlög
 
JPP
((
quÆôy
));

933 
EXTERN
(Ë
j≥g_sim∂e_¥ogªssi⁄
 
JPP
((
j_com¥ess_±r
 
cöfo
));

934 
EXTERN
(Ë
j≥g_suµªss_èbÀs
 
JPP
((
j_com¥ess_±r
 
cöfo
,

935 
boﬁón
 
suµªss
));

936 
EXTERN
(
JQUANT_TBL
 *Ë
j≥g_Æloc_qu™t_èbÀ
 
JPP
((
j_comm⁄_±r
 
cöfo
));

937 
EXTERN
(
JHUFF_TBL
 *Ë
j≥g_Æloc_huff_èbÀ
 
JPP
((
j_comm⁄_±r
 
cöfo
));

940 
EXTERN
(Ë
j≥g_°¨t_com¥ess
 
JPP
((
j_com¥ess_±r
 
cöfo
,

941 
boﬁón
 
wrôe_Æl_èbÀs
));

942 
EXTERN
(
JDIMENSION
Ë
j≥g_wrôe_sˇ∆öes
 
JPP
((
j_com¥ess_±r
 
cöfo
,

943 
JSAMPARRAY
 
sˇ∆öes
,

944 
JDIMENSION
 
num_löes
));

945 
EXTERN
(Ë
j≥g_föish_com¥ess
 
JPP
((
j_com¥ess_±r
 
cöfo
));

948 
EXTERN
(
JDIMENSION
Ë
j≥g_wrôe_øw_d©a
 
JPP
((
j_com¥ess_±r
 
cöfo
,

949 
JSAMPIMAGE
 
d©a
,

950 
JDIMENSION
 
num_löes
));

953 
EXTERN
(Ë
j≥g_wrôe_m¨kî


954 
JPP
((
j_com¥ess_±r
 
cöfo
, 
m¨kî
,

955 c⁄° 
JOCTET
 * 
d©≠å
, 
d©Æí
));

957 
EXTERN
(Ë
j≥g_wrôe_m_hódî


958 
JPP
((
j_com¥ess_±r
 
cöfo
, 
m¨kî
, 
d©Æí
));

959 
EXTERN
(Ë
j≥g_wrôe_m_byã


960 
JPP
((
j_com¥ess_±r
 
cöfo
, 
vÆ
));

963 
EXTERN
(Ë
j≥g_wrôe_èbÀs
 
JPP
((
j_com¥ess_±r
 
cöfo
));

966 
EXTERN
(Ë
j≥g_ªad_hódî
 
JPP
((
j_decom¥ess_±r
 
cöfo
,

967 
boﬁón
 
ªquúe_image
));

969 
	#JPEG_SUSPENDED
 0

	)

970 
	#JPEG_HEADER_OK
 1

	)

971 
	#JPEG_HEADER_TABLES_ONLY
 2

	)

979 
EXTERN
(
boﬁón
Ë
j≥g_°¨t_decom¥ess
 
JPP
((
j_decom¥ess_±r
 
cöfo
));

980 
EXTERN
(
JDIMENSION
Ë
j≥g_ªad_sˇ∆öes
 
JPP
((
j_decom¥ess_±r
 
cöfo
,

981 
JSAMPARRAY
 
sˇ∆öes
,

982 
JDIMENSION
 
max_löes
));

983 
EXTERN
(
boﬁón
Ë
j≥g_föish_decom¥ess
 
JPP
((
j_decom¥ess_±r
 
cöfo
));

986 
EXTERN
(
JDIMENSION
Ë
j≥g_ªad_øw_d©a
 
JPP
((
j_decom¥ess_±r
 
cöfo
,

987 
JSAMPIMAGE
 
d©a
,

988 
JDIMENSION
 
max_löes
));

991 
EXTERN
(
boﬁón
Ë
j≥g_has_mu…ùÀ_sˇns
 
JPP
((
j_decom¥ess_±r
 
cöfo
));

992 
EXTERN
(
boﬁón
Ë
j≥g_°¨t_ouçut
 
JPP
((
j_decom¥ess_±r
 
cöfo
,

993 
sˇn_numbî
));

994 
EXTERN
(
boﬁón
Ë
j≥g_föish_ouçut
 
JPP
((
j_decom¥ess_±r
 
cöfo
));

995 
EXTERN
(
boﬁón
Ë
j≥g_öput_com∂ëe
 
JPP
((
j_decom¥ess_±r
 
cöfo
));

996 
EXTERN
(Ë
j≥g_√w_cﬁ‹m≠
 
JPP
((
j_decom¥ess_±r
 
cöfo
));

997 
EXTERN
(Ë
j≥g_c⁄sume_öput
 
JPP
((
j_decom¥ess_±r
 
cöfo
));

1000 
	#JPEG_REACHED_SOS
 1

	)

1001 
	#JPEG_REACHED_EOI
 2

	)

1002 
	#JPEG_ROW_COMPLETED
 3

	)

1003 
	#JPEG_SCAN_COMPLETED
 4

	)

1006 
EXTERN
(Ë
j≥g_ˇlc_ouçut_dimísi⁄s
 
JPP
((
j_decom¥ess_±r
 
cöfo
));

1009 
EXTERN
(Ë
j≥g_ßve_m¨kîs


1010 
JPP
((
j_decom¥ess_±r
 
cöfo
, 
m¨kî_code
,

1011 
Àngth_limô
));

1014 
EXTERN
(Ë
j≥g_£t_m¨kî_¥o˚ss‹


1015 
JPP
((
j_decom¥ess_±r
 
cöfo
, 
m¨kî_code
,

1016 
j≥g_m¨kî_∑r£r_mëhod
 
routöe
));

1019 
EXTERN
(
jvút_b¨øy_±r
 *Ë
j≥g_ªad_c€fficõ¡s
 
JPP
((
j_decom¥ess_±r
 
cöfo
));

1020 
EXTERN
(Ë
j≥g_wrôe_c€fficõ¡s
 
JPP
((
j_com¥ess_±r
 
cöfo
,

1021 
jvút_b¨øy_±r
 * 
c€f_¨øys
));

1022 
EXTERN
(Ë
j≥g_c›y_¸ôiˇl_∑ømëîs
 
JPP
((
j_decom¥ess_±r
 
§cöfo
,

1023 
j_com¥ess_±r
 
d°öfo
));

1031 
EXTERN
(Ë
j≥g_ab‹t_com¥ess
 
JPP
((
j_com¥ess_±r
 
cöfo
));

1032 
EXTERN
(Ë
j≥g_ab‹t_decom¥ess
 
JPP
((
j_decom¥ess_±r
 
cöfo
));

1037 
EXTERN
(Ë
j≥g_ab‹t
 
JPP
((
j_comm⁄_±r
 
cöfo
));

1038 
EXTERN
(Ë
j≥g_de°roy
 
JPP
((
j_comm⁄_±r
 
cöfo
));

1041 
EXTERN
(
boﬁón
Ë
j≥g_ªsync_to_ª°¨t
 
JPP
((
j_decom¥ess_±r
 
cöfo
,

1042 
desúed
));

1049 
	#JPEG_RST0
 0xD0

	)

1050 
	#JPEG_EOI
 0xD9

	)

1051 
	#JPEG_APP0
 0xE0

	)

1052 
	#JPEG_COM
 0xFE

	)

1060 #ifde‡
INCOMPLETE_TYPES_BROKEN


1061 #i‚de‡
JPEG_INTERNALS


1062 
	sjvút_ßºay_c⁄åﬁ
 { 
dummy
; };

1063 
	sjvút_b¨øy_c⁄åﬁ
 { 
dummy
; };

1064 
	sj≥g_comp_ma°î
 { 
dummy
; };

1065 
	sj≥g_c_maö_c⁄åﬁÀr
 { 
dummy
; };

1066 
	sj≥g_c_¥ï_c⁄åﬁÀr
 { 
dummy
; };

1067 
	sj≥g_c_c€f_c⁄åﬁÀr
 { 
dummy
; };

1068 
	sj≥g_m¨kî_wrôî
 { 
dummy
; };

1069 
	sj≥g_cﬁ‹_c⁄vîãr
 { 
dummy
; };

1070 
	sj≥g_downßm∂î
 { 
dummy
; };

1071 
	sj≥g_f‹w¨d_d˘
 { 
dummy
; };

1072 
	sj≥g_íå›y_ícodî
 { 
dummy
; };

1073 
	sj≥g_decomp_ma°î
 { 
dummy
; };

1074 
	sj≥g_d_maö_c⁄åﬁÀr
 { 
dummy
; };

1075 
	sj≥g_d_c€f_c⁄åﬁÀr
 { 
dummy
; };

1076 
	sj≥g_d_po°_c⁄åﬁÀr
 { 
dummy
; };

1077 
	sj≥g_öput_c⁄åﬁÀr
 { 
dummy
; };

1078 
	sj≥g_m¨kî_ªadî
 { 
dummy
; };

1079 
	sj≥g_íå›y_decodî
 { 
dummy
; };

1080 
	sj≥g_övî£_d˘
 { 
dummy
; };

1081 
	sj≥g_upßm∂î
 { 
dummy
; };

1082 
	sj≥g_cﬁ‹_dec⁄vîãr
 { 
dummy
; };

1083 
	sj≥g_cﬁ‹_qu™tizî
 { 
dummy
; };

1095 #ifde‡
JPEG_INTERNALS


1096 
	~"j≥göt.h
"

1097 
	~"jîr‹.h
"

1100 #ifde‡
__˝lu•lus


	@/usr/include/limits.h

24 #i‚de‡
_LIBC_LIMITS_H_


25 
	#_LIBC_LIMITS_H_
 1

	)

27 
	~<„©uªs.h
>

33 
	#MB_LEN_MAX
 16

	)

38 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2

43 #i‚de‡
_LIMITS_H


44 
	#_LIMITS_H
 1

	)

46 
	~<bôs/w‹dsize.h
>

55 
	#CHAR_BIT
 8

	)

58 
	#SCHAR_MIN
 (-128)

	)

59 
	#SCHAR_MAX
 127

	)

62 
	#UCHAR_MAX
 255

	)

65 #ifde‡
__CHAR_UNSIGNED__


66 
	#CHAR_MIN
 0

	)

67 
	#CHAR_MAX
 
UCHAR_MAX


	)

69 
	#CHAR_MIN
 
SCHAR_MIN


	)

70 
	#CHAR_MAX
 
SCHAR_MAX


	)

74 
	#SHRT_MIN
 (-32768)

	)

75 
	#SHRT_MAX
 32767

	)

78 
	#USHRT_MAX
 65535

	)

81 
	#INT_MIN
 (-
INT_MAX
 - 1)

	)

82 
	#INT_MAX
 2147483647

	)

85 
	#UINT_MAX
 4294967295U

	)

88 #i‡
__WORDSIZE
 == 64

89 
	#LONG_MAX
 9223372036854775807L

	)

91 
	#LONG_MAX
 2147483647L

	)

93 
	#LONG_MIN
 (-
LONG_MAX
 - 1L)

	)

96 #i‡
__WORDSIZE
 == 64

97 
	#ULONG_MAX
 18446744073709551615UL

	)

99 
	#ULONG_MAX
 4294967295UL

	)

102 #ifde‡
__USE_ISOC99


105 
	#LLONG_MAX
 9223372036854775807LL

	)

106 
	#LLONG_MIN
 (-
LLONG_MAX
 - 1LL)

	)

109 
	#ULLONG_MAX
 18446744073709551615ULL

	)

123 #i‡
deföed
 
__GNUC__
 && !deföed 
_GCC_LIMITS_H_


125 #ö˛ude_√xà<
limôs
.
h
>

131 #i‡
deföed
 
__USE_ISOC99
 && deföed 
__GNUC__


132 #i‚de‡
LLONG_MIN


133 
	#LLONG_MIN
 (-
LLONG_MAX
-1)

	)

135 #i‚de‡
LLONG_MAX


136 
	#LLONG_MAX
 
__LONG_LONG_MAX__


	)

138 #i‚de‡
ULLONG_MAX


139 
	#ULLONG_MAX
 (
LLONG_MAX
 * 2ULL + 1)

	)

143 #ifdef 
__USE_POSIX


145 
	~<bôs/posix1_lim.h
>

148 #ifdef 
__USE_POSIX2


149 
	~<bôs/posix2_lim.h
>

152 #ifdef 
__USE_XOPEN


153 
	~<bôs/x›í_lim.h
>

	@/usr/include/linux/fb.h

1 #i‚de‡
_LINUX_FB_H


2 
	#_LINUX_FB_H


	)

4 
	~<asm/ty≥s.h
>

5 
	~<löux/i2c.h
>

7 
	gdíåy
;

11 
	#FB_MAJOR
 29

	)

12 
	#FB_MAX
 32

	)

16 
	#FBIOGET_VSCREENINFO
 0x4600

	)

17 
	#FBIOPUT_VSCREENINFO
 0x4601

	)

18 
	#FBIOGET_FSCREENINFO
 0x4602

	)

19 
	#FBIOGETCMAP
 0x4604

	)

20 
	#FBIOPUTCMAP
 0x4605

	)

21 
	#FBIOPAN_DISPLAY
 0x4606

	)

22 
	#FBIO_CURSOR
 
	`_IOWR
('F', 0x08, 
fb_curs‹
)

	)

27 
	#FBIOGET_CON2FBMAP
 0x460F

	)

28 
	#FBIOPUT_CON2FBMAP
 0x4610

	)

29 
	#FBIOBLANK
 0x4611

	)

30 
	#FBIOGET_VBLANK
 
	`_IOR
('F', 0x12, 
fb_vbœnk
)

	)

31 
	#FBIO_ALLOC
 0x4613

	)

32 
	#FBIO_FREE
 0x4614

	)

33 
	#FBIOGET_GLYPH
 0x4615

	)

34 
	#FBIOGET_HWCINFO
 0x4616

	)

35 
	#FBIOPUT_MODEINFO
 0x4617

	)

36 
	#FBIOGET_DISPINFO
 0x4618

	)

39 
	#FB_TYPE_PACKED_PIXELS
 0

	)

40 
	#FB_TYPE_PLANES
 1

	)

41 
	#FB_TYPE_INTERLEAVED_PLANES
 2

	)

42 
	#FB_TYPE_TEXT
 3

	)

43 
	#FB_TYPE_VGA_PLANES
 4

	)

45 
	#FB_AUX_TEXT_MDA
 0

	)

46 
	#FB_AUX_TEXT_CGA
 1

	)

47 
	#FB_AUX_TEXT_S3_MMIO
 2

	)

48 
	#FB_AUX_TEXT_MGA_STEP16
 3

	)

49 
	#FB_AUX_TEXT_MGA_STEP8
 4

	)

50 
	#FB_AUX_TEXT_SVGA_GROUP
 8

	)

51 
	#FB_AUX_TEXT_SVGA_MASK
 7

	)

52 
	#FB_AUX_TEXT_SVGA_STEP2
 8

	)

53 
	#FB_AUX_TEXT_SVGA_STEP4
 9

	)

54 
	#FB_AUX_TEXT_SVGA_STEP8
 10

	)

55 
	#FB_AUX_TEXT_SVGA_STEP16
 11

	)

56 
	#FB_AUX_TEXT_SVGA_LAST
 15

	)

58 
	#FB_AUX_VGA_PLANES_VGA4
 0

	)

59 
	#FB_AUX_VGA_PLANES_CFB4
 1

	)

60 
	#FB_AUX_VGA_PLANES_CFB8
 2

	)

62 
	#FB_VISUAL_MONO01
 0

	)

63 
	#FB_VISUAL_MONO10
 1

	)

64 
	#FB_VISUAL_TRUECOLOR
 2

	)

65 
	#FB_VISUAL_PSEUDOCOLOR
 3

	)

66 
	#FB_VISUAL_DIRECTCOLOR
 4

	)

67 
	#FB_VISUAL_STATIC_PSEUDOCOLOR
 5

	)

69 
	#FB_ACCEL_NONE
 0

	)

70 
	#FB_ACCEL_ATARIBLITT
 1

	)

71 
	#FB_ACCEL_AMIGABLITT
 2

	)

72 
	#FB_ACCEL_S3_TRIO64
 3

	)

73 
	#FB_ACCEL_NCR_77C32BLT
 4

	)

74 
	#FB_ACCEL_S3_VIRGE
 5

	)

75 
	#FB_ACCEL_ATI_MACH64GX
 6

	)

76 
	#FB_ACCEL_DEC_TGA
 7

	)

77 
	#FB_ACCEL_ATI_MACH64CT
 8

	)

78 
	#FB_ACCEL_ATI_MACH64VT
 9

	)

79 
	#FB_ACCEL_ATI_MACH64GT
 10

	)

80 
	#FB_ACCEL_SUN_CREATOR
 11

	)

81 
	#FB_ACCEL_SUN_CGSIX
 12

	)

82 
	#FB_ACCEL_SUN_LEO
 13

	)

83 
	#FB_ACCEL_IMS_TWINTURBO
 14

	)

84 
	#FB_ACCEL_3DLABS_PERMEDIA2
 15

	)

85 
	#FB_ACCEL_MATROX_MGA2064W
 16

	)

86 
	#FB_ACCEL_MATROX_MGA1064SG
 17

	)

87 
	#FB_ACCEL_MATROX_MGA2164W
 18

	)

88 
	#FB_ACCEL_MATROX_MGA2164W_AGP
 19

	)

89 
	#FB_ACCEL_MATROX_MGAG100
 20

	)

90 
	#FB_ACCEL_MATROX_MGAG200
 21

	)

91 
	#FB_ACCEL_SUN_CG14
 22

	)

92 
	#FB_ACCEL_SUN_BWTWO
 23

	)

93 
	#FB_ACCEL_SUN_CGTHREE
 24

	)

94 
	#FB_ACCEL_SUN_TCX
 25

	)

95 
	#FB_ACCEL_MATROX_MGAG400
 26

	)

96 
	#FB_ACCEL_NV3
 27

	)

97 
	#FB_ACCEL_NV4
 28

	)

98 
	#FB_ACCEL_NV5
 29

	)

99 
	#FB_ACCEL_CT_6555x
 30

	)

100 
	#FB_ACCEL_3DFX_BANSHEE
 31

	)

101 
	#FB_ACCEL_ATI_RAGE128
 32

	)

102 
	#FB_ACCEL_IGS_CYBER2000
 33

	)

103 
	#FB_ACCEL_IGS_CYBER2010
 34

	)

104 
	#FB_ACCEL_IGS_CYBER5000
 35

	)

105 
	#FB_ACCEL_SIS_GLAMOUR
 36

	)

106 
	#FB_ACCEL_3DLABS_PERMEDIA3
 37

	)

107 
	#FB_ACCEL_ATI_RADEON
 38

	)

108 
	#FB_ACCEL_I810
 39

	)

109 
	#FB_ACCEL_SIS_GLAMOUR_2
 40

	)

110 
	#FB_ACCEL_SIS_XABRE
 41

	)

111 
	#FB_ACCEL_I830
 42

	)

112 
	#FB_ACCEL_NV_10
 43

	)

113 
	#FB_ACCEL_NV_20
 44

	)

114 
	#FB_ACCEL_NV_30
 45

	)

115 
	#FB_ACCEL_NV_40
 46

	)

116 
	#FB_ACCEL_XGI_VOLARI_V
 47

	)

117 
	#FB_ACCEL_XGI_VOLARI_Z
 48

	)

118 
	#FB_ACCEL_NEOMAGIC_NM2070
 90

	)

119 
	#FB_ACCEL_NEOMAGIC_NM2090
 91

	)

120 
	#FB_ACCEL_NEOMAGIC_NM2093
 92

	)

121 
	#FB_ACCEL_NEOMAGIC_NM2097
 93

	)

122 
	#FB_ACCEL_NEOMAGIC_NM2160
 94

	)

123 
	#FB_ACCEL_NEOMAGIC_NM2200
 95

	)

124 
	#FB_ACCEL_NEOMAGIC_NM2230
 96

	)

125 
	#FB_ACCEL_NEOMAGIC_NM2360
 97

	)

126 
	#FB_ACCEL_NEOMAGIC_NM2380
 98

	)

128 
	#FB_ACCEL_SAVAGE4
 0x80

	)

129 
	#FB_ACCEL_SAVAGE3D
 0x81

	)

130 
	#FB_ACCEL_SAVAGE3D_MV
 0x82

	)

131 
	#FB_ACCEL_SAVAGE2000
 0x83

	)

132 
	#FB_ACCEL_SAVAGE_MX_MV
 0x84

	)

133 
	#FB_ACCEL_SAVAGE_MX
 0x85

	)

134 
	#FB_ACCEL_SAVAGE_IX_MV
 0x86

	)

135 
	#FB_ACCEL_SAVAGE_IX
 0x87

	)

136 
	#FB_ACCEL_PROSAVAGE_PM
 0x88

	)

137 
	#FB_ACCEL_PROSAVAGE_KM
 0x89

	)

138 
	#FB_ACCEL_S3TWISTER_P
 0x8®

	)

139 
	#FB_ACCEL_S3TWISTER_K
 0x8b

	)

140 
	#FB_ACCEL_SUPERSAVAGE
 0x8¯

	)

141 
	#FB_ACCEL_PROSAVAGE_DDR
 0x8d

	)

142 
	#FB_ACCEL_PROSAVAGE_DDRK
 0x8ê

	)

144 
	sfb_fix_s¸ìnöfo
 {

145 
	mid
[16];

146 
	msmem_°¨t
;

148 
__u32
 
	msmem_Àn
;

149 
__u32
 
	mty≥
;

150 
__u32
 
	mty≥_aux
;

151 
__u32
 
	mvisuÆ
;

152 
__u16
 
	mx∑n°ï
;

153 
__u16
 
	my∑n°ï
;

154 
__u16
 
	mywøp°ï
;

155 
__u32
 
	mlöe_Àngth
;

156 
	mmmio_°¨t
;

158 
__u32
 
	mmmio_Àn
;

159 
__u32
 
	mac˚l
;

161 
__u16
 
	mª£rved
[3];

170 
	sfb_bôfõld
 {

171 
__u32
 
	moff£t
;

172 
__u32
 
	mÀngth
;

173 
__u32
 
	mmsb_right
;

177 
	#FB_NONSTD_HAM
 1

	)

179 
	#FB_ACTIVATE_NOW
 0

	)

180 
	#FB_ACTIVATE_NXTOPEN
 1

	)

181 
	#FB_ACTIVATE_TEST
 2

	)

182 
	#FB_ACTIVATE_MASK
 15

	)

184 
	#FB_ACTIVATE_VBL
 16

	)

185 
	#FB_CHANGE_CMAP_VBL
 32

	)

186 
	#FB_ACTIVATE_ALL
 64

	)

187 
	#FB_ACTIVATE_FORCE
 128

	)

188 
	#FB_ACTIVATE_INV_MODE
 256

	)

190 
	#FB_ACCELF_TEXT
 1

	)

192 
	#FB_SYNC_HOR_HIGH_ACT
 1

	)

193 
	#FB_SYNC_VERT_HIGH_ACT
 2

	)

194 
	#FB_SYNC_EXT
 4

	)

195 
	#FB_SYNC_COMP_HIGH_ACT
 8

	)

196 
	#FB_SYNC_BROADCAST
 16

	)

199 
	#FB_SYNC_ON_GREEN
 32

	)

201 
	#FB_VMODE_NONINTERLACED
 0

	)

202 
	#FB_VMODE_INTERLACED
 1

	)

203 
	#FB_VMODE_DOUBLE
 2

	)

204 
	#FB_VMODE_MASK
 255

	)

206 
	#FB_VMODE_YWRAP
 256

	)

207 
	#FB_VMODE_SMOOTH_XPAN
 512

	)

208 
	#FB_VMODE_CONUPDATE
 512

	)

213 
	#FB_ROTATE_UR
 0

	)

214 
	#FB_ROTATE_CW
 1

	)

215 
	#FB_ROTATE_UD
 2

	)

216 
	#FB_ROTATE_CCW
 3

	)

218 
	#PICOS2KHZ
(
a
Ë(1000000000UL/◊))

	)

219 
	#KHZ2PICOS
(
a
Ë(1000000000UL/◊))

	)

221 
	sfb_v¨_s¸ìnöfo
 {

222 
__u32
 
	mxªs
;

223 
__u32
 
	myªs
;

224 
__u32
 
	mxªs_vútuÆ
;

225 
__u32
 
	myªs_vútuÆ
;

226 
__u32
 
	mxoff£t
;

227 
__u32
 
	myoff£t
;

229 
__u32
 
	mbôs_≥r_pixñ
;

230 
__u32
 
	mgøysˇÀ
;

232 
fb_bôfõld
 
	mªd
;

233 
fb_bôfõld
 
	mgªí
;

234 
fb_bôfõld
 
	mblue
;

235 
fb_bôfõld
 
	må™•
;

237 
__u32
 
	mn⁄°d
;

239 
__u32
 
	ma˘iv©e
;

241 
__u32
 
	mheight
;

242 
__u32
 
	mwidth
;

244 
__u32
 
	mac˚l_Êags
;

247 
__u32
 
	mpix˛ock
;

248 
__u32
 
	mÀ·_m¨gö
;

249 
__u32
 
	mright_m¨gö
;

250 
__u32
 
	muµî_m¨gö
;

251 
__u32
 
	mlowî_m¨gö
;

252 
__u32
 
	mhsync_Àn
;

253 
__u32
 
	mvsync_Àn
;

254 
__u32
 
	msync
;

255 
__u32
 
	mvmode
;

256 
__u32
 
	mrŸ©e
;

257 
__u32
 
	mª£rved
[5];

260 
	sfb_cm≠
 {

261 
__u32
 
	m°¨t
;

262 
__u32
 
	mÀn
;

263 
__u16
 *
	mªd
;

264 
__u16
 *
	mgªí
;

265 
__u16
 *
	mblue
;

266 
__u16
 *
	må™•
;

269 
	sfb_c⁄2fbm≠
 {

270 
__u32
 
	mc⁄sﬁe
;

271 
__u32
 
	m‰amebuf„r
;

275 
	#VESA_NO_BLANKING
 0

	)

276 
	#VESA_VSYNC_SUSPEND
 1

	)

277 
	#VESA_HSYNC_SUSPEND
 2

	)

278 
	#VESA_POWERDOWN
 3

	)

283 
	mFB_BLANK_UNBLANK
 = 
VESA_NO_BLANKING
,

286 
	mFB_BLANK_NORMAL
 = 
VESA_NO_BLANKING
 + 1,

289 
	mFB_BLANK_VSYNC_SUSPEND
 = 
VESA_VSYNC_SUSPEND
 + 1,

292 
	mFB_BLANK_HSYNC_SUSPEND
 = 
VESA_HSYNC_SUSPEND
 + 1,

295 
	mFB_BLANK_POWERDOWN
 = 
VESA_POWERDOWN
 + 1

298 
	#FB_VBLANK_VBLANKING
 0x001

	)

299 
	#FB_VBLANK_HBLANKING
 0x002

	)

300 
	#FB_VBLANK_HAVE_VBLANK
 0x004

	)

301 
	#FB_VBLANK_HAVE_HBLANK
 0x008

	)

302 
	#FB_VBLANK_HAVE_COUNT
 0x010

	)

303 
	#FB_VBLANK_HAVE_VCOUNT
 0x020

	)

304 
	#FB_VBLANK_HAVE_HCOUNT
 0x040

	)

305 
	#FB_VBLANK_VSYNCING
 0x080

	)

306 
	#FB_VBLANK_HAVE_VSYNC
 0x100

	)

308 
	sfb_vbœnk
 {

309 
__u32
 
	mÊags
;

310 
__u32
 
	mcou¡
;

311 
__u32
 
	mvcou¡
;

312 
__u32
 
	mhcou¡
;

313 
__u32
 
	mª£rved
[4];

317 
	#ROP_COPY
 0

	)

318 
	#ROP_XOR
 1

	)

320 
	sfb_c›y¨ó
 {

321 
__u32
 
	mdx
;

322 
__u32
 
	mdy
;

323 
__u32
 
	mwidth
;

324 
__u32
 
	mheight
;

325 
__u32
 
	msx
;

326 
__u32
 
	msy
;

329 
	sfb_fûÃe˘
 {

330 
__u32
 
	mdx
;

331 
__u32
 
	mdy
;

332 
__u32
 
	mwidth
;

333 
__u32
 
	mheight
;

334 
__u32
 
	mcﬁ‹
;

335 
__u32
 
	mr›
;

338 
	sfb_image
 {

339 
__u32
 
	mdx
;

340 
__u32
 
	mdy
;

341 
__u32
 
	mwidth
;

342 
__u32
 
	mheight
;

343 
__u32
 
	mfg_cﬁ‹
;

344 
__u32
 
	mbg_cﬁ‹
;

345 
__u8
 
	mdïth
;

346 c⁄° *
	md©a
;

347 
fb_cm≠
 
	mcm≠
;

354 
	#FB_CUR_SETIMAGE
 0x01

	)

355 
	#FB_CUR_SETPOS
 0x02

	)

356 
	#FB_CUR_SETHOT
 0x04

	)

357 
	#FB_CUR_SETCMAP
 0x08

	)

358 
	#FB_CUR_SETSHAPE
 0x10

	)

359 
	#FB_CUR_SETSIZE
 0x20

	)

360 
	#FB_CUR_SETALL
 0xFF

	)

362 
	sfbcuΩos
 {

363 
__u16
 
	mx
, 
	my
;

366 
	sfb_curs‹
 {

367 
__u16
 
	m£t
;

368 
__u16
 
	míabÀ
;

369 
__u16
 
	mr›
;

370 c⁄° *
	mmask
;

371 
fbcuΩos
 
	mhŸ
;

372 
fb_image
 
	mimage
;

375 #ifde‡
CONFIG_FB_BACKLIGHT


377 
	#FB_BACKLIGHT_LEVELS
 128

	)

378 
	#FB_BACKLIGHT_MAX
 0xFF

	)

	@/usr/include/linux/kd.h

1 #i‚de‡
_LINUX_KD_H


2 
	#_LINUX_KD_H


	)

3 
	~<löux/ty≥s.h
>

7 
	#GIO_FONT
 0x4B60

	)

8 
	#PIO_FONT
 0x4B61

	)

10 
	#GIO_FONTX
 0x4B6B

	)

11 
	#PIO_FONTX
 0x4B6C

	)

12 
	sc⁄sﬁef⁄tdesc
 {

13 
	mch¨cou¡
;

14 
	mch¨height
;

15 *
	mch¨d©a
;

18 
	#PIO_FONTRESET
 0x4B6D

	)

20 
	#GIO_CMAP
 0x4B70

	)

21 
	#PIO_CMAP
 0x4B71

	)

23 
	#KIOCSOUND
 0x4B2F

	)

24 
	#KDMKTONE
 0x4B30

	)

26 
	#KDGETLED
 0x4B31

	)

27 
	#KDSETLED
 0x4B32

	)

28 
	#LED_SCR
 0x01

	)

29 
	#LED_NUM
 0x02

	)

30 
	#LED_CAP
 0x04

	)

32 
	#KDGKBTYPE
 0x4B33

	)

33 
	#KB_84
 0x01

	)

34 
	#KB_101
 0x02

	)

35 
	#KB_OTHER
 0x03

	)

37 
	#KDADDIO
 0x4B34

	)

38 
	#KDDELIO
 0x4B35

	)

39 
	#KDENABIO
 0x4B36

	)

40 
	#KDDISABIO
 0x4B37

	)

42 
	#KDSETMODE
 0x4B3A

	)

43 
	#KD_TEXT
 0x00

	)

44 
	#KD_GRAPHICS
 0x01

	)

45 
	#KD_TEXT0
 0x02

	)

46 
	#KD_TEXT1
 0x03

	)

47 
	#KDGETMODE
 0x4B3B

	)

49 
	#KDMAPDISP
 0x4B3C

	)

50 
	#KDUNMAPDISP
 0x4B3D

	)

52 
	ts¸nm≠_t
;

53 
	#E_TABSZ
 256

	)

54 
	#GIO_SCRNMAP
 0x4B40

	)

55 
	#PIO_SCRNMAP
 0x4B41

	)

56 
	#GIO_UNISCRNMAP
 0x4B69

	)

57 
	#PIO_UNISCRNMAP
 0x4B6A

	)

59 
	#GIO_UNIMAP
 0x4B66

	)

60 
	sunùaú
 {

61 
	municode
;

62 
	mf⁄ços
;

64 
	sunim≠desc
 {

65 
	míåy_˘
;

66 
unùaú
 *
	míåõs
;

68 
	#PIO_UNIMAP
 0x4B67

	)

69 
	#PIO_UNIMAPCLR
 0x4B68

	)

70 
	sunim≠öô
 {

71 
	madvi£d_hashsize
;

72 
	madvi£d_hash°ï
;

73 
	madvi£d_hashÀvñ
;

76 
	#UNI_DIRECT_BASE
 0xF000

	)

77 
	#UNI_DIRECT_MASK
 0x01FF

	)

79 
	#K_RAW
 0x00

	)

80 
	#K_XLATE
 0x01

	)

81 
	#K_MEDIUMRAW
 0x02

	)

82 
	#K_UNICODE
 0x03

	)

83 
	#KDGKBMODE
 0x4B44

	)

84 
	#KDSKBMODE
 0x4B45

	)

86 
	#K_METABIT
 0x03

	)

87 
	#K_ESCPREFIX
 0x04

	)

88 
	#KDGKBMETA
 0x4B62

	)

89 
	#KDSKBMETA
 0x4B63

	)

91 
	#K_SCROLLLOCK
 0x01

	)

92 
	#K_NUMLOCK
 0x02

	)

93 
	#K_CAPSLOCK
 0x04

	)

94 
	#KDGKBLED
 0x4B64

	)

95 
	#KDSKBLED
 0x4B65

	)

97 
	skbíåy
 {

98 
	mkb_èbÀ
;

99 
	mkb_ödex
;

100 
	mkb_vÆue
;

102 
	#K_NORMTAB
 0x00

	)

103 
	#K_SHIFTTAB
 0x01

	)

104 
	#K_ALTTAB
 0x02

	)

105 
	#K_ALTSHIFTTAB
 0x03

	)

107 
	#KDGKBENT
 0x4B46

	)

108 
	#KDSKBENT
 0x4B47

	)

110 
	skb£¡ry
 {

111 
	mkb_func
;

112 
	mkb_°rög
[512];

114 
	#KDGKBSENT
 0x4B48

	)

115 
	#KDSKBSENT
 0x4B49

	)

117 
	skbdü¸
 {

118 
	mdü¸
, 
	mba£
, 
	mªsu…
;

120 
	skbdü¸s
 {

121 
	mkb_˙t
;

122 
kbdü¸
 
	mkbdü¸
[256];

124 
	#KDGKBDIACR
 0x4B4A

	)

125 
	#KDSKBDIACR
 0x4B4B

	)

127 
	skbkeycode
 {

128 
	msˇncode
, 
	mkeycode
;

130 
	#KDGETKEYCODE
 0x4B4C

	)

131 
	#KDSETKEYCODE
 0x4B4D

	)

133 
	#KDSIGACCEPT
 0x4B4E

	)

135 
	skbd_ª≥©
 {

136 
	mdñay
;

137 
	m≥riod
;

141 
	#KDKBDREP
 0x4B52

	)

144 
	#KDFONTOP
 0x4B72

	)

146 
	sc⁄sﬁe_f⁄t_›
 {

147 
	m›
;

148 
	mÊags
;

149 
	mwidth
, 
	mheight
;

150 
	mch¨cou¡
;

151 *
	md©a
;

154 
	sc⁄sﬁe_f⁄t
 {

155 
	mwidth
, 
	mheight
;

156 
	mch¨cou¡
;

157 *
	md©a
;

160 
	#KD_FONT_OP_SET
 0

	)

161 
	#KD_FONT_OP_GET
 1

	)

162 
	#KD_FONT_OP_SET_DEFAULT
 2

	)

163 
	#KD_FONT_OP_COPY
 3

	)

165 
	#KD_FONT_FLAG_DONT_RECALC
 1

	)

	@/usr/include/linux/keyboard.h

1 #i‚de‡
__LINUX_KEYBOARD_H


2 
	#__LINUX_KEYBOARD_H


	)

4 
	~<löux/waô.h
>

6 
	#KG_SHIFT
 0

	)

7 
	#KG_CTRL
 2

	)

8 
	#KG_ALT
 3

	)

9 
	#KG_ALTGR
 1

	)

10 
	#KG_SHIFTL
 4

	)

11 
	#KG_KANASHIFT
 4

	)

12 
	#KG_SHIFTR
 5

	)

13 
	#KG_CTRLL
 6

	)

14 
	#KG_CTRLR
 7

	)

15 
	#KG_CAPSSHIFT
 8

	)

17 
	#NR_SHIFT
 9

	)

19 
	#NR_KEYS
 256

	)

20 
	#MAX_NR_KEYMAPS
 256

	)

23 
	#MAX_NR_OF_USER_KEYMAPS
 256

	)

26 
	#MAX_NR_FUNC
 256

	)

28 
	#KT_LATIN
 0

	)

29 
	#KT_LETTER
 11

	)

30 
	#KT_FN
 1

	)

31 
	#KT_SPEC
 2

	)

32 
	#KT_PAD
 3

	)

33 
	#KT_DEAD
 4

	)

34 
	#KT_CONS
 5

	)

35 
	#KT_CUR
 6

	)

36 
	#KT_SHIFT
 7

	)

37 
	#KT_META
 8

	)

38 
	#KT_ASCII
 9

	)

39 
	#KT_LOCK
 10

	)

40 
	#KT_SLOCK
 12

	)

41 
	#KT_BRL
 14

	)

43 
	#K
(
t
,
v
Ë((—)<<8)|(v))

	)

44 
	#KTYP
(
x
Ë((xË>> 8)

	)

45 
	#KVAL
(
x
Ë((xË& 0xff)

	)

47 
	#K_F1
 
	`K
(
KT_FN
,0)

	)

48 
	#K_F2
 
	`K
(
KT_FN
,1)

	)

49 
	#K_F3
 
	`K
(
KT_FN
,2)

	)

50 
	#K_F4
 
	`K
(
KT_FN
,3)

	)

51 
	#K_F5
 
	`K
(
KT_FN
,4)

	)

52 
	#K_F6
 
	`K
(
KT_FN
,5)

	)

53 
	#K_F7
 
	`K
(
KT_FN
,6)

	)

54 
	#K_F8
 
	`K
(
KT_FN
,7)

	)

55 
	#K_F9
 
	`K
(
KT_FN
,8)

	)

56 
	#K_F10
 
	`K
(
KT_FN
,9)

	)

57 
	#K_F11
 
	`K
(
KT_FN
,10)

	)

58 
	#K_F12
 
	`K
(
KT_FN
,11)

	)

59 
	#K_F13
 
	`K
(
KT_FN
,12)

	)

60 
	#K_F14
 
	`K
(
KT_FN
,13)

	)

61 
	#K_F15
 
	`K
(
KT_FN
,14)

	)

62 
	#K_F16
 
	`K
(
KT_FN
,15)

	)

63 
	#K_F17
 
	`K
(
KT_FN
,16)

	)

64 
	#K_F18
 
	`K
(
KT_FN
,17)

	)

65 
	#K_F19
 
	`K
(
KT_FN
,18)

	)

66 
	#K_F20
 
	`K
(
KT_FN
,19)

	)

67 
	#K_FIND
 
	`K
(
KT_FN
,20)

	)

68 
	#K_INSERT
 
	`K
(
KT_FN
,21)

	)

69 
	#K_REMOVE
 
	`K
(
KT_FN
,22)

	)

70 
	#K_SELECT
 
	`K
(
KT_FN
,23)

	)

71 
	#K_PGUP
 
	`K
(
KT_FN
,24Ë

	)

72 
	#K_PGDN
 
	`K
(
KT_FN
,25Ë

	)

73 
	#K_MACRO
 
	`K
(
KT_FN
,26)

	)

74 
	#K_HELP
 
	`K
(
KT_FN
,27)

	)

75 
	#K_DO
 
	`K
(
KT_FN
,28)

	)

76 
	#K_PAUSE
 
	`K
(
KT_FN
,29)

	)

77 
	#K_F21
 
	`K
(
KT_FN
,30)

	)

78 
	#K_F22
 
	`K
(
KT_FN
,31)

	)

79 
	#K_F23
 
	`K
(
KT_FN
,32)

	)

80 
	#K_F24
 
	`K
(
KT_FN
,33)

	)

81 
	#K_F25
 
	`K
(
KT_FN
,34)

	)

82 
	#K_F26
 
	`K
(
KT_FN
,35)

	)

83 
	#K_F27
 
	`K
(
KT_FN
,36)

	)

84 
	#K_F28
 
	`K
(
KT_FN
,37)

	)

85 
	#K_F29
 
	`K
(
KT_FN
,38)

	)

86 
	#K_F30
 
	`K
(
KT_FN
,39)

	)

87 
	#K_F31
 
	`K
(
KT_FN
,40)

	)

88 
	#K_F32
 
	`K
(
KT_FN
,41)

	)

89 
	#K_F33
 
	`K
(
KT_FN
,42)

	)

90 
	#K_F34
 
	`K
(
KT_FN
,43)

	)

91 
	#K_F35
 
	`K
(
KT_FN
,44)

	)

92 
	#K_F36
 
	`K
(
KT_FN
,45)

	)

93 
	#K_F37
 
	`K
(
KT_FN
,46)

	)

94 
	#K_F38
 
	`K
(
KT_FN
,47)

	)

95 
	#K_F39
 
	`K
(
KT_FN
,48)

	)

96 
	#K_F40
 
	`K
(
KT_FN
,49)

	)

97 
	#K_F41
 
	`K
(
KT_FN
,50)

	)

98 
	#K_F42
 
	`K
(
KT_FN
,51)

	)

99 
	#K_F43
 
	`K
(
KT_FN
,52)

	)

100 
	#K_F44
 
	`K
(
KT_FN
,53)

	)

101 
	#K_F45
 
	`K
(
KT_FN
,54)

	)

102 
	#K_F46
 
	`K
(
KT_FN
,55)

	)

103 
	#K_F47
 
	`K
(
KT_FN
,56)

	)

104 
	#K_F48
 
	`K
(
KT_FN
,57)

	)

105 
	#K_F49
 
	`K
(
KT_FN
,58)

	)

106 
	#K_F50
 
	`K
(
KT_FN
,59)

	)

107 
	#K_F51
 
	`K
(
KT_FN
,60)

	)

108 
	#K_F52
 
	`K
(
KT_FN
,61)

	)

109 
	#K_F53
 
	`K
(
KT_FN
,62)

	)

110 
	#K_F54
 
	`K
(
KT_FN
,63)

	)

111 
	#K_F55
 
	`K
(
KT_FN
,64)

	)

112 
	#K_F56
 
	`K
(
KT_FN
,65)

	)

113 
	#K_F57
 
	`K
(
KT_FN
,66)

	)

114 
	#K_F58
 
	`K
(
KT_FN
,67)

	)

115 
	#K_F59
 
	`K
(
KT_FN
,68)

	)

116 
	#K_F60
 
	`K
(
KT_FN
,69)

	)

117 
	#K_F61
 
	`K
(
KT_FN
,70)

	)

118 
	#K_F62
 
	`K
(
KT_FN
,71)

	)

119 
	#K_F63
 
	`K
(
KT_FN
,72)

	)

120 
	#K_F64
 
	`K
(
KT_FN
,73)

	)

121 
	#K_F65
 
	`K
(
KT_FN
,74)

	)

122 
	#K_F66
 
	`K
(
KT_FN
,75)

	)

123 
	#K_F67
 
	`K
(
KT_FN
,76)

	)

124 
	#K_F68
 
	`K
(
KT_FN
,77)

	)

125 
	#K_F69
 
	`K
(
KT_FN
,78)

	)

126 
	#K_F70
 
	`K
(
KT_FN
,79)

	)

127 
	#K_F71
 
	`K
(
KT_FN
,80)

	)

128 
	#K_F72
 
	`K
(
KT_FN
,81)

	)

129 
	#K_F73
 
	`K
(
KT_FN
,82)

	)

130 
	#K_F74
 
	`K
(
KT_FN
,83)

	)

131 
	#K_F75
 
	`K
(
KT_FN
,84)

	)

132 
	#K_F76
 
	`K
(
KT_FN
,85)

	)

133 
	#K_F77
 
	`K
(
KT_FN
,86)

	)

134 
	#K_F78
 
	`K
(
KT_FN
,87)

	)

135 
	#K_F79
 
	`K
(
KT_FN
,88)

	)

136 
	#K_F80
 
	`K
(
KT_FN
,89)

	)

137 
	#K_F81
 
	`K
(
KT_FN
,90)

	)

138 
	#K_F82
 
	`K
(
KT_FN
,91)

	)

139 
	#K_F83
 
	`K
(
KT_FN
,92)

	)

140 
	#K_F84
 
	`K
(
KT_FN
,93)

	)

141 
	#K_F85
 
	`K
(
KT_FN
,94)

	)

142 
	#K_F86
 
	`K
(
KT_FN
,95)

	)

143 
	#K_F87
 
	`K
(
KT_FN
,96)

	)

144 
	#K_F88
 
	`K
(
KT_FN
,97)

	)

145 
	#K_F89
 
	`K
(
KT_FN
,98)

	)

146 
	#K_F90
 
	`K
(
KT_FN
,99)

	)

147 
	#K_F91
 
	`K
(
KT_FN
,100)

	)

148 
	#K_F92
 
	`K
(
KT_FN
,101)

	)

149 
	#K_F93
 
	`K
(
KT_FN
,102)

	)

150 
	#K_F94
 
	`K
(
KT_FN
,103)

	)

151 
	#K_F95
 
	`K
(
KT_FN
,104)

	)

152 
	#K_F96
 
	`K
(
KT_FN
,105)

	)

153 
	#K_F97
 
	`K
(
KT_FN
,106)

	)

154 
	#K_F98
 
	`K
(
KT_FN
,107)

	)

155 
	#K_F99
 
	`K
(
KT_FN
,108)

	)

156 
	#K_F100
 
	`K
(
KT_FN
,109)

	)

157 
	#K_F101
 
	`K
(
KT_FN
,110)

	)

158 
	#K_F102
 
	`K
(
KT_FN
,111)

	)

159 
	#K_F103
 
	`K
(
KT_FN
,112)

	)

160 
	#K_F104
 
	`K
(
KT_FN
,113)

	)

161 
	#K_F105
 
	`K
(
KT_FN
,114)

	)

162 
	#K_F106
 
	`K
(
KT_FN
,115)

	)

163 
	#K_F107
 
	`K
(
KT_FN
,116)

	)

164 
	#K_F108
 
	`K
(
KT_FN
,117)

	)

165 
	#K_F109
 
	`K
(
KT_FN
,118)

	)

166 
	#K_F110
 
	`K
(
KT_FN
,119)

	)

167 
	#K_F111
 
	`K
(
KT_FN
,120)

	)

168 
	#K_F112
 
	`K
(
KT_FN
,121)

	)

169 
	#K_F113
 
	`K
(
KT_FN
,122)

	)

170 
	#K_F114
 
	`K
(
KT_FN
,123)

	)

171 
	#K_F115
 
	`K
(
KT_FN
,124)

	)

172 
	#K_F116
 
	`K
(
KT_FN
,125)

	)

173 
	#K_F117
 
	`K
(
KT_FN
,126)

	)

174 
	#K_F118
 
	`K
(
KT_FN
,127)

	)

175 
	#K_F119
 
	`K
(
KT_FN
,128)

	)

176 
	#K_F120
 
	`K
(
KT_FN
,129)

	)

177 
	#K_F121
 
	`K
(
KT_FN
,130)

	)

178 
	#K_F122
 
	`K
(
KT_FN
,131)

	)

179 
	#K_F123
 
	`K
(
KT_FN
,132)

	)

180 
	#K_F124
 
	`K
(
KT_FN
,133)

	)

181 
	#K_F125
 
	`K
(
KT_FN
,134)

	)

182 
	#K_F126
 
	`K
(
KT_FN
,135)

	)

183 
	#K_F127
 
	`K
(
KT_FN
,136)

	)

184 
	#K_F128
 
	`K
(
KT_FN
,137)

	)

185 
	#K_F129
 
	`K
(
KT_FN
,138)

	)

186 
	#K_F130
 
	`K
(
KT_FN
,139)

	)

187 
	#K_F131
 
	`K
(
KT_FN
,140)

	)

188 
	#K_F132
 
	`K
(
KT_FN
,141)

	)

189 
	#K_F133
 
	`K
(
KT_FN
,142)

	)

190 
	#K_F134
 
	`K
(
KT_FN
,143)

	)

191 
	#K_F135
 
	`K
(
KT_FN
,144)

	)

192 
	#K_F136
 
	`K
(
KT_FN
,145)

	)

193 
	#K_F137
 
	`K
(
KT_FN
,146)

	)

194 
	#K_F138
 
	`K
(
KT_FN
,147)

	)

195 
	#K_F139
 
	`K
(
KT_FN
,148)

	)

196 
	#K_F140
 
	`K
(
KT_FN
,149)

	)

197 
	#K_F141
 
	`K
(
KT_FN
,150)

	)

198 
	#K_F142
 
	`K
(
KT_FN
,151)

	)

199 
	#K_F143
 
	`K
(
KT_FN
,152)

	)

200 
	#K_F144
 
	`K
(
KT_FN
,153)

	)

201 
	#K_F145
 
	`K
(
KT_FN
,154)

	)

202 
	#K_F146
 
	`K
(
KT_FN
,155)

	)

203 
	#K_F147
 
	`K
(
KT_FN
,156)

	)

204 
	#K_F148
 
	`K
(
KT_FN
,157)

	)

205 
	#K_F149
 
	`K
(
KT_FN
,158)

	)

206 
	#K_F150
 
	`K
(
KT_FN
,159)

	)

207 
	#K_F151
 
	`K
(
KT_FN
,160)

	)

208 
	#K_F152
 
	`K
(
KT_FN
,161)

	)

209 
	#K_F153
 
	`K
(
KT_FN
,162)

	)

210 
	#K_F154
 
	`K
(
KT_FN
,163)

	)

211 
	#K_F155
 
	`K
(
KT_FN
,164)

	)

212 
	#K_F156
 
	`K
(
KT_FN
,165)

	)

213 
	#K_F157
 
	`K
(
KT_FN
,166)

	)

214 
	#K_F158
 
	`K
(
KT_FN
,167)

	)

215 
	#K_F159
 
	`K
(
KT_FN
,168)

	)

216 
	#K_F160
 
	`K
(
KT_FN
,169)

	)

217 
	#K_F161
 
	`K
(
KT_FN
,170)

	)

218 
	#K_F162
 
	`K
(
KT_FN
,171)

	)

219 
	#K_F163
 
	`K
(
KT_FN
,172)

	)

220 
	#K_F164
 
	`K
(
KT_FN
,173)

	)

221 
	#K_F165
 
	`K
(
KT_FN
,174)

	)

222 
	#K_F166
 
	`K
(
KT_FN
,175)

	)

223 
	#K_F167
 
	`K
(
KT_FN
,176)

	)

224 
	#K_F168
 
	`K
(
KT_FN
,177)

	)

225 
	#K_F169
 
	`K
(
KT_FN
,178)

	)

226 
	#K_F170
 
	`K
(
KT_FN
,179)

	)

227 
	#K_F171
 
	`K
(
KT_FN
,180)

	)

228 
	#K_F172
 
	`K
(
KT_FN
,181)

	)

229 
	#K_F173
 
	`K
(
KT_FN
,182)

	)

230 
	#K_F174
 
	`K
(
KT_FN
,183)

	)

231 
	#K_F175
 
	`K
(
KT_FN
,184)

	)

232 
	#K_F176
 
	`K
(
KT_FN
,185)

	)

233 
	#K_F177
 
	`K
(
KT_FN
,186)

	)

234 
	#K_F178
 
	`K
(
KT_FN
,187)

	)

235 
	#K_F179
 
	`K
(
KT_FN
,188)

	)

236 
	#K_F180
 
	`K
(
KT_FN
,189)

	)

237 
	#K_F181
 
	`K
(
KT_FN
,190)

	)

238 
	#K_F182
 
	`K
(
KT_FN
,191)

	)

239 
	#K_F183
 
	`K
(
KT_FN
,192)

	)

240 
	#K_F184
 
	`K
(
KT_FN
,193)

	)

241 
	#K_F185
 
	`K
(
KT_FN
,194)

	)

242 
	#K_F186
 
	`K
(
KT_FN
,195)

	)

243 
	#K_F187
 
	`K
(
KT_FN
,196)

	)

244 
	#K_F188
 
	`K
(
KT_FN
,197)

	)

245 
	#K_F189
 
	`K
(
KT_FN
,198)

	)

246 
	#K_F190
 
	`K
(
KT_FN
,199)

	)

247 
	#K_F191
 
	`K
(
KT_FN
,200)

	)

248 
	#K_F192
 
	`K
(
KT_FN
,201)

	)

249 
	#K_F193
 
	`K
(
KT_FN
,202)

	)

250 
	#K_F194
 
	`K
(
KT_FN
,203)

	)

251 
	#K_F195
 
	`K
(
KT_FN
,204)

	)

252 
	#K_F196
 
	`K
(
KT_FN
,205)

	)

253 
	#K_F197
 
	`K
(
KT_FN
,206)

	)

254 
	#K_F198
 
	`K
(
KT_FN
,207)

	)

255 
	#K_F199
 
	`K
(
KT_FN
,208)

	)

256 
	#K_F200
 
	`K
(
KT_FN
,209)

	)

257 
	#K_F201
 
	`K
(
KT_FN
,210)

	)

258 
	#K_F202
 
	`K
(
KT_FN
,211)

	)

259 
	#K_F203
 
	`K
(
KT_FN
,212)

	)

260 
	#K_F204
 
	`K
(
KT_FN
,213)

	)

261 
	#K_F205
 
	`K
(
KT_FN
,214)

	)

262 
	#K_F206
 
	`K
(
KT_FN
,215)

	)

263 
	#K_F207
 
	`K
(
KT_FN
,216)

	)

264 
	#K_F208
 
	`K
(
KT_FN
,217)

	)

265 
	#K_F209
 
	`K
(
KT_FN
,218)

	)

266 
	#K_F210
 
	`K
(
KT_FN
,219)

	)

267 
	#K_F211
 
	`K
(
KT_FN
,220)

	)

268 
	#K_F212
 
	`K
(
KT_FN
,221)

	)

269 
	#K_F213
 
	`K
(
KT_FN
,222)

	)

270 
	#K_F214
 
	`K
(
KT_FN
,223)

	)

271 
	#K_F215
 
	`K
(
KT_FN
,224)

	)

272 
	#K_F216
 
	`K
(
KT_FN
,225)

	)

273 
	#K_F217
 
	`K
(
KT_FN
,226)

	)

274 
	#K_F218
 
	`K
(
KT_FN
,227)

	)

275 
	#K_F219
 
	`K
(
KT_FN
,228)

	)

276 
	#K_F220
 
	`K
(
KT_FN
,229)

	)

277 
	#K_F221
 
	`K
(
KT_FN
,230)

	)

278 
	#K_F222
 
	`K
(
KT_FN
,231)

	)

279 
	#K_F223
 
	`K
(
KT_FN
,232)

	)

280 
	#K_F224
 
	`K
(
KT_FN
,233)

	)

281 
	#K_F225
 
	`K
(
KT_FN
,234)

	)

282 
	#K_F226
 
	`K
(
KT_FN
,235)

	)

283 
	#K_F227
 
	`K
(
KT_FN
,236)

	)

284 
	#K_F228
 
	`K
(
KT_FN
,237)

	)

285 
	#K_F229
 
	`K
(
KT_FN
,238)

	)

286 
	#K_F230
 
	`K
(
KT_FN
,239)

	)

287 
	#K_F231
 
	`K
(
KT_FN
,240)

	)

288 
	#K_F232
 
	`K
(
KT_FN
,241)

	)

289 
	#K_F233
 
	`K
(
KT_FN
,242)

	)

290 
	#K_F234
 
	`K
(
KT_FN
,243)

	)

291 
	#K_F235
 
	`K
(
KT_FN
,244)

	)

292 
	#K_F236
 
	`K
(
KT_FN
,245)

	)

293 
	#K_F237
 
	`K
(
KT_FN
,246)

	)

294 
	#K_F238
 
	`K
(
KT_FN
,247)

	)

295 
	#K_F239
 
	`K
(
KT_FN
,248)

	)

296 
	#K_F240
 
	`K
(
KT_FN
,249)

	)

297 
	#K_F241
 
	`K
(
KT_FN
,250)

	)

298 
	#K_F242
 
	`K
(
KT_FN
,251)

	)

299 
	#K_F243
 
	`K
(
KT_FN
,252)

	)

300 
	#K_F244
 
	`K
(
KT_FN
,253)

	)

301 
	#K_F245
 
	`K
(
KT_FN
,254)

	)

302 
	#K_UNDO
 
	`K
(
KT_FN
,255)

	)

305 
	#K_HOLE
 
	`K
(
KT_SPEC
,0)

	)

306 
	#K_ENTER
 
	`K
(
KT_SPEC
,1)

	)

307 
	#K_SH_REGS
 
	`K
(
KT_SPEC
,2)

	)

308 
	#K_SH_MEM
 
	`K
(
KT_SPEC
,3)

	)

309 
	#K_SH_STAT
 
	`K
(
KT_SPEC
,4)

	)

310 
	#K_BREAK
 
	`K
(
KT_SPEC
,5)

	)

311 
	#K_CONS
 
	`K
(
KT_SPEC
,6)

	)

312 
	#K_CAPS
 
	`K
(
KT_SPEC
,7)

	)

313 
	#K_NUM
 
	`K
(
KT_SPEC
,8)

	)

314 
	#K_HOLD
 
	`K
(
KT_SPEC
,9)

	)

315 
	#K_SCROLLFORW
 
	`K
(
KT_SPEC
,10)

	)

316 
	#K_SCROLLBACK
 
	`K
(
KT_SPEC
,11)

	)

317 
	#K_BOOT
 
	`K
(
KT_SPEC
,12)

	)

318 
	#K_CAPSON
 
	`K
(
KT_SPEC
,13)

	)

319 
	#K_COMPOSE
 
	`K
(
KT_SPEC
,14)

	)

320 
	#K_SAK
 
	`K
(
KT_SPEC
,15)

	)

321 
	#K_DECRCONSOLE
 
	`K
(
KT_SPEC
,16)

	)

322 
	#K_INCRCONSOLE
 
	`K
(
KT_SPEC
,17)

	)

323 
	#K_SPAWNCONSOLE
 
	`K
(
KT_SPEC
,18)

	)

324 
	#K_BARENUMLOCK
 
	`K
(
KT_SPEC
,19)

	)

326 
	#K_ALLOCATED
 
	`K
(
KT_SPEC
,126Ë

	)

327 
	#K_NOSUCHMAP
 
	`K
(
KT_SPEC
,127Ë

	)

329 
	#K_P0
 
	`K
(
KT_PAD
,0)

	)

330 
	#K_P1
 
	`K
(
KT_PAD
,1)

	)

331 
	#K_P2
 
	`K
(
KT_PAD
,2)

	)

332 
	#K_P3
 
	`K
(
KT_PAD
,3)

	)

333 
	#K_P4
 
	`K
(
KT_PAD
,4)

	)

334 
	#K_P5
 
	`K
(
KT_PAD
,5)

	)

335 
	#K_P6
 
	`K
(
KT_PAD
,6)

	)

336 
	#K_P7
 
	`K
(
KT_PAD
,7)

	)

337 
	#K_P8
 
	`K
(
KT_PAD
,8)

	)

338 
	#K_P9
 
	`K
(
KT_PAD
,9)

	)

339 
	#K_PPLUS
 
	`K
(
KT_PAD
,10Ë

	)

340 
	#K_PMINUS
 
	`K
(
KT_PAD
,11Ë

	)

341 
	#K_PSTAR
 
	`K
(
KT_PAD
,12Ë

	)

342 
	#K_PSLASH
 
	`K
(
KT_PAD
,13Ë

	)

343 
	#K_PENTER
 
	`K
(
KT_PAD
,14Ë

	)

344 
	#K_PCOMMA
 
	`K
(
KT_PAD
,15Ë

	)

345 
	#K_PDOT
 
	`K
(
KT_PAD
,16Ë

	)

346 
	#K_PPLUSMINUS
 
	`K
(
KT_PAD
,17Ë

	)

347 
	#K_PPARENL
 
	`K
(
KT_PAD
,18Ë

	)

348 
	#K_PPARENR
 
	`K
(
KT_PAD
,19Ë

	)

350 
	#NR_PAD
 20

	)

352 
	#K_DGRAVE
 
	`K
(
KT_DEAD
,0)

	)

353 
	#K_DACUTE
 
	`K
(
KT_DEAD
,1)

	)

354 
	#K_DCIRCM
 
	`K
(
KT_DEAD
,2)

	)

355 
	#K_DTILDE
 
	`K
(
KT_DEAD
,3)

	)

356 
	#K_DDIERE
 
	`K
(
KT_DEAD
,4)

	)

357 
	#K_DCEDIL
 
	`K
(
KT_DEAD
,5)

	)

359 
	#NR_DEAD
 6

	)

361 
	#K_DOWN
 
	`K
(
KT_CUR
,0)

	)

362 
	#K_LEFT
 
	`K
(
KT_CUR
,1)

	)

363 
	#K_RIGHT
 
	`K
(
KT_CUR
,2)

	)

364 
	#K_UP
 
	`K
(
KT_CUR
,3)

	)

366 
	#K_SHIFT
 
	`K
(
KT_SHIFT
,
KG_SHIFT
)

	)

367 
	#K_CTRL
 
	`K
(
KT_SHIFT
,
KG_CTRL
)

	)

368 
	#K_ALT
 
	`K
(
KT_SHIFT
,
KG_ALT
)

	)

369 
	#K_ALTGR
 
	`K
(
KT_SHIFT
,
KG_ALTGR
)

	)

370 
	#K_SHIFTL
 
	`K
(
KT_SHIFT
,
KG_SHIFTL
)

	)

371 
	#K_SHIFTR
 
	`K
(
KT_SHIFT
,
KG_SHIFTR
)

	)

372 
	#K_CTRLL
 
	`K
(
KT_SHIFT
,
KG_CTRLL
)

	)

373 
	#K_CTRLR
 
	`K
(
KT_SHIFT
,
KG_CTRLR
)

	)

374 
	#K_CAPSSHIFT
 
	`K
(
KT_SHIFT
,
KG_CAPSSHIFT
)

	)

376 
	#K_ASC0
 
	`K
(
KT_ASCII
,0)

	)

377 
	#K_ASC1
 
	`K
(
KT_ASCII
,1)

	)

378 
	#K_ASC2
 
	`K
(
KT_ASCII
,2)

	)

379 
	#K_ASC3
 
	`K
(
KT_ASCII
,3)

	)

380 
	#K_ASC4
 
	`K
(
KT_ASCII
,4)

	)

381 
	#K_ASC5
 
	`K
(
KT_ASCII
,5)

	)

382 
	#K_ASC6
 
	`K
(
KT_ASCII
,6)

	)

383 
	#K_ASC7
 
	`K
(
KT_ASCII
,7)

	)

384 
	#K_ASC8
 
	`K
(
KT_ASCII
,8)

	)

385 
	#K_ASC9
 
	`K
(
KT_ASCII
,9)

	)

386 
	#K_HEX0
 
	`K
(
KT_ASCII
,10)

	)

387 
	#K_HEX1
 
	`K
(
KT_ASCII
,11)

	)

388 
	#K_HEX2
 
	`K
(
KT_ASCII
,12)

	)

389 
	#K_HEX3
 
	`K
(
KT_ASCII
,13)

	)

390 
	#K_HEX4
 
	`K
(
KT_ASCII
,14)

	)

391 
	#K_HEX5
 
	`K
(
KT_ASCII
,15)

	)

392 
	#K_HEX6
 
	`K
(
KT_ASCII
,16)

	)

393 
	#K_HEX7
 
	`K
(
KT_ASCII
,17)

	)

394 
	#K_HEX8
 
	`K
(
KT_ASCII
,18)

	)

395 
	#K_HEX9
 
	`K
(
KT_ASCII
,19)

	)

396 
	#K_HEXa
 
	`K
(
KT_ASCII
,20)

	)

397 
	#K_HEXb
 
	`K
(
KT_ASCII
,21)

	)

398 
	#K_HEXc
 
	`K
(
KT_ASCII
,22)

	)

399 
	#K_HEXd
 
	`K
(
KT_ASCII
,23)

	)

400 
	#K_HEXe
 
	`K
(
KT_ASCII
,24)

	)

401 
	#K_HEXf
 
	`K
(
KT_ASCII
,25)

	)

403 
	#NR_ASCII
 26

	)

405 
	#K_SHIFTLOCK
 
	`K
(
KT_LOCK
,
KG_SHIFT
)

	)

406 
	#K_CTRLLOCK
 
	`K
(
KT_LOCK
,
KG_CTRL
)

	)

407 
	#K_ALTLOCK
 
	`K
(
KT_LOCK
,
KG_ALT
)

	)

408 
	#K_ALTGRLOCK
 
	`K
(
KT_LOCK
,
KG_ALTGR
)

	)

409 
	#K_SHIFTLLOCK
 
	`K
(
KT_LOCK
,
KG_SHIFTL
)

	)

410 
	#K_SHIFTRLOCK
 
	`K
(
KT_LOCK
,
KG_SHIFTR
)

	)

411 
	#K_CTRLLLOCK
 
	`K
(
KT_LOCK
,
KG_CTRLL
)

	)

412 
	#K_CTRLRLOCK
 
	`K
(
KT_LOCK
,
KG_CTRLR
)

	)

414 
	#K_SHIFT_SLOCK
 
	`K
(
KT_SLOCK
,
KG_SHIFT
)

	)

415 
	#K_CTRL_SLOCK
 
	`K
(
KT_SLOCK
,
KG_CTRL
)

	)

416 
	#K_ALT_SLOCK
 
	`K
(
KT_SLOCK
,
KG_ALT
)

	)

417 
	#K_ALTGR_SLOCK
 
	`K
(
KT_SLOCK
,
KG_ALTGR
)

	)

418 
	#K_SHIFTL_SLOCK
 
	`K
(
KT_SLOCK
,
KG_SHIFTL
)

	)

419 
	#K_SHIFTR_SLOCK
 
	`K
(
KT_SLOCK
,
KG_SHIFTR
)

	)

420 
	#K_CTRLL_SLOCK
 
	`K
(
KT_SLOCK
,
KG_CTRLL
)

	)

421 
	#K_CTRLR_SLOCK
 
	`K
(
KT_SLOCK
,
KG_CTRLR
)

	)

423 
	#NR_LOCK
 8

	)

425 
	#K_BRL_BLANK
 
	`K
(
KT_BRL
, 0)

	)

426 
	#K_BRL_DOT1
 
	`K
(
KT_BRL
, 1)

	)

427 
	#K_BRL_DOT2
 
	`K
(
KT_BRL
, 2)

	)

428 
	#K_BRL_DOT3
 
	`K
(
KT_BRL
, 3)

	)

429 
	#K_BRL_DOT4
 
	`K
(
KT_BRL
, 4)

	)

430 
	#K_BRL_DOT5
 
	`K
(
KT_BRL
, 5)

	)

431 
	#K_BRL_DOT6
 
	`K
(
KT_BRL
, 6)

	)

432 
	#K_BRL_DOT7
 
	`K
(
KT_BRL
, 7)

	)

433 
	#K_BRL_DOT8
 
	`K
(
KT_BRL
, 8)

	)

435 
	#NR_BRL
 9

	)

437 
	#MAX_DIACR
 256

	)

	@/usr/include/linux/vt.h

1 #i‚de‡
_LINUX_VT_H


2 
	#_LINUX_VT_H


	)

8 
	#MIN_NR_CONSOLES
 1

	)

9 
	#MAX_NR_CONSOLES
 63

	)

10 
	#MAX_NR_USER_CONSOLES
 63

	)

16 
	#VT_OPENQRY
 0x5600

	)

18 
	svt_mode
 {

19 
	mmode
;

20 
	mwaôv
;

21 
	mªlsig
;

22 
	macqsig
;

23 
	m‰sig
;

25 
	#VT_GETMODE
 0x5601

	)

26 
	#VT_SETMODE
 0x5602

	)

27 
	#VT_AUTO
 0x00

	)

28 
	#VT_PROCESS
 0x01

	)

29 
	#VT_ACKACQ
 0x02

	)

31 
	svt_°©
 {

32 
	mv_a˘ive
;

33 
	mv_sig«l
;

34 
	mv_°©e
;

36 
	#VT_GETSTATE
 0x5603

	)

37 
	#VT_SENDSIG
 0x5604

	)

39 
	#VT_RELDISP
 0x5605

	)

41 
	#VT_ACTIVATE
 0x5606

	)

42 
	#VT_WAITACTIVE
 0x5607

	)

43 
	#VT_DISALLOCATE
 0x5608

	)

45 
	svt_sizes
 {

46 
	mv_rows
;

47 
	mv_cﬁs
;

48 
	mv_s¸ﬁlsize
;

50 
	#VT_RESIZE
 0x5609

	)

52 
	svt_c⁄size
 {

53 
	mv_rows
;

54 
	mv_cﬁs
;

55 
	mv_vlö
;

56 
	mv_˛ö
;

57 
	mv_vcﬁ
;

58 
	mv_ccﬁ
;

60 
	#VT_RESIZEX
 0x560A

	)

61 
	#VT_LOCKSWITCH
 0x560B

	)

62 
	#VT_UNLOCKSWITCH
 0x560C

	)

63 
	#VT_GETHIFONTMASK
 0x560D

	)

	@/usr/include/locale.h

23 #i‚def 
_LOCALE_H


24 
	#_LOCALE_H
 1

	)

26 
	~<„©uªs.h
>

28 
	#__√ed_NULL


	)

29 
	~<°ddef.h
>

30 
	~<bôs/loˇÀ.h
>

32 
	g__BEGIN_DECLS


36 
	#LC_CTYPE
 
__LC_CTYPE


	)

37 
	#LC_NUMERIC
 
__LC_NUMERIC


	)

38 
	#LC_TIME
 
__LC_TIME


	)

39 
	#LC_COLLATE
 
__LC_COLLATE


	)

40 
	#LC_MONETARY
 
__LC_MONETARY


	)

41 
	#LC_MESSAGES
 
__LC_MESSAGES


	)

42 
	#LC_ALL
 
__LC_ALL


	)

43 
	#LC_PAPER
 
__LC_PAPER


	)

44 
	#LC_NAME
 
__LC_NAME


	)

45 
	#LC_ADDRESS
 
__LC_ADDRESS


	)

46 
	#LC_TELEPHONE
 
__LC_TELEPHONE


	)

47 
	#LC_MEASUREMENT
 
__LC_MEASUREMENT


	)

48 
	#LC_IDENTIFICATION
 
__LC_IDENTIFICATION


	)

51 
__BEGIN_NAMESPACE_STD


54 
	slc⁄v


58 *
	mdecimÆ_poöt
;

59 *
	mthoußnds_£p
;

65 *
	mgroupög
;

71 *
	möt_cuº_symbﬁ
;

72 *
	mcuºícy_symbﬁ
;

73 *
	mm⁄_decimÆ_poöt
;

74 *
	mm⁄_thoußnds_£p
;

75 *
	mm⁄_groupög
;

76 *
	mposôive_sign
;

77 *
	m√g©ive_sign
;

78 
	möt_‰ac_digôs
;

79 
	m‰ac_digôs
;

81 
	mp_cs_¥e˚des
;

83 
	mp_£p_by_•a˚
;

85 
	mn_cs_¥e˚des
;

87 
	mn_£p_by_•a˚
;

94 
	mp_sign_po¢
;

95 
	mn_sign_po¢
;

96 #ifde‡
__USE_ISOC99


98 
	möt_p_cs_¥e˚des
;

100 
	möt_p_£p_by_•a˚
;

102 
	möt_n_cs_¥e˚des
;

104 
	möt_n_£p_by_•a˚
;

111 
	möt_p_sign_po¢
;

112 
	möt_n_sign_po¢
;

114 
	m__öt_p_cs_¥e˚des
;

115 
	m__öt_p_£p_by_•a˚
;

116 
	m__öt_n_cs_¥e˚des
;

117 
	m__öt_n_£p_by_•a˚
;

118 
	m__öt_p_sign_po¢
;

119 
	m__öt_n_sign_po¢
;

125 *
	$£éoˇÀ
 (
__ˇãg‹y
, 
__c⁄°
 *
__loˇÀ
Ë
__THROW
;

128 
lc⁄v
 *
	$loˇÀc⁄v
 (Ë
__THROW
;

130 
__END_NAMESPACE_STD


133 #ifdef 
__USE_GNU


146 
	~<xloˇÀ.h
>

148 
__loˇÀ_t
 
	tloˇÀ_t
;

154 
__loˇÀ_t
 
	$√wloˇÀ
 (
__ˇãg‹y_mask
, 
__c⁄°
 *
__loˇÀ
,

155 
__loˇÀ_t
 
__ba£
Ë
__THROW
;

161 
	#LC_CTYPE_MASK
 (1 << 
__LC_CTYPE
)

	)

162 
	#LC_NUMERIC_MASK
 (1 << 
__LC_NUMERIC
)

	)

163 
	#LC_TIME_MASK
 (1 << 
__LC_TIME
)

	)

164 
	#LC_COLLATE_MASK
 (1 << 
__LC_COLLATE
)

	)

165 
	#LC_MONETARY_MASK
 (1 << 
__LC_MONETARY
)

	)

166 
	#LC_MESSAGES_MASK
 (1 << 
__LC_MESSAGES
)

	)

167 
	#LC_PAPER_MASK
 (1 << 
__LC_PAPER
)

	)

168 
	#LC_NAME_MASK
 (1 << 
__LC_NAME
)

	)

169 
	#LC_ADDRESS_MASK
 (1 << 
__LC_ADDRESS
)

	)

170 
	#LC_TELEPHONE_MASK
 (1 << 
__LC_TELEPHONE
)

	)

171 
	#LC_MEASUREMENT_MASK
 (1 << 
__LC_MEASUREMENT
)

	)

172 
	#LC_IDENTIFICATION_MASK
 (1 << 
__LC_IDENTIFICATION
)

	)

173 
	#LC_ALL_MASK
 (
LC_CTYPE_MASK
 \

174 | 
LC_NUMERIC_MASK
 \

175 | 
LC_TIME_MASK
 \

176 | 
LC_COLLATE_MASK
 \

177 | 
LC_MONETARY_MASK
 \

178 | 
LC_MESSAGES_MASK
 \

179 | 
LC_PAPER_MASK
 \

180 | 
LC_NAME_MASK
 \

181 | 
LC_ADDRESS_MASK
 \

182 | 
LC_TELEPHONE_MASK
 \

183 | 
LC_MEASUREMENT_MASK
 \

184 | 
LC_IDENTIFICATION_MASK
 \

185 )

	)

189 
__loˇÀ_t
 
	$du∂oˇÀ
 (
__loˇÀ_t
 
__d©a£t
Ë
__THROW
;

193 
	$‰ìloˇÀ
 (
__loˇÀ_t
 
__d©a£t
Ë
__THROW
;

200 
__loˇÀ_t
 
	$u£loˇÀ
 (
__loˇÀ_t
 
__d©a£t
Ë
__THROW
;

204 
	#LC_GLOBAL_LOCALE
 ((
__loˇÀ_t
Ë-1L)

	)

208 
__END_DECLS


	@/usr/include/malloc.h

20 #i‚de‡
_MALLOC_H


21 
	#_MALLOC_H
 1

	)

23 
	~<„©uªs.h
>

24 
	~<°ddef.h
>

25 
	#__mÆloc_±r_t
 *

	)

28 
	#__mÆloc_size_t
 
size_t


	)

29 
	#__mÆloc_±rdiff_t
 
±rdiff_t


	)

31 #ifde‡
__GNUC__


33 
	#__MALLOC_P
(
¨gs
Ë¨g†
__THROW


	)

36 
	#__MALLOC_PMT
(
¨gs
Ë
	)
¨gs

40 
	#__MALLOC_P
(
¨gs
Ë
	)
¨gs

41 
	#__MALLOC_PMT
(
¨gs
Ë
	)
¨gs

46 
__BEGIN_DECLS


49 *
mÆloc
 
__MALLOC_P
 ((
size_t
 
__size
)Ë
__©åibuã_mÆloc__
 
__wur
;

52 *
ˇŒoc
 
__MALLOC_P
 ((
size_t
 
__nmemb
, size_à
__size
))

53 
__©åibuã_mÆloc__
 
__wur
;

57 *
ªÆloc
 
__MALLOC_P
 ((*
__±r
, 
size_t
 
__size
))

58 
__©åibuã_mÆloc__
 
__©åibuã_w¨n_unu£d_ªsu…__
;

61 
‰ì
 
__MALLOC_P
 ((*
__±r
));

64 
c‰ì
 
__MALLOC_P
 ((*
__±r
));

67 *
memÆign
 
__MALLOC_P
 ((
size_t
 
__Æignmít
, size_à
__size
))

68 
__©åibuã_mÆloc__
 
__wur
;

71 *
vÆloc
 
__MALLOC_P
 ((
size_t
 
__size
))

72 
__©åibuã_mÆloc__
 
__wur
;

76 * 
pvÆloc
 
__MALLOC_P
 ((
size_t
 
__size
))

77 
__©åibuã_mÆloc__
 
__wur
;

81 *(*
__m‹ec‹e
Ë
__MALLOC_PMT
 ((
±rdiff_t
 
__size
));

84 *
__deÁu…_m‹ec‹e
 
__MALLOC_P
 ((
±rdiff_t
 
__size
))

85 
__©åibuã_mÆloc__
;

89 
	smÆlöfo
 {

90 
	m¨ía
;

91 
	m‹dblks
;

92 
	msmblks
;

93 
	mhblks
;

94 
	mhblkhd
;

95 
	musmblks
;

96 
	mfsmblks
;

97 
	mu‹dblks
;

98 
	mf‹dblks
;

99 
	mkìpco°
;

103 
mÆlöfo
 mÆlöfÿ
__MALLOC_P
 (());

106 #i‚de‡
M_MXFAST


107 
	#M_MXFAST
 1

	)

109 #i‚de‡
M_NLBLKS


110 
	#M_NLBLKS
 2

	)

112 #i‚de‡
M_GRAIN


113 
	#M_GRAIN
 3

	)

115 #i‚de‡
M_KEEP


116 
	#M_KEEP
 4

	)

120 
	#M_TRIM_THRESHOLD
 -1

	)

121 
	#M_TOP_PAD
 -2

	)

122 
	#M_MMAP_THRESHOLD
 -3

	)

123 
	#M_MMAP_MAX
 -4

	)

124 
	#M_CHECK_ACTION
 -5

	)

125 
	#M_PERTURB
 -6

	)

128 
mÆl›t
 
__MALLOC_P
 ((
__∑øm
, 
__vÆ
));

132 
mÆloc_åim
 
__MALLOC_P
 ((
size_t
 
__∑d
));

136 
size_t
 
mÆloc_ußbÀ_size
 
__MALLOC_P
 ((*
__±r
));

139 
mÆloc_°©s
 
__MALLOC_P
 (());

142 *
mÆloc_gë_°©e
 
__MALLOC_P
 (());

146 
mÆloc_£t_°©e
 
__MALLOC_P
 ((*
__±r
));

151 (*
__mÆloc_öôülize_hook
Ë
	`__MALLOC_PMT
 (());

153 (*
__‰ì_hook
Ë
	`__MALLOC_PMT
 ((*
__±r
,

154 
__c⁄°
 
__mÆloc_±r_t
));

155 *(*
__mÆloc_hook
Ë
	`__MALLOC_PMT
 ((
size_t
 
__size
,

156 
__c⁄°
 
__mÆloc_±r_t
));

157 *(*
__ªÆloc_hook
Ë
	`__MALLOC_PMT
 ((*
__±r
, 
size_t
 
__size
,

158 
__c⁄°
 
__mÆloc_±r_t
));

159 *(*
__memÆign_hook
Ë
	`__MALLOC_PMT
 ((
size_t
 
__Æignmít
,

160 
size_t
 
__size
,

161 
__c⁄°
 
__mÆloc_±r_t
));

162 (*
__a·î_m‹ec‹e_hook
Ë
	`__MALLOC_PMT
 (());

165 
__mÆloc_check_öô
 
	`__MALLOC_P
 (());

168 
__END_DECLS


	@/usr/include/math.h

25 #i‚def 
_MATH_H


26 
	#_MATH_H
 1

	)

28 
	~<„©uªs.h
>

30 
	g__BEGIN_DECLS


34 
	~<bôs/huge_vÆ.h
>

35 #ifde‡
__USE_ISOC99


36 
	~<bôs/huge_vÆf.h
>

37 
	~<bôs/huge_vÆl.h
>

40 
	~<bôs/öf.h
>

43 
	~<bôs/«n.h
>

47 
	~<bôs/m©hdef.h
>

54 
	#__MATHCALL
(
fun˘i⁄
,
suffix
, 
¨gs
) \

55 
	`__MATHDECL
 (
_MdoubÀ_
,
fun˘i⁄
,
suffix
, 
¨gs
)

	)

56 
	#__MATHDECL
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
) \

57 
	`__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
); \

58 
	`__MATHDECL_1
(
ty≥
, 
	`__CONCAT
(
__
,
fun˘i⁄
),
suffix
, 
¨gs
)

	)

59 
	#__MATHCALLX
(
fun˘i⁄
,
suffix
, 
¨gs
, 
©åib
) \

60 
	`__MATHDECLX
 (
_MdoubÀ_
,
fun˘i⁄
,
suffix
, 
¨gs
, 
©åib
)

	)

61 
	#__MATHDECLX
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
, 
©åib
) \

62 
	`__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
Ë
	`__©åibuã__
 (
©åib
); \

63 
	`__MATHDECL_1
(
ty≥
, 
	`__CONCAT
(
__
,
fun˘i⁄
),
suffix
, 
¨gs
Ë
	`__©åibuã__
 (
©åib
)

	)

64 
	#__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
) \

65 
ty≥
 
	`__MATH_PRECNAME
(
fun˘i⁄
,
suffix
Ë
¨gs
 
__THROW


	)

67 
	#_MdoubÀ_
 

	)

68 
	#__MATH_PRECNAME
(
«me
,
r
Ë
	`__CONCAT
“ame,r)

	)

69 
	#_MdoubÀ_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_STD


	)

70 
	#_MdoubÀ_END_NAMESPACE
 
__END_NAMESPACE_STD


	)

71 
	~<bôs/m©hˇŒs.h
>

72 #unde‡
_MdoubÀ_


73 #unde‡
_MdoubÀ_BEGIN_NAMESPACE


74 #unde‡
_MdoubÀ_END_NAMESPACE


75 #unde‡
__MATH_PRECNAME


77 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


83 #i‚de‡
_MÊﬂt_


84 
	#_MÊﬂt_
 

	)

86 
	#_MdoubÀ_
 
_MÊﬂt_


	)

87 #ifde‡
__STDC__


88 
	#__MATH_PRECNAME
(
«me
,
r
Ë«me##
f
##
	)
r

90 
	#__MATH_PRECNAME
(
«me
,
r
Ë«mê
f
 
	)
r

92 
	#_MdoubÀ_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

93 
	#_MdoubÀ_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

94 
	~<bôs/m©hˇŒs.h
>

95 #unde‡
_MdoubÀ_


96 #unde‡
_MdoubÀ_BEGIN_NAMESPACE


97 #unde‡
_MdoubÀ_END_NAMESPACE


98 #unde‡
__MATH_PRECNAME


100 #i‡(
__STDC__
 - 0 || 
__GNUC__
 - 0) \

101 && (!
deföed
 
__NO_LONG_DOUBLE_MATH
 || deföed 
__LDBL_COMPAT
)

102 #ifde‡
__LDBL_COMPAT


104 #ifde‡
__USE_ISOC99


105 
	$__∆dbl_√xâow¨df
 (
__x
, 
__y
)

106 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

107 #ifde‡
__REDIRECT_NTH


108 
	`__REDIRECT_NTH
 (
√xâow¨df
, (
__x
, 
__y
),

109 
__∆dbl_√xâow¨df
)

110 
	`__©åibuã__
 ((
__c⁄°__
));

111 
	`__REDIRECT_NTH
 (
√xâow¨d
, (
__x
, 
__y
),

112 
√xè·î
Ë
	`__©åibuã__
 ((
__c⁄°__
));

113 
	`__REDIRECT_NTH
 (
√xâow¨dl
,

114 (
__x
, 
__y
),

115 
√xè·î
Ë
	`__©åibuã__
 ((
__c⁄°__
));

122 #unde‡
__MATHDECL_1


123 
	#__MATHDECL_2
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
, 
Æüs
) \

124 
ty≥
 
	`__REDIRECT_NTH
(
	`__MATH_PRECNAME
(
fun˘i⁄
,
suffix
), \

125 
¨gs
, 
Æüs
)

	)

126 
	#__MATHDECL_1
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
) \

127 
	`__MATHDECL_2
(
ty≥
, 
fun˘i⁄
,
suffix
, 
¨gs
, 
	`__CONCAT
(fun˘i⁄,suffix))

	)

130 #i‚de‡
_Ml⁄g_doubÀ_


131 
	#_Ml⁄g_doubÀ_
 

	)

133 
	#_MdoubÀ_
 
_Ml⁄g_doubÀ_


	)

134 #ifde‡
__STDC__


135 
	#__MATH_PRECNAME
(
«me
,
r
Ë«me##
l
##
	)
r

137 
	#__MATH_PRECNAME
(
«me
,
r
Ë«mê
l
 
	)
r

139 
	#_MdoubÀ_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

140 
	#_MdoubÀ_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

141 
	~<bôs/m©hˇŒs.h
>

142 #unde‡
_MdoubÀ_


143 #unde‡
_MdoubÀ_BEGIN_NAMESPACE


144 #unde‡
_MdoubÀ_END_NAMESPACE


145 #unde‡
__MATH_PRECNAME


150 #unde‡
__MATHDECL_1


151 #unde‡
__MATHDECL


152 #unde‡
__MATHCALL


155 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


157 
signgam
;

162 #ifde‡
__USE_ISOC99


200 
FP_NAN
,

201 
	#FP_NAN
 
FP_NAN


	)

202 
FP_INFINITE
,

203 
	#FP_INFINITE
 
FP_INFINITE


	)

204 
FP_ZERO
,

205 
	#FP_ZERO
 
FP_ZERO


	)

206 
FP_SUBNORMAL
,

207 
	#FP_SUBNORMAL
 
FP_SUBNORMAL


	)

208 
FP_NORMAL


209 
	#FP_NORMAL
 
FP_NORMAL


	)

213 #ifde‡
__NO_LONG_DOUBLE_MATH


214 
	#Â˛assify
(
x
) \

215 ( (
x
Ë= (Ë? 
	`__Â˛assifyf
 (xË: 
	`__Â˛assify
 (x))

	)

217 
	#Â˛assify
(
x
) \

218 ( (
x
) ==  () \

219 ? 
	`__Â˛assifyf
 (
x
) \

220 :  (
x
) ==  () \

221 ? 
	`__Â˛assify
 (
x
Ë: 
	`__Â˛assifyl
 (x))

	)

225 #ifde‡
__NO_LONG_DOUBLE_MATH


226 
	#signbô
(
x
) \

227 ( (
x
Ë= (Ë? 
	`__signbôf
 (xË: 
	`__signbô
 (x))

	)

229 
	#signbô
(
x
) \

230 ( (
x
) ==  () \

231 ? 
	`__signbôf
 (
x
) \

232 :  (
x
) ==  () \

233 ? 
	`__signbô
 (
x
Ë: 
	`__signbôl
 (x))

	)

237 #ifde‡
__NO_LONG_DOUBLE_MATH


238 
	#isföôe
(
x
) \

239 ( (
x
Ë= (Ë? 
	`__föôef
 (xË: 
	`__föôe
 (x))

	)

241 
	#isföôe
(
x
) \

242 ( (
x
) ==  () \

243 ? 
	`__föôef
 (
x
) \

244 :  (
x
) ==  () \

245 ? 
	`__föôe
 (
x
Ë: 
	`__föôñ
 (x))

	)

249 
	#i¢‹mÆ
(
x
Ë(
	`Â˛assify
 (xË=
FP_NORMAL
)

	)

253 #ifde‡
__NO_LONG_DOUBLE_MATH


254 
	#i¢™
(
x
) \

255 ( (
x
Ë= (Ë? 
	`__i¢™f
 (xË: 
	`__i¢™
 (x))

	)

257 
	#i¢™
(
x
) \

258 ( (
x
) ==  () \

259 ? 
	`__i¢™f
 (
x
) \

260 :  (
x
) ==  () \

261 ? 
	`__i¢™
 (
x
Ë: 
	`__i¢™l
 (x))

	)

265 #ifde‡
__NO_LONG_DOUBLE_MATH


266 
	#isöf
(
x
) \

267 ( (
x
Ë= (Ë? 
	`__isöff
 (xË: 
	`__isöf
 (x))

	)

269 
	#isöf
(
x
) \

270 ( (
x
) ==  () \

271 ? 
	`__isöff
 (
x
) \

272 :  (
x
) ==  () \

273 ? 
	`__isöf
 (
x
Ë: 
	`__isöÊ
 (x))

	)

277 
	#MATH_ERRNO
 1

	)

278 
	#MATH_ERREXCEPT
 2

	)

282 #ifdef 
__USE_MISC


286 
_IEEE_
 = -1,

287 
_SVID_
,

288 
_XOPEN_
,

289 
_POSIX_
,

290 
_ISOC_


291 } 
	t_LIB_VERSION_TYPE
;

296 
_LIB_VERSION_TYPE
 
_LIB_VERSION
;

300 #ifde‡
__USE_SVID


306 #ifde‡
__˝lu•lus


307 
__ex˚±i⁄


309 
ex˚±i⁄


312 
ty≥
;

313 *
«me
;

314 
¨g1
;

315 
¨g2
;

316 
ªtvÆ
;

317 
	}
};

319 #ifde‡
__˝lu•lus


320 
	$m©hîr
 (
__ex˚±i⁄
 *
__exc
Ë
	`throw
 ();

322 
	`m©hîr
 (
ex˚±i⁄
 *
__exc
);

325 
	#X_TLOSS
 1.41484755040568800000e+16

	)

328 
	#DOMAIN
 1

	)

329 
	#SING
 2

	)

330 
	#OVERFLOW
 3

	)

331 
	#UNDERFLOW
 4

	)

332 
	#TLOSS
 5

	)

333 
	#PLOSS
 6

	)

336 
	#HUGE
 3.40282347e+38F

	)

340 #ifde‡
__USE_XOPEN


342 
	#MAXFLOAT
 3.40282347e+38F

	)

349 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN


350 
	#M_E
 2.7182818284590452354

	)

351 
	#M_LOG2E
 1.4426950408889634074

	)

352 
	#M_LOG10E
 0.43429448190325182765

	)

353 
	#M_LN2
 0.69314718055994530942

	)

354 
	#M_LN10
 2.30258509299404568402

	)

355 
	#M_PI
 3.14159265358979323846

	)

356 
	#M_PI_2
 1.57079632679489661923

	)

357 
	#M_PI_4
 0.78539816339744830962

	)

358 
	#M_1_PI
 0.31830988618379067154

	)

359 
	#M_2_PI
 0.63661977236758134308

	)

360 
	#M_2_SQRTPI
 1.12837916709551257390

	)

361 
	#M_SQRT2
 1.41421356237309504880

	)

362 
	#M_SQRT1_2
 0.70710678118654752440

	)

368 #ifde‡
__USE_GNU


369 
	#M_El
 2.7182818284590452353602874713526625L

	)

370 
	#M_LOG2El
 1.4426950408889634073599246810018921L

	)

371 
	#M_LOG10El
 0.4342944819032518276511289189166051L

	)

372 
	#M_LN2l
 0.6931471805599453094172321214581766L

	)

373 
	#M_LN10l
 2.3025850929940456840179914546843642L

	)

374 
	#M_PIl
 3.1415926535897932384626433832795029L

	)

375 
	#M_PI_2l
 1.5707963267948966192313216916397514L

	)

376 
	#M_PI_4l
 0.7853981633974483096156608458198757L

	)

377 
	#M_1_PIl
 0.3183098861837906715377675267450287L

	)

378 
	#M_2_PIl
 0.6366197723675813430755350534900574L

	)

379 
	#M_2_SQRTPIl
 1.1283791670955125738961589031215452L

	)

380 
	#M_SQRT2l
 1.4142135623730950488016887242096981L

	)

381 
	#M_SQRT1_2l
 0.7071067811865475244008443621048490L

	)

388 #i‡
deföed
 
__STRICT_ANSI__
 && !deföed 
__NO_MATH_INLINES


389 
	#__NO_MATH_INLINES
 1

	)

392 #i‡
deföed
 
__USE_ISOC99
 && 
	`__GNUC_PREREQ
(2,97)

399 
	#isgª©î
(
x
, 
y
Ë
	`__buûtö_isgª©î
(x, y)

	)

400 
	#isgª©îequÆ
(
x
, 
y
Ë
	`__buûtö_isgª©îequÆ
(x, y)

	)

401 
	#i¶ess
(
x
, 
y
Ë
	`__buûtö_i¶ess
(x, y)

	)

402 
	#i¶es£quÆ
(
x
, 
y
Ë
	`__buûtö_i¶es£quÆ
(x, y)

	)

403 
	#i¶essgª©î
(
x
, 
y
Ë
	`__buûtö_i¶essgª©î
(x, y)

	)

404 
	#isun‹dîed
(
u
, 
v
Ë
	`__buûtö_isun‹dîed
(u, v)

	)

408 #ifde‡
__USE_EXTERN_INLINES


409 
	~<bôs/m©hölöe.h
>

412 #ifde‡
__USE_ISOC99


416 #i‚de‡
isgª©î


417 
	#isgª©î
(
x
, 
y
) \

418 (
__exãnsi⁄__
 \

419 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

420 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x > __y; 
	}
}))

	)

424 #i‚de‡
isgª©îequÆ


425 
	#isgª©îequÆ
(
x
, 
y
) \

426 (
__exãnsi⁄__
 \

427 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

428 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x >__y; }))

	)

432 #i‚de‡
i¶ess


433 
	#i¶ess
(
x
, 
y
) \

434 (
__exãnsi⁄__
 \

435 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

436 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x < __y; }))

	)

440 #i‚de‡
i¶es£quÆ


441 
	#i¶es£quÆ
(
x
, 
y
) \

442 (
__exãnsi⁄__
 \

443 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

444 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& __x <__y; }))

	)

448 #i‚de‡
i¶essgª©î


449 
	#i¶essgª©î
(
x
, 
y
) \

450 (
__exãnsi⁄__
 \

451 ({ 
	`__ty≥of__
(
x
Ë
__x
 = (x); __ty≥of__(
y
Ë
__y
 = (y); \

452 !
	`isun‹dîed
 (
__x
, 
__y
Ë&& (__x < __y || __y < __x); }))

	)

456 #i‚de‡
isun‹dîed


457 
	#isun‹dîed
(
u
, 
v
) \

458 (
__exãnsi⁄__
 \

459 ({ 
	`__ty≥of__
(
u
Ë
__u
 = (u); __ty≥of__(
v
Ë
__v
 = (v); \

460 
	`Â˛assify
 (
__u
Ë=
FP_NAN
 || fp˛assify (
__v
Ë=FP_NAN; }))

	)

465 
	g__END_DECLS


	@/usr/include/microwin/nano-X.h

1 #i‚def 
_NANO_X_H


2 
	#_NANO_X_H


	)

13 #ifde‡
__˝lu•lus


17 
	~"mwty≥s.h
"

20 #ifde‡
PSP


21 
	#Ârötf
(...Ëdÿ{} 0)

	)

22 
	#£tbuf
(...Ëdÿ{} 0)

	)

23 
	#exô
(...Ë
	`s˚Kî√lExôGame
()

	)

30 
MWCOORD
 
	tGR_COORD
;

31 
MWCOORD
 
	tGR_SIZE
;

32 
MWCOLORVAL
 
	tGR_COLOR
;

33 
MWPIXELVAL
 
	tGR_PIXELVAL
;

34 
MWIMAGEBITS
 
	tGR_BITMAP
;

35 
MWUCHAR
 
	tGR_CHAR
;

36 
MWTEXTFLAGS
 
	tGR_TEXTFLAGS
;

37 
MWKEY
 
	tGR_KEY
;

38 
MWSCANCODE
 
	tGR_SCANCODE
;

39 
MWKEYMOD
 
	tGR_KEYMOD
;

40 
MWSCREENINFO
 
	tGR_SCREEN_INFO
;

41 
MWWINDOWFBINFO
 
	tGR_WINDOW_FB_INFO
;

42 
MWFONTINFO
 
	tGR_FONT_INFO
;

43 
MWIMAGEINFO
 
	tGR_IMAGE_INFO
;

44 
MWIMAGEHDR
 
	tGR_IMAGE_HDR
;

45 
MWLOGFONT
 
	tGR_LOGFONT
;

46 
MWPALENTRY
 
	tGR_PALENTRY
;

47 
MWPOINT
 
	tGR_POINT
;

48 
MWTIMEOUT
 
	tGR_TIMEOUT
;

49 
MWFONTLIST
 
	tGR_FONTLIST
;

50 
MWKBINFO
 
	tGR_KBINFO
;

51 
MWSTIPPLE
 
	tGR_STIPPLE
;

52 
MWTRANSFORM
 
	tGR_TRANSFORM
;

55 
	tGR_COUNT
;

56 
	tGR_CHAR_WIDTH
;

57 
	tGR_ID
;

58 
GR_ID
 
	tGR_DRAW_ID
;

59 
GR_DRAW_ID
 
	tGR_WINDOW_ID
;

60 
GR_ID
 
	tGR_GC_ID
;

61 
GR_ID
 
	tGR_REGION_ID
;

62 
GR_ID
 
	tGR_FONT_ID
;

63 
GR_ID
 
	tGR_IMAGE_ID
;

64 
GR_ID
 
	tGR_TIMER_ID
;

65 
GR_ID
 
	tGR_CURSOR_ID
;

66 
	tGR_BOOL
;

67 
	tGR_ERROR
;

68 
	tGR_EVENT_TYPE
;

69 
	tGR_UPDATE_TYPE
;

70 
	tGR_EVENT_MASK
;

71 
	tGR_FUNC_NAME
[25];

72 
	tGR_WM_PROPS
;

73 
	tGR_SERIALNO
;

74 
	tGR_MIMETYPE
;

75 
	tGR_LENGTH
;

76 
	tGR_BUTTON
;

80 
GR_COORD
 
x
;

81 
GR_COORD
 
y
;

82 
GR_SIZE
 
width
;

83 
GR_SIZE
 
height
;

84 } 
	tGR_RECT
;

87 
	#GR_ROOT_WINDOW_ID
 ((
GR_WINDOW_ID
Ë1)

	)

90 
	#GR_RGB
(
r
,
g
,
b
Ë
	`MWRGB
‘,g,b)

	)

91 
	#GR_ARGB
(
a
,
r
,
g
,
b
Ë
	`MWARGB
◊,r,g,b)

	)

94 
	#GR_MODE_COPY
 
MWMODE_COPY


	)

95 
	#GR_MODE_SET
 
MWMODE_COPY


	)

96 
	#GR_MODE_XOR
 
MWMODE_XOR


	)

97 
	#GR_MODE_OR
 
MWMODE_OR


	)

98 
	#GR_MODE_AND
 
MWMODE_AND


	)

99 
	#GR_MODE_CLEAR
 
MWMODE_CLEAR


	)

100 
	#GR_MODE_SETTO1
 
MWMODE_SETTO1


	)

101 
	#GR_MODE_EQUIV
 
MWMODE_EQUIV


	)

102 
	#GR_MODE_NOR
 
MWMODE_NOR


	)

103 
	#GR_MODE_NAND
 
MWMODE_NAND


	)

104 
	#GR_MODE_INVERT
 
MWMODE_INVERT


	)

105 
	#GR_MODE_COPYINVERTED
 
MWMODE_COPYINVERTED


	)

106 
	#GR_MODE_ORINVERTED
 
MWMODE_ORINVERTED


	)

107 
	#GR_MODE_ANDINVERTED
 
MWMODE_ANDINVERTED


	)

108 
	#GR_MODE_ORREVERSE
 
MWMODE_ORREVERSE


	)

109 
	#GR_MODE_ANDREVERSE
 
MWMODE_ANDREVERSE


	)

110 
	#GR_MODE_NOOP
 
MWMODE_NOOP


	)

112 
	#GR_MODE_DRAWMASK
 0x00FF

	)

113 
	#GR_MODE_EXCLUDECHILDREN
 0x0100

	)

116 
	#GR_LINE_SOLID
 
MWLINE_SOLID


	)

117 
	#GR_LINE_ONOFF_DASH
 
MWLINE_ONOFF_DASH


	)

119 
	#GR_FILL_SOLID
 
MWFILL_SOLID


	)

120 
	#GR_FILL_STIPPLE
 
MWFILL_STIPPLE


	)

121 
	#GR_FILL_OPAQUE_STIPPLE
 
MWFILL_OPAQUE_STIPPLE


	)

122 
	#GR_FILL_TILE
 
MWFILL_TILE


	)

125 
	#GR_POLY_EVENODD
 
MWPOLY_EVENODD


	)

126 
	#GR_POLY_WINDING
 
MWPOLY_WINDING


	)

129 
	#GR_FONT_SYSTEM_VAR
 
MWFONT_SYSTEM_VAR


	)

130 
	#GR_FONT_SYSTEM_FIXED
 
MWFONT_SYSTEM_FIXED


	)

131 
	#GR_FONT_GUI_VAR
 
MWFONT_GUI_VAR


	)

132 
	#GR_FONT_OEM_FIXED
 
MWFONT_OEM_FIXED


	)

135 
	#GR_TFASCII
 
MWTF_ASCII


	)

136 
	#GR_TFUTF8
 
MWTF_UTF8


	)

137 
	#GR_TFUC16
 
MWTF_UC16


	)

138 
	#GR_TFUC32
 
MWTF_UC32


	)

139 
	#GR_TFXCHAR2B
 
MWTF_XCHAR2B


	)

140 
	#GR_TFPACKMASK
 
MWTF_PACKMASK


	)

143 
	#GR_TFTOP
 
MWTF_TOP


	)

144 
	#GR_TFBASELINE
 
MWTF_BASELINE


	)

145 
	#GR_TFBOTTOM
 
MWTF_BOTTOM


	)

148 
	#GR_TFKERNING
 
MWTF_KERNING


	)

149 
	#GR_TFANTIALIAS
 
MWTF_ANTIALIAS


	)

150 
	#GR_TFUNDERLINE
 
MWTF_UNDERLINE


	)

153 
	#GR_ARC
 
MWARC


	)

154 
	#GR_ARCOUTLINE
 
MWARCOUTLINE


	)

155 
	#GR_PIE
 
MWPIE


	)

158 
	#GR_WINDOW_BOUNDING_MASK
 0

	)

159 
	#GR_WINDOW_CLIP_MASK
 1

	)

162 
	#GR_FALSE
 0

	)

163 
	#GR_TRUE
 1

	)

166 
	#GR_IMAGE_MAX_SIZE
 (-1)

	)

169 
	#GR_BUTTON_R
 
MWBUTTON_R


	)

170 
	#GR_BUTTON_M
 
MWBUTTON_M


	)

171 
	#GR_BUTTON_L
 
MWBUTTON_L


	)

172 
	#GR_BUTTON_ANY
 (
MWBUTTON_R
|
MWBUTTON_M
|
MWBUTTON_L
Ë

	)

175 
	#GR_BACKGROUND_TILE
 0

	)

176 
	#GR_BACKGROUND_CENTER
 1

	)

177 
	#GR_BACKGROUND_TOPLEFT
 2

	)

178 
	#GR_BACKGROUND_STRETCH
 4

	)

179 
	#GR_BACKGROUND_TRANS
 8

	)

182 
	#GR_BMDATA_BYTEREVERSE
 01

	)

183 
	#GR_BMDATA_BYTESWAP
 02

	)

187 
	#GR_WM_PROP_NORESIZE
 0x04

	)

188 
	#GR_WM_PROP_NOICONISE
 0x08

	)

189 
	#GR_WM_PROP_NOWINMENU
 0x10

	)

190 
	#GR_WM_PROP_NOROLLUP
 0x20

	)

191 
	#GR_WM_PROP_ONTOP
 0x200

	)

192 
	#GR_WM_PROP_STICKY
 0x400

	)

193 
	#GR_WM_PROP_DND
 0x2000

	)

197 
	#GR_WM_PROPS_NOBACKGROUND
 0x00000001L

	)

198 
	#GR_WM_PROPS_NOFOCUS
 0x00000002L

	)

199 
	#GR_WM_PROPS_NOMOVE
 0x00000004L

	)

200 
	#GR_WM_PROPS_NORAISE
 0x00000008L

	)

201 
	#GR_WM_PROPS_NODECORATE
 0x00000010L

	)

202 
	#GR_WM_PROPS_NOAUTOMOVE
 0x00000020L

	)

203 
	#GR_WM_PROPS_NOAUTORESIZE
 0x00000040L

	)

206 
	#GR_WM_PROPS_APPWINDOW
 0x00000000L

	)

207 
	#GR_WM_PROPS_APPMASK
 0xF0000000L

	)

208 
	#GR_WM_PROPS_BORDER
 0x80000000L

	)

209 
	#GR_WM_PROPS_APPFRAME
 0x40000000L

	)

210 
	#GR_WM_PROPS_CAPTION
 0x20000000L

	)

211 
	#GR_WM_PROPS_CLOSEBOX
 0x10000000L

	)

212 
	#GR_WM_PROPS_MAXIMIZE
 0x08000000L

	)

215 
	#GR_WM_FLAGS_PROPS
 0x0001

	)

216 
	#GR_WM_FLAGS_TITLE
 0x0002

	)

217 
	#GR_WM_FLAGS_BACKGROUND
 0x0004

	)

218 
	#GR_WM_FLAGS_BORDERSIZE
 0x0008

	)

219 
	#GR_WM_FLAGS_BORDERCOLOR
 0x0010

	)

226 
GR_WM_PROPS
 
Êags
;

227 
GR_WM_PROPS
 
¥›s
;

228 
GR_CHAR
 *
tôÀ
;

229 
GR_COLOR
 
background
;

230 
GR_SIZE
 
b‹dîsize
;

231 
GR_COLOR
 
b‹dîcﬁ‹
;

232 } 
	tGR_WM_PROPERTIES
;

238 
GR_WINDOW_ID
 
wid
;

239 
GR_WINDOW_ID
 
∑ª¡
;

240 
GR_WINDOW_ID
 
chûd
;

241 
GR_WINDOW_ID
 
siblög
;

242 
GR_BOOL
 
öput⁄ly
;

243 
GR_BOOL
 
m≠≥d
;

244 
GR_BOOL
 
ªÆized
;

245 
GR_COORD
 
x
;

246 
GR_COORD
 
y
;

247 
GR_SIZE
 
width
;

248 
GR_SIZE
 
height
;

249 
GR_SIZE
 
b‹dîsize
;

250 
GR_COLOR
 
b‹dîcﬁ‹
;

251 
GR_COLOR
 
background
;

252 
GR_EVENT_MASK
 
evítmask
;

253 
GR_WM_PROPS
 
¥›s
;

254 
GR_CURSOR_ID
 
curs‹
;

255 
¥o˚ssid
;

256 } 
	tGR_WINDOW_INFO
;

262 
GR_GC_ID
 
gcid
;

263 
mode
;

264 
GR_REGION_ID
 
ªgi⁄
;

265 
xoff
;

266 
yoff
;

267 
GR_FONT_ID
 
f⁄t
;

268 
GR_COLOR
 
f‹eground
;

269 
GR_COLOR
 
background
;

270 
GR_BOOL
 
fgi•ixñvÆ
;

271 
GR_BOOL
 
bgi•ixñvÆ
;

272 
GR_BOOL
 
u£background
;

273 
GR_BOOL
 
exposuª
;

274 } 
	tGR_GC_INFO
;

280 
GR_COUNT
 
cou¡
;

281 
GR_PALENTRY
 
∑Àâe
[256];

282 } 
	tGR_PALETTE
;

286 
xªs
;

287 
yªs
;

288 
möx
;

289 
möy
;

290 
maxx
;

291 
maxy
;

292 
GR_BOOL
 
xsw≠
;

293 
GR_BOOL
 
ysw≠
;

294 } 
	tGR_CAL_DATA
;

297 
	#GR_ERROR_BAD_WINDOW_ID
 1

	)

298 
	#GR_ERROR_BAD_GC_ID
 2

	)

299 
	#GR_ERROR_BAD_CURSOR_SIZE
 3

	)

300 
	#GR_ERROR_MALLOC_FAILED
 4

	)

301 
	#GR_ERROR_BAD_WINDOW_SIZE
 5

	)

302 
	#GR_ERROR_KEYBOARD_ERROR
 6

	)

303 
	#GR_ERROR_MOUSE_ERROR
 7

	)

304 
	#GR_ERROR_INPUT_ONLY_WINDOW
 8

	)

305 
	#GR_ERROR_ILLEGAL_ON_ROOT_WINDOW
 9

	)

306 
	#GR_ERROR_TOO_MUCH_CLIPPING
 10

	)

307 
	#GR_ERROR_SCREEN_ERROR
 11

	)

308 
	#GR_ERROR_UNMAPPED_FOCUS_WINDOW
 12

	)

309 
	#GR_ERROR_BAD_DRAWING_MODE
 13

	)

310 
	#GR_ERROR_BAD_LINE_ATTRIBUTE
 14

	)

311 
	#GR_ERROR_BAD_FILL_MODE
 15

	)

312 
	#GR_ERROR_BAD_REGION_ID
 16

	)

321 
	#GR_EVENT_TYPE_ERROR
 (-1)

	)

322 
	#GR_EVENT_TYPE_NONE
 0

	)

323 
	#GR_EVENT_TYPE_EXPOSURE
 1

	)

324 
	#GR_EVENT_TYPE_BUTTON_DOWN
 2

	)

325 
	#GR_EVENT_TYPE_BUTTON_UP
 3

	)

326 
	#GR_EVENT_TYPE_MOUSE_ENTER
 4

	)

327 
	#GR_EVENT_TYPE_MOUSE_EXIT
 5

	)

328 
	#GR_EVENT_TYPE_MOUSE_MOTION
 6

	)

329 
	#GR_EVENT_TYPE_MOUSE_POSITION
 7

	)

330 
	#GR_EVENT_TYPE_KEY_DOWN
 8

	)

331 
	#GR_EVENT_TYPE_KEY_UP
 9

	)

332 
	#GR_EVENT_TYPE_FOCUS_IN
 10

	)

333 
	#GR_EVENT_TYPE_FOCUS_OUT
 11

	)

334 
	#GR_EVENT_TYPE_FDINPUT
 12

	)

335 
	#GR_EVENT_TYPE_UPDATE
 13

	)

336 
	#GR_EVENT_TYPE_CHLD_UPDATE
 14

	)

337 
	#GR_EVENT_TYPE_CLOSE_REQ
 15

	)

338 
	#GR_EVENT_TYPE_TIMEOUT
 16

	)

339 
	#GR_EVENT_TYPE_SCREENSAVER
 17

	)

340 
	#GR_EVENT_TYPE_CLIENT_DATA_REQ
 18

	)

341 
	#GR_EVENT_TYPE_CLIENT_DATA
 19

	)

342 
	#GR_EVENT_TYPE_SELECTION_CHANGED
 20

	)

343 
	#GR_EVENT_TYPE_TIMER
 21

	)

344 
	#GR_EVENT_TYPE_PORTRAIT_CHANGED
 22

	)

347 
	#GR_EVENTMASK
(
n
Ë(((
GR_EVENT_MASK
Ë1Ë<< (n))

	)

349 
	#GR_EVENT_MASK_NONE
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_NONE
)

	)

350 
	#GR_EVENT_MASK_ERROR
 0x80000000L

	)

351 
	#GR_EVENT_MASK_EXPOSURE
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_EXPOSURE
)

	)

352 
	#GR_EVENT_MASK_BUTTON_DOWN
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_BUTTON_DOWN
)

	)

353 
	#GR_EVENT_MASK_BUTTON_UP
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_BUTTON_UP
)

	)

354 
	#GR_EVENT_MASK_MOUSE_ENTER
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_MOUSE_ENTER
)

	)

355 
	#GR_EVENT_MASK_MOUSE_EXIT
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_MOUSE_EXIT
)

	)

356 
	#GR_EVENT_MASK_MOUSE_MOTION
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_MOUSE_MOTION
)

	)

357 
	#GR_EVENT_MASK_MOUSE_POSITION
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_MOUSE_POSITION
)

	)

358 
	#GR_EVENT_MASK_KEY_DOWN
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_KEY_DOWN
)

	)

359 
	#GR_EVENT_MASK_KEY_UP
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_KEY_UP
)

	)

360 
	#GR_EVENT_MASK_FOCUS_IN
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_FOCUS_IN
)

	)

361 
	#GR_EVENT_MASK_FOCUS_OUT
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_FOCUS_OUT
)

	)

362 
	#GR_EVENT_MASK_FDINPUT
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_FDINPUT
)

	)

363 
	#GR_EVENT_MASK_UPDATE
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_UPDATE
)

	)

364 
	#GR_EVENT_MASK_CHLD_UPDATE
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_CHLD_UPDATE
)

	)

365 
	#GR_EVENT_MASK_CLOSE_REQ
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_CLOSE_REQ
)

	)

366 
	#GR_EVENT_MASK_TIMEOUT
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_TIMEOUT
)

	)

367 
	#GR_EVENT_MASK_SCREENSAVER
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_SCREENSAVER
)

	)

368 
	#GR_EVENT_MASK_CLIENT_DATA_REQ
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_CLIENT_DATA_REQ
)

	)

369 
	#GR_EVENT_MASK_CLIENT_DATA
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_CLIENT_DATA
)

	)

370 
	#GR_EVENT_MASK_SELECTION_CHANGED
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_SELECTION_CHANGED
)

	)

371 
	#GR_EVENT_MASK_TIMER
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_TIMER
)

	)

372 
	#GR_EVENT_MASK_PORTRAIT_CHANGED
 
	`GR_EVENTMASK
(
GR_EVENT_TYPE_PORTRAIT_CHANGED
)

	)

376 
	#GR_EVENT_MASK_ALL
 ((
GR_EVENT_MASK
Ë-1L)

	)

379 
	#GR_UPDATE_MAP
 1

	)

380 
	#GR_UPDATE_UNMAP
 2

	)

381 
	#GR_UPDATE_MOVE
 3

	)

382 
	#GR_UPDATE_SIZE
 4

	)

383 
	#GR_UPDATE_UNMAPTEMP
 5

	)

384 
	#GR_UPDATE_ACTIVATE
 6

	)

385 
	#GR_UPDATE_DESTROY
 7

	)

386 
	#GR_UPDATE_REPARENT
 8

	)

397 
GR_EVENT_TYPE
 
ty≥
;

398 
GR_FUNC_NAME
 
«me
;

399 
GR_ERROR
 
code
;

400 
GR_ID
 
id
;

401 } 
	tGR_EVENT_ERROR
;

407 
GR_EVENT_TYPE
 
ty≥
;

408 
GR_WINDOW_ID
 
wid
;

409 
GR_WINDOW_ID
 
subwid
;

410 
GR_COORD
 
roŸx
;

411 
GR_COORD
 
roŸy
;

412 
GR_COORD
 
x
;

413 
GR_COORD
 
y
;

414 
GR_BUTTON
 
buâ⁄s
;

415 
GR_BUTTON
 
ch™gebuâ⁄s
;

416 
GR_KEYMOD
 
modifõrs
;

417 
GR_TIMEOUT
 
time
;

418 } 
	tGR_EVENT_BUTTON
;

424 
GR_EVENT_TYPE
 
ty≥
;

425 
GR_WINDOW_ID
 
wid
;

426 
GR_WINDOW_ID
 
subwid
;

427 
GR_COORD
 
roŸx
;

428 
GR_COORD
 
roŸy
;

429 
GR_COORD
 
x
;

430 
GR_COORD
 
y
;

431 
GR_BUTTON
 
buâ⁄s
;

432 
GR_KEYMOD
 
modifõrs
;

433 
GR_KEY
 
ch
;

434 
GR_SCANCODE
 
sˇncode
;

435 
GR_BOOL
 
hŸkey
;

436 } 
	tGR_EVENT_KEYSTROKE
;

442 
GR_EVENT_TYPE
 
ty≥
;

443 
GR_WINDOW_ID
 
wid
;

444 
GR_COORD
 
x
;

445 
GR_COORD
 
y
;

446 
GR_SIZE
 
width
;

447 
GR_SIZE
 
height
;

448 } 
	tGR_EVENT_EXPOSURE
;

457 
GR_EVENT_TYPE
 
ty≥
;

458 
GR_WINDOW_ID
 
wid
;

459 
GR_WINDOW_ID
 
Ÿhîid
;

460 } 
	tGR_EVENT_GENERAL
;

466 
GR_EVENT_TYPE
 
ty≥
;

467 
GR_WINDOW_ID
 
wid
;

468 
GR_WINDOW_ID
 
subwid
;

469 
GR_COORD
 
roŸx
;

470 
GR_COORD
 
roŸy
;

471 
GR_COORD
 
x
;

472 
GR_COORD
 
y
;

473 
GR_BUTTON
 
buâ⁄s
;

474 
GR_KEYMOD
 
modifõrs
;

475 } 
	tGR_EVENT_MOUSE
;

481 
GR_EVENT_TYPE
 
ty≥
;

482 
fd
;

483 } 
	tGR_EVENT_FDINPUT
;

489 
GR_EVENT_TYPE
 
ty≥
;

490 
GR_WINDOW_ID
 
wid
;

491 
GR_WINDOW_ID
 
subwid
;

492 
GR_COORD
 
x
;

493 
GR_COORD
 
y
;

494 
GR_SIZE
 
width
;

495 
GR_SIZE
 
height
;

496 
GR_UPDATE_TYPE
 
uty≥
;

497 } 
	tGR_EVENT_UPDATE
;

503 
GR_EVENT_TYPE
 
ty≥
;

504 
GR_BOOL
 
a˘iv©e
;

505 } 
	tGR_EVENT_SCREENSAVER
;

511 
GR_EVENT_TYPE
 
ty≥
;

512 
GR_WINDOW_ID
 
wid
;

513 
GR_WINDOW_ID
 
rid
;

514 
GR_SERIALNO
 
£rül
;

515 
GR_MIMETYPE
 
mimëy≥
;

516 } 
	tGR_EVENT_CLIENT_DATA_REQ
;

522 
GR_EVENT_TYPE
 
ty≥
;

523 
GR_WINDOW_ID
 
wid
;

524 
GR_WINDOW_ID
 
rid
;

525 
GR_SERIALNO
 
£rül
;

526 
Àn
;

527 
d©Æí
;

528 *
d©a
;

529 } 
	tGR_EVENT_CLIENT_DATA
;

535 
GR_EVENT_TYPE
 
ty≥
;

536 
GR_WINDOW_ID
 
√w_ow√r
;

537 } 
	tGR_EVENT_SELECTION_CHANGED
;

543 
GR_EVENT_TYPE
 
ty≥
;

544 
GR_WINDOW_ID
 
wid
;

545 
GR_TIMER_ID
 
tid
;

546 } 
	tGR_EVENT_TIMER
;

553 
GR_EVENT_TYPE
 
ty≥
;

554 
GR_EVENT_ERROR
 
îr‹
;

555 
GR_EVENT_GENERAL
 
gíîÆ
;

556 
GR_EVENT_BUTTON
 
buâ⁄
;

557 
GR_EVENT_KEYSTROKE
 
key°roke
;

558 
GR_EVENT_EXPOSURE
 
exposuª
;

559 
GR_EVENT_MOUSE
 
mou£
;

560 
GR_EVENT_FDINPUT
 
fdöput
;

561 
GR_EVENT_UPDATE
 
upd©e
;

562 
GR_EVENT_SCREENSAVER
 
s¸ìnßvî
;

563 
GR_EVENT_CLIENT_DATA_REQ
 
˛õ¡d©¨eq
;

564 
GR_EVENT_CLIENT_DATA
 
˛õ¡d©a
;

565 
GR_EVENT_SELECTION_CHANGED
 
£À˘i⁄ch™ged
;

566 
GR_EVENT_TIMER
 
timî
;

567 } 
	tGR_EVENT
;

569 (*
GR_FNCALLBACKEVENT
)(
	tGR_EVENT
 *);

573 
	#GR_BITMAP_SIZE
(
width
, 
height
Ë
	`MWIMAGE_SIZE
(width, height)

	)

574 
	#GR_BITMAPBITS
 
MWIMAGE_BITSPERIMAGE


	)

575 
	#GR_BITVALUE
(
n
Ë
	`MWIMAGE_BITVALUE
“)

	)

576 
	#GR_FIRSTBIT
 
MWIMAGE_FIRSTBIT


	)

577 
	#GR_NEXTBIT
(
m
Ë
	`MWIMAGE_NEXTBIT
(m)

	)

578 
	#GR_TESTBIT
(
m
Ë
	`MWIMAGE_TESTBIT
(m)

	)

579 
	#GR_SHIFTBIT
(
m
Ë
	`MWIMAGE_SHIFTBIT
(m)

	)

599 
	#GR_GRAB_HOTKEY_EXCLUSIVE
 0

	)

621 
	#GR_GRAB_HOTKEY
 1

	)

641 
	#GR_GRAB_EXCLUSIVE
 2

	)

656 
	#GR_GRAB_EXCLUSIVE_MOUSE
 3

	)

664 
	#GR_GRAB_MAX
 
GR_GRAB_EXCLUSIVE_MOUSE


	)

668 
	#GR_COLOR_DESKTOP
 0

	)

671 
	#GR_COLOR_ACTIVECAPTION
 1

	)

672 
	#GR_COLOR_ACTIVECAPTIONTEXT
 2

	)

673 
	#GR_COLOR_INACTIVECAPTION
 3

	)

674 
	#GR_COLOR_INACTIVECAPTIONTEXT
 4

	)

677 
	#GR_COLOR_WINDOWFRAME
 5

	)

678 
	#GR_COLOR_BTNSHADOW
 6

	)

679 
	#GR_COLOR_3DLIGHT
 7

	)

680 
	#GR_COLOR_BTNHIGHLIGHT
 8

	)

683 
	#GR_COLOR_APPWINDOW
 9

	)

684 
	#GR_COLOR_APPTEXT
 10

	)

687 
	#GR_COLOR_BTNFACE
 11

	)

688 
	#GR_COLOR_BTNTEXT
 12

	)

691 
	#GR_COLOR_WINDOW
 13

	)

692 
	#GR_COLOR_WINDOWTEXT
 14

	)

693 
	#GR_COLOR_HIGHLIGHT
 15

	)

694 
	#GR_COLOR_HIGHLIGHTTEXT
 16

	)

695 
	#GR_COLOR_GRAYTEXT
 17

	)

698 
	#GR_COLOR_MENUTEXT
 18

	)

699 
	#GR_COLOR_MENU
 19

	)

704 
	#GR_ERROR_STRINGS
 \

721 "BadÑegi⁄ id: %d\n",

	)

723 *
nxEº‹Såögs
[];

726 
GrFlush
();

727 
GrO≥n
();

728 
GrClo£
();

729 
GrDñay
(
GR_TIMEOUT
 
m£cs
);

730 
GrGëS¸ìnInfo
(
GR_SCREEN_INFO
 *
sù
);

731 
GR_COLOR
 
GrGëSysCﬁ‹
(
ödex
);

732 
GR_WINDOW_ID
 
GrNewWödow
(GR_WINDOW_ID 
∑ª¡
, 
GR_COORD
 
x
, GR_COORD 
y
,

733 
GR_SIZE
 
width
, GR_SIZE 
height
, GR_SIZE 
b‹dîsize
,

734 
GR_COLOR
 
background
, GR_COLOR 
b‹dîcﬁ‹
);

735 
GR_WINDOW_ID
 
GrNewPixm≠
(
GR_SIZE
 
width
, GR_SIZE 
height
, *
pixñs
);

736 
GR_WINDOW_ID
 
GrNewI≈utWödow
(GR_WINDOW_ID 
∑ª¡
, 
GR_COORD
 
x
, GR_COORD 
y
,

737 
GR_SIZE
 
width
, GR_SIZE 
height
);

738 
GrDe°royWödow
(
GR_WINDOW_ID
 
wid
);

739 
GR_GC_ID
 
GrNewGC
();

740 
GR_GC_ID
 
GrC›yGC
(GR_GC_ID 
gc
);

741 
GrGëGCInfo
(
GR_GC_ID
 
gc
, 
GR_GC_INFO
 *
gcù
);

742 
GrDe°royGC
(
GR_GC_ID
 
gc
);

743 
GR_REGION_ID
 
GrNewRegi⁄
();

744 
GR_REGION_ID
 
GrNewBôm≠Regi⁄
(
GR_BITMAP
 *
bôm≠
, 
GR_SIZE
 
width
,

745 
GR_SIZE
 
height
);

746 
GR_REGION_ID
 
GrNewPﬁyg⁄Regi⁄
(
mode
, 
GR_COUNT
 
cou¡
, 
GR_POINT
 *
poöts
);

747 
GrDe°royRegi⁄
(
GR_REGION_ID
 
ªgi⁄
);

748 
GrUni⁄Re˘WôhRegi⁄
(
GR_REGION_ID
 
ªgi⁄
, 
GR_RECT
 *
ª˘
);

749 
GrUni⁄Regi⁄
(
GR_REGION_ID
 
d°_rgn
, GR_REGION_ID 
§c_rgn1
,

750 
GR_REGION_ID
 
§c_rgn2
);

751 
GrI¡î£˘Regi⁄
(
GR_REGION_ID
 
d°_rgn
, GR_REGION_ID 
§c_rgn1
,

752 
GR_REGION_ID
 
§c_rgn2
);

753 
GrSubåa˘Regi⁄
(
GR_REGION_ID
 
d°_rgn
, GR_REGION_ID 
§c_rgn1
,

754 
GR_REGION_ID
 
§c_rgn2
);

755 
GrX‹Regi⁄
(
GR_REGION_ID
 
d°_rgn
, GR_REGION_ID 
§c_rgn1
,

756 
GR_REGION_ID
 
§c_rgn2
);

757 
GrSëGCRegi⁄
(
GR_GC_ID
 
gc
, 
GR_REGION_ID
 
ªgi⁄
);

758 
GrSëGCClùOrigö
(
GR_GC_ID
 
gc
, 
x
, 
y
);

759 
GR_BOOL
 
GrPoötInRegi⁄
(
GR_REGION_ID
 
ªgi⁄
, 
GR_COORD
 
x
, GR_COORD 
y
);

760 
GrRe˘InRegi⁄
(
GR_REGION_ID
 
ªgi⁄
, 
GR_COORD
 
x
, GR_COORD 
y
,

761 
GR_COORD
 
w
, GR_COORD 
h
);

762 
GR_BOOL
 
GrEm±yRegi⁄
(
GR_REGION_ID
 
ªgi⁄
);

763 
GR_BOOL
 
GrEquÆRegi⁄
(
GR_REGION_ID
 
rgn1
, GR_REGION_ID 
rgn2
);

764 
GrOff£tRegi⁄
(
GR_REGION_ID
 
ªgi⁄
, 
GR_SIZE
 
dx
, GR_SIZE 
dy
);

765 
GrGëRegi⁄Box
(
GR_REGION_ID
 
ªgi⁄
, 
GR_RECT
 *
ª˘
);

766 
GrM≠Wödow
(
GR_WINDOW_ID
 
wid
);

767 
GrUnm≠Wödow
(
GR_WINDOW_ID
 
wid
);

768 
GrRai£Wödow
(
GR_WINDOW_ID
 
wid
);

769 
GrLowîWödow
(
GR_WINDOW_ID
 
wid
);

770 
GrMoveWödow
(
GR_WINDOW_ID
 
wid
, 
GR_COORD
 
x
, GR_COORD 
y
);

771 
GrResizeWödow
(
GR_WINDOW_ID
 
wid
, 
GR_SIZE
 
width
, GR_SIZE 
height
);

772 
GrRï¨ítWödow
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
pwid
,

773 
GR_COORD
 
x
, GR_COORD 
y
);

774 
GrGëWödowInfo
(
GR_WINDOW_ID
 
wid
, 
GR_WINDOW_INFO
 *
öf›å
);

775 
GrSëWMPr›îtõs
(
GR_WINDOW_ID
 
wid
, 
GR_WM_PROPERTIES
 *
¥›s
);

776 
GrGëWMPr›îtõs
(
GR_WINDOW_ID
 
wid
, 
GR_WM_PROPERTIES
 *
¥›s
);

777 
GR_FONT_ID
 
GrCª©eF⁄t
(
GR_CHAR
 *
«me
, 
GR_COORD
 
height
,

778 
GR_LOGFONT
 *
∂ogf⁄t
);

779 
GR_FONT_ID
 
GrCª©eF⁄tFromBuf„r
(c⁄° *
buf„r
, 
Àngth
,

780 c⁄° *
f‹m©
, 
GR_COORD
 
height
);

781 
GR_FONT_ID
 
GrC›yF⁄t
(GR_FONT_ID 
f⁄tid
, 
GR_COORD
 
height
);

782 
GrGëF⁄tLi°
(
GR_FONTLIST
 ***
f⁄ts
, *
numf⁄ts
);

783 
GrFªeF⁄tLi°
(
GR_FONTLIST
 ***
f⁄ts
, 
numf⁄ts
);

784 
GrSëF⁄tSize
(
GR_FONT_ID
 
f⁄tid
, 
GR_COORD
 
size
);

785 
GrSëF⁄tRŸ©i⁄
(
GR_FONT_ID
 
f⁄tid
, 
ã¡hsdegªes
);

786 
GrSëF⁄tAâr
(
GR_FONT_ID
 
f⁄tid
, 
£tÊags
, 
˛rÊags
);

787 
GrDe°royF⁄t
(
GR_FONT_ID
 
f⁄tid
);

788 
GrGëF⁄tInfo
(
GR_FONT_ID
 
f⁄t
, 
GR_FONT_INFO
 *
fù
);

789 
GR_WINDOW_ID
 
GrGëFocus
();

790 
GrSëFocus
(
GR_WINDOW_ID
 
wid
);

791 
GrCÀ¨Aªa
(
GR_WINDOW_ID
 
wid
, 
GR_COORD
 
x
, GR_COORD 
y
,

792 
GR_SIZE
 
width
, GR_SIZE 
height
, 
GR_BOOL
 
expo£Êag
);

793 
GrSñe˘Evíts
(
GR_WINDOW_ID
 
wid
, 
GR_EVENT_MASK
 
evítmask
);

794 
GrGëNextEvít
(
GR_EVENT
 *
ï
);

795 
GrGëTy≥dEvít
(
GR_WINDOW_ID
 
wid
, 
GR_EVENT_MASK
 
mask
,

796 
GR_UPDATE_TYPE
 
upd©e
, 
GR_EVENT
 *
ï
, 
GR_BOOL
 
block
);

797 
GR_BOOL
 (*
	tGR_TYPED_EVENT_CALLBACK
)(
	tGR_WINDOW_ID
, 
	tGR_EVENT_MASK
,

798 
	tGR_UPDATE_TYPE
, 
	tGR_EVENT
 *, *);

799 
GrGëTy≥dEvítPªd
(
GR_WINDOW_ID
 
wid
, 
GR_EVENT_MASK
 
mask
,

800 
GR_UPDATE_TYPE
 
upd©e
, 
GR_EVENT
 * 
ï
, 
GR_BOOL
 
block
,

801 
GR_TYPED_EVENT_CALLBACK
 
m©ch‚
, *
¨g
);

802 
GrGëNextEvítTimeout
(
GR_EVENT
 *
ï
, 
GR_TIMEOUT
 
timeout
);

803 
GrCheckNextEvít
(
GR_EVENT
 *
ï
);

804 
GrPìkEvít
(
GR_EVENT
 *
ï
);

805 
GrPìkWaôEvít
(
GR_EVENT
 *
ï
);

806 
GrLöe
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x1
, GR_COORD 
y1
,

807 
GR_COORD
 
x2
, GR_COORD 
y2
);

808 
GrPoöt
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
);

809 
GrPoöts
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COUNT
 
cou¡
,

810 
GR_POINT
 *
poöâabÀ
);

811 
GrRe˘
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

812 
GR_SIZE
 
width
, GR_SIZE 
height
);

813 
GrFûlRe˘
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

814 
GR_SIZE
 
width
, GR_SIZE 
height
);

815 
GrPﬁy
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COUNT
 
cou¡
,

816 
GR_POINT
 *
poöâabÀ
);

817 
GrFûlPﬁy
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COUNT
 
cou¡
,

818 
GR_POINT
 *
poöâabÀ
);

819 
GrEŒù£
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

820 
GR_SIZE
 
rx
, GR_SIZE 
ry
);

821 
GrFûlEŒù£
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
,

822 
GR_COORD
 
y
, 
GR_SIZE
 
rx
, GR_SIZE 
ry
);

823 
GrArc
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

824 
GR_SIZE
 
rx
, GR_SIZE 
ry
, 
GR_COORD
 
ax
, GR_COORD 
ay
,

825 
GR_COORD
 
bx
, GR_COORD 
by
, 
ty≥
);

826 
GrArcAngÀ
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

827 
GR_SIZE
 
rx
, GR_SIZE 
ry
, 
GR_COORD
 
™gÀ1
,

828 
GR_COORD
 
™gÀ2
, 
ty≥
);

829 
GrSëGCF‹eground
(
GR_GC_ID
 
gc
, 
GR_COLOR
 
f‹eground
);

830 
GrSëGCF‹egroundPixñVÆ
(
GR_GC_ID
 
gc
, 
GR_PIXELVAL
 
f‹eground
);

831 
GrSëGCBackground
(
GR_GC_ID
 
gc
, 
GR_COLOR
 
background
);

832 
GrSëGCBackgroundPixñVÆ
(
GR_GC_ID
 
gc
, 
GR_PIXELVAL
 
background
);

833 
GrSëGCU£Background
(
GR_GC_ID
 
gc
, 
GR_BOOL
 
Êag
);

834 
GrSëGCMode
(
GR_GC_ID
 
gc
, 
mode
);

836 
GrSëGCLöeAâribuãs
(
GR_GC_ID
, );

837 
GrSëGCDash
(
GR_GC_ID
, *, );

838 
GrSëGCFûlMode
(
GR_GC_ID
, );

839 
GrSëGCStù∂e
(
GR_GC_ID
, 
GR_BITMAP
 *, 
GR_SIZE
, GR_SIZE);

840 
GrSëGCTûe
(
GR_GC_ID
, 
GR_WINDOW_ID
, 
GR_SIZE
, GR_SIZE);

841 
GrSëGCTSOff£t
(
GR_GC_ID
, 
GR_COORD
, GR_COORD);

843 
GrSëGCGøphicsExposuª
(
GR_GC_ID
 
gc
, 
GR_BOOL
 
exposuª
);

844 
GrSëGCF⁄t
(
GR_GC_ID
 
gc
, 
GR_FONT_ID
 
f⁄t
);

845 
GrGëGCTextSize
(
GR_GC_ID
 
gc
, *
°r
, 
cou¡
,

846 
GR_TEXTFLAGS
 
Êags
, 
GR_SIZE
 *
ªtwidth
,

847 
GR_SIZE
 *
ªtheight
,GR_SIZE *
ªtba£
);

848 
GrRódAªa
(
GR_DRAW_ID
 
id
, 
GR_COORD
 
x
, GR_COORD 
y
, 
GR_SIZE
 
width
,

849 
GR_SIZE
 
height
, 
GR_PIXELVAL
 *
pixñs
);

850 
GrAªa
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

851 
GR_SIZE
 
width
,GR_SIZE 
height
,*
pixñs
,
pixty≥
);

852 
GrC›yAªa
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

853 
GR_SIZE
 
width
, GR_SIZE 
height
, 
GR_DRAW_ID
 
§cid
,

854 
GR_COORD
 
§cx
, GR_COORD 
§cy
, 
›
);

855 
GrSåëchAªa
(
GR_DRAW_ID
 
d°id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
dx1
,

856 
GR_COORD
 
dy1
, GR_COORD 
dx2
, GR_COORD 
dy2
,

857 
GR_DRAW_ID
 
§cid
, 
GR_COORD
 
sx1
, GR_COORD 
sy1
,

858 
GR_COORD
 
sx2
, GR_COORD 
sy2
, 
›
);

859 
GrBôm≠
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

860 
GR_SIZE
 
width
, GR_SIZE 
height
, 
GR_BITMAP
 *
imagebôs
);

861 
GrDøwImageBôs
(
GR_DRAW_ID
 
id
,
GR_GC_ID
 
gc
,
GR_COORD
 
x
,GR_COORD 
y
,

862 
GR_IMAGE_HDR
 *
pimage
);

863 
GrDøwImageFromFûe
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
,

864 
GR_COORD
 
y
, 
GR_SIZE
 
width
, GR_SIZE 
height
,

865 *
∑th
, 
Êags
);

866 
GR_IMAGE_ID
 
GrLﬂdImageFromFûe
(*
∑th
, 
Êags
);

867 
GrDøwImageFromBuf„r
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
,

868 
GR_COORD
 
y
, 
GR_SIZE
 
width
, GR_SIZE 
height
,

869 *
buf„r
, 
size
, 
Êags
);

870 
GR_IMAGE_ID
 
GrLﬂdImageFromBuf„r
(*
buf„r
, 
size
, 
Êags
);

871 
GrDøwImageToFô
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
,

872 
GR_COORD
 
y
, 
GR_SIZE
 
width
, GR_SIZE 
height
,

873 
GR_IMAGE_ID
 
imageid
);

874 
GrFªeImage
(
GR_IMAGE_ID
 
id
);

875 
GrGëImageInfo
(
GR_IMAGE_ID
 
id
, 
GR_IMAGE_INFO
 *
iù
);

876 
GrText
(
GR_DRAW_ID
 
id
, 
GR_GC_ID
 
gc
, 
GR_COORD
 
x
, GR_COORD 
y
,

877 *
°r
, 
GR_COUNT
 
cou¡
, 
GR_TEXTFLAGS
 
Êags
);

878 
GR_CURSOR_ID
 
GrNewCurs‹
(
GR_SIZE
 
width
, GR_SIZE 
height
, 
GR_COORD
 
hŸx
,

879 
GR_COORD
 
hŸy
, 
GR_COLOR
 
f‹eground
, GR_COLOR 
background
,

880 
GR_BITMAP
 *
fgbôm≠
, GR_BITMAP *
bgbôm≠
);

881 
GrDe°royCurs‹
(
GR_CURSOR_ID
 
cid
);

882 
GrSëWödowCurs‹
(
GR_WINDOW_ID
 
wid
, 
GR_CURSOR_ID
 
cid
);

883 
GrSëWödowRegi⁄
(
GR_WINDOW_ID
 
wid
, 
GR_REGION_ID
 
rid
, 
ty≥
);

884 
GrMoveCurs‹
(
GR_COORD
 
x
, GR_COORD 
y
);

885 
GrGëSy°emPÆëã
(
GR_PALETTE
 *
∑l
);

886 
GrSëSy°emPÆëã
(
GR_COUNT
 
fú°
, 
GR_PALETTE
 *
∑l
);

887 
GrFödCﬁ‹
(
GR_COLOR
 
c
, 
GR_PIXELVAL
 *
ªçixñ
);

888 
GrReqShmCmds
(
shmsize
);

889 
GrInje˘PoöãrEvít
(
MWCOORD
 
x
, MWCOORD 
y
,

890 
buâ⁄
, 
visibÀ
);

891 
GrInje˘KeybﬂrdEvít
(
GR_WINDOW_ID
 
wid
, 
GR_KEY
 
keyvÆue
,

892 
GR_KEYMOD
 
modifõrs
, 
GR_SCANCODE
 
sˇncode
,

893 
GR_BOOL
 
¥es£d
);

894 
GrClo£Wödow
(
GR_WINDOW_ID
 
wid
);

895 
GrKûlWödow
(
GR_WINDOW_ID
 
wid
);

896 
GrSëS¸ìnSavîTimeout
(
GR_TIMEOUT
 
timeout
);

897 
GrSëSñe˘i⁄Ow√r
(
GR_WINDOW_ID
 
wid
, 
GR_CHAR
 *
ty≥li°
);

898 
GR_WINDOW_ID
 
GrGëSñe˘i⁄Ow√r
(
GR_CHAR
 **
ty≥li°
);

899 
GrReque°Clõ¡D©a
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
rid
,

900 
GR_SERIALNO
 
£rül
, 
GR_MIMETYPE
 
mimëy≥
);

901 
GrSídClõ¡D©a
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
did
,

902 
GR_SERIALNO
 
£rül
, 
GR_LENGTH
 
Àn
, GR_LENGTH 
thi¶í
,

903 *
d©a
);

904 
GrBñl
();

905 
GrSëBackgroundPixm≠
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID 
pixm≠
,

906 
Êags
);

907 
GrQuîyPoöãr
(
GR_WINDOW_ID
 *
mwö
, 
GR_COORD
 *
x
, GR_COORD *
y
,

908 
GR_BUTTON
 *
bmask
);

909 
GrQuîyTªe
(
GR_WINDOW_ID
 
wid
, GR_WINDOW_ID *
∑ª¡id
,

910 
GR_WINDOW_ID
 **
chûdªn
, 
GR_COUNT
 *
nchûdªn
);

911 
GR_BOOL
 
GrGøbKey
(
GR_WINDOW_ID
 
wid
, 
GR_KEY
 
key
, 
ty≥
);

912 
GrUngøbKey
(
GR_WINDOW_ID
 
wid
, 
GR_KEY
 
key
);

914 
GR_TIMER_ID
 
GrCª©eTimî
(
GR_WINDOW_ID
 
wid
, 
GR_TIMEOUT
 
≥riod
);

915 
GrDe°royTimî
(
GR_TIMER_ID
 
tid
);

916 
GrSëP‹åaôMode
(
p‹åaômode
);

918 
GrRegi°îI≈ut
(
fd
);

919 
GrUƒegi°îI≈ut
(
fd
);

920 
GrMaöLo›
(
GR_FNCALLBACKEVENT
 
‚cb
);

921 
GR_FNCALLBACKEVENT
 
GrSëEº‹H™dÀr
(GR_FNCALLBACKEVENT 
‚cb
);

922 
GrDeÁu…Eº‹H™dÀr
(
GR_EVENT
 *
ï
);

925 
GrPª∑ªSñe˘
(*
maxfd
,*
rfd£t
);

926 
GrSîvi˚Sñe˘
(*
rfd£t
, 
GR_FNCALLBACKEVENT
 
‚cb
);

929 
GrQueueLígth
();

931 
GrSëTønsf‹m
(
GR_TRANSFORM
 *);

934 
GrCÆcTønsf‹m
(
GR_CAL_DATA
 *, 
GR_TRANSFORM
 *);

935 
GrLﬂdTønsf‹mD©a
(*
fûíame
, 
GR_TRANSFORM
 *);

936 
GrSaveTønsf‹mD©a
(
GR_TRANSFORM
 *, *
fûíame
);

939 
GR_WINDOW_ID
 
GrNewWödowEx
(
GR_WM_PROPS
 
¥›s
, 
GR_CHAR
 *
tôÀ
,

940 
GR_WINDOW_ID
 
∑ª¡
, 
GR_COORD
 
x
, GR_COORD 
y
,

941 
GR_SIZE
 
width
, GR_SIZE 
height
, 
GR_COLOR
 
background
);

942 
GrDøwLöes
(
GR_DRAW_ID
 
w
, 
GR_GC_ID
 
gc
, 
GR_POINT
 *
poöts
,

943 
GR_COUNT
 
cou¡
);

944 
GR_BITMAP
 * 
GrNewBôm≠FromD©a
(
GR_SIZE
 
width
, GR_SIZE 
height
, GR_SIZE 
bôs_width
,

945 
GR_SIZE
 
bôs_height
, *
bôs
, 
Êags
);

946 
GR_WINDOW_ID
 
GrNewPixm≠FromD©a
(
GR_SIZE
 
width
, GR_SIZE 
height
,

947 
GR_COLOR
 
f‹eground
, GR_COLOR 
background
, * 
bôs
,

948 
Êags
);

949 
GR_BITMAP
 * 
GrNewBôm≠FromPixm≠
(
GR_WINDOW_ID
 
pixm≠
, 
x
, 
y
, 
GR_SIZE
 
width
,

950 
GR_SIZE
 
height
);

951 
GR_BITMAP
 * 
GrNewBôm≠FromPixm≠
(
GR_WINDOW_ID
 
pixm≠
, 
x
, 
y
,

952 
GR_SIZE
 
width
, GR_SIZE 
height
);

953 
GR_REGION_ID
 
GrNewRegi⁄FromPixm≠
(
GR_WINDOW_ID
 
§c
, 
MWCOORD
 
x
, MWCOORD 
y
,

954 
GR_SIZE
 
width
, GR_SIZE 
height
);

957 * 
GrO≥nClõ¡Fømebuf„r
();

958 
GrClo£Clõ¡Fømebuf„r
();

959 
GrGëWödowFBInfo
(
GR_WINDOW_ID
 
wid
, 
GR_WINDOW_FB_INFO
 *
fböfo
);

962 
GR_CURSOR_ID
 
GrSëCurs‹
(
GR_WINDOW_ID
 
wid
, 
GR_SIZE
 
width
, GR_SIZE 
height
,

963 
GR_COORD
 
hŸx
, GR_COORD 
hŸy
, 
GR_COLOR
 
f‹eground
,

964 
GR_COLOR
 
background
, 
GR_BITMAP
 *
fbbôm≠
,

965 
GR_BITMAP
 *
bgbôm≠
);

966 
	#GrSëB‹dîCﬁ‹
 
GrSëWödowB‹dîCﬁ‹


	)

967 
	#GrCÀ¨Wödow
(
wid
,
expo£Êag
Ë
	`GrCÀ¨Aªa
(wid,0,0,0,0,expo£ÊagË

	)

970 
	#GrSëWödowBackgroundCﬁ‹
(
wid
,
cﬁ‹
) \

971 { 
GR_WM_PROPERTIES
 
¥›s
; \

972 
¥›s
.
Êags
 = 
GR_WM_FLAGS_BACKGROUND
; \

973 
¥›s
.
background
 = 
cﬁ‹
; \

974 
	`GrSëWMPr›îtõs
(
wid
, &
¥›s
); \

975 }

	)

976 
	#GrSëWödowB‹dîSize
(
wid
,
width
) \

977 { 
GR_WM_PROPERTIES
 
¥›s
; \

978 
¥›s
.
Êags
 = 
GR_WM_FLAGS_BORDERSIZE
; \

979 
¥›s
.
b‹dîsize
 = 
width
; \

980 
	`GrSëWMPr›îtõs
(
wid
, &
¥›s
); \

981 }

	)

982 
	#GrSëWödowB‹dîCﬁ‹
(
wid
,
cﬁ‹
) \

983 { 
GR_WM_PROPERTIES
 
¥›s
; \

984 
¥›s
.
Êags
 = 
GR_WM_FLAGS_BORDERCOLOR
; \

985 
¥›s
.
b‹dîcﬁ‹
 = 
cﬁ‹
; \

986 
	`GrSëWMPr›îtõs
(
wid
, &
¥›s
); \

987 }

	)

988 
	#GrSëWödowTôÀ
(
wid
,
«me
) \

989 { 
GR_WM_PROPERTIES
 
¥›s
; \

990 
¥›s
.
Êags
 = 
GR_WM_FLAGS_TITLE
; \

991 
¥›s
.
tôÀ
 = (
GR_CHAR
 *)
«me
; \

992 
	`GrSëWMPr›îtõs
(
wid
, &
¥›s
); \

993 }

	)

995 #ifde‡
__˝lu•lus


1000 #i‡
__πems__


1001 
	#maö
 
πems_maö


	)

1005 
evít_li°
 
	tEVENT_LIST
;

1006 
	sevít_li°
 {

1007 
EVENT_LIST
 * 
	g√xt
;

1008 
GR_EVENT
 
	gevít
;

1013 *
	gbuÂå
;

1014 *
	gbufmax
;

1015 *
	gbuf„r
;

1016 } 
	tREQBUF
;

1018 #ifde‡
__ECOS


1019 
	~<sys/£À˘.h
>

1020 
	~<cyg/kî√l/k≠i.h
>

1027 
	g_nxSockë
;

1028 
MWMUTEX
 
	g_nxGlobÆLock
;

1029 
	g_°‹edevít
;

1030 
GR_EVENT
 
	g_°‹edevít_d©a
;

1031 
	g_ªgfdmax
;

1032 
fd_£t
 
	g_ªgfd£t
;

1033 
GR_FNCALLBACKEVENT
 
	g_GrEº‹Func
;

1034 
REQBUF
 
	g_ªqbuf
;

1035 
EVENT_LIST
 *
	g_evli°
;

1036 } 
	tecos_«nox_˛õ¡_d©a
;

1038 
ecos_«nox_˛õ¡_d©a_ödex
;

1040 
	#ACCESS_PER_THREAD_DATA
() \

1041 
ecos_«nox_˛õ¡_d©a
 *
d©a
 = (ecos_nanox_client_data*) \

1042 
	`cyg_thªad_gë_d©a
((
cyg_ucou¡32
)
ecos_«nox_˛õ¡_d©a_ödex
);

	)

1044 
	#INIT_PER_THREAD_DATA
() \

1046 
ecos_«nox_˛õ¡_d©a
 *
d±r
 = 
	`mÆloc
((ecos_nanox_client_data)); \

1047 
ecos_«nox_˛õ¡_d©a_ödex
 = 
d©a
; \

1048 
d±r
->
_nxSockë
 = -1; \

1049 
d±r
->
nxGlobÆLock
 = 0;

	)

1050 
	gd±r
->
	g_°‹edevít
 = 0; \

1051 
	gd±r
->
	g_ªgfdmax
 = -1; \

1052 
FD_ZERO
(&
d±r
->
_ªgfd£t
); \

1053 
	gd±r
->
	g_GrEº‹Func
 = 
GrDeÁu…Eº‹H™dÀr
; \

1054 
	gd±r
->
	g_ªqbuf
.
	gbuÂå
 = 
NULL
; \

1055 
	gd±r
->
	g_ªqbuf
.
	gbufmax
 = 
NULL
; \

1056 
	gd±r
->
	g_ªqbuf
.
	gbuf„r
 = 
NULL
; \

1057 
	gd±r
->
	g_evli°
 = 
NULL
; \

1058 
cyg_thªad_£t_d©a
(
ecos_«nox_˛õ¡_d©a_ödex
,(
CYG_ADDRWORD
)
d±r
); \

1061 
	#nxSockë
 (
d©a
->
_nxSockë
)

	)

1062 
	#nxGlobÆLock
 (
d©a
->
_nxGlobÆLock
)

	)

1063 
	#°‹edevít
 (
d©a
->
_°‹edevít
)

	)

1064 
	#°‹edevít_d©a
 (
d©a
->
_°‹edevít_d©a
)

	)

1065 
	#ªgfdmax
 (
d©a
->
_ªgfdmax
)

	)

1066 
	#ªgfd£t
 (
d©a
->
_ªgfd£t
)

	)

1067 
	#Eº‹Func
 (
d©a
->
_GrEº‹Func
)

	)

1068 
	#ªqbuf
 (
d©a
->
_ªqbuf
)

	)

1069 
	#evli°
 (
d©a
->
_evli°
)

	)

1072 
	#ACCESS_PER_THREAD_DATA
()

	)

	@/usr/include/netdb.h

23 #i‚def 
_NETDB_H


24 
	#_NETDB_H
 1

	)

26 
	~<„©uªs.h
>

28 
	~<√töë/ö.h
>

29 
	~<°döt.h
>

30 #ifde‡
__USE_MISC


33 
	~<Ωc/√tdb.h
>

36 #ifde‡
__USE_GNU


37 
	#__√ed_sigevít_t


	)

38 
	~<bôs/sigöfo.h
>

39 
	#__√ed_time•ec


	)

40 
	~<time.h
>

43 
	~<bôs/√tdb.h
>

46 
	#_PATH_HEQUIV
 "/ëc/ho°s.equiv"

	)

47 
	#_PATH_HOSTS
 "/ëc/ho°s"

	)

48 
	#_PATH_NETWORKS
 "/ëc/√tw‹ks"

	)

49 
	#_PATH_NSSWITCH_CONF
 "/ëc/nsswôch.c⁄f"

	)

50 
	#_PATH_PROTOCOLS
 "/ëc/¥Ÿocﬁs"

	)

51 
	#_PATH_SERVICES
 "/ëc/£rvi˚s"

	)

54 
	g__BEGIN_DECLS


58 
	#h_î∫o
 (*
	`__h_î∫o_loˇti⁄
 ())

	)

61 *
	$__h_î∫o_loˇti⁄
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

65 
	#NETDB_INTERNAL
 -1

	)

66 
	#NETDB_SUCCESS
 0

	)

67 
	#HOST_NOT_FOUND
 1

	)

68 
	#TRY_AGAIN
 2

	)

70 
	#NO_RECOVERY
 3

	)

72 
	#NO_DATA
 4

	)

74 
	#NO_ADDRESS
 
NO_DATA


	)

76 #ifde‡
__USE_XOPEN2K


78 
	#IPPORT_RESERVED
 1024

	)

81 #ifde‡
__USE_GNU


83 
	#SCOPE_DELIMITER
 '%'

	)

88 
	$hîr‹
 (
__c⁄°
 *
__°r
Ë
__THROW
;

91 
__c⁄°
 *
	$h°ªº‹
 (
__îr_num
Ë
__THROW
;

96 
	sho°ít


98 *
h_«me
;

99 **
h_Æü£s
;

100 
h_addπy≥
;

101 
h_Àngth
;

102 **
h_addr_li°
;

103 
	#h_addr
 
h_addr_li°
[0]

	)

111 
	`£tho°ít
 (
__°ay_›í
);

117 
	`ídho°ít
 ();

124 
ho°ít
 *
	`gëho°ít
 ();

131 
ho°ít
 *
	`gëho°byaddr
 (
__c⁄°
 *
__addr
, 
__sockÀn_t
 
__Àn
,

132 
__ty≥
);

138 
ho°ít
 *
	`gëho°by«me
 (
__c⁄°
 *
__«me
);

140 #ifde‡
__USE_MISC


149 
ho°ít
 *
	`gëho°by«me2
 (
__c⁄°
 *
__«me
, 
__af
);

161 
	`gëho°ít_r
 (
ho°ít
 *
__ª°ri˘
 
__ªsu…_buf
,

162 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

163 
ho°ít
 **
__ª°ri˘
 
__ªsu…
,

164 *
__ª°ri˘
 
__h_î∫›
);

166 
	`gëho°byaddr_r
 (
__c⁄°
 *
__ª°ri˘
 
__addr
, 
__sockÀn_t
 
__Àn
,

167 
__ty≥
,

168 
ho°ít
 *
__ª°ri˘
 
__ªsu…_buf
,

169 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

170 
ho°ít
 **
__ª°ri˘
 
__ªsu…
,

171 *
__ª°ri˘
 
__h_î∫›
);

173 
	`gëho°by«me_r
 (
__c⁄°
 *
__ª°ri˘
 
__«me
,

174 
ho°ít
 *
__ª°ri˘
 
__ªsu…_buf
,

175 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

176 
ho°ít
 **
__ª°ri˘
 
__ªsu…
,

177 *
__ª°ri˘
 
__h_î∫›
);

179 
	`gëho°by«me2_r
 (
__c⁄°
 *
__ª°ri˘
 
__«me
, 
__af
,

180 
ho°ít
 *
__ª°ri˘
 
__ªsu…_buf
,

181 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

182 
ho°ít
 **
__ª°ri˘
 
__ªsu…
,

183 *
__ª°ri˘
 
__h_î∫›
);

192 
	`£äëít
 (
__°ay_›í
);

198 
	`íd√ã¡
 ();

205 
√ã¡
 *
	`gë√ã¡
 ();

212 
√ã¡
 *
	`gë√tbyaddr
 (
uöt32_t
 
__√t
, 
__ty≥
);

218 
√ã¡
 *
	`gë√tby«me
 (
__c⁄°
 *
__«me
);

220 #ifdef 
__USE_MISC


231 
	`gë√ã¡_r
 (
√ã¡
 *
__ª°ri˘
 
__ªsu…_buf
,

232 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

233 
√ã¡
 **
__ª°ri˘
 
__ªsu…
,

234 *
__ª°ri˘
 
__h_î∫›
);

236 
	`gë√tbyaddr_r
 (
uöt32_t
 
__√t
, 
__ty≥
,

237 
√ã¡
 *
__ª°ri˘
 
__ªsu…_buf
,

238 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

239 
√ã¡
 **
__ª°ri˘
 
__ªsu…
,

240 *
__ª°ri˘
 
__h_î∫›
);

242 
	`gë√tby«me_r
 (
__c⁄°
 *
__ª°ri˘
 
__«me
,

243 
√ã¡
 *
__ª°ri˘
 
__ªsu…_buf
,

244 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

245 
√ã¡
 **
__ª°ri˘
 
__ªsu…
,

246 *
__ª°ri˘
 
__h_î∫›
);

251 
	s£rvít


253 *
s_«me
;

254 **
s_Æü£s
;

255 
s_p‹t
;

256 *
s_¥Ÿo
;

264 
	`£t£rvít
 (
__°ay_›í
);

270 
	`íd£rvít
 ();

277 
£rvít
 *
	`gë£rvít
 ();

284 
£rvít
 *
	`gë£rvby«me
 (
__c⁄°
 *
__«me
,

285 
__c⁄°
 *
__¥Ÿo
);

292 
£rvít
 *
	`gë£rvbyp‹t
 (
__p‹t
, 
__c⁄°
 *
__¥Ÿo
);

295 #ifdef 
__USE_MISC


303 
	`gë£rvít_r
 (
£rvít
 *
__ª°ri˘
 
__ªsu…_buf
,

304 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

305 
£rvít
 **
__ª°ri˘
 
__ªsu…
);

307 
	`gë£rvby«me_r
 (
__c⁄°
 *
__ª°ri˘
 
__«me
,

308 
__c⁄°
 *
__ª°ri˘
 
__¥Ÿo
,

309 
£rvít
 *
__ª°ri˘
 
__ªsu…_buf
,

310 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

311 
£rvít
 **
__ª°ri˘
 
__ªsu…
);

313 
	`gë£rvbyp‹t_r
 (
__p‹t
, 
__c⁄°
 *
__ª°ri˘
 
__¥Ÿo
,

314 
£rvít
 *
__ª°ri˘
 
__ªsu…_buf
,

315 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

316 
£rvít
 **
__ª°ri˘
 
__ªsu…
);

321 
	s¥Ÿ€¡


323 *
p_«me
;

324 **
p_Æü£s
;

325 
p_¥Ÿo
;

333 
	`£çrŸ€¡
 (
__°ay_›í
);

339 
	`íd¥Ÿ€¡
 ();

346 
¥Ÿ€¡
 *
	`gë¥Ÿ€¡
 ();

352 
¥Ÿ€¡
 *
	`gë¥Ÿoby«me
 (
__c⁄°
 *
__«me
);

358 
¥Ÿ€¡
 *
	`gë¥Ÿobynumbî
 (
__¥Ÿo
);

361 #ifdef 
__USE_MISC


369 
	`gë¥Ÿ€¡_r
 (
¥Ÿ€¡
 *
__ª°ri˘
 
__ªsu…_buf
,

370 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

371 
¥Ÿ€¡
 **
__ª°ri˘
 
__ªsu…
);

373 
	`gë¥Ÿoby«me_r
 (
__c⁄°
 *
__ª°ri˘
 
__«me
,

374 
¥Ÿ€¡
 *
__ª°ri˘
 
__ªsu…_buf
,

375 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

376 
¥Ÿ€¡
 **
__ª°ri˘
 
__ªsu…
);

378 
	`gë¥Ÿobynumbî_r
 (
__¥Ÿo
,

379 
¥Ÿ€¡
 *
__ª°ri˘
 
__ªsu…_buf
,

380 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

381 
¥Ÿ€¡
 **
__ª°ri˘
 
__ªsu…
);

390 
	`£äëgª¡
 (
__c⁄°
 *
__√tgroup
);

398 
	`íd√tgª¡
 ();

407 
	`gë√tgª¡
 (**
__ª°ri˘
 
__ho°p
,

408 **
__ª°ri˘
 
__u£Ω
,

409 **
__ª°ri˘
 
__domaöp
);

418 
	`ö√tgr
 (
__c⁄°
 *
__√tgroup
, __c⁄° *
__ho°
,

419 
__c⁄°
 *
__u£r
, __c⁄° *
domaö
);

427 
	`gë√tgª¡_r
 (**
__ª°ri˘
 
__ho°p
,

428 **
__ª°ri˘
 
__u£Ω
,

429 **
__ª°ri˘
 
__domaöp
,

430 *
__ª°ri˘
 
__buf„r
, 
size_t
 
__buÊí
);

434 #ifde‡
__USE_BSD


446 
	`rcmd
 (**
__ª°ri˘
 
__aho°
, 
__Ω‹t
,

447 
__c⁄°
 *
__ª°ri˘
 
__locu£r
,

448 
__c⁄°
 *
__ª°ri˘
 
__ªmu£r
,

449 
__c⁄°
 *
__ª°ri˘
 
__cmd
, *__ª°ri˘ 
__fd2p
);

458 
	`rcmd_af
 (**
__ª°ri˘
 
__aho°
, 
__Ω‹t
,

459 
__c⁄°
 *
__ª°ri˘
 
__locu£r
,

460 
__c⁄°
 *
__ª°ri˘
 
__ªmu£r
,

461 
__c⁄°
 *
__ª°ri˘
 
__cmd
, *__ª°ri˘ 
__fd2p
,

462 
ß_Ámûy_t
 
__af
);

474 
	`ªxec
 (**
__ª°ri˘
 
__aho°
, 
__Ω‹t
,

475 
__c⁄°
 *
__ª°ri˘
 
__«me
,

476 
__c⁄°
 *
__ª°ri˘
 
__∑ss
,

477 
__c⁄°
 *
__ª°ri˘
 
__cmd
, *__ª°ri˘ 
__fd2p
);

486 
	`ªxec_af
 (**
__ª°ri˘
 
__aho°
, 
__Ω‹t
,

487 
__c⁄°
 *
__ª°ri˘
 
__«me
,

488 
__c⁄°
 *
__ª°ri˘
 
__∑ss
,

489 
__c⁄°
 *
__ª°ri˘
 
__cmd
, *__ª°ri˘ 
__fd2p
,

490 
ß_Ámûy_t
 
__af
);

500 
	`ru£rok
 (
__c⁄°
 *
__rho°
, 
__su£r
,

501 
__c⁄°
 *
__ªmu£r
, __c⁄° *
__locu£r
);

510 
	`ru£rok_af
 (
__c⁄°
 *
__rho°
, 
__su£r
,

511 
__c⁄°
 *
__ªmu£r
, __c⁄° *
__locu£r
,

512 
ß_Ámûy_t
 
__af
);

522 
	`ºesvp‹t
 (*
__Æp‹t
);

531 
	`ºesvp‹t_af
 (*
__Æp‹t
, 
ß_Ámûy_t
 
__af
);

536 #ifdef 
__USE_POSIX


538 
	saddröfo


540 
ai_Êags
;

541 
ai_Ámûy
;

542 
ai_sockty≥
;

543 
ai_¥Ÿocﬁ
;

544 
sockÀn_t
 
ai_addæí
;

545 
sockaddr
 *
ai_addr
;

546 *
ai_ˇn⁄«me
;

547 
addröfo
 *
ai_√xt
;

550 #ifde‡
__USE_GNU


552 
	sgaicb


554 c⁄° *
¨_«me
;

555 c⁄° *
¨_£rvi˚
;

556 c⁄° 
addröfo
 *
¨_ªque°
;

557 
addröfo
 *
¨_ªsu…
;

559 
__ªtu∫
;

560 
__unu£d
[5];

564 
	#GAI_WAIT
 0

	)

565 
	#GAI_NOWAIT
 1

	)

569 
	#AI_PASSIVE
 0x0001

	)

570 
	#AI_CANONNAME
 0x0002

	)

571 
	#AI_NUMERICHOST
 0x0004

	)

572 
	#AI_V4MAPPED
 0x0008

	)

573 
	#AI_ALL
 0x0010

	)

574 
	#AI_ADDRCONFIG
 0x0020

	)

576 #ifde‡
__USE_GNU


577 
	#AI_IDN
 0x0040

	)

580 
	#AI_CANONIDN
 0x0080

	)

581 
	#AI_IDN_ALLOW_UNASSIGNED
 0x0100

	)

583 
	#AI_IDN_USE_STD3_ASCII_RULES
 0x0200

	)

586 
	#AI_NUMERICSERV
 0x0400

	)

589 
	#EAI_BADFLAGS
 -1

	)

590 
	#EAI_NONAME
 -2

	)

591 
	#EAI_AGAIN
 -3

	)

592 
	#EAI_FAIL
 -4

	)

593 
	#EAI_NODATA
 -5

	)

594 
	#EAI_FAMILY
 -6

	)

595 
	#EAI_SOCKTYPE
 -7

	)

596 
	#EAI_SERVICE
 -8

	)

597 
	#EAI_ADDRFAMILY
 -9

	)

598 
	#EAI_MEMORY
 -10

	)

599 
	#EAI_SYSTEM
 -11

	)

600 
	#EAI_OVERFLOW
 -12

	)

601 #ifde‡
__USE_GNU


602 
	#EAI_INPROGRESS
 -100

	)

603 
	#EAI_CANCELED
 -101

	)

604 
	#EAI_NOTCANCELED
 -102

	)

605 
	#EAI_ALLDONE
 -103

	)

606 
	#EAI_INTR
 -104

	)

607 
	#EAI_IDN_ENCODE
 -105

	)

610 
	#NI_MAXHOST
 1025

	)

611 
	#NI_MAXSERV
 32

	)

613 
	#NI_NUMERICHOST
 1

	)

614 
	#NI_NUMERICSERV
 2

	)

615 
	#NI_NOFQDN
 4

	)

616 
	#NI_NAMEREQD
 8

	)

617 
	#NI_DGRAM
 16

	)

618 #ifde‡
__USE_GNU


619 
	#NI_IDN
 32

	)

620 
	#NI_IDN_ALLOW_UNASSIGNED
 64

	)

622 
	#NI_IDN_USE_STD3_ASCII_RULES
 128

	)

631 
	`gëaddröfo
 (
__c⁄°
 *
__ª°ri˘
 
__«me
,

632 
__c⁄°
 *
__ª°ri˘
 
__£rvi˚
,

633 
__c⁄°
 
addröfo
 *
__ª°ri˘
 
__ªq
,

634 
addröfo
 **
__ª°ri˘
 
__∑i
);

637 
	$‰ìaddröfo
 (
addröfo
 *
__ai
Ë
__THROW
;

640 
__c⁄°
 *
	$gai_°ªº‹
 (
__ecode
Ë
__THROW
;

646 
	`gë«meöfo
 (
__c⁄°
 
sockaddr
 *
__ª°ri˘
 
__ß
,

647 
sockÀn_t
 
__ßÀn
, *
__ª°ri˘
 
__ho°
,

648 
sockÀn_t
 
__ho°Àn
, *
__ª°ri˘
 
__£rv
,

649 
sockÀn_t
 
__£rvÀn
, 
__Êags
);

652 #ifde‡
__USE_GNU


661 
	`gëaddröfo_a
 (
__mode
, 
gaicb
 *
__li°
[
__ª°ri˘_¨r
],

662 
__ít
, 
sigevít
 *
__ª°ri˘
 
__sig
);

672 
	`gai_su•íd
 (
__c⁄°
 
gaicb
 *__c⁄° 
__li°
[], 
__ít
,

673 
__c⁄°
 
time•ec
 *
__timeout
);

676 
	$gai_îr‹
 (
gaicb
 *
__ªq
Ë
__THROW
;

679 
	$gai_ˇn˚l
 (
gaicb
 *
__gaicbp
Ë
__THROW
;

682 
__END_DECLS


	@/usr/include/netinet/in.h

19 #i‚def 
_NETINET_IN_H


20 
	#_NETINET_IN_H
 1

	)

22 
	~<„©uªs.h
>

23 
	~<°döt.h
>

24 
	~<sys/sockë.h
>

25 
	~<bôs/ty≥s.h
>

28 
__BEGIN_DECLS


33 
	mIPPROTO_IP
 = 0,

34 
	#IPPROTO_IP
 
IPPROTO_IP


	)

35 
	mIPPROTO_HOPOPTS
 = 0,

36 
	#IPPROTO_HOPOPTS
 
IPPROTO_HOPOPTS


	)

37 
	mIPPROTO_ICMP
 = 1,

38 
	#IPPROTO_ICMP
 
IPPROTO_ICMP


	)

39 
	mIPPROTO_IGMP
 = 2,

40 
	#IPPROTO_IGMP
 
IPPROTO_IGMP


	)

41 
	mIPPROTO_IPIP
 = 4,

42 
	#IPPROTO_IPIP
 
IPPROTO_IPIP


	)

43 
	mIPPROTO_TCP
 = 6,

44 
	#IPPROTO_TCP
 
IPPROTO_TCP


	)

45 
	mIPPROTO_EGP
 = 8,

46 
	#IPPROTO_EGP
 
IPPROTO_EGP


	)

47 
	mIPPROTO_PUP
 = 12,

48 
	#IPPROTO_PUP
 
IPPROTO_PUP


	)

49 
	mIPPROTO_UDP
 = 17,

50 
	#IPPROTO_UDP
 
IPPROTO_UDP


	)

51 
	mIPPROTO_IDP
 = 22,

52 
	#IPPROTO_IDP
 
IPPROTO_IDP


	)

53 
	mIPPROTO_TP
 = 29,

54 
	#IPPROTO_TP
 
IPPROTO_TP


	)

55 
	mIPPROTO_IPV6
 = 41,

56 
	#IPPROTO_IPV6
 
IPPROTO_IPV6


	)

57 
	mIPPROTO_ROUTING
 = 43,

58 
	#IPPROTO_ROUTING
 
IPPROTO_ROUTING


	)

59 
	mIPPROTO_FRAGMENT
 = 44,

60 
	#IPPROTO_FRAGMENT
 
IPPROTO_FRAGMENT


	)

61 
	mIPPROTO_RSVP
 = 46,

62 
	#IPPROTO_RSVP
 
IPPROTO_RSVP


	)

63 
	mIPPROTO_GRE
 = 47,

64 
	#IPPROTO_GRE
 
IPPROTO_GRE


	)

65 
	mIPPROTO_ESP
 = 50,

66 
	#IPPROTO_ESP
 
IPPROTO_ESP


	)

67 
	mIPPROTO_AH
 = 51,

68 
	#IPPROTO_AH
 
IPPROTO_AH


	)

69 
	mIPPROTO_ICMPV6
 = 58,

70 
	#IPPROTO_ICMPV6
 
IPPROTO_ICMPV6


	)

71 
	mIPPROTO_NONE
 = 59,

72 
	#IPPROTO_NONE
 
IPPROTO_NONE


	)

73 
	mIPPROTO_DSTOPTS
 = 60,

74 
	#IPPROTO_DSTOPTS
 
IPPROTO_DSTOPTS


	)

75 
	mIPPROTO_MTP
 = 92,

76 
	#IPPROTO_MTP
 
IPPROTO_MTP


	)

77 
	mIPPROTO_ENCAP
 = 98,

78 
	#IPPROTO_ENCAP
 
IPPROTO_ENCAP


	)

79 
	mIPPROTO_PIM
 = 103,

80 
	#IPPROTO_PIM
 
IPPROTO_PIM


	)

81 
	mIPPROTO_COMP
 = 108,

82 
	#IPPROTO_COMP
 
IPPROTO_COMP


	)

83 
	mIPPROTO_SCTP
 = 132,

84 
	#IPPROTO_SCTP
 
IPPROTO_SCTP


	)

85 
	mIPPROTO_RAW
 = 255,

86 
	#IPPROTO_RAW
 
IPPROTO_RAW


	)

87 
	mIPPROTO_MAX


92 
uöt16_t
 
	tö_p‹t_t
;

97 
	mIPPORT_ECHO
 = 7,

98 
	mIPPORT_DISCARD
 = 9,

99 
	mIPPORT_SYSTAT
 = 11,

100 
	mIPPORT_DAYTIME
 = 13,

101 
	mIPPORT_NETSTAT
 = 15,

102 
	mIPPORT_FTP
 = 21,

103 
	mIPPORT_TELNET
 = 23,

104 
	mIPPORT_SMTP
 = 25,

105 
	mIPPORT_TIMESERVER
 = 37,

106 
	mIPPORT_NAMESERVER
 = 42,

107 
	mIPPORT_WHOIS
 = 43,

108 
	mIPPORT_MTP
 = 57,

110 
	mIPPORT_TFTP
 = 69,

111 
	mIPPORT_RJE
 = 77,

112 
	mIPPORT_FINGER
 = 79,

113 
	mIPPORT_TTYLINK
 = 87,

114 
	mIPPORT_SUPDUP
 = 95,

117 
	mIPPORT_EXECSERVER
 = 512,

118 
	mIPPORT_LOGINSERVER
 = 513,

119 
	mIPPORT_CMDSERVER
 = 514,

120 
	mIPPORT_EFSSERVER
 = 520,

123 
	mIPPORT_BIFFUDP
 = 512,

124 
	mIPPORT_WHOSERVER
 = 513,

125 
	mIPPORT_ROUTESERVER
 = 520,

128 
	mIPPORT_RESERVED
 = 1024,

131 
	mIPPORT_USERRESERVED
 = 5000

136 
uöt32_t
 
	tö_addr_t
;

137 
	sö_addr


139 
ö_addr_t
 
	ms_addr
;

148 
	#IN_CLASSA
(
a
Ë((((
ö_addr_t
)◊)Ë& 0x80000000Ë=0)

	)

149 
	#IN_CLASSA_NET
 0xff000000

	)

150 
	#IN_CLASSA_NSHIFT
 24

	)

151 
	#IN_CLASSA_HOST
 (0xfffffff‡& ~
IN_CLASSA_NET
)

	)

152 
	#IN_CLASSA_MAX
 128

	)

154 
	#IN_CLASSB
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xc0000000Ë=0x80000000)

	)

155 
	#IN_CLASSB_NET
 0xffff0000

	)

156 
	#IN_CLASSB_NSHIFT
 16

	)

157 
	#IN_CLASSB_HOST
 (0xfffffff‡& ~
IN_CLASSB_NET
)

	)

158 
	#IN_CLASSB_MAX
 65536

	)

160 
	#IN_CLASSC
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xe0000000Ë=0xc0000000)

	)

161 
	#IN_CLASSC_NET
 0xffffff00

	)

162 
	#IN_CLASSC_NSHIFT
 8

	)

163 
	#IN_CLASSC_HOST
 (0xfffffff‡& ~
IN_CLASSC_NET
)

	)

165 
	#IN_CLASSD
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xf0000000Ë=0xe0000000)

	)

166 
	#IN_MULTICAST
(
a
Ë
	`IN_CLASSD
◊)

	)

168 
	#IN_EXPERIMENTAL
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xe0000000Ë=0xe0000000)

	)

169 
	#IN_BADCLASS
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xf0000000Ë=0xf0000000)

	)

172 
	#INADDR_ANY
 ((
ö_addr_t
Ë0x00000000)

	)

174 
	#INADDR_BROADCAST
 ((
ö_addr_t
Ë0xffffffff)

	)

176 
	#INADDR_NONE
 ((
ö_addr_t
Ë0xffffffff)

	)

179 
	#IN_LOOPBACKNET
 127

	)

181 #i‚de‡
INADDR_LOOPBACK


182 
	#INADDR_LOOPBACK
 ((
ö_addr_t
Ë0x7f000001Ë

	)

186 
	#INADDR_UNSPEC_GROUP
 ((
ö_addr_t
Ë0xe0000000Ë

	)

187 
	#INADDR_ALLHOSTS_GROUP
 ((
ö_addr_t
Ë0xe0000001Ë

	)

188 
	#INADDR_ALLRTRS_GROUP
 ((
ö_addr_t
Ë0xe0000002Ë

	)

189 
	#INADDR_MAX_LOCAL_GROUP
 ((
ö_addr_t
Ë0xe00000ffË

	)

193 
	sö6_addr


197 
uöt8_t
 
	mu6_addr8
[16];

198 
uöt16_t
 
	mu6_addr16
[8];

199 
uöt32_t
 
	mu6_addr32
[4];

200 } 
	mö6_u
;

201 
	#s6_addr
 
ö6_u
.
u6_addr8


	)

202 
	#s6_addr16
 
ö6_u
.
u6_addr16


	)

203 
	#s6_addr32
 
ö6_u
.
u6_addr32


	)

206 c⁄° 
ö6_addr
 
ö6addr_™y
;

207 c⁄° 
ö6_addr
 
ö6addr_lo›back
;

208 
	#IN6ADDR_ANY_INIT
 { { { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 } } }

	)

209 
	#IN6ADDR_LOOPBACK_INIT
 { { { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1 } } }

	)

211 
	#INET_ADDRSTRLEN
 16

	)

212 
	#INET6_ADDRSTRLEN
 46

	)

215 
	~<bôs/sockë.h
>

219 
	ssockaddr_ö


221 
__SOCKADDR_COMMON
 (
sö_
);

222 
ö_p‹t_t
 
	msö_p‹t
;

223 
ö_addr
 
	msö_addr
;

226 
	msö_zîo
[ (
sockaddr
) -

227 
__SOCKADDR_COMMON_SIZE
 -

228  (
ö_p‹t_t
) -

229  (
ö_addr
)];

233 
	ssockaddr_ö6


235 
__SOCKADDR_COMMON
 (
sö6_
);

236 
ö_p‹t_t
 
	msö6_p‹t
;

237 
uöt32_t
 
	msö6_Êowöfo
;

238 
ö6_addr
 
	msö6_addr
;

239 
uöt32_t
 
	msö6_sc›e_id
;

244 
	sù_mªq


247 
ö_addr
 
	mimr_mu…üddr
;

250 
ö_addr
 
	mimr_öãrÁ˚
;

253 
	sù_mªq_sour˚


256 
ö_addr
 
	mimr_mu…üddr
;

259 
ö_addr
 
	mimr_öãrÁ˚
;

262 
ö_addr
 
	mimr_sour˚addr
;

266 
	sùv6_mªq


269 
ö6_addr
 
	mùv6mr_mu…üddr
;

272 
	mùv6mr_öãrÁ˚
;

277 
	sgroup_ªq


280 
uöt32_t
 
	mgr_öãrÁ˚
;

283 
sockaddr_°‹age
 
	mgr_group
;

286 
	sgroup_sour˚_ªq


289 
uöt32_t
 
	mg§_öãrÁ˚
;

292 
sockaddr_°‹age
 
	mg§_group
;

295 
sockaddr_°‹age
 
	mg§_sour˚
;

300 
	sù_msfûãr


303 
ö_addr
 
	mimsf_mu…üddr
;

306 
ö_addr
 
	mimsf_öãrÁ˚
;

309 
uöt32_t
 
	mimsf_fmode
;

312 
uöt32_t
 
	mimsf_num§c
;

314 
ö_addr
 
	mimsf_¶i°
[1];

317 
	#IP_MSFILTER_SIZE
(
num§c
Ë( (
ù_msfûãr
) \

318 -  (
ö_addr
) \

319 + (
num§c
Ë*  (
ö_addr
))

	)

321 
	sgroup_fûãr


324 
uöt32_t
 
	mgf_öãrÁ˚
;

327 
sockaddr_°‹age
 
	mgf_group
;

330 
uöt32_t
 
	mgf_fmode
;

333 
uöt32_t
 
	mgf_num§c
;

335 
sockaddr_°‹age
 
	mgf_¶i°
[1];

338 
	#GROUP_FILTER_SIZE
(
num§c
Ë( (
group_fûãr
) \

339 -  (
sockaddr_°‹age
) \

340 + ((
num§c
) \

341 *  (
sockaddr_°‹age
)))

	)

345 
	~<bôs/ö.h
>

354 
uöt32_t
 
	$¡ohl
 (
uöt32_t
 
__√é⁄g
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

355 
uöt16_t
 
	$¡ohs
 (
uöt16_t
 
__√tsh‹t
)

356 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

357 
uöt32_t
 
	$ht⁄l
 (
uöt32_t
 
__ho°l⁄g
)

358 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

359 
uöt16_t
 
	$ht⁄s
 (
uöt16_t
 
__ho°sh‹t
)

360 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

362 
	~<ídün.h
>

365 
	~<bôs/byãsw≠.h
>

367 #ifde‡
__OPTIMIZE__


371 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


374 
	#¡ohl
(
x
Ë(x)

	)

375 
	#¡ohs
(
x
Ë(x)

	)

376 
	#ht⁄l
(
x
Ë(x)

	)

377 
	#ht⁄s
(
x
Ë(x)

	)

379 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


380 
	#¡ohl
(
x
Ë
	`__bsw≠_32
 (x)

	)

381 
	#¡ohs
(
x
Ë
	`__bsw≠_16
 (x)

	)

382 
	#ht⁄l
(
x
Ë
	`__bsw≠_32
 (x)

	)

383 
	#ht⁄s
(
x
Ë
	`__bsw≠_16
 (x)

	)

388 
	#IN6_IS_ADDR_UNSPECIFIED
(
a
) \

389 (((
__c⁄°
 
uöt32_t
 *Ë(
a
))[0] == 0 \

390 && ((
__c⁄°
 
uöt32_t
 *Ë(
a
))[1] == 0 \

391 && ((
__c⁄°
 
uöt32_t
 *Ë(
a
))[2] == 0 \

392 && ((
__c⁄°
 
uöt32_t
 *Ë(
a
))[3] =0)

	)

394 
	#IN6_IS_ADDR_LOOPBACK
(
a
) \

395 (((
__c⁄°
 
uöt32_t
 *Ë(
a
))[0] == 0 \

396 && ((
__c⁄°
 
uöt32_t
 *Ë(
a
))[1] == 0 \

397 && ((
__c⁄°
 
uöt32_t
 *Ë(
a
))[2] == 0 \

398 && ((
__c⁄°
 
uöt32_t
 *Ë(
a
))[3] =
	`ht⁄l
 (1))

	)

400 
	#IN6_IS_ADDR_MULTICAST
(
a
Ë(((
__c⁄°
 
uöt8_t
 *Ë◊))[0] =0xff)

	)

402 
	#IN6_IS_ADDR_LINKLOCAL
(
a
) \

403 ((((
__c⁄°
 
uöt32_t
 *Ë(
a
))[0] & 
	`ht⁄l
 (0xffc00000)) \

404 =
	`ht⁄l
 (0x„800000))

	)

406 
	#IN6_IS_ADDR_SITELOCAL
(
a
) \

407 ((((
__c⁄°
 
uöt32_t
 *Ë(
a
))[0] & 
	`ht⁄l
 (0xffc00000)) \

408 =
	`ht⁄l
 (0x„c00000))

	)

410 
	#IN6_IS_ADDR_V4MAPPED
(
a
) \

411 ((((
__c⁄°
 
uöt32_t
 *Ë(
a
))[0] == 0) \

412 && (((
__c⁄°
 
uöt32_t
 *Ë(
a
))[1] == 0) \

413 && (((
__c⁄°
 
uöt32_t
 *Ë(
a
))[2] =
	`ht⁄l
 (0xffff)))

	)

415 
	#IN6_IS_ADDR_V4COMPAT
(
a
) \

416 ((((
__c⁄°
 
uöt32_t
 *Ë(
a
))[0] == 0) \

417 && (((
__c⁄°
 
uöt32_t
 *Ë(
a
))[1] == 0) \

418 && (((
__c⁄°
 
uöt32_t
 *Ë(
a
))[2] == 0) \

419 && (
	`¡ohl
 (((
__c⁄°
 
uöt32_t
 *Ë(
a
))[3]Ë> 1))

	)

421 
	#IN6_ARE_ADDR_EQUAL
(
a
,
b
) \

422 ((((
__c⁄°
 
uöt32_t
 *Ë(
a
))[0] =((__c⁄° uöt32_à*Ë(
b
))[0]) \

423 && (((
__c⁄°
 
uöt32_t
 *Ë(
a
))[1] =((__c⁄° uöt32_à*Ë(
b
))[1]) \

424 && (((
__c⁄°
 
uöt32_t
 *Ë(
a
))[2] =((__c⁄° uöt32_à*Ë(
b
))[2]) \

425 && (((
__c⁄°
 
uöt32_t
 *Ë(
a
))[3] =((__c⁄° uöt32_à*Ë(
b
))[3]))

	)

428 
	$bödªsvp‹t
 (
__sockfd
, 
sockaddr_ö
 *
__sock_ö
Ë
__THROW
;

431 
	$bödªsvp‹t6
 (
__sockfd
, 
sockaddr_ö6
 *
__sock_ö
)

432 
__THROW
;

435 
	#IN6_IS_ADDR_MC_NODELOCAL
(
a
) \

436 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

437 && ((((
__c⁄°
 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0x1))

	)

439 
	#IN6_IS_ADDR_MC_LINKLOCAL
(
a
) \

440 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

441 && ((((
__c⁄°
 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0x2))

	)

443 
	#IN6_IS_ADDR_MC_SITELOCAL
(
a
) \

444 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

445 && ((((
__c⁄°
 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0x5))

	)

447 
	#IN6_IS_ADDR_MC_ORGLOCAL
(
a
) \

448 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

449 && ((((
__c⁄°
 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0x8))

	)

451 
	#IN6_IS_ADDR_MC_GLOBAL
(
a
) \

452 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

453 && ((((
__c⁄°
 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0xe))

	)

456 
	sö6_pktöfo


458 
ö6_addr
 
ùi6_addr
;

459 
ùi6_ifödex
;

463 
	sù6_mtuöfo


465 
sockaddr_ö6
 
ù6m_addr
;

466 
uöt32_t
 
ù6m_mtu
;

470 #ifde‡
__USE_GNU


472 
	$öë6_›ti⁄_•a˚
 (
__nbyãs
)

473 
__THROW
 
__©åibuã_dïªˇãd__
;

474 
	$öë6_›ti⁄_öô
 (*
__bp
, 
cmsghdr
 **
__cmsgp
,

475 
__ty≥
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

476 
	$öë6_›ti⁄_≠≥nd
 (
cmsghdr
 *
__cmsg
,

477 
__c⁄°
 
uöt8_t
 *
__ty≥p
, 
__mu…x
,

478 
__∂usy
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

479 
uöt8_t
 *
	$öë6_›ti⁄_Æloc
 (
cmsghdr
 *
__cmsg
, 
__d©Æí
,

480 
__mu…x
, 
__∂usy
)

481 
__THROW
 
__©åibuã_dïªˇãd__
;

482 
	$öë6_›ti⁄_√xt
 (
__c⁄°
 
cmsghdr
 *
__cmsg
,

483 
uöt8_t
 **
__çåp
)

484 
__THROW
 
__©åibuã_dïªˇãd__
;

485 
	$öë6_›ti⁄_föd
 (
__c⁄°
 
cmsghdr
 *
__cmsg
,

486 
uöt8_t
 **
__çåp
, 
__ty≥
)

487 
__THROW
 
__©åibuã_dïªˇãd__
;

491 
	$öë6_›t_öô
 (*
__extbuf
, 
sockÀn_t
 
__exéí
Ë
__THROW
;

492 
	$öë6_›t_≠≥nd
 (*
__extbuf
, 
sockÀn_t
 
__exéí
, 
__off£t
,

493 
uöt8_t
 
__ty≥
, 
sockÀn_t
 
__Àn
, uöt8_à
__Æign
,

494 **
__d©abuÂ
Ë
__THROW
;

495 
	$öë6_›t_föish
 (*
__extbuf
, 
sockÀn_t
 
__exéí
, 
__off£t
)

496 
__THROW
;

497 
	$öë6_›t_£t_vÆ
 (*
__d©abuf
, 
__off£t
, *
__vÆ
,

498 
sockÀn_t
 
__vÆÀn
Ë
__THROW
;

499 
	$öë6_›t_√xt
 (*
__extbuf
, 
sockÀn_t
 
__exéí
, 
__off£t
,

500 
uöt8_t
 *
__ty≥p
, 
sockÀn_t
 *
__À≈
,

501 **
__d©abuÂ
Ë
__THROW
;

502 
	$öë6_›t_föd
 (*
__extbuf
, 
sockÀn_t
 
__exéí
, 
__off£t
,

503 
uöt8_t
 
__ty≥
, 
sockÀn_t
 *
__À≈
,

504 **
__d©abuÂ
Ë
__THROW
;

505 
	$öë6_›t_gë_vÆ
 (*
__d©abuf
, 
__off£t
, *
__vÆ
,

506 
sockÀn_t
 
__vÆÀn
Ë
__THROW
;

510 
sockÀn_t
 
	$öë6_πh_•a˚
 (
__ty≥
, 
__£gmíts
Ë
__THROW
;

511 *
	$öë6_πh_öô
 (*
__bp
, 
sockÀn_t
 
__bp_Àn
, 
__ty≥
,

512 
__£gmíts
Ë
__THROW
;

513 
	$öë6_πh_add
 (*
__bp
, 
__c⁄°
 
ö6_addr
 *
__addr
Ë
__THROW
;

514 
	$öë6_πh_ªvî£
 (
__c⁄°
 *
__ö
, *
__out
Ë
__THROW
;

515 
	$öë6_πh_£gmíts
 (
__c⁄°
 *
__bp
Ë
__THROW
;

516 
ö6_addr
 *
	$öë6_πh_gëaddr
 (
__c⁄°
 *
__bp
, 
__ödex
)

517 
__THROW
;

523 
	$gëùv4sour˚fûãr
 (
__s
, 
ö_addr
 
__öãrÁ˚_addr
,

524 
ö_addr
 
__group
, 
uöt32_t
 *
__fmode
,

525 
uöt32_t
 *
__num§c
, 
ö_addr
 *
__¶i°
)

526 
__THROW
;

529 
	$£tùv4sour˚fûãr
 (
__s
, 
ö_addr
 
__öãrÁ˚_addr
,

530 
ö_addr
 
__group
, 
uöt32_t
 
__fmode
,

531 
uöt32_t
 
__num§c
,

532 
__c⁄°
 
ö_addr
 *
__¶i°
)

533 
__THROW
;

537 
	$gësour˚fûãr
 (
__s
, 
uöt32_t
 
__öãrÁ˚_addr
,

538 
__c⁄°
 
sockaddr
 *
__group
,

539 
sockÀn_t
 
__grou∂í
, 
uöt32_t
 *
__fmode
,

540 
uöt32_t
 *
__num§c
,

541 
sockaddr_°‹age
 *
__¶i°
Ë
__THROW
;

544 
	$£tsour˚fûãr
 (
__s
, 
uöt32_t
 
__öãrÁ˚_addr
,

545 
__c⁄°
 
sockaddr
 *
__group
,

546 
sockÀn_t
 
__grou∂í
, 
uöt32_t
 
__fmode
,

547 
uöt32_t
 
__num§c
,

548 
__c⁄°
 
sockaddr_°‹age
 *
__¶i°
Ë
__THROW
;

551 
__END_DECLS


	@/usr/include/netinet/tcp.h

32 #i‚de‡
_NETINET_TCP_H


33 
	#_NETINET_TCP_H
 1

	)

35 
	~<„©uªs.h
>

40 
	#TCP_NODELAY
 1

	)

41 
	#TCP_MAXSEG
 2

	)

42 
	#TCP_CORK
 3

	)

43 
	#TCP_KEEPIDLE
 4

	)

44 
	#TCP_KEEPINTVL
 5

	)

45 
	#TCP_KEEPCNT
 6

	)

46 
	#TCP_SYNCNT
 7

	)

47 
	#TCP_LINGER2
 8

	)

48 
	#TCP_DEFER_ACCEPT
 9

	)

49 
	#TCP_WINDOW_CLAMP
 10

	)

50 
	#TCP_INFO
 11

	)

51 
	#TCP_QUICKACK
 12

	)

52 
	#TCP_CONGESTION
 13

	)

54 #ifde‡
__USE_MISC


55 
	~<sys/ty≥s.h
>

57 #ifde‡
__FAVOR_BSD


58 
u_öt32_t
 
	tt˝_£q
;

63 
	st˝hdr


65 
u_öt16_t
 
	mth_•‹t
;

66 
u_öt16_t
 
	mth_dp‹t
;

67 
t˝_£q
 
	mth_£q
;

68 
t˝_£q
 
	mth_ack
;

69 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


70 
u_öt8_t
 
	mth_x2
:4;

71 
u_öt8_t
 
	mth_off
:4;

73 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


74 
u_öt8_t
 
	mth_off
:4;

75 
u_öt8_t
 
	mth_x2
:4;

77 
u_öt8_t
 
	mth_Êags
;

78 
	#TH_FIN
 0x01

	)

79 
	#TH_SYN
 0x02

	)

80 
	#TH_RST
 0x04

	)

81 
	#TH_PUSH
 0x08

	)

82 
	#TH_ACK
 0x10

	)

83 
	#TH_URG
 0x20

	)

84 
u_öt16_t
 
	mth_wö
;

85 
u_öt16_t
 
	mth_sum
;

86 
u_öt16_t
 
	mth_uΩ
;

90 
	st˝hdr


92 
u_öt16_t
 
	msour˚
;

93 
u_öt16_t
 
	mde°
;

94 
u_öt32_t
 
	m£q
;

95 
u_öt32_t
 
	mack_£q
;

96 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


97 
u_öt16_t
 
	mªs1
:4;

98 
u_öt16_t
 
	mdoff
:4;

99 
u_öt16_t
 
	mfö
:1;

100 
u_öt16_t
 
	msyn
:1;

101 
u_öt16_t
 
	mr°
:1;

102 
u_öt16_t
 
	mpsh
:1;

103 
u_öt16_t
 
	mack
:1;

104 
u_öt16_t
 
	murg
:1;

105 
u_öt16_t
 
	mªs2
:2;

106 #ñi‡
__BYTE_ORDER
 =
__BIG_ENDIAN


107 
u_öt16_t
 
	mdoff
:4;

108 
u_öt16_t
 
	mªs1
:4;

109 
u_öt16_t
 
	mªs2
:2;

110 
u_öt16_t
 
	murg
:1;

111 
u_öt16_t
 
	mack
:1;

112 
u_öt16_t
 
	mpsh
:1;

113 
u_öt16_t
 
	mr°
:1;

114 
u_öt16_t
 
	msyn
:1;

115 
u_öt16_t
 
	mfö
:1;

119 
u_öt16_t
 
	mwödow
;

120 
u_öt16_t
 
	mcheck
;

121 
u_öt16_t
 
	murg_±r
;

127 
	mTCP_ESTABLISHED
 = 1,

128 
	mTCP_SYN_SENT
,

129 
	mTCP_SYN_RECV
,

130 
	mTCP_FIN_WAIT1
,

131 
	mTCP_FIN_WAIT2
,

132 
	mTCP_TIME_WAIT
,

133 
	mTCP_CLOSE
,

134 
	mTCP_CLOSE_WAIT
,

135 
	mTCP_LAST_ACK
,

136 
	mTCP_LISTEN
,

137 
	mTCP_CLOSING


140 
	#TCPOPT_EOL
 0

	)

141 
	#TCPOPT_NOP
 1

	)

142 
	#TCPOPT_MAXSEG
 2

	)

143 
	#TCPOLEN_MAXSEG
 4

	)

144 
	#TCPOPT_WINDOW
 3

	)

145 
	#TCPOLEN_WINDOW
 3

	)

146 
	#TCPOPT_SACK_PERMITTED
 4

	)

147 
	#TCPOLEN_SACK_PERMITTED
 2

	)

148 
	#TCPOPT_SACK
 5

	)

149 
	#TCPOPT_TIMESTAMP
 8

	)

150 
	#TCPOLEN_TIMESTAMP
 10

	)

151 
	#TCPOLEN_TSTAMP_APPA
 (
TCPOLEN_TIMESTAMP
+2Ë

	)

153 
	#TCPOPT_TSTAMP_HDR
 \

154 (
TCPOPT_NOP
<<24|TCPOPT_NOP<<16|
TCPOPT_TIMESTAMP
<<8|
TCPOLEN_TIMESTAMP
)

	)

162 
	#TCP_MSS
 512

	)

164 
	#TCP_MAXWIN
 65535

	)

166 
	#TCP_MAX_WINSHIFT
 14

	)

168 
	#SOL_TCP
 6

	)

171 
	#TCPI_OPT_TIMESTAMPS
 1

	)

172 
	#TCPI_OPT_SACK
 2

	)

173 
	#TCPI_OPT_WSCALE
 4

	)

174 
	#TCPI_OPT_ECN
 8

	)

177 
	et˝_ˇ_°©e


179 
	mTCP_CA_O≥n
 = 0,

180 
	mTCP_CA_Dis‹dî
 = 1,

181 
	mTCP_CA_CWR
 = 2,

182 
	mTCP_CA_Recovîy
 = 3,

183 
	mTCP_CA_Loss
 = 4

186 
	st˝_öfo


188 
u_öt8_t
 
	mt˝i_°©e
;

189 
u_öt8_t
 
	mt˝i_ˇ_°©e
;

190 
u_öt8_t
 
	mt˝i_ªå™smôs
;

191 
u_öt8_t
 
	mt˝i_¥obes
;

192 
u_öt8_t
 
	mt˝i_backoff
;

193 
u_öt8_t
 
	mt˝i_›ti⁄s
;

194 
u_öt8_t
 
	mt˝i_¢d_wsˇÀ
 : 4, 
	mt˝i_rcv_wsˇÀ
 : 4;

196 
u_öt32_t
 
	mt˝i_πo
;

197 
u_öt32_t
 
	mt˝i_©o
;

198 
u_öt32_t
 
	mt˝i_¢d_mss
;

199 
u_öt32_t
 
	mt˝i_rcv_mss
;

201 
u_öt32_t
 
	mt˝i_u«cked
;

202 
u_öt32_t
 
	mt˝i_ßcked
;

203 
u_öt32_t
 
	mt˝i_lo°
;

204 
u_öt32_t
 
	mt˝i_ªå™s
;

205 
u_öt32_t
 
	mt˝i_Áckës
;

208 
u_öt32_t
 
	mt˝i_œ°_d©a_£¡
;

209 
u_öt32_t
 
	mt˝i_œ°_ack_£¡
;

210 
u_öt32_t
 
	mt˝i_œ°_d©a_ªcv
;

211 
u_öt32_t
 
	mt˝i_œ°_ack_ªcv
;

214 
u_öt32_t
 
	mt˝i_pmtu
;

215 
u_öt32_t
 
	mt˝i_rcv_s°hªsh
;

216 
u_öt32_t
 
	mt˝i_πt
;

217 
u_öt32_t
 
	mt˝i_πtv¨
;

218 
u_öt32_t
 
	mt˝i_¢d_s°hªsh
;

219 
u_öt32_t
 
	mt˝i_¢d_cwnd
;

220 
u_öt32_t
 
	mt˝i_advmss
;

221 
u_öt32_t
 
	mt˝i_ª‹dîög
;

	@/usr/include/png.h

331 #i‚de‡
PNG_H


332 
	#PNG_H


	)

341 
	#PNG_LIBPNG_VER_STRING
 "1.2.15bëa5"

	)

342 
	#PNG_HEADER_VERSION_STRING
 \

343 "Üib≤g vîsi⁄ 1.2.15bëa5 - De˚mbî 8, 2006 (hódî)\n"

	)

345 
	#PNG_LIBPNG_VER_SONUM
 0

	)

346 
	#PNG_LIBPNG_VER_DLLNUM
 13

	)

349 
	#PNG_LIBPNG_VER_MAJOR
 1

	)

350 
	#PNG_LIBPNG_VER_MINOR
 2

	)

351 
	#PNG_LIBPNG_VER_RELEASE
 15

	)

355 
	#PNG_LIBPNG_VER_BUILD
 5

	)

358 
	#PNG_LIBPNG_BUILD_ALPHA
 1

	)

359 
	#PNG_LIBPNG_BUILD_BETA
 2

	)

360 
	#PNG_LIBPNG_BUILD_RC
 3

	)

361 
	#PNG_LIBPNG_BUILD_STABLE
 4

	)

362 
	#PNG_LIBPNG_BUILD_RELEASE_STATUS_MASK
 7

	)

365 
	#PNG_LIBPNG_BUILD_PATCH
 8

	)

367 
	#PNG_LIBPNG_BUILD_PRIVATE
 16

	)

369 
	#PNG_LIBPNG_BUILD_SPECIAL
 32

	)

372 
	#PNG_LIBPNG_BUILD_BASE_TYPE
 
PNG_LIBPNG_BUILD_BETA


	)

379 
	#PNG_LIBPNG_VER
 10215

	)

381 #i‚de‡
PNG_VERSION_INFO_ONLY


383 
	~"zlib.h
"

387 
	~"≤gc⁄f.h
"

402 #i‡
deföed
(
PNG_USER_PRIVATEBUILD
)

403 
	#PNG_LIBPNG_BUILD_TYPE
 \

404 (
PNG_LIBPNG_BUILD_BASE_TYPE
 | 
PNG_LIBPNG_BUILD_PRIVATE
)

	)

406 #i‡
deföed
(
PNG_LIBPNG_SPECIALBUILD
)

407 
	#PNG_LIBPNG_BUILD_TYPE
 \

408 (
PNG_LIBPNG_BUILD_BASE_TYPE
 | 
PNG_LIBPNG_BUILD_SPECIAL
)

	)

410 
	#PNG_LIBPNG_BUILD_TYPE
 (
PNG_LIBPNG_BUILD_BASE_TYPE
)

	)

414 #i‚de‡
PNG_VERSION_INFO_ONLY


417 #ifde‡
__˝lu•lus


427 #i‚de‡
PNG_NO_TYPECAST_NULL


428 
	#öt_p_NULL
 (*)
NULL


	)

429 
	#≤g_byãp_NULL
 (
≤g_byãp
)
NULL


	)

430 
	#≤g_byãµ_NULL
 (
≤g_byãµ
)
NULL


	)

431 
	#≤g_doubÀp_NULL
 (
≤g_doubÀp
)
NULL


	)

432 
	#≤g_îr‹_±r_NULL
 (
≤g_îr‹_±r
)
NULL


	)

433 
	#≤g_Êush_±r_NULL
 (
≤g_Êush_±r
)
NULL


	)

434 
	#≤g_‰ì_±r_NULL
 (
≤g_‰ì_±r
)
NULL


	)

435 
	#≤g_öf›p_NULL
 (
≤g_öf›p
)
NULL


	)

436 
	#≤g_mÆloc_±r_NULL
 (
≤g_mÆloc_±r
)
NULL


	)

437 
	#≤g_ªad_°©us_±r_NULL
 (
≤g_ªad_°©us_±r
)
NULL


	)

438 
	#≤g_rw_±r_NULL
 (
≤g_rw_±r
)
NULL


	)

439 
	#≤g_°ru˘p_NULL
 (
≤g_°ru˘p
)
NULL


	)

440 
	#≤g_uöt_16p_NULL
 (
≤g_uöt_16p
)
NULL


	)

441 
	#≤g_voidp_NULL
 (
≤g_voidp
)
NULL


	)

442 
	#≤g_wrôe_°©us_±r_NULL
 (
≤g_wrôe_°©us_±r
)
NULL


	)

444 
	#öt_p_NULL
 
NULL


	)

445 
	#≤g_byãp_NULL
 
NULL


	)

446 
	#≤g_byãµ_NULL
 
NULL


	)

447 
	#≤g_doubÀp_NULL
 
NULL


	)

448 
	#≤g_îr‹_±r_NULL
 
NULL


	)

449 
	#≤g_Êush_±r_NULL
 
NULL


	)

450 
	#≤g_‰ì_±r_NULL
 
NULL


	)

451 
	#≤g_öf›p_NULL
 
NULL


	)

452 
	#≤g_mÆloc_±r_NULL
 
NULL


	)

453 
	#≤g_ªad_°©us_±r_NULL
 
NULL


	)

454 
	#≤g_rw_±r_NULL
 
NULL


	)

455 
	#≤g_°ru˘p_NULL
 
NULL


	)

456 
	#≤g_uöt_16p_NULL
 
NULL


	)

457 
	#≤g_voidp_NULL
 
NULL


	)

458 
	#≤g_wrôe_°©us_±r_NULL
 
NULL


	)

462 #i‡!
deföed
(
PNG_NO_EXTERN
Ë|| deföed(
PNG_ALWAYS_EXTERN
)

466 #ifde‡
PNG_USE_GLOBAL_ARRAYS


467 
PNG_EXPORT_VAR
 (c⁄° Ë
≤g_lib≤g_vî
[18];

470 
	#≤g_lib≤g_vî
 
	`≤g_gë_hódî_vî
(
NULL
)

	)

473 #ifde‡
PNG_USE_GLOBAL_ARRAYS


476 
PNG_EXPORT_VAR
 (c⁄° 
FARDATA
Ë
≤g_∑ss_°¨t
[7];

477 
PNG_EXPORT_VAR
 (c⁄° 
FARDATA
Ë
≤g_∑ss_öc
[7];

478 
PNG_EXPORT_VAR
 (c⁄° 
FARDATA
Ë
≤g_∑ss_y°¨t
[7];

479 
PNG_EXPORT_VAR
 (c⁄° 
FARDATA
Ë
≤g_∑ss_yöc
[7];

480 
PNG_EXPORT_VAR
 (c⁄° 
FARDATA
Ë
≤g_∑ss_mask
[7];

481 
PNG_EXPORT_VAR
 (c⁄° 
FARDATA
Ë
≤g_∑ss_d•_mask
[7];

482 #ifde‡
PNG_USE_PNGGCCRD


483 
PNG_EXPORT_VAR
 (c⁄° 
FARDATA
Ë
≤g_∑ss_width
[7];

496 
	s≤g_cﬁ‹_°ru˘


498 
≤g_byã
 
ªd
;

499 
≤g_byã
 
gªí
;

500 
≤g_byã
 
blue
;

501 } 
	t≤g_cﬁ‹
;

502 
≤g_cﬁ‹
 
	tFAR
 * 
	t≤g_cﬁ‹p
;

503 
≤g_cﬁ‹
 
	tFAR
 * FAR * 
	t≤g_cﬁ‹µ
;

505 
	s≤g_cﬁ‹_16_°ru˘


507 
≤g_byã
 
ödex
;

508 
≤g_uöt_16
 
ªd
;

509 
≤g_uöt_16
 
gªí
;

510 
≤g_uöt_16
 
blue
;

511 
≤g_uöt_16
 
gøy
;

512 } 
	t≤g_cﬁ‹_16
;

513 
≤g_cﬁ‹_16
 
	tFAR
 * 
	t≤g_cﬁ‹_16p
;

514 
≤g_cﬁ‹_16
 
	tFAR
 * FAR * 
	t≤g_cﬁ‹_16µ
;

516 
	s≤g_cﬁ‹_8_°ru˘


518 
≤g_byã
 
ªd
;

519 
≤g_byã
 
gªí
;

520 
≤g_byã
 
blue
;

521 
≤g_byã
 
gøy
;

522 
≤g_byã
 
Æpha
;

523 } 
	t≤g_cﬁ‹_8
;

524 
≤g_cﬁ‹_8
 
	tFAR
 * 
	t≤g_cﬁ‹_8p
;

525 
≤g_cﬁ‹_8
 
	tFAR
 * FAR * 
	t≤g_cﬁ‹_8µ
;

531 
	s≤g_sPLT_íåy_°ru˘


533 
≤g_uöt_16
 
ªd
;

534 
≤g_uöt_16
 
gªí
;

535 
≤g_uöt_16
 
blue
;

536 
≤g_uöt_16
 
Æpha
;

537 
≤g_uöt_16
 
‰equícy
;

538 } 
	t≤g_sPLT_íåy
;

539 
≤g_sPLT_íåy
 
	tFAR
 * 
	t≤g_sPLT_íåyp
;

540 
≤g_sPLT_íåy
 
	tFAR
 * FAR * 
	t≤g_sPLT_íåyµ
;

547 
	s≤g_sPLT_°ru˘


549 
≤g_ch¨p
 
«me
;

550 
≤g_byã
 
dïth
;

551 
≤g_sPLT_íåyp
 
íåõs
;

552 
≤g_öt_32
 
√¡rõs
;

553 } 
	t≤g_sPLT_t
;

554 
≤g_sPLT_t
 
	tFAR
 * 
	t≤g_sPLT_ç
;

555 
≤g_sPLT_t
 
	tFAR
 * FAR * 
	t≤g_sPLT_çp
;

557 #ifde‡
PNG_TEXT_SUPPORTED


566 
	s≤g_ãxt_°ru˘


568 
com¥essi⁄
;

573 
≤g_ch¨p
 
key
;

574 
≤g_ch¨p
 
ãxt
;

576 
≤g_size_t
 
ãxt_Àngth
;

577 #ifde‡
PNG_iTXt_SUPPORTED


578 
≤g_size_t
 
ôxt_Àngth
;

579 
≤g_ch¨p
 
œng
;

581 
≤g_ch¨p
 
œng_key
;

584 } 
	t≤g_ãxt
;

585 
≤g_ãxt
 
	tFAR
 * 
	t≤g_ãxç
;

586 
≤g_ãxt
 
	tFAR
 * FAR * 
	t≤g_ãxçp
;

591 
	#PNG_TEXT_COMPRESSION_NONE_WR
 -3

	)

592 
	#PNG_TEXT_COMPRESSION_zTXt_WR
 -2

	)

593 
	#PNG_TEXT_COMPRESSION_NONE
 -1

	)

594 
	#PNG_TEXT_COMPRESSION_zTXt
 0

	)

595 
	#PNG_ITXT_COMPRESSION_NONE
 1

	)

596 
	#PNG_ITXT_COMPRESSION_zTXt
 2

	)

597 
	#PNG_TEXT_COMPRESSION_LAST
 3

	)

605 
	s≤g_time_°ru˘


607 
≤g_uöt_16
 
yór
;

608 
≤g_byã
 
m⁄th
;

609 
≤g_byã
 
day
;

610 
≤g_byã
 
hour
;

611 
≤g_byã
 
möuã
;

612 
≤g_byã
 
£c⁄d
;

613 } 
	t≤g_time
;

614 
≤g_time
 
	tFAR
 * 
	t≤g_timï
;

615 
≤g_time
 
	tFAR
 * FAR * 
	t≤g_timïp
;

617 #i‡
deföed
(
PNG_UNKNOWN_CHUNKS_SUPPORTED
)

623 
	s≤g_unknown_chunk_t


625 
≤g_byã
 
«me
[5];

626 
≤g_byã
 *
d©a
;

627 
≤g_size_t
 
size
;

630 
≤g_byã
 
loˇti⁄
;

632 
	t≤g_unknown_chunk
;

633 
≤g_unknown_chunk
 
	tFAR
 * 
	t≤g_unknown_chunkp
;

634 
≤g_unknown_chunk
 
	tFAR
 * FAR * 
	t≤g_unknown_chunkµ
;

676 
	s≤g_öfo_°ru˘


679 
≤g_uöt_32
 
width
;

680 
≤g_uöt_32
 
height
;

681 
≤g_uöt_32
 
vÆid
;

682 
≤g_uöt_32
 
rowbyãs
;

683 
≤g_cﬁ‹p
 
∑Àâe
;

684 
≤g_uöt_16
 
num_∑Àâe
;

685 
≤g_uöt_16
 
num_å™s
;

686 
≤g_byã
 
bô_dïth
;

687 
≤g_byã
 
cﬁ‹_ty≥
;

689 
≤g_byã
 
com¥essi⁄_ty≥
;

690 
≤g_byã
 
fûãr_ty≥
;

691 
≤g_byã
 
öãæa˚_ty≥
;

694 
≤g_byã
 
ch™√ls
;

695 
≤g_byã
 
pixñ_dïth
;

696 
≤g_byã
 
•¨e_byã
;

697 
≤g_byã
 
sig«tuª
[8];

705 #i‡
deföed
(
PNG_gAMA_SUPPORTED
Ë&& deföed(
PNG_FLOATING_POINT_SUPPORTED
)

710 
gamma
;

713 #i‡
deföed
(
PNG_sRGB_SUPPORTED
)

716 
≤g_byã
 
§gb_öã¡
;

719 #i‡
deföed
(
PNG_TEXT_SUPPORTED
)

728 
num_ãxt
;

729 
max_ãxt
;

730 
≤g_ãxç
 
ãxt
;

733 #i‡
deföed
(
PNG_tIME_SUPPORTED
)

737 
≤g_time
 
mod_time
;

740 #i‡
deföed
(
PNG_sBIT_SUPPORTED
)

747 
≤g_cﬁ‹_8
 
sig_bô
;

750 #i‡
deföed
(
PNG_tRNS_SUPPORTED
Ë|| deföed(
PNG_READ_EXPAND_SUPPORTED
) || \

751 
deföed
(
PNG_READ_BACKGROUND_SUPPORTED
)

761 
≤g_byãp
 
å™s
;

762 
≤g_cﬁ‹_16
 
å™s_vÆues
;

765 #i‡
deföed
(
PNG_bKGD_SUPPORTED
Ë|| deföed(
PNG_READ_BACKGROUND_SUPPORTED
)

772 
≤g_cﬁ‹_16
 
background
;

775 #i‡
deföed
(
PNG_oFFs_SUPPORTED
)

781 
≤g_öt_32
 
x_off£t
;

782 
≤g_öt_32
 
y_off£t
;

783 
≤g_byã
 
off£t_unô_ty≥
;

786 #i‡
deföed
(
PNG_pHYs_SUPPORTED
)

791 
≤g_uöt_32
 
x_pixñs_≥r_unô
;

792 
≤g_uöt_32
 
y_pixñs_≥r_unô
;

793 
≤g_byã
 
phys_unô_ty≥
;

796 #i‡
deföed
(
PNG_hIST_SUPPORTED
)

803 
≤g_uöt_16p
 
hi°
;

806 #ifde‡
PNG_cHRM_SUPPORTED


813 #ifde‡
PNG_FLOATING_POINT_SUPPORTED


814 
x_whôe
;

815 
y_whôe
;

816 
x_ªd
;

817 
y_ªd
;

818 
x_gªí
;

819 
y_gªí
;

820 
x_blue
;

821 
y_blue
;

825 #i‡
deföed
(
PNG_pCAL_SUPPORTED
)

837 
≤g_ch¨p
 
pˇl_puΩo£
;

838 
≤g_öt_32
 
pˇl_X0
;

839 
≤g_öt_32
 
pˇl_X1
;

840 
≤g_ch¨p
 
pˇl_unôs
;

841 
≤g_ch¨µ
 
pˇl_∑øms
;

842 
≤g_byã
 
pˇl_ty≥
;

843 
≤g_byã
 
pˇl_≈¨ams
;

847 #ifde‡
PNG_FREE_ME_SUPPORTED


848 
≤g_uöt_32
 
‰ì_me
;

851 #i‡
deföed
(
PNG_UNKNOWN_CHUNKS_SUPPORTED
)

853 
≤g_unknown_chunkp
 
unknown_chunks
;

854 
≤g_size_t
 
unknown_chunks_num
;

857 #i‡
deföed
(
PNG_iCCP_SUPPORTED
)

859 
≤g_ch¨p
 
ic˝_«me
;

860 
≤g_ch¨p
 
ic˝_¥ofûe
;

862 
≤g_uöt_32
 
ic˝_¥oÊí
;

863 
≤g_byã
 
ic˝_com¥essi⁄
;

866 #i‡
deföed
(
PNG_sPLT_SUPPORTED
)

868 
≤g_sPLT_ç
 
•…_∑Àâes
;

869 
≤g_uöt_32
 
•…_∑Àâes_num
;

872 #i‡
deföed
(
PNG_sCAL_SUPPORTED
)

880 
≤g_byã
 
sˇl_unô
;

881 #ifde‡
PNG_FLOATING_POINT_SUPPORTED


882 
sˇl_pixñ_width
;

883 
sˇl_pixñ_height
;

885 #ifde‡
PNG_FIXED_POINT_SUPPORTED


886 
≤g_ch¨p
 
sˇl_s_width
;

887 
≤g_ch¨p
 
sˇl_s_height
;

891 #i‡
deföed
(
PNG_INFO_IMAGE_SUPPORTED
)

894 
≤g_byãµ
 
row_poöãrs
;

897 #i‡
deföed
(
PNG_FIXED_POINT_SUPPORTED
Ë&& deföed(
PNG_gAMA_SUPPORTED
)

898 
≤g_fixed_poöt
 
öt_gamma
;

901 #i‡
deföed
(
PNG_cHRM_SUPPORTED
Ë&& deföed(
PNG_FIXED_POINT_SUPPORTED
)

902 
≤g_fixed_poöt
 
öt_x_whôe
;

903 
≤g_fixed_poöt
 
öt_y_whôe
;

904 
≤g_fixed_poöt
 
öt_x_ªd
;

905 
≤g_fixed_poöt
 
öt_y_ªd
;

906 
≤g_fixed_poöt
 
öt_x_gªí
;

907 
≤g_fixed_poöt
 
öt_y_gªí
;

908 
≤g_fixed_poöt
 
öt_x_blue
;

909 
≤g_fixed_poöt
 
öt_y_blue
;

912 } 
	t≤g_öfo
;

914 
≤g_öfo
 
	tFAR
 * 
	t≤g_öf›
;

915 
≤g_öfo
 
	tFAR
 * FAR * 
	t≤g_öf›p
;

918 
	#PNG_UINT_31_MAX
 ((
≤g_uöt_32
)0x7fffffffL)

	)

919 
	#PNG_UINT_32_MAX
 ((
≤g_uöt_32
)(-1))

	)

920 
	#PNG_SIZE_MAX
 ((
≤g_size_t
)(-1))

	)

921 #i‡
deföed
(
PNG_1_0_X
Ë|| deföed (
PNG_1_2_X
)

923 
	#PNG_MAX_UINT
 
PNG_UINT_31_MAX


	)

928 
	#PNG_COLOR_MASK_PALETTE
 1

	)

929 
	#PNG_COLOR_MASK_COLOR
 2

	)

930 
	#PNG_COLOR_MASK_ALPHA
 4

	)

933 
	#PNG_COLOR_TYPE_GRAY
 0

	)

934 
	#PNG_COLOR_TYPE_PALETTE
 (
PNG_COLOR_MASK_COLOR
 | 
PNG_COLOR_MASK_PALETTE
)

	)

935 
	#PNG_COLOR_TYPE_RGB
 (
PNG_COLOR_MASK_COLOR
)

	)

936 
	#PNG_COLOR_TYPE_RGB_ALPHA
 (
PNG_COLOR_MASK_COLOR
 | 
PNG_COLOR_MASK_ALPHA
)

	)

937 
	#PNG_COLOR_TYPE_GRAY_ALPHA
 (
PNG_COLOR_MASK_ALPHA
)

	)

939 
	#PNG_COLOR_TYPE_RGBA
 
PNG_COLOR_TYPE_RGB_ALPHA


	)

940 
	#PNG_COLOR_TYPE_GA
 
PNG_COLOR_TYPE_GRAY_ALPHA


	)

943 
	#PNG_COMPRESSION_TYPE_BASE
 0

	)

944 
	#PNG_COMPRESSION_TYPE_DEFAULT
 
PNG_COMPRESSION_TYPE_BASE


	)

947 
	#PNG_FILTER_TYPE_BASE
 0

	)

948 
	#PNG_INTRAPIXEL_DIFFERENCING
 64

	)

949 
	#PNG_FILTER_TYPE_DEFAULT
 
PNG_FILTER_TYPE_BASE


	)

952 
	#PNG_INTERLACE_NONE
 0

	)

953 
	#PNG_INTERLACE_ADAM7
 1

	)

954 
	#PNG_INTERLACE_LAST
 2

	)

957 
	#PNG_OFFSET_PIXEL
 0

	)

958 
	#PNG_OFFSET_MICROMETER
 1

	)

959 
	#PNG_OFFSET_LAST
 2

	)

962 
	#PNG_EQUATION_LINEAR
 0

	)

963 
	#PNG_EQUATION_BASE_E
 1

	)

964 
	#PNG_EQUATION_ARBITRARY
 2

	)

965 
	#PNG_EQUATION_HYPERBOLIC
 3

	)

966 
	#PNG_EQUATION_LAST
 4

	)

969 
	#PNG_SCALE_UNKNOWN
 0

	)

970 
	#PNG_SCALE_METER
 1

	)

971 
	#PNG_SCALE_RADIAN
 2

	)

972 
	#PNG_SCALE_LAST
 3

	)

975 
	#PNG_RESOLUTION_UNKNOWN
 0

	)

976 
	#PNG_RESOLUTION_METER
 1

	)

977 
	#PNG_RESOLUTION_LAST
 2

	)

980 
	#PNG_sRGB_INTENT_PERCEPTUAL
 0

	)

981 
	#PNG_sRGB_INTENT_RELATIVE
 1

	)

982 
	#PNG_sRGB_INTENT_SATURATION
 2

	)

983 
	#PNG_sRGB_INTENT_ABSOLUTE
 3

	)

984 
	#PNG_sRGB_INTENT_LAST
 4

	)

987 
	#PNG_KEYWORD_MAX_LENGTH
 79

	)

990 
	#PNG_MAX_PALETTE_LENGTH
 256

	)

997 
	#PNG_INFO_gAMA
 0x0001

	)

998 
	#PNG_INFO_sBIT
 0x0002

	)

999 
	#PNG_INFO_cHRM
 0x0004

	)

1000 
	#PNG_INFO_PLTE
 0x0008

	)

1001 
	#PNG_INFO_tRNS
 0x0010

	)

1002 
	#PNG_INFO_bKGD
 0x0020

	)

1003 
	#PNG_INFO_hIST
 0x0040

	)

1004 
	#PNG_INFO_pHYs
 0x0080

	)

1005 
	#PNG_INFO_oFFs
 0x0100

	)

1006 
	#PNG_INFO_tIME
 0x0200

	)

1007 
	#PNG_INFO_pCAL
 0x0400

	)

1008 
	#PNG_INFO_sRGB
 0x0800

	)

1009 
	#PNG_INFO_iCCP
 0x1000

	)

1010 
	#PNG_INFO_sPLT
 0x2000

	)

1011 
	#PNG_INFO_sCAL
 0x4000

	)

1012 
	#PNG_INFO_IDAT
 0x8000L

	)

1018 
	s≤g_row_öfo_°ru˘


1020 
≤g_uöt_32
 
width
;

1021 
≤g_uöt_32
 
rowbyãs
;

1022 
≤g_byã
 
cﬁ‹_ty≥
;

1023 
≤g_byã
 
bô_dïth
;

1024 
≤g_byã
 
ch™√ls
;

1025 
≤g_byã
 
pixñ_dïth
;

1026 } 
	t≤g_row_öfo
;

1028 
≤g_row_öfo
 
	tFAR
 * 
	t≤g_row_öf›
;

1029 
≤g_row_öfo
 
	tFAR
 * FAR * 
	t≤g_row_öf›p
;

1037 
≤g_°ru˘_def
 
	t≤g_°ru˘
;

1038 
≤g_°ru˘
 
	tFAR
 * 
	t≤g_°ru˘p
;

1040 (
PNGAPI
 *
	t≤g_îr‹_±r
Ë
	tPNGARG
((
	t≤g_°ru˘p
, 
	t≤g_c⁄°_ch¨p
));

1041 (
PNGAPI
 *
	t≤g_rw_±r
Ë
	tPNGARG
((
	t≤g_°ru˘p
, 
	t≤g_byãp
, 
	t≤g_size_t
));

1042 (
PNGAPI
 *
	t≤g_Êush_±r
Ë
	tPNGARG
((
	t≤g_°ru˘p
));

1043 (
PNGAPI
 *
	t≤g_ªad_°©us_±r
Ë
	tPNGARG
((
	t≤g_°ru˘p
, 
	t≤g_uöt_32
,

1045 (
PNGAPI
 *
	t≤g_wrôe_°©us_±r
Ë
	tPNGARG
((
	t≤g_°ru˘p
, 
	t≤g_uöt_32
,

1048 #ifde‡
PNG_PROGRESSIVE_READ_SUPPORTED


1049 (
PNGAPI
 *
	t≤g_¥ogªssive_öfo_±r
Ë
	tPNGARG
((
	t≤g_°ru˘p
, 
	t≤g_öf›
));

1050 (
PNGAPI
 *
	t≤g_¥ogªssive_íd_±r
Ë
	tPNGARG
((
	t≤g_°ru˘p
, 
	t≤g_öf›
));

1051 (
PNGAPI
 *
	t≤g_¥ogªssive_row_±r
Ë
	tPNGARG
((
	t≤g_°ru˘p
, 
	t≤g_byãp
,

1052 
	t≤g_uöt_32
, ));

1055 #i‡
deföed
(
PNG_READ_USER_TRANSFORM_SUPPORTED
) || \

1056 
deföed
(
PNG_WRITE_USER_TRANSFORM_SUPPORTED
) || \

1057 
deföed
(
PNG_LEGACY_SUPPORTED
)

1058 (
PNGAPI
 *
	t≤g_u£r_å™sf‹m_±r
Ë
	tPNGARG
((
	t≤g_°ru˘p
,

1059 
	t≤g_row_öf›
, 
	t≤g_byãp
));

1062 #i‡
deföed
(
PNG_USER_CHUNKS_SUPPORTED
)

1063 (
PNGAPI
 *
	t≤g_u£r_chunk_±r
Ë
	tPNGARG
((
	t≤g_°ru˘p
, 
	t≤g_unknown_chunkp
));

1065 #i‡
deföed
(
PNG_UNKNOWN_CHUNKS_SUPPORTED
)

1066 (
PNGAPI
 *
	t≤g_unknown_chunk_±r
Ë
	tPNGARG
((
	t≤g_°ru˘p
));

1070 
	#PNG_TRANSFORM_IDENTITY
 0x0000

	)

1071 
	#PNG_TRANSFORM_STRIP_16
 0x0001

	)

1072 
	#PNG_TRANSFORM_STRIP_ALPHA
 0x0002

	)

1073 
	#PNG_TRANSFORM_PACKING
 0x0004

	)

1074 
	#PNG_TRANSFORM_PACKSWAP
 0x0008

	)

1075 
	#PNG_TRANSFORM_EXPAND
 0x0010

	)

1076 
	#PNG_TRANSFORM_INVERT_MONO
 0x0020

	)

1077 
	#PNG_TRANSFORM_SHIFT
 0x0040

	)

1078 
	#PNG_TRANSFORM_BGR
 0x0080

	)

1079 
	#PNG_TRANSFORM_SWAP_ALPHA
 0x0100

	)

1080 
	#PNG_TRANSFORM_SWAP_ENDIAN
 0x0200

	)

1081 
	#PNG_TRANSFORM_INVERT_ALPHA
 0x0400

	)

1082 
	#PNG_TRANSFORM_STRIP_FILLER
 0x0800

	)

1085 
	#PNG_FLAG_MNG_EMPTY_PLTE
 0x01

	)

1086 
	#PNG_FLAG_MNG_FILTER_64
 0x04

	)

1087 
	#PNG_ALL_MNG_FEATURES
 0x05

	)

1089 
≤g_voidp
 (*
	t≤g_mÆloc_±r
Ë
	tPNGARG
((
	t≤g_°ru˘p
, 
	t≤g_size_t
));

1090 (*
≤g_‰ì_±r
Ë
	tPNGARG
((
	t≤g_°ru˘p
, 
	t≤g_voidp
));

1099 
	s≤g_°ru˘_def


1101 #ifde‡
PNG_SETJMP_SUPPORTED


1102 
jmp_buf
 
jmpbuf
;

1104 
≤g_îr‹_±r
 
îr‹_‚
;

1105 
≤g_îr‹_±r
 
w¨nög_‚
;

1106 
≤g_voidp
 
îr‹_±r
;

1107 
≤g_rw_±r
 
wrôe_d©a_‚
;

1108 
≤g_rw_±r
 
ªad_d©a_‚
;

1109 
≤g_voidp
 
io_±r
;

1111 #i‡
deföed
(
PNG_READ_USER_TRANSFORM_SUPPORTED
)

1112 
≤g_u£r_å™sf‹m_±r
 
ªad_u£r_å™sf‹m_‚
;

1115 #i‡
deföed
(
PNG_WRITE_USER_TRANSFORM_SUPPORTED
)

1116 
≤g_u£r_å™sf‹m_±r
 
wrôe_u£r_å™sf‹m_‚
;

1120 #i‡
deföed
(
PNG_USER_TRANSFORM_PTR_SUPPORTED
)

1121 #i‡
deföed
(
PNG_READ_USER_TRANSFORM_SUPPORTED
) || \

1122 
deföed
(
PNG_WRITE_USER_TRANSFORM_SUPPORTED
)

1123 
≤g_voidp
 
u£r_å™sf‹m_±r
;

1124 
≤g_byã
 
u£r_å™sf‹m_dïth
;

1125 
≤g_byã
 
u£r_å™sf‹m_ch™√ls
;

1129 
≤g_uöt_32
 
mode
;

1130 
≤g_uöt_32
 
Êags
;

1131 
≤g_uöt_32
 
å™sf‹m©i⁄s
;

1133 
z_°ªam
 
z°ªam
;

1134 
≤g_byãp
 
zbuf
;

1135 
≤g_size_t
 
zbuf_size
;

1136 
zlib_Àvñ
;

1137 
zlib_mëhod
;

1138 
zlib_wödow_bôs
;

1139 
zlib_mem_Àvñ
;

1140 
zlib_°øãgy
;

1142 
≤g_uöt_32
 
width
;

1143 
≤g_uöt_32
 
height
;

1144 
≤g_uöt_32
 
num_rows
;

1145 
≤g_uöt_32
 
u§_width
;

1146 
≤g_uöt_32
 
rowbyãs
;

1147 
≤g_uöt_32
 
úowbyãs
;

1148 
≤g_uöt_32
 
iwidth
;

1149 
≤g_uöt_32
 
row_numbî
;

1150 
≤g_byãp
 
¥ev_row
;

1151 
≤g_byãp
 
row_buf
;

1152 
≤g_byãp
 
sub_row
;

1153 
≤g_byãp
 
up_row
;

1154 
≤g_byãp
 
avg_row
;

1155 
≤g_byãp
 
∑ëh_row
;

1156 
≤g_row_öfo
 
row_öfo
;

1158 
≤g_uöt_32
 
id©_size
;

1159 
≤g_uöt_32
 
¸c
;

1160 
≤g_cﬁ‹p
 
∑Àâe
;

1161 
≤g_uöt_16
 
num_∑Àâe
;

1162 
≤g_uöt_16
 
num_å™s
;

1163 
≤g_byã
 
chunk_«me
[5];

1164 
≤g_byã
 
com¥essi⁄
;

1165 
≤g_byã
 
fûãr
;

1166 
≤g_byã
 
öãæa˚d
;

1167 
≤g_byã
 
∑ss
;

1168 
≤g_byã
 
do_fûãr
;

1169 
≤g_byã
 
cﬁ‹_ty≥
;

1170 
≤g_byã
 
bô_dïth
;

1171 
≤g_byã
 
u§_bô_dïth
;

1172 
≤g_byã
 
pixñ_dïth
;

1173 
≤g_byã
 
ch™√ls
;

1174 
≤g_byã
 
u§_ch™√ls
;

1175 
≤g_byã
 
sig_byãs
;

1177 #i‡
deföed
(
PNG_READ_FILLER_SUPPORTED
Ë|| deföed(
PNG_WRITE_FILLER_SUPPORTED
)

1178 #ifde‡
PNG_LEGACY_SUPPORTED


1179 
≤g_byã
 
fûÀr
;

1181 
≤g_uöt_16
 
fûÀr
;

1185 #i‡
deföed
(
PNG_bKGD_SUPPORTED
)

1186 
≤g_byã
 
background_gamma_ty≥
;

1187 #ifde‡
PNG_FLOATING_POINT_SUPPORTED


1188 
background_gamma
;

1190 
≤g_cﬁ‹_16
 
background
;

1191 #i‡
deföed
(
PNG_READ_GAMMA_SUPPORTED
)

1192 
≤g_cﬁ‹_16
 
background_1
;

1196 #i‡
deföed
(
PNG_WRITE_FLUSH_SUPPORTED
)

1197 
≤g_Êush_±r
 
ouçut_Êush_‚
;

1198 
≤g_uöt_32
 
Êush_di°
;

1199 
≤g_uöt_32
 
Êush_rows
;

1202 #i‡
deföed
(
PNG_READ_GAMMA_SUPPORTED
Ë|| deföed(
PNG_READ_BACKGROUND_SUPPORTED
)

1203 
gamma_shi·
;

1204 #ifde‡
PNG_FLOATING_POINT_SUPPORTED


1205 
gamma
;

1206 
s¸ìn_gamma
;

1210 #i‡
deföed
(
PNG_READ_GAMMA_SUPPORTED
Ë|| deföed(
PNG_READ_BACKGROUND_SUPPORTED
)

1211 
≤g_byãp
 
gamma_èbÀ
;

1212 
≤g_byãp
 
gamma_‰om_1
;

1213 
≤g_byãp
 
gamma_to_1
;

1214 
≤g_uöt_16µ
 
gamma_16_èbÀ
;

1215 
≤g_uöt_16µ
 
gamma_16_‰om_1
;

1216 
≤g_uöt_16µ
 
gamma_16_to_1
;

1219 #i‡
deföed
(
PNG_READ_GAMMA_SUPPORTED
Ë|| deföed(
PNG_sBIT_SUPPORTED
)

1220 
≤g_cﬁ‹_8
 
sig_bô
;

1223 #i‡
deföed
(
PNG_READ_SHIFT_SUPPORTED
Ë|| deföed(
PNG_WRITE_SHIFT_SUPPORTED
)

1224 
≤g_cﬁ‹_8
 
shi·
;

1227 #i‡
deföed
(
PNG_tRNS_SUPPORTED
Ë|| deföed(
PNG_READ_BACKGROUND_SUPPORTED
) \

1228 || 
deföed
(
PNG_READ_EXPAND_SUPPORTED
Ë|| deföed(
PNG_READ_BACKGROUND_SUPPORTED
)

1229 
≤g_byãp
 
å™s
;

1230 
≤g_cﬁ‹_16
 
å™s_vÆues
;

1233 
≤g_ªad_°©us_±r
 
ªad_row_‚
;

1234 
≤g_wrôe_°©us_±r
 
wrôe_row_‚
;

1235 #ifde‡
PNG_PROGRESSIVE_READ_SUPPORTED


1236 
≤g_¥ogªssive_öfo_±r
 
öfo_‚
;

1237 
≤g_¥ogªssive_row_±r
 
row_‚
;

1238 
≤g_¥ogªssive_íd_±r
 
íd_‚
;

1239 
≤g_byãp
 
ßve_buf„r_±r
;

1240 
≤g_byãp
 
ßve_buf„r
;

1241 
≤g_byãp
 
cuºít_buf„r_±r
;

1242 
≤g_byãp
 
cuºít_buf„r
;

1243 
≤g_uöt_32
 
push_Àngth
;

1244 
≤g_uöt_32
 
skù_Àngth
;

1245 
≤g_size_t
 
ßve_buf„r_size
;

1246 
≤g_size_t
 
ßve_buf„r_max
;

1247 
≤g_size_t
 
buf„r_size
;

1248 
≤g_size_t
 
cuºít_buf„r_size
;

1249 
¥o˚ss_mode
;

1250 
cur_∑Àâe
;

1252 #i‡
deföed
(
PNG_TEXT_SUPPORTED
)

1253 
≤g_size_t
 
cuºít_ãxt_size
;

1254 
≤g_size_t
 
cuºít_ãxt_À·
;

1255 
≤g_ch¨p
 
cuºít_ãxt
;

1256 
≤g_ch¨p
 
cuºít_ãxt_±r
;

1261 #i‡
deföed
(
__TURBOC__
Ë&& !deföed(
_Wödows
Ë&& !deföed(
__FLAT__
)

1263 
≤g_byãµ
 
off£t_èbÀ_±r
;

1264 
≤g_byãp
 
off£t_èbÀ
;

1265 
≤g_uöt_16
 
off£t_èbÀ_numbî
;

1266 
≤g_uöt_16
 
off£t_èbÀ_cou¡
;

1267 
≤g_uöt_16
 
off£t_èbÀ_cou¡_‰ì
;

1270 #i‡
deföed
(
PNG_READ_DITHER_SUPPORTED
)

1271 
≤g_byãp
 
∑Àâe_lookup
;

1272 
≤g_byãp
 
dôhî_ödex
;

1275 #i‡
deföed
(
PNG_READ_DITHER_SUPPORTED
Ë|| deföed(
PNG_hIST_SUPPORTED
)

1276 
≤g_uöt_16p
 
hi°
;

1279 #i‡
deföed
(
PNG_WRITE_WEIGHTED_FILTER_SUPPORTED
)

1280 
≤g_byã
 
heuri°ic_mëhod
;

1281 
≤g_byã
 
num_¥ev_fûãrs
;

1282 
≤g_byãp
 
¥ev_fûãrs
;

1283 
≤g_uöt_16p
 
fûãr_weights
;

1284 
≤g_uöt_16p
 
öv_fûãr_weights
;

1285 
≤g_uöt_16p
 
fûãr_co°s
;

1286 
≤g_uöt_16p
 
öv_fûãr_co°s
;

1289 #i‡
deföed
(
PNG_TIME_RFC1123_SUPPORTED
)

1290 
≤g_ch¨p
 
time_buf„r
;

1295 #ifde‡
PNG_FREE_ME_SUPPORTED


1296 
≤g_uöt_32
 
‰ì_me
;

1299 #i‡
deföed
(
PNG_USER_CHUNKS_SUPPORTED
)

1300 
≤g_voidp
 
u£r_chunk_±r
;

1301 
≤g_u£r_chunk_±r
 
ªad_u£r_chunk_‚
;

1304 #i‡
deföed
(
PNG_UNKNOWN_CHUNKS_SUPPORTED
)

1305 
num_chunk_li°
;

1306 
≤g_byãp
 
chunk_li°
;

1310 #i‡
deföed
(
PNG_READ_RGB_TO_GRAY_SUPPORTED
)

1311 
≤g_byã
 
rgb_to_gøy_°©us
;

1313 
≤g_uöt_16
 
rgb_to_gøy_ªd_c€ff
;

1314 
≤g_uöt_16
 
rgb_to_gøy_gªí_c€ff
;

1315 
≤g_uöt_16
 
rgb_to_gøy_blue_c€ff
;

1319 #i‡
deföed
(
PNG_MNG_FEATURES_SUPPORTED
) || \

1320 
deföed
(
PNG_READ_EMPTY_PLTE_SUPPORTED
) || \

1321 
deföed
(
PNG_WRITE_EMPTY_PLTE_SUPPORTED
)

1323 #ifde‡
PNG_1_0_X


1324 
≤g_byã
 
mng_„©uªs_≥rmôãd
;

1326 
≤g_uöt_32
 
mng_„©uªs_≥rmôãd
;

1331 #i‡
deföed
(
PNG_READ_GAMMA_SUPPORTED
Ë|| deföed(
PNG_READ_BACKGROUND_SUPPORTED
)

1332 
≤g_fixed_poöt
 
öt_gamma
;

1336 #i‡
deföed
(
PNG_MNG_FEATURES_SUPPORTED
)

1337 
≤g_byã
 
fûãr_ty≥
;

1340 #i‡
deföed
(
PNG_1_0_X
Ë|| (deföed(
PNG_DEBUG
Ë&& deföed(
PNG_USE_PNGGCCRD
))

1342 
≤g_uöt_32
 
row_buf_size
;

1346 #i‡
deföed
(
PNG_ASSEMBLER_CODE_SUPPORTED
)

1347 #i‡!
deföed
(
PNG_1_0_X
)

1348 #i‡
deföed
(
PNG_MMX_CODE_SUPPORTED
)

1349 
≤g_byã
 
mmx_bôdïth_thªshﬁd
;

1350 
≤g_uöt_32
 
mmx_rowbyãs_thªshﬁd
;

1352 
≤g_uöt_32
 
asm_Êags
;

1357 #ifde‡
PNG_USER_MEM_SUPPORTED


1358 
≤g_voidp
 
mem_±r
;

1359 
≤g_mÆloc_±r
 
mÆloc_‚
;

1360 
≤g_‰ì_±r
 
‰ì_‚
;

1364 
≤g_byãp
 
big_row_buf
;

1366 #i‡
deföed
(
PNG_READ_DITHER_SUPPORTED
)

1368 
≤g_byãp
 
dôhî_s‹t
;

1369 
≤g_byãp
 
ödex_to_∑Àâe
;

1371 
≤g_byãp
 
∑Àâe_to_ödex
;

1376 
≤g_byã
 
com¥essi⁄_ty≥
;

1378 #ifde‡
PNG_SET_USER_LIMITS_SUPPORTED


1379 
≤g_uöt_32
 
u£r_width_max
;

1380 
≤g_uöt_32
 
u£r_height_max
;

1389 
≤g_°ru˘p
 
	tvîsi⁄_1_2_15bëa5
;

1391 
≤g_°ru˘
 
	tFAR
 * FAR * 
	t≤g_°ru˘µ
;

1400 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_ac˚ss_vîsi⁄_numbî
Ë
PNGARG
(());

1405 
PNG_EXPORT
(,
≤g_£t_sig_byãs
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1406 
num_byãs
));

1413 
PNG_EXPORT
(,
≤g_sig_cmp
Ë
PNGARG
((
≤g_byãp
 
sig
, 
≤g_size_t
 
°¨t
,

1414 
≤g_size_t
 
num_to_check
));

1419 
PNG_EXPORT
(,
≤g_check_sig
Ë
PNGARG
((
≤g_byãp
 
sig
, 
num
));

1422 
PNG_EXPORT
(
≤g_°ru˘p
,
≤g_¸óã_ªad_°ru˘
)

1423 
PNGARG
((
≤g_c⁄°_ch¨p
 
u£r_≤g_vî
, 
≤g_voidp
 
îr‹_±r
,

1424 
≤g_îr‹_±r
 
îr‹_‚
,Öng_îr‹_±∏
w¨n_‚
));

1427 
PNG_EXPORT
(
≤g_°ru˘p
,
≤g_¸óã_wrôe_°ru˘
)

1428 
PNGARG
((
≤g_c⁄°_ch¨p
 
u£r_≤g_vî
, 
≤g_voidp
 
îr‹_±r
,

1429 
≤g_îr‹_±r
 
îr‹_‚
,Öng_îr‹_±∏
w¨n_‚
));

1431 #ifde‡
PNG_WRITE_SUPPORTED


1432 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_com¥essi⁄_buf„r_size
)

1433 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1436 #ifde‡
PNG_WRITE_SUPPORTED


1437 
PNG_EXPORT
(,
≤g_£t_com¥essi⁄_buf„r_size
)

1438 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_uöt_32
 
size
));

1442 
PNG_EXPORT
(,
≤g_ª£t_z°ªam
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1445 #ifde‡
PNG_USER_MEM_SUPPORTED


1446 
PNG_EXPORT
(
≤g_°ru˘p
,
≤g_¸óã_ªad_°ru˘_2
)

1447 
PNGARG
((
≤g_c⁄°_ch¨p
 
u£r_≤g_vî
, 
≤g_voidp
 
îr‹_±r
,

1448 
≤g_îr‹_±r
 
îr‹_‚
,Öng_îr‹_±∏
w¨n_‚
, 
≤g_voidp
 
mem_±r
,

1449 
≤g_mÆloc_±r
 
mÆloc_‚
, 
≤g_‰ì_±r
 
‰ì_‚
));

1450 
PNG_EXPORT
(
≤g_°ru˘p
,
≤g_¸óã_wrôe_°ru˘_2
)

1451 
PNGARG
((
≤g_c⁄°_ch¨p
 
u£r_≤g_vî
, 
≤g_voidp
 
îr‹_±r
,

1452 
≤g_îr‹_±r
 
îr‹_‚
,Öng_îr‹_±∏
w¨n_‚
, 
≤g_voidp
 
mem_±r
,

1453 
≤g_mÆloc_±r
 
mÆloc_‚
, 
≤g_‰ì_±r
 
‰ì_‚
));

1457 
PNG_EXPORT
(,
≤g_wrôe_chunk
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1458 
≤g_byãp
 
chunk_«me
,Öng_byã∞
d©a
, 
≤g_size_t
 
Àngth
));

1461 
PNG_EXPORT
(,
≤g_wrôe_chunk_°¨t
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1462 
≤g_byãp
 
chunk_«me
, 
≤g_uöt_32
 
Àngth
));

1465 
PNG_EXPORT
(,
≤g_wrôe_chunk_d©a
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1466 
≤g_byãp
 
d©a
, 
≤g_size_t
 
Àngth
));

1469 
PNG_EXPORT
(,
≤g_wrôe_chunk_íd
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1472 
PNG_EXPORT
(
≤g_öf›
,
≤g_¸óã_öfo_°ru˘
)

1473 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1475 #i‡
deföed
(
PNG_1_0_X
Ë|| deföed (
PNG_1_2_X
)

1477 
PNG_EXPORT
(,
≤g_öfo_öô
Ë
PNGARG
((
≤g_öf›
 
öfo_±r
));

1478 #unde‡
≤g_öfo_öô


1479 
	#≤g_öfo_öô
(
öfo_±r
Ë
	`≤g_öfo_öô_3
(&info_ptr,\

1480 
	`≤g_sizeof
(
≤g_öfo
));

	)

1483 
PNG_EXPORT
(,
≤g_öfo_öô_3
Ë
PNGARG
((
≤g_öf›p
 
öfo_±r
,

1484 
≤g_size_t
 
≤g_öfo_°ru˘_size
));

1487 
PNG_EXPORT
(,
≤g_wrôe_öfo_bef‹e_PLTE
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1488 
≤g_öf›
 
öfo_±r
));

1489 
PNG_EXPORT
(,
≤g_wrôe_öfo
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1490 
≤g_öf›
 
öfo_±r
));

1492 #i‚de‡
PNG_NO_SEQUENTIAL_READ_SUPPORTED


1494 
PNG_EXPORT
(,
≤g_ªad_öfo
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1495 
≤g_öf›
 
öfo_±r
));

1498 #i‡
deföed
(
PNG_TIME_RFC1123_SUPPORTED
)

1499 
PNG_EXPORT
(
≤g_ch¨p
,
≤g_c⁄vît_to_rfc1123
)

1500 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_timï
 
±ime
));

1503 #i‡!
deföed
(
_WIN32_WCE
)

1505 #i‡
deföed
(
PNG_WRITE_tIME_SUPPORTED
)

1507 
PNG_EXPORT
(,
≤g_c⁄vît_‰om_°ru˘_tm
Ë
PNGARG
((
≤g_timï
 
±ime
,

1508 
tm
 
FAR
 * 
âime
));

1511 
PNG_EXPORT
(,
≤g_c⁄vît_‰om_time_t
Ë
PNGARG
((
≤g_timï
 
±ime
,

1512 
time_t
 
âime
));

1516 #i‡
deföed
(
PNG_READ_EXPAND_SUPPORTED
)

1518 
PNG_EXPORT
(,
≤g_£t_ex∑nd
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1519 #i‡!
deföed
(
PNG_1_0_X
)

1520 
PNG_EXPORT
(,
≤g_£t_ex∑nd_gøy_1_2_4_to_8
Ë
PNGARG
((
≤g_°ru˘p


1521 
≤g_±r
));

1523 
PNG_EXPORT
(,
≤g_£t_∑Àâe_to_rgb
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1524 
PNG_EXPORT
(,
≤g_£t_tRNS_to_Æpha
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1525 #i‡
deföed
(
PNG_1_0_X
Ë|| deföed (
PNG_1_2_X
)

1527 
PNG_EXPORT
(,
≤g_£t_gøy_1_2_4_to_8
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1531 #i‡
deföed
(
PNG_READ_BGR_SUPPORTED
Ë|| deföed(
PNG_WRITE_BGR_SUPPORTED
)

1533 
PNG_EXPORT
(,
≤g_£t_bgr
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1536 #i‡
deföed
(
PNG_READ_GRAY_TO_RGB_SUPPORTED
)

1538 
PNG_EXPORT
(,
≤g_£t_gøy_to_rgb
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1541 #i‡
deföed
(
PNG_READ_RGB_TO_GRAY_SUPPORTED
)

1543 #ifde‡
PNG_FLOATING_POINT_SUPPORTED


1544 
PNG_EXPORT
(,
≤g_£t_rgb_to_gøy
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1545 
îr‹_a˘i⁄
, 
ªd
, 
gªí
 ));

1547 
PNG_EXPORT
(,
≤g_£t_rgb_to_gøy_fixed
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1548 
îr‹_a˘i⁄
, 
≤g_fixed_poöt
 
ªd
,Öng_fixed_poöà
gªí
 ));

1549 
PNG_EXPORT
(
≤g_byã
,
≤g_gë_rgb_to_gøy_°©us
Ë
PNGARG
((
≤g_°ru˘p


1550 
≤g_±r
));

1553 
PNG_EXPORT
(,
≤g_buûd_gøysˇÀ_∑Àâe
Ë
PNGARG
((
bô_dïth
,

1554 
≤g_cﬁ‹p
 
∑Àâe
));

1556 #i‡
deföed
(
PNG_READ_STRIP_ALPHA_SUPPORTED
)

1557 
PNG_EXPORT
(,
≤g_£t_°rù_Æpha
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1560 #i‡
deföed
(
PNG_READ_SWAP_ALPHA_SUPPORTED
) || \

1561 
deföed
(
PNG_WRITE_SWAP_ALPHA_SUPPORTED
)

1562 
PNG_EXPORT
(,
≤g_£t_sw≠_Æpha
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1565 #i‡
deföed
(
PNG_READ_INVERT_ALPHA_SUPPORTED
) || \

1566 
deföed
(
PNG_WRITE_INVERT_ALPHA_SUPPORTED
)

1567 
PNG_EXPORT
(,
≤g_£t_övît_Æpha
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1570 #i‡
deföed
(
PNG_READ_FILLER_SUPPORTED
Ë|| deföed(
PNG_WRITE_FILLER_SUPPORTED
)

1572 
PNG_EXPORT
(,
≤g_£t_fûÀr
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1573 
≤g_uöt_32
 
fûÀr
, 
Êags
));

1575 
	#PNG_FILLER_BEFORE
 0

	)

1576 
	#PNG_FILLER_AFTER
 1

	)

1578 #i‡!
deföed
(
PNG_1_0_X
)

1579 
PNG_EXPORT
(,
≤g_£t_add_Æpha
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1580 
≤g_uöt_32
 
fûÀr
, 
Êags
));

1584 #i‡
deföed
(
PNG_READ_SWAP_SUPPORTED
Ë|| deföed(
PNG_WRITE_SWAP_SUPPORTED
)

1586 
PNG_EXPORT
(,
≤g_£t_sw≠
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1589 #i‡
deföed
(
PNG_READ_PACK_SUPPORTED
Ë|| deföed(
PNG_WRITE_PACK_SUPPORTED
)

1591 
PNG_EXPORT
(,
≤g_£t_∑ckög
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1594 #i‡
deföed
(
PNG_READ_PACKSWAP_SUPPORTED
Ë|| deföed(
PNG_WRITE_PACKSWAP_SUPPORTED
)

1596 
PNG_EXPORT
(,
≤g_£t_∑cksw≠
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1599 #i‡
deföed
(
PNG_READ_SHIFT_SUPPORTED
Ë|| deföed(
PNG_WRITE_SHIFT_SUPPORTED
)

1601 
PNG_EXPORT
(,
≤g_£t_shi·
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1602 
≤g_cﬁ‹_8p
 
åue_bôs
));

1605 #i‡
deföed
(
PNG_READ_INTERLACING_SUPPORTED
) || \

1606 
deföed
(
PNG_WRITE_INTERLACING_SUPPORTED
)

1608 
PNG_EXPORT
(,
≤g_£t_öãæa˚_h™dlög
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1611 #i‡
deföed
(
PNG_READ_INVERT_SUPPORTED
Ë|| deföed(
PNG_WRITE_INVERT_SUPPORTED
)

1613 
PNG_EXPORT
(,
≤g_£t_övît_m⁄o
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1616 #i‡
deföed
(
PNG_READ_BACKGROUND_SUPPORTED
)

1618 #ifde‡
PNG_FLOATING_POINT_SUPPORTED


1619 
PNG_EXPORT
(,
≤g_£t_background
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1620 
≤g_cﬁ‹_16p
 
background_cﬁ‹
, 
background_gamma_code
,

1621 
√ed_ex∑nd
, 
background_gamma
));

1623 
	#PNG_BACKGROUND_GAMMA_UNKNOWN
 0

	)

1624 
	#PNG_BACKGROUND_GAMMA_SCREEN
 1

	)

1625 
	#PNG_BACKGROUND_GAMMA_FILE
 2

	)

1626 
	#PNG_BACKGROUND_GAMMA_UNIQUE
 3

	)

1629 #i‡
deföed
(
PNG_READ_16_TO_8_SUPPORTED
)

1631 
PNG_EXPORT
(,
≤g_£t_°rù_16
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1634 #i‡
deföed
(
PNG_READ_DITHER_SUPPORTED
)

1636 
PNG_EXPORT
(,
≤g_£t_dôhî
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1637 
≤g_cﬁ‹p
 
∑Àâe
, 
num_∑Àâe
, 
maximum_cﬁ‹s
,

1638 
≤g_uöt_16p
 
hi°ogøm
, 
fuŒ_dôhî
));

1641 #i‡
deföed
(
PNG_READ_GAMMA_SUPPORTED
)

1643 #ifde‡
PNG_FLOATING_POINT_SUPPORTED


1644 
PNG_EXPORT
(,
≤g_£t_gamma
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1645 
s¸ìn_gamma
, 
deÁu…_fûe_gamma
));

1649 #i‡
deföed
(
PNG_1_0_X
Ë|| deföed (
PNG_1_2_X
)

1650 #i‡
deföed
(
PNG_READ_EMPTY_PLTE_SUPPORTED
) || \

1651 
deföed
(
PNG_WRITE_EMPTY_PLTE_SUPPORTED
)

1654 
PNG_EXPORT
(,
≤g_≥rmô_em±y_∂ã
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1655 
em±y_∂ã_≥rmôãd
));

1659 #i‡
deföed
(
PNG_WRITE_FLUSH_SUPPORTED
)

1661 
PNG_EXPORT
(,
≤g_£t_Êush
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
ƒows
));

1663 
PNG_EXPORT
(,
≤g_wrôe_Êush
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1667 
PNG_EXPORT
(,
≤g_°¨t_ªad_image
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1670 
PNG_EXPORT
(,
≤g_ªad_upd©e_öfo
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1671 
≤g_öf›
 
öfo_±r
));

1673 #i‚de‡
PNG_NO_SEQUENTIAL_READ_SUPPORTED


1675 
PNG_EXPORT
(,
≤g_ªad_rows
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1676 
≤g_byãµ
 
row
,Öng_byãµ 
di•œy_row
, 
≤g_uöt_32
 
num_rows
));

1679 #i‚de‡
PNG_NO_SEQUENTIAL_READ_SUPPORTED


1681 
PNG_EXPORT
(,
≤g_ªad_row
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1682 
≤g_byãp
 
row
,

1683 
≤g_byãp
 
di•œy_row
));

1686 #i‚de‡
PNG_NO_SEQUENTIAL_READ_SUPPORTED


1688 
PNG_EXPORT
(,
≤g_ªad_image
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1689 
≤g_byãµ
 
image
));

1693 
PNG_EXPORT
(,
≤g_wrôe_row
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1694 
≤g_byãp
 
row
));

1697 
PNG_EXPORT
(,
≤g_wrôe_rows
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1698 
≤g_byãµ
 
row
, 
≤g_uöt_32
 
num_rows
));

1701 
PNG_EXPORT
(,
≤g_wrôe_image
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1702 
≤g_byãµ
 
image
));

1705 
PNG_EXPORT
(,
≤g_wrôe_íd
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1706 
≤g_öf›
 
öfo_±r
));

1708 #i‚de‡
PNG_NO_SEQUENTIAL_READ_SUPPORTED


1710 
PNG_EXPORT
(,
≤g_ªad_íd
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1711 
≤g_öf›
 
öfo_±r
));

1715 
PNG_EXPORT
(,
≤g_de°roy_öfo_°ru˘
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1716 
≤g_öf›p
 
öfo_±r_±r
));

1719 
PNG_EXPORT
(,
≤g_de°roy_ªad_°ru˘
Ë
PNGARG
((
≤g_°ru˘µ


1720 
≤g_±r_±r
, 
≤g_öf›p
 
öfo_±r_±r
,Öng_öf›∞
íd_öfo_±r_±r
));

1724 
PNG_EXPORT
(,
≤g_ªad_de°roy
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
,

1725 
≤g_öf›
 
íd_öfo_±r
));

1728 
PNG_EXPORT
(,
≤g_de°roy_wrôe_°ru˘
)

1729 
PNGARG
((
≤g_°ru˘µ
 
≤g_±r_±r
, 
≤g_öf›p
 
öfo_±r_±r
));

1733 
PNG_EXPORT
(,
≤g_wrôe_de°roy
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1736 
PNG_EXPORT
(,
≤g_£t_¸c_a˘i⁄
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1737 
¸ô_a˘i⁄
, 
™cû_a˘i⁄
));

1748 
	#PNG_CRC_DEFAULT
 0

	)

1749 
	#PNG_CRC_ERROR_QUIT
 1

	)

1750 
	#PNG_CRC_WARN_DISCARD
 2

	)

1751 
	#PNG_CRC_WARN_USE
 3

	)

1752 
	#PNG_CRC_QUIET_USE
 4

	)

1753 
	#PNG_CRC_NO_CHANGE
 5

	)

1766 
PNG_EXPORT
(,
≤g_£t_fûãr
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
mëhod
,

1767 
fûãrs
));

1774 
	#PNG_NO_FILTERS
 0x00

	)

1775 
	#PNG_FILTER_NONE
 0x08

	)

1776 
	#PNG_FILTER_SUB
 0x10

	)

1777 
	#PNG_FILTER_UP
 0x20

	)

1778 
	#PNG_FILTER_AVG
 0x40

	)

1779 
	#PNG_FILTER_PAETH
 0x80

	)

1780 
	#PNG_ALL_FILTERS
 (
PNG_FILTER_NONE
 | 
PNG_FILTER_SUB
 | 
PNG_FILTER_UP
 | \

1781 
PNG_FILTER_AVG
 | 
PNG_FILTER_PAETH
)

	)

1786 
	#PNG_FILTER_VALUE_NONE
 0

	)

1787 
	#PNG_FILTER_VALUE_SUB
 1

	)

1788 
	#PNG_FILTER_VALUE_UP
 2

	)

1789 
	#PNG_FILTER_VALUE_AVG
 3

	)

1790 
	#PNG_FILTER_VALUE_PAETH
 4

	)

1791 
	#PNG_FILTER_VALUE_LAST
 5

	)

1793 #i‡
deföed
(
PNG_WRITE_WEIGHTED_FILTER_SUPPORTED
)

1822 #ifde‡
PNG_FLOATING_POINT_SUPPORTED


1823 
PNG_EXPORT
(,
≤g_£t_fûãr_heuri°ics
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1824 
heuri°ic_mëhod
, 
num_weights
, 
≤g_doubÀp
 
fûãr_weights
,

1825 
≤g_doubÀp
 
fûãr_co°s
));

1832 
	#PNG_FILTER_HEURISTIC_DEFAULT
 0

	)

1833 
	#PNG_FILTER_HEURISTIC_UNWEIGHTED
 1

	)

1834 
	#PNG_FILTER_HEURISTIC_WEIGHTED
 2

	)

1835 
	#PNG_FILTER_HEURISTIC_LAST
 3

	)

1844 
PNG_EXPORT
(,
≤g_£t_com¥essi⁄_Àvñ
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1845 
Àvñ
));

1847 
PNG_EXPORT
(,
≤g_£t_com¥essi⁄_mem_Àvñ
)

1848 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
mem_Àvñ
));

1850 
PNG_EXPORT
(,
≤g_£t_com¥essi⁄_°øãgy
)

1851 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
°øãgy
));

1853 
PNG_EXPORT
(,
≤g_£t_com¥essi⁄_wödow_bôs
)

1854 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
wödow_bôs
));

1856 
PNG_EXPORT
(,
≤g_£t_com¥essi⁄_mëhod
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1857 
mëhod
));

1868 #i‡!
deföed
(
PNG_NO_STDIO
)

1870 
PNG_EXPORT
(,
≤g_öô_io
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_FILE_p
 
Â
));

1881 
PNG_EXPORT
(,
≤g_£t_îr‹_‚
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1882 
≤g_voidp
 
îr‹_±r
, 
≤g_îr‹_±r
 
îr‹_‚
,Öng_îr‹_±∏
w¨nög_‚
));

1885 
PNG_EXPORT
(
≤g_voidp
,
≤g_gë_îr‹_±r
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1892 
PNG_EXPORT
(,
≤g_£t_wrôe_‚
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1893 
≤g_voidp
 
io_±r
, 
≤g_rw_±r
 
wrôe_d©a_‚
, 
≤g_Êush_±r
 
ouçut_Êush_‚
));

1896 
PNG_EXPORT
(,
≤g_£t_ªad_‚
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1897 
≤g_voidp
 
io_±r
, 
≤g_rw_±r
 
ªad_d©a_‚
));

1900 
PNG_EXPORT
(
≤g_voidp
,
≤g_gë_io_±r
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1902 
PNG_EXPORT
(,
≤g_£t_ªad_°©us_‚
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1903 
≤g_ªad_°©us_±r
 
ªad_row_‚
));

1905 
PNG_EXPORT
(,
≤g_£t_wrôe_°©us_‚
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1906 
≤g_wrôe_°©us_±r
 
wrôe_row_‚
));

1908 #ifde‡
PNG_USER_MEM_SUPPORTED


1910 
PNG_EXPORT
(,
≤g_£t_mem_‚
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1911 
≤g_voidp
 
mem_±r
, 
≤g_mÆloc_±r
 
mÆloc_‚
, 
≤g_‰ì_±r
 
‰ì_‚
));

1913 
PNG_EXPORT
(
≤g_voidp
,
≤g_gë_mem_±r
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1916 #i‡
deföed
(
PNG_READ_USER_TRANSFORM_SUPPORTED
) || \

1917 
deföed
(
PNG_LEGACY_SUPPORTED
)

1918 
PNG_EXPORT
(,
≤g_£t_ªad_u£r_å™sf‹m_‚
Ë
PNGARG
((
≤g_°ru˘p


1919 
≤g_±r
, 
≤g_u£r_å™sf‹m_±r
 
ªad_u£r_å™sf‹m_‚
));

1922 #i‡
deföed
(
PNG_WRITE_USER_TRANSFORM_SUPPORTED
) || \

1923 
deföed
(
PNG_LEGACY_SUPPORTED
)

1924 
PNG_EXPORT
(,
≤g_£t_wrôe_u£r_å™sf‹m_‚
Ë
PNGARG
((
≤g_°ru˘p


1925 
≤g_±r
, 
≤g_u£r_å™sf‹m_±r
 
wrôe_u£r_å™sf‹m_‚
));

1928 #i‡
deföed
(
PNG_READ_USER_TRANSFORM_SUPPORTED
) || \

1929 
deföed
(
PNG_WRITE_USER_TRANSFORM_SUPPORTED
) || \

1930 
deföed
(
PNG_LEGACY_SUPPORTED
)

1931 
PNG_EXPORT
(,
≤g_£t_u£r_å™sf‹m_öfo
Ë
PNGARG
((
≤g_°ru˘p


1932 
≤g_±r
, 
≤g_voidp
 
u£r_å™sf‹m_±r
, 
u£r_å™sf‹m_dïth
,

1933 
u£r_å™sf‹m_ch™√ls
));

1935 
PNG_EXPORT
(
≤g_voidp
,
≤g_gë_u£r_å™sf‹m_±r
)

1936 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1939 #ifde‡
PNG_USER_CHUNKS_SUPPORTED


1940 
PNG_EXPORT
(,
≤g_£t_ªad_u£r_chunk_‚
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1941 
≤g_voidp
 
u£r_chunk_±r
, 
≤g_u£r_chunk_±r
 
ªad_u£r_chunk_‚
));

1942 
PNG_EXPORT
(
≤g_voidp
,
≤g_gë_u£r_chunk_±r
Ë
PNGARG
((
≤g_°ru˘p


1943 
≤g_±r
));

1946 #ifde‡
PNG_PROGRESSIVE_READ_SUPPORTED


1950 
PNG_EXPORT
(,
≤g_£t_¥ogªssive_ªad_‚
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1951 
≤g_voidp
 
¥ogªssive_±r
,

1952 
≤g_¥ogªssive_öfo_±r
 
öfo_‚
, 
≤g_¥ogªssive_row_±r
 
row_‚
,

1953 
≤g_¥ogªssive_íd_±r
 
íd_‚
));

1956 
PNG_EXPORT
(
≤g_voidp
,
≤g_gë_¥ogªssive_±r
)

1957 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

1960 
PNG_EXPORT
(,
≤g_¥o˚ss_d©a
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1961 
≤g_öf›
 
öfo_±r
, 
≤g_byãp
 
buf„r
, 
≤g_size_t
 
buf„r_size
));

1966 
PNG_EXPORT
(,
≤g_¥ogªssive_comböe_row
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1967 
≤g_byãp
 
ﬁd_row
,Öng_byã∞
√w_row
));

1970 
PNG_EXPORT
(
≤g_voidp
,
≤g_mÆloc
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1971 
≤g_uöt_32
 
size
));

1973 #i‡
deföed
(
PNG_1_0_X
)

1974 
	#≤g_mÆloc_w¨n
 
≤g_mÆloc


	)

1977 
PNG_EXPORT
(
≤g_voidp
,
≤g_mÆloc_w¨n
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1978 
≤g_uöt_32
 
size
));

1982 
PNG_EXPORT
(,
≤g_‰ì
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_voidp
 
±r
));

1984 #i‡
deföed
(
PNG_1_0_X
)

1986 
PNG_EXPORT
(
voidpf
,
≤g_zÆloc
Ë
PNGARG
((voidp‡
≤g_±r
, 
uI¡
 
ôems
,

1987 
uI¡
 
size
));

1990 
PNG_EXPORT
(,
≤g_z‰ì
Ë
PNGARG
((
voidpf
 
≤g_±r
, voidp‡
±r
));

1994 
PNG_EXPORT
(,
≤g_‰ì_d©a
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

1995 
≤g_öf›
 
öfo_±r
, 
≤g_uöt_32
 
‰ì_me
, 
num
));

1996 #ifde‡
PNG_FREE_ME_SUPPORTED


1999 
PNG_EXPORT
(,
≤g_d©a_‰ìr
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2000 
≤g_öf›
 
öfo_±r
, 
‰ìr
, 
≤g_uöt_32
 
mask
));

2003 
	#PNG_DESTROY_WILL_FREE_DATA
 1

	)

2004 
	#PNG_SET_WILL_FREE_DATA
 1

	)

2005 
	#PNG_USER_WILL_FREE_DATA
 2

	)

2007 
	#PNG_FREE_HIST
 0x0008

	)

2008 
	#PNG_FREE_ICCP
 0x0010

	)

2009 
	#PNG_FREE_SPLT
 0x0020

	)

2010 
	#PNG_FREE_ROWS
 0x0040

	)

2011 
	#PNG_FREE_PCAL
 0x0080

	)

2012 
	#PNG_FREE_SCAL
 0x0100

	)

2013 
	#PNG_FREE_UNKN
 0x0200

	)

2014 
	#PNG_FREE_LIST
 0x0400

	)

2015 
	#PNG_FREE_PLTE
 0x1000

	)

2016 
	#PNG_FREE_TRNS
 0x2000

	)

2017 
	#PNG_FREE_TEXT
 0x4000

	)

2018 
	#PNG_FREE_ALL
 0x7fff

	)

2019 
	#PNG_FREE_MUL
 0x4220

	)

2021 #ifde‡
PNG_USER_MEM_SUPPORTED


2022 
PNG_EXPORT
(
≤g_voidp
,
≤g_mÆloc_deÁu…
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2023 
≤g_uöt_32
 
size
));

2024 
PNG_EXPORT
(,
≤g_‰ì_deÁu…
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2025 
≤g_voidp
 
±r
));

2028 
PNG_EXPORT
(
≤g_voidp
,
≤g_mem˝y_check
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2029 
≤g_voidp
 
s1
,Öng_void∞
s2
, 
≤g_uöt_32
 
size
));

2031 
PNG_EXPORT
(
≤g_voidp
,
≤g_mem£t_check
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2032 
≤g_voidp
 
s1
, 
vÆue
, 
≤g_uöt_32
 
size
));

2034 #i‡
deföed
(
USE_FAR_KEYWORD
)

2035 *
≤g_Ár_to_√¨
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,
≤g_voidp
 
±r
,

2036 
check
));

2040 
PNG_EXPORT
(,
≤g_îr‹
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2041 
≤g_c⁄°_ch¨p
 
îr‹_mesßge
));

2044 
PNG_EXPORT
(,
≤g_chunk_îr‹
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2045 
≤g_c⁄°_ch¨p
 
îr‹_mesßge
));

2048 
PNG_EXPORT
(,
≤g_w¨nög
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2049 
≤g_c⁄°_ch¨p
 
w¨nög_mesßge
));

2052 
PNG_EXPORT
(,
≤g_chunk_w¨nög
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2053 
≤g_c⁄°_ch¨p
 
w¨nög_mesßge
));

2068 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_vÆid
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2069 
≤g_öf›
 
öfo_±r
, 
≤g_uöt_32
 
Êag
));

2072 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_rowbyãs
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2073 
≤g_öf›
 
öfo_±r
));

2075 #i‡
deföed
(
PNG_INFO_IMAGE_SUPPORTED
)

2078 
PNG_EXPORT
(
≤g_byãµ
,
≤g_gë_rows
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2079 
≤g_öf›
 
öfo_±r
));

2082 
PNG_EXPORT
(,
≤g_£t_rows
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2083 
≤g_öf›
 
öfo_±r
, 
≤g_byãµ
 
row_poöãrs
));

2087 
PNG_EXPORT
(
≤g_byã
,
≤g_gë_ch™√ls
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2088 
≤g_öf›
 
öfo_±r
));

2090 #ifde‡
PNG_EASY_ACCESS_SUPPORTED


2092 
PNG_EXPORT
(
≤g_uöt_32
, 
≤g_gë_image_width
Ë
PNGARG
((
≤g_°ru˘p


2093 
≤g_±r
, 
≤g_öf›
 
öfo_±r
));

2096 
PNG_EXPORT
(
≤g_uöt_32
, 
≤g_gë_image_height
Ë
PNGARG
((
≤g_°ru˘p


2097 
≤g_±r
, 
≤g_öf›
 
öfo_±r
));

2100 
PNG_EXPORT
(
≤g_byã
, 
≤g_gë_bô_dïth
Ë
PNGARG
((
≤g_°ru˘p


2101 
≤g_±r
, 
≤g_öf›
 
öfo_±r
));

2104 
PNG_EXPORT
(
≤g_byã
, 
≤g_gë_cﬁ‹_ty≥
Ë
PNGARG
((
≤g_°ru˘p


2105 
≤g_±r
, 
≤g_öf›
 
öfo_±r
));

2108 
PNG_EXPORT
(
≤g_byã
, 
≤g_gë_fûãr_ty≥
Ë
PNGARG
((
≤g_°ru˘p


2109 
≤g_±r
, 
≤g_öf›
 
öfo_±r
));

2112 
PNG_EXPORT
(
≤g_byã
, 
≤g_gë_öãæa˚_ty≥
Ë
PNGARG
((
≤g_°ru˘p


2113 
≤g_±r
, 
≤g_öf›
 
öfo_±r
));

2116 
PNG_EXPORT
(
≤g_byã
, 
≤g_gë_com¥essi⁄_ty≥
Ë
PNGARG
((
≤g_°ru˘p


2117 
≤g_±r
, 
≤g_öf›
 
öfo_±r
));

2120 
PNG_EXPORT
(
≤g_uöt_32
, 
≤g_gë_pixñs_≥r_mëî
Ë
PNGARG
((
≤g_°ru˘p


2121 
≤g_±r
, 
≤g_öf›
 
öfo_±r
));

2122 
PNG_EXPORT
(
≤g_uöt_32
, 
≤g_gë_x_pixñs_≥r_mëî
Ë
PNGARG
((
≤g_°ru˘p


2123 
≤g_±r
, 
≤g_öf›
 
öfo_±r
));

2124 
PNG_EXPORT
(
≤g_uöt_32
, 
≤g_gë_y_pixñs_≥r_mëî
Ë
PNGARG
((
≤g_°ru˘p


2125 
≤g_±r
, 
≤g_öf›
 
öfo_±r
));

2128 #ifde‡
PNG_FLOATING_POINT_SUPPORTED


2129 
PNG_EXPORT
(, 
≤g_gë_pixñ_a•e˘_øtio
Ë
PNGARG
((
≤g_°ru˘p


2130 
≤g_±r
, 
≤g_öf›
 
öfo_±r
));

2134 
PNG_EXPORT
(
≤g_öt_32
, 
≤g_gë_x_off£t_pixñs
Ë
PNGARG
((
≤g_°ru˘p


2135 
≤g_±r
, 
≤g_öf›
 
öfo_±r
));

2136 
PNG_EXPORT
(
≤g_öt_32
, 
≤g_gë_y_off£t_pixñs
Ë
PNGARG
((
≤g_°ru˘p


2137 
≤g_±r
, 
≤g_öf›
 
öfo_±r
));

2138 
PNG_EXPORT
(
≤g_öt_32
, 
≤g_gë_x_off£t_mi¸⁄s
Ë
PNGARG
((
≤g_°ru˘p


2139 
≤g_±r
, 
≤g_öf›
 
öfo_±r
));

2140 
PNG_EXPORT
(
≤g_öt_32
, 
≤g_gë_y_off£t_mi¸⁄s
Ë
PNGARG
((
≤g_°ru˘p


2141 
≤g_±r
, 
≤g_öf›
 
öfo_±r
));

2146 
PNG_EXPORT
(
≤g_byãp
,
≤g_gë_sig«tuª
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2147 
≤g_öf›
 
öfo_±r
));

2149 #i‡
deföed
(
PNG_bKGD_SUPPORTED
)

2150 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_bKGD
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2151 
≤g_öf›
 
öfo_±r
, 
≤g_cﬁ‹_16p
 *
background
));

2154 #i‡
deföed
(
PNG_bKGD_SUPPORTED
)

2155 
PNG_EXPORT
(,
≤g_£t_bKGD
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2156 
≤g_öf›
 
öfo_±r
, 
≤g_cﬁ‹_16p
 
background
));

2159 #i‡
deföed
(
PNG_cHRM_SUPPORTED
)

2160 #ifde‡
PNG_FLOATING_POINT_SUPPORTED


2161 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_cHRM
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2162 
≤g_öf›
 
öfo_±r
, *
whôe_x
, *
whôe_y
, *
ªd_x
,

2163 *
ªd_y
, *
gªí_x
, *
gªí_y
, *
blue_x
,

2164 *
blue_y
));

2166 #ifde‡
PNG_FIXED_POINT_SUPPORTED


2167 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_cHRM_fixed
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2168 
≤g_öf›
 
öfo_±r
, 
≤g_fixed_poöt
 *
öt_whôe_x
,Öng_fixed_point

2169 *
öt_whôe_y
, 
≤g_fixed_poöt
 *
öt_ªd_x
,Öng_fixed_poöà*
öt_ªd_y
,

2170 
≤g_fixed_poöt
 *
öt_gªí_x
,Öng_fixed_poöà*
öt_gªí_y
,Öng_fixed_point

2171 *
öt_blue_x
, 
≤g_fixed_poöt
 *
öt_blue_y
));

2175 #i‡
deföed
(
PNG_cHRM_SUPPORTED
)

2176 #ifde‡
PNG_FLOATING_POINT_SUPPORTED


2177 
PNG_EXPORT
(,
≤g_£t_cHRM
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2178 
≤g_öf›
 
öfo_±r
, 
whôe_x
, 
whôe_y
, 
ªd_x
,

2179 
ªd_y
, 
gªí_x
, 
gªí_y
, 
blue_x
, 
blue_y
));

2181 #ifde‡
PNG_FIXED_POINT_SUPPORTED


2182 
PNG_EXPORT
(,
≤g_£t_cHRM_fixed
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2183 
≤g_öf›
 
öfo_±r
, 
≤g_fixed_poöt
 
öt_whôe_x
,Öng_fixed_poöà
öt_whôe_y
,

2184 
≤g_fixed_poöt
 
öt_ªd_x
,Öng_fixed_poöà
öt_ªd_y
,Öng_fixed_point

2185 
öt_gªí_x
, 
≤g_fixed_poöt
 
öt_gªí_y
,Öng_fixed_poöà
öt_blue_x
,

2186 
≤g_fixed_poöt
 
öt_blue_y
));

2190 #i‡
deföed
(
PNG_gAMA_SUPPORTED
)

2191 #ifde‡
PNG_FLOATING_POINT_SUPPORTED


2192 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_gAMA
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2193 
≤g_öf›
 
öfo_±r
, *
fûe_gamma
));

2195 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_gAMA_fixed
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2196 
≤g_öf›
 
öfo_±r
, 
≤g_fixed_poöt
 *
öt_fûe_gamma
));

2199 #i‡
deföed
(
PNG_gAMA_SUPPORTED
)

2200 #ifde‡
PNG_FLOATING_POINT_SUPPORTED


2201 
PNG_EXPORT
(,
≤g_£t_gAMA
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2202 
≤g_öf›
 
öfo_±r
, 
fûe_gamma
));

2204 
PNG_EXPORT
(,
≤g_£t_gAMA_fixed
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2205 
≤g_öf›
 
öfo_±r
, 
≤g_fixed_poöt
 
öt_fûe_gamma
));

2208 #i‡
deföed
(
PNG_hIST_SUPPORTED
)

2209 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_hIST
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2210 
≤g_öf›
 
öfo_±r
, 
≤g_uöt_16p
 *
hi°
));

2213 #i‡
deföed
(
PNG_hIST_SUPPORTED
)

2214 
PNG_EXPORT
(,
≤g_£t_hIST
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2215 
≤g_öf›
 
öfo_±r
, 
≤g_uöt_16p
 
hi°
));

2218 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_IHDR
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2219 
≤g_öf›
 
öfo_±r
, 
≤g_uöt_32
 *
width
,Öng_uöt_32 *
height
,

2220 *
bô_dïth
, *
cﬁ‹_ty≥
, *
öãæa˚_mëhod
,

2221 *
com¥essi⁄_mëhod
, *
fûãr_mëhod
));

2223 
PNG_EXPORT
(,
≤g_£t_IHDR
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2224 
≤g_öf›
 
öfo_±r
, 
≤g_uöt_32
 
width
,Öng_uöt_32 
height
, 
bô_dïth
,

2225 
cﬁ‹_ty≥
, 
öãæa˚_mëhod
, 
com¥essi⁄_mëhod
,

2226 
fûãr_mëhod
));

2228 #i‡
deföed
(
PNG_oFFs_SUPPORTED
)

2229 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_oFFs
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2230 
≤g_öf›
 
öfo_±r
, 
≤g_öt_32
 *
off£t_x
,Öng_öt_32 *
off£t_y
,

2231 *
unô_ty≥
));

2234 #i‡
deföed
(
PNG_oFFs_SUPPORTED
)

2235 
PNG_EXPORT
(,
≤g_£t_oFFs
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2236 
≤g_öf›
 
öfo_±r
, 
≤g_öt_32
 
off£t_x
,Öng_öt_32 
off£t_y
,

2237 
unô_ty≥
));

2240 #i‡
deföed
(
PNG_pCAL_SUPPORTED
)

2241 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_pCAL
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2242 
≤g_öf›
 
öfo_±r
, 
≤g_ch¨p
 *
puΩo£
, 
≤g_öt_32
 *
X0
,Öng_öt_32 *
X1
,

2243 *
ty≥
, *
≈¨ams
, 
≤g_ch¨p
 *
unôs
, 
≤g_ch¨µ
 *
∑øms
));

2246 #i‡
deföed
(
PNG_pCAL_SUPPORTED
)

2247 
PNG_EXPORT
(,
≤g_£t_pCAL
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2248 
≤g_öf›
 
öfo_±r
, 
≤g_ch¨p
 
puΩo£
, 
≤g_öt_32
 
X0
,Öng_öt_32 
X1
,

2249 
ty≥
, 
≈¨ams
, 
≤g_ch¨p
 
unôs
, 
≤g_ch¨µ
 
∑øms
));

2252 #i‡
deföed
(
PNG_pHYs_SUPPORTED
)

2253 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_pHYs
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2254 
≤g_öf›
 
öfo_±r
, 
≤g_uöt_32
 *
ªs_x
,Öng_uöt_32 *
ªs_y
, *
unô_ty≥
));

2257 #i‡
deföed
(
PNG_pHYs_SUPPORTED
)

2258 
PNG_EXPORT
(,
≤g_£t_pHYs
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2259 
≤g_öf›
 
öfo_±r
, 
≤g_uöt_32
 
ªs_x
,Öng_uöt_32 
ªs_y
, 
unô_ty≥
));

2262 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_PLTE
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2263 
≤g_öf›
 
öfo_±r
, 
≤g_cﬁ‹p
 *
∑Àâe
, *
num_∑Àâe
));

2265 
PNG_EXPORT
(,
≤g_£t_PLTE
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2266 
≤g_öf›
 
öfo_±r
, 
≤g_cﬁ‹p
 
∑Àâe
, 
num_∑Àâe
));

2268 #i‡
deföed
(
PNG_sBIT_SUPPORTED
)

2269 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_sBIT
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2270 
≤g_öf›
 
öfo_±r
, 
≤g_cﬁ‹_8p
 *
sig_bô
));

2273 #i‡
deföed
(
PNG_sBIT_SUPPORTED
)

2274 
PNG_EXPORT
(,
≤g_£t_sBIT
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2275 
≤g_öf›
 
öfo_±r
, 
≤g_cﬁ‹_8p
 
sig_bô
));

2278 #i‡
deföed
(
PNG_sRGB_SUPPORTED
)

2279 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_sRGB
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2280 
≤g_öf›
 
öfo_±r
, *
öã¡
));

2283 #i‡
deföed
(
PNG_sRGB_SUPPORTED
)

2284 
PNG_EXPORT
(,
≤g_£t_sRGB
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2285 
≤g_öf›
 
öfo_±r
, 
öã¡
));

2286 
PNG_EXPORT
(,
≤g_£t_sRGB_gAMA_™d_cHRM
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2287 
≤g_öf›
 
öfo_±r
, 
öã¡
));

2290 #i‡
deföed
(
PNG_iCCP_SUPPORTED
)

2291 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_iCCP
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2292 
≤g_öf›
 
öfo_±r
, 
≤g_ch¨µ
 
«me
, *
com¥essi⁄_ty≥
,

2293 
≤g_ch¨µ
 
¥ofûe
, 
≤g_uöt_32
 *
¥oÊí
));

2297 #i‡
deföed
(
PNG_iCCP_SUPPORTED
)

2298 
PNG_EXPORT
(,
≤g_£t_iCCP
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2299 
≤g_öf›
 
öfo_±r
, 
≤g_ch¨p
 
«me
, 
com¥essi⁄_ty≥
,

2300 
≤g_ch¨p
 
¥ofûe
, 
≤g_uöt_32
 
¥oÊí
));

2304 #i‡
deföed
(
PNG_sPLT_SUPPORTED
)

2305 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_sPLT
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2306 
≤g_öf›
 
öfo_±r
, 
≤g_sPLT_çp
 
íåõs
));

2309 #i‡
deföed
(
PNG_sPLT_SUPPORTED
)

2310 
PNG_EXPORT
(,
≤g_£t_sPLT
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2311 
≤g_öf›
 
öfo_±r
, 
≤g_sPLT_ç
 
íåõs
, 
√¡rõs
));

2314 #i‡
deföed
(
PNG_TEXT_SUPPORTED
)

2316 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_ãxt
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2317 
≤g_öf›
 
öfo_±r
, 
≤g_ãxç
 *
ãxt_±r
, *
num_ãxt
));

2328 #i‡
deföed
(
PNG_TEXT_SUPPORTED
)

2329 
PNG_EXPORT
(,
≤g_£t_ãxt
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2330 
≤g_öf›
 
öfo_±r
, 
≤g_ãxç
 
ãxt_±r
, 
num_ãxt
));

2333 #i‡
deföed
(
PNG_tIME_SUPPORTED
)

2334 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_tIME
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2335 
≤g_öf›
 
öfo_±r
, 
≤g_timï
 *
mod_time
));

2338 #i‡
deföed
(
PNG_tIME_SUPPORTED
)

2339 
PNG_EXPORT
(,
≤g_£t_tIME
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2340 
≤g_öf›
 
öfo_±r
, 
≤g_timï
 
mod_time
));

2343 #i‡
deföed
(
PNG_tRNS_SUPPORTED
)

2344 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_tRNS
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2345 
≤g_öf›
 
öfo_±r
, 
≤g_byãp
 *
å™s
, *
num_å™s
,

2346 
≤g_cﬁ‹_16p
 *
å™s_vÆues
));

2349 #i‡
deföed
(
PNG_tRNS_SUPPORTED
)

2350 
PNG_EXPORT
(,
≤g_£t_tRNS
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2351 
≤g_öf›
 
öfo_±r
, 
≤g_byãp
 
å™s
, 
num_å™s
,

2352 
≤g_cﬁ‹_16p
 
å™s_vÆues
));

2355 #i‡
deföed
(
PNG_tRNS_SUPPORTED
)

2358 #i‡
deföed
(
PNG_sCAL_SUPPORTED
)

2359 #ifde‡
PNG_FLOATING_POINT_SUPPORTED


2360 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_sCAL
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2361 
≤g_öf›
 
öfo_±r
, *
unô
, *
width
, *
height
));

2363 #ifde‡
PNG_FIXED_POINT_SUPPORTED


2364 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_sCAL_s
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2365 
≤g_öf›
 
öfo_±r
, *
unô
, 
≤g_ch¨µ
 
swidth
,Öng_ch¨µ 
sheight
));

2370 #i‡
deföed
(
PNG_sCAL_SUPPORTED
)

2371 #ifde‡
PNG_FLOATING_POINT_SUPPORTED


2372 
PNG_EXPORT
(,
≤g_£t_sCAL
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2373 
≤g_öf›
 
öfo_±r
, 
unô
, 
width
, 
height
));

2375 #ifde‡
PNG_FIXED_POINT_SUPPORTED


2376 
PNG_EXPORT
(,
≤g_£t_sCAL_s
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2377 
≤g_öf›
 
öfo_±r
, 
unô
, 
≤g_ch¨p
 
swidth
,Öng_ch¨∞
sheight
));

2382 #i‡
deföed
(
PNG_UNKNOWN_CHUNKS_SUPPORTED
)

2392 
PNG_EXPORT
(, 
≤g_£t_kìp_unknown_chunks
Ë
PNGARG
((
≤g_°ru˘p


2393 
≤g_±r
, 
kìp
, 
≤g_byãp
 
chunk_li°
, 
num_chunks
));

2394 
PNG_EXPORT
(, 
≤g_£t_unknown_chunks
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2395 
≤g_öf›
 
öfo_±r
, 
≤g_unknown_chunkp
 
unknowns
, 
num_unknowns
));

2396 
PNG_EXPORT
(, 
≤g_£t_unknown_chunk_loˇti⁄
)

2397 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
, 
chunk
, 
loˇti⁄
));

2398 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_unknown_chunks
Ë
PNGARG
((
≤g_°ru˘p


2399 
≤g_±r
, 
≤g_öf›
 
öfo_±r
, 
≤g_unknown_chunkµ
 
íåõs
));

2401 #ifde‡
PNG_HANDLE_AS_UNKNOWN_SUPPORTED


2402 
PNG_EXPORT
(,
≤g_h™dÀ_as_unknown
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_byãp


2403 
chunk_«me
));

2409 
PNG_EXPORT
(, 
≤g_£t_övÆid
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2410 
≤g_öf›
 
öfo_±r
, 
mask
));

2412 #i‡
deföed
(
PNG_INFO_IMAGE_SUPPORTED
)

2414 
PNG_EXPORT
(, 
≤g_ªad_≤g
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2415 
≤g_öf›
 
öfo_±r
,

2416 
å™sf‹ms
,

2417 
≤g_voidp
 
∑øms
));

2418 
PNG_EXPORT
(, 
≤g_wrôe_≤g
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2419 
≤g_öf›
 
öfo_±r
,

2420 
å™sf‹ms
,

2421 
≤g_voidp
 
∑øms
));

2429 #ifde‡
PNG_DEBUG


2430 #i‡(
PNG_DEBUG
 > 0)

2431 #i‡!
deföed
(
PNG_DEBUG_FILE
Ë&& deföed(
_MSC_VER
)

2432 
	~<¸tdbg.h
>

2433 #i‡(
PNG_DEBUG
 > 1)

2434 
	#≤g_debug
(
l
,
m
Ë
	`_RPT0
(
_CRT_WARN
,m)

	)

2435 
	#≤g_debug1
(
l
,
m
,
p1
Ë
	`_RPT1
(
_CRT_WARN
,m,p1)

	)

2436 
	#≤g_debug2
(
l
,
m
,
p1
,
p2
Ë
	`_RPT2
(
_CRT_WARN
,m,p1,p2)

	)

2439 #i‚de‡
PNG_DEBUG_FILE


2440 
	#PNG_DEBUG_FILE
 
°dîr


	)

2442 #i‡(
PNG_DEBUG
 > 1)

2443 
	#≤g_debug
(
l
,
m
) \

2445 
num_èbs
=
l
; \

2446 
	`Ârötf
(
PNG_DEBUG_FILE
,"%s"
m
,(
num_èbs
==1 ? "\t" : \

2447 (
num_èbs
==2 ? "\t\t":(num_tabs>2 ? "\t\t\t":"")))); \

2448 }

	)

2449 
	#≤g_debug1
(
l
,
m
,
p1
) \

2451 
num_èbs
=
l
; \

2452 
	`Ârötf
(
PNG_DEBUG_FILE
,"%s"
m
,(
num_èbs
==1 ? "\t" : \

2453 (
num_èbs
==2 ? "\t\t":“um_èbs>2 ? "\t\t\t":""))),
p1
); \

2454 }

	)

2455 
	#≤g_debug2
(
l
,
m
,
p1
,
p2
) \

2457 
num_èbs
=
l
; \

2458 
	`Ârötf
(
PNG_DEBUG_FILE
,"%s"
m
,(
num_èbs
==1 ? "\t" : \

2459 (
num_èbs
==2 ? "\t\t":“um_èbs>2 ? "\t\t\t":""))),
p1
,
p2
); \

2460 }

	)

2465 #i‚de‡
≤g_debug


2466 
	#≤g_debug
(
l
, 
m
)

	)

2468 #i‚de‡
≤g_debug1


2469 
	#≤g_debug1
(
l
, 
m
, 
p1
)

	)

2471 #i‚de‡
≤g_debug2


2472 
	#≤g_debug2
(
l
, 
m
, 
p1
, 
p2
)

	)

2476 
PNG_EXPORT
(
≤g_byãp
,
≤g_sig_byãs
Ë
PNGARG
(());

2479 
PNG_EXPORT
(
≤g_ch¨p
,
≤g_gë_c›yright
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

2480 
PNG_EXPORT
(
≤g_ch¨p
,
≤g_gë_hódî_vî
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

2481 
PNG_EXPORT
(
≤g_ch¨p
,
≤g_gë_hódî_vîsi⁄
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

2482 
PNG_EXPORT
(
≤g_ch¨p
,
≤g_gë_lib≤g_vî
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

2484 #ifde‡
PNG_MNG_FEATURES_SUPPORTED


2485 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_≥rmô_mng_„©uªs
Ë
PNGARG
((
≤g_°ru˘p


2486 
≤g_±r
, 
≤g_uöt_32
 
mng_„©uªs_≥rmôãd
));

2490 
	#PNG_HANDLE_CHUNK_AS_DEFAULT
 0

	)

2491 
	#PNG_HANDLE_CHUNK_NEVER
 1

	)

2492 
	#PNG_HANDLE_CHUNK_IF_SAFE
 2

	)

2493 
	#PNG_HANDLE_CHUNK_ALWAYS
 3

	)

2496 #i‡
deföed
(
PNG_ASSEMBLER_CODE_SUPPORTED
)

2497 #i‡
deföed
(
PNG_MMX_CODE_SUPPORTED
)

2498 
	#PNG_ASM_FLAG_MMX_SUPPORT_COMPILED
 0x01

	)

2499 
	#PNG_ASM_FLAG_MMX_SUPPORT_IN_CPU
 0x02

	)

2500 
	#PNG_ASM_FLAG_MMX_READ_COMBINE_ROW
 0x04

	)

2501 
	#PNG_ASM_FLAG_MMX_READ_INTERLACE
 0x08

	)

2502 
	#PNG_ASM_FLAG_MMX_READ_FILTER_SUB
 0x10

	)

2503 
	#PNG_ASM_FLAG_MMX_READ_FILTER_UP
 0x20

	)

2504 
	#PNG_ASM_FLAG_MMX_READ_FILTER_AVG
 0x40

	)

2505 
	#PNG_ASM_FLAG_MMX_READ_FILTER_PAETH
 0x80

	)

2506 
	#PNG_ASM_FLAGS_INITIALIZED
 0x80000000

	)

2508 
	#PNG_MMX_READ_FLAGS
 ( 
PNG_ASM_FLAG_MMX_READ_COMBINE_ROW
 \

2509 | 
PNG_ASM_FLAG_MMX_READ_INTERLACE
 \

2510 | 
PNG_ASM_FLAG_MMX_READ_FILTER_SUB
 \

2511 | 
PNG_ASM_FLAG_MMX_READ_FILTER_UP
 \

2512 | 
PNG_ASM_FLAG_MMX_READ_FILTER_AVG
 \

2513 | 
PNG_ASM_FLAG_MMX_READ_FILTER_PAETH
 )

	)

2514 
	#PNG_MMX_WRITE_FLAGS
 ( 0 )

	)

2516 
	#PNG_MMX_FLAGS
 ( 
PNG_ASM_FLAG_MMX_SUPPORT_COMPILED
 \

2517 | 
PNG_ASM_FLAG_MMX_SUPPORT_IN_CPU
 \

2518 | 
PNG_MMX_READ_FLAGS
 \

2519 | 
PNG_MMX_WRITE_FLAGS
 )

	)

2521 
	#PNG_SELECT_READ
 1

	)

2522 
	#PNG_SELECT_WRITE
 2

	)

2525 #i‡!
deföed
(
PNG_1_0_X
)

2527 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_mmx_Êagmask
)

2528 
PNGARG
((
Êag_£À˘
, *
compûîID
));

2531 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_asm_Êagmask
)

2532 
PNGARG
((
Êag_£À˘
));

2535 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_asm_Êags
)

2536 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

2539 
PNG_EXPORT
(
≤g_byã
,
≤g_gë_mmx_bôdïth_thªshﬁd
)

2540 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

2543 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_mmx_rowbyãs_thªshﬁd
)

2544 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

2547 
PNG_EXPORT
(,
≤g_£t_asm_Êags
)

2548 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_uöt_32
 
asm_Êags
));

2551 
PNG_EXPORT
(,
≤g_£t_mmx_thªshﬁds
)

2552 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_byã
 
mmx_bôdïth_thªshﬁd
,

2553 
≤g_uöt_32
 
mmx_rowbyãs_thªshﬁd
));

2557 #i‡!
deföed
(
PNG_1_0_X
)

2559 
PNG_EXPORT
(,
≤g_mmx_suµ‹t
Ë
PNGARG
(());

2564 #ifde‡
PNG_ERROR_NUMBERS_SUPPORTED


2565 
PNG_EXPORT
(,
≤g_£t_°rù_îr‹_numbîs
Ë
PNGARG
((
≤g_°ru˘p


2566 
≤g_±r
, 
≤g_uöt_32
 
°rù_mode
));

2572 #ifde‡
PNG_SET_USER_LIMITS_SUPPORTED


2573 
PNG_EXPORT
(,
≤g_£t_u£r_limôs
Ë
PNGARG
((
≤g_°ru˘p


2574 
≤g_±r
, 
≤g_uöt_32
 
u£r_width_max
,Öng_uöt_32 
u£r_height_max
));

2575 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_u£r_width_max
Ë
PNGARG
((
≤g_°ru˘p


2576 
≤g_±r
));

2577 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_u£r_height_max
Ë
PNGARG
((
≤g_°ru˘p


2578 
≤g_±r
));

2583 #ifde‡
PNG_READ_COMPOSITE_NODIV_SUPPORTED


2598 
	#≤g_composôe
(
composôe
, 
fg
, 
Æpha
, 
bg
) \

2599 { 
≤g_uöt_16
 
ãmp
 = (≤g_uöt_16)(’ng_uöt_16)(
fg
Ë* (≤g_uöt_16)(
Æpha
) \

2600 + (
≤g_uöt_16
)(
bg
)*(png_uint_16)(255 - \

2601 (
≤g_uöt_16
)(
Æpha
)) + (png_uint_16)128); \

2602 (
composôe
Ë(
≤g_byã
)((
ãmp
 + (ãm∞>> 8)Ë>> 8); }

	)

2604 
	#≤g_composôe_16
(
composôe
, 
fg
, 
Æpha
, 
bg
) \

2605 { 
≤g_uöt_32
 
ãmp
 = (≤g_uöt_32)(’ng_uöt_32)(
fg
Ë* (≤g_uöt_32)(
Æpha
) \

2606 + (
≤g_uöt_32
)(
bg
)*(png_uint_32)(65535L - \

2607 (
≤g_uöt_32
)(
Æpha
)) + (png_uint_32)32768L); \

2608 (
composôe
Ë(
≤g_uöt_16
)((
ãmp
 + (ãm∞>> 16)Ë>> 16); }

	)

2612 
	#≤g_composôe
(
composôe
, 
fg
, 
Æpha
, 
bg
) \

2613 (
composôe
Ë(
≤g_byã
)(((
≤g_uöt_16
)(
fg
Ë* (≤g_uöt_16)(
Æpha
) + \

2614 (
≤g_uöt_16
)(
bg
Ë* (≤g_uöt_16)(255 - (≤g_uöt_16)(
Æpha
)) + \

2615 (
≤g_uöt_16
)127Ë/ 255)

	)

2617 
	#≤g_composôe_16
(
composôe
, 
fg
, 
Æpha
, 
bg
) \

2618 (
composôe
Ë(
≤g_uöt_16
)(((
≤g_uöt_32
)(
fg
Ë* (≤g_uöt_32)(
Æpha
) + \

2619 (
≤g_uöt_32
)(
bg
)*’ng_uöt_32)(65535L - (≤g_uöt_32)(
Æpha
)) + \

2620 (
≤g_uöt_32
)32767Ë/ (≤g_uöt_32)65535L)

	)

2632 #i‡
deföed
(
PNG_READ_BIG_ENDIAN_SUPPORTED
)

2633 
	#≤g_gë_uöt_32
(
buf
Ë–*((
≤g_uöt_32p
Ë(buf)))

	)

2634 
	#≤g_gë_uöt_16
(
buf
Ë–*((
≤g_uöt_16p
Ë(buf)))

	)

2635 
	#≤g_gë_öt_32
(
buf
Ë–*((
≤g_öt_32p
Ë(buf)))

	)

2637 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_uöt_32
Ë
PNGARG
((
≤g_byãp
 
buf
));

2638 
PNG_EXPORT
(
≤g_uöt_16
,
≤g_gë_uöt_16
Ë
PNGARG
((
≤g_byãp
 
buf
));

2639 
PNG_EXPORT
(
≤g_öt_32
,
≤g_gë_öt_32
Ë
PNGARG
((
≤g_byãp
 
buf
));

2641 
PNG_EXPORT
(
≤g_uöt_32
,
≤g_gë_uöt_31
)

2642 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_byãp
 
buf
));

2647 
PNG_EXPORT
(,
≤g_ßve_uöt_32
)

2648 
PNGARG
((
≤g_byãp
 
buf
, 
≤g_uöt_32
 
i
));

2649 
PNG_EXPORT
(,
≤g_ßve_öt_32
)

2650 
PNGARG
((
≤g_byãp
 
buf
, 
≤g_öt_32
 
i
));

2656 
PNG_EXPORT
(,
≤g_ßve_uöt_16
)

2657 
PNGARG
((
≤g_byãp
 
buf
, 
i
));

2668 #i‡
deföed
(
PNG_INTERNAL
)

2673 
	#PNG_HAVE_IHDR
 0x01

	)

2674 
	#PNG_HAVE_PLTE
 0x02

	)

2675 
	#PNG_HAVE_IDAT
 0x04

	)

2676 
	#PNG_AFTER_IDAT
 0x08

	)

2677 
	#PNG_HAVE_IEND
 0x10

	)

2678 
	#PNG_HAVE_gAMA
 0x20

	)

2679 
	#PNG_HAVE_cHRM
 0x40

	)

2680 
	#PNG_HAVE_sRGB
 0x80

	)

2681 
	#PNG_HAVE_CHUNK_HEADER
 0x100

	)

2682 
	#PNG_WROTE_tIME
 0x200

	)

2683 
	#PNG_WROTE_INFO_BEFORE_PLTE
 0x400

	)

2684 
	#PNG_BACKGROUND_IS_GRAY
 0x800

	)

2685 
	#PNG_HAVE_PNG_SIGNATURE
 0x1000

	)

2686 
	#PNG_HAVE_CHUNK_AFTER_IDAT
 0x2000

	)

2689 
	#PNG_BGR
 0x0001

	)

2690 
	#PNG_INTERLACE
 0x0002

	)

2691 
	#PNG_PACK
 0x0004

	)

2692 
	#PNG_SHIFT
 0x0008

	)

2693 
	#PNG_SWAP_BYTES
 0x0010

	)

2694 
	#PNG_INVERT_MONO
 0x0020

	)

2695 
	#PNG_DITHER
 0x0040

	)

2696 
	#PNG_BACKGROUND
 0x0080

	)

2697 
	#PNG_BACKGROUND_EXPAND
 0x0100

	)

2699 
	#PNG_16_TO_8
 0x0400

	)

2700 
	#PNG_RGBA
 0x0800

	)

2701 
	#PNG_EXPAND
 0x1000

	)

2702 
	#PNG_GAMMA
 0x2000

	)

2703 
	#PNG_GRAY_TO_RGB
 0x4000

	)

2704 
	#PNG_FILLER
 0x8000L

	)

2705 
	#PNG_PACKSWAP
 0x10000L

	)

2706 
	#PNG_SWAP_ALPHA
 0x20000L

	)

2707 
	#PNG_STRIP_ALPHA
 0x40000L

	)

2708 
	#PNG_INVERT_ALPHA
 0x80000L

	)

2709 
	#PNG_USER_TRANSFORM
 0x100000L

	)

2710 
	#PNG_RGB_TO_GRAY_ERR
 0x200000L

	)

2711 
	#PNG_RGB_TO_GRAY_WARN
 0x400000L

	)

2712 
	#PNG_RGB_TO_GRAY
 0x600000L

	)

2714 
	#PNG_ADD_ALPHA
 0x1000000L

	)

2715 
	#PNG_EXPAND_tRNS
 0x2000000L

	)

2723 
	#PNG_STRUCT_PNG
 0x0001

	)

2724 
	#PNG_STRUCT_INFO
 0x0002

	)

2727 
	#PNG_WEIGHT_SHIFT
 8

	)

2728 
	#PNG_WEIGHT_FACTOR
 (1<<(
PNG_WEIGHT_SHIFT
))

	)

2729 
	#PNG_COST_SHIFT
 3

	)

2730 
	#PNG_COST_FACTOR
 (1<<(
PNG_COST_SHIFT
))

	)

2733 
	#PNG_FLAG_ZLIB_CUSTOM_STRATEGY
 0x0001

	)

2734 
	#PNG_FLAG_ZLIB_CUSTOM_LEVEL
 0x0002

	)

2735 
	#PNG_FLAG_ZLIB_CUSTOM_MEM_LEVEL
 0x0004

	)

2736 
	#PNG_FLAG_ZLIB_CUSTOM_WINDOW_BITS
 0x0008

	)

2737 
	#PNG_FLAG_ZLIB_CUSTOM_METHOD
 0x0010

	)

2738 
	#PNG_FLAG_ZLIB_FINISHED
 0x0020

	)

2739 
	#PNG_FLAG_ROW_INIT
 0x0040

	)

2740 
	#PNG_FLAG_FILLER_AFTER
 0x0080

	)

2741 
	#PNG_FLAG_CRC_ANCILLARY_USE
 0x0100

	)

2742 
	#PNG_FLAG_CRC_ANCILLARY_NOWARN
 0x0200

	)

2743 
	#PNG_FLAG_CRC_CRITICAL_USE
 0x0400

	)

2744 
	#PNG_FLAG_CRC_CRITICAL_IGNORE
 0x0800

	)

2745 
	#PNG_FLAG_FREE_PLTE
 0x1000

	)

2746 
	#PNG_FLAG_FREE_TRNS
 0x2000

	)

2747 
	#PNG_FLAG_FREE_HIST
 0x4000

	)

2748 
	#PNG_FLAG_KEEP_UNKNOWN_CHUNKS
 0x8000L

	)

2749 
	#PNG_FLAG_KEEP_UNSAFE_CHUNKS
 0x10000L

	)

2750 
	#PNG_FLAG_LIBRARY_MISMATCH
 0x20000L

	)

2751 
	#PNG_FLAG_STRIP_ERROR_NUMBERS
 0x40000L

	)

2752 
	#PNG_FLAG_STRIP_ERROR_TEXT
 0x80000L

	)

2753 
	#PNG_FLAG_MALLOC_NULL_MEM_OK
 0x100000L

	)

2754 
	#PNG_FLAG_ADD_ALPHA
 0x200000L

	)

2755 
	#PNG_FLAG_STRIP_ALPHA
 0x400000L

	)

2765 
	#PNG_FLAG_CRC_ANCILLARY_MASK
 (
PNG_FLAG_CRC_ANCILLARY_USE
 | \

2766 
PNG_FLAG_CRC_ANCILLARY_NOWARN
)

	)

2768 
	#PNG_FLAG_CRC_CRITICAL_MASK
 (
PNG_FLAG_CRC_CRITICAL_USE
 | \

2769 
PNG_FLAG_CRC_CRITICAL_IGNORE
)

	)

2771 
	#PNG_FLAG_CRC_MASK
 (
PNG_FLAG_CRC_ANCILLARY_MASK
 | \

2772 
PNG_FLAG_CRC_CRITICAL_MASK
)

	)

2776 
	#PNG_COLOR_DIST
(
c1
, 
c2
Ë(
	`abs
(()((c1).
ªd
) - ()((c2).red)) + \

2777 
	`abs
(()((
c1
).
gªí
Ë- ()((
c2
).green)) + \

2778 
	`abs
(()((
c1
).
blue
Ë- ()((
c2
).blue)))

	)

2781 
	#PNG_ROWBYTES
(
pixñ_bôs
, 
width
) \

2782 ((
pixñ_bôs
) >= 8 ? \

2783 ((
width
Ë* (((
≤g_uöt_32
)(
pixñ_bôs
)) >> 3)) : \

2784 (–((
width
Ë* ((
≤g_uöt_32
)(
pixñ_bôs
))Ë+ 7Ë>> 3Ë)

	)

2790 
	#PNG_OUT_OF_RANGE
(
vÆue
, 
idól
, 
dñè
) \

2791 –(
vÆue
Ë< (
idól
)-(
dñè
Ë|| (vÆueË> (idól)+(dñèË)

	)

2794 #i‡!
deföed
(
PNG_NO_EXTERN
Ë|| deföed(
PNG_ALWAYS_EXTERN
)

2796 #ifde‡
PNG_USE_GLOBAL_ARRAYS


2797 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_sig
[8];

2800 
	#≤g_sig
 
	`≤g_sig_byãs
(
NULL
)

	)

2809 
	#PNG_IHDR
 c⁄° 
≤g_byã
 
≤g_IHDR
[5] = { 73, 72, 68, 82, '\0'}

	)

2810 
	#PNG_IDAT
 c⁄° 
≤g_byã
 
≤g_IDAT
[5] = { 73, 68, 65, 84, '\0'}

	)

2811 
	#PNG_IEND
 c⁄° 
≤g_byã
 
≤g_IEND
[5] = { 73, 69, 78, 68, '\0'}

	)

2812 
	#PNG_PLTE
 c⁄° 
≤g_byã
 
≤g_PLTE
[5] = { 80, 76, 84, 69, '\0'}

	)

2813 
	#PNG_bKGD
 c⁄° 
≤g_byã
 
≤g_bKGD
[5] = { 98, 75, 71, 68, '\0'}

	)

2814 
	#PNG_cHRM
 c⁄° 
≤g_byã
 
≤g_cHRM
[5] = { 99, 72, 82, 77, '\0'}

	)

2815 
	#PNG_gAMA
 c⁄° 
≤g_byã
 
≤g_gAMA
[5] = {103, 65, 77, 65, '\0'}

	)

2816 
	#PNG_hIST
 c⁄° 
≤g_byã
 
≤g_hIST
[5] = {104, 73, 83, 84, '\0'}

	)

2817 
	#PNG_iCCP
 c⁄° 
≤g_byã
 
≤g_iCCP
[5] = {105, 67, 67, 80, '\0'}

	)

2818 
	#PNG_iTXt
 c⁄° 
≤g_byã
 
≤g_iTXt
[5] = {105, 84, 88, 116, '\0'}

	)

2819 
	#PNG_oFFs
 c⁄° 
≤g_byã
 
≤g_oFFs
[5] = {111, 70, 70, 115, '\0'}

	)

2820 
	#PNG_pCAL
 c⁄° 
≤g_byã
 
≤g_pCAL
[5] = {112, 67, 65, 76, '\0'}

	)

2821 
	#PNG_sCAL
 c⁄° 
≤g_byã
 
≤g_sCAL
[5] = {115, 67, 65, 76, '\0'}

	)

2822 
	#PNG_pHYs
 c⁄° 
≤g_byã
 
≤g_pHYs
[5] = {112, 72, 89, 115, '\0'}

	)

2823 
	#PNG_sBIT
 c⁄° 
≤g_byã
 
≤g_sBIT
[5] = {115, 66, 73, 84, '\0'}

	)

2824 
	#PNG_sPLT
 c⁄° 
≤g_byã
 
≤g_sPLT
[5] = {115, 80, 76, 84, '\0'}

	)

2825 
	#PNG_sRGB
 c⁄° 
≤g_byã
 
≤g_sRGB
[5] = {115, 82, 71, 66, '\0'}

	)

2826 
	#PNG_tEXt
 c⁄° 
≤g_byã
 
≤g_tEXt
[5] = {116, 69, 88, 116, '\0'}

	)

2827 
	#PNG_tIME
 c⁄° 
≤g_byã
 
≤g_tIME
[5] = {116, 73, 77, 69, '\0'}

	)

2828 
	#PNG_tRNS
 c⁄° 
≤g_byã
 
≤g_tRNS
[5] = {116, 82, 78, 83, '\0'}

	)

2829 
	#PNG_zTXt
 c⁄° 
≤g_byã
 
≤g_zTXt
[5] = {122, 84, 88, 116, '\0'}

	)

2831 #ifde‡
PNG_USE_GLOBAL_ARRAYS


2832 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_IHDR
[5];

2833 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_IDAT
[5];

2834 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_IEND
[5];

2835 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_PLTE
[5];

2836 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_bKGD
[5];

2837 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_cHRM
[5];

2838 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_gAMA
[5];

2839 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_hIST
[5];

2840 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_iCCP
[5];

2841 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_iTXt
[5];

2842 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_oFFs
[5];

2843 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_pCAL
[5];

2844 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_sCAL
[5];

2845 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_pHYs
[5];

2846 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_sBIT
[5];

2847 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_sPLT
[5];

2848 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_sRGB
[5];

2849 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_tEXt
[5];

2850 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_tIME
[5];

2851 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_tRNS
[5];

2852 
PNG_EXPORT_VAR
 (c⁄° 
≤g_byã
 
FARDATA
Ë
	g≤g_zTXt
[5];

2855 #i‡
deföed
(
PNG_1_0_X
Ë|| deföed (
PNG_1_2_X
)

2859 
PNG_EXPORT
(,
≤g_ªad_öô
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

2860 #unde‡
≤g_ªad_öô


2861 
	#≤g_ªad_öô
(
≤g_±r
Ë
	`≤g_ªad_öô_3
(&png_ptr, \

2862 
PNG_LIBPNG_VER_STRING
, 
	`≤g_sizeof
(
≤g_°ru˘
));

	)

2865 
PNG_EXPORT
(,
≤g_ªad_öô_3
Ë
PNGARG
((
≤g_°ru˘µ
 
±r_±r
,

2866 
≤g_c⁄°_ch¨p
 
u£r_≤g_vî
, 
≤g_size_t
 
≤g_°ru˘_size
));

2867 #i‡
deföed
(
PNG_1_0_X
Ë|| deföed (
PNG_1_2_X
)

2868 
PNG_EXPORT
(,
≤g_ªad_öô_2
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2869 
≤g_c⁄°_ch¨p
 
u£r_≤g_vî
, 
≤g_size_t
 
≤g_°ru˘_size
,Öng_size_t

2870 
≤g_öfo_size
));

2873 #i‡
deföed
(
PNG_1_0_X
Ë|| deföed (
PNG_1_2_X
)

2877 
PNG_EXPORT
(,
≤g_wrôe_öô
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

2878 #unde‡
≤g_wrôe_öô


2879 
	#≤g_wrôe_öô
(
≤g_±r
Ë
	`≤g_wrôe_öô_3
(&png_ptr, \

2880 
PNG_LIBPNG_VER_STRING
, 
	`≤g_sizeof
(
≤g_°ru˘
));

	)

2883 
PNG_EXPORT
(,
≤g_wrôe_öô_3
Ë
PNGARG
((
≤g_°ru˘µ
 
±r_±r
,

2884 
≤g_c⁄°_ch¨p
 
u£r_≤g_vî
, 
≤g_size_t
 
≤g_°ru˘_size
));

2885 
PNG_EXPORT
(,
≤g_wrôe_öô_2
Ë
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2886 
≤g_c⁄°_ch¨p
 
u£r_≤g_vî
, 
≤g_size_t
 
≤g_°ru˘_size
,Öng_size_t

2887 
≤g_öfo_size
));

2890 
PNG_EXTERN
 
≤g_voidp
 
≤g_¸óã_°ru˘
 
PNGARG
((
ty≥
));

2893 
PNG_EXTERN
 
≤g_de°roy_°ru˘
 
PNGARG
((
≤g_voidp
 
°ru˘_±r
));

2895 
PNG_EXTERN
 
≤g_voidp
 
≤g_¸óã_°ru˘_2
 
PNGARG
((
ty≥
, 
≤g_mÆloc_±r


2896 
mÆloc_‚
, 
≤g_voidp
 
mem_±r
));

2897 
PNG_EXTERN
 
≤g_de°roy_°ru˘_2
 
PNGARG
((
≤g_voidp
 
°ru˘_±r
,

2898 
≤g_‰ì_±r
 
‰ì_‚
, 
≤g_voidp
 
mem_±r
));

2901 
PNG_EXTERN
 
≤g_öfo_de°roy
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2902 
≤g_öf›
 
öfo_±r
));

2904 #i‚de‡
PNG_1_0_X


2906 
PNG_EXTERN
 
voidpf
 
≤g_zÆloc
 
PNGARG
((voidp‡
≤g_±r
, 
uI¡
 
ôems
, uI¡ 
size
));

2909 
PNG_EXTERN
 
≤g_z‰ì
 
PNGARG
((
voidpf
 
≤g_±r
, voidp‡
±r
));

2911 #ifde‡
PNG_SIZE_T


2913 
PNG_EXTERN
 
≤g_size_t
 
PNGAPI
 
≤g_c⁄vît_size
 
PNGARG
((
size_t
 
size
));

2919 
PNG_EXTERN
 
PNGAPI
 
≤g_deÁu…_ªad_d©a
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2920 
≤g_byãp
 
d©a
, 
≤g_size_t
 
Àngth
));

2922 #ifde‡
PNG_PROGRESSIVE_READ_SUPPORTED


2923 
PNG_EXTERN
 
PNGAPI
 
≤g_push_fûl_buf„r
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2924 
≤g_byãp
 
buf„r
, 
≤g_size_t
 
Àngth
));

2927 
PNG_EXTERN
 
PNGAPI
 
≤g_deÁu…_wrôe_d©a
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2928 
≤g_byãp
 
d©a
, 
≤g_size_t
 
Àngth
));

2930 #i‡
deföed
(
PNG_WRITE_FLUSH_SUPPORTED
)

2931 #i‡!
deföed
(
PNG_NO_STDIO
)

2932 
PNG_EXTERN
 
PNGAPI
 
≤g_deÁu…_Êush
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

2936 #ifde‡
PNG_PROGRESSIVE_READ_SUPPORTED


2937 
PNG_EXTERN
 
≤g_push_fûl_buf„r
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2938 
≤g_byãp
 
buf„r
, 
≤g_size_t
 
Àngth
));

2943 
PNG_EXTERN
 
≤g_ª£t_¸c
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

2946 
PNG_EXTERN
 
≤g_wrôe_d©a
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_byãp
 
d©a
,

2947 
≤g_size_t
 
Àngth
));

2950 
PNG_EXTERN
 
≤g_ªad_d©a
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_byãp
 
d©a
,

2951 
≤g_size_t
 
Àngth
));

2954 
PNG_EXTERN
 
≤g_¸c_ªad
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_byãp
 
buf
,

2955 
≤g_size_t
 
Àngth
));

2958 #i‡
deföed
(
PNG_zTXt_SUPPORTED
Ë|| deföed(
PNG_iTXt_SUPPORTED
) || \

2959 
deföed
(
PNG_iCCP_SUPPORTED
Ë|| deföed(
PNG_sPLT_SUPPORTED
)

2960 
PNG_EXTERN
 
≤g_ch¨p
 
≤g_decom¥ess_chunk
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

2961 
comp_ty≥
, 
≤g_ch¨p
 
chunkd©a
, 
≤g_size_t
 
chunkÀngth
,

2962 
≤g_size_t
 
¥efix_Àngth
,Öng_size_à*
d©a_Àngth
));

2966 
PNG_EXTERN
 
≤g_¸c_föish
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_uöt_32
 
skù
));

2969 
PNG_EXTERN
 
≤g_¸c_îr‹
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

2975 
PNG_EXTERN
 
≤g_ˇlcuœã_¸c
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_byãp
 
±r
,

2976 
≤g_size_t
 
Àngth
));

2978 #i‡
deföed
(
PNG_WRITE_FLUSH_SUPPORTED
)

2979 
PNG_EXTERN
 
≤g_Êush
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

2983 
PNG_EXTERN
 
≤g_wrôe_sig
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

2990 
PNG_EXTERN
 
≤g_wrôe_IHDR
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_uöt_32
 
width
,

2991 
≤g_uöt_32
 
height
,

2992 
bô_dïth
, 
cﬁ‹_ty≥
, 
com¥essi⁄_mëhod
, 
fûãr_mëhod
,

2993 
öãæa˚_mëhod
));

2995 
PNG_EXTERN
 
≤g_wrôe_PLTE
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_cﬁ‹p
 
∑Àâe
,

2996 
≤g_uöt_32
 
num_∑l
));

2998 
PNG_EXTERN
 
≤g_wrôe_IDAT
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_byãp
 
d©a
,

2999 
≤g_size_t
 
Àngth
));

3001 
PNG_EXTERN
 
≤g_wrôe_IEND
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

3003 #i‡
deföed
(
PNG_WRITE_gAMA_SUPPORTED
)

3004 #ifde‡
PNG_FLOATING_POINT_SUPPORTED


3005 
PNG_EXTERN
 
≤g_wrôe_gAMA
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
fûe_gamma
));

3007 #ifde‡
PNG_FIXED_POINT_SUPPORTED


3008 
PNG_EXTERN
 
≤g_wrôe_gAMA_fixed
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_fixed_poöt


3009 
fûe_gamma
));

3013 #i‡
deföed
(
PNG_WRITE_sBIT_SUPPORTED
)

3014 
PNG_EXTERN
 
≤g_wrôe_sBIT
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_cﬁ‹_8p
 
sbô
,

3015 
cﬁ‹_ty≥
));

3018 #i‡
deföed
(
PNG_WRITE_cHRM_SUPPORTED
)

3019 #ifde‡
PNG_FLOATING_POINT_SUPPORTED


3020 
PNG_EXTERN
 
≤g_wrôe_cHRM
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3021 
whôe_x
, 
whôe_y
,

3022 
ªd_x
, 
ªd_y
, 
gªí_x
, 
gªí_y
,

3023 
blue_x
, 
blue_y
));

3025 #ifde‡
PNG_FIXED_POINT_SUPPORTED


3026 
PNG_EXTERN
 
≤g_wrôe_cHRM_fixed
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3027 
≤g_fixed_poöt
 
öt_whôe_x
,Öng_fixed_poöà
öt_whôe_y
,

3028 
≤g_fixed_poöt
 
öt_ªd_x
,Öng_fixed_poöà
öt_ªd_y
,Öng_fixed_point

3029 
öt_gªí_x
, 
≤g_fixed_poöt
 
öt_gªí_y
,Öng_fixed_poöà
öt_blue_x
,

3030 
≤g_fixed_poöt
 
öt_blue_y
));

3034 #i‡
deföed
(
PNG_WRITE_sRGB_SUPPORTED
)

3035 
PNG_EXTERN
 
≤g_wrôe_sRGB
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3036 
öã¡
));

3039 #i‡
deföed
(
PNG_WRITE_iCCP_SUPPORTED
)

3040 
PNG_EXTERN
 
≤g_wrôe_iCCP
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3041 
≤g_ch¨p
 
«me
, 
com¥essi⁄_ty≥
,

3042 
≤g_ch¨p
 
¥ofûe
, 
¥oÊí
));

3046 #i‡
deföed
(
PNG_WRITE_sPLT_SUPPORTED
)

3047 
PNG_EXTERN
 
≤g_wrôe_sPLT
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3048 
≤g_sPLT_ç
 
∑Àâe
));

3051 #i‡
deföed
(
PNG_WRITE_tRNS_SUPPORTED
)

3052 
PNG_EXTERN
 
≤g_wrôe_tRNS
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_byãp
 
å™s
,

3053 
≤g_cﬁ‹_16p
 
vÆues
, 
numbî
, 
cﬁ‹_ty≥
));

3056 #i‡
deföed
(
PNG_WRITE_bKGD_SUPPORTED
)

3057 
PNG_EXTERN
 
≤g_wrôe_bKGD
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3058 
≤g_cﬁ‹_16p
 
vÆues
, 
cﬁ‹_ty≥
));

3061 #i‡
deföed
(
PNG_WRITE_hIST_SUPPORTED
)

3062 
PNG_EXTERN
 
≤g_wrôe_hIST
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_uöt_16p
 
hi°
,

3063 
num_hi°
));

3066 #i‡
deföed
(
PNG_WRITE_TEXT_SUPPORTED
Ë|| deföed(
PNG_WRITE_pCAL_SUPPORTED
) || \

3067 
deföed
(
PNG_WRITE_iCCP_SUPPORTED
Ë|| deföed(
PNG_WRITE_sPLT_SUPPORTED
)

3068 
PNG_EXTERN
 
≤g_size_t
 
≤g_check_keyw‹d
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3069 
≤g_ch¨p
 
key
, 
≤g_ch¨µ
 
√w_key
));

3072 #i‡
deföed
(
PNG_WRITE_tEXt_SUPPORTED
)

3073 
PNG_EXTERN
 
≤g_wrôe_tEXt
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_ch¨p
 
key
,

3074 
≤g_ch¨p
 
ãxt
, 
≤g_size_t
 
ãxt_Àn
));

3077 #i‡
deföed
(
PNG_WRITE_zTXt_SUPPORTED
)

3078 
PNG_EXTERN
 
≤g_wrôe_zTXt
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_ch¨p
 
key
,

3079 
≤g_ch¨p
 
ãxt
, 
≤g_size_t
 
ãxt_Àn
, 
com¥essi⁄
));

3082 #i‡
deföed
(
PNG_WRITE_iTXt_SUPPORTED
)

3083 
PNG_EXTERN
 
≤g_wrôe_iTXt
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3084 
com¥essi⁄
, 
≤g_ch¨p
 
key
,Öng_ch¨∞
œng
,Öng_ch¨∞
œng_key
,

3085 
≤g_ch¨p
 
ãxt
));

3088 #i‡
deföed
(
PNG_TEXT_SUPPORTED
)

3089 
PNG_EXTERN
 
≤g_£t_ãxt_2
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3090 
≤g_öf›
 
öfo_±r
, 
≤g_ãxç
 
ãxt_±r
, 
num_ãxt
));

3093 #i‡
deföed
(
PNG_WRITE_oFFs_SUPPORTED
)

3094 
PNG_EXTERN
 
≤g_wrôe_oFFs
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3095 
≤g_öt_32
 
x_off£t
,Öng_öt_32 
y_off£t
, 
unô_ty≥
));

3098 #i‡
deföed
(
PNG_WRITE_pCAL_SUPPORTED
)

3099 
PNG_EXTERN
 
≤g_wrôe_pCAL
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_ch¨p
 
puΩo£
,

3100 
≤g_öt_32
 
X0
,Öng_öt_32 
X1
, 
ty≥
, 
≈¨ams
,

3101 
≤g_ch¨p
 
unôs
, 
≤g_ch¨µ
 
∑øms
));

3104 #i‡
deföed
(
PNG_WRITE_pHYs_SUPPORTED
)

3105 
PNG_EXTERN
 
≤g_wrôe_pHYs
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3106 
≤g_uöt_32
 
x_pixñs_≥r_unô
,Öng_uöt_32 
y_pixñs_≥r_unô
,

3107 
unô_ty≥
));

3110 #i‡
deföed
(
PNG_WRITE_tIME_SUPPORTED
)

3111 
PNG_EXTERN
 
≤g_wrôe_tIME
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3112 
≤g_timï
 
mod_time
));

3115 #i‡
deföed
(
PNG_WRITE_sCAL_SUPPORTED
)

3116 #i‡
deföed
(
PNG_FLOATING_POINT_SUPPORTED
Ë&& !deföed(
PNG_NO_STDIO
)

3117 
PNG_EXTERN
 
≤g_wrôe_sCAL
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3118 
unô
, 
width
, 
height
));

3120 #ifde‡
PNG_FIXED_POINT_SUPPORTED


3121 
PNG_EXTERN
 
≤g_wrôe_sCAL_s
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3122 
unô
, 
≤g_ch¨p
 
width
,Öng_ch¨∞
height
));

3128 
PNG_EXTERN
 
≤g_wrôe_föish_row
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

3131 
PNG_EXTERN
 
≤g_wrôe_°¨t_row
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

3133 #i‡
deföed
(
PNG_READ_GAMMA_SUPPORTED
)

3134 
PNG_EXTERN
 
≤g_buûd_gamma_èbÀ
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

3138 
PNG_EXTERN
 
≤g_comböe_row
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_byãp
 
row
,

3139 
mask
));

3141 #i‡
deföed
(
PNG_READ_INTERLACING_SUPPORTED
)

3147 
PNG_EXTERN
 
≤g_do_ªad_öãæa˚
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

3152 #i‡
deföed
(
PNG_WRITE_INTERLACING_SUPPORTED
)

3154 
PNG_EXTERN
 
≤g_do_wrôe_öãæa˚
 
PNGARG
((
≤g_row_öf›
 
row_öfo
,

3155 
≤g_byãp
 
row
, 
∑ss
));

3159 
PNG_EXTERN
 
≤g_ªad_fûãr_row
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3160 
≤g_row_öf›
 
row_öfo
, 
≤g_byãp
 
row
,Öng_byã∞
¥ev_row
, 
fûãr
));

3163 
PNG_EXTERN
 
≤g_wrôe_föd_fûãr
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3164 
≤g_row_öf›
 
row_öfo
));

3167 
PNG_EXTERN
 
≤g_wrôe_fûãªd_row
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3168 
≤g_byãp
 
fûãªd_row
));

3170 
PNG_EXTERN
 
≤g_ªad_föish_row
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

3173 
PNG_EXTERN
 
≤g_ªad_°¨t_row
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

3175 
PNG_EXTERN
 
≤g_ªad_å™sf‹m_öfo
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3176 
≤g_öf›
 
öfo_±r
));

3179 #i‡
deföed
(
PNG_READ_FILLER_SUPPORTED
)

3180 
PNG_EXTERN
 
≤g_do_ªad_fûÀr
 
PNGARG
((
≤g_row_öf›
 
row_öfo
,

3181 
≤g_byãp
 
row
, 
≤g_uöt_32
 
fûÀr
,Öng_uöt_32 
Êags
));

3184 #i‡
deföed
(
PNG_READ_SWAP_ALPHA_SUPPORTED
)

3185 
PNG_EXTERN
 
≤g_do_ªad_sw≠_Æpha
 
PNGARG
((
≤g_row_öf›
 
row_öfo
,

3186 
≤g_byãp
 
row
));

3189 #i‡
deföed
(
PNG_WRITE_SWAP_ALPHA_SUPPORTED
)

3190 
PNG_EXTERN
 
≤g_do_wrôe_sw≠_Æpha
 
PNGARG
((
≤g_row_öf›
 
row_öfo
,

3191 
≤g_byãp
 
row
));

3194 #i‡
deföed
(
PNG_READ_INVERT_ALPHA_SUPPORTED
)

3195 
PNG_EXTERN
 
≤g_do_ªad_övît_Æpha
 
PNGARG
((
≤g_row_öf›
 
row_öfo
,

3196 
≤g_byãp
 
row
));

3199 #i‡
deföed
(
PNG_WRITE_INVERT_ALPHA_SUPPORTED
)

3200 
PNG_EXTERN
 
≤g_do_wrôe_övît_Æpha
 
PNGARG
((
≤g_row_öf›
 
row_öfo
,

3201 
≤g_byãp
 
row
));

3204 #i‡
deföed
(
PNG_WRITE_FILLER_SUPPORTED
) || \

3205 
deföed
(
PNG_READ_STRIP_ALPHA_SUPPORTED
)

3206 
PNG_EXTERN
 
≤g_do_°rù_fûÀr
 
PNGARG
((
≤g_row_öf›
 
row_öfo
,

3207 
≤g_byãp
 
row
, 
≤g_uöt_32
 
Êags
));

3210 #i‡
deföed
(
PNG_READ_SWAP_SUPPORTED
Ë|| deföed(
PNG_WRITE_SWAP_SUPPORTED
)

3211 
PNG_EXTERN
 
≤g_do_sw≠
 
PNGARG
((
≤g_row_öf›
 
row_öfo
, 
≤g_byãp
 
row
));

3214 #i‡
deföed
(
PNG_READ_PACKSWAP_SUPPORTED
Ë|| deföed(
PNG_WRITE_PACKSWAP_SUPPORTED
)

3215 
PNG_EXTERN
 
≤g_do_∑cksw≠
 
PNGARG
((
≤g_row_öf›
 
row_öfo
, 
≤g_byãp
 
row
));

3218 #i‡
deföed
(
PNG_READ_RGB_TO_GRAY_SUPPORTED
)

3219 
PNG_EXTERN
 
≤g_do_rgb_to_gøy
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_row_öf›


3220 
row_öfo
, 
≤g_byãp
 
row
));

3223 #i‡
deföed
(
PNG_READ_GRAY_TO_RGB_SUPPORTED
)

3224 
PNG_EXTERN
 
≤g_do_gøy_to_rgb
 
PNGARG
((
≤g_row_öf›
 
row_öfo
,

3225 
≤g_byãp
 
row
));

3228 #i‡
deföed
(
PNG_READ_PACK_SUPPORTED
)

3229 
PNG_EXTERN
 
≤g_do_u≈ack
 
PNGARG
((
≤g_row_öf›
 
row_öfo
, 
≤g_byãp
 
row
));

3232 #i‡
deföed
(
PNG_READ_SHIFT_SUPPORTED
)

3233 
PNG_EXTERN
 
≤g_do_unshi·
 
PNGARG
((
≤g_row_öf›
 
row_öfo
, 
≤g_byãp
 
row
,

3234 
≤g_cﬁ‹_8p
 
sig_bôs
));

3237 #i‡
deföed
(
PNG_READ_INVERT_SUPPORTED
Ë|| deföed(
PNG_WRITE_INVERT_SUPPORTED
)

3238 
PNG_EXTERN
 
≤g_do_övît
 
PNGARG
((
≤g_row_öf›
 
row_öfo
, 
≤g_byãp
 
row
));

3241 #i‡
deföed
(
PNG_READ_16_TO_8_SUPPORTED
)

3242 
PNG_EXTERN
 
≤g_do_ch›
 
PNGARG
((
≤g_row_öf›
 
row_öfo
, 
≤g_byãp
 
row
));

3245 #i‡
deföed
(
PNG_READ_DITHER_SUPPORTED
)

3246 
PNG_EXTERN
 
≤g_do_dôhî
 
PNGARG
((
≤g_row_öf›
 
row_öfo
,

3247 
≤g_byãp
 
row
,Öng_byã∞
∑Àâe_lookup
,Öng_byã∞
dôhî_lookup
));

3249 #i‡
deföed
(
PNG_CORRECT_PALETTE_SUPPORTED
)

3250 
PNG_EXTERN
 
≤g_c‹ª˘_∑Àâe
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3251 
≤g_cﬁ‹p
 
∑Àâe
, 
num_∑Àâe
));

3255 #i‡
deföed
(
PNG_READ_BGR_SUPPORTED
Ë|| deföed(
PNG_WRITE_BGR_SUPPORTED
)

3256 
PNG_EXTERN
 
≤g_do_bgr
 
PNGARG
((
≤g_row_öf›
 
row_öfo
, 
≤g_byãp
 
row
));

3259 #i‡
deföed
(
PNG_WRITE_PACK_SUPPORTED
)

3260 
PNG_EXTERN
 
≤g_do_∑ck
 
PNGARG
((
≤g_row_öf›
 
row_öfo
,

3261 
≤g_byãp
 
row
, 
≤g_uöt_32
 
bô_dïth
));

3264 #i‡
deföed
(
PNG_WRITE_SHIFT_SUPPORTED
)

3265 
PNG_EXTERN
 
≤g_do_shi·
 
PNGARG
((
≤g_row_öf›
 
row_öfo
, 
≤g_byãp
 
row
,

3266 
≤g_cﬁ‹_8p
 
bô_dïth
));

3269 #i‡
deföed
(
PNG_READ_BACKGROUND_SUPPORTED
)

3270 #i‡
deföed
(
PNG_READ_GAMMA_SUPPORTED
)

3271 
PNG_EXTERN
 
≤g_do_background
 
PNGARG
((
≤g_row_öf›
 
row_öfo
, 
≤g_byãp
 
row
,

3272 
≤g_cﬁ‹_16p
 
å™s_vÆues
,Öng_cﬁ‹_16∞
background
,

3273 
≤g_cﬁ‹_16p
 
background_1
,

3274 
≤g_byãp
 
gamma_èbÀ
,Öng_byã∞
gamma_‰om_1
,Öng_byã∞
gamma_to_1
,

3275 
≤g_uöt_16µ
 
gamma_16
,Öng_uöt_16µ 
gamma_16_‰om_1
,

3276 
≤g_uöt_16µ
 
gamma_16_to_1
, 
gamma_shi·
));

3278 
PNG_EXTERN
 
≤g_do_background
 
PNGARG
((
≤g_row_öf›
 
row_öfo
, 
≤g_byãp
 
row
,

3279 
≤g_cﬁ‹_16p
 
å™s_vÆues
,Öng_cﬁ‹_16∞
background
));

3283 #i‡
deföed
(
PNG_READ_GAMMA_SUPPORTED
)

3284 
PNG_EXTERN
 
≤g_do_gamma
 
PNGARG
((
≤g_row_öf›
 
row_öfo
, 
≤g_byãp
 
row
,

3285 
≤g_byãp
 
gamma_èbÀ
, 
≤g_uöt_16µ
 
gamma_16_èbÀ
,

3286 
gamma_shi·
));

3289 #i‡
deföed
(
PNG_READ_EXPAND_SUPPORTED
)

3290 
PNG_EXTERN
 
≤g_do_ex∑nd_∑Àâe
 
PNGARG
((
≤g_row_öf›
 
row_öfo
,

3291 
≤g_byãp
 
row
, 
≤g_cﬁ‹p
 
∑Àâe
,Öng_byã∞
å™s
, 
num_å™s
));

3292 
PNG_EXTERN
 
≤g_do_ex∑nd
 
PNGARG
((
≤g_row_öf›
 
row_öfo
,

3293 
≤g_byãp
 
row
, 
≤g_cﬁ‹_16p
 
å™s_vÆue
));

3301 
PNG_EXTERN
 
≤g_h™dÀ_IHDR
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
,

3302 
≤g_uöt_32
 
Àngth
));

3303 
PNG_EXTERN
 
≤g_h™dÀ_PLTE
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
,

3304 
≤g_uöt_32
 
Àngth
));

3305 
PNG_EXTERN
 
≤g_h™dÀ_IEND
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
,

3306 
≤g_uöt_32
 
Àngth
));

3308 #i‡
deföed
(
PNG_READ_bKGD_SUPPORTED
)

3309 
PNG_EXTERN
 
≤g_h™dÀ_bKGD
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
,

3310 
≤g_uöt_32
 
Àngth
));

3313 #i‡
deföed
(
PNG_READ_cHRM_SUPPORTED
)

3314 
PNG_EXTERN
 
≤g_h™dÀ_cHRM
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
,

3315 
≤g_uöt_32
 
Àngth
));

3318 #i‡
deföed
(
PNG_READ_gAMA_SUPPORTED
)

3319 
PNG_EXTERN
 
≤g_h™dÀ_gAMA
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
,

3320 
≤g_uöt_32
 
Àngth
));

3323 #i‡
deföed
(
PNG_READ_hIST_SUPPORTED
)

3324 
PNG_EXTERN
 
≤g_h™dÀ_hIST
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
,

3325 
≤g_uöt_32
 
Àngth
));

3328 #i‡
deföed
(
PNG_READ_iCCP_SUPPORTED
)

3329 
≤g_h™dÀ_iCCP
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
,

3330 
≤g_uöt_32
 
Àngth
));

3333 #i‡
deföed
(
PNG_READ_iTXt_SUPPORTED
)

3334 
PNG_EXTERN
 
≤g_h™dÀ_iTXt
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
,

3335 
≤g_uöt_32
 
Àngth
));

3338 #i‡
deföed
(
PNG_READ_oFFs_SUPPORTED
)

3339 
PNG_EXTERN
 
≤g_h™dÀ_oFFs
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
,

3340 
≤g_uöt_32
 
Àngth
));

3343 #i‡
deföed
(
PNG_READ_pCAL_SUPPORTED
)

3344 
PNG_EXTERN
 
≤g_h™dÀ_pCAL
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
,

3345 
≤g_uöt_32
 
Àngth
));

3348 #i‡
deföed
(
PNG_READ_pHYs_SUPPORTED
)

3349 
PNG_EXTERN
 
≤g_h™dÀ_pHYs
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
,

3350 
≤g_uöt_32
 
Àngth
));

3353 #i‡
deföed
(
PNG_READ_sBIT_SUPPORTED
)

3354 
PNG_EXTERN
 
≤g_h™dÀ_sBIT
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
,

3355 
≤g_uöt_32
 
Àngth
));

3358 #i‡
deföed
(
PNG_READ_sCAL_SUPPORTED
)

3359 
PNG_EXTERN
 
≤g_h™dÀ_sCAL
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
,

3360 
≤g_uöt_32
 
Àngth
));

3363 #i‡
deföed
(
PNG_READ_sPLT_SUPPORTED
)

3364 
≤g_h™dÀ_sPLT
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
,

3365 
≤g_uöt_32
 
Àngth
));

3368 #i‡
deföed
(
PNG_READ_sRGB_SUPPORTED
)

3369 
PNG_EXTERN
 
≤g_h™dÀ_sRGB
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
,

3370 
≤g_uöt_32
 
Àngth
));

3373 #i‡
deföed
(
PNG_READ_tEXt_SUPPORTED
)

3374 
PNG_EXTERN
 
≤g_h™dÀ_tEXt
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
,

3375 
≤g_uöt_32
 
Àngth
));

3378 #i‡
deföed
(
PNG_READ_tIME_SUPPORTED
)

3379 
PNG_EXTERN
 
≤g_h™dÀ_tIME
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
,

3380 
≤g_uöt_32
 
Àngth
));

3383 #i‡
deföed
(
PNG_READ_tRNS_SUPPORTED
)

3384 
PNG_EXTERN
 
≤g_h™dÀ_tRNS
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
,

3385 
≤g_uöt_32
 
Àngth
));

3388 #i‡
deföed
(
PNG_READ_zTXt_SUPPORTED
)

3389 
PNG_EXTERN
 
≤g_h™dÀ_zTXt
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_öf›
 
öfo_±r
,

3390 
≤g_uöt_32
 
Àngth
));

3393 
PNG_EXTERN
 
≤g_h™dÀ_unknown
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3394 
≤g_öf›
 
öfo_±r
, 
≤g_uöt_32
 
Àngth
));

3396 
PNG_EXTERN
 
≤g_check_chunk_«me
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3397 
≤g_byãp
 
chunk_«me
));

3400 
PNG_EXTERN
 
≤g_do_ªad_å™sf‹m©i⁄s
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

3401 
PNG_EXTERN
 
≤g_do_wrôe_å™sf‹m©i⁄s
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

3403 
PNG_EXTERN
 
≤g_öô_ªad_å™sf‹m©i⁄s
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

3405 #ifde‡
PNG_PROGRESSIVE_READ_SUPPORTED


3406 
PNG_EXTERN
 
≤g_push_ªad_chunk
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3407 
≤g_öf›
 
öfo_±r
));

3408 
PNG_EXTERN
 
≤g_push_ªad_sig
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3409 
≤g_öf›
 
öfo_±r
));

3410 
PNG_EXTERN
 
≤g_push_check_¸c
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

3411 
PNG_EXTERN
 
≤g_push_¸c_skù
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3412 
≤g_uöt_32
 
Àngth
));

3413 
PNG_EXTERN
 
≤g_push_¸c_föish
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

3414 
PNG_EXTERN
 
≤g_push_ßve_buf„r
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

3415 
PNG_EXTERN
 
≤g_push_ª°‹e_buf„r
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3416 
≤g_byãp
 
buf„r
, 
≤g_size_t
 
buf„r_Àngth
));

3417 
PNG_EXTERN
 
≤g_push_ªad_IDAT
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

3418 
PNG_EXTERN
 
≤g_¥o˚ss_IDAT_d©a
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3419 
≤g_byãp
 
buf„r
, 
≤g_size_t
 
buf„r_Àngth
));

3420 
PNG_EXTERN
 
≤g_push_¥o˚ss_row
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

3421 
PNG_EXTERN
 
≤g_push_h™dÀ_unknown
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3422 
≤g_öf›
 
öfo_±r
, 
≤g_uöt_32
 
Àngth
));

3423 
PNG_EXTERN
 
≤g_push_have_öfo
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3424 
≤g_öf›
 
öfo_±r
));

3425 
PNG_EXTERN
 
≤g_push_have_íd
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3426 
≤g_öf›
 
öfo_±r
));

3427 
PNG_EXTERN
 
≤g_push_have_row
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
, 
≤g_byãp
 
row
));

3428 
PNG_EXTERN
 
≤g_push_ªad_íd
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3429 
≤g_öf›
 
öfo_±r
));

3430 
PNG_EXTERN
 
≤g_¥o˚ss_some_d©a
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3431 
≤g_öf›
 
öfo_±r
));

3432 
PNG_EXTERN
 
≤g_ªad_push_föish_row
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

3433 #i‡
deföed
(
PNG_READ_tEXt_SUPPORTED
)

3434 
PNG_EXTERN
 
≤g_push_h™dÀ_tEXt
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3435 
≤g_öf›
 
öfo_±r
, 
≤g_uöt_32
 
Àngth
));

3436 
PNG_EXTERN
 
≤g_push_ªad_tEXt
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3437 
≤g_öf›
 
öfo_±r
));

3439 #i‡
deföed
(
PNG_READ_zTXt_SUPPORTED
)

3440 
PNG_EXTERN
 
≤g_push_h™dÀ_zTXt
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3441 
≤g_öf›
 
öfo_±r
, 
≤g_uöt_32
 
Àngth
));

3442 
PNG_EXTERN
 
≤g_push_ªad_zTXt
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3443 
≤g_öf›
 
öfo_±r
));

3445 #i‡
deföed
(
PNG_READ_iTXt_SUPPORTED
)

3446 
PNG_EXTERN
 
≤g_push_h™dÀ_iTXt
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3447 
≤g_öf›
 
öfo_±r
, 
≤g_uöt_32
 
Àngth
));

3448 
PNG_EXTERN
 
≤g_push_ªad_iTXt
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3449 
≤g_öf›
 
öfo_±r
));

3454 #ifde‡
PNG_MNG_FEATURES_SUPPORTED


3455 
PNG_EXTERN
 
≤g_do_ªad_öå≠ixñ
 
PNGARG
((
≤g_row_öf›
 
row_öfo
,

3456 
≤g_byãp
 
row
));

3457 
PNG_EXTERN
 
≤g_do_wrôe_öå≠ixñ
 
PNGARG
((
≤g_row_öf›
 
row_öfo
,

3458 
≤g_byãp
 
row
));

3461 #i‡
deföed
(
PNG_ASSEMBLER_CODE_SUPPORTED
)

3462 #i‡
deföed
(
PNG_MMX_CODE_SUPPORTED
)

3464 
PNG_EXTERN
 
≤g_öô_mmx_Êags
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
));

3468 #i‡
deföed
(
PNG_INCH_CONVERSIONS
Ë&& deföed(
PNG_FLOATING_POINT_SUPPORTED
)

3469 
PNG_EXTERN
 
≤g_uöt_32
 
≤g_gë_pixñs_≥r_öch
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3470 
≤g_öf›
 
öfo_±r
));

3472 
PNG_EXTERN
 
≤g_uöt_32
 
≤g_gë_x_pixñs_≥r_öch
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3473 
≤g_öf›
 
öfo_±r
));

3475 
PNG_EXTERN
 
≤g_uöt_32
 
≤g_gë_y_pixñs_≥r_öch
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3476 
≤g_öf›
 
öfo_±r
));

3478 
PNG_EXTERN
 
≤g_gë_x_off£t_öches
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3479 
≤g_öf›
 
öfo_±r
));

3481 
PNG_EXTERN
 
≤g_gë_y_off£t_öches
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3482 
≤g_öf›
 
öfo_±r
));

3484 #i‡
deföed
(
PNG_pHYs_SUPPORTED
)

3485 
PNG_EXTERN
 
≤g_uöt_32
 
≤g_gë_pHYs_dpi
 
PNGARG
((
≤g_°ru˘p
 
≤g_±r
,

3486 
≤g_öf›
 
öfo_±r
, 
≤g_uöt_32
 *
ªs_x
,Öng_uöt_32 *
ªs_y
, *
unô_ty≥
));

3494 #ifde‡
__˝lu•lus


	@/usr/include/pthread.h

20 #i‚de‡
_PTHREAD_H


21 
	#_PTHREAD_H
 1

	)

23 
	~<„©uªs.h
>

24 
	~<sched.h
>

25 
	~<time.h
>

27 
	#__√ed_sig£t_t


	)

28 
	~<sig«l.h
>

29 
	~<bôs/±hªadty≥s.h
>

30 
	~<bôs/£tjmp.h
>

31 
	~<bôs/w‹dsize.h
>

37 
	mPTHREAD_CREATE_JOINABLE
,

38 
	#PTHREAD_CREATE_JOINABLE
 
PTHREAD_CREATE_JOINABLE


	)

39 
	mPTHREAD_CREATE_DETACHED


40 
	#PTHREAD_CREATE_DETACHED
 
PTHREAD_CREATE_DETACHED


	)

47 
	mPTHREAD_MUTEX_TIMED_NP
,

48 
	mPTHREAD_MUTEX_RECURSIVE_NP
,

49 
	mPTHREAD_MUTEX_ERRORCHECK_NP
,

50 
	mPTHREAD_MUTEX_ADAPTIVE_NP


51 #ifde‡
__USE_UNIX98


53 
	mPTHREAD_MUTEX_NORMAL
 = 
PTHREAD_MUTEX_TIMED_NP
,

54 
	mPTHREAD_MUTEX_RECURSIVE
 = 
PTHREAD_MUTEX_RECURSIVE_NP
,

55 
	mPTHREAD_MUTEX_ERRORCHECK
 = 
PTHREAD_MUTEX_ERRORCHECK_NP
,

56 
	mPTHREAD_MUTEX_DEFAULT
 = 
PTHREAD_MUTEX_NORMAL


58 #ifde‡
__USE_GNU


60 , 
	mPTHREAD_MUTEX_FAST_NP
 = 
PTHREAD_MUTEX_TIMED_NP


65 #ifde‡
__USE_GNU


69 
	mPTHREAD_MUTEX_STALLED_NP
,

70 
	mPTHREAD_MUTEX_ROBUST_NP


75 #ifde‡
__USE_UNIX98


79 
	mPTHREAD_PRIO_NONE
,

80 
	mPTHREAD_PRIO_INHERIT
,

81 
	mPTHREAD_PRIO_PROTECT


87 #i‡
__WORDSIZE
 == 64

88 
	#PTHREAD_MUTEX_INITIALIZER
 \

89 { { 0, 0, 0, 0, 0, 0, { 0, 0 } } }

	)

90 #ifde‡
__USE_GNU


91 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

92 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 0, 0 } } }

	)

93 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

94 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 0, 0 } } }

	)

95 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

96 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 0, 0 } } }

	)

99 
	#PTHREAD_MUTEX_INITIALIZER
 \

100 { { 0, 0, 0, 0, 0, { 0 } } }

	)

101 #ifde‡
__USE_GNU


102 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

103 { { 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 0 } } }

	)

104 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

105 { { 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 0 } } }

	)

106 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

107 { { 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 0 } } }

	)

113 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


116 
	mPTHREAD_RWLOCK_PREFER_READER_NP
,

117 
	mPTHREAD_RWLOCK_PREFER_WRITER_NP
,

118 
	mPTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,

119 
	mPTHREAD_RWLOCK_DEFAULT_NP
 = 
PTHREAD_RWLOCK_PREFER_READER_NP


123 #i‡
__WORDSIZE
 == 64

124 
	#PTHREAD_RWLOCK_INITIALIZER
 \

125 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 } }

	)

127 
	#PTHREAD_RWLOCK_INITIALIZER
 \

128 { { 0, 0, 0, 0, 0, 0, 0, 0 } }

	)

130 #ifde‡
__USE_GNU


131 #i‡
__WORDSIZE
 == 64

132 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

134 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
 } }

	)

136 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

137 { { 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
, 0 } }

	)

146 
	mPTHREAD_INHERIT_SCHED
,

147 
	#PTHREAD_INHERIT_SCHED
 
PTHREAD_INHERIT_SCHED


	)

148 
	mPTHREAD_EXPLICIT_SCHED


149 
	#PTHREAD_EXPLICIT_SCHED
 
PTHREAD_EXPLICIT_SCHED


	)

156 
	mPTHREAD_SCOPE_SYSTEM
,

157 
	#PTHREAD_SCOPE_SYSTEM
 
PTHREAD_SCOPE_SYSTEM


	)

158 
	mPTHREAD_SCOPE_PROCESS


159 
	#PTHREAD_SCOPE_PROCESS
 
PTHREAD_SCOPE_PROCESS


	)

166 
	mPTHREAD_PROCESS_PRIVATE
,

167 
	#PTHREAD_PROCESS_PRIVATE
 
PTHREAD_PROCESS_PRIVATE


	)

168 
	mPTHREAD_PROCESS_SHARED


169 
	#PTHREAD_PROCESS_SHARED
 
PTHREAD_PROCESS_SHARED


	)

175 
	#PTHREAD_COND_INITIALIZER
 { { 0, 0, 0, 0, 0, (*Ë0, 0, 0 } }

	)

179 
	s_±hªad_˛ónup_buf„r


181 (*
	m__routöe
) (*);

182 *
	m__¨g
;

183 
	m__ˇn˚…y≥
;

184 
_±hªad_˛ónup_buf„r
 *
	m__¥ev
;

190 
	mPTHREAD_CANCEL_ENABLE
,

191 
	#PTHREAD_CANCEL_ENABLE
 
PTHREAD_CANCEL_ENABLE


	)

192 
	mPTHREAD_CANCEL_DISABLE


193 
	#PTHREAD_CANCEL_DISABLE
 
PTHREAD_CANCEL_DISABLE


	)

197 
	mPTHREAD_CANCEL_DEFERRED
,

198 
	#PTHREAD_CANCEL_DEFERRED
 
PTHREAD_CANCEL_DEFERRED


	)

199 
	mPTHREAD_CANCEL_ASYNCHRONOUS


200 
	#PTHREAD_CANCEL_ASYNCHRONOUS
 
PTHREAD_CANCEL_ASYNCHRONOUS


	)

202 
	#PTHREAD_CANCELED
 ((*Ë-1)

	)

206 
	#PTHREAD_ONCE_INIT
 0

	)

209 #ifde‡
__USE_XOPEN2K


213 
	#PTHREAD_BARRIER_SERIAL_THREAD
 -1

	)

217 
__BEGIN_DECLS


222 
±hªad_¸óã
 (
±hªad_t
 *
__ª°ri˘
 
__√wthªad
,

223 
__c⁄°
 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

224 *(*
__°¨t_routöe
) (*),

225 *
__ª°ri˘
 
__¨g
Ë
__THROW
 
__n⁄nuŒ
 ((1, 3));

231 
	$±hªad_exô
 (*
__ªtvÆ
Ë
	`__©åibuã__
 ((
__n‹ëu∫__
));

239 
	`±hªad_joö
 (
±hªad_t
 
__th
, **
__thªad_ªtu∫
);

241 #ifde‡
__USE_GNU


244 
	$±hªad_åyjoö_≈
 (
±hªad_t
 
__th
, **
__thªad_ªtu∫
Ë
__THROW
;

252 
	`±hªad_timedjoö_≈
 (
±hªad_t
 
__th
, **
__thªad_ªtu∫
,

253 
__c⁄°
 
time•ec
 *
__ab°ime
);

260 
	$±hªad_dëach
 (
±hªad_t
 
__th
Ë
__THROW
;

264 
±hªad_t
 
	$±hªad_£lf
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

267 
	$±hªad_equÆ
 (
±hªad_t
 
__thªad1
,Öthªad_à
__thªad2
Ë
__THROW
;

275 
	$±hªad_©å_öô
 (
±hªad_©å_t
 *
__©å
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

278 
	$±hªad_©å_de°roy
 (
±hªad_©å_t
 *
__©å
)

279 
__THROW
 
	`__n⁄nuŒ
 ((1));

282 
	$±hªad_©å_gëdëach°©e
 (
__c⁄°
 
±hªad_©å_t
 *
__©å
,

283 *
__dëach°©e
)

284 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

287 
	$±hªad_©å_£tdëach°©e
 (
±hªad_©å_t
 *
__©å
,

288 
__dëach°©e
)

289 
__THROW
 
	`__n⁄nuŒ
 ((1));

293 
	$±hªad_©å_gëgu¨dsize
 (
__c⁄°
 
±hªad_©å_t
 *
__©å
,

294 
size_t
 *
__gu¨dsize
)

295 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

298 
	$±hªad_©å_£tgu¨dsize
 (
±hªad_©å_t
 *
__©å
,

299 
size_t
 
__gu¨dsize
)

300 
__THROW
 
	`__n⁄nuŒ
 ((1));

304 
	$±hªad_©å_gësched∑øm
 (
__c⁄°
 
±hªad_©å_t
 *
__ª°ri˘


305 
__©å
,

306 
sched_∑øm
 *
__ª°ri˘
 
__∑øm
)

307 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

310 
	$±hªad_©å_£tsched∑øm
 (
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

311 
__c⁄°
 
sched_∑øm
 *
__ª°ri˘


312 
__∑øm
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

315 
	$±hªad_©å_gëschedpﬁicy
 (
__c⁄°
 
±hªad_©å_t
 *
__ª°ri˘


316 
__©å
, *
__ª°ri˘
 
__pﬁicy
)

317 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

320 
	$±hªad_©å_£tschedpﬁicy
 (
±hªad_©å_t
 *
__©å
, 
__pﬁicy
)

321 
__THROW
 
	`__n⁄nuŒ
 ((1));

324 
	$±hªad_©å_gëöhîôsched
 (
__c⁄°
 
±hªad_©å_t
 *
__ª°ri˘


325 
__©å
, *
__ª°ri˘
 
__öhîô
)

326 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

329 
	$±hªad_©å_£töhîôsched
 (
±hªad_©å_t
 *
__©å
,

330 
__öhîô
)

331 
__THROW
 
	`__n⁄nuŒ
 ((1));

335 
	$±hªad_©å_gësc›e
 (
__c⁄°
 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

336 *
__ª°ri˘
 
__sc›e
)

337 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

340 
	$±hªad_©å_£tsc›e
 (
±hªad_©å_t
 *
__©å
, 
__sc›e
)

341 
__THROW
 
	`__n⁄nuŒ
 ((1));

344 
	$±hªad_©å_gë°ackaddr
 (
__c⁄°
 
±hªad_©å_t
 *
__ª°ri˘


345 
__©å
, **
__ª°ri˘
 
__°ackaddr
)

346 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__©åibuã_dïªˇãd__
;

352 
	$±hªad_©å_£t°ackaddr
 (
±hªad_©å_t
 *
__©å
,

353 *
__°ackaddr
)

354 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__©åibuã_dïªˇãd__
;

357 
	$±hªad_©å_gë°acksize
 (
__c⁄°
 
±hªad_©å_t
 *
__ª°ri˘


358 
__©å
, 
size_t
 *
__ª°ri˘
 
__°acksize
)

359 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

364 
	$±hªad_©å_£t°acksize
 (
±hªad_©å_t
 *
__©å
,

365 
size_t
 
__°acksize
)

366 
__THROW
 
	`__n⁄nuŒ
 ((1));

368 #ifde‡
__USE_XOPEN2K


370 
	$±hªad_©å_gë°ack
 (
__c⁄°
 
±hªad_©å_t
 *
__ª°ri˘
 
__©å
,

371 **
__ª°ri˘
 
__°ackaddr
,

372 
size_t
 *
__ª°ri˘
 
__°acksize
)

373 
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3));

378 
	$±hªad_©å_£t°ack
 (
±hªad_©å_t
 *
__©å
, *
__°ackaddr
,

379 
size_t
 
__°acksize
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

382 #ifde‡
__USE_GNU


385 
	$±hªad_©å_£èfföôy_≈
 (
±hªad_©å_t
 *
__©å
,

386 
size_t
 
__˝u£tsize
,

387 
__c⁄°
 
˝u_£t_t
 *
__˝u£t
)

388 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

392 
	$±hªad_©å_gëafföôy_≈
 (
__c⁄°
 
±hªad_©å_t
 *
__©å
,

393 
size_t
 
__˝u£tsize
,

394 
˝u_£t_t
 *
__˝u£t
)

395 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

401 
	$±hªad_gë©å_≈
 (
±hªad_t
 
__th
, 
±hªad_©å_t
 *
__©å
)

402 
__THROW
 
	`__n⁄nuŒ
 ((2));

410 
	$±hªad_£tsched∑øm
 (
±hªad_t
 
__èrgë_thªad
, 
__pﬁicy
,

411 
__c⁄°
 
sched_∑øm
 *
__∑øm
)

412 
__THROW
 
	`__n⁄nuŒ
 ((3));

415 
	$±hªad_gësched∑øm
 (
±hªad_t
 
__èrgë_thªad
,

416 *
__ª°ri˘
 
__pﬁicy
,

417 
sched_∑øm
 *
__ª°ri˘
 
__∑øm
)

418 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

421 
	$±hªad_£tsched¥io
 (
±hªad_t
 
__èrgë_thªad
, 
__¥io
)

422 
__THROW
;

425 #ifde‡
__USE_UNIX98


427 
	$±hªad_gëc⁄cuºícy
 (Ë
__THROW
;

430 
	$±hªad_£tc⁄cuºícy
 (
__Àvñ
Ë
__THROW
;

433 #ifde‡
__USE_GNU


438 
	$±hªad_yõld
 (Ë
__THROW
;

443 
	$±hªad_£èfföôy_≈
 (
±hªad_t
 
__th
, 
size_t
 
__˝u£tsize
,

444 
__c⁄°
 
˝u_£t_t
 *
__˝u£t
)

445 
__THROW
 
	`__n⁄nuŒ
 ((3));

448 
	$±hªad_gëafföôy_≈
 (
±hªad_t
 
__th
, 
size_t
 
__˝u£tsize
,

449 
˝u_£t_t
 *
__˝u£t
)

450 
__THROW
 
	`__n⁄nuŒ
 ((3));

463 
	`±hªad_⁄˚
 (
±hªad_⁄˚_t
 *
__⁄˚_c⁄åﬁ
,

464 (*
__öô_routöe
Ë()Ë
	`__n⁄nuŒ
 ((1, 2));

475 
	`±hªad_£tˇn˚l°©e
 (
__°©e
, *
__ﬁd°©e
);

479 
	`±hªad_£tˇn˚…y≥
 (
__ty≥
, *
__ﬁdty≥
);

482 
	`±hªad_ˇn˚l
 (
±hªad_t
 
__th
);

487 
	`±hªad_ã°ˇn˚l
 ();

496 
__jmp_buf
 
__ˇn˚l_jmp_buf
;

497 
__mask_was_ßved
;

498 } 
__ˇn˚l_jmp_buf
[1];

499 *
__∑d
[4];

500 } 
	t__±hªad_unwöd_buf_t
 
	t__©åibuã__
 ((
	t__Æig√d__
));

503 #i‚de‡
__˛ónup_f˘_©åibuã


504 
	#__˛ónup_f˘_©åibuã


	)

509 
	s__±hªad_˛ónup_‰ame


511 (*
__ˇn˚l_routöe
) (*);

512 *
__ˇn˚l_¨g
;

513 
__do_ô
;

514 
__ˇn˚l_ty≥
;

517 #i‡
deföed
 
__GNUC__
 && deföed 
__EXCEPTIONS


518 #ifde‡
__˝lu•lus


520 ˛as†
	c__±hªad_˛ónup_˛ass


522 (*
__ˇn˚l_routöe
) (*);

523 *
__ˇn˚l_¨g
;

524 
__do_ô
;

525 
__ˇn˚l_ty≥
;

527 
public
:

528 
	`__±hªad_˛ónup_˛ass
 ((*
__f˘
Ë(*), *
__¨g
)

529 : 
	`__ˇn˚l_routöe
 (
__f˘
), 
	`__ˇn˚l_¨g
 (
__¨g
), 
	$__do_ô
 (1) { }

530 ~
	$__±hªad_˛ónup_˛ass
 (Ë{ i‡(
__do_ô
Ë
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); 
	}
}

531 
	$__£tdoô
 (
__√wvÆ
Ë{ 
__do_ô
 = __√wvÆ; 
	}
}

532 
	$__de„r
 (Ë{ 
	`±hªad_£tˇn˚…y≥
 (
PTHREAD_CANCEL_DEFERRED
,

533 &
__ˇn˚l_ty≥
); 
	}
}

534 
	$__ª°‹e
 (Ëc⁄° { 
	`±hªad_£tˇn˚…y≥
 (
__ˇn˚l_ty≥
, 0); 
	}
}

544 
	#±hªad_˛ónup_push
(
routöe
, 
¨g
) \

546 
__±hªad_˛ónup_˛ass
 
	`__˛‰ame
 (
routöe
, 
¨g
)

	)

550 
	#±hªad_˛ónup_p›
(
execuã
) \

551 
__˛‰ame
.
	`__£tdoô
 (
execuã
); \

552 } 0)

	)

554 #ifde‡
__USE_GNU


558 
	#±hªad_˛ónup_push_de„r_≈
(
routöe
, 
¨g
) \

560 
__±hªad_˛ónup_˛ass
 
	`__˛‰ame
 (
routöe
, 
¨g
); \

561 
__˛‰ame
.
	`__de„r
 ()

	)

566 
	#±hªad_˛ónup_p›_ª°‹e_≈
(
execuã
) \

567 
__˛‰ame
.
	`__ª°‹e
 (); \

568 
__˛‰ame
.
	`__£tdoô
 (
execuã
); \

569 } 0)

	)

576 
__exã∫_ölöe
 

577 
	$__±hªad_˛ónup_routöe
 (
__±hªad_˛ónup_‰ame
 *
__‰ame
)

579 i‡(
__‰ame
->
__do_ô
)

580 
__‰ame
->
	`__ˇn˚l_routöe
 (__‰ame->
__ˇn˚l_¨g
);

581 
	}
}

590 
	#±hªad_˛ónup_push
(
routöe
, 
¨g
) \

592 
__±hªad_˛ónup_‰ame
 
__˛‰ame
 \

593 
	`__©åibuã__
 ((
	`__˛ónup__
 (
__±hªad_˛ónup_routöe
))) \

594 { .
__ˇn˚l_routöe
 = (
routöe
), .
__ˇn˚l_¨g
 = (
¨g
), \

595 .
__do_ô
 = 1 };

	)

599 
	#±hªad_˛ónup_p›
(
execuã
) \

600 
__˛‰ame
.
__do_ô
 = (
execuã
); \

601 } 0)

	)

603 #ifde‡
__USE_GNU


607 
	#±hªad_˛ónup_push_de„r_≈
(
routöe
, 
¨g
) \

609 
__±hªad_˛ónup_‰ame
 
__˛‰ame
 \

610 
	`__©åibuã__
 ((
	`__˛ónup__
 (
__±hªad_˛ónup_routöe
))) \

611 { .
__ˇn˚l_routöe
 = (
routöe
), .
__ˇn˚l_¨g
 = (
¨g
), \

612 .
__do_ô
 = 1 }; \

613 (Ë
	`±hªad_£tˇn˚…y≥
 (
PTHREAD_CANCEL_DEFERRED
, \

614 &
__˛‰ame
.
__ˇn˚l_ty≥
)

	)

619 
	#±hªad_˛ónup_p›_ª°‹e_≈
(
execuã
) \

620 (Ë
	`±hªad_£tˇn˚…y≥
 (
__˛‰ame
.
__ˇn˚l_ty≥
, 
NULL
); \

621 
__˛‰ame
.
__do_ô
 = (
execuã
); \

622 } 0)

	)

633 
	#±hªad_˛ónup_push
(
routöe
, 
¨g
) \

635 
__±hªad_unwöd_buf_t
 
__ˇn˚l_buf
; \

636 (*
__ˇn˚l_routöe
Ë(*Ë(
routöe
); \

637 *
__ˇn˚l_¨g
 = (
¨g
); \

638 
nŸ_fú°_ˇŒ
 = 
	`__sig£tjmp
 ((
__jmp_buf_èg
 *) \

639 
__ˇn˚l_buf
.
__ˇn˚l_jmp_buf
, 0); \

640 i‡(
	`__buûtö_ex≥˘
 (
nŸ_fú°_ˇŒ
, 0)) \

642 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

643 
	`__±hªad_unwöd_√xt
 (&
__ˇn˚l_buf
); \

647 
	`__±hªad_ªgi°î_ˇn˚l
 (&
__ˇn˚l_buf
); \

648 dÿ{

	)

649 
__±hªad_ªgi°î_ˇn˚l
 (
__±hªad_unwöd_buf_t
 *
__buf
)

650 
__˛ónup_f˘_©åibuã
;

654 
	#±hªad_˛ónup_p›
(
execuã
) \

656 
	`__±hªad_uƒegi°î_ˇn˚l
 (&
__ˇn˚l_buf
); \

657 i‡(
execuã
) \

658 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

659 } 0)

	)

660 
	$__±hªad_uƒegi°î_ˇn˚l
 (
__±hªad_unwöd_buf_t
 *
__buf
)

661 
__˛ónup_f˘_©åibuã
;

663 #ifde‡
__USE_GNU


667 
	#±hªad_˛ónup_push_de„r_≈
(
routöe
, 
¨g
) \

669 
__±hªad_unwöd_buf_t
 
__ˇn˚l_buf
; \

670 (*
__ˇn˚l_routöe
Ë(*Ë(
routöe
); \

671 *
__ˇn˚l_¨g
 = (
¨g
); \

672 
nŸ_fú°_ˇŒ
 = 
	`__sig£tjmp
 ((
__jmp_buf_èg
 *) \

673 
__ˇn˚l_buf
.
__ˇn˚l_jmp_buf
, 0); \

674 i‡(
	`__buûtö_ex≥˘
 (
nŸ_fú°_ˇŒ
, 0)) \

676 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

677 
	`__±hªad_unwöd_√xt
 (&
__ˇn˚l_buf
); \

681 
	`__±hªad_ªgi°î_ˇn˚l_de„r
 (&
__ˇn˚l_buf
); \

682 dÿ{

	)

683 
	`__±hªad_ªgi°î_ˇn˚l_de„r
 (
__±hªad_unwöd_buf_t
 *
__buf
)

684 
__˛ónup_f˘_©åibuã
;

689 
	#±hªad_˛ónup_p›_ª°‹e_≈
(
execuã
) \

691 
	`__±hªad_uƒegi°î_ˇn˚l_ª°‹e
 (&
__ˇn˚l_buf
); \

692 i‡(
execuã
) \

693 
	`__ˇn˚l_routöe
 (
__ˇn˚l_¨g
); \

694 
	}
} 0)

	)

695 
	$__±hªad_uƒegi°î_ˇn˚l_ª°‹e
 (
__±hªad_unwöd_buf_t
 *
__buf
)

696 
__˛ónup_f˘_©åibuã
;

700 
	$__±hªad_unwöd_√xt
 (
__±hªad_unwöd_buf_t
 *
__buf
)

701 
__˛ónup_f˘_©åibuã
 
	`__©åibuã__
 ((
__n‹ëu∫__
))

702 #i‚de‡
SHARED


703 
	`__©åibuã__
 ((
__wók__
))

709 
__jmp_buf_èg
;

710 
	$__sig£tjmp
 (
__jmp_buf_èg
 *
__ív
, 
__ßvemask
Ë
__THROW
;

716 
	$±hªad_muãx_öô
 (
±hªad_muãx_t
 *
__muãx
,

717 
__c⁄°
 
±hªad_muãx©å_t
 *
__muãx©å
)

718 
__THROW
 
	`__n⁄nuŒ
 ((1));

721 
	$±hªad_muãx_de°roy
 (
±hªad_muãx_t
 *
__muãx
)

722 
__THROW
 
	`__n⁄nuŒ
 ((1));

725 
	$±hªad_muãx_åylock
 (
±hªad_muãx_t
 *
__muãx
)

726 
__THROW
 
	`__n⁄nuŒ
 ((1));

729 
	$±hªad_muãx_lock
 (
±hªad_muãx_t
 *
__muãx
)

730 
__THROW
 
	`__n⁄nuŒ
 ((1));

732 #ifde‡
__USE_XOPEN2K


734 
	$±hªad_muãx_timedlock
 (
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
,

735 
__c⁄°
 
time•ec
 *
__ª°ri˘


736 
__ab°ime
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

740 
	$±hªad_muãx_u∆ock
 (
±hªad_muãx_t
 *
__muãx
)

741 
__THROW
 
	`__n⁄nuŒ
 ((1));

744 #ifde‡
__USE_UNIX98


746 
	$±hªad_muãx_gë¥io˚ûög
 (
__c⁄°
 
±hªad_muãx_t
 *

747 
__ª°ri˘
 
__muãx
,

748 *
__ª°ri˘
 
__¥io˚ûög
)

749 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

753 
	$±hªad_muãx_£çrio˚ûög
 (
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
,

754 
__¥io˚ûög
,

755 *
__ª°ri˘
 
__ﬁd_˚ûög
)

756 
__THROW
 
	`__n⁄nuŒ
 ((1, 3));

760 #ifde‡
__USE_GNU


762 
	$±hªad_muãx_c⁄si°ít_≈
 (
±hªad_muãx_t
 *
__muãx
)

763 
__THROW
 
	`__n⁄nuŒ
 ((1));

771 
	$±hªad_muãx©å_öô
 (
±hªad_muãx©å_t
 *
__©å
)

772 
__THROW
 
	`__n⁄nuŒ
 ((1));

775 
	$±hªad_muãx©å_de°roy
 (
±hªad_muãx©å_t
 *
__©å
)

776 
__THROW
 
	`__n⁄nuŒ
 ((1));

779 
	$±hªad_muãx©å_gëpsh¨ed
 (
__c⁄°
 
±hªad_muãx©å_t
 *

780 
__ª°ri˘
 
__©å
,

781 *
__ª°ri˘
 
__psh¨ed
)

782 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

785 
	$±hªad_muãx©å_£çsh¨ed
 (
±hªad_muãx©å_t
 *
__©å
,

786 
__psh¨ed
)

787 
__THROW
 
	`__n⁄nuŒ
 ((1));

789 #ifde‡
__USE_UNIX98


791 
	$±hªad_muãx©å_gëty≥
 (
__c⁄°
 
±hªad_muãx©å_t
 *
__ª°ri˘


792 
__©å
, *
__ª°ri˘
 
__köd
)

793 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

798 
	$±hªad_muãx©å_£ây≥
 (
±hªad_muãx©å_t
 *
__©å
, 
__köd
)

799 
__THROW
 
	`__n⁄nuŒ
 ((1));

802 
	$±hªad_muãx©å_gë¥Ÿocﬁ
 (
__c⁄°
 
±hªad_muãx©å_t
 *

803 
__ª°ri˘
 
__©å
,

804 *
__ª°ri˘
 
__¥Ÿocﬁ
)

805 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

809 
	$±hªad_muãx©å_£çrŸocﬁ
 (
±hªad_muãx©å_t
 *
__©å
,

810 
__¥Ÿocﬁ
)

811 
__THROW
 
	`__n⁄nuŒ
 ((1));

814 
	$±hªad_muãx©å_gë¥io˚ûög
 (
__c⁄°
 
±hªad_muãx©å_t
 *

815 
__ª°ri˘
 
__©å
,

816 *
__ª°ri˘
 
__¥io˚ûög
)

817 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

820 
	$±hªad_muãx©å_£çrio˚ûög
 (
±hªad_muãx©å_t
 *
__©å
,

821 
__¥io˚ûög
)

822 
__THROW
 
	`__n⁄nuŒ
 ((1));

825 #ifde‡
__USE_GNU


827 
	$±hªad_muãx©å_gërobu°_≈
 (
__c⁄°
 
±hªad_muãx©å_t
 *
__©å
,

828 *
__robu°√ss
)

829 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

832 
	$±hªad_muãx©å_£åobu°_≈
 (
±hªad_muãx©å_t
 *
__©å
,

833 
__robu°√ss
)

834 
__THROW
 
	`__n⁄nuŒ
 ((1));

838 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


843 
	$±hªad_rwlock_öô
 (
±hªad_rwlock_t
 *
__ª°ri˘
 
__rwlock
,

844 
__c⁄°
 
±hªad_rwlock©å_t
 *
__ª°ri˘


845 
__©å
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

848 
	$±hªad_rwlock_de°roy
 (
±hªad_rwlock_t
 *
__rwlock
)

849 
__THROW
 
	`__n⁄nuŒ
 ((1));

852 
	$±hªad_rwlock_rdlock
 (
±hªad_rwlock_t
 *
__rwlock
)

853 
__THROW
 
	`__n⁄nuŒ
 ((1));

856 
	$±hªad_rwlock_åyrdlock
 (
±hªad_rwlock_t
 *
__rwlock
)

857 
__THROW
 
	`__n⁄nuŒ
 ((1));

859 #ifde‡
__USE_XOPEN2K


861 
	$±hªad_rwlock_timedrdlock
 (
±hªad_rwlock_t
 *
__ª°ri˘
 
__rwlock
,

862 
__c⁄°
 
time•ec
 *
__ª°ri˘


863 
__ab°ime
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

867 
	$±hªad_rwlock_wæock
 (
±hªad_rwlock_t
 *
__rwlock
)

868 
__THROW
 
	`__n⁄nuŒ
 ((1));

871 
	$±hªad_rwlock_åywæock
 (
±hªad_rwlock_t
 *
__rwlock
)

872 
__THROW
 
	`__n⁄nuŒ
 ((1));

874 #ifde‡
__USE_XOPEN2K


876 
	$±hªad_rwlock_timedwæock
 (
±hªad_rwlock_t
 *
__ª°ri˘
 
__rwlock
,

877 
__c⁄°
 
time•ec
 *
__ª°ri˘


878 
__ab°ime
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

882 
	$±hªad_rwlock_u∆ock
 (
±hªad_rwlock_t
 *
__rwlock
)

883 
__THROW
 
	`__n⁄nuŒ
 ((1));

889 
	$±hªad_rwlock©å_öô
 (
±hªad_rwlock©å_t
 *
__©å
)

890 
__THROW
 
	`__n⁄nuŒ
 ((1));

893 
	$±hªad_rwlock©å_de°roy
 (
±hªad_rwlock©å_t
 *
__©å
)

894 
__THROW
 
	`__n⁄nuŒ
 ((1));

897 
	$±hªad_rwlock©å_gëpsh¨ed
 (
__c⁄°
 
±hªad_rwlock©å_t
 *

898 
__ª°ri˘
 
__©å
,

899 *
__ª°ri˘
 
__psh¨ed
)

900 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

903 
	$±hªad_rwlock©å_£çsh¨ed
 (
±hªad_rwlock©å_t
 *
__©å
,

904 
__psh¨ed
)

905 
__THROW
 
	`__n⁄nuŒ
 ((1));

908 
	$±hªad_rwlock©å_gëköd_≈
 (
__c⁄°
 
±hªad_rwlock©å_t
 *

909 
__ª°ri˘
 
__©å
,

910 *
__ª°ri˘
 
__¥ef
)

911 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

914 
	$±hªad_rwlock©å_£tköd_≈
 (
±hªad_rwlock©å_t
 *
__©å
,

915 
__¥ef
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

923 
	$±hªad_c⁄d_öô
 (
±hªad_c⁄d_t
 *
__ª°ri˘
 
__c⁄d
,

924 
__c⁄°
 
±hªad_c⁄d©å_t
 *
__ª°ri˘


925 
__c⁄d_©å
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

928 
	$±hªad_c⁄d_de°roy
 (
±hªad_c⁄d_t
 *
__c⁄d
)

929 
__THROW
 
	`__n⁄nuŒ
 ((1));

932 
	$±hªad_c⁄d_sig«l
 (
±hªad_c⁄d_t
 *
__c⁄d
)

933 
__THROW
 
	`__n⁄nuŒ
 ((1));

936 
	$±hªad_c⁄d_brﬂdˇ°
 (
±hªad_c⁄d_t
 *
__c⁄d
)

937 
__THROW
 
	`__n⁄nuŒ
 ((1));

944 
	$±hªad_c⁄d_waô
 (
±hªad_c⁄d_t
 *
__ª°ri˘
 
__c⁄d
,

945 
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
)

946 
	`__n⁄nuŒ
 ((1, 2));

955 
	$±hªad_c⁄d_timedwaô
 (
±hªad_c⁄d_t
 *
__ª°ri˘
 
__c⁄d
,

956 
±hªad_muãx_t
 *
__ª°ri˘
 
__muãx
,

957 
__c⁄°
 
time•ec
 *
__ª°ri˘


958 
__ab°ime
Ë
	`__n⁄nuŒ
 ((1, 2, 3));

963 
	$±hªad_c⁄d©å_öô
 (
±hªad_c⁄d©å_t
 *
__©å
)

964 
__THROW
 
	`__n⁄nuŒ
 ((1));

967 
	$±hªad_c⁄d©å_de°roy
 (
±hªad_c⁄d©å_t
 *
__©å
)

968 
__THROW
 
	`__n⁄nuŒ
 ((1));

971 
	$±hªad_c⁄d©å_gëpsh¨ed
 (
__c⁄°
 
±hªad_c⁄d©å_t
 *

972 
__ª°ri˘
 
__©å
,

973 *
__ª°ri˘
 
__psh¨ed
)

974 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

977 
	$±hªad_c⁄d©å_£çsh¨ed
 (
±hªad_c⁄d©å_t
 *
__©å
,

978 
__psh¨ed
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

980 #ifde‡
__USE_XOPEN2K


982 
	$±hªad_c⁄d©å_gë˛ock
 (
__c⁄°
 
±hªad_c⁄d©å_t
 *

983 
__ª°ri˘
 
__©å
,

984 
__˛ockid_t
 *
__ª°ri˘
 
__˛ock_id
)

985 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

988 
	$±hªad_c⁄d©å_£t˛ock
 (
±hªad_c⁄d©å_t
 *
__©å
,

989 
__˛ockid_t
 
__˛ock_id
)

990 
__THROW
 
	`__n⁄nuŒ
 ((1));

994 #ifde‡
__USE_XOPEN2K


999 
	$±hªad_•ö_öô
 (
±hªad_•ölock_t
 *
__lock
, 
__psh¨ed
)

1000 
__THROW
 
	`__n⁄nuŒ
 ((1));

1003 
	$±hªad_•ö_de°roy
 (
±hªad_•ölock_t
 *
__lock
)

1004 
__THROW
 
	`__n⁄nuŒ
 ((1));

1007 
	$±hªad_•ö_lock
 (
±hªad_•ölock_t
 *
__lock
)

1008 
__THROW
 
	`__n⁄nuŒ
 ((1));

1011 
	$±hªad_•ö_åylock
 (
±hªad_•ölock_t
 *
__lock
)

1012 
__THROW
 
	`__n⁄nuŒ
 ((1));

1015 
	$±hªad_•ö_u∆ock
 (
±hªad_•ölock_t
 *
__lock
)

1016 
__THROW
 
	`__n⁄nuŒ
 ((1));

1023 
	$±hªad_b¨rõr_öô
 (
±hªad_b¨rõr_t
 *
__ª°ri˘
 
__b¨rõr
,

1024 
__c⁄°
 
±hªad_b¨rõøâr_t
 *
__ª°ri˘


1025 
__©å
, 
__cou¡
)

1026 
__THROW
 
	`__n⁄nuŒ
 ((1));

1029 
	$±hªad_b¨rõr_de°roy
 (
±hªad_b¨rõr_t
 *
__b¨rõr
)

1030 
__THROW
 
	`__n⁄nuŒ
 ((1));

1033 
	$±hªad_b¨rõr_waô
 (
±hªad_b¨rõr_t
 *
__b¨rõr
)

1034 
__THROW
 
	`__n⁄nuŒ
 ((1));

1038 
	$±hªad_b¨rõøâr_öô
 (
±hªad_b¨rõøâr_t
 *
__©å
)

1039 
__THROW
 
	`__n⁄nuŒ
 ((1));

1042 
	$±hªad_b¨rõøâr_de°roy
 (
±hªad_b¨rõøâr_t
 *
__©å
)

1043 
__THROW
 
	`__n⁄nuŒ
 ((1));

1046 
	$±hªad_b¨rõøâr_gëpsh¨ed
 (
__c⁄°
 
±hªad_b¨rõøâr_t
 *

1047 
__ª°ri˘
 
__©å
,

1048 *
__ª°ri˘
 
__psh¨ed
)

1049 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1052 
	$±hªad_b¨rõøâr_£çsh¨ed
 (
±hªad_b¨rõøâr_t
 *
__©å
,

1053 
__psh¨ed
)

1054 
__THROW
 
	`__n⁄nuŒ
 ((1));

1066 
	`±hªad_key_¸óã
 (
±hªad_key_t
 *
__key
,

1067 (*
__de°r_fun˘i⁄
) (*))

1068 
__THROW
 
	`__n⁄nuŒ
 ((1));

1071 
	$±hªad_key_dñëe
 (
±hªad_key_t
 
__key
Ë
__THROW
;

1074 *
	$±hªad_gë•ecific
 (
±hªad_key_t
 
__key
Ë
__THROW
;

1077 
	$±hªad_£t•ecific
 (
±hªad_key_t
 
__key
,

1078 
__c⁄°
 *
__poöãr
Ë
__THROW
 ;

1081 #ifde‡
__USE_XOPEN2K


1083 
	$±hªad_gë˝u˛ockid
 (
±hªad_t
 
__thªad_id
,

1084 
__˛ockid_t
 *
__˛ock_id
)

1085 
__THROW
 
	`__n⁄nuŒ
 ((2));

1100 
	`±hªad_©f‹k
 ((*
__¥ï¨e
) (),

1101 (*
__∑ª¡
) (),

1102 (*
__chûd
Ë()Ë
__THROW
;

1105 #ifde‡
__USE_EXTERN_INLINES


1107 
__exã∫_ölöe
 

1108 
	`__NTH
 (
	$±hªad_equÆ
 (
±hªad_t
 
__thªad1
,Öthªad_à
__thªad2
))

1110  
__thªad1
 =
__thªad2
;

1111 
	}
}

1114 
	g__END_DECLS


	@/usr/include/pwd.h

23 #i‚def 
_PWD_H


24 
	#_PWD_H
 1

	)

26 
	~<„©uªs.h
>

28 
	g__BEGIN_DECLS


30 
	~<bôs/ty≥s.h
>

32 
	#__√ed_size_t


	)

33 
	~<°ddef.h
>

35 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


38 #i‚de‡
__gid_t_deföed


39 
__gid_t
 
	tgid_t
;

40 
	#__gid_t_deföed


	)

43 #i‚de‡
__uid_t_deföed


44 
__uid_t
 
	tuid_t
;

45 
	#__uid_t_deföed


	)

50 
	s∑sswd


52 *
	mpw_«me
;

53 *
	mpw_∑sswd
;

54 
__uid_t
 
	mpw_uid
;

55 
__gid_t
 
	mpw_gid
;

56 *
	mpw_gecos
;

57 *
	mpw_dú
;

58 *
	mpw_shñl
;

62 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_GNU


63 
	#__√ed_FILE


	)

64 
	~<°dio.h
>

68 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


73 
£çwít
 ();

79 
ídpwít
 ();

85 
∑sswd
 *
gëpwít
 ();

88 #ifdef 
__USE_SVID


95 
∑sswd
 *
fgëpwít
 (
FILE
 *
__°ªam
);

103 
puçwít
 (
__c⁄°
 
∑sswd
 *
__ª°ri˘
 
__p
,

104 
FILE
 *
__ª°ri˘
 
__f
);

111 
∑sswd
 *
gëpwuid
 (
__uid_t
 
__uid
);

117 
∑sswd
 *
gëpw«m
 (
__c⁄°
 *
__«me
);

119 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


121 #ifde‡
__USE_MISC


124 
	#NSS_BUFLEN_PASSWD
 1024

	)

135 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC


140 
gëpwít_r
 (
∑sswd
 *
__ª°ri˘
 
__ªsu…buf
,

141 *
__ª°ri˘
 
__buf„r
, 
size_t
 
__buÊí
,

142 
∑sswd
 **
__ª°ri˘
 
__ªsu…
);

145 
gëpwuid_r
 (
__uid_t
 
__uid
,

146 
∑sswd
 *
__ª°ri˘
 
__ªsu…buf
,

147 *
__ª°ri˘
 
__buf„r
, 
size_t
 
__buÊí
,

148 
∑sswd
 **
__ª°ri˘
 
__ªsu…
);

150 
gëpw«m_r
 (
__c⁄°
 *
__ª°ri˘
 
__«me
,

151 
∑sswd
 *
__ª°ri˘
 
__ªsu…buf
,

152 *
__ª°ri˘
 
__buf„r
, 
size_t
 
__buÊí
,

153 
∑sswd
 **
__ª°ri˘
 
__ªsu…
);

156 #ifdef 
__USE_SVID


164 
fgëpwít_r
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

165 
∑sswd
 *
__ª°ri˘
 
__ªsu…buf
,

166 *
__ª°ri˘
 
__buf„r
, 
size_t
 
__buÊí
,

167 
∑sswd
 **
__ª°ri˘
 
__ªsu…
);

172 #ifde‡
__USE_GNU


181 
gëpw
 (
__uid_t
 
__uid
, *
__buf„r
);

184 
	g__END_DECLS


	@/usr/include/setjmp.h

23 #i‚def 
_SETJMP_H


24 
	#_SETJMP_H
 1

	)

26 
	~<„©uªs.h
>

28 
	g__BEGIN_DECLS


30 
	~<bôs/£tjmp.h
>

31 
	~<bôs/sig£t.h
>

35 
	s__jmp_buf_èg


41 
__jmp_buf
 
	m__jmpbuf
;

42 
	m__mask_was_ßved
;

43 
__sig£t_t
 
	m__ßved_mask
;

47 
__BEGIN_NAMESPACE_STD


49 
__jmp_buf_èg
 
	tjmp_buf
[1];

53 
	$£tjmp
 (
jmp_buf
 
__ív
Ë
__THROW
;

55 
__END_NAMESPACE_STD


60 
	$__sig£tjmp
 (
__jmp_buf_èg
 
__ív
[1], 
__ßvemask
Ë
__THROW
;

62 #i‚def 
__FAVOR_BSD


65 
	$_£tjmp
 (
__jmp_buf_èg
 
__ív
[1]Ë
__THROW
;

69 
	#£tjmp
(
ív
Ë
	`_£tjmp
 (ív)

	)

74 
	#£tjmp
(
ív
Ë
	`£tjmp
 (ív)

	)

78 
__BEGIN_NAMESPACE_STD


82 
	$l⁄gjmp
 (
__jmp_buf_èg
 
__ív
[1], 
__vÆ
)

83 
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

85 
__END_NAMESPACE_STD


87 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN


91 
	$_l⁄gjmp
 (
__jmp_buf_èg
 
__ív
[1], 
__vÆ
)

92 
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

96 #ifdef 
__USE_POSIX


100 
__jmp_buf_èg
 
	tsigjmp_buf
[1];

104 
	#sig£tjmp
(
ív
, 
ßvemask
Ë
	`__sig£tjmp
 (ív, savemask)

	)

110 
	$sigl⁄gjmp
 (
sigjmp_buf
 
__ív
, 
__vÆ
)

111 
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

114 
__END_DECLS


	@/usr/include/sgtty.h

19 #i‚def 
_SGTTY_H


20 
	#_SGTTY_H
 1

	)

22 
	~<„©uªs.h
>

24 
	~<sys/io˘l.h
>

28 
	gsgâyb
;

30 
__BEGIN_DECLS


33 
	$gây
 (
__fd
, 
sgâyb
 *
__∑øms
Ë
__THROW
;

36 
	$°ty
 (
__fd
, 
__c⁄°
 
sgâyb
 *
__∑øms
Ë
__THROW
;

39 
__END_DECLS


	@/usr/include/signal.h

23 #i‚def 
_SIGNAL_H


25 #i‡!
deföed
 
__√ed_sig_©omic_t
 && !deföed 
__√ed_sig£t_t


26 
	#_SIGNAL_H


	)

29 
	~<„©uªs.h
>

31 
	g__BEGIN_DECLS


33 
	~<bôs/sig£t.h
>

37 #i‡
deföed
 
__√ed_sig_©omic_t
 || deföed 
_SIGNAL_H


38 #i‚de‡
__sig_©omic_t_deföed


39 
	#__sig_©omic_t_deföed


	)

40 
__BEGIN_NAMESPACE_STD


41 
__sig_©omic_t
 
	tsig_©omic_t
;

42 
	g__END_NAMESPACE_STD


44 #unde‡
__√ed_sig_©omic_t


47 #i‡
deföed
 
__√ed_sig£t_t
 || (deföed 
_SIGNAL_H
 && deföed 
__USE_POSIX
)

48 #i‚de‡
__sig£t_t_deföed


49 
	#__sig£t_t_deföed


	)

50 
__sig£t_t
 
	tsig£t_t
;

52 #unde‡
__√ed_sig£t_t


55 #ifde‡
_SIGNAL_H


57 
	~<bôs/ty≥s.h
>

58 
	~<bôs/signum.h
>

60 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


61 #i‚de‡
__pid_t_deföed


62 
__pid_t
 
	tpid_t
;

63 
	#__pid_t_deföed


	)

65 #ifde‡
__USE_XOPEN


67 #i‚de‡
__uid_t_deföed


68 
__uid_t
 
	tuid_t
;

69 
	#__uid_t_deföed


	)

75 (*
	t__sigh™dÀr_t
) ();

80 
__sigh™dÀr_t
 
	$__sysv_sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

81 
__THROW
;

82 #ifde‡
__USE_GNU


83 
__sigh™dÀr_t
 
	$sysv_sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

84 
__THROW
;

90 
__BEGIN_NAMESPACE_STD


91 #ifde‡
__USE_BSD


92 
__sigh™dÀr_t
 
	$sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

93 
__THROW
;

96 #ifde‡
__REDIRECT_NTH


97 
__sigh™dÀr_t
 
	`__REDIRECT_NTH
 (
sig«l
,

98 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
),

99 
__sysv_sig«l
);

101 
	#sig«l
 
__sysv_sig«l


	)

104 
__END_NAMESPACE_STD


106 #ifde‡
__USE_XOPEN


109 
__sigh™dÀr_t
 
	$bsd_sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

110 
__THROW
;

116 #ifde‡
__USE_POSIX


117 
	$kûl
 (
__pid_t
 
__pid
, 
__sig
Ë
__THROW
;

120 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


124 
	$kûÕg
 (
__pid_t
 
__pgΩ
, 
__sig
Ë
__THROW
;

127 
__BEGIN_NAMESPACE_STD


129 
	$øi£
 (
__sig
Ë
__THROW
;

130 
__END_NAMESPACE_STD


132 #ifde‡
__USE_SVID


134 
__sigh™dÀr_t
 
	$ssig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

135 
__THROW
;

136 
	$gsig«l
 (
__sig
Ë
__THROW
;

139 #ifde‡
__USE_MISC


141 
	`psig«l
 (
__sig
, 
__c⁄°
 *
__s
);

153 
	`__sig∑u£
 (
__sig_‹_mask
, 
__is_sig
);

155 #ifde‡
__FAVOR_BSD


158 
	$sig∑u£
 (
__mask
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

160 #ifde‡
__USE_XOPEN


161 #ifde‡
__GNUC__


162 
	$sig∑u£
 (
__sig
Ë
	`__asm__
 ("__xpg_sigpause");

165 
	#sig∑u£
(
sig
Ë
	`__sig∑u£
 ((sig), 1)

	)

171 #ifde‡
__USE_BSD


178 
	#sigmask
(
sig
Ë
	`__sigmask
(sig)

	)

181 
	$sigblock
 (
__mask
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

184 
	$sig£tmask
 (
__mask
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

187 
	$siggëmask
 (Ë
__THROW
 
__©åibuã_dïªˇãd__
;

191 #ifde‡
__USE_MISC


192 
	#NSIG
 
_NSIG


	)

195 #ifde‡
__USE_GNU


196 
__sigh™dÀr_t
 
	tsigh™dÀr_t
;

200 #ifde‡
__USE_BSD


201 
__sigh™dÀr_t
 
	tsig_t
;

204 #ifde‡
__USE_POSIX


206 #ifde‡
__USE_POSIX199309


208 
	#__√ed_time•ec


	)

209 
	~<time.h
>

212 
	~<bôs/sigöfo.h
>

216 
	$sigem±y£t
 (
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

219 
	$sigfûl£t
 (
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

222 
	$sigadd£t
 (
sig£t_t
 *
__£t
, 
__signo
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

225 
	$sigdñ£t
 (
sig£t_t
 *
__£t
, 
__signo
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

228 
	$sigismembî
 (
__c⁄°
 
sig£t_t
 *
__£t
, 
__signo
)

229 
__THROW
 
	`__n⁄nuŒ
 ((1));

231 #ifde‡
__USE_GNU


233 
	$sigi£m±y£t
 (
__c⁄°
 
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

236 
	$sig™d£t
 (
sig£t_t
 *
__£t
, 
__c⁄°
 sig£t_à*
__À·
,

237 
__c⁄°
 
sig£t_t
 *
__right
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3));

240 
	$sig‹£t
 (
sig£t_t
 *
__£t
, 
__c⁄°
 sig£t_à*
__À·
,

241 
__c⁄°
 
sig£t_t
 *
__right
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3));

246 
	~<bôs/siga˘i⁄.h
>

249 
	$sig¥ocmask
 (
__how
, 
__c⁄°
 
sig£t_t
 *
__ª°ri˘
 
__£t
,

250 
sig£t_t
 *
__ª°ri˘
 
__o£t
Ë
__THROW
;

257 
	$sigsu•íd
 (
__c⁄°
 
sig£t_t
 *
__£t
Ë
	`__n⁄nuŒ
 ((1));

260 
	$siga˘i⁄
 (
__sig
, 
__c⁄°
 
siga˘i⁄
 *
__ª°ri˘
 
__a˘
,

261 
siga˘i⁄
 *
__ª°ri˘
 
__ﬂ˘
Ë
__THROW
;

264 
	$sig≥ndög
 (
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

271 
	$sigwaô
 (
__c⁄°
 
sig£t_t
 *
__ª°ri˘
 
__£t
, *__ª°ri˘ 
__sig
)

272 
	`__n⁄nuŒ
 ((1, 2));

274 #ifde‡
__USE_POSIX199309


279 
	$sigwaôöfo
 (
__c⁄°
 
sig£t_t
 *
__ª°ri˘
 
__£t
,

280 
sigöfo_t
 *
__ª°ri˘
 
__öfo
Ë
	`__n⁄nuŒ
 ((1));

287 
	$sigtimedwaô
 (
__c⁄°
 
sig£t_t
 *
__ª°ri˘
 
__£t
,

288 
sigöfo_t
 *
__ª°ri˘
 
__öfo
,

289 
__c⁄°
 
time•ec
 *
__ª°ri˘
 
__timeout
)

290 
	`__n⁄nuŒ
 ((1));

294 
	$sigqueue
 (
__pid_t
 
__pid
, 
__sig
, 
__c⁄°
 
sigvÆ
 
__vÆ
)

295 
__THROW
;

300 #ifde‡
__USE_BSD


304 
__c⁄°
 *__c⁄° 
_sys_sigli°
[
_NSIG
];

305 
__c⁄°
 *__c⁄° 
sys_sigli°
[
_NSIG
];

308 
	ssigvec


310 
__sigh™dÀr_t
 
sv_h™dÀr
;

311 
sv_mask
;

313 
sv_Êags
;

314 
	#sv_⁄°ack
 
sv_Êags


	)

318 
	#SV_ONSTACK
 (1 << 0)

	)

319 
	#SV_INTERRUPT
 (1 << 1)

	)

320 
	#SV_RESETHAND
 (1 << 2)

	)

328 
	$sigvec
 (
__sig
, 
__c⁄°
 
sigvec
 *
__vec
,

329 
sigvec
 *
__ovec
Ë
__THROW
;

333 
	~<bôs/sigc⁄ãxt.h
>

336 
	$sigªtu∫
 (
sigc⁄ãxt
 *
__s˝
Ë
__THROW
;

341 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


346 
	$sigöãºu±
 (
__sig
, 
__öãºu±
Ë
__THROW
;

348 
	~<bôs/sig°ack.h
>

349 #ifde‡
__USE_XOPEN


351 
	~<sys/uc⁄ãxt.h
>

357 
	$sig°ack
 (
sig°ack
 *
__ss
, sig°ack *
__oss
)

358 
__THROW
 
__©åibuã_dïªˇãd__
;

362 
	$sigÆt°ack
 (
__c⁄°
 
sigÆt°ack
 *
__ª°ri˘
 
__ss
,

363 
sigÆt°ack
 *
__ª°ri˘
 
__oss
Ë
__THROW
;

367 #ifde‡
__USE_XOPEN_EXTENDED


371 
	$sighﬁd
 (
__sig
Ë
__THROW
;

374 
	$sigªl£
 (
__sig
Ë
__THROW
;

377 
	$sigign‹e
 (
__sig
Ë
__THROW
;

380 
__sigh™dÀr_t
 
	$sig£t
 (
__sig
, 
__sigh™dÀr_t
 
__di•
Ë
__THROW
;

383 #i‡
deföed
 
__USE_POSIX199506
 || deföed 
__USE_UNIX98


386 
	~<bôs/±hªadty≥s.h
>

387 
	~<bôs/sigthªad.h
>

394 
	$__libc_cuºít_sigπmö
 (Ë
__THROW
;

396 
	$__libc_cuºít_sigπmax
 (Ë
__THROW
;

400 
__END_DECLS


	@/usr/include/stdio.h

24 #i‚de‡
_STDIO_H


26 #i‡!
deföed
 
__√ed_FILE
 && !deföed 
__√ed___FILE


27 
	#_STDIO_H
 1

	)

28 
	~<„©uªs.h
>

30 
	g__BEGIN_DECLS


32 
	#__√ed_size_t


	)

33 
	#__√ed_NULL


	)

34 
	~<°ddef.h
>

36 
	~<bôs/ty≥s.h
>

37 
	#__√ed_FILE


	)

38 
	#__√ed___FILE


	)

42 #i‡!
deföed
 
__FILE_deföed
 && deföed 
__√ed_FILE


45 
	g_IO_FILE
;

47 
__BEGIN_NAMESPACE_STD


49 
_IO_FILE
 
	tFILE
;

50 
	g__END_NAMESPACE_STD


51 #i‡
deföed
 
__USE_LARGEFILE64
 || deföed 
__USE_SVID
 || deföed 
__USE_POSIX
 \

52 || 
deföed
 
	g__USE_BSD
 || deföed 
	g__USE_ISOC99
 || deföed 
	g__USE_XOPEN
 \

53 || 
deföed
 
__USE_POSIX2


54 
	$__USING_NAMESPACE_STD
(
FILE
)

57 
	#__FILE_deföed
 1

	)

59 #unde‡
__√ed_FILE


62 #i‡!
deföed
 
____FILE_deföed
 && deföed 
__√ed___FILE


65 
_IO_FILE
 
	t__FILE
;

67 
	#____FILE_deföed
 1

	)

69 #unde‡
__√ed___FILE


72 #ifdef 
_STDIO_H


73 
	#_STDIO_USES_IOSTREAM


	)

75 
	~<libio.h
>

77 #ifde‡
__USE_XOPEN


78 #ifde‡
__GNUC__


79 #i‚de‡
_VA_LIST_DEFINED


80 
_G_va_li°
 
	tva_li°
;

81 
	#_VA_LIST_DEFINED


	)

84 
	~<°d¨g.h
>

89 
__BEGIN_NAMESPACE_STD


90 #i‚de‡
__USE_FILE_OFFSET64


91 
_G_Âos_t
 
	tÂos_t
;

93 
_G_Âos64_t
 
	tÂos_t
;

95 
__END_NAMESPACE_STD


96 #ifde‡
__USE_LARGEFILE64


97 
_G_Âos64_t
 
	tÂos64_t
;

101 
	#_IOFBF
 0

	)

102 
	#_IOLBF
 1

	)

103 
	#_IONBF
 2

	)

107 #i‚de‡
BUFSIZ


108 
	#BUFSIZ
 
_IO_BUFSIZ


	)

114 #i‚de‡
EOF


115 
	#EOF
 (-1)

	)

121 
	#SEEK_SET
 0

	)

122 
	#SEEK_CUR
 1

	)

123 
	#SEEK_END
 2

	)

126 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


128 
	#P_tmpdú
 "/tmp"

	)

141 
	~<bôs/°dio_lim.h
>

145 
_IO_FILE
 *
°dö
;

146 
_IO_FILE
 *
°dout
;

147 
_IO_FILE
 *
°dîr
;

149 
	#°dö
 
°dö


	)

150 
	#°dout
 
°dout


	)

151 
	#°dîr
 
°dîr


	)

153 
__BEGIN_NAMESPACE_STD


155 
	$ªmove
 (
__c⁄°
 *
__fûíame
Ë
__THROW
;

157 
	$ª«me
 (
__c⁄°
 *
__ﬁd
, __c⁄° *
__√w
Ë
__THROW
;

158 
__END_NAMESPACE_STD


160 #ifde‡
__USE_ATFILE


162 
	$ª«mót
 (
__ﬁdfd
, 
__c⁄°
 *
__ﬁd
, 
__√wfd
,

163 
__c⁄°
 *
__√w
Ë
__THROW
;

166 
__BEGIN_NAMESPACE_STD


171 #i‚de‡
__USE_FILE_OFFSET64


172 
FILE
 *
	$tmpfûe
 (Ë
__wur
;

174 #ifde‡
__REDIRECT


175 
FILE
 *
	`__REDIRECT
 (
tmpfûe
, (), 
tmpfûe64
Ë
__wur
;

177 
	#tmpfûe
 
tmpfûe64


	)

181 #ifde‡
__USE_LARGEFILE64


182 
FILE
 *
	$tmpfûe64
 (Ë
__wur
;

186 *
	$tm≤am
 (*
__s
Ë
__THROW
 
__wur
;

187 
__END_NAMESPACE_STD


189 #ifde‡
__USE_MISC


192 *
	$tm≤am_r
 (*
__s
Ë
__THROW
 
__wur
;

196 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


204 *
	$ãm≤am
 (
__c⁄°
 *
__dú
, __c⁄° *
__pfx
)

205 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

209 
__BEGIN_NAMESPACE_STD


214 
	`f˛o£
 (
FILE
 *
__°ªam
);

219 
	`fÊush
 (
FILE
 *
__°ªam
);

220 
__END_NAMESPACE_STD


222 #ifde‡
__USE_MISC


229 
	`fÊush_u∆ocked
 (
FILE
 *
__°ªam
);

232 #ifde‡
__USE_GNU


239 
	`f˛o£Æl
 ();

243 
__BEGIN_NAMESPACE_STD


244 #i‚de‡
__USE_FILE_OFFSET64


249 
FILE
 *
	$f›í
 (
__c⁄°
 *
__ª°ri˘
 
__fûíame
,

250 
__c⁄°
 *
__ª°ri˘
 
__modes
Ë
__wur
;

255 
FILE
 *
	$‰e›í
 (
__c⁄°
 *
__ª°ri˘
 
__fûíame
,

256 
__c⁄°
 *
__ª°ri˘
 
__modes
,

257 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

259 #ifde‡
__REDIRECT


260 
FILE
 *
	`__REDIRECT
 (
f›í
, (
__c⁄°
 *
__ª°ri˘
 
__fûíame
,

261 
__c⁄°
 *
__ª°ri˘
 
__modes
), 
f›í64
)

262 
__wur
;

263 
FILE
 *
	`__REDIRECT
 (
‰e›í
, (
__c⁄°
 *
__ª°ri˘
 
__fûíame
,

264 
__c⁄°
 *
__ª°ri˘
 
__modes
,

265 
FILE
 *
__ª°ri˘
 
__°ªam
), 
‰e›í64
)

266 
__wur
;

268 
	#f›í
 
f›í64


	)

269 
	#‰e›í
 
‰e›í64


	)

272 
__END_NAMESPACE_STD


273 #ifde‡
__USE_LARGEFILE64


274 
FILE
 *
	$f›í64
 (
__c⁄°
 *
__ª°ri˘
 
__fûíame
,

275 
__c⁄°
 *
__ª°ri˘
 
__modes
Ë
__wur
;

276 
FILE
 *
	$‰e›í64
 (
__c⁄°
 *
__ª°ri˘
 
__fûíame
,

277 
__c⁄°
 *
__ª°ri˘
 
__modes
,

278 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

281 #ifdef 
__USE_POSIX


283 
FILE
 *
	$fd›í
 (
__fd
, 
__c⁄°
 *
__modes
Ë
__THROW
 
__wur
;

286 #ifdef 
__USE_GNU


289 
FILE
 *
	$f›ícookõ
 (*
__ª°ri˘
 
__magic_cookõ
,

290 
__c⁄°
 *
__ª°ri˘
 
__modes
,

291 
_IO_cookõ_io_fun˘i⁄s_t
 
__io_funcs
Ë
__THROW
 
__wur
;

294 
FILE
 *
	$fmem›í
 (*
__s
, 
size_t
 
__Àn
, 
__c⁄°
 *
__modes
)

295 
__THROW
 
__wur
;

300 
FILE
 *
	$›í_mem°ªam
 (**
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
 
__wur
;

304 
__BEGIN_NAMESPACE_STD


307 
	$£tbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
Ë
__THROW
;

311 
	$£tvbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

312 
__modes
, 
size_t
 
__n
Ë
__THROW
;

313 
__END_NAMESPACE_STD


315 #ifdef 
__USE_BSD


318 
	$£tbuf„r
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

319 
size_t
 
__size
Ë
__THROW
;

322 
	$£éöebuf
 (
FILE
 *
__°ªam
Ë
__THROW
;

326 
__BEGIN_NAMESPACE_STD


331 
	`Ârötf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

332 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...);

337 
	`¥ötf
 (
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...);

339 
	$•rötf
 (*
__ª°ri˘
 
__s
,

340 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

346 
	`vÂrötf
 (
FILE
 *
__ª°ri˘
 
__s
, 
__c⁄°
 *__ª°ri˘ 
__f‹m©
,

347 
_G_va_li°
 
__¨g
);

352 
	`v¥ötf
 (
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
);

354 
	$v•rötf
 (*
__ª°ri˘
 
__s
, 
__c⁄°
 *__ª°ri˘ 
__f‹m©
,

355 
_G_va_li°
 
__¨g
Ë
__THROW
;

356 
__END_NAMESPACE_STD


358 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_ISOC99
 || deföed 
__USE_UNIX98


359 
__BEGIN_NAMESPACE_C99


361 
	$¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

362 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...)

363 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)));

365 
	$v¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

366 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

367 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 0)));

368 
__END_NAMESPACE_C99


371 #ifde‡
__USE_GNU


374 
	$va•rötf
 (**
__ª°ri˘
 
__±r
, 
__c⁄°
 *__ª°ri˘ 
__f
,

375 
_G_va_li°
 
__¨g
)

376 
__THROW
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 0))Ë
__wur
;

377 
	$__a•rötf
 (**
__ª°ri˘
 
__±r
,

378 
__c⁄°
 *
__ª°ri˘
 
__fmt
, ...)

379 
__THROW
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

380 
	$a•rötf
 (**
__ª°ri˘
 
__±r
,

381 
__c⁄°
 *
__ª°ri˘
 
__fmt
, ...)

382 
__THROW
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

390 
	$vd¥ötf
 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__fmt
,

391 
_G_va_li°
 
__¨g
)

392 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

393 
	$d¥ötf
 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__fmt
, ...)

394 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

398 
__BEGIN_NAMESPACE_STD


403 
	$fsˇnf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

404 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

409 
	$sˇnf
 (
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

411 
	$ssˇnf
 (
__c⁄°
 *
__ª°ri˘
 
__s
,

412 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

413 
__END_NAMESPACE_STD


415 #ifdef 
__USE_ISOC99


416 
__BEGIN_NAMESPACE_C99


421 
	$vfsˇnf
 (
FILE
 *
__ª°ri˘
 
__s
, 
__c⁄°
 *__ª°ri˘ 
__f‹m©
,

422 
_G_va_li°
 
__¨g
)

423 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 2, 0))Ë
__wur
;

429 
	$vsˇnf
 (
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

430 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 1, 0))Ë
__wur
;

433 
	$vssˇnf
 (
__c⁄°
 *
__ª°ri˘
 
__s
,

434 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

435 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__sˇnf__
, 2, 0)));

436 
__END_NAMESPACE_C99


440 
__BEGIN_NAMESPACE_STD


445 
	`fgëc
 (
FILE
 *
__°ªam
);

446 
	`gëc
 (
FILE
 *
__°ªam
);

452 
	`gëch¨
 ();

453 
__END_NAMESPACE_STD


457 
	#gëc
(
_Â
Ë
	`_IO_gëc
 (_Â)

	)

459 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


464 
	`gëc_u∆ocked
 (
FILE
 *
__°ªam
);

465 
	`gëch¨_u∆ocked
 ();

468 #ifde‡
__USE_MISC


475 
	`fgëc_u∆ocked
 (
FILE
 *
__°ªam
);

479 
__BEGIN_NAMESPACE_STD


487 
	`Âutc
 (
__c
, 
FILE
 *
__°ªam
);

488 
	`putc
 (
__c
, 
FILE
 *
__°ªam
);

494 
	`putch¨
 (
__c
);

495 
__END_NAMESPACE_STD


499 
	#putc
(
_ch
, 
_Â
Ë
	`_IO_putc
 (_ch, _Â)

	)

501 #ifde‡
__USE_MISC


508 
	`Âutc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

511 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


516 
	`putc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

517 
	`putch¨_u∆ocked
 (
__c
);

521 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 \

522 || (
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

524 
	`gëw
 (
FILE
 *
__°ªam
);

527 
	`putw
 (
__w
, 
FILE
 *
__°ªam
);

531 
__BEGIN_NAMESPACE_STD


536 *
	$fgës
 (*
__ª°ri˘
 
__s
, 
__n
, 
FILE
 *__ª°ri˘ 
__°ªam
)

537 
__wur
;

544 *
	$gës
 (*
__s
Ë
__wur
;

545 
__END_NAMESPACE_STD


547 #ifde‡
__USE_GNU


554 *
	$fgës_u∆ocked
 (*
__ª°ri˘
 
__s
, 
__n
,

555 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

559 #ifdef 
__USE_GNU


570 
_IO_ssize_t
 
	$__gëdñim
 (**
__ª°ri˘
 
__löïå
,

571 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

572 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

573 
_IO_ssize_t
 
	$gëdñim
 (**
__ª°ri˘
 
__löïå
,

574 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

575 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

583 
_IO_ssize_t
 
	$gëlöe
 (**
__ª°ri˘
 
__löïå
,

584 
size_t
 *
__ª°ri˘
 
__n
,

585 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

589 
__BEGIN_NAMESPACE_STD


594 
	`Âuts
 (
__c⁄°
 *
__ª°ri˘
 
__s
, 
FILE
 *__ª°ri˘ 
__°ªam
);

600 
	`puts
 (
__c⁄°
 *
__s
);

607 
	`ungëc
 (
__c
, 
FILE
 *
__°ªam
);

614 
size_t
 
	$‰ód
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

615 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

620 
size_t
 
	$fwrôe
 (
__c⁄°
 *
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

621 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__s
Ë
__wur
;

622 
__END_NAMESPACE_STD


624 #ifde‡
__USE_GNU


631 
	`Âuts_u∆ocked
 (
__c⁄°
 *
__ª°ri˘
 
__s
,

632 
FILE
 *
__ª°ri˘
 
__°ªam
);

635 #ifde‡
__USE_MISC


642 
size_t
 
	$‰ód_u∆ocked
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

643 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

644 
size_t
 
	$fwrôe_u∆ocked
 (
__c⁄°
 *
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

645 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

649 
__BEGIN_NAMESPACE_STD


654 
	`f£ek
 (
FILE
 *
__°ªam
, 
__off
, 
__whí˚
);

659 
	$·ñl
 (
FILE
 *
__°ªam
Ë
__wur
;

664 
	`ªwöd
 (
FILE
 *
__°ªam
);

665 
__END_NAMESPACE_STD


672 #i‡
deföed
 
__USE_LARGEFILE
 || deföed 
__USE_XOPEN2K


673 #i‚de‡
__USE_FILE_OFFSET64


678 
	`f£eko
 (
FILE
 *
__°ªam
, 
__off_t
 
__off
, 
__whí˚
);

683 
__off_t
 
	$·ñlo
 (
FILE
 *
__°ªam
Ë
__wur
;

685 #ifde‡
__REDIRECT


686 
	`__REDIRECT
 (
f£eko
,

687 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
),

688 
f£eko64
);

689 
__off64_t
 
	`__REDIRECT
 (
·ñlo
, (
FILE
 *
__°ªam
), 
·ñlo64
);

691 
	#f£eko
 
f£eko64


	)

692 
	#·ñlo
 
·ñlo64


	)

697 
__BEGIN_NAMESPACE_STD


698 #i‚de‡
__USE_FILE_OFFSET64


703 
	`fgëpos
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos_t
 *__ª°ri˘ 
__pos
);

708 
	`f£ços
 (
FILE
 *
__°ªam
, 
__c⁄°
 
Âos_t
 *
__pos
);

710 #ifde‡
__REDIRECT


711 
	`__REDIRECT
 (
fgëpos
, (
FILE
 *
__ª°ri˘
 
__°ªam
,

712 
Âos_t
 *
__ª°ri˘
 
__pos
), 
fgëpos64
);

713 
	`__REDIRECT
 (
f£ços
,

714 (
FILE
 *
__°ªam
, 
__c⁄°
 
Âos_t
 *
__pos
), 
f£ços64
);

716 
	#fgëpos
 
fgëpos64


	)

717 
	#f£ços
 
f£ços64


	)

720 
__END_NAMESPACE_STD


722 #ifde‡
__USE_LARGEFILE64


723 
	`f£eko64
 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
);

724 
__off64_t
 
	$·ñlo64
 (
FILE
 *
__°ªam
Ë
__wur
;

725 
	`fgëpos64
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos64_t
 *__ª°ri˘ 
__pos
);

726 
	`f£ços64
 (
FILE
 *
__°ªam
, 
__c⁄°
 
Âos64_t
 *
__pos
);

729 
__BEGIN_NAMESPACE_STD


731 
	$˛óªº
 (
FILE
 *
__°ªam
Ë
__THROW
;

733 
	$„of
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

735 
	$„º‹
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

736 
__END_NAMESPACE_STD


738 #ifde‡
__USE_MISC


740 
	$˛óªº_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
;

741 
	$„of_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

742 
	$„º‹_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

746 
__BEGIN_NAMESPACE_STD


751 
	`≥º‹
 (
__c⁄°
 *
__s
);

752 
__END_NAMESPACE_STD


758 
	~<bôs/sys_îæi°.h
>

761 #ifdef 
__USE_POSIX


763 
	$fûío
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

766 #ifde‡
__USE_MISC


768 
	$fûío_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

772 #i‡(
deföed
 
__USE_POSIX2
 || deföed 
__USE_SVID
 || deföed 
__USE_BSD
 || \

773 
deföed
 
__USE_MISC
)

778 
FILE
 *
	$p›í
 (
__c⁄°
 *
__comm™d
, __c⁄° *
__modes
Ë
__wur
;

784 
	`p˛o£
 (
FILE
 *
__°ªam
);

788 #ifdef 
__USE_POSIX


790 *
	$˘îmid
 (*
__s
Ë
__THROW
;

794 #ifde‡
__USE_XOPEN


796 *
	`cu£rid
 (*
__s
);

800 #ifdef 
__USE_GNU


801 
ob°ack
;

804 
	$ob°ack_¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

805 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...)

806 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

807 
	$ob°ack_v¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

808 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

809 
_G_va_li°
 
__¨gs
)

810 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

814 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


818 
	$Êockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

822 
	$·rylockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

825 
	$fu∆ockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

828 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
 && !deföed 
__USE_GNU


832 
	#__√ed_gë›t


	)

833 
	~<gë›t.h
>

838 #ifde‡
__USE_EXTERN_INLINES


839 
	~<bôs/°dio.h
>

841 #i‡
__USE_FORTIFY_LEVEL
 > 0 && !
deföed
 
__˝lu•lus


842 
	~<bôs/°dio2.h
>

844 #ifde‡
__LDBL_COMPAT


845 
	~<bôs/°dio-ldbl.h
>

848 
__END_DECLS


	@/usr/include/stdlib.h

23 #i‚def 
_STDLIB_H


25 
	~<„©uªs.h
>

28 
	#__√ed_size_t


	)

29 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


30 
	#__√ed_wch¨_t


	)

31 
	#__√ed_NULL


	)

33 
	~<°ddef.h
>

35 
	g__BEGIN_DECLS


37 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


38 
	#_STDLIB_H
 1

	)

40 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
_SYS_WAIT_H


42 
	~<bôs/waôÊags.h
>

43 
	~<bôs/waô°©us.h
>

45 #ifde‡
__USE_BSD


50 #i‡
deföed
 
__GNUC__
 && !deföed 
__˝lu•lus


51 
	#__WAIT_INT
(
°©us
) \

52 (
	`__exãnsi⁄__
 ({ uni⁄ { 
	`__ty≥of
(
°©us
Ë
__ö
; 
__i
; } 
__u
; \

53 
__u
.
__ö
 = (
°©us
); __u.
__i
; }))

	)

55 
	#__WAIT_INT
(
°©us
Ë(*(*Ë&(°©us))

	)

63 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2 || deföed 
__˝lu•lus


64 
	#__WAIT_STATUS
 *

	)

65 
	#__WAIT_STATUS_DEFN
 *

	)

70 
waô
 *
	m__u±r
;

71 *
	m__ùå
;

72 } 
	t__WAIT_STATUS
 
	t__©åibuã__
 ((
	t__å™•¨ít_uni⁄__
));

73 
	#__WAIT_STATUS_DEFN
 *

	)

78 
	#__WAIT_INT
(
°©us
Ë(°©us)

	)

79 
	#__WAIT_STATUS
 *

	)

80 
	#__WAIT_STATUS_DEFN
 *

	)

85 
	#WEXITSTATUS
(
°©us
Ë
	`__WEXITSTATUS
(
	`__WAIT_INT
(°©us))

	)

86 
	#WTERMSIG
(
°©us
Ë
	`__WTERMSIG
(
	`__WAIT_INT
(°©us))

	)

87 
	#WSTOPSIG
(
°©us
Ë
	`__WSTOPSIG
(
	`__WAIT_INT
(°©us))

	)

88 
	#WIFEXITED
(
°©us
Ë
	`__WIFEXITED
(
	`__WAIT_INT
(°©us))

	)

89 
	#WIFSIGNALED
(
°©us
Ë
	`__WIFSIGNALED
(
	`__WAIT_INT
(°©us))

	)

90 
	#WIFSTOPPED
(
°©us
Ë
	`__WIFSTOPPED
(
	`__WAIT_INT
(°©us))

	)

91 #ifde‡
__WIFCONTINUED


92 
	#WIFCONTINUED
(
°©us
Ë
	`__WIFCONTINUED
(
	`__WAIT_INT
(°©us))

	)

96 
__BEGIN_NAMESPACE_STD


100 
	mquŸ
;

101 
	mªm
;

102 } 
	tdiv_t
;

105 #i‚de‡
__ldiv_t_deföed


108 
	mquŸ
;

109 
	mªm
;

110 } 
	tldiv_t
;

111 
	#__ldiv_t_deföed
 1

	)

113 
	g__END_NAMESPACE_STD


115 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__Œdiv_t_deföed


116 
__BEGIN_NAMESPACE_C99


118 
__exãnsi⁄__
 struct

120 
	mquŸ
;

121 
	mªm
;

122 } 
	tŒdiv_t
;

123 
	#__Œdiv_t_deföed
 1

	)

124 
	g__END_NAMESPACE_C99


129 
	#RAND_MAX
 2147483647

	)

134 
	#EXIT_FAILURE
 1

	)

135 
	#EXIT_SUCCESS
 0

	)

139 
	#MB_CUR_MAX
 (
	`__˘y≥_gë_mb_cur_max
 ())

	)

140 
size_t
 
	$__˘y≥_gë_mb_cur_max
 (Ë
__THROW
 
__wur
;

143 
__BEGIN_NAMESPACE_STD


145 
	$©of
 (
__c⁄°
 *
__≈å
)

146 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

148 
	$©oi
 (
__c⁄°
 *
__≈å
)

149 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

151 
	$©ﬁ
 (
__c⁄°
 *
__≈å
)

152 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

153 
__END_NAMESPACE_STD


155 #i‡
deföed
 
__USE_ISOC99
 || (deföed 
__GLIBC_HAVE_LONG_LONG
 && deföed 
__USE_MISC
)

156 
__BEGIN_NAMESPACE_C99


158 
__exãnsi⁄__
 
	$©ﬁl
 (
__c⁄°
 *
__≈å
)

159 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

160 
__END_NAMESPACE_C99


163 
__BEGIN_NAMESPACE_STD


165 
	$°πod
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

166 **
__ª°ri˘
 
__íd±r
)

167 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

168 
__END_NAMESPACE_STD


170 #ifdef 
__USE_ISOC99


171 
__BEGIN_NAMESPACE_C99


173 
	$°πof
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

174 **
__ª°ri˘
 
__íd±r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

176 
	$°πﬁd
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

177 **
__ª°ri˘
 
__íd±r
)

178 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

179 
__END_NAMESPACE_C99


182 
__BEGIN_NAMESPACE_STD


184 
	$°πﬁ
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

185 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

186 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

188 
	$°πoul
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

189 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

190 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

191 
__END_NAMESPACE_STD


193 #i‡
deföed
 
__GLIBC_HAVE_LONG_LONG
 && deföed 
__USE_BSD


195 
__exãnsi⁄__


196 
	$°πoq
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

197 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

198 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

200 
__exãnsi⁄__


201 
	$°πouq
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

202 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

203 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

206 #i‡
deföed
 
__USE_ISOC99
 || (deföed 
__GLIBC_HAVE_LONG_LONG
 && deföed 
__USE_MISC
)

207 
__BEGIN_NAMESPACE_C99


209 
__exãnsi⁄__


210 
	$°πﬁl
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

211 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

212 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

214 
__exãnsi⁄__


215 
	$°πouŒ
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

216 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

217 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

218 
__END_NAMESPACE_C99


222 #ifde‡
__USE_GNU


236 
	~<xloˇÀ.h
>

240 
	$°πﬁ_l
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

241 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

242 
__loˇÀ_t
 
__loc
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 4)Ë
__wur
;

244 
	$°πoul_l
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

245 **
__ª°ri˘
 
__íd±r
,

246 
__ba£
, 
__loˇÀ_t
 
__loc
)

247 
__THROW
 
	`__n⁄nuŒ
 ((1, 4)Ë
__wur
;

249 
__exãnsi⁄__


250 
	$°πﬁl_l
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

251 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

252 
__loˇÀ_t
 
__loc
)

253 
__THROW
 
	`__n⁄nuŒ
 ((1, 4)Ë
__wur
;

255 
__exãnsi⁄__


256 
	$°πouŒ_l
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

257 **
__ª°ri˘
 
__íd±r
,

258 
__ba£
, 
__loˇÀ_t
 
__loc
)

259 
__THROW
 
	`__n⁄nuŒ
 ((1, 4)Ë
__wur
;

261 
	$°πod_l
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

262 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

263 
__THROW
 
	`__n⁄nuŒ
 ((1, 3)Ë
__wur
;

265 
	$°πof_l
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

266 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

267 
__THROW
 
	`__n⁄nuŒ
 ((1, 3)Ë
__wur
;

269 
	$°πﬁd_l
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

270 **
__ª°ri˘
 
__íd±r
,

271 
__loˇÀ_t
 
__loc
)

272 
__THROW
 
	`__n⁄nuŒ
 ((1, 3)Ë
__wur
;

279 
	$__°πod_öã∫Æ
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

280 **
__ª°ri˘
 
__íd±r
, 
__group
)

281 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

282 
	$__°πof_öã∫Æ
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

283 **
__ª°ri˘
 
__íd±r
, 
__group
)

284 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

285 
	$__°πﬁd_öã∫Æ
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

286 **
__ª°ri˘
 
__íd±r
,

287 
__group
)

288 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

289 #i‚de‡
__°πﬁ_öã∫Æ_deföed


290 
	$__°πﬁ_öã∫Æ
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

291 **
__ª°ri˘
 
__íd±r
,

292 
__ba£
, 
__group
)

293 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

294 
	#__°πﬁ_öã∫Æ_deföed
 1

	)

296 #i‚de‡
__°πoul_öã∫Æ_deföed


297 
	$__°πoul_öã∫Æ
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

298 **
__ª°ri˘
 
__íd±r
,

299 
__ba£
, 
__group
)

300 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

301 
	#__°πoul_öã∫Æ_deföed
 1

	)

303 #i‡
deföed
 
__GNUC__
 || deföed 
__USE_ISOC99


304 #i‚de‡
__°πﬁl_öã∫Æ_deföed


305 
__exãnsi⁄__


306 
	$__°πﬁl_öã∫Æ
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

307 **
__ª°ri˘
 
__íd±r
,

308 
__ba£
, 
__group
)

309 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

310 
	#__°πﬁl_öã∫Æ_deföed
 1

	)

312 #i‚de‡
__°πouŒ_öã∫Æ_deföed


313 
__exãnsi⁄__


314 
	$__°πouŒ_öã∫Æ
 (
__c⁄°
 *

315 
__ª°ri˘
 
__≈å
,

316 **
__ª°ri˘
 
__íd±r
,

317 
__ba£
, 
__group
)

318 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

319 
	#__°πouŒ_öã∫Æ_deföed
 1

	)

323 #ifde‡
__USE_EXTERN_INLINES


326 
__BEGIN_NAMESPACE_STD


327 
__exã∫_ölöe
 

328 
	`__NTH
 (
	$°πod
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
, **__ª°ri˘ 
__íd±r
))

330  
	`__°πod_öã∫Æ
 (
__≈å
, 
__íd±r
, 0);

331 
	}
}

332 
__exã∫_ölöe
 

333 
__NTH
 (
	$°πﬁ
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
, **__ª°ri˘ 
__íd±r
,

334 
__ba£
))

336  
	`__°πﬁ_öã∫Æ
 (
__≈å
, 
__íd±r
, 
__ba£
, 0);

337 
	}
}

338 
__exã∫_ölöe
 

339 
__NTH
 (
	$°πoul
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
, **__ª°ri˘ 
__íd±r
,

340 
__ba£
))

342  
	`__°πoul_öã∫Æ
 (
__≈å
, 
__íd±r
, 
__ba£
, 0);

343 
	}
}

344 
	g__END_NAMESPACE_STD


346 #ifde‡
__USE_ISOC99


347 
__BEGIN_NAMESPACE_C99


348 
__exã∫_ölöe
 

349 
__NTH
 (
	$°πof
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
, **__ª°ri˘ 
__íd±r
))

351  
	`__°πof_öã∫Æ
 (
__≈å
, 
__íd±r
, 0);

352 
	}
}

353 #i‚de‡
__LDBL_COMPAT


354 
__exã∫_ölöe
 

355 
__NTH
 (
	$°πﬁd
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
, **__ª°ri˘ 
__íd±r
))

357  
	`__°πﬁd_öã∫Æ
 (
__≈å
, 
__íd±r
, 0);

358 
	}
}

360 
	g__END_NAMESPACE_C99


363 #ifde‡
__USE_BSD


364 
__exãnsi⁄__
 
__exã∫_ölöe
 

365 
__NTH
 (
	$°πoq
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
, **__ª°ri˘ 
__íd±r
,

366 
__ba£
))

368  
	`__°πﬁl_öã∫Æ
 (
__≈å
, 
__íd±r
, 
__ba£
, 0);

369 
	}
}

370 
__exãnsi⁄__
 
__exã∫_ölöe
 

371 
__NTH
 (
	$°πouq
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
, **__ª°ri˘ 
__íd±r
,

372 
__ba£
))

374  
	`__°πouŒ_öã∫Æ
 (
__≈å
, 
__íd±r
, 
__ba£
, 0);

375 
	}
}

378 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


379 
__BEGIN_NAMESPACE_C99


380 
__exãnsi⁄__
 
__exã∫_ölöe
 

381 
__NTH
 (
	$°πﬁl
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
, **__ª°ri˘ 
__íd±r
,

382 
__ba£
))

384  
	`__°πﬁl_öã∫Æ
 (
__≈å
, 
__íd±r
, 
__ba£
, 0);

385 
	}
}

386 
__exãnsi⁄__
 
__exã∫_ölöe
 

387 
__NTH
 (
	$°πouŒ
 (
__c⁄°
 * 
__ª°ri˘
 
__≈å
, **__ª°ri˘ 
__íd±r
,

388 
__ba£
))

390  
	`__°πouŒ_öã∫Æ
 (
__≈å
, 
__íd±r
, 
__ba£
, 0);

391 
	}
}

392 
	g__END_NAMESPACE_C99


395 
__BEGIN_NAMESPACE_STD


396 
__exã∫_ölöe
 

397 
__NTH
 (
	$©of
 (
__c⁄°
 *
__≈å
))

399  
	`°πod
 (
__≈å
, (**Ë
NULL
);

400 
	}
}

401 
__exã∫_ölöe
 

402 
__NTH
 (
	$©oi
 (
__c⁄°
 *
__≈å
))

404  (Ë
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

405 
	}
}

406 
__exã∫_ölöe
 

407 
__NTH
 (
	$©ﬁ
 (
__c⁄°
 *
__≈å
))

409  
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

410 
	}
}

411 
	g__END_NAMESPACE_STD


413 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


414 
__BEGIN_NAMESPACE_C99


415 
__exãnsi⁄__
 
__exã∫_ölöe
 

416 
__NTH
 (
	$©ﬁl
 (
__c⁄°
 *
__≈å
))

418  
	`°πﬁl
 (
__≈å
, (**Ë
NULL
, 10);

419 
	}
}

420 
	g__END_NAMESPACE_C99


425 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN_EXTENDED


429 *
	$l64a
 (
__n
Ë
__THROW
 
__wur
;

432 
	$a64l
 (
__c⁄°
 *
__s
)

433 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

437 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_BSD


438 
	~<sys/ty≥s.h
>

445 
	$øndom
 (Ë
__THROW
;

448 
	$§™dom
 (
__£ed
Ë
__THROW
;

454 *
	$öô°©e
 (
__£ed
, *
__°©ebuf
,

455 
size_t
 
__°©ñí
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

459 *
	$£t°©e
 (*
__°©ebuf
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

462 #ifde‡
__USE_MISC


467 
	søndom_d©a


469 
öt32_t
 *
Âå
;

470 
öt32_t
 *
Ωå
;

471 
öt32_t
 *
°©e
;

472 
ønd_ty≥
;

473 
ønd_deg
;

474 
ønd_£p
;

475 
öt32_t
 *
íd_±r
;

478 
	$øndom_r
 (
øndom_d©a
 *
__ª°ri˘
 
__buf
,

479 
öt32_t
 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

481 
	$§™dom_r
 (
__£ed
, 
øndom_d©a
 *
__buf
)

482 
__THROW
 
	`__n⁄nuŒ
 ((2));

484 
	$öô°©e_r
 (
__£ed
, *
__ª°ri˘
 
__°©ebuf
,

485 
size_t
 
__°©ñí
,

486 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

487 
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

489 
	$£t°©e_r
 (*
__ª°ri˘
 
__°©ebuf
,

490 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

491 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

496 
__BEGIN_NAMESPACE_STD


498 
	$ønd
 (Ë
__THROW
;

500 
	$§™d
 (
__£ed
Ë
__THROW
;

501 
__END_NAMESPACE_STD


503 #ifde‡
__USE_POSIX


505 
	$ønd_r
 (*
__£ed
Ë
__THROW
;

509 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


513 
	$dønd48
 (Ë
__THROW
;

514 
	$î™d48
 (
__xsubi
[3]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

517 
	$Ã™d48
 (Ë
__THROW
;

518 
	$ƒ™d48
 (
__xsubi
[3])

519 
__THROW
 
	`__n⁄nuŒ
 ((1));

522 
	$mønd48
 (Ë
__THROW
;

523 
	$jønd48
 (
__xsubi
[3])

524 
__THROW
 
	`__n⁄nuŒ
 ((1));

527 
	$§™d48
 (
__£edvÆ
Ë
__THROW
;

528 *
	$£ed48
 (
__£ed16v
[3])

529 
__THROW
 
	`__n⁄nuŒ
 ((1));

530 
	$lc⁄g48
 (
__∑øm
[7]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

532 #ifde‡
__USE_MISC


536 
	sdønd48_d©a


538 
__x
[3];

539 
__ﬁd_x
[3];

540 
__c
;

541 
__öô
;

542 
__a
;

546 
	$dønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

547 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

548 
	$î™d48_r
 (
__xsubi
[3],

549 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

550 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

553 
	$Ã™d48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

554 *
__ª°ri˘
 
__ªsu…
)

555 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

556 
	$ƒ™d48_r
 (
__xsubi
[3],

557 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

558 *
__ª°ri˘
 
__ªsu…
)

559 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

562 
	$mønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

563 *
__ª°ri˘
 
__ªsu…
)

564 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

565 
	$jønd48_r
 (
__xsubi
[3],

566 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

567 *
__ª°ri˘
 
__ªsu…
)

568 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

571 
	$§™d48_r
 (
__£edvÆ
, 
dønd48_d©a
 *
__buf„r
)

572 
__THROW
 
	`__n⁄nuŒ
 ((2));

574 
	$£ed48_r
 (
__£ed16v
[3],

575 
dønd48_d©a
 *
__buf„r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

577 
	$lc⁄g48_r
 (
__∑øm
[7],

578 
dønd48_d©a
 *
__buf„r
)

579 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

585 #i‚de‡
__mÆloc_™d_ˇŒoc_deföed


586 
	#__mÆloc_™d_ˇŒoc_deföed


	)

587 
__BEGIN_NAMESPACE_STD


589 *
	$mÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

591 *
	$ˇŒoc
 (
size_t
 
__nmemb
, size_à
__size
)

592 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

593 
__END_NAMESPACE_STD


596 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


597 
__BEGIN_NAMESPACE_STD


600 *
	$ªÆloc
 (*
__±r
, 
size_t
 
__size
)

601 
__THROW
 
__©åibuã_mÆloc__
 
__©åibuã_w¨n_unu£d_ªsu…__
;

603 
	$‰ì
 (*
__±r
Ë
__THROW
;

604 
__END_NAMESPACE_STD


606 #ifdef 
__USE_MISC


608 
	$c‰ì
 (*
__±r
Ë
__THROW
;

611 #i‡
deföed
 
__USE_GNU
 || deföed 
__USE_BSD
 || deföed 
__USE_MISC


612 
	~<Æloˇ.h
>

615 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


617 *
	$vÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

620 #ifde‡
__USE_XOPEN2K


622 
	$posix_memÆign
 (**
__mem±r
, 
size_t
 
__Æignmít
, size_à
__size
)

623 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

626 
__BEGIN_NAMESPACE_STD


628 
	$ab‹t
 (Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

632 
	`©exô
 ((*
__func
Ë()Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

633 
__END_NAMESPACE_STD


635 #ifdef 
__USE_MISC


638 
	`⁄_exô
 ((*
__func
Ë(
__°©us
, *
__¨g
), *__arg)

639 
__THROW
 
	`__n⁄nuŒ
 ((1));

642 
__BEGIN_NAMESPACE_STD


646 
	$exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

647 
__END_NAMESPACE_STD


649 #ifde‡
__USE_ISOC99


650 
__BEGIN_NAMESPACE_C99


653 
	$_Exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

654 
__END_NAMESPACE_C99


658 
__BEGIN_NAMESPACE_STD


660 *
	$gëív
 (
__c⁄°
 *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

661 
__END_NAMESPACE_STD


665 *
	$__£cuª_gëív
 (
__c⁄°
 *
__«me
)

666 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

668 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


672 
	$puãnv
 (*
__°rög
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

675 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


678 
	$£ãnv
 (
__c⁄°
 *
__«me
, __c⁄° *
__vÆue
, 
__ª∂a˚
)

679 
__THROW
 
	`__n⁄nuŒ
 ((2));

682 
	$un£ãnv
 (
__c⁄°
 *
__«me
Ë
__THROW
;

685 #ifdef 
__USE_MISC


689 
	$˛óªnv
 (Ë
__THROW
;

693 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


698 *
	$mkãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

708 #i‚de‡
__USE_FILE_OFFSET64


709 
	$mk°emp
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

711 #ifde‡
__REDIRECT


712 
	`__REDIRECT
 (
mk°emp
, (*
__ãm∂©e
), 
mk°emp64
)

713 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

715 
	#mk°emp
 
mk°emp64


	)

718 #ifde‡
__USE_LARGEFILE64


719 
	$mk°emp64
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

723 #ifde‡
__USE_BSD


729 *
	$mkdãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

733 
__BEGIN_NAMESPACE_STD


738 
	$sy°em
 (
__c⁄°
 *
__comm™d
Ë
__wur
;

739 
__END_NAMESPACE_STD


742 #ifdef 
__USE_GNU


745 *
	$ˇn⁄iˇlize_fûe_«me
 (
__c⁄°
 *
__«me
)

746 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

749 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


755 *
	$ªÆ∑th
 (
__c⁄°
 *
__ª°ri˘
 
__«me
,

756 *
__ª°ri˘
 
__ªsﬁved
Ë
__THROW
 
__wur
;

761 #i‚de‡
__COMPAR_FN_T


762 
	#__COMPAR_FN_T


	)

763 (*
	t__com∑r_‚_t
Ë(
	t__c⁄°
 *, __const *);

765 #ifdef 
__USE_GNU


766 
__com∑r_‚_t
 
	tcom∑ris⁄_‚_t
;

770 
__BEGIN_NAMESPACE_STD


773 *
	$b£¨ch
 (
__c⁄°
 *
__key
, __c⁄° *
__ba£
,

774 
size_t
 
__nmemb
, size_à
__size
, 
__com∑r_‚_t
 
__com∑r
)

775 
	`__n⁄nuŒ
 ((1, 2, 5)Ë
__wur
;

779 
	$qs‹t
 (*
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

780 
__com∑r_‚_t
 
__com∑r
Ë
	`__n⁄nuŒ
 ((1, 4));

784 
	$abs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

785 
	$œbs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

786 
__END_NAMESPACE_STD


788 #ifde‡
__USE_ISOC99


789 
__exãnsi⁄__
 
	$Œabs
 (
__x
)

790 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

794 
__BEGIN_NAMESPACE_STD


798 
div_t
 
	$div
 (
__numî
, 
__díom
)

799 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

800 
ldiv_t
 
	$ldiv
 (
__numî
, 
__díom
)

801 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

802 
__END_NAMESPACE_STD


804 #ifde‡
__USE_ISOC99


805 
__BEGIN_NAMESPACE_C99


806 
__exãnsi⁄__
 
Œdiv_t
 
	$Œdiv
 (
__numî
,

807 
__díom
)

808 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

809 
__END_NAMESPACE_C99


813 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN_EXTENDED


820 *
	$ecvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

821 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

826 *
	$fcvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

827 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

832 *
	$gcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

833 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

836 #ifde‡
__USE_MISC


838 *
	$qecvt
 (
__vÆue
, 
__ndigô
,

839 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

840 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

841 *
	$qfcvt
 (
__vÆue
, 
__ndigô
,

842 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

843 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

844 *
	$qgcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

845 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

850 
	$ecvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

851 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

852 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

853 
	$fcvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

854 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

855 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

857 
	$qecvt_r
 (
__vÆue
, 
__ndigô
,

858 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

859 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

860 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

861 
	$qfcvt_r
 (
__vÆue
, 
__ndigô
,

862 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

863 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

864 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

869 
__BEGIN_NAMESPACE_STD


872 
	$mbÀn
 (
__c⁄°
 *
__s
, 
size_t
 
__n
Ë
__THROW
 
__wur
;

875 
	$mbtowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

876 
__c⁄°
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
 
__wur
;

879 
	$w˘omb
 (*
__s
, 
wch¨_t
 
__wch¨
Ë
__THROW
 
__wur
;

883 
size_t
 
	$mb°owcs
 (
wch¨_t
 *
__ª°ri˘
 
__pwcs
,

884 
__c⁄°
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
;

886 
size_t
 
	$wc°ombs
 (*
__ª°ri˘
 
__s
,

887 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__pwcs
, 
size_t
 
__n
)

888 
__THROW
;

889 
__END_NAMESPACE_STD


892 #ifde‡
__USE_SVID


897 
	$Ωm©ch
 (
__c⁄°
 *
__ª•⁄£
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

901 #ifde‡
__USE_XOPEN_EXTENDED


908 
	$gësub›t
 (**
__ª°ri˘
 
__›ti⁄p
,

909 *
__c⁄°
 *
__ª°ri˘
 
__tokís
,

910 **
__ª°ri˘
 
__vÆuï
)

911 
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3)Ë
__wur
;

915 #ifde‡
__USE_XOPEN


917 
	$£tkey
 (
__c⁄°
 *
__key
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

923 #ifde‡
__USE_XOPEN2K


925 
	$posix_›í±
 (
__oÊag
Ë
__wur
;

928 #ifde‡
__USE_XOPEN


933 
	$gø¡±
 (
__fd
Ë
__THROW
;

937 
	$u∆ock±
 (
__fd
Ë
__THROW
;

942 *
	$±¢ame
 (
__fd
Ë
__THROW
 
__wur
;

945 #ifde‡
__USE_GNU


949 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
)

950 
__THROW
 
	`__n⁄nuŒ
 ((2));

953 
	`gë±
 ();

956 #ifde‡
__USE_BSD


960 
	$gëlﬂdavg
 (
__lﬂdavg
[], 
__√Àm
)

961 
__THROW
 
	`__n⁄nuŒ
 ((1));

966 #i‡
__USE_FORTIFY_LEVEL
 > 0 && !
deföed
 
__˝lu•lus


967 
	~<bôs/°dlib.h
>

969 #ifde‡
__LDBL_COMPAT


970 
	~<bôs/°dlib-ldbl.h
>

974 #unde‡
__√ed_mÆloc_™d_ˇŒoc


976 
__END_DECLS


	@/usr/include/string.h

23 #i‚def 
_STRING_H


24 
	#_STRING_H
 1

	)

26 
	~<„©uªs.h
>

28 
	g__BEGIN_DECLS


31 
	#__√ed_size_t


	)

32 
	#__√ed_NULL


	)

33 
	~<°ddef.h
>

36 
__BEGIN_NAMESPACE_STD


38 *
	$mem˝y
 (*
__ª°ri˘
 
__de°
,

39 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

40 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

43 *
	$memmove
 (*
__de°
, 
__c⁄°
 *
__§c
, 
size_t
 
__n
)

44 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

45 
__END_NAMESPACE_STD


50 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN


51 *
	$memc˝y
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
,

52 
__c
, 
size_t
 
__n
)

53 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

57 
__BEGIN_NAMESPACE_STD


59 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

62 
	$memcmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
, 
size_t
 
__n
)

63 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

66 *
	$memchr
 (
__c⁄°
 *
__s
, 
__c
, 
size_t
 
__n
)

67 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

68 
__END_NAMESPACE_STD


70 #ifde‡
__USE_GNU


73 *
	$øwmemchr
 (
__c⁄°
 *
__s
, 
__c
)

74 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

77 *
	$memrchr
 (
__c⁄°
 *
__s
, 
__c
, 
size_t
 
__n
)

78 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

82 
__BEGIN_NAMESPACE_STD


84 *
	$°r˝y
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
)

85 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

87 *
	$°∫˝y
 (*
__ª°ri˘
 
__de°
,

88 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

89 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

92 *
	$°rˇt
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
)

93 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

95 *
	$°∫ˇt
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
,

96 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

99 
	$°rcmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
)

100 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

102 
	$°∫cmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
, 
size_t
 
__n
)

103 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

106 
	$°rcﬁl
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
)

107 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

109 
size_t
 
	$°rx‰m
 (*
__ª°ri˘
 
__de°
,

110 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

111 
__THROW
 
	`__n⁄nuŒ
 ((2));

112 
__END_NAMESPACE_STD


114 #ifde‡
__USE_GNU


118 
	~<xloˇÀ.h
>

121 
	$°rcﬁl_l
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
, 
__loˇÀ_t
 
__l
)

122 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

124 
size_t
 
	$°rx‰m_l
 (*
__de°
, 
__c⁄°
 *
__§c
, 
size_t
 
__n
,

125 
__loˇÀ_t
 
__l
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

128 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


130 *
	$°rdup
 (
__c⁄°
 *
__s
)

131 
__THROW
 
__©åibuã_mÆloc__
 
	`__n⁄nuŒ
 ((1));

137 #i‡
deföed
 
__USE_GNU


138 *
	$°∫dup
 (
__c⁄°
 *
__°rög
, 
size_t
 
__n
)

139 
__THROW
 
__©åibuã_mÆloc__
 
	`__n⁄nuŒ
 ((1));

142 #i‡
deföed
 
__USE_GNU
 && deföed 
__GNUC__


144 
	#°rdu∑
(
s
) \

145 (
__exãnsi⁄__
 \

147 
__c⁄°
 *
__ﬁd
 = (
s
); \

148 
size_t
 
__Àn
 = 
	`°æí
 (
__ﬁd
) + 1; \

149 *
__√w
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
); \

150 (*Ë
	`mem˝y
 (
__√w
, 
__ﬁd
, 
__Àn
); \

151 
	}
}))

	)

154 
	#°∫du∑
(
s
, 
n
) \

155 (
__exãnsi⁄__
 \

157 
__c⁄°
 *
__ﬁd
 = (
s
); \

158 
size_t
 
__Àn
 = 
	`°∫Àn
 (
__ﬁd
, (
n
)); \

159 *
__√w
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
 + 1); \

160 
__√w
[
__Àn
] = '\0'; \

161 (*Ë
	`mem˝y
 (
__√w
, 
__ﬁd
, 
__Àn
); \

162 }))

	)

165 
__BEGIN_NAMESPACE_STD


167 *
	$°rchr
 (
__c⁄°
 *
__s
, 
__c
)

168 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

170 *
	$°ºchr
 (
__c⁄°
 *
__s
, 
__c
)

171 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

172 
__END_NAMESPACE_STD


174 #ifde‡
__USE_GNU


177 *
	$°rch∫ul
 (
__c⁄°
 *
__s
, 
__c
)

178 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

181 
__BEGIN_NAMESPACE_STD


184 
size_t
 
	$°rc•n
 (
__c⁄°
 *
__s
, __c⁄° *
__ªje˘
)

185 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

188 
size_t
 
	$°r•n
 (
__c⁄°
 *
__s
, __c⁄° *
__ac˚±
)

189 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

191 *
	$°Ωbrk
 (
__c⁄°
 *
__s
, __c⁄° *
__ac˚±
)

192 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

194 *
	$°r°r
 (
__c⁄°
 *
__hay°ack
, __c⁄° *
__√edÀ
)

195 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

199 *
	$°πok
 (*
__ª°ri˘
 
__s
, 
__c⁄°
 *__ª°ri˘ 
__dñim
)

200 
__THROW
 
	`__n⁄nuŒ
 ((2));

201 
__END_NAMESPACE_STD


205 *
	$__°πok_r
 (*
__ª°ri˘
 
__s
,

206 
__c⁄°
 *
__ª°ri˘
 
__dñim
,

207 **
__ª°ri˘
 
__ßve_±r
)

208 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

209 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


210 *
	$°πok_r
 (*
__ª°ri˘
 
__s
, 
__c⁄°
 *__ª°ri˘ 
__dñim
,

211 **
__ª°ri˘
 
__ßve_±r
)

212 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

215 #ifde‡
__USE_GNU


217 *
	$°rˇ£°r
 (
__c⁄°
 *
__hay°ack
, __c⁄° *
__√edÀ
)

218 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

221 #ifde‡
__USE_GNU


225 *
	$memmem
 (
__c⁄°
 *
__hay°ack
, 
size_t
 
__hay°ackÀn
,

226 
__c⁄°
 *
__√edÀ
, 
size_t
 
__√edÀÀn
)

227 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 3));

231 *
	$__memp˝y
 (*
__ª°ri˘
 
__de°
,

232 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

233 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

234 *
	$memp˝y
 (*
__ª°ri˘
 
__de°
,

235 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

236 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

240 
__BEGIN_NAMESPACE_STD


242 
size_t
 
	$°æí
 (
__c⁄°
 *
__s
)

243 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

244 
__END_NAMESPACE_STD


246 #ifdef 
__USE_GNU


249 
size_t
 
	$°∫Àn
 (
__c⁄°
 *
__°rög
, 
size_t
 
__maxÀn
)

250 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

254 
__BEGIN_NAMESPACE_STD


256 *
	$°ªº‹
 (
__î∫um
Ë
__THROW
;

257 
__END_NAMESPACE_STD


258 #i‡
deföed
 
__USE_XOPEN2K
 || deföed 
__USE_MISC


266 #i‡
deföed
 
__USE_XOPEN2K
 && !deföed 
__USE_GNU


269 #ifde‡
__REDIRECT_NTH


270 
	`__REDIRECT_NTH
 (
°ªº‹_r
,

271 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
),

272 
__xpg_°ªº‹_r
Ë
	`__n⁄nuŒ
 ((2));

274 
	$__xpg_°ªº‹_r
 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
)

275 
__THROW
 
	`__n⁄nuŒ
 ((2));

276 
	#°ªº‹_r
 
__xpg_°ªº‹_r


	)

281 *
	$°ªº‹_r
 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
)

282 
__THROW
 
	`__n⁄nuŒ
 ((2));

286 #ifde‡
__USE_GNU


288 *
	$°ªº‹_l
 (
__î∫um
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

294 
	$__bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

296 #ifde‡
__USE_BSD


298 
	$bc›y
 (
__c⁄°
 *
__§c
, *
__de°
, 
size_t
 
__n
)

299 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

302 
	$bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

305 
	$bcmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
, 
size_t
 
__n
)

306 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

309 *
	$ödex
 (
__c⁄°
 *
__s
, 
__c
)

310 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

313 *
	$rödex
 (
__c⁄°
 *
__s
, 
__c
)

314 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

318 
	$ffs
 (
__i
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

322 #ifdef 
__USE_GNU


323 
	$ff¶
 (
__l
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

324 #ifde‡
__GNUC__


325 
__exãnsi⁄__
 
	$ff¶l
 (
__Œ
)

326 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

331 
	$°rˇ£cmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
)

332 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

335 
	$°∫ˇ£cmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
, 
size_t
 
__n
)

336 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

339 #ifdef 
__USE_GNU


342 
	$°rˇ£cmp_l
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
,

343 
__loˇÀ_t
 
__loc
)

344 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

346 
	$°∫ˇ£cmp_l
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
,

347 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
)

348 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 4));

351 #ifdef 
__USE_BSD


354 *
	$°r£p
 (**
__ª°ri˘
 
__°rögp
,

355 
__c⁄°
 *
__ª°ri˘
 
__dñim
)

356 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

359 #ifdef 
__USE_GNU


361 
	$°rvîscmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
)

362 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

365 *
	$°rsig«l
 (
__sig
Ë
__THROW
;

368 *
	$__°p˝y
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
)

369 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

370 *
	$°p˝y
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
)

371 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

375 *
	$__°≤˝y
 (*
__ª°ri˘
 
__de°
,

376 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

377 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

378 *
	$°≤˝y
 (*
__ª°ri˘
 
__de°
,

379 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

380 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

383 *
	$°r‰y
 (*
__°rög
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

386 *
	$mem‰ob
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

388 #i‚de‡
ba£«me


393 *
	$ba£«me
 (
__c⁄°
 *
__fûíame
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

398 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

399 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__OPTIMIZE_SIZE__
 \

400 && !
deföed
 
__NO_INLINE__
 && !deföed 
__˝lu•lus


420 
	~<bôs/°rög.h
>

423 
	~<bôs/°rög2.h
>

426 #i‡
__USE_FORTIFY_LEVEL
 > 0 && !
deföed
 
__˝lu•lus


428 
	~<bôs/°rög3.h
>

432 
__END_DECLS


	@/usr/include/sys/io.h

19 #i‚def 
_SYS_IO_H


20 
	#_SYS_IO_H
 1

	)

22 
	~<„©uªs.h
>

24 
__BEGIN_DECLS


33 
	$i›îm
 (
__‰om
, 
__num
,

34 
__tu∫_⁄
Ë
__THROW
;

39 
	$i›l
 (
__Àvñ
Ë
__THROW
;

41 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

43 
__ölöe
 

44 
	$öb
 (
p‹t
)

46 
_v
;

48 
__asm__
 
	`__vﬁ©ûe__
 ("öb %w1,%0":"˜" (
_v
):"Nd" (
p‹t
));

49  
_v
;

50 
	}
}

52 
__ölöe
 

53 
	$öb_p
 (
p‹t
)

55 
_v
;

57 
__asm__
 
	`__vﬁ©ûe__
 ("öb %w1,%0\noutb %%Æ,$0x80":"˜" (
_v
):"Nd" (
p‹t
));

58  
_v
;

59 
	}
}

61 
__ölöe
 

62 
	$öw
 (
p‹t
)

64 
_v
;

66 
__asm__
 
	`__vﬁ©ûe__
 ("öw %w1,%0":"˜" (
_v
):"Nd" (
p‹t
));

67  
_v
;

68 
	}
}

70 
__ölöe
 

71 
	$öw_p
 (
p‹t
)

73 
_v
;

75 
__asm__
 
	`__vﬁ©ûe__
 ("öw %w1,%0\noutb %%Æ,$0x80":"˜" (
_v
):"Nd" (
p‹t
));

76  
_v
;

77 
	}
}

79 
__ölöe
 

80 
	$öl
 (
p‹t
)

82 
_v
;

84 
__asm__
 
	`__vﬁ©ûe__
 ("ö»%w1,%0":"˜" (
_v
):"Nd" (
p‹t
));

85  
_v
;

86 
	}
}

88 
__ölöe
 

89 
	$öl_p
 (
p‹t
)

91 
_v
;

92 
__asm__
 
	`__vﬁ©ûe__
 ("ö»%w1,%0\noutb %%Æ,$0x80":"˜" (
_v
):"Nd" (
p‹t
));

93  
_v
;

94 
	}
}

96 
__ölöe
 

97 
	$outb
 (
vÆue
, 
p‹t
)

99 
__asm__
 
	`__vﬁ©ûe__
 ("outb %b0,%w1": :"a" (
vÆue
), "Nd" (
p‹t
));

100 
	}
}

102 
__ölöe
 

103 
	$outb_p
 (
vÆue
, 
p‹t
)

105 
__asm__
 
	`__vﬁ©ûe__
 ("outb %b0,%w1\noutb %%Æ,$0x80": :"a" (
vÆue
),

106 "Nd" (
p‹t
));

107 
	}
}

109 
__ölöe
 

110 
	$outw
 (
vÆue
, 
p‹t
)

112 
__asm__
 
	`__vﬁ©ûe__
 ("outw %w0,%w1": :"a" (
vÆue
), "Nd" (
p‹t
));

114 
	}
}

116 
__ölöe
 

117 
	$outw_p
 (
vÆue
, 
p‹t
)

119 
__asm__
 
	`__vﬁ©ûe__
 ("outw %w0,%w1\noutb %%Æ,$0x80": :"a" (
vÆue
),

120 "Nd" (
p‹t
));

121 
	}
}

123 
__ölöe
 

124 
	$oué
 (
vÆue
, 
p‹t
)

126 
__asm__
 
	`__vﬁ©ûe__
 ("oué %0,%w1": :"a" (
vÆue
), "Nd" (
p‹t
));

127 
	}
}

129 
__ölöe
 

130 
	$oué_p
 (
vÆue
, 
p‹t
)

132 
__asm__
 
	`__vﬁ©ûe__
 ("oué %0,%w1\noutb %%Æ,$0x80": :"a" (
vÆue
),

133 "Nd" (
p‹t
));

134 
	}
}

136 
__ölöe
 

137 
	$ösb
 (
p‹t
, *
addr
, 
cou¡
)

139 
__asm__
 
	`__vﬁ©ûe__
 ("˛d ;Ñï ; insb":"=D" (
addr
),

140 "=c" (
cou¡
):"d" (
p‹t
), "0" (
addr
), "1" (count));

141 
	}
}

143 
__ölöe
 

144 
	$ösw
 (
p‹t
, *
addr
, 
cou¡
)

146 
__asm__
 
	`__vﬁ©ûe__
 ("˛d ;Ñï ; insw":"=D" (
addr
),

147 "=c" (
cou¡
):"d" (
p‹t
), "0" (
addr
), "1" (count));

148 
	}
}

150 
__ölöe
 

151 
	$ö¶
 (
p‹t
, *
addr
, 
cou¡
)

153 
__asm__
 
	`__vﬁ©ûe__
 ("˛d ;Ñï ; in¶":"=D" (
addr
),

154 "=c" (
cou¡
):"d" (
p‹t
), "0" (
addr
), "1" (count));

155 
	}
}

157 
__ölöe
 

158 
	$outsb
 (
p‹t
, c⁄° *
addr
, 
cou¡
)

160 
__asm__
 
	`__vﬁ©ûe__
 ("˛d ;Ñï ; outsb":"=S" (
addr
),

161 "=c" (
cou¡
):"d" (
p‹t
), "0" (
addr
), "1" (count));

162 
	}
}

164 
__ölöe
 

165 
	$outsw
 (
p‹t
, c⁄° *
addr
, 
cou¡
)

167 
__asm__
 
	`__vﬁ©ûe__
 ("˛d ;Ñï ; outsw":"=S" (
addr
),

168 "=c" (
cou¡
):"d" (
p‹t
), "0" (
addr
), "1" (count));

169 
	}
}

171 
__ölöe
 

172 
	$out¶
 (
p‹t
, c⁄° *
addr
, 
cou¡
)

174 
__asm__
 
	`__vﬁ©ûe__
 ("˛d ;Ñï ; out¶":"=S" (
addr
),

175 "=c" (
cou¡
):"d" (
p‹t
), "0" (
addr
), "1" (count));

176 
	}
}

180 
	g__END_DECLS


	@/usr/include/sys/ioctl.h

19 #i‚def 
_SYS_IOCTL_H


20 
	#_SYS_IOCTL_H
 1

	)

22 
	~<„©uªs.h
>

24 
	g__BEGIN_DECLS


27 
	~<bôs/io˘ls.h
>

30 
	~<bôs/io˘l-ty≥s.h
>

37 
	~<sys/âydeÁu…s.h
>

42 
	$io˘l
 (
__fd
, 
__ªque°
, ...Ë
__THROW
;

44 
__END_DECLS


	@/usr/include/sys/ipc.h

19 #i‚de‡
_SYS_IPC_H


20 
	#_SYS_IPC_H
 1

	)

22 
	~<„©uªs.h
>

24 #i‡!
deföed
 
__USE_SVID
 && !deföed 
__USE_XOPEN
 && 
__GNUC__
 >= 2

29 
	~<bôs/ù˘y≥s.h
>

30 
	~<bôs/ùc.h
>

32 #i‚de‡
__uid_t_deföed


33 
__uid_t
 
	tuid_t
;

34 
	#__uid_t_deföed


	)

37 #i‚de‡
__gid_t_deföed


38 
__gid_t
 
	tgid_t
;

39 
	#__gid_t_deföed


	)

42 #i‚de‡
__mode_t_deföed


43 
__mode_t
 
	tmode_t
;

44 
	#__mode_t_deföed


	)

47 #i‚de‡
__key_t_deföed


48 
__key_t
 
	tkey_t
;

49 
	#__key_t_deföed


	)

52 
__BEGIN_DECLS


55 
key_t
 
	$·ok
 (
__c⁄°
 *
__∑th«me
, 
__¥oj_id
Ë
__THROW
;

57 
__END_DECLS


	@/usr/include/sys/mman.h

20 #i‚def 
_SYS_MMAN_H


21 
	#_SYS_MMAN_H
 1

	)

23 
	~<„©uªs.h
>

24 
	~<bôs/ty≥s.h
>

25 
	#__√ed_size_t


	)

26 
	~<°ddef.h
>

28 #i‚de‡
__off_t_deföed


29 #i‚de‡
__USE_FILE_OFFSET64


30 
__off_t
 
	toff_t
;

32 
__off64_t
 
	toff_t
;

34 
	#__off_t_deföed


	)

37 #i‚de‡
__mode_t_deföed


38 
__mode_t
 
	tmode_t
;

39 
	#__mode_t_deföed


	)

42 
	~<bôs/mm™.h
>

45 
	#MAP_FAILED
 ((*Ë-1)

	)

47 
	g__BEGIN_DECLS


57 #i‚de‡
__USE_FILE_OFFSET64


58 *
	$mm≠
 (*
__addr
, 
size_t
 
__Àn
, 
__¥Ÿ
,

59 
__Êags
, 
__fd
, 
__off_t
 
__off£t
Ë
__THROW
;

61 #ifde‡
__REDIRECT_NTH


62 * 
	`__REDIRECT_NTH
 (
mm≠
,

63 (*
__addr
, 
size_t
 
__Àn
, 
__¥Ÿ
,

64 
__Êags
, 
__fd
, 
__off64_t
 
__off£t
),

65 
mm≠64
);

67 
	#mm≠
 
mm≠64


	)

70 #ifde‡
__USE_LARGEFILE64


71 *
	$mm≠64
 (*
__addr
, 
size_t
 
__Àn
, 
__¥Ÿ
,

72 
__Êags
, 
__fd
, 
__off64_t
 
__off£t
Ë
__THROW
;

77 
	$munm≠
 (*
__addr
, 
size_t
 
__Àn
Ë
__THROW
;

82 
	$m¥Ÿe˘
 (*
__addr
, 
size_t
 
__Àn
, 
__¥Ÿ
Ë
__THROW
;

90 
	`msync
 (*
__addr
, 
size_t
 
__Àn
, 
__Êags
);

92 #ifde‡
__USE_BSD


95 
	$madvi£
 (*
__addr
, 
size_t
 
__Àn
, 
__advi˚
Ë
__THROW
;

97 #ifde‡
__USE_XOPEN2K


99 
	$posix_madvi£
 (*
__addr
, 
size_t
 
__Àn
, 
__advi˚
Ë
__THROW
;

104 
	$mlock
 (
__c⁄°
 *
__addr
, 
size_t
 
__Àn
Ë
__THROW
;

107 
	$mu∆ock
 (
__c⁄°
 *
__addr
, 
size_t
 
__Àn
Ë
__THROW
;

112 
	$mlockÆl
 (
__Êags
Ë
__THROW
;

116 
	$mu∆ockÆl
 (Ë
__THROW
;

118 #ifde‡
__USE_MISC


124 
	$möc‹e
 (*
__°¨t
, 
size_t
 
__Àn
, *
__vec
)

125 
__THROW
;

128 #ifde‡
__USE_GNU


134 *
	$mªm≠
 (*
__addr
, 
size_t
 
__ﬁd_Àn
, size_à
__√w_Àn
,

135 
__Êags
, ...Ë
__THROW
;

139 
	$ªm≠_fûe_∑ges
 (*
__°¨t
, 
size_t
 
__size
, 
__¥Ÿ
,

140 
size_t
 
__pgoff
, 
__Êags
Ë
__THROW
;

145 
	`shm_›í
 (
__c⁄°
 *
__«me
, 
__oÊag
, 
mode_t
 
__mode
);

148 
	`shm_u∆ök
 (
__c⁄°
 *
__«me
);

150 
__END_DECLS


	@/usr/include/sys/select.h

22 #i‚de‡
_SYS_SELECT_H


23 
	#_SYS_SELECT_H
 1

	)

25 
	~<„©uªs.h
>

28 
	~<bôs/ty≥s.h
>

31 
	~<bôs/£À˘.h
>

34 
	~<bôs/sig£t.h
>

36 #i‚de‡
__sig£t_t_deföed


37 
	#__sig£t_t_deföed


	)

38 
__sig£t_t
 
	tsig£t_t
;

42 
	#__√ed_time_t


	)

43 
	#__√ed_time•ec


	)

44 
	~<time.h
>

45 
	#__√ed_timevÆ


	)

46 
	~<bôs/time.h
>

48 #i‚de‡
__su£c⁄ds_t_deföed


49 
__su£c⁄ds_t
 
	tsu£c⁄ds_t
;

50 
	#__su£c⁄ds_t_deföed


	)

55 
	t__fd_mask
;

58 #unde‡
__NFDBITS


59 #unde‡
__FDELT


60 #unde‡
__FDMASK


62 
	#__NFDBITS
 (8 *  (
__fd_mask
))

	)

63 
	#__FDELT
(
d
Ë((dË/ 
__NFDBITS
)

	)

64 
	#__FDMASK
(
d
Ë((
__fd_mask
Ë1 << ((dË% 
__NFDBITS
))

	)

71 #ifde‡
__USE_XOPEN


72 
__fd_mask
 
	mfds_bôs
[
__FD_SETSIZE
 / 
__NFDBITS
];

73 
	#__FDS_BITS
(
£t
Ë((£t)->
fds_bôs
)

	)

75 
__fd_mask
 
	m__fds_bôs
[
__FD_SETSIZE
 / 
__NFDBITS
];

76 
	#__FDS_BITS
(
£t
Ë((£t)->
__fds_bôs
)

	)

78 } 
	tfd_£t
;

81 
	#FD_SETSIZE
 
__FD_SETSIZE


	)

83 #ifde‡
__USE_MISC


85 
__fd_mask
 
	tfd_mask
;

88 
	#NFDBITS
 
__NFDBITS


	)

93 
	#FD_SET
(
fd
, 
fd£ç
Ë
	`__FD_SET
 (fd, fd£ç)

	)

94 
	#FD_CLR
(
fd
, 
fd£ç
Ë
	`__FD_CLR
 (fd, fd£ç)

	)

95 
	#FD_ISSET
(
fd
, 
fd£ç
Ë
	`__FD_ISSET
 (fd, fd£ç)

	)

96 
	#FD_ZERO
(
fd£ç
Ë
	`__FD_ZERO
 (fd£ç)

	)

99 
__BEGIN_DECLS


109 
£À˘
 (
__nfds
, 
fd_£t
 *
__ª°ri˘
 
__ªadfds
,

110 
fd_£t
 *
__ª°ri˘
 
__wrôefds
,

111 
fd_£t
 *
__ª°ri˘
 
__ex˚±fds
,

112 
timevÆ
 *
__ª°ri˘
 
__timeout
);

114 #ifde‡
__USE_XOPEN2K


121 
p£À˘
 (
__nfds
, 
fd_£t
 *
__ª°ri˘
 
__ªadfds
,

122 
fd_£t
 *
__ª°ri˘
 
__wrôefds
,

123 
fd_£t
 *
__ª°ri˘
 
__ex˚±fds
,

124 c⁄° 
time•ec
 *
__ª°ri˘
 
__timeout
,

125 c⁄° 
__sig£t_t
 *
__ª°ri˘
 
__sigmask
);

128 
	g__END_DECLS


	@/usr/include/sys/shm.h

19 #i‚de‡
_SYS_SHM_H


20 
	#_SYS_SHM_H
 1

	)

22 
	~<„©uªs.h
>

24 
	#__√ed_size_t


	)

25 
	~<°ddef.h
>

28 
	~<sys/ùc.h
>

31 
	~<bôs/shm.h
>

34 
	#__√ed_time_t


	)

35 
	~<time.h
>

37 #ifde‡
__USE_XOPEN


38 #i‚de‡
__pid_t_deföed


39 
__pid_t
 
	tpid_t
;

40 
	#__pid_t_deföed


	)

45 
__BEGIN_DECLS


51 
	$shm˘l
 (
__shmid
, 
__cmd
, 
shmid_ds
 *
__buf
Ë
__THROW
;

54 
	$shmgë
 (
key_t
 
__key
, 
size_t
 
__size
, 
__shmÊg
Ë
__THROW
;

57 *
	$shm©
 (
__shmid
, 
__c⁄°
 *
__shmaddr
, 
__shmÊg
)

58 
__THROW
;

61 
	$shmdt
 (
__c⁄°
 *
__shmaddr
Ë
__THROW
;

63 
__END_DECLS


	@/usr/include/sys/socket.h

20 #i‚def 
_SYS_SOCKET_H


21 
	#_SYS_SOCKET_H
 1

	)

23 
	~<„©uªs.h
>

25 
	g__BEGIN_DECLS


27 
	~<sys/uio.h
>

28 
	#__√ed_size_t


	)

29 
	~<°ddef.h
>

35 
	~<bôs/sockë.h
>

37 #ifde‡
__USE_BSD


40 
	sosockaddr


42 
	mß_Ámûy
;

43 
	mß_d©a
[14];

51 
	mSHUT_RD
 = 0,

52 
	#SHUT_RD
 
SHUT_RD


	)

53 
	mSHUT_WR
,

54 
	#SHUT_WR
 
SHUT_WR


	)

55 
	mSHUT_RDWR


56 
	#SHUT_RDWR
 
SHUT_RDWR


	)

65 #i‡
deföed
 
__˝lu•lus
 || !
__GNUC_PREREQ
 (2, 7Ë|| !deföed 
__USE_GNU


66 
	#__SOCKADDR_ARG
 
sockaddr
 *
__ª°ri˘


	)

67 
	#__CONST_SOCKADDR_ARG
 
__c⁄°
 
sockaddr
 *

	)

71 
	#__SOCKADDR_ALLTYPES
 \

72 
	`__SOCKADDR_ONETYPE
 (
sockaddr
) \

73 
	`__SOCKADDR_ONETYPE
 (
sockaddr_©
) \

74 
	`__SOCKADDR_ONETYPE
 (
sockaddr_ax25
) \

75 
	`__SOCKADDR_ONETYPE
 (
sockaddr_dl
) \

76 
	`__SOCKADDR_ONETYPE
 (
sockaddr_e⁄
) \

77 
	`__SOCKADDR_ONETYPE
 (
sockaddr_ö
) \

78 
	`__SOCKADDR_ONETYPE
 (
sockaddr_ö6
) \

79 
	`__SOCKADDR_ONETYPE
 (
sockaddr_ö¨p
) \

80 
	`__SOCKADDR_ONETYPE
 (
sockaddr_ùx
) \

81 
	`__SOCKADDR_ONETYPE
 (
sockaddr_iso
) \

82 
	`__SOCKADDR_ONETYPE
 (
sockaddr_ns
) \

83 
	`__SOCKADDR_ONETYPE
 (
sockaddr_un
) \

84 
	`__SOCKADDR_ONETYPE
 (
sockaddr_x25
)

	)

86 
	#__SOCKADDR_ONETYPE
(
ty≥
Ëty≥ *
__ª°ri˘
 
__
##ty≥##__;

	)

87 uni⁄ { 
	m__SOCKADDR_ALLTYPES


88 } 
	t__SOCKADDR_ARG
 
	t__©åibuã__
 ((
	t__å™•¨ít_uni⁄__
));

89 #unde‡
__SOCKADDR_ONETYPE


90 
	#__SOCKADDR_ONETYPE
(
ty≥
Ë
__c⁄°
 ty≥ *
__ª°ri˘
 
__
##ty≥##__;

	)

91 uni⁄ { 
	m__SOCKADDR_ALLTYPES


92 } 
	t__CONST_SOCKADDR_ARG
 
	t__©åibuã__
 ((
	t__å™•¨ít_uni⁄__
));

93 #unde‡
__SOCKADDR_ONETYPE


100 
	$sockë
 (
__domaö
, 
__ty≥
, 
__¥Ÿocﬁ
Ë
__THROW
;

106 
	$sockë∑ú
 (
__domaö
, 
__ty≥
, 
__¥Ÿocﬁ
,

107 
__fds
[2]Ë
__THROW
;

110 
	$böd
 (
__fd
, 
__CONST_SOCKADDR_ARG
 
__addr
, 
sockÀn_t
 
__Àn
)

111 
__THROW
;

114 
	$gësock«me
 (
__fd
, 
__SOCKADDR_ARG
 
__addr
,

115 
sockÀn_t
 *
__ª°ri˘
 
__Àn
Ë
__THROW
;

124 
	`c⁄√˘
 (
__fd
, 
__CONST_SOCKADDR_ARG
 
__addr
, 
sockÀn_t
 
__Àn
);

128 
	$gë≥î«me
 (
__fd
, 
__SOCKADDR_ARG
 
__addr
,

129 
sockÀn_t
 *
__ª°ri˘
 
__Àn
Ë
__THROW
;

136 
ssize_t
 
	`£nd
 (
__fd
, 
__c⁄°
 *
__buf
, 
size_t
 
__n
, 
__Êags
);

143 
ssize_t
 
	`ªcv
 (
__fd
, *
__buf
, 
size_t
 
__n
, 
__Êags
);

150 
ssize_t
 
	`£ndto
 (
__fd
, 
__c⁄°
 *
__buf
, 
size_t
 
__n
,

151 
__Êags
, 
__CONST_SOCKADDR_ARG
 
__addr
,

152 
sockÀn_t
 
__addr_Àn
);

161 
ssize_t
 
	`ªcv‰om
 (
__fd
, *
__ª°ri˘
 
__buf
, 
size_t
 
__n
,

162 
__Êags
, 
__SOCKADDR_ARG
 
__addr
,

163 
sockÀn_t
 *
__ª°ri˘
 
__addr_Àn
);

171 
ssize_t
 
	`£ndmsg
 (
__fd
, 
__c⁄°
 
msghdr
 *
__mesßge
,

172 
__Êags
);

179 
ssize_t
 
	`ªcvmsg
 (
__fd
, 
msghdr
 *
__mesßge
, 
__Êags
);

185 
	$gësock›t
 (
__fd
, 
__Àvñ
, 
__›äame
,

186 *
__ª°ri˘
 
__›tvÆ
,

187 
sockÀn_t
 *
__ª°ri˘
 
__›éí
Ë
__THROW
;

192 
	$£tsock›t
 (
__fd
, 
__Àvñ
, 
__›äame
,

193 
__c⁄°
 *
__›tvÆ
, 
sockÀn_t
 
__›éí
Ë
__THROW
;

199 
	$li°í
 (
__fd
, 
__n
Ë
__THROW
;

209 
	`ac˚±
 (
__fd
, 
__SOCKADDR_ARG
 
__addr
,

210 
sockÀn_t
 *
__ª°ri˘
 
__addr_Àn
);

218 
	$shutdown
 (
__fd
, 
__how
Ë
__THROW
;

221 #ifde‡
__USE_XOPEN2K


223 
	$sock©m¨k
 (
__fd
Ë
__THROW
;

227 #ifde‡
__USE_MISC


231 
	$isfdty≥
 (
__fd
, 
__fdty≥
Ë
__THROW
;

236 #i‡
__USE_FORTIFY_LEVEL
 > 0 && !
deföed
 
__˝lu•lus


237 
	~<bôs/sockë2.h
>

240 
__END_DECLS


	@/usr/include/sys/stat.h

24 #i‚def 
_SYS_STAT_H


25 
	#_SYS_STAT_H
 1

	)

27 
	~<„©uªs.h
>

29 
	~<bôs/ty≥s.h
>

31 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K
 || deföed 
__USE_MISC
 \

32 || 
deföed
 
	g__USE_ATFILE


33 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


34 
	#__√ed_time_t


	)

36 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ATFILE


37 
	#__√ed_time•ec


	)

39 
	~<time.h
>

42 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


45 #i‚de‡
__dev_t_deföed


46 
__dev_t
 
	tdev_t
;

47 
	#__dev_t_deföed


	)

50 #i‚de‡
__gid_t_deföed


51 
__gid_t
 
	tgid_t
;

52 
	#__gid_t_deföed


	)

55 #i‚de‡
__öo_t_deföed


56 #i‚de‡
__USE_FILE_OFFSET64


57 
__öo_t
 
	töo_t
;

59 
__öo64_t
 
	töo_t
;

61 
	#__öo_t_deföed


	)

64 #i‚de‡
__mode_t_deföed


65 
__mode_t
 
	tmode_t
;

66 
	#__mode_t_deföed


	)

69 #i‚de‡
__∆ök_t_deföed


70 
__∆ök_t
 
	t∆ök_t
;

71 
	#__∆ök_t_deföed


	)

74 #i‚de‡
__off_t_deföed


75 #i‚de‡
__USE_FILE_OFFSET64


76 
__off_t
 
	toff_t
;

78 
__off64_t
 
	toff_t
;

80 
	#__off_t_deföed


	)

83 #i‚de‡
__uid_t_deföed


84 
__uid_t
 
	tuid_t
;

85 
	#__uid_t_deföed


	)

89 #ifde‡
__USE_UNIX98


90 #i‚de‡
__blk˙t_t_deföed


91 #i‚de‡
__USE_FILE_OFFSET64


92 
__blk˙t_t
 
	tblk˙t_t
;

94 
__blk˙t64_t
 
	tblk˙t_t
;

96 
	#__blk˙t_t_deföed


	)

99 #i‚de‡
__blksize_t_deföed


100 
__blksize_t
 
	tblksize_t
;

101 
	#__blksize_t_deföed


	)

105 
	g__BEGIN_DECLS


107 
	~<bôs/°©.h
>

109 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


110 
	#S_IFMT
 
__S_IFMT


	)

111 
	#S_IFDIR
 
__S_IFDIR


	)

112 
	#S_IFCHR
 
__S_IFCHR


	)

113 
	#S_IFBLK
 
__S_IFBLK


	)

114 
	#S_IFREG
 
__S_IFREG


	)

115 #ifde‡
__S_IFIFO


116 
	#S_IFIFO
 
__S_IFIFO


	)

118 #ifde‡
__S_IFLNK


119 
	#S_IFLNK
 
__S_IFLNK


	)

121 #i‡(
deföed
 
__USE_BSD
 || deföed 
__USE_MISC
 || deföed 
__USE_UNIX98
) \

122 && 
deföed
 
	g__S_IFSOCK


123 
	#S_IFSOCK
 
__S_IFSOCK


	)

129 
	#__S_ISTYPE
(
mode
, 
mask
Ë(((modeË& 
__S_IFMT
Ë=(mask))

	)

131 
	#S_ISDIR
(
mode
Ë
	`__S_ISTYPE
((mode), 
__S_IFDIR
)

	)

132 
	#S_ISCHR
(
mode
Ë
	`__S_ISTYPE
((mode), 
__S_IFCHR
)

	)

133 
	#S_ISBLK
(
mode
Ë
	`__S_ISTYPE
((mode), 
__S_IFBLK
)

	)

134 
	#S_ISREG
(
mode
Ë
	`__S_ISTYPE
((mode), 
__S_IFREG
)

	)

135 #ifde‡
__S_IFIFO


136 
	#S_ISFIFO
(
mode
Ë
	`__S_ISTYPE
((mode), 
__S_IFIFO
)

	)

138 #ifde‡
__S_IFLNK


139 
	#S_ISLNK
(
mode
Ë
	`__S_ISTYPE
((mode), 
__S_IFLNK
)

	)

142 #i‡
deföed
 
__USE_BSD
 && !deföed 
__S_IFLNK


143 
	#S_ISLNK
(
mode
Ë0

	)

146 #i‡(
deföed
 
__USE_BSD
 || deföed 
__USE_UNIX98
) \

147 && 
deföed
 
	g__S_IFSOCK


148 
	#S_ISSOCK
(
mode
Ë
	`__S_ISTYPE
((mode), 
__S_IFSOCK
)

	)

155 #ifdef 
__USE_POSIX199309


156 
	#S_TYPEISMQ
(
buf
Ë
	`__S_TYPEISMQ
(buf)

	)

157 
	#S_TYPEISSEM
(
buf
Ë
	`__S_TYPEISSEM
(buf)

	)

158 
	#S_TYPEISSHM
(
buf
Ë
	`__S_TYPEISSHM
(buf)

	)

164 
	#S_ISUID
 
__S_ISUID


	)

165 
	#S_ISGID
 
__S_ISGID


	)

167 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


169 
	#S_ISVTX
 
__S_ISVTX


	)

172 
	#S_IRUSR
 
__S_IREAD


	)

173 
	#S_IWUSR
 
__S_IWRITE


	)

174 
	#S_IXUSR
 
__S_IEXEC


	)

176 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

178 #i‡
deföed
 
__USE_MISC
 && deföed 
__USE_BSD


179 
	#S_IREAD
 
S_IRUSR


	)

180 
	#S_IWRITE
 
S_IWUSR


	)

181 
	#S_IEXEC
 
S_IXUSR


	)

184 
	#S_IRGRP
 (
S_IRUSR
 >> 3Ë

	)

185 
	#S_IWGRP
 (
S_IWUSR
 >> 3Ë

	)

186 
	#S_IXGRP
 (
S_IXUSR
 >> 3Ë

	)

188 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

190 
	#S_IROTH
 (
S_IRGRP
 >> 3Ë

	)

191 
	#S_IWOTH
 (
S_IWGRP
 >> 3Ë

	)

192 
	#S_IXOTH
 (
S_IXGRP
 >> 3Ë

	)

194 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

197 #ifdef 
__USE_BSD


199 
	#ACCESSPERMS
 (
S_IRWXU
|
S_IRWXG
|
S_IRWXO
Ë

	)

200 
	#ALLPERMS
 (
S_ISUID
|
S_ISGID
|
S_ISVTX
|
S_IRWXU
|
S_IRWXG
|
S_IRWXO
)

	)

201 
	#DEFFILEMODE
 (
S_IRUSR
|
S_IWUSR
|
S_IRGRP
|
S_IWGRP
|
S_IROTH
|
S_IWOTH
)

	)

203 
	#S_BLKSIZE
 512

	)

207 #i‚de‡
__USE_FILE_OFFSET64


209 
	$°©
 (
__c⁄°
 *
__ª°ri˘
 
__fûe
,

210 
°©
 *
__ª°ri˘
 
__buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

214 
	$f°©
 (
__fd
, 
°©
 *
__buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

216 #ifde‡
__REDIRECT_NTH


217 
	`__REDIRECT_NTH
 (
°©
, (
__c⁄°
 *
__ª°ri˘
 
__fûe
,

218 
°©
 *
__ª°ri˘
 
__buf
), 
°©64
)

219 
	`__n⁄nuŒ
 ((1, 2));

220 
	`__REDIRECT_NTH
 (
f°©
, (
__fd
, 
°©
 *
__buf
), 
f°©64
)

221 
	`__n⁄nuŒ
 ((2));

223 
	#°©
 
°©64


	)

224 
	#f°©
 
f°©64


	)

227 #ifde‡
__USE_LARGEFILE64


228 
	$°©64
 (
__c⁄°
 *
__ª°ri˘
 
__fûe
,

229 
°©64
 *
__ª°ri˘
 
__buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

230 
	$f°©64
 (
__fd
, 
°©64
 *
__buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

233 #ifde‡
__USE_ATFILE


237 #i‚de‡
__USE_FILE_OFFSET64


238 
	$f°©©
 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__fûe
,

239 
°©
 *
__ª°ri˘
 
__buf
, 
__Êag
)

240 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

242 #ifde‡
__REDIRECT_NTH


243 
	`__REDIRECT_NTH
 (
f°©©
, (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__fûe
,

244 
°©
 *
__ª°ri˘
 
__buf
,

245 
__Êag
),

246 
f°©©64
Ë
	`__n⁄nuŒ
 ((2, 3));

248 
	#f°©©
 
f°©©64


	)

252 
	$f°©©64
 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__fûe
,

253 
°©64
 *
__ª°ri˘
 
__buf
, 
__Êag
)

254 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

257 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


258 #i‚de‡
__USE_FILE_OFFSET64


261 
	$l°©
 (
__c⁄°
 *
__ª°ri˘
 
__fûe
,

262 
°©
 *
__ª°ri˘
 
__buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

264 #ifde‡
__REDIRECT_NTH


265 
	`__REDIRECT_NTH
 (
l°©
,

266 (
__c⁄°
 *
__ª°ri˘
 
__fûe
,

267 
°©
 *
__ª°ri˘
 
__buf
), 
l°©64
)

268 
	`__n⁄nuŒ
 ((1, 2));

270 
	#l°©
 
l°©64


	)

273 #ifde‡
__USE_LARGEFILE64


274 
	$l°©64
 (
__c⁄°
 *
__ª°ri˘
 
__fûe
,

275 
°©64
 *
__ª°ri˘
 
__buf
)

276 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

282 
	$chmod
 (
__c⁄°
 *
__fûe
, 
__mode_t
 
__mode
)

283 
__THROW
 
	`__n⁄nuŒ
 ((1));

285 #ifde‡
__USE_BSD


289 
	$lchmod
 (
__c⁄°
 *
__fûe
, 
__mode_t
 
__mode
)

290 
__THROW
 
	`__n⁄nuŒ
 ((1));

294 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


295 
	$fchmod
 (
__fd
, 
__mode_t
 
__mode
Ë
__THROW
;

298 #ifde‡
__USE_ATFILE


301 
	$fchmod©
 (
__fd
, 
__c⁄°
 *
__fûe
, 
__mode_t
 
mode
, 
__Êag
)

302 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

309 
__mode_t
 
	$umask
 (
__mode_t
 
__mask
Ë
__THROW
;

311 #ifdef 
__USE_GNU


314 
__mode_t
 
	$gëumask
 (Ë
__THROW
;

318 
	$mkdú
 (
__c⁄°
 *
__∑th
, 
__mode_t
 
__mode
)

319 
__THROW
 
	`__n⁄nuŒ
 ((1));

321 #ifde‡
__USE_ATFILE


325 
	$mkdú©
 (
__fd
, 
__c⁄°
 *
__∑th
, 
__mode_t
 
__mode
)

326 
__THROW
 
	`__n⁄nuŒ
 ((2));

332 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


333 
	$mknod
 (
__c⁄°
 *
__∑th
, 
__mode_t
 
__mode
, 
__dev_t
 
__dev
)

334 
__THROW
 
	`__n⁄nuŒ
 ((1));

337 #ifde‡
__USE_ATFILE


341 
	$mknod©
 (
__fd
, 
__c⁄°
 *
__∑th
, 
__mode_t
 
__mode
,

342 
__dev_t
 
__dev
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

347 
	$mkfifo
 (
__c⁄°
 *
__∑th
, 
__mode_t
 
__mode
)

348 
__THROW
 
	`__n⁄nuŒ
 ((1));

350 #ifde‡
__USE_ATFILE


354 
	$mkfifﬂt
 (
__fd
, 
__c⁄°
 *
__∑th
, 
__mode_t
 
__mode
)

355 
__THROW
 
	`__n⁄nuŒ
 ((2));

358 #ifde‡
__USE_ATFILE


361 
	$utimíßt
 (
__fd
, 
__c⁄°
 *
__∑th
,

362 
__c⁄°
 
time•ec
 
__times
[2],

363 
__Êags
)

364 
__THROW
 
	`__n⁄nuŒ
 ((2));

367 #ifde‡
__USE_GNU


370 
	$futimís
 (
__fd
, 
__c⁄°
 
time•ec
 
__times
[2]Ë
__THROW
;

388 #i‚de‡
_STAT_VER


389 
	#_STAT_VER
 0

	)

391 #i‚de‡
_MKNOD_VER


392 
	#_MKNOD_VER
 0

	)

396 #i‚de‡
__USE_FILE_OFFSET64


397 
	$__fx°©
 (
__vî
, 
__fûdes
, 
°©
 *
__°©_buf
)

398 
__THROW
 
	`__n⁄nuŒ
 ((3));

399 
	$__x°©
 (
__vî
, 
__c⁄°
 *
__fûíame
,

400 
°©
 *
__°©_buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

401 
	$__lx°©
 (
__vî
, 
__c⁄°
 *
__fûíame
,

402 
°©
 *
__°©_buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

403 
	$__fx°©©
 (
__vî
, 
__fûdes
, 
__c⁄°
 *
__fûíame
,

404 
°©
 *
__°©_buf
, 
__Êag
)

405 
__THROW
 
	`__n⁄nuŒ
 ((3, 4));

407 #ifde‡
__REDIRECT_NTH


408 
	`__REDIRECT_NTH
 (
__fx°©
, (
__vî
, 
__fûdes
,

409 
°©
 *
__°©_buf
), 
__fx°©64
)

410 
	`__n⁄nuŒ
 ((3));

411 
	`__REDIRECT_NTH
 (
__x°©
, (
__vî
, 
__c⁄°
 *
__fûíame
,

412 
°©
 *
__°©_buf
), 
__x°©64
)

413 
	`__n⁄nuŒ
 ((2, 3));

414 
	`__REDIRECT_NTH
 (
__lx°©
, (
__vî
, 
__c⁄°
 *
__fûíame
,

415 
°©
 *
__°©_buf
), 
__lx°©64
)

416 
	`__n⁄nuŒ
 ((2, 3));

417 
	`__REDIRECT_NTH
 (
__fx°©©
, (
__vî
, 
__fûdes
,

418 
__c⁄°
 *
__fûíame
,

419 
°©
 *
__°©_buf
, 
__Êag
),

420 
__fx°©©64
Ë
	`__n⁄nuŒ
 ((3, 4));

423 
	#__fx°©
 
__fx°©64


	)

424 
	#__x°©
 
__x°©64


	)

425 
	#__lx°©
 
__lx°©64


	)

429 #ifde‡
__USE_LARGEFILE64


430 
	$__fx°©64
 (
__vî
, 
__fûdes
, 
°©64
 *
__°©_buf
)

431 
__THROW
 
	`__n⁄nuŒ
 ((3));

432 
	$__x°©64
 (
__vî
, 
__c⁄°
 *
__fûíame
,

433 
°©64
 *
__°©_buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

434 
	$__lx°©64
 (
__vî
, 
__c⁄°
 *
__fûíame
,

435 
°©64
 *
__°©_buf
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

436 
	$__fx°©©64
 (
__vî
, 
__fûdes
, 
__c⁄°
 *
__fûíame
,

437 
°©64
 *
__°©_buf
, 
__Êag
)

438 
__THROW
 
	`__n⁄nuŒ
 ((3, 4));

440 
	$__xmknod
 (
__vî
, 
__c⁄°
 *
__∑th
, 
__mode_t
 
__mode
,

441 
__dev_t
 *
__dev
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

443 
	$__xmknod©
 (
__vî
, 
__fd
, 
__c⁄°
 *
__∑th
,

444 
__mode_t
 
__mode
, 
__dev_t
 *
__dev
)

445 
__THROW
 
	`__n⁄nuŒ
 ((3, 5));

447 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

450 
__exã∫_ölöe
 

451 
	`__NTH
 (
	$°©
 (
__c⁄°
 *
__∑th
, 
°©
 *
__°©buf
))

453  
	`__x°©
 (
_STAT_VER
, 
__∑th
, 
__°©buf
);

454 
	}
}

456 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


457 
__exã∫_ölöe
 

458 
__NTH
 (
	$l°©
 (
__c⁄°
 *
__∑th
, 
°©
 *
__°©buf
))

460  
	`__lx°©
 (
_STAT_VER
, 
__∑th
, 
__°©buf
);

461 
	}
}

464 
__exã∫_ölöe
 

465 
__NTH
 (
	$f°©
 (
__fd
, 
°©
 *
__°©buf
))

467  
	`__fx°©
 (
_STAT_VER
, 
__fd
, 
__°©buf
);

468 
	}
}

470 #ifde‡
__USE_ATFILE


471 
__exã∫_ölöe
 

472 
__NTH
 (
	$f°©©
 (
__fd
, 
__c⁄°
 *
__fûíame
, 
°©
 *
__°©buf
,

473 
__Êag
))

475  
	`__fx°©©
 (
_STAT_VER
, 
__fd
, 
__fûíame
, 
__°©buf
, 
__Êag
);

476 
	}
}

479 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_BSD


480 
__exã∫_ölöe
 

481 
__NTH
 (
	$mknod
 (
__c⁄°
 *
__∑th
, 
__mode_t
 
__mode
, 
__dev_t
 
__dev
))

483  
	`__xmknod
 (
_MKNOD_VER
, 
__∑th
, 
__mode
, &
__dev
);

484 
	}
}

487 #ifde‡
__USE_ATFILE


488 
__exã∫_ölöe
 

489 
__NTH
 (
	$mknod©
 (
__fd
, 
__c⁄°
 *
__∑th
, 
__mode_t
 
__mode
,

490 
__dev_t
 
__dev
))

492  
	`__xmknod©
 (
_MKNOD_VER
, 
__fd
, 
__∑th
, 
__mode
, &
__dev
);

493 
	}
}

496 #i‡
deföed
 
__USE_LARGEFILE64
 \

497 && (! 
deföed
 
	g__USE_FILE_OFFSET64
 \

498 || (
deföed
 
	g__REDIRECT_NTH
 && deföed 
	g__OPTIMIZE__
))

499 
__exã∫_ölöe
 

500 
__NTH
 (
	$°©64
 (
__c⁄°
 *
__∑th
, 
°©64
 *
__°©buf
))

502  
	`__x°©64
 (
_STAT_VER
, 
__∑th
, 
__°©buf
);

503 
	}
}

505 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


506 
__exã∫_ölöe
 

507 
__NTH
 (
	$l°©64
 (
__c⁄°
 *
__∑th
, 
°©64
 *
__°©buf
))

509  
	`__lx°©64
 (
_STAT_VER
, 
__∑th
, 
__°©buf
);

510 
	}
}

513 
__exã∫_ölöe
 

514 
__NTH
 (
	$f°©64
 (
__fd
, 
°©64
 *
__°©buf
))

516  
	`__fx°©64
 (
_STAT_VER
, 
__fd
, 
__°©buf
);

517 
	}
}

519 #ifde‡
__USE_GNU


520 
__exã∫_ölöe
 

521 
__NTH
 (
	$f°©©64
 (
__fd
, 
__c⁄°
 *
__fûíame
, 
°©64
 *
__°©buf
,

522 
__Êag
))

524  
	`__fx°©©64
 (
_STAT_VER
, 
__fd
, 
__fûíame
, 
__°©buf
, 
__Êag
);

525 
	}
}

532 
	g__END_DECLS


	@/usr/include/sys/termios.h

1 #i‚de‡
_SYS_TERMIOS_H


2 
	#_SYS_TERMIOS_H


	)

3 
	~<ãrmios.h
>

	@/usr/include/sys/time.h

20 #i‚de‡
_SYS_TIME_H


21 
	#_SYS_TIME_H
 1

	)

23 
	~<„©uªs.h
>

25 
	~<bôs/ty≥s.h
>

26 
	#__√ed_time_t


	)

27 
	~<time.h
>

28 
	#__√ed_timevÆ


	)

29 
	~<bôs/time.h
>

31 
	~<sys/£À˘.h
>

33 #i‚de‡
__su£c⁄ds_t_deföed


34 
__su£c⁄ds_t
 
	tsu£c⁄ds_t
;

35 
	#__su£c⁄ds_t_deföed


	)

39 
	g__BEGIN_DECLS


41 #ifde‡
__USE_GNU


43 
	#TIMEVAL_TO_TIMESPEC
(
tv
, 
ts
) { \

44 (
ts
)->
tv_£c
 = (
tv
)->tv_sec; \

45 (
ts
)->
tv_n£c
 = (
tv
)->
tv_u£c
 * 1000; \

46 }

	)

47 
	#TIMESPEC_TO_TIMEVAL
(
tv
, 
ts
) { \

48 (
tv
)->
tv_£c
 = (
ts
)->tv_sec; \

49 (
tv
)->
tv_u£c
 = (
ts
)->
tv_n£c
 / 1000; \

50 }

	)

54 #ifde‡
__USE_BSD


57 
	stimez⁄e


59 
	mtz_möuãswe°
;

60 
	mtz_d°time
;

63 
timez⁄e
 *
	t__ª°ri˘
 
	t__timez⁄e_±r_t
;

65 *
	t__ª°ri˘
 
	t__timez⁄e_±r_t
;

73 
	$gëtimeofday
 (
timevÆ
 *
__ª°ri˘
 
__tv
,

74 
__timez⁄e_±r_t
 
__tz
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

76 #ifde‡
__USE_BSD


79 
	$£âimeofday
 (
__c⁄°
 
timevÆ
 *
__tv
,

80 
__c⁄°
 
timez⁄e
 *
__tz
)

81 
__THROW
 
	`__n⁄nuŒ
 ((1));

87 
	$adjtime
 (
__c⁄°
 
timevÆ
 *
__dñè
,

88 
timevÆ
 *
__ﬁddñè
Ë
__THROW
;

93 
	e__ôimî_which


96 
ITIMER_REAL
 = 0,

97 
	#ITIMER_REAL
 
ITIMER_REAL


	)

99 
ITIMER_VIRTUAL
 = 1,

100 
	#ITIMER_VIRTUAL
 
ITIMER_VIRTUAL


	)

103 
ITIMER_PROF
 = 2

104 
	#ITIMER_PROF
 
ITIMER_PROF


	)

109 
	sôimîvÆ


112 
timevÆ
 
ô_öãrvÆ
;

114 
timevÆ
 
ô_vÆue
;

117 #i‡
deföed
 
__USE_GNU
 && !deföed 
__˝lu•lus


120 
__ôimî_which
 
	t__ôimî_which_t
;

122 
	t__ôimî_which_t
;

127 
	$gëôimî
 (
__ôimî_which_t
 
__which
,

128 
ôimîvÆ
 *
__vÆue
Ë
__THROW
;

133 
	$£tôimî
 (
__ôimî_which_t
 
__which
,

134 
__c⁄°
 
ôimîvÆ
 *
__ª°ri˘
 
__√w
,

135 
ôimîvÆ
 *
__ª°ri˘
 
__ﬁd
Ë
__THROW
;

140 
	$utimes
 (
__c⁄°
 *
__fûe
, __c⁄° 
timevÆ
 
__tvp
[2])

141 
__THROW
 
	`__n⁄nuŒ
 ((1));

143 #ifde‡
__USE_BSD


145 
	$lutimes
 (
__c⁄°
 *
__fûe
, __c⁄° 
timevÆ
 
__tvp
[2])

146 
__THROW
 
	`__n⁄nuŒ
 ((1));

149 
	$futimes
 (
__fd
, 
__c⁄°
 
timevÆ
 
__tvp
[2]Ë
__THROW
;

152 #ifde‡
__USE_ATFILE


156 
	$futimeßt
 (
__fd
, 
__c⁄°
 *
__fûe
,

157 
__c⁄°
 
timevÆ
 
__tvp
[2]Ë
__THROW
;

161 #ifde‡
__USE_BSD


164 
	#timîis£t
(
tvp
Ë(—vp)->
tv_£c
 || (tvp)->
tv_u£c
)

	)

165 
	#timî˛ór
(
tvp
Ë(—vp)->
tv_£c
 = (tvp)->
tv_u£c
 = 0)

	)

166 
	#timîcmp
(
a
, 
b
, 
CMP
) \

167 (((
a
)->
tv_£c
 =(
b
)->tv_sec) ? \

168 ((
a
)->
tv_u£c
 
	`CMP
 (
b
)->tv_usec) : \

169 ((
a
)->
tv_£c
 
	`CMP
 (
b
)->tv_£c))

	)

170 
	#timîadd
(
a
, 
b
, 
ªsu…
) \

172 (
ªsu…
)->
tv_£c
 = (
a
)->tv_£¯+ (
b
)->tv_sec; \

173 (
ªsu…
)->
tv_u£c
 = (
a
)->tv_u£¯+ (
b
)->tv_usec; \

174 i‡((
ªsu…
)->
tv_u£c
 >= 1000000) \

176 ++(
ªsu…
)->
tv_£c
; \

177 (
ªsu…
)->
tv_u£c
 -= 1000000; \

179 
	}
} 0)

	)

180 
	#timîsub
(
a
, 
b
, 
ªsu…
) \

182 (
ªsu…
)->
tv_£c
 = (
a
)->tv_£¯- (
b
)->tv_sec; \

183 (
ªsu…
)->
tv_u£c
 = (
a
)->tv_u£¯- (
b
)->tv_usec; \

184 i‡((
ªsu…
)->
tv_u£c
 < 0) { \

185 --(
ªsu…
)->
tv_£c
; \

186 (
ªsu…
)->
tv_u£c
 += 1000000; \

188 } 0)

	)

191 
	g__END_DECLS


	@/usr/include/sys/timeb.h

19 #i‚de‡
_SYS_TIMEB_H


20 
	#_SYS_TIMEB_H
 1

	)

22 
	~<„©uªs.h
>

24 
	#__√ed_time_t


	)

25 
	~<time.h
>

28 
__BEGIN_DECLS


32 
	stimeb


34 
time_t
 
	mtime
;

35 
	mmûlôm
;

36 
	mtimez⁄e
;

37 
	md°Êag
;

42 
·ime
 (
timeb
 *
__timebuf
);

44 
	g__END_DECLS


	@/usr/include/sys/times.h

23 #i‚def 
_SYS_TIMES_H


24 
	#_SYS_TIMES_H
 1

	)

26 
	~<„©uªs.h
>

28 
	#__√ed_˛ock_t


	)

29 
	~<time.h
>

32 
__BEGIN_DECLS


35 
	stms


37 
˛ock_t
 
	mtms_utime
;

38 
˛ock_t
 
	mtms_°ime
;

40 
˛ock_t
 
	mtms_cutime
;

41 
˛ock_t
 
	mtms_c°ime
;

49 
˛ock_t
 
	$times
 (
tms
 *
__buf„r
Ë
__THROW
;

51 
__END_DECLS


	@/usr/include/sys/types.h

24 #i‚def 
_SYS_TYPES_H


25 
	#_SYS_TYPES_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


31 
	~<bôs/ty≥s.h
>

33 #ifdef 
__USE_BSD


34 #i‚de‡
__u_ch¨_deföed


35 
__u_ch¨
 
	tu_ch¨
;

36 
__u_sh‹t
 
	tu_sh‹t
;

37 
__u_öt
 
	tu_öt
;

38 
__u_l⁄g
 
	tu_l⁄g
;

39 
__quad_t
 
	tquad_t
;

40 
__u_quad_t
 
	tu_quad_t
;

41 
__fsid_t
 
	tfsid_t
;

42 
	#__u_ch¨_deföed


	)

46 
__loff_t
 
	tloff_t
;

48 #i‚de‡
__öo_t_deföed


49 #i‚de‡
__USE_FILE_OFFSET64


50 
__öo_t
 
	töo_t
;

52 
__öo64_t
 
	töo_t
;

54 
	#__öo_t_deföed


	)

56 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__öo64_t_deföed


57 
__öo64_t
 
	töo64_t
;

58 
	#__öo64_t_deföed


	)

61 #i‚de‡
__dev_t_deföed


62 
__dev_t
 
	tdev_t
;

63 
	#__dev_t_deföed


	)

66 #i‚de‡
__gid_t_deföed


67 
__gid_t
 
	tgid_t
;

68 
	#__gid_t_deföed


	)

71 #i‚de‡
__mode_t_deföed


72 
__mode_t
 
	tmode_t
;

73 
	#__mode_t_deföed


	)

76 #i‚de‡
__∆ök_t_deföed


77 
__∆ök_t
 
	t∆ök_t
;

78 
	#__∆ök_t_deföed


	)

81 #i‚de‡
__uid_t_deföed


82 
__uid_t
 
	tuid_t
;

83 
	#__uid_t_deföed


	)

86 #i‚de‡
__off_t_deföed


87 #i‚de‡
__USE_FILE_OFFSET64


88 
__off_t
 
	toff_t
;

90 
__off64_t
 
	toff_t
;

92 
	#__off_t_deföed


	)

94 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


95 
__off64_t
 
	toff64_t
;

96 
	#__off64_t_deföed


	)

99 #i‚de‡
__pid_t_deföed


100 
__pid_t
 
	tpid_t
;

101 
	#__pid_t_deföed


	)

104 #i‡(
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN
Ë&& !deföed 
__id_t_deföed


105 
__id_t
 
	tid_t
;

106 
	#__id_t_deföed


	)

109 #i‚de‡
__ssize_t_deföed


110 
__ssize_t
 
	tssize_t
;

111 
	#__ssize_t_deföed


	)

114 #ifdef 
__USE_BSD


115 #i‚de‡
__daddr_t_deföed


116 
__daddr_t
 
	tdaddr_t
;

117 
__ˇddr_t
 
	tˇddr_t
;

118 
	#__daddr_t_deföed


	)

122 #i‡(
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN
Ë&& !deföed 
__key_t_deföed


123 
__key_t
 
	tkey_t
;

124 
	#__key_t_deföed


	)

127 #ifde‡
__USE_XOPEN


128 
	#__√ed_˛ock_t


	)

130 
	#__√ed_time_t


	)

131 
	#__√ed_timî_t


	)

132 
	#__√ed_˛ockid_t


	)

133 
	~<time.h
>

135 #ifde‡
__USE_XOPEN


136 #i‚de‡
__u£c⁄ds_t_deföed


137 
__u£c⁄ds_t
 
	tu£c⁄ds_t
;

138 
	#__u£c⁄ds_t_deföed


	)

140 #i‚de‡
__su£c⁄ds_t_deföed


141 
__su£c⁄ds_t
 
	tsu£c⁄ds_t
;

142 
	#__su£c⁄ds_t_deföed


	)

146 
	#__√ed_size_t


	)

147 
	~<°ddef.h
>

149 #ifde‡
__USE_MISC


151 
	tul⁄g
;

152 
	tush‹t
;

153 
	tuöt
;

158 #i‡!
__GNUC_PREREQ
 (2, 7)

161 #i‚de‡
__öt8_t_deföed


162 
	#__öt8_t_deföed


	)

163 
	töt8_t
;

164 
	töt16_t
;

165 
	töt32_t
;

166 #i‡
__WORDSIZE
 == 64

167 
	töt64_t
;

168 #ñi‡
__GLIBC_HAVE_LONG_LONG


169 
__exãnsi⁄__
 
	töt64_t
;

174 
	tu_öt8_t
;

175 
	tu_öt16_t
;

176 
	tu_öt32_t
;

177 #i‡
__WORDSIZE
 == 64

178 
	tu_öt64_t
;

179 #ñi‡
__GLIBC_HAVE_LONG_LONG


180 
__exãnsi⁄__
 
	tu_öt64_t
;

183 
	tªgi°î_t
;

188 
	#__ötN_t
(
N
, 
MODE
) \

189 ##
	tN
##
	t_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	tMODE
)))

	)

190 
	t__u_ötN_t
(
	tN
, 
	tMODE
) \

191 
	tu_öt
##
	tN
##
	t_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	tMODE
)))

	)

193 #i‚de‡
	t__öt8_t_deföed


194 
	t__öt8_t_deföed


	)

195 
	t__ötN_t
 (8, 
	t__QI__
);

196 
__ötN_t
 (16, 
__HI__
);

197 
__ötN_t
 (32, 
__SI__
);

198 
__ötN_t
 (64, 
__DI__
);

201 
__u_ötN_t
 (8, 
__QI__
);

202 
__u_ötN_t
 (16, 
__HI__
);

203 
__u_ötN_t
 (32, 
__SI__
);

204 
__u_ötN_t
 (64, 
__DI__
);

206 
	tªgi°î_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	t__w‹d__
)));

212 
	#__BIT_TYPES_DEFINED__
 1

	)

215 #ifdef 
__USE_BSD


217 
	~<ídün.h
>

220 
	~<sys/£À˘.h
>

223 
	~<sys/sysma¸os.h
>

227 #i‡
deföed
 
__USE_UNIX98
 && !deföed 
__blksize_t_deföed


228 
__blksize_t
 
	tblksize_t
;

229 
	#__blksize_t_deföed


	)

233 #i‚de‡
__USE_FILE_OFFSET64


234 #i‚de‡
__blk˙t_t_deföed


235 
__blk˙t_t
 
	tblk˙t_t
;

236 
	#__blk˙t_t_deföed


	)

238 #i‚de‡
__fsblk˙t_t_deföed


239 
__fsblk˙t_t
 
	tfsblk˙t_t
;

240 
	#__fsblk˙t_t_deföed


	)

242 #i‚de‡
__fsfû˙t_t_deföed


243 
__fsfû˙t_t
 
	tfsfû˙t_t
;

244 
	#__fsfû˙t_t_deföed


	)

247 #i‚de‡
__blk˙t_t_deföed


248 
__blk˙t64_t
 
	tblk˙t_t
;

249 
	#__blk˙t_t_deföed


	)

251 #i‚de‡
__fsblk˙t_t_deföed


252 
__fsblk˙t64_t
 
	tfsblk˙t_t
;

253 
	#__fsblk˙t_t_deföed


	)

255 #i‚de‡
__fsfû˙t_t_deföed


256 
__fsfû˙t64_t
 
	tfsfû˙t_t
;

257 
	#__fsfû˙t_t_deföed


	)

261 #ifde‡
__USE_LARGEFILE64


262 
__blk˙t64_t
 
	tblk˙t64_t
;

263 
__fsblk˙t64_t
 
	tfsblk˙t64_t
;

264 
__fsfû˙t64_t
 
	tfsfû˙t64_t
;

269 #i‡
deföed
 
__USE_POSIX199506
 || deföed 
__USE_UNIX98


270 
	~<bôs/±hªadty≥s.h
>

273 
	g__END_DECLS


	@/usr/include/sys/uio.h

19 #i‚de‡
_SYS_UIO_H


20 
	#_SYS_UIO_H
 1

	)

22 
	~<„©uªs.h
>

24 
	~<sys/ty≥s.h
>

26 
	g__BEGIN_DECLS


29 
	~<bôs/uio.h
>

40 
ssize_t
 
ªadv
 (
__fd
, 
__c⁄°
 
iovec
 *
__iovec
, 
__cou¡
);

50 
ssize_t
 
wrôev
 (
__fd
, 
__c⁄°
 
iovec
 *
__iovec
, 
__cou¡
);

52 
	g__END_DECLS


	@/usr/include/sys/un.h

19 #i‚def 
_SYS_UN_H


20 
	#_SYS_UN_H
 1

	)

22 
	~<sys/cdefs.h
>

25 
	~<bôs/sockaddr.h
>

27 
__BEGIN_DECLS


30 
	ssockaddr_un


32 
__SOCKADDR_COMMON
 (
sun_
);

33 
	msun_∑th
[108];

37 #ifde‡
__USE_MISC


38 
	~<°rög.h
>

41 
	#SUN_LEN
(
±r
Ë((
size_t
Ë(((
sockaddr_un
 *Ë0)->
sun_∑th
) \

42 + 
	`°æí
 ((
±r
)->
sun_∑th
))

	)

45 
	g__END_DECLS


	@/usr/include/sys/utsname.h

23 #i‚def 
_SYS_UTSNAME_H


24 
	#_SYS_UTSNAME_H
 1

	)

26 
	~<„©uªs.h
>

28 
	g__BEGIN_DECLS


30 
	~<bôs/ut¢ame.h
>

32 #i‚de‡
_UTSNAME_SYSNAME_LENGTH


33 
	#_UTSNAME_SYSNAME_LENGTH
 
_UTSNAME_LENGTH


	)

35 #i‚de‡
_UTSNAME_NODENAME_LENGTH


36 
	#_UTSNAME_NODENAME_LENGTH
 
_UTSNAME_LENGTH


	)

38 #i‚de‡
_UTSNAME_RELEASE_LENGTH


39 
	#_UTSNAME_RELEASE_LENGTH
 
_UTSNAME_LENGTH


	)

41 #i‚de‡
_UTSNAME_VERSION_LENGTH


42 
	#_UTSNAME_VERSION_LENGTH
 
_UTSNAME_LENGTH


	)

44 #i‚de‡
_UTSNAME_MACHINE_LENGTH


45 
	#_UTSNAME_MACHINE_LENGTH
 
_UTSNAME_LENGTH


	)

49 
	sut¢ame


52 
	msy¢ame
[
_UTSNAME_SYSNAME_LENGTH
];

55 
	mnodíame
[
_UTSNAME_NODENAME_LENGTH
];

58 
	mªÀa£
[
_UTSNAME_RELEASE_LENGTH
];

60 
	mvîsi⁄
[
_UTSNAME_VERSION_LENGTH
];

63 
	mmachöe
[
_UTSNAME_MACHINE_LENGTH
];

65 #i‡
_UTSNAME_DOMAIN_LENGTH
 - 0

67 #ifde‡
__USE_GNU


68 
	mdomaö«me
[
_UTSNAME_DOMAIN_LENGTH
];

70 
	m__domaö«me
[
_UTSNAME_DOMAIN_LENGTH
];

75 #ifde‡
__USE_SVID


77 
	#SYS_NMLN
 
_UTSNAME_LENGTH


	)

82 
	$u«me
 (
ut¢ame
 *
__«me
Ë
__THROW
;

85 
__END_DECLS


	@/usr/include/sys/wait.h

24 #i‚def 
_SYS_WAIT_H


25 
	#_SYS_WAIT_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


31 
	~<sig«l.h
>

32 
	~<sys/ªsour˚.h
>

35 #i‡!
deföed
 
_STDLIB_H
 || !deföed 
__USE_XOPEN


38 
	~<bôs/waôÊags.h
>

40 #ifdef 
__USE_BSD


45 #i‡
deföed
 
__GNUC__
 && !deföed 
__˝lu•lus


46 
	#__WAIT_INT
(
°©us
) \

47 (
	`__exãnsi⁄__
 (((uni⁄ { 
	`__ty≥of
(
°©us
Ë
__ö
; 
__i
; }) \

48 { .
__ö
 = (
°©us
Ë}).
__i
))

	)

50 
	#__WAIT_INT
(
°©us
Ë(*(
__c⁄°
 *Ë&(°©us))

	)

58 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2 || deföed 
__˝lu•lus


59 
	#__WAIT_STATUS
 *

	)

60 
	#__WAIT_STATUS_DEFN
 *

	)

65 
waô
 *
	m__u±r
;

66 *
	m__ùå
;

67 } 
	t__WAIT_STATUS
 
	t__©åibuã__
 ((
	t__å™•¨ít_uni⁄__
));

68 
	#__WAIT_STATUS_DEFN
 *

	)

73 
	#__WAIT_INT
(
°©us
Ë(°©us)

	)

74 
	#__WAIT_STATUS
 *

	)

75 
	#__WAIT_STATUS_DEFN
 *

	)

80 
	~<bôs/waô°©us.h
>

82 
	#WEXITSTATUS
(
°©us
Ë
	`__WEXITSTATUS
(
	`__WAIT_INT
(°©us))

	)

83 
	#WTERMSIG
(
°©us
Ë
	`__WTERMSIG
(
	`__WAIT_INT
(°©us))

	)

84 
	#WSTOPSIG
(
°©us
Ë
	`__WSTOPSIG
(
	`__WAIT_INT
(°©us))

	)

85 
	#WIFEXITED
(
°©us
Ë
	`__WIFEXITED
(
	`__WAIT_INT
(°©us))

	)

86 
	#WIFSIGNALED
(
°©us
Ë
	`__WIFSIGNALED
(
	`__WAIT_INT
(°©us))

	)

87 
	#WIFSTOPPED
(
°©us
Ë
	`__WIFSTOPPED
(
	`__WAIT_INT
(°©us))

	)

88 #ifde‡
__WIFCONTINUED


89 
	#WIFCONTINUED
(
°©us
Ë
	`__WIFCONTINUED
(
	`__WAIT_INT
(°©us))

	)

93 #ifdef 
__USE_BSD


94 
	#WCOREFLAG
 
__WCOREFLAG


	)

95 
	#WCOREDUMP
(
°©us
Ë
	`__WCOREDUMP
(
	`__WAIT_INT
(°©us))

	)

96 
	#W_EXITCODE
(
ªt
, 
sig
Ë
	`__W_EXITCODE
‘ë, sig)

	)

97 
	#W_STOPCODE
(
sig
Ë
	`__W_STOPCODE
(sig)

	)

101 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


104 
	mP_ALL
,

105 
	mP_PID
,

106 
	mP_PGID


107 } 
	tidty≥_t
;

116 
__pid_t
 
waô
 (
__WAIT_STATUS
 
__°©_loc
);

118 #ifdef 
__USE_BSD


120 
	#WAIT_ANY
 (-1Ë

	)

121 
	#WAIT_MYPGRP
 0

	)

139 
__pid_t
 
waôpid
 (__pid_à
__pid
, *
__°©_loc
, 
__›ti⁄s
);

141 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


142 
	#__√ed_sigöfo_t


	)

143 
	~<bôs/sigöfo.h
>

155 
waôid
 (
idty≥_t
 
__idty≥
, 
__id_t
 
__id
, 
sigöfo_t
 *
__öf›
,

156 
__›ti⁄s
);

159 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


162 
	grußge
;

169 
__pid_t
 
	$waô3
 (
__WAIT_STATUS
 
__°©_loc
, 
__›ti⁄s
,

170 
rußge
 * 
__ußge
Ë
__THROW
;

173 #ifde‡
__USE_BSD


175 
__pid_t
 
	$waô4
 (
__pid_t
 
__pid
, 
__WAIT_STATUS
 
__°©_loc
, 
__›ti⁄s
,

176 
rußge
 *
__ußge
Ë
__THROW
;

180 
__END_DECLS


	@/usr/include/termios.h

23 #i‚def 
_TERMIOS_H


24 
	#_TERMIOS_H
 1

	)

26 
	~<„©uªs.h
>

27 #ifde‡
__USE_UNIX98


29 
	~<bôs/ty≥s.h
>

30 #i‚de‡
__pid_t_deföed


31 
__pid_t
 
	tpid_t
;

32 
	#__pid_t_deföed


	)

36 
	g__BEGIN_DECLS


40 
	~<bôs/ãrmios.h
>

42 #ifde‡
__USE_BSD


45 
	#CCEQ
(
vÆ
, 
c
Ë((cË=(vÆË&& (vÆË!
_POSIX_VDISABLE
)

	)

49 
•ìd_t
 
	$cfgëo•ìd
 (
__c⁄°
 
ãrmios
 *
__ãrmios_p
Ë
__THROW
;

52 
•ìd_t
 
	$cfgëi•ìd
 (
__c⁄°
 
ãrmios
 *
__ãrmios_p
Ë
__THROW
;

55 
	$cf£to•ìd
 (
ãrmios
 *
__ãrmios_p
, 
•ìd_t
 
__•ìd
Ë
__THROW
;

58 
	$cf£ti•ìd
 (
ãrmios
 *
__ãrmios_p
, 
•ìd_t
 
__•ìd
Ë
__THROW
;

60 #ifdef 
__USE_BSD


62 
	$cf£t•ìd
 (
ãrmios
 *
__ãrmios_p
, 
•ìd_t
 
__•ìd
Ë
__THROW
;

67 
	$tcgë©å
 (
__fd
, 
ãrmios
 *
__ãrmios_p
Ë
__THROW
;

71 
	$tc£èâr
 (
__fd
, 
__›ti⁄Æ_a˘i⁄s
,

72 
__c⁄°
 
ãrmios
 *
__ãrmios_p
Ë
__THROW
;

75 #ifdef 
__USE_BSD


77 
	$cfmakîaw
 (
ãrmios
 *
__ãrmios_p
Ë
__THROW
;

81 
	$tc£ndbªak
 (
__fd
, 
__duøti⁄
Ë
__THROW
;

87 
	`tcdøö
 (
__fd
);

91 
	$tcÊush
 (
__fd
, 
__queue_£À˘‹
Ë
__THROW
;

95 
	$tcÊow
 (
__fd
, 
__a˘i⁄
Ë
__THROW
;

98 #ifde‡
__USE_UNIX98


100 
__pid_t
 
	$tcgësid
 (
__fd
Ë
__THROW
;

104 #ifde‡
__USE_BSD


105 
	~<sys/âydeÁu…s.h
>

108 
__END_DECLS


	@/usr/include/time.h

24 #i‚def 
_TIME_H


26 #i‡(! 
deföed
 
__√ed_time_t
 && !deföed 
__√ed_˛ock_t
 && \

27 ! 
deföed
 
	g__√ed_time•ec
)

28 
	#_TIME_H
 1

	)

29 
	~<„©uªs.h
>

31 
	g__BEGIN_DECLS


35 #ifdef 
_TIME_H


37 
	#__√ed_size_t


	)

38 
	#__√ed_NULL


	)

39 
	~<°ddef.h
>

43 
	~<bôs/time.h
>

46 #i‡!
deföed
 
__STRICT_ANSI__
 && !deföed 
__USE_XOPEN2K


47 #i‚de‡
CLK_TCK


48 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

54 #i‡!
deföed
 
__˛ock_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_˛ock_t
)

55 
	#__˛ock_t_deföed
 1

	)

57 
	~<bôs/ty≥s.h
>

59 
__BEGIN_NAMESPACE_STD


61 
__˛ock_t
 
	t˛ock_t
;

62 
	g__END_NAMESPACE_STD


63 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX
 || deföed 
__USE_MISC


64 
	$__USING_NAMESPACE_STD
(
˛ock_t
)

68 #unde‡
__√ed_˛ock_t


70 #i‡!
deföed
 
__time_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_time_t
)

71 
	#__time_t_deföed
 1

	)

73 
	~<bôs/ty≥s.h
>

75 
__BEGIN_NAMESPACE_STD


77 
__time_t
 
	ttime_t
;

78 
__END_NAMESPACE_STD


79 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC
 || deföed 
__USE_SVID


80 
	$__USING_NAMESPACE_STD
(
time_t
)

84 #unde‡
__√ed_time_t


86 #i‡!
deföed
 
__˛ockid_t_deföed
 && \

87 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_˛ockid_t
)

88 
	#__˛ockid_t_deföed
 1

	)

90 
	~<bôs/ty≥s.h
>

93 
__˛ockid_t
 
	t˛ockid_t
;

96 #unde‡
__˛ockid_time_t


98 #i‡!
deföed
 
__timî_t_deföed
 && \

99 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_timî_t
)

100 
	#__timî_t_deföed
 1

	)

102 
	~<bôs/ty≥s.h
>

105 
__timî_t
 
	ttimî_t
;

108 #unde‡
__√ed_timî_t


111 #i‡!
deföed
 
__time•ec_deföed
 && \

112 ((
deföed
 
_TIME_H
 && \

113 (
deföed
 
__USE_POSIX199309
 || deföed 
__USE_MISC
)) || \

114 
deföed
 
__√ed_time•ec
)

115 
	#__time•ec_deföed
 1

	)

117 
	~<bôs/ty≥s.h
>

121 
	stime•ec


123 
__time_t
 
tv_£c
;

124 
tv_n£c
;

128 #unde‡
__√ed_time•ec


131 #ifdef 
_TIME_H


132 
__BEGIN_NAMESPACE_STD


134 
	stm


136 
tm_£c
;

137 
tm_mö
;

138 
tm_hour
;

139 
tm_mday
;

140 
tm_m⁄
;

141 
tm_yór
;

142 
tm_wday
;

143 
tm_yday
;

144 
tm_isd°
;

146 #ifdef 
__USE_BSD


147 
tm_gmtoff
;

148 
__c⁄°
 *
tm_z⁄e
;

150 
__tm_gmtoff
;

151 
__c⁄°
 *
__tm_z⁄e
;

154 
__END_NAMESPACE_STD


155 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX
 || deföed 
__USE_MISC


156 
	$__USING_NAMESPACE_STD
(
tm
)

160 #ifde‡
__USE_POSIX199309


162 
	sôimî•ec


164 
time•ec
 
ô_öãrvÆ
;

165 
time•ec
 
ô_vÆue
;

169 
sigevít
;

173 #ifde‡
__USE_XOPEN2K


174 #i‚de‡
__pid_t_deföed


175 
__pid_t
 
	tpid_t
;

176 
	#__pid_t_deföed


	)

181 
__BEGIN_NAMESPACE_STD


184 
˛ock_t
 
	$˛ock
 (Ë
__THROW
;

187 
time_t
 
	$time
 (
time_t
 *
__timî
Ë
__THROW
;

190 
	$dif·ime
 (
time_t
 
__time1
,Åime_à
__time0
)

191 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

194 
time_t
 
	$mktime
 (
tm
 *
__ç
Ë
__THROW
;

200 
size_t
 
	$°r·ime
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

201 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

202 
__c⁄°
 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

203 
__END_NAMESPACE_STD


205 #ifde‡
__USE_XOPEN


208 *
	$°Ωtime
 (
__c⁄°
 *
__ª°ri˘
 
__s
,

209 
__c⁄°
 *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
)

210 
__THROW
;

213 #ifde‡
__USE_GNU


216 
	~<xloˇÀ.h
>

218 
size_t
 
	$°r·ime_l
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

219 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

220 
__c⁄°
 
tm
 *
__ª°ri˘
 
__ç
,

221 
__loˇÀ_t
 
__loc
Ë
__THROW
;

223 *
	$°Ωtime_l
 (
__c⁄°
 *
__ª°ri˘
 
__s
,

224 
__c⁄°
 *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
,

225 
__loˇÀ_t
 
__loc
Ë
__THROW
;

229 
__BEGIN_NAMESPACE_STD


232 
tm
 *
	$gmtime
 (
__c⁄°
 
time_t
 *
__timî
Ë
__THROW
;

236 
tm
 *
	$loˇ…ime
 (
__c⁄°
 
time_t
 *
__timî
Ë
__THROW
;

237 
__END_NAMESPACE_STD


239 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


242 
tm
 *
	$gmtime_r
 (
__c⁄°
 
time_t
 *
__ª°ri˘
 
__timî
,

243 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

247 
tm
 *
	$loˇ…ime_r
 (
__c⁄°
 
time_t
 *
__ª°ri˘
 
__timî
,

248 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

251 
__BEGIN_NAMESPACE_STD


254 *
	$as˘ime
 (
__c⁄°
 
tm
 *
__ç
Ë
__THROW
;

257 *
	$˘ime
 (
__c⁄°
 
time_t
 *
__timî
Ë
__THROW
;

258 
__END_NAMESPACE_STD


260 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


265 *
	$as˘ime_r
 (
__c⁄°
 
tm
 *
__ª°ri˘
 
__ç
,

266 *
__ª°ri˘
 
__buf
Ë
__THROW
;

269 *
	$˘ime_r
 (
__c⁄°
 
time_t
 *
__ª°ri˘
 
__timî
,

270 *
__ª°ri˘
 
__buf
Ë
__THROW
;

275 *
__tz«me
[2];

276 
__daylight
;

277 
__timez⁄e
;

280 #ifdef 
__USE_POSIX


282 *
tz«me
[2];

286 
	$tz£t
 (Ë
__THROW
;

289 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


290 
daylight
;

291 
timez⁄e
;

294 #ifde‡
__USE_SVID


297 
	$°ime
 (
__c⁄°
 
time_t
 *
__whí
Ë
__THROW
;

303 
	#__i¶óp
(
yór
) \

304 ((
yór
Ë% 4 =0 && ((yórË% 100 !0 || (yórË% 400 =0))

	)

307 #ifde‡
__USE_MISC


312 
time_t
 
	$timegm
 (
tm
 *
__ç
Ë
__THROW
;

315 
time_t
 
	$timñoˇl
 (
tm
 *
__ç
Ë
__THROW
;

318 
	$dysize
 (
__yór
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

322 #ifde‡
__USE_POSIX199309


327 
	`«no¶ìp
 (
__c⁄°
 
time•ec
 *
__ªque°ed_time
,

328 
time•ec
 *
__ªmaöög
);

332 
	$˛ock_gëªs
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ªs
Ë
__THROW
;

335 
	$˛ock_gëtime
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ç
Ë
__THROW
;

338 
	$˛ock_£âime
 (
˛ockid_t
 
__˛ock_id
, 
__c⁄°
 
time•ec
 *
__ç
)

339 
__THROW
;

341 #ifde‡
__USE_XOPEN2K


346 
	`˛ock_«no¶ìp
 (
˛ockid_t
 
__˛ock_id
, 
__Êags
,

347 
__c⁄°
 
time•ec
 *
__ªq
,

348 
time•ec
 *
__ªm
);

351 
	$˛ock_gë˝u˛ockid
 (
pid_t
 
__pid
, 
˛ockid_t
 *
__˛ock_id
Ë
__THROW
;

356 
	$timî_¸óã
 (
˛ockid_t
 
__˛ock_id
,

357 
sigevít
 *
__ª°ri˘
 
__evp
,

358 
timî_t
 *
__ª°ri˘
 
__timîid
Ë
__THROW
;

361 
	$timî_dñëe
 (
timî_t
 
__timîid
Ë
__THROW
;

364 
	$timî_£âime
 (
timî_t
 
__timîid
, 
__Êags
,

365 
__c⁄°
 
ôimî•ec
 *
__ª°ri˘
 
__vÆue
,

366 
ôimî•ec
 *
__ª°ri˘
 
__ovÆue
Ë
__THROW
;

369 
	$timî_gëtime
 (
timî_t
 
__timîid
, 
ôimî•ec
 *
__vÆue
)

370 
__THROW
;

373 
	$timî_gëovîrun
 (
timî_t
 
__timîid
Ë
__THROW
;

377 #ifde‡
__USE_XOPEN_EXTENDED


389 
gëd©e_îr
;

398 
tm
 *
	`gëd©e
 (
__c⁄°
 *
__°rög
);

401 #ifde‡
__USE_GNU


412 
	`gëd©e_r
 (
__c⁄°
 *
__ª°ri˘
 
__°rög
,

413 
tm
 *
__ª°ri˘
 
__ªsbuÂ
);

416 
__END_DECLS


	@/usr/include/unistd.h

23 #i‚def 
_UNISTD_H


24 
	#_UNISTD_H
 1

	)

26 
	~<„©uªs.h
>

28 
	g__BEGIN_DECLS


34 
	#_POSIX_VERSION
 200112L

	)

40 
	#_POSIX2_VERSION
 200112L

	)

44 
	#_POSIX2_C_BIND
 200112L

	)

48 
	#_POSIX2_C_DEV
 200112L

	)

52 
	#_POSIX2_SW_DEV
 200112L

	)

56 
	#_POSIX2_LOCALEDEF
 200112L

	)

59 #ifde‡
__USE_XOPEN2K


60 
	#_XOPEN_VERSION
 600

	)

61 #ñi‡
deföed
 
__USE_UNIX98


62 
	#_XOPEN_VERSION
 500

	)

64 
	#_XOPEN_VERSION
 4

	)

68 
	#_XOPEN_XCU_VERSION
 4

	)

71 
	#_XOPEN_XPG2
 1

	)

72 
	#_XOPEN_XPG3
 1

	)

73 
	#_XOPEN_XPG4
 1

	)

76 
	#_XOPEN_UNIX
 1

	)

79 
	#_XOPEN_CRYPT
 1

	)

83 
	#_XOPEN_ENH_I18N
 1

	)

86 
	#_XOPEN_LEGACY
 1

	)

173 
	~<bôs/posix_›t.h
>

176 #ifde‡
__USE_UNIX98


177 
	~<bôs/ívú⁄míts.h
>

181 
	#STDIN_FILENO
 0

	)

182 
	#STDOUT_FILENO
 1

	)

183 
	#STDERR_FILENO
 2

	)

188 
	~<bôs/ty≥s.h
>

190 #i‚def 
__ssize_t_deföed


191 
__ssize_t
 
	tssize_t
;

192 
	#__ssize_t_deföed


	)

195 
	#__√ed_size_t


	)

196 
	#__√ed_NULL


	)

197 
	~<°ddef.h
>

199 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


202 #i‚de‡
__gid_t_deföed


203 
__gid_t
 
	tgid_t
;

204 
	#__gid_t_deföed


	)

207 #i‚de‡
__uid_t_deföed


208 
__uid_t
 
	tuid_t
;

209 
	#__uid_t_deföed


	)

212 #i‚de‡
__off_t_deföed


213 #i‚de‡
__USE_FILE_OFFSET64


214 
__off_t
 
	toff_t
;

216 
__off64_t
 
	toff_t
;

218 
	#__off_t_deföed


	)

220 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


221 
__off64_t
 
	toff64_t
;

222 
	#__off64_t_deföed


	)

225 #i‚de‡
__u£c⁄ds_t_deföed


226 
__u£c⁄ds_t
 
	tu£c⁄ds_t
;

227 
	#__u£c⁄ds_t_deföed


	)

230 #i‚de‡
__pid_t_deföed


231 
__pid_t
 
	tpid_t
;

232 
	#__pid_t_deföed


	)

236 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


237 #i‚de‡
__öçå_t_deföed


238 
__öçå_t
 
	töçå_t
;

239 
	#__öçå_t_deföed


	)

243 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN


244 #i‚de‡
__sockÀn_t_deföed


245 
__sockÀn_t
 
	tsockÀn_t
;

246 
	#__sockÀn_t_deföed


	)

252 
	#R_OK
 4

	)

253 
	#W_OK
 2

	)

254 
	#X_OK
 1

	)

255 
	#F_OK
 0

	)

258 
	$ac˚ss
 (
__c⁄°
 *
__«me
, 
__ty≥
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

260 #ifde‡
__USE_GNU


263 
	$euidac˚ss
 (
__c⁄°
 *
__«me
, 
__ty≥
)

264 
__THROW
 
	`__n⁄nuŒ
 ((1));

267 
	$óc˚ss
 (
__c⁄°
 *
__«me
, 
__ty≥
)

268 
__THROW
 
	`__n⁄nuŒ
 ((1));

271 #ifde‡
__USE_ATFILE


275 
	$Ác˚sßt
 (
__fd
, 
__c⁄°
 *
__fûe
, 
__ty≥
, 
__Êag
)

276 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

281 #i‚def 
_STDIO_H


282 
	#SEEK_SET
 0

	)

283 
	#SEEK_CUR
 1

	)

284 
	#SEEK_END
 2

	)

287 #i‡
deföed
 
__USE_BSD
 && !deföed 
L_SET


289 
	#L_SET
 
SEEK_SET


	)

290 
	#L_INCR
 
SEEK_CUR


	)

291 
	#L_XTND
 
SEEK_END


	)

300 #i‚de‡
__USE_FILE_OFFSET64


301 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__whí˚
Ë
__THROW
;

303 #ifde‡
__REDIRECT_NTH


304 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

305 (
__fd
, 
__off64_t
 
__off£t
, 
__whí˚
),

306 
l£ek64
);

308 
	#l£ek
 
l£ek64


	)

311 #ifde‡
__USE_LARGEFILE64


312 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__whí˚
)

313 
__THROW
;

320 
	`˛o£
 (
__fd
);

327 
ssize_t
 
	$ªad
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
Ë
__wur
;

333 
ssize_t
 
	$wrôe
 (
__fd
, 
__c⁄°
 *
__buf
, 
size_t
 
__n
Ë
__wur
;

335 #ifde‡
__USE_UNIX98


336 #i‚de‡
__USE_FILE_OFFSET64


343 
ssize_t
 
	$¥ód
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

344 
__off_t
 
__off£t
Ë
__wur
;

351 
ssize_t
 
	$pwrôe
 (
__fd
, 
__c⁄°
 *
__buf
, 
size_t
 
__n
,

352 
__off_t
 
__off£t
Ë
__wur
;

354 #ifde‡
__REDIRECT


355 
ssize_t
 
	`__REDIRECT
 (
¥ód
, (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

356 
__off64_t
 
__off£t
),

357 
¥ód64
Ë
__wur
;

358 
ssize_t
 
	`__REDIRECT
 (
pwrôe
, (
__fd
, 
__c⁄°
 *
__buf
,

359 
size_t
 
__nbyãs
, 
__off64_t
 
__off£t
),

360 
pwrôe64
Ë
__wur
;

362 
	#¥ód
 
¥ód64


	)

363 
	#pwrôe
 
pwrôe64


	)

367 #ifde‡
__USE_LARGEFILE64


371 
ssize_t
 
	$¥ód64
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

372 
__off64_t
 
__off£t
Ë
__wur
;

375 
ssize_t
 
	$pwrôe64
 (
__fd
, 
__c⁄°
 *
__buf
, 
size_t
 
__n
,

376 
__off64_t
 
__off£t
Ë
__wur
;

384 
	$pùe
 (
__pùedes
[2]Ë
__THROW
 
__wur
;

393 
	$Æ¨m
 (
__£c⁄ds
Ë
__THROW
;

405 
	`¶ìp
 (
__£c⁄ds
);

407 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


412 
__u£c⁄ds_t
 
	$uÆ¨m
 (
__u£c⁄ds_t
 
__vÆue
, __u£c⁄ds_à
__öãrvÆ
)

413 
__THROW
;

420 
	`u¶ìp
 (
__u£c⁄ds_t
 
__u£c⁄ds
);

429 
	`∑u£
 ();

433 
	$chown
 (
__c⁄°
 *
__fûe
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
)

434 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

436 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


438 
	$fchown
 (
__fd
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
Ë
__THROW
 
__wur
;

443 
	$lchown
 (
__c⁄°
 *
__fûe
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
)

444 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

448 #ifde‡
__USE_ATFILE


451 
	$fchow«t
 (
__fd
, 
__c⁄°
 *
__fûe
, 
__uid_t
 
__ow√r
,

452 
__gid_t
 
__group
, 
__Êag
)

453 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

457 
	$chdú
 (
__c⁄°
 *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

459 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


461 
	$fchdú
 (
__fd
Ë
__THROW
 
__wur
;

471 *
	$gëcwd
 (*
__buf
, 
size_t
 
__size
Ë
__THROW
 
__wur
;

473 #ifdef 
__USE_GNU


477 *
	$gë_cuºít_dú_«me
 (Ë
__THROW
;

480 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


484 *
	$gëwd
 (*
__buf
)

485 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__©åibuã_dïªˇãd__
 
__wur
;

490 
	$dup
 (
__fd
Ë
__THROW
 
__wur
;

493 
	$dup2
 (
__fd
, 
__fd2
Ë
__THROW
;

496 **
__ívú⁄
;

497 #ifde‡
__USE_GNU


498 **
ívú⁄
;

504 
	$execve
 (
__c⁄°
 *
__∑th
, *__c⁄° 
__¨gv
[],

505 *
__c⁄°
 
__ívp
[]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

507 #ifde‡
__USE_GNU


510 
	$„xecve
 (
__fd
, *
__c⁄°
 
__¨gv
[], *__c⁄° 
__ívp
[])

511 
__THROW
;

516 
	$execv
 (
__c⁄°
 *
__∑th
, *__c⁄° 
__¨gv
[])

517 
__THROW
 
	`__n⁄nuŒ
 ((1));

521 
	$exe˛e
 (
__c⁄°
 *
__∑th
, __c⁄° *
__¨g
, ...)

522 
__THROW
 
	`__n⁄nuŒ
 ((1));

526 
	$exe˛
 (
__c⁄°
 *
__∑th
, __c⁄° *
__¨g
, ...)

527 
__THROW
 
	`__n⁄nuŒ
 ((1));

531 
	$execvp
 (
__c⁄°
 *
__fûe
, *__c⁄° 
__¨gv
[])

532 
__THROW
 
	`__n⁄nuŒ
 ((1));

537 
	$exe˛p
 (
__c⁄°
 *
__fûe
, __c⁄° *
__¨g
, ...)

538 
__THROW
 
	`__n⁄nuŒ
 ((1));

541 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


543 
	$ni˚
 (
__öc
Ë
__THROW
 
__wur
;

548 
	$_exô
 (
__°©us
Ë
	`__©åibuã__
 ((
__n‹ëu∫__
));

554 
	~<bôs/c⁄‚ame.h
>

557 
	$∑thc⁄f
 (
__c⁄°
 *
__∑th
, 
__«me
)

558 
__THROW
 
	`__n⁄nuŒ
 ((1));

561 
	$Â©hc⁄f
 (
__fd
, 
__«me
Ë
__THROW
;

564 
	$sysc⁄f
 (
__«me
Ë
__THROW
;

566 #ifdef 
__USE_POSIX2


568 
size_t
 
	$c⁄f°r
 (
__«me
, *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

573 
__pid_t
 
	$gëpid
 (Ë
__THROW
;

576 
__pid_t
 
	$gëµid
 (Ë
__THROW
;

580 #i‚de‡
__FAVOR_BSD


581 
__pid_t
 
	$gëpgΩ
 (Ë
__THROW
;

583 #ifde‡
__REDIRECT_NTH


584 
__pid_t
 
	`__REDIRECT_NTH
 (
gëpgΩ
, (__pid_à
__pid
), 
__gëpgid
);

586 
	#gëpgΩ
 
__gëpgid


	)

591 
__pid_t
 
	$__gëpgid
 (
__pid_t
 
__pid
Ë
__THROW
;

592 #ifde‡
__USE_XOPEN_EXTENDED


593 
__pid_t
 
	$gëpgid
 (
__pid_t
 
__pid
Ë
__THROW
;

600 
	$£çgid
 (
__pid_t
 
__pid
, __pid_à
__pgid
Ë
__THROW
;

602 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


613 #i‚de‡
__FAVOR_BSD


617 
	$£çgΩ
 (Ë
__THROW
;

622 #ifde‡
__REDIRECT_NTH


623 
	`__REDIRECT_NTH
 (
£çgΩ
, (
__pid_t
 
__pid
, __pid_à
__pgΩ
), 
£çgid
);

625 
	#£çgΩ
 
£çgid


	)

634 
__pid_t
 
	$£tsid
 (Ë
__THROW
;

636 #ifde‡
__USE_XOPEN_EXTENDED


638 
__pid_t
 
	$gësid
 (
__pid_t
 
__pid
Ë
__THROW
;

642 
__uid_t
 
	$gëuid
 (Ë
__THROW
;

645 
__uid_t
 
	$gëeuid
 (Ë
__THROW
;

648 
__gid_t
 
	$gëgid
 (Ë
__THROW
;

651 
__gid_t
 
	$gëegid
 (Ë
__THROW
;

656 
	$gëgroups
 (
__size
, 
__gid_t
 
__li°
[]Ë
__THROW
 
__wur
;

658 #ifdef 
__USE_GNU


660 
	$group_membî
 (
__gid_t
 
__gid
Ë
__THROW
;

667 
	$£tuid
 (
__uid_t
 
__uid
Ë
__THROW
;

669 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


672 
	$£åeuid
 (
__uid_t
 
__ruid
, __uid_à
__euid
Ë
__THROW
;

675 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


677 
	$£ãuid
 (
__uid_t
 
__uid
Ë
__THROW
;

684 
	$£tgid
 (
__gid_t
 
__gid
Ë
__THROW
;

686 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


689 
	$£åegid
 (
__gid_t
 
__rgid
, __gid_à
__egid
Ë
__THROW
;

692 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


694 
	$£ãgid
 (
__gid_t
 
__gid
Ë
__THROW
;

697 #ifde‡
__USE_GNU


700 
	$gëªsuid
 (
__uid_t
 *
__ruid
, __uid_à*
__euid
, __uid_à*
__suid
)

701 
__THROW
;

705 
	$gëªsgid
 (
__gid_t
 *
__rgid
, __gid_à*
__egid
, __gid_à*
__sgid
)

706 
__THROW
;

710 
	$£åesuid
 (
__uid_t
 
__ruid
, __uid_à
__euid
, __uid_à
__suid
)

711 
__THROW
;

715 
	$£åesgid
 (
__gid_t
 
__rgid
, __gid_à
__egid
, __gid_à
__sgid
)

716 
__THROW
;

723 
__pid_t
 
	$f‹k
 (Ë
__THROW
;

725 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


730 
__pid_t
 
	$vf‹k
 (Ë
__THROW
;

736 *
	$ây«me
 (
__fd
Ë
__THROW
;

740 
	$ây«me_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
)

741 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

745 
	$ißây
 (
__fd
Ë
__THROW
;

747 #i‡
deföed
 
__USE_BSD
 \

748 || (
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_UNIX98
)

751 
	$ây¶Ÿ
 (Ë
__THROW
;

756 
	$lök
 (
__c⁄°
 *
__‰om
, __c⁄° *
__to
)

757 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

759 #ifde‡
__USE_ATFILE


762 
	$lök©
 (
__‰omfd
, 
__c⁄°
 *
__‰om
, 
__tofd
,

763 
__c⁄°
 *
__to
, 
__Êags
)

764 
__THROW
 
	`__n⁄nuŒ
 ((2, 4)Ë
__wur
;

767 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


769 
	$symlök
 (
__c⁄°
 *
__‰om
, __c⁄° *
__to
)

770 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

775 
ssize_t
 
	$ªadlök
 (
__c⁄°
 *
__ª°ri˘
 
__∑th
,

776 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

777 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

780 #ifde‡
__USE_ATFILE


782 
	$symlök©
 (
__c⁄°
 *
__‰om
, 
__tofd
,

783 
__c⁄°
 *
__to
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 3)Ë
__wur
;

786 
ssize_t
 
	$ªadlök©
 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__∑th
,

787 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

788 
__THROW
 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
;

792 
	$u∆ök
 (
__c⁄°
 *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

794 #ifde‡
__USE_ATFILE


796 
	$u∆ök©
 (
__fd
, 
__c⁄°
 *
__«me
, 
__Êag
)

797 
__THROW
 
	`__n⁄nuŒ
 ((2));

801 
	$rmdú
 (
__c⁄°
 *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

805 
__pid_t
 
	$tcgëpgΩ
 (
__fd
Ë
__THROW
;

808 
	$tc£çgΩ
 (
__fd
, 
__pid_t
 
__pgΩ_id
Ë
__THROW
;

815 *
	`gëlogö
 ();

816 #i‡
deföed
 
__USE_REENTRANT
 || deföed 
__USE_POSIX199506


823 
	$gëlogö_r
 (*
__«me
, 
size_t
 
__«me_Àn
Ë
	`__n⁄nuŒ
 ((1));

826 #ifdef 
__USE_BSD


828 
	$£éogö
 (
__c⁄°
 *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

832 #ifdef 
__USE_POSIX2


836 
	#__√ed_gë›t


	)

837 
	~<gë›t.h
>

841 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_UNIX98


845 
	$gëho°«me
 (*
__«me
, 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

849 #i‡
deföed
 
__USE_BSD
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_UNIX98
)

852 
	$£tho°«me
 (
__c⁄°
 *
__«me
, 
size_t
 
__Àn
)

853 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

857 
	$£tho°id
 (
__id
Ë
__THROW
 
__wur
;

863 
	$gëdomaö«me
 (*
__«me
, 
size_t
 
__Àn
)

864 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

865 
	$£tdomaö«me
 (
__c⁄°
 *
__«me
, 
size_t
 
__Àn
)

866 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

872 
	$vh™gup
 (Ë
__THROW
;

875 
	$ªvoke
 (
__c⁄°
 *
__fûe
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

883 
	$¥ofû
 (*
__ßm∂e_buf„r
, 
size_t
 
__size
,

884 
size_t
 
__off£t
, 
__sˇÀ
)

885 
__THROW
 
	`__n⁄nuŒ
 ((1));

891 
	$ac˘
 (
__c⁄°
 *
__«me
Ë
__THROW
;

895 *
	$gëu£rshñl
 (Ë
__THROW
;

896 
	$ídu£rshñl
 (Ë
__THROW
;

897 
	$£tu£rshñl
 (Ë
__THROW
;

903 
	$d´m⁄
 (
__nochdú
, 
__no˛o£
Ë
__THROW
 
__wur
;

907 #i‡
deföed
 
__USE_BSD
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

910 
	$chroŸ
 (
__c⁄°
 *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

914 *
	$gë∑ss
 (
__c⁄°
 *
__¥om±
Ë
	`__n⁄nuŒ
 ((1));

918 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN


923 
	`fsync
 (
__fd
);

927 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


930 
	`gëho°id
 ();

933 
	$sync
 (Ë
__THROW
;

938 
	$gë∑gesize
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

943 
	$gëdèbÀsize
 (Ë
__THROW
;

947 #i‚de‡
__USE_FILE_OFFSET64


948 
	$åunˇã
 (
__c⁄°
 *
__fûe
, 
__off_t
 
__Àngth
)

949 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

951 #ifde‡
__REDIRECT_NTH


952 
	`__REDIRECT_NTH
 (
åunˇã
,

953 (
__c⁄°
 *
__fûe
, 
__off64_t
 
__Àngth
),

954 
åunˇã64
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

956 
	#åunˇã
 
åunˇã64


	)

959 #ifde‡
__USE_LARGEFILE64


960 
	$åunˇã64
 (
__c⁄°
 *
__fûe
, 
__off64_t
 
__Àngth
)

961 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

966 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


969 #i‚de‡
__USE_FILE_OFFSET64


970 
	$·runˇã
 (
__fd
, 
__off_t
 
__Àngth
Ë
__THROW
 
__wur
;

972 #ifde‡
__REDIRECT_NTH


973 
	`__REDIRECT_NTH
 (
·runˇã
, (
__fd
, 
__off64_t
 
__Àngth
),

974 
·runˇã64
Ë
__wur
;

976 
	#·runˇã
 
·runˇã64


	)

979 #ifde‡
__USE_LARGEFILE64


980 
	$·runˇã64
 (
__fd
, 
__off64_t
 
__Àngth
Ë
__THROW
 
__wur
;

986 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


990 
	$brk
 (*
__addr
Ë
__THROW
 
__wur
;

996 *
	$sbrk
 (
öçå_t
 
__dñè
Ë
__THROW
;

1000 #ifde‡
__USE_MISC


1011 
	$sysˇŒ
 (
__sy¢o
, ...Ë
__THROW
;

1016 #i‡(
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
Ë&& !deföed 
F_LOCK


1028 
	#F_ULOCK
 0

	)

1029 
	#F_LOCK
 1

	)

1030 
	#F_TLOCK
 2

	)

1031 
	#F_TEST
 3

	)

1033 #i‚de‡
__USE_FILE_OFFSET64


1034 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Àn
Ë
__wur
;

1036 #ifde‡
__REDIRECT


1037 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
),

1038 
lockf64
Ë
__wur
;

1040 
	#lockf
 
lockf64


	)

1043 #ifde‡
__USE_LARGEFILE64


1044 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
Ë
__wur
;

1049 #ifde‡
__USE_GNU


1054 
	#TEMP_FAILURE_RETRY
(
ex¥essi⁄
) \

1055 (
__exãnsi⁄__
 \

1056 ({ 
__ªsu…
; \

1057 dÿ
__ªsu…
 = (Ë(
ex¥essi⁄
); \

1058 
__ªsu…
 =-1L && 
î∫o
 =
EINTR
); \

1059 
__ªsu…
; 
	}
}))

	)

1062 #i‡
deföed
 
__USE_POSIX199309
 || deföed 
__USE_UNIX98


1065 
fd©async
 (
__fûdes
);

1071 #ifdef 
__USE_XOPEN


1073 *
	$¸y±
 (
__c⁄°
 *
__key
, __c⁄° *
__ß…
)

1074 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1078 
	$í¸y±
 (*
__block
, 
__edÊag
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

1085 
	$swab
 (
__c⁄°
 *
__ª°ri˘
 
__‰om
, *__ª°ri˘ 
__to
,

1086 
ssize_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1092 #ifde‡
__USE_XOPEN


1094 *
	$˘îmid
 (*
__s
Ë
__THROW
;

1099 #i‡
__USE_FORTIFY_LEVEL
 > 0 && !
deföed
 
__˝lu•lus


1100 
	~<bôs/uni°d.h
>

1103 
__END_DECLS


	@/usr/include/utmp.h

19 #i‚def 
_UTMP_H


20 
	#_UTMP_H
 1

	)

22 
	~<„©uªs.h
>

24 
	~<sys/ty≥s.h
>

27 
	g__BEGIN_DECLS


30 
	~<bôs/utmp.h
>

33 
	#UTMP_FILE
 
_PATH_UTMP


	)

34 
	#UTMP_FILENAME
 
_PATH_UTMP


	)

35 
	#WTMP_FILE
 
_PATH_WTMP


	)

36 
	#WTMP_FILENAME
 
_PATH_WTMP


	)

42 
	$logö_ây
 (
__fd
Ë
__THROW
;

46 
	$logö
 (
__c⁄°
 
utmp
 *
__íåy
Ë
__THROW
;

49 
	$logout
 (
__c⁄°
 *
__ut_löe
Ë
__THROW
;

52 
	$logwtmp
 (
__c⁄°
 *
__ut_löe
, __c⁄° *
__ut_«me
,

53 
__c⁄°
 *
__ut_ho°
Ë
__THROW
;

56 
	$updwtmp
 (
__c⁄°
 *
__wtmp_fûe
, __c⁄° 
utmp
 *
__utmp
)

57 
__THROW
;

60 
	$utm≤ame
 (
__c⁄°
 *
__fûe
Ë
__THROW
;

63 
utmp
 *
	$gëuã¡
 (Ë
__THROW
;

66 
	$£tuã¡
 (Ë
__THROW
;

69 
	$íduã¡
 (Ë
__THROW
;

73 
utmp
 *
	$gëutid
 (
__c⁄°
 
utmp
 *
__id
Ë
__THROW
;

77 
utmp
 *
	$gëuéöe
 (
__c⁄°
 
utmp
 *
__löe
Ë
__THROW
;

80 
utmp
 *
	$putuéöe
 (
__c⁄°
 
utmp
 *
__utmp_±r
Ë
__THROW
;

83 #ifdef 
__USE_MISC


85 
	$gëuã¡_r
 (
utmp
 *
__buf„r
, utm∞**
__ªsu…
Ë
__THROW
;

87 
	$gëutid_r
 (
__c⁄°
 
utmp
 *
__id
, utm∞*
__buf„r
,

88 
utmp
 **
__ªsu…
Ë
__THROW
;

90 
	$gëuéöe_r
 (
__c⁄°
 
utmp
 *
__löe
,

91 
utmp
 *
__buf„r
, utm∞**
__ªsu…
Ë
__THROW
;

95 
__END_DECLS


	@/usr/include/values.h

23 #i‚def 
_VALUES_H


24 
	#_VALUES_H
 1

	)

26 
	~<„©uªs.h
>

28 
	~<limôs.h
>

30 
	#_TYPEBITS
(
ty≥
Ë( (ty≥Ë* 
CHAR_BIT
)

	)

32 
	#CHARBITS
 
	`_TYPEBITS
 ()

	)

33 
	#SHORTBITS
 
	`_TYPEBITS
 ()

	)

34 
	#INTBITS
 
	`_TYPEBITS
 ()

	)

35 
	#LONGBITS
 
	`_TYPEBITS
 ()

	)

36 
	#PTRBITS
 
	`_TYPEBITS
 (*)

	)

37 
	#DOUBLEBITS
 
	`_TYPEBITS
 ()

	)

38 
	#FLOATBITS
 
	`_TYPEBITS
 ()

	)

40 
	#MINSHORT
 
SHRT_MIN


	)

41 
	#MININT
 
INT_MIN


	)

42 
	#MINLONG
 
LONG_MIN


	)

44 
	#MAXSHORT
 
SHRT_MAX


	)

45 
	#MAXINT
 
INT_MAX


	)

46 
	#MAXLONG
 
LONG_MAX


	)

48 
	#HIBITS
 
MINSHORT


	)

49 
	#HIBITL
 
MINLONG


	)

52 
	~<Êﬂt.h
>

54 
	#MAXDOUBLE
 
DBL_MAX


	)

55 
	#MAXFLOAT
 
FLT_MAX


	)

56 
	#MINDOUBLE
 
DBL_MIN


	)

57 
	#MINFLOAT
 
FLT_MIN


	)

58 
	#DMINEXP
 
DBL_MIN_EXP


	)

59 
	#FMINEXP
 
FLT_MIN_EXP


	)

60 
	#DMAXEXP
 
DBL_MAX_EXP


	)

61 
	#FMAXEXP
 
FLT_MAX_EXP


	)

64 #ifde‡
__USE_MISC


66 
	#BITSPERBYTE
 
CHAR_BIT


	)

	@/usr/include/zlib.h

31 #i‚de‡
ZLIB_H


32 
	#ZLIB_H


	)

34 
	~"zc⁄f.h
"

36 #ifde‡
__˝lu•lus


40 
	#ZLIB_VERSION
 "1.2.3.3"

	)

41 
	#ZLIB_VERNUM
 0x1233

	)

42 
	#ZLIB_VER_MAJOR
 1

	)

43 
	#ZLIB_VER_MINOR
 2

	)

44 
	#ZLIB_VER_REVISION
 3

	)

80 
voidpf
 (*
	tÆloc_func
Ë
	tOF
((
	tvoidpf
 
	t›aque
, 
	tuI¡
 
	tôems
, uI¡ 
	tsize
));

81 (*
‰ì_func
Ë
	tOF
((
	tvoidpf
 
	t›aque
, voidp‡
	taddªss
));

83 
öã∫Æ_°©e
;

85 
	sz_°ªam_s
 {

86 
Byãf
 *
√xt_ö
;

87 
uI¡
 
avaû_ö
;

88 
uL⁄g
 
tŸÆ_ö
;

90 
Byãf
 *
√xt_out
;

91 
uI¡
 
avaû_out
;

92 
uL⁄g
 
tŸÆ_out
;

94 *
msg
;

95 
öã∫Æ_°©e
 
FAR
 *
°©e
;

97 
Æloc_func
 
zÆloc
;

98 
‰ì_func
 
z‰ì
;

99 
voidpf
 
›aque
;

101 
d©a_ty≥
;

102 
uL⁄g
 
adÀr
;

103 
uL⁄g
 
ª£rved
;

104 } 
	tz_°ªam
;

106 
z_°ªam
 
	tFAR
 *
	tz_°ªamp
;

112 
	sgz_hódî_s
 {

113 
ãxt
;

114 
uL⁄g
 
time
;

115 
xÊags
;

116 
os
;

117 
Byãf
 *
exåa
;

118 
uI¡
 
exåa_Àn
;

119 
uI¡
 
exåa_max
;

120 
Byãf
 *
«me
;

121 
uI¡
 
«me_max
;

122 
Byãf
 *
commít
;

123 
uI¡
 
comm_max
;

124 
h¸c
;

125 
d⁄e
;

127 } 
	tgz_hódî
;

129 
gz_hódî
 
	tFAR
 *
	tgz_hódîp
;

165 
	#Z_NO_FLUSH
 0

	)

166 
	#Z_PARTIAL_FLUSH
 1

	)

167 
	#Z_SYNC_FLUSH
 2

	)

168 
	#Z_FULL_FLUSH
 3

	)

169 
	#Z_FINISH
 4

	)

170 
	#Z_BLOCK
 5

	)

173 
	#Z_OK
 0

	)

174 
	#Z_STREAM_END
 1

	)

175 
	#Z_NEED_DICT
 2

	)

176 
	#Z_ERRNO
 (-1)

	)

177 
	#Z_STREAM_ERROR
 (-2)

	)

178 
	#Z_DATA_ERROR
 (-3)

	)

179 
	#Z_MEM_ERROR
 (-4)

	)

180 
	#Z_BUF_ERROR
 (-5)

	)

181 
	#Z_VERSION_ERROR
 (-6)

	)

186 
	#Z_NO_COMPRESSION
 0

	)

187 
	#Z_BEST_SPEED
 1

	)

188 
	#Z_BEST_COMPRESSION
 9

	)

189 
	#Z_DEFAULT_COMPRESSION
 (-1)

	)

192 
	#Z_FILTERED
 1

	)

193 
	#Z_HUFFMAN_ONLY
 2

	)

194 
	#Z_RLE
 3

	)

195 
	#Z_FIXED
 4

	)

196 
	#Z_DEFAULT_STRATEGY
 0

	)

199 
	#Z_BINARY
 0

	)

200 
	#Z_TEXT
 1

	)

201 
	#Z_ASCII
 
Z_TEXT


	)

202 
	#Z_UNKNOWN
 2

	)

205 
	#Z_DEFLATED
 8

	)

208 
	#Z_NULL
 0

	)

210 
	#zlib_vîsi⁄
 
	`zlibVîsi⁄
()

	)

215 
ZEXTERN
 c⁄° * 
ZEXPORT
 
zlibVîsi⁄
 
OF
(());

245 
ZEXTERN
 
ZEXPORT
 
deÊ©e
 
OF
((
z_°ªamp
 
°rm
, 
Êush
));

331 
ZEXTERN
 
ZEXPORT
 
deÊ©eEnd
 
OF
((
z_°ªamp
 
°rm
));

370 
ZEXTERN
 
ZEXPORT
 
öÊ©e
 
OF
((
z_°ªamp
 
°rm
, 
Êush
));

469 
ZEXTERN
 
ZEXPORT
 
öÊ©eEnd
 
OF
((
z_°ªamp
 
°rm
));

545 
ZEXTERN
 
ZEXPORT
 
deÊ©eSëDi˘i⁄¨y
 
OF
((
z_°ªamp
 
°rm
,

546 c⁄° 
Byãf
 *
di˘i⁄¨y
,

547 
uI¡
 
di˘Lígth
));

584 
ZEXTERN
 
ZEXPORT
 
deÊ©eC›y
 
OF
((
z_°ªamp
 
de°
,

585 
z_°ªamp
 
sour˚
));

602 
ZEXTERN
 
ZEXPORT
 
deÊ©eRe£t
 
OF
((
z_°ªamp
 
°rm
));

613 
ZEXTERN
 
ZEXPORT
 
deÊ©eP¨ams
 
OF
((
z_°ªamp
 
°rm
,

614 
Àvñ
,

615 
°øãgy
));

634 
ZEXTERN
 
ZEXPORT
 
deÊ©eTu√
 
OF
((
z_°ªamp
 
°rm
,

635 
good_Àngth
,

636 
max_œzy
,

637 
ni˚_Àngth
,

638 
max_chaö
));

651 
ZEXTERN
 
uL⁄g
 
ZEXPORT
 
deÊ©eBound
 
OF
((
z_°ªamp
 
°rm
,

652 
uL⁄g
 
sour˚Lí
));

661 
ZEXTERN
 
ZEXPORT
 
deÊ©ePrime
 
OF
((
z_°ªamp
 
°rm
,

662 
bôs
,

663 
vÆue
));

677 
ZEXTERN
 
ZEXPORT
 
deÊ©eSëHódî
 
OF
((
z_°ªamp
 
°rm
,

678 
gz_hódîp
 
hód
));

748 
ZEXTERN
 
ZEXPORT
 
öÊ©eSëDi˘i⁄¨y
 
OF
((
z_°ªamp
 
°rm
,

749 c⁄° 
Byãf
 *
di˘i⁄¨y
,

750 
uI¡
 
di˘Lígth
));

770 
ZEXTERN
 
ZEXPORT
 
öÊ©eSync
 
OF
((
z_°ªamp
 
°rm
));

785 
ZEXTERN
 
ZEXPORT
 
öÊ©eC›y
 
OF
((
z_°ªamp
 
de°
,

786 
z_°ªamp
 
sour˚
));

801 
ZEXTERN
 
ZEXPORT
 
öÊ©eRe£t
 
OF
((
z_°ªamp
 
°rm
));

811 
ZEXTERN
 
ZEXPORT
 
öÊ©ePrime
 
OF
((
z_°ªamp
 
°rm
,

812 
bôs
,

813 
vÆue
));

827 
ZEXTERN
 
ZEXPORT
 
öÊ©eGëHódî
 
OF
((
z_°ªamp
 
°rm
,

828 
gz_hódîp
 
hód
));

889 (*
ö_func
Ë
	tOF
((
	tFAR
 *, FAR * FAR *));

890 (*
out_func
Ë
	tOF
((
	tFAR
 *, FAR *, ));

892 
ZEXTERN
 
ZEXPORT
 
öÊ©eBack
 
OF
((
z_°ªamp
 
°rm
,

893 
ö_func
 
ö
, 
FAR
 *
ö_desc
,

894 
out_func
 
out
, 
FAR
 *
out_desc
));

961 
ZEXTERN
 
ZEXPORT
 
öÊ©eBackEnd
 
OF
((
z_°ªamp
 
°rm
));

969 
ZEXTERN
 
uL⁄g
 
ZEXPORT
 
zlibCompûeFœgs
 
OF
(());

1021 
ZEXTERN
 
ZEXPORT
 
com¥ess
 
OF
((
Byãf
 *
de°
, 
uL⁄gf
 *
de°Lí
,

1022 c⁄° 
Byãf
 *
sour˚
, 
uL⁄g
 
sour˚Lí
));

1036 
ZEXTERN
 
ZEXPORT
 
com¥ess2
 
OF
((
Byãf
 *
de°
, 
uL⁄gf
 *
de°Lí
,

1037 c⁄° 
Byãf
 *
sour˚
, 
uL⁄g
 
sour˚Lí
,

1038 
Àvñ
));

1052 
ZEXTERN
 
uL⁄g
 
ZEXPORT
 
com¥essBound
 
OF
((uL⁄g 
sour˚Lí
));

1059 
ZEXTERN
 
ZEXPORT
 
uncom¥ess
 
OF
((
Byãf
 *
de°
, 
uL⁄gf
 *
de°Lí
,

1060 c⁄° 
Byãf
 *
sour˚
, 
uL⁄g
 
sour˚Lí
));

1078 
voidp
 
	tgzFûe
;

1098 
ZEXTERN
 
gzFûe
 
ZEXPORT
 
gzd›í
 
OF
((
fd
, c⁄° *
mode
));

1111 
ZEXTERN
 
ZEXPORT
 
gz£ç¨ams
 
OF
((
gzFûe
 
fûe
, 
Àvñ
, 
°øãgy
));

1119 
ZEXTERN
 
ZEXPORT
 
gzªad
 
OF
((
gzFûe
 
fûe
, 
voidp
 
buf
, 
Àn
));

1127 
ZEXTERN
 
ZEXPORT
 
gzwrôe
 
OF
((
gzFûe
 
fûe
,

1128 
voidpc
 
buf
, 
Àn
));

1135 
ZEXTERN
 
ZEXPORTVA
 
gz¥ötf
 
OF
((
gzFûe
 
fûe
, c⁄° *
f‹m©
, ...));

1148 
ZEXTERN
 
ZEXPORT
 
gzputs
 
OF
((
gzFûe
 
fûe
, c⁄° *
s
));

1155 
ZEXTERN
 * 
ZEXPORT
 
gzgës
 
OF
((
gzFûe
 
fûe
, *
buf
, 
Àn
));

1164 
ZEXTERN
 
ZEXPORT
 
gzputc
 
OF
((
gzFûe
 
fûe
, 
c
));

1170 
ZEXTERN
 
ZEXPORT
 
gzgëc
 
OF
((
gzFûe
 
fûe
));

1176 
ZEXTERN
 
ZEXPORT
 
gzungëc
 
OF
((
c
, 
gzFûe
 
fûe
));

1186 
ZEXTERN
 
ZEXPORT
 
gzÊush
 
OF
((
gzFûe
 
fûe
, 
Êush
));

1215 
ZEXTERN
 
ZEXPORT
 
gzªwöd
 
OF
((
gzFûe
 
fûe
));

1232 
ZEXTERN
 
ZEXPORT
 
gzeof
 
OF
((
gzFûe
 
fûe
));

1238 
ZEXTERN
 
ZEXPORT
 
gzdúe˘
 
OF
((
gzFûe
 
fûe
));

1244 
ZEXTERN
 
ZEXPORT
 
gz˛o£
 
OF
((
gzFûe
 
fûe
));

1252 
ZEXTERN
 c⁄° * 
ZEXPORT
 
gzîr‹
 
OF
((
gzFûe
 
fûe
, *
î∫um
));

1264 
ZEXTERN
 
ZEXPORT
 
gz˛óªº
 
OF
((
gzFûe
 
fûe
));

1279 
ZEXTERN
 
uL⁄g
 
ZEXPORT
 
adÀr32
 
OF
((uL⁄g 
adÀr
, c⁄° 
Byãf
 *
buf
, 
uI¡
 
Àn
));

1305 
ZEXTERN
 
uL⁄g
 
ZEXPORT
 
¸c32
 
OF
((uL⁄g 
¸c
, c⁄° 
Byãf
 *
buf
, 
uI¡
 
Àn
));

1337 
ZEXTERN
 
ZEXPORT
 
deÊ©eInô_
 
OF
((
z_°ªamp
 
°rm
, 
Àvñ
,

1338 c⁄° *
vîsi⁄
, 
°ªam_size
));

1339 
ZEXTERN
 
ZEXPORT
 
öÊ©eInô_
 
OF
((
z_°ªamp
 
°rm
,

1340 c⁄° *
vîsi⁄
, 
°ªam_size
));

1341 
ZEXTERN
 
ZEXPORT
 
deÊ©eInô2_
 
OF
((
z_°ªamp
 
°rm
, 
Àvñ
, 
mëhod
,

1342 
wödowBôs
, 
memLevñ
,

1343 
°øãgy
, c⁄° *
vîsi⁄
,

1344 
°ªam_size
));

1345 
ZEXTERN
 
ZEXPORT
 
öÊ©eInô2_
 
OF
((
z_°ªamp
 
°rm
, 
wödowBôs
,

1346 c⁄° *
vîsi⁄
, 
°ªam_size
));

1347 
ZEXTERN
 
ZEXPORT
 
öÊ©eBackInô_
 
OF
((
z_°ªamp
 
°rm
, 
wödowBôs
,

1348 
FAR
 *
wödow
,

1349 c⁄° *
vîsi⁄
,

1350 
°ªam_size
));

1351 
	#deÊ©eInô
(
°rm
, 
Àvñ
) \

1352 
	`deÊ©eInô_
((
°rm
), (
Àvñ
), 
ZLIB_VERSION
, (
z_°ªam
))

	)

1353 
	#öÊ©eInô
(
°rm
) \

1354 
	`öÊ©eInô_
((
°rm
), 
ZLIB_VERSION
, (
z_°ªam
))

	)

1355 
	#deÊ©eInô2
(
°rm
, 
Àvñ
, 
mëhod
, 
wödowBôs
, 
memLevñ
, 
°øãgy
) \

1356 
	`deÊ©eInô2_
((
°rm
),(
Àvñ
),(
mëhod
),(
wödowBôs
),(
memLevñ
),\

1357 (
°øãgy
), 
ZLIB_VERSION
, (
z_°ªam
))

	)

1358 
	#öÊ©eInô2
(
°rm
, 
wödowBôs
) \

1359 
	`öÊ©eInô2_
((
°rm
), (
wödowBôs
), 
ZLIB_VERSION
, (
z_°ªam
))

	)

1360 
	#öÊ©eBackInô
(
°rm
, 
wödowBôs
, 
wödow
) \

1361 
	`öÊ©eBackInô_
((
°rm
), (
wödowBôs
), (
wödow
), \

1362 
ZLIB_VERSION
, (
z_°ªam
))

	)

1364 #ifde‡
_LARGEFILE64_SOURCE


1365 
ZEXTERN
 
gzFûe
 
ZEXPORT
 
gz›í64
 
OF
((const *, const *));

1366 
ZEXTERN
 
off64_t
 
ZEXPORT
 
gz£ek64
 
OF
((
gzFûe
, off64_t, ));

1367 
ZEXTERN
 
off64_t
 
ZEXPORT
 
gzãŒ64
 
OF
((
gzFûe
));

1368 
ZEXTERN
 
uL⁄g
 
ZEXPORT
 
adÀr32_comböe64
 
OF
((uL⁄g, uL⁄g, 
off64_t
));

1369 
ZEXTERN
 
uL⁄g
 
ZEXPORT
 
¸c32_comböe64
 
OF
((uL⁄g, uL⁄g, 
off64_t
));

1372 #i‡
_FILE_OFFSET_BITS
 == 64

1373 
	#gz›í
 
gz›í64


	)

1374 
	#gz£ek
 
gz£ek64


	)

1375 
	#gzãŒ
 
gzãŒ64


	)

1376 
	#adÀr32_comböe
 
adÀr32_comböe64


	)

1377 
	#¸c32_comböe
 
¸c32_comböe64


	)

1379 
ZEXTERN
 
gzFûe
 
ZEXPORT
 
gz›í
 
OF
((const *, const *));

1380 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gz£ek
 
OF
((
gzFûe
, z_off_t, ));

1381 
ZEXTERN
 
z_off_t
 
ZEXPORT
 
gzãŒ
 
OF
((
gzFûe
));

1382 
ZEXTERN
 
uL⁄g
 
ZEXPORT
 
adÀr32_comböe
 
OF
((uL⁄g, uL⁄g, 
z_off_t
));

1383 
ZEXTERN
 
uL⁄g
 
ZEXPORT
 
¸c32_comböe
 
OF
((uL⁄g, uL⁄g, 
z_off_t
));

1386 #i‡!
deföed
(
ZUTIL_H
Ë&& !deföed(
NO_DUMMY_DECL
)

1387 
	söã∫Æ_°©e
 {
dummy
;};

1390 
ZEXTERN
 c⁄° * 
ZEXPORT
 
zEº‹
 
OF
(());

1391 
ZEXTERN
 
ZEXPORT
 
öÊ©eSyncPoöt
 
OF
((
z_°ªamp
));

1392 
ZEXTERN
 c⁄° 
uL⁄gf
 * 
ZEXPORT
 
gë_¸c_èbÀ
 
OF
(());

1393 
ZEXTERN
 
ZEXPORT
 
öÊ©eUndîmöe
 
OF
((
z_°ªamp
, ));

1395 #ifde‡
__˝lu•lus


	@/usr/include/X11/X.h

7 #i‚de‡
X_H


8 
	#X_H


	)

58 
	#X_PROTOCOL
 11

	)

59 
	#X_PROTOCOL_REVISION
 0

	)

68 #i‚de‡
_XSERVER64


69 #i‚de‡
_XTYPEDEF_XID


70 
	#_XTYPEDEF_XID


	)

71 
	tXID
;

73 #i‚de‡
_XTYPEDEF_MASK


74 
	#_XTYPEDEF_MASK


	)

75 
	tMask
;

77 #i‚de‡
_XTYPEDEF_ATOM


78 
	#_XTYPEDEF_ATOM


	)

79 
	tAtom
;

81 
	tVisuÆID
;

82 
	tTime
;

84 
	~<X11/Xmd.h
>

85 #i‚de‡
_XTYPEDEF_XID


86 
	#_XTYPEDEF_XID


	)

87 
CARD32
 
	tXID
;

89 #i‚de‡
_XTYPEDEF_MASK


90 
	#_XTYPEDEF_MASK


	)

91 
CARD32
 
	tMask
;

93 #i‚de‡
_XTYPEDEF_ATOM


94 
	#_XTYPEDEF_ATOM


	)

95 
CARD32
 
	tAtom
;

97 
CARD32
 
	tVisuÆID
;

98 
CARD32
 
	tTime
;

101 
XID
 
	tWödow
;

102 
XID
 
	tDøwabÀ
;

103 #i‚de‡
_XTYPEDEF_FONT


104 
	#_XTYPEDEF_FONT


	)

105 
XID
 
	tF⁄t
;

107 
XID
 
	tPixm≠
;

108 
XID
 
	tCurs‹
;

109 
XID
 
	tCﬁ‹m≠
;

110 
XID
 
	tGC⁄ãxt
;

111 
XID
 
	tKeySym
;

113 
	tKeyCode
;

119 #i‚de‡
N⁄e


120 
	#N⁄e
 0L

	)

123 
	#P¨ítRñ©ive
 1L

	)

126 
	#C›yFromP¨ít
 0L

	)

131 
	#PoöãrWödow
 0L

	)

132 
	#I≈utFocus
 1L

	)

134 
	#PoöãrRoŸ
 1L

	)

136 
	#AnyPr›îtyTy≥
 0L

	)

138 
	#AnyKey
 0L

	)

140 
	#AnyBuâ⁄
 0L

	)

142 
	#AŒTemp‹¨y
 0L

	)

144 
	#CuºítTime
 0L

	)

146 
	#NoSymbﬁ
 0L

	)

155 
	#NoEvítMask
 0L

	)

156 
	#KeyPªssMask
 (1L<<0)

	)

157 
	#KeyRñó£Mask
 (1L<<1)

	)

158 
	#Buâ⁄PªssMask
 (1L<<2)

	)

159 
	#Buâ⁄Rñó£Mask
 (1L<<3)

	)

160 
	#E¡îWödowMask
 (1L<<4)

	)

161 
	#LóveWödowMask
 (1L<<5)

	)

162 
	#PoöãrMŸi⁄Mask
 (1L<<6)

	)

163 
	#PoöãrMŸi⁄HötMask
 (1L<<7)

	)

164 
	#Buâ⁄1MŸi⁄Mask
 (1L<<8)

	)

165 
	#Buâ⁄2MŸi⁄Mask
 (1L<<9)

	)

166 
	#Buâ⁄3MŸi⁄Mask
 (1L<<10)

	)

167 
	#Buâ⁄4MŸi⁄Mask
 (1L<<11)

	)

168 
	#Buâ⁄5MŸi⁄Mask
 (1L<<12)

	)

169 
	#Buâ⁄MŸi⁄Mask
 (1L<<13)

	)

170 
	#Keym≠SèãMask
 (1L<<14)

	)

171 
	#ExposuªMask
 (1L<<15)

	)

172 
	#VisibûôyCh™geMask
 (1L<<16)

	)

173 
	#Såu˘uªNŸifyMask
 (1L<<17)

	)

174 
	#ResizeRedúe˘Mask
 (1L<<18)

	)

175 
	#Sub°ru˘uªNŸifyMask
 (1L<<19)

	)

176 
	#Sub°ru˘uªRedúe˘Mask
 (1L<<20)

	)

177 
	#FocusCh™geMask
 (1L<<21)

	)

178 
	#Pr›îtyCh™geMask
 (1L<<22)

	)

179 
	#Cﬁ‹m≠Ch™geMask
 (1L<<23)

	)

180 
	#Ow√rGøbBuâ⁄Mask
 (1L<<24)

	)

186 
	#KeyPªss
 2

	)

187 
	#KeyRñó£
 3

	)

188 
	#Buâ⁄Pªss
 4

	)

189 
	#Buâ⁄Rñó£
 5

	)

190 
	#MŸi⁄NŸify
 6

	)

191 
	#E¡îNŸify
 7

	)

192 
	#LóveNŸify
 8

	)

193 
	#FocusIn
 9

	)

194 
	#FocusOut
 10

	)

195 
	#Keym≠NŸify
 11

	)

196 
	#Expo£
 12

	)

197 
	#GøphicsExpo£
 13

	)

198 
	#NoExpo£
 14

	)

199 
	#VisibûôyNŸify
 15

	)

200 
	#Cª©eNŸify
 16

	)

201 
	#De°royNŸify
 17

	)

202 
	#Unm≠NŸify
 18

	)

203 
	#M≠NŸify
 19

	)

204 
	#M≠Reque°
 20

	)

205 
	#Rï¨ítNŸify
 21

	)

206 
	#C⁄figuªNŸify
 22

	)

207 
	#C⁄figuªReque°
 23

	)

208 
	#GøvôyNŸify
 24

	)

209 
	#ResizeReque°
 25

	)

210 
	#CúcuœãNŸify
 26

	)

211 
	#CúcuœãReque°
 27

	)

212 
	#Pr›îtyNŸify
 28

	)

213 
	#Sñe˘i⁄CÀ¨
 29

	)

214 
	#Sñe˘i⁄Reque°
 30

	)

215 
	#Sñe˘i⁄NŸify
 31

	)

216 
	#Cﬁ‹m≠NŸify
 32

	)

217 
	#Clõ¡Mesßge
 33

	)

218 
	#M≠pögNŸify
 34

	)

219 
	#LASTEvít
 35

	)

225 
	#Shi·Mask
 (1<<0)

	)

226 
	#LockMask
 (1<<1)

	)

227 
	#C⁄åﬁMask
 (1<<2)

	)

228 
	#Mod1Mask
 (1<<3)

	)

229 
	#Mod2Mask
 (1<<4)

	)

230 
	#Mod3Mask
 (1<<5)

	)

231 
	#Mod4Mask
 (1<<6)

	)

232 
	#Mod5Mask
 (1<<7)

	)

237 
	#Shi·M≠Index
 0

	)

238 
	#LockM≠Index
 1

	)

239 
	#C⁄åﬁM≠Index
 2

	)

240 
	#Mod1M≠Index
 3

	)

241 
	#Mod2M≠Index
 4

	)

242 
	#Mod3M≠Index
 5

	)

243 
	#Mod4M≠Index
 6

	)

244 
	#Mod5M≠Index
 7

	)

250 
	#Buâ⁄1Mask
 (1<<8)

	)

251 
	#Buâ⁄2Mask
 (1<<9)

	)

252 
	#Buâ⁄3Mask
 (1<<10)

	)

253 
	#Buâ⁄4Mask
 (1<<11)

	)

254 
	#Buâ⁄5Mask
 (1<<12)

	)

256 
	#AnyModifõr
 (1<<15Ë

	)

263 
	#Buâ⁄1
 1

	)

264 
	#Buâ⁄2
 2

	)

265 
	#Buâ⁄3
 3

	)

266 
	#Buâ⁄4
 4

	)

267 
	#Buâ⁄5
 5

	)

271 
	#NŸifyN‹mÆ
 0

	)

272 
	#NŸifyGøb
 1

	)

273 
	#NŸifyUngøb
 2

	)

274 
	#NŸifyWhûeGøbbed
 3

	)

276 
	#NŸifyHöt
 1

	)

280 
	#NŸifyAn˚°‹
 0

	)

281 
	#NŸifyVútuÆ
 1

	)

282 
	#NŸifyIn„ri‹
 2

	)

283 
	#NŸifyN⁄löór
 3

	)

284 
	#NŸifyN⁄löórVútuÆ
 4

	)

285 
	#NŸifyPoöãr
 5

	)

286 
	#NŸifyPoöãrRoŸ
 6

	)

287 
	#NŸifyDëaûN⁄e
 7

	)

291 
	#VisibûôyUnobscuªd
 0

	)

292 
	#VisibûôyP¨tüŒyObscuªd
 1

	)

293 
	#VisibûôyFuŒyObscuªd
 2

	)

297 
	#Pœ˚OnT›
 0

	)

298 
	#Pœ˚OnBŸtom
 1

	)

302 
	#FamûyI¡î√t
 0

	)

303 
	#FamûyDEC√t
 1

	)

304 
	#FamûyChaos
 2

	)

305 
	#FamûyI¡î√t6
 6

	)

308 
	#FamûySîvîI¡î¥ëed
 5

	)

312 
	#Pr›îtyNewVÆue
 0

	)

313 
	#Pr›îtyDñëe
 1

	)

317 
	#Cﬁ‹m≠Unö°ÆÀd
 0

	)

318 
	#Cﬁ‹m≠In°ÆÀd
 1

	)

322 
	#GøbModeSync
 0

	)

323 
	#GøbModeAsync
 1

	)

327 
	#GøbSuc˚ss
 0

	)

328 
	#AÃódyGøbbed
 1

	)

329 
	#GøbInvÆidTime
 2

	)

330 
	#GøbNŸVõwabÀ
 3

	)

331 
	#GøbFrozí
 4

	)

335 
	#AsyncPoöãr
 0

	)

336 
	#SyncPoöãr
 1

	)

337 
	#RïœyPoöãr
 2

	)

338 
	#AsyncKeybﬂrd
 3

	)

339 
	#SyncKeybﬂrd
 4

	)

340 
	#RïœyKeybﬂrd
 5

	)

341 
	#AsyncBŸh
 6

	)

342 
	#SyncBŸh
 7

	)

346 
	#RevîtToN⁄e
 ()
N⁄e


	)

347 
	#RevîtToPoöãrRoŸ
 ()
PoöãrRoŸ


	)

348 
	#RevîtToP¨ít
 2

	)

354 
	#Suc˚ss
 0

	)

355 
	#BadReque°
 1

	)

356 
	#BadVÆue
 2

	)

357 
	#BadWödow
 3

	)

358 
	#BadPixm≠
 4

	)

359 
	#BadAtom
 5

	)

360 
	#BadCurs‹
 6

	)

361 
	#BadF⁄t
 7

	)

362 
	#BadM©ch
 8

	)

363 
	#BadDøwabÀ
 9

	)

364 
	#BadAc˚ss
 10

	)

373 
	#BadAŒoc
 11

	)

374 
	#BadCﬁ‹
 12

	)

375 
	#BadGC
 13

	)

376 
	#BadIDChoi˚
 14

	)

377 
	#BadName
 15

	)

378 
	#BadLígth
 16

	)

379 
	#BadIm∂emíèti⁄
 17

	)

381 
	#Fú°Exãnsi⁄Eº‹
 128

	)

382 
	#La°Exãnsi⁄Eº‹
 255

	)

391 
	#I≈utOuçut
 1

	)

392 
	#I≈utO∆y
 2

	)

396 
	#CWBackPixm≠
 (1L<<0)

	)

397 
	#CWBackPixñ
 (1L<<1)

	)

398 
	#CWB‹dîPixm≠
 (1L<<2)

	)

399 
	#CWB‹dîPixñ
 (1L<<3)

	)

400 
	#CWBôGøvôy
 (1L<<4)

	)

401 
	#CWWöGøvôy
 (1L<<5)

	)

402 
	#CWBackögSt‹e
 (1L<<6)

	)

403 
	#CWBackögPœ√s
 (1L<<7)

	)

404 
	#CWBackögPixñ
 (1L<<8)

	)

405 
	#CWOvîrideRedúe˘
 (1L<<9)

	)

406 
	#CWSaveUndî
 (1L<<10)

	)

407 
	#CWEvítMask
 (1L<<11)

	)

408 
	#CWD⁄tPr›ag©e
 (1L<<12)

	)

409 
	#CWCﬁ‹m≠
 (1L<<13)

	)

410 
	#CWCurs‹
 (1L<<14)

	)

414 
	#CWX
 (1<<0)

	)

415 
	#CWY
 (1<<1)

	)

416 
	#CWWidth
 (1<<2)

	)

417 
	#CWHeight
 (1<<3)

	)

418 
	#CWB‹dîWidth
 (1<<4)

	)

419 
	#CWSiblög
 (1<<5)

	)

420 
	#CWSèckMode
 (1<<6)

	)

425 
	#F‹gëGøvôy
 0

	)

426 
	#N‹thWe°Gøvôy
 1

	)

427 
	#N‹thGøvôy
 2

	)

428 
	#N‹thEa°Gøvôy
 3

	)

429 
	#We°Gøvôy
 4

	)

430 
	#CíãrGøvôy
 5

	)

431 
	#Ea°Gøvôy
 6

	)

432 
	#SouthWe°Gøvôy
 7

	)

433 
	#SouthGøvôy
 8

	)

434 
	#SouthEa°Gøvôy
 9

	)

435 
	#SèticGøvôy
 10

	)

439 
	#Unm≠Gøvôy
 0

	)

443 
	#NŸU£ful
 0

	)

444 
	#WhíM≠≥d
 1

	)

445 
	#Always
 2

	)

449 
	#IsUnm≠≥d
 0

	)

450 
	#IsUnvõwabÀ
 1

	)

451 
	#IsVõwabÀ
 2

	)

455 
	#SëModeIn£π
 0

	)

456 
	#SëModeDñëe
 1

	)

460 
	#De°royAŒ
 0

	)

461 
	#RëaöPîm™ít
 1

	)

462 
	#RëaöTemp‹¨y
 2

	)

466 
	#Above
 0

	)

467 
	#Bñow
 1

	)

468 
	#T›If
 2

	)

469 
	#BŸtomIf
 3

	)

470 
	#Oµosôe
 4

	)

474 
	#Rai£Lowe°
 0

	)

475 
	#LowîHighe°
 1

	)

479 
	#Pr›ModeRïœ˚
 0

	)

480 
	#Pr›ModePª≥nd
 1

	)

481 
	#Pr›ModeAµíd
 2

	)

489 
	#GX˛ór
 0x0

	)

490 
	#GX™d
 0x1

	)

491 
	#GX™dRevî£
 0x2

	)

492 
	#GXc›y
 0x3

	)

493 
	#GX™dInvîãd
 0x4

	)

494 
	#GXno›
 0x5

	)

495 
	#GXx‹
 0x6

	)

496 
	#GX‹
 0x7

	)

497 
	#GXn‹
 0x8

	)

498 
	#GXequiv
 0x9

	)

499 
	#GXövît
 0x®

	)

500 
	#GX‹Revî£
 0xb

	)

501 
	#GXc›yInvîãd
 0x¯

	)

502 
	#GX‹Invîãd
 0xd

	)

503 
	#GX«nd
 0xê

	)

504 
	#GX£t
 0x‡

	)

508 
	#LöeSﬁid
 0

	)

509 
	#LöeOnOffDash
 1

	)

510 
	#LöeDoubÀDash
 2

	)

514 
	#C≠NŸLa°
 0

	)

515 
	#C≠Buâ
 1

	)

516 
	#C≠Round
 2

	)

517 
	#C≠Proje˘ög
 3

	)

521 
	#JoöMôî
 0

	)

522 
	#JoöRound
 1

	)

523 
	#JoöBevñ
 2

	)

527 
	#FûlSﬁid
 0

	)

528 
	#FûlTûed
 1

	)

529 
	#FûlStù∂ed
 2

	)

530 
	#FûlO∑queStù∂ed
 3

	)

534 
	#EvíOddRuÀ
 0

	)

535 
	#WödögRuÀ
 1

	)

539 
	#ClùByChûdªn
 0

	)

540 
	#In˛udeIn„ri‹s
 1

	)

544 
	#Uns‹ãd
 0

	)

545 
	#YS‹ãd
 1

	)

546 
	#YXS‹ãd
 2

	)

547 
	#YXB™ded
 3

	)

551 
	#Co‹dModeOrigö
 0

	)

552 
	#Co‹dModePªvious
 1

	)

556 
	#Com∂ex
 0

	)

557 
	#N⁄c⁄vex
 1

	)

558 
	#C⁄vex
 2

	)

562 
	#ArcCh‹d
 0

	)

563 
	#ArcPõSli˚
 1

	)

568 
	#GCFun˘i⁄
 (1L<<0)

	)

569 
	#GCPœ√Mask
 (1L<<1)

	)

570 
	#GCF‹eground
 (1L<<2)

	)

571 
	#GCBackground
 (1L<<3)

	)

572 
	#GCLöeWidth
 (1L<<4)

	)

573 
	#GCLöeStyÀ
 (1L<<5)

	)

574 
	#GCC≠StyÀ
 (1L<<6)

	)

575 
	#GCJoöStyÀ
 (1L<<7)

	)

576 
	#GCFûlStyÀ
 (1L<<8)

	)

577 
	#GCFûlRuÀ
 (1L<<9)

	)

578 
	#GCTûe
 (1L<<10)

	)

579 
	#GCStù∂e
 (1L<<11)

	)

580 
	#GCTûeStùXOrigö
 (1L<<12)

	)

581 
	#GCTûeStùYOrigö
 (1L<<13)

	)

582 
	#GCF⁄t
 (1L<<14)

	)

583 
	#GCSubwödowMode
 (1L<<15)

	)

584 
	#GCGøphicsExposuªs
 (1L<<16)

	)

585 
	#GCClùXOrigö
 (1L<<17)

	)

586 
	#GCClùYOrigö
 (1L<<18)

	)

587 
	#GCClùMask
 (1L<<19)

	)

588 
	#GCDashOff£t
 (1L<<20)

	)

589 
	#GCDashLi°
 (1L<<21)

	)

590 
	#GCArcMode
 (1L<<22)

	)

592 
	#GCLa°Bô
 22

	)

599 
	#F⁄tLe·ToRight
 0

	)

600 
	#F⁄tRightToLe·
 1

	)

602 
	#F⁄tCh™ge
 255

	)

610 
	#XYBôm≠
 0

	)

611 
	#XYPixm≠
 1

	)

612 
	#ZPixm≠
 2

	)

620 
	#AŒocN⁄e
 0

	)

621 
	#AŒocAŒ
 1

	)

626 
	#DoRed
 (1<<0)

	)

627 
	#DoGªí
 (1<<1)

	)

628 
	#DoBlue
 (1<<2)

	)

636 
	#Curs‹Sh≠e
 0

	)

637 
	#TûeSh≠e
 1

	)

638 
	#Stù∂eSh≠e
 2

	)

644 
	#AutoRïótModeOff
 0

	)

645 
	#AutoRïótModeOn
 1

	)

646 
	#AutoRïótModeDeÁu…
 2

	)

648 
	#LedModeOff
 0

	)

649 
	#LedModeOn
 1

	)

653 
	#KBKeyClickPî˚¡
 (1L<<0)

	)

654 
	#KBBñlPî˚¡
 (1L<<1)

	)

655 
	#KBBñlPôch
 (1L<<2)

	)

656 
	#KBBñlDuøti⁄
 (1L<<3)

	)

657 
	#KBLed
 (1L<<4)

	)

658 
	#KBLedMode
 (1L<<5)

	)

659 
	#KBKey
 (1L<<6)

	)

660 
	#KBAutoRïótMode
 (1L<<7)

	)

662 
	#M≠pögSuc˚ss
 0

	)

663 
	#M≠pögBusy
 1

	)

664 
	#M≠pögFaûed
 2

	)

666 
	#M≠pögModifõr
 0

	)

667 
	#M≠pögKeybﬂrd
 1

	)

668 
	#M≠pögPoöãr
 2

	)

674 
	#D⁄tPª„rBœnkög
 0

	)

675 
	#Pª„rBœnkög
 1

	)

676 
	#DeÁu…Bœnkög
 2

	)

678 
	#DißbÀS¸ìnSavî
 0

	)

679 
	#DißbÀS¸ìnI¡îvÆ
 0

	)

681 
	#D⁄tAŒowExposuªs
 0

	)

682 
	#AŒowExposuªs
 1

	)

683 
	#DeÁu…Exposuªs
 2

	)

687 
	#S¸ìnSavîRe£t
 0

	)

688 
	#S¸ìnSavîA˘ive
 1

	)

696 
	#Ho°In£π
 0

	)

697 
	#Ho°Dñëe
 1

	)

701 
	#E«bÀAc˚ss
 1

	)

702 
	#DißbÀAc˚ss
 0

	)

708 
	#SèticGøy
 0

	)

709 
	#GøySˇÀ
 1

	)

710 
	#SèticCﬁ‹
 2

	)

711 
	#P£udoCﬁ‹
 3

	)

712 
	#TrueCﬁ‹
 4

	)

713 
	#Dúe˘Cﬁ‹
 5

	)

718 
	#LSBFú°
 0

	)

719 
	#MSBFú°
 1

	)

	@/usr/include/X11/Xfuncproto.h

32 #i‚de‡
_XFUNCPROTO_H_


33 
	#_XFUNCPROTO_H_


	)

35 #i‚de‡
NìdFun˘i⁄PrŸŸy≥s


36 
	#NìdFun˘i⁄PrŸŸy≥s
 1

	)

39 #i‚de‡
NìdV¨¨gsPrŸŸy≥s


40 
	#NìdV¨¨gsPrŸŸy≥s
 1

	)

43 #i‡
NìdFun˘i⁄PrŸŸy≥s


45 #i‚de‡
NìdNe°edPrŸŸy≥s


46 
	#NìdNe°edPrŸŸy≥s
 1

	)

49 #i‚de‡
_Xc⁄°


50 
	#_Xc⁄°
 c⁄°

	)

54 #i‚de‡
NARROWPROTO


55 
	#NARROWPROTO


	)

57 #i‚de‡
FUNCPROTO


58 
	#FUNCPROTO
 15

	)

61 #i‚de‡
NìdWidePrŸŸy≥s


62 #ifde‡
NARROWPROTO


63 
	#NìdWidePrŸŸy≥s
 0

	)

65 
	#NìdWidePrŸŸy≥s
 1

	)

71 #i‚de‡
_XFUNCPROTOBEGIN


72 #i‡
deföed
(
__˝lu•lus
Ë|| deföed(
c_∂u•lus
)

73 
	#_XFUNCPROTOBEGIN
 "C" {

	)

74 
	#_XFUNCPROTOEND
 }

	)

76 
	#_XFUNCPROTOBEGIN


	)

77 
	#_XFUNCPROTOEND


	)

81 #i‡
deföed
(
__GNUC__
) && (__GNUC__ >= 4)

82 
	#_X_SENTINEL
(
x
Ë
	`__©åibuã__
 ((
	`__£¡öñ__
(x)))

	)

83 
	#_X_ATTRIBUTE_PRINTF
(
x
,
y
Ë
	`__©åibuã__
((
	`__f‹m©__
(
__¥ötf__
,x,y)))

	)

85 
	#_X_SENTINEL
(
x
)

	)

86 
	#_X_ATTRIBUTE_PRINTF
(
x
,
y
)

	)

89 #i‡
deföed
(
__GNUC__
Ë&& ((__GNUC__ * 100 + 
__GNUC_MINOR__
) >= 303)

90 
	#_X_EXPORT
 
	`__©åibuã__
((
	`visibûôy
("deÁu…")))

	)

91 
	#_X_HIDDEN
 
	`__©åibuã__
((
	`visibûôy
("hiddí")))

	)

92 
	#_X_INTERNAL
 
	`__©åibuã__
((
	`visibûôy
("öã∫Æ")))

	)

93 
	#_X_LIKELY
(
x
Ë
	`__buûtö_ex≥˘
(!!(x), 1)

	)

94 
	#_X_UNLIKELY
(
x
Ë
	`__buûtö_ex≥˘
(!!(x), 0)

	)

95 
	#_X_INLINE
 
ölöe


	)

96 #ñi‡
deföed
(
__SUNPRO_C
) && (__SUNPRO_C >= 0x550)

97 
	#_X_EXPORT
 
__globÆ


	)

98 
	#_X_HIDDEN
 
__hiddí


	)

99 
	#_X_INTERNAL
 
__hiddí


	)

100 
	#_X_LIKELY
(
x
Ë(x)

	)

101 
	#_X_UNLIKELY
(
x
Ë(x)

	)

102 
	#_X_INLINE
 
ölöe


	)

104 
	#_X_EXPORT


	)

105 
	#_X_HIDDEN


	)

106 
	#_X_INTERNAL


	)

107 
	#_X_LIKELY
(
x
Ë(x)

	)

108 
	#_X_UNLIKELY
(
x
Ë(x)

	)

109 
	#_X_INLINE


	)

112 #i‡
deföed
(
__GNUC__
Ë&& ((__GNUC__ * 100 + 
__GNUC_MINOR__
) >= 301)

113 
	#_X_DEPRECATED
 
	`__©åibuã__
((
dïªˇãd
))

	)

115 
	#_X_DEPRECATED


	)

	@/usr/include/X11/Xosdefs.h

31 #i‚de‡
_XOSDEFS_H_


32 
	#_XOSDEFS_H_


	)

43 #ifde‡
NOSTDHDRS


44 
	#X_NOT_POSIX


	)

45 
	#X_NOT_STDC_ENV


	)

48 #ifde‡
s⁄y


49 #i‡!
deföed
(
SYSTYPE_SYSV
Ë&& !deföed(
_SYSTYPE_SYSV
)

50 
	#X_NOT_POSIX


	)

54 #ifde‡
UTEK


55 
	#X_NOT_POSIX


	)

56 
	#X_NOT_STDC_ENV


	)

59 #ifde‡
vax


60 #i‚de‡
u…rix


61 
	#X_NOT_POSIX


	)

62 
	#X_NOT_STDC_ENV


	)

66 #ifde‡
lu«


67 
	#X_NOT_POSIX


	)

68 
	#X_NOT_STDC_ENV


	)

71 #ifde‡
Mùs


72 
	#X_NOT_POSIX


	)

73 
	#X_NOT_STDC_ENV


	)

76 #ifde‡
USL


77 #ifde‡
SYSV


78 
	#X_NOT_POSIX


	)

79 
	#X_NOT_STDC_ENV


	)

83 #ifde‡
_SCO_DS


84 #i‚de‡
__SCO__


85 
	#__SCO__


	)

89 #ifde‡
i386


90 #ifde‡
SYSV


91 #i‡!
deföed
(
ISC
Ë&& !deföed(
__SCO__
Ë&& !deföed(
_SEQUENT_
) && \

92 !
deföed
(
__UNIXWARE__
Ë&& !
	$deföed
(
sun
)

93 #i‡!
	`deföed
(
_POSIX_SOURCE
)

94 
	#X_NOT_POSIX


	)

96 
	#X_NOT_STDC_ENV


	)

101 #ifde‡
MOTOROLA


102 #ifde‡
SYSV


103 
	#X_NOT_STDC_ENV


	)

107 #ifde‡
sun


111 #i‡
	`deföed
(
__SVR4
Ë&& !deföed(
SVR4
)

112 
	#SVR4
 1

	)

114 #ifde‡
SVR4


116 
	#X_POSIX_C_SOURCE
 199300L

	)

120 #ifde‡
WIN32


121 #i‚de‡
_POSIX_


122 
	#X_NOT_POSIX


	)

126 #i‡
	`deföed
(
√c_ews_svr2
Ë|| deföed(
SX
Ë|| deföed(
PC_UX
)

127 
	#X_NOT_POSIX


	)

128 
	#X_NOT_STDC_ENV


	)

131 #ifde‡
__UNIXOS2__


132 
	#USGISH


	)

133 
	#NULL_NOT_ZERO


	)

136 #ifde‡
__DARWIN__


137 
	#NULL_NOT_ZERO


	)

140 #ifde‡
__GNU__


141 #i‚de‡
PATH_MAX


142 
	#PATH_MAX
 4096

	)

144 #i‚de‡
MAXPATHLEN


145 
	#MAXPATHLEN
 4096

	)

149 #i‡
	`deföed
(
__SCO__
Ë|| deföed(
__UNIXWARE__
)

150 #i‚de‡
PATH_MAX


151 
	#PATH_MAX
 1024

	)

153 #i‚de‡
MAXPATHLEN


154 
	#MAXPATHLEN
 1024

	)

158 #i‡
	`deföed
(
__O≥nBSD__
Ë|| deföed(
__NëBSD__
Ë|| deföed(
__FªeBSD__
) \

159 || 
	`deföed
(
__D¨wö__
Ë|| 
	$deföed
(
__Døg⁄Fly__
)

160 #i‚de‡
CSRG_BASED


161 
	#CSRG_BASED


	)

	@/usr/include/X11/extensions/XKBstr.h

28 #i‚de‡
_XKBSTR_H_


29 
	#_XKBSTR_H_


	)

31 
	~<X11/exãnsi⁄s/XKB.h
>

33 
	#XkbCh¨ToI¡
(
v
Ë((v)&0x80?()((v)|(~0xff)):()((v)&0x7f))

	)

34 
	#XkbI¡To2Ch¨s
(
i
,
h
,
l
Ë(((h)=((i>>8)&0xff)),(÷)=((i)&0xff)))

	)

36 #i‡
deföed
(
WORD64
Ë&& deföed(
UNSIGNEDBITFIELDS
)

37 
	#Xkb2Ch¨sToI¡
(
h
,
l
) ((h)&0x80?()(((h)<<8)|(l)|(~0xffff)):\

38 ()(((
h
)<<8)|(
l
)&0x7fff))

	)

40 
	#Xkb2Ch¨sToI¡
(
h
,
l
Ë(()(((h)<<8)|÷)))

	)

47 
	s_XkbSèãRec
 {

48 
	mgroup
;

49 
	mlocked_group
;

50 
	mba£_group
;

51 
	mœtched_group
;

52 
	mmods
;

53 
	mba£_mods
;

54 
	mœtched_mods
;

55 
	mlocked_mods
;

56 
	mcom∑t_°©e
;

57 
	mgøb_mods
;

58 
	mcom∑t_gøb_mods
;

59 
	mlookup_mods
;

60 
	mcom∑t_lookup_mods
;

61 
	m±r_buâ⁄s
;

62 } 
	tXkbSèãRec
,*
	tXkbSèãPå
;

63 
	#XkbModLocks
(
s
Ë((s)->
locked_mods
)

	)

64 
	#XkbSèãMods
(
s
Ë((s)->
ba£_mods
|(s)->
œtched_mods
|
	`XkbModLocks
(s))

	)

65 
	#XkbGroupLock
(
s
Ë((s)->
locked_group
)

	)

66 
	#XkbSèãGroup
(
s
Ë((s)->
ba£_group
+(s)->
œtched_group
+
	`XkbGroupLock
(s))

	)

67 
	#XkbSèãFõldFromRec
(
s
Ë
	`XkbBuûdC‹eSèã
((s)->
lookup_mods
,(s)->
group
)

	)

68 
	#XkbGøbSèãFromRec
(
s
Ë
	`XkbBuûdC‹eSèã
((s)->
gøb_mods
,(s)->
group
)

	)

70 
	s_XkbMods
 {

71 
	mmask
;

72 
	mªÆ_mods
;

73 
	mvmods
;

74 } 
	tXkbModsRec
,*
	tXkbModsPå
;

76 
	s_XkbKTM≠E¡ry
 {

77 
Boﬁ
 
	ma˘ive
;

78 
	mÀvñ
;

79 
XkbModsRec
 
	mmods
;

80 } 
	tXkbKTM≠E¡ryRec
,*
	tXkbKTM≠E¡ryPå
;

82 
	s_XkbKeyTy≥
 {

83 
XkbModsRec
 
	mmods
;

84 
	mnum_Àvñs
;

85 
	mm≠_cou¡
;

86 
XkbKTM≠E¡ryPå
 
	mm≠
;

87 
XkbModsPå
 
	m¥e£rve
;

88 
Atom
 
	m«me
;

89 
Atom
 * 
	mÀvñ_«mes
;

90 } 
	tXkbKeyTy≥Rec
, *
	tXkbKeyTy≥På
;

92 
	#XkbNumGroups
(
g
Ë((g)&0x0f)

	)

93 
	#XkbOutOfR™geGroupInfo
(
g
Ë((g)&0xf0)

	)

94 
	#XkbOutOfR™geGroupA˘i⁄
(
g
Ë((g)&0xc0)

	)

95 
	#XkbOutOfR™geGroupNumbî
(
g
Ë(((g)&0x30)>>4)

	)

96 
	#XkbSëGroupInfo
(
g
,
w
,
n
Ë(((w)&0xc0)|((“)&3)<<4)|((g)&0x0f))

	)

97 
	#XkbSëNumGroups
(
g
,
n
Ë(((g)&0xf0)|(“)&0x0f))

	)

103 
	s_XkbBehavi‹
 {

104 
	mty≥
;

105 
	md©a
;

106 } 
	tXkbBehavi‹
;

108 
	#XkbAnyA˘i⁄D©aSize
 7

	)

109 
	s_XkbAnyA˘i⁄
 {

110 
	mty≥
;

111 
	md©a
[
XkbAnyA˘i⁄D©aSize
];

112 } 
	tXkbAnyA˘i⁄
;

114 
	s_XkbModA˘i⁄
 {

115 
	mty≥
;

116 
	mÊags
;

117 
	mmask
;

118 
	mªÆ_mods
;

119 
	mvmods1
;

120 
	mvmods2
;

121 } 
	tXkbModA˘i⁄
;

122 
	#XkbModA˘i⁄VMods
(
a
) \

123 (()(((
a
)->
vmods1
<<8)|(◊)->
vmods2
)))

	)

124 
	#XkbSëModA˘i⁄VMods
(
a
,
v
) \

125 (((
a
)->
vmods1
=(((
v
)>>8)&0xff)),◊)->
vmods2
=((v)&0xff))

	)

127 
	s_XkbGroupA˘i⁄
 {

128 
	mty≥
;

129 
	mÊags
;

130 
	mgroup_XXX
;

131 } 
	tXkbGroupA˘i⁄
;

132 
	#XkbSAGroup
(
a
Ë(
	`XkbCh¨ToI¡
(◊)->
group_XXX
))

	)

133 
	#XkbSASëGroup
(
a
,
g
Ë(◊)->
group_XXX
=(g))

	)

135 
	s_XkbISOA˘i⁄
 {

136 
	mty≥
;

137 
	mÊags
;

138 
	mmask
;

139 
	mªÆ_mods
;

140 
	mgroup_XXX
;

141 
	maf„˘
;

142 
	mvmods1
;

143 
	mvmods2
;

144 } 
	tXkbISOA˘i⁄
;

146 
	s_XkbPåA˘i⁄
 {

147 
	mty≥
;

148 
	mÊags
;

149 
	mhigh_XXX
;

150 
	mlow_XXX
;

151 
	mhigh_YYY
;

152 
	mlow_YYY
;

153 } 
	tXkbPåA˘i⁄
;

154 
	#XkbPåA˘i⁄X
(
a
Ë(
	`Xkb2Ch¨sToI¡
(◊)->
high_XXX
,◊)->
low_XXX
))

	)

155 
	#XkbPåA˘i⁄Y
(
a
Ë(
	`Xkb2Ch¨sToI¡
(◊)->
high_YYY
,◊)->
low_YYY
))

	)

156 
	#XkbSëPåA˘i⁄X
(
a
,
x
Ë(
	`XkbI¡To2Ch¨s
(x,◊)->
high_XXX
,◊)->
low_XXX
))

	)

157 
	#XkbSëPåA˘i⁄Y
(
a
,
y
Ë(
	`XkbI¡To2Ch¨s
(y,◊)->
high_YYY
,◊)->
low_YYY
))

	)

159 
	s_XkbPåBäA˘i⁄
 {

160 
	mty≥
;

161 
	mÊags
;

162 
	mcou¡
;

163 
	mbuâ⁄
;

164 } 
	tXkbPåBäA˘i⁄
;

166 
	s_XkbPåDÊtA˘i⁄
 {

167 
	mty≥
;

168 
	mÊags
;

169 
	maf„˘
;

170 
	mvÆueXXX
;

171 } 
	tXkbPåDÊtA˘i⁄
;

172 
	#XkbSAPåDÊtVÆue
(
a
Ë(
	`XkbCh¨ToI¡
(◊)->
vÆueXXX
))

	)

173 
	#XkbSASëPåDÊtVÆue
(
a
,
c
Ë(◊)->
vÆueXXX
((c)&0xff))

	)

175 
	s_XkbSwôchS¸ìnA˘i⁄
 {

176 
	mty≥
;

177 
	mÊags
;

178 
	ms¸ìnXXX
;

179 } 
	tXkbSwôchS¸ìnA˘i⁄
;

180 
	#XkbSAS¸ìn
(
a
Ë(
	`XkbCh¨ToI¡
(◊)->
s¸ìnXXX
))

	)

181 
	#XkbSASëS¸ìn
(
a
,
s
Ë(◊)->
s¸ìnXXX
((s)&0xff))

	)

183 
	s_XkbCålsA˘i⁄
 {

184 
	mty≥
;

185 
	mÊags
;

186 
	m˘æs3
;

187 
	m˘æs2
;

188 
	m˘æs1
;

189 
	m˘æs0
;

190 } 
	tXkbCålsA˘i⁄
;

191 
	#XkbA˘i⁄SëCåls
(
a
,
c
Ë((◊)->
˘æs3
=(((c)>>24)&0xff)),\

192 ((
a
)->
˘æs2
=(((
c
)>>16)&0xff)),\

193 ((
a
)->
˘æs1
=(((
c
)>>8)&0xff)),\

194 ((
a
)->
˘æs0
=((
c
)&0xff)))

	)

195 
	#XkbA˘i⁄Cåls
(
a
Ë(((()◊)->
˘æs3
)<<24)|\

196 ((()(
a
)->
˘æs2
)<<16)|\

197 ((()(
a
)->
˘æs1
)<<8)|\

198 (()((
a
)->
˘æs0
)))

	)

200 
	s_XkbMesßgeA˘i⁄
 {

201 
	mty≥
;

202 
	mÊags
;

203 
	mmesßge
[6];

204 } 
	tXkbMesßgeA˘i⁄
;

206 
	s_XkbRedúe˘KeyA˘i⁄
 {

207 
	mty≥
;

208 
	m√w_key
;

209 
	mmods_mask
;

210 
	mmods
;

211 
	mvmods_mask0
;

212 
	mvmods_mask1
;

213 
	mvmods0
;

214 
	mvmods1
;

215 } 
	tXkbRedúe˘KeyA˘i⁄
;

217 
	#XkbSARedúe˘VMods
(
a
Ë(((()◊)->
vmods1
)<<8)|\

218 (()(
a
)->
vmods0
))

	)

219 
	#XkbSARedúe˘SëVMods
(
a
,
m
Ë((◊)->
vmods_mask1
=(((m)>>8)&0xff)),\

220 ((
a
)->
vmods_mask0
=((
m
)&0xff)))

	)

221 
	#XkbSARedúe˘VModsMask
(
a
Ë(((()◊)->
vmods_mask1
)<<8)|\

222 (()(
a
)->
vmods_mask0
))

	)

223 
	#XkbSARedúe˘SëVModsMask
(
a
,
m
Ë((◊)->
vmods_mask1
=(((m)>>8)&0xff)),\

224 ((
a
)->
vmods_mask0
=((
m
)&0xff)))

	)

226 
	s_XkbDevi˚BäA˘i⁄
 {

227 
	mty≥
;

228 
	mÊags
;

229 
	mcou¡
;

230 
	mbuâ⁄
;

231 
	mdevi˚
;

232 } 
	tXkbDevi˚BäA˘i⁄
;

234 
	s_XkbDevi˚VÆu©‹A˘i⁄
 {

235 
	mty≥
;

236 
	mdevi˚
;

237 
	mv1_wh©
;

238 
	mv1_ndx
;

239 
	mv1_vÆue
;

240 
	mv2_wh©
;

241 
	mv2_ndx
;

242 
	mv2_vÆue
;

243 } 
	tXkbDevi˚VÆu©‹A˘i⁄
;

245 
	u_XkbA˘i⁄
 {

246 
XkbAnyA˘i⁄
 
	m™y
;

247 
XkbModA˘i⁄
 
	mmods
;

248 
XkbGroupA˘i⁄
 
	mgroup
;

249 
XkbISOA˘i⁄
 
	miso
;

250 
XkbPåA˘i⁄
 
	m±r
;

251 
XkbPåBäA˘i⁄
 
	mbä
;

252 
XkbPåDÊtA˘i⁄
 
	mdÊt
;

253 
XkbSwôchS¸ìnA˘i⁄
 
	ms¸ìn
;

254 
XkbCålsA˘i⁄
 
	m˘æs
;

255 
XkbMesßgeA˘i⁄
 
	mmsg
;

256 
XkbRedúe˘KeyA˘i⁄
 
	mªdúe˘
;

257 
XkbDevi˚BäA˘i⁄
 
	mdevbä
;

258 
XkbDevi˚VÆu©‹A˘i⁄
 
	mdevvÆ
;

259 
	mty≥
;

260 } 
	tXkbA˘i⁄
;

262 
	s_XkbC⁄åﬁs
 {

263 
	mmk_dÊt_bä
;

264 
	mnum_groups
;

265 
	mgroups_wøp
;

266 
XkbModsRec
 
	möã∫Æ
;

267 
XkbModsRec
 
	mign‹e_lock
;

268 
	míabÀd_˘æs
;

269 
	mª≥©_dñay
;

270 
	mª≥©_öãrvÆ
;

271 
	m¶ow_keys_dñay
;

272 
	mdeboun˚_dñay
;

273 
	mmk_dñay
;

274 
	mmk_öãrvÆ
;

275 
	mmk_time_to_max
;

276 
	mmk_max_•ìd
;

277 
	mmk_curve
;

278 
	max_›ti⁄s
;

279 
	max_timeout
;

280 
	maxt_›ts_mask
;

281 
	maxt_›ts_vÆues
;

282 
	maxt_˘æs_mask
;

283 
	maxt_˘æs_vÆues
;

284 
	m≥r_key_ª≥©
[
XkbPîKeyBôAºaySize
];

285 } 
	tXkbC⁄åﬁsRec
, *
	tXkbC⁄åﬁsPå
;

287 
	#XkbAX_AnyFìdback
(
c
Ë((c)->
íabÀd_˘æs
&
XkbAc˚ssXFìdbackMask
)

	)

288 
	#XkbAX_NìdO±i⁄
(
c
,
w
Ë((c)->
ax_›ti⁄s
&(w))

	)

289 
	#XkbAX_NìdFìdback
(
c
,
w
Ë(
	`XkbAX_AnyFìdback
(c)&&
	`XkbAX_NìdO±i⁄
(c,w))

	)

291 
	s_XkbSîvîM≠Rec
 {

292 
	mnum_a˘s
;

293 
	msize_a˘s
;

294 
XkbA˘i⁄
 *
	ma˘s
;

296 
XkbBehavi‹
 *
	mbehavi‹s
;

297 *
	mkey_a˘s
;

298 #i‡
deföed
(
__˝lu•lus
Ë|| deföed(
c_∂u•lus
)

300 *
	mc_ex∂icô
;

302 *
	mex∂icô
;

304 
	mvmods
[
XkbNumVútuÆMods
];

305 *
	mvmodm≠
;

306 } 
	tXkbSîvîM≠Rec
, *
	tXkbSîvîM≠På
;

308 
	#XkbSMKeyA˘i⁄sPå
(
m
,
k
Ë(&(m)->
a˘s
[(m)->
key_a˘s
[k]])

	)

314 
	s_XkbSymM≠Rec
 {

315 
	mkt_ödex
[
XkbNumKbdGroups
];

316 
	mgroup_öfo
;

317 
	mwidth
;

318 
	moff£t
;

319 } 
	tXkbSymM≠Rec
, *
	tXkbSymM≠På
;

321 
	s_XkbClõ¡M≠Rec
 {

322 
	msize_ty≥s
;

323 
	mnum_ty≥s
;

324 
XkbKeyTy≥På
 
	mty≥s
;

326 
	msize_syms
;

327 
	mnum_syms
;

328 
KeySym
 *
	msyms
;

329 
XkbSymM≠På
 
	mkey_sym_m≠
;

331 *
	mmodm≠
;

332 } 
	tXkbClõ¡M≠Rec
, *
	tXkbClõ¡M≠På
;

334 
	#XkbCMKeyGroupInfo
(
m
,
k
Ë((m)->
key_sym_m≠
[k].
group_öfo
)

	)

335 
	#XkbCMKeyNumGroups
(
m
,
k
Ë(
	`XkbNumGroups
((m)->
key_sym_m≠
[k].
group_öfo
))

	)

336 
	#XkbCMKeyGroupWidth
(
m
,
k
,
g
Ë(
	`XkbCMKeyTy≥
(m,k,g)->
num_Àvñs
)

	)

337 
	#XkbCMKeyGroupsWidth
(
m
,
k
Ë((m)->
key_sym_m≠
[k].
width
)

	)

338 
	#XkbCMKeyTy≥Index
(
m
,
k
,
g
Ë((m)->
key_sym_m≠
[k].
kt_ödex
[g&0x3])

	)

339 
	#XkbCMKeyTy≥
(
m
,
k
,
g
Ë(&(m)->
ty≥s
[
	`XkbCMKeyTy≥Index
(m,k,g)])

	)

340 
	#XkbCMKeyNumSyms
(
m
,
k
Ë(
	`XkbCMKeyGroupsWidth
(m,k)*
	`XkbCMKeyNumGroups
(m,k))

	)

341 
	#XkbCMKeySymsOff£t
(
m
,
k
Ë((m)->
key_sym_m≠
[k].
off£t
)

	)

342 
	#XkbCMKeySymsPå
(
m
,
k
Ë(&(m)->
syms
[
	`XkbCMKeySymsOff£t
(m,k)])

	)

348 
	s_XkbSymI¡î¥ëRec
 {

349 
KeySym
 
	msym
;

350 
	mÊags
;

351 
	mm©ch
;

352 
	mmods
;

353 
	mvútuÆ_mod
;

354 
XkbAnyA˘i⁄
 
	ma˘
;

355 } 
	tXkbSymI¡î¥ëRec
,*
	tXkbSymI¡î¥ëPå
;

357 
	s_XkbCom∑tM≠Rec
 {

358 
XkbSymI¡î¥ëPå
 
	msym_öãΩªt
;

359 
XkbModsRec
 
	mgroups
[
XkbNumKbdGroups
];

360 
	mnum_si
;

361 
	msize_si
;

362 } 
	tXkbCom∑tM≠Rec
, *
	tXkbCom∑tM≠På
;

364 
	s_XkbIndiˇt‹M≠Rec
 {

365 
	mÊags
;

366 
	mwhich_groups
;

367 
	mgroups
;

368 
	mwhich_mods
;

369 
XkbModsRec
 
	mmods
;

370 
	m˘æs
;

371 } 
	tXkbIndiˇt‹M≠Rec
, *
	tXkbIndiˇt‹M≠På
;

373 
	#XkbIM_IsAuto
(
i
Ë((((i)->
Êags
&
XkbIM_NoAutom©ic
)==0)&&\

374 (((
i
)->
which_groups
&&(i)->
groups
)||\

375 ((
i
)->
which_mods
&&(i)->
mods
.
mask
)||\

376 ((
i
)->
˘æs
)))

	)

377 
	#XkbIM_InU£
(
i
Ë(((i)->
Êags
)||((i)->
which_groups
)||\

378 ((
i
)->
which_mods
)||((i)->
˘æs
))

	)

381 
	s_XkbIndiˇt‹Rec
 {

382 
	mphys_ödiˇt‹s
;

383 
XkbIndiˇt‹M≠Rec
 
	mm≠s
[
XkbNumIndiˇt‹s
];

384 } 
	tXkbIndiˇt‹Rec
,*
	tXkbIndiˇt‹På
;

386 
	s_XkbKeyNameRec
 {

387 
	m«me
[
XkbKeyNameLígth
];

388 } 
	tXkbKeyNameRec
,*
	tXkbKeyNamePå
;

390 
	s_XkbKeyAlüsRec
 {

391 
	mªÆ
[
XkbKeyNameLígth
];

392 
	mÆüs
[
XkbKeyNameLígth
];

393 } 
	tXkbKeyAlüsRec
,*
	tXkbKeyAlüsPå
;

398 
	s_XkbNamesRec
 {

399 
Atom
 
	mkeycodes
;

400 
Atom
 
	mgeomëry
;

401 
Atom
 
	msymbﬁs
;

402 
Atom
 
	mty≥s
;

403 
Atom
 
	mcom∑t
;

404 
Atom
 
	mvmods
[
XkbNumVútuÆMods
];

405 
Atom
 
	mödiˇt‹s
[
XkbNumIndiˇt‹s
];

406 
Atom
 
	mgroups
[
XkbNumKbdGroups
];

407 
XkbKeyNamePå
 
	mkeys
;

408 
XkbKeyAlüsPå
 
	mkey_Æü£s
;

409 
Atom
 *
	mødio_groups
;

410 
Atom
 
	mphys_symbﬁs
;

412 
	mnum_keys
;

413 
	mnum_key_Æü£s
;

414 
	mnum_rg
;

415 } 
	tXkbNamesRec
,*
	tXkbNamesPå
;

417 
_XkbGeomëry
 *
	tXkbGeomëryPå
;

421 
	s_XkbDesc
 {

422 
_XDi•œy
 * 
	mdpy
;

423 
	mÊags
;

424 
	mdevi˚_•ec
;

425 
KeyCode
 
	mmö_key_code
;

426 
KeyCode
 
	mmax_key_code
;

428 
XkbC⁄åﬁsPå
 
	m˘æs
;

429 
XkbSîvîM≠På
 
	m£rvî
;

430 
XkbClõ¡M≠På
 
	mm≠
;

431 
XkbIndiˇt‹På
 
	mödiˇt‹s
;

432 
XkbNamesPå
 
	m«mes
;

433 
XkbCom∑tM≠På
 
	mcom∑t
;

434 
XkbGeomëryPå
 
	mgeom
;

435 } 
	tXkbDescRec
, *
	tXkbDescPå
;

436 
	#XkbKeyKeyTy≥Index
(
d
,
k
,
g
Ë(
	`XkbCMKeyTy≥Index
((d)->
m≠
,k,g))

	)

437 
	#XkbKeyKeyTy≥
(
d
,
k
,
g
Ë(
	`XkbCMKeyTy≥
((d)->
m≠
,k,g))

	)

438 
	#XkbKeyGroupWidth
(
d
,
k
,
g
Ë(
	`XkbCMKeyGroupWidth
((d)->
m≠
,k,g))

	)

439 
	#XkbKeyGroupsWidth
(
d
,
k
Ë(
	`XkbCMKeyGroupsWidth
((d)->
m≠
,k))

	)

440 
	#XkbKeyGroupInfo
(
d
,
k
Ë(
	`XkbCMKeyGroupInfo
((d)->
m≠
,(k)))

	)

441 
	#XkbKeyNumGroups
(
d
,
k
Ë(
	`XkbCMKeyNumGroups
((d)->
m≠
,(k)))

	)

442 
	#XkbKeyNumSyms
(
d
,
k
Ë(
	`XkbCMKeyNumSyms
((d)->
m≠
,(k)))

	)

443 
	#XkbKeySymsPå
(
d
,
k
Ë(
	`XkbCMKeySymsPå
((d)->
m≠
,(k)))

	)

444 
	#XkbKeySym
(
d
,
k
,
n
Ë(
	`XkbKeySymsPå
(d,k)[n])

	)

445 
	#XkbKeySymE¡ry
(
d
,
k
,
¶
,
g
) \

446 (
	`XkbKeySym
(
d
,
k
,((
	`XkbKeyGroupsWidth
(d,k)*(
g
))+(
¶
))))

	)

447 
	#XkbKeyA˘i⁄
(
d
,
k
,
n
) \

448 (
	`XkbKeyHasA˘i⁄s
(
d
,
k
)?&
	`XkbKeyA˘i⁄sPå
(d,k)[
n
]:
NULL
)

	)

449 
	#XkbKeyA˘i⁄E¡ry
(
d
,
k
,
¶
,
g
) \

450 (
	`XkbKeyHasA˘i⁄s
(
d
,
k
)?\

451 
	`XkbKeyA˘i⁄
(
d
,
k
,((
	`XkbKeyGroupsWidth
(d,k)*(
g
))+(
¶
))):
NULL
)

	)

453 
	#XkbKeyHasA˘i⁄s
(
d
,
k
Ë((d)->
£rvî
->
key_a˘s
[k]!=0)

	)

454 
	#XkbKeyNumA˘i⁄s
(
d
,
k
Ë(
	`XkbKeyHasA˘i⁄s
(d,k)?
	`XkbKeyNumSyms
(d,k):1)

	)

455 
	#XkbKeyA˘i⁄sPå
(
d
,
k
Ë(
	`XkbSMKeyA˘i⁄sPå
((d)->
£rvî
,k))

	)

456 
	#XkbKeycodeInR™ge
(
d
,
k
Ë(((k)>=(d)->
mö_key_code
)&&\

457 ((
k
)<=(
d
)->
max_key_code
))

	)

458 
	#XkbNumKeys
(
d
Ë((d)->
max_key_code
-(d)->
mö_key_code
+1)

	)

465 
	s_XkbM≠Ch™ges
 {

466 
	mch™ged
;

467 
KeyCode
 
	mmö_key_code
;

468 
KeyCode
 
	mmax_key_code
;

469 
	mfú°_ty≥
;

470 
	mnum_ty≥s
;

471 
KeyCode
 
	mfú°_key_sym
;

472 
	mnum_key_syms
;

473 
KeyCode
 
	mfú°_key_a˘
;

474 
	mnum_key_a˘s
;

475 
KeyCode
 
	mfú°_key_behavi‹
;

476 
	mnum_key_behavi‹s
;

477 
KeyCode
 
	mfú°_key_ex∂icô
;

478 
	mnum_key_ex∂icô
;

479 
KeyCode
 
	mfú°_modm≠_key
;

480 
	mnum_modm≠_keys
;

481 
KeyCode
 
	mfú°_vmodm≠_key
;

482 
	mnum_vmodm≠_keys
;

483 
	m∑d
;

484 
	mvmods
;

485 } 
	tXkbM≠Ch™gesRec
,*
	tXkbM≠Ch™gesPå
;

487 
	s_XkbC⁄åﬁsCh™ges
 {

488 
	mch™ged_˘æs
;

489 
	míabÀd_˘æs_ch™ges
;

490 
Boﬁ
 
	mnum_groups_ch™ged
;

491 } 
	tXkbC⁄åﬁsCh™gesRec
,*
	tXkbC⁄åﬁsCh™gesPå
;

493 
	s_XkbIndiˇt‹Ch™ges
 {

494 
	m°©e_ch™ges
;

495 
	mm≠_ch™ges
;

496 } 
	tXkbIndiˇt‹Ch™gesRec
,*
	tXkbIndiˇt‹Ch™gesPå
;

498 
	s_XkbNameCh™ges
 {

499 
	mch™ged
;

500 
	mfú°_ty≥
;

501 
	mnum_ty≥s
;

502 
	mfú°_lvl
;

503 
	mnum_lvls
;

504 
	mnum_Æü£s
;

505 
	mnum_rg
;

506 
	mfú°_key
;

507 
	mnum_keys
;

508 
	mch™ged_vmods
;

509 
	mch™ged_ödiˇt‹s
;

510 
	mch™ged_groups
;

511 } 
	tXkbNameCh™gesRec
,*
	tXkbNameCh™gesPå
;

513 
	s_XkbCom∑tCh™ges
 {

514 
	mch™ged_groups
;

515 
	mfú°_si
;

516 
	mnum_si
;

517 } 
	tXkbCom∑tCh™gesRec
,*
	tXkbCom∑tCh™gesPå
;

519 
	s_XkbCh™ges
 {

520 
	mdevi˚_•ec
;

521 
	m°©e_ch™ges
;

522 
XkbM≠Ch™gesRec
 
	mm≠
;

523 
XkbC⁄åﬁsCh™gesRec
 
	m˘æs
;

524 
XkbIndiˇt‹Ch™gesRec
 
	mödiˇt‹s
;

525 
XkbNameCh™gesRec
 
	m«mes
;

526 
XkbCom∑tCh™gesRec
 
	mcom∑t
;

527 } 
	tXkbCh™gesRec
, *
	tXkbCh™gesPå
;

534 
	s_XkbComp⁄ítNames
 {

535 * 
	mkeym≠
;

536 * 
	mkeycodes
;

537 * 
	mty≥s
;

538 * 
	mcom∑t
;

539 * 
	msymbﬁs
;

540 * 
	mgeomëry
;

541 } 
	tXkbComp⁄ítNamesRec
, *
	tXkbComp⁄ítNamesPå
;

543 
	s_XkbComp⁄ítName
 {

544 
	mÊags
;

545 * 
	m«me
;

546 } 
	tXkbComp⁄ítNameRec
,*
	tXkbComp⁄ítNamePå
;

548 
	s_XkbComp⁄ítLi°
 {

549 
	mnum_keym≠s
;

550 
	mnum_keycodes
;

551 
	mnum_ty≥s
;

552 
	mnum_com∑t
;

553 
	mnum_symbﬁs
;

554 
	mnum_geomëry
;

555 
XkbComp⁄ítNamePå
 
	mkeym≠s
;

556 
XkbComp⁄ítNamePå
 
	mkeycodes
;

557 
XkbComp⁄ítNamePå
 
	mty≥s
;

558 
XkbComp⁄ítNamePå
 
	mcom∑t
;

559 
XkbComp⁄ítNamePå
 
	msymbﬁs
;

560 
XkbComp⁄ítNamePå
 
	mgeomëry
;

561 } 
	tXkbComp⁄ítLi°Rec
, *
	tXkbComp⁄ítLi°På
;

567 
	s_XkbDevi˚LedInfo
 {

568 
	mÀd_˛ass
;

569 
	mÀd_id
;

570 
	mphys_ödiˇt‹s
;

571 
	mm≠s_¥e£¡
;

572 
	m«mes_¥e£¡
;

573 
	m°©e
;

574 
Atom
 
	m«mes
[
XkbNumIndiˇt‹s
];

575 
XkbIndiˇt‹M≠Rec
 
	mm≠s
[
XkbNumIndiˇt‹s
];

576 } 
	tXkbDevi˚LedInfoRec
,*
	tXkbDevi˚LedInfoPå
;

578 
	s_XkbDevi˚Info
 {

579 * 
	m«me
;

580 
Atom
 
	mty≥
;

581 
	mdevi˚_•ec
;

582 
Boﬁ
 
	mhas_own_°©e
;

583 
	msuµ‹ãd
;

584 
	munsuµ‹ãd
;

586 
	mnum_bäs
;

587 
XkbA˘i⁄
 * 
	mbä_a˘s
;

589 
	msz_Àds
;

590 
	mnum_Àds
;

591 
	mdÊt_kbd_fb
;

592 
	mdÊt_Àd_fb
;

593 
XkbDevi˚LedInfoPå
 
	mÀds
;

594 } 
	tXkbDevi˚InfoRec
,*
	tXkbDevi˚InfoPå
;

596 
	#XkbXI_DevHasBäA˘s
(
d
Ë(((d)->
num_bäs
>0)&&((d)->
bä_a˘s
!=
NULL
))

	)

597 
	#XkbXI_LegÆDevBä
(
d
,
b
Ë(
	`XkbXI_DevHasBäA˘s
(d)&&((b)<(d)->
num_bäs
))

	)

598 
	#XkbXI_DevHasLeds
(
d
Ë(((d)->
num_Àds
>0)&&((d)->
Àds
!=
NULL
))

	)

600 
	s_XkbDevi˚LedCh™ges
 {

601 
	mÀd_˛ass
;

602 
	mÀd_id
;

603 
	mdeföed
;

604 
_XkbDevi˚LedCh™ges
 *
	m√xt
;

605 } 
	tXkbDevi˚LedCh™gesRec
,*
	tXkbDevi˚LedCh™gesPå
;

607 
	s_XkbDevi˚Ch™ges
 {

608 
	mch™ged
;

609 
	mfú°_bä
;

610 
	mnum_bäs
;

611 
XkbDevi˚LedCh™gesRec
 
	mÀds
;

612 } 
	tXkbDevi˚Ch™gesRec
,*
	tXkbDevi˚Ch™gesPå
;

	@/usr/include/X11/keysymdef.h

101 
	#XK_VoidSymbﬁ
 0xfffff‡

	)

103 #ifde‡
XK_MISCELLANY


110 
	#XK_BackS∑˚
 0xff08

	)

111 
	#XK_Tab
 0xff09

	)

112 
	#XK_Löe„ed
 0xff0®

	)

113 
	#XK_CÀ¨
 0xff0b

	)

114 
	#XK_Rëu∫
 0xff0d

	)

115 
	#XK_Pau£
 0xff13

	)

116 
	#XK_S¸ﬁl_Lock
 0xff14

	)

117 
	#XK_Sys_Req
 0xff15

	)

118 
	#XK_Esˇ≥
 0xff1b

	)

119 
	#XK_Dñëe
 0xfff‡

	)

125 
	#XK_Mu…i_key
 0xff20

	)

126 
	#XK_Codeöput
 0xff37

	)

127 
	#XK_SögÀC™did©e
 0xff3c

	)

128 
	#XK_Mu…ùÀC™did©e
 0xff3d

	)

129 
	#XK_PªviousC™did©e
 0xff3e

	)

133 
	#XK_K™ji
 0xff21

	)

134 
	#XK_Muhík™
 0xff22

	)

135 
	#XK_Hík™_Mode
 0xff23

	)

136 
	#XK_Hík™
 0xff23

	)

137 
	#XK_Romaji
 0xff24

	)

138 
	#XK_Húag™a
 0xff25

	)

139 
	#XK_K©ak™a
 0xff26

	)

140 
	#XK_Húag™a_K©ak™a
 0xff27

	)

141 
	#XK_Zíkaku
 0xff28

	)

142 
	#XK_H™kaku
 0xff29

	)

143 
	#XK_Zíkaku_H™kaku
 0xff2®

	)

144 
	#XK_Touroku
 0xff2b

	)

145 
	#XK_Massyo
 0xff2¯

	)

146 
	#XK_K™a_Lock
 0xff2d

	)

147 
	#XK_K™a_Shi·
 0xff2ê

	)

148 
	#XK_Eisu_Shi·
 0xff2‡

	)

149 
	#XK_Eisu_toggÀ
 0xff30

	)

150 
	#XK_K™ji_B™gou
 0xff37

	)

151 
	#XK_Zí_Koho
 0xff3d

	)

152 
	#XK_M´_Koho
 0xff3ê

	)

158 
	#XK_Home
 0xff50

	)

159 
	#XK_Le·
 0xff51

	)

160 
	#XK_Up
 0xff52

	)

161 
	#XK_Right
 0xff53

	)

162 
	#XK_Down
 0xff54

	)

163 
	#XK_Pri‹
 0xff55

	)

164 
	#XK_Page_Up
 0xff55

	)

165 
	#XK_Next
 0xff56

	)

166 
	#XK_Page_Down
 0xff56

	)

167 
	#XK_End
 0xff57

	)

168 
	#XK_Begö
 0xff58

	)

173 
	#XK_Sñe˘
 0xff60

	)

174 
	#XK_Pröt
 0xff61

	)

175 
	#XK_Execuã
 0xff62

	)

176 
	#XK_In£π
 0xff63

	)

177 
	#XK_Undo
 0xff65

	)

178 
	#XK_Redo
 0xff66

	)

179 
	#XK_Míu
 0xff67

	)

180 
	#XK_Föd
 0xff68

	)

181 
	#XK_C™˚l
 0xff69

	)

182 
	#XK_Hñp
 0xff6®

	)

183 
	#XK_Bªak
 0xff6b

	)

184 
	#XK_Mode_swôch
 0xff7ê

	)

185 
	#XK_s¸ùt_swôch
 0xff7ê

	)

186 
	#XK_Num_Lock
 0xff7f

	)

190 
	#XK_KP_S∑˚
 0xff80

	)

191 
	#XK_KP_Tab
 0xff89

	)

192 
	#XK_KP_E¡î
 0xff8d

	)

193 
	#XK_KP_F1
 0xff91

	)

194 
	#XK_KP_F2
 0xff92

	)

195 
	#XK_KP_F3
 0xff93

	)

196 
	#XK_KP_F4
 0xff94

	)

197 
	#XK_KP_Home
 0xff95

	)

198 
	#XK_KP_Le·
 0xff96

	)

199 
	#XK_KP_Up
 0xff97

	)

200 
	#XK_KP_Right
 0xff98

	)

201 
	#XK_KP_Down
 0xff99

	)

202 
	#XK_KP_Pri‹
 0xff9a

	)

203 
	#XK_KP_Page_Up
 0xff9a

	)

204 
	#XK_KP_Next
 0xff9b

	)

205 
	#XK_KP_Page_Down
 0xff9b

	)

206 
	#XK_KP_End
 0xff9c

	)

207 
	#XK_KP_Begö
 0xff9d

	)

208 
	#XK_KP_In£π
 0xff9e

	)

209 
	#XK_KP_Dñëe
 0xff9f

	)

210 
	#XK_KP_EquÆ
 0xffbd

	)

211 
	#XK_KP_Mu…ùly
 0xfÁa

	)

212 
	#XK_KP_Add
 0xfÁb

	)

213 
	#XK_KP_Sï¨©‹
 0xfÁ¯

	)

214 
	#XK_KP_Subåa˘
 0xfÁd

	)

215 
	#XK_KP_DecimÆ
 0xfÁe

	)

216 
	#XK_KP_Divide
 0xfÁf

	)

218 
	#XK_KP_0
 0xffb0

	)

219 
	#XK_KP_1
 0xffb1

	)

220 
	#XK_KP_2
 0xffb2

	)

221 
	#XK_KP_3
 0xffb3

	)

222 
	#XK_KP_4
 0xffb4

	)

223 
	#XK_KP_5
 0xffb5

	)

224 
	#XK_KP_6
 0xffb6

	)

225 
	#XK_KP_7
 0xffb7

	)

226 
	#XK_KP_8
 0xffb8

	)

227 
	#XK_KP_9
 0xffb9

	)

238 
	#XK_F1
 0xffbe

	)

239 
	#XK_F2
 0xffbf

	)

240 
	#XK_F3
 0xffc0

	)

241 
	#XK_F4
 0xffc1

	)

242 
	#XK_F5
 0xffc2

	)

243 
	#XK_F6
 0xffc3

	)

244 
	#XK_F7
 0xffc4

	)

245 
	#XK_F8
 0xffc5

	)

246 
	#XK_F9
 0xffc6

	)

247 
	#XK_F10
 0xffc7

	)

248 
	#XK_F11
 0xffc8

	)

249 
	#XK_L1
 0xffc8

	)

250 
	#XK_F12
 0xffc9

	)

251 
	#XK_L2
 0xffc9

	)

252 
	#XK_F13
 0xffˇ

	)

253 
	#XK_L3
 0xffˇ

	)

254 
	#XK_F14
 0xffcb

	)

255 
	#XK_L4
 0xffcb

	)

256 
	#XK_F15
 0xffcc

	)

257 
	#XK_L5
 0xffcc

	)

258 
	#XK_F16
 0xffcd

	)

259 
	#XK_L6
 0xffcd

	)

260 
	#XK_F17
 0xff˚

	)

261 
	#XK_L7
 0xff˚

	)

262 
	#XK_F18
 0xffcf

	)

263 
	#XK_L8
 0xffcf

	)

264 
	#XK_F19
 0xffd0

	)

265 
	#XK_L9
 0xffd0

	)

266 
	#XK_F20
 0xffd1

	)

267 
	#XK_L10
 0xffd1

	)

268 
	#XK_F21
 0xffd2

	)

269 
	#XK_R1
 0xffd2

	)

270 
	#XK_F22
 0xffd3

	)

271 
	#XK_R2
 0xffd3

	)

272 
	#XK_F23
 0xffd4

	)

273 
	#XK_R3
 0xffd4

	)

274 
	#XK_F24
 0xffd5

	)

275 
	#XK_R4
 0xffd5

	)

276 
	#XK_F25
 0xffd6

	)

277 
	#XK_R5
 0xffd6

	)

278 
	#XK_F26
 0xffd7

	)

279 
	#XK_R6
 0xffd7

	)

280 
	#XK_F27
 0xffd8

	)

281 
	#XK_R7
 0xffd8

	)

282 
	#XK_F28
 0xffd9

	)

283 
	#XK_R8
 0xffd9

	)

284 
	#XK_F29
 0xffda

	)

285 
	#XK_R9
 0xffda

	)

286 
	#XK_F30
 0xffdb

	)

287 
	#XK_R10
 0xffdb

	)

288 
	#XK_F31
 0xffdc

	)

289 
	#XK_R11
 0xffdc

	)

290 
	#XK_F32
 0xffdd

	)

291 
	#XK_R12
 0xffdd

	)

292 
	#XK_F33
 0xffde

	)

293 
	#XK_R13
 0xffde

	)

294 
	#XK_F34
 0xffdf

	)

295 
	#XK_R14
 0xffdf

	)

296 
	#XK_F35
 0xf„0

	)

297 
	#XK_R15
 0xf„0

	)

301 
	#XK_Shi·_L
 0xf„1

	)

302 
	#XK_Shi·_R
 0xf„2

	)

303 
	#XK_C⁄åﬁ_L
 0xf„3

	)

304 
	#XK_C⁄åﬁ_R
 0xf„4

	)

305 
	#XK_C≠s_Lock
 0xf„5

	)

306 
	#XK_Shi·_Lock
 0xf„6

	)

308 
	#XK_Mëa_L
 0xf„7

	)

309 
	#XK_Mëa_R
 0xf„8

	)

310 
	#XK_A…_L
 0xf„9

	)

311 
	#XK_A…_R
 0xf„®

	)

312 
	#XK_Su≥r_L
 0xf„b

	)

313 
	#XK_Su≥r_R
 0xf„¯

	)

314 
	#XK_Hy≥r_L
 0xf„d

	)

315 
	#XK_Hy≥r_R
 0xf„ê

	)

324 #ifde‡
XK_XKB_KEYS


325 
	#XK_ISO_Lock
 0x„01

	)

326 
	#XK_ISO_Levñ2_L©ch
 0x„02

	)

327 
	#XK_ISO_Levñ3_Shi·
 0x„03

	)

328 
	#XK_ISO_Levñ3_L©ch
 0x„04

	)

329 
	#XK_ISO_Levñ3_Lock
 0x„05

	)

330 
	#XK_ISO_Levñ5_Shi·
 0x„11

	)

331 
	#XK_ISO_Levñ5_L©ch
 0x„12

	)

332 
	#XK_ISO_Levñ5_Lock
 0x„13

	)

333 
	#XK_ISO_Group_Shi·
 0xff7ê

	)

334 
	#XK_ISO_Group_L©ch
 0x„06

	)

335 
	#XK_ISO_Group_Lock
 0x„07

	)

336 
	#XK_ISO_Next_Group
 0x„08

	)

337 
	#XK_ISO_Next_Group_Lock
 0x„09

	)

338 
	#XK_ISO_Pªv_Group
 0x„0a

	)

339 
	#XK_ISO_Pªv_Group_Lock
 0x„0b

	)

340 
	#XK_ISO_Fú°_Group
 0x„0c

	)

341 
	#XK_ISO_Fú°_Group_Lock
 0x„0d

	)

342 
	#XK_ISO_La°_Group
 0x„0e

	)

343 
	#XK_ISO_La°_Group_Lock
 0x„0f

	)

345 
	#XK_ISO_Le·_Tab
 0x„20

	)

346 
	#XK_ISO_Move_Löe_Up
 0x„21

	)

347 
	#XK_ISO_Move_Löe_Down
 0x„22

	)

348 
	#XK_ISO_P¨tül_Löe_Up
 0x„23

	)

349 
	#XK_ISO_P¨tül_Löe_Down
 0x„24

	)

350 
	#XK_ISO_P¨tül_S∑˚_Le·
 0x„25

	)

351 
	#XK_ISO_P¨tül_S∑˚_Right
 0x„26

	)

352 
	#XK_ISO_Së_M¨gö_Le·
 0x„27

	)

353 
	#XK_ISO_Së_M¨gö_Right
 0x„28

	)

354 
	#XK_ISO_Rñó£_M¨gö_Le·
 0x„29

	)

355 
	#XK_ISO_Rñó£_M¨gö_Right
 0x„2a

	)

356 
	#XK_ISO_Rñó£_BŸh_M¨gös
 0x„2b

	)

357 
	#XK_ISO_Fa°_Curs‹_Le·
 0x„2c

	)

358 
	#XK_ISO_Fa°_Curs‹_Right
 0x„2d

	)

359 
	#XK_ISO_Fa°_Curs‹_Up
 0x„2e

	)

360 
	#XK_ISO_Fa°_Curs‹_Down
 0x„2f

	)

361 
	#XK_ISO_C⁄töuous_Undîlöe
 0x„30

	)

362 
	#XK_ISO_Disc⁄töuous_Undîlöe
 0x„31

	)

363 
	#XK_ISO_Emphasize
 0x„32

	)

364 
	#XK_ISO_Cíãr_Obje˘
 0x„33

	)

365 
	#XK_ISO_E¡î
 0x„34

	)

367 
	#XK_dód_gøve
 0x„50

	)

368 
	#XK_dód_acuã
 0x„51

	)

369 
	#XK_dód_cúcumÊex
 0x„52

	)

370 
	#XK_dód_tûde
 0x„53

	)

371 
	#XK_dód_ma¸⁄
 0x„54

	)

372 
	#XK_dód_bªve
 0x„55

	)

373 
	#XK_dód_abovedŸ
 0x„56

	)

374 
	#XK_dód_düîesis
 0x„57

	)

375 
	#XK_dód_abovîög
 0x„58

	)

376 
	#XK_dód_doubÀacuã
 0x„59

	)

377 
	#XK_dód_ˇr⁄
 0x„5a

	)

378 
	#XK_dód_˚dûœ
 0x„5b

	)

379 
	#XK_dód_og⁄ek
 0x„5c

	)

380 
	#XK_dód_iŸa
 0x„5d

	)

381 
	#XK_dód_voi˚d_sound
 0x„5e

	)

382 
	#XK_dód_£mivoi˚d_sound
 0x„5f

	)

383 
	#XK_dód_bñowdŸ
 0x„60

	)

384 
	#XK_dód_hook
 0x„61

	)

385 
	#XK_dód_h‹n
 0x„62

	)

386 
	#XK_dód_°roke
 0x„63

	)

388 
	#XK_Fú°_VútuÆ_S¸ìn
 0x„d0

	)

389 
	#XK_Pªv_VútuÆ_S¸ìn
 0x„d1

	)

390 
	#XK_Next_VútuÆ_S¸ìn
 0x„d2

	)

391 
	#XK_La°_VútuÆ_S¸ìn
 0x„d4

	)

392 
	#XK_Tîmö©e_Sîvî
 0x„d5

	)

394 
	#XK_Ac˚ssX_E«bÀ
 0x„70

	)

395 
	#XK_Ac˚ssX_Fìdback_E«bÀ
 0x„71

	)

396 
	#XK_RïótKeys_E«bÀ
 0x„72

	)

397 
	#XK_SlowKeys_E«bÀ
 0x„73

	)

398 
	#XK_Boun˚Keys_E«bÀ
 0x„74

	)

399 
	#XK_StickyKeys_E«bÀ
 0x„75

	)

400 
	#XK_Mou£Keys_E«bÀ
 0x„76

	)

401 
	#XK_Mou£Keys_Ac˚l_E«bÀ
 0x„77

	)

402 
	#XK_Ovîœy1_E«bÀ
 0x„78

	)

403 
	#XK_Ovîœy2_E«bÀ
 0x„79

	)

404 
	#XK_AudibÀBñl_E«bÀ
 0x„7a

	)

406 
	#XK_Poöãr_Le·
 0x„e0

	)

407 
	#XK_Poöãr_Right
 0x„e1

	)

408 
	#XK_Poöãr_Up
 0x„e2

	)

409 
	#XK_Poöãr_Down
 0x„e3

	)

410 
	#XK_Poöãr_UpLe·
 0x„e4

	)

411 
	#XK_Poöãr_UpRight
 0x„e5

	)

412 
	#XK_Poöãr_DownLe·
 0x„e6

	)

413 
	#XK_Poöãr_DownRight
 0x„e7

	)

414 
	#XK_Poöãr_Buâ⁄_DÊt
 0x„e8

	)

415 
	#XK_Poöãr_Buâ⁄1
 0x„e9

	)

416 
	#XK_Poöãr_Buâ⁄2
 0x„ó

	)

417 
	#XK_Poöãr_Buâ⁄3
 0x„eb

	)

418 
	#XK_Poöãr_Buâ⁄4
 0x„ec

	)

419 
	#XK_Poöãr_Buâ⁄5
 0x„ed

	)

420 
	#XK_Poöãr_DblClick_DÊt
 0x„ì

	)

421 
	#XK_Poöãr_DblClick1
 0x„ef

	)

422 
	#XK_Poöãr_DblClick2
 0x„f0

	)

423 
	#XK_Poöãr_DblClick3
 0x„f1

	)

424 
	#XK_Poöãr_DblClick4
 0x„f2

	)

425 
	#XK_Poöãr_DblClick5
 0x„f3

	)

426 
	#XK_Poöãr_Døg_DÊt
 0x„f4

	)

427 
	#XK_Poöãr_Døg1
 0x„f5

	)

428 
	#XK_Poöãr_Døg2
 0x„f6

	)

429 
	#XK_Poöãr_Døg3
 0x„f7

	)

430 
	#XK_Poöãr_Døg4
 0x„f8

	)

431 
	#XK_Poöãr_Døg5
 0x„fd

	)

433 
	#XK_Poöãr_E«bÀKeys
 0x„f9

	)

434 
	#XK_Poöãr_Ac˚Àøã
 0x„Á

	)

435 
	#XK_Poöãr_DÊtBäNext
 0x„fb

	)

436 
	#XK_Poöãr_DÊtBäPªv
 0x„fc

	)

445 #ifde‡
XK_3270


446 
	#XK_3270_Du∂iˇã
 0xfd01

	)

447 
	#XK_3270_FõldM¨k
 0xfd02

	)

448 
	#XK_3270_Right2
 0xfd03

	)

449 
	#XK_3270_Le·2
 0xfd04

	)

450 
	#XK_3270_BackTab
 0xfd05

	)

451 
	#XK_3270_Eø£EOF
 0xfd06

	)

452 
	#XK_3270_Eø£I≈ut
 0xfd07

	)

453 
	#XK_3270_Re£t
 0xfd08

	)

454 
	#XK_3270_Quô
 0xfd09

	)

455 
	#XK_3270_PA1
 0xfd0a

	)

456 
	#XK_3270_PA2
 0xfd0b

	)

457 
	#XK_3270_PA3
 0xfd0c

	)

458 
	#XK_3270_Te°
 0xfd0d

	)

459 
	#XK_3270_Aân
 0xfd0e

	)

460 
	#XK_3270_Curs‹Blök
 0xfd0f

	)

461 
	#XK_3270_A…Curs‹
 0xfd10

	)

462 
	#XK_3270_KeyClick
 0xfd11

	)

463 
	#XK_3270_Jump
 0xfd12

	)

464 
	#XK_3270_Idít
 0xfd13

	)

465 
	#XK_3270_RuÀ
 0xfd14

	)

466 
	#XK_3270_C›y
 0xfd15

	)

467 
	#XK_3270_Pœy
 0xfd16

	)

468 
	#XK_3270_Sëup
 0xfd17

	)

469 
	#XK_3270_Rec‹d
 0xfd18

	)

470 
	#XK_3270_Ch™geS¸ìn
 0xfd19

	)

471 
	#XK_3270_DñëeW‹d
 0xfd1a

	)

472 
	#XK_3270_ExSñe˘
 0xfd1b

	)

473 
	#XK_3270_Curs‹Sñe˘
 0xfd1c

	)

474 
	#XK_3270_PrötS¸ìn
 0xfd1d

	)

475 
	#XK_3270_E¡î
 0xfd1e

	)

483 #ifde‡
XK_LATIN1


484 
	#XK_•a˚
 0x0020

	)

485 
	#XK_ex˛am
 0x0021

	)

486 
	#XK_quŸedbl
 0x0022

	)

487 
	#XK_numbîsign
 0x0023

	)

488 
	#XK_dﬁœr
 0x0024

	)

489 
	#XK_≥r˚¡
 0x0025

	)

490 
	#XK_am≥rßnd
 0x0026

	)

491 
	#XK_≠o°r›he
 0x0027

	)

492 
	#XK_quŸîight
 0x0027

	)

493 
	#XK_∑ª∆e·
 0x0028

	)

494 
	#XK_∑ªƒight
 0x0029

	)

495 
	#XK_a°îisk
 0x002®

	)

496 
	#XK_∂us
 0x002b

	)

497 
	#XK_comma
 0x002¯

	)

498 
	#XK_möus
 0x002d

	)

499 
	#XK_≥riod
 0x002ê

	)

500 
	#XK_¶ash
 0x002‡

	)

501 
	#XK_0
 0x0030

	)

502 
	#XK_1
 0x0031

	)

503 
	#XK_2
 0x0032

	)

504 
	#XK_3
 0x0033

	)

505 
	#XK_4
 0x0034

	)

506 
	#XK_5
 0x0035

	)

507 
	#XK_6
 0x0036

	)

508 
	#XK_7
 0x0037

	)

509 
	#XK_8
 0x0038

	)

510 
	#XK_9
 0x0039

	)

511 
	#XK_cﬁ⁄
 0x003®

	)

512 
	#XK_£micﬁ⁄
 0x003b

	)

513 
	#XK_Àss
 0x003¯

	)

514 
	#XK_equÆ
 0x003d

	)

515 
	#XK_gª©î
 0x003ê

	)

516 
	#XK_que°i⁄
 0x003‡

	)

517 
	#XK_©
 0x0040

	)

518 
	#XK_A
 0x0041

	)

519 
	#XK_B
 0x0042

	)

520 
	#XK_C
 0x0043

	)

521 
	#XK_D
 0x0044

	)

522 
	#XK_E
 0x0045

	)

523 
	#XK_F
 0x0046

	)

524 
	#XK_G
 0x0047

	)

525 
	#XK_H
 0x0048

	)

526 
	#XK_I
 0x0049

	)

527 
	#XK_J
 0x004®

	)

528 
	#XK_K
 0x004b

	)

529 
	#XK_L
 0x004¯

	)

530 
	#XK_M
 0x004d

	)

531 
	#XK_N
 0x004ê

	)

532 
	#XK_O
 0x004‡

	)

533 
	#XK_P
 0x0050

	)

534 
	#XK_Q
 0x0051

	)

535 
	#XK_R
 0x0052

	)

536 
	#XK_S
 0x0053

	)

537 
	#XK_T
 0x0054

	)

538 
	#XK_U
 0x0055

	)

539 
	#XK_V
 0x0056

	)

540 
	#XK_W
 0x0057

	)

541 
	#XK_X
 0x0058

	)

542 
	#XK_Y
 0x0059

	)

543 
	#XK_Z
 0x005®

	)

544 
	#XK_bøckëÀ·
 0x005b

	)

545 
	#XK_back¶ash
 0x005¯

	)

546 
	#XK_bøckëright
 0x005d

	)

547 
	#XK_asciicúcum
 0x005ê

	)

548 
	#XK_undîsc‹e
 0x005‡

	)

549 
	#XK_gøve
 0x0060

	)

550 
	#XK_quŸñe·
 0x0060

	)

551 
	#XK_a
 0x0061

	)

552 
	#XK_b
 0x0062

	)

553 
	#XK_c
 0x0063

	)

554 
	#XK_d
 0x0064

	)

555 
	#XK_e
 0x0065

	)

556 
	#XK_f
 0x0066

	)

557 
	#XK_g
 0x0067

	)

558 
	#XK_h
 0x0068

	)

559 
	#XK_i
 0x0069

	)

560 
	#XK_j
 0x006®

	)

561 
	#XK_k
 0x006b

	)

562 
	#XK_l
 0x006¯

	)

563 
	#XK_m
 0x006d

	)

564 
	#XK_n
 0x006ê

	)

565 
	#XK_o
 0x006‡

	)

566 
	#XK_p
 0x0070

	)

567 
	#XK_q
 0x0071

	)

568 
	#XK_r
 0x0072

	)

569 
	#XK_s
 0x0073

	)

570 
	#XK_t
 0x0074

	)

571 
	#XK_u
 0x0075

	)

572 
	#XK_v
 0x0076

	)

573 
	#XK_w
 0x0077

	)

574 
	#XK_x
 0x0078

	)

575 
	#XK_y
 0x0079

	)

576 
	#XK_z
 0x007®

	)

577 
	#XK_bø˚À·
 0x007b

	)

578 
	#XK_b¨
 0x007¯

	)

579 
	#XK_bø˚right
 0x007d

	)

580 
	#XK_asciôûde
 0x007ê

	)

582 
	#XK_nobªak•a˚
 0x00a0

	)

583 
	#XK_ex˛amdown
 0x00a1

	)

584 
	#XK_˚¡
 0x00a2

	)

585 
	#XK_°îlög
 0x00a3

	)

586 
	#XK_cuºícy
 0x00a4

	)

587 
	#XK_yí
 0x00a5

	)

588 
	#XK_brokíb¨
 0x00a6

	)

589 
	#XK_£˘i⁄
 0x00a7

	)

590 
	#XK_düîesis
 0x00a8

	)

591 
	#XK_c›yright
 0x00a9

	)

592 
	#XK_‹d„mööe
 0x00Ø

	)

593 
	#XK_guûÀmŸÀ·
 0x00ab

	)

594 
	#XK_nŸsign
 0x00a¯

	)

595 
	#XK_hyphí
 0x00ad

	)

596 
	#XK_ªgi°îed
 0x00´

	)

597 
	#XK_ma¸⁄
 0x00a‡

	)

598 
	#XK_degªe
 0x00b0

	)

599 
	#XK_∂usmöus
 0x00b1

	)

600 
	#XK_twosu≥ri‹
 0x00b2

	)

601 
	#XK_thªesu≥ri‹
 0x00b3

	)

602 
	#XK_acuã
 0x00b4

	)

603 
	#XK_mu
 0x00b5

	)

604 
	#XK_∑øgøph
 0x00b6

	)

605 
	#XK_≥riod˚¡îed
 0x00b7

	)

606 
	#XK_˚dûœ
 0x00b8

	)

607 
	#XK_⁄esu≥ri‹
 0x00b9

	)

608 
	#XK_masculöe
 0x00b®

	)

609 
	#XK_guûÀmŸright
 0x00bb

	)

610 
	#XK_⁄equ¨ãr
 0x00b¯

	)

611 
	#XK_⁄ehÆf
 0x00bd

	)

612 
	#XK_thªequ¨ãrs
 0x00bê

	)

613 
	#XK_que°i⁄down
 0x00b‡

	)

614 
	#XK_Agøve
 0x00c0

	)

615 
	#XK_Aacuã
 0x00c1

	)

616 
	#XK_AcúcumÊex
 0x00c2

	)

617 
	#XK_Atûde
 0x00c3

	)

618 
	#XK_Adüîesis
 0x00c4

	)

619 
	#XK_Arög
 0x00c5

	)

620 
	#XK_AE
 0x00c6

	)

621 
	#XK_C˚dûœ
 0x00c7

	)

622 
	#XK_Egøve
 0x00c8

	)

623 
	#XK_Eacuã
 0x00c9

	)

624 
	#XK_EcúcumÊex
 0x00ˇ

	)

625 
	#XK_Edüîesis
 0x00cb

	)

626 
	#XK_Igøve
 0x00c¯

	)

627 
	#XK_Iacuã
 0x00cd

	)

628 
	#XK_IcúcumÊex
 0x00˚

	)

629 
	#XK_Idüîesis
 0x00c‡

	)

630 
	#XK_ETH
 0x00d0

	)

631 
	#XK_Eth
 0x00d0

	)

632 
	#XK_Ntûde
 0x00d1

	)

633 
	#XK_Ogøve
 0x00d2

	)

634 
	#XK_Oacuã
 0x00d3

	)

635 
	#XK_OcúcumÊex
 0x00d4

	)

636 
	#XK_Otûde
 0x00d5

	)

637 
	#XK_Odüîesis
 0x00d6

	)

638 
	#XK_mu…ùly
 0x00d7

	)

639 
	#XK_O¶ash
 0x00d8

	)

640 
	#XK_Ooblique
 0x00d8

	)

641 
	#XK_Ugøve
 0x00d9

	)

642 
	#XK_Uacuã
 0x00d®

	)

643 
	#XK_UcúcumÊex
 0x00db

	)

644 
	#XK_Udüîesis
 0x00d¯

	)

645 
	#XK_Yacuã
 0x00dd

	)

646 
	#XK_THORN
 0x00dê

	)

647 
	#XK_Th‹n
 0x00dê

	)

648 
	#XK_ssh¨p
 0x00d‡

	)

649 
	#XK_agøve
 0x00e0

	)

650 
	#XK_Øcuã
 0x00e1

	)

651 
	#XK_acúcumÊex
 0x00e2

	)

652 
	#XK_©ûde
 0x00e3

	)

653 
	#XK_adüîesis
 0x00e4

	)

654 
	#XK_¨ög
 0x00e5

	)

655 
	#XK_´
 0x00e6

	)

656 
	#XK_c˚dûœ
 0x00e7

	)

657 
	#XK_egøve
 0x00e8

	)

658 
	#XK_ócuã
 0x00e9

	)

659 
	#XK_ecúcumÊex
 0x00ó

	)

660 
	#XK_edüîesis
 0x00eb

	)

661 
	#XK_igøve
 0x00e¯

	)

662 
	#XK_ücuã
 0x00ed

	)

663 
	#XK_icúcumÊex
 0x00ì

	)

664 
	#XK_idüîesis
 0x00e‡

	)

665 
	#XK_ëh
 0x00f0

	)

666 
	#XK_¡ûde
 0x00f1

	)

667 
	#XK_ogøve
 0x00f2

	)

668 
	#XK_ﬂcuã
 0x00f3

	)

669 
	#XK_ocúcumÊex
 0x00f4

	)

670 
	#XK_Ÿûde
 0x00f5

	)

671 
	#XK_odüîesis
 0x00f6

	)

672 
	#XK_divisi⁄
 0x00f7

	)

673 
	#XK_o¶ash
 0x00f8

	)

674 
	#XK_ooblique
 0x00f8

	)

675 
	#XK_ugøve
 0x00f9

	)

676 
	#XK_uacuã
 0x00Á

	)

677 
	#XK_ucúcumÊex
 0x00fb

	)

678 
	#XK_udüîesis
 0x00f¯

	)

679 
	#XK_yacuã
 0x00fd

	)

680 
	#XK_th‹n
 0x00„

	)

681 
	#XK_ydüîesis
 0x00f‡

	)

689 #ifde‡
XK_LATIN2


690 
	#XK_Aog⁄ek
 0x01a1

	)

691 
	#XK_bªve
 0x01a2

	)

692 
	#XK_L°roke
 0x01a3

	)

693 
	#XK_Lˇr⁄
 0x01a5

	)

694 
	#XK_Sacuã
 0x01a6

	)

695 
	#XK_Sˇr⁄
 0x01a9

	)

696 
	#XK_S˚dûœ
 0x01Ø

	)

697 
	#XK_Tˇr⁄
 0x01ab

	)

698 
	#XK_Zacuã
 0x01a¯

	)

699 
	#XK_Zˇr⁄
 0x01´

	)

700 
	#XK_ZabovedŸ
 0x01a‡

	)

701 
	#XK_aog⁄ek
 0x01b1

	)

702 
	#XK_og⁄ek
 0x01b2

	)

703 
	#XK_l°roke
 0x01b3

	)

704 
	#XK_lˇr⁄
 0x01b5

	)

705 
	#XK_ßcuã
 0x01b6

	)

706 
	#XK_ˇr⁄
 0x01b7

	)

707 
	#XK_sˇr⁄
 0x01b9

	)

708 
	#XK_s˚dûœ
 0x01b®

	)

709 
	#XK_tˇr⁄
 0x01bb

	)

710 
	#XK_zacuã
 0x01b¯

	)

711 
	#XK_doubÀacuã
 0x01bd

	)

712 
	#XK_zˇr⁄
 0x01bê

	)

713 
	#XK_zabovedŸ
 0x01b‡

	)

714 
	#XK_Racuã
 0x01c0

	)

715 
	#XK_Abªve
 0x01c3

	)

716 
	#XK_Lacuã
 0x01c5

	)

717 
	#XK_Cacuã
 0x01c6

	)

718 
	#XK_Cˇr⁄
 0x01c8

	)

719 
	#XK_Eog⁄ek
 0x01ˇ

	)

720 
	#XK_Eˇr⁄
 0x01c¯

	)

721 
	#XK_Dˇr⁄
 0x01c‡

	)

722 
	#XK_D°roke
 0x01d0

	)

723 
	#XK_Nacuã
 0x01d1

	)

724 
	#XK_Nˇr⁄
 0x01d2

	)

725 
	#XK_OdoubÀacuã
 0x01d5

	)

726 
	#XK_Rˇr⁄
 0x01d8

	)

727 
	#XK_Urög
 0x01d9

	)

728 
	#XK_UdoubÀacuã
 0x01db

	)

729 
	#XK_T˚dûœ
 0x01dê

	)

730 
	#XK_øcuã
 0x01e0

	)

731 
	#XK_abªve
 0x01e3

	)

732 
	#XK_œcuã
 0x01e5

	)

733 
	#XK_ˇcuã
 0x01e6

	)

734 
	#XK_cˇr⁄
 0x01e8

	)

735 
	#XK_eog⁄ek
 0x01ó

	)

736 
	#XK_eˇr⁄
 0x01e¯

	)

737 
	#XK_dˇr⁄
 0x01e‡

	)

738 
	#XK_d°roke
 0x01f0

	)

739 
	#XK_«cuã
 0x01f1

	)

740 
	#XK_nˇr⁄
 0x01f2

	)

741 
	#XK_odoubÀacuã
 0x01f5

	)

742 
	#XK_udoubÀacuã
 0x01fb

	)

743 
	#XK_rˇr⁄
 0x01f8

	)

744 
	#XK_urög
 0x01f9

	)

745 
	#XK_t˚dûœ
 0x01„

	)

746 
	#XK_abovedŸ
 0x01f‡

	)

754 #ifde‡
XK_LATIN3


755 
	#XK_H°roke
 0x02a1

	)

756 
	#XK_HcúcumÊex
 0x02a6

	)

757 
	#XK_IabovedŸ
 0x02a9

	)

758 
	#XK_Gbªve
 0x02ab

	)

759 
	#XK_JcúcumÊex
 0x02a¯

	)

760 
	#XK_h°roke
 0x02b1

	)

761 
	#XK_hcúcumÊex
 0x02b6

	)

762 
	#XK_idŸÀss
 0x02b9

	)

763 
	#XK_gbªve
 0x02bb

	)

764 
	#XK_jcúcumÊex
 0x02b¯

	)

765 
	#XK_CabovedŸ
 0x02c5

	)

766 
	#XK_CcúcumÊex
 0x02c6

	)

767 
	#XK_GabovedŸ
 0x02d5

	)

768 
	#XK_GcúcumÊex
 0x02d8

	)

769 
	#XK_Ubªve
 0x02dd

	)

770 
	#XK_ScúcumÊex
 0x02dê

	)

771 
	#XK_ˇbovedŸ
 0x02e5

	)

772 
	#XK_ccúcumÊex
 0x02e6

	)

773 
	#XK_gabovedŸ
 0x02f5

	)

774 
	#XK_gcúcumÊex
 0x02f8

	)

775 
	#XK_ubªve
 0x02fd

	)

776 
	#XK_scúcumÊex
 0x02„

	)

785 #ifde‡
XK_LATIN4


786 
	#XK_kø
 0x03a2

	)

787 
	#XK_k≠∑
 0x03a2

	)

788 
	#XK_R˚dûœ
 0x03a3

	)

789 
	#XK_Itûde
 0x03a5

	)

790 
	#XK_L˚dûœ
 0x03a6

	)

791 
	#XK_Ema¸⁄
 0x03Ø

	)

792 
	#XK_G˚dûœ
 0x03ab

	)

793 
	#XK_T¶ash
 0x03a¯

	)

794 
	#XK_r˚dûœ
 0x03b3

	)

795 
	#XK_ôûde
 0x03b5

	)

796 
	#XK_l˚dûœ
 0x03b6

	)

797 
	#XK_ema¸⁄
 0x03b®

	)

798 
	#XK_g˚dûœ
 0x03bb

	)

799 
	#XK_t¶ash
 0x03b¯

	)

800 
	#XK_ENG
 0x03bd

	)

801 
	#XK_íg
 0x03b‡

	)

802 
	#XK_Ama¸⁄
 0x03c0

	)

803 
	#XK_Iog⁄ek
 0x03c7

	)

804 
	#XK_EabovedŸ
 0x03c¯

	)

805 
	#XK_Ima¸⁄
 0x03c‡

	)

806 
	#XK_N˚dûœ
 0x03d1

	)

807 
	#XK_Oma¸⁄
 0x03d2

	)

808 
	#XK_K˚dûœ
 0x03d3

	)

809 
	#XK_Uog⁄ek
 0x03d9

	)

810 
	#XK_Utûde
 0x03dd

	)

811 
	#XK_Uma¸⁄
 0x03dê

	)

812 
	#XK_ama¸⁄
 0x03e0

	)

813 
	#XK_iog⁄ek
 0x03e7

	)

814 
	#XK_óbovedŸ
 0x03e¯

	)

815 
	#XK_ima¸⁄
 0x03e‡

	)

816 
	#XK_n˚dûœ
 0x03f1

	)

817 
	#XK_oma¸⁄
 0x03f2

	)

818 
	#XK_k˚dûœ
 0x03f3

	)

819 
	#XK_uog⁄ek
 0x03f9

	)

820 
	#XK_utûde
 0x03fd

	)

821 
	#XK_uma¸⁄
 0x03„

	)

827 #ifde‡
XK_LATIN8


828 
	#XK_BabovedŸ
 0x1001e02

	)

829 
	#XK_babovedŸ
 0x1001e03

	)

830 
	#XK_DabovedŸ
 0x1001e0®

	)

831 
	#XK_Wgøve
 0x1001e80

	)

832 
	#XK_Wacuã
 0x1001e82

	)

833 
	#XK_dabovedŸ
 0x1001e0b

	)

834 
	#XK_Ygøve
 0x1001ef2

	)

835 
	#XK_FabovedŸ
 0x1001e1ê

	)

836 
	#XK_ÁbovedŸ
 0x1001e1‡

	)

837 
	#XK_MabovedŸ
 0x1001e40

	)

838 
	#XK_mabovedŸ
 0x1001e41

	)

839 
	#XK_PabovedŸ
 0x1001e56

	)

840 
	#XK_wgøve
 0x1001e81

	)

841 
	#XK_∑bovedŸ
 0x1001e57

	)

842 
	#XK_wacuã
 0x1001e83

	)

843 
	#XK_SabovedŸ
 0x1001e60

	)

844 
	#XK_ygøve
 0x1001ef3

	)

845 
	#XK_Wdüîesis
 0x1001e84

	)

846 
	#XK_wdüîesis
 0x1001e85

	)

847 
	#XK_ßbovedŸ
 0x1001e61

	)

848 
	#XK_WcúcumÊex
 0x1000174

	)

849 
	#XK_TabovedŸ
 0x1001e6®

	)

850 
	#XK_YcúcumÊex
 0x1000176

	)

851 
	#XK_wcúcumÊex
 0x1000175

	)

852 
	#XK_èbovedŸ
 0x1001e6b

	)

853 
	#XK_ycúcumÊex
 0x1000177

	)

861 #ifde‡
XK_LATIN9


862 
	#XK_OE
 0x13b¯

	)

863 
	#XK_€
 0x13bd

	)

864 
	#XK_Ydüîesis
 0x13bê

	)

872 #ifde‡
XK_KATAKANA


873 
	#XK_ovîlöe
 0x047ê

	)

874 
	#XK_k™a_fuŒ°›
 0x04a1

	)

875 
	#XK_k™a_›íögbøckë
 0x04a2

	)

876 
	#XK_k™a_˛osögbøckë
 0x04a3

	)

877 
	#XK_k™a_comma
 0x04a4

	)

878 
	#XK_k™a_c⁄jun˘ive
 0x04a5

	)

879 
	#XK_k™a_middÀdŸ
 0x04a5

	)

880 
	#XK_k™a_WO
 0x04a6

	)

881 
	#XK_k™a_a
 0x04a7

	)

882 
	#XK_k™a_i
 0x04a8

	)

883 
	#XK_k™a_u
 0x04a9

	)

884 
	#XK_k™a_e
 0x04Ø

	)

885 
	#XK_k™a_o
 0x04ab

	)

886 
	#XK_k™a_ya
 0x04a¯

	)

887 
	#XK_k™a_yu
 0x04ad

	)

888 
	#XK_k™a_yo
 0x04´

	)

889 
	#XK_k™a_tsu
 0x04a‡

	)

890 
	#XK_k™a_tu
 0x04a‡

	)

891 
	#XK_¥ﬁ⁄gedsound
 0x04b0

	)

892 
	#XK_k™a_A
 0x04b1

	)

893 
	#XK_k™a_I
 0x04b2

	)

894 
	#XK_k™a_U
 0x04b3

	)

895 
	#XK_k™a_E
 0x04b4

	)

896 
	#XK_k™a_O
 0x04b5

	)

897 
	#XK_k™a_KA
 0x04b6

	)

898 
	#XK_k™a_KI
 0x04b7

	)

899 
	#XK_k™a_KU
 0x04b8

	)

900 
	#XK_k™a_KE
 0x04b9

	)

901 
	#XK_k™a_KO
 0x04b®

	)

902 
	#XK_k™a_SA
 0x04bb

	)

903 
	#XK_k™a_SHI
 0x04b¯

	)

904 
	#XK_k™a_SU
 0x04bd

	)

905 
	#XK_k™a_SE
 0x04bê

	)

906 
	#XK_k™a_SO
 0x04b‡

	)

907 
	#XK_k™a_TA
 0x04c0

	)

908 
	#XK_k™a_CHI
 0x04c1

	)

909 
	#XK_k™a_TI
 0x04c1

	)

910 
	#XK_k™a_TSU
 0x04c2

	)

911 
	#XK_k™a_TU
 0x04c2

	)

912 
	#XK_k™a_TE
 0x04c3

	)

913 
	#XK_k™a_TO
 0x04c4

	)

914 
	#XK_k™a_NA
 0x04c5

	)

915 
	#XK_k™a_NI
 0x04c6

	)

916 
	#XK_k™a_NU
 0x04c7

	)

917 
	#XK_k™a_NE
 0x04c8

	)

918 
	#XK_k™a_NO
 0x04c9

	)

919 
	#XK_k™a_HA
 0x04ˇ

	)

920 
	#XK_k™a_HI
 0x04cb

	)

921 
	#XK_k™a_FU
 0x04c¯

	)

922 
	#XK_k™a_HU
 0x04c¯

	)

923 
	#XK_k™a_HE
 0x04cd

	)

924 
	#XK_k™a_HO
 0x04˚

	)

925 
	#XK_k™a_MA
 0x04c‡

	)

926 
	#XK_k™a_MI
 0x04d0

	)

927 
	#XK_k™a_MU
 0x04d1

	)

928 
	#XK_k™a_ME
 0x04d2

	)

929 
	#XK_k™a_MO
 0x04d3

	)

930 
	#XK_k™a_YA
 0x04d4

	)

931 
	#XK_k™a_YU
 0x04d5

	)

932 
	#XK_k™a_YO
 0x04d6

	)

933 
	#XK_k™a_RA
 0x04d7

	)

934 
	#XK_k™a_RI
 0x04d8

	)

935 
	#XK_k™a_RU
 0x04d9

	)

936 
	#XK_k™a_RE
 0x04d®

	)

937 
	#XK_k™a_RO
 0x04db

	)

938 
	#XK_k™a_WA
 0x04d¯

	)

939 
	#XK_k™a_N
 0x04dd

	)

940 
	#XK_voi˚dsound
 0x04dê

	)

941 
	#XK_£mivoi˚dsound
 0x04d‡

	)

942 
	#XK_k™a_swôch
 0xff7ê

	)

950 #ifde‡
XK_ARABIC


951 
	#XK_F¨si_0
 0x10006f0

	)

952 
	#XK_F¨si_1
 0x10006f1

	)

953 
	#XK_F¨si_2
 0x10006f2

	)

954 
	#XK_F¨si_3
 0x10006f3

	)

955 
	#XK_F¨si_4
 0x10006f4

	)

956 
	#XK_F¨si_5
 0x10006f5

	)

957 
	#XK_F¨si_6
 0x10006f6

	)

958 
	#XK_F¨si_7
 0x10006f7

	)

959 
	#XK_F¨si_8
 0x10006f8

	)

960 
	#XK_F¨si_9
 0x10006f9

	)

961 
	#XK_Aøbic_≥r˚¡
 0x100066®

	)

962 
	#XK_Aøbic_su≥rs¸ùt_Æef
 0x1000670

	)

963 
	#XK_Aøbic_âeh
 0x1000679

	)

964 
	#XK_Aøbic_≥h
 0x100067ê

	)

965 
	#XK_Aøbic_tcheh
 0x1000686

	)

966 
	#XK_Aøbic_ddÆ
 0x1000688

	)

967 
	#XK_Aøbic_ºeh
 0x1000691

	)

968 
	#XK_Aøbic_comma
 0x05a¯

	)

969 
	#XK_Aøbic_fuŒ°›
 0x10006d4

	)

970 
	#XK_Aøbic_0
 0x1000660

	)

971 
	#XK_Aøbic_1
 0x1000661

	)

972 
	#XK_Aøbic_2
 0x1000662

	)

973 
	#XK_Aøbic_3
 0x1000663

	)

974 
	#XK_Aøbic_4
 0x1000664

	)

975 
	#XK_Aøbic_5
 0x1000665

	)

976 
	#XK_Aøbic_6
 0x1000666

	)

977 
	#XK_Aøbic_7
 0x1000667

	)

978 
	#XK_Aøbic_8
 0x1000668

	)

979 
	#XK_Aøbic_9
 0x1000669

	)

980 
	#XK_Aøbic_£micﬁ⁄
 0x05bb

	)

981 
	#XK_Aøbic_que°i⁄_m¨k
 0x05b‡

	)

982 
	#XK_Aøbic_hamza
 0x05c1

	)

983 
	#XK_Aøbic_madda⁄Æef
 0x05c2

	)

984 
	#XK_Aøbic_hamza⁄Æef
 0x05c3

	)

985 
	#XK_Aøbic_hamza⁄waw
 0x05c4

	)

986 
	#XK_Aøbic_hamzaundîÆef
 0x05c5

	)

987 
	#XK_Aøbic_hamza⁄yeh
 0x05c6

	)

988 
	#XK_Aøbic_Æef
 0x05c7

	)

989 
	#XK_Aøbic_beh
 0x05c8

	)

990 
	#XK_Aøbic_ãhm¨buè
 0x05c9

	)

991 
	#XK_Aøbic_ãh
 0x05ˇ

	)

992 
	#XK_Aøbic_theh
 0x05cb

	)

993 
	#XK_Aøbic_jìm
 0x05c¯

	)

994 
	#XK_Aøbic_hah
 0x05cd

	)

995 
	#XK_Aøbic_khah
 0x05˚

	)

996 
	#XK_Aøbic_dÆ
 0x05c‡

	)

997 
	#XK_Aøbic_thÆ
 0x05d0

	)

998 
	#XK_Aøbic_ø
 0x05d1

	)

999 
	#XK_Aøbic_zaö
 0x05d2

	)

1000 
	#XK_Aøbic_£í
 0x05d3

	)

1001 
	#XK_Aøbic_shìn
 0x05d4

	)

1002 
	#XK_Aøbic_ßd
 0x05d5

	)

1003 
	#XK_Aøbic_dad
 0x05d6

	)

1004 
	#XK_Aøbic_èh
 0x05d7

	)

1005 
	#XK_Aøbic_zah
 0x05d8

	)

1006 
	#XK_Aøbic_aö
 0x05d9

	)

1007 
	#XK_Aøbic_ghaö
 0x05d®

	)

1008 
	#XK_Aøbic_ètwìl
 0x05e0

	)

1009 
	#XK_Aøbic_„h
 0x05e1

	)

1010 
	#XK_Aøbic_qaf
 0x05e2

	)

1011 
	#XK_Aøbic_kaf
 0x05e3

	)

1012 
	#XK_Aøbic_œm
 0x05e4

	)

1013 
	#XK_Aøbic_mìm
 0x05e5

	)

1014 
	#XK_Aøbic_no⁄
 0x05e6

	)

1015 
	#XK_Aøbic_ha
 0x05e7

	)

1016 
	#XK_Aøbic_heh
 0x05e7

	)

1017 
	#XK_Aøbic_waw
 0x05e8

	)

1018 
	#XK_Aøbic_Æefmaksuø
 0x05e9

	)

1019 
	#XK_Aøbic_yeh
 0x05ó

	)

1020 
	#XK_Aøbic_Áth©™
 0x05eb

	)

1021 
	#XK_Aøbic_damm©™
 0x05e¯

	)

1022 
	#XK_Aøbic_ka§©™
 0x05ed

	)

1023 
	#XK_Aøbic_Átha
 0x05ì

	)

1024 
	#XK_Aøbic_damma
 0x05e‡

	)

1025 
	#XK_Aøbic_ka§a
 0x05f0

	)

1026 
	#XK_Aøbic_shadda
 0x05f1

	)

1027 
	#XK_Aøbic_sukun
 0x05f2

	)

1028 
	#XK_Aøbic_madda_above
 0x1000653

	)

1029 
	#XK_Aøbic_hamza_above
 0x1000654

	)

1030 
	#XK_Aøbic_hamza_bñow
 0x1000655

	)

1031 
	#XK_Aøbic_jeh
 0x1000698

	)

1032 
	#XK_Aøbic_veh
 0x10006a4

	)

1033 
	#XK_Aøbic_keheh
 0x10006a9

	)

1034 
	#XK_Aøbic_gaf
 0x10006a‡

	)

1035 
	#XK_Aøbic_no⁄_ghu¬a
 0x10006b®

	)

1036 
	#XK_Aøbic_heh_dﬂchashmì
 0x10006bê

	)

1037 
	#XK_F¨si_yeh
 0x10006c¯

	)

1038 
	#XK_Aøbic_Ársi_yeh
 0x10006c¯

	)

1039 
	#XK_Aøbic_yeh_b¨ì
 0x10006d2

	)

1040 
	#XK_Aøbic_heh_gﬂl
 0x10006c1

	)

1041 
	#XK_Aøbic_swôch
 0xff7ê

	)

1048 #ifde‡
XK_CYRILLIC


1049 
	#XK_Cyrûlic_GHE_b¨
 0x1000492

	)

1050 
	#XK_Cyrûlic_ghe_b¨
 0x1000493

	)

1051 
	#XK_Cyrûlic_ZHE_des˚ndî
 0x1000496

	)

1052 
	#XK_Cyrûlic_zhe_des˚ndî
 0x1000497

	)

1053 
	#XK_Cyrûlic_KA_des˚ndî
 0x100049®

	)

1054 
	#XK_Cyrûlic_ka_des˚ndî
 0x100049b

	)

1055 
	#XK_Cyrûlic_KA_vît°roke
 0x100049¯

	)

1056 
	#XK_Cyrûlic_ka_vît°roke
 0x100049d

	)

1057 
	#XK_Cyrûlic_EN_des˚ndî
 0x10004a2

	)

1058 
	#XK_Cyrûlic_í_des˚ndî
 0x10004a3

	)

1059 
	#XK_Cyrûlic_U_°øight
 0x10004´

	)

1060 
	#XK_Cyrûlic_u_°øight
 0x10004a‡

	)

1061 
	#XK_Cyrûlic_U_°øight_b¨
 0x10004b0

	)

1062 
	#XK_Cyrûlic_u_°øight_b¨
 0x10004b1

	)

1063 
	#XK_Cyrûlic_HA_des˚ndî
 0x10004b2

	)

1064 
	#XK_Cyrûlic_ha_des˚ndî
 0x10004b3

	)

1065 
	#XK_Cyrûlic_CHE_des˚ndî
 0x10004b6

	)

1066 
	#XK_Cyrûlic_che_des˚ndî
 0x10004b7

	)

1067 
	#XK_Cyrûlic_CHE_vît°roke
 0x10004b8

	)

1068 
	#XK_Cyrûlic_che_vît°roke
 0x10004b9

	)

1069 
	#XK_Cyrûlic_SHHA
 0x10004b®

	)

1070 
	#XK_Cyrûlic_shha
 0x10004bb

	)

1072 
	#XK_Cyrûlic_SCHWA
 0x10004d8

	)

1073 
	#XK_Cyrûlic_schwa
 0x10004d9

	)

1074 
	#XK_Cyrûlic_I_ma¸⁄
 0x10004e2

	)

1075 
	#XK_Cyrûlic_i_ma¸⁄
 0x10004e3

	)

1076 
	#XK_Cyrûlic_O_b¨
 0x10004e8

	)

1077 
	#XK_Cyrûlic_o_b¨
 0x10004e9

	)

1078 
	#XK_Cyrûlic_U_ma¸⁄
 0x10004ì

	)

1079 
	#XK_Cyrûlic_u_ma¸⁄
 0x10004e‡

	)

1081 
	#XK_Sîbün_dje
 0x06a1

	)

1082 
	#XK_Ma˚d⁄ü_gje
 0x06a2

	)

1083 
	#XK_Cyrûlic_io
 0x06a3

	)

1084 
	#XK_Ukøöün_õ
 0x06a4

	)

1085 
	#XK_Ukønün_je
 0x06a4

	)

1086 
	#XK_Ma˚d⁄ü_d£
 0x06a5

	)

1087 
	#XK_Ukøöün_i
 0x06a6

	)

1088 
	#XK_Ukønün_i
 0x06a6

	)

1089 
	#XK_Ukøöün_yi
 0x06a7

	)

1090 
	#XK_Ukønün_yi
 0x06a7

	)

1091 
	#XK_Cyrûlic_je
 0x06a8

	)

1092 
	#XK_Sîbün_je
 0x06a8

	)

1093 
	#XK_Cyrûlic_lje
 0x06a9

	)

1094 
	#XK_Sîbün_lje
 0x06a9

	)

1095 
	#XK_Cyrûlic_nje
 0x06Ø

	)

1096 
	#XK_Sîbün_nje
 0x06Ø

	)

1097 
	#XK_Sîbün_tshe
 0x06ab

	)

1098 
	#XK_Ma˚d⁄ü_kje
 0x06a¯

	)

1099 
	#XK_Ukøöün_ghe_wôh_u±u∫
 0x06ad

	)

1100 
	#XK_Byñ‹ussün_sh‹tu
 0x06´

	)

1101 
	#XK_Cyrûlic_dzhe
 0x06a‡

	)

1102 
	#XK_Sîbün_dze
 0x06a‡

	)

1103 
	#XK_numîosign
 0x06b0

	)

1104 
	#XK_Sîbün_DJE
 0x06b1

	)

1105 
	#XK_Ma˚d⁄ü_GJE
 0x06b2

	)

1106 
	#XK_Cyrûlic_IO
 0x06b3

	)

1107 
	#XK_Ukøöün_IE
 0x06b4

	)

1108 
	#XK_Ukønün_JE
 0x06b4

	)

1109 
	#XK_Ma˚d⁄ü_DSE
 0x06b5

	)

1110 
	#XK_Ukøöün_I
 0x06b6

	)

1111 
	#XK_Ukønün_I
 0x06b6

	)

1112 
	#XK_Ukøöün_YI
 0x06b7

	)

1113 
	#XK_Ukønün_YI
 0x06b7

	)

1114 
	#XK_Cyrûlic_JE
 0x06b8

	)

1115 
	#XK_Sîbün_JE
 0x06b8

	)

1116 
	#XK_Cyrûlic_LJE
 0x06b9

	)

1117 
	#XK_Sîbün_LJE
 0x06b9

	)

1118 
	#XK_Cyrûlic_NJE
 0x06b®

	)

1119 
	#XK_Sîbün_NJE
 0x06b®

	)

1120 
	#XK_Sîbün_TSHE
 0x06bb

	)

1121 
	#XK_Ma˚d⁄ü_KJE
 0x06b¯

	)

1122 
	#XK_Ukøöün_GHE_WITH_UPTURN
 0x06bd

	)

1123 
	#XK_Byñ‹ussün_SHORTU
 0x06bê

	)

1124 
	#XK_Cyrûlic_DZHE
 0x06b‡

	)

1125 
	#XK_Sîbün_DZE
 0x06b‡

	)

1126 
	#XK_Cyrûlic_yu
 0x06c0

	)

1127 
	#XK_Cyrûlic_a
 0x06c1

	)

1128 
	#XK_Cyrûlic_be
 0x06c2

	)

1129 
	#XK_Cyrûlic_t£
 0x06c3

	)

1130 
	#XK_Cyrûlic_de
 0x06c4

	)

1131 
	#XK_Cyrûlic_õ
 0x06c5

	)

1132 
	#XK_Cyrûlic_ef
 0x06c6

	)

1133 
	#XK_Cyrûlic_ghe
 0x06c7

	)

1134 
	#XK_Cyrûlic_ha
 0x06c8

	)

1135 
	#XK_Cyrûlic_i
 0x06c9

	)

1136 
	#XK_Cyrûlic_sh‹ti
 0x06ˇ

	)

1137 
	#XK_Cyrûlic_ka
 0x06cb

	)

1138 
	#XK_Cyrûlic_ñ
 0x06c¯

	)

1139 
	#XK_Cyrûlic_em
 0x06cd

	)

1140 
	#XK_Cyrûlic_í
 0x06˚

	)

1141 
	#XK_Cyrûlic_o
 0x06c‡

	)

1142 
	#XK_Cyrûlic_≥
 0x06d0

	)

1143 
	#XK_Cyrûlic_ya
 0x06d1

	)

1144 
	#XK_Cyrûlic_î
 0x06d2

	)

1145 
	#XK_Cyrûlic_es
 0x06d3

	)

1146 
	#XK_Cyrûlic_ã
 0x06d4

	)

1147 
	#XK_Cyrûlic_u
 0x06d5

	)

1148 
	#XK_Cyrûlic_zhe
 0x06d6

	)

1149 
	#XK_Cyrûlic_ve
 0x06d7

	)

1150 
	#XK_Cyrûlic_so·sign
 0x06d8

	)

1151 
	#XK_Cyrûlic_yîu
 0x06d9

	)

1152 
	#XK_Cyrûlic_ze
 0x06d®

	)

1153 
	#XK_Cyrûlic_sha
 0x06db

	)

1154 
	#XK_Cyrûlic_e
 0x06d¯

	)

1155 
	#XK_Cyrûlic_shcha
 0x06dd

	)

1156 
	#XK_Cyrûlic_che
 0x06dê

	)

1157 
	#XK_Cyrûlic_h¨dsign
 0x06d‡

	)

1158 
	#XK_Cyrûlic_YU
 0x06e0

	)

1159 
	#XK_Cyrûlic_A
 0x06e1

	)

1160 
	#XK_Cyrûlic_BE
 0x06e2

	)

1161 
	#XK_Cyrûlic_TSE
 0x06e3

	)

1162 
	#XK_Cyrûlic_DE
 0x06e4

	)

1163 
	#XK_Cyrûlic_IE
 0x06e5

	)

1164 
	#XK_Cyrûlic_EF
 0x06e6

	)

1165 
	#XK_Cyrûlic_GHE
 0x06e7

	)

1166 
	#XK_Cyrûlic_HA
 0x06e8

	)

1167 
	#XK_Cyrûlic_I
 0x06e9

	)

1168 
	#XK_Cyrûlic_SHORTI
 0x06ó

	)

1169 
	#XK_Cyrûlic_KA
 0x06eb

	)

1170 
	#XK_Cyrûlic_EL
 0x06e¯

	)

1171 
	#XK_Cyrûlic_EM
 0x06ed

	)

1172 
	#XK_Cyrûlic_EN
 0x06ì

	)

1173 
	#XK_Cyrûlic_O
 0x06e‡

	)

1174 
	#XK_Cyrûlic_PE
 0x06f0

	)

1175 
	#XK_Cyrûlic_YA
 0x06f1

	)

1176 
	#XK_Cyrûlic_ER
 0x06f2

	)

1177 
	#XK_Cyrûlic_ES
 0x06f3

	)

1178 
	#XK_Cyrûlic_TE
 0x06f4

	)

1179 
	#XK_Cyrûlic_U
 0x06f5

	)

1180 
	#XK_Cyrûlic_ZHE
 0x06f6

	)

1181 
	#XK_Cyrûlic_VE
 0x06f7

	)

1182 
	#XK_Cyrûlic_SOFTSIGN
 0x06f8

	)

1183 
	#XK_Cyrûlic_YERU
 0x06f9

	)

1184 
	#XK_Cyrûlic_ZE
 0x06Á

	)

1185 
	#XK_Cyrûlic_SHA
 0x06fb

	)

1186 
	#XK_Cyrûlic_E
 0x06f¯

	)

1187 
	#XK_Cyrûlic_SHCHA
 0x06fd

	)

1188 
	#XK_Cyrûlic_CHE
 0x06„

	)

1189 
	#XK_Cyrûlic_HARDSIGN
 0x06f‡

	)

1198 #ifde‡
XK_GREEK


1199 
	#XK_Gªek_ALPHAac˚¡
 0x07a1

	)

1200 
	#XK_Gªek_EPSILONac˚¡
 0x07a2

	)

1201 
	#XK_Gªek_ETAac˚¡
 0x07a3

	)

1202 
	#XK_Gªek_IOTAac˚¡
 0x07a4

	)

1203 
	#XK_Gªek_IOTAdõªsis
 0x07a5

	)

1204 
	#XK_Gªek_IOTAdüîesis
 0x07a5

	)

1205 
	#XK_Gªek_OMICRONac˚¡
 0x07a7

	)

1206 
	#XK_Gªek_UPSILONac˚¡
 0x07a8

	)

1207 
	#XK_Gªek_UPSILONdõªsis
 0x07a9

	)

1208 
	#XK_Gªek_OMEGAac˚¡
 0x07ab

	)

1209 
	#XK_Gªek_ac˚¡dõªsis
 0x07´

	)

1210 
	#XK_Gªek_h‹izb¨
 0x07a‡

	)

1211 
	#XK_Gªek_ÆphØc˚¡
 0x07b1

	)

1212 
	#XK_Gªek_ïsû⁄ac˚¡
 0x07b2

	)

1213 
	#XK_Gªek_ëØc˚¡
 0x07b3

	)

1214 
	#XK_Gªek_iŸØc˚¡
 0x07b4

	)

1215 
	#XK_Gªek_iŸadõªsis
 0x07b5

	)

1216 
	#XK_Gªek_iŸØc˚¡dõªsis
 0x07b6

	)

1217 
	#XK_Gªek_omi¸⁄ac˚¡
 0x07b7

	)

1218 
	#XK_Gªek_upsû⁄ac˚¡
 0x07b8

	)

1219 
	#XK_Gªek_upsû⁄dõªsis
 0x07b9

	)

1220 
	#XK_Gªek_upsû⁄ac˚¡dõªsis
 0x07b®

	)

1221 
	#XK_Gªek_omegØc˚¡
 0x07bb

	)

1222 
	#XK_Gªek_ALPHA
 0x07c1

	)

1223 
	#XK_Gªek_BETA
 0x07c2

	)

1224 
	#XK_Gªek_GAMMA
 0x07c3

	)

1225 
	#XK_Gªek_DELTA
 0x07c4

	)

1226 
	#XK_Gªek_EPSILON
 0x07c5

	)

1227 
	#XK_Gªek_ZETA
 0x07c6

	)

1228 
	#XK_Gªek_ETA
 0x07c7

	)

1229 
	#XK_Gªek_THETA
 0x07c8

	)

1230 
	#XK_Gªek_IOTA
 0x07c9

	)

1231 
	#XK_Gªek_KAPPA
 0x07ˇ

	)

1232 
	#XK_Gªek_LAMDA
 0x07cb

	)

1233 
	#XK_Gªek_LAMBDA
 0x07cb

	)

1234 
	#XK_Gªek_MU
 0x07c¯

	)

1235 
	#XK_Gªek_NU
 0x07cd

	)

1236 
	#XK_Gªek_XI
 0x07˚

	)

1237 
	#XK_Gªek_OMICRON
 0x07c‡

	)

1238 
	#XK_Gªek_PI
 0x07d0

	)

1239 
	#XK_Gªek_RHO
 0x07d1

	)

1240 
	#XK_Gªek_SIGMA
 0x07d2

	)

1241 
	#XK_Gªek_TAU
 0x07d4

	)

1242 
	#XK_Gªek_UPSILON
 0x07d5

	)

1243 
	#XK_Gªek_PHI
 0x07d6

	)

1244 
	#XK_Gªek_CHI
 0x07d7

	)

1245 
	#XK_Gªek_PSI
 0x07d8

	)

1246 
	#XK_Gªek_OMEGA
 0x07d9

	)

1247 
	#XK_Gªek_Æpha
 0x07e1

	)

1248 
	#XK_Gªek_bëa
 0x07e2

	)

1249 
	#XK_Gªek_gamma
 0x07e3

	)

1250 
	#XK_Gªek_dñè
 0x07e4

	)

1251 
	#XK_Gªek_ïsû⁄
 0x07e5

	)

1252 
	#XK_Gªek_zëa
 0x07e6

	)

1253 
	#XK_Gªek_ëa
 0x07e7

	)

1254 
	#XK_Gªek_thëa
 0x07e8

	)

1255 
	#XK_Gªek_iŸa
 0x07e9

	)

1256 
	#XK_Gªek_k≠∑
 0x07ó

	)

1257 
	#XK_Gªek_œmda
 0x07eb

	)

1258 
	#XK_Gªek_œmbda
 0x07eb

	)

1259 
	#XK_Gªek_mu
 0x07e¯

	)

1260 
	#XK_Gªek_nu
 0x07ed

	)

1261 
	#XK_Gªek_xi
 0x07ì

	)

1262 
	#XK_Gªek_omi¸⁄
 0x07e‡

	)

1263 
	#XK_Gªek_pi
 0x07f0

	)

1264 
	#XK_Gªek_rho
 0x07f1

	)

1265 
	#XK_Gªek_sigma
 0x07f2

	)

1266 
	#XK_Gªek_föÆsmÆlsigma
 0x07f3

	)

1267 
	#XK_Gªek_èu
 0x07f4

	)

1268 
	#XK_Gªek_upsû⁄
 0x07f5

	)

1269 
	#XK_Gªek_phi
 0x07f6

	)

1270 
	#XK_Gªek_chi
 0x07f7

	)

1271 
	#XK_Gªek_psi
 0x07f8

	)

1272 
	#XK_Gªek_omega
 0x07f9

	)

1273 
	#XK_Gªek_swôch
 0xff7ê

	)

1282 #ifde‡
XK_TECHNICAL


1283 
	#XK_À·ødiˇl
 0x08a1

	)

1284 
	#XK_t›À·ødiˇl
 0x08a2

	)

1285 
	#XK_h‹izc⁄√˘‹
 0x08a3

	)

1286 
	#XK_t›öãgøl
 0x08a4

	)

1287 
	#XK_bŸöãgøl
 0x08a5

	)

1288 
	#XK_vîtc⁄√˘‹
 0x08a6

	)

1289 
	#XK_t›À·sqbøckë
 0x08a7

	)

1290 
	#XK_bŸÀ·sqbøckë
 0x08a8

	)

1291 
	#XK_t›rightsqbøckë
 0x08a9

	)

1292 
	#XK_bŸrightsqbøckë
 0x08Ø

	)

1293 
	#XK_t›À·∑ªns
 0x08ab

	)

1294 
	#XK_bŸÀ·∑ªns
 0x08a¯

	)

1295 
	#XK_t›righç¨ís
 0x08ad

	)

1296 
	#XK_bŸrighç¨ís
 0x08´

	)

1297 
	#XK_À·middÀcuæybø˚
 0x08a‡

	)

1298 
	#XK_rightmiddÀcuæybø˚
 0x08b0

	)

1299 
	#XK_t›À·summ©i⁄
 0x08b1

	)

1300 
	#XK_bŸÀ·summ©i⁄
 0x08b2

	)

1301 
	#XK_t›vîtsumm©i⁄c⁄√˘‹
 0x08b3

	)

1302 
	#XK_bŸvîtsumm©i⁄c⁄√˘‹
 0x08b4

	)

1303 
	#XK_t›rightsumm©i⁄
 0x08b5

	)

1304 
	#XK_bŸrightsumm©i⁄
 0x08b6

	)

1305 
	#XK_rightmiddÀsumm©i⁄
 0x08b7

	)

1306 
	#XK_Às°h™equÆ
 0x08b¯

	)

1307 
	#XK_nŸequÆ
 0x08bd

	)

1308 
	#XK_gª©îth™equÆ
 0x08bê

	)

1309 
	#XK_öãgøl
 0x08b‡

	)

1310 
	#XK_thîef‹e
 0x08c0

	)

1311 
	#XK_v¨üti⁄
 0x08c1

	)

1312 
	#XK_öföôy
 0x08c2

	)

1313 
	#XK_«bœ
 0x08c5

	)

1314 
	#XK_≠¥oxim©e
 0x08c8

	)

1315 
	#XK_simû¨equÆ
 0x08c9

	)

1316 
	#XK_if⁄lyif
 0x08cd

	)

1317 
	#XK_im∂õs
 0x08˚

	)

1318 
	#XK_idítiˇl
 0x08c‡

	)

1319 
	#XK_ødiˇl
 0x08d6

	)

1320 
	#XK_ö˛udedö
 0x08d®

	)

1321 
	#XK_ö˛udes
 0x08db

	)

1322 
	#XK_öãr£˘i⁄
 0x08d¯

	)

1323 
	#XK_uni⁄
 0x08dd

	)

1324 
	#XK_logiˇœnd
 0x08dê

	)

1325 
	#XK_logiˇl‹
 0x08d‡

	)

1326 
	#XK_∑πüldîiv©ive
 0x08e‡

	)

1327 
	#XK_fun˘i⁄
 0x08f6

	)

1328 
	#XK_À·¨row
 0x08fb

	)

1329 
	#XK_u∑ºow
 0x08f¯

	)

1330 
	#XK_righèºow
 0x08fd

	)

1331 
	#XK_dow«ºow
 0x08„

	)

1340 #ifde‡
XK_SPECIAL


1341 
	#XK_bœnk
 0x09df

	)

1342 
	#XK_sﬁiddüm⁄d
 0x09e0

	)

1343 
	#XK_checkîbﬂrd
 0x09e1

	)

1344 
	#XK_ht
 0x09e2

	)

1345 
	#XK_ff
 0x09e3

	)

1346 
	#XK_¸
 0x09e4

	)

1347 
	#XK_lf
 0x09e5

	)

1348 
	#XK_∆
 0x09e8

	)

1349 
	#XK_vt
 0x09e9

	)

1350 
	#XK_lowrightc‹√r
 0x09ó

	)

1351 
	#XK_u¥ightc‹√r
 0x09eb

	)

1352 
	#XK_u∂e·c‹√r
 0x09e¯

	)

1353 
	#XK_lowÀ·c‹√r
 0x09ed

	)

1354 
	#XK_¸ossöglöes
 0x09ì

	)

1355 
	#XK_h‹izlöesˇn1
 0x09e‡

	)

1356 
	#XK_h‹izlöesˇn3
 0x09f0

	)

1357 
	#XK_h‹izlöesˇn5
 0x09f1

	)

1358 
	#XK_h‹izlöesˇn7
 0x09f2

	)

1359 
	#XK_h‹izlöesˇn9
 0x09f3

	)

1360 
	#XK_À·t
 0x09f4

	)

1361 
	#XK_righâ
 0x09f5

	)

1362 
	#XK_bŸt
 0x09f6

	)

1363 
	#XK_t›t
 0x09f7

	)

1364 
	#XK_vîtb¨
 0x09f8

	)

1374 #ifde‡
XK_PUBLISHING


1375 
	#XK_em•a˚
 0x0Ø1

	)

1376 
	#XK_í•a˚
 0x0Ø2

	)

1377 
	#XK_em3•a˚
 0x0Ø3

	)

1378 
	#XK_em4•a˚
 0x0Ø4

	)

1379 
	#XK_digô•a˚
 0x0Ø5

	)

1380 
	#XK_pun˘•a˚
 0x0Ø6

	)

1381 
	#XK_thö•a˚
 0x0Ø7

	)

1382 
	#XK_haú•a˚
 0x0Ø8

	)

1383 
	#XK_emdash
 0x0Ø9

	)

1384 
	#XK_ídash
 0x0Ø®

	)

1385 
	#XK_signifbœnk
 0x0Ø¯

	)

1386 
	#XK_ñlùsis
 0x0Øê

	)

1387 
	#XK_doubba£löedŸ
 0x0Ø‡

	)

1388 
	#XK_⁄ëhúd
 0x0ab0

	)

1389 
	#XK_twŸhúds
 0x0ab1

	)

1390 
	#XK_⁄efi·h
 0x0ab2

	)

1391 
	#XK_twofi·hs
 0x0ab3

	)

1392 
	#XK_thªefi·hs
 0x0ab4

	)

1393 
	#XK_fourfi·hs
 0x0ab5

	)

1394 
	#XK_⁄esixth
 0x0ab6

	)

1395 
	#XK_fivesixths
 0x0ab7

	)

1396 
	#XK_ˇªof
 0x0ab8

	)

1397 
	#XK_figdash
 0x0abb

	)

1398 
	#XK_À·™gÀbøckë
 0x0ab¯

	)

1399 
	#XK_decimÆpoöt
 0x0abd

	)

1400 
	#XK_righèngÀbøckë
 0x0abê

	)

1401 
	#XK_m¨kî
 0x0abf

	)

1402 
	#XK_⁄ìighth
 0x0ac3

	)

1403 
	#XK_thªìighths
 0x0ac4

	)

1404 
	#XK_fivìighths
 0x0ac5

	)

1405 
	#XK_£víeighths
 0x0ac6

	)

1406 
	#XK_åadem¨k
 0x0ac9

	)

1407 
	#XK_sig«tuªm¨k
 0x0aˇ

	)

1408 
	#XK_åadem¨köcú˛e
 0x0acb

	)

1409 
	#XK_À·›íåüngÀ
 0x0ac¯

	)

1410 
	#XK_right›íåüngÀ
 0x0acd

	)

1411 
	#XK_em›ícú˛e
 0x0a˚

	)

1412 
	#XK_em›íª˘™gÀ
 0x0ac‡

	)

1413 
	#XK_À·sögÀquŸem¨k
 0x0ad0

	)

1414 
	#XK_rightsögÀquŸem¨k
 0x0ad1

	)

1415 
	#XK_À·doubÀquŸem¨k
 0x0ad2

	)

1416 
	#XK_rightdoubÀquŸem¨k
 0x0ad3

	)

1417 
	#XK_¥es¸ùti⁄
 0x0ad4

	)

1418 
	#XK_möuãs
 0x0ad6

	)

1419 
	#XK_£c⁄ds
 0x0ad7

	)

1420 
	#XK_œtö¸oss
 0x0ad9

	)

1421 
	#XK_hexagøm
 0x0ada

	)

1422 
	#XK_fûÀdª˘buŒë
 0x0adb

	)

1423 
	#XK_fûÀdÀ·åibuŒë
 0x0ad¯

	)

1424 
	#XK_fûÀdrighâribuŒë
 0x0add

	)

1425 
	#XK_emfûÀdcú˛e
 0x0adê

	)

1426 
	#XK_emfûÀdª˘
 0x0ad‡

	)

1427 
	#XK_í›ícúcbuŒë
 0x0´0

	)

1428 
	#XK_í›ísqu¨ebuŒë
 0x0´1

	)

1429 
	#XK_›íª˘buŒë
 0x0´2

	)

1430 
	#XK_›íåibuŒëup
 0x0´3

	)

1431 
	#XK_›íåibuŒëdown
 0x0´4

	)

1432 
	#XK_›í°¨
 0x0´5

	)

1433 
	#XK_ífûÀdcúcbuŒë
 0x0´6

	)

1434 
	#XK_ífûÀdsqbuŒë
 0x0´7

	)

1435 
	#XK_fûÀdåibuŒëup
 0x0´8

	)

1436 
	#XK_fûÀdåibuŒëdown
 0x0´9

	)

1437 
	#XK_À·poöãr
 0x0´®

	)

1438 
	#XK_righçoöãr
 0x0´b

	)

1439 
	#XK_˛ub
 0x0´¯

	)

1440 
	#XK_düm⁄d
 0x0´d

	)

1441 
	#XK_hóπ
 0x0´ê

	)

1442 
	#XK_mÆã£¸oss
 0x0af0

	)

1443 
	#XK_daggî
 0x0af1

	)

1444 
	#XK_doubÀdaggî
 0x0af2

	)

1445 
	#XK_checkm¨k
 0x0af3

	)

1446 
	#XK_bÆlŸ¸oss
 0x0af4

	)

1447 
	#XK_musiˇlsh¨p
 0x0af5

	)

1448 
	#XK_musiˇlÊ©
 0x0af6

	)

1449 
	#XK_mÆesymbﬁ
 0x0af7

	)

1450 
	#XK_„mÆesymbﬁ
 0x0af8

	)

1451 
	#XK_ãÀph⁄e
 0x0af9

	)

1452 
	#XK_ãÀph⁄îec‹dî
 0x0aÁ

	)

1453 
	#XK_ph⁄ogøphc›yright
 0x0afb

	)

1454 
	#XK_ˇªt
 0x0af¯

	)

1455 
	#XK_sögÀlowquŸem¨k
 0x0afd

	)

1456 
	#XK_doubÀlowquŸem¨k
 0x0a„

	)

1457 
	#XK_curs‹
 0x0aff

	)

1465 #ifde‡
XK_APL


1466 
	#XK_À·ˇªt
 0x0ba3

	)

1467 
	#XK_rightˇªt
 0x0ba6

	)

1468 
	#XK_downˇªt
 0x0ba8

	)

1469 
	#XK_upˇªt
 0x0ba9

	)

1470 
	#XK_ovîb¨
 0x0bc0

	)

1471 
	#XK_dow¡ack
 0x0bc2

	)

1472 
	#XK_upsh€
 0x0bc3

	)

1473 
	#XK_down°ûe
 0x0bc4

	)

1474 
	#XK_undîb¨
 0x0bc6

	)

1475 
	#XK_jŸ
 0x0bˇ

	)

1476 
	#XK_quad
 0x0bc¯

	)

1477 
	#XK_u±ack
 0x0b˚

	)

1478 
	#XK_cú˛e
 0x0bc‡

	)

1479 
	#XK_up°ûe
 0x0bd3

	)

1480 
	#XK_downsh€
 0x0bd6

	)

1481 
	#XK_rightsh€
 0x0bd8

	)

1482 
	#XK_À·sh€
 0x0bd®

	)

1483 
	#XK_À·èck
 0x0bd¯

	)

1484 
	#XK_righâack
 0x0bf¯

	)

1492 #ifde‡
XK_HEBREW


1493 
	#XK_hebªw_doubÀlowlöe
 0x0cd‡

	)

1494 
	#XK_hebªw_Æïh
 0x0˚0

	)

1495 
	#XK_hebªw_bë
 0x0˚1

	)

1496 
	#XK_hebªw_bëh
 0x0˚1

	)

1497 
	#XK_hebªw_gimñ
 0x0˚2

	)

1498 
	#XK_hebªw_gimmñ
 0x0˚2

	)

1499 
	#XK_hebªw_dÆë
 0x0˚3

	)

1500 
	#XK_hebªw_dÆëh
 0x0˚3

	)

1501 
	#XK_hebªw_he
 0x0˚4

	)

1502 
	#XK_hebªw_waw
 0x0˚5

	)

1503 
	#XK_hebªw_zaö
 0x0˚6

	)

1504 
	#XK_hebªw_zayö
 0x0˚6

	)

1505 
	#XK_hebªw_chë
 0x0˚7

	)

1506 
	#XK_hebªw_hë
 0x0˚7

	)

1507 
	#XK_hebªw_ãt
 0x0˚8

	)

1508 
	#XK_hebªw_ãth
 0x0˚8

	)

1509 
	#XK_hebªw_yod
 0x0˚9

	)

1510 
	#XK_hebªw_föÆk≠h
 0x0˚®

	)

1511 
	#XK_hebªw_k≠h
 0x0˚b

	)

1512 
	#XK_hebªw_œmed
 0x0˚¯

	)

1513 
	#XK_hebªw_föÆmem
 0x0˚d

	)

1514 
	#XK_hebªw_mem
 0x0˚ê

	)

1515 
	#XK_hebªw_föÆnun
 0x0˚‡

	)

1516 
	#XK_hebªw_nun
 0x0cf0

	)

1517 
	#XK_hebªw_ßmech
 0x0cf1

	)

1518 
	#XK_hebªw_ßmekh
 0x0cf1

	)

1519 
	#XK_hebªw_ayö
 0x0cf2

	)

1520 
	#XK_hebªw_föÆ≥
 0x0cf3

	)

1521 
	#XK_hebªw_≥
 0x0cf4

	)

1522 
	#XK_hebªw_föÆzade
 0x0cf5

	)

1523 
	#XK_hebªw_föÆzadi
 0x0cf5

	)

1524 
	#XK_hebªw_zade
 0x0cf6

	)

1525 
	#XK_hebªw_zadi
 0x0cf6

	)

1526 
	#XK_hebªw_q›h
 0x0cf7

	)

1527 
	#XK_hebªw_kuf
 0x0cf7

	)

1528 
	#XK_hebªw_ªsh
 0x0cf8

	)

1529 
	#XK_hebªw_shö
 0x0cf9

	)

1530 
	#XK_hebªw_èw
 0x0cÁ

	)

1531 
	#XK_hebªw_èf
 0x0cÁ

	)

1532 
	#XK_Hebªw_swôch
 0xff7ê

	)

1540 #ifde‡
XK_THAI


1541 
	#XK_Thai_kokai
 0x0da1

	)

1542 
	#XK_Thai_khokhai
 0x0da2

	)

1543 
	#XK_Thai_khokhu©
 0x0da3

	)

1544 
	#XK_Thai_khokhwai
 0x0da4

	)

1545 
	#XK_Thai_khokh⁄
 0x0da5

	)

1546 
	#XK_Thai_kh‹akh™g
 0x0da6

	)

1547 
	#XK_Thai_ng⁄gu
 0x0da7

	)

1548 
	#XK_Thai_choch™
 0x0da8

	)

1549 
	#XK_Thai_chochög
 0x0da9

	)

1550 
	#XK_Thai_choch™g
 0x0dØ

	)

1551 
	#XK_Thai_soso
 0x0dab

	)

1552 
	#XK_Thai_choch€
 0x0da¯

	)

1553 
	#XK_Thai_yoyög
 0x0dad

	)

1554 
	#XK_Thai_dochada
 0x0d´

	)

1555 
	#XK_Thai_t›©ak
 0x0da‡

	)

1556 
	#XK_Thai_thŸh™
 0x0db0

	)

1557 
	#XK_Thai_th⁄™gm⁄tho
 0x0db1

	)

1558 
	#XK_Thai_th›huthao
 0x0db2

	)

1559 
	#XK_Thai_n⁄í
 0x0db3

	)

1560 
	#XK_Thai_dodek
 0x0db4

	)

1561 
	#XK_Thai_tŸao
 0x0db5

	)

1562 
	#XK_Thai_thŸhung
 0x0db6

	)

1563 
	#XK_Thai_thŸhah™
 0x0db7

	)

1564 
	#XK_Thai_thŸh⁄g
 0x0db8

	)

1565 
	#XK_Thai_n⁄u
 0x0db9

	)

1566 
	#XK_Thai_bobaimai
 0x0db®

	)

1567 
	#XK_Thai_p›œ
 0x0dbb

	)

1568 
	#XK_Thai_ph›hung
 0x0db¯

	)

1569 
	#XK_Thai_foÁ
 0x0dbd

	)

1570 
	#XK_Thai_ph›h™
 0x0dbê

	)

1571 
	#XK_Thai_foÁn
 0x0db‡

	)

1572 
	#XK_Thai_phoßmphao
 0x0dc0

	)

1573 
	#XK_Thai_moma
 0x0dc1

	)

1574 
	#XK_Thai_yoyak
 0x0dc2

	)

1575 
	#XK_Thai_r‹ua
 0x0dc3

	)

1576 
	#XK_Thai_ru
 0x0dc4

	)

1577 
	#XK_Thai_lﬁög
 0x0dc5

	)

1578 
	#XK_Thai_lu
 0x0dc6

	)

1579 
	#XK_Thai_wow´n
 0x0dc7

	)

1580 
	#XK_Thai_soßœ
 0x0dc8

	)

1581 
	#XK_Thai_s‹usi
 0x0dc9

	)

1582 
	#XK_Thai_sosua
 0x0dˇ

	)

1583 
	#XK_Thai_hohù
 0x0dcb

	)

1584 
	#XK_Thai_lochuœ
 0x0dc¯

	)

1585 
	#XK_Thai_ﬂng
 0x0dcd

	)

1586 
	#XK_Thai_h⁄okhuk
 0x0d˚

	)

1587 
	#XK_Thai_∑iy™noi
 0x0dc‡

	)

1588 
	#XK_Thai_ßøa
 0x0dd0

	)

1589 
	#XK_Thai_maih™ak©
 0x0dd1

	)

1590 
	#XK_Thai_ßøØ
 0x0dd2

	)

1591 
	#XK_Thai_ßøam
 0x0dd3

	)

1592 
	#XK_Thai_ßøi
 0x0dd4

	)

1593 
	#XK_Thai_ßøii
 0x0dd5

	)

1594 
	#XK_Thai_ßøue
 0x0dd6

	)

1595 
	#XK_Thai_ßøuì
 0x0dd7

	)

1596 
	#XK_Thai_ßøu
 0x0dd8

	)

1597 
	#XK_Thai_ßøuu
 0x0dd9

	)

1598 
	#XK_Thai_phöthu
 0x0dd®

	)

1599 
	#XK_Thai_maih™ak©_maôho
 0x0dde

	)

1600 
	#XK_Thai_baht
 0x0dd‡

	)

1601 
	#XK_Thai_ßøe
 0x0de0

	)

1602 
	#XK_Thai_ßø´
 0x0de1

	)

1603 
	#XK_Thai_ßøo
 0x0de2

	)

1604 
	#XK_Thai_ßøaimaimu™
 0x0de3

	)

1605 
	#XK_Thai_ßøaimaimÆai
 0x0de4

	)

1606 
	#XK_Thai_œkkh™gyao
 0x0de5

	)

1607 
	#XK_Thai_maiyamok
 0x0de6

	)

1608 
	#XK_Thai_maôaikhu
 0x0de7

	)

1609 
	#XK_Thai_maõk
 0x0de8

	)

1610 
	#XK_Thai_maôho
 0x0de9

	)

1611 
	#XK_Thai_maôri
 0x0dó

	)

1612 
	#XK_Thai_maich©èwa
 0x0deb

	)

1613 
	#XK_Thai_th™thakh©
 0x0de¯

	)

1614 
	#XK_Thai_nikhahô
 0x0ded

	)

1615 
	#XK_Thai_Àksun
 0x0df0

	)

1616 
	#XK_Thai_Àknung
 0x0df1

	)

1617 
	#XK_Thai_Àks⁄g
 0x0df2

	)

1618 
	#XK_Thai_Àkßm
 0x0df3

	)

1619 
	#XK_Thai_Àksi
 0x0df4

	)

1620 
	#XK_Thai_Àkha
 0x0df5

	)

1621 
	#XK_Thai_Àkhok
 0x0df6

	)

1622 
	#XK_Thai_Àkchë
 0x0df7

	)

1623 
	#XK_Thai_Àk∑ë
 0x0df8

	)

1624 
	#XK_Thai_Àkkao
 0x0df9

	)

1632 #ifde‡
XK_KOREAN


1634 
	#XK_H™gul
 0xff31

	)

1635 
	#XK_H™gul_Sèπ
 0xff32

	)

1636 
	#XK_H™gul_End
 0xff33

	)

1637 
	#XK_H™gul_H™ja
 0xff34

	)

1638 
	#XK_H™gul_Jamo
 0xff35

	)

1639 
	#XK_H™gul_Romaja
 0xff36

	)

1640 
	#XK_H™gul_Codeöput
 0xff37

	)

1641 
	#XK_H™gul_Je⁄ja
 0xff38

	)

1642 
	#XK_H™gul_B™ja
 0xff39

	)

1643 
	#XK_H™gul_PªH™ja
 0xff3®

	)

1644 
	#XK_H™gul_Po°H™ja
 0xff3b

	)

1645 
	#XK_H™gul_SögÀC™did©e
 0xff3¯

	)

1646 
	#XK_H™gul_Mu…ùÀC™did©e
 0xff3d

	)

1647 
	#XK_H™gul_PªviousC™did©e
 0xff3ê

	)

1648 
	#XK_H™gul_S≥cül
 0xff3‡

	)

1649 
	#XK_H™gul_swôch
 0xff7ê

	)

1652 
	#XK_H™gul_Kiyeog
 0x0ó1

	)

1653 
	#XK_H™gul_SßngKiyeog
 0x0ó2

	)

1654 
	#XK_H™gul_KiyeogSios
 0x0ó3

	)

1655 
	#XK_H™gul_Nõun
 0x0ó4

	)

1656 
	#XK_H™gul_NõunJõuj
 0x0ó5

	)

1657 
	#XK_H™gul_NõunHõuh
 0x0ó6

	)

1658 
	#XK_H™gul_Dikeud
 0x0ó7

	)

1659 
	#XK_H™gul_SßngDikeud
 0x0ó8

	)

1660 
	#XK_H™gul_Rõul
 0x0ó9

	)

1661 
	#XK_H™gul_RõulKiyeog
 0x0óa

	)

1662 
	#XK_H™gul_RõulMõum
 0x0ób

	)

1663 
	#XK_H™gul_RõulPõub
 0x0óc

	)

1664 
	#XK_H™gul_RõulSios
 0x0ód

	)

1665 
	#XK_H™gul_RõulTõut
 0x0óe

	)

1666 
	#XK_H™gul_RõulPhõuf
 0x0óf

	)

1667 
	#XK_H™gul_RõulHõuh
 0x0eb0

	)

1668 
	#XK_H™gul_Mõum
 0x0eb1

	)

1669 
	#XK_H™gul_Põub
 0x0eb2

	)

1670 
	#XK_H™gul_SßngPõub
 0x0eb3

	)

1671 
	#XK_H™gul_PõubSios
 0x0eb4

	)

1672 
	#XK_H™gul_Sios
 0x0eb5

	)

1673 
	#XK_H™gul_SßngSios
 0x0eb6

	)

1674 
	#XK_H™gul_Ieung
 0x0eb7

	)

1675 
	#XK_H™gul_Jõuj
 0x0eb8

	)

1676 
	#XK_H™gul_SßngJõuj
 0x0eb9

	)

1677 
	#XK_H™gul_Cõuc
 0x0eba

	)

1678 
	#XK_H™gul_Khõuq
 0x0ebb

	)

1679 
	#XK_H™gul_Tõut
 0x0ebc

	)

1680 
	#XK_H™gul_Phõuf
 0x0ebd

	)

1681 
	#XK_H™gul_Hõuh
 0x0ebe

	)

1684 
	#XK_H™gul_A
 0x0ebf

	)

1685 
	#XK_H™gul_AE
 0x0ec0

	)

1686 
	#XK_H™gul_YA
 0x0ec1

	)

1687 
	#XK_H™gul_YAE
 0x0ec2

	)

1688 
	#XK_H™gul_EO
 0x0ec3

	)

1689 
	#XK_H™gul_E
 0x0ec4

	)

1690 
	#XK_H™gul_YEO
 0x0ec5

	)

1691 
	#XK_H™gul_YE
 0x0ec6

	)

1692 
	#XK_H™gul_O
 0x0ec7

	)

1693 
	#XK_H™gul_WA
 0x0ec8

	)

1694 
	#XK_H™gul_WAE
 0x0ec9

	)

1695 
	#XK_H™gul_OE
 0x0eˇ

	)

1696 
	#XK_H™gul_YO
 0x0ecb

	)

1697 
	#XK_H™gul_U
 0x0ecc

	)

1698 
	#XK_H™gul_WEO
 0x0ecd

	)

1699 
	#XK_H™gul_WE
 0x0e˚

	)

1700 
	#XK_H™gul_WI
 0x0ecf

	)

1701 
	#XK_H™gul_YU
 0x0ed0

	)

1702 
	#XK_H™gul_EU
 0x0ed1

	)

1703 
	#XK_H™gul_YI
 0x0ed2

	)

1704 
	#XK_H™gul_I
 0x0ed3

	)

1707 
	#XK_H™gul_J_Kiyeog
 0x0ed4

	)

1708 
	#XK_H™gul_J_SßngKiyeog
 0x0ed5

	)

1709 
	#XK_H™gul_J_KiyeogSios
 0x0ed6

	)

1710 
	#XK_H™gul_J_Nõun
 0x0ed7

	)

1711 
	#XK_H™gul_J_NõunJõuj
 0x0ed8

	)

1712 
	#XK_H™gul_J_NõunHõuh
 0x0ed9

	)

1713 
	#XK_H™gul_J_Dikeud
 0x0eda

	)

1714 
	#XK_H™gul_J_Rõul
 0x0edb

	)

1715 
	#XK_H™gul_J_RõulKiyeog
 0x0edc

	)

1716 
	#XK_H™gul_J_RõulMõum
 0x0edd

	)

1717 
	#XK_H™gul_J_RõulPõub
 0x0ede

	)

1718 
	#XK_H™gul_J_RõulSios
 0x0edf

	)

1719 
	#XK_H™gul_J_RõulTõut
 0x0ì0

	)

1720 
	#XK_H™gul_J_RõulPhõuf
 0x0ì1

	)

1721 
	#XK_H™gul_J_RõulHõuh
 0x0ì2

	)

1722 
	#XK_H™gul_J_Mõum
 0x0ì3

	)

1723 
	#XK_H™gul_J_Põub
 0x0ì4

	)

1724 
	#XK_H™gul_J_PõubSios
 0x0ì5

	)

1725 
	#XK_H™gul_J_Sios
 0x0ì6

	)

1726 
	#XK_H™gul_J_SßngSios
 0x0ì7

	)

1727 
	#XK_H™gul_J_Ieung
 0x0ì8

	)

1728 
	#XK_H™gul_J_Jõuj
 0x0ì9

	)

1729 
	#XK_H™gul_J_Cõuc
 0x0ìa

	)

1730 
	#XK_H™gul_J_Khõuq
 0x0ìb

	)

1731 
	#XK_H™gul_J_Tõut
 0x0ìc

	)

1732 
	#XK_H™gul_J_Phõuf
 0x0ìd

	)

1733 
	#XK_H™gul_J_Hõuh
 0x0ìe

	)

1736 
	#XK_H™gul_RõulYe‹öHõuh
 0x0ìf

	)

1737 
	#XK_H™gul_Sunkye⁄geumMõum
 0x0ef0

	)

1738 
	#XK_H™gul_Sunkye⁄geumPõub
 0x0ef1

	)

1739 
	#XK_H™gul_P™Sios
 0x0ef2

	)

1740 
	#XK_H™gul_KkogjiDÆröIeung
 0x0ef3

	)

1741 
	#XK_H™gul_Sunkye⁄geumPhõuf
 0x0ef4

	)

1742 
	#XK_H™gul_Ye‹öHõuh
 0x0ef5

	)

1745 
	#XK_H™gul_AøeA
 0x0ef6

	)

1746 
	#XK_H™gul_AøeAE
 0x0ef7

	)

1749 
	#XK_H™gul_J_P™Sios
 0x0ef8

	)

1750 
	#XK_H™gul_J_KkogjiDÆröIeung
 0x0ef9

	)

1751 
	#XK_H™gul_J_Ye‹öHõuh
 0x0eÁ

	)

1754 
	#XK_K‹ón_W⁄
 0x0ef‡

	)

1762 #ifde‡
XK_ARMENIAN


1763 
	#XK_Armíün_lig©uª_ew
 0x1000587

	)

1764 
	#XK_Armíün_fuŒ_°›
 0x1000589

	)

1765 
	#XK_Armíün_vîjakë
 0x1000589

	)

1766 
	#XK_Armíün_£∑øti⁄_m¨k
 0x100055d

	)

1767 
	#XK_Armíün_but
 0x100055d

	)

1768 
	#XK_Armíün_hyphí
 0x100058®

	)

1769 
	#XK_Armíün_yíèm«
 0x100058®

	)

1770 
	#XK_Armíün_ex˛am
 0x100055¯

	)

1771 
	#XK_Armíün_am™ak
 0x100055¯

	)

1772 
	#XK_Armíün_ac˚¡
 0x100055b

	)

1773 
	#XK_Armíün_shesht
 0x100055b

	)

1774 
	#XK_Armíün_que°i⁄
 0x100055ê

	)

1775 
	#XK_Armíün_∑ruyk
 0x100055ê

	)

1776 
	#XK_Armíün_AYB
 0x1000531

	)

1777 
	#XK_Armíün_ayb
 0x1000561

	)

1778 
	#XK_Armíün_BEN
 0x1000532

	)

1779 
	#XK_Armíün_bí
 0x1000562

	)

1780 
	#XK_Armíün_GIM
 0x1000533

	)

1781 
	#XK_Armíün_gim
 0x1000563

	)

1782 
	#XK_Armíün_DA
 0x1000534

	)

1783 
	#XK_Armíün_da
 0x1000564

	)

1784 
	#XK_Armíün_YECH
 0x1000535

	)

1785 
	#XK_Armíün_yech
 0x1000565

	)

1786 
	#XK_Armíün_ZA
 0x1000536

	)

1787 
	#XK_Armíün_za
 0x1000566

	)

1788 
	#XK_Armíün_E
 0x1000537

	)

1789 
	#XK_Armíün_e
 0x1000567

	)

1790 
	#XK_Armíün_AT
 0x1000538

	)

1791 
	#XK_Armíün_©
 0x1000568

	)

1792 
	#XK_Armíün_TO
 0x1000539

	)

1793 
	#XK_Armíün_to
 0x1000569

	)

1794 
	#XK_Armíün_ZHE
 0x100053®

	)

1795 
	#XK_Armíün_zhe
 0x100056®

	)

1796 
	#XK_Armíün_INI
 0x100053b

	)

1797 
	#XK_Armíün_öi
 0x100056b

	)

1798 
	#XK_Armíün_LYUN
 0x100053¯

	)

1799 
	#XK_Armíün_lyun
 0x100056¯

	)

1800 
	#XK_Armíün_KHE
 0x100053d

	)

1801 
	#XK_Armíün_khe
 0x100056d

	)

1802 
	#XK_Armíün_TSA
 0x100053ê

	)

1803 
	#XK_Armíün_tß
 0x100056ê

	)

1804 
	#XK_Armíün_KEN
 0x100053‡

	)

1805 
	#XK_Armíün_kí
 0x100056‡

	)

1806 
	#XK_Armíün_HO
 0x1000540

	)

1807 
	#XK_Armíün_ho
 0x1000570

	)

1808 
	#XK_Armíün_DZA
 0x1000541

	)

1809 
	#XK_Armíün_dza
 0x1000571

	)

1810 
	#XK_Armíün_GHAT
 0x1000542

	)

1811 
	#XK_Armíün_gh©
 0x1000572

	)

1812 
	#XK_Armíün_TCHE
 0x1000543

	)

1813 
	#XK_Armíün_tche
 0x1000573

	)

1814 
	#XK_Armíün_MEN
 0x1000544

	)

1815 
	#XK_Armíün_mí
 0x1000574

	)

1816 
	#XK_Armíün_HI
 0x1000545

	)

1817 
	#XK_Armíün_hi
 0x1000575

	)

1818 
	#XK_Armíün_NU
 0x1000546

	)

1819 
	#XK_Armíün_nu
 0x1000576

	)

1820 
	#XK_Armíün_SHA
 0x1000547

	)

1821 
	#XK_Armíün_sha
 0x1000577

	)

1822 
	#XK_Armíün_VO
 0x1000548

	)

1823 
	#XK_Armíün_vo
 0x1000578

	)

1824 
	#XK_Armíün_CHA
 0x1000549

	)

1825 
	#XK_Armíün_cha
 0x1000579

	)

1826 
	#XK_Armíün_PE
 0x100054®

	)

1827 
	#XK_Armíün_≥
 0x100057®

	)

1828 
	#XK_Armíün_JE
 0x100054b

	)

1829 
	#XK_Armíün_je
 0x100057b

	)

1830 
	#XK_Armíün_RA
 0x100054¯

	)

1831 
	#XK_Armíün_ø
 0x100057¯

	)

1832 
	#XK_Armíün_SE
 0x100054d

	)

1833 
	#XK_Armíün_£
 0x100057d

	)

1834 
	#XK_Armíün_VEV
 0x100054ê

	)

1835 
	#XK_Armíün_vev
 0x100057ê

	)

1836 
	#XK_Armíün_TYUN
 0x100054‡

	)

1837 
	#XK_Armíün_tyun
 0x100057‡

	)

1838 
	#XK_Armíün_RE
 0x1000550

	)

1839 
	#XK_Armíün_ª
 0x1000580

	)

1840 
	#XK_Armíün_TSO
 0x1000551

	)

1841 
	#XK_Armíün_tso
 0x1000581

	)

1842 
	#XK_Armíün_VYUN
 0x1000552

	)

1843 
	#XK_Armíün_vyun
 0x1000582

	)

1844 
	#XK_Armíün_PYUR
 0x1000553

	)

1845 
	#XK_Armíün_pyur
 0x1000583

	)

1846 
	#XK_Armíün_KE
 0x1000554

	)

1847 
	#XK_Armíün_ke
 0x1000584

	)

1848 
	#XK_Armíün_O
 0x1000555

	)

1849 
	#XK_Armíün_o
 0x1000585

	)

1850 
	#XK_Armíün_FE
 0x1000556

	)

1851 
	#XK_Armíün_„
 0x1000586

	)

1852 
	#XK_Armíün_≠o°r›he
 0x100055®

	)

1859 #ifde‡
XK_GEORGIAN


1860 
	#XK_Ge‹gün_™
 0x10010d0

	)

1861 
	#XK_Ge‹gün_b™
 0x10010d1

	)

1862 
	#XK_Ge‹gün_g™
 0x10010d2

	)

1863 
	#XK_Ge‹gün_d⁄
 0x10010d3

	)

1864 
	#XK_Ge‹gün_í
 0x10010d4

	)

1865 
	#XK_Ge‹gün_vö
 0x10010d5

	)

1866 
	#XK_Ge‹gün_zí
 0x10010d6

	)

1867 
	#XK_Ge‹gün_èn
 0x10010d7

	)

1868 
	#XK_Ge‹gün_ö
 0x10010d8

	)

1869 
	#XK_Ge‹gün_k™
 0x10010d9

	)

1870 
	#XK_Ge‹gün_œs
 0x10010d®

	)

1871 
	#XK_Ge‹gün_m™
 0x10010db

	)

1872 
	#XK_Ge‹gün_«r
 0x10010d¯

	)

1873 
	#XK_Ge‹gün_⁄
 0x10010dd

	)

1874 
	#XK_Ge‹gün_∑r
 0x10010dê

	)

1875 
	#XK_Ge‹gün_zh¨
 0x10010d‡

	)

1876 
	#XK_Ge‹gün_øe
 0x10010e0

	)

1877 
	#XK_Ge‹gün_ßn
 0x10010e1

	)

1878 
	#XK_Ge‹gün_èr
 0x10010e2

	)

1879 
	#XK_Ge‹gün_un
 0x10010e3

	)

1880 
	#XK_Ge‹gün_ph¨
 0x10010e4

	)

1881 
	#XK_Ge‹gün_kh¨
 0x10010e5

	)

1882 
	#XK_Ge‹gün_gh™
 0x10010e6

	)

1883 
	#XK_Ge‹gün_q¨
 0x10010e7

	)

1884 
	#XK_Ge‹gün_shö
 0x10010e8

	)

1885 
	#XK_Ge‹gün_chö
 0x10010e9

	)

1886 
	#XK_Ge‹gün_ˇn
 0x10010ó

	)

1887 
	#XK_Ge‹gün_jû
 0x10010eb

	)

1888 
	#XK_Ge‹gün_cû
 0x10010e¯

	)

1889 
	#XK_Ge‹gün_ch¨
 0x10010ed

	)

1890 
	#XK_Ge‹gün_x™
 0x10010ì

	)

1891 
	#XK_Ge‹gün_jh™
 0x10010e‡

	)

1892 
	#XK_Ge‹gün_h´
 0x10010f0

	)

1893 
	#XK_Ge‹gün_he
 0x10010f1

	)

1894 
	#XK_Ge‹gün_hõ
 0x10010f2

	)

1895 
	#XK_Ge‹gün_we
 0x10010f3

	)

1896 
	#XK_Ge‹gün_h¨
 0x10010f4

	)

1897 
	#XK_Ge‹gün_h€
 0x10010f5

	)

1898 
	#XK_Ge‹gün_fi
 0x10010f6

	)

1905 #ifde‡
XK_CAUCASUS


1907 
	#XK_XabovedŸ
 0x1001e8®

	)

1908 
	#XK_Ibªve
 0x100012¯

	)

1909 
	#XK_Z°roke
 0x10001b5

	)

1910 
	#XK_Gˇr⁄
 0x10001e6

	)

1911 
	#XK_Oˇr⁄
 0x10001d1

	)

1912 
	#XK_Ob¨ªd
 0x100019‡

	)

1913 
	#XK_xabovedŸ
 0x1001e8b

	)

1914 
	#XK_ibªve
 0x100012d

	)

1915 
	#XK_z°roke
 0x10001b6

	)

1916 
	#XK_gˇr⁄
 0x10001e7

	)

1917 
	#XK_oˇr⁄
 0x10001d2

	)

1918 
	#XK_ob¨ªd
 0x1000275

	)

1919 
	#XK_SCHWA
 0x100018‡

	)

1920 
	#XK_schwa
 0x1000259

	)

1923 
	#XK_LbñowdŸ
 0x1001e36

	)

1924 
	#XK_lbñowdŸ
 0x1001e37

	)

1931 #ifde‡
XK_VIETNAMESE


1932 
	#XK_AbñowdŸ
 0x1001ó0

	)

1933 
	#XK_abñowdŸ
 0x1001ó1

	)

1934 
	#XK_Ahook
 0x1001ó2

	)

1935 
	#XK_ahook
 0x1001ó3

	)

1936 
	#XK_AcúcumÊexacuã
 0x1001ó4

	)

1937 
	#XK_acúcumÊexacuã
 0x1001ó5

	)

1938 
	#XK_AcúcumÊexgøve
 0x1001ó6

	)

1939 
	#XK_acúcumÊexgøve
 0x1001ó7

	)

1940 
	#XK_AcúcumÊexhook
 0x1001ó8

	)

1941 
	#XK_acúcumÊexhook
 0x1001ó9

	)

1942 
	#XK_AcúcumÊextûde
 0x1001ó®

	)

1943 
	#XK_acúcumÊextûde
 0x1001ób

	)

1944 
	#XK_AcúcumÊexbñowdŸ
 0x1001ó¯

	)

1945 
	#XK_acúcumÊexbñowdŸ
 0x1001ód

	)

1946 
	#XK_Abªvócuã
 0x1001óê

	)

1947 
	#XK_abªvócuã
 0x1001ó‡

	)

1948 
	#XK_Abªvegøve
 0x1001eb0

	)

1949 
	#XK_abªvegøve
 0x1001eb1

	)

1950 
	#XK_Abªvehook
 0x1001eb2

	)

1951 
	#XK_abªvehook
 0x1001eb3

	)

1952 
	#XK_Abªvëûde
 0x1001eb4

	)

1953 
	#XK_abªvëûde
 0x1001eb5

	)

1954 
	#XK_AbªvebñowdŸ
 0x1001eb6

	)

1955 
	#XK_abªvebñowdŸ
 0x1001eb7

	)

1956 
	#XK_EbñowdŸ
 0x1001eb8

	)

1957 
	#XK_ebñowdŸ
 0x1001eb9

	)

1958 
	#XK_Ehook
 0x1001eb®

	)

1959 
	#XK_ehook
 0x1001ebb

	)

1960 
	#XK_Etûde
 0x1001eb¯

	)

1961 
	#XK_ëûde
 0x1001ebd

	)

1962 
	#XK_EcúcumÊexacuã
 0x1001ebê

	)

1963 
	#XK_ecúcumÊexacuã
 0x1001eb‡

	)

1964 
	#XK_EcúcumÊexgøve
 0x1001ec0

	)

1965 
	#XK_ecúcumÊexgøve
 0x1001ec1

	)

1966 
	#XK_EcúcumÊexhook
 0x1001ec2

	)

1967 
	#XK_ecúcumÊexhook
 0x1001ec3

	)

1968 
	#XK_EcúcumÊextûde
 0x1001ec4

	)

1969 
	#XK_ecúcumÊextûde
 0x1001ec5

	)

1970 
	#XK_EcúcumÊexbñowdŸ
 0x1001ec6

	)

1971 
	#XK_ecúcumÊexbñowdŸ
 0x1001ec7

	)

1972 
	#XK_Ihook
 0x1001ec8

	)

1973 
	#XK_ihook
 0x1001ec9

	)

1974 
	#XK_IbñowdŸ
 0x1001eˇ

	)

1975 
	#XK_ibñowdŸ
 0x1001ecb

	)

1976 
	#XK_ObñowdŸ
 0x1001ec¯

	)

1977 
	#XK_obñowdŸ
 0x1001ecd

	)

1978 
	#XK_Ohook
 0x1001e˚

	)

1979 
	#XK_ohook
 0x1001ec‡

	)

1980 
	#XK_OcúcumÊexacuã
 0x1001ed0

	)

1981 
	#XK_ocúcumÊexacuã
 0x1001ed1

	)

1982 
	#XK_OcúcumÊexgøve
 0x1001ed2

	)

1983 
	#XK_ocúcumÊexgøve
 0x1001ed3

	)

1984 
	#XK_OcúcumÊexhook
 0x1001ed4

	)

1985 
	#XK_ocúcumÊexhook
 0x1001ed5

	)

1986 
	#XK_OcúcumÊextûde
 0x1001ed6

	)

1987 
	#XK_ocúcumÊextûde
 0x1001ed7

	)

1988 
	#XK_OcúcumÊexbñowdŸ
 0x1001ed8

	)

1989 
	#XK_ocúcumÊexbñowdŸ
 0x1001ed9

	)

1990 
	#XK_Oh‹«cuã
 0x1001ed®

	)

1991 
	#XK_oh‹«cuã
 0x1001edb

	)

1992 
	#XK_Oh‹ngøve
 0x1001ed¯

	)

1993 
	#XK_oh‹ngøve
 0x1001edd

	)

1994 
	#XK_Oh‹nhook
 0x1001edê

	)

1995 
	#XK_oh‹nhook
 0x1001ed‡

	)

1996 
	#XK_Oh‹¡ûde
 0x1001ì0

	)

1997 
	#XK_oh‹¡ûde
 0x1001ì1

	)

1998 
	#XK_Oh‹nbñowdŸ
 0x1001ì2

	)

1999 
	#XK_oh‹nbñowdŸ
 0x1001ì3

	)

2000 
	#XK_UbñowdŸ
 0x1001ì4

	)

2001 
	#XK_ubñowdŸ
 0x1001ì5

	)

2002 
	#XK_Uhook
 0x1001ì6

	)

2003 
	#XK_uhook
 0x1001ì7

	)

2004 
	#XK_Uh‹«cuã
 0x1001ì8

	)

2005 
	#XK_uh‹«cuã
 0x1001ì9

	)

2006 
	#XK_Uh‹ngøve
 0x1001ì®

	)

2007 
	#XK_uh‹ngøve
 0x1001ìb

	)

2008 
	#XK_Uh‹nhook
 0x1001ì¯

	)

2009 
	#XK_uh‹nhook
 0x1001ìd

	)

2010 
	#XK_Uh‹¡ûde
 0x1001ìê

	)

2011 
	#XK_uh‹¡ûde
 0x1001ì‡

	)

2012 
	#XK_Uh‹nbñowdŸ
 0x1001ef0

	)

2013 
	#XK_uh‹nbñowdŸ
 0x1001ef1

	)

2014 
	#XK_YbñowdŸ
 0x1001ef4

	)

2015 
	#XK_ybñowdŸ
 0x1001ef5

	)

2016 
	#XK_Yhook
 0x1001ef6

	)

2017 
	#XK_yhook
 0x1001ef7

	)

2018 
	#XK_Ytûde
 0x1001ef8

	)

2019 
	#XK_ytûde
 0x1001ef9

	)

2020 
	#XK_Oh‹n
 0x10001a0

	)

2021 
	#XK_oh‹n
 0x10001a1

	)

2022 
	#XK_Uh‹n
 0x10001a‡

	)

2023 
	#XK_uh‹n
 0x10001b0

	)

2027 #ifde‡
XK_CURRENCY


2028 
	#XK_EcuSign
 0x10020a0

	)

2029 
	#XK_Cﬁ⁄Sign
 0x10020a1

	)

2030 
	#XK_CruzeúoSign
 0x10020a2

	)

2031 
	#XK_FFøncSign
 0x10020a3

	)

2032 
	#XK_LúaSign
 0x10020a4

	)

2033 
	#XK_MûlSign
 0x10020a5

	)

2034 
	#XK_NaúaSign
 0x10020a6

	)

2035 
	#XK_Pe£èSign
 0x10020a7

	)

2036 
	#XK_Ru≥eSign
 0x10020a8

	)

2037 
	#XK_W⁄Sign
 0x10020a9

	)

2038 
	#XK_NewSheqñSign
 0x10020Ø

	)

2039 
	#XK_D⁄gSign
 0x10020ab

	)

2040 
	#XK_EuroSign
 0x20a¯

	)

2043 #ifde‡
XK_MATHEMATICAL


2045 
	#XK_zîosu≥ri‹
 0x1002070

	)

2046 
	#XK_foursu≥ri‹
 0x1002074

	)

2047 
	#XK_fivesu≥ri‹
 0x1002075

	)

2048 
	#XK_sixsu≥ri‹
 0x1002076

	)

2049 
	#XK_£vísu≥ri‹
 0x1002077

	)

2050 
	#XK_eightsu≥ri‹
 0x1002078

	)

2051 
	#XK_nöesu≥ri‹
 0x1002079

	)

2052 
	#XK_zîosubs¸ùt
 0x1002080

	)

2053 
	#XK_⁄esubs¸ùt
 0x1002081

	)

2054 
	#XK_twosubs¸ùt
 0x1002082

	)

2055 
	#XK_thªesubs¸ùt
 0x1002083

	)

2056 
	#XK_foursubs¸ùt
 0x1002084

	)

2057 
	#XK_fivesubs¸ùt
 0x1002085

	)

2058 
	#XK_sixsubs¸ùt
 0x1002086

	)

2059 
	#XK_£vísubs¸ùt
 0x1002087

	)

2060 
	#XK_eightsubs¸ùt
 0x1002088

	)

2061 
	#XK_nöesubs¸ùt
 0x1002089

	)

2062 
	#XK_∑πdif„ª¡ül
 0x1002202

	)

2063 
	#XK_em±y£t
 0x1002205

	)

2064 
	#XK_ñemítof
 0x1002208

	)

2065 
	#XK_nŸñemítof
 0x1002209

	)

2066 
	#XK_c⁄èößs
 0x100220B

	)

2067 
	#XK_squ¨îoŸ
 0x100221A

	)

2068 
	#XK_cubîoŸ
 0x100221B

	)

2069 
	#XK_fouπhroŸ
 0x100221C

	)

2070 
	#XK_döãgøl
 0x100222C

	)

2071 
	#XK_töãgøl
 0x100222D

	)

2072 
	#XK_beˇu£
 0x1002235

	)

2073 
	#XK_≠¥oxeq
 0x1002248

	)

2074 
	#XK_nŸ≠¥oxeq
 0x1002247

	)

2075 
	#XK_nŸidítiˇl
 0x1002262

	)

2076 
	#XK_°ri˘eq
 0x1002263

	)

2079 #ifde‡
XK_BRAILLE


2080 
	#XK_bøûÀ_dŸ_1
 0xfff1

	)

2081 
	#XK_bøûÀ_dŸ_2
 0xfff2

	)

2082 
	#XK_bøûÀ_dŸ_3
 0xfff3

	)

2083 
	#XK_bøûÀ_dŸ_4
 0xfff4

	)

2084 
	#XK_bøûÀ_dŸ_5
 0xfff5

	)

2085 
	#XK_bøûÀ_dŸ_6
 0xfff6

	)

2086 
	#XK_bøûÀ_dŸ_7
 0xfff7

	)

2087 
	#XK_bøûÀ_dŸ_8
 0xfff8

	)

2088 
	#XK_bøûÀ_dŸ_9
 0xfff9

	)

2089 
	#XK_bøûÀ_dŸ_10
 0xffÁ

	)

2090 
	#XK_bøûÀ_bœnk
 0x1002800

	)

2091 
	#XK_bøûÀ_dŸs_1
 0x1002801

	)

2092 
	#XK_bøûÀ_dŸs_2
 0x1002802

	)

2093 
	#XK_bøûÀ_dŸs_12
 0x1002803

	)

2094 
	#XK_bøûÀ_dŸs_3
 0x1002804

	)

2095 
	#XK_bøûÀ_dŸs_13
 0x1002805

	)

2096 
	#XK_bøûÀ_dŸs_23
 0x1002806

	)

2097 
	#XK_bøûÀ_dŸs_123
 0x1002807

	)

2098 
	#XK_bøûÀ_dŸs_4
 0x1002808

	)

2099 
	#XK_bøûÀ_dŸs_14
 0x1002809

	)

2100 
	#XK_bøûÀ_dŸs_24
 0x100280®

	)

2101 
	#XK_bøûÀ_dŸs_124
 0x100280b

	)

2102 
	#XK_bøûÀ_dŸs_34
 0x100280¯

	)

2103 
	#XK_bøûÀ_dŸs_134
 0x100280d

	)

2104 
	#XK_bøûÀ_dŸs_234
 0x100280ê

	)

2105 
	#XK_bøûÀ_dŸs_1234
 0x100280‡

	)

2106 
	#XK_bøûÀ_dŸs_5
 0x1002810

	)

2107 
	#XK_bøûÀ_dŸs_15
 0x1002811

	)

2108 
	#XK_bøûÀ_dŸs_25
 0x1002812

	)

2109 
	#XK_bøûÀ_dŸs_125
 0x1002813

	)

2110 
	#XK_bøûÀ_dŸs_35
 0x1002814

	)

2111 
	#XK_bøûÀ_dŸs_135
 0x1002815

	)

2112 
	#XK_bøûÀ_dŸs_235
 0x1002816

	)

2113 
	#XK_bøûÀ_dŸs_1235
 0x1002817

	)

2114 
	#XK_bøûÀ_dŸs_45
 0x1002818

	)

2115 
	#XK_bøûÀ_dŸs_145
 0x1002819

	)

2116 
	#XK_bøûÀ_dŸs_245
 0x100281®

	)

2117 
	#XK_bøûÀ_dŸs_1245
 0x100281b

	)

2118 
	#XK_bøûÀ_dŸs_345
 0x100281¯

	)

2119 
	#XK_bøûÀ_dŸs_1345
 0x100281d

	)

2120 
	#XK_bøûÀ_dŸs_2345
 0x100281ê

	)

2121 
	#XK_bøûÀ_dŸs_12345
 0x100281‡

	)

2122 
	#XK_bøûÀ_dŸs_6
 0x1002820

	)

2123 
	#XK_bøûÀ_dŸs_16
 0x1002821

	)

2124 
	#XK_bøûÀ_dŸs_26
 0x1002822

	)

2125 
	#XK_bøûÀ_dŸs_126
 0x1002823

	)

2126 
	#XK_bøûÀ_dŸs_36
 0x1002824

	)

2127 
	#XK_bøûÀ_dŸs_136
 0x1002825

	)

2128 
	#XK_bøûÀ_dŸs_236
 0x1002826

	)

2129 
	#XK_bøûÀ_dŸs_1236
 0x1002827

	)

2130 
	#XK_bøûÀ_dŸs_46
 0x1002828

	)

2131 
	#XK_bøûÀ_dŸs_146
 0x1002829

	)

2132 
	#XK_bøûÀ_dŸs_246
 0x100282®

	)

2133 
	#XK_bøûÀ_dŸs_1246
 0x100282b

	)

2134 
	#XK_bøûÀ_dŸs_346
 0x100282¯

	)

2135 
	#XK_bøûÀ_dŸs_1346
 0x100282d

	)

2136 
	#XK_bøûÀ_dŸs_2346
 0x100282ê

	)

2137 
	#XK_bøûÀ_dŸs_12346
 0x100282‡

	)

2138 
	#XK_bøûÀ_dŸs_56
 0x1002830

	)

2139 
	#XK_bøûÀ_dŸs_156
 0x1002831

	)

2140 
	#XK_bøûÀ_dŸs_256
 0x1002832

	)

2141 
	#XK_bøûÀ_dŸs_1256
 0x1002833

	)

2142 
	#XK_bøûÀ_dŸs_356
 0x1002834

	)

2143 
	#XK_bøûÀ_dŸs_1356
 0x1002835

	)

2144 
	#XK_bøûÀ_dŸs_2356
 0x1002836

	)

2145 
	#XK_bøûÀ_dŸs_12356
 0x1002837

	)

2146 
	#XK_bøûÀ_dŸs_456
 0x1002838

	)

2147 
	#XK_bøûÀ_dŸs_1456
 0x1002839

	)

2148 
	#XK_bøûÀ_dŸs_2456
 0x100283®

	)

2149 
	#XK_bøûÀ_dŸs_12456
 0x100283b

	)

2150 
	#XK_bøûÀ_dŸs_3456
 0x100283¯

	)

2151 
	#XK_bøûÀ_dŸs_13456
 0x100283d

	)

2152 
	#XK_bøûÀ_dŸs_23456
 0x100283ê

	)

2153 
	#XK_bøûÀ_dŸs_123456
 0x100283‡

	)

2154 
	#XK_bøûÀ_dŸs_7
 0x1002840

	)

2155 
	#XK_bøûÀ_dŸs_17
 0x1002841

	)

2156 
	#XK_bøûÀ_dŸs_27
 0x1002842

	)

2157 
	#XK_bøûÀ_dŸs_127
 0x1002843

	)

2158 
	#XK_bøûÀ_dŸs_37
 0x1002844

	)

2159 
	#XK_bøûÀ_dŸs_137
 0x1002845

	)

2160 
	#XK_bøûÀ_dŸs_237
 0x1002846

	)

2161 
	#XK_bøûÀ_dŸs_1237
 0x1002847

	)

2162 
	#XK_bøûÀ_dŸs_47
 0x1002848

	)

2163 
	#XK_bøûÀ_dŸs_147
 0x1002849

	)

2164 
	#XK_bøûÀ_dŸs_247
 0x100284®

	)

2165 
	#XK_bøûÀ_dŸs_1247
 0x100284b

	)

2166 
	#XK_bøûÀ_dŸs_347
 0x100284¯

	)

2167 
	#XK_bøûÀ_dŸs_1347
 0x100284d

	)

2168 
	#XK_bøûÀ_dŸs_2347
 0x100284ê

	)

2169 
	#XK_bøûÀ_dŸs_12347
 0x100284‡

	)

2170 
	#XK_bøûÀ_dŸs_57
 0x1002850

	)

2171 
	#XK_bøûÀ_dŸs_157
 0x1002851

	)

2172 
	#XK_bøûÀ_dŸs_257
 0x1002852

	)

2173 
	#XK_bøûÀ_dŸs_1257
 0x1002853

	)

2174 
	#XK_bøûÀ_dŸs_357
 0x1002854

	)

2175 
	#XK_bøûÀ_dŸs_1357
 0x1002855

	)

2176 
	#XK_bøûÀ_dŸs_2357
 0x1002856

	)

2177 
	#XK_bøûÀ_dŸs_12357
 0x1002857

	)

2178 
	#XK_bøûÀ_dŸs_457
 0x1002858

	)

2179 
	#XK_bøûÀ_dŸs_1457
 0x1002859

	)

2180 
	#XK_bøûÀ_dŸs_2457
 0x100285®

	)

2181 
	#XK_bøûÀ_dŸs_12457
 0x100285b

	)

2182 
	#XK_bøûÀ_dŸs_3457
 0x100285¯

	)

2183 
	#XK_bøûÀ_dŸs_13457
 0x100285d

	)

2184 
	#XK_bøûÀ_dŸs_23457
 0x100285ê

	)

2185 
	#XK_bøûÀ_dŸs_123457
 0x100285‡

	)

2186 
	#XK_bøûÀ_dŸs_67
 0x1002860

	)

2187 
	#XK_bøûÀ_dŸs_167
 0x1002861

	)

2188 
	#XK_bøûÀ_dŸs_267
 0x1002862

	)

2189 
	#XK_bøûÀ_dŸs_1267
 0x1002863

	)

2190 
	#XK_bøûÀ_dŸs_367
 0x1002864

	)

2191 
	#XK_bøûÀ_dŸs_1367
 0x1002865

	)

2192 
	#XK_bøûÀ_dŸs_2367
 0x1002866

	)

2193 
	#XK_bøûÀ_dŸs_12367
 0x1002867

	)

2194 
	#XK_bøûÀ_dŸs_467
 0x1002868

	)

2195 
	#XK_bøûÀ_dŸs_1467
 0x1002869

	)

2196 
	#XK_bøûÀ_dŸs_2467
 0x100286®

	)

2197 
	#XK_bøûÀ_dŸs_12467
 0x100286b

	)

2198 
	#XK_bøûÀ_dŸs_3467
 0x100286¯

	)

2199 
	#XK_bøûÀ_dŸs_13467
 0x100286d

	)

2200 
	#XK_bøûÀ_dŸs_23467
 0x100286ê

	)

2201 
	#XK_bøûÀ_dŸs_123467
 0x100286‡

	)

2202 
	#XK_bøûÀ_dŸs_567
 0x1002870

	)

2203 
	#XK_bøûÀ_dŸs_1567
 0x1002871

	)

2204 
	#XK_bøûÀ_dŸs_2567
 0x1002872

	)

2205 
	#XK_bøûÀ_dŸs_12567
 0x1002873

	)

2206 
	#XK_bøûÀ_dŸs_3567
 0x1002874

	)

2207 
	#XK_bøûÀ_dŸs_13567
 0x1002875

	)

2208 
	#XK_bøûÀ_dŸs_23567
 0x1002876

	)

2209 
	#XK_bøûÀ_dŸs_123567
 0x1002877

	)

2210 
	#XK_bøûÀ_dŸs_4567
 0x1002878

	)

2211 
	#XK_bøûÀ_dŸs_14567
 0x1002879

	)

2212 
	#XK_bøûÀ_dŸs_24567
 0x100287®

	)

2213 
	#XK_bøûÀ_dŸs_124567
 0x100287b

	)

2214 
	#XK_bøûÀ_dŸs_34567
 0x100287¯

	)

2215 
	#XK_bøûÀ_dŸs_134567
 0x100287d

	)

2216 
	#XK_bøûÀ_dŸs_234567
 0x100287ê

	)

2217 
	#XK_bøûÀ_dŸs_1234567
 0x100287‡

	)

2218 
	#XK_bøûÀ_dŸs_8
 0x1002880

	)

2219 
	#XK_bøûÀ_dŸs_18
 0x1002881

	)

2220 
	#XK_bøûÀ_dŸs_28
 0x1002882

	)

2221 
	#XK_bøûÀ_dŸs_128
 0x1002883

	)

2222 
	#XK_bøûÀ_dŸs_38
 0x1002884

	)

2223 
	#XK_bøûÀ_dŸs_138
 0x1002885

	)

2224 
	#XK_bøûÀ_dŸs_238
 0x1002886

	)

2225 
	#XK_bøûÀ_dŸs_1238
 0x1002887

	)

2226 
	#XK_bøûÀ_dŸs_48
 0x1002888

	)

2227 
	#XK_bøûÀ_dŸs_148
 0x1002889

	)

2228 
	#XK_bøûÀ_dŸs_248
 0x100288®

	)

2229 
	#XK_bøûÀ_dŸs_1248
 0x100288b

	)

2230 
	#XK_bøûÀ_dŸs_348
 0x100288¯

	)

2231 
	#XK_bøûÀ_dŸs_1348
 0x100288d

	)

2232 
	#XK_bøûÀ_dŸs_2348
 0x100288ê

	)

2233 
	#XK_bøûÀ_dŸs_12348
 0x100288‡

	)

2234 
	#XK_bøûÀ_dŸs_58
 0x1002890

	)

2235 
	#XK_bøûÀ_dŸs_158
 0x1002891

	)

2236 
	#XK_bøûÀ_dŸs_258
 0x1002892

	)

2237 
	#XK_bøûÀ_dŸs_1258
 0x1002893

	)

2238 
	#XK_bøûÀ_dŸs_358
 0x1002894

	)

2239 
	#XK_bøûÀ_dŸs_1358
 0x1002895

	)

2240 
	#XK_bøûÀ_dŸs_2358
 0x1002896

	)

2241 
	#XK_bøûÀ_dŸs_12358
 0x1002897

	)

2242 
	#XK_bøûÀ_dŸs_458
 0x1002898

	)

2243 
	#XK_bøûÀ_dŸs_1458
 0x1002899

	)

2244 
	#XK_bøûÀ_dŸs_2458
 0x100289®

	)

2245 
	#XK_bøûÀ_dŸs_12458
 0x100289b

	)

2246 
	#XK_bøûÀ_dŸs_3458
 0x100289¯

	)

2247 
	#XK_bøûÀ_dŸs_13458
 0x100289d

	)

2248 
	#XK_bøûÀ_dŸs_23458
 0x100289ê

	)

2249 
	#XK_bøûÀ_dŸs_123458
 0x100289‡

	)

2250 
	#XK_bøûÀ_dŸs_68
 0x10028a0

	)

2251 
	#XK_bøûÀ_dŸs_168
 0x10028a1

	)

2252 
	#XK_bøûÀ_dŸs_268
 0x10028a2

	)

2253 
	#XK_bøûÀ_dŸs_1268
 0x10028a3

	)

2254 
	#XK_bøûÀ_dŸs_368
 0x10028a4

	)

2255 
	#XK_bøûÀ_dŸs_1368
 0x10028a5

	)

2256 
	#XK_bøûÀ_dŸs_2368
 0x10028a6

	)

2257 
	#XK_bøûÀ_dŸs_12368
 0x10028a7

	)

2258 
	#XK_bøûÀ_dŸs_468
 0x10028a8

	)

2259 
	#XK_bøûÀ_dŸs_1468
 0x10028a9

	)

2260 
	#XK_bøûÀ_dŸs_2468
 0x10028Ø

	)

2261 
	#XK_bøûÀ_dŸs_12468
 0x10028ab

	)

2262 
	#XK_bøûÀ_dŸs_3468
 0x10028a¯

	)

2263 
	#XK_bøûÀ_dŸs_13468
 0x10028ad

	)

2264 
	#XK_bøûÀ_dŸs_23468
 0x10028´

	)

2265 
	#XK_bøûÀ_dŸs_123468
 0x10028a‡

	)

2266 
	#XK_bøûÀ_dŸs_568
 0x10028b0

	)

2267 
	#XK_bøûÀ_dŸs_1568
 0x10028b1

	)

2268 
	#XK_bøûÀ_dŸs_2568
 0x10028b2

	)

2269 
	#XK_bøûÀ_dŸs_12568
 0x10028b3

	)

2270 
	#XK_bøûÀ_dŸs_3568
 0x10028b4

	)

2271 
	#XK_bøûÀ_dŸs_13568
 0x10028b5

	)

2272 
	#XK_bøûÀ_dŸs_23568
 0x10028b6

	)

2273 
	#XK_bøûÀ_dŸs_123568
 0x10028b7

	)

2274 
	#XK_bøûÀ_dŸs_4568
 0x10028b8

	)

2275 
	#XK_bøûÀ_dŸs_14568
 0x10028b9

	)

2276 
	#XK_bøûÀ_dŸs_24568
 0x10028b®

	)

2277 
	#XK_bøûÀ_dŸs_124568
 0x10028bb

	)

2278 
	#XK_bøûÀ_dŸs_34568
 0x10028b¯

	)

2279 
	#XK_bøûÀ_dŸs_134568
 0x10028bd

	)

2280 
	#XK_bøûÀ_dŸs_234568
 0x10028bê

	)

2281 
	#XK_bøûÀ_dŸs_1234568
 0x10028b‡

	)

2282 
	#XK_bøûÀ_dŸs_78
 0x10028c0

	)

2283 
	#XK_bøûÀ_dŸs_178
 0x10028c1

	)

2284 
	#XK_bøûÀ_dŸs_278
 0x10028c2

	)

2285 
	#XK_bøûÀ_dŸs_1278
 0x10028c3

	)

2286 
	#XK_bøûÀ_dŸs_378
 0x10028c4

	)

2287 
	#XK_bøûÀ_dŸs_1378
 0x10028c5

	)

2288 
	#XK_bøûÀ_dŸs_2378
 0x10028c6

	)

2289 
	#XK_bøûÀ_dŸs_12378
 0x10028c7

	)

2290 
	#XK_bøûÀ_dŸs_478
 0x10028c8

	)

2291 
	#XK_bøûÀ_dŸs_1478
 0x10028c9

	)

2292 
	#XK_bøûÀ_dŸs_2478
 0x10028ˇ

	)

2293 
	#XK_bøûÀ_dŸs_12478
 0x10028cb

	)

2294 
	#XK_bøûÀ_dŸs_3478
 0x10028c¯

	)

2295 
	#XK_bøûÀ_dŸs_13478
 0x10028cd

	)

2296 
	#XK_bøûÀ_dŸs_23478
 0x10028˚

	)

2297 
	#XK_bøûÀ_dŸs_123478
 0x10028c‡

	)

2298 
	#XK_bøûÀ_dŸs_578
 0x10028d0

	)

2299 
	#XK_bøûÀ_dŸs_1578
 0x10028d1

	)

2300 
	#XK_bøûÀ_dŸs_2578
 0x10028d2

	)

2301 
	#XK_bøûÀ_dŸs_12578
 0x10028d3

	)

2302 
	#XK_bøûÀ_dŸs_3578
 0x10028d4

	)

2303 
	#XK_bøûÀ_dŸs_13578
 0x10028d5

	)

2304 
	#XK_bøûÀ_dŸs_23578
 0x10028d6

	)

2305 
	#XK_bøûÀ_dŸs_123578
 0x10028d7

	)

2306 
	#XK_bøûÀ_dŸs_4578
 0x10028d8

	)

2307 
	#XK_bøûÀ_dŸs_14578
 0x10028d9

	)

2308 
	#XK_bøûÀ_dŸs_24578
 0x10028d®

	)

2309 
	#XK_bøûÀ_dŸs_124578
 0x10028db

	)

2310 
	#XK_bøûÀ_dŸs_34578
 0x10028d¯

	)

2311 
	#XK_bøûÀ_dŸs_134578
 0x10028dd

	)

2312 
	#XK_bøûÀ_dŸs_234578
 0x10028dê

	)

2313 
	#XK_bøûÀ_dŸs_1234578
 0x10028d‡

	)

2314 
	#XK_bøûÀ_dŸs_678
 0x10028e0

	)

2315 
	#XK_bøûÀ_dŸs_1678
 0x10028e1

	)

2316 
	#XK_bøûÀ_dŸs_2678
 0x10028e2

	)

2317 
	#XK_bøûÀ_dŸs_12678
 0x10028e3

	)

2318 
	#XK_bøûÀ_dŸs_3678
 0x10028e4

	)

2319 
	#XK_bøûÀ_dŸs_13678
 0x10028e5

	)

2320 
	#XK_bøûÀ_dŸs_23678
 0x10028e6

	)

2321 
	#XK_bøûÀ_dŸs_123678
 0x10028e7

	)

2322 
	#XK_bøûÀ_dŸs_4678
 0x10028e8

	)

2323 
	#XK_bøûÀ_dŸs_14678
 0x10028e9

	)

2324 
	#XK_bøûÀ_dŸs_24678
 0x10028ó

	)

2325 
	#XK_bøûÀ_dŸs_124678
 0x10028eb

	)

2326 
	#XK_bøûÀ_dŸs_34678
 0x10028e¯

	)

2327 
	#XK_bøûÀ_dŸs_134678
 0x10028ed

	)

2328 
	#XK_bøûÀ_dŸs_234678
 0x10028ì

	)

2329 
	#XK_bøûÀ_dŸs_1234678
 0x10028e‡

	)

2330 
	#XK_bøûÀ_dŸs_5678
 0x10028f0

	)

2331 
	#XK_bøûÀ_dŸs_15678
 0x10028f1

	)

2332 
	#XK_bøûÀ_dŸs_25678
 0x10028f2

	)

2333 
	#XK_bøûÀ_dŸs_125678
 0x10028f3

	)

2334 
	#XK_bøûÀ_dŸs_35678
 0x10028f4

	)

2335 
	#XK_bøûÀ_dŸs_135678
 0x10028f5

	)

2336 
	#XK_bøûÀ_dŸs_235678
 0x10028f6

	)

2337 
	#XK_bøûÀ_dŸs_1235678
 0x10028f7

	)

2338 
	#XK_bøûÀ_dŸs_45678
 0x10028f8

	)

2339 
	#XK_bøûÀ_dŸs_145678
 0x10028f9

	)

2340 
	#XK_bøûÀ_dŸs_245678
 0x10028Á

	)

2341 
	#XK_bøûÀ_dŸs_1245678
 0x10028fb

	)

2342 
	#XK_bøûÀ_dŸs_345678
 0x10028f¯

	)

2343 
	#XK_bøûÀ_dŸs_1345678
 0x10028fd

	)

2344 
	#XK_bøûÀ_dŸs_2345678
 0x10028„

	)

2345 
	#XK_bøûÀ_dŸs_12345678
 0x10028f‡

	)

	@/usr/include/alloca.h

19 #i‚def 
_ALLOCA_H


20 
	#_ALLOCA_H
 1

	)

22 
	~<„©uªs.h
>

24 
	#__√ed_size_t


	)

25 
	~<°ddef.h
>

27 
	g__BEGIN_DECLS


30 #unde‡
Æloˇ


33 *
	$Æloˇ
 (
size_t
 
__size
Ë
__THROW
;

35 #ifdef 
__GNUC__


36 
	#Æloˇ
(
size
Ë
	`__buûtö_Æloˇ
 (size)

	)

39 
__END_DECLS


	@/usr/include/asm-i386/page.h

1 #i‚de‡
_I386_PAGE_H


2 
	#_I386_PAGE_H


	)

5 
	#PAGE_SHIFT
 12

	)

6 
	#PAGE_SIZE
 (1UL << 
PAGE_SHIFT
)

	)

7 
	#PAGE_MASK
 (~(
PAGE_SIZE
-1))

	)

9 
	#LARGE_PAGE_MASK
 (~(
LARGE_PAGE_SIZE
-1))

	)

10 
	#LARGE_PAGE_SIZE
 (1UL << 
PMD_SHIFT
)

	)

	@/usr/include/asm-x86_64/page.h

1 #i‚de‡
_X86_64_PAGE_H


2 
	#_X86_64_PAGE_H


	)

4 
	~<löux/c⁄°.h
>

7 
	#PAGE_SHIFT
 12

	)

8 
	#PAGE_SIZE
 (
	`_AC
(1,
UL
Ë<< 
PAGE_SHIFT
)

	)

9 
	#PAGE_MASK
 (~(
PAGE_SIZE
-1))

	)

10 
	#PHYSICAL_PAGE_MASK
 (~(
PAGE_SIZE
-1Ë& 
__PHYSICAL_MASK
)

	)

12 
	#THREAD_ORDER
 1

	)

13 
	#THREAD_SIZE
 (
PAGE_SIZE
 << 
THREAD_ORDER
)

	)

14 
	#CURRENT_MASK
 (~(
THREAD_SIZE
-1))

	)

16 
	#EXCEPTION_STACK_ORDER
 0

	)

17 
	#EXCEPTION_STKSZ
 (
PAGE_SIZE
 << 
EXCEPTION_STACK_ORDER
)

	)

19 
	#DEBUG_STACK_ORDER
 (
EXCEPTION_STACK_ORDER
 + 1)

	)

20 
	#DEBUG_STKSZ
 (
PAGE_SIZE
 << 
DEBUG_STACK_ORDER
)

	)

22 
	#IRQSTACK_ORDER
 2

	)

23 
	#IRQSTACKSIZE
 (
PAGE_SIZE
 << 
IRQSTACK_ORDER
)

	)

25 
	#STACKFAULT_STACK
 1

	)

26 
	#DOUBLEFAULT_STACK
 2

	)

27 
	#NMI_STACK
 3

	)

28 
	#DEBUG_STACK
 4

	)

29 
	#MCE_STACK
 5

	)

30 
	#N_EXCEPTION_STACKS
 5

	)

32 
	#LARGE_PAGE_MASK
 (~(
LARGE_PAGE_SIZE
-1))

	)

33 
	#LARGE_PAGE_SIZE
 (
	`_AC
(1,
UL
Ë<< 
PMD_SHIFT
)

	)

35 
	#HPAGE_SHIFT
 
PMD_SHIFT


	)

36 
	#HPAGE_SIZE
 (
	`_AC
(1,
UL
Ë<< 
HPAGE_SHIFT
)

	)

37 
	#HPAGE_MASK
 (~(
HPAGE_SIZE
 - 1))

	)

38 
	#HUGETLB_PAGE_ORDER
 (
HPAGE_SHIFT
 - 
PAGE_SHIFT
)

	)

	@/usr/include/asm/types.h

2 #i‚de‡
__ASM_STUB_TYPES_H


3 
	#__ASM_STUB_TYPES_H


	)

4 #i‡
deföed
 
__x86_64__


5 
	~<asm-x86_64/ty≥s.h
>

6 #ñi‡
deföed
 
__i386__


7 
	~<asm-i386/ty≥s.h
>

9 #w¨nög 
This
 
machöe
 
≠≥¨s
 
to
 
be
 
√ôhî
 
x86_64
 
n‹
 
i386
.

	@/usr/include/bits/byteswap.h

21 #i‡!
deföed
 
_BYTESWAP_H
 && !deföed 
_NETINET_IN_H


25 #i‚de‡
_BITS_BYTESWAP_H


26 
	#_BITS_BYTESWAP_H
 1

	)

29 
	#__bsw≠_c⁄°™t_16
(
x
) \

30 ((((
x
Ë>> 8Ë& 0xffË| (((xË& 0xffË<< 8))

	)

32 #ifde‡
__GNUC__


33 #i‡
__GNUC__
 >= 2

34 
	#__bsw≠_16
(
x
) \

35 (
__exãnsi⁄__
 \

36 ({ 
__v
, 
__x
 = (
x
); \

37 i‡(
	`__buûtö_c⁄°™t_p
 (
__x
)) \

38 
__v
 = 
	`__bsw≠_c⁄°™t_16
 (
__x
); \

40 
	`__asm__
 ("rorw $8, %w0" \

41 : "Ù" (
__v
) \

42 : "0" (
__x
) \

44 
__v
; }))

	)

47 
	#__bsw≠_16
(
x
) \

48 (
__exãnsi⁄__
 \

49 ({ 
__x
 = (
x
); 
	`__bsw≠_c⁄°™t_16
 (__x); }))

	)

52 
__ölöe
 

53 
	$__bsw≠_16
 (
__bsx
)

55  
	`__bsw≠_c⁄°™t_16
 (
__bsx
);

56 
	}
}

60 
	#__bsw≠_c⁄°™t_32
(
x
) \

61 ((((
x
) & 0xff000000) >> 24) | (((x) & 0x00ff0000) >> 8) | \

62 (((
x
Ë& 0x0000ff00Ë<< 8Ë| (((xË& 0x000000ffË<< 24))

	)

64 #ifde‡
__GNUC__


65 #i‡
__GNUC__
 >= 2

68 #i‡!
deföed
 
__i486__
 && !deföed 
__≥¡ium__
 && !deföed 
__≥¡ium¥o__
 \

69 && !
deföed
 
	g__≥¡ium4__
 && !deföed 
	g__k8__
 && !deföed 
	g__©hl⁄__
 \

70 && !
deföed
 
	g__k6__
 && !deföed 
	g__noc⁄a__
 && !deföed 
	g__c‹e2__
 \

71 && !
deföed
 
	g__geode__
 && !deföed 
	g__amdÁm10__


72 
	#__bsw≠_32
(
x
) \

73 (
__exãnsi⁄__
 \

74 ({ 
__v
, 
__x
 = (
x
); \

75 i‡(
	`__buûtö_c⁄°™t_p
 (
__x
)) \

76 
__v
 = 
	`__bsw≠_c⁄°™t_32
 (
__x
); \

78 
	`__asm__
 ("rorw $8, %w0;" \

81 : "Ù" (
__v
) \

82 : "0" (
__x
) \

84 
__v
; }))

	)

86 
	#__bsw≠_32
(
x
) \

87 (
__exãnsi⁄__
 \

88 ({ 
__v
, 
__x
 = (
x
); \

89 i‡(
	`__buûtö_c⁄°™t_p
 (
__x
)) \

90 
__v
 = 
	`__bsw≠_c⁄°™t_32
 (
__x
); \

92 
	`__asm__
 ("bsw≠ %0" : "Ù" (
__v
Ë: "0" (
__x
)); \

93 
__v
; }))

	)

96 
	#__bsw≠_32
(
x
) \

97 (
__exãnsi⁄__
 \

98 ({ 
__x
 = (
x
); 
	`__bsw≠_c⁄°™t_32
 (__x); }))

	)

101 
__ölöe
 

102 
	$__bsw≠_32
 (
__bsx
)

104  
	`__bsw≠_c⁄°™t_32
 (
__bsx
);

105 
	}
}

109 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

111 
	#__bsw≠_c⁄°™t_64
(
x
) \

112 ((((
x
) & 0xff00000000000000ull) >> 56) \

113 | (((
x
) & 0x00ff000000000000ull) >> 40) \

114 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

115 | (((
x
) & 0x000000ff00000000ull) >> 8) \

116 | (((
x
) & 0x00000000ff000000ull) << 8) \

117 | (((
x
) & 0x0000000000ff0000ull) << 24) \

118 | (((
x
) & 0x000000000000ff00ull) << 40) \

119 | (((
x
Ë& 0x00000000000000ffuŒË<< 56))

	)

121 
	#__bsw≠_64
(
x
) \

122 (
__exãnsi⁄__
 \

123 ({ uni⁄ { 
__exãnsi⁄__
 
__Œ
; \

124 
__l
[2]; } 
__w
, 
__r
; \

125 i‡(
	`__buûtö_c⁄°™t_p
 (
x
)) \

126 
__r
.
__Œ
 = 
	`__bsw≠_c⁄°™t_64
 (
x
); \

129 
__w
.
__Œ
 = (
x
); \

130 
__r
.
__l
[0] = 
	`__bsw≠_32
 (
__w
.__l[1]); \

131 
__r
.
__l
[1] = 
	`__bsw≠_32
 (
__w
.__l[0]); \

133 
__r
.
__Œ
; }))

	)

	@/usr/include/bits/confname.h

21 #i‚de‡
_UNISTD_H


28 
	m_PC_LINK_MAX
,

29 
	#_PC_LINK_MAX
 
_PC_LINK_MAX


	)

30 
	m_PC_MAX_CANON
,

31 
	#_PC_MAX_CANON
 
_PC_MAX_CANON


	)

32 
	m_PC_MAX_INPUT
,

33 
	#_PC_MAX_INPUT
 
_PC_MAX_INPUT


	)

34 
	m_PC_NAME_MAX
,

35 
	#_PC_NAME_MAX
 
_PC_NAME_MAX


	)

36 
	m_PC_PATH_MAX
,

37 
	#_PC_PATH_MAX
 
_PC_PATH_MAX


	)

38 
	m_PC_PIPE_BUF
,

39 
	#_PC_PIPE_BUF
 
_PC_PIPE_BUF


	)

40 
	m_PC_CHOWN_RESTRICTED
,

41 
	#_PC_CHOWN_RESTRICTED
 
_PC_CHOWN_RESTRICTED


	)

42 
	m_PC_NO_TRUNC
,

43 
	#_PC_NO_TRUNC
 
_PC_NO_TRUNC


	)

44 
	m_PC_VDISABLE
,

45 
	#_PC_VDISABLE
 
_PC_VDISABLE


	)

46 
	m_PC_SYNC_IO
,

47 
	#_PC_SYNC_IO
 
_PC_SYNC_IO


	)

48 
	m_PC_ASYNC_IO
,

49 
	#_PC_ASYNC_IO
 
_PC_ASYNC_IO


	)

50 
	m_PC_PRIO_IO
,

51 
	#_PC_PRIO_IO
 
_PC_PRIO_IO


	)

52 
	m_PC_SOCK_MAXBUF
,

53 
	#_PC_SOCK_MAXBUF
 
_PC_SOCK_MAXBUF


	)

54 
	m_PC_FILESIZEBITS
,

55 
	#_PC_FILESIZEBITS
 
_PC_FILESIZEBITS


	)

56 
	m_PC_REC_INCR_XFER_SIZE
,

57 
	#_PC_REC_INCR_XFER_SIZE
 
_PC_REC_INCR_XFER_SIZE


	)

58 
	m_PC_REC_MAX_XFER_SIZE
,

59 
	#_PC_REC_MAX_XFER_SIZE
 
_PC_REC_MAX_XFER_SIZE


	)

60 
	m_PC_REC_MIN_XFER_SIZE
,

61 
	#_PC_REC_MIN_XFER_SIZE
 
_PC_REC_MIN_XFER_SIZE


	)

62 
	m_PC_REC_XFER_ALIGN
,

63 
	#_PC_REC_XFER_ALIGN
 
_PC_REC_XFER_ALIGN


	)

64 
	m_PC_ALLOC_SIZE_MIN
,

65 
	#_PC_ALLOC_SIZE_MIN
 
_PC_ALLOC_SIZE_MIN


	)

66 
	m_PC_SYMLINK_MAX
,

67 
	#_PC_SYMLINK_MAX
 
_PC_SYMLINK_MAX


	)

68 
	m_PC_2_SYMLINKS


69 
	#_PC_2_SYMLINKS
 
_PC_2_SYMLINKS


	)

75 
	m_SC_ARG_MAX
,

76 
	#_SC_ARG_MAX
 
_SC_ARG_MAX


	)

77 
	m_SC_CHILD_MAX
,

78 
	#_SC_CHILD_MAX
 
_SC_CHILD_MAX


	)

79 
	m_SC_CLK_TCK
,

80 
	#_SC_CLK_TCK
 
_SC_CLK_TCK


	)

81 
	m_SC_NGROUPS_MAX
,

82 
	#_SC_NGROUPS_MAX
 
_SC_NGROUPS_MAX


	)

83 
	m_SC_OPEN_MAX
,

84 
	#_SC_OPEN_MAX
 
_SC_OPEN_MAX


	)

85 
	m_SC_STREAM_MAX
,

86 
	#_SC_STREAM_MAX
 
_SC_STREAM_MAX


	)

87 
	m_SC_TZNAME_MAX
,

88 
	#_SC_TZNAME_MAX
 
_SC_TZNAME_MAX


	)

89 
	m_SC_JOB_CONTROL
,

90 
	#_SC_JOB_CONTROL
 
_SC_JOB_CONTROL


	)

91 
	m_SC_SAVED_IDS
,

92 
	#_SC_SAVED_IDS
 
_SC_SAVED_IDS


	)

93 
	m_SC_REALTIME_SIGNALS
,

94 
	#_SC_REALTIME_SIGNALS
 
_SC_REALTIME_SIGNALS


	)

95 
	m_SC_PRIORITY_SCHEDULING
,

96 
	#_SC_PRIORITY_SCHEDULING
 
_SC_PRIORITY_SCHEDULING


	)

97 
	m_SC_TIMERS
,

98 
	#_SC_TIMERS
 
_SC_TIMERS


	)

99 
	m_SC_ASYNCHRONOUS_IO
,

100 
	#_SC_ASYNCHRONOUS_IO
 
_SC_ASYNCHRONOUS_IO


	)

101 
	m_SC_PRIORITIZED_IO
,

102 
	#_SC_PRIORITIZED_IO
 
_SC_PRIORITIZED_IO


	)

103 
	m_SC_SYNCHRONIZED_IO
,

104 
	#_SC_SYNCHRONIZED_IO
 
_SC_SYNCHRONIZED_IO


	)

105 
	m_SC_FSYNC
,

106 
	#_SC_FSYNC
 
_SC_FSYNC


	)

107 
	m_SC_MAPPED_FILES
,

108 
	#_SC_MAPPED_FILES
 
_SC_MAPPED_FILES


	)

109 
	m_SC_MEMLOCK
,

110 
	#_SC_MEMLOCK
 
_SC_MEMLOCK


	)

111 
	m_SC_MEMLOCK_RANGE
,

112 
	#_SC_MEMLOCK_RANGE
 
_SC_MEMLOCK_RANGE


	)

113 
	m_SC_MEMORY_PROTECTION
,

114 
	#_SC_MEMORY_PROTECTION
 
_SC_MEMORY_PROTECTION


	)

115 
	m_SC_MESSAGE_PASSING
,

116 
	#_SC_MESSAGE_PASSING
 
_SC_MESSAGE_PASSING


	)

117 
	m_SC_SEMAPHORES
,

118 
	#_SC_SEMAPHORES
 
_SC_SEMAPHORES


	)

119 
	m_SC_SHARED_MEMORY_OBJECTS
,

120 
	#_SC_SHARED_MEMORY_OBJECTS
 
_SC_SHARED_MEMORY_OBJECTS


	)

121 
	m_SC_AIO_LISTIO_MAX
,

122 
	#_SC_AIO_LISTIO_MAX
 
_SC_AIO_LISTIO_MAX


	)

123 
	m_SC_AIO_MAX
,

124 
	#_SC_AIO_MAX
 
_SC_AIO_MAX


	)

125 
	m_SC_AIO_PRIO_DELTA_MAX
,

126 
	#_SC_AIO_PRIO_DELTA_MAX
 
_SC_AIO_PRIO_DELTA_MAX


	)

127 
	m_SC_DELAYTIMER_MAX
,

128 
	#_SC_DELAYTIMER_MAX
 
_SC_DELAYTIMER_MAX


	)

129 
	m_SC_MQ_OPEN_MAX
,

130 
	#_SC_MQ_OPEN_MAX
 
_SC_MQ_OPEN_MAX


	)

131 
	m_SC_MQ_PRIO_MAX
,

132 
	#_SC_MQ_PRIO_MAX
 
_SC_MQ_PRIO_MAX


	)

133 
	m_SC_VERSION
,

134 
	#_SC_VERSION
 
_SC_VERSION


	)

135 
	m_SC_PAGESIZE
,

136 
	#_SC_PAGESIZE
 
_SC_PAGESIZE


	)

137 
	#_SC_PAGE_SIZE
 
_SC_PAGESIZE


	)

138 
	m_SC_RTSIG_MAX
,

139 
	#_SC_RTSIG_MAX
 
_SC_RTSIG_MAX


	)

140 
	m_SC_SEM_NSEMS_MAX
,

141 
	#_SC_SEM_NSEMS_MAX
 
_SC_SEM_NSEMS_MAX


	)

142 
	m_SC_SEM_VALUE_MAX
,

143 
	#_SC_SEM_VALUE_MAX
 
_SC_SEM_VALUE_MAX


	)

144 
	m_SC_SIGQUEUE_MAX
,

145 
	#_SC_SIGQUEUE_MAX
 
_SC_SIGQUEUE_MAX


	)

146 
	m_SC_TIMER_MAX
,

147 
	#_SC_TIMER_MAX
 
_SC_TIMER_MAX


	)

151 
	m_SC_BC_BASE_MAX
,

152 
	#_SC_BC_BASE_MAX
 
_SC_BC_BASE_MAX


	)

153 
	m_SC_BC_DIM_MAX
,

154 
	#_SC_BC_DIM_MAX
 
_SC_BC_DIM_MAX


	)

155 
	m_SC_BC_SCALE_MAX
,

156 
	#_SC_BC_SCALE_MAX
 
_SC_BC_SCALE_MAX


	)

157 
	m_SC_BC_STRING_MAX
,

158 
	#_SC_BC_STRING_MAX
 
_SC_BC_STRING_MAX


	)

159 
	m_SC_COLL_WEIGHTS_MAX
,

160 
	#_SC_COLL_WEIGHTS_MAX
 
_SC_COLL_WEIGHTS_MAX


	)

161 
	m_SC_EQUIV_CLASS_MAX
,

162 
	#_SC_EQUIV_CLASS_MAX
 
_SC_EQUIV_CLASS_MAX


	)

163 
	m_SC_EXPR_NEST_MAX
,

164 
	#_SC_EXPR_NEST_MAX
 
_SC_EXPR_NEST_MAX


	)

165 
	m_SC_LINE_MAX
,

166 
	#_SC_LINE_MAX
 
_SC_LINE_MAX


	)

167 
	m_SC_RE_DUP_MAX
,

168 
	#_SC_RE_DUP_MAX
 
_SC_RE_DUP_MAX


	)

169 
	m_SC_CHARCLASS_NAME_MAX
,

170 
	#_SC_CHARCLASS_NAME_MAX
 
_SC_CHARCLASS_NAME_MAX


	)

172 
	m_SC_2_VERSION
,

173 
	#_SC_2_VERSION
 
_SC_2_VERSION


	)

174 
	m_SC_2_C_BIND
,

175 
	#_SC_2_C_BIND
 
_SC_2_C_BIND


	)

176 
	m_SC_2_C_DEV
,

177 
	#_SC_2_C_DEV
 
_SC_2_C_DEV


	)

178 
	m_SC_2_FORT_DEV
,

179 
	#_SC_2_FORT_DEV
 
_SC_2_FORT_DEV


	)

180 
	m_SC_2_FORT_RUN
,

181 
	#_SC_2_FORT_RUN
 
_SC_2_FORT_RUN


	)

182 
	m_SC_2_SW_DEV
,

183 
	#_SC_2_SW_DEV
 
_SC_2_SW_DEV


	)

184 
	m_SC_2_LOCALEDEF
,

185 
	#_SC_2_LOCALEDEF
 
_SC_2_LOCALEDEF


	)

187 
	m_SC_PII
,

188 
	#_SC_PII
 
_SC_PII


	)

189 
	m_SC_PII_XTI
,

190 
	#_SC_PII_XTI
 
_SC_PII_XTI


	)

191 
	m_SC_PII_SOCKET
,

192 
	#_SC_PII_SOCKET
 
_SC_PII_SOCKET


	)

193 
	m_SC_PII_INTERNET
,

194 
	#_SC_PII_INTERNET
 
_SC_PII_INTERNET


	)

195 
	m_SC_PII_OSI
,

196 
	#_SC_PII_OSI
 
_SC_PII_OSI


	)

197 
	m_SC_POLL
,

198 
	#_SC_POLL
 
_SC_POLL


	)

199 
	m_SC_SELECT
,

200 
	#_SC_SELECT
 
_SC_SELECT


	)

201 
	m_SC_UIO_MAXIOV
,

202 
	#_SC_UIO_MAXIOV
 
_SC_UIO_MAXIOV


	)

203 
	m_SC_IOV_MAX
 = 
_SC_UIO_MAXIOV
,

204 
	#_SC_IOV_MAX
 
_SC_IOV_MAX


	)

205 
	m_SC_PII_INTERNET_STREAM
,

206 
	#_SC_PII_INTERNET_STREAM
 
_SC_PII_INTERNET_STREAM


	)

207 
	m_SC_PII_INTERNET_DGRAM
,

208 
	#_SC_PII_INTERNET_DGRAM
 
_SC_PII_INTERNET_DGRAM


	)

209 
	m_SC_PII_OSI_COTS
,

210 
	#_SC_PII_OSI_COTS
 
_SC_PII_OSI_COTS


	)

211 
	m_SC_PII_OSI_CLTS
,

212 
	#_SC_PII_OSI_CLTS
 
_SC_PII_OSI_CLTS


	)

213 
	m_SC_PII_OSI_M
,

214 
	#_SC_PII_OSI_M
 
_SC_PII_OSI_M


	)

215 
	m_SC_T_IOV_MAX
,

216 
	#_SC_T_IOV_MAX
 
_SC_T_IOV_MAX


	)

219 
	m_SC_THREADS
,

220 
	#_SC_THREADS
 
_SC_THREADS


	)

221 
	m_SC_THREAD_SAFE_FUNCTIONS
,

222 
	#_SC_THREAD_SAFE_FUNCTIONS
 
_SC_THREAD_SAFE_FUNCTIONS


	)

223 
	m_SC_GETGR_R_SIZE_MAX
,

224 
	#_SC_GETGR_R_SIZE_MAX
 
_SC_GETGR_R_SIZE_MAX


	)

225 
	m_SC_GETPW_R_SIZE_MAX
,

226 
	#_SC_GETPW_R_SIZE_MAX
 
_SC_GETPW_R_SIZE_MAX


	)

227 
	m_SC_LOGIN_NAME_MAX
,

228 
	#_SC_LOGIN_NAME_MAX
 
_SC_LOGIN_NAME_MAX


	)

229 
	m_SC_TTY_NAME_MAX
,

230 
	#_SC_TTY_NAME_MAX
 
_SC_TTY_NAME_MAX


	)

231 
	m_SC_THREAD_DESTRUCTOR_ITERATIONS
,

232 
	#_SC_THREAD_DESTRUCTOR_ITERATIONS
 
_SC_THREAD_DESTRUCTOR_ITERATIONS


	)

233 
	m_SC_THREAD_KEYS_MAX
,

234 
	#_SC_THREAD_KEYS_MAX
 
_SC_THREAD_KEYS_MAX


	)

235 
	m_SC_THREAD_STACK_MIN
,

236 
	#_SC_THREAD_STACK_MIN
 
_SC_THREAD_STACK_MIN


	)

237 
	m_SC_THREAD_THREADS_MAX
,

238 
	#_SC_THREAD_THREADS_MAX
 
_SC_THREAD_THREADS_MAX


	)

239 
	m_SC_THREAD_ATTR_STACKADDR
,

240 
	#_SC_THREAD_ATTR_STACKADDR
 
_SC_THREAD_ATTR_STACKADDR


	)

241 
	m_SC_THREAD_ATTR_STACKSIZE
,

242 
	#_SC_THREAD_ATTR_STACKSIZE
 
_SC_THREAD_ATTR_STACKSIZE


	)

243 
	m_SC_THREAD_PRIORITY_SCHEDULING
,

244 
	#_SC_THREAD_PRIORITY_SCHEDULING
 
_SC_THREAD_PRIORITY_SCHEDULING


	)

245 
	m_SC_THREAD_PRIO_INHERIT
,

246 
	#_SC_THREAD_PRIO_INHERIT
 
_SC_THREAD_PRIO_INHERIT


	)

247 
	m_SC_THREAD_PRIO_PROTECT
,

248 
	#_SC_THREAD_PRIO_PROTECT
 
_SC_THREAD_PRIO_PROTECT


	)

249 
	m_SC_THREAD_PROCESS_SHARED
,

250 
	#_SC_THREAD_PROCESS_SHARED
 
_SC_THREAD_PROCESS_SHARED


	)

252 
	m_SC_NPROCESSORS_CONF
,

253 
	#_SC_NPROCESSORS_CONF
 
_SC_NPROCESSORS_CONF


	)

254 
	m_SC_NPROCESSORS_ONLN
,

255 
	#_SC_NPROCESSORS_ONLN
 
_SC_NPROCESSORS_ONLN


	)

256 
	m_SC_PHYS_PAGES
,

257 
	#_SC_PHYS_PAGES
 
_SC_PHYS_PAGES


	)

258 
	m_SC_AVPHYS_PAGES
,

259 
	#_SC_AVPHYS_PAGES
 
_SC_AVPHYS_PAGES


	)

260 
	m_SC_ATEXIT_MAX
,

261 
	#_SC_ATEXIT_MAX
 
_SC_ATEXIT_MAX


	)

262 
	m_SC_PASS_MAX
,

263 
	#_SC_PASS_MAX
 
_SC_PASS_MAX


	)

265 
	m_SC_XOPEN_VERSION
,

266 
	#_SC_XOPEN_VERSION
 
_SC_XOPEN_VERSION


	)

267 
	m_SC_XOPEN_XCU_VERSION
,

268 
	#_SC_XOPEN_XCU_VERSION
 
_SC_XOPEN_XCU_VERSION


	)

269 
	m_SC_XOPEN_UNIX
,

270 
	#_SC_XOPEN_UNIX
 
_SC_XOPEN_UNIX


	)

271 
	m_SC_XOPEN_CRYPT
,

272 
	#_SC_XOPEN_CRYPT
 
_SC_XOPEN_CRYPT


	)

273 
	m_SC_XOPEN_ENH_I18N
,

274 
	#_SC_XOPEN_ENH_I18N
 
_SC_XOPEN_ENH_I18N


	)

275 
	m_SC_XOPEN_SHM
,

276 
	#_SC_XOPEN_SHM
 
_SC_XOPEN_SHM


	)

278 
	m_SC_2_CHAR_TERM
,

279 
	#_SC_2_CHAR_TERM
 
_SC_2_CHAR_TERM


	)

280 
	m_SC_2_C_VERSION
,

281 
	#_SC_2_C_VERSION
 
_SC_2_C_VERSION


	)

282 
	m_SC_2_UPE
,

283 
	#_SC_2_UPE
 
_SC_2_UPE


	)

285 
	m_SC_XOPEN_XPG2
,

286 
	#_SC_XOPEN_XPG2
 
_SC_XOPEN_XPG2


	)

287 
	m_SC_XOPEN_XPG3
,

288 
	#_SC_XOPEN_XPG3
 
_SC_XOPEN_XPG3


	)

289 
	m_SC_XOPEN_XPG4
,

290 
	#_SC_XOPEN_XPG4
 
_SC_XOPEN_XPG4


	)

292 
	m_SC_CHAR_BIT
,

293 
	#_SC_CHAR_BIT
 
_SC_CHAR_BIT


	)

294 
	m_SC_CHAR_MAX
,

295 
	#_SC_CHAR_MAX
 
_SC_CHAR_MAX


	)

296 
	m_SC_CHAR_MIN
,

297 
	#_SC_CHAR_MIN
 
_SC_CHAR_MIN


	)

298 
	m_SC_INT_MAX
,

299 
	#_SC_INT_MAX
 
_SC_INT_MAX


	)

300 
	m_SC_INT_MIN
,

301 
	#_SC_INT_MIN
 
_SC_INT_MIN


	)

302 
	m_SC_LONG_BIT
,

303 
	#_SC_LONG_BIT
 
_SC_LONG_BIT


	)

304 
	m_SC_WORD_BIT
,

305 
	#_SC_WORD_BIT
 
_SC_WORD_BIT


	)

306 
	m_SC_MB_LEN_MAX
,

307 
	#_SC_MB_LEN_MAX
 
_SC_MB_LEN_MAX


	)

308 
	m_SC_NZERO
,

309 
	#_SC_NZERO
 
_SC_NZERO


	)

310 
	m_SC_SSIZE_MAX
,

311 
	#_SC_SSIZE_MAX
 
_SC_SSIZE_MAX


	)

312 
	m_SC_SCHAR_MAX
,

313 
	#_SC_SCHAR_MAX
 
_SC_SCHAR_MAX


	)

314 
	m_SC_SCHAR_MIN
,

315 
	#_SC_SCHAR_MIN
 
_SC_SCHAR_MIN


	)

316 
	m_SC_SHRT_MAX
,

317 
	#_SC_SHRT_MAX
 
_SC_SHRT_MAX


	)

318 
	m_SC_SHRT_MIN
,

319 
	#_SC_SHRT_MIN
 
_SC_SHRT_MIN


	)

320 
	m_SC_UCHAR_MAX
,

321 
	#_SC_UCHAR_MAX
 
_SC_UCHAR_MAX


	)

322 
	m_SC_UINT_MAX
,

323 
	#_SC_UINT_MAX
 
_SC_UINT_MAX


	)

324 
	m_SC_ULONG_MAX
,

325 
	#_SC_ULONG_MAX
 
_SC_ULONG_MAX


	)

326 
	m_SC_USHRT_MAX
,

327 
	#_SC_USHRT_MAX
 
_SC_USHRT_MAX


	)

329 
	m_SC_NL_ARGMAX
,

330 
	#_SC_NL_ARGMAX
 
_SC_NL_ARGMAX


	)

331 
	m_SC_NL_LANGMAX
,

332 
	#_SC_NL_LANGMAX
 
_SC_NL_LANGMAX


	)

333 
	m_SC_NL_MSGMAX
,

334 
	#_SC_NL_MSGMAX
 
_SC_NL_MSGMAX


	)

335 
	m_SC_NL_NMAX
,

336 
	#_SC_NL_NMAX
 
_SC_NL_NMAX


	)

337 
	m_SC_NL_SETMAX
,

338 
	#_SC_NL_SETMAX
 
_SC_NL_SETMAX


	)

339 
	m_SC_NL_TEXTMAX
,

340 
	#_SC_NL_TEXTMAX
 
_SC_NL_TEXTMAX


	)

342 
	m_SC_XBS5_ILP32_OFF32
,

343 
	#_SC_XBS5_ILP32_OFF32
 
_SC_XBS5_ILP32_OFF32


	)

344 
	m_SC_XBS5_ILP32_OFFBIG
,

345 
	#_SC_XBS5_ILP32_OFFBIG
 
_SC_XBS5_ILP32_OFFBIG


	)

346 
	m_SC_XBS5_LP64_OFF64
,

347 
	#_SC_XBS5_LP64_OFF64
 
_SC_XBS5_LP64_OFF64


	)

348 
	m_SC_XBS5_LPBIG_OFFBIG
,

349 
	#_SC_XBS5_LPBIG_OFFBIG
 
_SC_XBS5_LPBIG_OFFBIG


	)

351 
	m_SC_XOPEN_LEGACY
,

352 
	#_SC_XOPEN_LEGACY
 
_SC_XOPEN_LEGACY


	)

353 
	m_SC_XOPEN_REALTIME
,

354 
	#_SC_XOPEN_REALTIME
 
_SC_XOPEN_REALTIME


	)

355 
	m_SC_XOPEN_REALTIME_THREADS
,

356 
	#_SC_XOPEN_REALTIME_THREADS
 
_SC_XOPEN_REALTIME_THREADS


	)

358 
	m_SC_ADVISORY_INFO
,

359 
	#_SC_ADVISORY_INFO
 
_SC_ADVISORY_INFO


	)

360 
	m_SC_BARRIERS
,

361 
	#_SC_BARRIERS
 
_SC_BARRIERS


	)

362 
	m_SC_BASE
,

363 
	#_SC_BASE
 
_SC_BASE


	)

364 
	m_SC_C_LANG_SUPPORT
,

365 
	#_SC_C_LANG_SUPPORT
 
_SC_C_LANG_SUPPORT


	)

366 
	m_SC_C_LANG_SUPPORT_R
,

367 
	#_SC_C_LANG_SUPPORT_R
 
_SC_C_LANG_SUPPORT_R


	)

368 
	m_SC_CLOCK_SELECTION
,

369 
	#_SC_CLOCK_SELECTION
 
_SC_CLOCK_SELECTION


	)

370 
	m_SC_CPUTIME
,

371 
	#_SC_CPUTIME
 
_SC_CPUTIME


	)

372 
	m_SC_THREAD_CPUTIME
,

373 
	#_SC_THREAD_CPUTIME
 
_SC_THREAD_CPUTIME


	)

374 
	m_SC_DEVICE_IO
,

375 
	#_SC_DEVICE_IO
 
_SC_DEVICE_IO


	)

376 
	m_SC_DEVICE_SPECIFIC
,

377 
	#_SC_DEVICE_SPECIFIC
 
_SC_DEVICE_SPECIFIC


	)

378 
	m_SC_DEVICE_SPECIFIC_R
,

379 
	#_SC_DEVICE_SPECIFIC_R
 
_SC_DEVICE_SPECIFIC_R


	)

380 
	m_SC_FD_MGMT
,

381 
	#_SC_FD_MGMT
 
_SC_FD_MGMT


	)

382 
	m_SC_FIFO
,

383 
	#_SC_FIFO
 
_SC_FIFO


	)

384 
	m_SC_PIPE
,

385 
	#_SC_PIPE
 
_SC_PIPE


	)

386 
	m_SC_FILE_ATTRIBUTES
,

387 
	#_SC_FILE_ATTRIBUTES
 
_SC_FILE_ATTRIBUTES


	)

388 
	m_SC_FILE_LOCKING
,

389 
	#_SC_FILE_LOCKING
 
_SC_FILE_LOCKING


	)

390 
	m_SC_FILE_SYSTEM
,

391 
	#_SC_FILE_SYSTEM
 
_SC_FILE_SYSTEM


	)

392 
	m_SC_MONOTONIC_CLOCK
,

393 
	#_SC_MONOTONIC_CLOCK
 
_SC_MONOTONIC_CLOCK


	)

394 
	m_SC_MULTI_PROCESS
,

395 
	#_SC_MULTI_PROCESS
 
_SC_MULTI_PROCESS


	)

396 
	m_SC_SINGLE_PROCESS
,

397 
	#_SC_SINGLE_PROCESS
 
_SC_SINGLE_PROCESS


	)

398 
	m_SC_NETWORKING
,

399 
	#_SC_NETWORKING
 
_SC_NETWORKING


	)

400 
	m_SC_READER_WRITER_LOCKS
,

401 
	#_SC_READER_WRITER_LOCKS
 
_SC_READER_WRITER_LOCKS


	)

402 
	m_SC_SPIN_LOCKS
,

403 
	#_SC_SPIN_LOCKS
 
_SC_SPIN_LOCKS


	)

404 
	m_SC_REGEXP
,

405 
	#_SC_REGEXP
 
_SC_REGEXP


	)

406 
	m_SC_REGEX_VERSION
,

407 
	#_SC_REGEX_VERSION
 
_SC_REGEX_VERSION


	)

408 
	m_SC_SHELL
,

409 
	#_SC_SHELL
 
_SC_SHELL


	)

410 
	m_SC_SIGNALS
,

411 
	#_SC_SIGNALS
 
_SC_SIGNALS


	)

412 
	m_SC_SPAWN
,

413 
	#_SC_SPAWN
 
_SC_SPAWN


	)

414 
	m_SC_SPORADIC_SERVER
,

415 
	#_SC_SPORADIC_SERVER
 
_SC_SPORADIC_SERVER


	)

416 
	m_SC_THREAD_SPORADIC_SERVER
,

417 
	#_SC_THREAD_SPORADIC_SERVER
 
_SC_THREAD_SPORADIC_SERVER


	)

418 
	m_SC_SYSTEM_DATABASE
,

419 
	#_SC_SYSTEM_DATABASE
 
_SC_SYSTEM_DATABASE


	)

420 
	m_SC_SYSTEM_DATABASE_R
,

421 
	#_SC_SYSTEM_DATABASE_R
 
_SC_SYSTEM_DATABASE_R


	)

422 
	m_SC_TIMEOUTS
,

423 
	#_SC_TIMEOUTS
 
_SC_TIMEOUTS


	)

424 
	m_SC_TYPED_MEMORY_OBJECTS
,

425 
	#_SC_TYPED_MEMORY_OBJECTS
 
_SC_TYPED_MEMORY_OBJECTS


	)

426 
	m_SC_USER_GROUPS
,

427 
	#_SC_USER_GROUPS
 
_SC_USER_GROUPS


	)

428 
	m_SC_USER_GROUPS_R
,

429 
	#_SC_USER_GROUPS_R
 
_SC_USER_GROUPS_R


	)

430 
	m_SC_2_PBS
,

431 
	#_SC_2_PBS
 
_SC_2_PBS


	)

432 
	m_SC_2_PBS_ACCOUNTING
,

433 
	#_SC_2_PBS_ACCOUNTING
 
_SC_2_PBS_ACCOUNTING


	)

434 
	m_SC_2_PBS_LOCATE
,

435 
	#_SC_2_PBS_LOCATE
 
_SC_2_PBS_LOCATE


	)

436 
	m_SC_2_PBS_MESSAGE
,

437 
	#_SC_2_PBS_MESSAGE
 
_SC_2_PBS_MESSAGE


	)

438 
	m_SC_2_PBS_TRACK
,

439 
	#_SC_2_PBS_TRACK
 
_SC_2_PBS_TRACK


	)

440 
	m_SC_SYMLOOP_MAX
,

441 
	#_SC_SYMLOOP_MAX
 
_SC_SYMLOOP_MAX


	)

442 
	m_SC_STREAMS
,

443 
	#_SC_STREAMS
 
_SC_STREAMS


	)

444 
	m_SC_2_PBS_CHECKPOINT
,

445 
	#_SC_2_PBS_CHECKPOINT
 
_SC_2_PBS_CHECKPOINT


	)

447 
	m_SC_V6_ILP32_OFF32
,

448 
	#_SC_V6_ILP32_OFF32
 
_SC_V6_ILP32_OFF32


	)

449 
	m_SC_V6_ILP32_OFFBIG
,

450 
	#_SC_V6_ILP32_OFFBIG
 
_SC_V6_ILP32_OFFBIG


	)

451 
	m_SC_V6_LP64_OFF64
,

452 
	#_SC_V6_LP64_OFF64
 
_SC_V6_LP64_OFF64


	)

453 
	m_SC_V6_LPBIG_OFFBIG
,

454 
	#_SC_V6_LPBIG_OFFBIG
 
_SC_V6_LPBIG_OFFBIG


	)

456 
	m_SC_HOST_NAME_MAX
,

457 
	#_SC_HOST_NAME_MAX
 
_SC_HOST_NAME_MAX


	)

458 
	m_SC_TRACE
,

459 
	#_SC_TRACE
 
_SC_TRACE


	)

460 
	m_SC_TRACE_EVENT_FILTER
,

461 
	#_SC_TRACE_EVENT_FILTER
 
_SC_TRACE_EVENT_FILTER


	)

462 
	m_SC_TRACE_INHERIT
,

463 
	#_SC_TRACE_INHERIT
 
_SC_TRACE_INHERIT


	)

464 
	m_SC_TRACE_LOG
,

465 
	#_SC_TRACE_LOG
 
_SC_TRACE_LOG


	)

467 
	m_SC_LEVEL1_ICACHE_SIZE
,

468 
	#_SC_LEVEL1_ICACHE_SIZE
 
_SC_LEVEL1_ICACHE_SIZE


	)

469 
	m_SC_LEVEL1_ICACHE_ASSOC
,

470 
	#_SC_LEVEL1_ICACHE_ASSOC
 
_SC_LEVEL1_ICACHE_ASSOC


	)

471 
	m_SC_LEVEL1_ICACHE_LINESIZE
,

472 
	#_SC_LEVEL1_ICACHE_LINESIZE
 
_SC_LEVEL1_ICACHE_LINESIZE


	)

473 
	m_SC_LEVEL1_DCACHE_SIZE
,

474 
	#_SC_LEVEL1_DCACHE_SIZE
 
_SC_LEVEL1_DCACHE_SIZE


	)

475 
	m_SC_LEVEL1_DCACHE_ASSOC
,

476 
	#_SC_LEVEL1_DCACHE_ASSOC
 
_SC_LEVEL1_DCACHE_ASSOC


	)

477 
	m_SC_LEVEL1_DCACHE_LINESIZE
,

478 
	#_SC_LEVEL1_DCACHE_LINESIZE
 
_SC_LEVEL1_DCACHE_LINESIZE


	)

479 
	m_SC_LEVEL2_CACHE_SIZE
,

480 
	#_SC_LEVEL2_CACHE_SIZE
 
_SC_LEVEL2_CACHE_SIZE


	)

481 
	m_SC_LEVEL2_CACHE_ASSOC
,

482 
	#_SC_LEVEL2_CACHE_ASSOC
 
_SC_LEVEL2_CACHE_ASSOC


	)

483 
	m_SC_LEVEL2_CACHE_LINESIZE
,

484 
	#_SC_LEVEL2_CACHE_LINESIZE
 
_SC_LEVEL2_CACHE_LINESIZE


	)

485 
	m_SC_LEVEL3_CACHE_SIZE
,

486 
	#_SC_LEVEL3_CACHE_SIZE
 
_SC_LEVEL3_CACHE_SIZE


	)

487 
	m_SC_LEVEL3_CACHE_ASSOC
,

488 
	#_SC_LEVEL3_CACHE_ASSOC
 
_SC_LEVEL3_CACHE_ASSOC


	)

489 
	m_SC_LEVEL3_CACHE_LINESIZE
,

490 
	#_SC_LEVEL3_CACHE_LINESIZE
 
_SC_LEVEL3_CACHE_LINESIZE


	)

491 
	m_SC_LEVEL4_CACHE_SIZE
,

492 
	#_SC_LEVEL4_CACHE_SIZE
 
_SC_LEVEL4_CACHE_SIZE


	)

493 
	m_SC_LEVEL4_CACHE_ASSOC
,

494 
	#_SC_LEVEL4_CACHE_ASSOC
 
_SC_LEVEL4_CACHE_ASSOC


	)

495 
	m_SC_LEVEL4_CACHE_LINESIZE
,

496 
	#_SC_LEVEL4_CACHE_LINESIZE
 
_SC_LEVEL4_CACHE_LINESIZE


	)

499 
	m_SC_IPV6
 = 
_SC_LEVEL1_ICACHE_SIZE
 + 50,

500 
	#_SC_IPV6
 
_SC_IPV6


	)

501 
	m_SC_RAW_SOCKETS


502 
	#_SC_RAW_SOCKETS
 
_SC_RAW_SOCKETS


	)

508 
	m_CS_PATH
,

509 
	#_CS_PATH
 
_CS_PATH


	)

511 
	m_CS_V6_WIDTH_RESTRICTED_ENVS
,

512 
	#_CS_V6_WIDTH_RESTRICTED_ENVS
 
_CS_V6_WIDTH_RESTRICTED_ENVS


	)

514 
	m_CS_GNU_LIBC_VERSION
,

515 
	#_CS_GNU_LIBC_VERSION
 
_CS_GNU_LIBC_VERSION


	)

516 
	m_CS_GNU_LIBPTHREAD_VERSION
,

517 
	#_CS_GNU_LIBPTHREAD_VERSION
 
_CS_GNU_LIBPTHREAD_VERSION


	)

519 
	m_CS_LFS_CFLAGS
 = 1000,

520 
	#_CS_LFS_CFLAGS
 
_CS_LFS_CFLAGS


	)

521 
	m_CS_LFS_LDFLAGS
,

522 
	#_CS_LFS_LDFLAGS
 
_CS_LFS_LDFLAGS


	)

523 
	m_CS_LFS_LIBS
,

524 
	#_CS_LFS_LIBS
 
_CS_LFS_LIBS


	)

525 
	m_CS_LFS_LINTFLAGS
,

526 
	#_CS_LFS_LINTFLAGS
 
_CS_LFS_LINTFLAGS


	)

527 
	m_CS_LFS64_CFLAGS
,

528 
	#_CS_LFS64_CFLAGS
 
_CS_LFS64_CFLAGS


	)

529 
	m_CS_LFS64_LDFLAGS
,

530 
	#_CS_LFS64_LDFLAGS
 
_CS_LFS64_LDFLAGS


	)

531 
	m_CS_LFS64_LIBS
,

532 
	#_CS_LFS64_LIBS
 
_CS_LFS64_LIBS


	)

533 
	m_CS_LFS64_LINTFLAGS
,

534 
	#_CS_LFS64_LINTFLAGS
 
_CS_LFS64_LINTFLAGS


	)

536 
	m_CS_XBS5_ILP32_OFF32_CFLAGS
 = 1100,

537 
	#_CS_XBS5_ILP32_OFF32_CFLAGS
 
_CS_XBS5_ILP32_OFF32_CFLAGS


	)

538 
	m_CS_XBS5_ILP32_OFF32_LDFLAGS
,

539 
	#_CS_XBS5_ILP32_OFF32_LDFLAGS
 
_CS_XBS5_ILP32_OFF32_LDFLAGS


	)

540 
	m_CS_XBS5_ILP32_OFF32_LIBS
,

541 
	#_CS_XBS5_ILP32_OFF32_LIBS
 
_CS_XBS5_ILP32_OFF32_LIBS


	)

542 
	m_CS_XBS5_ILP32_OFF32_LINTFLAGS
,

543 
	#_CS_XBS5_ILP32_OFF32_LINTFLAGS
 
_CS_XBS5_ILP32_OFF32_LINTFLAGS


	)

544 
	m_CS_XBS5_ILP32_OFFBIG_CFLAGS
,

545 
	#_CS_XBS5_ILP32_OFFBIG_CFLAGS
 
_CS_XBS5_ILP32_OFFBIG_CFLAGS


	)

546 
	m_CS_XBS5_ILP32_OFFBIG_LDFLAGS
,

547 
	#_CS_XBS5_ILP32_OFFBIG_LDFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LDFLAGS


	)

548 
	m_CS_XBS5_ILP32_OFFBIG_LIBS
,

549 
	#_CS_XBS5_ILP32_OFFBIG_LIBS
 
_CS_XBS5_ILP32_OFFBIG_LIBS


	)

550 
	m_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
,

551 
	#_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LINTFLAGS


	)

552 
	m_CS_XBS5_LP64_OFF64_CFLAGS
,

553 
	#_CS_XBS5_LP64_OFF64_CFLAGS
 
_CS_XBS5_LP64_OFF64_CFLAGS


	)

554 
	m_CS_XBS5_LP64_OFF64_LDFLAGS
,

555 
	#_CS_XBS5_LP64_OFF64_LDFLAGS
 
_CS_XBS5_LP64_OFF64_LDFLAGS


	)

556 
	m_CS_XBS5_LP64_OFF64_LIBS
,

557 
	#_CS_XBS5_LP64_OFF64_LIBS
 
_CS_XBS5_LP64_OFF64_LIBS


	)

558 
	m_CS_XBS5_LP64_OFF64_LINTFLAGS
,

559 
	#_CS_XBS5_LP64_OFF64_LINTFLAGS
 
_CS_XBS5_LP64_OFF64_LINTFLAGS


	)

560 
	m_CS_XBS5_LPBIG_OFFBIG_CFLAGS
,

561 
	#_CS_XBS5_LPBIG_OFFBIG_CFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_CFLAGS


	)

562 
	m_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
,

563 
	#_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LDFLAGS


	)

564 
	m_CS_XBS5_LPBIG_OFFBIG_LIBS
,

565 
	#_CS_XBS5_LPBIG_OFFBIG_LIBS
 
_CS_XBS5_LPBIG_OFFBIG_LIBS


	)

566 
	m_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
,

567 
	#_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS


	)

569 
	m_CS_POSIX_V6_ILP32_OFF32_CFLAGS
,

570 
	#_CS_POSIX_V6_ILP32_OFF32_CFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_CFLAGS


	)

571 
	m_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
,

572 
	#_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LDFLAGS


	)

573 
	m_CS_POSIX_V6_ILP32_OFF32_LIBS
,

574 
	#_CS_POSIX_V6_ILP32_OFF32_LIBS
 
_CS_POSIX_V6_ILP32_OFF32_LIBS


	)

575 
	m_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
,

576 
	#_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS


	)

577 
	m_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
,

578 
	#_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS


	)

579 
	m_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
,

580 
	#_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS


	)

581 
	m_CS_POSIX_V6_ILP32_OFFBIG_LIBS
,

582 
	#_CS_POSIX_V6_ILP32_OFFBIG_LIBS
 
_CS_POSIX_V6_ILP32_OFFBIG_LIBS


	)

583 
	m_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
,

584 
	#_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS


	)

585 
	m_CS_POSIX_V6_LP64_OFF64_CFLAGS
,

586 
	#_CS_POSIX_V6_LP64_OFF64_CFLAGS
 
_CS_POSIX_V6_LP64_OFF64_CFLAGS


	)

587 
	m_CS_POSIX_V6_LP64_OFF64_LDFLAGS
,

588 
	#_CS_POSIX_V6_LP64_OFF64_LDFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LDFLAGS


	)

589 
	m_CS_POSIX_V6_LP64_OFF64_LIBS
,

590 
	#_CS_POSIX_V6_LP64_OFF64_LIBS
 
_CS_POSIX_V6_LP64_OFF64_LIBS


	)

591 
	m_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
,

592 
	#_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LINTFLAGS


	)

593 
	m_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
,

594 
	#_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS


	)

595 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
,

596 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS


	)

597 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
,

598 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LIBS


	)

599 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS


600 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS


	)

	@/usr/include/bits/dirent.h

19 #i‚de‡
_DIRENT_H


23 
	sdúít


25 #i‚de‡
__USE_FILE_OFFSET64


26 
__öo_t
 
	md_öo
;

27 
__off_t
 
	md_off
;

29 
__öo64_t
 
	md_öo
;

30 
__off64_t
 
	md_off
;

32 
	md_ª˛í
;

33 
	md_ty≥
;

34 
	md_«me
[256];

37 #ifde‡
__USE_LARGEFILE64


38 
	sdúít64


40 
__öo64_t
 
	md_öo
;

41 
__off64_t
 
	md_off
;

42 
	md_ª˛í
;

43 
	md_ty≥
;

44 
	md_«me
[256];

48 
	#d_fûío
 
d_öo


	)

50 #unde‡
_DIRENT_HAVE_D_NAMLEN


51 
	#_DIRENT_HAVE_D_RECLEN


	)

52 
	#_DIRENT_HAVE_D_OFF


	)

53 
	#_DIRENT_HAVE_D_TYPE


	)

	@/usr/include/bits/endian.h

3 #i‚de‡
_ENDIAN_H


7 
	#__BYTE_ORDER
 
__LITTLE_ENDIAN


	)

	@/usr/include/bits/environments.h

19 #i‚de‡
_UNISTD_H


41 
	#_POSIX_V6_ILP32_OFF32
 1

	)

42 
	#_POSIX_V6_ILP32_OFFBIG
 1

	)

43 
	#_XBS5_ILP32_OFF32
 1

	)

44 
	#_XBS5_ILP32_OFFBIG
 1

	)

57 
	#__ILP32_OFF32_CFLAGS
 "-m32"

	)

58 
	#__ILP32_OFFBIG_CFLAGS
 "-m32 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64"

	)

59 
	#__ILP32_OFF32_LDFLAGS
 "-m32"

	)

60 
	#__ILP32_OFFBIG_LDFLAGS
 "-m32"

	)

61 
	#__LP64_OFF64_CFLAGS
 "-m64"

	)

62 
	#__LP64_OFF64_LDFLAGS
 "-m64"

	)

	@/usr/include/bits/errno.h

20 #ifde‡
_ERRNO_H


22 #unde‡
EDOM


23 #unde‡
EILSEQ


24 #unde‡
ERANGE


25 
	~<löux/î∫o.h
>

28 
	#ENOTSUP
 
EOPNOTSUPP


	)

31 #i‚de‡
ECANCELED


32 
	#ECANCELED
 125

	)

36 #i‚de‡
EOWNERDEAD


37 
	#EOWNERDEAD
 130

	)

38 
	#ENOTRECOVERABLE
 131

	)

41 #i‚de‡
__ASSEMBLER__


43 *
	$__î∫o_loˇti⁄
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

45 #i‡!
deföed
 
_LIBC
 || deföed 
_LIBC_REENTRANT


47 
	#î∫o
 (*
	`__î∫o_loˇti⁄
 ())

	)

52 #i‡!
deföed
 
_ERRNO_H
 && deföed 
__√ed_Em©h


56 
	#EDOM
 33

	)

57 
	#EILSEQ
 84

	)

58 
	#ERANGE
 34

	)

	@/usr/include/bits/fcntl.h

21 #i‚def 
_FCNTL_H


25 
	~<sys/ty≥s.h
>

26 #ifde‡
__USE_GNU


27 
	~<bôs/uio.h
>

33 
	#O_ACCMODE
 0003

	)

34 
	#O_RDONLY
 00

	)

35 
	#O_WRONLY
 01

	)

36 
	#O_RDWR
 02

	)

37 
	#O_CREAT
 0100

	)

38 
	#O_EXCL
 0200

	)

39 
	#O_NOCTTY
 0400

	)

40 
	#O_TRUNC
 01000

	)

41 
	#O_APPEND
 02000

	)

42 
	#O_NONBLOCK
 04000

	)

43 
	#O_NDELAY
 
O_NONBLOCK


	)

44 
	#O_SYNC
 010000

	)

45 
	#O_FSYNC
 
O_SYNC


	)

46 
	#O_ASYNC
 020000

	)

48 #ifde‡
__USE_GNU


49 
	#O_DIRECT
 040000

	)

50 
	#O_DIRECTORY
 0200000

	)

51 
	#O_NOFOLLOW
 0400000

	)

52 
	#O_NOATIME
 01000000

	)

58 #i‡
deföed
 
__USE_POSIX199309
 || deföed 
__USE_UNIX98


59 
	#O_DSYNC
 
O_SYNC


	)

60 
	#O_RSYNC
 
O_SYNC


	)

63 #ifde‡
__USE_LARGEFILE64


64 
	#O_LARGEFILE
 0100000

	)

68 
	#F_DUPFD
 0

	)

69 
	#F_GETFD
 1

	)

70 
	#F_SETFD
 2

	)

71 
	#F_GETFL
 3

	)

72 
	#F_SETFL
 4

	)

73 #i‚de‡
__USE_FILE_OFFSET64


74 
	#F_GETLK
 5

	)

75 
	#F_SETLK
 6

	)

76 
	#F_SETLKW
 7

	)

78 
	#F_GETLK
 
F_GETLK64


	)

79 
	#F_SETLK
 
F_SETLK64


	)

80 
	#F_SETLKW
 
F_SETLKW64


	)

82 
	#F_GETLK64
 12

	)

83 
	#F_SETLK64
 13

	)

84 
	#F_SETLKW64
 14

	)

86 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_UNIX98


87 
	#F_SETOWN
 8

	)

88 
	#F_GETOWN
 9

	)

91 #ifde‡
__USE_GNU


92 
	#F_SETSIG
 10

	)

93 
	#F_GETSIG
 11

	)

96 #ifde‡
__USE_GNU


97 
	#F_SETLEASE
 1024

	)

98 
	#F_GETLEASE
 1025

	)

99 
	#F_NOTIFY
 1026

	)

103 
	#FD_CLOEXEC
 1

	)

106 
	#F_RDLCK
 0

	)

107 
	#F_WRLCK
 1

	)

108 
	#F_UNLCK
 2

	)

111 
	#F_EXLCK
 4

	)

112 
	#F_SHLCK
 8

	)

114 #ifde‡
__USE_BSD


116 
	#LOCK_SH
 1

	)

117 
	#LOCK_EX
 2

	)

118 
	#LOCK_NB
 4

	)

120 
	#LOCK_UN
 8

	)

123 #ifde‡
__USE_GNU


124 
	#LOCK_MAND
 32

	)

125 
	#LOCK_READ
 64

	)

126 
	#LOCK_WRITE
 128

	)

127 
	#LOCK_RW
 192

	)

130 #ifde‡
__USE_GNU


132 
	#DN_ACCESS
 0x00000001

	)

133 
	#DN_MODIFY
 0x00000002

	)

134 
	#DN_CREATE
 0x00000004

	)

135 
	#DN_DELETE
 0x00000008

	)

136 
	#DN_RENAME
 0x00000010

	)

137 
	#DN_ATTRIB
 0x00000020

	)

138 
	#DN_MULTISHOT
 0x80000000

	)

141 
	sÊock


143 
	ml_ty≥
;

144 
	ml_whí˚
;

145 #i‚de‡
__USE_FILE_OFFSET64


146 
__off_t
 
	ml_°¨t
;

147 
__off_t
 
	ml_Àn
;

149 
__off64_t
 
	ml_°¨t
;

150 
__off64_t
 
	ml_Àn
;

152 
__pid_t
 
	ml_pid
;

155 #ifde‡
__USE_LARGEFILE64


156 
	sÊock64


158 
	ml_ty≥
;

159 
	ml_whí˚
;

160 
__off64_t
 
	ml_°¨t
;

161 
__off64_t
 
	ml_Àn
;

162 
__pid_t
 
	ml_pid
;

168 #ifdef 
__USE_BSD


169 
	#FAPPEND
 
O_APPEND


	)

170 
	#FFSYNC
 
O_FSYNC


	)

171 
	#FASYNC
 
O_ASYNC


	)

172 
	#FNONBLOCK
 
O_NONBLOCK


	)

173 
	#FNDELAY
 
O_NDELAY


	)

177 #ifde‡
__USE_XOPEN2K


178 
	#POSIX_FADV_NORMAL
 0

	)

179 
	#POSIX_FADV_RANDOM
 1

	)

180 
	#POSIX_FADV_SEQUENTIAL
 2

	)

181 
	#POSIX_FADV_WILLNEED
 3

	)

182 
	#POSIX_FADV_DONTNEED
 4

	)

183 
	#POSIX_FADV_NOREUSE
 5

	)

187 #ifde‡
__USE_GNU


189 
	#SYNC_FILE_RANGE_WAIT_BEFORE
 1

	)

192 
	#SYNC_FILE_RANGE_WRITE
 2

	)

195 
	#SYNC_FILE_RANGE_WAIT_AFTER
 4

	)

200 
	#SPLICE_F_MOVE
 1

	)

201 
	#SPLICE_F_NONBLOCK
 2

	)

204 
	#SPLICE_F_MORE
 4

	)

205 
	#SPLICE_F_GIFT
 8

	)

208 
	g__BEGIN_DECLS


210 #ifde‡
__USE_GNU


213 
ssize_t
 
	$ªadahód
 (
__fd
, 
__off64_t
 
__off£t
, 
size_t
 
__cou¡
)

214 
__THROW
;

218 
	`sync_fûe_ønge
 (
__fd
, 
__off64_t
 
__‰om
, __off64_à
__to
,

219 
__Êags
);

223 
	`vm•li˚
 (
__fdout
, c⁄° 
iovec
 *
__iov
, 
size_t
 
__cou¡
,

224 
__Êags
);

227 
	$•li˚
 (
__fdö
, 
__off64_t
 *
__offö
, 
__fdout
,

228 
__off64_t
 *
__offout
, 
size_t
 
__Àn
, 
__Êags
)

229 
__THROW
;

232 
	$ãe
 (
__fdö
, 
__fdout
, 
size_t
 
__Àn
, 
__Êags
)

233 
__THROW
;

237 
__END_DECLS


	@/usr/include/bits/huge_val.h

22 #i‚de‡
_MATH_H


28 #i‡
__GNUC_PREREQ
(3,3)

29 
	#HUGE_VAL
 (
	`__buûtö_huge_vÆ
())

	)

30 #ñi‡
__GNUC_PREREQ
(2,96)

31 
	#HUGE_VAL
 (
__exãnsi⁄__
 0x1.0
p2047
)

	)

32 #ñi‡
deföed
 
__GNUC__


34 
	#HUGE_VAL
 \

35 (
__exãnsi⁄__
 \

36 ((uni⁄ { 
__l
 
	`__©åibuã__
((
	`__mode__
(
__DI__
))); 
__d
; }) \

37 { 
__l
: 0x7ff0000000000000ULL }).
__d
)

	)

41 
	~<ídün.h
>

43 uni⁄ { 
	m__c
[8]; 
	m__d
; } 
	t__huge_vÆ_t
;

45 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


46 
	#__HUGE_VAL_byãs
 { 0x7f, 0xf0, 0, 0, 0, 0, 0, 0 }

	)

48 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


49 
	#__HUGE_VAL_byãs
 { 0, 0, 0, 0, 0, 0, 0xf0, 0x7‡}

	)

52 
__huge_vÆ_t
 
	g__huge_vÆ
 = { 
__HUGE_VAL_byãs
 };

53 
	#HUGE_VAL
 (
__huge_vÆ
.
__d
)

	)

	@/usr/include/bits/huge_valf.h

22 #i‚de‡
_MATH_H


28 #i‡
__GNUC_PREREQ
(3,3)

29 
	#HUGE_VALF
 (
	`__buûtö_huge_vÆf
())

	)

30 #ñi‡
__GNUC_PREREQ
(2,96)

31 
	#HUGE_VALF
 (
__exãnsi⁄__
 0x1.0
p255f
)

	)

32 #ñi‡
deföed
 
__GNUC__


34 
	#HUGE_VALF
 \

35 (
__exãnsi⁄__
 \

36 ((uni⁄ { 
__l
 
	`__©åibuã__
((
	`__mode__
(
__SI__
))); 
__d
; }) \

37 { 
__l
: 0x7f800000UL }).
__d
)

	)

41 uni⁄ { 
	m__c
[4]; 
	m__f
; } 
	t__huge_vÆf_t
;

43 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


44 
	#__HUGE_VALF_byãs
 { 0x7f, 0x80, 0, 0 }

	)

46 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


47 
	#__HUGE_VALF_byãs
 { 0, 0, 0x80, 0x7‡}

	)

50 
__huge_vÆf_t
 
	g__huge_vÆf
 = { 
__HUGE_VALF_byãs
 };

51 
	#HUGE_VALF
 (
__huge_vÆf
.
__f
)

	)

	@/usr/include/bits/huge_vall.h

22 #i‚de‡
_MATH_H


26 #i‡
__GNUC_PREREQ
(3,3)

27 
	#HUGE_VALL
 (
	`__buûtö_huge_vÆl
())

	)

28 #ñi‡
__GNUC_PREREQ
(2,96)

29 
	#HUGE_VALL
 (
__exãnsi⁄__
 0x1.0
p32767L
)

	)

32 
	#__HUGE_VALL_byãs
 { 0, 0, 0, 0, 0, 0, 0, 0x80, 0xff, 0x7f, 0, 0 }

	)

34 
	#__huge_vÆl_t
 uni⁄ { 
__c
[12]; 
__ld
; }

	)

35 #ifde‡
__GNUC__


36 
	#HUGE_VALL
 (
__exãnsi⁄__
 \

37 ((
__huge_vÆl_t
Ë{ 
__c
: 
__HUGE_VALL_byãs
 }).
__ld
)

	)

39 
__huge_vÆl_t
 
	g__huge_vÆl
 = { 
__HUGE_VALL_byãs
 };

40 
	#HUGE_VALL
 (
__huge_vÆl
.
__ld
)

	)

	@/usr/include/bits/in.h

21 #i‚de‡
_NETINET_IN_H


28 
	#IP_OPTIONS
 4

	)

29 
	#IP_HDRINCL
 3

	)

30 
	#IP_TOS
 1

	)

31 
	#IP_TTL
 2

	)

32 
	#IP_RECVOPTS
 6

	)

34 
	#IP_RECVRETOPTS
 
IP_RETOPTS


	)

35 
	#IP_RETOPTS
 7

	)

36 
	#IP_MULTICAST_IF
 32

	)

37 
	#IP_MULTICAST_TTL
 33

	)

38 
	#IP_MULTICAST_LOOP
 34

	)

39 
	#IP_ADD_MEMBERSHIP
 35

	)

40 
	#IP_DROP_MEMBERSHIP
 36

	)

41 
	#IP_UNBLOCK_SOURCE
 37

	)

42 
	#IP_BLOCK_SOURCE
 38

	)

43 
	#IP_ADD_SOURCE_MEMBERSHIP
 39

	)

44 
	#IP_DROP_SOURCE_MEMBERSHIP
 40

	)

45 
	#IP_MSFILTER
 41

	)

46 
	#MCAST_JOIN_GROUP
 42

	)

47 
	#MCAST_BLOCK_SOURCE
 43

	)

48 
	#MCAST_UNBLOCK_SOURCE
 44

	)

49 
	#MCAST_LEAVE_GROUP
 45

	)

50 
	#MCAST_JOIN_SOURCE_GROUP
 46

	)

51 
	#MCAST_LEAVE_SOURCE_GROUP
 47

	)

52 
	#MCAST_MSFILTER
 48

	)

54 
	#MCAST_EXCLUDE
 0

	)

55 
	#MCAST_INCLUDE
 1

	)

57 
	#IP_ROUTER_ALERT
 5

	)

58 
	#IP_PKTINFO
 8

	)

59 
	#IP_PKTOPTIONS
 9

	)

60 
	#IP_PMTUDISC
 10

	)

61 
	#IP_MTU_DISCOVER
 10

	)

62 
	#IP_RECVERR
 11

	)

63 
	#IP_RECVTTL
 12

	)

64 
	#IP_RECVTOS
 13

	)

68 
	#IP_PMTUDISC_DONT
 0

	)

69 
	#IP_PMTUDISC_WANT
 1

	)

70 
	#IP_PMTUDISC_DO
 2

	)

73 
	#SOL_IP
 0

	)

75 
	#IP_DEFAULT_MULTICAST_TTL
 1

	)

76 
	#IP_DEFAULT_MULTICAST_LOOP
 1

	)

77 
	#IP_MAX_MEMBERSHIPS
 20

	)

82 
	sù_›ts


84 
ö_addr
 
	mù_d°
;

85 
	mù_›ts
[40];

89 
	sù_mªqn


91 
ö_addr
 
	mimr_mu…üddr
;

92 
ö_addr
 
	mimr_addªss
;

93 
	mimr_ifödex
;

97 
	sö_pktöfo


99 
	mùi_ifödex
;

100 
ö_addr
 
	mùi_•ec_d°
;

101 
ö_addr
 
	mùi_addr
;

107 
	#IPV6_ADDRFORM
 1

	)

108 
	#IPV6_2292PKTINFO
 2

	)

109 
	#IPV6_2292HOPOPTS
 3

	)

110 
	#IPV6_2292DSTOPTS
 4

	)

111 
	#IPV6_2292RTHDR
 5

	)

112 
	#IPV6_2292PKTOPTIONS
 6

	)

113 
	#IPV6_CHECKSUM
 7

	)

114 
	#IPV6_2292HOPLIMIT
 8

	)

116 
	#SCM_SRCRT
 
IPV6_RXSRCRT


	)

118 
	#IPV6_NEXTHOP
 9

	)

119 
	#IPV6_AUTHHDR
 10

	)

120 
	#IPV6_UNICAST_HOPS
 16

	)

121 
	#IPV6_MULTICAST_IF
 17

	)

122 
	#IPV6_MULTICAST_HOPS
 18

	)

123 
	#IPV6_MULTICAST_LOOP
 19

	)

124 
	#IPV6_JOIN_GROUP
 20

	)

125 
	#IPV6_LEAVE_GROUP
 21

	)

126 
	#IPV6_ROUTER_ALERT
 22

	)

127 
	#IPV6_MTU_DISCOVER
 23

	)

128 
	#IPV6_MTU
 24

	)

129 
	#IPV6_RECVERR
 25

	)

130 
	#IPV6_V6ONLY
 26

	)

131 
	#IPV6_JOIN_ANYCAST
 27

	)

132 
	#IPV6_LEAVE_ANYCAST
 28

	)

133 
	#IPV6_IPSEC_POLICY
 34

	)

134 
	#IPV6_XFRM_POLICY
 35

	)

136 
	#IPV6_RECVPKTINFO
 49

	)

137 
	#IPV6_PKTINFO
 50

	)

138 
	#IPV6_RECVHOPLIMIT
 51

	)

139 
	#IPV6_HOPLIMIT
 52

	)

140 
	#IPV6_RECVHOPOPTS
 53

	)

141 
	#IPV6_HOPOPTS
 54

	)

142 
	#IPV6_RTHDRDSTOPTS
 55

	)

143 
	#IPV6_RECVRTHDR
 56

	)

144 
	#IPV6_RTHDR
 57

	)

145 
	#IPV6_RECVDSTOPTS
 58

	)

146 
	#IPV6_DSTOPTS
 59

	)

148 
	#IPV6_RECVTCLASS
 66

	)

149 
	#IPV6_TCLASS
 67

	)

152 
	#IPV6_ADD_MEMBERSHIP
 
IPV6_JOIN_GROUP


	)

153 
	#IPV6_DROP_MEMBERSHIP
 
IPV6_LEAVE_GROUP


	)

154 
	#IPV6_RXHOPOPTS
 
IPV6_HOPOPTS


	)

155 
	#IPV6_RXDSTOPTS
 
IPV6_DSTOPTS


	)

158 
	#IPV6_PMTUDISC_DONT
 0

	)

159 
	#IPV6_PMTUDISC_WANT
 1

	)

160 
	#IPV6_PMTUDISC_DO
 2

	)

163 
	#SOL_IPV6
 41

	)

164 
	#SOL_ICMPV6
 58

	)

167 
	#IPV6_RTHDR_LOOSE
 0

	)

168 
	#IPV6_RTHDR_STRICT
 1

	)

170 
	#IPV6_RTHDR_TYPE_0
 0

	)

	@/usr/include/bits/inf.h

20 #i‚de‡
_MATH_H


26 #i‡
__GNUC_PREREQ
(3,3)

27 
	#INFINITY
 (
	`__buûtö_öff
())

	)

29 
	#INFINITY
 
HUGE_VALF


	)

	@/usr/include/bits/ioctl-types.h

20 #i‚de‡
_SYS_IOCTL_H


25 
	~<asm/io˘ls.h
>

28 
	swösize


30 
	mws_row
;

31 
	mws_cﬁ
;

32 
	mws_xpixñ
;

33 
	mws_ypixñ
;

36 
	#NCC
 8

	)

37 
	sãrmio


39 
	mc_iÊag
;

40 
	mc_oÊag
;

41 
	mc_cÊag
;

42 
	mc_lÊag
;

43 
	mc_löe
;

44 
	mc_cc
[
NCC
];

48 
	#TIOCM_LE
 0x001

	)

49 
	#TIOCM_DTR
 0x002

	)

50 
	#TIOCM_RTS
 0x004

	)

51 
	#TIOCM_ST
 0x008

	)

52 
	#TIOCM_SR
 0x010

	)

53 
	#TIOCM_CTS
 0x020

	)

54 
	#TIOCM_CAR
 0x040

	)

55 
	#TIOCM_RNG
 0x080

	)

56 
	#TIOCM_DSR
 0x100

	)

57 
	#TIOCM_CD
 
TIOCM_CAR


	)

58 
	#TIOCM_RI
 
TIOCM_RNG


	)

63 
	#N_TTY
 0

	)

64 
	#N_SLIP
 1

	)

65 
	#N_MOUSE
 2

	)

66 
	#N_PPP
 3

	)

67 
	#N_STRIP
 4

	)

68 
	#N_AX25
 5

	)

69 
	#N_X25
 6

	)

70 
	#N_6PACK
 7

	)

71 
	#N_MASC
 8

	)

72 
	#N_R3964
 9

	)

73 
	#N_PROFIBUS_FDL
 10

	)

74 
	#N_IRDA
 11

	)

75 
	#N_SMSBLOCK
 12

	)

76 
	#N_HDLC
 13

	)

77 
	#N_SYNC_PPP
 14

	)

78 
	#N_HCI
 15

	)

	@/usr/include/bits/ioctls.h

19 #i‚de‡
_SYS_IOCTL_H


24 
	~<asm/io˘ls.h
>

27 
	#SIOCADDRT
 0x890B

	)

28 
	#SIOCDELRT
 0x890C

	)

29 
	#SIOCRTMSG
 0x890D

	)

32 
	#SIOCGIFNAME
 0x8910

	)

33 
	#SIOCSIFLINK
 0x8911

	)

34 
	#SIOCGIFCONF
 0x8912

	)

35 
	#SIOCGIFFLAGS
 0x8913

	)

36 
	#SIOCSIFFLAGS
 0x8914

	)

37 
	#SIOCGIFADDR
 0x8915

	)

38 
	#SIOCSIFADDR
 0x8916

	)

39 
	#SIOCGIFDSTADDR
 0x8917

	)

40 
	#SIOCSIFDSTADDR
 0x8918

	)

41 
	#SIOCGIFBRDADDR
 0x8919

	)

42 
	#SIOCSIFBRDADDR
 0x891®

	)

43 
	#SIOCGIFNETMASK
 0x891b

	)

44 
	#SIOCSIFNETMASK
 0x891¯

	)

45 
	#SIOCGIFMETRIC
 0x891d

	)

46 
	#SIOCSIFMETRIC
 0x891ê

	)

47 
	#SIOCGIFMEM
 0x891‡

	)

48 
	#SIOCSIFMEM
 0x8920

	)

49 
	#SIOCGIFMTU
 0x8921

	)

50 
	#SIOCSIFMTU
 0x8922

	)

51 
	#SIOCSIFNAME
 0x8923

	)

52 
	#SIOCSIFHWADDR
 0x8924

	)

53 
	#SIOCGIFENCAP
 0x8925

	)

54 
	#SIOCSIFENCAP
 0x8926

	)

55 
	#SIOCGIFHWADDR
 0x8927

	)

56 
	#SIOCGIFSLAVE
 0x8929

	)

57 
	#SIOCSIFSLAVE
 0x8930

	)

58 
	#SIOCADDMULTI
 0x8931

	)

59 
	#SIOCDELMULTI
 0x8932

	)

60 
	#SIOCGIFINDEX
 0x8933

	)

61 
	#SIOGIFINDEX
 
SIOCGIFINDEX


	)

62 
	#SIOCSIFPFLAGS
 0x8934

	)

63 
	#SIOCGIFPFLAGS
 0x8935

	)

64 
	#SIOCDIFADDR
 0x8936

	)

65 
	#SIOCSIFHWBROADCAST
 0x8937

	)

66 
	#SIOCGIFCOUNT
 0x8938

	)

68 
	#SIOCGIFBR
 0x8940

	)

69 
	#SIOCSIFBR
 0x8941

	)

71 
	#SIOCGIFTXQLEN
 0x8942

	)

72 
	#SIOCSIFTXQLEN
 0x8943

	)

77 
	#SIOCDARP
 0x8953

	)

78 
	#SIOCGARP
 0x8954

	)

79 
	#SIOCSARP
 0x8955

	)

82 
	#SIOCDRARP
 0x8960

	)

83 
	#SIOCGRARP
 0x8961

	)

84 
	#SIOCSRARP
 0x8962

	)

88 
	#SIOCGIFMAP
 0x8970

	)

89 
	#SIOCSIFMAP
 0x8971

	)

93 
	#SIOCADDDLCI
 0x8980

	)

94 
	#SIOCDELDLCI
 0x8981

	)

103 
	#SIOCDEVPRIVATE
 0x89F0

	)

109 
	#SIOCPROTOPRIVATE
 0x89E0

	)

	@/usr/include/bits/ipc.h

19 #i‚de‡
_SYS_IPC_H


23 
	~<bôs/ty≥s.h
>

26 
	#IPC_CREAT
 01000

	)

27 
	#IPC_EXCL
 02000

	)

28 
	#IPC_NOWAIT
 04000

	)

31 
	#IPC_RMID
 0

	)

32 
	#IPC_SET
 1

	)

33 
	#IPC_STAT
 2

	)

34 #ifde‡
__USE_GNU


35 
	#IPC_INFO
 3

	)

39 
	#IPC_PRIVATE
 ((
__key_t
Ë0Ë

	)

43 
	sùc_≥rm


45 
__key_t
 
	m__key
;

46 
__uid_t
 
	muid
;

47 
__gid_t
 
	mgid
;

48 
__uid_t
 
	mcuid
;

49 
__gid_t
 
	mcgid
;

50 
	mmode
;

51 
	m__∑d1
;

52 
	m__£q
;

53 
	m__∑d2
;

54 
	m__unu£d1
;

55 
	m__unu£d2
;

	@/usr/include/bits/ipctypes.h

24 #i‚de‡
_BITS_IPCTYPES_H


25 
	#_BITS_IPCTYPES_H
 1

	)

27 
	~<bôs/ty≥s.h
>

30 #i‡
__WORDSIZE
 == 32

31 
	t__ùc_pid_t
;

33 
	t__ùc_pid_t
;

	@/usr/include/bits/locale.h

20 #i‡!
deföed
 
_LOCALE_H
 && !deföed 
_LANGINFO_H


24 #i‚de‡
_BITS_LOCALE_H


25 
	#_BITS_LOCALE_H
 1

	)

29 
	m__LC_CTYPE
 = 0,

30 
	m__LC_NUMERIC
 = 1,

31 
	m__LC_TIME
 = 2,

32 
	m__LC_COLLATE
 = 3,

33 
	m__LC_MONETARY
 = 4,

34 
	m__LC_MESSAGES
 = 5,

35 
	m__LC_ALL
 = 6,

36 
	m__LC_PAPER
 = 7,

37 
	m__LC_NAME
 = 8,

38 
	m__LC_ADDRESS
 = 9,

39 
	m__LC_TELEPHONE
 = 10,

40 
	m__LC_MEASUREMENT
 = 11,

41 
	m__LC_IDENTIFICATION
 = 12

	@/usr/include/bits/mathcalls.h

46 #i‚de‡
_MATH_H


53 
_MdoubÀ_BEGIN_NAMESPACE


55 
__MATHCALL
 (
acos
,, (
_MdoubÀ_
 
__x
));

57 
__MATHCALL
 (
asö
,, (
_MdoubÀ_
 
__x
));

59 
__MATHCALL
 (
©™
,, (
_MdoubÀ_
 
__x
));

61 
__MATHCALL
 (
©™2
,, (
_MdoubÀ_
 
__y
, _MdoubÀ_ 
__x
));

64 
__MATHCALL
 (
cos
,, (
_MdoubÀ_
 
__x
));

66 
__MATHCALL
 (
sö
,, (
_MdoubÀ_
 
__x
));

68 
__MATHCALL
 (
èn
,, (
_MdoubÀ_
 
__x
));

73 
__MATHCALL
 (
cosh
,, (
_MdoubÀ_
 
__x
));

75 
__MATHCALL
 (
söh
,, (
_MdoubÀ_
 
__x
));

77 
__MATHCALL
 (
ènh
,, (
_MdoubÀ_
 
__x
));

78 
	g_MdoubÀ_END_NAMESPACE


80 #ifde‡
__USE_GNU


82 
__MATHDECL
 (,
söcos
,,

83 (
_MdoubÀ_
 
__x
, _MdoubÀ_ *
__söx
, _MdoubÀ_ *
__cosx
));

86 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


87 
__BEGIN_NAMESPACE_C99


89 
__MATHCALL
 (
acosh
,, (
_MdoubÀ_
 
__x
));

91 
__MATHCALL
 (
asöh
,, (
_MdoubÀ_
 
__x
));

93 
__MATHCALL
 (
©™h
,, (
_MdoubÀ_
 
__x
));

94 
	g__END_NAMESPACE_C99


99 
_MdoubÀ_BEGIN_NAMESPACE


101 
__MATHCALL
 (
exp
,, (
_MdoubÀ_
 
__x
));

104 
__MATHCALL
 (
‰exp
,, (
_MdoubÀ_
 
__x
, *
__exp⁄ít
));

107 
__MATHCALL
 (
ldexp
,, (
_MdoubÀ_
 
__x
, 
__exp⁄ít
));

110 
__MATHCALL
 (
log
,, (
_MdoubÀ_
 
__x
));

113 
__MATHCALL
 (
log10
,, (
_MdoubÀ_
 
__x
));

116 
__MATHCALL
 (
modf
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ *
__ùå
));

117 
	g_MdoubÀ_END_NAMESPACE


119 #ifde‡
__USE_GNU


121 
__MATHCALL
 (
exp10
,, (
_MdoubÀ_
 
__x
));

123 
__MATHCALL
 (
pow10
,, (
_MdoubÀ_
 
__x
));

126 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


127 
__BEGIN_NAMESPACE_C99


129 
__MATHCALL
 (
expm1
,, (
_MdoubÀ_
 
__x
));

132 
__MATHCALL
 (
log1p
,, (
_MdoubÀ_
 
__x
));

135 
__MATHCALL
 (
logb
,, (
_MdoubÀ_
 
__x
));

136 
	g__END_NAMESPACE_C99


139 #ifde‡
__USE_ISOC99


140 
__BEGIN_NAMESPACE_C99


142 
__MATHCALL
 (
exp2
,, (
_MdoubÀ_
 
__x
));

145 
__MATHCALL
 (
log2
,, (
_MdoubÀ_
 
__x
));

146 
	g__END_NAMESPACE_C99


152 
_MdoubÀ_BEGIN_NAMESPACE


154 
__MATHCALL
 (
pow
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

157 
__MATHCALL
 (
sqπ
,, (
_MdoubÀ_
 
__x
));

158 
	g_MdoubÀ_END_NAMESPACE


160 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN
 || deföed 
__USE_ISOC99


161 
__BEGIN_NAMESPACE_C99


163 
__MATHCALL
 (
hypŸ
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

164 
	g__END_NAMESPACE_C99


167 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


168 
__BEGIN_NAMESPACE_C99


170 
__MATHCALL
 (
cbπ
,, (
_MdoubÀ_
 
__x
));

171 
	g__END_NAMESPACE_C99


177 
_MdoubÀ_BEGIN_NAMESPACE


179 
__MATHCALLX
 (
˚û
,, (
_MdoubÀ_
 
__x
), (
__c⁄°__
));

182 
__MATHCALLX
 (
Ábs
,, (
_MdoubÀ_
 
__x
), (
__c⁄°__
));

185 
__MATHCALLX
 (
Êo‹
,, (
_MdoubÀ_
 
__x
), (
__c⁄°__
));

188 
__MATHCALL
 (
fmod
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

193 
__MATHDECL_1
 (,
__isöf
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

196 
__MATHDECL_1
 (,
__föôe
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

197 
	g_MdoubÀ_END_NAMESPACE


199 #ifde‡
__USE_MISC


202 
__MATHDECL_1
 (,
isöf
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

205 
__MATHDECL_1
 (,
föôe
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

208 
__MATHCALL
 (
dªm
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

212 
__MATHCALL
 (
signifiˇnd
,, (
_MdoubÀ_
 
__x
));

215 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


216 
__BEGIN_NAMESPACE_C99


218 
__MATHCALLX
 (
c›ysign
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
), (
__c⁄°__
));

219 
	g__END_NAMESPACE_C99


222 #ifde‡
__USE_ISOC99


223 
__BEGIN_NAMESPACE_C99


225 
__MATHCALLX
 (
«n
,, (
__c⁄°
 *
__ègb
), (
__c⁄°__
));

226 
	g__END_NAMESPACE_C99


231 
__MATHDECL_1
 (,
__i¢™
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

233 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


235 
__MATHDECL_1
 (,
i¢™
,, (
_MdoubÀ_
 
__vÆue
)Ë
__©åibuã__
 ((
__c⁄°__
));

238 
__MATHCALL
 (
j0
,, (
_MdoubÀ_
));

239 
__MATHCALL
 (
j1
,, (
_MdoubÀ_
));

240 
__MATHCALL
 (
jn
,, (, 
_MdoubÀ_
));

241 
__MATHCALL
 (
y0
,, (
_MdoubÀ_
));

242 
__MATHCALL
 (
y1
,, (
_MdoubÀ_
));

243 
__MATHCALL
 (
yn
,, (, 
_MdoubÀ_
));

247 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN
 || deföed 
__USE_ISOC99


248 
__BEGIN_NAMESPACE_C99


250 
__MATHCALL
 (
îf
,, (
_MdoubÀ_
));

251 
__MATHCALL
 (
îfc
,, (
_MdoubÀ_
));

252 
__MATHCALL
 (
lgamma
,, (
_MdoubÀ_
));

253 
	g__END_NAMESPACE_C99


256 #ifde‡
__USE_ISOC99


257 
__BEGIN_NAMESPACE_C99


259 
__MATHCALL
 (
tgamma
,, (
_MdoubÀ_
));

260 
	g__END_NAMESPACE_C99


263 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


265 
__MATHCALL
 (
gamma
,, (
_MdoubÀ_
));

268 #ifde‡
__USE_MISC


272 
__MATHCALL
 (
lgamma
,
_r
, (
_MdoubÀ_
, *
__signgamp
));

276 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


277 
__BEGIN_NAMESPACE_C99


280 
__MATHCALL
 (
röt
,, (
_MdoubÀ_
 
__x
));

283 
__MATHCALLX
 (
√xè·î
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
), (
__c⁄°__
));

284 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__LDBL_COMPAT


285 
__MATHCALLX
 (
√xâow¨d
,, (
_MdoubÀ_
 
__x
, 
__y
), (
__c⁄°__
));

289 
__MATHCALL
 (
ªmaödî
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

291 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


293 
__MATHCALL
 (
sˇlbn
,, (
_MdoubÀ_
 
__x
, 
__n
));

297 
__MATHDECL
 (,
ûogb
,, (
_MdoubÀ_
 
__x
));

300 #ifde‡
__USE_ISOC99


302 
__MATHCALL
 (
sˇlb 
,, (
_MdoubÀ_
 
__x
, 
__n
));

306 
__MATHCALL
 (
√¨byöt
,, (
_MdoubÀ_
 
__x
));

310 
__MATHCALLX
 (
round
,, (
_MdoubÀ_
 
__x
), (
__c⁄°__
));

314 
__MATHCALLX
 (
åunc
,, (
_MdoubÀ_
 
__x
), (
__c⁄°__
));

319 
__MATHCALL
 (
ªmquo
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
, *
__quo
));

326 
__MATHDECL
 (,
Ãöt
,, (
_MdoubÀ_
 
__x
));

327 
__MATHDECL
 (,
Œröt
,, (
_MdoubÀ_
 
__x
));

331 
__MATHDECL
 (,
Ãound
,, (
_MdoubÀ_
 
__x
));

332 
__MATHDECL
 (,
Œround
,, (
_MdoubÀ_
 
__x
));

336 
__MATHCALL
 (
fdim
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

339 
__MATHCALL
 (
fmax
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

342 
__MATHCALL
 (
fmö
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
));

346 
__MATHDECL_1
 (, 
__Â˛assify
,, (
_MdoubÀ_
 
__vÆue
))

347 
__©åibuã__
 ((
__c⁄°__
));

350 
__MATHDECL_1
 (, 
__signbô
,, (
_MdoubÀ_
 
__vÆue
))

351 
__©åibuã__
 ((
__c⁄°__
));

355 
__MATHCALL
 (
fma
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__y
, _MdoubÀ_ 
__z
));

358 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_ISOC99


359 
	g__END_NAMESPACE_C99


362 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


364 
__MATHCALL
 (
sˇlb
,, (
_MdoubÀ_
 
__x
, _MdoubÀ_ 
__n
));

	@/usr/include/bits/mathdef.h

19 #i‡!
deföed
 
_MATH_H
 && !deföed 
_COMPLEX_H


23 #i‡
deföed
 
__USE_ISOC99
 && deföed 
_MATH_H
 && !deföed 
_MATH_H_MATHDEF


24 
	#_MATH_H_MATHDEF
 1

	)

26 #i‡
deföed
 
__FLT_EVAL_METHOD__
 && __FLT_EVAL_METHOD__ == 0

29 
	tÊﬂt_t
;

30 
	tdoubÀ_t
;

36 
	tÊﬂt_t
;

38 
	tdoubÀ_t
;

43 
	#FP_ILOGB0
 (-2147483647 - 1)

	)

44 
	#FP_ILOGBNAN
 (-2147483647 - 1)

	)

	@/usr/include/bits/mathinline.h

22 #i‚de‡
_MATH_H


26 #ifde‡
__˝lu•lus


27 
	#__MATH_INLINE
 
__ölöe


	)

29 
	#__MATH_INLINE
 
__exã∫_ölöe


	)

33 #i‡
deföed
 
__USE_ISOC99
 && deföed 
__GNUC__
 && __GNUC__ >= 2

35 #i‡!
__GNUC_PREREQ
 (2,97)

40 #unde‡
isgª©î


41 #unde‡
isgª©îequÆ


42 #unde‡
i¶ess


43 #unde‡
i¶es£quÆ


44 #unde‡
i¶essgª©î


45 #unde‡
isun‹dîed


46 #ifde‡
__i686__


49 
	#isgª©î
(
x
, 
y
) \

50 ({ 
__ªsu…
; \

51 
	`__asm__
 ("fucomip %%st(1), %%st; seta %%al" \

52 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st"); \

53 
__ªsu…
; })

	)

54 
	#isgª©îequÆ
(
x
, 
y
) \

55 ({ 
__ªsu…
; \

56 
	`__asm__
 ("fucomip %%st(1), %%st; setae %%al" \

57 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st"); \

58 
__ªsu…
; })

	)

60 
	#i¶ess
(
x
, 
y
) \

61 ({ 
__ªsu…
; \

62 
	`__asm__
 ("fucomip %%st(1), %%st; seta %%al" \

63 : "˜" (
__ªsu…
Ë: "u" (
x
), "t" (
y
) : "cc", "st"); \

64 
__ªsu…
; })

	)

66 
	#i¶es£quÆ
(
x
, 
y
) \

67 ({ 
__ªsu…
; \

68 
	`__asm__
 ("fucomip %%st(1), %%st; setae %%al" \

69 : "˜" (
__ªsu…
Ë: "u" (
x
), "t" (
y
) : "cc", "st"); \

70 
__ªsu…
; })

	)

72 
	#i¶essgª©î
(
x
, 
y
) \

73 ({ 
__ªsu…
; \

74 
	`__asm__
 ("fucomip %%st(1), %%st; setne %%al" \

75 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st"); \

76 
__ªsu…
; })

	)

78 
	#isun‹dîed
(
x
, 
y
) \

79 ({ 
__ªsu…
; \

80 
	`__asm__
 ("fucomip %%st(1), %%st; setp %%al" \

81 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st"); \

82 
__ªsu…
; })

	)

85 
	#isgª©î
(
x
, 
y
) \

86 ({ 
__ªsu…
; \

87 
	`__asm__
 ("fucompp; fnstsw;Åestb $0x45, %%ah; setz %%al" \

88 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

89 
__ªsu…
; })

	)

91 
	#isgª©îequÆ
(
x
, 
y
) \

92 ({ 
__ªsu…
; \

93 
	`__asm__
 ("fucompp; fnstsw;Åestb $0x05, %%ah; setz %%al" \

94 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

95 
__ªsu…
; })

	)

97 
	#i¶ess
(
x
, 
y
) \

98 ({ 
__ªsu…
; \

99 
	`__asm__
 ("fucompp; fnstsw;Åestb $0x45, %%ah; setz %%al" \

100 : "˜" (
__ªsu…
Ë: "u" (
x
), "t" (
y
) : "cc", "st", "st(1)"); \

101 
__ªsu…
; })

	)

103 
	#i¶es£quÆ
(
x
, 
y
) \

104 ({ 
__ªsu…
; \

105 
	`__asm__
 ("fucompp; fnstsw;Åestb $0x05, %%ah; setz %%al" \

106 : "˜" (
__ªsu…
Ë: "u" (
x
), "t" (
y
) : "cc", "st", "st(1)"); \

107 
__ªsu…
; })

	)

109 
	#i¶essgª©î
(
x
, 
y
) \

110 ({ 
__ªsu…
; \

111 
	`__asm__
 ("fucompp; fnstsw;Åestb $0x44, %%ah; setz %%al" \

112 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

113 
__ªsu…
; })

	)

115 
	#isun‹dîed
(
x
, 
y
) \

116 ({ 
__ªsu…
; \

117 
	`__asm__
 ("fucompp; fnstsw; sahf; setp %%al" \

118 : "˜" (
__ªsu…
Ë: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

119 
__ªsu…
; })

	)

125 #i‡
__GNUC_PREREQ
 (2, 8)

127 
__MATH_INLINE
 

128 
__NTH
 (
	$__signbôf
 (
__x
))

130 
__exãnsi⁄__
 uni⁄ { 
__f
; 
__i
; } 
__u
 = { __f: 
__x
 };

131  
__u
.
__i
 < 0;

132 
	}
}

133 
__MATH_INLINE
 

134 
__NTH
 (
	$__signbô
 (
__x
))

136 
__exãnsi⁄__
 uni⁄ { 
__d
; 
__i
[2]; } 
__u
 = { __d: 
__x
 };

137  
__u
.
__i
[1] < 0;

138 
	}
}

139 
__MATH_INLINE
 

140 
__NTH
 (
	$__signbôl
 (
__x
))

142 
__exãnsi⁄__
 uni⁄ { 
__l
; 
__i
[3]; } 
__u
 = { __l: 
__x
 };

143  (
__u
.
__i
[2] & 0x8000) != 0;

144 
	}
}

151 #i‡
__GNUC_PREREQ
 (2, 8)

153 #i‡((!
deföed
 
__NO_MATH_INLINES
 || deföed 
__LIBC_INTERNAL_MATH_INLINES
) \

154 && 
deföed
 
	g__OPTIMIZE__
)

163 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


164 
	#__ölöe_m©h›
(
func
, 
›
) \

165 
	`__ölöe_m©h›_
 (, 
func
, 
›
) \

166 
	`__ölöe_m©h›_
 (, 
	`__CONCAT
(
func
,
f
), 
›
) \

167 
	`__ölöe_m©h›_
 (, 
	`__CONCAT
(
func
,
l
), 
›
)

	)

168 
	#__ölöe_m©h›NP
(
func
, 
›
) \

169 
	`__ölöe_m©h›NP_
 (, 
func
, 
›
) \

170 
	`__ölöe_m©h›NP_
 (, 
	`__CONCAT
(
func
,
f
), 
›
) \

171 
	`__ölöe_m©h›NP_
 (, 
	`__CONCAT
(
func
,
l
), 
›
)

	)

173 
	#__ölöe_m©h›
(
func
, 
›
) \

174 
	`__ölöe_m©h›_
 (, 
func
, 
›
)

	)

175 
	#__ölöe_m©h›NP
(
func
, 
›
) \

176 
	`__ölöe_m©h›NP_
 (, 
func
, 
›
)

	)

179 
	#__ölöe_m©h›_
(
Êﬂt_ty≥
, 
func
, 
›
) \

180 
	`__ölöe_m©h›_de˛_
 (
Êﬂt_ty≥
, 
func
, 
›
, "0" (
__x
))

	)

181 
	#__ölöe_m©h›NP_
(
Êﬂt_ty≥
, 
func
, 
›
) \

182 
	`__ölöe_m©h›_de˛NP_
 (
Êﬂt_ty≥
, 
func
, 
›
, "0" (
__x
))

	)

185 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


186 
	#__ölöe_m©h›_de˛
(
func
, 
›
, 
∑øms
...) \

187 
	`__ölöe_m©h›_de˛_
 (, 
func
, 
›
, 
∑øms
) \

188 
	`__ölöe_m©h›_de˛_
 (, 
	`__CONCAT
(
func
,
f
), 
›
, 
∑øms
) \

189 
	`__ölöe_m©h›_de˛_
 (, 
	`__CONCAT
(
func
,
l
), 
›
, 
∑øms
)

	)

190 
	#__ölöe_m©h›_de˛NP
(
func
, 
›
, 
∑øms
...) \

191 
	`__ölöe_m©h›_de˛NP_
 (, 
func
, 
›
, 
∑øms
) \

192 
	`__ölöe_m©h›_de˛NP_
 (, 
	`__CONCAT
(
func
,
f
), 
›
, 
∑øms
) \

193 
	`__ölöe_m©h›_de˛NP_
 (, 
	`__CONCAT
(
func
,
l
), 
›
, 
∑øms
)

	)

195 
	#__ölöe_m©h›_de˛
(
func
, 
›
, 
∑øms
...) \

196 
	`__ölöe_m©h›_de˛_
 (, 
func
, 
›
, 
∑øms
)

	)

197 
	#__ölöe_m©h›_de˛NP
(
func
, 
›
, 
∑øms
...) \

198 
	`__ölöe_m©h›_de˛NP_
 (, 
func
, 
›
, 
∑øms
)

	)

201 
	#__ölöe_m©h›_de˛_
(
Êﬂt_ty≥
, 
func
, 
›
, 
∑øms
...) \

202 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`func
 (Êﬂt_ty≥Ë
__THROW
; \

203 
	`__ölöe_m©h›_de˛NP_
 (
Êﬂt_ty≥
, 
func
, 
›
, 
∑øms
)

	)

205 
	#__ölöe_m©h›_de˛NP_
(
Êﬂt_ty≥
, 
func
, 
›
, 
∑øms
...) \

206 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`__NTH
 (
	`func
 (Êﬂt_ty≥ 
__x
)) \

208 
Êﬂt_ty≥
 
__ªsu…
; \

209 
__asm
 
	`__vﬁ©ûe__
 (
›
 : "Ò" (
__ªsu…
Ë: 
∑øms
); \

210  
__ªsu…
; \

211 }

	)

214 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


215 
	#__ölöe_m©hcode
(
func
, 
¨g
, 
code
) \

216 
	`__ölöe_m©hcode_
 (, 
func
, 
¨g
, 
code
) \

217 
	`__ölöe_m©hcode_
 (, 
	`__CONCAT
(
func
,
f
), 
¨g
, 
code
) \

218 
	`__ölöe_m©hcode_
 (, 
	`__CONCAT
(
func
,
l
), 
¨g
, 
code
)

	)

219 
	#__ölöe_m©hcodeNP
(
func
, 
¨g
, 
code
) \

220 
	`__ölöe_m©hcodeNP_
 (, 
func
, 
¨g
, 
code
) \

221 
	`__ölöe_m©hcodeNP_
 (, 
	`__CONCAT
(
func
,
f
), 
¨g
, 
code
) \

222 
	`__ölöe_m©hcodeNP_
 (, 
	`__CONCAT
(
func
,
l
), 
¨g
, 
code
)

	)

223 
	#__ölöe_m©hcode2
(
func
, 
¨g1
, 
¨g2
, 
code
) \

224 
	`__ölöe_m©hcode2_
 (, 
func
, 
¨g1
, 
¨g2
, 
code
) \

225 
	`__ölöe_m©hcode2_
 (, 
	`__CONCAT
(
func
,
f
), 
¨g1
, 
¨g2
, 
code
) \

226 
	`__ölöe_m©hcode2_
 (, 
	`__CONCAT
(
func
,
l
), 
¨g1
, 
¨g2
, 
code
)

	)

227 
	#__ölöe_m©hcodeNP2
(
func
, 
¨g1
, 
¨g2
, 
code
) \

228 
	`__ölöe_m©hcodeNP2_
 (, 
func
, 
¨g1
, 
¨g2
, 
code
) \

229 
	`__ölöe_m©hcodeNP2_
 (, 
	`__CONCAT
(
func
,
f
), 
¨g1
, 
¨g2
, 
code
) \

230 
	`__ölöe_m©hcodeNP2_
 (, 
	`__CONCAT
(
func
,
l
), 
¨g1
, 
¨g2
, 
code
)

	)

231 
	#__ölöe_m©hcode3
(
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

232 
	`__ölöe_m©hcode3_
 (, 
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

233 
	`__ölöe_m©hcode3_
 (, 
	`__CONCAT
(
func
,
f
), 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

234 
	`__ölöe_m©hcode3_
 (, 
	`__CONCAT
(
func
,
l
), 
¨g1
, 
¨g2
, 
¨g3
, 
code
)

	)

235 
	#__ölöe_m©hcodeNP3
(
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

236 
	`__ölöe_m©hcodeNP3_
 (, 
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

237 
	`__ölöe_m©hcodeNP3_
 (, 
	`__CONCAT
(
func
,
f
), 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

238 
	`__ölöe_m©hcodeNP3_
 (, 
	`__CONCAT
(
func
,
l
), 
¨g1
, 
¨g2
, 
¨g3
, 
code
)

	)

240 
	#__ölöe_m©hcode
(
func
, 
¨g
, 
code
) \

241 
	`__ölöe_m©hcode_
 (, 
func
, (
¨g
), 
code
)

	)

242 
	#__ölöe_m©hcodeNP
(
func
, 
¨g
, 
code
) \

243 
	`__ölöe_m©hcodeNP_
 (, 
func
, (
¨g
), 
code
)

	)

244 
	#__ölöe_m©hcode2
(
func
, 
¨g1
, 
¨g2
, 
code
) \

245 
	`__ölöe_m©hcode2_
 (, 
func
, 
¨g1
, 
¨g2
, 
code
)

	)

246 
	#__ölöe_m©hcodeNP2
(
func
, 
¨g1
, 
¨g2
, 
code
) \

247 
	`__ölöe_m©hcodeNP2_
 (, 
func
, 
¨g1
, 
¨g2
, 
code
)

	)

248 
	#__ölöe_m©hcode3
(
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

249 
	`__ölöe_m©hcode3_
 (, 
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
)

	)

250 
	#__ölöe_m©hcodeNP3
(
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

251 
	`__ölöe_m©hcodeNP3_
 (, 
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
)

	)

254 
	#__ölöe_m©hcode_
(
Êﬂt_ty≥
, 
func
, 
¨g
, 
code
) \

255 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`func
 (Êﬂt_ty≥Ë
__THROW
; \

256 
	`__ölöe_m©hcodeNP_
(
Êﬂt_ty≥
, 
func
, 
¨g
, 
code
)

	)

258 
	#__ölöe_m©hcodeNP_
(
Êﬂt_ty≥
, 
func
, 
¨g
, 
code
) \

259 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`__NTH
 (
	`func
 (Êﬂt_ty≥ 
¨g
)) \

261 
code
; \

262 }

	)

265 
	#__ölöe_m©hcode2_
(
Êﬂt_ty≥
, 
func
, 
¨g1
, 
¨g2
, 
code
) \

266 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`func
 (Êﬂt_ty≥, flﬂt_ty≥Ë
__THROW
; \

267 
	`__ölöe_m©hcodeNP2_
 (
Êﬂt_ty≥
, 
func
, 
¨g1
, 
¨g2
, 
code
)

	)

269 
	#__ölöe_m©hcodeNP2_
(
Êﬂt_ty≥
, 
func
, 
¨g1
, 
¨g2
, 
code
) \

270 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`__NTH
 (
	`func
 (Êﬂt_ty≥ 
¨g1
, flﬂt_ty≥ 
¨g2
)) \

272 
code
; \

273 }

	)

275 
	#__ölöe_m©hcode3_
(
Êﬂt_ty≥
, 
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

276 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`func
 (Êﬂt_ty≥, flﬂt_ty≥, flﬂt_ty≥Ë
__THROW
; \

277 
	`__ölöe_m©hcodeNP3_
(
Êﬂt_ty≥
, 
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
)

	)

279 
	#__ölöe_m©hcodeNP3_
(
Êﬂt_ty≥
, 
func
, 
¨g1
, 
¨g2
, 
¨g3
, 
code
) \

280 
__MATH_INLINE
 
Êﬂt_ty≥
 
	`__NTH
 (
	`func
 (Êﬂt_ty≥ 
¨g1
, flﬂt_ty≥ 
¨g2
, \

281 
Êﬂt_ty≥
 
¨g3
)) \

283 
code
; \

284 }

	)

288 #i‡!
deföed
 
__NO_MATH_INLINES
 && deföed 
__OPTIMIZE__


291 
__ölöe_m©hcode
 (
__sgn
, 
__x
, \

292  
__x
 == 0.0 ? 0.0 : (__x > 0.0 ? 1.0 : -1.0))

295 #ifde‡
__FAST_MATH__


296 
__ölöe_m©hcode
 (
__pow2
, 
__x
, \

297 
__vÆue
; \

298 
__exp⁄ít
; \

299 
__exãnsi⁄__
 
__p
 = (Ë
__x
; \

300 i‡(
__x
 =(Ë
__p
) \

302 
__asm
 
__vﬁ©ûe__
 \

304 : "Ò" (
__vÆue
Ë: "0" (1.0), "u" (
__x
)); \

305  
__vÆue
; \

307 
__asm
 
__vﬁ©ûe__
 \

313 : "Ò" (
__vÆue
), "=u" (
__exp⁄ít
Ë: "0" (
__x
)); \

314 
__vÆue
 += 1.0; \

315 
__asm
 
__vﬁ©ûe__
 \

317 : "Ò" (
__vÆue
Ë: "0" (__vÆue), "u" (
__exp⁄ít
)); \

318  
__vÆue
)

320 #ifde‡
__USE_GNU


321 
	#__söcos_code
 \

322 
__co§
; \

323 
__sör
; \

324 
__asm
 
__vﬁ©ûe__
 \

339 : "Ò" (
__co§
), "=u" (
__sör
Ë: "0" (
__x
)); \

340 *
__söx
 = 
__sör
; \

341 *
__cosx
 = 
__co§


	)

343 
__MATH_INLINE
 

344 
__NTH
 (
	$__söcos
 (
__x
, *
__söx
, *
__cosx
))

346 
__söcos_code
;

347 
	}
}

349 
__MATH_INLINE
 

350 
__NTH
 (
	$__söcosf
 (
__x
, *
__söx
, *
__cosx
))

352 
__söcos_code
;

353 
	}
}

355 
__MATH_INLINE
 

356 
__NTH
 (
	$__söco¶
 (
__x
, *
__söx
, *
__cosx
))

358 
__söcos_code
;

359 
	}
}

366 #i‡
__GNUC_PREREQ
 (3, 5)

367 
	#__expm1_code
 \

368 
__ãmp
; \

369 
__ãmp
 = 
	`__buûtö_expm1l
 (
__x
); \

370  
__ãmp
 ? __ãm∞: 
__x


	)

372 
	#__expm1_code
 \

373 
__vÆue
; \

374 
__exp⁄ít
; \

375 
__ãmp
; \

376 
__asm
 
__vﬁ©ûe__
 \

385 : "Ò" (
__vÆue
), "=u" (
__exp⁄ít
Ë: "0" (
__x
)); \

386 
__asm
 
__vﬁ©ûe__
 \

388 : "Ò" (
__ãmp
Ë: "0" (1.0), "u" (
__exp⁄ít
)); \

389 
__ãmp
 -= 1.0; \

390 
__ãmp
 +
__vÆue
; \

391  
__ãmp
 ? __ãm∞: 
__x


	)

393 
	$__ölöe_m©hcodeNP_
 (, 
__expm1l
, 
__x
, 
__expm1_code
)

395 #i‡
	`__GNUC_PREREQ
 (3, 4)

396 
	`__ölöe_m©hcodeNP_
 (, 
__ex∂
, 
__x
,  
	$__buûtö_ex∂
 (
__x
))

398 
	#__exp_code
 \

399 
__vÆue
; \

400 
__exp⁄ít
; \

401 
__asm
 
__vﬁ©ûe__
 \

409 : "Ò" (
__vÆue
), "=u" (
__exp⁄ít
Ë: "0" (
__x
)); \

410 
__vÆue
 += 1.0; \

411 
__asm
 
__vﬁ©ûe__
 \

413 : "Ò" (
__vÆue
Ë: "0" (__vÆue), "u" (
__exp⁄ít
)); \

414  
__vÆue


	)

415 
	$__ölöe_m©hcodeNP
 (
exp
, 
__x
, 
__exp_code
)

416 
	$__ölöe_m©hcodeNP_
 (, 
__ex∂
, 
__x
, 
__exp_code
)

420 #i‡!
	`__GNUC_PREREQ
 (3, 5)

421 
	`__ölöe_m©hcodeNP
 (
èn
, 
__x
, \

422 
__vÆue
; \

423 
__vÆue2
 
	`__©åibuã__
 ((
__unu£d__
)); \

424 
__asm
 
__vﬁ©ûe__
 \

426 : "Ò" (
__vÆue2
), "=u" (
__vÆue
Ë: "0" (
__x
)); \

427  
__vÆue
)

432 #i‡
	`__GNUC_PREREQ
 (3, 4)

433 
	`__ölöe_m©hcodeNP2_
 (, 
__©™2l
, 
__y
, 
__x
,

434  
	$__buûtö_©™2l
 (
__y
, 
__x
))

436 
	#__©™2_code
 \

437 
__vÆue
; \

438 
__asm
 
__vﬁ©ûe__
 \

440 : "Ò" (
__vÆue
Ë: "0" (
__x
), "u" (
__y
) : "st(1)"); \

441  
__vÆue


	)

442 #ifde‡
__FAST_MATH__


443 
	$__ölöe_m©hcodeNP2
 (
©™2
, 
__y
, 
__x
, 
__©™2_code
)

445 
	$__ölöe_m©hcodeNP2_
 (, 
__©™2l
, 
__y
, 
__x
, 
__©™2_code
)

449 #i‡
deföed
 
__FAST_MATH__
 && !
	`__GNUC_PREREQ
 (3, 5)

450 
	`__ölöe_m©hcodeNP2
 (
fmod
, 
__x
, 
__y
, \

451 
__vÆue
; \

452 
__asm
 
__vﬁ©ûe__
 \

457 : "Ò" (
__vÆue
Ë: "0" (
__x
), "u" (
__y
) : "ax", "cc"); \

458  
__vÆue
)

462 #ifde‡
__FAST_MATH__


463 #i‡!
	`__GNUC_PREREQ
 (3,3)

464 
	`__ölöe_m©h›NP
 (
sqπ
, "fsqrt")

465 
	`__ölöe_m©h›NP_
 (, 
__sqπl
, "fsqrt")

466 
	#__libc_sqπl
(
n
Ë
	`__sqπl
 (n)

	)

468 
	#__libc_sqπl
(
n
Ë
	`__buûtö_sqπl
 (n)

	)

472 #i‡
	`__GNUC_PREREQ
 (2, 8)

473 
	`__ölöe_m©hcodeNP_
 (, 
Ábs
, 
__x
,  
	$__buûtö_Ábs
 (
__x
))

474 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


475 
	`__ölöe_m©hcodeNP_
 (, 
Ábsf
, 
__x
,  
	$__buûtö_Ábsf
 (
__x
))

476 
	`__ölöe_m©hcodeNP_
 (, 
Áb¶
, 
__x
,  
	$__buûtö_Áb¶
 (
__x
))

478 
	`__ölöe_m©hcodeNP_
 (, 
__Áb¶
, 
__x
,  
	$__buûtö_Áb¶
 (
__x
))

480 
	`__ölöe_m©h›
 (
Ábs
, "fabs")

481 
	`__ölöe_m©h›_
 (, 
__Áb¶
, "fabs")

484 #ifde‡
__FAST_MATH__


485 #i‡!
	`__GNUC_PREREQ
 (3, 4)

487 
	`__ölöe_m©h›NP
 (
sö
, "fsin")

489 
	`__ölöe_m©h›NP
 (
cos
, "fcos")

491 
	`__ölöe_m©h›_de˛NP
 (
log
, "Êd 2; fxch; fyl2x", "0" (
__x
) : "st(1)")

494 #i‡!
	`__GNUC_PREREQ
 (3, 5)

495 
	`__ölöe_m©h›_de˛NP
 (
log10
, "Êdlg2; fxch; fyl2x", "0" (
__x
) : "st(1)")

497 
	`__ölöe_m©hcodeNP
 (
asö
, 
__x
,  
	`__©™2l
 (__x, 
	`__libc_sqπl
 (1.0 - __x * __x)))

498 
	`__ölöe_m©hcodeNP
 (
acos
, 
__x
,  
	`__©™2l
 (
	`__libc_sqπl
 (1.0 - __x * __x), __x))

501 #i‡!
	`__GNUC_PREREQ
 (3, 4)

502 
	`__ölöe_m©h›_de˛NP
 (
©™
, "Êd1; f∑èn", "0" (
__x
) : "st(1)")

506 
	`__ölöe_m©hcode_
 (, 
__sgn1l
, 
__x
, \

507 
__exãnsi⁄__
 uni⁄ { 
__xld
; 
__xi
[3]; } 
__n
 = \

508 { 
__xld
: 
__x
 
	}
}; \

509 
	g__n
.
	g__xi
[2] = (
__n
.
__xi
[2] & 0x8000) | 0x3fff; \

510 
	g__n
.
	g__xi
[1] = 0x80000000; \

511 
	g__n
.
	g__xi
[0] = 0; \

512  
	g__n
.
	g__xld
)

515 #ifde‡
__FAST_MATH__


517 
__ölöe_m©hcodeNP
 (
söh
, 
__x
, \

518 
__exm1
 = 
__expm1l
 (
__Áb¶
 (
__x
)); \

519  0.5 * (
__exm1
 / (__exm1 + 1.0Ë+ __exm1Ë* 
	$__sgn1l
 (
__x
))

521 
	`__ölöe_m©hcodeNP
 (
cosh
, 
__x
, \

522 
__ex
 = 
	`__ex∂
 (
__x
); \

523  0.5 * (
__ex
 + 1.0 / __ex))

525 
	`__ölöe_m©hcodeNP
 (
ènh
, 
__x
, \

526 
__exm1
 = 
	`__expm1l
 (-
	`__Áb¶
 (
__x
 + __x)); \

527  
__exm1
 / (__exm1 + 2.0Ë* 
	`__sgn1l
 (-
__x
))

530 
	`__ölöe_m©hcodeNP
 (
Êo‹
, 
__x
, \

531 
__vÆue
; \

532 
__ign‹e
; \

533 
__cw
; \

534 
__cwtmp
; \

535 
__asm
 
	`__vﬁ©ûe
 ("fnstcw %3\n\t" \

543 : "Ò" (
__vÆue
), "=&q" (
__ign‹e
), "=m" (
__cwtmp
), \

544 "=m" (
__cw
) \

545 : "0" (
__x
)); \

546  
__vÆue
)

548 
	`__ölöe_m©hcodeNP
 (
˚û
, 
__x
, \

549 
__vÆue
; \

550 
__ign‹e
; \

551 
__cw
; \

552 
__cwtmp
; \

553 
__asm
 
	`__vﬁ©ûe
 ("fnstcw %3\n\t" \

561 : "Ò" (
__vÆue
), "=&q" (
__ign‹e
), "=m" (
__cwtmp
), \

562 "=m" (
__cw
) \

563 : "0" (
__x
)); \

564  
__vÆue
)

566 #ifde‡
__FAST_MATH__


567 
	#__ldexp_code
 \

568 
__vÆue
; \

569 
__asm
 
__vﬁ©ûe__
 \

571 : "Ò" (
__vÆue
Ë: "0" (
__x
), "u" ((Ë
__y
)); \

572  
__vÆue


	)

574 
__MATH_INLINE
 

575 
	`__NTH
 (
	$ldexp
 (
__x
, 
__y
))

577 
__ldexp_code
;

578 
	}
}

583 #i‡
deföed
 
__USE_ISOC99
 || deföed 
__USE_MISC


585 #ifde‡
__FAST_MATH__


586 
	$__ölöe_m©hcodeNP
 (
expm1
, 
__x
, 
__expm1_code
)

590 
	#__M_SQRT2
 1.41421356237309504880L

	)

592 #i‡!
	`__GNUC_PREREQ
 (3, 5)

593 
	`__ölöe_m©hcodeNP
 (
log1p
, 
__x
, \

594 
__vÆue
; \

595 i‡(
	`__Áb¶
 (
__x
Ë>1.0 - 0.5 * 
__M_SQRT2
) \

596 
__vÆue
 = 
	`logl
 (1.0 + 
__x
); \

598 
__asm
 
__vﬁ©ûe__
 \

602 : "Ò" (
__vÆue
Ë: "0" (
__x
) : "st(1)"); \

603  
__vÆue
)

608 
	`__ölöe_m©hcodeNP
 (
asöh
, 
__x
, \

609 
__y
 = 
	`__Áb¶
 (
__x
); \

610  (
	`log1∂
 (
__y
 * __y / (
	`__libc_sqπl
 (__y * __y + 1.0) + 1.0) + __y) \

611 * 
	$__sgn1l
 (
__x
)))

613 
	`__ölöe_m©hcodeNP
 (
acosh
, 
__x
, \

614  
	`logl
 (
__x
 + 
	`__libc_sqπl
 (__x - 1.0) * __libc_sqrtl (__x + 1.0)))

616 
	`__ölöe_m©hcodeNP
 (
©™h
, 
__x
, \

617 
__y
 = 
	`__Áb¶
 (
__x
); \

618  -0.5 * 
	`log1∂
 (-(
__y
 + __yË/ (1.0 + __y)Ë* 
	$__sgn1l
 (
__x
))

621 
	`__ölöe_m©hcodeNP2
 (
hypŸ
, 
__x
, 
__y
,

622  
	`__libc_sqπl
 (
__x
 * __x + 
__y
 * __y))

624 #i‡!
	`__GNUC_PREREQ
 (3, 5)

625 
	`__ölöe_m©hcodeNP
(
logb
, 
__x
, \

626 
__vÆue
; \

627 
__junk
; \

628 
__asm
 
__vﬁ©ûe__
 \

630 : "Ò" (
__junk
), "=u" (
__vÆue
Ë: "0" (
__x
)); \

631  
__vÆue
)

637 #ifde‡
__USE_ISOC99


638 #ifde‡
__FAST_MATH__


640 #i‡!
	`__GNUC_PREREQ
 (3, 5)

641 
	`__ölöe_m©h›_de˛NP
 (
log2
, "Êd1; fxch; fyl2x", "0" (
__x
) : "st(1)")

644 
__MATH_INLINE
 

645 
	`__NTH
 (
	$ldexpf
 (
__x
, 
__y
))

647 
__ldexp_code
;

648 
	}
}

650 
__MATH_INLINE
 

651 
__NTH
 (
	$ldex∂
 (
__x
, 
__y
))

653 
__ldexp_code
;

654 
	}
}

656 
__ölöe_m©hcodeNP3
 (
fma
, 
__x
, 
__y
, 
__z
,  (__x * __y) + __z)

658 
__ölöe_m©h›NP
 (
röt
, "frndint")

661 
	#__Ãöt_code
 \

662 
__Ãöåes
; \

663 
__asm__
 
__vﬁ©ûe__
 \

665 : "=m" (
__Ãöåes
Ë: "t" (
__x
) : "st"); \

666  
__Ãöåes


	)

667 
__MATH_INLINE
 

668 
__NTH
 (
	$Ãötf
 (
__x
))

670 
__Ãöt_code
;

671 
	}
}

672 
__MATH_INLINE
 

673 
__NTH
 (
	$Ãöt
 (
__x
))

675 
__Ãöt_code
;

676 
	}
}

677 
__MATH_INLINE
 

678 
__NTH
 (
	$Ãöé
 (
__x
))

680 
__Ãöt_code
;

681 
	}
}

682 #unde‡
__Ãöt_code


684 
	#__Œröt_code
 \

685 
__Œröåes
; \

686 
__asm__
 
__vﬁ©ûe__
 \

688 : "=m" (
__Œröåes
Ë: "t" (
__x
) : "st"); \

689  
__Œröåes


	)

690 
__MATH_INLINE
 

691 
__NTH
 (
	$Œrötf
 (
__x
))

693 
__Œröt_code
;

694 
	}
}

695 
__MATH_INLINE
 

696 
__NTH
 (
	$Œröt
 (
__x
))

698 
__Œröt_code
;

699 
	}
}

700 
__MATH_INLINE
 

701 
__NTH
 (
	$Œröé
 (
__x
))

703 
__Œröt_code
;

704 
	}
}

705 #unde‡
__Œröt_code


710 #ifde‡
__USE_MISC


712 #i‡
deföed
 
__FAST_MATH__
 && !
__GNUC_PREREQ
 (3, 5)

713 
__ölöe_m©hcodeNP2
 (
dªm
, 
__x
, 
__y
, \

714 
__vÆue
; \

715 
__˛obbîed
; \

716 
__asm
 
__vﬁ©ûe__
 \

721 : "Ò" (
__vÆue
), "=&a" (
__˛obbîed
Ë: "0" (
__x
), "u" (
__y
) : "cc"); \

722  
__vÆue
)

727 
__MATH_INLINE
 

728 
__NTH
 (
	$__föôe
 (
__x
))

730  (
__exãnsi⁄__


731 (((((uni⁄ { 
__d
; 
__i
[2]; }Ë{__d: 
__x
}).__i[1]

733 
	}
}

736 #ifde‡
__FAST_MATH__


737 
__ölöe_m©hcode
 (
__coshm1
, 
__x
, \

738 
__exm1
 = 
__expm1l
 (
__Áb¶
 (
__x
)); \

739  0.5 * (
__exm1
 / (__exm1 + 1.0)) * __exm1)

741 
__ölöe_m©hcode
 (
__acosh1p
, 
__x
, \

742  
log1∂
 (
__x
 + 
__libc_sqπl
 (__x) * __libc_sqrtl (__x + 2.0)))

748 #unde‡
__©™2_code


749 #ifde‡
__FAST_MATH__


750 #unde‡
__expm1_code


751 #unde‡
__exp_code


752 #unde‡
__söcos_code


759 #ifde‡
__LIBC_INTERNAL_MATH_INLINES


760 
__ölöe_m©h›
 (
__õì754_sqπ
, "fsqrt")

761 
__ölöe_m©hcode2
 (
__õì754_©™2
, 
__y
, 
__x
,

762 
__vÆue
;

763 
__asm
 
__vﬁ©ûe__
 ("fpatan\n\t"

764 : "Ò" (
__vÆue
)

765 : "0" (
__x
), "u" (
__y
) : "st(1)");

766  
__vÆue
;)

	@/usr/include/bits/mman.h

20 #i‚de‡
_SYS_MMAN_H


33 
	#PROT_READ
 0x1

	)

34 
	#PROT_WRITE
 0x2

	)

35 
	#PROT_EXEC
 0x4

	)

36 
	#PROT_NONE
 0x0

	)

37 
	#PROT_GROWSDOWN
 0x01000000

	)

39 
	#PROT_GROWSUP
 0x02000000

	)

43 
	#MAP_SHARED
 0x01

	)

44 
	#MAP_PRIVATE
 0x02

	)

45 #ifde‡
__USE_MISC


46 
	#MAP_TYPE
 0x0‡

	)

50 
	#MAP_FIXED
 0x10

	)

51 #ifde‡
__USE_MISC


52 
	#MAP_FILE
 0

	)

53 
	#MAP_ANONYMOUS
 0x20

	)

54 
	#MAP_ANON
 
MAP_ANONYMOUS


	)

58 #ifde‡
__USE_MISC


59 
	#MAP_GROWSDOWN
 0x00100

	)

60 
	#MAP_DENYWRITE
 0x00800

	)

61 
	#MAP_EXECUTABLE
 0x01000

	)

62 
	#MAP_LOCKED
 0x02000

	)

63 
	#MAP_NORESERVE
 0x04000

	)

64 
	#MAP_POPULATE
 0x08000

	)

65 
	#MAP_NONBLOCK
 0x10000

	)

69 
	#MS_ASYNC
 1

	)

70 
	#MS_SYNC
 4

	)

71 
	#MS_INVALIDATE
 2

	)

74 
	#MCL_CURRENT
 1

	)

75 
	#MCL_FUTURE
 2

	)

79 #ifde‡
__USE_GNU


80 
	#MREMAP_MAYMOVE
 1

	)

81 
	#MREMAP_FIXED
 2

	)

85 #ifde‡
__USE_BSD


86 
	#MADV_NORMAL
 0

	)

87 
	#MADV_RANDOM
 1

	)

88 
	#MADV_SEQUENTIAL
 2

	)

89 
	#MADV_WILLNEED
 3

	)

90 
	#MADV_DONTNEED
 4

	)

91 
	#MADV_REMOVE
 9

	)

92 
	#MADV_DONTFORK
 10

	)

93 
	#MADV_DOFORK
 11

	)

97 #ifde‡
__USE_XOPEN2K


98 
	#POSIX_MADV_NORMAL
 0

	)

99 
	#POSIX_MADV_RANDOM
 1

	)

100 
	#POSIX_MADV_SEQUENTIAL
 2

	)

101 
	#POSIX_MADV_WILLNEED
 3

	)

102 
	#POSIX_MADV_DONTNEED
 4

	)

	@/usr/include/bits/nan.h

20 #i‚de‡
_MATH_H


27 #i‡
__GNUC_PREREQ
(3,3)

29 
	#NAN
 (
	`__buûtö_«nf
 (""))

	)

31 #ñi‡
deföed
 
__GNUC__


33 
	#NAN
 \

34 (
__exãnsi⁄__
 \

35 ((uni⁄ { 
__l
 
	`__©åibuã__
 ((
	`__mode__
 (
__SI__
))); 
__d
; }) \

36 { 
__l
: 0x7fc00000UL }).
__d
)

	)

40 
	~<ídün.h
>

42 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


43 
	#__«n_byãs
 { 0x7f, 0xc0, 0, 0 }

	)

45 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


46 
	#__«n_byãs
 { 0, 0, 0xc0, 0x7‡}

	)

49 uni⁄ { 
	m__c
[4]; 
	m__d
; } 
__«n_uni⁄


50 
	g__©åibuã_u£d__
 = { 
__«n_byãs
 };

51 
	#NAN
 (
__«n_uni⁄
.
__d
)

	)

	@/usr/include/bits/netdb.h

19 #i‚de‡
_NETDB_H


27 
	s√ã¡


29 *
	mn_«me
;

30 **
	mn_Æü£s
;

31 
	mn_addπy≥
;

32 
uöt32_t
 
	mn_√t
;

	@/usr/include/bits/posix1_lim.h

25 #i‚def 
_BITS_POSIX1_LIM_H


26 
	#_BITS_POSIX1_LIM_H
 1

	)

32 
	#_POSIX_AIO_LISTIO_MAX
 2

	)

35 
	#_POSIX_AIO_MAX
 1

	)

38 
	#_POSIX_ARG_MAX
 4096

	)

41 #ifde‡
__USE_XOPEN2K


42 
	#_POSIX_CHILD_MAX
 25

	)

44 
	#_POSIX_CHILD_MAX
 6

	)

48 
	#_POSIX_DELAYTIMER_MAX
 32

	)

52 
	#_POSIX_HOST_NAME_MAX
 255

	)

55 
	#_POSIX_LINK_MAX
 8

	)

58 
	#_POSIX_LOGIN_NAME_MAX
 9

	)

61 
	#_POSIX_MAX_CANON
 255

	)

65 
	#_POSIX_MAX_INPUT
 255

	)

68 
	#_POSIX_MQ_OPEN_MAX
 8

	)

71 
	#_POSIX_MQ_PRIO_MAX
 32

	)

74 
	#_POSIX_NAME_MAX
 14

	)

77 #ifde‡
__USE_XOPEN2K


78 
	#_POSIX_NGROUPS_MAX
 8

	)

80 
	#_POSIX_NGROUPS_MAX
 0

	)

84 #ifde‡
__USE_XOPEN2K


85 
	#_POSIX_OPEN_MAX
 20

	)

87 
	#_POSIX_OPEN_MAX
 16

	)

92 
	#_POSIX_FD_SETSIZE
 
_POSIX_OPEN_MAX


	)

95 
	#_POSIX_PATH_MAX
 256

	)

98 
	#_POSIX_PIPE_BUF
 512

	)

102 
	#_POSIX_RE_DUP_MAX
 255

	)

105 
	#_POSIX_RTSIG_MAX
 8

	)

108 
	#_POSIX_SEM_NSEMS_MAX
 256

	)

111 
	#_POSIX_SEM_VALUE_MAX
 32767

	)

114 
	#_POSIX_SIGQUEUE_MAX
 32

	)

117 
	#_POSIX_SSIZE_MAX
 32767

	)

120 
	#_POSIX_STREAM_MAX
 8

	)

123 
	#_POSIX_SYMLINK_MAX
 255

	)

127 
	#_POSIX_SYMLOOP_MAX
 8

	)

130 
	#_POSIX_TIMER_MAX
 32

	)

133 
	#_POSIX_TTY_NAME_MAX
 9

	)

136 
	#_POSIX_TZNAME_MAX
 6

	)

139 
	#_POSIX_QLIMIT
 1

	)

143 
	#_POSIX_HIWAT
 
_POSIX_PIPE_BUF


	)

146 
	#_POSIX_UIO_MAXIOV
 16

	)

149 
	#_POSIX_CLOCKRES_MIN
 20000000

	)

153 
	~<bôs/loˇl_lim.h
>

156 #i‚def 
SSIZE_MAX


157 
	#SSIZE_MAX
 
LONG_MAX


	)

164 #i‚def 
NGROUPS_MAX


165 
	#NGROUPS_MAX
 8

	)

	@/usr/include/bits/posix2_lim.h

23 #i‚def 
_BITS_POSIX2_LIM_H


24 
	#_BITS_POSIX2_LIM_H
 1

	)

28 
	#_POSIX2_BC_BASE_MAX
 99

	)

31 
	#_POSIX2_BC_DIM_MAX
 2048

	)

34 
	#_POSIX2_BC_SCALE_MAX
 99

	)

37 
	#_POSIX2_BC_STRING_MAX
 1000

	)

41 
	#_POSIX2_COLL_WEIGHTS_MAX
 2

	)

45 
	#_POSIX2_EXPR_NEST_MAX
 32

	)

48 
	#_POSIX2_LINE_MAX
 2048

	)

52 
	#_POSIX2_RE_DUP_MAX
 255

	)

56 
	#_POSIX2_CHARCLASS_NAME_MAX
 14

	)

63 #i‚def 
BC_BASE_MAX


64 
	#BC_BASE_MAX
 
_POSIX2_BC_BASE_MAX


	)

66 #i‚def 
BC_DIM_MAX


67 
	#BC_DIM_MAX
 
_POSIX2_BC_DIM_MAX


	)

69 #i‚def 
BC_SCALE_MAX


70 
	#BC_SCALE_MAX
 
_POSIX2_BC_SCALE_MAX


	)

72 #i‚def 
BC_STRING_MAX


73 
	#BC_STRING_MAX
 
_POSIX2_BC_STRING_MAX


	)

75 #i‚def 
COLL_WEIGHTS_MAX


76 
	#COLL_WEIGHTS_MAX
 255

	)

78 #i‚def 
EXPR_NEST_MAX


79 
	#EXPR_NEST_MAX
 
_POSIX2_EXPR_NEST_MAX


	)

81 #i‚def 
LINE_MAX


82 
	#LINE_MAX
 
_POSIX2_LINE_MAX


	)

84 #i‚def 
CHARCLASS_NAME_MAX


85 
	#CHARCLASS_NAME_MAX
 2048

	)

89 
	#RE_DUP_MAX
 (0x7fff)

	)

	@/usr/include/bits/posix_opt.h

20 #i‚def 
_POSIX_OPT_H


21 
	#_POSIX_OPT_H
 1

	)

24 
	#_POSIX_JOB_CONTROL
 1

	)

27 
	#_POSIX_SAVED_IDS
 1

	)

30 
	#_POSIX_PRIORITY_SCHEDULING
 200112L

	)

33 
	#_POSIX_SYNCHRONIZED_IO
 200112L

	)

36 
	#_POSIX_FSYNC
 200112L

	)

39 
	#_POSIX_MAPPED_FILES
 200112L

	)

42 
	#_POSIX_MEMLOCK
 200112L

	)

45 
	#_POSIX_MEMLOCK_RANGE
 200112L

	)

48 
	#_POSIX_MEMORY_PROTECTION
 200112L

	)

51 
	#_POSIX_CHOWN_RESTRICTED
 1

	)

55 
	#_POSIX_VDISABLE
 '\0'

	)

58 
	#_POSIX_NO_TRUNC
 1

	)

61 
	#_XOPEN_REALTIME
 1

	)

64 
	#_XOPEN_REALTIME_THREADS
 1

	)

67 
	#_XOPEN_SHM
 1

	)

70 
	#_POSIX_THREADS
 200112L

	)

73 
	#_POSIX_REENTRANT_FUNCTIONS
 1

	)

74 
	#_POSIX_THREAD_SAFE_FUNCTIONS
 200112L

	)

77 
	#_POSIX_THREAD_PRIORITY_SCHEDULING
 200112L

	)

80 
	#_POSIX_THREAD_ATTR_STACKSIZE
 200112L

	)

83 
	#_POSIX_THREAD_ATTR_STACKADDR
 200112L

	)

86 
	#_POSIX_THREAD_PRIO_INHERIT
 200112L

	)

90 
	#_POSIX_THREAD_PRIO_PROTECT
 200112L

	)

93 
	#_POSIX_SEMAPHORES
 200112L

	)

96 
	#_POSIX_REALTIME_SIGNALS
 200112L

	)

99 
	#_POSIX_ASYNCHRONOUS_IO
 200112L

	)

100 
	#_POSIX_ASYNC_IO
 1

	)

102 
	#_LFS_ASYNCHRONOUS_IO
 1

	)

104 
	#_POSIX_PRIORITIZED_IO
 200112L

	)

107 
	#_LFS64_ASYNCHRONOUS_IO
 1

	)

110 
	#_LFS_LARGEFILE
 1

	)

111 
	#_LFS64_LARGEFILE
 1

	)

112 
	#_LFS64_STDIO
 1

	)

115 
	#_POSIX_SHARED_MEMORY_OBJECTS
 200112L

	)

118 
	#_POSIX_CPUTIME
 0

	)

121 
	#_POSIX_THREAD_CPUTIME
 0

	)

124 
	#_POSIX_REGEXP
 1

	)

127 
	#_POSIX_READER_WRITER_LOCKS
 200112L

	)

130 
	#_POSIX_SHELL
 1

	)

133 
	#_POSIX_TIMEOUTS
 200112L

	)

136 
	#_POSIX_SPIN_LOCKS
 200112L

	)

139 
	#_POSIX_SPAWN
 200112L

	)

142 
	#_POSIX_TIMERS
 200112L

	)

145 
	#_POSIX_BARRIERS
 200112L

	)

148 
	#_POSIX_MESSAGE_PASSING
 200112L

	)

151 
	#_POSIX_THREAD_PROCESS_SHARED
 200112L

	)

154 
	#_POSIX_MONOTONIC_CLOCK
 0

	)

157 
	#_POSIX_CLOCK_SELECTION
 200112L

	)

160 
	#_POSIX_ADVISORY_INFO
 200112L

	)

163 
	#_POSIX_IPV6
 200112L

	)

166 
	#_POSIX_RAW_SOCKETS
 200112L

	)

169 
	#_POSIX2_CHAR_TERM
 200112L

	)

172 
	#_POSIX_SPORADIC_SERVER
 -1

	)

173 
	#_POSIX_THREAD_SPORADIC_SERVER
 -1

	)

176 
	#_POSIX_TRACE
 -1

	)

177 
	#_POSIX_TRACE_EVENT_FILTER
 -1

	)

178 
	#_POSIX_TRACE_INHERIT
 -1

	)

179 
	#_POSIX_TRACE_LOG
 -1

	)

182 
	#_POSIX_TYPED_MEMORY_OBJECTS
 -1

	)

	@/usr/include/bits/pthreadtypes.h

19 #i‚de‡
_BITS_PTHREADTYPES_H


20 
	#_BITS_PTHREADTYPES_H
 1

	)

22 
	#__SIZEOF_PTHREAD_ATTR_T
 36

	)

23 
	#__SIZEOF_PTHREAD_MUTEX_T
 24

	)

24 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

25 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

26 
	#__SIZEOF_PTHREAD_COND_COMPAT_T
 12

	)

27 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

28 
	#__SIZEOF_PTHREAD_RWLOCK_T
 32

	)

29 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

30 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

31 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

36 
	t±hªad_t
;

41 
	m__size
[
__SIZEOF_PTHREAD_ATTR_T
];

42 
	m__Æign
;

43 } 
	t±hªad_©å_t
;

46 
	s__±hªad_öã∫Æ_¶i°


48 
__±hªad_öã∫Æ_¶i°
 *
	m__√xt
;

49 } 
	t__±hªad_¶i°_t
;

56 
	s__±hªad_muãx_s


58 
	m__lock
;

59 
	m__cou¡
;

60 
	m__ow√r
;

63 
	m__köd
;

64 
	m__nu£rs
;

65 
__exãnsi⁄__
 union

67 
	m__•ös
;

68 
__±hªad_¶i°_t
 
	m__li°
;

70 } 
	m__d©a
;

71 
	m__size
[
__SIZEOF_PTHREAD_MUTEX_T
];

72 
	m__Æign
;

73 } 
	t±hªad_muãx_t
;

77 
	m__size
[
__SIZEOF_PTHREAD_MUTEXATTR_T
];

78 
	m__Æign
;

79 } 
	t±hªad_muãx©å_t
;

88 
	m__lock
;

89 
	m__fuãx
;

90 
__exãnsi⁄__
 
	m__tŸÆ_£q
;

91 
__exãnsi⁄__
 
	m__wakeup_£q
;

92 
__exãnsi⁄__
 
	m__wokí_£q
;

93 *
	m__muãx
;

94 
	m__nwaôîs
;

95 
	m__brﬂdˇ°_£q
;

96 } 
	m__d©a
;

97 
	m__size
[
__SIZEOF_PTHREAD_COND_T
];

98 
__exãnsi⁄__
 
	m__Æign
;

99 } 
	t±hªad_c⁄d_t
;

103 
	m__size
[
__SIZEOF_PTHREAD_CONDATTR_T
];

104 
	m__Æign
;

105 } 
	t±hªad_c⁄d©å_t
;

109 
	t±hªad_key_t
;

113 
	t±hªad_⁄˚_t
;

116 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


123 
	m__lock
;

124 
	m__ƒ_ªadîs
;

125 
	m__ªadîs_wakeup
;

126 
	m__wrôî_wakeup
;

127 
	m__ƒ_ªadîs_queued
;

128 
	m__ƒ_wrôîs_queued
;

131 
	m__Êags
;

132 
	m__wrôî
;

133 } 
	m__d©a
;

134 
	m__size
[
__SIZEOF_PTHREAD_RWLOCK_T
];

135 
	m__Æign
;

136 } 
	t±hªad_rwlock_t
;

140 
	m__size
[
__SIZEOF_PTHREAD_RWLOCKATTR_T
];

141 
	m__Æign
;

142 } 
	t±hªad_rwlock©å_t
;

146 #ifde‡
__USE_XOPEN2K


148 vﬁ©ûê
	t±hªad_•ölock_t
;

155 
	m__size
[
__SIZEOF_PTHREAD_BARRIER_T
];

156 
	m__Æign
;

157 } 
	t±hªad_b¨rõr_t
;

161 
	m__size
[
__SIZEOF_PTHREAD_BARRIERATTR_T
];

162 
	m__Æign
;

163 } 
	t±hªad_b¨rõøâr_t
;

168 
	#__˛ónup_f˘_©åibuã
 
	`__©åibuã__
 ((
	`__ªg∑rm__
 (1)))

	)

	@/usr/include/bits/select.h

19 #i‚de‡
_SYS_SELECT_H


24 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

26 
	#__FD_ZERO
(
fd•
) \

28 
__d0
, 
__d1
; \

29 
__asm__
 
	`__vﬁ©ûe__
 ("cld;Ñep; stosl" \

30 : "=c" (
__d0
), "=D" (
__d1
) \

31 : "a" (0), "0" ( (
fd_£t
) \

32 /  (
__fd_mask
)), \

33 "1" (&
	`__FDS_BITS
 (
fd•
)[0]) \

35 } 0)

	)

37 
	#__FD_SET
(
fd
, 
fd•
) \

38 
__asm__
 
	`__vﬁ©ûe__
 ("btsl %1,%0" \

39 : "=m" (
	`__FDS_BITS
 (
fd•
)[
	`__FDELT
 (
fd
)]) \

40 : "r" (((Ë(
fd
)Ë% 
__NFDBITS
) \

41 : "cc","mem‹y")

	)

42 
	#__FD_CLR
(
fd
, 
fd•
) \

43 
__asm__
 
	`__vﬁ©ûe__
 ("btrl %1,%0" \

44 : "=m" (
	`__FDS_BITS
 (
fd•
)[
	`__FDELT
 (
fd
)]) \

45 : "r" (((Ë(
fd
)Ë% 
__NFDBITS
) \

46 : "cc","mem‹y")

	)

47 
	#__FD_ISSET
(
fd
, 
fd•
) \

48 (
__exãnsi⁄__
 \

49 ({
__ªsu…
; \

50 
__asm__
 
	`__vﬁ©ûe__
 ("btl %1,%2 ; setcb %b0" \

51 : "=q" (
__ªsu…
) \

52 : "r" (((Ë(
fd
)Ë% 
__NFDBITS
), \

53 "m" (
	`__FDS_BITS
 (
fd•
)[
	`__FDELT
 (
fd
)]) \

55 
__ªsu…
; }))

	)

61 
	#__FD_ZERO
(
£t
) \

63 
__i
; \

64 
fd_£t
 *
__¨r
 = (
£t
); \

65 
__i
 = 0; __ò<  (
fd_£t
Ë/  (
__fd_mask
); ++__i) \

66 
	`__FDS_BITS
 (
__¨r
)[
__i
] = 0; \

67 } 0)

	)

68 
	#__FD_SET
(
d
, 
£t
Ë(
	`__FDS_BITS
 (£t)[
	`__FDELT
 (d)] |
	`__FDMASK
 (d))

	)

69 
	#__FD_CLR
(
d
, 
£t
Ë(
	`__FDS_BITS
 (£t)[
	`__FDELT
 (d)] &~
	`__FDMASK
 (d))

	)

70 
	#__FD_ISSET
(
d
, 
£t
Ë(
	`__FDS_BITS
 (£t)[
	`__FDELT
 (d)] & 
	`__FDMASK
 (d))

	)

	@/usr/include/bits/setjmp.h

21 #i‚de‡
_BITS_SETJMP_H


22 
	#_BITS_SETJMP_H
 1

	)

24 #i‡!
deföed
 
_SETJMP_H
 && !deföed 
_PTHREAD_H


28 #i‚def 
_ASM


29 
	t__jmp_buf
[6];

	@/usr/include/bits/shm.h

19 #i‚de‡
_SYS_SHM_H


23 
	~<bôs/ty≥s.h
>

26 
	#SHM_R
 0400

	)

27 
	#SHM_W
 0200

	)

30 
	#SHM_RDONLY
 010000

	)

31 
	#SHM_RND
 020000

	)

32 
	#SHM_REMAP
 040000

	)

35 
	#SHM_LOCK
 11

	)

36 
	#SHM_UNLOCK
 12

	)

38 
	g__BEGIN_DECLS


41 
	#SHMLBA
 (
	`__gë∑gesize
 ())

	)

42 
	$__gë∑gesize
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

46 
	tshm©t_t
;

49 
	sshmid_ds


51 
ùc_≥rm
 
shm_≥rm
;

52 
size_t
 
shm_£gsz
;

53 
__time_t
 
shm_©ime
;

54 
__unu£d1
;

55 
__time_t
 
shm_dtime
;

56 
__unu£d2
;

57 
__time_t
 
shm_˘ime
;

58 
__unu£d3
;

59 
__pid_t
 
shm_˝id
;

60 
__pid_t
 
shm_Õid
;

61 
shm©t_t
 
shm_«âch
;

62 
__unu£d4
;

63 
__unu£d5
;

66 #ifde‡
__USE_MISC


69 
	#SHM_STAT
 13

	)

70 
	#SHM_INFO
 14

	)

73 
	#SHM_DEST
 01000

	)

74 
	#SHM_LOCKED
 02000

	)

75 
	#SHM_HUGETLB
 04000

	)

76 
	#SHM_NORESERVE
 010000

	)

78 
	sshmöfo


80 
shmmax
;

81 
shmmö
;

82 
shmmni
;

83 
shm£g
;

84 
shmÆl
;

85 
__unu£d1
;

86 
__unu£d2
;

87 
__unu£d3
;

88 
__unu£d4
;

91 
	sshm_öfo


93 
u£d_ids
;

94 
shm_tŸ
;

95 
shm_rss
;

96 
shm_swp
;

97 
sw≠_©ãm±s
;

98 
sw≠_suc˚s£s
;

103 
__END_DECLS


	@/usr/include/bits/sigaction.h

20 #i‚de‡
_SIGNAL_H


25 
	ssiga˘i⁄


28 #ifde‡
__USE_POSIX199309


32 
__sigh™dÀr_t
 
	mß_h™dÀr
;

34 (*
	mß_siga˘i⁄
Ë(, 
	msigöfo_t
 *, *);

36 
	m__siga˘i⁄_h™dÀr
;

37 
	#ß_h™dÀr
 
__siga˘i⁄_h™dÀr
.
ß_h™dÀr


	)

38 
	#ß_siga˘i⁄
 
__siga˘i⁄_h™dÀr
.
ß_siga˘i⁄


	)

40 
__sigh™dÀr_t
 
	mß_h™dÀr
;

44 
__sig£t_t
 
	mß_mask
;

47 
	mß_Êags
;

50 (*
	mß_ª°‹î
) ();

54 
	#SA_NOCLDSTOP
 1

	)

55 
	#SA_NOCLDWAIT
 2

	)

56 
	#SA_SIGINFO
 4

	)

58 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_MISC


59 
	#SA_ONSTACK
 0x08000000

	)

60 
	#SA_RESTART
 0x10000000

	)

61 
	#SA_NODEFER
 0x40000000

	)

63 
	#SA_RESETHAND
 0x80000000

	)

65 #ifde‡
__USE_MISC


66 
	#SA_INTERRUPT
 0x20000000

	)

69 
	#SA_NOMASK
 
SA_NODEFER


	)

70 
	#SA_ONESHOT
 
SA_RESETHAND


	)

71 
	#SA_STACK
 
SA_ONSTACK


	)

75 
	#SIG_BLOCK
 0

	)

76 
	#SIG_UNBLOCK
 1

	)

77 
	#SIG_SETMASK
 2

	)

	@/usr/include/bits/sigcontext.h

19 #i‡!
deföed
 
_SIGNAL_H
 && !deföed 
_SYS_UCONTEXT_H


23 #i‚de‡
sigc⁄ãxt_°ru˘


26 
	#sigc⁄ãxt_°ru˘
 
sigc⁄ãxt


	)

28 
	~<asm/sigc⁄ãxt.h
>

	@/usr/include/bits/siginfo.h

20 #i‡!
deföed
 
_SIGNAL_H
 && !deföed 
__√ed_sigöfo_t
 \

21 && !
deföed
 
	g__√ed_sigevít_t


25 
	~<bôs/w‹dsize.h
>

27 #i‡(!
deföed
 
__have_sigvÆ_t
 \

28 && (
deföed
 
	g_SIGNAL_H
 || deföed 
	g__√ed_sigöfo_t
 \

29 || 
deföed
 
	g__√ed_sigevít_t
))

30 
	#__have_sigvÆ_t
 1

	)

33 
	usigvÆ


35 
	msivÆ_öt
;

36 *
	msivÆ_±r
;

37 } 
	tsigvÆ_t
;

40 #i‡(!
deföed
 
__have_sigöfo_t
 \

41 && (
deföed
 
	g_SIGNAL_H
 || deföed 
	g__√ed_sigöfo_t
))

42 
	#__have_sigöfo_t
 1

	)

44 
	#__SI_MAX_SIZE
 128

	)

45 #i‡
__WORDSIZE
 == 64

46 
	#__SI_PAD_SIZE
 ((
__SI_MAX_SIZE
 /  ()Ë- 4)

	)

48 
	#__SI_PAD_SIZE
 ((
__SI_MAX_SIZE
 /  ()Ë- 3)

	)

51 
	ssigöfo


53 
	msi_signo
;

54 
	msi_î∫o
;

56 
	msi_code
;

60 
	m_∑d
[
__SI_PAD_SIZE
];

65 
__pid_t
 
	msi_pid
;

66 
__uid_t
 
	msi_uid
;

67 } 
	m_kûl
;

72 
	msi_tid
;

73 
	msi_ovîrun
;

74 
sigvÆ_t
 
	msi_sigvÆ
;

75 } 
	m_timî
;

80 
__pid_t
 
	msi_pid
;

81 
__uid_t
 
	msi_uid
;

82 
sigvÆ_t
 
	msi_sigvÆ
;

83 } 
	m_π
;

88 
__pid_t
 
	msi_pid
;

89 
__uid_t
 
	msi_uid
;

90 
	msi_°©us
;

91 
__˛ock_t
 
	msi_utime
;

92 
__˛ock_t
 
	msi_°ime
;

93 } 
	m_sigchld
;

98 *
	msi_addr
;

99 } 
	m_sigÁu…
;

104 
	msi_b™d
;

105 
	msi_fd
;

106 } 
	m_sigpﬁl
;

107 } 
	m_sifõlds
;

108 } 
	tsigöfo_t
;

112 
	#si_pid
 
_sifõlds
.
_kûl
.
si_pid


	)

113 
	#si_uid
 
_sifõlds
.
_kûl
.
si_uid


	)

114 
	#si_timîid
 
_sifõlds
.
_timî
.
si_tid


	)

115 
	#si_ovîrun
 
_sifõlds
.
_timî
.
si_ovîrun


	)

116 
	#si_°©us
 
_sifõlds
.
_sigchld
.
si_°©us


	)

117 
	#si_utime
 
_sifõlds
.
_sigchld
.
si_utime


	)

118 
	#si_°ime
 
_sifõlds
.
_sigchld
.
si_°ime


	)

119 
	#si_vÆue
 
_sifõlds
.
_π
.
si_sigvÆ


	)

120 
	#si_öt
 
_sifõlds
.
_π
.
si_sigvÆ
.
sivÆ_öt


	)

121 
	#si_±r
 
_sifõlds
.
_π
.
si_sigvÆ
.
sivÆ_±r


	)

122 
	#si_addr
 
_sifõlds
.
_sigÁu…
.
si_addr


	)

123 
	#si_b™d
 
_sifõlds
.
_sigpﬁl
.
si_b™d


	)

124 
	#si_fd
 
_sifõlds
.
_sigpﬁl
.
si_fd


	)

131 
	mSI_ASYNCNL
 = -60,

132 
	#SI_ASYNCNL
 
SI_ASYNCNL


	)

133 
	mSI_TKILL
 = -6,

134 
	#SI_TKILL
 
SI_TKILL


	)

135 
	mSI_SIGIO
,

136 
	#SI_SIGIO
 
SI_SIGIO


	)

137 
	mSI_ASYNCIO
,

138 
	#SI_ASYNCIO
 
SI_ASYNCIO


	)

139 
	mSI_MESGQ
,

140 
	#SI_MESGQ
 
SI_MESGQ


	)

141 
	mSI_TIMER
,

142 
	#SI_TIMER
 
SI_TIMER


	)

143 
	mSI_QUEUE
,

144 
	#SI_QUEUE
 
SI_QUEUE


	)

145 
	mSI_USER
,

146 
	#SI_USER
 
SI_USER


	)

147 
	mSI_KERNEL
 = 0x80

148 
	#SI_KERNEL
 
SI_KERNEL


	)

155 
	mILL_ILLOPC
 = 1,

156 
	#ILL_ILLOPC
 
ILL_ILLOPC


	)

157 
	mILL_ILLOPN
,

158 
	#ILL_ILLOPN
 
ILL_ILLOPN


	)

159 
	mILL_ILLADR
,

160 
	#ILL_ILLADR
 
ILL_ILLADR


	)

161 
	mILL_ILLTRP
,

162 
	#ILL_ILLTRP
 
ILL_ILLTRP


	)

163 
	mILL_PRVOPC
,

164 
	#ILL_PRVOPC
 
ILL_PRVOPC


	)

165 
	mILL_PRVREG
,

166 
	#ILL_PRVREG
 
ILL_PRVREG


	)

167 
	mILL_COPROC
,

168 
	#ILL_COPROC
 
ILL_COPROC


	)

169 
	mILL_BADSTK


170 
	#ILL_BADSTK
 
ILL_BADSTK


	)

176 
	mFPE_INTDIV
 = 1,

177 
	#FPE_INTDIV
 
FPE_INTDIV


	)

178 
	mFPE_INTOVF
,

179 
	#FPE_INTOVF
 
FPE_INTOVF


	)

180 
	mFPE_FLTDIV
,

181 
	#FPE_FLTDIV
 
FPE_FLTDIV


	)

182 
	mFPE_FLTOVF
,

183 
	#FPE_FLTOVF
 
FPE_FLTOVF


	)

184 
	mFPE_FLTUND
,

185 
	#FPE_FLTUND
 
FPE_FLTUND


	)

186 
	mFPE_FLTRES
,

187 
	#FPE_FLTRES
 
FPE_FLTRES


	)

188 
	mFPE_FLTINV
,

189 
	#FPE_FLTINV
 
FPE_FLTINV


	)

190 
	mFPE_FLTSUB


191 
	#FPE_FLTSUB
 
FPE_FLTSUB


	)

197 
	mSEGV_MAPERR
 = 1,

198 
	#SEGV_MAPERR
 
SEGV_MAPERR


	)

199 
	mSEGV_ACCERR


200 
	#SEGV_ACCERR
 
SEGV_ACCERR


	)

206 
	mBUS_ADRALN
 = 1,

207 
	#BUS_ADRALN
 
BUS_ADRALN


	)

208 
	mBUS_ADRERR
,

209 
	#BUS_ADRERR
 
BUS_ADRERR


	)

210 
	mBUS_OBJERR


211 
	#BUS_OBJERR
 
BUS_OBJERR


	)

217 
	mTRAP_BRKPT
 = 1,

218 
	#TRAP_BRKPT
 
TRAP_BRKPT


	)

219 
	mTRAP_TRACE


220 
	#TRAP_TRACE
 
TRAP_TRACE


	)

226 
	mCLD_EXITED
 = 1,

227 
	#CLD_EXITED
 
CLD_EXITED


	)

228 
	mCLD_KILLED
,

229 
	#CLD_KILLED
 
CLD_KILLED


	)

230 
	mCLD_DUMPED
,

231 
	#CLD_DUMPED
 
CLD_DUMPED


	)

232 
	mCLD_TRAPPED
,

233 
	#CLD_TRAPPED
 
CLD_TRAPPED


	)

234 
	mCLD_STOPPED
,

235 
	#CLD_STOPPED
 
CLD_STOPPED


	)

236 
	mCLD_CONTINUED


237 
	#CLD_CONTINUED
 
CLD_CONTINUED


	)

243 
	mPOLL_IN
 = 1,

244 
	#POLL_IN
 
POLL_IN


	)

245 
	mPOLL_OUT
,

246 
	#POLL_OUT
 
POLL_OUT


	)

247 
	mPOLL_MSG
,

248 
	#POLL_MSG
 
POLL_MSG


	)

249 
	mPOLL_ERR
,

250 
	#POLL_ERR
 
POLL_ERR


	)

251 
	mPOLL_PRI
,

252 
	#POLL_PRI
 
POLL_PRI


	)

253 
	mPOLL_HUP


254 
	#POLL_HUP
 
POLL_HUP


	)

257 #unde‡
__√ed_sigöfo_t


261 #i‡(
deföed
 
_SIGNAL_H
 || deföed 
__√ed_sigevít_t
) \

262 && !
deföed
 
	g__have_sigevít_t


263 
	#__have_sigevít_t
 1

	)

266 
	#__SIGEV_MAX_SIZE
 64

	)

267 #i‡
__WORDSIZE
 == 64

268 
	#__SIGEV_PAD_SIZE
 ((
__SIGEV_MAX_SIZE
 /  ()Ë- 4)

	)

270 
	#__SIGEV_PAD_SIZE
 ((
__SIGEV_MAX_SIZE
 /  ()Ë- 3)

	)

273 
	ssigevít


275 
sigvÆ_t
 
	msigev_vÆue
;

276 
	msigev_signo
;

277 
	msigev_nŸify
;

281 
	m_∑d
[
__SIGEV_PAD_SIZE
];

285 
__pid_t
 
	m_tid
;

289 (*
	m_fun˘i⁄
Ë(
	msigvÆ_t
);

290 *
	m_©åibuã
;

291 } 
	m_sigev_thªad
;

292 } 
	m_sigev_un
;

293 } 
	tsigevít_t
;

296 
	#sigev_nŸify_fun˘i⁄
 
_sigev_un
.
_sigev_thªad
.
_fun˘i⁄


	)

297 
	#sigev_nŸify_©åibuãs
 
_sigev_un
.
_sigev_thªad
.
_©åibuã


	)

302 
	mSIGEV_SIGNAL
 = 0,

303 
	#SIGEV_SIGNAL
 
SIGEV_SIGNAL


	)

304 
	mSIGEV_NONE
,

305 
	#SIGEV_NONE
 
SIGEV_NONE


	)

306 
	mSIGEV_THREAD
,

307 
	#SIGEV_THREAD
 
SIGEV_THREAD


	)

309 
	mSIGEV_THREAD_ID
 = 4

310 
	#SIGEV_THREAD_ID
 
SIGEV_THREAD_ID


	)

	@/usr/include/bits/signum.h

20 #ifdef 
_SIGNAL_H


23 
	#SIG_ERR
 ((
__sigh™dÀr_t
Ë-1Ë

	)

24 
	#SIG_DFL
 ((
__sigh™dÀr_t
Ë0Ë

	)

25 
	#SIG_IGN
 ((
__sigh™dÀr_t
Ë1Ë

	)

27 #ifde‡
__USE_UNIX98


28 
	#SIG_HOLD
 ((
__sigh™dÀr_t
Ë2Ë

	)

33 
	#SIGHUP
 1

	)

34 
	#SIGINT
 2

	)

35 
	#SIGQUIT
 3

	)

36 
	#SIGILL
 4

	)

37 
	#SIGTRAP
 5

	)

38 
	#SIGABRT
 6

	)

39 
	#SIGIOT
 6

	)

40 
	#SIGBUS
 7

	)

41 
	#SIGFPE
 8

	)

42 
	#SIGKILL
 9

	)

43 
	#SIGUSR1
 10

	)

44 
	#SIGSEGV
 11

	)

45 
	#SIGUSR2
 12

	)

46 
	#SIGPIPE
 13

	)

47 
	#SIGALRM
 14

	)

48 
	#SIGTERM
 15

	)

49 
	#SIGSTKFLT
 16

	)

50 
	#SIGCLD
 
SIGCHLD


	)

51 
	#SIGCHLD
 17

	)

52 
	#SIGCONT
 18

	)

53 
	#SIGSTOP
 19

	)

54 
	#SIGTSTP
 20

	)

55 
	#SIGTTIN
 21

	)

56 
	#SIGTTOU
 22

	)

57 
	#SIGURG
 23

	)

58 
	#SIGXCPU
 24

	)

59 
	#SIGXFSZ
 25

	)

60 
	#SIGVTALRM
 26

	)

61 
	#SIGPROF
 27

	)

62 
	#SIGWINCH
 28

	)

63 
	#SIGPOLL
 
SIGIO


	)

64 
	#SIGIO
 29

	)

65 
	#SIGPWR
 30

	)

66 
	#SIGSYS
 31

	)

67 
	#SIGUNUSED
 31

	)

69 
	#_NSIG
 65

	)

72 
	#SIGRTMIN
 (
	`__libc_cuºít_sigπmö
 ())

	)

73 
	#SIGRTMAX
 (
	`__libc_cuºít_sigπmax
 ())

	)

77 
	#__SIGRTMIN
 32

	)

78 
	#__SIGRTMAX
 (
_NSIG
 - 1)

	)

	@/usr/include/bits/sigset.h

21 #i‚def 
_SIGSET_H_ty≥s


22 
	#_SIGSET_H_ty≥s
 1

	)

24 
	t__sig_©omic_t
;

28 
	#_SIGSET_NWORDS
 (1024 / (8 *  ()))

	)

31 
	m__vÆ
[
_SIGSET_NWORDS
];

32 } 
	t__sig£t_t
;

43 #i‡!
deföed
 
_SIGSET_H_‚s
 && deföed 
_SIGNAL_H


44 
	#_SIGSET_H_‚s
 1

	)

46 #i‚de‡
_EXTERN_INLINE


47 
	#_EXTERN_INLINE
 
__exã∫_ölöe


	)

51 
	#__sigmask
(
sig
) \

52 (((Ë1Ë<< (((
sig
Ë- 1Ë% (8 *  ())))

	)

55 
	#__sigw‹d
(
sig
Ë(((sigË- 1Ë/ (8 *  ()))

	)

57 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

58 
	#__sigem±y£t
(
£t
) \

59 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

60 
sig£t_t
 *
__£t
 = (
£t
); \

61 --
__˙t
 >0Ë
__£t
->
__vÆ
[__cnt] = 0; \

62 0; }))

	)

63 
	#__sigfûl£t
(
£t
) \

64 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

65 
sig£t_t
 *
__£t
 = (
£t
); \

66 --
__˙t
 >0Ë
__£t
->
__vÆ
[__cnt] = ~0UL; \

67 0; }))

	)

69 #ifde‡
__USE_GNU


73 
	#__sigi£m±y£t
(
£t
) \

74 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

75 c⁄° 
sig£t_t
 *
__£t
 = (
£t
); \

76 
__ªt
 = 
__£t
->
__vÆ
[--
__˙t
]; \

77 !
__ªt
 && --
__˙t
 >= 0) \

78 
__ªt
 = 
__£t
->
__vÆ
[
__˙t
]; \

79 
__ªt
 =0; }))

	)

80 
	#__sig™d£t
(
de°
, 
À·
, 
right
) \

81 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

82 
sig£t_t
 *
__de°
 = (
de°
); \

83 c⁄° 
sig£t_t
 *
__À·
 = (
À·
); \

84 c⁄° 
sig£t_t
 *
__right
 = (
right
); \

85 --
__˙t
 >= 0) \

86 
__de°
->
__vÆ
[
__˙t
] = (
__À·
->__val[__cnt] \

87 & 
__right
->
__vÆ
[
__˙t
]); \

88 0; }))

	)

89 
	#__sig‹£t
(
de°
, 
À·
, 
right
) \

90 (
	`__exãnsi⁄__
 ({ 
__˙t
 = 
_SIGSET_NWORDS
; \

91 
sig£t_t
 *
__de°
 = (
de°
); \

92 c⁄° 
sig£t_t
 *
__À·
 = (
À·
); \

93 c⁄° 
sig£t_t
 *
__right
 = (
right
); \

94 --
__˙t
 >= 0) \

95 
__de°
->
__vÆ
[
__˙t
] = (
__À·
->__val[__cnt] \

96 | 
__right
->
__vÆ
[
__˙t
]); \

97 0; }))

	)

104 
__sigismembî
 (
__c⁄°
 
__sig£t_t
 *, );

105 
__sigadd£t
 (
__sig£t_t
 *, );

106 
__sigdñ£t
 (
__sig£t_t
 *, );

108 #ifde‡
__USE_EXTERN_INLINES


109 
	#__SIGSETFN
(
NAME
, 
BODY
, 
CONST
) \

110 
_EXTERN_INLINE
 \

111 
	`NAME
 (
CONST
 
__sig£t_t
 *
__£t
, 
__sig
) \

113 
__mask
 = 
	`__sigmask
 (
__sig
); \

114 
__w‹d
 = 
	`__sigw‹d
 (
__sig
); \

115  
BODY
; \

116 }

	)

118 
__SIGSETFN
 (
__sigismembî
, (
__£t
->
__vÆ
[
__w‹d
] & 
__mask
Ë? 1 : 0, 
__c⁄°
)

119 
__SIGSETFN
 (
__sigadd£t
, ((
__£t
->
__vÆ
[
__w‹d
] |
__mask
), 0), )

120 
__SIGSETFN
 (
__sigdñ£t
, ((
__£t
->
__vÆ
[
__w‹d
] &~
__mask
), 0), )

122 #unde‡
__SIGSETFN


	@/usr/include/bits/sigstack.h

20 #i‚de‡
_SIGNAL_H


26 
	ssig°ack


28 *
	mss_•
;

29 
	mss_⁄°ack
;

36 
	mSS_ONSTACK
 = 1,

37 
	#SS_ONSTACK
 
SS_ONSTACK


	)

38 
	mSS_DISABLE


39 
	#SS_DISABLE
 
SS_DISABLE


	)

43 
	#MINSIGSTKSZ
 2048

	)

46 
	#SIGSTKSZ
 8192

	)

50 
	ssigÆt°ack


52 *
	mss_•
;

53 
	mss_Êags
;

54 
size_t
 
	mss_size
;

55 } 
	t°ack_t
;

	@/usr/include/bits/sigthread.h

20 #i‚de‡
_BITS_SIGTHREAD_H


21 
	#_BITS_SIGTHREAD_H
 1

	)

23 #i‡!
deföed
 
_SIGNAL_H
 && !deföed 
_PTHREAD_H


31 
	$±hªad_sigmask
 (
__how
,

32 
__c⁄°
 
__sig£t_t
 *
__ª°ri˘
 
__√wmask
,

33 
__sig£t_t
 *
__ª°ri˘
 
__ﬁdmask
)
__THROW
;

36 
	$±hªad_kûl
 (
±hªad_t
 
__thªadid
, 
__signo
Ë
__THROW
;

	@/usr/include/bits/sockaddr.h

24 #i‚de‡
_BITS_SOCKADDR_H


25 
	#_BITS_SOCKADDR_H
 1

	)

29 
	tß_Ámûy_t
;

35 
	#__SOCKADDR_COMMON
(
ß_¥efix
) \

36 
ß_Ámûy_t
 
ß_¥efix
##
Ámûy


	)

38 
	#__SOCKADDR_COMMON_SIZE
 ( ())

	)

	@/usr/include/bits/socket.h

21 #i‚de‡
__BITS_SOCKET_H


22 
	#__BITS_SOCKET_H


	)

24 #i‡!
deföed
 
_SYS_SOCKET_H
 && !deföed 
_NETINET_IN_H


28 
	#__√ed_size_t


	)

29 
	#__√ed_NULL


	)

30 
	~<°ddef.h
>

32 
	~<limôs.h
>

33 
	~<sys/ty≥s.h
>

36 #i‚de‡
__sockÀn_t_deföed


37 
__sockÀn_t
 
	tsockÀn_t
;

38 
	#__sockÀn_t_deföed


	)

42 
	e__sockë_ty≥


44 
	mSOCK_STREAM
 = 1,

46 
	#SOCK_STREAM
 
SOCK_STREAM


	)

47 
	mSOCK_DGRAM
 = 2,

49 
	#SOCK_DGRAM
 
SOCK_DGRAM


	)

50 
	mSOCK_RAW
 = 3,

51 
	#SOCK_RAW
 
SOCK_RAW


	)

52 
	mSOCK_RDM
 = 4,

53 
	#SOCK_RDM
 
SOCK_RDM


	)

54 
	mSOCK_SEQPACKET
 = 5,

56 
	#SOCK_SEQPACKET
 
SOCK_SEQPACKET


	)

57 
	mSOCK_PACKET
 = 10

60 
	#SOCK_PACKET
 
SOCK_PACKET


	)

64 
	#PF_UNSPEC
 0

	)

65 
	#PF_LOCAL
 1

	)

66 
	#PF_UNIX
 
PF_LOCAL


	)

67 
	#PF_FILE
 
PF_LOCAL


	)

68 
	#PF_INET
 2

	)

69 
	#PF_AX25
 3

	)

70 
	#PF_IPX
 4

	)

71 
	#PF_APPLETALK
 5

	)

72 
	#PF_NETROM
 6

	)

73 
	#PF_BRIDGE
 7

	)

74 
	#PF_ATMPVC
 8

	)

75 
	#PF_X25
 9

	)

76 
	#PF_INET6
 10

	)

77 
	#PF_ROSE
 11

	)

78 
	#PF_DEC√t
 12

	)

79 
	#PF_NETBEUI
 13

	)

80 
	#PF_SECURITY
 14

	)

81 
	#PF_KEY
 15

	)

82 
	#PF_NETLINK
 16

	)

83 
	#PF_ROUTE
 
PF_NETLINK


	)

84 
	#PF_PACKET
 17

	)

85 
	#PF_ASH
 18

	)

86 
	#PF_ECONET
 19

	)

87 
	#PF_ATMSVC
 20

	)

88 
	#PF_SNA
 22

	)

89 
	#PF_IRDA
 23

	)

90 
	#PF_PPPOX
 24

	)

91 
	#PF_WANPIPE
 25

	)

92 
	#PF_BLUETOOTH
 31

	)

93 
	#PF_MAX
 32

	)

96 
	#AF_UNSPEC
 
PF_UNSPEC


	)

97 
	#AF_LOCAL
 
PF_LOCAL


	)

98 
	#AF_UNIX
 
PF_UNIX


	)

99 
	#AF_FILE
 
PF_FILE


	)

100 
	#AF_INET
 
PF_INET


	)

101 
	#AF_AX25
 
PF_AX25


	)

102 
	#AF_IPX
 
PF_IPX


	)

103 
	#AF_APPLETALK
 
PF_APPLETALK


	)

104 
	#AF_NETROM
 
PF_NETROM


	)

105 
	#AF_BRIDGE
 
PF_BRIDGE


	)

106 
	#AF_ATMPVC
 
PF_ATMPVC


	)

107 
	#AF_X25
 
PF_X25


	)

108 
	#AF_INET6
 
PF_INET6


	)

109 
	#AF_ROSE
 
PF_ROSE


	)

110 
	#AF_DEC√t
 
PF_DEC√t


	)

111 
	#AF_NETBEUI
 
PF_NETBEUI


	)

112 
	#AF_SECURITY
 
PF_SECURITY


	)

113 
	#AF_KEY
 
PF_KEY


	)

114 
	#AF_NETLINK
 
PF_NETLINK


	)

115 
	#AF_ROUTE
 
PF_ROUTE


	)

116 
	#AF_PACKET
 
PF_PACKET


	)

117 
	#AF_ASH
 
PF_ASH


	)

118 
	#AF_ECONET
 
PF_ECONET


	)

119 
	#AF_ATMSVC
 
PF_ATMSVC


	)

120 
	#AF_SNA
 
PF_SNA


	)

121 
	#AF_IRDA
 
PF_IRDA


	)

122 
	#AF_PPPOX
 
PF_PPPOX


	)

123 
	#AF_WANPIPE
 
PF_WANPIPE


	)

124 
	#AF_BLUETOOTH
 
PF_BLUETOOTH


	)

125 
	#AF_MAX
 
PF_MAX


	)

131 
	#SOL_RAW
 255

	)

132 
	#SOL_DECNET
 261

	)

133 
	#SOL_X25
 262

	)

134 
	#SOL_PACKET
 263

	)

135 
	#SOL_ATM
 264

	)

136 
	#SOL_AAL
 265

	)

137 
	#SOL_IRDA
 266

	)

140 
	#SOMAXCONN
 128

	)

143 
	~<bôs/sockaddr.h
>

146 
	ssockaddr


148 
__SOCKADDR_COMMON
 (
ß_
);

149 
	mß_d©a
[14];

155 #i‡
ULONG_MAX
 > 0xffffffff

156 
	#__ss_Æig¡y≥
 
__uöt64_t


	)

158 
	#__ss_Æig¡y≥
 
__uöt32_t


	)

160 
	#_SS_SIZE
 128

	)

161 
	#_SS_PADSIZE
 (
_SS_SIZE
 - (2 *  (
__ss_Æig¡y≥
)))

	)

163 
	ssockaddr_°‹age


165 
__SOCKADDR_COMMON
 (
ss_
);

166 
__ss_Æig¡y≥
 
	m__ss_Æign
;

167 
	m__ss_∑ddög
[
_SS_PADSIZE
];

174 
	mMSG_OOB
 = 0x01,

175 
	#MSG_OOB
 
MSG_OOB


	)

176 
	mMSG_PEEK
 = 0x02,

177 
	#MSG_PEEK
 
MSG_PEEK


	)

178 
	mMSG_DONTROUTE
 = 0x04,

179 
	#MSG_DONTROUTE
 
MSG_DONTROUTE


	)

180 #ifde‡
__USE_GNU


182 
	mMSG_TRYHARD
 = 
MSG_DONTROUTE
,

183 
	#MSG_TRYHARD
 
MSG_DONTROUTE


	)

185 
	mMSG_CTRUNC
 = 0x08,

186 
	#MSG_CTRUNC
 
MSG_CTRUNC


	)

187 
	mMSG_PROXY
 = 0x10,

188 
	#MSG_PROXY
 
MSG_PROXY


	)

189 
	mMSG_TRUNC
 = 0x20,

190 
	#MSG_TRUNC
 
MSG_TRUNC


	)

191 
	mMSG_DONTWAIT
 = 0x40,

192 
	#MSG_DONTWAIT
 
MSG_DONTWAIT


	)

193 
	mMSG_EOR
 = 0x80,

194 
	#MSG_EOR
 
MSG_EOR


	)

195 
	mMSG_WAITALL
 = 0x100,

196 
	#MSG_WAITALL
 
MSG_WAITALL


	)

197 
	mMSG_FIN
 = 0x200,

198 
	#MSG_FIN
 
MSG_FIN


	)

199 
	mMSG_SYN
 = 0x400,

200 
	#MSG_SYN
 
MSG_SYN


	)

201 
	mMSG_CONFIRM
 = 0x800,

202 
	#MSG_CONFIRM
 
MSG_CONFIRM


	)

203 
	mMSG_RST
 = 0x1000,

204 
	#MSG_RST
 
MSG_RST


	)

205 
	mMSG_ERRQUEUE
 = 0x2000,

206 
	#MSG_ERRQUEUE
 
MSG_ERRQUEUE


	)

207 
	mMSG_NOSIGNAL
 = 0x4000,

208 
	#MSG_NOSIGNAL
 
MSG_NOSIGNAL


	)

209 
	mMSG_MORE
 = 0x8000

210 
	#MSG_MORE
 
MSG_MORE


	)

216 
	smsghdr


218 *
	mmsg_«me
;

219 
sockÀn_t
 
	mmsg_«mñí
;

221 
iovec
 *
	mmsg_iov
;

222 
size_t
 
	mmsg_iovÀn
;

224 *
	mmsg_c⁄åﬁ
;

225 
size_t
 
	mmsg_c⁄åﬁÀn
;

230 
	mmsg_Êags
;

234 
	scmsghdr


236 
size_t
 
	mcmsg_Àn
;

241 
	mcmsg_Àvñ
;

242 
	mcmsg_ty≥
;

243 #i‡(!
deföed
 
__STRICT_ANSI__
 && 
__GNUC__
 >2Ë|| 
__STDC_VERSION__
 >= 199901L

244 
__exãnsi⁄__
 
__cmsg_d©a
 
	m__Êex¨r
;

249 #i‡(!
deföed
 
__STRICT_ANSI__
 && 
__GNUC__
 >2Ë|| 
__STDC_VERSION__
 >= 199901L

250 
	#CMSG_DATA
(
cmsg
Ë((cmsg)->
__cmsg_d©a
)

	)

252 
	#CMSG_DATA
(
cmsg
Ë((*Ë((
cmsghdr
 *Ë(cmsgË+ 1))

	)

254 
	#CMSG_NXTHDR
(
mhdr
, 
cmsg
Ë
	`__cmsg_nxthdr
 (mhdr, cmsg)

	)

255 
	#CMSG_FIRSTHDR
(
mhdr
) \

256 ((
size_t
Ë(
mhdr
)->
msg_c⁄åﬁÀn
 > (
cmsghdr
) \

257 ? (
cmsghdr
 *Ë(
mhdr
)->
msg_c⁄åﬁ
 : (cmsghd∏*Ë
NULL
)

	)

258 
	#CMSG_ALIGN
(
Àn
Ë((÷íË+  (
size_t
) - 1) \

259 & (
size_t
Ë~( (size_tË- 1))

	)

260 
	#CMSG_SPACE
(
Àn
Ë(
	`CMSG_ALIGN
 (len) \

261 + 
	`CMSG_ALIGN
 ( (
cmsghdr
)))

	)

262 
	#CMSG_LEN
(
Àn
Ë(
	`CMSG_ALIGN
 ( (
cmsghdr
)Ë+ (Àn))

	)

264 
cmsghdr
 *
	$__cmsg_nxthdr
 (
msghdr
 *
__mhdr
,

265 
cmsghdr
 *
__cmsg
Ë
__THROW
;

266 #ifde‡
__USE_EXTERN_INLINES


267 #i‚de‡
_EXTERN_INLINE


268 
	#_EXTERN_INLINE
 
__exã∫_ölöe


	)

270 
_EXTERN_INLINE
 
cmsghdr
 *

271 
	`__NTH
 (
	$__cmsg_nxthdr
 (
msghdr
 *
__mhdr
, 
cmsghdr
 *
__cmsg
))

273 i‡((
size_t
Ë
__cmsg
->
cmsg_Àn
 <  (
cmsghdr
))

277 
__cmsg
 = (
cmsghdr
 *) ((*) __cmsg

278 + 
	`CMSG_ALIGN
 (
__cmsg
->
cmsg_Àn
));

279 i‡((*Ë(
__cmsg
 + 1Ë> ((*Ë
__mhdr
->
msg_c⁄åﬁ


280 + 
__mhdr
->
msg_c⁄åﬁÀn
)

281 || ((*Ë
__cmsg
 + 
	`CMSG_ALIGN
 (__cmsg->
cmsg_Àn
)

282 > ((*Ë
__mhdr
->
msg_c⁄åﬁ
 + __mhdr->
msg_c⁄åﬁÀn
)))

285  
__cmsg
;

286 
	}
}

293 
	mSCM_RIGHTS
 = 0x01

294 
	#SCM_RIGHTS
 
SCM_RIGHTS


	)

295 #ifde‡
__USE_BSD


296 , 
	mSCM_CREDENTIALS
 = 0x02

297 
	#SCM_CREDENTIALS
 
SCM_CREDENTIALS


	)

303 
	su¸ed


305 
pid_t
 
	mpid
;

306 
uid_t
 
	muid
;

307 
gid_t
 
	mgid
;

311 
	~<asm/sockë.h
>

315 
	slögî


317 
	ml_⁄off
;

318 
	ml_lögî
;

	@/usr/include/bits/socket2.h

20 #i‚de‡
_SYS_SOCKET_H


24 
ssize_t
 
__ªcv_chk
 (
__fd
, *
__buf
, 
size_t
 
__n
, size_à
__buÊí
,

25 
__Êags
);

26 
ssize_t
 
__REDIRECT
 (
__ªcv_Æüs
, (
__fd
, *
__buf
, 
size_t
 
__n
,

27 
__Êags
), 
ªcv
);

29 
__exã∫_Æways_ölöe
 
ssize_t


30 
	$ªcv
 (
__fd
, *
__buf
, 
size_t
 
__n
, 
__Êags
)

32 i‡(
	`__bos0
 (
__buf
Ë!(
size_t
) -1

33 && (!
	`__buûtö_c⁄°™t_p
 (
__n
Ë|| __¿> 
	`__bos0
 (
__buf
)))

34  
	`__ªcv_chk
 (
__fd
, 
__buf
, 
__n
, 
	`__bos0
 (__buf), 
__Êags
);

35  
	`__ªcv_Æüs
 (
__fd
, 
__buf
, 
__n
, 
__Êags
);

36 
	}
}

38 
ssize_t
 
__ªcv‰om_chk
 (
__fd
, *
__ª°ri˘
 
__buf
, 
size_t
 
__n
,

39 
size_t
 
__buÊí
, 
__Êags
,

40 
__SOCKADDR_ARG
 
__addr
,

41 
sockÀn_t
 *
__ª°ri˘
 
__addr_Àn
);

42 
ssize_t
 
__REDIRECT
 (
__ªcv‰om_Æüs
,

43 (
__fd
, *
__ª°ri˘
 
__buf
, 
size_t
 
__n
,

44 
__Êags
, 
__SOCKADDR_ARG
 
__addr
,

45 
sockÀn_t
 *
__ª°ri˘
 
__addr_Àn
), 
ªcv‰om
);

47 
__exã∫_Æways_ölöe
 
ssize_t


48 
	$ªcv‰om
 (
__fd
, *
__ª°ri˘
 
__buf
, 
size_t
 
__n
, 
__Êags
,

49 
__SOCKADDR_ARG
 
__addr
, 
sockÀn_t
 *
__ª°ri˘
 
__addr_Àn
)

51 i‡(
	`__bos0
 (
__buf
Ë!(
size_t
) -1

52 && (!
	`__buûtö_c⁄°™t_p
 (
__n
Ë|| __¿> 
	`__bos0
 (
__buf
)))

53  
	`__ªcv‰om_chk
 (
__fd
, 
__buf
, 
__n
, 
	`__bos0
 (__buf), 
__Êags
,

54 
__addr
, 
__addr_Àn
);

55  
	`__ªcv‰om_Æüs
 (
__fd
, 
__buf
, 
__n
, 
__Êags
, 
__addr
, 
__addr_Àn
);

56 
	}
}

	@/usr/include/bits/stat.h

19 #i‚de‡
_SYS_STAT_H


24 
	#_STAT_VER_LINUX_OLD
 1

	)

25 
	#_STAT_VER_KERNEL
 1

	)

26 
	#_STAT_VER_SVR4
 2

	)

27 
	#_STAT_VER_LINUX
 3

	)

28 
	#_STAT_VER
 
_STAT_VER_LINUX


	)

31 
	#_MKNOD_VER_LINUX
 1

	)

32 
	#_MKNOD_VER_SVR4
 2

	)

33 
	#_MKNOD_VER
 
_MKNOD_VER_LINUX


	)

36 
	s°©


38 
__dev_t
 
	m°_dev
;

39 
	m__∑d1
;

40 #i‚de‡
__USE_FILE_OFFSET64


41 
__öo_t
 
	m°_öo
;

43 
__öo_t
 
	m__°_öo
;

45 
__mode_t
 
	m°_mode
;

46 
__∆ök_t
 
	m°_∆ök
;

47 
__uid_t
 
	m°_uid
;

48 
__gid_t
 
	m°_gid
;

49 
__dev_t
 
	m°_rdev
;

50 
	m__∑d2
;

51 #i‚de‡
__USE_FILE_OFFSET64


52 
__off_t
 
	m°_size
;

54 
__off64_t
 
	m°_size
;

56 
__blksize_t
 
	m°_blksize
;

58 #i‚de‡
__USE_FILE_OFFSET64


59 
__blk˙t_t
 
	m°_blocks
;

61 
__blk˙t64_t
 
	m°_blocks
;

63 #ifde‡
__USE_MISC


70 
time•ec
 
	m°_©im
;

71 
time•ec
 
	m°_mtim
;

72 
time•ec
 
	m°_˘im
;

73 
	#°_©ime
 
°_©im
.
tv_£c


	)

74 
	#°_mtime
 
°_mtim
.
tv_£c


	)

75 
	#°_˘ime
 
°_˘im
.
tv_£c


	)

77 
__time_t
 
	m°_©ime
;

78 
	m°_©imí£c
;

79 
__time_t
 
	m°_mtime
;

80 
	m°_mtimí£c
;

81 
__time_t
 
	m°_˘ime
;

82 
	m°_˘imí£c
;

84 #i‚de‡
__USE_FILE_OFFSET64


85 
	m__unu£d4
;

86 
	m__unu£d5
;

88 
__öo64_t
 
	m°_öo
;

92 #ifde‡
__USE_LARGEFILE64


93 
	s°©64


95 
__dev_t
 
	m°_dev
;

96 
	m__∑d1
;

98 
__öo_t
 
	m__°_öo
;

99 
__mode_t
 
	m°_mode
;

100 
__∆ök_t
 
	m°_∆ök
;

101 
__uid_t
 
	m°_uid
;

102 
__gid_t
 
	m°_gid
;

103 
__dev_t
 
	m°_rdev
;

104 
	m__∑d2
;

105 
__off64_t
 
	m°_size
;

106 
__blksize_t
 
	m°_blksize
;

108 
__blk˙t64_t
 
	m°_blocks
;

109 #ifde‡
__USE_MISC


116 
time•ec
 
	m°_©im
;

117 
time•ec
 
	m°_mtim
;

118 
time•ec
 
	m°_˘im
;

120 
__time_t
 
	m°_©ime
;

121 
	m°_©imí£c
;

122 
__time_t
 
	m°_mtime
;

123 
	m°_mtimí£c
;

124 
__time_t
 
	m°_˘ime
;

125 
	m°_˘imí£c
;

127 
__öo64_t
 
	m°_öo
;

132 
	#_STATBUF_ST_BLKSIZE


	)

133 
	#_STATBUF_ST_RDEV


	)

135 
	#_STATBUF_ST_NSEC


	)

139 
	#__S_IFMT
 0170000

	)

142 
	#__S_IFDIR
 0040000

	)

143 
	#__S_IFCHR
 0020000

	)

144 
	#__S_IFBLK
 0060000

	)

145 
	#__S_IFREG
 0100000

	)

146 
	#__S_IFIFO
 0010000

	)

147 
	#__S_IFLNK
 0120000

	)

148 
	#__S_IFSOCK
 0140000

	)

152 
	#__S_TYPEISMQ
(
buf
Ë((buf)->
°_mode
 - (buf)->°_mode)

	)

153 
	#__S_TYPEISSEM
(
buf
Ë((buf)->
°_mode
 - (buf)->°_mode)

	)

154 
	#__S_TYPEISSHM
(
buf
Ë((buf)->
°_mode
 - (buf)->°_mode)

	)

158 
	#__S_ISUID
 04000

	)

159 
	#__S_ISGID
 02000

	)

160 
	#__S_ISVTX
 01000

	)

161 
	#__S_IREAD
 0400

	)

162 
	#__S_IWRITE
 0200

	)

163 
	#__S_IEXEC
 0100

	)

165 #i‡
deföed
 
__USE_ATFILE
 || deföed 
__USE_GNU


167 
	#UTIME_NOW
 ((1»<< 30Ë- 1l)

	)

168 
	#UTIME_OMIT
 ((1»<< 30Ë- 2l)

	)

	@/usr/include/bits/stdio-ldbl.h

20 #i‚de‡
_STDIO_H


24 
__BEGIN_NAMESPACE_STD


25 
	$__LDBL_REDIR_DECL
 (
Ârötf
)

26 
	$__LDBL_REDIR_DECL
 (
¥ötf
)

27 
	$__LDBL_REDIR_DECL
 (
•rötf
)

28 
	$__LDBL_REDIR_DECL
 (
vÂrötf
)

29 
	$__LDBL_REDIR_DECL
 (
v¥ötf
)

30 
	$__LDBL_REDIR_DECL
 (
v•rötf
)

31 
	$__LDBL_REDIR_DECL
 (
fsˇnf
)

32 
	$__LDBL_REDIR_DECL
 (
sˇnf
)

33 
	$__LDBL_REDIR_DECL
 (
ssˇnf
)

34 
__END_NAMESPACE_STD


36 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_ISOC99
 || deföed 
__USE_UNIX98


37 
__BEGIN_NAMESPACE_C99


38 
	$__LDBL_REDIR_DECL
 (
¢¥ötf
)

39 
	$__LDBL_REDIR_DECL
 (
v¢¥ötf
)

40 
__END_NAMESPACE_C99


43 #ifdef 
__USE_ISOC99


44 
__BEGIN_NAMESPACE_C99


45 
	$__LDBL_REDIR_DECL
 (
vfsˇnf
)

46 
	$__LDBL_REDIR_DECL
 (
vssˇnf
)

47 
	$__LDBL_REDIR_DECL
 (
vsˇnf
)

48 
__END_NAMESPACE_C99


51 #ifde‡
__USE_GNU


52 
	$__LDBL_REDIR_DECL
 (
vd¥ötf
)

53 
	$__LDBL_REDIR_DECL
 (
d¥ötf
)

54 
	$__LDBL_REDIR_DECL
 (
va•rötf
)

55 
	$__LDBL_REDIR_DECL
 (
__a•rötf
)

56 
	$__LDBL_REDIR_DECL
 (
a•rötf
)

57 
	$__LDBL_REDIR_DECL
 (
ob°ack_¥ötf
)

58 
	$__LDBL_REDIR_DECL
 (
ob°ack_v¥ötf
)

61 #i‡
__USE_FORTIFY_LEVEL
 > 0 && !
deföed
 
__˝lu•lus


62 
	$__LDBL_REDIR_DECL
 (
__•rötf_chk
)

63 
	$__LDBL_REDIR_DECL
 (
__v•rötf_chk
)

64 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_ISOC99
 || deföed 
__USE_UNIX98


65 
	$__LDBL_REDIR_DECL
 (
__¢¥ötf_chk
)

66 
	$__LDBL_REDIR_DECL
 (
__v¢¥ötf_chk
)

68 #i‡
__USE_FORTIFY_LEVEL
 > 1

69 
	$__LDBL_REDIR_DECL
 (
__Ârötf_chk
)

70 
	$__LDBL_REDIR_DECL
 (
__¥ötf_chk
)

71 
	$__LDBL_REDIR_DECL
 (
__vÂrötf_chk
)

72 
	$__LDBL_REDIR_DECL
 (
__v¥ötf_chk
)

	@/usr/include/bits/stdio.h

20 #i‚de‡
_STDIO_H


24 #ifde‡
__˝lu•lus


25 
	#__STDIO_INLINE
 
ölöe


	)

27 
	#__STDIO_INLINE
 
__exã∫_ölöe


	)

31 #ifde‡
__USE_EXTERN_INLINES


33 
__STDIO_INLINE
 

34 
	$v¥ötf
 (
__c⁄°
 *
__ª°ri˘
 
__fmt
, 
_G_va_li°
 
__¨g
)

36  
	`vÂrötf
 (
°dout
, 
__fmt
, 
__¨g
);

37 
	}
}

40 
__STDIO_INLINE
 

41 
	$gëch¨
 ()

43  
	`_IO_gëc
 (
°dö
);

44 
	}
}

47 #ifde‡
__USE_MISC


49 
__STDIO_INLINE
 

50 
	$fgëc_u∆ocked
 (
FILE
 *
__Â
)

52  
	`_IO_gëc_u∆ocked
 (
__Â
);

53 
	}
}

57 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


59 
__STDIO_INLINE
 

60 
	$gëc_u∆ocked
 (
FILE
 *
__Â
)

62  
	`_IO_gëc_u∆ocked
 (
__Â
);

63 
	}
}

66 
__STDIO_INLINE
 

67 
	$gëch¨_u∆ocked
 ()

69  
	`_IO_gëc_u∆ocked
 (
°dö
);

70 
	}
}

75 
__STDIO_INLINE
 

76 
	$putch¨
 (
__c
)

78  
	`_IO_putc
 (
__c
, 
°dout
);

79 
	}
}

82 #ifde‡
__USE_MISC


84 
__STDIO_INLINE
 

85 
	$Âutc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
)

87  
	`_IO_putc_u∆ocked
 (
__c
, 
__°ªam
);

88 
	}
}

92 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


94 
__STDIO_INLINE
 

95 
	$putc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
)

97  
	`_IO_putc_u∆ocked
 (
__c
, 
__°ªam
);

98 
	}
}

101 
__STDIO_INLINE
 

102 
	$putch¨_u∆ocked
 (
__c
)

104  
	`_IO_putc_u∆ocked
 (
__c
, 
°dout
);

105 
	}
}

109 #ifdef 
__USE_GNU


111 
__STDIO_INLINE
 
_IO_ssize_t


112 
	$gëlöe
 (**
__löïå
, 
size_t
 *
__n
, 
FILE
 *
__°ªam
)

114  
	`__gëdñim
 (
__löïå
, 
__n
, '\n', 
__°ªam
);

115 
	}
}

119 #ifde‡
__USE_MISC


121 
__STDIO_INLINE
 

122 
__NTH
 (
	$„of_u∆ocked
 (
FILE
 *
__°ªam
))

124  
	`_IO_„of_u∆ocked
 (
__°ªam
);

125 
	}
}

128 
__STDIO_INLINE
 

129 
__NTH
 (
	$„º‹_u∆ocked
 (
FILE
 *
__°ªam
))

131  
	`_IO_„º‹_u∆ocked
 (
__°ªam
);

132 
	}
}

138 #i‡
deföed
 
__USE_MISC
 && deföed 
__GNUC__
 && deföed 
__OPTIMIZE__


140 
	#‰ód_u∆ocked
(
±r
, 
size
, 
n
, 
°ªam
) \

141 (
	`__exãnsi⁄__
 ((
	`__buûtö_c⁄°™t_p
 (
size
Ë&& __buûtö_c⁄°™t_∞(
n
) \

142 && (
size_t
Ë(
size
Ë* (size_tË(
n
) <= 8 \

143 && (
size_t
Ë(
size
) != 0) \

144 ? ({ *
__±r
 = (*Ë(
±r
); \

145 
FILE
 *
__°ªam
 = (
°ªam
); \

146 
size_t
 
__˙t
; \

147 
__˙t
 = (
size_t
Ë(
size
Ë* (size_tË(
n
); \

148 
__˙t
 > 0; --__cnt) \

150 
__c
 = 
	`_IO_gëc_u∆ocked
 (
__°ªam
); \

151 i‡(
__c
 =
EOF
) \

153 *
__±r
++ = 
__c
; \

155 ((
size_t
Ë(
size
Ë* (size_tË(
n
Ë- 
__˙t
) \

156 / (
size_t
Ë(
size
); }) \

157 : (((
	`__buûtö_c⁄°™t_p
 (
size
Ë&& (
size_t
) (size) == 0) \

158 || (
	`__buûtö_c⁄°™t_p
 (
n
Ë&& (
size_t
) (n) == 0)) \

160 ? ((Ë(
±r
), (Ë(
°ªam
), (Ë(
size
), \

161 (Ë(
n
), (
size_t
) 0) \

162 : 
	`‰ód_u∆ocked
 (
±r
, 
size
, 
n
, 
°ªam
))))

	)

164 
	#fwrôe_u∆ocked
(
±r
, 
size
, 
n
, 
°ªam
) \

165 (
	`__exãnsi⁄__
 ((
	`__buûtö_c⁄°™t_p
 (
size
Ë&& __buûtö_c⁄°™t_∞(
n
) \

166 && (
size_t
Ë(
size
Ë* (size_tË(
n
) <= 8 \

167 && (
size_t
Ë(
size
) != 0) \

168 ? ({ c⁄° *
__±r
 = (c⁄° *Ë(
±r
); \

169 
FILE
 *
__°ªam
 = (
°ªam
); \

170 
size_t
 
__˙t
; \

171 
__˙t
 = (
size_t
Ë(
size
Ë* (size_tË(
n
); \

172 
__˙t
 > 0; --__cnt) \

173 i‡(
	`_IO_putc_u∆ocked
 (*
__±r
++, 
__°ªam
Ë=
EOF
) \

175 ((
size_t
Ë(
size
Ë* (size_tË(
n
Ë- 
__˙t
) \

176 / (
size_t
Ë(
size
); }) \

177 : (((
	`__buûtö_c⁄°™t_p
 (
size
Ë&& (
size_t
) (size) == 0) \

178 || (
	`__buûtö_c⁄°™t_p
 (
n
Ë&& (
size_t
) (n) == 0)) \

180 ? ((Ë(
±r
), (Ë(
°ªam
), (Ë(
size
), \

181 (Ë(
n
), (
size_t
) 0) \

182 : 
	`fwrôe_u∆ocked
 (
±r
, 
size
, 
n
, 
°ªam
))))

	)

186 #unde‡
__STDIO_INLINE


	@/usr/include/bits/stdio2.h

20 #i‚de‡
_STDIO_H


24 
	$__•rötf_chk
 (*
__ª°ri˘
 
__s
, 
__Êag
, 
size_t
 
__¶í
,

25 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

26 
	$__v•rötf_chk
 (*
__ª°ri˘
 
__s
, 
__Êag
, 
size_t
 
__¶í
,

27 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

28 
_G_va_li°
 
__≠
Ë
__THROW
;

30 
	#•rötf
(
°r
, ...) \

31 
	`__buûtö___•rötf_chk
 (
°r
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

32 
__VA_ARGS__
)

	)

33 
	#v•rötf
(
°r
, 
fmt
, 
≠
) \

34 
	`__buûtö___v•rötf_chk
 (
°r
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (°r), 
fmt
, 
≠
)

	)

36 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_ISOC99
 || deföed 
__USE_UNIX98


38 
	$__¢¥ötf_chk
 (*
__ª°ri˘
 
__s
, 
size_t
 
__n
, 
__Êag
,

39 
size_t
 
__¶í
, 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

40 ...Ë
__THROW
;

41 
	$__v¢¥ötf_chk
 (*
__ª°ri˘
 
__s
, 
size_t
 
__n
, 
__Êag
,

42 
size_t
 
__¶í
, 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

43 
_G_va_li°
 
__≠
Ë
__THROW
;

45 
	#¢¥ötf
(
°r
, 
Àn
, ...) \

46 
	`__buûtö___¢¥ötf_chk
 (
°r
, 
Àn
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

47 
__VA_ARGS__
)

	)

48 
	#v¢¥ötf
(
°r
, 
Àn
, 
fmt
, 
≠
) \

49 
	`__buûtö___v¢¥ötf_chk
 (
°r
, 
Àn
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

50 
fmt
, 
≠
)

	)

54 #i‡
__USE_FORTIFY_LEVEL
 > 1

56 
	`__Ârötf_chk
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
__Êag
,

57 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...);

58 
	`__¥ötf_chk
 (
__Êag
, 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...);

59 
	`__vÂrötf_chk
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
__Êag
,

60 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__≠
);

61 
	`__v¥ötf_chk
 (
__Êag
, 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

62 
_G_va_li°
 
__≠
);

64 
	#¥ötf
(...) \

65 
	`__¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

66 
	#Ârötf
(
°ªam
, ...) \

67 
	`__Ârötf_chk
 (
°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

68 
	#v¥ötf
(
f‹m©
, 
≠
) \

69 
	`__v¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
f‹m©
, 
≠
)

	)

70 
	#vÂrötf
(
°ªam
, 
f‹m©
, 
≠
) \

71 
	`__vÂrötf_chk
 (
°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
f‹m©
, 
≠
)

	)

75 *
	$__gës_chk
 (*
__°r
, 
size_t
Ë
__wur
;

76 *
	`__REDIRECT
 (
__gës_Æüs
, (*
__°r
), 
gës
Ë
__wur
;

78 
__exã∫_Æways_ölöe
 
__wur
 *

79 
	$gës
 (*
__°r
)

81 i‡(
	`__bos
 (
__°r
Ë!(
size_t
) -1)

82  
	`__gës_chk
 (
__°r
, 
	`__bos
 (__str));

83  
	`__gës_Æüs
 (
__°r
);

84 
	}
}

86 *
	$__fgës_chk
 (*
__ª°ri˘
 
__s
, 
size_t
 
__size
, 
__n
,

87 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

88 *
	`__REDIRECT
 (
__fgës_Æüs
,

89 (*
__ª°ri˘
 
__s
, 
__n
,

90 
FILE
 *
__ª°ri˘
 
__°ªam
), 
fgës
Ë
__wur
;

92 
__exã∫_Æways_ölöe
 
__wur
 *

93 
	$fgës
 (*
__ª°ri˘
 
__s
, 
__n
, 
FILE
 *__ª°ri˘ 
__°ªam
)

95 i‡(
	`__bos
 (
__s
Ë!(
size_t
) -1

96 && (!
	`__buûtö_c⁄°™t_p
 (
__n
Ë|| (
size_t
Ë__¿> 
	`__bos
 (
__s
)))

97  
	`__fgës_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__°ªam
);

98  
	`__fgës_Æüs
 (
__s
, 
__n
, 
__°ªam
);

99 
	}
}

101 #ifde‡
__USE_GNU


102 *
	$__fgës_u∆ocked_chk
 (*
__ª°ri˘
 
__s
, 
size_t
 
__size
,

103 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

104 *
	`__REDIRECT
 (
__fgës_u∆ocked_Æüs
,

105 (*
__ª°ri˘
 
__s
, 
__n
,

106 
FILE
 *
__ª°ri˘
 
__°ªam
), 
fgës_u∆ocked
Ë
__wur
;

108 
__exã∫_Æways_ölöe
 
__wur
 *

109 
	$fgës_u∆ocked
 (*
__ª°ri˘
 
__s
, 
__n
, 
FILE
 *__ª°ri˘ 
__°ªam
)

111 i‡(
	`__bos
 (
__s
Ë!(
size_t
) -1

112 && (!
	`__buûtö_c⁄°™t_p
 (
__n
Ë|| (
size_t
Ë__¿> 
	`__bos
 (
__s
)))

113  
	`__fgës_u∆ocked_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__°ªam
);

114  
	`__fgës_u∆ocked_Æüs
 (
__s
, 
__n
, 
__°ªam
);

115 
	}
}

	@/usr/include/bits/stdio_lim.h

19 #i‡!
deföed
 
_STDIO_H
 && !deföed 
__√ed_FOPEN_MAX
 && !deföed 
__√ed_IOV_MAX


23 #ifde‡
_STDIO_H


24 
	#L_tm≤am
 20

	)

25 
	#TMP_MAX
 238328

	)

26 
	#FILENAME_MAX
 4096

	)

28 #ifde‡
__USE_POSIX


29 
	#L_˘îmid
 9

	)

30 
	#L_cu£rid
 9

	)

34 #i‡
deföed
 
__√ed_FOPEN_MAX
 || deföed 
_STDIO_H


35 #unde‡
FOPEN_MAX


36 
	#FOPEN_MAX
 16

	)

39 #i‡
deföed
 
__√ed_IOV_MAX
 && !deföed 
IOV_MAX


40 
	#IOV_MAX
 1024

	)

	@/usr/include/bits/stdlib-ldbl.h

20 #i‚de‡
_STDLIB_H


24 #ifdef 
__USE_ISOC99


25 
__BEGIN_NAMESPACE_C99


26 
	$__LDBL_REDIR1_DECL
 (
°πﬁd
, 
°πod
)

27 
__END_NAMESPACE_C99


30 #ifde‡
__USE_GNU


31 
	$__LDBL_REDIR1_DECL
 (
°πﬁd_l
, 
°πod_l
)

34 
	$__LDBL_REDIR1_DECL
 (
__°πﬁd_öã∫Æ
, 
__°πod_öã∫Æ
)

36 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN_EXTENDED


37 #ifde‡
__USE_MISC


38 
	$__LDBL_REDIR1_DECL
 (
qecvt
, 
ecvt
)

39 
	$__LDBL_REDIR1_DECL
 (
qfcvt
, 
fcvt
)

40 
	$__LDBL_REDIR1_DECL
 (
qgcvt
, 
gcvt
)

41 
	$__LDBL_REDIR1_DECL
 (
qecvt_r
, 
ecvt_r
)

42 
	$__LDBL_REDIR1_DECL
 (
qfcvt_r
, 
fcvt_r
)

	@/usr/include/bits/stdlib.h

20 #i‚de‡
_STDLIB_H


24 *
	$__ªÆ∑th_chk
 (
__c⁄°
 *
__ª°ri˘
 
__«me
,

25 *
__ª°ri˘
 
__ªsﬁved
,

26 
size_t
 
__ªsﬁvedÀn
Ë
__THROW
 
__wur
;

27 *
	`__REDIRECT_NTH
 (
__ªÆ∑th_Æüs
,

28 (
__c⁄°
 *
__ª°ri˘
 
__«me
,

29 *
__ª°ri˘
 
__ªsﬁved
), 
ªÆ∑th
Ë
__wur
;

31 
__exã∫_Æways_ölöe
 
__wur
 *

32 
	`__NTH
 (
	$ªÆ∑th
 (
__c⁄°
 *
__ª°ri˘
 
__«me
, *__ª°ri˘ 
__ªsﬁved
))

34 i‡(
	`__bos
 (
__ªsﬁved
Ë!(
size_t
) -1)

35  
	`__ªÆ∑th_chk
 (
__«me
, 
__ªsﬁved
, 
	`__bos
 (__resolved));

37  
	`__ªÆ∑th_Æüs
 (
__«me
, 
__ªsﬁved
);

38 
	}
}

41 
	$__±¢ame_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
,

42 
size_t
 
__ƒól
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

43 
	`__REDIRECT_NTH
 (
__±¢ame_r_Æüs
, (
__fd
, *
__buf
,

44 
size_t
 
__buÊí
), 
±¢ame_r
)

45 
	`__n⁄nuŒ
 ((2));

47 
__exã∫_Æways_ölöe
 

48 
	`__NTH
 (
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
))

50 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1

51 && (!
	`__buûtö_c⁄°™t_p
 (
__buÊí
Ë|| __buÊí > 
	`__bos
 (
__buf
)))

52  
	`__±¢ame_r_chk
 (
__fd
, 
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

53  
	`__±¢ame_r_Æüs
 (
__fd
, 
__buf
, 
__buÊí
);

54 
	}
}

57 
	$__w˘omb_chk
 (*
__s
, 
wch¨_t
 
__wch¨
, 
size_t
 
__buÊí
)

58 
__THROW
 
__wur
;

59 
	`__REDIRECT_NTH
 (
__w˘omb_Æüs
, (*
__s
, 
wch¨_t
 
__wch¨
),

60 
w˘omb
Ë
__wur
;

62 
__exã∫_Æways_ölöe
 
__wur
 

63 
	`__NTH
 (
	$w˘omb
 (*
__s
, 
wch¨_t
 
__wch¨
))

68 
	#__STDLIB_MB_LEN_MAX
 16

	)

69 #i‡
deföed
 
MB_LEN_MAX
 && MB_LEN_MAX !
__STDLIB_MB_LEN_MAX


72 i‡(
	`__bos
 (
__s
Ë!(
size_t
Ë-1 && 
__STDLIB_MB_LEN_MAX
 > __bos (__s))

73  
	`__w˘omb_chk
 (
__s
, 
__wch¨
, 
	`__bos
 (__s));

74  
	`__w˘omb_Æüs
 (
__s
, 
__wch¨
);

75 
	}
}

78 
size_t
 
	$__mb°owcs_chk
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

79 
__c⁄°
 *
__ª°ri˘
 
__§c
,

80 
size_t
 
__Àn
, size_à
__d°Àn
Ë
__THROW
;

81 
size_t
 
	`__REDIRECT_NTH
 (
__mb°owcs_Æüs
,

82 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

83 
__c⁄°
 *
__ª°ri˘
 
__§c
,

84 
size_t
 
__Àn
), 
mb°owcs
);

86 
__exã∫_Æways_ölöe
 
size_t


87 
	`__NTH
 (
	$mb°owcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
, 
__c⁄°
 *__ª°ri˘ 
__§c
,

88 
size_t
 
__Àn
))

90 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1

91 && (!
	`__buûtö_c⁄°™t_p
 (
__Àn
)

92 || 
__Àn
 > 
	`__bos
 (
__d°
Ë/  (
wch¨_t
)))

93  
	`__mb°owcs_chk
 (
__d°
, 
__§c
, 
__Àn
,

94 
	`__bos
 (
__d°
Ë/  (
wch¨_t
));

95  
	`__mb°owcs_Æüs
 (
__d°
, 
__§c
, 
__Àn
);

96 
	}
}

99 
size_t
 
	$__wc°ombs_chk
 (*
__ª°ri˘
 
__d°
,

100 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
,

101 
size_t
 
__Àn
, size_à
__d°Àn
Ë
__THROW
;

102 
size_t
 
	`__REDIRECT_NTH
 (
__wc°ombs_Æüs
,

103 (*
__ª°ri˘
 
__d°
,

104 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
,

105 
size_t
 
__Àn
), 
wc°ombs
);

107 
__exã∫_Æways_ölöe
 
size_t


108 
	`__NTH
 (
	$wc°ombs
 (*
__ª°ri˘
 
__d°
, 
__c⁄°
 
wch¨_t
 *__ª°ri˘ 
__§c
,

109 
size_t
 
__Àn
))

111 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1

112 && (!
	`__buûtö_c⁄°™t_p
 (
__Àn
Ë|| __À¿> 
	`__bos
 (
__d°
)))

113  
	`__wc°ombs_chk
 (
__d°
, 
__§c
, 
__Àn
, 
	`__bos
 (__dst));

114  
	`__wc°ombs_Æüs
 (
__d°
, 
__§c
, 
__Àn
);

115 
	}
}

	@/usr/include/bits/string.h

21 #i‚de‡
_STRING_H


26 
	#_STRING_ARCH_u«lig√d
 1

	)

31 #i‡!
deföed
 
__NO_STRING_INLINES
 && deföed 
__USE_STRING_INLINES
 \

32 && 
deföed
 
	g__GNUC__
 && __GNUC__ >2 && !
__BOUNDED_POINTERS__


34 #i‚de‡
__STRING_INLINE


35 #ifde‡
__˝lu•lus


36 
	#__STRING_INLINE
 
ölöe


	)

38 
	#__STRING_INLINE
 
__exã∫_ölöe


	)

43 
	#__STRING_SMALL_GET16
(
§c
, 
idx
) \

44 ((((
__c⁄°
 *Ë(
§c
))[
idx
 + 1] << 8) \

45 | ((
__c⁄°
 *Ë(
§c
))[
idx
])

	)

46 
	#__STRING_SMALL_GET32
(
§c
, 
idx
) \

47 (((((
__c⁄°
 *Ë(
§c
))[
idx
 + 3] << 8 \

48 | ((
__c⁄°
 *Ë(
§c
))[
idx
 + 2]) << 8 \

49 | ((
__c⁄°
 *Ë(
§c
))[
idx
 + 1]) << 8 \

50 | ((
__c⁄°
 *Ë(
§c
))[
idx
])

	)

54 
	#_HAVE_STRING_ARCH_mem˝y
 1

	)

55 
	#mem˝y
(
de°
, 
§c
, 
n
) \

56 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
n
) \

57 ? 
	`__mem˝y_c
 ((
de°
), (
§c
), (
n
)) \

58 : 
	`__mem˝y_g
 ((
de°
), (
§c
), (
n
))))

	)

59 
	#__mem˝y_c
(
de°
, 
§c
, 
n
) \

60 ((
n
) == 0 \

61 ? (
de°
) \

62 : (((
n
) % 4 == 0) \

63 ? 
	`__mem˝y_by4
 (
de°
, 
§c
, 
n
) \

64 : (((
n
) % 2 == 0) \

65 ? 
	`__mem˝y_by2
 (
de°
, 
§c
, 
n
) \

66 : 
	`__mem˝y_g
 (
de°
, 
§c
, 
n
))))

	)

68 
__STRING_INLINE
 *
__mem˝y_by4
 (*
__de°
, 
__c⁄°
 *
__§c
,

69 
size_t
 
__n
);

71 
__STRING_INLINE
 *

72 
	$__mem˝y_by4
 (*
__de°
, 
__c⁄°
 *
__§c
, 
size_t
 
__n
)

74 
__d0
, 
__d1
;

75 *
__tmp
 = 
__de°
;

76 
__asm__
 
__vﬁ©ûe__


84 : "=&r" (
__d0
), "=&r" (
__tmp
), "=&r" (
__§c
), "=&r" (
__d1
)

85 : "1" (
__tmp
), "2" (
__§c
), "3" (
__n
 / 4)

87  
__de°
;

88 
	}
}

90 
__STRING_INLINE
 *
__mem˝y_by2
 (*
__de°
, 
__c⁄°
 *
__§c
,

91 
size_t
 
__n
);

93 
__STRING_INLINE
 *

94 
	$__mem˝y_by2
 (*
__de°
, 
__c⁄°
 *
__§c
, 
size_t
 
__n
)

96 
__d0
, 
__d1
;

97 *
__tmp
 = 
__de°
;

98 
__asm__
 
__vﬁ©ûe__


111 : "=&q" (
__d0
), "=&r" (
__tmp
), "=&r" (
__§c
), "=&r" (
__d1
)

112 : "1" (
__tmp
), "2" (
__§c
), "3" (
__n
 / 2)

114  
__de°
;

115 
	}
}

117 
__STRING_INLINE
 *
__mem˝y_g
 (*
__de°
, 
__c⁄°
 *
__§c
,

118 
size_t
 
__n
);

120 
__STRING_INLINE
 *

121 
	$__mem˝y_g
 (*
__de°
, 
__c⁄°
 *
__§c
, 
size_t
 
__n
)

123 
__d0
, 
__d1
, 
__d2
;

124 *
__tmp
 = 
__de°
;

125 
__asm__
 
__vﬁ©ûe__


136 : "=&c" (
__d0
), "=&D" (
__d1
), "=&S" (
__d2
),

137 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__de°
)

138 : "0" (
__n
), "1" (
__tmp
), "2" (
__§c
),

139 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__§c
)

141  
__de°
;

142 
	}
}

144 
	#_HAVE_STRING_ARCH_memmove
 1

	)

145 #i‚de‡
_FORCE_INLINES


148 
__STRING_INLINE
 *

149 
	$memmove
 (*
__de°
, 
__c⁄°
 *
__§c
, 
size_t
 
__n
)

151 
__d0
, 
__d1
, 
__d2
;

152 *
__tmp
 = 
__de°
;

153 i‡(
__de°
 < 
__§c
)

154 
__asm__
 
__vﬁ©ûe__


157 : "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
),

158 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__de°
)

159 : "0" (
__n
), "1" (
__§c
), "2" (
__tmp
),

160 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__§c
));

162 
__asm__
 
__vﬁ©ûe__


166 : "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
),

167 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__de°
)

168 : "0" (
__n
), "1" (__¿- 1 + (
__c⁄°
 *Ë
__§c
),

169 "2" (
__n
 - 1 + (*Ë
__tmp
),

170 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__§c
));

171  
__de°
;

172 
	}
}

176 
	#_HAVE_STRING_ARCH_memcmp
 1

	)

177 #i‚de‡
_FORCE_INLINES


178 #i‚de‡
__PIC__


180 
__STRING_INLINE
 

181 
	$memcmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
, 
size_t
 
__n
)

183 
__d0
, 
__d1
, 
__d2
;

184 
__ªs
;

185 
__asm__
 
__vﬁ©ûe__


193 : "=&a" (
__ªs
), "=&S" (
__d0
), "=&D" (
__d1
), "=&c" (
__d2
)

194 : "0" (0), "1" (
__s1
), "2" (
__s2
), "3" (
__n
),

195 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s1
),

196 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s2
)

198  
__ªs
;

199 
	}
}

204 
	#_HAVE_STRING_ARCH_mem£t
 1

	)

205 
	#_USE_STRING_ARCH_mem£t
 1

	)

206 
	#mem£t
(
s
, 
c
, 
n
) \

207 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
n
) && (n) <= 16 \

208 ? ((
n
) == 1 \

209 ? 
	`__mem£t_c1
 ((
s
), (
c
)) \

210 : 
	`__mem£t_gc
 ((
s
), (
c
), (
n
))) \

211 : (
	`__buûtö_c⁄°™t_p
 (
c
) \

212 ? (
	`__buûtö_c⁄°™t_p
 (
n
) \

213 ? 
	`__mem£t_c˙
 ((
s
), (
c
), (
n
)) \

214 : 
	`mem£t
 ((
s
), (
c
), (
n
))) \

215 : (
	`__buûtö_c⁄°™t_p
 (
n
) \

216 ? 
	`__mem£t_g˙
 ((
s
), (
c
), (
n
)) \

217 : 
	`mem£t
 ((
s
), (
c
), (
n
))))))

	)

219 
	#__mem£t_c1
(
s
, 
c
Ë({ *
__s
 = (s); \

220 *((*Ë
__s
Ë(Ë(
c
); \

221 
__s
; })

	)

223 
	#__mem£t_gc
(
s
, 
c
, 
n
) \

224 ({ *
__s
 = (
s
); \

226 
__ui
; \

227 
__usi
; \

228 
__uc
; \

229 } *
__u
 = 
__s
; \

230 
__c
 = ((Ë((Ë(
c
))) * 0x01010101; \

236 i‡((
n
) == 3 || (n) >= 5) \

237 
__asm__
 
	`__vﬁ©ûe__
 ("" : "Ù" (
__c
) : "0" (__c)); \

240 
n
) \

243 
__u
->
__ui
 = 
__c
; \

244 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

246 
__u
->
__ui
 = 
__c
; \

247 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

249 
__u
->
__ui
 = 
__c
; \

250 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

252 
__u
->
__usi
 = (Ë
__c
; \

253 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2); \

254 
__u
->
__uc
 = (Ë
__c
; \

258 
__u
->
__ui
 = 
__c
; \

259 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

261 
__u
->
__ui
 = 
__c
; \

262 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

264 
__u
->
__ui
 = 
__c
; \

265 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

267 
__u
->
__usi
 = (Ë
__c
; \

271 
__u
->
__ui
 = 
__c
; \

272 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

274 
__u
->
__ui
 = 
__c
; \

275 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

277 
__u
->
__ui
 = 
__c
; \

278 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

280 
__u
->
__uc
 = (Ë
__c
; \

284 
__u
->
__ui
 = 
__c
; \

285 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

287 
__u
->
__ui
 = 
__c
; \

288 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

290 
__u
->
__ui
 = 
__c
; \

291 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

293 
__u
->
__ui
 = 
__c
; \

298 
__s
; })

	)

300 
	#__mem£t_c˙
(
s
, 
c
, 
n
) \

301 (((
n
) % 4 == 0) \

302 ? 
	`__mem£t_c˙_by4
 (
s
, ((Ë((Ë(
c
))) * 0x01010101,\

303 
n
) \

304 : (((
n
) % 2 == 0) \

305 ? 
	`__mem£t_c˙_by2
 (
s
, \

306 ((Ë((Ë(
c
))) * 0x01010101,\

307 
n
) \

308 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

310 
__STRING_INLINE
 *
__mem£t_c˙_by4
 (*
__s
, 
__c
,

311 
size_t
 
__n
);

313 
__STRING_INLINE
 *

314 
	$__mem£t_c˙_by4
 (*
__s
, 
__c
, 
size_t
 
__n
)

316 *
__tmp
 = 
__s
;

317 
__d0
;

318 #ifde‡
__i686__


319 
__asm__
 
__vﬁ©ûe__


322 : "=&a" (
__c
), "=&D" (
__tmp
), "=&c" (
__d0
),

323 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

324 : "0" ((Ë
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

327 
__asm__
 
__vﬁ©ûe__


333 : "=&r" (
__c
), "=&r" (
__tmp
), "=&r" (
__d0
),

334 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

335 : "0" ((Ë
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

338  
__s
;

339 
	}
}

341 
__STRING_INLINE
 *
__mem£t_c˙_by2
 (*
__s
, 
__c
,

342 
size_t
 
__n
);

344 
__STRING_INLINE
 *

345 
	$__mem£t_c˙_by2
 (*
__s
, 
__c
, 
size_t
 
__n
)

347 
__d0
, 
__d1
;

348 *
__tmp
 = 
__s
;

349 #ifde‡
__i686__


350 
__asm__
 
__vﬁ©ûe__


354 : "=&a" (
__d0
), "=&D" (
__tmp
), "=&c" (
__d1
),

355 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

356 : "0" ((Ë
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

359 
__asm__
 
__vﬁ©ûe__


365 : "=&q" (
__d0
), "=&r" (
__tmp
), "=&r" (
__d1
),

366 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

367 : "0" ((Ë
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

370  
__s
;

371 
	}
}

373 
	#__mem£t_g˙
(
s
, 
c
, 
n
) \

374 (((
n
) % 4 == 0) \

375 ? 
	`__mem£t_g˙_by4
 (
s
, 
c
, 
n
) \

376 : (((
n
) % 2 == 0) \

377 ? 
	`__mem£t_g˙_by2
 (
s
, 
c
, 
n
) \

378 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

380 
__STRING_INLINE
 *
__mem£t_g˙_by4
 (*
__s
, 
__c
, 
size_t
 
__n
);

382 
__STRING_INLINE
 *

383 
	$__mem£t_g˙_by4
 (*
__s
, 
__c
, 
size_t
 
__n
)

385 *
__tmp
 = 
__s
;

386 
__d0
;

387 
__asm__
 
__vﬁ©ûe__


397 : "=&q" (
__c
), "=&r" (
__tmp
), "=&r" (
__d0
),

398 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

399 : "0" ((Ë
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

401  
__s
;

402 
	}
}

404 
__STRING_INLINE
 *
__mem£t_g˙_by2
 (*
__s
, 
__c
, 
size_t
 
__n
);

406 
__STRING_INLINE
 *

407 
	$__mem£t_g˙_by2
 (*
__s
, 
__c
, 
size_t
 
__n
)

409 
__d0
, 
__d1
;

410 *
__tmp
 = 
__s
;

411 
__asm__
 
__vﬁ©ûe__


422 : "=&q" (
__d0
), "=&r" (
__tmp
), "=&r" (
__d1
),

423 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

424 : "0" ((Ë
__c
), "1" (
__tmp
), "2" (
__n
 / 4)

426  
__s
;

427 
	}
}

431 
	#_HAVE_STRING_ARCH_memchr
 1

	)

432 #i‚de‡
_FORCE_INLINES


433 
__STRING_INLINE
 *

434 
	$memchr
 (
__c⁄°
 *
__s
, 
__c
, 
size_t
 
__n
)

436 
__d0
;

437 #ifde‡
__i686__


438 
__d1
;

440 *
__ªs
;

441 i‡(
__n
 == 0)

442  
NULL
;

443 #ifde‡
__i686__


444 
__asm__
 
__vﬁ©ûe__


448 : "=D" (
__ªs
), "=&c" (
__d0
), "=&r" (
__d1
)

449 : "a" (
__c
), "0" (
__s
), "1" (
__n
), "2" (1),

450 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

453 
__asm__
 
__vﬁ©ûe__


459 : "=D" (
__ªs
), "=&c" (
__d0
)

460 : "a" (
__c
), "0" (
__s
), "1" (
__n
),

461 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

464  
__ªs
 - 1;

465 
	}
}

468 
	#_HAVE_STRING_ARCH_memrchr
 1

	)

469 #i‚de‡
_FORCE_INLINES


470 
__STRING_INLINE
 *
__memrchr
 (
__c⁄°
 *
__s
, 
__c
, 
size_t
 
__n
);

472 
__STRING_INLINE
 *

473 
	$__memrchr
 (
__c⁄°
 *
__s
, 
__c
, 
size_t
 
__n
)

475 
__d0
;

476 #ifde‡
__i686__


477 
__d1
;

479 *
__ªs
;

480 i‡(
__n
 == 0)

481  
NULL
;

482 #ifde‡
__i686__


483 
__asm__
 
__vﬁ©ûe__


489 : "=D" (
__ªs
), "=&c" (
__d0
), "=&r" (
__d1
)

490 : "a" (
__c
), "0" (
__s
 + 
__n
 - 1), "1" (__n), "2" (-1),

491 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

494 
__asm__
 
__vﬁ©ûe__


501 : "=D" (
__ªs
), "=&c" (
__d0
)

502 : "a" (
__c
), "0" (
__s
 + 
__n
 - 1), "1" (__n),

503 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s
)

506  
__ªs
;

507 
	}
}

508 #ifde‡
__USE_GNU


509 
	#memrchr
(
s
, 
c
, 
n
Ë
	`__memrchr
 ((s), (c), (n))

	)

514 
	#_HAVE_STRING_ARCH_øwmemchr
 1

	)

515 
__STRING_INLINE
 *
__øwmemchr
 (c⁄° *
__s
, 
__c
);

517 #i‚de‡
_FORCE_INLINES


518 
__STRING_INLINE
 *

519 
	$__øwmemchr
 (c⁄° *
__s
, 
__c
)

521 
__d0
;

522 *
__ªs
;

523 
__asm__
 
__vﬁ©ûe__


526 : "=D" (
__ªs
), "=&c" (
__d0
)

527 : "a" (
__c
), "0" (
__s
), "1" (0xffffffff),

528 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

530  
__ªs
 - 1;

531 
	}
}

532 #ifde‡
__USE_GNU


533 
__STRING_INLINE
 *

534 
	$øwmemchr
 (c⁄° *
__s
, 
__c
)

536  
	`__øwmemchr
 (
__s
, 
__c
);

537 
	}
}

543 
	#_HAVE_STRING_ARCH_°æí
 1

	)

544 
	#°æí
(
°r
) \

545 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
°r
) \

546 ? 
	`__buûtö_°æí
 (
°r
) \

547 : 
	`__°æí_g
 (
°r
)))

	)

548 
__STRING_INLINE
 
size_t
 
__°æí_g
 (
__c⁄°
 *
__°r
);

550 
__STRING_INLINE
 
size_t


551 
	$__°æí_g
 (
__c⁄°
 *
__°r
)

553 
__dummy
;

554 
__c⁄°
 *
__tmp
 = 
__°r
;

555 
__asm__
 
__vﬁ©ûe__


561 : "Ù" (
__tmp
), "=&q" (
__dummy
)

562 : "0" (
__°r
),

563 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__°r
)

565  
__tmp
 - 
__°r
 - 1;

566 
	}
}

570 
	#_HAVE_STRING_ARCH_°r˝y
 1

	)

571 
	#°r˝y
(
de°
, 
§c
) \

572 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

573 ? ( ((
§c
)[0]Ë=1 && 
	`°æí
 (src) + 1 <= 8 \

574 ? 
	`__°r˝y_a_smÆl
 ((
de°
), (
§c
), 
	`°æí
 (src) + 1) \

575 : (*Ë
	`mem˝y
 ((*Ë(
de°
), \

576 (
__c⁄°
 *Ë(
§c
), \

577 
	`°æí
 (
§c
) + 1)) \

578 : 
	`__°r˝y_g
 ((
de°
), (
§c
))))

	)

580 
	#__°r˝y_a_smÆl
(
de°
, 
§c
, 
§˛í
) \

581 (
	`__exãnsi⁄__
 ({ *
__de°
 = (
de°
); \

583 
__ui
; \

584 
__usi
; \

585 
__uc
; \

586 
__c
; \

587 } *
__u
 = (*Ë
__de°
; \

588 
§˛í
) \

591 
__u
->
__uc
 = '\0'; \

594 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 0); \

597 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 0); \

598 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2); \

599 
__u
->
__uc
 = '\0'; \

602 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

605 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

606 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

607 
__u
->
__uc
 = '\0'; \

610 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

611 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

612 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 4); \

615 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

616 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

617 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 4); \

618 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2); \

619 
__u
->
__uc
 = '\0'; \

622 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

623 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

624 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 4); \

627 (*Ë
__de°
; }))

	)

629 
__STRING_INLINE
 *
__°r˝y_g
 (*
__de°
, 
__c⁄°
 *
__§c
);

631 
__STRING_INLINE
 *

632 
	$__°r˝y_g
 (*
__de°
, 
__c⁄°
 *
__§c
)

634 *
__tmp
 = 
__de°
;

635 
__dummy
;

636 
__asm__
 
__vﬁ©ûe__


645 : "=&r" (
__§c
), "=&r" (
__tmp
), "=&q" (
__dummy
),

646 "=m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__de°
)

647 : "0" (
__§c
), "1" (
__tmp
),

648 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__§c
)

650  
__de°
;

651 
	}
}

654 #ifde‡
__USE_GNU


655 
	#_HAVE_STRING_ARCH_°p˝y
 1

	)

657 
	#__°p˝y
(
de°
, 
§c
) \

658 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

659 ? (
	`°æí
 (
§c
) + 1 <= 8 \

660 ? 
	`__°p˝y_a_smÆl
 ((
de°
), (
§c
), 
	`°æí
 (src) + 1) \

661 : 
	`__°p˝y_c
 ((
de°
), (
§c
), 
	`°æí
 (src) + 1)) \

662 : 
	`__°p˝y_g
 ((
de°
), (
§c
))))

	)

663 
	#__°p˝y_c
(
de°
, 
§c
, 
§˛í
) \

664 ((
§˛í
) % 4 == 0 \

665 ? 
	`__memp˝y_by4
 (
de°
, 
§c
, 
§˛í
) - 1 \

666 : ((
§˛í
) % 2 == 0 \

667 ? 
	`__memp˝y_by2
 (
de°
, 
§c
, 
§˛í
) - 1 \

668 : 
	`__memp˝y_byn
 (
de°
, 
§c
, 
§˛í
Ë- 1))

	)

671 
	#°p˝y
(
de°
, 
§c
Ë
	`__°p˝y
 ((de°), (§c))

	)

673 
	#__°p˝y_a_smÆl
(
de°
, 
§c
, 
§˛í
) \

674 (
	`__exãnsi⁄__
 ({ union { \

675 
__ui
; \

676 
__usi
; \

677 
__uc
; \

678 
__c
; \

679 } *
__u
 = (*Ë(
de°
); \

680 
§˛í
) \

683 
__u
->
__uc
 = '\0'; \

686 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 0); \

687 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1); \

690 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 0); \

691 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2); \

692 
__u
->
__uc
 = '\0'; \

695 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

696 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 3); \

699 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

700 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

701 
__u
->
__uc
 = '\0'; \

704 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

705 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

706 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 4); \

707 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1); \

710 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

711 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

712 
__u
->
__usi
 = 
	`__STRING_SMALL_GET16
 (
§c
, 4); \

713 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2); \

714 
__u
->
__uc
 = '\0'; \

717 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 0); \

718 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

719 
__u
->
__ui
 = 
	`__STRING_SMALL_GET32
 (
§c
, 4); \

720 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 3); \

723 (*Ë
__u
; }))

	)

725 
__STRING_INLINE
 *
__memp˝y_by4
 (*
__de°
, 
__c⁄°
 *
__§c
,

726 
size_t
 
__§˛í
);

728 
__STRING_INLINE
 *

729 
	$__memp˝y_by4
 (*
__de°
, 
__c⁄°
 *
__§c
, 
size_t
 
__§˛í
)

731 *
__tmp
 = 
__de°
;

732 
__d0
, 
__d1
;

733 
__asm__
 
__vﬁ©ûe__


741 : "=&r" (
__d0
), "Ù" (
__tmp
), "=&r" (
__§c
), "=&r" (
__d1
)

742 : "1" (
__tmp
), "2" (
__§c
), "3" (
__§˛í
 / 4)

744  
__tmp
;

745 
	}
}

747 
__STRING_INLINE
 *
__memp˝y_by2
 (*
__de°
, 
__c⁄°
 *
__§c
,

748 
size_t
 
__§˛í
);

750 
__STRING_INLINE
 *

751 
	$__memp˝y_by2
 (*
__de°
, 
__c⁄°
 *
__§c
, 
size_t
 
__§˛í
)

753 *
__tmp
 = 
__de°
;

754 
__d0
, 
__d1
;

755 
__asm__
 
__vﬁ©ûe__


768 : "=&q" (
__d0
), "Ù" (
__tmp
), "=&r" (
__§c
), "=&r" (
__d1
),

769 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__de°
)

770 : "1" (
__tmp
), "2" (
__§c
), "3" (
__§˛í
 / 2),

771 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__§c
)

773  
__tmp
 + 2;

774 
	}
}

776 
__STRING_INLINE
 *
__memp˝y_byn
 (*
__de°
, 
__c⁄°
 *
__§c
,

777 
size_t
 
__§˛í
);

779 
__STRING_INLINE
 *

780 
	$__memp˝y_byn
 (*
__de°
, 
__c⁄°
 *
__§c
, 
size_t
 
__§˛í
)

782 
__d0
, 
__d1
;

783 *
__tmp
 = 
__de°
;

784 
__asm__
 
__vﬁ©ûe__


795 : "=D" (
__tmp
), "=&c" (
__d0
), "=&S" (
__d1
),

796 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__de°
)

797 : "0" (
__tmp
), "1" (
__§˛í
), "2" (
__§c
),

798 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__§c
)

800  
__tmp
;

801 
	}
}

803 
__STRING_INLINE
 *
__°p˝y_g
 (*
__de°
, 
__c⁄°
 *
__§c
);

805 
__STRING_INLINE
 *

806 
	$__°p˝y_g
 (*
__de°
, 
__c⁄°
 *
__§c
)

808 *
__tmp
 = 
__de°
;

809 
__dummy
;

810 
__asm__
 
__vﬁ©ûe__


819 : "=&r" (
__§c
), "Ù" (
__tmp
), "=&q" (
__dummy
),

820 "=m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__de°
)

821 : "0" (
__§c
), "1" (
__tmp
),

822 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__§c
)

824  
__tmp
 - 1;

825 
	}
}

830 
	#_HAVE_STRING_ARCH_°∫˝y
 1

	)

831 
	#°∫˝y
(
de°
, 
§c
, 
n
) \

832 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

833 ? ((
	`°æí
 (
§c
Ë+ 1 >((
size_t
Ë(
n
)) \

834 ? (*Ë
	`mem˝y
 ((*Ë(
de°
), \

835 (
__c⁄°
 *Ë(
§c
), 
n
) \

836 : 
	`__°∫˝y_cg
 ((
de°
), (
§c
), 
	`°æí
 (§cË+ 1, 
n
))) \

837 : 
	`__°∫˝y_gg
 ((
de°
), (
§c
), 
n
)))

	)

838 
	#__°∫˝y_cg
(
de°
, 
§c
, 
§˛í
, 
n
) \

839 (((
§˛í
) % 4 == 0) \

840 ? 
	`__°∫˝y_by4
 (
de°
, 
§c
, 
§˛í
, 
n
) \

841 : (((
§˛í
) % 2 == 0) \

842 ? 
	`__°∫˝y_by2
 (
de°
, 
§c
, 
§˛í
, 
n
) \

843 : 
	`__°∫˝y_byn
 (
de°
, 
§c
, 
§˛í
, 
n
)))

	)

845 
__STRING_INLINE
 *
__°∫˝y_by4
 (*
__de°
, 
__c⁄°
 
__§c
[],

846 
size_t
 
__§˛í
, size_à
__n
);

848 
__STRING_INLINE
 *

849 
	$__°∫˝y_by4
 (*
__de°
, 
__c⁄°
 
__§c
[], 
size_t
 
__§˛í
, size_à
__n
)

851 *
__tmp
 = 
__de°
;

852 
__dummy1
, 
__dummy2
;

853 
__asm__
 
__vﬁ©ûe__


861 : "=&r" (
__dummy1
), "Ù" (
__tmp
), "=&r" (
__§c
), "=&r" (
__dummy2
),

862 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__de°
)

863 : "1" (
__tmp
), "2" (
__§c
), "3" (
__§˛í
 / 4),

864 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__§c
)

866 (Ë
	`mem£t
 (
__tmp
, '\0', 
__n
 - 
__§˛í
);

867  
__de°
;

868 
	}
}

870 
__STRING_INLINE
 *
__°∫˝y_by2
 (*
__de°
, 
__c⁄°
 
__§c
[],

871 
size_t
 
__§˛í
, size_à
__n
);

873 
__STRING_INLINE
 *

874 
	$__°∫˝y_by2
 (*
__de°
, 
__c⁄°
 
__§c
[], 
size_t
 
__§˛í
, size_à
__n
)

876 *
__tmp
 = 
__de°
;

877 
__dummy1
, 
__dummy2
;

878 
__asm__
 
__vﬁ©ûe__


891 : "=&q" (
__dummy1
), "Ù" (
__tmp
), "=&r" (
__§c
), "=&r" (
__dummy2
),

892 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__de°
)

893 : "1" (
__tmp
), "2" (
__§c
), "3" (
__§˛í
 / 2),

894 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__§c
)

896 (Ë
	`mem£t
 (
__tmp
 + 2, '\0', 
__n
 - 
__§˛í
);

897  
__de°
;

898 
	}
}

900 
__STRING_INLINE
 *
__°∫˝y_byn
 (*
__de°
, 
__c⁄°
 
__§c
[],

901 
size_t
 
__§˛í
, size_à
__n
);

903 
__STRING_INLINE
 *

904 
	$__°∫˝y_byn
 (*
__de°
, 
__c⁄°
 
__§c
[], 
size_t
 
__§˛í
, size_à
__n
)

906 
__d0
, 
__d1
;

907 *
__tmp
 = 
__de°
;

908 
__asm__
 
__vﬁ©ûe__


919 : "=D" (
__tmp
), "=&c" (
__d0
), "=&S" (
__d1
),

920 "=m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__de°
)

921 : "1" (
__§˛í
), "0" (
__tmp
),"2" (
__§c
),

922 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__§c
)

924 (Ë
	`mem£t
 (
__tmp
, '\0', 
__n
 - 
__§˛í
);

925  
__de°
;

926 
	}
}

928 
__STRING_INLINE
 *
__°∫˝y_gg
 (*
__de°
, 
__c⁄°
 *
__§c
,

929 
size_t
 
__n
);

931 
__STRING_INLINE
 *

932 
	$__°∫˝y_gg
 (*
__de°
, 
__c⁄°
 *
__§c
, 
size_t
 
__n
)

934 *
__tmp
 = 
__de°
;

935 
__dummy
;

936 i‡(
__n
 > 0)

937 
__asm__
 
__vﬁ©ûe__


953 : "=&r" (
__§c
), "=&r" (
__tmp
), "=&q" (
__dummy
), "=&r" (
__n
)

954 : "0" (
__§c
), "1" (
__tmp
), "3" (
__n
)

957  
__de°
;

958 
	}
}

962 
	#_HAVE_STRING_ARCH_°rˇt
 1

	)

963 
	#°rˇt
(
de°
, 
§c
) \

964 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

965 ? 
	`__°rˇt_c
 ((
de°
), (
§c
), 
	`°æí
 (src) + 1) \

966 : 
	`__°rˇt_g
 ((
de°
), (
§c
))))

	)

968 
__STRING_INLINE
 *
__°rˇt_c
 (*
__de°
, 
__c⁄°
 
__§c
[],

969 
size_t
 
__§˛í
);

971 
__STRING_INLINE
 *

972 
	$__°rˇt_c
 (*
__de°
, 
__c⁄°
 
__§c
[], 
size_t
 
__§˛í
)

974 #ifde‡
__i686__


975 
__d0
;

976 *
__tmp
;

977 
__asm__
 
__vﬁ©ûe__


979 : "=D" (
__tmp
), "=&c" (
__d0
),

980 "=m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__de°
)

981 : "0" (
__de°
), "1" (0xffffffff), "a" (0),

982 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__§c
)

984 --
__tmp
;

986 *
__tmp
 = 
__de°
 - 1;

987 
__asm__
 
__vﬁ©ûe__


992 : "Ù" (
__tmp
),

993 "=m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__de°
)

994 : "0" (
__tmp
),

995 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__§˛í
]; } *)
__§c
)

998 (Ë
	`mem˝y
 (
__tmp
, 
__§c
, 
__§˛í
);

999  
__de°
;

1000 
	}
}

1002 
__STRING_INLINE
 *
__°rˇt_g
 (*
__de°
, 
__c⁄°
 *
__§c
);

1004 
__STRING_INLINE
 *

1005 
	$__°rˇt_g
 (*
__de°
, 
__c⁄°
 *
__§c
)

1007 *
__tmp
 = 
__de°
 - 1;

1008 
__dummy
;

1009 
__asm__
 
__vﬁ©ûe__


1021 : "=&q" (
__dummy
), "=&r" (
__tmp
), "=&r" (
__§c
),

1022 "=m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__de°
)

1023 : "1" (
__tmp
), "2" (
__§c
),

1024 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__§c
)

1026  
__de°
;

1027 
	}
}

1031 
	#_HAVE_STRING_ARCH_°∫ˇt
 1

	)

1032 
	#°∫ˇt
(
de°
, 
§c
, 
n
) \

1033 (
	`__exãnsi⁄__
 ({ *
__de°
 = (
de°
); \

1034 
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

1035 ? (
	`°æí
 (
§c
Ë< ((
size_t
Ë(
n
)) \

1036 ? 
	`°rˇt
 (
__de°
, (
§c
)) \

1037 : (*(*)
	`__memp˝y
 (
	`°rchr
 (
__de°
, '\0'), \

1038 (
__c⁄°
 *Ë(
§c
), \

1039 (
n
)Ë0, 
__de°
)) \

1040 : 
	`__°∫ˇt_g
 (
__de°
, (
§c
), (
n
)); }))

	)

1042 
__STRING_INLINE
 *
__°∫ˇt_g
 (*
__de°
, 
__c⁄°
 
__§c
[],

1043 
size_t
 
__n
);

1045 
__STRING_INLINE
 *

1046 
	$__°∫ˇt_g
 (*
__de°
, 
__c⁄°
 
__§c
[], 
size_t
 
__n
)

1048 *
__tmp
 = 
__de°
;

1049 
__dummy
;

1050 #ifde‡
__i686__


1051 
__asm__
 
__vﬁ©ûe__


1065 : "=&a" (
__dummy
), "=&D" (
__tmp
), "=&S" (
__§c
), "=&c" (
__n
)

1066 : "g" (
__n
), "0" (0), "1" (
__tmp
), "2" (
__§c
), "3" (0xffffffff)

1069 --
__tmp
;

1070 
__asm__
 
__vﬁ©ûe__


1087 : "=&q" (
__dummy
), "=&r" (
__tmp
), "=&r" (
__§c
), "=&r" (
__n
)

1088 : "1" (
__tmp
), "2" (
__§c
), "3" (
__n
)

1091  
__de°
;

1092 
	}
}

1096 
	#_HAVE_STRING_ARCH_°rcmp
 1

	)

1097 
	#°rcmp
(
s1
, 
s2
) \

1098 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& __buûtö_c⁄°™t_∞(
s2
) \

1099 && ( ((
s1
)[0]Ë!1 || 
	`°æí
 (s1) >= 4) \

1100 && ( ((
s2
)[0]Ë!1 || 
	`°æí
 (s2) >= 4) \

1101 ? 
	`memcmp
 ((
__c⁄°
 *Ë(
s1
), (__c⁄° *Ë(
s2
), \

1102 (
	`°æí
 (
s1
Ë< såÀ¿(
s2
) \

1103 ? 
	`°æí
 (
s1
Ë: såÀ¿(
s2
)) + 1) \

1104 : (
	`__buûtö_c⁄°™t_p
 (
s1
) &&  ((s1)[0]) == 1 \

1105 &&  ((
s2
)[0]Ë=1 && 
	`°æí
 (
s1
) < 4 \

1106 ? (
	`__buûtö_c⁄°™t_p
 (
s2
) &&  ((s2)[0]) == 1 \

1107 ? 
	`__°rcmp_cc
 ((
__c⁄°
 *Ë(
s1
), \

1108 (
__c⁄°
 *Ë(
s2
), \

1109 
	`°æí
 (
s1
)) \

1110 : 
	`__°rcmp_cg
 ((
__c⁄°
 *Ë(
s1
), \

1111 (
__c⁄°
 *Ë(
s2
), \

1112 
	`°æí
 (
s1
))) \

1113 : (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&&  ((
s1
)[0]) == 1 \

1114 &&  ((
s2
)[0]Ë=1 && 
	`°æí
 (s2) < 4 \

1115 ? (
	`__buûtö_c⁄°™t_p
 (
s1
) \

1116 ? 
	`__°rcmp_cc
 ((
__c⁄°
 *Ë(
s1
), \

1117 (
__c⁄°
 *Ë(
s2
), \

1118 
	`°æí
 (
s2
)) \

1119 : 
	`__°rcmp_gc
 ((
__c⁄°
 *Ë(
s1
), \

1120 (
__c⁄°
 *Ë(
s2
), \

1121 
	`°æí
 (
s2
))) \

1122 : 
	`__°rcmp_gg
 ((
s1
), (
s2
))))))

	)

1124 
	#__°rcmp_cc
(
s1
, 
s2
, 
l
) \

1125 (
	`__exãnsi⁄__
 ({ 
__ªsu…
 = (
s1
)[0] - (
s2
)[0]; \

1126 i‡(
l
 > 0 && 
__ªsu…
 == 0) \

1128 
__ªsu…
 = (
s1
)[1] - (
s2
)[1]; \

1129 i‡(
l
 > 1 && 
__ªsu…
 == 0) \

1131 
__ªsu…
 = (
s1
)[2] - (
s2
)[2]; \

1132 i‡(
l
 > 2 && 
__ªsu…
 == 0) \

1133 
__ªsu…
 = (
s1
)[3] - (
s2
)[3]; \

1136 
__ªsu…
; }))

	)

1138 
	#__°rcmp_cg
(
s1
, 
s2
, 
l1
) \

1139 (
	`__exãnsi⁄__
 ({ 
__c⁄°
 *
__s2
 = (
s2
); \

1140 
__ªsu…
 = (
s1
)[0] - 
__s2
[0]; \

1141 i‡(
l1
 > 0 && 
__ªsu…
 == 0) \

1143 
__ªsu…
 = (
s1
)[1] - 
__s2
[1]; \

1144 i‡(
l1
 > 1 && 
__ªsu…
 == 0) \

1146 
__ªsu…
 = (
s1
)[2] - 
__s2
[2]; \

1147 i‡(
l1
 > 2 && 
__ªsu…
 == 0) \

1148 
__ªsu…
 = (
s1
)[3] - 
__s2
[3]; \

1151 
__ªsu…
; }))

	)

1153 
	#__°rcmp_gc
(
s1
, 
s2
, 
l2
) \

1154 (
	`__exãnsi⁄__
 ({ 
__c⁄°
 *
__s1
 = (
s1
); \

1155 
__ªsu…
 = 
__s1
[0] - (
s2
)[0]; \

1156 i‡(
l2
 > 0 && 
__ªsu…
 == 0) \

1158 
__ªsu…
 = 
__s1
[1] - (
s2
)[1]; \

1159 i‡(
l2
 > 1 && 
__ªsu…
 == 0) \

1161 
__ªsu…
 = 
__s1
[2] - (
s2
)[2]; \

1162 i‡(
l2
 > 2 && 
__ªsu…
 == 0) \

1163 
__ªsu…
 = 
__s1
[3] - (
s2
)[3]; \

1166 
__ªsu…
; }))

	)

1168 
__STRING_INLINE
 
__°rcmp_gg
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
);

1170 
__STRING_INLINE
 

1171 
	$__°rcmp_gg
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
)

1173 
__ªs
;

1174 
__asm__
 
__vﬁ©ûe__


1190 : "=q" (
__ªs
), "=&r" (
__s1
), "=&r" (
__s2
)

1191 : "1" (
__s1
), "2" (
__s2
),

1192 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s1
),

1193 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s2
)

1195  
__ªs
;

1196 
	}
}

1200 
	#_HAVE_STRING_ARCH_°∫cmp
 1

	)

1201 
	#°∫cmp
(
s1
, 
s2
, 
n
) \

1202 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& 
	`°æí
 (s1Ë< ((
size_t
Ë(
n
)) \

1203 ? 
	`°rcmp
 ((
s1
), (
s2
)) \

1204 : (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&& 
	`°æí
 (s2Ë< ((
size_t
Ë(
n
))\

1205 ? 
	`°rcmp
 ((
s1
), (
s2
)) \

1206 : 
	`__°∫cmp_g
 ((
s1
), (
s2
), (
n
)))))

	)

1208 
__STRING_INLINE
 
__°∫cmp_g
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
,

1209 
size_t
 
__n
);

1211 
__STRING_INLINE
 

1212 
	$__°∫cmp_g
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
, 
size_t
 
__n
)

1214 
__ªs
;

1215 
__asm__
 
__vﬁ©ûe__


1234 : "=q" (
__ªs
), "=&r" (
__s1
), "=&r" (
__s2
), "=&r" (
__n
)

1235 : "1" (
__s1
), "2" (
__s2
), "3" (
__n
),

1236 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s1
),

1237 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__n
]; } *)
__s2
)

1239  
__ªs
;

1240 
	}
}

1244 
	#_HAVE_STRING_ARCH_°rchr
 1

	)

1245 
	#_USE_STRING_ARCH_°rchr
 1

	)

1246 
	#°rchr
(
s
, 
c
) \

1247 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) \

1248 ? ((
c
) == '\0' \

1249 ? (*Ë
	`__øwmemchr
 ((
s
), (
c
)) \

1250 : 
	`__°rchr_c
 ((
s
), ((
c
) & 0xff) << 8)) \

1251 : 
	`__°rchr_g
 ((
s
), (
c
))))

	)

1253 
__STRING_INLINE
 *
__°rchr_c
 (
__c⁄°
 *
__s
, 
__c
);

1255 
__STRING_INLINE
 *

1256 
	$__°rchr_c
 (
__c⁄°
 *
__s
, 
__c
)

1258 
__d0
;

1259 *
__ªs
;

1260 
__asm__
 
__vﬁ©ûe__


1270 : "Ù" (
__ªs
), "=&a" (
__d0
)

1271 : "0" (
__s
), "1" (
__c
),

1272 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1274  
__ªs
;

1275 
	}
}

1277 
__STRING_INLINE
 *
__°rchr_g
 (
__c⁄°
 *
__s
, 
__c
);

1279 
__STRING_INLINE
 *

1280 
	$__°rchr_g
 (
__c⁄°
 *
__s
, 
__c
)

1282 
__d0
;

1283 *
__ªs
;

1284 
__asm__
 
__vﬁ©ûe__


1295 : "Ù" (
__ªs
), "=&a" (
__d0
)

1296 : "0" (
__s
), "1" (
__c
),

1297 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1299  
__ªs
;

1300 
	}
}

1304 
	#_HAVE_STRING_ARCH_°rch∫ul
 1

	)

1305 
	#__°rch∫ul
(
s
, 
c
) \

1306 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) \

1307 ? ((
c
) == '\0' \

1308 ? (*Ë
	`__øwmemchr
 ((
s
), 
c
) \

1309 : 
	`__°rch∫ul_c
 ((
s
), ((
c
) & 0xff) << 8)) \

1310 : 
	`__°rch∫ul_g
 ((
s
), 
c
)))

	)

1312 
__STRING_INLINE
 *
__°rch∫ul_c
 (
__c⁄°
 *
__s
, 
__c
);

1314 
__STRING_INLINE
 *

1315 
	$__°rch∫ul_c
 (
__c⁄°
 *
__s
, 
__c
)

1317 
__d0
;

1318 *
__ªs
;

1319 
__asm__
 
__vﬁ©ûe__


1329 : "Ù" (
__ªs
), "=&a" (
__d0
)

1330 : "0" (
__s
), "1" (
__c
),

1331 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1333  
__ªs
;

1334 
	}
}

1336 
__STRING_INLINE
 *
__°rch∫ul_g
 (
__c⁄°
 *
__s
, 
__c
);

1338 
__STRING_INLINE
 *

1339 
	$__°rch∫ul_g
 (
__c⁄°
 *
__s
, 
__c
)

1341 
__d0
;

1342 *
__ªs
;

1343 
__asm__
 
__vﬁ©ûe__


1354 : "Ù" (
__ªs
), "=&a" (
__d0
)

1355 : "0" (
__s
), "1" (
__c
),

1356 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1358  
__ªs
;

1359 
	}
}

1360 #ifde‡
__USE_GNU


1361 
	#°rch∫ul
(
s
, 
c
Ë
	`__°rch∫ul
 ((s), (c))

	)

1365 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


1367 
	#_HAVE_STRING_ARCH_ödex
 1

	)

1368 
	#ödex
(
s
, 
c
) \

1369 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) \

1370 ? 
	`__°rchr_c
 ((
s
), ((
c
) & 0xff) << 8) \

1371 : 
	`__°rchr_g
 ((
s
), (
c
))))

	)

1376 
	#_HAVE_STRING_ARCH_°ºchr
 1

	)

1377 
	#°ºchr
(
s
, 
c
) \

1378 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) \

1379 ? 
	`__°ºchr_c
 ((
s
), ((
c
) & 0xff) << 8) \

1380 : 
	`__°ºchr_g
 ((
s
), (
c
))))

	)

1382 #ifde‡
__i686__


1383 
__STRING_INLINE
 *
__°ºchr_c
 (
__c⁄°
 *
__s
, 
__c
);

1385 
__STRING_INLINE
 *

1386 
	$__°ºchr_c
 (
__c⁄°
 *
__s
, 
__c
)

1388 
__d0
, 
__d1
;

1389 *
__ªs
;

1390 
__asm__
 
__vﬁ©ûe__


1398 : "=d" (
__ªs
), "=&S" (
__d0
), "=&a" (
__d1
)

1399 : "0" (1), "1" (
__s
), "2" (
__c
),

1400 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1402  
__ªs
 - 1;

1403 
	}
}

1405 
__STRING_INLINE
 *
__°ºchr_g
 (
__c⁄°
 *
__s
, 
__c
);

1407 
__STRING_INLINE
 *

1408 
	$__°ºchr_g
 (
__c⁄°
 *
__s
, 
__c
)

1410 
__d0
, 
__d1
;

1411 *
__ªs
;

1412 
__asm__
 
__vﬁ©ûe__


1421 : "=d" (
__ªs
), "=&S" (
__d0
), "=&a" (
__d1
)

1422 : "0" (1), "1" (
__s
), "2" (
__c
),

1423 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1425  
__ªs
 - 1;

1426 
	}
}

1428 
__STRING_INLINE
 *
__°ºchr_c
 (
__c⁄°
 *
__s
, 
__c
);

1430 
__STRING_INLINE
 *

1431 
	$__°ºchr_c
 (
__c⁄°
 *
__s
, 
__c
)

1433 
__d0
, 
__d1
;

1434 *
__ªs
;

1435 
__asm__
 
__vﬁ©ûe__


1445 : "=d" (
__ªs
), "=&S" (
__d0
), "=&a" (
__d1
)

1446 : "0" (0), "1" (
__s
), "2" (
__c
),

1447 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1449  
__ªs
;

1450 
	}
}

1452 
__STRING_INLINE
 *
__°ºchr_g
 (
__c⁄°
 *
__s
, 
__c
);

1454 
__STRING_INLINE
 *

1455 
	$__°ºchr_g
 (
__c⁄°
 *
__s
, 
__c
)

1457 
__d0
, 
__d1
;

1458 *
__ªs
;

1459 
__asm__
 
__vﬁ©ûe__


1470 : "Ù" (
__ªs
), "=&S" (
__d0
), "=&a" (
__d1
)

1471 : "0" (0), "1" (
__s
), "2" (
__c
),

1472 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1474  
__ªs
;

1475 
	}
}

1479 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


1481 
	#_HAVE_STRING_ARCH_rödex
 1

	)

1482 
	#rödex
(
s
, 
c
) \

1483 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) \

1484 ? 
	`__°ºchr_c
 ((
s
), ((
c
) & 0xff) << 8) \

1485 : 
	`__°ºchr_g
 ((
s
), (
c
))))

	)

1491 
	#_HAVE_STRING_ARCH_°rc•n
 1

	)

1492 
	#°rc•n
(
s
, 
ªje˘
) \

1493 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
ªje˘
) &&  ((reject)[0]) == 1 \

1494 ? ((
ªje˘
)[0] == '\0' \

1495 ? 
	`°æí
 (
s
) \

1496 : ((
ªje˘
)[1] == '\0' \

1497 ? 
	`__°rc•n_c1
 ((
s
), (((
ªje˘
)[0] << 8) & 0xff00)) \

1498 : 
	`__°rc•n_cg
 ((
s
), (
ªje˘
), 
	`°æí
 (reject)))) \

1499 : 
	`__°rc•n_g
 ((
s
), (
ªje˘
))))

	)

1501 
__STRING_INLINE
 
size_t
 
__°rc•n_c1
 (
__c⁄°
 *
__s
, 
__ªje˘
);

1503 #i‚de‡
_FORCE_INLINES


1504 
__STRING_INLINE
 
size_t


1505 
	$__°rc•n_c1
 (
__c⁄°
 *
__s
, 
__ªje˘
)

1507 
__d0
;

1508 *
__ªs
;

1509 
__asm__
 
__vﬁ©ûe__


1518 : "Ù" (
__ªs
), "=&a" (
__d0
)

1519 : "0" (
__s
), "1" (
__ªje˘
),

1520 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1522  (
__ªs
 - 1Ë- 
__s
;

1523 
	}
}

1526 
__STRING_INLINE
 
size_t
 
__°rc•n_cg
 (
__c⁄°
 *
__s
, __c⁄° 
__ªje˘
[],

1527 
size_t
 
__ªje˘_Àn
);

1529 
__STRING_INLINE
 
size_t


1530 
	$__°rc•n_cg
 (
__c⁄°
 *
__s
, __c⁄° 
__ªje˘
[], 
size_t
 
__ªje˘_Àn
)

1532 
__d0
, 
__d1
, 
__d2
;

1533 
__c⁄°
 *
__ªs
;

1534 
__asm__
 
__vﬁ©ûe__


1545 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1546 : "0" (
__s
), "d" (
__ªje˘
), "g" (
__ªje˘_Àn
)

1548  (
__ªs
 - 1Ë- 
__s
;

1549 
	}
}

1551 
__STRING_INLINE
 
size_t
 
__°rc•n_g
 (
__c⁄°
 *
__s
, __c⁄° *
__ªje˘
);

1552 #ifde‡
__PIC__


1554 
__STRING_INLINE
 
size_t


1555 
	$__°rc•n_g
 (
__c⁄°
 *
__s
, __c⁄° *
__ªje˘
)

1557 
__d0
, 
__d1
, 
__d2
;

1558 
__c⁄°
 *
__ªs
;

1559 
__asm__
 
__vﬁ©ûe__


1576 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1577 : "r" (
__ªje˘
), "0" (
__s
), "1" (0), "2" (0xffffffff)

1579  (
__ªs
 - 1Ë- 
__s
;

1580 
	}
}

1582 
__STRING_INLINE
 
size_t


1583 
	$__°rc•n_g
 (
__c⁄°
 *
__s
, __c⁄° *
__ªje˘
)

1585 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1586 
__c⁄°
 *
__ªs
;

1587 
__asm__
 
__vﬁ©ûe__


1601 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
), "=&d" (
__d3
)

1602 : "0" (
__s
), "1" (0), "2" (0xffffffff), "3" (
__ªje˘
), "b" (__reject)

1605  (
__ªs
 - 1Ë- 
__s
;

1606 
	}
}

1612 
	#_HAVE_STRING_ARCH_°r•n
 1

	)

1613 
	#°r•n
(
s
, 
ac˚±
) \

1614 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
) &&  ((accept)[0]) == 1 \

1615 ? ((
ac˚±
)[0] == '\0' \

1616 ? ((Ë(
s
), 0) \

1617 : ((
ac˚±
)[1] == '\0' \

1618 ? 
	`__°r•n_c1
 ((
s
), (((
ac˚±
)[0] << 8 ) & 0xff00)) \

1619 : 
	`__°r•n_cg
 ((
s
), (
ac˚±
), 
	`°æí
 (accept)))) \

1620 : 
	`__°r•n_g
 ((
s
), (
ac˚±
))))

	)

1622 #i‚de‡
_FORCE_INLINES


1623 
__STRING_INLINE
 
size_t
 
__°r•n_c1
 (
__c⁄°
 *
__s
, 
__ac˚±
);

1625 
__STRING_INLINE
 
size_t


1626 
	$__°r•n_c1
 (
__c⁄°
 *
__s
, 
__ac˚±
)

1628 
__d0
;

1629 *
__ªs
;

1631 
__asm__
 
__vﬁ©ûe__


1637 : "Ù" (
__ªs
), "=&q" (
__d0
)

1638 : "0" (
__s
), "1" (
__ac˚±
),

1639 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
)

1641  (
__ªs
 - 1Ë- 
__s
;

1642 
	}
}

1645 
__STRING_INLINE
 
size_t
 
__°r•n_cg
 (
__c⁄°
 *
__s
, __c⁄° 
__ac˚±
[],

1646 
size_t
 
__ac˚±_Àn
);

1648 
__STRING_INLINE
 
size_t


1649 
	$__°r•n_cg
 (
__c⁄°
 *
__s
, __c⁄° 
__ac˚±
[], 
size_t
 
__ac˚±_Àn
)

1651 
__d0
, 
__d1
, 
__d2
;

1652 
__c⁄°
 *
__ªs
;

1653 
__asm__
 
__vﬁ©ûe__


1664 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1665 : "0" (
__s
), "g" (
__ac˚±
), "g" (
__ac˚±_Àn
),

1668 "m" ( *(°ru˘ { 
__x
[0xfffffff]; } *)
__s
),

1669 "m" ( *(°ru˘ { 
__exãnsi⁄__
 
__x
[
__ac˚±_Àn
]; } *)
__ac˚±
)

1671  (
__ªs
 - 1Ë- 
__s
;

1672 
	}
}

1674 
__STRING_INLINE
 
size_t
 
__°r•n_g
 (
__c⁄°
 *
__s
, __c⁄° *
__ac˚±
);

1675 #ifde‡
__PIC__


1677 
__STRING_INLINE
 
size_t


1678 
	$__°r•n_g
 (
__c⁄°
 *
__s
, __c⁄° *
__ac˚±
)

1680 
__d0
, 
__d1
, 
__d2
;

1681 
__c⁄°
 *
__ªs
;

1682 
__asm__
 
__vﬁ©ûe__


1698 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1699 : "d" (
__ac˚±
), "0" (
__s
), "1" (0), "2" (0xffffffff), "3" (__accept)

1701  (
__ªs
 - 1Ë- 
__s
;

1702 
	}
}

1704 
__STRING_INLINE
 
size_t


1705 
	$__°r•n_g
 (
__c⁄°
 *
__s
, __c⁄° *
__ac˚±
)

1707 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1708 
__c⁄°
 *
__ªs
;

1709 
__asm__
 
__vﬁ©ûe__


1723 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
), "=&d" (
__d3
)

1724 : "0" (
__s
), "1" (0), "2" (0xffffffff), "3" (
__ac˚±
), "b" (__accept)

1726  (
__ªs
 - 1Ë- 
__s
;

1727 
	}
}

1732 
	#_HAVE_STRING_ARCH_°Ωbrk
 1

	)

1733 
	#°Ωbrk
(
s
, 
ac˚±
) \

1734 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
) &&  ((accept)[0]) == 1 \

1735 ? ((
ac˚±
)[0] == '\0' \

1736 ? ((Ë(
s
), (*) 0) \

1737 : ((
ac˚±
)[1] == '\0' \

1738 ? 
	`°rchr
 ((
s
), (
ac˚±
)[0]) \

1739 : 
	`__°Ωbrk_cg
 ((
s
), (
ac˚±
), 
	`°æí
 (accept)))) \

1740 : 
	`__°Ωbrk_g
 ((
s
), (
ac˚±
))))

	)

1742 
__STRING_INLINE
 *
__°Ωbrk_cg
 (
__c⁄°
 *
__s
, __c⁄° 
__ac˚±
[],

1743 
size_t
 
__ac˚±_Àn
);

1745 
__STRING_INLINE
 *

1746 
	$__°Ωbrk_cg
 (
__c⁄°
 *
__s
, __c⁄° 
__ac˚±
[], 
size_t
 
__ac˚±_Àn
)

1748 
__d0
, 
__d1
, 
__d2
;

1749 *
__ªs
;

1750 
__asm__
 
__vﬁ©ûe__


1765 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1766 : "0" (
__s
), "d" (
__ac˚±
), "g" (
__ac˚±_Àn
)

1768  
__ªs
;

1769 
	}
}

1771 
__STRING_INLINE
 *
__°Ωbrk_g
 (
__c⁄°
 *
__s
, __c⁄° *
__ac˚±
);

1772 #ifde‡
__PIC__


1774 
__STRING_INLINE
 *

1775 
	$__°Ωbrk_g
 (
__c⁄°
 *
__s
, __c⁄° *
__ac˚±
)

1777 
__d0
, 
__d1
, 
__d2
;

1778 *
__ªs
;

1779 
__asm__
 
__vﬁ©ûe__


1800 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&D" (
__d2
)

1801 : "d" (
__ac˚±
), "0" (
__s
), "1" (0), "2" (0xffffffff)

1803  
__ªs
;

1804 
	}
}

1806 
__STRING_INLINE
 *

1807 
	$__°Ωbrk_g
 (
__c⁄°
 *
__s
, __c⁄° *
__ac˚±
)

1809 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1810 *
__ªs
;

1811 
__asm__
 
__vﬁ©ûe__


1830 : "=S" (
__ªs
), "=&a" (
__d0
), "=&c" (
__d1
), "=&d" (
__d2
), "=&D" (
__d3
)

1831 : "0" (
__s
), "1" (0), "2" (0xffffffff), "b" (
__ac˚±
)

1833  
__ªs
;

1834 
	}
}

1839 
	#_HAVE_STRING_ARCH_°r°r
 1

	)

1840 
	#°r°r
(
hay°ack
, 
√edÀ
) \

1841 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
√edÀ
) &&  ((needle)[0]) == 1 \

1842 ? ((
√edÀ
)[0] == '\0' \

1843 ? (
hay°ack
) \

1844 : ((
√edÀ
)[1] == '\0' \

1845 ? 
	`°rchr
 ((
hay°ack
), (
√edÀ
)[0]) \

1846 : 
	`__°r°r_cg
 ((
hay°ack
), (
√edÀ
), \

1847 
	`°æí
 (
√edÀ
)))) \

1848 : 
	`__°r°r_g
 ((
hay°ack
), (
√edÀ
))))

	)

1852 
__STRING_INLINE
 *
__°r°r_cg
 (
__c⁄°
 *
__hay°ack
, __c⁄° 
__√edÀ
[],

1853 
size_t
 
__√edÀ_Àn
);

1855 
__STRING_INLINE
 *

1856 
	$__°r°r_cg
 (
__c⁄°
 *
__hay°ack
, __c⁄° 
__√edÀ
[],

1857 
size_t
 
__√edÀ_Àn
)

1859 
__d0
, 
__d1
, 
__d2
;

1860 *
__ªs
;

1861 
__asm__
 
__vﬁ©ûe__


1874 : "=&a" (
__ªs
), "=&S" (
__d0
), "=&D" (
__d1
), "=&c" (
__d2
)

1875 : "g" (
__√edÀ_Àn
), "1" (
__hay°ack
), "d" (
__√edÀ
)

1877  
__ªs
;

1878 
	}
}

1880 
__STRING_INLINE
 *
__°r°r_g
 (
__c⁄°
 *
__hay°ack
, __c⁄° *
__√edÀ
);

1881 #ifde‡
__PIC__


1883 
__STRING_INLINE
 *

1884 
	$__°r°r_g
 (
__c⁄°
 *
__hay°ack
, __c⁄° *
__√edÀ
)

1886 
__d0
, 
__d1
, 
__d2
;

1887 *
__ªs
;

1888 
__asm__
 
__vﬁ©ûe__


1907 : "=&a" (
__ªs
), "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
)

1908 : "0" (0), "1" (0xffffffff), "2" (
__hay°ack
), "3" (
__√edÀ
),

1909 "d" (
__√edÀ
)

1911  
__ªs
;

1912 
	}
}

1914 
__STRING_INLINE
 *

1915 
	$__°r°r_g
 (
__c⁄°
 *
__hay°ack
, __c⁄° *
__√edÀ
)

1917 
__d0
, 
__d1
, 
__d2
, 
__d3
;

1918 *
__ªs
;

1919 
__asm__
 
__vﬁ©ûe__


1936 : "=&a" (
__ªs
), "=&c" (
__d0
), "=&S" (
__d1
), "=&D" (
__d2
), "=&d" (
__d3
)

1937 : "0" (0), "1" (0xffffffff), "2" (
__hay°ack
), "3" (
__√edÀ
),

1938 "b" (
__√edÀ
)

1940  
__ªs
;

1941 
	}
}

1947 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


1948 #ifde‡
__i686__


1949 
	#_HAVE_STRING_ARCH_ffs
 1

	)

1950 
	#ffs
(
w‹d
Ë(
	`__buûtö_c⁄°™t_p
 (word) \

1951 ? 
	`__buûtö_ffs
 (
w‹d
) \

1952 : ({ 
__˙t
, 
__tmp
; \

1953 
__asm__
 
__vﬁ©ûe__
 \

1956 : "=&r" (
__˙t
), "Ù" (
__tmp
) \

1957 : "rm" (
w‹d
), "1" (-1)); \

1958 
__˙t
 + 1; }))

	)

1960 #i‚de‡
ff¶


1961 
	#ff¶
(
w‹d
Ë
	`ffs
(w‹d)

	)

1966 #i‚de‡
_FORCE_INLINES


1967 #unde‡
__STRING_INLINE


	@/usr/include/bits/string2.h

21 #i‚de‡
_STRING_H


25 #i‡!
deföed
 
__NO_STRING_INLINES
 && !deföed 
__BOUNDED_POINTERS__


42 #i‚de‡
__STRING_INLINE


43 #ifde‡
__˝lu•lus


44 
	#__STRING_INLINE
 
ölöe


	)

46 
	#__STRING_INLINE
 
__exã∫_ölöe


	)

50 #i‡
_STRING_ARCH_u«lig√d


52 
	~<ídün.h
>

53 
	~<bôs/ty≥s.h
>

55 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


56 
	#__STRING2_SMALL_GET16
(
§c
, 
idx
) \

57 (((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
 + 1] << 8 \

58 | ((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
])

	)

59 
	#__STRING2_SMALL_GET32
(
§c
, 
idx
) \

60 (((((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
 + 3] << 8 \

61 | ((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
 + 2]) << 8 \

62 | ((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
 + 1]) << 8 \

63 | ((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
])

	)

65 
	#__STRING2_SMALL_GET16
(
§c
, 
idx
) \

66 (((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
] << 8 \

67 | ((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
 + 1])

	)

68 
	#__STRING2_SMALL_GET32
(
§c
, 
idx
) \

69 (((((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
] << 8 \

70 | ((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
 + 1]) << 8 \

71 | ((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
 + 2]) << 8 \

72 | ((
__c⁄°
 *Ë(__c⁄° *Ë(
§c
))[
idx
 + 3])

	)

77 
	#__STRING2_COPY_TYPE
(
N
) \

78 °ru˘ { 
__¨r
[
N
]; } \

79 
	t__©åibuã__
 ((
	t__∑cked__
)Ë
	t__STRING2_COPY_ARR
##
	tN


	)

80 
	t__STRING2_COPY_TYPE
 (2);

81 
__STRING2_COPY_TYPE
 (3);

82 
__STRING2_COPY_TYPE
 (4);

83 
__STRING2_COPY_TYPE
 (5);

84 
__STRING2_COPY_TYPE
 (6);

85 
__STRING2_COPY_TYPE
 (7);

86 
__STRING2_COPY_TYPE
 (8);

87 #unde‡
__STRING2_COPY_TYPE


93 
	#__°rög2_1b±r_p
(
__x
) \

94 ((
size_t
)(c⁄° *)((
__x
Ë+ 1Ë- (size_t)(c⁄° *)(__xË=1)

	)

97 #i‡!
deföed
 
_HAVE_STRING_ARCH_mem£t


98 #i‡!
__GNUC_PREREQ
 (3, 0)

99 #i‡
_STRING_ARCH_u«lig√d


100 
	#mem£t
(
s
, 
c
, 
n
) \

101 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
n
) && (n) <= 16 \

102 ? ((
n
) == 1 \

103 ? 
	`__mem£t_1
 (
s
, 
c
) \

104 : 
	`__mem£t_gc
 (
s
, 
c
, 
n
)) \

105 : (
	`__buûtö_c⁄°™t_p
 (
c
) && (c) == '\0' \

106 ? ({ *
__s
 = (
s
); 
	`__bzîo
 (__s, 
n
); __s; }) \

107 : 
	`mem£t
 (
s
, 
c
, 
n
))))

	)

109 
	#__mem£t_1
(
s
, 
c
Ë({ *
__s
 = (s); \

110 *((
__uöt8_t
 *Ë
__s
Ë(__uöt8_tË
c
; __s; })

	)

112 
	#__mem£t_gc
(
s
, 
c
, 
n
) \

113 ({ *
__s
 = (
s
); \

115 
__ui
; \

116 
__usi
; \

117 
__uc
; \

118 } *
__u
 = 
__s
; \

119 
__uöt8_t
 
__c
 = (__uöt8_tË(
c
); \

122 (Ë(
n
)) \

125 
__u
->
__ui
 = 
__c
 * 0x01010101; \

126 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

128 
__u
->
__ui
 = 
__c
 * 0x01010101; \

129 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

131 
__u
->
__ui
 = 
__c
 * 0x01010101; \

132 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

134 
__u
->
__usi
 = (Ë
__c
 * 0x0101; \

135 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2); \

136 
__u
->
__uc
 = (Ë
__c
; \

140 
__u
->
__ui
 = 
__c
 * 0x01010101; \

141 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

143 
__u
->
__ui
 = 
__c
 * 0x01010101; \

144 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

146 
__u
->
__ui
 = 
__c
 * 0x01010101; \

147 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

149 
__u
->
__usi
 = (Ë
__c
 * 0x0101; \

153 
__u
->
__ui
 = 
__c
 * 0x01010101; \

154 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

156 
__u
->
__ui
 = 
__c
 * 0x01010101; \

157 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

159 
__u
->
__ui
 = 
__c
 * 0x01010101; \

160 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

162 
__u
->
__uc
 = (Ë
__c
; \

166 
__u
->
__ui
 = 
__c
 * 0x01010101; \

167 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

169 
__u
->
__ui
 = 
__c
 * 0x01010101; \

170 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

172 
__u
->
__ui
 = 
__c
 * 0x01010101; \

173 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4); \

175 
__u
->
__ui
 = 
__c
 * 0x01010101; \

180 
__s
; })

	)

182 
	#mem£t
(
s
, 
c
, 
n
) \

183 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) && (c) == '\0' \

184 ? ({ *
__s
 = (
s
); 
	`__bzîo
 (__s, 
n
); __s; }) \

185 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

194 #i‡
__GNUC_PREREQ
 (2, 91)

195 
	#__bzîo
(
s
, 
n
Ë
	`__buûtö_mem£t
 (s, '\0',Ç)

	)

203 #ifde‡
__USE_GNU


204 #i‡!
deföed
 
_HAVE_STRING_ARCH_memp˝y
 || deföed 
_FORCE_INLINES


205 #i‚de‡
_HAVE_STRING_ARCH_memp˝y


206 #i‡
__GNUC_PREREQ
 (3, 4)

207 
	#__memp˝y
(
de°
, 
§c
, 
n
Ë
	`__buûtö_memp˝y
 (de°, src,Ç)

	)

208 #ñi‡
__GNUC_PREREQ
 (3, 0)

209 
	#__memp˝y
(
de°
, 
§c
, 
n
) \

210 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

211 && 
	`__°rög2_1b±r_p
 (
§c
Ë&& 
n
 <= 8 \

212 ? 
	`__buûtö_mem˝y
 (
de°
, 
§c
, 
n
) + (n) \

213 : 
	`__memp˝y
 (
de°
, 
§c
, 
n
)))

	)

215 
	#__memp˝y
(
de°
, 
§c
, 
n
) \

216 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

217 && 
	`__°rög2_1b±r_p
 (
§c
Ë&& 
n
 <= 8 \

218 ? 
	`__memp˝y_smÆl
 (
de°
, 
	`__memp˝y_¨gs
 (
§c
), 
n
) \

219 : 
	`__memp˝y
 (
de°
, 
§c
, 
n
)))

	)

223 
	#memp˝y
(
de°
, 
§c
, 
n
Ë
	`__memp˝y
 (de°, src,Ç)

	)

226 #i‡!
__GNUC_PREREQ
 (3, 0Ë|| 
deföed
 
_FORCE_INLINES


227 #i‡
_STRING_ARCH_u«lig√d


228 #i‚de‡
_FORCE_INLINES


229 
	#__memp˝y_¨gs
(
§c
) \

230 ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[2], \

231 ((
__c⁄°
 *Ë(
§c
))[4], ((__const *) (src))[6], \

232 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 0), \

233 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 4), \

234 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 0), \

235 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 4)

	)

237 
__STRING_INLINE
 *
__memp˝y_smÆl
 (*, , , , ,

238 
__uöt16_t
, __uöt16_t, 
__uöt32_t
,

239 
__uöt32_t
, 
size_t
);

240 
__STRING_INLINE
 *

241 
	$__memp˝y_smÆl
 (*
__de°1
,

242 
__§c0_1
, 
__§c2_1
, 
__§c4_1
, 
__§c6_1
,

243 
__uöt16_t
 
__§c0_2
, __uöt16_à
__§c4_2
,

244 
__uöt32_t
 
__§c0_4
, __uöt32_à
__§c4_4
,

245 
size_t
 
__§˛í
)

248 
__uöt32_t
 
__ui
;

249 
__uöt16_t
 
__usi
;

250 
__uc
;

251 
__c
;

252 } *
__u
 = 
__de°1
;

253 (Ë
__§˛í
)

256 
__u
->
__c
 = 
__§c0_1
;

257 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

260 
__u
->
__usi
 = 
__§c0_2
;

261 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

264 
__u
->
__usi
 = 
__§c0_2
;

265 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

266 
__u
->
__c
 = 
__§c2_1
;

267 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

270 
__u
->
__ui
 = 
__§c0_4
;

271 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

274 
__u
->
__ui
 = 
__§c0_4
;

275 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

276 
__u
->
__c
 = 
__§c4_1
;

277 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

280 
__u
->
__ui
 = 
__§c0_4
;

281 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

282 
__u
->
__usi
 = 
__§c4_2
;

283 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

286 
__u
->
__ui
 = 
__§c0_4
;

287 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

288 
__u
->
__usi
 = 
__§c4_2
;

289 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

290 
__u
->
__c
 = 
__§c6_1
;

291 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

294 
__u
->
__ui
 = 
__§c0_4
;

295 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

296 
__u
->
__ui
 = 
__§c4_4
;

297 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

300  (*Ë
__u
;

301 
	}
}

303 #i‚de‡
_FORCE_INLINES


304 
	#__memp˝y_¨gs
(
§c
) \

305 ((
__c⁄°
 *Ë(
§c
))[0], \

306 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR2
) \

307 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1] } }), \

308 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR3
) \

309 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

310 ((
__c⁄°
 *Ë(
§c
))[2] } }), \

311 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR4
) \

312 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

313 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3] } }), \

314 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR5
) \

315 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

316 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

317 ((
__c⁄°
 *Ë(
§c
))[4] } }), \

318 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR6
) \

319 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

320 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

321 ((
__c⁄°
 *Ë(
§c
))[4], ((__const *) (src))[5] } }), \

322 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR7
) \

323 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

324 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

325 ((
__c⁄°
 *Ë(
§c
))[4], ((__const *) (src))[5], \

326 ((
__c⁄°
 *Ë(
§c
))[6] } }), \

327 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR8
) \

328 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

329 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

330 ((
__c⁄°
 *Ë(
§c
))[4], ((__const *) (src))[5], \

331 ((
__c⁄°
 *Ë(
§c
))[6], ((__c⁄° *Ë(§c))[7] } })

	)

333 
__STRING_INLINE
 *
__memp˝y_smÆl
 (*, , 
__STRING2_COPY_ARR2
,

334 
__STRING2_COPY_ARR3
,

335 
__STRING2_COPY_ARR4
,

336 
__STRING2_COPY_ARR5
,

337 
__STRING2_COPY_ARR6
,

338 
__STRING2_COPY_ARR7
,

339 
__STRING2_COPY_ARR8
, 
size_t
);

340 
__STRING_INLINE
 *

341 
	$__memp˝y_smÆl
 (*
__de°
, 
__§c1
,

342 
__STRING2_COPY_ARR2
 
__§c2
, 
__STRING2_COPY_ARR3
 
__§c3
,

343 
__STRING2_COPY_ARR4
 
__§c4
, 
__STRING2_COPY_ARR5
 
__§c5
,

344 
__STRING2_COPY_ARR6
 
__§c6
, 
__STRING2_COPY_ARR7
 
__§c7
,

345 
__STRING2_COPY_ARR8
 
__§c8
, 
size_t
 
__§˛í
)

348 
__c
;

349 
__STRING2_COPY_ARR2
 
__sˇ2
;

350 
__STRING2_COPY_ARR3
 
__sˇ3
;

351 
__STRING2_COPY_ARR4
 
__sˇ4
;

352 
__STRING2_COPY_ARR5
 
__sˇ5
;

353 
__STRING2_COPY_ARR6
 
__sˇ6
;

354 
__STRING2_COPY_ARR7
 
__sˇ7
;

355 
__STRING2_COPY_ARR8
 
__sˇ8
;

356 } *
__u
 = 
__de°
;

357 (Ë
__§˛í
)

360 
__u
->
__c
 = 
__§c1
;

363 
__exãnsi⁄__
 
__u
->
__sˇ2
 = 
__§c2
;

366 
__exãnsi⁄__
 
__u
->
__sˇ3
 = 
__§c3
;

369 
__exãnsi⁄__
 
__u
->
__sˇ4
 = 
__§c4
;

372 
__exãnsi⁄__
 
__u
->
__sˇ5
 = 
__§c5
;

375 
__exãnsi⁄__
 
__u
->
__sˇ6
 = 
__§c6
;

378 
__exãnsi⁄__
 
__u
->
__sˇ7
 = 
__§c7
;

381 
__exãnsi⁄__
 
__u
->
__sˇ8
 = 
__§c8
;

384  
	`__exãnsi⁄__
 ((*Ë
__u
 + 
__§˛í
);

385 
	}
}

393 #i‚de‡
_HAVE_STRING_ARCH_°rchr


394 *
__øwmemchr
 (c⁄° *
__s
, 
__c
);

395 #i‡
__GNUC_PREREQ
 (3, 2)

396 
	#°rchr
(
s
, 
c
) \

397 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
Ë&& !__buûtö_c⁄°™t_∞(
s
) \

398 && (
c
) == '\0' \

399 ? (*Ë
	`__øwmemchr
 (
s
, 
c
) \

400 : 
	`__buûtö_°rchr
 (
s
, 
c
)))

	)

402 
	#°rchr
(
s
, 
c
) \

403 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
c
) && (c) == '\0' \

404 ? (*Ë
	`__øwmemchr
 (
s
, 
c
) \

405 : 
	`°rchr
 (
s
, 
c
)))

	)

411 #i‡(!
deföed
 
_HAVE_STRING_ARCH_°r˝y
 && !
__GNUC_PREREQ
 (3, 0)) \

412 || 
deföed
 
	g_FORCE_INLINES


413 #i‡!
deföed
 
_HAVE_STRING_ARCH_°r˝y
 && !
__GNUC_PREREQ
 (3, 0)

414 
	#°r˝y
(
de°
, 
§c
) \

415 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

416 ? (
	`__°rög2_1b±r_p
 (
§c
Ë&& 
	`°æí
 (src) + 1 <= 8 \

417 ? 
	`__°r˝y_smÆl
 (
de°
, 
	`__°r˝y_¨gs
 (
§c
), \

418 
	`°æí
 (
§c
) + 1) \

419 : (*Ë
	`mem˝y
 (
de°
, 
§c
, 
	`°æí
 (src) + 1)) \

420 : 
	`°r˝y
 (
de°
, 
§c
)))

	)

423 #i‡
_STRING_ARCH_u«lig√d


424 #i‚de‡
_FORCE_INLINES


425 
	#__°r˝y_¨gs
(
§c
) \

426 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 0), \

427 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 4), \

428 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 0), \

429 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 4)

	)

431 
__STRING_INLINE
 *
__°r˝y_smÆl
 (*, 
__uöt16_t
, __uint16_t,

432 
__uöt32_t
, __uöt32_t, 
size_t
);

433 
__STRING_INLINE
 *

434 
	$__°r˝y_smÆl
 (*
__de°
,

435 
__uöt16_t
 
__§c0_2
, __uöt16_à
__§c4_2
,

436 
__uöt32_t
 
__§c0_4
, __uöt32_à
__§c4_4
,

437 
size_t
 
__§˛í
)

440 
__uöt32_t
 
__ui
;

441 
__uöt16_t
 
__usi
;

442 
__uc
;

443 } *
__u
 = (*Ë
__de°
;

444 (Ë
__§˛í
)

447 
__u
->
__uc
 = '\0';

450 
__u
->
__usi
 = 
__§c0_2
;

453 
__u
->
__usi
 = 
__§c0_2
;

454 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

455 
__u
->
__uc
 = '\0';

458 
__u
->
__ui
 = 
__§c0_4
;

461 
__u
->
__ui
 = 
__§c0_4
;

462 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

463 
__u
->
__uc
 = '\0';

466 
__u
->
__ui
 = 
__§c0_4
;

467 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

468 
__u
->
__usi
 = 
__§c4_2
;

471 
__u
->
__ui
 = 
__§c0_4
;

472 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

473 
__u
->
__usi
 = 
__§c4_2
;

474 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

475 
__u
->
__uc
 = '\0';

478 
__u
->
__ui
 = 
__§c0_4
;

479 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

480 
__u
->
__ui
 = 
__§c4_4
;

483  
__de°
;

484 
	}
}

486 #i‚de‡
_FORCE_INLINES


487 
	#__°r˝y_¨gs
(
§c
) \

488 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR2
) \

489 { { ((
__c⁄°
 *Ë(
§c
))[0], '\0' } }), \

490 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR3
) \

491 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

493 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR4
) \

494 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

495 ((
__c⁄°
 *Ë(
§c
))[2], '\0' } }), \

496 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR5
) \

497 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

498 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

500 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR6
) \

501 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

502 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

503 ((
__c⁄°
 *Ë(
§c
))[4], '\0' } }), \

504 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR7
) \

505 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

506 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

507 ((
__c⁄°
 *Ë(
§c
))[4], ((__const *) (src))[5], \

509 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR8
) \

510 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

511 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

512 ((
__c⁄°
 *Ë(
§c
))[4], ((__const *) (src))[5], \

513 ((
__c⁄°
 *Ë(
§c
))[6], '\0' } })

	)

515 
__STRING_INLINE
 *
__°r˝y_smÆl
 (*, 
__STRING2_COPY_ARR2
,

516 
__STRING2_COPY_ARR3
,

517 
__STRING2_COPY_ARR4
,

518 
__STRING2_COPY_ARR5
,

519 
__STRING2_COPY_ARR6
,

520 
__STRING2_COPY_ARR7
,

521 
__STRING2_COPY_ARR8
, 
size_t
);

522 
__STRING_INLINE
 *

523 
	$__°r˝y_smÆl
 (*
__de°
,

524 
__STRING2_COPY_ARR2
 
__§c2
, 
__STRING2_COPY_ARR3
 
__§c3
,

525 
__STRING2_COPY_ARR4
 
__§c4
, 
__STRING2_COPY_ARR5
 
__§c5
,

526 
__STRING2_COPY_ARR6
 
__§c6
, 
__STRING2_COPY_ARR7
 
__§c7
,

527 
__STRING2_COPY_ARR8
 
__§c8
, 
size_t
 
__§˛í
)

530 
__c
;

531 
__STRING2_COPY_ARR2
 
__sˇ2
;

532 
__STRING2_COPY_ARR3
 
__sˇ3
;

533 
__STRING2_COPY_ARR4
 
__sˇ4
;

534 
__STRING2_COPY_ARR5
 
__sˇ5
;

535 
__STRING2_COPY_ARR6
 
__sˇ6
;

536 
__STRING2_COPY_ARR7
 
__sˇ7
;

537 
__STRING2_COPY_ARR8
 
__sˇ8
;

538 } *
__u
 = (*Ë
__de°
;

539 (Ë
__§˛í
)

542 
__u
->
__c
 = '\0';

545 
__exãnsi⁄__
 
__u
->
__sˇ2
 = 
__§c2
;

548 
__exãnsi⁄__
 
__u
->
__sˇ3
 = 
__§c3
;

551 
__exãnsi⁄__
 
__u
->
__sˇ4
 = 
__§c4
;

554 
__exãnsi⁄__
 
__u
->
__sˇ5
 = 
__§c5
;

557 
__exãnsi⁄__
 
__u
->
__sˇ6
 = 
__§c6
;

560 
__exãnsi⁄__
 
__u
->
__sˇ7
 = 
__§c7
;

563 
__exãnsi⁄__
 
__u
->
__sˇ8
 = 
__§c8
;

566  
__de°
;

567 
	}
}

573 #ifde‡
__USE_GNU


574 #i‡!
deföed
 
_HAVE_STRING_ARCH_°p˝y
 || deföed 
_FORCE_INLINES


575 #i‚de‡
_HAVE_STRING_ARCH_°p˝y


576 #i‡
__GNUC_PREREQ
 (3, 4)

577 
	#__°p˝y
(
de°
, 
§c
Ë
	`__buûtö_°p˝y
 (de°, src)

	)

578 #ñi‡
__GNUC_PREREQ
 (3, 0)

579 
	#__°p˝y
(
de°
, 
§c
) \

580 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

581 ? (
	`__°rög2_1b±r_p
 (
§c
Ë&& 
	`°æí
 (src) + 1 <= 8 \

582 ? 
	`__buûtö_°r˝y
 (
de°
, 
§c
Ë+ 
	`°æí
 (src) \

583 : ((*Ë(
__memp˝y
Ë(
de°
, 
§c
, 
	`°æí
 (src) + 1) \

585 : 
	`__°p˝y
 (
de°
, 
§c
)))

	)

587 
	#__°p˝y
(
de°
, 
§c
) \

588 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
) \

589 ? (
	`__°rög2_1b±r_p
 (
§c
Ë&& 
	`°æí
 (src) + 1 <= 8 \

590 ? 
	`__°p˝y_smÆl
 (
de°
, 
	`__°p˝y_¨gs
 (
§c
), \

591 
	`°æí
 (
§c
) + 1) \

592 : ((*Ë(
__memp˝y
Ë(
de°
, 
§c
, 
	`°æí
 (src) + 1) \

594 : 
	`__°p˝y
 (
de°
, 
§c
)))

	)

598 
	#°p˝y
(
de°
, 
§c
Ë
	`__°p˝y
 (de°, src)

	)

601 #i‡!
__GNUC_PREREQ
 (3, 0Ë|| 
deföed
 
_FORCE_INLINES


602 #i‡
_STRING_ARCH_u«lig√d


603 #i‚de‡
_FORCE_INLINES


604 
	#__°p˝y_¨gs
(
§c
) \

605 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 0), \

606 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET16
 (
§c
, 4), \

607 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 0), \

608 
__exãnsi⁄__
 
	`__STRING2_SMALL_GET32
 (
§c
, 4)

	)

610 
__STRING_INLINE
 *
__°p˝y_smÆl
 (*, 
__uöt16_t
, __uint16_t,

611 
__uöt32_t
, __uöt32_t, 
size_t
);

612 
__STRING_INLINE
 *

613 
	$__°p˝y_smÆl
 (*
__de°
,

614 
__uöt16_t
 
__§c0_2
, __uöt16_à
__§c4_2
,

615 
__uöt32_t
 
__§c0_4
, __uöt32_à
__§c4_4
,

616 
size_t
 
__§˛í
)

619 
__ui
;

620 
__usi
;

621 
__uc
;

622 
__c
;

623 } *
__u
 = (*Ë
__de°
;

624 (Ë
__§˛í
)

627 
__u
->
__uc
 = '\0';

630 
__u
->
__usi
 = 
__§c0_2
;

631 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

634 
__u
->
__usi
 = 
__§c0_2
;

635 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

636 
__u
->
__uc
 = '\0';

639 
__u
->
__ui
 = 
__§c0_4
;

640 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 3);

643 
__u
->
__ui
 = 
__§c0_4
;

644 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

645 
__u
->
__uc
 = '\0';

648 
__u
->
__ui
 = 
__§c0_4
;

649 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

650 
__u
->
__usi
 = 
__§c4_2
;

651 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 1);

654 
__u
->
__ui
 = 
__§c0_4
;

655 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

656 
__u
->
__usi
 = 
__§c4_2
;

657 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 2);

658 
__u
->
__uc
 = '\0';

661 
__u
->
__ui
 = 
__§c0_4
;

662 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 4);

663 
__u
->
__ui
 = 
__§c4_4
;

664 
__u
 = 
	`__exãnsi⁄__
 ((*) __u + 3);

667  &
__u
->
__c
;

668 
	}
}

670 #i‚de‡
_FORCE_INLINES


671 
	#__°p˝y_¨gs
(
§c
) \

672 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR2
) \

673 { { ((
__c⁄°
 *Ë(
§c
))[0], '\0' } }), \

674 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR3
) \

675 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

677 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR4
) \

678 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

679 ((
__c⁄°
 *Ë(
§c
))[2], '\0' } }), \

680 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR5
) \

681 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

682 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

684 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR6
) \

685 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

686 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

687 ((
__c⁄°
 *Ë(
§c
))[4], '\0' } }), \

688 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR7
) \

689 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

690 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

691 ((
__c⁄°
 *Ë(
§c
))[4], ((__const *) (src))[5], \

693 
	`__exãnsi⁄__
 ((
__STRING2_COPY_ARR8
) \

694 { { ((
__c⁄°
 *Ë(
§c
))[0], ((__const *) (src))[1], \

695 ((
__c⁄°
 *Ë(
§c
))[2], ((__const *) (src))[3], \

696 ((
__c⁄°
 *Ë(
§c
))[4], ((__const *) (src))[5], \

697 ((
__c⁄°
 *Ë(
§c
))[6], '\0' } })

	)

699 
__STRING_INLINE
 *
__°p˝y_smÆl
 (*, 
__STRING2_COPY_ARR2
,

700 
__STRING2_COPY_ARR3
,

701 
__STRING2_COPY_ARR4
,

702 
__STRING2_COPY_ARR5
,

703 
__STRING2_COPY_ARR6
,

704 
__STRING2_COPY_ARR7
,

705 
__STRING2_COPY_ARR8
, 
size_t
);

706 
__STRING_INLINE
 *

707 
	$__°p˝y_smÆl
 (*
__de°
,

708 
__STRING2_COPY_ARR2
 
__§c2
, 
__STRING2_COPY_ARR3
 
__§c3
,

709 
__STRING2_COPY_ARR4
 
__§c4
, 
__STRING2_COPY_ARR5
 
__§c5
,

710 
__STRING2_COPY_ARR6
 
__§c6
, 
__STRING2_COPY_ARR7
 
__§c7
,

711 
__STRING2_COPY_ARR8
 
__§c8
, 
size_t
 
__§˛í
)

714 
__c
;

715 
__STRING2_COPY_ARR2
 
__sˇ2
;

716 
__STRING2_COPY_ARR3
 
__sˇ3
;

717 
__STRING2_COPY_ARR4
 
__sˇ4
;

718 
__STRING2_COPY_ARR5
 
__sˇ5
;

719 
__STRING2_COPY_ARR6
 
__sˇ6
;

720 
__STRING2_COPY_ARR7
 
__sˇ7
;

721 
__STRING2_COPY_ARR8
 
__sˇ8
;

722 } *
__u
 = (*Ë
__de°
;

723 (Ë
__§˛í
)

726 
__u
->
__c
 = '\0';

729 
__exãnsi⁄__
 
__u
->
__sˇ2
 = 
__§c2
;

732 
__exãnsi⁄__
 
__u
->
__sˇ3
 = 
__§c3
;

735 
__exãnsi⁄__
 
__u
->
__sˇ4
 = 
__§c4
;

738 
__exãnsi⁄__
 
__u
->
__sˇ5
 = 
__§c5
;

741 
__exãnsi⁄__
 
__u
->
__sˇ6
 = 
__§c6
;

744 
__exãnsi⁄__
 
__u
->
__sˇ7
 = 
__§c7
;

747 
__exãnsi⁄__
 
__u
->
__sˇ8
 = 
__§c8
;

750  
__de°
 + 
__§˛í
 - 1;

751 
	}
}

759 #i‚de‡
_HAVE_STRING_ARCH_°∫˝y


760 #i‡
__GNUC_PREREQ
 (3, 2)

761 
	#°∫˝y
(
de°
, 
§c
, 
n
Ë
	`__buûtö_°∫˝y
 (de°, src,Ç)

	)

763 
	#°∫˝y
(
de°
, 
§c
, 
n
) \

764 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

765 ? (
	`°æí
 (
§c
Ë+ 1 >((
size_t
Ë(
n
)) \

766 ? (*Ë
	`mem˝y
 (
de°
, 
§c
, 
n
) \

767 : 
	`°∫˝y
 (
de°
, 
§c
, 
n
)) \

768 : 
	`°∫˝y
 (
de°
, 
§c
, 
n
)))

	)

774 #i‚de‡
_HAVE_STRING_ARCH_°∫ˇt


775 #ifde‡
_USE_STRING_ARCH_°rchr


776 
	#°∫ˇt
(
de°
, 
§c
, 
n
) \

777 (
	`__exãnsi⁄__
 ({ *
__de°
 = (
de°
); \

778 
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

779 ? (
	`°æí
 (
§c
Ë< ((
size_t
Ë(
n
)) \

780 ? 
	`°rˇt
 (
__de°
, 
§c
) \

781 : (*((*Ë
	`__memp˝y
 (
	`°rchr
 (
__de°
, '\0'), \

782 
§c
, 
n
)Ë'\0', 
__de°
)) \

783 : 
	`°∫ˇt
 (
de°
, 
§c
, 
n
); }))

	)

784 #ñi‡
__GNUC_PREREQ
 (3, 2)

785 
	#°∫ˇt
(
de°
, 
§c
, 
n
Ë
	`__buûtö_°∫ˇt
 (de°, src,Ç)

	)

787 
	#°∫ˇt
(
de°
, 
§c
, 
n
) \

788 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
§c
Ë&& __buûtö_c⁄°™t_∞(
n
) \

789 ? (
	`°æí
 (
§c
Ë< ((
size_t
Ë(
n
)) \

790 ? 
	`°rˇt
 (
de°
, 
§c
) \

791 : 
	`°∫ˇt
 (
de°
, 
§c
, 
n
)) \

792 : 
	`°∫ˇt
 (
de°
, 
§c
, 
n
)))

	)

798 #i‚de‡
_HAVE_STRING_ARCH_°rcmp


799 #i‡
__GNUC_PREREQ
 (3, 2)

800 
	#°rcmp
(
s1
, 
s2
) \

801 
__exãnsi⁄__
 \

802 ({ 
size_t
 
__s1_Àn
, 
__s2_Àn
; \

803 (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& __buûtö_c⁄°™t_∞(
s2
) \

804 && (
__s1_Àn
 = 
	`°æí
 (
s1
), 
__s2_Àn
 = såÀ¿(
s2
), \

805 (!
	`__°rög2_1b±r_p
 (
s1
Ë|| 
__s1_Àn
 >= 4) \

806 && (!
	`__°rög2_1b±r_p
 (
s2
Ë|| 
__s2_Àn
 >= 4)) \

807 ? 
	`__buûtö_°rcmp
 (
s1
, 
s2
) \

808 : (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& 
	`__°rög2_1b±r_p
 (s1) \

809 && (
__s1_Àn
 = 
	`°æí
 (
s1
), __s1_len < 4) \

810 ? (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&& 
	`__°rög2_1b±r_p
 (s2) \

811 ? 
	`__buûtö_°rcmp
 (
s1
, 
s2
) \

812 : 
	`__°rcmp_cg
 (
s1
, 
s2
, 
__s1_Àn
)) \

813 : (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&& 
	`__°rög2_1b±r_p
 (s2) \

814 && (
__s2_Àn
 = 
	`°æí
 (
s2
), __s2_len < 4) \

815 ? (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& 
	`__°rög2_1b±r_p
 (s1) \

816 ? 
	`__buûtö_°rcmp
 (
s1
, 
s2
) \

817 : 
	`__°rcmp_gc
 (
s1
, 
s2
, 
__s2_Àn
)) \

818 : 
	`__buûtö_°rcmp
 (
s1
, 
s2
)))); })

	)

820 
	#°rcmp
(
s1
, 
s2
) \

821 
__exãnsi⁄__
 \

822 ({ 
size_t
 
__s1_Àn
, 
__s2_Àn
; \

823 (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& __buûtö_c⁄°™t_∞(
s2
) \

824 && (
__s1_Àn
 = 
	`°æí
 (
s1
), 
__s2_Àn
 = såÀ¿(
s2
), \

825 (!
	`__°rög2_1b±r_p
 (
s1
Ë|| 
__s1_Àn
 >= 4) \

826 && (!
	`__°rög2_1b±r_p
 (
s2
Ë|| 
__s2_Àn
 >= 4)) \

827 ? 
	`memcmp
 ((
__c⁄°
 *Ë(
s1
), (__c⁄° *Ë(
s2
), \

828 (
__s1_Àn
 < 
__s2_Àn
 ? __s1_len : __s2_len) + 1) \

829 : (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& 
	`__°rög2_1b±r_p
 (s1) \

830 && (
__s1_Àn
 = 
	`°æí
 (
s1
), __s1_len < 4) \

831 ? (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&& 
	`__°rög2_1b±r_p
 (s2) \

832 ? 
	`__°rcmp_cc
 (
s1
, 
s2
, 
__s1_Àn
) \

833 : 
	`__°rcmp_cg
 (
s1
, 
s2
, 
__s1_Àn
)) \

834 : (
	`__buûtö_c⁄°™t_p
 (
s2
Ë&& 
	`__°rög2_1b±r_p
 (s2) \

835 && (
__s2_Àn
 = 
	`°æí
 (
s2
), __s2_len < 4) \

836 ? (
	`__buûtö_c⁄°™t_p
 (
s1
Ë&& 
	`__°rög2_1b±r_p
 (s1) \

837 ? 
	`__°rcmp_cc
 (
s1
, 
s2
, 
__s2_Àn
) \

838 : 
	`__°rcmp_gc
 (
s1
, 
s2
, 
__s2_Àn
)) \

839 : 
	`°rcmp
 (
s1
, 
s2
)))); })

	)

842 
	#__°rcmp_cc
(
s1
, 
s2
, 
l
) \

843 (
	`__exãnsi⁄__
 ({ 
__ªsu…
 = \

844 (((
__c⁄°
 *Ë(__c⁄° *Ë(
s1
))[0] \

845 - ((
__c⁄°
 *Ë(__c⁄° *)(
s2
))[0]);\

846 i‡(
l
 > 0 && 
__ªsu…
 == 0) \

848 
__ªsu…
 = (((
__c⁄°
 *) \

849 (
__c⁄°
 *Ë(
s1
))[1] \

850 - ((
__c⁄°
 *) \

851 (
__c⁄°
 *Ë(
s2
))[1]); \

852 i‡(
l
 > 1 && 
__ªsu…
 == 0) \

854 
__ªsu…
 = \

855 (((
__c⁄°
 *) \

856 (
__c⁄°
 *Ë(
s1
))[2] \

857 - ((
__c⁄°
 *) \

858 (
__c⁄°
 *Ë(
s2
))[2]); \

859 i‡(
l
 > 2 && 
__ªsu…
 == 0) \

860 
__ªsu…
 = \

861 (((
__c⁄°
 *) \

862 (
__c⁄°
 *Ë(
s1
))[3] \

863 - ((
__c⁄°
 *) \

864 (
__c⁄°
 *Ë(
s2
))[3]); \

867 
__ªsu…
; }))

	)

869 
	#__°rcmp_cg
(
s1
, 
s2
, 
l1
) \

870 (
	`__exãnsi⁄__
 ({ 
__c⁄°
 *
__s2
 = \

871 (
__c⁄°
 *Ë(__c⁄° *Ë(
s2
); \

872 
__ªsu…
 = \

873 (((
__c⁄°
 *Ë(__c⁄° *Ë(
s1
))[0] \

874 - 
__s2
[0]); \

875 i‡(
l1
 > 0 && 
__ªsu…
 == 0) \

877 
__ªsu…
 = (((
__c⁄°
 *) \

878 (
__c⁄°
 *Ë(
s1
))[1] - 
__s2
[1]); \

879 i‡(
l1
 > 1 && 
__ªsu…
 == 0) \

881 
__ªsu…
 = (((
__c⁄°
 *) \

882 (
__c⁄°
 *Ë(
s1
))[2] - 
__s2
[2]);\

883 i‡(
l1
 > 2 && 
__ªsu…
 == 0) \

884 
__ªsu…
 = (((
__c⁄°
 *) \

885 (
__c⁄°
 *Ë(
s1
))[3] \

886 - 
__s2
[3]); \

889 
__ªsu…
; }))

	)

891 
	#__°rcmp_gc
(
s1
, 
s2
, 
l2
) \

892 (
	`__exãnsi⁄__
 ({ 
__c⁄°
 *
__s1
 = \

893 (
__c⁄°
 *Ë(__c⁄° *Ë(
s1
); \

894 
__ªsu…
 = \

895 
__s1
[0] - ((
__c⁄°
 *) \

896 (
__c⁄°
 *Ë(
s2
))[0]; \

897 i‡(
l2
 > 0 && 
__ªsu…
 == 0) \

899 
__ªsu…
 = (
__s1
[1] \

900 - ((
__c⁄°
 *) \

901 (
__c⁄°
 *Ë(
s2
))[1]); \

902 i‡(
l2
 > 1 && 
__ªsu…
 == 0) \

904 
__ªsu…
 = \

905 (
__s1
[2] - ((
__c⁄°
 *) \

906 (
__c⁄°
 *Ë(
s2
))[2]); \

907 i‡(
l2
 > 2 && 
__ªsu…
 == 0) \

908 
__ªsu…
 = \

909 (
__s1
[3] \

910 - ((
__c⁄°
 *) \

911 (
__c⁄°
 *Ë(
s2
))[3]); \

914 
__ªsu…
; }))

	)

919 #i‚de‡
_HAVE_STRING_ARCH_°∫cmp


920 
	#°∫cmp
(
s1
, 
s2
, 
n
) \

921 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
n
) \

922 && ((
	`__buûtö_c⁄°™t_p
 (
s1
) \

923 && 
	`°æí
 (
s1
Ë< ((
size_t
Ë(
n
))) \

924 || (
	`__buûtö_c⁄°™t_p
 (
s2
) \

925 && 
	`°æí
 (
s2
Ë< ((
size_t
Ë(
n
)))) \

926 ? 
	`°rcmp
 (
s1
, 
s2
Ë: 
	`°∫cmp
 (s1, s2, 
n
)))

	)

932 #i‡!
deföed
 
_HAVE_STRING_ARCH_°rc•n
 || deföed 
_FORCE_INLINES


933 #i‚de‡
_HAVE_STRING_ARCH_°rc•n


934 #i‡
__GNUC_PREREQ
 (3, 2)

935 
	#°rc•n
(
s
, 
ªje˘
) \

936 
__exãnsi⁄__
 \

937 ({ 
__r0
, 
__r1
, 
__r2
; \

938 (
	`__buûtö_c⁄°™t_p
 (
ªje˘
Ë&& 
	`__°rög2_1b±r_p
 (reject) \

939 ? ((
	`__buûtö_c⁄°™t_p
 (
s
Ë&& 
	`__°rög2_1b±r_p
 (s)) \

940 ? 
	`__buûtö_°rc•n
 (
s
, 
ªje˘
) \

941 : ((
__r0
 = ((
__c⁄°
 *Ë(
ªje˘
))[0], __r0 == '\0') \

942 ? 
	`°æí
 (
s
) \

943 : ((
__r1
 = ((
__c⁄°
 *Ë(
ªje˘
))[1], __r1 == '\0') \

944 ? 
	`__°rc•n_c1
 (
s
, 
__r0
) \

945 : ((
__r2
 = ((
__c⁄°
 *Ë(
ªje˘
))[2], __r2 == '\0') \

946 ? 
	`__°rc•n_c2
 (
s
, 
__r0
, 
__r1
) \

947 : (((
__c⁄°
 *Ë(
ªje˘
))[3] == '\0' \

948 ? 
	`__°rc•n_c3
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

949 : 
	`__buûtö_°rc•n
 (
s
, 
ªje˘
)))))) \

950 : 
	`__buûtö_°rc•n
 (
s
, 
ªje˘
)); })

	)

952 
	#°rc•n
(
s
, 
ªje˘
) \

953 
__exãnsi⁄__
 \

954 ({ 
__r0
, 
__r1
, 
__r2
; \

955 (
	`__buûtö_c⁄°™t_p
 (
ªje˘
Ë&& 
	`__°rög2_1b±r_p
 (reject) \

956 ? ((
__r0
 = ((
__c⁄°
 *Ë(
ªje˘
))[0], __r0 == '\0') \

957 ? 
	`°æí
 (
s
) \

958 : ((
__r1
 = ((
__c⁄°
 *Ë(
ªje˘
))[1], __r1 == '\0') \

959 ? 
	`__°rc•n_c1
 (
s
, 
__r0
) \

960 : ((
__r2
 = ((
__c⁄°
 *Ë(
ªje˘
))[2], __r2 == '\0') \

961 ? 
	`__°rc•n_c2
 (
s
, 
__r0
, 
__r1
) \

962 : (((
__c⁄°
 *Ë(
ªje˘
))[3] == '\0' \

963 ? 
	`__°rc•n_c3
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

964 : 
	`°rc•n
 (
s
, 
ªje˘
))))) \

965 : 
	`°rc•n
 (
s
, 
ªje˘
)); })

	)

969 
__STRING_INLINE
 
size_t
 
__°rc•n_c1
 (
__c⁄°
 *
__s
, 
__ªje˘
);

970 
__STRING_INLINE
 
size_t


971 
	$__°rc•n_c1
 (
__c⁄°
 *
__s
, 
__ªje˘
)

973 
size_t
 
__ªsu…
 = 0;

974 
__s
[
__ªsu…
] !'\0' && __s[__ªsu…] !
__ªje˘
)

975 ++
__ªsu…
;

976  
__ªsu…
;

977 
	}
}

979 
__STRING_INLINE
 
size_t
 
__°rc•n_c2
 (
__c⁄°
 *
__s
, 
__ªje˘1
,

980 
__ªje˘2
);

981 
__STRING_INLINE
 
size_t


982 
	$__°rc•n_c2
 (
__c⁄°
 *
__s
, 
__ªje˘1
, 
__ªje˘2
)

984 
size_t
 
__ªsu…
 = 0;

985 
__s
[
__ªsu…
] !'\0' && __s[__ªsu…] !
__ªje˘1


986 && 
__s
[
__ªsu…
] !
__ªje˘2
)

987 ++
__ªsu…
;

988  
__ªsu…
;

989 
	}
}

991 
__STRING_INLINE
 
size_t
 
__°rc•n_c3
 (
__c⁄°
 *
__s
, 
__ªje˘1
,

992 
__ªje˘2
, 
__ªje˘3
);

993 
__STRING_INLINE
 
size_t


994 
	$__°rc•n_c3
 (
__c⁄°
 *
__s
, 
__ªje˘1
, 
__ªje˘2
,

995 
__ªje˘3
)

997 
size_t
 
__ªsu…
 = 0;

998 
__s
[
__ªsu…
] !'\0' && __s[__ªsu…] !
__ªje˘1


999 && 
__s
[
__ªsu…
] !
__ªje˘2
 && __s[__ªsu…] !
__ªje˘3
)

1000 ++
__ªsu…
;

1001  
__ªsu…
;

1002 
	}
}

1008 #i‡!
deföed
 
_HAVE_STRING_ARCH_°r•n
 || deföed 
_FORCE_INLINES


1009 #i‚de‡
_HAVE_STRING_ARCH_°r•n


1010 #i‡
__GNUC_PREREQ
 (3, 2)

1011 
	#°r•n
(
s
, 
ac˚±
) \

1012 
__exãnsi⁄__
 \

1013 ({ 
__a0
, 
__a1
, 
__a2
; \

1014 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
Ë&& 
	`__°rög2_1b±r_p
 (accept) \

1015 ? ((
	`__buûtö_c⁄°™t_p
 (
s
Ë&& 
	`__°rög2_1b±r_p
 (s)) \

1016 ? 
	`__buûtö_°r•n
 (
s
, 
ac˚±
) \

1017 : ((
__a0
 = ((
__c⁄°
 *Ë(
ac˚±
))[0], __a0 == '\0') \

1018 ? ((Ë(
s
), 0) \

1019 : ((
__a1
 = ((
__c⁄°
 *Ë(
ac˚±
))[1], __a1 == '\0') \

1020 ? 
	`__°r•n_c1
 (
s
, 
__a0
) \

1021 : ((
__a2
 = ((
__c⁄°
 *Ë(
ac˚±
))[2], __a2 == '\0') \

1022 ? 
	`__°r•n_c2
 (
s
, 
__a0
, 
__a1
) \

1023 : (((
__c⁄°
 *Ë(
ac˚±
))[3] == '\0' \

1024 ? 
	`__°r•n_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1025 : 
	`__buûtö_°r•n
 (
s
, 
ac˚±
)))))) \

1026 : 
	`__buûtö_°r•n
 (
s
, 
ac˚±
)); })

	)

1028 
	#°r•n
(
s
, 
ac˚±
) \

1029 
__exãnsi⁄__
 \

1030 ({ 
__a0
, 
__a1
, 
__a2
; \

1031 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
Ë&& 
	`__°rög2_1b±r_p
 (accept) \

1032 ? ((
__a0
 = ((
__c⁄°
 *Ë(
ac˚±
))[0], __a0 == '\0') \

1033 ? ((Ë(
s
), 0) \

1034 : ((
__a1
 = ((
__c⁄°
 *Ë(
ac˚±
))[1], __a1 == '\0') \

1035 ? 
	`__°r•n_c1
 (
s
, 
__a0
) \

1036 : ((
__a2
 = ((
__c⁄°
 *Ë(
ac˚±
))[2], __a2 == '\0') \

1037 ? 
	`__°r•n_c2
 (
s
, 
__a0
, 
__a1
) \

1038 : (((
__c⁄°
 *Ë(
ac˚±
))[3] == '\0' \

1039 ? 
	`__°r•n_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1040 : 
	`°r•n
 (
s
, 
ac˚±
))))) \

1041 : 
	`°r•n
 (
s
, 
ac˚±
)); })

	)

1045 
__STRING_INLINE
 
size_t
 
__°r•n_c1
 (
__c⁄°
 *
__s
, 
__ac˚±
);

1046 
__STRING_INLINE
 
size_t


1047 
	$__°r•n_c1
 (
__c⁄°
 *
__s
, 
__ac˚±
)

1049 
size_t
 
__ªsu…
 = 0;

1051 
__s
[
__ªsu…
] =
__ac˚±
)

1052 ++
__ªsu…
;

1053  
__ªsu…
;

1054 
	}
}

1056 
__STRING_INLINE
 
size_t
 
__°r•n_c2
 (
__c⁄°
 *
__s
, 
__ac˚±1
,

1057 
__ac˚±2
);

1058 
__STRING_INLINE
 
size_t


1059 
	$__°r•n_c2
 (
__c⁄°
 *
__s
, 
__ac˚±1
, 
__ac˚±2
)

1061 
size_t
 
__ªsu…
 = 0;

1063 
__s
[
__ªsu…
] =
__ac˚±1
 || __s[__ªsu…] =
__ac˚±2
)

1064 ++
__ªsu…
;

1065  
__ªsu…
;

1066 
	}
}

1068 
__STRING_INLINE
 
size_t
 
__°r•n_c3
 (
__c⁄°
 *
__s
, 
__ac˚±1
,

1069 
__ac˚±2
, 
__ac˚±3
);

1070 
__STRING_INLINE
 
size_t


1071 
	$__°r•n_c3
 (
__c⁄°
 *
__s
, 
__ac˚±1
, 
__ac˚±2
, 
__ac˚±3
)

1073 
size_t
 
__ªsu…
 = 0;

1075 
__s
[
__ªsu…
] =
__ac˚±1
 || __s[__ªsu…] =
__ac˚±2


1076 || 
__s
[
__ªsu…
] =
__ac˚±3
)

1077 ++
__ªsu…
;

1078  
__ªsu…
;

1079 
	}
}

1084 #i‡!
deföed
 
_HAVE_STRING_ARCH_°Ωbrk
 || deföed 
_FORCE_INLINES


1085 #i‚de‡
_HAVE_STRING_ARCH_°Ωbrk


1086 #i‡
__GNUC_PREREQ
 (3, 2)

1087 
	#°Ωbrk
(
s
, 
ac˚±
) \

1088 
__exãnsi⁄__
 \

1089 ({ 
__a0
, 
__a1
, 
__a2
; \

1090 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
Ë&& 
	`__°rög2_1b±r_p
 (accept) \

1091 ? ((
	`__buûtö_c⁄°™t_p
 (
s
Ë&& 
	`__°rög2_1b±r_p
 (s)) \

1092 ? 
	`__buûtö_°Ωbrk
 (
s
, 
ac˚±
) \

1093 : ((
__a0
 = ((
__c⁄°
 *Ë(
ac˚±
))[0], __a0 == '\0') \

1094 ? ((Ë(
s
), (*Ë
NULL
) \

1095 : ((
__a1
 = ((
__c⁄°
 *Ë(
ac˚±
))[1], __a1 == '\0') \

1096 ? 
	`__buûtö_°rchr
 (
s
, 
__a0
) \

1097 : ((
__a2
 = ((
__c⁄°
 *Ë(
ac˚±
))[2], __a2 == '\0') \

1098 ? 
	`__°Ωbrk_c2
 (
s
, 
__a0
, 
__a1
) \

1099 : (((
__c⁄°
 *Ë(
ac˚±
))[3] == '\0' \

1100 ? 
	`__°Ωbrk_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1101 : 
	`__buûtö_°Ωbrk
 (
s
, 
ac˚±
)))))) \

1102 : 
	`__buûtö_°Ωbrk
 (
s
, 
ac˚±
)); })

	)

1104 
	#°Ωbrk
(
s
, 
ac˚±
) \

1105 
__exãnsi⁄__
 \

1106 ({ 
__a0
, 
__a1
, 
__a2
; \

1107 (
	`__buûtö_c⁄°™t_p
 (
ac˚±
Ë&& 
	`__°rög2_1b±r_p
 (accept) \

1108 ? ((
__a0
 = ((
__c⁄°
 *Ë(
ac˚±
))[0], __a0 == '\0') \

1109 ? ((Ë(
s
), (*Ë
NULL
) \

1110 : ((
__a1
 = ((
__c⁄°
 *Ë(
ac˚±
))[1], __a1 == '\0') \

1111 ? 
	`°rchr
 (
s
, 
__a0
) \

1112 : ((
__a2
 = ((
__c⁄°
 *Ë(
ac˚±
))[2], __a2 == '\0') \

1113 ? 
	`__°Ωbrk_c2
 (
s
, 
__a0
, 
__a1
) \

1114 : (((
__c⁄°
 *Ë(
ac˚±
))[3] == '\0' \

1115 ? 
	`__°Ωbrk_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1116 : 
	`°Ωbrk
 (
s
, 
ac˚±
))))) \

1117 : 
	`°Ωbrk
 (
s
, 
ac˚±
)); })

	)

1121 
__STRING_INLINE
 *
__°Ωbrk_c2
 (
__c⁄°
 *
__s
, 
__ac˚±1
,

1122 
__ac˚±2
);

1123 
__STRING_INLINE
 *

1124 
	$__°Ωbrk_c2
 (
__c⁄°
 *
__s
, 
__ac˚±1
, 
__ac˚±2
)

1127 *
__s
 !'\0' && *__†!
__ac˚±1
 && *__†!
__ac˚±2
)

1128 ++
__s
;

1129  *
__s
 ='\0' ? 
NULL
 : (*Ë(
size_t
) __s;

1130 
	}
}

1132 
__STRING_INLINE
 *
__°Ωbrk_c3
 (
__c⁄°
 *
__s
, 
__ac˚±1
,

1133 
__ac˚±2
, 
__ac˚±3
);

1134 
__STRING_INLINE
 *

1135 
	$__°Ωbrk_c3
 (
__c⁄°
 *
__s
, 
__ac˚±1
, 
__ac˚±2
,

1136 
__ac˚±3
)

1139 *
__s
 !'\0' && *__†!
__ac˚±1
 && *__†!
__ac˚±2


1140 && *
__s
 !
__ac˚±3
)

1141 ++
__s
;

1142  *
__s
 ='\0' ? 
NULL
 : (*Ë(
size_t
) __s;

1143 
	}
}

1149 #i‡!
deföed
 
_HAVE_STRING_ARCH_°r°r
 && !
__GNUC_PREREQ
 (2, 97)

1150 
	#°r°r
(
hay°ack
, 
√edÀ
) \

1151 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
√edÀ
Ë&& 
	`__°rög2_1b±r_p
 (needle) \

1152 ? (((
__c⁄°
 *Ë(
√edÀ
))[0] == '\0' \

1153 ? (*Ë(
size_t
Ë(
hay°ack
) \

1154 : (((
__c⁄°
 *Ë(
√edÀ
))[1] == '\0' \

1155 ? 
	`°rchr
 (
hay°ack
, \

1156 ((
__c⁄°
 *Ë(
√edÀ
))[0]) \

1157 : 
	`°r°r
 (
hay°ack
, 
√edÀ
))) \

1158 : 
	`°r°r
 (
hay°ack
, 
√edÀ
)))

	)

1162 #i‡!
deföed
 
_HAVE_STRING_ARCH_°πok_r
 || deföed 
_FORCE_INLINES


1163 #i‚de‡
_HAVE_STRING_ARCH_°πok_r


1164 
	#__°πok_r
(
s
, 
£p
, 
√xç
) \

1165 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
£p
Ë&& 
	`__°rög2_1b±r_p
 (sep) \

1166 ? (((
__c⁄°
 *Ë(
£p
))[0] != '\0' \

1167 && ((
__c⁄°
 *Ë(
£p
))[1] == '\0' \

1168 ? 
	`__°πok_r_1c
 (
s
, ((
__c⁄°
 *Ë(
£p
))[0], 
√xç
) \

1169 : 
	`__°πok_r
 (
s
, 
£p
, 
√xç
)) \

1170 : 
	`__°πok_r
 (
s
, 
£p
, 
√xç
)))

	)

1173 
__STRING_INLINE
 *
__°πok_r_1c
 (*
__s
, 
__£p
, **
__√xç
);

1174 
__STRING_INLINE
 *

1175 
	$__°πok_r_1c
 (*
__s
, 
__£p
, **
__√xç
)

1177 *
__ªsu…
;

1178 i‡(
__s
 =
NULL
)

1179 
__s
 = *
__√xç
;

1180 *
__s
 =
__£p
)

1181 ++
__s
;

1182 
__ªsu…
 = 
NULL
;

1183 i‡(*
__s
 != '\0')

1185 
__ªsu…
 = 
__s
++;

1186 *
__s
 != '\0')

1187 i‡(*
__s
++ =
__£p
)

1189 
__s
[-1] = '\0';

1192 *
__√xç
 = 
__s
;

1194  
__ªsu…
;

1195 
	}
}

1196 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


1197 
	#°πok_r
(
s
, 
£p
, 
√xç
Ë
	`__°πok_r
 (s, sï,Çexç)

	)

1202 #i‡!
deföed
 
_HAVE_STRING_ARCH_°r£p
 || deföed 
_FORCE_INLINES


1203 #i‚de‡
_HAVE_STRING_ARCH_°r£p


1205 *
__°r£p_g
 (**
__°rögp
, 
__c⁄°
 *
__dñim
);

1206 
	#__°r£p
(
s
, 
ªje˘
) \

1207 
__exãnsi⁄__
 \

1208 ({ 
__r0
, 
__r1
, 
__r2
; \

1209 (
	`__buûtö_c⁄°™t_p
 (
ªje˘
Ë&& 
	`__°rög2_1b±r_p
 (reject) \

1210 && (
__r0
 = ((
__c⁄°
 *Ë(
ªje˘
))[0], \

1211 ((
__c⁄°
 *Ë(
ªje˘
))[0] != '\0') \

1212 ? ((
__r1
 = ((
__c⁄°
 *Ë(
ªje˘
))[1], \

1213 ((
__c⁄°
 *Ë(
ªje˘
))[1] == '\0') \

1214 ? 
	`__°r£p_1c
 (
s
, 
__r0
) \

1215 : ((
__r2
 = ((
__c⁄°
 *Ë(
ªje˘
))[2], __r2 == '\0') \

1216 ? 
	`__°r£p_2c
 (
s
, 
__r0
, 
__r1
) \

1217 : (((
__c⁄°
 *Ë(
ªje˘
))[3] == '\0' \

1218 ? 
	`__°r£p_3c
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

1219 : 
	`__°r£p_g
 (
s
, 
ªje˘
)))) \

1220 : 
	`__°r£p_g
 (
s
, 
ªje˘
)); })

	)

1223 
__STRING_INLINE
 *
__°r£p_1c
 (**
__s
, 
__ªje˘
);

1224 
__STRING_INLINE
 *

1225 
	$__°r£p_1c
 (**
__s
, 
__ªje˘
)

1227 *
__ªtvÆ
 = *
__s
;

1228 i‡(
__ªtvÆ
 !
NULL
 && (*
__s
 = 
	`°rchr
 (__ªtvÆ, 
__ªje˘
)) != NULL)

1229 *(*
__s
)++ = '\0';

1230  
__ªtvÆ
;

1231 
	}
}

1233 
__STRING_INLINE
 *
__°r£p_2c
 (**
__s
, 
__ªje˘1
, 
__ªje˘2
);

1234 
__STRING_INLINE
 *

1235 
	$__°r£p_2c
 (**
__s
, 
__ªje˘1
, 
__ªje˘2
)

1237 *
__ªtvÆ
 = *
__s
;

1238 i‡(
__ªtvÆ
 !
NULL
)

1240 *
__˝
 = 
__ªtvÆ
;

1243 i‡(*
__˝
 == '\0')

1245 
__˝
 = 
NULL
;

1248 i‡(*
__˝
 =
__ªje˘1
 || *__˝ =
__ªje˘2
)

1250 *
__˝
++ = '\0';

1253 ++
__˝
;

1255 *
__s
 = 
__˝
;

1257  
__ªtvÆ
;

1258 
	}
}

1260 
__STRING_INLINE
 *
__°r£p_3c
 (**
__s
, 
__ªje˘1
, 
__ªje˘2
,

1261 
__ªje˘3
);

1262 
__STRING_INLINE
 *

1263 
	$__°r£p_3c
 (**
__s
, 
__ªje˘1
, 
__ªje˘2
, 
__ªje˘3
)

1265 *
__ªtvÆ
 = *
__s
;

1266 i‡(
__ªtvÆ
 !
NULL
)

1268 *
__˝
 = 
__ªtvÆ
;

1271 i‡(*
__˝
 == '\0')

1273 
__˝
 = 
NULL
;

1276 i‡(*
__˝
 =
__ªje˘1
 || *__˝ =
__ªje˘2
 || *__˝ =
__ªje˘3
)

1278 *
__˝
++ = '\0';

1281 ++
__˝
;

1283 *
__s
 = 
__˝
;

1285  
__ªtvÆ
;

1286 
	}
}

1287 #ifde‡
__USE_BSD


1288 
	#°r£p
(
s
, 
ªje˘
Ë
	`__°r£p
 (s,Ñeje˘)

	)

1295 #ifde‡
__USE_MISC


1297 #i‡!
deföed
 
_HAVE_STRING_ARCH_°rdup
 || !deföed 
_HAVE_STRING_ARCH_°∫dup


1298 
	#__√ed_mÆloc_™d_ˇŒoc


	)

1299 
	~<°dlib.h
>

1302 #i‚de‡
_HAVE_STRING_ARCH_°rdup


1304 *
	$__°rdup
 (
__c⁄°
 *
__°rög
Ë
__THROW
 
__©åibuã_mÆloc__
;

1305 
	#__°rdup
(
s
) \

1306 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
s
Ë&& 
	`__°rög2_1b±r_p
 (s) \

1307 ? (((
__c⁄°
 *Ë(
s
))[0] == '\0' \

1308 ? (*Ë
	`ˇŒoc
 (1, 1) \

1309 : ({ 
size_t
 
__Àn
 = 
	`°æí
 (
s
) + 1; \

1310 *
__ªtvÆ
 = (*Ë
	`mÆloc
 (
__Àn
); \

1311 i‡(
__ªtvÆ
 !
NULL
) \

1312 
__ªtvÆ
 = (*Ë
	`mem˝y
 (__ªtvÆ, 
s
, 
__Àn
); \

1313 
__ªtvÆ
; 
	}
})) \

1314 : 
	`__°rdup
 (
s
)))

	)

1316 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


1317 
	#°rdup
(
s
Ë
	`__°rdup
 (s)

	)

1321 #i‚de‡
_HAVE_STRING_ARCH_°∫dup


1323 *
	$__°∫dup
 (
__c⁄°
 *
__°rög
, 
size_t
 
__n
)

1324 
__THROW
 
__©åibuã_mÆloc__
;

1325 
	#__°∫dup
(
s
, 
n
) \

1326 (
	`__exãnsi⁄__
 (
	`__buûtö_c⁄°™t_p
 (
s
Ë&& 
	`__°rög2_1b±r_p
 (s) \

1327 ? (((
__c⁄°
 *Ë(
s
))[0] == '\0' \

1328 ? (*Ë
	`ˇŒoc
 (1, 1) \

1329 : ({ 
size_t
 
__Àn
 = 
	`°æí
 (
s
) + 1; \

1330 
size_t
 
__n
 = (
n
); \

1331 *
__ªtvÆ
; \

1332 i‡(
__n
 < 
__Àn
) \

1333 
__Àn
 = 
__n
 + 1; \

1334 
__ªtvÆ
 = (*Ë
	`mÆloc
 (
__Àn
); \

1335 i‡(
__ªtvÆ
 !
NULL
) \

1337 
__ªtvÆ
[
__Àn
 - 1] = '\0'; \

1338 
__ªtvÆ
 = (*Ë
	`mem˝y
 (__ªtvÆ, 
s
, \

1339 
__Àn
 - 1); \

1341 
__ªtvÆ
; 
	}
})) \

1342 : 
	`__°∫dup
 (
s
, 
n
)))

	)

1344 #ifde‡
__USE_GNU


1345 
	#°∫dup
(
s
, 
n
Ë
	`__°∫dup
 (s,Ç)

	)

1351 #i‚de‡
_FORCE_INLINES


1352 #unde‡
__STRING_INLINE


	@/usr/include/bits/string3.h

19 #i‚de‡
_STRING_H


26 #unde‡
mem˝y


27 #unde‡
memmove


28 #unde‡
mem£t


29 #unde‡
°rˇt


30 #unde‡
°r˝y


31 #unde‡
°∫ˇt


32 #unde‡
°∫˝y


33 #ifde‡
__USE_GNU


34 #unde‡
memp˝y


35 #unde‡
°p˝y


37 #ifde‡
__USE_BSD


38 #unde‡
bc›y


39 #unde‡
bzîo


43 
	#mem˝y
(
de°
, 
§c
, 
Àn
) \

44 ((
	`__bos0
 (
de°
Ë!(
size_t
) -1) \

45 ? 
	`__buûtö___mem˝y_chk
 (
de°
, 
§c
, 
Àn
, 
	`__bos0
 (dest)) \

46 : 
	`__mem˝y_ichk
 (
de°
, 
§c
, 
Àn
))

	)

47 
__Æways_ölöe
 *

48 
__NTH
 (
	$__mem˝y_ichk
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
,

49 
size_t
 
__Àn
))

51  
	`__buûtö___mem˝y_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos0
 (__dest));

52 
	}
}

55 
	#memmove
(
de°
, 
§c
, 
Àn
) \

56 ((
	`__bos0
 (
de°
Ë!(
size_t
) -1) \

57 ? 
	`__buûtö___memmove_chk
 (
de°
, 
§c
, 
Àn
, 
	`__bos0
 (dest)) \

58 : 
	`__memmove_ichk
 (
de°
, 
§c
, 
Àn
))

	)

59 
__Æways_ölöe
 *

60 
__NTH
 (
	$__memmove_ichk
 (*
__de°
, 
__c⁄°
 *
__§c
, 
size_t
 
__Àn
))

62  
	`__buûtö___memmove_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos0
 (__dest));

63 
	}
}

66 #ifde‡
__USE_GNU


67 
	#memp˝y
(
de°
, 
§c
, 
Àn
) \

68 ((
	`__bos0
 (
de°
Ë!(
size_t
) -1) \

69 ? 
	`__buûtö___memp˝y_chk
 (
de°
, 
§c
, 
Àn
, 
	`__bos0
 (dest)) \

70 : 
	`__memp˝y_ichk
 (
de°
, 
§c
, 
Àn
))

	)

71 
__Æways_ölöe
 *

72 
__NTH
 (
	$__memp˝y_ichk
 (*
__ª°ri˘
 
__de°
,

73 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
))

75  
	`__buûtö___memp˝y_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos0
 (__dest));

76 
	}
}

85 
__w¨nde˛
 (
__w¨n_mem£t_zîo_Àn
,

87 
	#mem£t
(
de°
, 
ch
, 
Àn
) \

88 (
	`__buûtö_c⁄°™t_p
 (
Àn
) && (len) == 0 \

89 ? (
	`__w¨n_mem£t_zîo_Àn
 (), (Ë(
ch
), (Ë(
Àn
), (*Ë(
de°
)) \

90 : ((
	`__bos0
 (
de°
Ë!(
size_t
) -1) \

91 ? 
	`__buûtö___mem£t_chk
 (
de°
, 
ch
, 
Àn
, 
	`__bos0
 (dest)) \

92 : 
	`__mem£t_ichk
 (
de°
, 
ch
, 
Àn
)))

	)

93 
__Æways_ölöe
 *

94 
__NTH
 (
	$__mem£t_ichk
 (*
__de°
, 
__ch
, 
size_t
 
__Àn
))

96  
	`__buûtö___mem£t_chk
 (
__de°
, 
__ch
, 
__Àn
, 
	`__bos0
 (__dest));

97 
	}
}

99 #ifde‡
__USE_BSD


100 
	#bc›y
(
§c
, 
de°
, 
Àn
) (() \

101 ((
	`__bos0
 (
de°
Ë!(
size_t
) -1) \

102 ? 
	`__buûtö___memmove_chk
 (
de°
, 
§c
, 
Àn
, 
	`__bos0
 (dest)) \

103 : 
	`__memmove_ichk
 (
de°
, 
§c
, 
Àn
)))

	)

104 
	#bzîo
(
de°
, 
Àn
) (() \

105 ((
	`__bos0
 (
de°
Ë!(
size_t
) -1) \

106 ? 
	`__buûtö___mem£t_chk
 (
de°
, '\0', 
Àn
, 
	`__bos0
 (dest)) \

107 : 
	`__mem£t_ichk
 (
de°
, '\0', 
Àn
)))

	)

111 
	#°r˝y
(
de°
, 
§c
) \

112 ((
	`__bos
 (
de°
Ë!(
size_t
) -1) \

113 ? 
	`__buûtö___°r˝y_chk
 (
de°
, 
§c
, 
	`__bos
 (dest)) \

114 : 
	`__°r˝y_ichk
 (
de°
, 
§c
))

	)

115 
__Æways_ölöe
 *

116 
__NTH
 (
	$__°r˝y_ichk
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
))

118  
	`__buûtö___°r˝y_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__dest));

119 
	}
}

122 #ifde‡
__USE_GNU


123 
	#°p˝y
(
de°
, 
§c
) \

124 ((
	`__bos
 (
de°
Ë!(
size_t
) -1) \

125 ? 
	`__buûtö___°p˝y_chk
 (
de°
, 
§c
, 
	`__bos
 (dest)) \

126 : 
	`__°p˝y_ichk
 (
de°
, 
§c
))

	)

127 
__Æways_ölöe
 *

128 
__NTH
 (
	$__°p˝y_ichk
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
))

130  
	`__buûtö___°p˝y_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__dest));

131 
	}
}

135 
	#°∫˝y
(
de°
, 
§c
, 
Àn
) \

136 ((
	`__bos
 (
de°
Ë!(
size_t
) -1) \

137 ? 
	`__buûtö___°∫˝y_chk
 (
de°
, 
§c
, 
Àn
, 
	`__bos
 (dest)) \

138 : 
	`__°∫˝y_ichk
 (
de°
, 
§c
, 
Àn
))

	)

139 
__Æways_ölöe
 *

140 
__NTH
 (
	$__°∫˝y_ichk
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
,

141 
size_t
 
__Àn
))

143  
	`__buûtö___°∫˝y_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos
 (__dest));

144 
	}
}

148 *
	$__°≤˝y_chk
 (*
__de°
, 
__c⁄°
 *
__§c
, 
size_t
 
__n
,

149 
size_t
 
__de°Àn
Ë
__THROW
;

150 *
	`__REDIRECT_NTH
 (
__°≤˝y_Æüs
, (*
__de°
,

151 
__c⁄°
 *
__§c
,

152 
size_t
 
__n
), 
°≤˝y
);

154 
__exã∫_Æways_ölöe
 *

155 
	`__NTH
 (
	$°≤˝y
 (*
__de°
, 
__c⁄°
 *
__§c
, 
size_t
 
__n
))

157 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1

158 && (!
	`__buûtö_c⁄°™t_p
 (
__n
Ë|| __¿<
	`__bos
 (
__de°
)))

159  
	`__°≤˝y_chk
 (
__de°
, 
__§c
, 
__n
, 
	`__bos
 (__dest));

160  
	`__°≤˝y_Æüs
 (
__de°
, 
__§c
, 
__n
);

161 
	}
}

164 
	#°rˇt
(
de°
, 
§c
) \

165 ((
	`__bos
 (
de°
Ë!(
size_t
) -1) \

166 ? 
	`__buûtö___°rˇt_chk
 (
de°
, 
§c
, 
	`__bos
 (dest)) \

167 : 
	`__°rˇt_ichk
 (
de°
, 
§c
))

	)

168 
__Æways_ölöe
 *

169 
__NTH
 (
	$__°rˇt_ichk
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
))

171  
	`__buûtö___°rˇt_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__dest));

172 
	}
}

175 
	#°∫ˇt
(
de°
, 
§c
, 
Àn
) \

176 ((
	`__bos
 (
de°
Ë!(
size_t
) -1) \

177 ? 
	`__buûtö___°∫ˇt_chk
 (
de°
, 
§c
, 
Àn
, 
	`__bos
 (dest)) \

178 : 
	`__°∫ˇt_ichk
 (
de°
, 
§c
, 
Àn
))

	)

179 
__Æways_ölöe
 *

180 
__NTH
 (
	$__°∫ˇt_ichk
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
,

181 
size_t
 
__Àn
))

183  
	`__buûtö___°∫ˇt_chk
 (
__de°
, 
__§c
, 
__Àn
, 
	`__bos
 (__dest));

184 
	}
}

	@/usr/include/bits/sys_errlist.h

20 #i‚de‡
_STDIO_H


26 #ifde‡ 
__USE_BSD


27 
sys_√º
;

28 
__c⁄°
 *__c⁄° 
sys_îæi°
[];

30 #ifde‡ 
__USE_GNU


31 
_sys_√º
;

32 
__c⁄°
 *__c⁄° 
_sys_îæi°
[];

	@/usr/include/bits/termios.h

21 #i‚de‡
_TERMIOS_H


25 
	tcc_t
;

26 
	t•ìd_t
;

27 
	ttcÊag_t
;

29 
	#NCCS
 32

	)

30 
	sãrmios


32 
tcÊag_t
 
	mc_iÊag
;

33 
tcÊag_t
 
	mc_oÊag
;

34 
tcÊag_t
 
	mc_cÊag
;

35 
tcÊag_t
 
	mc_lÊag
;

36 
cc_t
 
	mc_löe
;

37 
cc_t
 
	mc_cc
[
NCCS
];

38 
•ìd_t
 
	mc_i•ìd
;

39 
•ìd_t
 
	mc_o•ìd
;

40 
	#_HAVE_STRUCT_TERMIOS_C_ISPEED
 1

	)

41 
	#_HAVE_STRUCT_TERMIOS_C_OSPEED
 1

	)

45 
	#VINTR
 0

	)

46 
	#VQUIT
 1

	)

47 
	#VERASE
 2

	)

48 
	#VKILL
 3

	)

49 
	#VEOF
 4

	)

50 
	#VTIME
 5

	)

51 
	#VMIN
 6

	)

52 
	#VSWTC
 7

	)

53 
	#VSTART
 8

	)

54 
	#VSTOP
 9

	)

55 
	#VSUSP
 10

	)

56 
	#VEOL
 11

	)

57 
	#VREPRINT
 12

	)

58 
	#VDISCARD
 13

	)

59 
	#VWERASE
 14

	)

60 
	#VLNEXT
 15

	)

61 
	#VEOL2
 16

	)

64 
	#IGNBRK
 0000001

	)

65 
	#BRKINT
 0000002

	)

66 
	#IGNPAR
 0000004

	)

67 
	#PARMRK
 0000010

	)

68 
	#INPCK
 0000020

	)

69 
	#ISTRIP
 0000040

	)

70 
	#INLCR
 0000100

	)

71 
	#IGNCR
 0000200

	)

72 
	#ICRNL
 0000400

	)

73 
	#IUCLC
 0001000

	)

74 
	#IXON
 0002000

	)

75 
	#IXANY
 0004000

	)

76 
	#IXOFF
 0010000

	)

77 
	#IMAXBEL
 0020000

	)

78 
	#IUTF8
 0040000

	)

81 
	#OPOST
 0000001

	)

82 
	#OLCUC
 0000002

	)

83 
	#ONLCR
 0000004

	)

84 
	#OCRNL
 0000010

	)

85 
	#ONOCR
 0000020

	)

86 
	#ONLRET
 0000040

	)

87 
	#OFILL
 0000100

	)

88 
	#OFDEL
 0000200

	)

89 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


90 
	#NLDLY
 0000400

	)

91 
	#NL0
 0000000

	)

92 
	#NL1
 0000400

	)

93 
	#CRDLY
 0003000

	)

94 
	#CR0
 0000000

	)

95 
	#CR1
 0001000

	)

96 
	#CR2
 0002000

	)

97 
	#CR3
 0003000

	)

98 
	#TABDLY
 0014000

	)

99 
	#TAB0
 0000000

	)

100 
	#TAB1
 0004000

	)

101 
	#TAB2
 0010000

	)

102 
	#TAB3
 0014000

	)

103 
	#BSDLY
 0020000

	)

104 
	#BS0
 0000000

	)

105 
	#BS1
 0020000

	)

106 
	#FFDLY
 0100000

	)

107 
	#FF0
 0000000

	)

108 
	#FF1
 0100000

	)

111 
	#VTDLY
 0040000

	)

112 
	#VT0
 0000000

	)

113 
	#VT1
 0040000

	)

115 #ifde‡
__USE_MISC


116 
	#XTABS
 0014000

	)

120 #ifde‡
__USE_MISC


121 
	#CBAUD
 0010017

	)

123 
	#B0
 0000000

	)

124 
	#B50
 0000001

	)

125 
	#B75
 0000002

	)

126 
	#B110
 0000003

	)

127 
	#B134
 0000004

	)

128 
	#B150
 0000005

	)

129 
	#B200
 0000006

	)

130 
	#B300
 0000007

	)

131 
	#B600
 0000010

	)

132 
	#B1200
 0000011

	)

133 
	#B1800
 0000012

	)

134 
	#B2400
 0000013

	)

135 
	#B4800
 0000014

	)

136 
	#B9600
 0000015

	)

137 
	#B19200
 0000016

	)

138 
	#B38400
 0000017

	)

139 #ifde‡
__USE_MISC


140 
	#EXTA
 
B19200


	)

141 
	#EXTB
 
B38400


	)

143 
	#CSIZE
 0000060

	)

144 
	#CS5
 0000000

	)

145 
	#CS6
 0000020

	)

146 
	#CS7
 0000040

	)

147 
	#CS8
 0000060

	)

148 
	#CSTOPB
 0000100

	)

149 
	#CREAD
 0000200

	)

150 
	#PARENB
 0000400

	)

151 
	#PARODD
 0001000

	)

152 
	#HUPCL
 0002000

	)

153 
	#CLOCAL
 0004000

	)

154 #ifde‡
__USE_MISC


155 
	#CBAUDEX
 0010000

	)

157 
	#B57600
 0010001

	)

158 
	#B115200
 0010002

	)

159 
	#B230400
 0010003

	)

160 
	#B460800
 0010004

	)

161 
	#B500000
 0010005

	)

162 
	#B576000
 0010006

	)

163 
	#B921600
 0010007

	)

164 
	#B1000000
 0010010

	)

165 
	#B1152000
 0010011

	)

166 
	#B1500000
 0010012

	)

167 
	#B2000000
 0010013

	)

168 
	#B2500000
 0010014

	)

169 
	#B3000000
 0010015

	)

170 
	#B3500000
 0010016

	)

171 
	#B4000000
 0010017

	)

172 
	#__MAX_BAUD
 
B4000000


	)

173 #ifde‡
__USE_MISC


174 
	#CIBAUD
 002003600000

	)

175 
	#CMSPAR
 010000000000

	)

176 
	#CRTSCTS
 020000000000

	)

180 
	#ISIG
 0000001

	)

181 
	#ICANON
 0000002

	)

182 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


183 
	#XCASE
 0000004

	)

185 
	#ECHO
 0000010

	)

186 
	#ECHOE
 0000020

	)

187 
	#ECHOK
 0000040

	)

188 
	#ECHONL
 0000100

	)

189 
	#NOFLSH
 0000200

	)

190 
	#TOSTOP
 0000400

	)

191 #ifde‡
__USE_MISC


192 
	#ECHOCTL
 0001000

	)

193 
	#ECHOPRT
 0002000

	)

194 
	#ECHOKE
 0004000

	)

195 
	#FLUSHO
 0010000

	)

196 
	#PENDIN
 0040000

	)

198 
	#IEXTEN
 0100000

	)

201 
	#TCOOFF
 0

	)

202 
	#TCOON
 1

	)

203 
	#TCIOFF
 2

	)

204 
	#TCION
 3

	)

207 
	#TCIFLUSH
 0

	)

208 
	#TCOFLUSH
 1

	)

209 
	#TCIOFLUSH
 2

	)

212 
	#TCSANOW
 0

	)

213 
	#TCSADRAIN
 1

	)

214 
	#TCSAFLUSH
 2

	)

217 
	#_IOT_ãrmios
 \

218 
	`_IOT
 (
	`_IOTS
 (
cÊag_t
), 4, _IOTS (
cc_t
), 
NCCS
, _IOTS (
•ìd_t
), 2)

	)

	@/usr/include/bits/time.h

24 #i‚de‡
__√ed_timevÆ


25 #i‚de‡
_BITS_TIME_H


26 
	#_BITS_TIME_H
 1

	)

34 
	#CLOCKS_PER_SEC
 1000000l

	)

36 #i‡!
deföed
 
__STRICT_ANSI__
 && !deföed 
__USE_XOPEN2K


39 
	~<bôs/ty≥s.h
>

40 
__sysc⁄f
 ();

41 
	#CLK_TCK
 ((
__˛ock_t
Ë
	`__sysc⁄f
 (2)Ë

	)

44 #ifde‡
__USE_POSIX199309


46 
	#CLOCK_REALTIME
 0

	)

48 
	#CLOCK_MONOTONIC
 1

	)

50 
	#CLOCK_PROCESS_CPUTIME_ID
 2

	)

52 
	#CLOCK_THREAD_CPUTIME_ID
 3

	)

55 
	#TIMER_ABSTIME
 1

	)

61 #ifde‡
__√ed_timevÆ


62 #unde‡
__√ed_timevÆ


63 #i‚de‡
_STRUCT_TIMEVAL


64 
	#_STRUCT_TIMEVAL
 1

	)

65 
	~<bôs/ty≥s.h
>

69 
	stimevÆ


71 
__time_t
 
	mtv_£c
;

72 
__su£c⁄ds_t
 
	mtv_u£c
;

	@/usr/include/bits/types.h

24 #i‚def 
_BITS_TYPES_H


25 
	#_BITS_TYPES_H
 1

	)

27 
	~<„©uªs.h
>

28 
	~<bôs/w‹dsize.h
>

30 
	#__√ed_size_t


	)

31 
	~<°ddef.h
>

34 
	t__u_ch¨
;

35 
	t__u_sh‹t
;

36 
	t__u_öt
;

37 
	t__u_l⁄g
;

40 sig√d 
	t__öt8_t
;

41 
	t__uöt8_t
;

42 sig√d 
	t__öt16_t
;

43 
	t__uöt16_t
;

44 sig√d 
	t__öt32_t
;

45 
	t__uöt32_t
;

46 #i‡
__WORDSIZE
 == 64

47 sig√d 
	t__öt64_t
;

48 
	t__uöt64_t
;

49 #ñi‡
deföed
 
__GLIBC_HAVE_LONG_LONG


50 
__exãnsi⁄__
 sig√d 
	t__öt64_t
;

51 
__exãnsi⁄__
 
	t__uöt64_t
;

55 #i‡
__WORDSIZE
 == 64

56 
	t__quad_t
;

57 
	t__u_quad_t
;

58 #ñi‡
deföed
 
__GLIBC_HAVE_LONG_LONG


59 
__exãnsi⁄__
 
	t__quad_t
;

60 
__exãnsi⁄__
 
	t__u_quad_t
;

64 
	m__vÆ
[2];

65 } 
	t__quad_t
;

68 
__u_l⁄g
 
	m__vÆ
[2];

69 } 
	t__u_quad_t
;

102 
	#__S16_TYPE
 

	)

103 
	#__U16_TYPE
 

	)

104 
	#__S32_TYPE
 

	)

105 
	#__U32_TYPE
 

	)

106 
	#__SLONGWORD_TYPE
 

	)

107 
	#__ULONGWORD_TYPE
 

	)

108 #i‡
__WORDSIZE
 == 32

109 
	#__SQUAD_TYPE
 
__quad_t


	)

110 
	#__UQUAD_TYPE
 
__u_quad_t


	)

111 
	#__SWORD_TYPE
 

	)

112 
	#__UWORD_TYPE
 

	)

113 
	#__SLONG32_TYPE
 

	)

114 
	#__ULONG32_TYPE
 

	)

115 
	#__S64_TYPE
 
__quad_t


	)

116 
	#__U64_TYPE
 
__u_quad_t


	)

119 
	#__STD_TYPE
 
__exãnsi⁄__
 

	)

120 #ñi‡
__WORDSIZE
 == 64

121 
	t__SQUAD_TYPE
 

	)

122 
	t__UQUAD_TYPE
 

	)

123 
	t__SWORD_TYPE
 

	)

124 
	t__UWORD_TYPE
 

	)

125 
	t__SLONG32_TYPE
 

	)

126 
	t__ULONG32_TYPE
 

	)

127 
	t__S64_TYPE
 

	)

128 
	t__U64_TYPE
 

	)

130 
	t__STD_TYPE
 

	)

134 
	~<bôs/ty≥sizes.h
>

137 
__STD_TYPE
 
	t__DEV_T_TYPE
 
	t__dev_t
;

138 
__STD_TYPE
 
__UID_T_TYPE
 
	g__uid_t
;

139 
__STD_TYPE
 
__GID_T_TYPE
 
	g__gid_t
;

140 
__STD_TYPE
 
__INO_T_TYPE
 
	g__öo_t
;

141 
__STD_TYPE
 
__INO64_T_TYPE
 
	g__öo64_t
;

142 
__STD_TYPE
 
__MODE_T_TYPE
 
	g__mode_t
;

143 
__STD_TYPE
 
__NLINK_T_TYPE
 
	g__∆ök_t
;

144 
__STD_TYPE
 
__OFF_T_TYPE
 
	g__off_t
;

145 
__STD_TYPE
 
__OFF64_T_TYPE
 
	g__off64_t
;

146 
__STD_TYPE
 
__PID_T_TYPE
 
	g__pid_t
;

147 
__STD_TYPE
 
__FSID_T_TYPE
 
	g__fsid_t
;

148 
__STD_TYPE
 
__CLOCK_T_TYPE
 
	g__˛ock_t
;

149 
__STD_TYPE
 
__RLIM_T_TYPE
 
	g__æim_t
;

150 
__STD_TYPE
 
__RLIM64_T_TYPE
 
	g__æim64_t
;

151 
__STD_TYPE
 
__ID_T_TYPE
 
	g__id_t
;

152 
__STD_TYPE
 
__TIME_T_TYPE
 
	g__time_t
;

153 
__STD_TYPE
 
__USECONDS_T_TYPE
 
	g__u£c⁄ds_t
;

154 
__STD_TYPE
 
__SUSECONDS_T_TYPE
 
	g__su£c⁄ds_t
;

156 
__STD_TYPE
 
__DADDR_T_TYPE
 
	g__daddr_t
;

157 
__STD_TYPE
 
__SWBLK_T_TYPE
 
	g__swblk_t
;

158 
__STD_TYPE
 
__KEY_T_TYPE
 
	g__key_t
;

161 
__STD_TYPE
 
__CLOCKID_T_TYPE
 
	g__˛ockid_t
;

164 
__STD_TYPE
 
__TIMER_T_TYPE
 
	g__timî_t
;

167 
__STD_TYPE
 
__BLKSIZE_T_TYPE
 
	g__blksize_t
;

172 
__STD_TYPE
 
__BLKCNT_T_TYPE
 
	g__blk˙t_t
;

173 
__STD_TYPE
 
__BLKCNT64_T_TYPE
 
	g__blk˙t64_t
;

176 
__STD_TYPE
 
__FSBLKCNT_T_TYPE
 
	g__fsblk˙t_t
;

177 
__STD_TYPE
 
__FSBLKCNT64_T_TYPE
 
	g__fsblk˙t64_t
;

180 
__STD_TYPE
 
__FSFILCNT_T_TYPE
 
	g__fsfû˙t_t
;

181 
__STD_TYPE
 
__FSFILCNT64_T_TYPE
 
	g__fsfû˙t64_t
;

183 
__STD_TYPE
 
__SSIZE_T_TYPE
 
	g__ssize_t
;

187 
__off64_t
 
	t__loff_t
;

188 
__quad_t
 *
	t__qaddr_t
;

189 *
	t__ˇddr_t
;

192 
__STD_TYPE
 
__SWORD_TYPE
 
	g__öçå_t
;

195 
__STD_TYPE
 
__U32_TYPE
 
	g__sockÀn_t
;

198 #unde‡
__STD_TYPE


	@/usr/include/bits/uio.h

19 #i‡!
deföed
 
_SYS_UIO_H
 && !deföed 
_FCNTL_H


23 #i‚de‡
_BITS_UIO_H


24 
	#_BITS_UIO_H
 1

	)

26 
	~<sys/ty≥s.h
>

40 
	#UIO_MAXIOV
 1024

	)

44 
	siovec


46 *
	miov_ba£
;

47 
size_t
 
	miov_Àn
;

	@/usr/include/bits/unistd.h

20 #i‚de‡
_UNISTD_H


24 
ssize_t
 
	$__ªad_chk
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

25 
size_t
 
__buÊí
Ë
__wur
;

26 
ssize_t
 
	`__REDIRECT
 (
__ªad_Æüs
, (
__fd
, *
__buf
,

27 
size_t
 
__nbyãs
), 
ªad
Ë
__wur
;

29 
__exã∫_Æways_ölöe
 
__wur
 
ssize_t


30 
	$ªad
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
)

32 i‡(
	`__bos0
 (
__buf
Ë!(
size_t
) -1

33 && (!
	`__buûtö_c⁄°™t_p
 (
__nbyãs
Ë|| __nbyã†> 
	`__bos0
 (
__buf
)))

34  
	`__ªad_chk
 (
__fd
, 
__buf
, 
__nbyãs
, 
	`__bos0
 (__buf));

35  
	`__ªad_Æüs
 (
__fd
, 
__buf
, 
__nbyãs
);

36 
	}
}

38 #ifde‡
__USE_UNIX98


39 
ssize_t
 
	$__¥ód_chk
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

40 
__off_t
 
__off£t
, 
size_t
 
__bufsize
Ë
__wur
;

41 
ssize_t
 
	$__¥ód64_chk
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

42 
__off64_t
 
__off£t
, 
size_t
 
__bufsize
Ë
__wur
;

43 
ssize_t
 
	`__REDIRECT
 (
__¥ód_Æüs
,

44 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

45 
__off_t
 
__off£t
), 
¥ód
Ë
__wur
;

46 
ssize_t
 
	`__REDIRECT
 (
__¥ód64_Æüs
,

47 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

48 
__off64_t
 
__off£t
), 
¥ód64
Ë
__wur
;

50 #i‚de‡
__USE_FILE_OFFSET64


51 
__exã∫_Æways_ölöe
 
__wur
 
ssize_t


52 
	$¥ód
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
, 
__off_t
 
__off£t
)

54 i‡(
	`__bos0
 (
__buf
Ë!(
size_t
) -1

55 && (!
	`__buûtö_c⁄°™t_p
 (
__nbyãs
Ë|| __nbyã†> 
	`__bos0
 (
__buf
)))

56  
	`__¥ód_chk
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
, 
	`__bos0
 (__buf));

57  
	`__¥ód_Æüs
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
);

58 
	}
}

60 
__exã∫_Æways_ölöe
 
__wur
 
ssize_t


61 
	$¥ód
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
, 
__off64_t
 
__off£t
)

63 i‡(
	`__bos0
 (
__buf
Ë!(
size_t
) -1

64 && (!
	`__buûtö_c⁄°™t_p
 (
__nbyãs
Ë|| __nbyã†> 
	`__bos0
 (
__buf
)))

65  
	`__¥ód64_chk
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
, 
	`__bos0
 (__buf));

66  
	`__¥ód64_Æüs
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
);

67 
	}
}

70 #ifde‡
__USE_LARGEFILE64


71 
__exã∫_Æways_ölöe
 
__wur
 
ssize_t


72 
	$¥ód64
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
, 
__off64_t
 
__off£t
)

74 i‡(
	`__bos0
 (
__buf
Ë!(
size_t
) -1

75 && (!
	`__buûtö_c⁄°™t_p
 (
__nbyãs
Ë|| __nbyã†> 
	`__bos0
 (
__buf
)))

76  
	`__¥ód64_chk
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
, 
	`__bos0
 (__buf));

77  
	`__¥ód64_Æüs
 (
__fd
, 
__buf
, 
__nbyãs
, 
__off£t
);

78 
	}
}

82 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


83 
ssize_t
 
	$__ªadlök_chk
 (
__c⁄°
 *
__ª°ri˘
 
__∑th
,

84 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
,

85 
size_t
 
__buÊí
)

86 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

87 
ssize_t
 
	`__REDIRECT_NTH
 (
__ªadlök_Æüs
,

88 (
__c⁄°
 *
__ª°ri˘
 
__∑th
,

89 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
), 
ªadlök
)

90 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

92 
__exã∫_Æways_ölöe
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
 
ssize_t


93 
	`__NTH
 (
	$ªadlök
 (
__c⁄°
 *
__ª°ri˘
 
__∑th
, *__ª°ri˘ 
__buf
,

94 
size_t
 
__Àn
))

96 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1

97 && (!
	`__buûtö_c⁄°™t_p
 (
__Àn
Ë|| __À¿> 
	`__bos
 (
__buf
)))

98  
	`__ªadlök_chk
 (
__∑th
, 
__buf
, 
__Àn
, 
	`__bos
 (__buf));

99  
	`__ªadlök_Æüs
 (
__∑th
, 
__buf
, 
__Àn
);

100 
	}
}

103 #ifde‡
__USE_ATFILE


104 
ssize_t
 
	$__ªadlök©_chk
 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__∑th
,

105 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
,

106 
size_t
 
__buÊí
)

107 
__THROW
 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
;

108 
ssize_t
 
	`__REDIRECT_NTH
 (
__ªadlök©_Æüs
,

109 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__∑th
,

110 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
),

111 
ªadlök©
)

112 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
;

114 
__exã∫_Æways_ölöe
 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
 
ssize_t


115 
	`__NTH
 (
	$ªadlök©
 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__∑th
,

116 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
))

118 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1

119 && (!
	`__buûtö_c⁄°™t_p
 (
__Àn
Ë|| __À¿> 
	`__bos
 (
__buf
)))

120  
	`__ªadlök©_chk
 (
__fd
, 
__∑th
, 
__buf
, 
__Àn
, 
	`__bos
 (__buf));

121  
	`__ªadlök©_Æüs
 (
__fd
, 
__∑th
, 
__buf
, 
__Àn
);

122 
	}
}

125 *
	$__gëcwd_chk
 (*
__buf
, 
size_t
 
__size
, size_à
__buÊí
)

126 
__THROW
 
__wur
;

127 *
	`__REDIRECT_NTH
 (
__gëcwd_Æüs
,

128 (*
__buf
, 
size_t
 
__size
), 
gëcwd
Ë
__wur
;

130 
__exã∫_Æways_ölöe
 
__wur
 *

131 
	`__NTH
 (
	$gëcwd
 (*
__buf
, 
size_t
 
__size
))

133 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1

134 && (!
	`__buûtö_c⁄°™t_p
 (
__size
Ë|| __sizê> 
	`__bos
 (
__buf
)))

135  
	`__gëcwd_chk
 (
__buf
, 
__size
, 
	`__bos
 (__buf));

136  
	`__gëcwd_Æüs
 (
__buf
, 
__size
);

137 
	}
}

139 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


140 *
	$__gëwd_chk
 (*
__buf
, 
size_t
 
buÊí
)

141 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

142 *
	`__REDIRECT_NTH
 (
__gëwd_Æüs
, (*
__buf
), 
gëwd
)

143 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

145 
__exã∫_Æways_ölöe
 
	`__n⁄nuŒ
 ((1)Ë
__©åibuã_dïªˇãd__
 
__wur
 *

146 
	`__NTH
 (
	$gëwd
 (*
__buf
))

148 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1)

149  
	`__gëwd_chk
 (
__buf
, 
	`__bos
 (__buf));

150  
	`__gëwd_Æüs
 (
__buf
);

151 
	}
}

154 
size_t
 
	$__c⁄f°r_chk
 (
__«me
, *
__buf
, 
size_t
 
__Àn
,

155 
size_t
 
__buÊí
Ë
__THROW
;

156 
size_t
 
	`__REDIRECT_NTH
 (
__c⁄f°r_Æüs
, (
__«me
, *
__buf
,

157 
size_t
 
__Àn
), 
c⁄f°r
);

159 
__exã∫_Æways_ölöe
 
size_t


160 
	`__NTH
 (
	$c⁄f°r
 (
__«me
, *
__buf
, 
size_t
 
__Àn
))

162 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1

163 && (!
	`__buûtö_c⁄°™t_p
 (
__Àn
Ë|| 
	`__bos
 (
__buf
) < __len))

164  
	`__c⁄f°r_chk
 (
__«me
, 
__buf
, 
__Àn
, 
	`__bos
 (__buf));

165  
	`__c⁄f°r_Æüs
 (
__«me
, 
__buf
, 
__Àn
);

166 
	}
}

169 
	$__gëgroups_chk
 (
__size
, 
__gid_t
 
__li°
[], 
size_t
 
li°Àn
)

170 
__THROW
 
__wur
;

171 
	`__REDIRECT_NTH
 (
__gëgroups_Æüs
, (
__size
, 
__gid_t
 
__li°
[]),

172 
gëgroups
Ë
__wur
;

174 
__exã∫_Æways_ölöe
 

175 
	`__NTH
 (
	$gëgroups
 (
__size
, 
__gid_t
 
__li°
[]))

177 i‡(
	`__bos
 (
__li°
Ë!(
size_t
) -1

178 && (!
	`__buûtö_c⁄°™t_p
 (
__size
)

179 || 
__size
 *  (
__gid_t
Ë> 
	`__bos
 (
__li°
)))

180  
	`__gëgroups_chk
 (
__size
, 
__li°
, 
	`__bos
 (__list));

181  
	`__gëgroups_Æüs
 (
__size
, 
__li°
);

182 
	}
}

185 
	$__ây«me_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
,

186 
size_t
 
__ƒól
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

187 
	`__REDIRECT_NTH
 (
__ây«me_r_Æüs
, (
__fd
, *
__buf
,

188 
size_t
 
__buÊí
), 
ây«me_r
)

189 
	`__n⁄nuŒ
 ((2));

191 
__exã∫_Æways_ölöe
 

192 
	`__NTH
 (
	$ây«me_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
))

194 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1

195 && (!
	`__buûtö_c⁄°™t_p
 (
__buÊí
Ë|| __buÊí > 
	`__bos
 (
__buf
)))

196  
	`__ây«me_r_chk
 (
__fd
, 
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

197  
	`__ây«me_r_Æüs
 (
__fd
, 
__buf
, 
__buÊí
);

198 
	}
}

201 #i‡
deföed
 
__USE_REENTRANT
 || deföed 
__USE_POSIX199506


202 
	$__gëlogö_r_chk
 (*
__buf
, 
size_t
 
__buÊí
, size_à
__ƒól
)

203 
	`__n⁄nuŒ
 ((1));

204 
	`__REDIRECT
 (
__gëlogö_r_Æüs
, (*
__buf
, 
size_t
 
__buÊí
),

205 
gëlogö_r
Ë
	`__n⁄nuŒ
 ((1));

207 
__exã∫_Æways_ölöe
 

208 
	$gëlogö_r
 (*
__buf
, 
size_t
 
__buÊí
)

210 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1

211 && (!
	`__buûtö_c⁄°™t_p
 (
__buÊí
Ë|| __buÊí > 
	`__bos
 (
__buf
)))

212  
	`__gëlogö_r_chk
 (
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

213  
	`__gëlogö_r_Æüs
 (
__buf
, 
__buÊí
);

214 
	}
}

218 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_UNIX98


219 
	$__gëho°«me_chk
 (*
__buf
, 
size_t
 
__buÊí
, size_à
__ƒól
)

220 
__THROW
 
	`__n⁄nuŒ
 ((1));

221 
	`__REDIRECT_NTH
 (
__gëho°«me_Æüs
, (*
__buf
, 
size_t
 
__buÊí
),

222 
gëho°«me
Ë
	`__n⁄nuŒ
 ((1));

224 
__exã∫_Æways_ölöe
 

225 
	`__NTH
 (
	$gëho°«me
 (*
__buf
, 
size_t
 
__buÊí
))

227 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1

228 && (!
	`__buûtö_c⁄°™t_p
 (
__buÊí
Ë|| __buÊí > 
	`__bos
 (
__buf
)))

229  
	`__gëho°«me_chk
 (
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

230  
	`__gëho°«me_Æüs
 (
__buf
, 
__buÊí
);

231 
	}
}

235 #i‡
deföed
 
__USE_BSD
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_UNIX98
)

236 
	$__gëdomaö«me_chk
 (*
__buf
, 
size_t
 
__buÊí
, size_à
__ƒól
)

237 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

238 
	`__REDIRECT_NTH
 (
__gëdomaö«me_Æüs
, (*
__buf
,

239 
size_t
 
__buÊí
),

240 
gëdomaö«me
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

242 
__exã∫_Æways_ölöe
 

243 
	`__NTH
 (
	$gëdomaö«me
 (*
__buf
, 
size_t
 
__buÊí
))

245 i‡(
	`__bos
 (
__buf
Ë!(
size_t
) -1

246 && (!
	`__buûtö_c⁄°™t_p
 (
__buÊí
Ë|| __buÊí > 
	`__bos
 (
__buf
)))

247  
	`__gëdomaö«me_chk
 (
__buf
, 
__buÊí
, 
	`__bos
 (__buf));

248  
	`__gëdomaö«me_Æüs
 (
__buf
, 
__buÊí
);

249 
	}
}

	@/usr/include/bits/utmp.h

21 #i‚de‡
_UTMP_H


25 
	~<∑ths.h
>

26 
	~<sys/time.h
>

27 
	~<sys/ty≥s.h
>

28 
	~<bôs/w‹dsize.h
>

31 
	#UT_LINESIZE
 32

	)

32 
	#UT_NAMESIZE
 32

	)

33 
	#UT_HOSTSIZE
 256

	)

38 
	sœ°log


40 #i‡
__WORDSIZE
 =64 && 
deföed
 
__WORDSIZE_COMPAT32


41 
öt32_t
 
	mŒ_time
;

43 
__time_t
 
	mŒ_time
;

45 
	mŒ_löe
[
UT_LINESIZE
];

46 
	mŒ_ho°
[
UT_HOSTSIZE
];

52 
	sexô_°©us


54 
	me_ãrmö©i⁄
;

55 
	me_exô
;

60 
	sutmp


62 
	mut_ty≥
;

63 
pid_t
 
	mut_pid
;

64 
	mut_löe
[
UT_LINESIZE
];

65 
	mut_id
[4];

66 
	mut_u£r
[
UT_NAMESIZE
];

67 
	mut_ho°
[
UT_HOSTSIZE
];

68 
exô_°©us
 
	mut_exô
;

73 #i‡
__WORDSIZE
 =64 && 
deföed
 
__WORDSIZE_COMPAT32


74 
öt32_t
 
	mut_£ssi⁄
;

77 
öt32_t
 
	mtv_£c
;

78 
öt32_t
 
	mtv_u£c
;

79 } 
	mut_tv
;

81 
	mut_£ssi⁄
;

82 
timevÆ
 
	mut_tv
;

85 
öt32_t
 
	mut_addr_v6
[4];

86 
	m__unu£d
[20];

90 
	#ut_«me
 
ut_u£r


	)

91 #i‚de‡
_NO_UT_TIME


94 
	#ut_time
 
ut_tv
.
tv_£c


	)

96 
	#ut_xtime
 
ut_tv
.
tv_£c


	)

97 
	#ut_addr
 
ut_addr_v6
[0]

	)

101 
	#EMPTY
 0

	)

103 
	#RUN_LVL
 1

	)

104 
	#BOOT_TIME
 2

	)

105 
	#NEW_TIME
 3

	)

106 
	#OLD_TIME
 4

	)

108 
	#INIT_PROCESS
 5

	)

109 
	#LOGIN_PROCESS
 6

	)

110 
	#USER_PROCESS
 7

	)

111 
	#DEAD_PROCESS
 8

	)

113 
	#ACCOUNTING
 9

	)

116 
	#UT_UNKNOWN
 
EMPTY


	)

121 
	#_HAVE_UT_TYPE
 1

	)

122 
	#_HAVE_UT_PID
 1

	)

123 
	#_HAVE_UT_ID
 1

	)

124 
	#_HAVE_UT_TV
 1

	)

125 
	#_HAVE_UT_HOST
 1

	)

	@/usr/include/bits/utsname.h

19 #i‚de‡
_SYS_UTSNAME_H


24 
	#_UTSNAME_LENGTH
 65

	)

29 
	#_UTSNAME_DOMAIN_LENGTH
 
_UTSNAME_LENGTH


	)

	@/usr/include/bits/waitflags.h

20 #i‡!
deföed
 
_SYS_WAIT_H
 && !deföed 
_STDLIB_H


26 
	#WNOHANG
 1

	)

27 
	#WUNTRACED
 2

	)

30 
	#WSTOPPED
 2

	)

31 
	#WEXITED
 4

	)

32 
	#WCONTINUED
 8

	)

33 
	#WNOWAIT
 0x01000000

	)

35 
	#__WNOTHREAD
 0x20000000

	)

37 
	#__WALL
 0x40000000

	)

38 
	#__WCLONE
 0x80000000

	)

	@/usr/include/bits/waitstatus.h

20 #i‡!
deföed
 
_SYS_WAIT_H
 && !deföed 
_STDLIB_H


29 
	#__WEXITSTATUS
(
°©us
Ë(((°©usË& 0xff00Ë>> 8)

	)

32 
	#__WTERMSIG
(
°©us
Ë((°©usË& 0x7f)

	)

35 
	#__WSTOPSIG
(
°©us
Ë
	`__WEXITSTATUS
(°©us)

	)

38 
	#__WIFEXITED
(
°©us
Ë(
	`__WTERMSIG
(°©usË=0)

	)

41 
	#__WIFSIGNALED
(
°©us
) \

42 (((sig√d Ë(((
°©us
Ë& 0x7fË+ 1Ë>> 1Ë> 0)

	)

45 
	#__WIFSTOPPED
(
°©us
Ë(((°©usË& 0xffË=0x7f)

	)

49 #ifde‡
WCONTINUED


50 
	#__WIFCONTINUED
(
°©us
Ë((°©usË=
__W_CONTINUED
)

	)

54 
	#__WCOREDUMP
(
°©us
Ë((°©usË& 
__WCOREFLAG
)

	)

57 
	#__W_EXITCODE
(
ªt
, 
sig
Ë(‘ëË<< 8 | (sig))

	)

58 
	#__W_STOPCODE
(
sig
Ë((sigË<< 8 | 0x7f)

	)

59 
	#__W_CONTINUED
 0xffff

	)

60 
	#__WCOREFLAG
 0x80

	)

63 #ifdef 
__USE_BSD


65 
	~<ídün.h
>

67 
	uwaô


69 
	mw_°©us
;

72 #if 
__BYTE_ORDER
 =
__LITTLE_ENDIAN


73 
	m__w_ãrmsig
:7;

74 
	m__w_c‹edump
:1;

75 
	m__w_ªtcode
:8;

78 #if 
__BYTE_ORDER
 =
__BIG_ENDIAN


80 
	m__w_ªtcode
:8;

81 
	m__w_c‹edump
:1;

82 
	m__w_ãrmsig
:7;

84 } 
	m__waô_ãrmö©ed
;

87 #if 
__BYTE_ORDER
 =
__LITTLE_ENDIAN


88 
	m__w_°›vÆ
:8;

89 
	m__w_°›sig
:8;

92 #if 
__BYTE_ORDER
 =
__BIG_ENDIAN


94 
	m__w_°›sig
:8;

95 
	m__w_°›vÆ
:8;

97 } 
	m__waô_°›≥d
;

100 
	#w_ãrmsig
 
__waô_ãrmö©ed
.
__w_ãrmsig


	)

101 
	#w_c‹edump
 
__waô_ãrmö©ed
.
__w_c‹edump


	)

102 
	#w_ªtcode
 
__waô_ãrmö©ed
.
__w_ªtcode


	)

103 
	#w_°›sig
 
__waô_°›≥d
.
__w_°›sig


	)

104 
	#w_°›vÆ
 
__waô_°›≥d
.
__w_°›vÆ


	)

	@/usr/include/bits/wordsize.h

19 
	#__WORDSIZE
 32

	)

	@/usr/include/bits/xopen_lim.h

30 #i‚de‡
_XOPEN_LIM_H


31 
	#_XOPEN_LIM_H
 1

	)

33 
	#__√ed_IOV_MAX


	)

34 
	~<bôs/°dio_lim.h
>

66 
	#_XOPEN_IOV_MAX
 
_POSIX_UIO_MAXIOV


	)

71 
	#NL_ARGMAX
 
_POSIX_ARG_MAX


	)

74 
	#NL_LANGMAX
 
_POSIX2_LINE_MAX


	)

77 
	#NL_MSGMAX
 
INT_MAX


	)

81 
	#NL_NMAX
 
INT_MAX


	)

84 
	#NL_SETMAX
 
INT_MAX


	)

87 
	#NL_TEXTMAX
 
INT_MAX


	)

90 
	#NZERO
 20

	)

94 #ifde‡
INT_MAX


95 #i‡
INT_MAX
 == 32767

96 
	#WORD_BIT
 16

	)

98 #i‡
INT_MAX
 == 2147483647

99 
	#WORD_BIT
 32

	)

102 
	#WORD_BIT
 64

	)

105 #ñi‡
deföed
 
__INT_MAX__


106 #i‡
__INT_MAX__
 == 32767

107 
	#WORD_BIT
 16

	)

109 #i‡
__INT_MAX__
 == 2147483647

110 
	#WORD_BIT
 32

	)

113 
	#WORD_BIT
 64

	)

117 
	#WORD_BIT
 32

	)

121 #ifde‡
LONG_MAX


122 #i‡
LONG_MAX
 == 2147483647

123 
	#LONG_BIT
 32

	)

126 
	#LONG_BIT
 64

	)

128 #ñi‡
deföed
 
__LONG_MAX__


129 #i‡
__LONG_MAX__
 == 2147483647

130 
	#LONG_BIT
 32

	)

133 
	#LONG_BIT
 64

	)

136 
	~<bôs/w‹dsize.h
>

137 #i‡
__WORDSIZE
 == 64

138 
	#LONG_BIT
 64

	)

140 
	#LONG_BIT
 32

	)

	@/usr/include/features.h

19 #i‚def 
_FEATURES_H


20 
	#_FEATURES_H
 1

	)

92 #unde‡
__USE_ISOC99


93 #unde‡
__USE_POSIX


94 #unde‡
__USE_POSIX2


95 #unde‡
__USE_POSIX199309


96 #unde‡
__USE_POSIX199506


97 #unde‡
__USE_XOPEN


98 #unde‡
__USE_XOPEN_EXTENDED


99 #unde‡
__USE_UNIX98


100 #unde‡
__USE_XOPEN2K


101 #unde‡
__USE_LARGEFILE


102 #unde‡
__USE_LARGEFILE64


103 #unde‡
__USE_FILE_OFFSET64


104 #unde‡
__USE_BSD


105 #unde‡
__USE_SVID


106 #unde‡
__USE_MISC


107 #unde‡
__USE_ATFILE


108 #unde‡
__USE_GNU


109 #unde‡
__USE_REENTRANT


110 #unde‡
__USE_FORTIFY_LEVEL


111 #unde‡
__FAVOR_BSD


112 #unde‡
__KERNEL_STRICT_NAMES


116 #i‚de‡
_LOOSE_KERNEL_NAMES


117 
	#__KERNEL_STRICT_NAMES


	)

121 
	#__USE_ANSI
 1

	)

130 #i‡
deföed
 
__GNUC__
 && deföed 
__GNUC_MINOR__


131 
	#__GNUC_PREREQ
(
maj
, 
mö
) \

132 ((
__GNUC__
 << 16Ë+ 
__GNUC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

134 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë0

	)

139 #i‡
deföed
 
_BSD_SOURCE
 && \

140 !(
deföed
 
	g_POSIX_SOURCE
 || deföed 
	g_POSIX_C_SOURCE
 || \

141 
deföed
 
	g_XOPEN_SOURCE
 || deföed 
	g_XOPEN_SOURCE_EXTENDED
 || \

142 
deföed
 
	g_GNU_SOURCE
 || deföed 
	g_SVID_SOURCE
)

143 
	#__FAVOR_BSD
 1

	)

147 #ifde‡
_GNU_SOURCE


148 #unde‡
_ISOC99_SOURCE


149 
	#_ISOC99_SOURCE
 1

	)

150 #unde‡
_POSIX_SOURCE


151 
	#_POSIX_SOURCE
 1

	)

152 #unde‡
_POSIX_C_SOURCE


153 
	#_POSIX_C_SOURCE
 200112L

	)

154 #unde‡
_XOPEN_SOURCE


155 
	#_XOPEN_SOURCE
 600

	)

156 #unde‡
_XOPEN_SOURCE_EXTENDED


157 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

158 #unde‡
_LARGEFILE64_SOURCE


159 
	#_LARGEFILE64_SOURCE
 1

	)

160 #unde‡
_BSD_SOURCE


161 
	#_BSD_SOURCE
 1

	)

162 #unde‡
_SVID_SOURCE


163 
	#_SVID_SOURCE
 1

	)

164 #unde‡
_ATFILE_SOURCE


165 
	#_ATFILE_SOURCE
 1

	)

170 #i‡(!
deföed
 
__STRICT_ANSI__
 && !deföed 
_ISOC99_SOURCE
 && \

171 !
deföed
 
	g_POSIX_SOURCE
 && !deföed 
	g_POSIX_C_SOURCE
 && \

172 !
deföed
 
	g_XOPEN_SOURCE
 && !deföed 
	g_XOPEN_SOURCE_EXTENDED
 && \

173 !
deföed
 
	g_BSD_SOURCE
 && !deföed 
	g_SVID_SOURCE
)

174 
	#_BSD_SOURCE
 1

	)

175 
	#_SVID_SOURCE
 1

	)

182 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC9X_SOURCE
 \

183 || (
deföed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

184 
	#__USE_ISOC99
 1

	)

189 #i‡((!
deföed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

190 !
deföed
 
_POSIX_SOURCE
 && !deföed 
_POSIX_C_SOURCE
)

191 
	#_POSIX_SOURCE
 1

	)

192 #i‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

193 
	#_POSIX_C_SOURCE
 2

	)

194 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

195 
	#_POSIX_C_SOURCE
 199506L

	)

197 
	#_POSIX_C_SOURCE
 200112L

	)

201 #i‡
deföed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >1 || deföed 
_XOPEN_SOURCE


202 
	#__USE_POSIX
 1

	)

205 #i‡
deföed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >2 || deföed 
_XOPEN_SOURCE


206 
	#__USE_POSIX2
 1

	)

209 #i‡(
_POSIX_C_SOURCE
 - 0) >= 199309L

210 
	#__USE_POSIX199309
 1

	)

213 #i‡(
_POSIX_C_SOURCE
 - 0) >= 199506L

214 
	#__USE_POSIX199506
 1

	)

217 #i‡(
_POSIX_C_SOURCE
 - 0) >= 200112L

218 
	#__USE_XOPEN2K
 1

	)

221 #ifdef 
_XOPEN_SOURCE


222 
	#__USE_XOPEN
 1

	)

223 #i‡(
_XOPEN_SOURCE
 - 0) >= 500

224 
	#__USE_XOPEN_EXTENDED
 1

	)

225 
	#__USE_UNIX98
 1

	)

226 #unde‡
_LARGEFILE_SOURCE


227 
	#_LARGEFILE_SOURCE
 1

	)

228 #i‡(
_XOPEN_SOURCE
 - 0) >= 600

229 
	#__USE_XOPEN2K
 1

	)

230 #unde‡
__USE_ISOC99


231 
	#__USE_ISOC99
 1

	)

234 #ifde‡
_XOPEN_SOURCE_EXTENDED


235 
	#__USE_XOPEN_EXTENDED
 1

	)

240 #ifde‡
_LARGEFILE_SOURCE


241 
	#__USE_LARGEFILE
 1

	)

244 #ifde‡
_LARGEFILE64_SOURCE


245 
	#__USE_LARGEFILE64
 1

	)

248 #i‡
deföed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

249 
	#__USE_FILE_OFFSET64
 1

	)

252 #i‡
deföed
 
_BSD_SOURCE
 || deföed 
_SVID_SOURCE


253 
	#__USE_MISC
 1

	)

256 #ifdef 
_BSD_SOURCE


257 
	#__USE_BSD
 1

	)

260 #ifdef 
_SVID_SOURCE


261 
	#__USE_SVID
 1

	)

264 #ifdef 
_ATFILE_SOURCE


265 
	#__USE_ATFILE
 1

	)

268 #ifdef 
_GNU_SOURCE


269 
	#__USE_GNU
 1

	)

272 #i‡
deföed
 
_REENTRANT
 || deföed 
_THREAD_SAFE


273 
	#__USE_REENTRANT
 1

	)

276 #i‡
deföed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

277 && 
__GNUC_PREREQ
 (4, 1Ë&& 
deföed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

278 #i‡
_FORTIFY_SOURCE
 > 1

279 
	#__USE_FORTIFY_LEVEL
 2

	)

281 
	#__USE_FORTIFY_LEVEL
 1

	)

284 
	#__USE_FORTIFY_LEVEL
 0

	)

288 
	#__STDC_IEC_559__
 1

	)

289 
	#__STDC_IEC_559_COMPLEX__
 1

	)

292 
	#__STDC_ISO_10646__
 200009L

	)

300 #unde‡
__GNU_LIBRARY__


301 
	#__GNU_LIBRARY__
 6

	)

305 
	#__GLIBC__
 2

	)

306 
	#__GLIBC_MINOR__
 6

	)

308 
	#__GLIBC_PREREQ
(
maj
, 
mö
) \

309 ((
__GLIBC__
 << 16Ë+ 
__GLIBC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

312 #i‡
deföed
 
__GNUC__
 \

313 || (
deföed
 
	g__PGI
 && deföed 
	g__i386__
 ) \

314 || (
deföed
 
	g__INTEL_COMPILER
 && (deföed 
	g__i386__
 || deföed 
	g__ü64__
)) \

315 || (
deföed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L)

316 
	#__GLIBC_HAVE_LONG_LONG
 1

	)

320 #i‚de‡
__ASSEMBLER__


321 #i‚de‡
_SYS_CDEFS_H


322 
	~<sys/cdefs.h
>

327 #i‡
deföed
 
__USE_FILE_OFFSET64
 && !deföed 
__REDIRECT


328 
	#__USE_LARGEFILE
 1

	)

329 
	#__USE_LARGEFILE64
 1

	)

335 #i‡
__GNUC_PREREQ
 (2, 7Ë&& 
deföed
 
__OPTIMIZE__
 \

336 && !
deföed
 
	g__OPTIMIZE_SIZE__
 && !deföed 
	g__NO_INLINE__


337 
	#__USE_EXTERN_INLINES
 1

	)

345 
	~<gnu/°ubs.h
>

	@/usr/include/jconfig.h

5 
	#HAVE_PROTOTYPES


	)

6 
	#HAVE_UNSIGNED_CHAR


	)

7 
	#HAVE_UNSIGNED_SHORT


	)

10 #unde‡
CHAR_IS_UNSIGNED


13 #unde‡
NEED_BSD_STRINGS


14 #unde‡
NEED_SYS_TYPES_H


15 #unde‡
NEED_FAR_POINTERS


16 #unde‡
NEED_SHORT_EXTERNAL_NAMES


18 #unde‡
INCOMPLETE_TYPES_BROKEN


20 #ifde‡
JPEG_INTERNALS


22 #unde‡
RIGHT_SHIFT_IS_UNSIGNED


23 
	#INLINE
 
__ölöe__


	)

25 
	#DEFAULT_MAX_MEM
 1073741824

	)

26 #unde‡
NO_MKTEMP


30 #ifde‡
JPEG_CJPEG_DJPEG


32 
	#BMP_SUPPORTED


	)

33 
	#GIF_SUPPORTED


	)

34 
	#PPM_SUPPORTED


	)

35 #unde‡
RLE_SUPPORTED


36 
	#TARGA_SUPPORTED


	)

38 #unde‡
TWO_FILE_COMMANDLINE


39 #unde‡
NEED_SIGNAL_CATCHER


40 #unde‡
DONT_USE_B_MODE


43 #unde‡
PROGRESS_REPORT


	@/usr/include/jerror.h

21 #i‚de‡
JMESSAGE


22 #i‚de‡
JERROR_H


24 
	#JMAKE_ENUM_LIST


	)

27 
	#JMESSAGE
(
code
,
°rög
)

	)

31 #ifde‡
JMAKE_ENUM_LIST


35 
	#JMESSAGE
(
code
,
°rög
Ëcodê,

	)

39 
JMESSAGE
(
JMSG_NOMESSAGE
, "Bogus message code %d")

42 
JMESSAGE
(
JERR_ARITH_NOTIMPL
,

44 
JMESSAGE
(
JERR_BAD_ALIGN_TYPE
, "ALIGN_TYPE is wrong,Ölease fix")

45 
JMESSAGE
(
JERR_BAD_ALLOC_CHUNK
, "MAX_ALLOC_CHUNK is wrong,Ölease fix")

46 
JMESSAGE
(
JERR_BAD_BUFFER_MODE
, "Bogus buffer control mode")

47 
JMESSAGE
(
JERR_BAD_COMPONENT_ID
, "Invalid component ID %d in SOS")

48 
JMESSAGE
(
JERR_BAD_CROP_SPEC
, "Invalid cropÑequest")

49 
JMESSAGE
(
JERR_BAD_DCT_COEF
, "DCT coefficient out ofÑange")

50 
JMESSAGE
(
JERR_BAD_DCTSIZE
, "IDCT output block size %dÇot supported")

51 
JMESSAGE
(
JERR_BAD_HUFF_TABLE
, "Bogus HuffmanÅable definition")

52 
JMESSAGE
(
JERR_BAD_IN_COLORSPACE
, "Bogus input colorspace")

53 
JMESSAGE
(
JERR_BAD_J_COLORSPACE
, "Bogus JPEG colorspace")

54 
JMESSAGE
(
JERR_BAD_LENGTH
, "Bogus markerÜength")

55 
JMESSAGE
(
JERR_BAD_LIB_VERSION
,

57 
JMESSAGE
(
JERR_BAD_MCU_SIZE
, "Sampling factorsÅooÜarge for interleaved scan")

58 
JMESSAGE
(
JERR_BAD_POOL_ID
, "Invalid memoryÖool code %d")

59 
JMESSAGE
(
JERR_BAD_PRECISION
, "Unsupported JPEG dataÖrecision %d")

60 
JMESSAGE
(
JERR_BAD_PROGRESSION
,

62 
JMESSAGE
(
JERR_BAD_PROG_SCRIPT
,

64 
JMESSAGE
(
JERR_BAD_SAMPLING
, "Bogus sampling factors")

65 
JMESSAGE
(
JERR_BAD_SCAN_SCRIPT
, "Invalid scan scriptátÉntry %d")

66 
JMESSAGE
(
JERR_BAD_STATE
, "Improper callÅo JPEGÜibrary in state %d")

67 
JMESSAGE
(
JERR_BAD_STRUCT_SIZE
,

69 
JMESSAGE
(
JERR_BAD_VIRTUAL_ACCESS
, "Bogus virtualárrayáccess")

70 
JMESSAGE
(
JERR_BUFFER_SIZE
, "BufferÖassedÅo JPEGÜibrary isÅoo small")

71 
JMESSAGE
(
JERR_CANT_SUSPEND
, "SuspensionÇotállowed here")

72 
JMESSAGE
(
JERR_CCIR601_NOTIMPL
, "CCIR601 samplingÇot implemented yet")

73 
JMESSAGE
(
JERR_COMPONENT_COUNT
, "Too many color components: %d, max %d")

74 
JMESSAGE
(
JERR_CONVERSION_NOTIMPL
, "Unsupported color conversionÑequest")

75 
JMESSAGE
(
JERR_DAC_INDEX
, "Bogus DAC index %d")

76 
JMESSAGE
(
JERR_DAC_VALUE
, "Bogus DAC value 0x%x")

77 
JMESSAGE
(
JERR_DHT_INDEX
, "Bogus DHT index %d")

78 
JMESSAGE
(
JERR_DQT_INDEX
, "Bogus DQT index %d")

79 
JMESSAGE
(
JERR_EMPTY_IMAGE
, "Empty JPEG image (DNLÇot supported)")

80 
JMESSAGE
(
JERR_EMS_READ
, "Read from EMS failed")

81 
JMESSAGE
(
JERR_EMS_WRITE
, "WriteÅo EMS failed")

82 
JMESSAGE
(
JERR_EOI_EXPECTED
, "Didn'tÉxpect moreÅhan one scan")

83 
JMESSAGE
(
JERR_FILE_READ
, "Input fileÑeadÉrror")

84 
JMESSAGE
(
JERR_FILE_WRITE
, "Output file writeÉrror --- out of disk space?")

85 
JMESSAGE
(
JERR_FRACT_SAMPLE_NOTIMPL
, "Fractional samplingÇot implemented yet")

86 
JMESSAGE
(
JERR_HUFF_CLEN_OVERFLOW
, "Huffman code sizeÅable overflow")

87 
JMESSAGE
(
JERR_HUFF_MISSING_CODE
, "Missing Huffman codeÅableÉntry")

88 
JMESSAGE
(
JERR_IMAGE_TOO_BIG
, "Maximum supported image dimension is %uÖixels")

89 
JMESSAGE
(
JERR_INPUT_EMPTY
, "Empty input file")

90 
JMESSAGE
(
JERR_INPUT_EOF
, "PrematureÉnd of input file")

91 
JMESSAGE
(
JERR_MISMATCHED_QUANT_TABLE
,

93 
JMESSAGE
(
JERR_MISSING_DATA
, "Scan script doesÇotÅransmitáll data")

94 
JMESSAGE
(
JERR_MODE_CHANGE
, "Invalid color quantization mode change")

95 
JMESSAGE
(
JERR_NOTIMPL
, "Not implemented yet")

96 
JMESSAGE
(
JERR_NOT_COMPILED
, "Requested feature was omittedát compileÅime")

97 
JMESSAGE
(
JERR_NO_BACKING_STORE
, "Backing storeÇot supported")

98 
JMESSAGE
(
JERR_NO_HUFF_TABLE
, "HuffmanÅable 0x%02x wasÇot defined")

99 
JMESSAGE
(
JERR_NO_IMAGE
, "JPEG datastream containsÇo image")

100 
JMESSAGE
(
JERR_NO_QUANT_TABLE
, "QuantizationÅable 0x%02x wasÇot defined")

101 
JMESSAGE
(
JERR_NO_SOI
, "Notá JPEG file: starts with 0x%02x 0x%02x")

102 
JMESSAGE
(
JERR_OUT_OF_MEMORY
, "Insufficient memory (case %d)")

103 
JMESSAGE
(
JERR_QUANT_COMPONENTS
,

105 
JMESSAGE
(
JERR_QUANT_FEW_COLORS
, "Cannot quantizeÅo fewerÅhan %d colors")

106 
JMESSAGE
(
JERR_QUANT_MANY_COLORS
, "Cannot quantizeÅo moreÅhan %d colors")

107 
JMESSAGE
(
JERR_SOF_DUPLICATE
, "Invalid JPEG file structure:Åwo SOF markers")

108 
JMESSAGE
(
JERR_SOF_NO_SOS
, "Invalid JPEG file structure: missing SOS marker")

109 
JMESSAGE
(
JERR_SOF_UNSUPPORTED
, "Unsupported JPEGÖrocess: SOFÅype 0x%02x")

110 
JMESSAGE
(
JERR_SOI_DUPLICATE
, "Invalid JPEG file structure:Åwo SOI markers")

111 
JMESSAGE
(
JERR_SOS_NO_SOF
, "Invalid JPEG file structure: SOS before SOF")

112 
JMESSAGE
(
JERR_TFILE_CREATE
, "FailedÅo createÅemporary file %s")

113 
JMESSAGE
(
JERR_TFILE_READ
, "Read failed onÅemporary file")

114 
JMESSAGE
(
JERR_TFILE_SEEK
, "Seek failed onÅemporary file")

115 
JMESSAGE
(
JERR_TFILE_WRITE
,

117 
JMESSAGE
(
JERR_TOO_LITTLE_DATA
, "ApplicationÅransferredÅoo few scanlines")

118 
JMESSAGE
(
JERR_UNKNOWN_MARKER
, "Unsupported markerÅype 0x%02x")

119 
JMESSAGE
(
JERR_VIRTUAL_BUG
, "Virtualárray controller messed up")

120 
JMESSAGE
(
JERR_WIDTH_OVERFLOW
, "ImageÅoo wide forÅhis implementation")

121 
JMESSAGE
(
JERR_XMS_READ
, "Read from XMS failed")

122 
JMESSAGE
(
JERR_XMS_WRITE
, "WriteÅo XMS failed")

123 
JMESSAGE
(
JMSG_COPYRIGHT
, 
JCOPYRIGHT
)

124 
JMESSAGE
(
JMSG_VERSION
, 
JVERSION
)

125 
JMESSAGE
(
JTRC_16BIT_TABLES
,

127 
JMESSAGE
(
JTRC_ADOBE
,

129 
JMESSAGE
(
JTRC_APP0
, "Unknown APP0 marker (not JFIF),Üength %u")

130 
JMESSAGE
(
JTRC_APP14
, "Unknown APP14 marker (not Adobe),Üength %u")

131 
JMESSAGE
(
JTRC_DAC
, "Define Arithmetic Table 0x%02x: 0x%02x")

132 
JMESSAGE
(
JTRC_DHT
, "Define Huffman Table 0x%02x")

133 
JMESSAGE
(
JTRC_DQT
, "Define Quantization Table %dÖrecision %d")

134 
JMESSAGE
(
JTRC_DRI
, "Define Restart Interval %u")

135 
JMESSAGE
(
JTRC_EMS_CLOSE
, "Freed EMS handle %u")

136 
JMESSAGE
(
JTRC_EMS_OPEN
, "Obtained EMS handle %u")

137 
JMESSAGE
(
JTRC_EOI
, "End Of Image")

138 
JMESSAGE
(
JTRC_HUFFBITS
, " %3d %3d %3d %3d %3d %3d %3d %3d")

139 
JMESSAGE
(
JTRC_JFIF
, "JFIF APP0 marker: version %d.%02d, density %dx%d %d")

140 
JMESSAGE
(
JTRC_JFIF_BADTHUMBNAILSIZE
,

142 
JMESSAGE
(
JTRC_JFIF_EXTENSION
,

144 
JMESSAGE
(
JTRC_JFIF_THUMBNAIL
, " with %d x %dÅhumbnail image")

145 
JMESSAGE
(
JTRC_MISC_MARKER
, "Miscellaneous marker 0x%02x,Üength %u")

146 
JMESSAGE
(
JTRC_PARMLESS_MARKER
, "Unexpected marker 0x%02x")

147 
JMESSAGE
(
JTRC_QUANTVALS
, " %4u %4u %4u %4u %4u %4u %4u %4u")

148 
JMESSAGE
(
JTRC_QUANT_3_NCOLORS
, "QuantizingÅo %d = %d*%d*%d colors")

149 
JMESSAGE
(
JTRC_QUANT_NCOLORS
, "QuantizingÅo %d colors")

150 
JMESSAGE
(
JTRC_QUANT_SELECTED
, "Selected %d colors for quantization")

151 
JMESSAGE
(
JTRC_RECOVERY_ACTION
, "At marker 0x%02x,Ñecoveryáction %d")

152 
JMESSAGE
(
JTRC_RST
, "RST%d")

153 
JMESSAGE
(
JTRC_SMOOTH_NOTIMPL
,

155 
JMESSAGE
(
JTRC_SOF
, "Start Of Frame 0x%02x: width=%u, height=%u, components=%d")

156 
JMESSAGE
(
JTRC_SOF_COMPONENT
, " Component %d: %dhx%dv q=%d")

157 
JMESSAGE
(
JTRC_SOI
, "Start of Image")

158 
JMESSAGE
(
JTRC_SOS
, "Start Of Scan: %d components")

159 
JMESSAGE
(
JTRC_SOS_COMPONENT
, " Component %d: dc=%dác=%d")

160 
JMESSAGE
(
JTRC_SOS_PARAMS
, " Ss=%d, Se=%d, Ah=%d, Al=%d")

161 
JMESSAGE
(
JTRC_TFILE_CLOSE
, "ClosedÅemporary file %s")

162 
JMESSAGE
(
JTRC_TFILE_OPEN
, "OpenedÅemporary file %s")

163 
JMESSAGE
(
JTRC_THUMB_JPEG
,

165 
JMESSAGE
(
JTRC_THUMB_PALETTE
,

167 
JMESSAGE
(
JTRC_THUMB_RGB
,

169 
JMESSAGE
(
JTRC_UNKNOWN_IDS
,

171 
JMESSAGE
(
JTRC_XMS_CLOSE
, "Freed XMS handle %u")

172 
JMESSAGE
(
JTRC_XMS_OPEN
, "Obtained XMS handle %u")

173 
JMESSAGE
(
JWRN_ADOBE_XFORM
, "Unknown Adobe colorÅransform code %d")

174 
JMESSAGE
(
JWRN_BOGUS_PROGRESSION
,

176 
JMESSAGE
(
JWRN_EXTRANEOUS_DATA
,

178 
JMESSAGE
(
JWRN_HIT_MARKER
, "Corrupt JPEG data:ÖrematureÉnd of data segment")

179 
JMESSAGE
(
JWRN_HUFF_BAD_CODE
, "Corrupt JPEG data: bad Huffman code")

180 
JMESSAGE
(
JWRN_JFIF_MAJOR
, "Warning: unknown JFIFÑevisionÇumber %d.%02d")

181 
JMESSAGE
(
JWRN_JPEG_EOF
, "PrematureÉnd of JPEG file")

182 
JMESSAGE
(
JWRN_MUST_RESYNC
,

184 
JMESSAGE
(
JWRN_NOT_SEQUENTIAL
, "Invalid SOSÖarameters for sequential JPEG")

185 
JMESSAGE
(
JWRN_TOO_MUCH_DATA
, "ApplicationÅransferredÅoo many scanlines")

187 #ifde‡
JMAKE_ENUM_LIST


189 
	mJMSG_LASTMSGCODE


190 } 
	tJ_MESSAGE_CODE
;

192 #unde‡
JMAKE_ENUM_LIST


196 #unde‡
JMESSAGE


199 #i‚de‡
JERROR_H


200 
	#JERROR_H


	)

206 
	#ERREXIT
(
cöfo
,
code
) \

207 ((
cöfo
)->
îr
->
msg_code
 = (
code
), \

208 (*(
cöfo
)->
îr
->
îr‹_exô
Ë((
j_comm⁄_±r
Ë(cöfo)))

	)

209 
	#ERREXIT1
(
cöfo
,
code
,
p1
) \

210 ((
cöfo
)->
îr
->
msg_code
 = (
code
), \

211 (
cöfo
)->
îr
->
msg_∑rm
.
i
[0] = (
p1
), \

212 (*(
cöfo
)->
îr
->
îr‹_exô
Ë((
j_comm⁄_±r
Ë(cöfo)))

	)

213 
	#ERREXIT2
(
cöfo
,
code
,
p1
,
p2
) \

214 ((
cöfo
)->
îr
->
msg_code
 = (
code
), \

215 (
cöfo
)->
îr
->
msg_∑rm
.
i
[0] = (
p1
), \

216 (
cöfo
)->
îr
->
msg_∑rm
.
i
[1] = (
p2
), \

217 (*(
cöfo
)->
îr
->
îr‹_exô
Ë((
j_comm⁄_±r
Ë(cöfo)))

	)

218 
	#ERREXIT3
(
cöfo
,
code
,
p1
,
p2
,
p3
) \

219 ((
cöfo
)->
îr
->
msg_code
 = (
code
), \

220 (
cöfo
)->
îr
->
msg_∑rm
.
i
[0] = (
p1
), \

221 (
cöfo
)->
îr
->
msg_∑rm
.
i
[1] = (
p2
), \

222 (
cöfo
)->
îr
->
msg_∑rm
.
i
[2] = (
p3
), \

223 (*(
cöfo
)->
îr
->
îr‹_exô
Ë((
j_comm⁄_±r
Ë(cöfo)))

	)

224 
	#ERREXIT4
(
cöfo
,
code
,
p1
,
p2
,
p3
,
p4
) \

225 ((
cöfo
)->
îr
->
msg_code
 = (
code
), \

226 (
cöfo
)->
îr
->
msg_∑rm
.
i
[0] = (
p1
), \

227 (
cöfo
)->
îr
->
msg_∑rm
.
i
[1] = (
p2
), \

228 (
cöfo
)->
îr
->
msg_∑rm
.
i
[2] = (
p3
), \

229 (
cöfo
)->
îr
->
msg_∑rm
.
i
[3] = (
p4
), \

230 (*(
cöfo
)->
îr
->
îr‹_exô
Ë((
j_comm⁄_±r
Ë(cöfo)))

	)

231 
	#ERREXITS
(
cöfo
,
code
,
°r
) \

232 ((
cöfo
)->
îr
->
msg_code
 = (
code
), \

233 
	`°∫˝y
((
cöfo
)->
îr
->
msg_∑rm
.
s
, (
°r
), 
JMSG_STR_PARM_MAX
), \

234 (*(
cöfo
)->
îr
->
îr‹_exô
Ë((
j_comm⁄_±r
Ë(cöfo)))

	)

236 
	#MAKESTMT
(
°uff
Ëdÿ{ stuf‡} 0)

	)

239 
	#WARNMS
(
cöfo
,
code
) \

240 ((
cöfo
)->
îr
->
msg_code
 = (
code
), \

241 (*(
cöfo
)->
îr
->
emô_mesßge
Ë((
j_comm⁄_±r
Ë(cöfo), -1))

	)

242 
	#WARNMS1
(
cöfo
,
code
,
p1
) \

243 ((
cöfo
)->
îr
->
msg_code
 = (
code
), \

244 (
cöfo
)->
îr
->
msg_∑rm
.
i
[0] = (
p1
), \

245 (*(
cöfo
)->
îr
->
emô_mesßge
Ë((
j_comm⁄_±r
Ë(cöfo), -1))

	)

246 
	#WARNMS2
(
cöfo
,
code
,
p1
,
p2
) \

247 ((
cöfo
)->
îr
->
msg_code
 = (
code
), \

248 (
cöfo
)->
îr
->
msg_∑rm
.
i
[0] = (
p1
), \

249 (
cöfo
)->
îr
->
msg_∑rm
.
i
[1] = (
p2
), \

250 (*(
cöfo
)->
îr
->
emô_mesßge
Ë((
j_comm⁄_±r
Ë(cöfo), -1))

	)

253 
	#TRACEMS
(
cöfo
,
lvl
,
code
) \

254 ((
cöfo
)->
îr
->
msg_code
 = (
code
), \

255 (*(
cöfo
)->
îr
->
emô_mesßge
Ë((
j_comm⁄_±r
Ë(cöfo), (
lvl
)))

	)

256 
	#TRACEMS1
(
cöfo
,
lvl
,
code
,
p1
) \

257 ((
cöfo
)->
îr
->
msg_code
 = (
code
), \

258 (
cöfo
)->
îr
->
msg_∑rm
.
i
[0] = (
p1
), \

259 (*(
cöfo
)->
îr
->
emô_mesßge
Ë((
j_comm⁄_±r
Ë(cöfo), (
lvl
)))

	)

260 
	#TRACEMS2
(
cöfo
,
lvl
,
code
,
p1
,
p2
) \

261 ((
cöfo
)->
îr
->
msg_code
 = (
code
), \

262 (
cöfo
)->
îr
->
msg_∑rm
.
i
[0] = (
p1
), \

263 (
cöfo
)->
îr
->
msg_∑rm
.
i
[1] = (
p2
), \

264 (*(
cöfo
)->
îr
->
emô_mesßge
Ë((
j_comm⁄_±r
Ë(cöfo), (
lvl
)))

	)

265 
	#TRACEMS3
(
cöfo
,
lvl
,
code
,
p1
,
p2
,
p3
) \

266 
	`MAKESTMT
(* 
_mp
 = (
cöfo
)->
îr
->
msg_∑rm
.
i
; \

267 
_mp
[0] = (
p1
); _mp[1] = (
p2
); _mp[2] = (
p3
); \

268 (
cöfo
)->
îr
->
msg_code
 = (
code
); \

269 (*(
cöfo
)->
îr
->
emô_mesßge
Ë((
j_comm⁄_±r
Ë(cöfo), (
lvl
)); )

	)

270 
	#TRACEMS4
(
cöfo
,
lvl
,
code
,
p1
,
p2
,
p3
,
p4
) \

271 
	`MAKESTMT
(* 
_mp
 = (
cöfo
)->
îr
->
msg_∑rm
.
i
; \

272 
_mp
[0] = (
p1
); _mp[1] = (
p2
); _mp[2] = (
p3
); _mp[3] = (
p4
); \

273 (
cöfo
)->
îr
->
msg_code
 = (
code
); \

274 (*(
cöfo
)->
îr
->
emô_mesßge
Ë((
j_comm⁄_±r
Ë(cöfo), (
lvl
)); )

	)

275 
	#TRACEMS5
(
cöfo
,
lvl
,
code
,
p1
,
p2
,
p3
,
p4
,
p5
) \

276 
	`MAKESTMT
(* 
_mp
 = (
cöfo
)->
îr
->
msg_∑rm
.
i
; \

277 
_mp
[0] = (
p1
); _mp[1] = (
p2
); _mp[2] = (
p3
); _mp[3] = (
p4
); \

278 
_mp
[4] = (
p5
); \

279 (
cöfo
)->
îr
->
msg_code
 = (
code
); \

280 (*(
cöfo
)->
îr
->
emô_mesßge
Ë((
j_comm⁄_±r
Ë(cöfo), (
lvl
)); )

	)

281 
	#TRACEMS8
(
cöfo
,
lvl
,
code
,
p1
,
p2
,
p3
,
p4
,
p5
,
p6
,
p7
,
p8
) \

282 
	`MAKESTMT
(* 
_mp
 = (
cöfo
)->
îr
->
msg_∑rm
.
i
; \

283 
_mp
[0] = (
p1
); _mp[1] = (
p2
); _mp[2] = (
p3
); _mp[3] = (
p4
); \

284 
_mp
[4] = (
p5
); _mp[5] = (
p6
); _mp[6] = (
p7
); _mp[7] = (
p8
); \

285 (
cöfo
)->
îr
->
msg_code
 = (
code
); \

286 (*(
cöfo
)->
îr
->
emô_mesßge
Ë((
j_comm⁄_±r
Ë(cöfo), (
lvl
)); )

	)

287 
	#TRACEMSS
(
cöfo
,
lvl
,
code
,
°r
) \

288 ((
cöfo
)->
îr
->
msg_code
 = (
code
), \

289 
	`°∫˝y
((
cöfo
)->
îr
->
msg_∑rm
.
s
, (
°r
), 
JMSG_STR_PARM_MAX
), \

290 (*(
cöfo
)->
îr
->
emô_mesßge
Ë((
j_comm⁄_±r
Ë(cöfo), (
lvl
)))

	)

	@/usr/include/jmorecfg.h

23 
	#BITS_IN_JSAMPLE
 8

	)

35 
	#MAX_COMPONENTS
 10

	)

52 #i‡
BITS_IN_JSAMPLE
 == 8

57 #ifde‡
HAVE_UNSIGNED_CHAR


59 
	tJSAMPLE
;

60 
	#GETJSAMPLE
(
vÆue
Ë((Ë(vÆue))

	)

64 
	tJSAMPLE
;

65 #ifde‡
CHAR_IS_UNSIGNED


66 
	#GETJSAMPLE
(
vÆue
Ë((Ë(vÆue))

	)

68 
	#GETJSAMPLE
(
vÆue
Ë((Ë(vÆueË& 0xFF)

	)

73 
	#MAXJSAMPLE
 255

	)

74 
	#CENTERJSAMPLE
 128

	)

79 #i‡
BITS_IN_JSAMPLE
 == 12

84 
	tJSAMPLE
;

85 
	#GETJSAMPLE
(
vÆue
Ë((Ë(vÆue))

	)

87 
	#MAXJSAMPLE
 4095

	)

88 
	#CENTERJSAMPLE
 2048

	)

99 
	tJCOEF
;

108 #ifde‡
HAVE_UNSIGNED_CHAR


110 
	tJOCTET
;

111 
	#GETJOCTET
(
vÆue
Ë(vÆue)

	)

115 
	tJOCTET
;

116 #ifde‡
CHAR_IS_UNSIGNED


117 
	#GETJOCTET
(
vÆue
Ë(vÆue)

	)

119 
	#GETJOCTET
(
vÆue
Ë((vÆueË& 0xFF)

	)

134 #ifde‡
HAVE_UNSIGNED_CHAR


135 
	tUINT8
;

137 #ifde‡
CHAR_IS_UNSIGNED


138 
	tUINT8
;

140 
	tUINT8
;

146 #ifde‡
HAVE_UNSIGNED_SHORT


147 
	tUINT16
;

149 
	tUINT16
;

154 #i‚de‡
XMD_H


155 
	tINT16
;

160 #i‚de‡
XMD_H


161 
	tINT32
;

171 
	tJDIMENSION
;

173 
	#JPEG_MAX_DIMENSION
 65500L

	)

184 
	#METHODDEF
(
ty≥
Ë
	)
ty≥

186 
	#LOCAL
(
ty≥
Ë
	)
ty≥

188 
	#GLOBAL
(
ty≥
Ë
	)
ty≥

190 
	#EXTERN
(
ty≥
Ë
	)
ty≥

199 #ifde‡
HAVE_PROTOTYPES


200 
	#JMETHOD
(
ty≥
,
mëhod«me
,
¨gli°
Ë
	`ty≥
 (*mëhod«meË
	)
¨gli°

202 
	#JMETHOD
(
ty≥
,
mëhod«me
,
¨gli°
Ë
	`ty≥
 (*mëhod«meË()

	)

212 #ifde‡
NEED_FAR_POINTERS


213 
	#FAR
 
Ár


	)

215 
	#FAR


	)

226 #i‚de‡
HAVE_BOOLEAN


227 
	tboﬁón
;

229 #i‚de‡
FALSE


230 
	#FALSE
 0

	)

232 #i‚de‡
TRUE


233 
	#TRUE
 1

	)

244 #ifde‡
JPEG_INTERNALS


245 
	#JPEG_INTERNAL_OPTIONS


	)

248 #ifde‡
JPEG_INTERNAL_OPTIONS


263 
	#DCT_ISLOW_SUPPORTED


	)

264 
	#DCT_IFAST_SUPPORTED


	)

265 
	#DCT_FLOAT_SUPPORTED


	)

269 #unde‡
C_ARITH_CODING_SUPPORTED


270 
	#C_MULTISCAN_FILES_SUPPORTED


	)

271 
	#C_PROGRESSIVE_SUPPORTED


	)

272 
	#ENTROPY_OPT_SUPPORTED


	)

281 
	#INPUT_SMOOTHING_SUPPORTED


	)

285 #unde‡
D_ARITH_CODING_SUPPORTED


286 
	#D_MULTISCAN_FILES_SUPPORTED


	)

287 
	#D_PROGRESSIVE_SUPPORTED


	)

288 
	#SAVE_MARKERS_SUPPORTED


	)

289 
	#BLOCK_SMOOTHING_SUPPORTED


	)

290 
	#IDCT_SCALING_SUPPORTED


	)

291 #unde‡
UPSAMPLE_SCALING_SUPPORTED


292 
	#UPSAMPLE_MERGING_SUPPORTED


	)

293 
	#QUANT_1PASS_SUPPORTED


	)

294 
	#QUANT_2PASS_SUPPORTED


	)

314 
	#RGB_RED
 0

	)

315 
	#RGB_GREEN
 1

	)

316 
	#RGB_BLUE
 2

	)

317 
	#RGB_PIXELSIZE
 3

	)

327 #i‚de‡
INLINE


328 #ifde‡
__GNUC__


329 
	#INLINE
 
__ölöe__


	)

331 #i‚de‡
INLINE


332 
	#INLINE


	)

342 #i‚de‡
MULTIPLIER


343 
	#MULTIPLIER
 

	)

355 #i‚de‡
FAST_FLOAT


356 #ifde‡
HAVE_PROTOTYPES


357 
	#FAST_FLOAT
 

	)

359 
	#FAST_FLOAT
 

	)

	@/usr/include/jpegint.h

17 
	mJBUF_PASS_THRU
,

19 
	mJBUF_SAVE_SOURCE
,

20 
	mJBUF_CRANK_DEST
,

21 
	mJBUF_SAVE_AND_PASS


22 } 
	tJ_BUF_MODE
;

25 
	#CSTATE_START
 100

	)

26 
	#CSTATE_SCANNING
 101

	)

27 
	#CSTATE_RAW_OK
 102

	)

28 
	#CSTATE_WRCOEFS
 103

	)

29 
	#DSTATE_START
 200

	)

30 
	#DSTATE_INHEADER
 201

	)

31 
	#DSTATE_READY
 202

	)

32 
	#DSTATE_PRELOAD
 203

	)

33 
	#DSTATE_PRESCAN
 204

	)

34 
	#DSTATE_SCANNING
 205

	)

35 
	#DSTATE_RAW_OK
 206

	)

36 
	#DSTATE_BUFIMAGE
 207

	)

37 
	#DSTATE_BUFPOST
 208

	)

38 
	#DSTATE_RDCOEFS
 209

	)

39 
	#DSTATE_STOPPING
 210

	)

45 
	sj≥g_comp_ma°î
 {

46 
JMETHOD
(, 
¥ï¨e_f‹_∑ss
, (
j_com¥ess_±r
 
cöfo
));

47 
JMETHOD
(, 
∑ss_°¨tup
, (
j_com¥ess_±r
 
cöfo
));

48 
JMETHOD
(, 
föish_∑ss
, (
j_com¥ess_±r
 
cöfo
));

51 
boﬁón
 
	mˇŒ_∑ss_°¨tup
;

52 
boﬁón
 
	mis_œ°_∑ss
;

56 
	sj≥g_c_maö_c⁄åﬁÀr
 {

57 
JMETHOD
(, 
°¨t_∑ss
, (
j_com¥ess_±r
 
cöfo
, 
J_BUF_MODE
 
∑ss_mode
));

58 
JMETHOD
(, 
¥o˚ss_d©a
, (
j_com¥ess_±r
 
cöfo
,

59 
JSAMPARRAY
 
öput_buf
, 
JDIMENSION
 *
ö_row_˘r
,

60 
JDIMENSION
 
ö_rows_avaû
));

64 
	sj≥g_c_¥ï_c⁄åﬁÀr
 {

65 
JMETHOD
(, 
°¨t_∑ss
, (
j_com¥ess_±r
 
cöfo
, 
J_BUF_MODE
 
∑ss_mode
));

66 
JMETHOD
(, 
¥e_¥o˚ss_d©a
, (
j_com¥ess_±r
 
cöfo
,

67 
JSAMPARRAY
 
öput_buf
,

68 
JDIMENSION
 *
ö_row_˘r
,

69 
JDIMENSION
 
ö_rows_avaû
,

70 
JSAMPIMAGE
 
ouçut_buf
,

71 
JDIMENSION
 *
out_row_group_˘r
,

72 
JDIMENSION
 
out_row_groups_avaû
));

76 
	sj≥g_c_c€f_c⁄åﬁÀr
 {

77 
JMETHOD
(, 
°¨t_∑ss
, (
j_com¥ess_±r
 
cöfo
, 
J_BUF_MODE
 
∑ss_mode
));

78 
JMETHOD
(
boﬁón
, 
com¥ess_d©a
, (
j_com¥ess_±r
 
cöfo
,

79 
JSAMPIMAGE
 
öput_buf
));

83 
	sj≥g_cﬁ‹_c⁄vîãr
 {

84 
JMETHOD
(, 
°¨t_∑ss
, (
j_com¥ess_±r
 
cöfo
));

85 
JMETHOD
(, 
cﬁ‹_c⁄vît
, (
j_com¥ess_±r
 
cöfo
,

86 
JSAMPARRAY
 
öput_buf
, 
JSAMPIMAGE
 
ouçut_buf
,

87 
JDIMENSION
 
ouçut_row
, 
num_rows
));

91 
	sj≥g_downßm∂î
 {

92 
JMETHOD
(, 
°¨t_∑ss
, (
j_com¥ess_±r
 
cöfo
));

93 
JMETHOD
(, 
downßm∂e
, (
j_com¥ess_±r
 
cöfo
,

94 
JSAMPIMAGE
 
öput_buf
, 
JDIMENSION
 
ö_row_ödex
,

95 
JSAMPIMAGE
 
ouçut_buf
,

96 
JDIMENSION
 
out_row_group_ödex
));

98 
boﬁón
 
	m√ed_c⁄ãxt_rows
;

102 
	sj≥g_f‹w¨d_d˘
 {

103 
JMETHOD
(, 
°¨t_∑ss
, (
j_com¥ess_±r
 
cöfo
));

105 
JMETHOD
(, 
f‹w¨d_DCT
, (
j_com¥ess_±r
 
cöfo
,

106 
j≥g_comp⁄ít_öfo
 * 
comµå
,

107 
JSAMPARRAY
 
ßm∂e_d©a
, 
JBLOCKROW
 
c€f_blocks
,

108 
JDIMENSION
 
°¨t_row
, JDIMENSION 
°¨t_cﬁ
,

109 
JDIMENSION
 
num_blocks
));

113 
	sj≥g_íå›y_ícodî
 {

114 
JMETHOD
(, 
°¨t_∑ss
, (
j_com¥ess_±r
 
cöfo
, 
boﬁón
 
g©hî_°©i°ics
));

115 
JMETHOD
(
boﬁón
, 
ícode_mcu
, (
j_com¥ess_±r
 
cöfo
, 
JBLOCKROW
 *
MCU_d©a
));

116 
JMETHOD
(, 
föish_∑ss
, (
j_com¥ess_±r
 
cöfo
));

120 
	sj≥g_m¨kî_wrôî
 {

121 
JMETHOD
(, 
wrôe_fûe_hódî
, (
j_com¥ess_±r
 
cöfo
));

122 
JMETHOD
(, 
wrôe_‰ame_hódî
, (
j_com¥ess_±r
 
cöfo
));

123 
JMETHOD
(, 
wrôe_sˇn_hódî
, (
j_com¥ess_±r
 
cöfo
));

124 
JMETHOD
(, 
wrôe_fûe_åaûî
, (
j_com¥ess_±r
 
cöfo
));

125 
JMETHOD
(, 
wrôe_èbÀs_⁄ly
, (
j_com¥ess_±r
 
cöfo
));

128 
JMETHOD
(, 
wrôe_m¨kî_hódî
, (
j_com¥ess_±r
 
cöfo
, 
m¨kî
,

129 
d©Æí
));

130 
JMETHOD
(, 
wrôe_m¨kî_byã
, (
j_com¥ess_±r
 
cöfo
, 
vÆ
));

137 
	sj≥g_decomp_ma°î
 {

138 
JMETHOD
(, 
¥ï¨e_f‹_ouçut_∑ss
, (
j_decom¥ess_±r
 
cöfo
));

139 
JMETHOD
(, 
föish_ouçut_∑ss
, (
j_decom¥ess_±r
 
cöfo
));

142 
boﬁón
 
	mis_dummy_∑ss
;

146 
	sj≥g_öput_c⁄åﬁÀr
 {

147 
JMETHOD
(, 
c⁄sume_öput
, (
j_decom¥ess_±r
 
cöfo
));

148 
JMETHOD
(, 
ª£t_öput_c⁄åﬁÀr
, (
j_decom¥ess_±r
 
cöfo
));

149 
JMETHOD
(, 
°¨t_öput_∑ss
, (
j_decom¥ess_±r
 
cöfo
));

150 
JMETHOD
(, 
föish_öput_∑ss
, (
j_decom¥ess_±r
 
cöfo
));

153 
boﬁón
 
	mhas_mu…ùÀ_sˇns
;

154 
boﬁón
 
	meoi_ªached
;

158 
	sj≥g_d_maö_c⁄åﬁÀr
 {

159 
JMETHOD
(, 
°¨t_∑ss
, (
j_decom¥ess_±r
 
cöfo
, 
J_BUF_MODE
 
∑ss_mode
));

160 
JMETHOD
(, 
¥o˚ss_d©a
, (
j_decom¥ess_±r
 
cöfo
,

161 
JSAMPARRAY
 
ouçut_buf
, 
JDIMENSION
 *
out_row_˘r
,

162 
JDIMENSION
 
out_rows_avaû
));

166 
	sj≥g_d_c€f_c⁄åﬁÀr
 {

167 
JMETHOD
(, 
°¨t_öput_∑ss
, (
j_decom¥ess_±r
 
cöfo
));

168 
JMETHOD
(, 
c⁄sume_d©a
, (
j_decom¥ess_±r
 
cöfo
));

169 
JMETHOD
(, 
°¨t_ouçut_∑ss
, (
j_decom¥ess_±r
 
cöfo
));

170 
JMETHOD
(, 
decom¥ess_d©a
, (
j_decom¥ess_±r
 
cöfo
,

171 
JSAMPIMAGE
 
ouçut_buf
));

173 
jvút_b¨øy_±r
 *
	mc€f_¨øys
;

177 
	sj≥g_d_po°_c⁄åﬁÀr
 {

178 
JMETHOD
(, 
°¨t_∑ss
, (
j_decom¥ess_±r
 
cöfo
, 
J_BUF_MODE
 
∑ss_mode
));

179 
JMETHOD
(, 
po°_¥o˚ss_d©a
, (
j_decom¥ess_±r
 
cöfo
,

180 
JSAMPIMAGE
 
öput_buf
,

181 
JDIMENSION
 *
ö_row_group_˘r
,

182 
JDIMENSION
 
ö_row_groups_avaû
,

183 
JSAMPARRAY
 
ouçut_buf
,

184 
JDIMENSION
 *
out_row_˘r
,

185 
JDIMENSION
 
out_rows_avaû
));

189 
	sj≥g_m¨kî_ªadî
 {

190 
JMETHOD
(, 
ª£t_m¨kî_ªadî
, (
j_decom¥ess_±r
 
cöfo
));

195 
JMETHOD
(, 
ªad_m¨kîs
, (
j_decom¥ess_±r
 
cöfo
));

197 
j≥g_m¨kî_∑r£r_mëhod
 
	mªad_ª°¨t_m¨kî
;

202 
boﬁón
 
	mßw_SOI
;

203 
boﬁón
 
	mßw_SOF
;

204 
	m√xt_ª°¨t_num
;

205 
	mdisˇrded_byãs
;

209 
	sj≥g_íå›y_decodî
 {

210 
JMETHOD
(, 
°¨t_∑ss
, (
j_decom¥ess_±r
 
cöfo
));

211 
JMETHOD
(
boﬁón
, 
decode_mcu
, (
j_decom¥ess_±r
 
cöfo
,

212 
JBLOCKROW
 *
MCU_d©a
));

216 
boﬁón
 
	mösufficõ¡_d©a
;

220 
JMETHOD
(, 
	tövî£_DCT_mëhod_±r
,

221 (
	tj_decom¥ess_±r
 
	tcöfo
, 
	tj≥g_comp⁄ít_öfo
 * 
	tcomµå
,

222 
	tJCOEFPTR
 
	tc€f_block
,

223 
	tJSAMPARRAY
 
	touçut_buf
, 
	tJDIMENSION
 
	touçut_cﬁ
));

225 
	sj≥g_övî£_d˘
 {

226 
JMETHOD
(, 
°¨t_∑ss
, (
j_decom¥ess_±r
 
cöfo
));

228 
övî£_DCT_mëhod_±r
 
	mövî£_DCT
[
MAX_COMPONENTS
];

232 
	sj≥g_upßm∂î
 {

233 
JMETHOD
(, 
°¨t_∑ss
, (
j_decom¥ess_±r
 
cöfo
));

234 
JMETHOD
(, 
upßm∂e
, (
j_decom¥ess_±r
 
cöfo
,

235 
JSAMPIMAGE
 
öput_buf
,

236 
JDIMENSION
 *
ö_row_group_˘r
,

237 
JDIMENSION
 
ö_row_groups_avaû
,

238 
JSAMPARRAY
 
ouçut_buf
,

239 
JDIMENSION
 *
out_row_˘r
,

240 
JDIMENSION
 
out_rows_avaû
));

242 
boﬁón
 
	m√ed_c⁄ãxt_rows
;

246 
	sj≥g_cﬁ‹_dec⁄vîãr
 {

247 
JMETHOD
(, 
°¨t_∑ss
, (
j_decom¥ess_±r
 
cöfo
));

248 
JMETHOD
(, 
cﬁ‹_c⁄vît
, (
j_decom¥ess_±r
 
cöfo
,

249 
JSAMPIMAGE
 
öput_buf
, 
JDIMENSION
 
öput_row
,

250 
JSAMPARRAY
 
ouçut_buf
, 
num_rows
));

254 
	sj≥g_cﬁ‹_qu™tizî
 {

255 
JMETHOD
(, 
°¨t_∑ss
, (
j_decom¥ess_±r
 
cöfo
, 
boﬁón
 
is_¥e_sˇn
));

256 
JMETHOD
(, 
cﬁ‹_qu™tize
, (
j_decom¥ess_±r
 
cöfo
,

257 
JSAMPARRAY
 
öput_buf
, JSAMPARRAY 
ouçut_buf
,

258 
num_rows
));

259 
JMETHOD
(, 
föish_∑ss
, (
j_decom¥ess_±r
 
cöfo
));

260 
JMETHOD
(, 
√w_cﬁ‹_m≠
, (
j_decom¥ess_±r
 
cöfo
));

266 #unde‡
MAX


267 
	#MAX
(
a
,
b
Ë(◊Ë> (bË? (aË: (b))

	)

268 #unde‡
MIN


269 
	#MIN
(
a
,
b
Ë(◊Ë< (bË? (aË: (b))

	)

282 #ifde‡
RIGHT_SHIFT_IS_UNSIGNED


283 
	#SHIFT_TEMPS
 
INT32
 
shi·_ãmp
;

	)

284 
	#RIGHT_SHIFT
(
x
,
sh·
) \

285 ((
shi·_ãmp
 = (
x
)) < 0 ? \

286 (
shi·_ãmp
 >> (
sh·
)Ë| ((~((
INT32
) 0)) << (32-(shft))) : \

287 (
shi·_ãmp
 >> (
sh·
)))

	)

289 
	#SHIFT_TEMPS


	)

290 
	#RIGHT_SHIFT
(
x
,
sh·
Ë((xË>> (sh·))

	)

296 #ifde‡
NEED_SHORT_EXTERNAL_NAMES


297 
	#jöô_com¥ess_ma°î
 
jICom¥ess


	)

298 
	#jöô_c_ma°î_c⁄åﬁ
 
jICMa°î


	)

299 
	#jöô_c_maö_c⁄åﬁÀr
 
jICMaöC


	)

300 
	#jöô_c_¥ï_c⁄åﬁÀr
 
jICPªpC


	)

301 
	#jöô_c_c€f_c⁄åﬁÀr
 
jICC€fC


	)

302 
	#jöô_cﬁ‹_c⁄vîãr
 
jICCﬁ‹


	)

303 
	#jöô_downßm∂î
 
jIDownßm∂î


	)

304 
	#jöô_f‹w¨d_d˘
 
jIFDCT


	)

305 
	#jöô_huff_ícodî
 
jIHEncodî


	)

306 
	#jöô_phuff_ícodî
 
jIPHEncodî


	)

307 
	#jöô_m¨kî_wrôî
 
jIMWrôî


	)

308 
	#jöô_ma°î_decom¥ess
 
jIDMa°î


	)

309 
	#jöô_d_maö_c⁄åﬁÀr
 
jIDMaöC


	)

310 
	#jöô_d_c€f_c⁄åﬁÀr
 
jIDC€fC


	)

311 
	#jöô_d_po°_c⁄åﬁÀr
 
jIDPo°C


	)

312 
	#jöô_öput_c⁄åﬁÀr
 
jIInCér


	)

313 
	#jöô_m¨kî_ªadî
 
jIMRódî


	)

314 
	#jöô_huff_decodî
 
jIHDecodî


	)

315 
	#jöô_phuff_decodî
 
jIPHDecodî


	)

316 
	#jöô_övî£_d˘
 
jIIDCT


	)

317 
	#jöô_upßm∂î
 
jIUpßm∂î


	)

318 
	#jöô_cﬁ‹_dec⁄vîãr
 
jIDCﬁ‹


	)

319 
	#jöô_1∑ss_qu™tizî
 
jI1Qu™t


	)

320 
	#jöô_2∑ss_qu™tizî
 
jI2Qu™t


	)

321 
	#jöô_mîged_upßm∂î
 
jIMUpßm∂î


	)

322 
	#jöô_mem‹y_mgr
 
jIMemMgr


	)

323 
	#jdiv_round_up
 
jDivRound


	)

324 
	#jround_up
 
jRound


	)

325 
	#jc›y_ßm∂e_rows
 
jC›ySam∂es


	)

326 
	#jc›y_block_row
 
jC›yBlocks


	)

327 
	#jzîo_Ár
 
jZîoF¨


	)

328 
	#j≥g_zigzag_‹dî
 
jZIGTabÀ


	)

329 
	#j≥g_«tuøl_‹dî
 
jZAGTabÀ


	)

334 
	$EXTERN
(Ë
jöô_com¥ess_ma°î
 
	`JPP
((
j_com¥ess_±r
 
cöfo
));

335 
	$EXTERN
(Ë
jöô_c_ma°î_c⁄åﬁ
 
	`JPP
((
j_com¥ess_±r
 
cöfo
,

336 
boﬁón
 
å™scode_⁄ly
));

337 
	$EXTERN
(Ë
jöô_c_maö_c⁄åﬁÀr
 
	`JPP
((
j_com¥ess_±r
 
cöfo
,

338 
boﬁón
 
√ed_fuŒ_buf„r
));

339 
	$EXTERN
(Ë
jöô_c_¥ï_c⁄åﬁÀr
 
	`JPP
((
j_com¥ess_±r
 
cöfo
,

340 
boﬁón
 
√ed_fuŒ_buf„r
));

341 
	$EXTERN
(Ë
jöô_c_c€f_c⁄åﬁÀr
 
	`JPP
((
j_com¥ess_±r
 
cöfo
,

342 
boﬁón
 
√ed_fuŒ_buf„r
));

343 
	$EXTERN
(Ë
jöô_cﬁ‹_c⁄vîãr
 
	`JPP
((
j_com¥ess_±r
 
cöfo
));

344 
	$EXTERN
(Ë
jöô_downßm∂î
 
	`JPP
((
j_com¥ess_±r
 
cöfo
));

345 
	$EXTERN
(Ë
jöô_f‹w¨d_d˘
 
	`JPP
((
j_com¥ess_±r
 
cöfo
));

346 
	$EXTERN
(Ë
jöô_huff_ícodî
 
	`JPP
((
j_com¥ess_±r
 
cöfo
));

347 
	$EXTERN
(Ë
jöô_phuff_ícodî
 
	`JPP
((
j_com¥ess_±r
 
cöfo
));

348 
	$EXTERN
(Ë
jöô_m¨kî_wrôî
 
	`JPP
((
j_com¥ess_±r
 
cöfo
));

350 
	$EXTERN
(Ë
jöô_ma°î_decom¥ess
 
	`JPP
((
j_decom¥ess_±r
 
cöfo
));

351 
	$EXTERN
(Ë
jöô_d_maö_c⁄åﬁÀr
 
	`JPP
((
j_decom¥ess_±r
 
cöfo
,

352 
boﬁón
 
√ed_fuŒ_buf„r
));

353 
	$EXTERN
(Ë
jöô_d_c€f_c⁄åﬁÀr
 
	`JPP
((
j_decom¥ess_±r
 
cöfo
,

354 
boﬁón
 
√ed_fuŒ_buf„r
));

355 
	$EXTERN
(Ë
jöô_d_po°_c⁄åﬁÀr
 
	`JPP
((
j_decom¥ess_±r
 
cöfo
,

356 
boﬁón
 
√ed_fuŒ_buf„r
));

357 
	$EXTERN
(Ë
jöô_öput_c⁄åﬁÀr
 
	`JPP
((
j_decom¥ess_±r
 
cöfo
));

358 
	$EXTERN
(Ë
jöô_m¨kî_ªadî
 
	`JPP
((
j_decom¥ess_±r
 
cöfo
));

359 
	$EXTERN
(Ë
jöô_huff_decodî
 
	`JPP
((
j_decom¥ess_±r
 
cöfo
));

360 
	$EXTERN
(Ë
jöô_phuff_decodî
 
	`JPP
((
j_decom¥ess_±r
 
cöfo
));

361 
	$EXTERN
(Ë
jöô_övî£_d˘
 
	`JPP
((
j_decom¥ess_±r
 
cöfo
));

362 
	$EXTERN
(Ë
jöô_upßm∂î
 
	`JPP
((
j_decom¥ess_±r
 
cöfo
));

363 
	$EXTERN
(Ë
jöô_cﬁ‹_dec⁄vîãr
 
	`JPP
((
j_decom¥ess_±r
 
cöfo
));

364 
	$EXTERN
(Ë
jöô_1∑ss_qu™tizî
 
	`JPP
((
j_decom¥ess_±r
 
cöfo
));

365 
	$EXTERN
(Ë
jöô_2∑ss_qu™tizî
 
	`JPP
((
j_decom¥ess_±r
 
cöfo
));

366 
	$EXTERN
(Ë
jöô_mîged_upßm∂î
 
	`JPP
((
j_decom¥ess_±r
 
cöfo
));

368 
	$EXTERN
(Ë
jöô_mem‹y_mgr
 
	`JPP
((
j_comm⁄_±r
 
cöfo
));

371 
	$EXTERN
(Ë
jdiv_round_up
 
	`JPP
((
a
, 
b
));

372 
	$EXTERN
(Ë
jround_up
 
	`JPP
((
a
, 
b
));

373 
	$EXTERN
(Ë
jc›y_ßm∂e_rows
 
	`JPP
((
JSAMPARRAY
 
öput_¨øy
, 
sour˚_row
,

374 
JSAMPARRAY
 
ouçut_¨øy
, 
de°_row
,

375 
num_rows
, 
JDIMENSION
 
num_cﬁs
));

376 
	$EXTERN
(Ë
jc›y_block_row
 
	`JPP
((
JBLOCKROW
 
öput_row
, JBLOCKROW 
ouçut_row
,

377 
JDIMENSION
 
num_blocks
));

378 
	$EXTERN
(Ë
jzîo_Ár
 
	`JPP
((
FAR
 * 
èrgë
, 
size_t
 
byã°ozîo
));

381 c⁄° 
j≥g_zigzag_‹dî
[];

383 c⁄° 
j≥g_«tuøl_‹dî
[];

387 #ifde‡
INCOMPLETE_TYPES_BROKEN


388 #i‚de‡
AM_MEMORY_MANAGER


389 
	sjvút_ßºay_c⁄åﬁ
 { 
dummy
; };

390 
	sjvút_b¨øy_c⁄åﬁ
 { 
dummy
; };

	@/usr/include/libio.h

29 #i‚de‡
_IO_STDIO_H


30 
	#_IO_STDIO_H


	)

32 
	~<_G_c⁄fig.h
>

34 
	#_IO_pos_t
 
_G_Âos_t


	)

35 
	#_IO_Âos_t
 
_G_Âos_t


	)

36 
	#_IO_Âos64_t
 
_G_Âos64_t


	)

37 
	#_IO_size_t
 
_G_size_t


	)

38 
	#_IO_ssize_t
 
_G_ssize_t


	)

39 
	#_IO_off_t
 
_G_off_t


	)

40 
	#_IO_off64_t
 
_G_off64_t


	)

41 
	#_IO_pid_t
 
_G_pid_t


	)

42 
	#_IO_uid_t
 
_G_uid_t


	)

43 
	#_IO_ic⁄v_t
 
_G_ic⁄v_t


	)

44 
	#_IO_HAVE_SYS_WAIT
 
_G_HAVE_SYS_WAIT


	)

45 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

46 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

47 
	#_IO_va_li°
 
_G_va_li°


	)

48 
	#_IO_wöt_t
 
_G_wöt_t


	)

50 #ifde‡
_G_NEED_STDARG_H


52 
	#__√ed___va_li°


	)

53 
	~<°d¨g.h
>

54 #ifde‡
__GNUC_VA_LIST


55 #unde‡
_IO_va_li°


56 
	#_IO_va_li°
 
__gnuc_va_li°


	)

60 #i‚de‡
__P


61 #i‡
_G_HAVE_SYS_CDEFS


62 
	~<sys/cdefs.h
>

64 #ifde‡
__STDC__


65 
	#__P
(
p
Ë
	)
p

66 
	#__PMT
(
p
Ë
	)
p

68 
	#__P
(
p
Ë()

	)

69 
	#__PMT
(
p
Ë()

	)

75 #i‚de‡
_PARAMS


76 
	#_PARAMS
(
¥Ÿos
Ë
	`__P
’rŸos)

	)

79 #i‚de‡
__STDC__


81 c⁄°

	)

84 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

85 #i‚de‡
_G_HAVE_PRINTF_FP


86 
	#_IO_USE_DTOA
 1

	)

89 #i‚de‡
EOF


90 
	#EOF
 (-1)

	)

92 #i‚de‡
NULL


93 #i‡
deföed
 
__GNUG__
 && \

94 (
	g__GNUC__
 > 2 || (__GNUC__ =2 && 
__GNUC_MINOR__
 >= 8))

95 
	#NULL
 (
__nuŒ
)

	)

97 #i‡!
deföed
(
__˝lu•lus
)

98 
	#NULL
 ((*)0)

	)

100 
	#NULL
 (0)

	)

105 
	#_IOS_INPUT
 1

	)

106 
	#_IOS_OUTPUT
 2

	)

107 
	#_IOS_ATEND
 4

	)

108 
	#_IOS_APPEND
 8

	)

109 
	#_IOS_TRUNC
 16

	)

110 
	#_IOS_NOCREATE
 32

	)

111 
	#_IOS_NOREPLACE
 64

	)

112 
	#_IOS_BIN
 128

	)

120 
	#_IO_MAGIC
 0xFBAD0000

	)

121 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

122 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

123 
	#_IO_USER_BUF
 1

	)

124 
	#_IO_UNBUFFERED
 2

	)

125 
	#_IO_NO_READS
 4

	)

126 
	#_IO_NO_WRITES
 8

	)

127 
	#_IO_EOF_SEEN
 0x10

	)

128 
	#_IO_ERR_SEEN
 0x20

	)

129 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

130 
	#_IO_LINKED
 0x80

	)

131 
	#_IO_IN_BACKUP
 0x100

	)

132 
	#_IO_LINE_BUF
 0x200

	)

133 
	#_IO_TIED_PUT_GET
 0x400

	)

134 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

135 
	#_IO_IS_APPENDING
 0x1000

	)

136 
	#_IO_IS_FILEBUF
 0x2000

	)

137 
	#_IO_BAD_SEEN
 0x4000

	)

138 
	#_IO_USER_LOCK
 0x8000

	)

140 
	#_IO_FLAGS2_MMAP
 1

	)

141 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

142 #ifde‡
_LIBC


143 
	#_IO_FLAGS2_FORTIFY
 4

	)

145 
	#_IO_FLAGS2_USER_WBUF
 8

	)

148 
	#_IO_SKIPWS
 01

	)

149 
	#_IO_LEFT
 02

	)

150 
	#_IO_RIGHT
 04

	)

151 
	#_IO_INTERNAL
 010

	)

152 
	#_IO_DEC
 020

	)

153 
	#_IO_OCT
 040

	)

154 
	#_IO_HEX
 0100

	)

155 
	#_IO_SHOWBASE
 0200

	)

156 
	#_IO_SHOWPOINT
 0400

	)

157 
	#_IO_UPPERCASE
 01000

	)

158 
	#_IO_SHOWPOS
 02000

	)

159 
	#_IO_SCIENTIFIC
 04000

	)

160 
	#_IO_FIXED
 010000

	)

161 
	#_IO_UNITBUF
 020000

	)

162 
	#_IO_STDIO
 040000

	)

163 
	#_IO_DONT_CLOSE
 0100000

	)

164 
	#_IO_BOOLALPHA
 0200000

	)

167 
_IO_jump_t
; 
	g_IO_FILE
;

170 #ifde‡
_IO_MTSAFE_IO


171 #i‡
deföed
 
__GLIBC__
 && __GLIBC__ >= 2

172 
	~<bôs/°dio-lock.h
>

177 
	t_IO_lock_t
;

183 
	s_IO_m¨kî
 {

184 
_IO_m¨kî
 *
	m_√xt
;

185 
_IO_FILE
 *
	m_sbuf
;

189 
	m_pos
;

191 
£t_°ªampos
(
°ªampos
 
•
Ë{ 
	m_•os
 = sp; }

192 
£t_off£t
(
off£t
Ë{ 
	m_pos
 = off£t; 
	m_•os
 = (
°ªampos
)(-2); }

193 
	mpublic
:

194 
°ªamm¨kî
(
°ªambuf
 *
sb
);

195 ~
°ªamm¨kî
();

196 
ßvög
(Ë{  
	m_•os
 == -2; }

197 
dñè
(
°ªamm¨kî
&);

198 
dñè
();

203 
	e__codecvt_ªsu…


205 
	m__codecvt_ok
,

206 
	m__codecvt_∑πül
,

207 
	m__codecvt_îr‹
,

208 
	m__codecvt_noc⁄v


211 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


214 
	s_IO_codecvt


216 (*
	m__codecvt_de°r
Ë(
	m_IO_codecvt
 *);

217 
__codecvt_ªsu…
 (*
__codecvt_do_out
Ë(
	m_IO_codecvt
 *,

218 
	m__mb°©e_t
 *,

219 c⁄° 
	mwch¨_t
 *,

220 c⁄° 
	mwch¨_t
 *,

221 c⁄° 
	mwch¨_t
 **, *,

223 
__codecvt_ªsu…
 (*
__codecvt_do_unshi·
Ë(
	m_IO_codecvt
 *,

224 
	m__mb°©e_t
 *, *,

226 
__codecvt_ªsu…
 (*
__codecvt_do_ö
Ë(
	m_IO_codecvt
 *,

227 
	m__mb°©e_t
 *,

229 c⁄° **, 
	mwch¨_t
 *,

230 
	mwch¨_t
 *, wchar_t **);

231 (*
	m__codecvt_do_ícodög
Ë(
	m_IO_codecvt
 *);

232 (*
	m__codecvt_do_Æways_noc⁄v
Ë(
	m_IO_codecvt
 *);

233 (*
	m__codecvt_do_Àngth
Ë(
	m_IO_codecvt
 *, 
	m__mb°©e_t
 *,

234 c⁄° *, c⁄° *, 
	m_IO_size_t
);

235 (*
	m__codecvt_do_max_Àngth
Ë(
	m_IO_codecvt
 *);

237 
_IO_ic⁄v_t
 
	m__cd_ö
;

238 
_IO_ic⁄v_t
 
	m__cd_out
;

242 
	s_IO_wide_d©a


244 
wch¨_t
 *
	m_IO_ªad_±r
;

245 
wch¨_t
 *
	m_IO_ªad_íd
;

246 
wch¨_t
 *
	m_IO_ªad_ba£
;

247 
wch¨_t
 *
	m_IO_wrôe_ba£
;

248 
wch¨_t
 *
	m_IO_wrôe_±r
;

249 
wch¨_t
 *
	m_IO_wrôe_íd
;

250 
wch¨_t
 *
	m_IO_buf_ba£
;

251 
wch¨_t
 *
	m_IO_buf_íd
;

253 
wch¨_t
 *
	m_IO_ßve_ba£
;

254 
wch¨_t
 *
	m_IO_backup_ba£
;

256 
wch¨_t
 *
	m_IO_ßve_íd
;

258 
__mb°©e_t
 
	m_IO_°©e
;

259 
__mb°©e_t
 
	m_IO_œ°_°©e
;

260 
_IO_codecvt
 
	m_codecvt
;

262 
wch¨_t
 
	m_sh‹tbuf
[1];

264 c⁄° 
_IO_jump_t
 *
	m_wide_vèbÀ
;

268 
	s_IO_FILE
 {

269 
	m_Êags
;

270 
	#_IO_fûe_Êags
 
_Êags


	)

274 * 
	m_IO_ªad_±r
;

275 * 
	m_IO_ªad_íd
;

276 * 
	m_IO_ªad_ba£
;

277 * 
	m_IO_wrôe_ba£
;

278 * 
	m_IO_wrôe_±r
;

279 * 
	m_IO_wrôe_íd
;

280 * 
	m_IO_buf_ba£
;

281 * 
	m_IO_buf_íd
;

283 *
	m_IO_ßve_ba£
;

284 *
	m_IO_backup_ba£
;

285 *
	m_IO_ßve_íd
;

287 
_IO_m¨kî
 *
	m_m¨kîs
;

289 
_IO_FILE
 *
	m_chaö
;

291 
	m_fûío
;

293 
	m_blksize
;

295 
	m_Êags2
;

297 
_IO_off_t
 
	m_ﬁd_off£t
;

299 
	#__HAVE_COLUMN


	)

301 
	m_cur_cﬁumn
;

302 sig√d 
	m_vèbÀ_off£t
;

303 
	m_sh‹tbuf
[1];

307 
_IO_lock_t
 *
	m_lock
;

308 #ifde‡
_IO_USE_OLD_IO_FILE


311 
	s_IO_FILE_com∂ëe


313 
_IO_FILE
 
	m_fûe
;

315 #i‡
deföed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

316 
_IO_off64_t
 
	m_off£t
;

317 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


319 
_IO_codecvt
 *
	m_codecvt
;

320 
_IO_wide_d©a
 *
	m_wide_d©a
;

321 
_IO_FILE
 *
	m_‰ìªs_li°
;

322 *
	m_‰ìªs_buf
;

323 
size_t
 
	m_‰ìªs_size
;

325 *
	m__∑d1
;

326 *
	m__∑d2
;

327 *
	m__∑d3
;

328 *
	m__∑d4
;

329 
size_t
 
	m__∑d5
;

331 
	m_mode
;

333 
	m_unu£d2
[15 *  (Ë- 4 *  (*Ë-  (
size_t
)];

337 #i‚de‡
__˝lu•lus


338 
_IO_FILE
 
	t_IO_FILE
;

341 
	g_IO_FILE_∂us
;

343 
_IO_FILE_∂us
 
_IO_2_1_°dö_
;

344 
_IO_FILE_∂us
 
_IO_2_1_°dout_
;

345 
_IO_FILE_∂us
 
_IO_2_1_°dîr_
;

346 #i‚de‡
_LIBC


347 
	#_IO_°dö
 ((
_IO_FILE
*)(&
_IO_2_1_°dö_
))

	)

348 
	#_IO_°dout
 ((
_IO_FILE
*)(&
_IO_2_1_°dout_
))

	)

349 
	#_IO_°dîr
 ((
_IO_FILE
*)(&
_IO_2_1_°dîr_
))

	)

351 
_IO_FILE
 *
_IO_°dö
 
©åibuã_hiddí
;

352 
_IO_FILE
 *
_IO_°dout
 
©åibuã_hiddí
;

353 
_IO_FILE
 *
_IO_°dîr
 
©åibuã_hiddí
;

361 
__ssize_t
 
	t__io_ªad_‚
 (*
	t__cookõ
, *
	t__buf
, 
	tsize_t
 
	t__nbyãs
);

369 
__ssize_t
 
	t__io_wrôe_‚
 (*
	t__cookõ
, 
	t__c⁄°
 *
	t__buf
,

370 
	tsize_t
 
	t__n
);

378 
	t__io_£ek_‚
 (*
	t__cookõ
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

381 
	t__io_˛o£_‚
 (*
	t__cookõ
);

384 #ifde‡
_GNU_SOURCE


386 
__io_ªad_‚
 
	tcookõ_ªad_fun˘i⁄_t
;

387 
__io_wrôe_‚
 
	tcookõ_wrôe_fun˘i⁄_t
;

388 
__io_£ek_‚
 
	tcookõ_£ek_fun˘i⁄_t
;

389 
__io_˛o£_‚
 
	tcookõ_˛o£_fun˘i⁄_t
;

394 
__io_ªad_‚
 *
	mªad
;

395 
__io_wrôe_‚
 *
	mwrôe
;

396 
__io_£ek_‚
 *
	m£ek
;

397 
__io_˛o£_‚
 *
	m˛o£
;

398 } 
	t_IO_cookõ_io_fun˘i⁄s_t
;

399 
_IO_cookõ_io_fun˘i⁄s_t
 
	tcookõ_io_fun˘i⁄s_t
;

401 
	g_IO_cookõ_fûe
;

404 
_IO_cookõ_öô
 (
_IO_cookõ_fûe
 *
__cfûe
, 
__ªad_wrôe
,

405 *
__cookõ
, 
_IO_cookõ_io_fun˘i⁄s_t
 
__‚s
);

409 #ifde‡
__˝lu•lus


413 
__undîÊow
 (
_IO_FILE
 *);

414 
__uÊow
 (
_IO_FILE
 *);

415 
__ovîÊow
 (
_IO_FILE
 *, );

416 
_IO_wöt_t
 
__wundîÊow
 (
_IO_FILE
 *);

417 
_IO_wöt_t
 
__wuÊow
 (
_IO_FILE
 *);

418 
_IO_wöt_t
 
__wovîÊow
 (
_IO_FILE
 *, _IO_wint_t);

420 #i‡ 
__GNUC__
 >= 3

421 
	#_IO_BE
(
ex¥
, 
ªs
Ë
	`__buûtö_ex≥˘
 (”x¥),Ñes)

	)

423 
	#_IO_BE
(
ex¥
, 
ªs
Ë”x¥)

	)

426 
	#_IO_gëc_u∆ocked
(
_Â
) \

427 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

428 ? 
	`__uÊow
 (
_Â
Ë: *(*Ë(_Â)->
_IO_ªad_±r
++)

	)

429 
	#_IO_≥ekc_u∆ocked
(
_Â
) \

430 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

431 && 
	`__undîÊow
 (
_Â
Ë=
EOF
 ? EOF \

432 : *(*Ë(
_Â
)->
_IO_ªad_±r
)

	)

433 
	#_IO_putc_u∆ocked
(
_ch
, 
_Â
) \

434 (
	`_IO_BE
 ((
_Â
)->
_IO_wrôe_±r
 >(_Â)->
_IO_wrôe_íd
, 0) \

435 ? 
	`__ovîÊow
 (
_Â
, (Ë(
_ch
)) \

436 : (Ë(*(
_Â
)->
_IO_wrôe_±r
++ = (
_ch
)))

	)

438 
	#_IO_gëwc_u∆ocked
(
_Â
) \

439 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
->
_IO_ªad_±r
 >(_Â)->_wide_d©a->
_IO_ªad_íd
,\

441 ? 
	`__wuÊow
 (
_Â
Ë: (
_IO_wöt_t
Ë*(_Â)->
_wide_d©a
->
_IO_ªad_±r
++)

	)

442 
	#_IO_putwc_u∆ocked
(
_wch
, 
_Â
) \

443 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
 \

444 >(
_Â
)->
_wide_d©a
->
_IO_wrôe_íd
, 0) \

445 ? 
	`__wovîÊow
 (
_Â
, 
_wch
) \

446 : (
_IO_wöt_t
Ë(*(
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
++ = (
_wch
)))

	)

448 
	#_IO_„of_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_EOF_SEEN
Ë!0)

	)

449 
	#_IO_„º‹_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_ERR_SEEN
Ë!0)

	)

451 
_IO_gëc
 (
_IO_FILE
 *
__Â
);

452 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__Â
);

453 
_IO_„of
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

454 
_IO_„º‹
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

456 
_IO_≥ekc_locked
 (
_IO_FILE
 *
__Â
);

459 
	#_IO_PENDING_OUTPUT_COUNT
(
_Â
) \

460 ((
_Â
)->
_IO_wrôe_±r
 - (_Â)->
_IO_wrôe_ba£
)

	)

462 
_IO_Êockfûe
 (
_IO_FILE
 *Ë
__THROW
;

463 
_IO_fu∆ockfûe
 (
_IO_FILE
 *Ë
__THROW
;

464 
_IO_·rylockfûe
 (
_IO_FILE
 *Ë
__THROW
;

466 #ifde‡
_IO_MTSAFE_IO


467 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_locked
 (_Â)

	)

468 
	#_IO_Êockfûe
(
_Â
) \

469 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_Êockfûe
 (_Â)

	)

470 
	#_IO_fu∆ockfûe
(
_Â
) \

471 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_fu∆ockfûe
 (_Â)

	)

473 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_u∆ocked
 (_Â)

	)

474 
	#_IO_Êockfûe
(
_Â
Ë

	)

475 
	#_IO_fu∆ockfûe
(
_Â
Ë

	)

476 
	#_IO_·rylockfûe
(
_Â
Ë

	)

477 
	#_IO_˛ónup_ªgi⁄_°¨t
(
_f˘
, 
_Â
Ë

	)

478 
	#_IO_˛ónup_ªgi⁄_íd
(
_Doô
Ë

	)

481 
_IO_vfsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, const * __restrict,

482 
_IO_va_li°
, *
__ª°ri˘
);

483 
_IO_vÂrötf
 (
_IO_FILE
 *
__ª°ri˘
, const *__restrict,

484 
_IO_va_li°
);

485 
_IO_ssize_t
 
_IO_∑dn
 (
_IO_FILE
 *, , _IO_ssize_t);

486 
_IO_size_t
 
_IO_sgën
 (
_IO_FILE
 *, *, _IO_size_t);

488 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

489 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

491 
_IO_‰ì_backup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

493 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


494 
_IO_wöt_t
 
_IO_gëwc
 (
_IO_FILE
 *
__Â
);

495 
_IO_wöt_t
 
_IO_putwc
 (
wch¨_t
 
__wc
, 
_IO_FILE
 *
__Â
);

496 
_IO_fwide
 (
_IO_FILE
 *
__Â
, 
__mode
Ë
__THROW
;

497 #i‡
__GNUC__
 >= 2

500 #i‡
deföed
 
_LIBC
 && deföed 
SHARED


501 
	~<shlib-com∑t.h
>

502 #i‡
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

503 
	#_IO_fwide_maybe_öcom∑tibÀ
 \

504 (
	`__buûtö_ex≥˘
 (&
_IO_°dö_u£d
 =
NULL
, 0))

	)

505 c⁄° 
_IO_°dö_u£d
;

506 
wók_exã∫
 (
_IO_°dö_u£d
);

509 #i‚de‡
_IO_fwide_maybe_öcom∑tibÀ


510 
	#_IO_fwide_maybe_öcom∑tibÀ
 (0)

	)

514 
	#_IO_fwide
(
__Â
, 
__mode
) \

515 ({ 
__ªsu…
 = (
__mode
); \

516 i‡(
__ªsu…
 < 0 && ! 
_IO_fwide_maybe_öcom∑tibÀ
) \

518 i‡((
__Â
)->
_mode
 == 0) \

520 (
__Â
)->
_mode
 = -1; \

521 
__ªsu…
 = (
__Â
)->
_mode
; \

523 i‡(
	`__buûtö_c⁄°™t_p
 (
__mode
) && (__mode) == 0) \

524 
__ªsu…
 = 
_IO_fwide_maybe_öcom∑tibÀ
 ? -1 : (
__Â
)->
_mode
; \

526 
__ªsu…
 = 
	`_IO_fwide
 (
__Â
, __result); \

527 
__ªsu…
; })

	)

530 
_IO_vfwsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, c⁄° 
wch¨_t
 * __restrict,

531 
_IO_va_li°
, *
__ª°ri˘
);

532 
_IO_vfw¥ötf
 (
_IO_FILE
 *
__ª°ri˘
, c⁄° 
wch¨_t
 *__restrict,

533 
_IO_va_li°
);

534 
_IO_ssize_t
 
_IO_w∑dn
 (
_IO_FILE
 *, 
wöt_t
, _IO_ssize_t);

535 
_IO_‰ì_wbackup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

538 #ifde‡
__LDBL_COMPAT


539 
	~<bôs/libio-ldbl.h
>

542 #ifde‡
__˝lu•lus


	@/usr/include/linux/i2c.h

26 #i‚de‡
_LINUX_I2C_H


27 
	#_LINUX_I2C_H


	)

29 
	~<löux/ty≥s.h
>

34 
	si2c_msg
 {

35 
__u16
 
	maddr
;

36 
__u16
 
	mÊags
;

37 
	#I2C_M_TEN
 0x10

	)

38 
	#I2C_M_RD
 0x01

	)

39 
	#I2C_M_NOSTART
 0x4000

	)

40 
	#I2C_M_REV_DIR_ADDR
 0x2000

	)

41 
	#I2C_M_IGNORE_NAK
 0x1000

	)

42 
	#I2C_M_NO_RD_ACK
 0x0800

	)

43 
	#I2C_M_RECV_LEN
 0x0400

	)

44 
__u16
 
	mÀn
;

45 
__u8
 *
	mbuf
;

50 
	#I2C_FUNC_I2C
 0x00000001

	)

51 
	#I2C_FUNC_10BIT_ADDR
 0x00000002

	)

52 
	#I2C_FUNC_PROTOCOL_MANGLING
 0x00000004

	)

53 
	#I2C_FUNC_SMBUS_HWPEC_CALC
 0x00000008

	)

54 
	#I2C_FUNC_SMBUS_BLOCK_PROC_CALL
 0x00008000

	)

55 
	#I2C_FUNC_SMBUS_QUICK
 0x00010000

	)

56 
	#I2C_FUNC_SMBUS_READ_BYTE
 0x00020000

	)

57 
	#I2C_FUNC_SMBUS_WRITE_BYTE
 0x00040000

	)

58 
	#I2C_FUNC_SMBUS_READ_BYTE_DATA
 0x00080000

	)

59 
	#I2C_FUNC_SMBUS_WRITE_BYTE_DATA
 0x00100000

	)

60 
	#I2C_FUNC_SMBUS_READ_WORD_DATA
 0x00200000

	)

61 
	#I2C_FUNC_SMBUS_WRITE_WORD_DATA
 0x00400000

	)

62 
	#I2C_FUNC_SMBUS_PROC_CALL
 0x00800000

	)

63 
	#I2C_FUNC_SMBUS_READ_BLOCK_DATA
 0x01000000

	)

64 
	#I2C_FUNC_SMBUS_WRITE_BLOCK_DATA
 0x02000000

	)

65 
	#I2C_FUNC_SMBUS_READ_I2C_BLOCK
 0x04000000

	)

66 
	#I2C_FUNC_SMBUS_WRITE_I2C_BLOCK
 0x08000000

	)

67 
	#I2C_FUNC_SMBUS_READ_I2C_BLOCK_2
 0x10000000

	)

68 
	#I2C_FUNC_SMBUS_WRITE_I2C_BLOCK_2
 0x20000000

	)

70 
	#I2C_FUNC_SMBUS_BYTE
 (
I2C_FUNC_SMBUS_READ_BYTE
 | \

71 
I2C_FUNC_SMBUS_WRITE_BYTE
)

	)

72 
	#I2C_FUNC_SMBUS_BYTE_DATA
 (
I2C_FUNC_SMBUS_READ_BYTE_DATA
 | \

73 
I2C_FUNC_SMBUS_WRITE_BYTE_DATA
)

	)

74 
	#I2C_FUNC_SMBUS_WORD_DATA
 (
I2C_FUNC_SMBUS_READ_WORD_DATA
 | \

75 
I2C_FUNC_SMBUS_WRITE_WORD_DATA
)

	)

76 
	#I2C_FUNC_SMBUS_BLOCK_DATA
 (
I2C_FUNC_SMBUS_READ_BLOCK_DATA
 | \

77 
I2C_FUNC_SMBUS_WRITE_BLOCK_DATA
)

	)

78 
	#I2C_FUNC_SMBUS_I2C_BLOCK
 (
I2C_FUNC_SMBUS_READ_I2C_BLOCK
 | \

79 
I2C_FUNC_SMBUS_WRITE_I2C_BLOCK
)

	)

80 
	#I2C_FUNC_SMBUS_I2C_BLOCK_2
 (
I2C_FUNC_SMBUS_READ_I2C_BLOCK_2
 | \

81 
I2C_FUNC_SMBUS_WRITE_I2C_BLOCK_2
)

	)

83 
	#I2C_FUNC_SMBUS_EMUL
 (
I2C_FUNC_SMBUS_QUICK
 | \

84 
I2C_FUNC_SMBUS_BYTE
 | \

85 
I2C_FUNC_SMBUS_BYTE_DATA
 | \

86 
I2C_FUNC_SMBUS_WORD_DATA
 | \

87 
I2C_FUNC_SMBUS_PROC_CALL
 | \

88 
I2C_FUNC_SMBUS_WRITE_BLOCK_DATA
 | \

89 
I2C_FUNC_SMBUS_I2C_BLOCK
)

	)

94 
	#I2C_SMBUS_BLOCK_MAX
 32

	)

95 
	ui2c_smbus_d©a
 {

96 
__u8
 
	mbyã
;

97 
__u16
 
	mw‹d
;

98 
__u8
 
	mblock
[
I2C_SMBUS_BLOCK_MAX
 + 2];

103 
	#I2C_SMBUS_READ
 1

	)

104 
	#I2C_SMBUS_WRITE
 0

	)

108 
	#I2C_SMBUS_QUICK
 0

	)

109 
	#I2C_SMBUS_BYTE
 1

	)

110 
	#I2C_SMBUS_BYTE_DATA
 2

	)

111 
	#I2C_SMBUS_WORD_DATA
 3

	)

112 
	#I2C_SMBUS_PROC_CALL
 4

	)

113 
	#I2C_SMBUS_BLOCK_DATA
 5

	)

114 
	#I2C_SMBUS_I2C_BLOCK_DATA
 6

	)

115 
	#I2C_SMBUS_BLOCK_PROC_CALL
 7

	)

124 
	#I2C_RETRIES
 0x0701

	)

127 
	#I2C_TIMEOUT
 0x0702

	)

131 
	#I2C_SLAVE
 0x0703

	)

133 
	#I2C_SLAVE_FORCE
 0x0706

	)

137 
	#I2C_TENBIT
 0x0704

	)

139 
	#I2C_FUNCS
 0x0705

	)

140 
	#I2C_RDWR
 0x0707

	)

141 
	#I2C_PEC
 0x0708

	)

143 
	#I2C_SMBUS
 0x0720

	)

	@/usr/include/linux/types.h

1 #i‚de‡
_LINUX_TYPES_H


2 
	#_LINUX_TYPES_H


	)

5 
	~<löux/posix_ty≥s.h
>

6 
	~<asm/ty≥s.h
>

8 #i‚de‡
__KERNEL_STRICT_NAMES


10 
__u32
 
	t__kî√l_dev_t
;

12 
__kî√l_fd_£t
 
	tfd_£t
;

13 
__kî√l_dev_t
 
	tdev_t
;

14 
__kî√l_öo_t
 
	töo_t
;

15 
__kî√l_mode_t
 
	tmode_t
;

16 
__kî√l_∆ök_t
 
	t∆ök_t
;

17 
__kî√l_off_t
 
	toff_t
;

18 
__kî√l_pid_t
 
	tpid_t
;

19 
__kî√l_daddr_t
 
	tdaddr_t
;

20 
__kî√l_key_t
 
	tkey_t
;

21 
__kî√l_su£c⁄ds_t
 
	tsu£c⁄ds_t
;

22 
__kî√l_timî_t
 
	ttimî_t
;

23 
__kî√l_˛ockid_t
 
	t˛ockid_t
;

24 
__kî√l_mqd_t
 
	tmqd_t
;

26 
__kî√l_uid_t
 
	tuid_t
;

27 
__kî√l_gid_t
 
	tgid_t
;

29 #i‡
deföed
(
__GNUC__
Ë&& !deföed(
__STRICT_ANSI__
)

30 
__kî√l_loff_t
 
	tloff_t
;

37 #i‚de‡
_SIZE_T


38 
	#_SIZE_T


	)

39 
__kî√l_size_t
 
	tsize_t
;

42 #i‚de‡
_SSIZE_T


43 
	#_SSIZE_T


	)

44 
__kî√l_ssize_t
 
	tssize_t
;

47 #i‚de‡
_PTRDIFF_T


48 
	#_PTRDIFF_T


	)

49 
__kî√l_±rdiff_t
 
	t±rdiff_t
;

52 #i‚de‡
_TIME_T


53 
	#_TIME_T


	)

54 
__kî√l_time_t
 
	ttime_t
;

57 #i‚de‡
_CLOCK_T


58 
	#_CLOCK_T


	)

59 
__kî√l_˛ock_t
 
	t˛ock_t
;

62 #i‚de‡
_CADDR_T


63 
	#_CADDR_T


	)

64 
__kî√l_ˇddr_t
 
	tˇddr_t
;

68 
	tu_ch¨
;

69 
	tu_sh‹t
;

70 
	tu_öt
;

71 
	tu_l⁄g
;

74 
	tunch¨
;

75 
	tush‹t
;

76 
	tuöt
;

77 
	tul⁄g
;

79 #i‚de‡
__BIT_TYPES_DEFINED__


80 
	#__BIT_TYPES_DEFINED__


	)

82 
__u8
 
	tu_öt8_t
;

83 
__s8
 
	töt8_t
;

84 
__u16
 
	tu_öt16_t
;

85 
__s16
 
	töt16_t
;

86 
__u32
 
	tu_öt32_t
;

87 
__s32
 
	töt32_t
;

91 
__u8
 
	tuöt8_t
;

92 
__u16
 
	tuöt16_t
;

93 
__u32
 
	tuöt32_t
;

95 #i‡
deföed
(
__GNUC__
Ë&& !deföed(
__STRICT_ANSI__
)

96 
__u64
 
	tuöt64_t
;

97 
__u64
 
	tu_öt64_t
;

98 
__s64
 
	töt64_t
;

102 
	#Æig√d_u64
 
	`__©åibuã__
((
	`Æig√d
(8)))

	)

103 
	#Æig√d_be64
 
__be64
 
	`__©åibuã__
((
	`Æig√d
(8)))

	)

104 
	#Æig√d_À64
 
__À64
 
	`__©åibuã__
((
	`Æig√d
(8)))

	)

112 #ifde‡
CONFIG_LBD


113 
u64
 
	t£˘‹_t
;

115 
	t£˘‹_t
;

121 #ifde‡
CONFIG_LSF


122 
u64
 
	tblk˙t_t
;

124 
	tblk˙t_t
;

131 #i‚de‡
pgoff_t


132 
	#pgoff_t
 

	)

142 #ifde‡
__CHECKER__


143 
	#__bôwi£__
 
	`__©åibuã__
((
bôwi£
))

	)

145 
	#__bôwi£__


	)

147 #ifde‡
__CHECK_ENDIAN__


148 
	#__bôwi£
 
__bôwi£__


	)

150 
	#__bôwi£


	)

153 
__u16
 
	t__bôwi£
 
	t__À16
;

154 
__u16
 
	t__bôwi£
 
	t__be16
;

155 
__u32
 
	t__bôwi£
 
	t__À32
;

156 
__u32
 
	t__bôwi£
 
	t__be32
;

157 #i‡
deföed
(
__GNUC__
Ë&& !deföed(
__STRICT_ANSI__
)

158 
__u64
 
	t__bôwi£
 
	t__À64
;

159 
__u64
 
	t__bôwi£
 
	t__be64
;

161 
__u16
 
	t__bôwi£
 
	t__sum16
;

162 
__u32
 
	t__bôwi£
 
	t__wsum
;

165 
	su°©
 {

166 
__kî√l_daddr_t
 
	mf_t‰ì
;

167 
__kî√l_öo_t
 
	mf_töode
;

168 
	mf_‚ame
[6];

169 
	mf_Âack
[6];

	@/usr/include/linux/wait.h

1 #i‚de‡
_LINUX_WAIT_H


2 
	#_LINUX_WAIT_H


	)

4 
	#WNOHANG
 0x00000001

	)

5 
	#WUNTRACED
 0x00000002

	)

6 
	#WSTOPPED
 
WUNTRACED


	)

7 
	#WEXITED
 0x00000004

	)

8 
	#WCONTINUED
 0x00000008

	)

9 
	#WNOWAIT
 0x01000000

	)

11 
	#__WNOTHREAD
 0x20000000

	)

12 
	#__WALL
 0x40000000

	)

13 
	#__WCLONE
 0x80000000

	)

16 
	#P_ALL
 0

	)

17 
	#P_PID
 1

	)

18 
	#P_PGID
 2

	)

	@/usr/include/pngconf.h

17 #i‚de‡
PNGCONF_H


18 
	#PNGCONF_H


	)

20 
	#PNG_1_2_X


	)

26 #ifde‡
PNG_USER_CONFIG


27 #i‚de‡
PNG_USER_PRIVATEBUILD


28 
	#PNG_USER_PRIVATEBUILD


	)

30 
	~"≤gu§.h
"

34 #ifde‡
PNG_CONFIGURE_LIBPNG


35 #ifde‡
HAVE_CONFIG_H


36 
	~"c⁄fig.h
"

61 #ifde‡
__STDC__


62 #ifde‡
SPECIALBUILD


63 #¥agm®
mesßge
("PNG_LIBPNG_SPECIALBUILD (and deprecated SPECIALBUILD)\
Çow LIBPNGÑeserved macros. Use PNG_USER_PRIVATEBUILD instead.")

67 #ifde‡
PRIVATEBUILD


68 #¥agm®
mesßge
("PRIVATEBUILD is deprecated.\
 PNG_USER_PRIVATEBUILD instead.")

70 
	#PNG_USER_PRIVATEBUILD
 
PRIVATEBUILD


	)

74 #i‚de‡
PNG_VERSION_INFO_ONLY


91 #i‚de‡
PNG_ZBUF_SIZE


92 
	#PNG_ZBUF_SIZE
 8192

	)

97 #i‚de‡
PNG_NO_READ_SUPPORTED


98 
	#PNG_READ_SUPPORTED


	)

103 #i‚de‡
PNG_NO_WRITE_SUPPORTED


104 
	#PNG_WRITE_SUPPORTED


	)

109 #i‡!
deföed
(
PNG_1_0_X
Ë&& !deföed(
PNG_NO_MNG_FEATURES
)

110 #i‚de‡
PNG_MNG_FEATURES_SUPPORTED


111 
	#PNG_MNG_FEATURES_SUPPORTED


	)

115 #i‚de‡
PNG_NO_FLOATING_POINT_SUPPORTED


116 #i‚de‡
PNG_FLOATING_POINT_SUPPORTED


117 
	#PNG_FLOATING_POINT_SUPPORTED


	)

129 #i‡
deföed
(
MAXSEG_64K
Ë&& !deföed(
PNG_MAX_MALLOC_64K
)

130 
	#PNG_MAX_MALLOC_64K


	)

166 #i‡
deföed
(
__CYGWIN__
)

167 #i‡
deföed
(
ALL_STATIC
)

168 #i‡
deföed
(
PNG_BUILD_DLL
)

169 #unde‡
PNG_BUILD_DLL


171 #i‡
deföed
(
PNG_USE_DLL
)

172 #unde‡
PNG_USE_DLL


174 #i‡
deföed
(
PNG_DLL
)

175 #unde‡
PNG_DLL


177 #i‡!
deföed
(
PNG_STATIC
)

178 
	#PNG_STATIC


	)

181 #i‡
deföed
 (
PNG_BUILD_DLL
)

182 #i‡
deföed
(
PNG_STATIC
)

183 #unde‡
PNG_STATIC


185 #i‡
deföed
(
PNG_USE_DLL
)

186 #unde‡
PNG_USE_DLL


188 #i‡!
deföed
(
PNG_DLL
)

189 
	#PNG_DLL


	)

192 #i‡
deföed
(
PNG_STATIC
)

193 #i‡
deföed
(
PNG_USE_DLL
)

194 #unde‡
PNG_USE_DLL


196 #i‡
deföed
(
PNG_DLL
)

197 #unde‡
PNG_DLL


200 #i‡!
deföed
(
PNG_USE_DLL
)

201 
	#PNG_USE_DLL


	)

203 #i‡!
deföed
(
PNG_DLL
)

204 
	#PNG_DLL


	)

224 #i‡
deföed
(
_WIN32_WCE
)

225 
	~<wödows.h
>

227 
	#PNG_NO_CONSOLE_IO


	)

228 #ifde‡
PNG_DEBUG


229 #unde‡
PNG_DEBUG


233 #ifde‡
PNG_BUILD_DLL


234 #i‚de‡
PNG_CONSOLE_IO_SUPPORTED


235 #i‚de‡
PNG_NO_CONSOLE_IO


236 
	#PNG_NO_CONSOLE_IO


	)

241 #ifde‡
PNG_NO_STDIO


242 #i‚de‡
PNG_NO_CONSOLE_IO


243 
	#PNG_NO_CONSOLE_IO


	)

245 #ifde‡
PNG_DEBUG


246 #i‡(
PNG_DEBUG
 > 0)

247 
	~<°dio.h
>

251 #i‡!
deföed
(
_WIN32_WCE
)

253 
	~<°dio.h
>

264 #i‚de‡
PNGARG


266 #ifde‡
OF


267 
	#PNGARG
(
¨gli°
Ë
	`OF
◊rgli°)

	)

270 #ifde‡
_NO_PROTO


271 
	#PNGARG
(
¨gli°
Ë()

	)

272 #i‚de‡
PNG_TYPECAST_NULL


273 
	#PNG_TYPECAST_NULL


	)

276 
	#PNGARG
(
¨gli°
Ë
	)
¨gli°

287 #i‚de‡
MACOS


288 #i‡(
deföed
(
__MWERKS__
Ë&& deföed(
macötosh
)Ë|| deföed(
≠∂ec
) || \

289 
deföed
(
THINK_C
Ë|| deföed(
__SC__
Ë|| 
	$deföed
(
TARGET_OS_MAC
)

290 
	#MACOS


	)

295 #i‡!
	`deföed
(
MACOS
Ë&& !deföed(
RISCOS
Ë&& !deföed(
_WIN32_WCE
)

296 
	~<sys/ty≥s.h
>

299 #i‡!
	`deföed
(
PNG_SETJMP_NOT_SUPPORTED
Ë&& !deföed(
PNG_NO_SETJMP_SUPPORTED
)

300 
	#PNG_SETJMP_SUPPORTED


	)

303 #ifde‡
PNG_SETJMP_SUPPORTED


308 #ifde‡
__löux__


309 #ifde‡
_BSD_SOURCE


310 
	#PNG_SAVE_BSD_SOURCE


	)

311 #unde‡
_BSD_SOURCE


313 #ifde‡
_SETJMP_H


317 
__≤g
.
h__
 
Æªady
 
ö˛udes
 
£tjmp
.
h
;

318 
__d⁄t__
 
ö˛ude
 
ô
 
agaö
.;

323 
	~<£tjmp.h
>

325 #ifde‡
__löux__


326 #ifde‡
PNG_SAVE_BSD_SOURCE


327 
	#_BSD_SOURCE


	)

328 #unde‡
PNG_SAVE_BSD_SOURCE


333 #ifde‡
BSD


334 
	~<°rögs.h
>

336 
	~<°rög.h
>

340 #ifde‡
PNG_INTERNAL


342 
	~<°dlib.h
>

351 
	#PNG_EXTERN


	)

357 #i‡
	`deföed
(
PNG_FLOATING_POINT_SUPPORTED
)

358 #i‡
	`deföed
(
MACOS
)

363 #i‡!
	`deföed
(
__MATH_H__
Ë&& !deföed(
__MATH_H
Ë&& !deföed(
__cm©h__
)

364 
	~<Â.h
>

367 
	~<m©h.h
>

369 #i‡
	`deföed
(
_AMIGA
Ë&& deföed(
__SASC
Ë&& deföed(
_M68881
)

373 
	~<m68881.h
>

378 #i‡(
	`deföed
(
__MWERKS__
Ë&& deföed(
WIN32
)Ë|| deföed(
__STDC__
)

379 
	#PNG_ALWAYS_EXTERN


	)

383 #i‡
	`deföed
(
__TURBOC__
Ë&& deföed(
__MSDOS__
)

384 
	~<mem.h
>

385 
	~<Æloc.h
>

389 #i‡
	`deföed
(
_MSC_VER
Ë&& (deföed(
WIN32
Ë|| deföed(
_Wödows
) || \

390 
	`deföed
(
_WINDOWS
Ë|| deföed(
_WIN32
Ë|| 
	$deföed
(
__WIN32__
))

391 
	~<mÆloc.h
>

398 #i‚de‡
PNG_DITHER_RED_BITS


399 
	#PNG_DITHER_RED_BITS
 5

	)

401 #i‚de‡
PNG_DITHER_GREEN_BITS


402 
	#PNG_DITHER_GREEN_BITS
 5

	)

404 #i‚de‡
PNG_DITHER_BLUE_BITS


405 
	#PNG_DITHER_BLUE_BITS
 5

	)

415 #i‚de‡
PNG_MAX_GAMMA_8


416 
	#PNG_MAX_GAMMA_8
 11

	)

422 #i‚de‡
PNG_GAMMA_THRESHOLD


423 
	#PNG_GAMMA_THRESHOLD
 0.05

	)

433 #i‚de‡
PNG_NO_CONST


434 
	#PNG_CONST
 c⁄°

	)

436 
	#PNG_CONST


	)

472 #i‡
	`deföed
(
PNG_1_0_X
Ë|| deföed (
PNG_1_2_X
)

473 #i‚de‡
PNG_NO_iTXt_SUPPORTED


474 
	#PNG_NO_iTXt_SUPPORTED


	)

476 #i‚de‡
PNG_NO_READ_iTXt


477 
	#PNG_NO_READ_iTXt


	)

479 #i‚de‡
PNG_NO_WRITE_iTXt


480 
	#PNG_NO_WRITE_iTXt


	)

484 #i‡!
	`deföed
(
PNG_NO_iTXt_SUPPORTED
)

485 #i‡!
	`deföed
(
PNG_READ_iTXt_SUPPORTED
Ë&& !deföed(
PNG_NO_READ_iTXt
)

486 
	#PNG_READ_iTXt


	)

488 #i‡!
	`deföed
(
PNG_WRITE_iTXt_SUPPORTED
Ë&& !deföed(
PNG_NO_WRITE_iTXt
)

489 
	#PNG_WRITE_iTXt


	)

499 #ifde‡
PNG_LEGACY_SUPPORTED


500 
	#PNG_NO_FREE_ME


	)

501 
	#PNG_NO_READ_UNKNOWN_CHUNKS


	)

502 
	#PNG_NO_WRITE_UNKNOWN_CHUNKS


	)

503 
	#PNG_NO_READ_USER_CHUNKS


	)

504 
	#PNG_NO_READ_iCCP


	)

505 
	#PNG_NO_WRITE_iCCP


	)

506 
	#PNG_NO_READ_iTXt


	)

507 
	#PNG_NO_WRITE_iTXt


	)

508 
	#PNG_NO_READ_sCAL


	)

509 
	#PNG_NO_WRITE_sCAL


	)

510 
	#PNG_NO_READ_sPLT


	)

511 
	#PNG_NO_WRITE_sPLT


	)

512 
	#PNG_NO_INFO_IMAGE


	)

513 
	#PNG_NO_READ_RGB_TO_GRAY


	)

514 
	#PNG_NO_READ_USER_TRANSFORM


	)

515 
	#PNG_NO_WRITE_USER_TRANSFORM


	)

516 
	#PNG_NO_USER_MEM


	)

517 
	#PNG_NO_READ_EMPTY_PLTE


	)

518 
	#PNG_NO_MNG_FEATURES


	)

519 
	#PNG_NO_FIXED_POINT_SUPPORTED


	)

523 #i‡!
	`deföed
(
PNG_FLOATING_POINT_SUPPORTED
) || \

524 !
	$deföed
(
PNG_NO_FIXED_POINT_SUPPORTED
)

525 
	#PNG_FIXED_POINT_SUPPORTED


	)

528 #i‚de‡
PNG_NO_FREE_ME


529 
	#PNG_FREE_ME_SUPPORTED


	)

532 #i‡
	`deföed
(
PNG_READ_SUPPORTED
)

534 #i‡!
	`deföed
(
PNG_READ_TRANSFORMS_NOT_SUPPORTED
) && \

535 !
	$deföed
(
PNG_NO_READ_TRANSFORMS
)

536 
	#PNG_READ_TRANSFORMS_SUPPORTED


	)

539 #ifde‡
PNG_READ_TRANSFORMS_SUPPORTED


540 #i‚de‡
PNG_NO_READ_EXPAND


541 
	#PNG_READ_EXPAND_SUPPORTED


	)

543 #i‚de‡
PNG_NO_READ_SHIFT


544 
	#PNG_READ_SHIFT_SUPPORTED


	)

546 #i‚de‡
PNG_NO_READ_PACK


547 
	#PNG_READ_PACK_SUPPORTED


	)

549 #i‚de‡
PNG_NO_READ_BGR


550 
	#PNG_READ_BGR_SUPPORTED


	)

552 #i‚de‡
PNG_NO_READ_SWAP


553 
	#PNG_READ_SWAP_SUPPORTED


	)

555 #i‚de‡
PNG_NO_READ_PACKSWAP


556 
	#PNG_READ_PACKSWAP_SUPPORTED


	)

558 #i‚de‡
PNG_NO_READ_INVERT


559 
	#PNG_READ_INVERT_SUPPORTED


	)

561 #i‚de‡
PNG_NO_READ_DITHER


562 
	#PNG_READ_DITHER_SUPPORTED


	)

564 #i‚de‡
PNG_NO_READ_BACKGROUND


565 
	#PNG_READ_BACKGROUND_SUPPORTED


	)

567 #i‚de‡
PNG_NO_READ_16_TO_8


568 
	#PNG_READ_16_TO_8_SUPPORTED


	)

570 #i‚de‡
PNG_NO_READ_FILLER


571 
	#PNG_READ_FILLER_SUPPORTED


	)

573 #i‚de‡
PNG_NO_READ_GAMMA


574 
	#PNG_READ_GAMMA_SUPPORTED


	)

576 #i‚de‡
PNG_NO_READ_GRAY_TO_RGB


577 
	#PNG_READ_GRAY_TO_RGB_SUPPORTED


	)

579 #i‚de‡
PNG_NO_READ_SWAP_ALPHA


580 
	#PNG_READ_SWAP_ALPHA_SUPPORTED


	)

582 #i‚de‡
PNG_NO_READ_INVERT_ALPHA


583 
	#PNG_READ_INVERT_ALPHA_SUPPORTED


	)

585 #i‚de‡
PNG_NO_READ_STRIP_ALPHA


586 
	#PNG_READ_STRIP_ALPHA_SUPPORTED


	)

588 #i‚de‡
PNG_NO_READ_USER_TRANSFORM


589 
	#PNG_READ_USER_TRANSFORM_SUPPORTED


	)

591 #i‚de‡
PNG_NO_READ_RGB_TO_GRAY


592 
	#PNG_READ_RGB_TO_GRAY_SUPPORTED


	)

596 #i‡!
	`deföed
(
PNG_NO_PROGRESSIVE_READ
) && \

597 !
	$deföed
(
PNG_PROGRESSIVE_READ_NOT_SUPPORTED
)

598 
	#PNG_PROGRESSIVE_READ_SUPPORTED


	)

602 
	#PNG_READ_INTERLACING_SUPPORTED


	)

604 #i‚de‡
PNG_NO_READ_COMPOSITE_NODIV


605 #i‚de‡
PNG_NO_READ_COMPOSITED_NODIV


606 
	#PNG_READ_COMPOSITE_NODIV_SUPPORTED


	)

610 #i‡
	`deföed
(
PNG_1_0_X
Ë|| deföed (
PNG_1_2_X
)

613 #i‚de‡
PNG_NO_READ_EMPTY_PLTE


614 
	#PNG_READ_EMPTY_PLTE_SUPPORTED


	)

620 #i‡
	`deföed
(
PNG_WRITE_SUPPORTED
)

622 #i‡!
	`deföed
(
PNG_WRITE_TRANSFORMS_NOT_SUPPORTED
) && \

623 !
	$deföed
(
PNG_NO_WRITE_TRANSFORMS
)

624 
	#PNG_WRITE_TRANSFORMS_SUPPORTED


	)

627 #ifde‡
PNG_WRITE_TRANSFORMS_SUPPORTED


628 #i‚de‡
PNG_NO_WRITE_SHIFT


629 
	#PNG_WRITE_SHIFT_SUPPORTED


	)

631 #i‚de‡
PNG_NO_WRITE_PACK


632 
	#PNG_WRITE_PACK_SUPPORTED


	)

634 #i‚de‡
PNG_NO_WRITE_BGR


635 
	#PNG_WRITE_BGR_SUPPORTED


	)

637 #i‚de‡
PNG_NO_WRITE_SWAP


638 
	#PNG_WRITE_SWAP_SUPPORTED


	)

640 #i‚de‡
PNG_NO_WRITE_PACKSWAP


641 
	#PNG_WRITE_PACKSWAP_SUPPORTED


	)

643 #i‚de‡
PNG_NO_WRITE_INVERT


644 
	#PNG_WRITE_INVERT_SUPPORTED


	)

646 #i‚de‡
PNG_NO_WRITE_FILLER


647 
	#PNG_WRITE_FILLER_SUPPORTED


	)

649 #i‚de‡
PNG_NO_WRITE_SWAP_ALPHA


650 
	#PNG_WRITE_SWAP_ALPHA_SUPPORTED


	)

652 #i‚de‡
PNG_NO_WRITE_INVERT_ALPHA


653 
	#PNG_WRITE_INVERT_ALPHA_SUPPORTED


	)

655 #i‚de‡
PNG_NO_WRITE_USER_TRANSFORM


656 
	#PNG_WRITE_USER_TRANSFORM_SUPPORTED


	)

660 #i‡!
	`deföed
(
PNG_NO_WRITE_INTERLACING_SUPPORTED
) && \

661 !
	$deföed
(
PNG_WRITE_INTERLACING_SUPPORTED
)

662 
	#PNG_WRITE_INTERLACING_SUPPORTED


	)

667 #i‡!
	`deföed
(
PNG_NO_WRITE_WEIGHTED_FILTER
) && \

668 !
	`deföed
(
PNG_WRITE_WEIGHTED_FILTER
) && \

669 
	$deföed
(
PNG_FLOATING_POINT_SUPPORTED
)

670 
	#PNG_WRITE_WEIGHTED_FILTER_SUPPORTED


	)

673 #i‚de‡
PNG_NO_WRITE_FLUSH


674 
	#PNG_WRITE_FLUSH_SUPPORTED


	)

677 #i‡
	`deföed
(
PNG_1_0_X
Ë|| deföed (
PNG_1_2_X
)

679 #i‚de‡
PNG_NO_WRITE_EMPTY_PLTE


680 
	#PNG_WRITE_EMPTY_PLTE_SUPPORTED


	)

686 #i‚de‡
PNG_1_0_X


687 #i‚de‡
PNG_NO_ERROR_NUMBERS


688 
	#PNG_ERROR_NUMBERS_SUPPORTED


	)

692 #i‡
	`deföed
(
PNG_READ_USER_TRANSFORM_SUPPORTED
) || \

693 
	$deföed
(
PNG_WRITE_USER_TRANSFORM_SUPPORTED
)

694 #i‚de‡
PNG_NO_USER_TRANSFORM_PTR


695 
	#PNG_USER_TRANSFORM_PTR_SUPPORTED


	)

699 #i‚de‡
PNG_NO_STDIO


700 
	#PNG_TIME_RFC1123_SUPPORTED


	)

719 #i‡!
	`deföed
(
PNG_NO_EASY_ACCESS
Ë&& !deföed(
PNG_EASY_ACCESS_SUPPORTED
)

720 
	#PNG_EASY_ACCESS_SUPPORTED


	)

732 #i‡
	`deföed
(
PNG_READ_SUPPORTED
Ë&& !deföed(
PNG_NO_ASSEMBLER_CODE
)

733 #i‚de‡
PNG_ASSEMBLER_CODE_SUPPORTED


734 
	#PNG_ASSEMBLER_CODE_SUPPORTED


	)

736 #i‡
	`deföed
(
XP_MACOSX
Ë&& !deföed(
PNG_NO_MMX_CODE
)

738 
	#PNG_NO_MMX_CODE


	)

740 #i‡!
	`deföed
(
PNG_MMX_CODE_SUPPORTED
Ë&& !deföed(
PNG_NO_MMX_CODE
) && \

741 
	$deföed
(
__MMX__
)

742 
	#PNG_MMX_CODE_SUPPORTED


	)

744 #i‡!
	`deföed
(
PNG_USE_PNGGCCRD
Ë&& !deföed(
PNG_NO_MMX_CODE
) && \

745 !
	`deföed
(
PNG_USE_PNGVCRD
Ë&& 
	$deföed
(
__MMX__
)

746 
	#PNG_USE_PNGGCCRD


	)

756 #i‡!
	`deföed
(
PNG_1_0_X
)

757 #i‡!
	`deföed
(
PNG_NO_USER_MEM
Ë&& !deföed(
PNG_USER_MEM_SUPPORTED
)

758 
	#PNG_USER_MEM_SUPPORTED


	)

763 #i‡!
	`deföed
(
PNG_1_0_X
)

764 #i‚de‡
PNG_SET_USER_LIMITS_SUPPORTED


765 #i‡!
	`deföed
(
PNG_NO_SET_USER_LIMITS
Ë&& !deföed(
PNG_SET_USER_LIMITS_SUPPORTED
)

766 
	#PNG_SET_USER_LIMITS_SUPPORTED


	)

774 #i‚de‡
PNG_USER_WIDTH_MAX


775 
	#PNG_USER_WIDTH_MAX
 1000000L

	)

777 #i‚de‡
PNG_USER_HEIGHT_MAX


778 
	#PNG_USER_HEIGHT_MAX
 1000000L

	)

817 #i‡
	`deföed
(
PNG_READ_SUPPORTED
) && \

818 !
	`deföed
(
PNG_READ_ANCILLARY_CHUNKS_NOT_SUPPORTED
) && \

819 !
	$deföed
(
PNG_NO_READ_ANCILLARY_CHUNKS
)

820 
	#PNG_READ_ANCILLARY_CHUNKS_SUPPORTED


	)

823 #i‡
	`deföed
(
PNG_WRITE_SUPPORTED
) && \

824 !
	`deföed
(
PNG_WRITE_ANCILLARY_CHUNKS_NOT_SUPPORTED
) && \

825 !
	$deföed
(
PNG_NO_WRITE_ANCILLARY_CHUNKS
)

826 
	#PNG_WRITE_ANCILLARY_CHUNKS_SUPPORTED


	)

829 #ifde‡
PNG_READ_ANCILLARY_CHUNKS_SUPPORTED


831 #ifde‡
PNG_NO_READ_TEXT


832 
	#PNG_NO_READ_iTXt


	)

833 
	#PNG_NO_READ_tEXt


	)

834 
	#PNG_NO_READ_zTXt


	)

836 #i‚de‡
PNG_NO_READ_bKGD


837 
	#PNG_READ_bKGD_SUPPORTED


	)

838 
	#PNG_bKGD_SUPPORTED


	)

840 #i‚de‡
PNG_NO_READ_cHRM


841 
	#PNG_READ_cHRM_SUPPORTED


	)

842 
	#PNG_cHRM_SUPPORTED


	)

844 #i‚de‡
PNG_NO_READ_gAMA


845 
	#PNG_READ_gAMA_SUPPORTED


	)

846 
	#PNG_gAMA_SUPPORTED


	)

848 #i‚de‡
PNG_NO_READ_hIST


849 
	#PNG_READ_hIST_SUPPORTED


	)

850 
	#PNG_hIST_SUPPORTED


	)

852 #i‚de‡
PNG_NO_READ_iCCP


853 
	#PNG_READ_iCCP_SUPPORTED


	)

854 
	#PNG_iCCP_SUPPORTED


	)

856 #i‚de‡
PNG_NO_READ_iTXt


857 #i‚de‡
PNG_READ_iTXt_SUPPORTED


858 
	#PNG_READ_iTXt_SUPPORTED


	)

860 #i‚de‡
PNG_iTXt_SUPPORTED


861 
	#PNG_iTXt_SUPPORTED


	)

864 #i‚de‡
PNG_NO_READ_oFFs


865 
	#PNG_READ_oFFs_SUPPORTED


	)

866 
	#PNG_oFFs_SUPPORTED


	)

868 #i‚de‡
PNG_NO_READ_pCAL


869 
	#PNG_READ_pCAL_SUPPORTED


	)

870 
	#PNG_pCAL_SUPPORTED


	)

872 #i‚de‡
PNG_NO_READ_sCAL


873 
	#PNG_READ_sCAL_SUPPORTED


	)

874 
	#PNG_sCAL_SUPPORTED


	)

876 #i‚de‡
PNG_NO_READ_pHYs


877 
	#PNG_READ_pHYs_SUPPORTED


	)

878 
	#PNG_pHYs_SUPPORTED


	)

880 #i‚de‡
PNG_NO_READ_sBIT


881 
	#PNG_READ_sBIT_SUPPORTED


	)

882 
	#PNG_sBIT_SUPPORTED


	)

884 #i‚de‡
PNG_NO_READ_sPLT


885 
	#PNG_READ_sPLT_SUPPORTED


	)

886 
	#PNG_sPLT_SUPPORTED


	)

888 #i‚de‡
PNG_NO_READ_sRGB


889 
	#PNG_READ_sRGB_SUPPORTED


	)

890 
	#PNG_sRGB_SUPPORTED


	)

892 #i‚de‡
PNG_NO_READ_tEXt


893 
	#PNG_READ_tEXt_SUPPORTED


	)

894 
	#PNG_tEXt_SUPPORTED


	)

896 #i‚de‡
PNG_NO_READ_tIME


897 
	#PNG_READ_tIME_SUPPORTED


	)

898 
	#PNG_tIME_SUPPORTED


	)

900 #i‚de‡
PNG_NO_READ_tRNS


901 
	#PNG_READ_tRNS_SUPPORTED


	)

902 
	#PNG_tRNS_SUPPORTED


	)

904 #i‚de‡
PNG_NO_READ_zTXt


905 
	#PNG_READ_zTXt_SUPPORTED


	)

906 
	#PNG_zTXt_SUPPORTED


	)

908 #i‚de‡
PNG_NO_READ_UNKNOWN_CHUNKS


909 
	#PNG_READ_UNKNOWN_CHUNKS_SUPPORTED


	)

910 #i‚de‡
PNG_UNKNOWN_CHUNKS_SUPPORTED


911 
	#PNG_UNKNOWN_CHUNKS_SUPPORTED


	)

913 #i‚de‡
PNG_NO_HANDLE_AS_UNKNOWN


914 
	#PNG_HANDLE_AS_UNKNOWN_SUPPORTED


	)

917 #i‡!
	`deföed
(
PNG_NO_READ_USER_CHUNKS
) && \

918 
	$deföed
(
PNG_READ_UNKNOWN_CHUNKS_SUPPORTED
)

919 
	#PNG_READ_USER_CHUNKS_SUPPORTED


	)

920 
	#PNG_USER_CHUNKS_SUPPORTED


	)

921 #ifde‡
PNG_NO_READ_UNKNOWN_CHUNKS


922 #unde‡
PNG_NO_READ_UNKNOWN_CHUNKS


924 #ifde‡
PNG_NO_HANDLE_AS_UNKNOWN


925 #unde‡
PNG_NO_HANDLE_AS_UNKNOWN


928 #i‚de‡
PNG_NO_READ_OPT_PLTE


929 
	#PNG_READ_OPT_PLTE_SUPPORTED


	)

931 #i‡
	`deföed
(
PNG_READ_iTXt_SUPPORTED
Ë|| deföed(
PNG_READ_tEXt_SUPPORTED
) || \

932 
	$deföed
(
PNG_READ_zTXt_SUPPORTED
)

933 
	#PNG_READ_TEXT_SUPPORTED


	)

934 
	#PNG_TEXT_SUPPORTED


	)

939 #ifde‡
PNG_WRITE_ANCILLARY_CHUNKS_SUPPORTED


941 #ifde‡
PNG_NO_WRITE_TEXT


942 
	#PNG_NO_WRITE_iTXt


	)

943 
	#PNG_NO_WRITE_tEXt


	)

944 
	#PNG_NO_WRITE_zTXt


	)

946 #i‚de‡
PNG_NO_WRITE_bKGD


947 
	#PNG_WRITE_bKGD_SUPPORTED


	)

948 #i‚de‡
PNG_bKGD_SUPPORTED


949 
	#PNG_bKGD_SUPPORTED


	)

952 #i‚de‡
PNG_NO_WRITE_cHRM


953 
	#PNG_WRITE_cHRM_SUPPORTED


	)

954 #i‚de‡
PNG_cHRM_SUPPORTED


955 
	#PNG_cHRM_SUPPORTED


	)

958 #i‚de‡
PNG_NO_WRITE_gAMA


959 
	#PNG_WRITE_gAMA_SUPPORTED


	)

960 #i‚de‡
PNG_gAMA_SUPPORTED


961 
	#PNG_gAMA_SUPPORTED


	)

964 #i‚de‡
PNG_NO_WRITE_hIST


965 
	#PNG_WRITE_hIST_SUPPORTED


	)

966 #i‚de‡
PNG_hIST_SUPPORTED


967 
	#PNG_hIST_SUPPORTED


	)

970 #i‚de‡
PNG_NO_WRITE_iCCP


971 
	#PNG_WRITE_iCCP_SUPPORTED


	)

972 #i‚de‡
PNG_iCCP_SUPPORTED


973 
	#PNG_iCCP_SUPPORTED


	)

976 #i‚de‡
PNG_NO_WRITE_iTXt


977 #i‚de‡
PNG_WRITE_iTXt_SUPPORTED


978 
	#PNG_WRITE_iTXt_SUPPORTED


	)

980 #i‚de‡
PNG_iTXt_SUPPORTED


981 
	#PNG_iTXt_SUPPORTED


	)

984 #i‚de‡
PNG_NO_WRITE_oFFs


985 
	#PNG_WRITE_oFFs_SUPPORTED


	)

986 #i‚de‡
PNG_oFFs_SUPPORTED


987 
	#PNG_oFFs_SUPPORTED


	)

990 #i‚de‡
PNG_NO_WRITE_pCAL


991 
	#PNG_WRITE_pCAL_SUPPORTED


	)

992 #i‚de‡
PNG_pCAL_SUPPORTED


993 
	#PNG_pCAL_SUPPORTED


	)

996 #i‚de‡
PNG_NO_WRITE_sCAL


997 
	#PNG_WRITE_sCAL_SUPPORTED


	)

998 #i‚de‡
PNG_sCAL_SUPPORTED


999 
	#PNG_sCAL_SUPPORTED


	)

1002 #i‚de‡
PNG_NO_WRITE_pHYs


1003 
	#PNG_WRITE_pHYs_SUPPORTED


	)

1004 #i‚de‡
PNG_pHYs_SUPPORTED


1005 
	#PNG_pHYs_SUPPORTED


	)

1008 #i‚de‡
PNG_NO_WRITE_sBIT


1009 
	#PNG_WRITE_sBIT_SUPPORTED


	)

1010 #i‚de‡
PNG_sBIT_SUPPORTED


1011 
	#PNG_sBIT_SUPPORTED


	)

1014 #i‚de‡
PNG_NO_WRITE_sPLT


1015 
	#PNG_WRITE_sPLT_SUPPORTED


	)

1016 #i‚de‡
PNG_sPLT_SUPPORTED


1017 
	#PNG_sPLT_SUPPORTED


	)

1020 #i‚de‡
PNG_NO_WRITE_sRGB


1021 
	#PNG_WRITE_sRGB_SUPPORTED


	)

1022 #i‚de‡
PNG_sRGB_SUPPORTED


1023 
	#PNG_sRGB_SUPPORTED


	)

1026 #i‚de‡
PNG_NO_WRITE_tEXt


1027 
	#PNG_WRITE_tEXt_SUPPORTED


	)

1028 #i‚de‡
PNG_tEXt_SUPPORTED


1029 
	#PNG_tEXt_SUPPORTED


	)

1032 #i‚de‡
PNG_NO_WRITE_tIME


1033 
	#PNG_WRITE_tIME_SUPPORTED


	)

1034 #i‚de‡
PNG_tIME_SUPPORTED


1035 
	#PNG_tIME_SUPPORTED


	)

1038 #i‚de‡
PNG_NO_WRITE_tRNS


1039 
	#PNG_WRITE_tRNS_SUPPORTED


	)

1040 #i‚de‡
PNG_tRNS_SUPPORTED


1041 
	#PNG_tRNS_SUPPORTED


	)

1044 #i‚de‡
PNG_NO_WRITE_zTXt


1045 
	#PNG_WRITE_zTXt_SUPPORTED


	)

1046 #i‚de‡
PNG_zTXt_SUPPORTED


1047 
	#PNG_zTXt_SUPPORTED


	)

1050 #i‚de‡
PNG_NO_WRITE_UNKNOWN_CHUNKS


1051 
	#PNG_WRITE_UNKNOWN_CHUNKS_SUPPORTED


	)

1052 #i‚de‡
PNG_UNKNOWN_CHUNKS_SUPPORTED


1053 
	#PNG_UNKNOWN_CHUNKS_SUPPORTED


	)

1055 #i‚de‡
PNG_NO_HANDLE_AS_UNKNOWN


1056 #i‚de‡
PNG_HANDLE_AS_UNKNOWN_SUPPORTED


1057 
	#PNG_HANDLE_AS_UNKNOWN_SUPPORTED


	)

1061 #i‡
	`deföed
(
PNG_WRITE_iTXt_SUPPORTED
Ë|| deföed(
PNG_WRITE_tEXt_SUPPORTED
) || \

1062 
	$deföed
(
PNG_WRITE_zTXt_SUPPORTED
)

1063 
	#PNG_WRITE_TEXT_SUPPORTED


	)

1064 #i‚de‡
PNG_TEXT_SUPPORTED


1065 
	#PNG_TEXT_SUPPORTED


	)

1075 #i‚de‡
PNG_NO_INFO_IMAGE


1076 
	#PNG_INFO_IMAGE_SUPPORTED


	)

1080 #i‡
	`deföed
(
PNG_tIME_SUPPORTED
)

1081 #i‡!
	`deföed
(
_WIN32_WCE
)

1083 
	~<time.h
>

1096 
	t≤g_uöt_32
;

1097 
	t≤g_öt_32
;

1098 
	t≤g_uöt_16
;

1099 
	t≤g_öt_16
;

1100 
	t≤g_byã
;

1104 #ifde‡
PNG_SIZE_T


1105 
PNG_SIZE_T
 
	t≤g_size_t
;

1106 
	#≤g_sizeof
(
x
Ë
	`≤g_c⁄vît_size
( (x))

	)

1108 
size_t
 
	t≤g_size_t
;

1109 
	#≤g_sizeof
(
x
Ë (x)

	)

1123 #ifde‡
__BORLANDC__


1124 #i‡
	`deföed
(
__LARGE__
Ë|| deföed(
__HUGE__
Ë|| deföed(
__COMPACT__
)

1125 
	#LDATA
 1

	)

1127 
	#LDATA
 0

	)

1130 #i‡!
	`deföed
(
__WIN32__
Ë&& !deföed(
__FLAT__
Ë&& !deföed(
__CYGWIN__
)

1131 
	#PNG_MAX_MALLOC_64K


	)

1132 #i‡(
LDATA
 != 1)

1133 #i‚de‡
FAR


1134 
	#FAR
 
__Ár


	)

1136 
	#USE_FAR_KEYWORD


	)

1153 #i‡
	`deföed
(
FAR
)

1154 #i‡
	`deföed
(
M_I86MM
)

1155 
	#USE_FAR_KEYWORD


	)

1156 
	#FARDATA
 
FAR


	)

1157 
	~<dos.h
>

1162 #i‚de‡
FAR


1163 
	#FAR


	)

1167 #i‚de‡
FARDATA


1168 
	#FARDATA


	)

1173 
≤g_öt_32
 
	t≤g_fixed_poöt
;

1176 
	tFAR
 * 
	t≤g_voidp
;

1177 
≤g_byã
 
	tFAR
 * 
	t≤g_byãp
;

1178 
≤g_uöt_32
 
	tFAR
 * 
	t≤g_uöt_32p
;

1179 
≤g_öt_32
 
	tFAR
 * 
	t≤g_öt_32p
;

1180 
≤g_uöt_16
 
	tFAR
 * 
	t≤g_uöt_16p
;

1181 
≤g_öt_16
 
	tFAR
 * 
	t≤g_öt_16p
;

1182 
PNG_CONST
 
	tFAR
 * 
	t≤g_c⁄°_ch¨p
;

1183 
	tFAR
 * 
	t≤g_ch¨p
;

1184 
≤g_fixed_poöt
 
	tFAR
 * 
	t≤g_fixed_poöt_p
;

1186 #i‚de‡
PNG_NO_STDIO


1187 #i‡
	`deföed
(
_WIN32_WCE
)

1188 
HANDLE
 
	t≤g_FILE_p
;

1190 
FILE
 * 
	t≤g_FILE_p
;

1194 #ifde‡
PNG_FLOATING_POINT_SUPPORTED


1195 
	tFAR
 * 
	t≤g_doubÀp
;

1199 
≤g_byã
 
	tFAR
 * FAR * 
	t≤g_byãµ
;

1200 
≤g_uöt_32
 
	tFAR
 * FAR * 
	t≤g_uöt_32µ
;

1201 
≤g_öt_32
 
	tFAR
 * FAR * 
	t≤g_öt_32µ
;

1202 
≤g_uöt_16
 
	tFAR
 * FAR * 
	t≤g_uöt_16µ
;

1203 
≤g_öt_16
 
	tFAR
 * FAR * 
	t≤g_öt_16µ
;

1204 
PNG_CONST
 
	tFAR
 * FAR * 
	t≤g_c⁄°_ch¨µ
;

1205 
	tFAR
 * FAR * 
	t≤g_ch¨µ
;

1206 
≤g_fixed_poöt
 
	tFAR
 * FAR * 
	t≤g_fixed_poöt_µ
;

1207 #ifde‡
PNG_FLOATING_POINT_SUPPORTED


1208 
	tFAR
 * FAR * 
	t≤g_doubÀµ
;

1212 
	tFAR
 * FAR * FAR * 
	t≤g_ch¨µp
;

1214 #i‡
	`deföed
(
PNG_1_0_X
Ë|| deföed(
PNG_1_2_X
)

1221 
ch¨f
 * 
	t≤g_zch¨p
;

1222 
ch¨f
 * 
	tFAR
 * 
	t≤g_zch¨µ
;

1223 
z_°ªam
 
	tFAR
 * 
	t≤g_z°ªamp
;

1244 #i‡!
	`deföed
(
PNG_DLL
Ë&& (deföed(
PNG_BUILD_DLL
Ë|| deföed(
PNG_USE_DLL
))

1245 
	#PNG_DLL


	)

1251 #i‡
	`deföed
(
__CYGWIN__
)

1252 #i‡!
	`deföed
(
PNG_STATIC
)

1253 #i‡
	`deföed
(
PNG_USE_GLOBAL_ARRAYS
)

1254 #unde‡
PNG_USE_GLOBAL_ARRAYS


1256 #i‡!
	`deföed
(
PNG_USE_LOCAL_ARRAYS
)

1257 
	#PNG_USE_LOCAL_ARRAYS


	)

1260 #i‡
	`deföed
(
PNG_USE_LOCAL_ARRAYS
Ë|| deföed(
PNG_NO_GLOBAL_ARRAYS
)

1261 #i‡
	`deföed
(
PNG_USE_GLOBAL_ARRAYS
)

1262 #unde‡
PNG_USE_GLOBAL_ARRAYS


1266 #i‡!
	`deföed
(
PNG_USE_LOCAL_ARRAYS
Ë&& !deföed(
PNG_USE_GLOBAL_ARRAYS
)

1267 
	#PNG_USE_LOCAL_ARRAYS


	)

1275 #i‡!
	`deföed
(
PNG_USE_LOCAL_ARRAYS
Ë&& !deföed(
PNG_USE_GLOBAL_ARRAYS
)

1276 #i‡
	`deföed
(
PNG_NO_GLOBAL_ARRAYS
Ë|| (deföed(
__GNUC__
Ë&& deföed(
PNG_DLL
))

1277 
	#PNG_USE_LOCAL_ARRAYS


	)

1279 
	#PNG_USE_GLOBAL_ARRAYS


	)

1283 #i‡
	`deföed
(
__CYGWIN__
)

1284 #unde‡
PNGAPI


1285 
	#PNGAPI
 
__cde˛


	)

1286 #unde‡
PNG_IMPEXP


1287 
	#PNG_IMPEXP


	)

1297 #i‡
	`deföed
(
__MINGW32__
Ë&& !deföed(
PNG_MODULEDEF
)

1298 #i‚de‡
PNG_NO_MODULEDEF


1299 
	#PNG_NO_MODULEDEF


	)

1303 #i‡!
	`deföed
(
PNG_IMPEXP
Ë&& deföed(
PNG_BUILD_DLL
Ë&& !deföed(
PNG_NO_MODULEDEF
)

1304 
	#PNG_IMPEXP


	)

1307 #i‡
	`deföed
(
PNG_DLL
Ë|| deföed(
_DLL
Ë|| deföed(
__DLL__
 ) || \

1308 (–
	`deföed
(
_Wödows
Ë|| deföed(
_WINDOWS
) || \

1309 
	`deföed
(
WIN32
Ë|| deföed(
_WIN32
Ë|| 
	$deföed
(
__WIN32__
) ))

1311 #i‚de‡
PNGAPI


1312 #i‡
	`deföed
(
__GNUC__
Ë|| (deföed (
_MSC_VER
) && (_MSC_VER >= 800))

1313 
	#PNGAPI
 
__cde˛


	)

1315 
	#PNGAPI
 
_cde˛


	)

1319 #i‡!
	`deföed
(
PNG_IMPEXP
Ë&& (!deföed(
PNG_DLL
) || \

1321 
	#PNG_IMPEXP


	)

1324 #i‡!
	`deföed
(
PNG_IMPEXP
)

1326 
	#PNG_EXPORT_TYPE1
(
ty≥
,
symbﬁ
Ë
PNG_IMPEXP
Åy≥ 
PNGAPI
 
	)
symbﬁ

1327 
	#PNG_EXPORT_TYPE2
(
ty≥
,
symbﬁ
Ëty≥ 
PNG_IMPEXP
 
PNGAPI
 
	)
symbﬁ

1330 #i‡
	`deföed
(
_MSC_VER
Ë|| deföed(
__BORLANDC__
)

1331 #i‡(
_MSC_VER
 >800Ë|| (
__BORLANDC__
 >= 0x500)

1332 
	#PNG_EXPORT
 
PNG_EXPORT_TYPE1


	)

1334 
	#PNG_EXPORT
 
PNG_EXPORT_TYPE2


	)

1335 #i‡
	`deföed
(
PNG_BUILD_DLL
)

1336 
	#PNG_IMPEXP
 
__exp‹t


	)

1338 
	#PNG_IMPEXP


	)

1341 
C
++ 
	`˛as£s
 (=
huge
) */

1345 #i‡!
	`deföed
(
PNG_IMPEXP
)

1346 #i‡
	`deföed
(
PNG_BUILD_DLL
)

1347 
	#PNG_IMPEXP
 
	`__de˛•ec
(
dŒexp‹t
)

	)

1349 
	#PNG_IMPEXP
 
	`__de˛•ec
(
dŒimp‹t
)

	)

1354 #i‡(
	`deföed
(
__IBMC__
Ë|| deföed(
__IBMCPP__
)Ë&& deföed(
__OS2__
)

1355 #i‚de‡
PNGAPI


1356 
	#PNGAPI
 
_Sy°em


	)

1364 #i‚de‡
PNGAPI


1365 
	#PNGAPI


	)

1367 #i‚de‡
PNG_IMPEXP


1368 
	#PNG_IMPEXP


	)

1371 #ifde‡
PNG_BUILDSYMS


1372 #i‚de‡
PNG_EXPORT


1373 
	#PNG_EXPORT
(
ty≥
,
symbﬁ
Ë
PNG_FUNCTION_EXPORT
 symbﬁ 
END


	)

1375 #ifde‡
PNG_USE_GLOBAL_ARRAYS


1376 #i‚de‡
PNG_EXPORT_VAR


1377 
	#PNG_EXPORT_VAR
(
ty≥
Ë
PNG_DATA_EXPORT


	)

1382 #i‚de‡
PNG_EXPORT


1383 
	#PNG_EXPORT
(
ty≥
,
symbﬁ
Ë
PNG_IMPEXP
Åy≥ 
PNGAPI
 
	)
symbﬁ

1386 #ifde‡
PNG_USE_GLOBAL_ARRAYS


1387 #i‚de‡
PNG_EXPORT_VAR


1388 
	#PNG_EXPORT_VAR
(
ty≥
Ë
PNG_IMPEXP
 
	)
ty≥

1396 #i‚de‡
PNG_ABORT


1397 
	#PNG_ABORT
(Ë
	`ab‹t
()

	)

1400 #ifde‡
PNG_SETJMP_SUPPORTED


1401 
	#≤g_jmpbuf
(
≤g_±r
Ë(’ng_±r)->
jmpbuf
)

	)

1403 
	#≤g_jmpbuf
(
≤g_±r
) \

1404 (
LIBPNG_WAS_COMPILED_WITH__PNG_SETJMP_NOT_SUPPORTED
)

	)

1407 #i‡
	`deföed
(
USE_FAR_KEYWORD
)

1409 
	#CHECK
 1

	)

1410 
	#NOCHECK
 0

	)

1411 
	#CVT_PTR
(
±r
Ë(
	`≤g_Ár_to_√¨
(
≤g_±r
,±r,
CHECK
))

	)

1412 
	#CVT_PTR_NOCHECK
(
±r
Ë(
	`≤g_Ár_to_√¨
(
≤g_±r
,±r,
NOCHECK
))

	)

1413 
	#≤g_°r˝y
 
_f°r˝y


	)

1414 
	#≤g_°∫˝y
 
_f°∫˝y


	)

1415 
	#≤g_°æí
 
_f°æí


	)

1416 
	#≤g_memcmp
 
_fmemcmp


	)

1417 
	#≤g_mem˝y
 
_fmem˝y


	)

1418 
	#≤g_mem£t
 
_fmem£t


	)

1420 
	#CVT_PTR
(
±r
Ë’å)

	)

1421 
	#CVT_PTR_NOCHECK
(
±r
Ë’å)

	)

1422 
	#≤g_°r˝y
 
°r˝y


	)

1423 
	#≤g_°∫˝y
 
°∫˝y


	)

1424 
	#≤g_°æí
 
°æí


	)

1425 
	#≤g_memcmp
 
memcmp


	)

1426 
	#≤g_mem˝y
 
mem˝y


	)

1427 
	#≤g_mem£t
 
mem£t


	)

1434 #i‡(
PNG_ZBUF_SIZE
 > 65536LË&& 
	`deföed
(
PNG_MAX_MALLOC_64K
)

1435 #unde‡
PNG_ZBUF_SIZE


1436 
	#PNG_ZBUF_SIZE
 65536L

	)

1439 #ifde‡
PNG_READ_SUPPORTED


1441 #i‡
	`deföed
(
PNG_INTERNAL
)

1449 #i‚de‡
PNG_MMX_ROWBYTES_THRESHOLD_DEFAULT


1450 
	#PNG_MMX_ROWBYTES_THRESHOLD_DEFAULT
 128

	)

1452 #i‚de‡
PNG_MMX_BITDEPTH_THRESHOLD_DEFAULT


1453 
	#PNG_MMX_BITDEPTH_THRESHOLD_DEFAULT
 9

	)

1460 #ifde‡
PNG_USE_PNGVCRD


1461 
	#PNG_HAVE_ASSEMBLER_COMBINE_ROW


	)

1462 
	#PNG_HAVE_ASSEMBLER_READ_INTERLACE


	)

1463 
	#PNG_HAVE_ASSEMBLER_READ_FILTER_ROW


	)

1470 #ifde‡
PNG_USE_PNGGCCRD


1471 
	#PNG_HAVE_ASSEMBLER_COMBINE_ROW


	)

1472 
	#PNG_HAVE_ASSEMBLER_READ_INTERLACE


	)

1473 
	#PNG_HAVE_ASSEMBLER_READ_FILTER_ROW


	)

	@/usr/include/rpc/netdb.h

36 #i‚de‡
_RPC_NETDB_H


37 
	#_RPC_NETDB_H
 1

	)

39 
	~<„©uªs.h
>

41 
	#__√ed_size_t


	)

42 
	~<°ddef.h
>

44 
__BEGIN_DECLS


46 
	sΩ˚¡


48 *
	mr_«me
;

49 **
	mr_Æü£s
;

50 
	mr_numbî
;

53 
	$£åp˚¡
 (
__°ay›í
Ë
__THROW
;

54 
	$ídΩ˚¡
 (Ë
__THROW
;

55 
Ω˚¡
 *
	$gëΩcby«me
 (
__c⁄°
 *
__«me
Ë
__THROW
;

56 
Ω˚¡
 *
	$gëΩcbynumbî
 (
__numbî
Ë
__THROW
;

57 
Ω˚¡
 *
	$gëΩ˚¡
 (Ë
__THROW
;

59 #ifde‡
__USE_MISC


60 
	$gëΩcby«me_r
 (
__c⁄°
 *
__«me
, 
Ω˚¡
 *
__ªsu…_buf
,

61 *
__buf„r
, 
size_t
 
__buÊí
,

62 
Ω˚¡
 **
__ªsu…
Ë
__THROW
;

64 
	$gëΩcbynumbî_r
 (
__numbî
, 
Ω˚¡
 *
__ªsu…_buf
,

65 *
__buf„r
, 
size_t
 
__buÊí
,

66 
Ω˚¡
 **
__ªsu…
Ë
__THROW
;

68 
	$gëΩ˚¡_r
 (
Ω˚¡
 *
__ªsu…_buf
, *
__buf„r
,

69 
size_t
 
__buÊí
, 
Ω˚¡
 **
__ªsu…
Ë
__THROW
;

72 
__END_DECLS


	@/usr/include/sched.h

20 #i‚def 
_SCHED_H


21 
	#_SCHED_H
 1

	)

23 
	~<„©uªs.h
>

26 
	~<bôs/ty≥s.h
>

28 
	#__√ed_time•ec


	)

29 
	~<time.h
>

32 
	~<bôs/sched.h
>

34 
	#sched_¥i‹ôy
 
__sched_¥i‹ôy


	)

37 
__BEGIN_DECLS


40 
	$sched_£ç¨am
 (
__pid_t
 
__pid
, 
__c⁄°
 
sched_∑øm
 *
__∑øm
)

41 
__THROW
;

44 
	$sched_gë∑øm
 (
__pid_t
 
__pid
, 
sched_∑øm
 *
__∑øm
Ë
__THROW
;

47 
	$sched_£tscheduÀr
 (
__pid_t
 
__pid
, 
__pﬁicy
,

48 
__c⁄°
 
sched_∑øm
 *
__∑øm
Ë
__THROW
;

51 
	$sched_gëscheduÀr
 (
__pid_t
 
__pid
Ë
__THROW
;

54 
	$sched_yõld
 (Ë
__THROW
;

57 
	$sched_gë_¥i‹ôy_max
 (
__Æg‹ôhm
Ë
__THROW
;

60 
	$sched_gë_¥i‹ôy_mö
 (
__Æg‹ôhm
Ë
__THROW
;

63 
	$sched_º_gë_öãrvÆ
 (
__pid_t
 
__pid
, 
time•ec
 *
__t
Ë
__THROW
;

66 #ifde‡
__USE_GNU


68 
	#CPU_SETSIZE
 
__CPU_SETSIZE


	)

69 
	#CPU_SET
(
˝u
, 
˝u£ç
Ë
	`__CPU_SET
 (˝u, cpu£ç)

	)

70 
	#CPU_CLR
(
˝u
, 
˝u£ç
Ë
	`__CPU_CLR
 (˝u, cpu£ç)

	)

71 
	#CPU_ISSET
(
˝u
, 
˝u£ç
Ë
	`__CPU_ISSET
 (˝u, cpu£ç)

	)

72 
	#CPU_ZERO
(
˝u£ç
Ë
	`__CPU_ZERO
 (˝u£ç)

	)

73 
	#CPU_COUNT
(
˝u£ç
Ë
	`__CPU_COUNT
 (˝u£ç)

	)

77 
	$sched_£èfföôy
 (
__pid_t
 
__pid
, 
size_t
 
__˝u£tsize
,

78 
__c⁄°
 
˝u_£t_t
 *
__˝u£t
Ë
__THROW
;

81 
	$sched_gëafföôy
 (
__pid_t
 
__pid
, 
size_t
 
__˝u£tsize
,

82 
˝u_£t_t
 *
__˝u£t
Ë
__THROW
;

85 
__END_DECLS


	@/usr/include/stdint.h

23 #i‚de‡
_STDINT_H


24 
	#_STDINT_H
 1

	)

26 
	~<„©uªs.h
>

27 
	~<bôs/wch¨.h
>

28 
	~<bôs/w‹dsize.h
>

35 #i‚de‡
__öt8_t_deföed


36 
	#__öt8_t_deföed


	)

37 sig√d 
	töt8_t
;

38 
	töt16_t
;

39 
	töt32_t
;

40 #i‡
__WORDSIZE
 == 64

41 
	töt64_t
;

43 
__exãnsi⁄__


44 
	töt64_t
;

49 
	tuöt8_t
;

50 
	tuöt16_t
;

51 #i‚de‡
__uöt32_t_deföed


52 
	tuöt32_t
;

53 
	#__uöt32_t_deföed


	)

55 #i‡
__WORDSIZE
 == 64

56 
	tuöt64_t
;

58 
__exãnsi⁄__


59 
	tuöt64_t
;

66 sig√d 
	töt_Àa°8_t
;

67 
	töt_Àa°16_t
;

68 
	töt_Àa°32_t
;

69 #i‡
__WORDSIZE
 == 64

70 
	töt_Àa°64_t
;

72 
__exãnsi⁄__


73 
	töt_Àa°64_t
;

77 
	tuöt_Àa°8_t
;

78 
	tuöt_Àa°16_t
;

79 
	tuöt_Àa°32_t
;

80 #i‡
__WORDSIZE
 == 64

81 
	tuöt_Àa°64_t
;

83 
__exãnsi⁄__


84 
	tuöt_Àa°64_t
;

91 sig√d 
	töt_Á°8_t
;

92 #i‡
__WORDSIZE
 == 64

93 
	töt_Á°16_t
;

94 
	töt_Á°32_t
;

95 
	töt_Á°64_t
;

97 
	töt_Á°16_t
;

98 
	töt_Á°32_t
;

99 
__exãnsi⁄__


100 
	töt_Á°64_t
;

104 
	tuöt_Á°8_t
;

105 #i‡
__WORDSIZE
 == 64

106 
	tuöt_Á°16_t
;

107 
	tuöt_Á°32_t
;

108 
	tuöt_Á°64_t
;

110 
	tuöt_Á°16_t
;

111 
	tuöt_Á°32_t
;

112 
__exãnsi⁄__


113 
	tuöt_Á°64_t
;

118 #i‡
__WORDSIZE
 == 64

119 #i‚de‡
__öçå_t_deföed


120 
	töçå_t
;

121 
	#__öçå_t_deföed


	)

123 
	tuöçå_t
;

125 #i‚de‡
__öçå_t_deföed


126 
	töçå_t
;

127 
	#__öçå_t_deföed


	)

129 
	tuöçå_t
;

134 #i‡
__WORDSIZE
 == 64

135 
	tötmax_t
;

136 
	tuötmax_t
;

138 
__exãnsi⁄__


139 
	tötmax_t
;

140 
__exãnsi⁄__


141 
	tuötmax_t
;

147 #i‡!
deföed
 
__˝lu•lus
 || deföed 
__STDC_LIMIT_MACROS


149 #i‡
__WORDSIZE
 == 64

150 
	#__INT64_C
(
c
Ë¯## 
L


	)

151 
	#__UINT64_C
(
c
Ë¯## 
UL


	)

153 
	#__INT64_C
(
c
Ë¯## 
LL


	)

154 
	#__UINT64_C
(
c
Ë¯## 
ULL


	)

160 
	#INT8_MIN
 (-128)

	)

161 
	#INT16_MIN
 (-32767-1)

	)

162 
	#INT32_MIN
 (-2147483647-1)

	)

163 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

165 
	#INT8_MAX
 (127)

	)

166 
	#INT16_MAX
 (32767)

	)

167 
	#INT32_MAX
 (2147483647)

	)

168 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

171 
	#UINT8_MAX
 (255)

	)

172 
	#UINT16_MAX
 (65535)

	)

173 
	#UINT32_MAX
 (4294967295U)

	)

174 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

178 
	#INT_LEAST8_MIN
 (-128)

	)

179 
	#INT_LEAST16_MIN
 (-32767-1)

	)

180 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

181 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

183 
	#INT_LEAST8_MAX
 (127)

	)

184 
	#INT_LEAST16_MAX
 (32767)

	)

185 
	#INT_LEAST32_MAX
 (2147483647)

	)

186 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

189 
	#UINT_LEAST8_MAX
 (255)

	)

190 
	#UINT_LEAST16_MAX
 (65535)

	)

191 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

192 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

196 
	#INT_FAST8_MIN
 (-128)

	)

197 #i‡
__WORDSIZE
 == 64

198 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

199 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

201 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

202 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

204 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

206 
	#INT_FAST8_MAX
 (127)

	)

207 #i‡
__WORDSIZE
 == 64

208 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

209 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

211 
	#INT_FAST16_MAX
 (2147483647)

	)

212 
	#INT_FAST32_MAX
 (2147483647)

	)

214 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

217 
	#UINT_FAST8_MAX
 (255)

	)

218 #i‡
__WORDSIZE
 == 64

219 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

220 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

222 
	#UINT_FAST16_MAX
 (4294967295U)

	)

223 
	#UINT_FAST32_MAX
 (4294967295U)

	)

225 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

229 #i‡
__WORDSIZE
 == 64

230 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

231 
	#INTPTR_MAX
 (9223372036854775807L)

	)

232 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

234 
	#INTPTR_MIN
 (-2147483647-1)

	)

235 
	#INTPTR_MAX
 (2147483647)

	)

236 
	#UINTPTR_MAX
 (4294967295U)

	)

241 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

243 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

246 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

252 #i‡
__WORDSIZE
 == 64

253 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

254 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

256 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

257 
	#PTRDIFF_MAX
 (2147483647)

	)

261 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

262 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

265 #i‡
__WORDSIZE
 == 64

266 
	#SIZE_MAX
 (18446744073709551615UL)

	)

268 
	#SIZE_MAX
 (4294967295U)

	)

272 #i‚de‡
WCHAR_MIN


274 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

275 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

279 
	#WINT_MIN
 (0u)

	)

280 
	#WINT_MAX
 (4294967295u)

	)

287 #i‡!
deföed
 
__˝lu•lus
 || deföed 
__STDC_CONSTANT_MACROS


290 
	#INT8_C
(
c
Ë
	)
c

291 
	#INT16_C
(
c
Ë
	)
c

292 
	#INT32_C
(
c
Ë
	)
c

293 #i‡
__WORDSIZE
 == 64

294 
	#INT64_C
(
c
Ë¯## 
L


	)

296 
	#INT64_C
(
c
Ë¯## 
LL


	)

300 
	#UINT8_C
(
c
Ë
	)
c

301 
	#UINT16_C
(
c
Ë
	)
c

302 
	#UINT32_C
(
c
Ë¯## 
U


	)

303 #i‡
__WORDSIZE
 == 64

304 
	#UINT64_C
(
c
Ë¯## 
UL


	)

306 
	#UINT64_C
(
c
Ë¯## 
ULL


	)

310 #i‡
__WORDSIZE
 == 64

311 
	#INTMAX_C
(
c
Ë¯## 
L


	)

312 
	#UINTMAX_C
(
c
Ë¯## 
UL


	)

314 
	#INTMAX_C
(
c
Ë¯## 
LL


	)

315 
	#UINTMAX_C
(
c
Ë¯## 
ULL


	)

	@/usr/include/sys/cdefs.h

20 #i‚def 
_SYS_CDEFS_H


21 
	#_SYS_CDEFS_H
 1

	)

24 #i‚de‡
_FEATURES_H


25 
	~<„©uªs.h
>

31 #i‡
deföed
 
__GNUC__
 && !deföed 
__STDC__


36 #unde‡
__P


37 #unde‡
__PMT


39 #ifde‡
__GNUC__


46 #i‡!
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (3, 3)

47 
	#__THROW
 
	`__©åibuã__
 ((
__nŸhrow__
))

	)

48 
	#__NTH
(
f˘
Ë
	`__©åibuã__
 ((
__nŸhrow__
)Ë
	)
f˘

50 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (2,8)

51 
	#__THROW
 
	`throw
 ()

	)

52 
	#__NTH
(
f˘
Ëf˘ 
	`throw
 ()

	)

54 
	#__THROW


	)

55 
	#__NTH
(
f˘
Ë
	)
f˘

61 
	#__ölöe


	)

63 
	#__THROW


	)

64 
	#__NTH
(
f˘
Ë
	)
f˘

66 
	#__c⁄°
 c⁄°

	)

67 
	#__sig√d
 sig√d

	)

68 
	#__vﬁ©ûe
 vﬁ©ûe

	)

74 
	#__P
(
¨gs
Ë
	)
¨gs

75 
	#__PMT
(
¨gs
Ë
	)
¨gs

80 
	#__CONCAT
(
x
,
y
Ëx ## 
	)
y

81 
	#__STRING
(
x
Ë#x

	)

84 
	#__±r_t
 *

	)

85 
	#__l⁄g_doubÀ_t
 

	)

89 #ifdef 
__˝lu•lus


90 
	#__BEGIN_DECLS
 "C" {

	)

91 
	#__END_DECLS
 }

	)

93 
	#__BEGIN_DECLS


	)

94 
	#__END_DECLS


	)

103 #i‡
deföed
 
__˝lu•lus
 && deföed 
_GLIBCPP_USE_NAMESPACES


104 
	#__BEGIN_NAMESPACE_STD
 
«me•a˚
 
°d
 {

	)

105 
	#__END_NAMESPACE_STD
 }

	)

106 
	#__USING_NAMESPACE_STD
(
«me
Ë
usög
 
°d
::«me;

	)

107 
	#__BEGIN_NAMESPACE_C99
 
«me•a˚
 
__c99
 {

	)

108 
	#__END_NAMESPACE_C99
 }

	)

109 
	#__USING_NAMESPACE_C99
(
«me
Ë
usög
 
__c99
::«me;

	)

114 
	#__BEGIN_NAMESPACE_STD


	)

115 
	#__END_NAMESPACE_STD


	)

116 
	#__USING_NAMESPACE_STD
(
«me
)

	)

117 
	#__BEGIN_NAMESPACE_C99


	)

118 
	#__END_NAMESPACE_C99


	)

119 
	#__USING_NAMESPACE_C99
(
«me
)

	)

124 #i‚de‡
__BOUNDED_POINTERS__


125 
	#__bounded


	)

126 
	#__unbounded


	)

127 
	#__±rvÆue


	)

132 
	#__bos
(
±r
Ë
	`__buûtö_obje˘_size
 (±r, 
__USE_FORTIFY_LEVEL
 > 1)

	)

133 
	#__bos0
(
±r
Ë
	`__buûtö_obje˘_size
 (±r, 0)

	)

134 
	#__w¨nde˛
(
«me
, 
msg
Ë
	`«me
 ()

	)

138 #i‡
__GNUC_PREREQ
 (2,97)

140 
	#__Êex¨r
 []

	)

142 #ifde‡
__GNUC__


143 
	#__Êex¨r
 [0]

	)

145 #i‡
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

146 
	#__Êex¨r
 []

	)

149 
	#__Êex¨r
 [1]

	)

165 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

167 
	#__REDIRECT
(
«me
, 
¥Ÿo
, 
Æüs
Ë«mê¥Ÿÿ
	`__asm__
 (
	`__ASMNAME
 (#Æüs))

	)

168 #ifde‡
__˝lu•lus


169 
	#__REDIRECT_NTH
(
«me
, 
¥Ÿo
, 
Æüs
) \

170 
«me
 
¥Ÿo
 
__THROW
 
	`__asm__
 (
	`__ASMNAME
 (#Æüs))

	)

172 
	#__REDIRECT_NTH
(
«me
, 
¥Ÿo
, 
Æüs
) \

173 
«me
 
¥Ÿo
 
	`__asm__
 (
	`__ASMNAME
 (#Æüs)Ë
__THROW


	)

175 
	#__ASMNAME
(
˙ame
Ë
	`__ASMNAME2
 (
__USER_LABEL_PREFIX__
, c«me)

	)

176 
	#__ASMNAME2
(
¥efix
, 
˙ame
Ë
	`__STRING
 (¥efixË
	)
˙ame

189 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2

190 
	#__©åibuã__
(
xyz
Ë

	)

196 #i‡
__GNUC_PREREQ
 (2,96)

197 
	#__©åibuã_mÆloc__
 
	`__©åibuã__
 ((
__mÆloc__
))

	)

199 
	#__©åibuã_mÆloc__


	)

205 #i‡
__GNUC_PREREQ
 (2,96)

206 
	#__©åibuã_puª__
 
	`__©åibuã__
 ((
__puª__
))

	)

208 
	#__©åibuã_puª__


	)

214 #i‡
__GNUC_PREREQ
 (3,1)

215 
	#__©åibuã_u£d__
 
	`__©åibuã__
 ((
__u£d__
))

	)

216 
	#__©åibuã_noölöe__
 
	`__©åibuã__
 ((
__noölöe__
))

	)

218 
	#__©åibuã_u£d__
 
	`__©åibuã__
 ((
__unu£d__
))

	)

219 
	#__©åibuã_noölöe__


	)

223 #i‡
__GNUC_PREREQ
 (3,2)

224 
	#__©åibuã_dïªˇãd__
 
	`__©åibuã__
 ((
__dïªˇãd__
))

	)

226 
	#__©åibuã_dïªˇãd__


	)

235 #i‡
__GNUC_PREREQ
 (2,8)

236 
	#__©åibuã_f‹m©_¨g__
(
x
Ë
	`__©åibuã__
 ((
	`__f‹m©_¨g__
 (x)))

	)

238 
	#__©åibuã_f‹m©_¨g__
(
x
Ë

	)

245 #i‡
__GNUC_PREREQ
 (2,97)

246 
	#__©åibuã_f‹m©_°rfm⁄__
(
a
,
b
) \

247 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__°rfm⁄__
, 
a
, 
b
)))

	)

249 
	#__©åibuã_f‹m©_°rfm⁄__
(
a
,
b
Ë

	)

254 #i‡
__GNUC_PREREQ
 (3,3)

255 
	#__n⁄nuŒ
(
∑øms
Ë
	`__©åibuã__
 ((
__n⁄nuŒ__
Ö¨ams))

	)

257 
	#__n⁄nuŒ
(
∑øms
)

	)

262 #i‡
__GNUC_PREREQ
 (3,4)

263 
	#__©åibuã_w¨n_unu£d_ªsu…__
 \

264 
	`__©åibuã__
 ((
__w¨n_unu£d_ªsu…__
))

	)

265 #i‡
__USE_FORTIFY_LEVEL
 > 0

266 
	#__wur
 
__©åibuã_w¨n_unu£d_ªsu…__


	)

269 
	#__©åibuã_w¨n_unu£d_ªsu…__


	)

271 #i‚de‡
__wur


272 
	#__wur


	)

276 #i‡
__GNUC_PREREQ
 (3,2)

277 
	#__Æways_ölöe
 
__ölöe
 
	`__©åibuã__
 ((
__Æways_ölöe__
))

	)

279 
	#__Æways_ölöe
 
__ölöe


	)

284 #ifde‡
__GNUC_STDC_INLINE__


285 
	#__exã∫_ölöe
 
__ölöe
 
	`__©åibuã__
 ((
__gnu_ölöe__
))

	)

286 
	#__exã∫_Æways_ölöe
 \

287 
__Æways_ölöe
 
	`__©åibuã__
 ((
__gnu_ölöe__
))

	)

289 
	#__exã∫_ölöe
 
__ölöe


	)

290 
	#__exã∫_Æways_ölöe
 
__Æways_ölöe


	)

297 #i‡!
__GNUC_PREREQ
 (2,8)

298 
	#__exãnsi⁄__


	)

302 #i‡!
__GNUC_PREREQ
 (2,92)

303 
	#__ª°ri˘


	)

309 #i‡
__GNUC_PREREQ
 (3,1Ë&& !
deföed
 
__GNUG__


310 
	#__ª°ri˘_¨r
 
__ª°ri˘


	)

312 #ifde‡
__GNUC__


313 
	#__ª°ri˘_¨r


	)

315 #i‡
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

316 
	#__ª°ri˘_¨r
 
ª°ri˘


	)

319 
	#__ª°ri˘_¨r


	)

324 
	~<bôs/w‹dsize.h
>

326 #i‡
deföed
 
__LONG_DOUBLE_MATH_OPTIONAL
 && deföed 
__NO_LONG_DOUBLE_MATH


327 
	#__LDBL_COMPAT
 1

	)

328 #ifde‡
__REDIRECT


329 
	#__LDBL_REDIR1
(
«me
, 
¥Ÿo
, 
Æüs
Ë
	`__REDIRECT
 («me,ÖrŸo,álüs)

	)

330 
	#__LDBL_REDIR
(
«me
, 
¥Ÿo
) \

331 
	`__LDBL_REDIR1
 (
«me
, 
¥Ÿo
, 
__∆dbl_
##«me)

	)

332 
	#__LDBL_REDIR1_NTH
(
«me
, 
¥Ÿo
, 
Æüs
Ë
	`__REDIRECT_NTH
 («me,ÖrŸo,álüs)

	)

333 
	#__LDBL_REDIR_NTH
(
«me
, 
¥Ÿo
) \

334 
	`__LDBL_REDIR1_NTH
 (
«me
, 
¥Ÿo
, 
__∆dbl_
##«me)

	)

335 
	#__LDBL_REDIR1_DECL
(
«me
, 
Æüs
) \

336 
	`__ty≥of
 (
«me
Ë«mê
	`__asm
 (
	`__ASMNAME
 (#Æüs));

	)

337 
	#__LDBL_REDIR_DECL
(
«me
) \

338 
	`__ty≥of
 (
«me
Ë«mê
	`__asm
 (
	`__ASMNAME
 ("__∆dbl_" #«me));

	)

341 #i‡!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT


342 
	#__LDBL_REDIR1
(
«me
, 
¥Ÿo
, 
Æüs
Ë«mê
	)
¥Ÿo

343 
	#__LDBL_REDIR
(
«me
, 
¥Ÿo
Ë«mê
	)
¥Ÿo

344 
	#__LDBL_REDIR1_NTH
(
«me
, 
¥Ÿo
, 
Æüs
Ë«mê¥Ÿÿ
__THROW


	)

345 
	#__LDBL_REDIR_NTH
(
«me
, 
¥Ÿo
Ë«mê¥Ÿÿ
__THROW


	)

346 
	#__LDBL_REDIR_DECL
(
«me
)

	)

	@/usr/include/sys/resource.h

19 #i‚def 
_SYS_RESOURCE_H


20 
	#_SYS_RESOURCE_H
 1

	)

22 
	~<„©uªs.h
>

25 
	~<bôs/ªsour˚.h
>

27 #i‚de‡
__id_t_deföed


28 
__id_t
 
	tid_t
;

29 
	#__id_t_deföed


	)

32 
	g__BEGIN_DECLS


38 #i‡
deföed
 
__USE_GNU
 && !deföed 
__˝lu•lus


39 
__æimô_ªsour˚
 
	t__æimô_ªsour˚_t
;

40 
__rußge_who
 
	t__rußge_who_t
;

41 
__¥i‹ôy_which
 
	t__¥i‹ôy_which_t
;

43 
	t__æimô_ªsour˚_t
;

44 
	t__rußge_who_t
;

45 
	t__¥i‹ôy_which_t
;

50 #i‚de‡
__USE_FILE_OFFSET64


51 
	$gëæimô
 (
__æimô_ªsour˚_t
 
__ªsour˚
,

52 
æimô
 *
__æimôs
Ë
__THROW
;

54 #ifde‡
__REDIRECT_NTH


55 
	`__REDIRECT_NTH
 (
gëæimô
, (
__æimô_ªsour˚_t
 
__ªsour˚
,

56 
æimô
 *
__æimôs
), 
gëæimô64
);

58 
	#gëæimô
 
gëæimô64


	)

61 #ifde‡
__USE_LARGEFILE64


62 
	$gëæimô64
 (
__æimô_ªsour˚_t
 
__ªsour˚
,

63 
æimô64
 *
__æimôs
Ë
__THROW
;

69 #i‚de‡
__USE_FILE_OFFSET64


70 
	$£ålimô
 (
__æimô_ªsour˚_t
 
__ªsour˚
,

71 
__c⁄°
 
æimô
 *
__æimôs
Ë
__THROW
;

73 #ifde‡
__REDIRECT_NTH


74 
	`__REDIRECT_NTH
 (
£ålimô
, (
__æimô_ªsour˚_t
 
__ªsour˚
,

75 
__c⁄°
 
æimô
 *
__æimôs
),

76 
£ålimô64
);

78 
	#£ålimô
 
£ålimô64


	)

81 #ifde‡
__USE_LARGEFILE64


82 
	$£ålimô64
 (
__æimô_ªsour˚_t
 
__ªsour˚
,

83 
__c⁄°
 
æimô64
 *
__æimôs
Ë
__THROW
;

88 
	$gërußge
 (
__rußge_who_t
 
__who
, 
rußge
 *
__ußge
Ë
__THROW
;

94 
	$gë¥i‹ôy
 (
__¥i‹ôy_which_t
 
__which
, 
id_t
 
__who
Ë
__THROW
;

98 
	$£çri‹ôy
 (
__¥i‹ôy_which_t
 
__which
, 
id_t
 
__who
, 
__¥io
)

99 
__THROW
;

101 
__END_DECLS


	@/usr/include/sys/sysmacros.h

21 #i‚de‡
_SYS_SYSMACROS_H


22 
	#_SYS_SYSMACROS_H
 1

	)

24 
	~<„©uªs.h
>

29 #ifde‡
__GLIBC_HAVE_LONG_LONG


30 
__exãnsi⁄__


31 
__exã∫_ölöe
 
	$gnu_dev_maj‹
 (
__dev
)

32 
__THROW
;

33 
__exãnsi⁄__


34 
__exã∫_ölöe
 
	$gnu_dev_mö‹
 (
__dev
)

35 
__THROW
;

36 
__exãnsi⁄__


37 
__exã∫_ölöe
 
	$gnu_dev_makedev
 (
__maj‹
,

38 
__mö‹
)

39 
__THROW
;

41 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

42 
__exãnsi⁄__
 
__exã∫_ölöe
 

43 
	`__NTH
 (
	$gnu_dev_maj‹
 (
__dev
))

45  ((
__dev
 >> 8) & 0xfff) | (() (__dev >> 32) & ~0xfff);

46 
	}
}

48 
__exãnsi⁄__
 
__exã∫_ölöe
 

49 
__NTH
 (
	$gnu_dev_mö‹
 (
__dev
))

51  (
__dev
 & 0xff) | (() (__dev >> 12) & ~0xff);

52 
	}
}

54 
__exãnsi⁄__
 
__exã∫_ölöe
 

55 
__NTH
 (
	$gnu_dev_makedev
 (
__maj‹
, 
__mö‹
))

57  ((
__mö‹
 & 0xffË| ((
__maj‹
 & 0xfff) << 8)

58 | (((Ë(
__mö‹
 & ~0xff)) << 12)

59 | (((Ë(
__maj‹
 & ~0xfff)) << 32));

60 
	}
}

65 
	#maj‹
(
dev
Ë
	`gnu_dev_maj‹
 (dev)

	)

66 
	#mö‹
(
dev
Ë
	`gnu_dev_mö‹
 (dev)

	)

67 
	#makedev
(
maj
, 
mö
Ë
	`gnu_dev_makedev
 (maj, mö)

	)

	@/usr/include/sys/ttydefaults.h

40 #i‚de‡
_SYS_TTYDEFAULTS_H_


41 
	#_SYS_TTYDEFAULTS_H_


	)

46 
	#TTYDEF_IFLAG
 (
BRKINT
 | 
ISTRIP
 | 
ICRNL
 | 
IMAXBEL
 | 
IXON
 | 
IXANY
)

	)

47 
	#TTYDEF_OFLAG
 (
OPOST
 | 
ONLCR
 | 
XTABS
)

	)

48 
	#TTYDEF_LFLAG
 (
ECHO
 | 
ICANON
 | 
ISIG
 | 
IEXTEN
 | 
ECHOE
|
ECHOKE
|
ECHOCTL
)

	)

49 
	#TTYDEF_CFLAG
 (
CREAD
 | 
CS7
 | 
PARENB
 | 
HUPCL
)

	)

50 
	#TTYDEF_SPEED
 (
B9600
)

	)

55 
	#CTRL
(
x
Ë(x&037)

	)

56 
	#CEOF
 
	`CTRL
('d')

	)

57 #ifde‡
_POSIX_VDISABLE


58 
	#CEOL
 
_POSIX_VDISABLE


	)

60 
	#CEOL
 '\0'

	)

62 
	#CERASE
 0177

	)

63 
	#CINTR
 
	`CTRL
('c')

	)

64 #ifde‡
_POSIX_VDISABLE


65 
	#CSTATUS
 
_POSIX_VDISABLE


	)

67 
	#CSTATUS
 '\0'

	)

69 
	#CKILL
 
	`CTRL
('u')

	)

70 
	#CMIN
 1

	)

71 
	#CQUIT
 034

	)

72 
	#CSUSP
 
	`CTRL
('z')

	)

73 
	#CTIME
 0

	)

74 
	#CDSUSP
 
	`CTRL
('y')

	)

75 
	#CSTART
 
	`CTRL
('q')

	)

76 
	#CSTOP
 
	`CTRL
('s')

	)

77 
	#CLNEXT
 
	`CTRL
('v')

	)

78 
	#CDISCARD
 
	`CTRL
('o')

	)

79 
	#CWERASE
 
	`CTRL
('w')

	)

80 
	#CREPRINT
 
	`CTRL
('r')

	)

81 
	#CEOT
 
CEOF


	)

83 
	#CBRK
 
CEOL


	)

84 
	#CRPRNT
 
CREPRINT


	)

85 
	#CFLUSH
 
CDISCARD


	)

93 #ifde‡
TTYDEFCHARS


94 
cc_t
 
	gâydefch¨s
[
NCCS
] = {

95 
CEOF
, 
CEOL
, CEOL, 
CERASE
, 
CWERASE
, 
CKILL
, 
CREPRINT
,

96 
_POSIX_VDISABLE
, 
CINTR
, 
CQUIT
, 
CSUSP
, 
CDSUSP
, 
CSTART
, 
CSTOP
, 
CLNEXT
,

97 
CDISCARD
, 
CMIN
, 
CTIME
, 
CSTATUS
, 
_POSIX_VDISABLE


99 #unde‡
TTYDEFCHARS


	@/usr/include/sys/ucontext.h

19 #i‚de‡
_SYS_UCONTEXT_H


20 
	#_SYS_UCONTEXT_H
 1

	)

22 
	~<„©uªs.h
>

23 
	~<sig«l.h
>

27 
	~<bôs/sigc⁄ãxt.h
>

31 
	tgªg_t
;

34 
	#NGREG
 19

	)

37 
gªg_t
 
	tgªg£t_t
[
NGREG
];

39 #ifde‡
__USE_GNU


43 
	mREG_GS
 = 0,

44 
	#REG_GS
 
REG_GS


	)

45 
	mREG_FS
,

46 
	#REG_FS
 
REG_FS


	)

47 
	mREG_ES
,

48 
	#REG_ES
 
REG_ES


	)

49 
	mREG_DS
,

50 
	#REG_DS
 
REG_DS


	)

51 
	mREG_EDI
,

52 
	#REG_EDI
 
REG_EDI


	)

53 
	mREG_ESI
,

54 
	#REG_ESI
 
REG_ESI


	)

55 
	mREG_EBP
,

56 
	#REG_EBP
 
REG_EBP


	)

57 
	mREG_ESP
,

58 
	#REG_ESP
 
REG_ESP


	)

59 
	mREG_EBX
,

60 
	#REG_EBX
 
REG_EBX


	)

61 
	mREG_EDX
,

62 
	#REG_EDX
 
REG_EDX


	)

63 
	mREG_ECX
,

64 
	#REG_ECX
 
REG_ECX


	)

65 
	mREG_EAX
,

66 
	#REG_EAX
 
REG_EAX


	)

67 
	mREG_TRAPNO
,

68 
	#REG_TRAPNO
 
REG_TRAPNO


	)

69 
	mREG_ERR
,

70 
	#REG_ERR
 
REG_ERR


	)

71 
	mREG_EIP
,

72 
	#REG_EIP
 
REG_EIP


	)

73 
	mREG_CS
,

74 
	#REG_CS
 
REG_CS


	)

75 
	mREG_EFL
,

76 
	#REG_EFL
 
REG_EFL


	)

77 
	mREG_UESP
,

78 
	#REG_UESP
 
REG_UESP


	)

79 
	mREG_SS


80 
	#REG_SS
 
REG_SS


	)

85 
	s_libc_Âªg


87 
	msignifiˇnd
[4];

88 
	mexp⁄ít
;

91 
	s_libc_Â°©e


93 
	mcw
;

94 
	msw
;

95 
	mèg
;

96 
	mùoff
;

97 
	mcs£l
;

98 
	md©aoff
;

99 
	md©a£l
;

100 
_libc_Âªg
 
	m_°
[8];

101 
	m°©us
;

105 
_libc_Â°©e
 *
	tÂªg£t_t
;

110 
gªg£t_t
 
	mgªgs
;

113 
Âªg£t_t
 
	mÂªgs
;

114 
	mﬁdmask
;

115 
	m¸2
;

116 } 
	tmc⁄ãxt_t
;

119 
	suc⁄ãxt


121 
	muc_Êags
;

122 
uc⁄ãxt
 *
	muc_lök
;

123 
°ack_t
 
	muc_°ack
;

124 
mc⁄ãxt_t
 
	muc_mc⁄ãxt
;

125 
__sig£t_t
 
	muc_sigmask
;

126 
_libc_Â°©e
 
	m__Âªgs_mem
;

127 } 
	tuc⁄ãxt_t
;

	@/usr/include/xlocale.h

21 #i‚de‡
_XLOCALE_H


22 
	#_XLOCALE_H
 1

	)

28 
	s__loˇÀ_°ru˘


31 
loˇÀ_d©a
 *
	m__loˇÀs
[13];

34 c⁄° *
	m__˘y≥_b
;

35 c⁄° *
	m__˘y≥_tﬁowî
;

36 c⁄° *
	m__˘y≥_touµî
;

39 c⁄° *
	m__«mes
[13];

40 } *
	t__loˇÀ_t
;

	@/usr/include/zconf.h

8 #i‚de‡
ZCONF_H


9 
	#ZCONF_H


	)

17 #ifde‡
Z_PREFIX


20 
	#_di°_code
 
z__di°_code


	)

21 
	#_Àngth_code
 
z__Àngth_code


	)

22 
	#_å_Æign
 
z__å_Æign


	)

23 
	#_å_Êush_block
 
z__å_Êush_block


	)

24 
	#_å_öô
 
z__å_öô


	)

25 
	#_å_°‹ed_block
 
z__å_°‹ed_block


	)

26 
	#_å_èŒy
 
z__å_èŒy


	)

27 
	#adÀr32
 
z_adÀr32


	)

28 
	#adÀr32_comböe
 
z_adÀr32_comböe


	)

29 
	#com¥ess
 
z_com¥ess


	)

30 
	#com¥ess2
 
z_com¥ess2


	)

31 
	#com¥essBound
 
z_com¥essBound


	)

32 
	#¸c32
 
z_¸c32


	)

33 
	#¸c32_comböe
 
z_¸c32_comböe


	)

34 
	#deÊ©e
 
z_deÊ©e


	)

35 
	#deÊ©eBound
 
z_deÊ©eBound


	)

36 
	#deÊ©eC›y
 
z_deÊ©eC›y


	)

37 
	#deÊ©eEnd
 
z_deÊ©eEnd


	)

38 
	#deÊ©eInô2_
 
z_deÊ©eInô2_


	)

39 
	#deÊ©eInô_
 
z_deÊ©eInô_


	)

40 
	#deÊ©eP¨ams
 
z_deÊ©eP¨ams


	)

41 
	#deÊ©ePrime
 
z_deÊ©ePrime


	)

42 
	#deÊ©eRe£t
 
z_deÊ©eRe£t


	)

43 
	#deÊ©eSëDi˘i⁄¨y
 
z_deÊ©eSëDi˘i⁄¨y


	)

44 
	#deÊ©eSëHódî
 
z_deÊ©eSëHódî


	)

45 
	#deÊ©eTu√
 
z_deÊ©eTu√


	)

46 
	#deÊ©e_c›yright
 
z_deÊ©e_c›yright


	)

47 
	#gë_¸c_èbÀ
 
z_gë_¸c_èbÀ


	)

48 
	#gz˛óªº
 
z_gz˛óªº


	)

49 
	#gz˛o£
 
z_gz˛o£


	)

50 
	#gzdúe˘
 
z_gzdúe˘


	)

51 
	#gzd›í
 
z_gzd›í


	)

52 
	#gzeof
 
z_gzeof


	)

53 
	#gzîr‹
 
z_gzîr‹


	)

54 
	#gzÊush
 
z_gzÊush


	)

55 
	#gzgëc
 
z_gzgëc


	)

56 
	#gzgës
 
z_gzgës


	)

57 
	#gz›í
 
z_gz›í


	)

58 
	#gz¥ötf
 
z_gz¥ötf


	)

59 
	#gzputc
 
z_gzputc


	)

60 
	#gzputs
 
z_gzputs


	)

61 
	#gzªad
 
z_gzªad


	)

62 
	#gzªwöd
 
z_gzªwöd


	)

63 
	#gz£ek
 
z_gz£ek


	)

64 
	#gz£ç¨ams
 
z_gz£ç¨ams


	)

65 
	#gzãŒ
 
z_gzãŒ


	)

66 
	#gzungëc
 
z_gzungëc


	)

67 
	#gzwrôe
 
z_gzwrôe


	)

68 
	#öÊ©e
 
z_öÊ©e


	)

69 
	#öÊ©eBack
 
z_öÊ©eBack


	)

70 
	#öÊ©eBackEnd
 
z_öÊ©eBackEnd


	)

71 
	#öÊ©eBackInô_
 
z_öÊ©eBackInô_


	)

72 
	#öÊ©eC›y
 
z_öÊ©eC›y


	)

73 
	#öÊ©eEnd
 
z_öÊ©eEnd


	)

74 
	#öÊ©eGëHódî
 
z_öÊ©eGëHódî


	)

75 
	#öÊ©eInô2_
 
z_öÊ©eInô2_


	)

76 
	#öÊ©eInô_
 
z_öÊ©eInô_


	)

77 
	#öÊ©ePrime
 
z_öÊ©ePrime


	)

78 
	#öÊ©eRe£t
 
z_öÊ©eRe£t


	)

79 
	#öÊ©eSëDi˘i⁄¨y
 
z_öÊ©eSëDi˘i⁄¨y


	)

80 
	#öÊ©eSync
 
z_öÊ©eSync


	)

81 
	#öÊ©eSyncPoöt
 
z_öÊ©eSyncPoöt


	)

82 
	#öÊ©e_c›yright
 
z_öÊ©e_c›yright


	)

83 
	#öÊ©e_Á°
 
z_öÊ©e_Á°


	)

84 
	#öÊ©e_èbÀ
 
z_öÊ©e_èbÀ


	)

85 
	#uncom¥ess
 
z_uncom¥ess


	)

86 
	#zEº‹
 
z_zEº‹


	)

87 
	#z_îrmsg
 
z_z_îrmsg


	)

88 
	#zˇŒoc
 
z_zˇŒoc


	)

89 
	#zc‰ì
 
z_zc‰ì


	)

90 
	#zlibCompûeFœgs
 
z_zlibCompûeFœgs


	)

91 
	#zlibVîsi⁄
 
z_zlibVîsi⁄


	)

94 
	#Byã
 
z_Byã


	)

95 
	#Byãf
 
z_Byãf


	)

96 
	#Æloc_func
 
z_Æloc_func


	)

97 
	#ch¨f
 
z_ch¨f


	)

98 
	#‰ì_func
 
z_‰ì_func


	)

99 
	#gzFûe
 
z_gzFûe


	)

100 
	#gz_hódî
 
z_gz_hódî


	)

101 
	#gz_hódîp
 
z_gz_hódîp


	)

102 
	#ö_func
 
z_ö_func


	)

103 
	#ötf
 
z_ötf


	)

104 
	#out_func
 
z_out_func


	)

105 
	#uI¡
 
z_uI¡


	)

106 
	#uI¡f
 
z_uI¡f


	)

107 
	#uL⁄g
 
z_uL⁄g


	)

108 
	#uL⁄gf
 
z_uL⁄gf


	)

109 
	#voidp
 
z_voidp


	)

110 
	#voidp
 
z_voidp


	)

111 
	#voidpc
 
z_voidpc


	)

112 
	#voidpc
 
z_voidpc


	)

113 
	#voidpf
 
z_voidpf


	)

114 
	#voidpf
 
z_voidpf


	)

115 
	#z_°ªam
 
z_z_°ªam


	)

116 
	#z_°ªamp
 
z_z_°ªamp


	)

119 
	#gz_hódî_s
 
z_gz_hódî_s


	)

120 
	#öã∫Æ_°©e
 
z_öã∫Æ_°©e


	)

121 
	#z_°ªam_s
 
z_z_°ªam_s


	)

125 #i‡
deföed
(
__MSDOS__
Ë&& !deföed(
MSDOS
)

126 
	#MSDOS


	)

128 #i‡(
deföed
(
OS_2
Ë|| deföed(
__OS2__
)Ë&& !deföed(
OS2
)

129 
	#OS2


	)

131 #i‡
deföed
(
_WINDOWS
Ë&& !deföed(
WINDOWS
)

132 
	#WINDOWS


	)

134 #i‡
deföed
(
_WIN32
Ë|| deföed(
_WIN32_WCE
Ë|| deföed(
__WIN32__
)

135 #i‚de‡
WIN32


136 
	#WIN32


	)

139 #i‡(
deföed
(
MSDOS
Ë|| deföed(
OS2
Ë|| deföed(
WINDOWS
)Ë&& !deföed(
WIN32
)

140 #i‡!
deföed
(
__GNUC__
Ë&& !deföed(
__FLAT__
Ë&& !deföed(
__386__
)

141 #i‚de‡
SYS16BIT


142 
	#SYS16BIT


	)

151 #ifde‡
SYS16BIT


152 
	#MAXSEG_64K


	)

154 #ifde‡
MSDOS


155 
	#UNALIGNED_OK


	)

158 #ifde‡
__STDC_VERSION__


159 #i‚de‡
STDC


160 
	#STDC


	)

162 #i‡
__STDC_VERSION__
 >= 199901L

163 #i‚de‡
STDC99


164 
	#STDC99


	)

168 #i‡!
deföed
(
STDC
Ë&& (deföed(
__STDC__
Ë|| deföed(
__˝lu•lus
))

169 
	#STDC


	)

171 #i‡!
deföed
(
STDC
Ë&& (deföed(
__GNUC__
Ë|| deföed(
__BORLANDC__
))

172 
	#STDC


	)

174 #i‡!
deföed
(
STDC
Ë&& (deföed(
MSDOS
Ë|| deföed(
WINDOWS
Ë|| deföed(
WIN32
))

175 
	#STDC


	)

177 #i‡!
deföed
(
STDC
Ë&& (deföed(
OS2
Ë|| deföed(
__HOS_AIX__
))

178 
	#STDC


	)

181 #i‡
deföed
(
__OS400__
Ë&& !deföed(
STDC
)

182 
	#STDC


	)

185 #i‚de‡
STDC


187 c⁄°

	)

192 #i‡
deföed
(
__MWERKS__
)||deföed(
≠∂ec
)||deföed(
THINK_C
)||deföed(
__SC__
)

193 
	#NO_DUMMY_DECL


	)

197 #i‚de‡
MAX_MEM_LEVEL


198 #ifde‡
MAXSEG_64K


199 
	#MAX_MEM_LEVEL
 8

	)

201 
	#MAX_MEM_LEVEL
 9

	)

210 #i‚de‡
MAX_WBITS


211 
	#MAX_WBITS
 15

	)

229 #i‚de‡
OF


230 #ifde‡
STDC


231 
	#OF
(
¨gs
Ë
	)
¨gs

233 
	#OF
(
¨gs
Ë()

	)

243 #ifde‡
SYS16BIT


244 #i‡
deföed
(
M_I86SM
Ë|| deföed(
M_I86MM
)

246 
	#SMALL_MEDIUM


	)

247 #ifde‡
_MSC_VER


248 
	#FAR
 
_Ár


	)

250 
	#FAR
 
Ár


	)

253 #i‡(
deföed
(
__SMALL__
Ë|| deföed(
__MEDIUM__
))

255 
	#SMALL_MEDIUM


	)

256 #ifde‡
__BORLANDC__


257 
	#FAR
 
_Ár


	)

259 
	#FAR
 
Ár


	)

264 #i‡
deföed
(
WINDOWS
Ë|| deföed(
WIN32
)

268 #ifde‡
ZLIB_DLL


269 #i‡
deföed
(
WIN32
Ë&& (!deföed(
__BORLANDC__
) || (__BORLANDC__ >= 0x500))

270 #ifde‡
ZLIB_INTERNAL


271 
	#ZEXTERN
 
	`__de˛•ec
(
dŒexp‹t
)

	)

273 
	#ZEXTERN
 
	`__de˛•ec
(
dŒimp‹t
)

	)

281 #ifde‡
ZLIB_WINAPI


282 #ifde‡
FAR


283 #unde‡
FAR


285 
	~<wödows.h
>

288 
	#ZEXPORT
 
WINAPI


	)

289 #ifde‡
WIN32


290 
	#ZEXPORTVA
 
WINAPIV


	)

292 
	#ZEXPORTVA
 
FAR
 
CDECL


	)

297 #i‡
deföed
 (
__BEOS__
)

298 #ifde‡
ZLIB_DLL


299 #ifde‡
ZLIB_INTERNAL


300 
	#ZEXPORT
 
	`__de˛•ec
(
dŒexp‹t
)

	)

301 
	#ZEXPORTVA
 
	`__de˛•ec
(
dŒexp‹t
)

	)

303 
	#ZEXPORT
 
	`__de˛•ec
(
dŒimp‹t
)

	)

304 
	#ZEXPORTVA
 
	`__de˛•ec
(
dŒimp‹t
)

	)

309 #ifde‡
HAVE_VISIBILITY_PRAGMA


310 
	#ZEXTERN
 
	`__©åibuã__
((
	`visibûôy
 ("deÁu…"))Ë

	)

313 #i‚de‡
ZEXTERN


314 
	#ZEXTERN
 

	)

316 #i‚de‡
ZEXPORT


317 
	#ZEXPORT


	)

319 #i‚de‡
ZEXPORTVA


320 
	#ZEXPORTVA


	)

323 #i‚de‡
FAR


324 
	#FAR


	)

327 #i‡!
deföed
(
__MACTYPES__
)

328 
	tByã
;

330 
	tuI¡
;

331 
	tuL⁄g
;

333 #ifde‡
SMALL_MEDIUM


335 
	#Byãf
 
Byã
 
FAR


	)

337 
Byã
 
	tFAR
 
	tByãf
;

339 
	tFAR
 
	tch¨f
;

340 
	tFAR
 
	tötf
;

341 
uI¡
 
	tFAR
 
	tuI¡f
;

342 
uL⁄g
 
	tFAR
 
	tuL⁄gf
;

344 #ifde‡
STDC


345 c⁄° *
	tvoidpc
;

346 
	tFAR
 *
	tvoidpf
;

347 *
	tvoidp
;

349 
Byã
 c⁄° *
	tvoidpc
;

350 
Byã
 
	tFAR
 *
	tvoidpf
;

351 
Byã
 *
	tvoidp
;

354 
	~"zlibdefs.h
"

356 #ifde‡
_LARGEFILE64_SOURCE


357 
	~<sys/ty≥s.h
>

360 #i‚de‡
SEEK_SET


361 
	#SEEK_SET
 0

	)

362 
	#SEEK_CUR
 1

	)

363 
	#SEEK_END
 2

	)

365 #i‚de‡
z_off_t


366 
	#z_off_t
 

	)

369 #i‡
deföed
(
__OS400__
)

370 
	#NO_v¢¥ötf


	)

373 #i‡
deföed
(
__MVS__
)

374 
	#NO_v¢¥ötf


	)

378 #i‡
deföed
(
__MVS__
)

379 #¥agm®
m≠
(
deÊ©eInô_
,"DEIN")

380 #¥agm®
m≠
(
deÊ©eInô2_
,"DEIN2")

381 #¥agm®
m≠
(
deÊ©eEnd
,"DEEND")

382 #¥agm®
m≠
(
deÊ©eBound
,"DEBND")

383 #¥agm®
m≠
(
öÊ©eInô_
,"ININ")

384 #¥agm®
m≠
(
öÊ©eInô2_
,"ININ2")

385 #¥agm®
m≠
(
öÊ©eEnd
,"INEND")

386 #¥agm®
m≠
(
öÊ©eSync
,"INSY")

387 #¥agm®
m≠
(
öÊ©eSëDi˘i⁄¨y
,"INSEDI")

388 #¥agm®
m≠
(
com¥essBound
,"CMBND")

389 #¥agm®
m≠
(
öÊ©e_èbÀ
,"INTABL")

390 #¥agm®
m≠
(
öÊ©e_Á°
,"INFA")

391 #¥agm®
m≠
(
öÊ©e_c›yright
,"INCOPY")

	@/usr/include/X11/extensions/XKB.h

29 #i‚de‡
_XKB_H_


30 
	#_XKB_H_


	)

37 
	#X_kbU£Exãnsi⁄
 0

	)

38 
	#X_kbSñe˘Evíts
 1

	)

39 
	#X_kbBñl
 3

	)

40 
	#X_kbGëSèã
 4

	)

41 
	#X_kbL©chLockSèã
 5

	)

42 
	#X_kbGëC⁄åﬁs
 6

	)

43 
	#X_kbSëC⁄åﬁs
 7

	)

44 
	#X_kbGëM≠
 8

	)

45 
	#X_kbSëM≠
 9

	)

46 
	#X_kbGëCom∑tM≠
 10

	)

47 
	#X_kbSëCom∑tM≠
 11

	)

48 
	#X_kbGëIndiˇt‹Sèã
 12

	)

49 
	#X_kbGëIndiˇt‹M≠
 13

	)

50 
	#X_kbSëIndiˇt‹M≠
 14

	)

51 
	#X_kbGëNamedIndiˇt‹
 15

	)

52 
	#X_kbSëNamedIndiˇt‹
 16

	)

53 
	#X_kbGëNames
 17

	)

54 
	#X_kbSëNames
 18

	)

55 
	#X_kbGëGeomëry
 19

	)

56 
	#X_kbSëGeomëry
 20

	)

57 
	#X_kbPîClõ¡Fœgs
 21

	)

58 
	#X_kbLi°Comp⁄íts
 22

	)

59 
	#X_kbGëKbdByName
 23

	)

60 
	#X_kbGëDevi˚Info
 24

	)

61 
	#X_kbSëDevi˚Info
 25

	)

62 
	#X_kbSëDebuggögFœgs
 101

	)

68 
	#XkbEvítCode
 0

	)

69 
	#XkbNumbîEvíts
 (
XkbEvítCode
+1)

	)

78 
	#XkbNewKeybﬂrdNŸify
 0

	)

79 
	#XkbM≠NŸify
 1

	)

80 
	#XkbSèãNŸify
 2

	)

81 
	#XkbC⁄åﬁsNŸify
 3

	)

82 
	#XkbIndiˇt‹SèãNŸify
 4

	)

83 
	#XkbIndiˇt‹M≠NŸify
 5

	)

84 
	#XkbNamesNŸify
 6

	)

85 
	#XkbCom∑tM≠NŸify
 7

	)

86 
	#XkbBñlNŸify
 8

	)

87 
	#XkbA˘i⁄Mesßge
 9

	)

88 
	#XkbAc˚ssXNŸify
 10

	)

89 
	#XkbExãnsi⁄Devi˚NŸify
 11

	)

95 
	#XkbNewKeybﬂrdNŸifyMask
 (1L << 0)

	)

96 
	#XkbM≠NŸifyMask
 (1L << 1)

	)

97 
	#XkbSèãNŸifyMask
 (1L << 2)

	)

98 
	#XkbC⁄åﬁsNŸifyMask
 (1L << 3)

	)

99 
	#XkbIndiˇt‹SèãNŸifyMask
 (1L << 4)

	)

100 
	#XkbIndiˇt‹M≠NŸifyMask
 (1L << 5)

	)

101 
	#XkbNamesNŸifyMask
 (1L << 6)

	)

102 
	#XkbCom∑tM≠NŸifyMask
 (1L << 7)

	)

103 
	#XkbBñlNŸifyMask
 (1L << 8)

	)

104 
	#XkbA˘i⁄MesßgeMask
 (1L << 9)

	)

105 
	#XkbAc˚ssXNŸifyMask
 (1L << 10)

	)

106 
	#XkbExãnsi⁄Devi˚NŸifyMask
 (1L << 11)

	)

107 
	#XkbAŒEvítsMask
 (0xFFF)

	)

112 
	#XkbNKN_KeycodesMask
 (1L << 0)

	)

113 
	#XkbNKN_GeomëryMask
 (1L << 1)

	)

114 
	#XkbNKN_Devi˚IDMask
 (1L << 2)

	)

115 
	#XkbAŒNewKeybﬂrdEvítsMask
 (0x7)

	)

122 
	#XkbAXN_SKPªss
 0

	)

123 
	#XkbAXN_SKAc˚±
 1

	)

124 
	#XkbAXN_SKReje˘
 2

	)

125 
	#XkbAXN_SKRñó£
 3

	)

126 
	#XkbAXN_BKAc˚±
 4

	)

127 
	#XkbAXN_BKReje˘
 5

	)

128 
	#XkbAXN_AXKW¨nög
 6

	)

135 
	#XkbAXN_SKPªssMask
 (1L << 0)

	)

136 
	#XkbAXN_SKAc˚±Mask
 (1L << 1)

	)

137 
	#XkbAXN_SKReje˘Mask
 (1L << 2)

	)

138 
	#XkbAXN_SKRñó£Mask
 (1L << 3)

	)

139 
	#XkbAXN_BKAc˚±Mask
 (1L << 4)

	)

140 
	#XkbAXN_BKReje˘Mask
 (1L << 5)

	)

141 
	#XkbAXN_AXKW¨nögMask
 (1L << 6)

	)

142 
	#XkbAŒAc˚ssXEvítsMask
 (0xf)

	)

149 
	#XkbAŒSèãEvítsMask
 
XkbAŒSèãComp⁄ítsMask


	)

150 
	#XkbAŒM≠EvítsMask
 
XkbAŒM≠Comp⁄ítsMask


	)

151 
	#XkbAŒC⁄åﬁEvítsMask
 
XkbAŒC⁄åﬁsMask


	)

152 
	#XkbAŒIndiˇt‹EvítsMask
 
XkbAŒIndiˇt‹sMask


	)

153 
	#XkbAŒNameEvítsMask
 
XkbAŒNamesMask


	)

154 
	#XkbAŒCom∑tM≠EvítsMask
 
XkbAŒCom∑tMask


	)

155 
	#XkbAŒBñlEvítsMask
 (1L << 0)

	)

156 
	#XkbAŒA˘i⁄MesßgesMask
 (1L << 0)

	)

171 
	#XkbKeybﬂrd
 0

	)

172 
	#XkbNumbîEº‹s
 1

	)

174 
	#XkbEº_BadDevi˚
 0xff

	)

175 
	#XkbEº_BadCœss
 0x„

	)

176 
	#XkbEº_BadId
 0xfd

	)

182 
	#XkbClõ¡M≠Mask
 (1L << 0)

	)

183 
	#XkbSîvîM≠Mask
 (1L << 1)

	)

184 
	#XkbCom∑tM≠Mask
 (1L << 2)

	)

185 
	#XkbIndiˇt‹M≠Mask
 (1L << 3)

	)

186 
	#XkbNamesMask
 (1L << 4)

	)

187 
	#XkbGeomëryMask
 (1L << 5)

	)

188 
	#XkbC⁄åﬁsMask
 (1L << 6)

	)

189 
	#XkbAŒComp⁄ítsMask
 (0x7f)

	)

198 
	#XkbModifõrSèãMask
 (1L << 0)

	)

199 
	#XkbModifõrBa£Mask
 (1L << 1)

	)

200 
	#XkbModifõrL©chMask
 (1L << 2)

	)

201 
	#XkbModifõrLockMask
 (1L << 3)

	)

202 
	#XkbGroupSèãMask
 (1L << 4)

	)

203 
	#XkbGroupBa£Mask
 (1L << 5)

	)

204 
	#XkbGroupL©chMask
 (1L << 6)

	)

205 
	#XkbGroupLockMask
 (1L << 7)

	)

206 
	#XkbCom∑tSèãMask
 (1L << 8)

	)

207 
	#XkbGøbModsMask
 (1L << 9)

	)

208 
	#XkbCom∑tGøbModsMask
 (1L << 10)

	)

209 
	#XkbLookupModsMask
 (1L << 11)

	)

210 
	#XkbCom∑tLookupModsMask
 (1L << 12)

	)

211 
	#XkbPoöãrBuâ⁄Mask
 (1L << 13)

	)

212 
	#XkbAŒSèãComp⁄ítsMask
 (0x3fff)

	)

242 
	#XkbRïótKeysMask
 (1L << 0)

	)

243 
	#XkbSlowKeysMask
 (1L << 1)

	)

244 
	#XkbBoun˚KeysMask
 (1L << 2)

	)

245 
	#XkbStickyKeysMask
 (1L << 3)

	)

246 
	#XkbMou£KeysMask
 (1L << 4)

	)

247 
	#XkbMou£KeysAc˚lMask
 (1L << 5)

	)

248 
	#XkbAc˚ssXKeysMask
 (1L << 6)

	)

249 
	#XkbAc˚ssXTimeoutMask
 (1L << 7)

	)

250 
	#XkbAc˚ssXFìdbackMask
 (1L << 8)

	)

251 
	#XkbAudibÀBñlMask
 (1L << 9)

	)

252 
	#XkbOvîœy1Mask
 (1L << 10)

	)

253 
	#XkbOvîœy2Mask
 (1L << 11)

	)

254 
	#XkbIgn‹eGroupLockMask
 (1L << 12)

	)

255 
	#XkbGroupsWøpMask
 (1L << 27)

	)

256 
	#XkbI¡î«lModsMask
 (1L << 28)

	)

257 
	#XkbIgn‹eLockModsMask
 (1L << 29)

	)

258 
	#XkbPîKeyRïótMask
 (1L << 30)

	)

259 
	#XkbC⁄åﬁsE«bÀdMask
 (1L << 31)

	)

261 
	#XkbAc˚ssXO±i⁄sMask
 (
XkbStickyKeysMask
|
XkbAc˚ssXFìdbackMask
)

	)

263 
	#XkbAŒBoﬁónCålsMask
 (0x00001FFF)

	)

264 
	#XkbAŒC⁄åﬁsMask
 (0xF8001FFF)

	)

265 
	#XkbAŒC⁄åﬁEvítsMask
 
XkbAŒC⁄åﬁsMask


	)

276 
	#XkbAX_SKPªssFBMask
 (1L << 0)

	)

277 
	#XkbAX_SKAc˚±FBMask
 (1L << 1)

	)

278 
	#XkbAX_FótuªFBMask
 (1L << 2)

	)

279 
	#XkbAX_SlowW¨nFBMask
 (1L << 3)

	)

280 
	#XkbAX_Indiˇt‹FBMask
 (1L << 4)

	)

281 
	#XkbAX_StickyKeysFBMask
 (1L << 5)

	)

282 
	#XkbAX_TwoKeysMask
 (1L << 6)

	)

283 
	#XkbAX_L©chToLockMask
 (1L << 7)

	)

284 
	#XkbAX_SKRñó£FBMask
 (1L << 8)

	)

285 
	#XkbAX_SKReje˘FBMask
 (1L << 9)

	)

286 
	#XkbAX_BKReje˘FBMask
 (1L << 10)

	)

287 
	#XkbAX_DumbBñlFBMask
 (1L << 11)

	)

288 
	#XkbAX_FBO±i⁄sMask
 (0xF3F)

	)

289 
	#XkbAX_SKO±i⁄sMask
 (0x0C0)

	)

290 
	#XkbAX_AŒO±i⁄sMask
 (0xFFF)

	)

319 
	#XkbU£C‹eKbd
 0x0100

	)

320 
	#XkbU£C‹ePå
 0x0200

	)

321 
	#XkbDÊtXICœss
 0x0300

	)

322 
	#XkbDÊtXIId
 0x0400

	)

323 
	#XkbAŒXICœs£s
 0x0500

	)

324 
	#XkbAŒXIIds
 0x0600

	)

325 
	#XkbXIN⁄e
 0xff00

	)

327 
	#XkbLegÆXILedCœss
(
c
Ë(((c)==
KbdFìdbackCœss
)||\

328 ((
c
)==
LedFìdbackCœss
)||\

329 ((
c
)==
XkbDÊtXICœss
)||\

330 ((
c
)==
XkbAŒXICœs£s
))

	)

331 
	#XkbLegÆXIBñlCœss
(
c
Ë(((c)==
KbdFìdbackCœss
)||\

332 ((
c
)==
BñlFìdbackCœss
)||\

333 ((
c
)==
XkbDÊtXICœss
)||\

334 ((
c
)==
XkbAŒXICœs£s
))

	)

335 
	#XkbEx∂icôXIDevi˚
(
c
Ë(((c)&(~0xff))==0)

	)

336 
	#XkbEx∂icôXICœss
(
c
Ë(((c)&(~0xff))==0)

	)

337 
	#XkbEx∂icôXIId
(
c
Ë(((c)&(~0xff))==0)

	)

338 
	#XkbSögÀXICœss
(
c
Ë((((c)&(~0xff))==0)||((c)==
XkbDÊtXICœss
))

	)

339 
	#XkbSögÀXIId
(
c
Ë((((c)&(~0xff))==0)||((c)==
XkbDÊtXIId
))

	)

341 
	#XkbNoModifõr
 0xff

	)

342 
	#XkbNoShi·Levñ
 0xff

	)

343 
	#XkbNoSh≠e
 0xff

	)

344 
	#XkbNoIndiˇt‹
 0xff

	)

346 
	#XkbNoModifõrMask
 0

	)

347 
	#XkbAŒModifõrsMask
 0xff

	)

348 
	#XkbAŒVútuÆModsMask
 0xffff

	)

350 
	#XkbNumKbdGroups
 4

	)

351 
	#XkbMaxKbdGroup
 (
XkbNumKbdGroups
-1)

	)

353 
	#XkbMaxMou£KeysBä
 4

	)

360 
	#XkbGroup1Index
 0

	)

361 
	#XkbGroup2Index
 1

	)

362 
	#XkbGroup3Index
 2

	)

363 
	#XkbGroup4Index
 3

	)

364 
	#XkbAnyGroup
 254

	)

365 
	#XkbAŒGroups
 255

	)

367 
	#XkbGroup1Mask
 (1<<0)

	)

368 
	#XkbGroup2Mask
 (1<<1)

	)

369 
	#XkbGroup3Mask
 (1<<2)

	)

370 
	#XkbGroup4Mask
 (1<<3)

	)

371 
	#XkbAnyGroupMask
 (1<<7)

	)

372 
	#XkbAŒGroupsMask
 (0xf)

	)

381 
	#XkbBuûdC‹eSèã
(
m
,
g
Ë((((g)&0x3)<<13)|((m)&0xff))

	)

382 
	#XkbGroupF‹C‹eSèã
(
s
Ë(((s)>>13)&0x3)

	)

383 
	#XkbIsLegÆGroup
(
g
Ë(((g)>=0)&&((g)<
XkbNumKbdGroups
))

	)

393 
	#XkbWøpI¡oR™ge
 (0x00)

	)

394 
	#XkbCœmpI¡oR™ge
 (0x40)

	)

395 
	#XkbRedúe˘I¡oR™ge
 (0x80)

	)

428 
	#XkbSA_CÀ¨Locks
 (1L << 0)

	)

429 
	#XkbSA_L©chToLock
 (1L << 1)

	)

431 
	#XkbSA_LockNoLock
 (1L << 0)

	)

432 
	#XkbSA_LockNoU∆ock
 (1L << 1)

	)

434 
	#XkbSA_U£ModM≠Mods
 (1L << 2)

	)

436 
	#XkbSA_GroupAbsﬁuã
 (1L << 2)

	)

437 
	#XkbSA_U£DÊtBuâ⁄
 0

	)

439 
	#XkbSA_NoAc˚Àøti⁄
 (1L << 0)

	)

440 
	#XkbSA_MoveAbsﬁuãX
 (1L << 1)

	)

441 
	#XkbSA_MoveAbsﬁuãY
 (1L << 2)

	)

443 
	#XkbSA_ISODÊtIsGroup
 (1L << 7)

	)

444 
	#XkbSA_ISONoAf„˘Mods
 (1L << 6)

	)

445 
	#XkbSA_ISONoAf„˘Group
 (1L << 5)

	)

446 
	#XkbSA_ISONoAf„˘På
 (1L << 4)

	)

447 
	#XkbSA_ISONoAf„˘Cåls
 (1L << 3)

	)

448 
	#XkbSA_ISOAf„˘Mask
 (0x78)

	)

450 
	#XkbSA_MesßgeOnPªss
 (1L << 0)

	)

451 
	#XkbSA_MesßgeOnRñó£
 (1L << 1)

	)

452 
	#XkbSA_MesßgeGíKeyEvít
 (1L << 2)

	)

454 
	#XkbSA_Af„˘DÊtBä
 1

	)

455 
	#XkbSA_DÊtBäAbsﬁuã
 (1L << 2)

	)

457 
	#XkbSA_SwôchAµliˇti⁄
 (1L << 0)

	)

458 
	#XkbSA_SwôchAbsﬁuã
 (1L << 2)

	)

466 
	#XkbSA_Ign‹eVÆ
 (0x00)

	)

467 
	#XkbSA_SëVÆMö
 (0x10)

	)

468 
	#XkbSA_SëVÆCíãr
 (0x20)

	)

469 
	#XkbSA_SëVÆMax
 (0x30)

	)

470 
	#XkbSA_SëVÆRñ©ive
 (0x40)

	)

471 
	#XkbSA_SëVÆAbsﬁuã
 (0x50)

	)

472 
	#XkbSA_VÆOpMask
 (0x70)

	)

473 
	#XkbSA_VÆSˇÀMask
 (0x07)

	)

474 
	#XkbSA_VÆOp
(
a
Ë(◊)&
XkbSA_VÆOpMask
)

	)

475 
	#XkbSA_VÆSˇÀ
(
a
Ë(◊)&
XkbSA_VÆSˇÀMask
)

	)

481 
	#XkbSA_NoA˘i⁄
 0x00

	)

482 
	#XkbSA_SëMods
 0x01

	)

483 
	#XkbSA_L©chMods
 0x02

	)

484 
	#XkbSA_LockMods
 0x03

	)

485 
	#XkbSA_SëGroup
 0x04

	)

486 
	#XkbSA_L©chGroup
 0x05

	)

487 
	#XkbSA_LockGroup
 0x06

	)

488 
	#XkbSA_MovePå
 0x07

	)

489 
	#XkbSA_PåBä
 0x08

	)

490 
	#XkbSA_LockPåBä
 0x09

	)

491 
	#XkbSA_SëPåDÊt
 0x0a

	)

492 
	#XkbSA_ISOLock
 0x0b

	)

493 
	#XkbSA_Tîmö©e
 0x0c

	)

494 
	#XkbSA_SwôchS¸ìn
 0x0d

	)

495 
	#XkbSA_SëC⁄åﬁs
 0x0e

	)

496 
	#XkbSA_LockC⁄åﬁs
 0x0f

	)

497 
	#XkbSA_A˘i⁄Mesßge
 0x10

	)

498 
	#XkbSA_Redúe˘Key
 0x11

	)

499 
	#XkbSA_Devi˚Bä
 0x12

	)

500 
	#XkbSA_LockDevi˚Bä
 0x13

	)

501 
	#XkbSA_Devi˚VÆu©‹
 0x14

	)

502 
	#XkbSA_La°A˘i⁄
 
XkbSA_Devi˚VÆu©‹


	)

503 
	#XkbSA_NumA˘i⁄s
 (
XkbSA_La°A˘i⁄
+1)

	)

505 
	#XkbSA_XFªe86Priv©e
 0x86

	)

510 
	#XkbSA_BªakL©ch
 \

511 ((1<<
XkbSA_NoA˘i⁄
)|(1<<
XkbSA_PåBä
)|(1<<
XkbSA_LockPåBä
)|\

512 (1<<
XkbSA_Tîmö©e
)|(1<<
XkbSA_SwôchS¸ìn
)|(1<<
XkbSA_SëC⁄åﬁs
)|\

513 (1<<
XkbSA_LockC⁄åﬁs
)|(1<<
XkbSA_A˘i⁄Mesßge
)|\

514 (1<<
XkbSA_Redúe˘Key
)|(1<<
XkbSA_Devi˚Bä
)|(1<<
XkbSA_LockDevi˚Bä
))

	)

519 
	#XkbIsModA˘i⁄
(
a
Ë((◊)->
ty≥
>=
Xkb_SASëMods
)&&(◊)->ty≥<=
XkbSA_LockMods
))

	)

520 
	#XkbIsGroupA˘i⁄
(
a
Ë((◊)->
ty≥
>=
XkbSA_SëGroup
)&&(◊)->ty≥<=
XkbSA_LockGroup
))

	)

521 
	#XkbIsPåA˘i⁄
(
a
Ë((◊)->
ty≥
>=
XkbSA_MovePå
)&&(◊)->ty≥<=
XkbSA_SëPåDÊt
))

	)

532 
	#XkbKB_Pîm™ít
 0x80

	)

533 
	#XkbKB_OpMask
 0x7f

	)

535 
	#XkbKB_DeÁu…
 0x00

	)

536 
	#XkbKB_Lock
 0x01

	)

537 
	#XkbKB_RadioGroup
 0x02

	)

538 
	#XkbKB_Ovîœy1
 0x03

	)

539 
	#XkbKB_Ovîœy2
 0x04

	)

541 
	#XkbKB_RGAŒowN⁄e
 0x80

	)

546 
	#XkbMöLegÆKeyCode
 8

	)

547 
	#XkbMaxLegÆKeyCode
 255

	)

548 
	#XkbMaxKeyCou¡
 (
XkbMaxLegÆKeyCode
-
XkbMöLegÆKeyCode
+1)

	)

549 
	#XkbPîKeyBôAºaySize
 ((
XkbMaxLegÆKeyCode
+1)/8)

	)

551 
	#XkbIsLegÆKeycode
(
k
Ë((k)>=
XkbMöLegÆKeyCode
)

	)

556 
	#XkbNumModifõrs
 8

	)

557 
	#XkbNumVútuÆMods
 16

	)

558 
	#XkbNumIndiˇt‹s
 32

	)

559 
	#XkbAŒIndiˇt‹sMask
 (0xffffffff)

	)

560 
	#XkbMaxRadioGroups
 32

	)

561 
	#XkbAŒRadioGroupsMask
 (0xffffffff)

	)

562 
	#XkbMaxShi·Levñ
 63

	)

563 
	#XkbMaxSymsPîKey
 (
XkbMaxShi·Levñ
*
XkbNumKbdGroups
)

	)

564 
	#XkbRGMaxMembîs
 12

	)

565 
	#XkbA˘i⁄MesßgeLígth
 6

	)

566 
	#XkbKeyNameLígth
 4

	)

567 
	#XkbMaxRedúe˘Cou¡
 8

	)

569 
	#XkbGeomPtsPîMM
 10

	)

570 
	#XkbGeomMaxCﬁ‹s
 32

	)

571 
	#XkbGeomMaxLabñCﬁ‹s
 3

	)

572 
	#XkbGeomMaxPri‹ôy
 255

	)

577 
	#XkbO√LevñIndex
 0

	)

578 
	#XkbTwoLevñIndex
 1

	)

579 
	#XkbAÕhabëicIndex
 2

	)

580 
	#XkbKey∑dIndex
 3

	)

581 
	#XkbLa°RequúedTy≥
 
XkbKey∑dIndex


	)

582 
	#XkbNumRequúedTy≥s
 (
XkbLa°RequúedTy≥
+1)

	)

583 
	#XkbMaxKeyTy≥s
 255

	)

585 
	#XkbO√LevñMask
 (1<<0)

	)

586 
	#XkbTwoLevñMask
 (1<<1)

	)

587 
	#XkbAÕhabëicMask
 (1<<2)

	)

588 
	#XkbKey∑dMask
 (1<<3)

	)

589 
	#XkbAŒRequúedTy≥s
 (0xf)

	)

591 
	#XkbShi·Levñ
(
n
Ë(“)-1)

	)

592 
	#XkbShi·LevñMask
(
n
Ë(1<<(“)-1))

	)

597 
	#XkbName
 "XKEYBOARD"

	)

598 
	#XkbMaj‹Vîsi⁄
 1

	)

599 
	#XkbMö‹Vîsi⁄
 0

	)

607 
	#XkbEx∂icôKeyTy≥sMask
 (0x0f)

	)

608 
	#XkbEx∂icôKeyTy≥1Mask
 (1<<0)

	)

609 
	#XkbEx∂icôKeyTy≥2Mask
 (1<<1)

	)

610 
	#XkbEx∂icôKeyTy≥3Mask
 (1<<2)

	)

611 
	#XkbEx∂icôKeyTy≥4Mask
 (1<<3)

	)

612 
	#XkbEx∂icôI¡î¥ëMask
 (1<<4)

	)

613 
	#XkbEx∂icôAutoRïótMask
 (1<<5)

	)

614 
	#XkbEx∂icôBehavi‹Mask
 (1<<6)

	)

615 
	#XkbEx∂icôVModM≠Mask
 (1<<7)

	)

616 
	#XkbAŒEx∂icôMask
 (0xff)

	)

628 
	#XkbKeyTy≥sMask
 (1<<0)

	)

629 
	#XkbKeySymsMask
 (1<<1)

	)

630 
	#XkbModifõrM≠Mask
 (1<<2)

	)

631 
	#XkbEx∂icôComp⁄ítsMask
 (1<<3)

	)

632 
	#XkbKeyA˘i⁄sMask
 (1<<4)

	)

633 
	#XkbKeyBehavi‹sMask
 (1<<5)

	)

634 
	#XkbVútuÆModsMask
 (1<<6)

	)

635 
	#XkbVútuÆModM≠Mask
 (1<<7)

	)

637 
	#XkbAŒClõ¡InfoMask
 (
XkbKeyTy≥sMask
|
XkbKeySymsMask
|
XkbModifõrM≠Mask
)

	)

638 
	#XkbAŒSîvîInfoMask
 (
XkbEx∂icôComp⁄ítsMask
|
XkbKeyA˘i⁄sMask
|
XkbKeyBehavi‹sMask
|
XkbVútuÆModsMask
|
XkbVútuÆModM≠Mask
)

	)

639 
	#XkbAŒM≠Comp⁄ítsMask
 (
XkbAŒClõ¡InfoMask
|
XkbAŒSîvîInfoMask
)

	)

645 
	#XkbSI_AutoRïót
 (1<<0)

	)

646 
	#XkbSI_LockögKey
 (1<<1)

	)

653 
	#XkbSI_LevñO√O∆y
 (0x80)

	)

654 
	#XkbSI_OpMask
 (0x7f)

	)

655 
	#XkbSI_N⁄eOf
 (0)

	)

656 
	#XkbSI_AnyOfOrN⁄e
 (1)

	)

657 
	#XkbSI_AnyOf
 (2)

	)

658 
	#XkbSI_AŒOf
 (3)

	)

659 
	#XkbSI_Exa˘ly
 (4)

	)

667 
	#XkbIM_NoEx∂icô
 (1L << 7)

	)

668 
	#XkbIM_NoAutom©ic
 (1L << 6)

	)

669 
	#XkbIM_LEDDrivesKB
 (1L << 5)

	)

677 
	#XkbIM_U£Ba£
 (1L << 0)

	)

678 
	#XkbIM_U£L©ched
 (1L << 1)

	)

679 
	#XkbIM_U£Locked
 (1L << 2)

	)

680 
	#XkbIM_U£Ef„˘ive
 (1L << 3)

	)

681 
	#XkbIM_U£Com∑t
 (1L << 4)

	)

683 
	#XkbIM_U£N⁄e
 0

	)

684 
	#XkbIM_U£AnyGroup
 (
XkbIM_U£Ba£
|
XkbIM_U£L©ched
|
XkbIM_U£Locked
\

685 |
XkbIM_U£Ef„˘ive
)

	)

686 
	#XkbIM_U£AnyMods
 (
XkbIM_U£AnyGroup
|
XkbIM_U£Com∑t
)

	)

692 
	#XkbSymI¡îpMask
 (1<<0)

	)

693 
	#XkbGroupCom∑tMask
 (1<<1)

	)

694 
	#XkbAŒCom∑tMask
 (0x3)

	)

703 
	#XkbKeycodesNameMask
 (1<<0)

	)

704 
	#XkbGeomëryNameMask
 (1<<1)

	)

705 
	#XkbSymbﬁsNameMask
 (1<<2)

	)

706 
	#XkbPhysSymbﬁsNameMask
 (1<<3)

	)

707 
	#XkbTy≥sNameMask
 (1<<4)

	)

708 
	#XkbCom∑tNameMask
 (1<<5)

	)

709 
	#XkbKeyTy≥NamesMask
 (1<<6)

	)

710 
	#XkbKTLevñNamesMask
 (1<<7)

	)

711 
	#XkbIndiˇt‹NamesMask
 (1<<8)

	)

712 
	#XkbKeyNamesMask
 (1<<9)

	)

713 
	#XkbKeyAlü£sMask
 (1<<10)

	)

714 
	#XkbVútuÆModNamesMask
 (1<<11)

	)

715 
	#XkbGroupNamesMask
 (1<<12)

	)

716 
	#XkbRGNamesMask
 (1<<13)

	)

717 
	#XkbComp⁄ítNamesMask
 (0x3f)

	)

718 
	#XkbAŒNamesMask
 (0x3fff)

	)

725 
	#XkbGBN_Ty≥sMask
 (1L << 0)

	)

726 
	#XkbGBN_Com∑tM≠Mask
 (1L << 1)

	)

727 
	#XkbGBN_Clõ¡SymbﬁsMask
 (1L << 2)

	)

728 
	#XkbGBN_SîvîSymbﬁsMask
 (1L << 3)

	)

729 
	#XkbGBN_SymbﬁsMask
 (
XkbGBN_Clõ¡SymbﬁsMask
|
XkbGBN_SîvîSymbﬁsMask
)

	)

730 
	#XkbGBN_Indiˇt‹M≠Mask
 (1L << 4)

	)

731 
	#XkbGBN_KeyNamesMask
 (1L << 5)

	)

732 
	#XkbGBN_GeomëryMask
 (1L << 6)

	)

733 
	#XkbGBN_OthîNamesMask
 (1L << 7)

	)

734 
	#XkbGBN_AŒComp⁄ítsMask
 (0xff)

	)

739 
	#XkbLC_Hiddí
 (1L << 0)

	)

740 
	#XkbLC_DeÁu…
 (1L << 1)

	)

741 
	#XkbLC_P¨tül
 (1L << 2)

	)

743 
	#XkbLC_AÕh™umîicKeys
 (1L << 8)

	)

744 
	#XkbLC_ModifõrKeys
 (1L << 9)

	)

745 
	#XkbLC_Key∑dKeys
 (1L << 10)

	)

746 
	#XkbLC_Fun˘i⁄Keys
 (1L << 11)

	)

747 
	#XkbLC_A…î«ãGroup
 (1L << 12)

	)

760 
	#XkbXI_KeybﬂrdsMask
 (1L << 0)

	)

761 
	#XkbXI_Buâ⁄A˘i⁄sMask
 (1L << 1)

	)

762 
	#XkbXI_Indiˇt‹NamesMask
 (1L << 2)

	)

763 
	#XkbXI_Indiˇt‹M≠sMask
 (1L << 3)

	)

764 
	#XkbXI_Indiˇt‹SèãMask
 (1L << 4)

	)

765 
	#XkbXI_Unsuµ‹ãdFótuªMask
 (1L << 15)

	)

766 
	#XkbXI_AŒFótuªsMask
 (0x001f)

	)

767 
	#XkbXI_AŒDevi˚FótuªsMask
 (0x001e)

	)

769 
	#XkbXI_Indiˇt‹sMask
 (0x001c)

	)

770 
	#XkbAŒExãnsi⁄Devi˚EvítsMask
 (0x801f)

	)

776 
	#XkbPCF_Dëe˘abÀAutoRïótMask
 (1L << 0)

	)

777 
	#XkbPCF_GøbsU£XKBSèãMask
 (1L << 1)

	)

778 
	#XkbPCF_AutoRe£tC⁄åﬁsMask
 (1L << 2)

	)

779 
	#XkbPCF_LookupSèãWhíGøbbed
 (1L << 3)

	)

780 
	#XkbPCF_SídEvítU£sXKBSèã
 (1L << 4)

	)

781 
	#XkbPCF_AŒFœgsMask
 (0x1F)

	)

786 
	#XkbDF_DißbÀLocks
 (1<<0)

	)

	@/usr/include/_G_config.h

4 #i‚de‡
_G_c⁄fig_h


5 
	#_G_c⁄fig_h
 1

	)

9 
	~<bôs/ty≥s.h
>

10 
	#__√ed_size_t


	)

11 
	#__√ed_wch¨_t


	)

12 
	#__√ed_wöt_t


	)

13 
	#__√ed_NULL


	)

14 
	~<°ddef.h
>

15 #i‚de‡
_WINT_T


20 
	#_WINT_T


	)

21 
	twöt_t
;

23 
	#__√ed_mb°©e_t


	)

24 
	~<wch¨.h
>

25 
	#_G_size_t
 
size_t


	)

28 
__off_t
 
	m__pos
;

29 
__mb°©e_t
 
	m__°©e
;

30 } 
	t_G_Âos_t
;

33 
__off64_t
 
	m__pos
;

34 
__mb°©e_t
 
	m__°©e
;

35 } 
	t_G_Âos64_t
;

36 
	#_G_ssize_t
 
__ssize_t


	)

37 
	#_G_off_t
 
__off_t


	)

38 
	#_G_off64_t
 
__off64_t


	)

39 
	#_G_pid_t
 
__pid_t


	)

40 
	#_G_uid_t
 
__uid_t


	)

41 
	#_G_wch¨_t
 
wch¨_t


	)

42 
	#_G_wöt_t
 
wöt_t


	)

43 
	#_G_°©64
 
°©64


	)

44 
	~<gc⁄v.h
>

47 
__gc⁄v_öfo
 
	m__cd
;

50 
__gc⁄v_öfo
 
	m__cd
;

51 
__gc⁄v_°ï_d©a
 
	m__d©a
;

52 } 
	m__comböed
;

53 } 
	t_G_ic⁄v_t
;

55 
	t_G_öt16_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	t__HI__
)));

56 
	t_G_öt32_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	t__SI__
)));

57 
	t_G_uöt16_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	t__HI__
)));

58 
	t_G_uöt32_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	t__SI__
)));

60 
	#_G_HAVE_BOOL
 1

	)

64 
	#_G_HAVE_ATEXIT
 1

	)

65 
	#_G_HAVE_SYS_CDEFS
 1

	)

66 
	#_G_HAVE_SYS_WAIT
 1

	)

67 
	#_G_NEED_STDARG_H
 1

	)

68 
	#_G_va_li°
 
__gnuc_va_li°


	)

70 
	#_G_HAVE_PRINTF_FP
 1

	)

71 
	#_G_HAVE_MMAP
 1

	)

72 
	#_G_HAVE_MREMAP
 1

	)

73 
	#_G_HAVE_LONG_DOUBLE_IO
 1

	)

74 
	#_G_HAVE_IO_FILE_OPEN
 1

	)

75 
	#_G_HAVE_IO_GETLINE_INFO
 1

	)

77 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

79 
	#_G_OPEN64
 
__›í64


	)

80 
	#_G_LSEEK64
 
__l£ek64


	)

81 
	#_G_MMAP64
 
__mm≠64


	)

82 
	#_G_FSTAT64
(
fd
,
buf
Ë
	`__fx°©64
 (
_STAT_VER
, fd, buf)

	)

85 
	#_G_HAVE_ST_BLKSIZE
 
	`deföed
 (
_STATBUF_ST_BLKSIZE
)

	)

87 
	#_G_BUFSIZ
 8192

	)

90 
	#_G_NAMES_HAVE_UNDERSCORE
 0

	)

91 
	#_G_VTABLE_LABEL_HAS_LENGTH
 1

	)

92 
	#_G_USING_THUNKS
 1

	)

93 
	#_G_VTABLE_LABEL_PREFIX
 "__vt_"

	)

94 
	#_G_VTABLE_LABEL_PREFIX_ID
 
__vt_


	)

97 #i‡
deföed
 
__˝lu•lus
 || deföed 
__STDC__


98 
	#_G_ARGS
(
ARGLIST
Ë
	)
ARGLIST

100 
	#_G_ARGS
(
ARGLIST
Ë()

	)

	@/usr/include/asm-i386/types.h

1 #i‚de‡
_I386_TYPES_H


2 
	#_I386_TYPES_H


	)

4 #i‚de‡
__ASSEMBLY__


6 
	tumode_t
;

13 
__sig√d__
 
	t__s8
;

14 
	t__u8
;

16 
__sig√d__
 
	t__s16
;

17 
	t__u16
;

19 
__sig√d__
 
	t__s32
;

20 
	t__u32
;

22 #i‡
deföed
(
__GNUC__
Ë&& !deföed(
__STRICT_ANSI__
)

23 
__sig√d__
 
	t__s64
;

24 
	t__u64
;

	@/usr/include/asm-x86_64/types.h

1 #i‚de‡
_X86_64_TYPES_H


2 
	#_X86_64_TYPES_H


	)

4 #i‚de‡
__ASSEMBLY__


6 
	tumode_t
;

13 
__sig√d__
 
	t__s8
;

14 
	t__u8
;

16 
__sig√d__
 
	t__s16
;

17 
	t__u16
;

19 
__sig√d__
 
	t__s32
;

20 
	t__u32
;

22 
__sig√d__
 
	t__s64
;

23 
	t__u64
;

	@/usr/include/asm/ioctls.h

2 #i‚de‡
__ASM_STUB_IOCTLS_H


3 
	#__ASM_STUB_IOCTLS_H


	)

4 #i‡
deföed
 
__x86_64__


5 
	~<asm-x86_64/io˘ls.h
>

6 #ñi‡
deföed
 
__i386__


7 
	~<asm-i386/io˘ls.h
>

9 #w¨nög 
This
 
machöe
 
≠≥¨s
 
to
 
be
 
√ôhî
 
x86_64
 
n‹
 
i386
.

	@/usr/include/asm/sigcontext.h

2 #i‚de‡
__ASM_STUB_SIGCONTEXT_H


3 
	#__ASM_STUB_SIGCONTEXT_H


	)

4 #i‡
deföed
 
__x86_64__


5 
	~<asm-x86_64/sigc⁄ãxt.h
>

6 #ñi‡
deföed
 
__i386__


7 
	~<asm-i386/sigc⁄ãxt.h
>

9 #w¨nög 
This
 
machöe
 
≠≥¨s
 
to
 
be
 
√ôhî
 
x86_64
 
n‹
 
i386
.

	@/usr/include/asm/socket.h

2 #i‚de‡
__ASM_STUB_SOCKET_H


3 
	#__ASM_STUB_SOCKET_H


	)

4 #i‡
deföed
 
__x86_64__


5 
	~<asm-x86_64/sockë.h
>

6 #ñi‡
deföed
 
__i386__


7 
	~<asm-i386/sockë.h
>

9 #w¨nög 
This
 
machöe
 
≠≥¨s
 
to
 
be
 
√ôhî
 
x86_64
 
n‹
 
i386
.

	@/usr/include/bits/libio-ldbl.h

20 #i‚de‡
_IO_STDIO_H


24 
	$__LDBL_REDIR_DECL
 (
_IO_vfsˇnf
)

25 
	`__LDBL_REDIR_DECL
 (
_IO_vÂrötf
)

	@/usr/include/bits/local_lim.h

25 #i‚de‡
NR_OPEN


26 
	#__undef_NR_OPEN


	)

28 #i‚de‡
LINK_MAX


29 
	#__undef_LINK_MAX


	)

31 #i‚de‡
OPEN_MAX


32 
	#__undef_OPEN_MAX


	)

36 
	~<löux/limôs.h
>

39 #ifde‡
__undef_NR_OPEN


40 #unde‡
NR_OPEN


41 #unde‡
__undef_NR_OPEN


44 #ifde‡
__undef_LINK_MAX


45 #unde‡
LINK_MAX


46 #unde‡
__undef_LINK_MAX


49 #ifde‡
__undef_OPEN_MAX


50 #unde‡
OPEN_MAX


51 #unde‡
__undef_OPEN_MAX


55 
	#_POSIX_THREAD_KEYS_MAX
 128

	)

57 
	#PTHREAD_KEYS_MAX
 1024

	)

60 
	#_POSIX_THREAD_DESTRUCTOR_ITERATIONS
 4

	)

62 
	#PTHREAD_DESTRUCTOR_ITERATIONS
 
_POSIX_THREAD_DESTRUCTOR_ITERATIONS


	)

65 
	#_POSIX_THREAD_THREADS_MAX
 64

	)

67 #unde‡
PTHREAD_THREADS_MAX


71 
	#AIO_PRIO_DELTA_MAX
 20

	)

74 
	#PTHREAD_STACK_MIN
 16384

	)

77 
	#DELAYTIMER_MAX
 2147483647

	)

80 
	#TTY_NAME_MAX
 32

	)

83 
	#LOGIN_NAME_MAX
 256

	)

86 
	#HOST_NAME_MAX
 64

	)

89 
	#MQ_PRIO_MAX
 32768

	)

92 
	#SEM_VALUE_MAX
 (2147483647)

	)

	@/usr/include/bits/resource.h

21 #i‚de‡
_SYS_RESOURCE_H


25 
	~<bôs/ty≥s.h
>

33 
	e__æimô_ªsour˚


36 
	mRLIMIT_CPU
 = 0,

37 
	#RLIMIT_CPU
 
RLIMIT_CPU


	)

40 
	mRLIMIT_FSIZE
 = 1,

41 
	#RLIMIT_FSIZE
 
RLIMIT_FSIZE


	)

44 
	mRLIMIT_DATA
 = 2,

45 
	#RLIMIT_DATA
 
RLIMIT_DATA


	)

48 
	mRLIMIT_STACK
 = 3,

49 
	#RLIMIT_STACK
 
RLIMIT_STACK


	)

52 
	mRLIMIT_CORE
 = 4,

53 
	#RLIMIT_CORE
 
RLIMIT_CORE


	)

59 
	m__RLIMIT_RSS
 = 5,

60 
	#RLIMIT_RSS
 
__RLIMIT_RSS


	)

63 
	mRLIMIT_NOFILE
 = 7,

64 
	m__RLIMIT_OFILE
 = 
RLIMIT_NOFILE
,

65 
	#RLIMIT_NOFILE
 
RLIMIT_NOFILE


	)

66 
	#RLIMIT_OFILE
 
__RLIMIT_OFILE


	)

69 
	mRLIMIT_AS
 = 9,

70 
	#RLIMIT_AS
 
RLIMIT_AS


	)

73 
	m__RLIMIT_NPROC
 = 6,

74 
	#RLIMIT_NPROC
 
__RLIMIT_NPROC


	)

77 
	m__RLIMIT_MEMLOCK
 = 8,

78 
	#RLIMIT_MEMLOCK
 
__RLIMIT_MEMLOCK


	)

81 
	m__RLIMIT_LOCKS
 = 10,

82 
	#RLIMIT_LOCKS
 
__RLIMIT_LOCKS


	)

85 
	m__RLIMIT_SIGPENDING
 = 11,

86 
	#RLIMIT_SIGPENDING
 
__RLIMIT_SIGPENDING


	)

89 
	m__RLIMIT_MSGQUEUE
 = 12,

90 
	#RLIMIT_MSGQUEUE
 
__RLIMIT_MSGQUEUE


	)

95 
	m__RLIMIT_NICE
 = 13,

96 
	#RLIMIT_NICE
 
__RLIMIT_NICE


	)

100 
	m__RLIMIT_RTPRIO
 = 14,

101 
	#RLIMIT_RTPRIO
 
__RLIMIT_RTPRIO


	)

103 
	m__RLIMIT_NLIMITS
 = 15,

104 
	m__RLIM_NLIMITS
 = 
__RLIMIT_NLIMITS


105 
	#RLIMIT_NLIMITS
 
__RLIMIT_NLIMITS


	)

106 
	#RLIM_NLIMITS
 
__RLIM_NLIMITS


	)

110 #i‚de‡
__USE_FILE_OFFSET64


111 
	#RLIM_INFINITY
 (()(~0UL))

	)

113 
	#RLIM_INFINITY
 0xffffffffffffffffuLL

	)

116 #ifde‡
__USE_LARGEFILE64


117 
	#RLIM64_INFINITY
 0xffffffffffffffffuLL

	)

121 
	#RLIM_SAVED_MAX
 
RLIM_INFINITY


	)

122 
	#RLIM_SAVED_CUR
 
RLIM_INFINITY


	)

126 #i‚de‡
__USE_FILE_OFFSET64


127 
__æim_t
 
	tæim_t
;

129 
__æim64_t
 
	tæim_t
;

131 #ifde‡
__USE_LARGEFILE64


132 
__æim64_t
 
	tæim64_t
;

135 
	sæimô


138 
æim_t
 
	mæim_cur
;

140 
æim_t
 
	mæim_max
;

143 #ifde‡
__USE_LARGEFILE64


144 
	sæimô64


147 
æim64_t
 
	mæim_cur
;

149 
æim64_t
 
	mæim_max
;

154 
	e__rußge_who


157 
	mRUSAGE_SELF
 = 0,

158 
	#RUSAGE_SELF
 
RUSAGE_SELF


	)

161 
	mRUSAGE_CHILDREN
 = -1

162 
	#RUSAGE_CHILDREN
 
RUSAGE_CHILDREN


	)

165 
	#__√ed_timevÆ


	)

166 
	~<bôs/time.h
>

169 
	srußge


172 
timevÆ
 
	mru_utime
;

174 
timevÆ
 
	mru_°ime
;

176 
	mru_maxrss
;

179 
	mru_ixrss
;

181 
	mru_idrss
;

183 
	mru_i§ss
;

186 
	mru_möÊt
;

188 
	mru_majÊt
;

190 
	mru_nsw≠
;

193 
	mru_öblock
;

195 
	mru_oublock
;

197 
	mru_msg¢d
;

199 
	mru_msgrcv
;

201 
	mru_nsig«ls
;

205 
	mru_nvcsw
;

208 
	mru_nivcsw
;

212 
	#PRIO_MIN
 -20

	)

213 
	#PRIO_MAX
 20

	)

217 
	e__¥i‹ôy_which


219 
	mPRIO_PROCESS
 = 0,

220 
	#PRIO_PROCESS
 
PRIO_PROCESS


	)

221 
	mPRIO_PGRP
 = 1,

222 
	#PRIO_PGRP
 
PRIO_PGRP


	)

223 
	mPRIO_USER
 = 2

224 
	#PRIO_USER
 
PRIO_USER


	)

	@/usr/include/bits/sched.h

22 #i‚de‡
__√ed_sched∑øm


24 #i‚de‡
_SCHED_H


30 
	#SCHED_OTHER
 0

	)

31 
	#SCHED_FIFO
 1

	)

32 
	#SCHED_RR
 2

	)

33 #ifde‡
__USE_GNU


34 
	#SCHED_BATCH
 3

	)

37 #ifde‡
__USE_MISC


39 
	#CSIGNAL
 0x000000f‡

	)

40 
	#CLONE_VM
 0x00000100

	)

41 
	#CLONE_FS
 0x00000200

	)

42 
	#CLONE_FILES
 0x00000400

	)

43 
	#CLONE_SIGHAND
 0x00000800

	)

44 
	#CLONE_PTRACE
 0x00002000

	)

45 
	#CLONE_VFORK
 0x00004000

	)

47 
	#CLONE_PARENT
 0x00008000

	)

49 
	#CLONE_THREAD
 0x00010000

	)

50 
	#CLONE_NEWNS
 0x00020000

	)

51 
	#CLONE_SYSVSEM
 0x00040000

	)

52 
	#CLONE_SETTLS
 0x00080000

	)

53 
	#CLONE_PARENT_SETTID
 0x00100000

	)

55 
	#CLONE_CHILD_CLEARTID
 0x00200000

	)

57 
	#CLONE_DETACHED
 0x00400000

	)

58 
	#CLONE_UNTRACED
 0x00800000

	)

60 
	#CLONE_CHILD_SETTID
 0x01000000

	)

62 
	#CLONE_STOPPED
 0x02000000

	)

66 
	ssched_∑øm


68 
	m__sched_¥i‹ôy
;

71 
	g__BEGIN_DECLS


73 #ifde‡
__USE_MISC


75 
˛⁄e
 ((*
__‚
Ë(*
__¨g
), *
__chûd_°ack
,

76 
__Êags
, *
__¨g
, ...Ë
__THROW
;

79 
	$unsh¨e
 (
__Êags
Ë
__THROW
;

82 
	$sched_gë˝u
 (Ë
__THROW
;

85 
__END_DECLS


89 #i‡!
deföed
 
__deföed_sched∑øm
 \

90 && (
deföed
 
__√ed_sched∑øm
 || deföed 
_SCHED_H
)

91 
	#__deföed_sched∑øm
 1

	)

93 
	s__sched_∑øm


95 
__sched_¥i‹ôy
;

97 #unde‡
__√ed_sched∑øm


101 #i‡
deföed
 
_SCHED_H
 && !deföed 
__˝u_£t_t_deföed


102 
	#__˝u_£t_t_deföed


	)

104 
	#__CPU_SETSIZE
 1024

	)

105 
	#__NCPUBITS
 (8 *  (
__˝u_mask
))

	)

108 
	t__˝u_mask
;

111 
	#__CPUELT
(
˝u
Ë((˝uË/ 
__NCPUBITS
)

	)

112 
	#__CPUMASK
(
˝u
Ë((
__˝u_mask
Ë1 << ((˝uË% 
__NCPUBITS
))

	)

117 
__˝u_mask
 
__bôs
[
__CPU_SETSIZE
 / 
__NCPUBITS
];

118 } 
	t˝u_£t_t
;

121 
	#__CPU_ZERO
(
˝u£ç
) \

123 
__i
; \

124 
˝u_£t_t
 *
__¨r
 = (
˝u£ç
); \

125 
__i
 = 0; __ò<  (
˝u_£t_t
Ë/  (
__˝u_mask
); ++__i) \

126 
__¨r
->
__bôs
[
__i
] = 0; \

127 
	}
} 0)

	)

128 
	#__CPU_SET
(
˝u
, 
˝u£ç
) \

129 ((
˝u£ç
)->
__bôs
[
	`__CPUELT
 (
˝u
)] |
	`__CPUMASK
 (˝u))

	)

130 
	#__CPU_CLR
(
˝u
, 
˝u£ç
) \

131 ((
˝u£ç
)->
__bôs
[
	`__CPUELT
 (
˝u
)] &~
	`__CPUMASK
 (˝u))

	)

132 
	#__CPU_ISSET
(
˝u
, 
˝u£ç
) \

133 (((
˝u£ç
)->
__bôs
[
	`__CPUELT
 (
˝u
)] & 
	`__CPUMASK
 (˝u)Ë!0)

	)

134 
	$__sched_˝ucou¡
 (
size_t
 
__£tsize
, 
˝u_£t_t
 *
__£ç
Ë
__THROW
;

135 
	#__CPU_COUNT
(
˝u£ç
) \

136 
	`__sched_˝ucou¡
 ( (
˝u_£t_t
), 
˝u£ç
)

	)

	@/usr/include/bits/stdio-lock.h

20 #i‚de‡
_BITS_STDIO_LOCK_H


21 
	#_BITS_STDIO_LOCK_H
 1

	)

23 
	~<bôs/libc-lock.h
>

24 
	~<lowÀvñlock.h
>

28 
	#_IO_lock_öex≥nsive
 1

	)

30 °ru˘ { 
	mlock
; 
	m˙t
; *
	mow√r
; } 
	t_IO_lock_t
;

32 
	#_IO_lock_öôülizî
 { 
LLL_LOCK_INITIALIZER
, 0, 
NULL
 }

	)

34 
	#_IO_lock_öô
(
_«me
) \

35 ((
_«me
Ë(
_IO_lock_t
Ë
_IO_lock_öôülizî
 , 0)

	)

37 
	#_IO_lock_föi
(
_«me
) \

38 ((Ë0)

	)

40 
	#_IO_lock_lock
(
_«me
) \

42 *
__£lf
 = 
THREAD_SELF
; \

43 i‡((
_«me
).
ow√r
 !
__£lf
) \

45 
	`Œl_lock
 ((
_«me
).
lock
); \

46 (
_«me
).
ow√r
 = 
__£lf
; \

48 ++(
_«me
).
˙t
; \

49 } 0)

	)

51 
	#_IO_lock_åylock
(
_«me
) \

53 
__ªsu…
 = 0; \

54 *
__£lf
 = 
THREAD_SELF
; \

55 i‡((
_«me
).
ow√r
 !
__£lf
) \

57 i‡(
	`Œl_åylock
 ((
_«me
).
lock
) == 0) \

59 (
_«me
).
ow√r
 = 
__£lf
; \

60 (
_«me
).
˙t
 = 1; \

63 
__ªsu…
 = 
EBUSY
; \

66 ++(
_«me
).
˙t
; \

67 
__ªsu…
; \

68 })

	)

70 
	#_IO_lock_u∆ock
(
_«me
) \

72 i‡(--(
_«me
).
˙t
 == 0) \

74 (
_«me
).
ow√r
 = 
NULL
; \

75 
	`Œl_u∆ock
 ((
_«me
).
lock
); \

77 } 0)

	)

81 
	#_IO_˛ónup_ªgi⁄_°¨t
(
_f˘
, 
_Â
) \

82 
	`__libc_˛ónup_ªgi⁄_°¨t
 (((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0, 
_f˘
, _Â)

	)

83 
	#_IO_˛ónup_ªgi⁄_°¨t_nﬂrg
(
_f˘
) \

84 
	`__libc_˛ónup_ªgi⁄_°¨t
 (1, 
_f˘
, 
NULL
)

	)

85 
	#_IO_˛ónup_ªgi⁄_íd
(
_doô
) \

86 
	`__libc_˛ónup_ªgi⁄_íd
 (
_doô
)

	)

88 #i‡
deföed
 
_LIBC
 && !deföed 
NOT_IN_libc


90 #ifde‡
__EXCEPTIONS


91 
	#_IO_acquúe_lock
(
_Â
) \

93 
_IO_FILE
 *
_IO_acquúe_lock_fûe
 \

94 
	`__©åibuã__
((
	`˛ónup
 (
_IO_acquúe_lock_f˘
))) \

95 (
_Â
); \

96 
	`_IO_Êockfûe
 (
_IO_acquúe_lock_fûe
);

	)

99 
	#_IO_acquúe_lock
(
_Â
Ë
_IO_acquúe_lock_√eds_ex˚±i⁄s_íabÀd


	)

101 
	#_IO_ªÀa£_lock
(
_Â
Ë; } 0)

	)

	@/usr/include/bits/typesizes.h

20 #i‚de‡
_BITS_TYPES_H


24 #i‚def 
_BITS_TYPESIZES_H


25 
	#_BITS_TYPESIZES_H
 1

	)

30 
	#__DEV_T_TYPE
 
__UQUAD_TYPE


	)

31 
	#__UID_T_TYPE
 
__U32_TYPE


	)

32 
	#__GID_T_TYPE
 
__U32_TYPE


	)

33 
	#__INO_T_TYPE
 
__ULONGWORD_TYPE


	)

34 
	#__INO64_T_TYPE
 
__UQUAD_TYPE


	)

35 
	#__MODE_T_TYPE
 
__U32_TYPE


	)

36 
	#__NLINK_T_TYPE
 
__UWORD_TYPE


	)

37 
	#__OFF_T_TYPE
 
__SLONGWORD_TYPE


	)

38 
	#__OFF64_T_TYPE
 
__SQUAD_TYPE


	)

39 
	#__PID_T_TYPE
 
__S32_TYPE


	)

40 
	#__RLIM_T_TYPE
 
__ULONGWORD_TYPE


	)

41 
	#__RLIM64_T_TYPE
 
__UQUAD_TYPE


	)

42 
	#__BLKCNT_T_TYPE
 
__SLONGWORD_TYPE


	)

43 
	#__BLKCNT64_T_TYPE
 
__SQUAD_TYPE


	)

44 
	#__FSBLKCNT_T_TYPE
 
__ULONGWORD_TYPE


	)

45 
	#__FSBLKCNT64_T_TYPE
 
__UQUAD_TYPE


	)

46 
	#__FSFILCNT_T_TYPE
 
__ULONGWORD_TYPE


	)

47 
	#__FSFILCNT64_T_TYPE
 
__UQUAD_TYPE


	)

48 
	#__ID_T_TYPE
 
__U32_TYPE


	)

49 
	#__CLOCK_T_TYPE
 
__SLONGWORD_TYPE


	)

50 
	#__TIME_T_TYPE
 
__SLONGWORD_TYPE


	)

51 
	#__USECONDS_T_TYPE
 
__U32_TYPE


	)

52 
	#__SUSECONDS_T_TYPE
 
__SLONGWORD_TYPE


	)

53 
	#__DADDR_T_TYPE
 
__S32_TYPE


	)

54 
	#__SWBLK_T_TYPE
 
__SLONGWORD_TYPE


	)

55 
	#__KEY_T_TYPE
 
__S32_TYPE


	)

56 
	#__CLOCKID_T_TYPE
 
__S32_TYPE


	)

57 
	#__TIMER_T_TYPE
 *

	)

58 
	#__BLKSIZE_T_TYPE
 
__SLONGWORD_TYPE


	)

59 
	#__FSID_T_TYPE
 såu˘ { 
__vÆ
[2]; }

	)

60 
	#__SSIZE_T_TYPE
 
__SWORD_TYPE


	)

63 
	#__FD_SETSIZE
 1024

	)

	@/usr/include/bits/wchar.h

20 #i‚de‡
_BITS_WCHAR_H


21 
	#_BITS_WCHAR_H
 1

	)

23 
	#__WCHAR_MIN
 (-2147483647»- 1l)

	)

24 
	#__WCHAR_MAX
 (2147483647l)

	)

	@/usr/include/gnu/stubs.h

4 
	~<bôs/w‹dsize.h
>

6 #i‡
__WORDSIZE
 == 32

7 
	~<gnu/°ubs-32.h
>

8 #ñi‡
__WORDSIZE
 == 64

9 
	~<gnu/°ubs-64.h
>

	@/usr/include/linux/const.h

3 #i‚de‡
_LINUX_CONST_H


4 
	#_LINUX_CONST_H


	)

12 #ifde‡
__ASSEMBLY__


13 
	#_AC
(
X
,
Y
Ë
	)
X

15 
	#__AC
(
X
,
Y
Ë(X##Y)

	)

16 
	#_AC
(
X
,
Y
Ë
	`__AC
(X,Y)

	)

	@/usr/include/linux/errno.h

1 #i‚de‡
_LINUX_ERRNO_H


2 
	#_LINUX_ERRNO_H


	)

4 
	~<asm/î∫o.h
>

	@/usr/include/linux/posix_types.h

1 #i‚de‡
_LINUX_POSIX_TYPES_H


2 
	#_LINUX_POSIX_TYPES_H


	)

4 
	~<löux/°ddef.h
>

21 #unde‡
__NFDBITS


22 
	#__NFDBITS
 (8 * ())

	)

24 #unde‡
__FD_SETSIZE


25 
	#__FD_SETSIZE
 1024

	)

27 #unde‡
__FDSET_LONGS


28 
	#__FDSET_LONGS
 (
__FD_SETSIZE
/
__NFDBITS
)

	)

30 #unde‡
__FDELT


31 
	#__FDELT
(
d
Ë((dË/ 
__NFDBITS
)

	)

33 #unde‡
__FDMASK


34 
	#__FDMASK
(
d
Ë(1UL << ((dË% 
__NFDBITS
))

	)

37 
	mfds_bôs
 [
__FDSET_LONGS
];

38 } 
	t__kî√l_fd_£t
;

41 (*
	t__kî√l_sigh™dÀr_t
)();

44 
	t__kî√l_key_t
;

45 
	t__kî√l_mqd_t
;

47 
	~<asm/posix_ty≥s.h
>

	@/usr/include/paths.h

32 #i‚de‡
_PATHS_H_


33 
	#_PATHS_H_


	)

36 
	#_PATH_DEFPATH
 "/u§/bö:/bö"

	)

38 
	#_PATH_STDPATH
 \

39 "/u§/bö:/bö:/u§/sbö:/sbö"

	)

41 
	#_PATH_BSHELL
 "/bö/sh"

	)

42 
	#_PATH_CONSOLE
 "/dev/c⁄sﬁe"

	)

43 
	#_PATH_CSHELL
 "/bö/csh"

	)

44 
	#_PATH_DEVDB
 "/v¨/run/dev.db"

	)

45 
	#_PATH_DEVNULL
 "/dev/nuŒ"

	)

46 
	#_PATH_DRUM
 "/dev/drum"

	)

47 
	#_PATH_KLOG
 "/¥oc/kmsg"

	)

48 
	#_PATH_KMEM
 "/dev/kmem"

	)

49 
	#_PATH_LASTLOG
 "/v¨/log/œ°log"

	)

50 
	#_PATH_MAILDIR
 "/v¨/maû"

	)

51 
	#_PATH_MAN
 "/u§/sh¨e/m™"

	)

52 
	#_PATH_MEM
 "/dev/mem"

	)

53 
	#_PATH_MNTTAB
 "/ëc/f°ab"

	)

54 
	#_PATH_MOUNTED
 "/ëc/mèb"

	)

55 
	#_PATH_NOLOGIN
 "/ëc/nﬁogö"

	)

56 
	#_PATH_PRESERVE
 "/v¨/lib"

	)

57 
	#_PATH_RWHODIR
 "/v¨/•oﬁ/rwho"

	)

58 
	#_PATH_SENDMAIL
 "/u§/sbö/£ndmaû"

	)

59 
	#_PATH_SHADOW
 "/ëc/shadow"

	)

60 
	#_PATH_SHELLS
 "/ëc/shñls"

	)

61 
	#_PATH_TTY
 "/dev/ây"

	)

62 
	#_PATH_UNIX
 "/boŸ/vmlöux"

	)

63 
	#_PATH_UTMP
 "/v¨/run/utmp"

	)

64 
	#_PATH_VI
 "/u§/bö/vi"

	)

65 
	#_PATH_WTMP
 "/v¨/log/wtmp"

	)

68 
	#_PATH_DEV
 "/dev/"

	)

69 
	#_PATH_TMP
 "/tmp/"

	)

70 
	#_PATH_VARDB
 "/v¨/lib/misc/"

	)

71 
	#_PATH_VARRUN
 "/v¨/run/"

	)

72 
	#_PATH_VARTMP
 "/v¨/tmp/"

	)

	@/usr/include/strings.h

19 #i‚def 
_STRINGS_H


20 
	#_STRINGS_H
 1

	)

25 #i‡!
deföed
 
_STRING_H
 || !deföed 
__USE_BSD


27 
	~<„©uªs.h
>

28 
	#__√ed_size_t


	)

29 
	~<°ddef.h
>

31 
__BEGIN_DECLS


34 
	$bcmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
, 
size_t
 
__n
)

35 
__THROW
 
__©åibuã_puª__
;

38 
	$bc›y
 (
__c⁄°
 *
__§c
, *
__de°
, 
size_t
 
__n
Ë
__THROW
;

41 
	$bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
;

45 
	$ffs
 (
__i
Ë
__THROW
 
	`__©åibuã__
 ((const));

48 *
	$ödex
 (
__c⁄°
 *
__s
, 
__c
Ë
__THROW
 
__©åibuã_puª__
;

51 *
	$rödex
 (
__c⁄°
 *
__s
, 
__c
Ë
__THROW
 
__©åibuã_puª__
;

54 
	$°rˇ£cmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
)

55 
__THROW
 
__©åibuã_puª__
;

58 
	$°∫ˇ£cmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
, 
size_t
 
__n
)

59 
__THROW
 
__©åibuã_puª__
;

61 
__END_DECLS


	@/usr/include/zlibdefs.h

6 
	~<sys/ty≥s.h
>

7 
	~<uni°d.h
>

8 #ifde‡
VMS


9 
	~<unixio.h
>

11 #i‚de‡
z_off_t


12 
	#z_off_t
 
off_t


	)

	@/usr/include/asm-i386/ioctls.h

1 #i‚de‡
__ARCH_I386_IOCTLS_H__


2 
	#__ARCH_I386_IOCTLS_H__


	)

4 
	~<asm/io˘l.h
>

8 
	#TCGETS
 0x5401

	)

9 
	#TCSETS
 0x5402

	)

10 
	#TCSETSW
 0x5403

	)

11 
	#TCSETSF
 0x5404

	)

12 
	#TCGETA
 0x5405

	)

13 
	#TCSETA
 0x5406

	)

14 
	#TCSETAW
 0x5407

	)

15 
	#TCSETAF
 0x5408

	)

16 
	#TCSBRK
 0x5409

	)

17 
	#TCXONC
 0x540A

	)

18 
	#TCFLSH
 0x540B

	)

19 
	#TIOCEXCL
 0x540C

	)

20 
	#TIOCNXCL
 0x540D

	)

21 
	#TIOCSCTTY
 0x540E

	)

22 
	#TIOCGPGRP
 0x540F

	)

23 
	#TIOCSPGRP
 0x5410

	)

24 
	#TIOCOUTQ
 0x5411

	)

25 
	#TIOCSTI
 0x5412

	)

26 
	#TIOCGWINSZ
 0x5413

	)

27 
	#TIOCSWINSZ
 0x5414

	)

28 
	#TIOCMGET
 0x5415

	)

29 
	#TIOCMBIS
 0x5416

	)

30 
	#TIOCMBIC
 0x5417

	)

31 
	#TIOCMSET
 0x5418

	)

32 
	#TIOCGSOFTCAR
 0x5419

	)

33 
	#TIOCSSOFTCAR
 0x541A

	)

34 
	#FIONREAD
 0x541B

	)

35 
	#TIOCINQ
 
FIONREAD


	)

36 
	#TIOCLINUX
 0x541C

	)

37 
	#TIOCCONS
 0x541D

	)

38 
	#TIOCGSERIAL
 0x541E

	)

39 
	#TIOCSSERIAL
 0x541F

	)

40 
	#TIOCPKT
 0x5420

	)

41 
	#FIONBIO
 0x5421

	)

42 
	#TIOCNOTTY
 0x5422

	)

43 
	#TIOCSETD
 0x5423

	)

44 
	#TIOCGETD
 0x5424

	)

45 
	#TCSBRKP
 0x5425

	)

47 
	#TIOCSBRK
 0x5427

	)

48 
	#TIOCCBRK
 0x5428

	)

49 
	#TIOCGSID
 0x5429

	)

50 
	#TCGETS2
 
	`_IOR
('T',0x2A, 
ãrmios2
)

	)

51 
	#TCSETS2
 
	`_IOW
('T',0x2B, 
ãrmios2
)

	)

52 
	#TCSETSW2
 
	`_IOW
('T',0x2C, 
ãrmios2
)

	)

53 
	#TCSETSF2
 
	`_IOW
('T',0x2D, 
ãrmios2
)

	)

54 
	#TIOCGPTN
 
	`_IOR
('T',0x30, Ë

	)

55 
	#TIOCSPTLCK
 
	`_IOW
('T',0x31, Ë

	)

57 
	#FIONCLEX
 0x5450

	)

58 
	#FIOCLEX
 0x5451

	)

59 
	#FIOASYNC
 0x5452

	)

60 
	#TIOCSERCONFIG
 0x5453

	)

61 
	#TIOCSERGWILD
 0x5454

	)

62 
	#TIOCSERSWILD
 0x5455

	)

63 
	#TIOCGLCKTRMIOS
 0x5456

	)

64 
	#TIOCSLCKTRMIOS
 0x5457

	)

65 
	#TIOCSERGSTRUCT
 0x5458

	)

66 
	#TIOCSERGETLSR
 0x5459

	)

67 
	#TIOCSERGETMULTI
 0x545A

	)

68 
	#TIOCSERSETMULTI
 0x545B

	)

70 
	#TIOCMIWAIT
 0x545C

	)

71 
	#TIOCGICOUNT
 0x545D

	)

72 
	#TIOCGHAYESESP
 0x545E

	)

73 
	#TIOCSHAYESESP
 0x545F

	)

74 
	#FIOQSIZE
 0x5460

	)

77 
	#TIOCPKT_DATA
 0

	)

78 
	#TIOCPKT_FLUSHREAD
 1

	)

79 
	#TIOCPKT_FLUSHWRITE
 2

	)

80 
	#TIOCPKT_STOP
 4

	)

81 
	#TIOCPKT_START
 8

	)

82 
	#TIOCPKT_NOSTOP
 16

	)

83 
	#TIOCPKT_DOSTOP
 32

	)

85 
	#TIOCSER_TEMT
 0x01

	)

	@/usr/include/asm-i386/sigcontext.h

1 #i‚de‡
_ASMi386_SIGCONTEXT_H


2 
	#_ASMi386_SIGCONTEXT_H


	)

19 
	s_Âªg
 {

20 
	msignifiˇnd
[4];

21 
	mexp⁄ít
;

24 
	s_Âxªg
 {

25 
	msignifiˇnd
[4];

26 
	mexp⁄ít
;

27 
	m∑ddög
[3];

30 
	s_xmmªg
 {

31 
	mñemít
[4];

34 
	s_Â°©e
 {

36 
	mcw
;

37 
	msw
;

38 
	mèg
;

39 
	mùoff
;

40 
	mcs£l
;

41 
	md©aoff
;

42 
	md©a£l
;

43 
_Âªg
 
	m_°
[8];

44 
	m°©us
;

45 
	mmagic
;

48 
	m_fx§_ív
[6];

49 
	mmxc§
;

50 
	mª£rved
;

51 
_Âxªg
 
	m_fx§_°
[8];

52 
_xmmªg
 
	m_xmm
[8];

53 
	m∑ddög
[56];

56 
	#X86_FXSR_MAGIC
 0x0000

	)

58 
	ssigc⁄ãxt
 {

59 
	mgs
, 
	m__gsh
;

60 
	mfs
, 
	m__fsh
;

61 
	mes
, 
	m__esh
;

62 
	mds
, 
	m__dsh
;

63 
	medi
;

64 
	mesi
;

65 
	mebp
;

66 
	me•
;

67 
	mebx
;

68 
	medx
;

69 
	mecx
;

70 
	móx
;

71 
	må≠no
;

72 
	mîr
;

73 
	meù
;

74 
	mcs
, 
	m__csh
;

75 
	meÊags
;

76 
	me•_©_sig«l
;

77 
	mss
, 
	m__ssh
;

78 
_Â°©e
 * 
	mÂ°©e
;

79 
	mﬁdmask
;

80 
	m¸2
;

	@/usr/include/asm-i386/socket.h

1 #i‚de‡
_ASM_SOCKET_H


2 
	#_ASM_SOCKET_H


	)

4 
	~<asm/sockios.h
>

7 
	#SOL_SOCKET
 1

	)

9 
	#SO_DEBUG
 1

	)

10 
	#SO_REUSEADDR
 2

	)

11 
	#SO_TYPE
 3

	)

12 
	#SO_ERROR
 4

	)

13 
	#SO_DONTROUTE
 5

	)

14 
	#SO_BROADCAST
 6

	)

15 
	#SO_SNDBUF
 7

	)

16 
	#SO_RCVBUF
 8

	)

17 
	#SO_SNDBUFFORCE
 32

	)

18 
	#SO_RCVBUFFORCE
 33

	)

19 
	#SO_KEEPALIVE
 9

	)

20 
	#SO_OOBINLINE
 10

	)

21 
	#SO_NO_CHECK
 11

	)

22 
	#SO_PRIORITY
 12

	)

23 
	#SO_LINGER
 13

	)

24 
	#SO_BSDCOMPAT
 14

	)

26 
	#SO_PASSCRED
 16

	)

27 
	#SO_PEERCRED
 17

	)

28 
	#SO_RCVLOWAT
 18

	)

29 
	#SO_SNDLOWAT
 19

	)

30 
	#SO_RCVTIMEO
 20

	)

31 
	#SO_SNDTIMEO
 21

	)

34 
	#SO_SECURITY_AUTHENTICATION
 22

	)

35 
	#SO_SECURITY_ENCRYPTION_TRANSPORT
 23

	)

36 
	#SO_SECURITY_ENCRYPTION_NETWORK
 24

	)

38 
	#SO_BINDTODEVICE
 25

	)

41 
	#SO_ATTACH_FILTER
 26

	)

42 
	#SO_DETACH_FILTER
 27

	)

44 
	#SO_PEERNAME
 28

	)

45 
	#SO_TIMESTAMP
 29

	)

46 
	#SCM_TIMESTAMP
 
SO_TIMESTAMP


	)

48 
	#SO_ACCEPTCONN
 30

	)

50 
	#SO_PEERSEC
 31

	)

51 
	#SO_PASSSEC
 34

	)

52 
	#SO_TIMESTAMPNS
 35

	)

53 
	#SCM_TIMESTAMPNS
 
SO_TIMESTAMPNS


	)

	@/usr/include/asm-x86_64/ioctls.h

1 #i‚de‡
__ARCH_X8664_IOCTLS_H__


2 
	#__ARCH_X8664_IOCTLS_H__


	)

4 
	~<asm/io˘l.h
>

8 
	#TCGETS
 0x5401

	)

9 
	#TCSETS
 0x5402

	)

10 
	#TCSETSW
 0x5403

	)

11 
	#TCSETSF
 0x5404

	)

12 
	#TCGETA
 0x5405

	)

13 
	#TCSETA
 0x5406

	)

14 
	#TCSETAW
 0x5407

	)

15 
	#TCSETAF
 0x5408

	)

16 
	#TCSBRK
 0x5409

	)

17 
	#TCXONC
 0x540A

	)

18 
	#TCFLSH
 0x540B

	)

19 
	#TIOCEXCL
 0x540C

	)

20 
	#TIOCNXCL
 0x540D

	)

21 
	#TIOCSCTTY
 0x540E

	)

22 
	#TIOCGPGRP
 0x540F

	)

23 
	#TIOCSPGRP
 0x5410

	)

24 
	#TIOCOUTQ
 0x5411

	)

25 
	#TIOCSTI
 0x5412

	)

26 
	#TIOCGWINSZ
 0x5413

	)

27 
	#TIOCSWINSZ
 0x5414

	)

28 
	#TIOCMGET
 0x5415

	)

29 
	#TIOCMBIS
 0x5416

	)

30 
	#TIOCMBIC
 0x5417

	)

31 
	#TIOCMSET
 0x5418

	)

32 
	#TIOCGSOFTCAR
 0x5419

	)

33 
	#TIOCSSOFTCAR
 0x541A

	)

34 
	#FIONREAD
 0x541B

	)

35 
	#TIOCINQ
 
FIONREAD


	)

36 
	#TIOCLINUX
 0x541C

	)

37 
	#TIOCCONS
 0x541D

	)

38 
	#TIOCGSERIAL
 0x541E

	)

39 
	#TIOCSSERIAL
 0x541F

	)

40 
	#TIOCPKT
 0x5420

	)

41 
	#FIONBIO
 0x5421

	)

42 
	#TIOCNOTTY
 0x5422

	)

43 
	#TIOCSETD
 0x5423

	)

44 
	#TIOCGETD
 0x5424

	)

45 
	#TCSBRKP
 0x5425

	)

46 
	#TIOCSBRK
 0x5427

	)

47 
	#TIOCCBRK
 0x5428

	)

48 
	#TIOCGSID
 0x5429

	)

49 
	#TCGETS2
 
	`_IOR
('T',0x2A, 
ãrmios2
)

	)

50 
	#TCSETS2
 
	`_IOW
('T',0x2B, 
ãrmios2
)

	)

51 
	#TCSETSW2
 
	`_IOW
('T',0x2C, 
ãrmios2
)

	)

52 
	#TCSETSF2
 
	`_IOW
('T',0x2D, 
ãrmios2
)

	)

53 
	#TIOCGPTN
 
	`_IOR
('T',0x30, Ë

	)

54 
	#TIOCSPTLCK
 
	`_IOW
('T',0x31, Ë

	)

56 
	#FIONCLEX
 0x5450

	)

57 
	#FIOCLEX
 0x5451

	)

58 
	#FIOASYNC
 0x5452

	)

59 
	#TIOCSERCONFIG
 0x5453

	)

60 
	#TIOCSERGWILD
 0x5454

	)

61 
	#TIOCSERSWILD
 0x5455

	)

62 
	#TIOCGLCKTRMIOS
 0x5456

	)

63 
	#TIOCSLCKTRMIOS
 0x5457

	)

64 
	#TIOCSERGSTRUCT
 0x5458

	)

65 
	#TIOCSERGETLSR
 0x5459

	)

66 
	#TIOCSERGETMULTI
 0x545A

	)

67 
	#TIOCSERSETMULTI
 0x545B

	)

69 
	#TIOCMIWAIT
 0x545C

	)

70 
	#TIOCGICOUNT
 0x545D

	)

71 
	#TIOCGHAYESESP
 0x545E

	)

72 
	#TIOCSHAYESESP
 0x545F

	)

73 
	#FIOQSIZE
 0x5460

	)

76 
	#TIOCPKT_DATA
 0

	)

77 
	#TIOCPKT_FLUSHREAD
 1

	)

78 
	#TIOCPKT_FLUSHWRITE
 2

	)

79 
	#TIOCPKT_STOP
 4

	)

80 
	#TIOCPKT_START
 8

	)

81 
	#TIOCPKT_NOSTOP
 16

	)

82 
	#TIOCPKT_DOSTOP
 32

	)

84 
	#TIOCSER_TEMT
 0x01

	)

	@/usr/include/asm-x86_64/sigcontext.h

1 #i‚de‡
_ASM_X86_64_SIGCONTEXT_H


2 
	#_ASM_X86_64_SIGCONTEXT_H


	)

4 
	~<asm/ty≥s.h
>

9 
	s_Â°©e
 {

10 
__u16
 
	mcwd
;

11 
__u16
 
	mswd
;

12 
__u16
 
	mtwd
;

13 
__u16
 
	mf›
;

14 
__u64
 
	mrù
;

15 
__u64
 
	mrdp
;

16 
__u32
 
	mmxc§
;

17 
__u32
 
	mmxc§_mask
;

18 
__u32
 
	m°_•a˚
[32];

19 
__u32
 
	mxmm_•a˚
[64];

20 
__u32
 
	mª£rved2
[24];

23 
	ssigc⁄ãxt
 {

24 
	mr8
;

25 
	mr9
;

26 
	mr10
;

27 
	mr11
;

28 
	mr12
;

29 
	mr13
;

30 
	mr14
;

31 
	mr15
;

32 
	mrdi
;

33 
	mrsi
;

34 
	mrbp
;

35 
	mrbx
;

36 
	mrdx
;

37 
	møx
;

38 
	mrcx
;

39 
	mr•
;

40 
	mrù
;

41 
	meÊags
;

42 
	mcs
;

43 
	mgs
;

44 
	mfs
;

45 
	m__∑d0
;

46 
	mîr
;

47 
	må≠no
;

48 
	mﬁdmask
;

49 
	m¸2
;

50 
_Â°©e
 *
	mÂ°©e
;

51 
	mª£rved1
[8];

	@/usr/include/asm-x86_64/socket.h

1 #i‚de‡
_ASM_SOCKET_H


2 
	#_ASM_SOCKET_H


	)

4 
	~<asm/sockios.h
>

7 
	#SOL_SOCKET
 1

	)

9 
	#SO_DEBUG
 1

	)

10 
	#SO_REUSEADDR
 2

	)

11 
	#SO_TYPE
 3

	)

12 
	#SO_ERROR
 4

	)

13 
	#SO_DONTROUTE
 5

	)

14 
	#SO_BROADCAST
 6

	)

15 
	#SO_SNDBUF
 7

	)

16 
	#SO_RCVBUF
 8

	)

17 
	#SO_SNDBUFFORCE
 32

	)

18 
	#SO_RCVBUFFORCE
 33

	)

19 
	#SO_KEEPALIVE
 9

	)

20 
	#SO_OOBINLINE
 10

	)

21 
	#SO_NO_CHECK
 11

	)

22 
	#SO_PRIORITY
 12

	)

23 
	#SO_LINGER
 13

	)

24 
	#SO_BSDCOMPAT
 14

	)

26 
	#SO_PASSCRED
 16

	)

27 
	#SO_PEERCRED
 17

	)

28 
	#SO_RCVLOWAT
 18

	)

29 
	#SO_SNDLOWAT
 19

	)

30 
	#SO_RCVTIMEO
 20

	)

31 
	#SO_SNDTIMEO
 21

	)

34 
	#SO_SECURITY_AUTHENTICATION
 22

	)

35 
	#SO_SECURITY_ENCRYPTION_TRANSPORT
 23

	)

36 
	#SO_SECURITY_ENCRYPTION_NETWORK
 24

	)

38 
	#SO_BINDTODEVICE
 25

	)

41 
	#SO_ATTACH_FILTER
 26

	)

42 
	#SO_DETACH_FILTER
 27

	)

44 
	#SO_PEERNAME
 28

	)

45 
	#SO_TIMESTAMP
 29

	)

46 
	#SCM_TIMESTAMP
 
SO_TIMESTAMP


	)

48 
	#SO_ACCEPTCONN
 30

	)

50 
	#SO_PEERSEC
 31

	)

51 
	#SO_PASSSEC
 34

	)

52 
	#SO_TIMESTAMPNS
 35

	)

53 
	#SCM_TIMESTAMPNS
 
SO_TIMESTAMPNS


	)

	@/usr/include/asm/errno.h

2 #i‚de‡
__ASM_STUB_ERRNO_H


3 
	#__ASM_STUB_ERRNO_H


	)

4 #i‡
deföed
 
__x86_64__


5 
	~<asm-x86_64/î∫o.h
>

6 #ñi‡
deföed
 
__i386__


7 
	~<asm-i386/î∫o.h
>

9 #w¨nög 
This
 
machöe
 
≠≥¨s
 
to
 
be
 
√ôhî
 
x86_64
 
n‹
 
i386
.

	@/usr/include/asm/posix_types.h

2 #i‚de‡
__ASM_STUB_POSIX_TYPES_H


3 
	#__ASM_STUB_POSIX_TYPES_H


	)

4 #i‡
deföed
 
__x86_64__


5 
	~<asm-x86_64/posix_ty≥s.h
>

6 #ñi‡
deföed
 
__i386__


7 
	~<asm-i386/posix_ty≥s.h
>

9 #w¨nög 
This
 
machöe
 
≠≥¨s
 
to
 
be
 
√ôhî
 
x86_64
 
n‹
 
i386
.

	@/usr/include/bits/libc-lock.h

20 #i‚de‡
_BITS_LIBC_LOCK_H


21 
	#_BITS_LIBC_LOCK_H
 1

	)

23 
	~<±hªad.h
>

24 
	#__√ed_NULL


	)

25 
	~<°ddef.h
>

34 #ifde‡
_LIBC


35 
	~<lowÀvñlock.h
>

36 
	~<és.h
>

37 
	~<±hªad-fun˘i⁄s.h
>

41 #i‡
deföed
 
_LIBC
 || deföed 
_IO_MTSAFE_IO


42 #i‡(
deföed
 
NOT_IN_libc
 && !deföed 
IS_IN_lib±hªad
Ë|| !deföed 
_LIBC


43 
±hªad_muãx_t
 
	t__libc_lock_t
;

44 °ru˘ { 
±hªad_muãx_t
 
	mmuãx
; } 
	t__libc_lock_ªcursive_t
;

46 
	t__libc_lock_t
;

47 °ru˘ { 
	mlock
; 
	m˙t
; *
	mow√r
; } 
	t__libc_lock_ªcursive_t
;

49 °ru˘ { 
±hªad_muãx_t
 
	mmuãx
; } 
	t__πld_lock_ªcursive_t
;

50 #ifde‡
__USE_UNIX98


51 
±hªad_rwlock_t
 
	t__libc_rwlock_t
;

53 
__libc_rwlock_›aque__
 
	t__libc_rwlock_t
;

56 
__libc_lock_›aque__
 
	t__libc_lock_t
;

57 
__libc_lock_ªcursive_›aque__
 
	t__libc_lock_ªcursive_t
;

58 
__libc_rwlock_›aque__
 
	t__libc_rwlock_t
;

62 
±hªad_key_t
 
	t__libc_key_t
;

71 
	#__libc_lock_deföe
(
CLASS
,
NAME
) \

72 
CLASS
 
__libc_lock_t
 
NAME
;

	)

73 
	#__libc_rwlock_deföe
(
CLASS
,
NAME
) \

74 
CLASS
 
__libc_rwlock_t
 
NAME
;

	)

75 
	#__libc_lock_deföe_ªcursive
(
CLASS
,
NAME
) \

76 
CLASS
 
__libc_lock_ªcursive_t
 
NAME
;

	)

77 
	#__πld_lock_deföe_ªcursive
(
CLASS
,
NAME
) \

78 
CLASS
 
__πld_lock_ªcursive_t
 
NAME
;

	)

89 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

90 #i‡
LLL_LOCK_INITIALIZER
 == 0

91 
	#__libc_lock_deföe_öôülized
(
CLASS
,
NAME
) \

92 
CLASS
 
__libc_lock_t
 
NAME
;

	)

94 
	#__libc_lock_deföe_öôülized
(
CLASS
,
NAME
) \

95 
CLASS
 
__libc_lock_t
 
NAME
 = 
LLL_LOCK_INITIALIZER
;

	)

98 #i‡
__LT_SPINLOCK_INIT
 == 0

99 
	#__libc_lock_deföe_öôülized
(
CLASS
,
NAME
) \

100 
CLASS
 
__libc_lock_t
 
NAME
;

	)

102 
	#__libc_lock_deföe_öôülized
(
CLASS
,
NAME
) \

103 
CLASS
 
__libc_lock_t
 
NAME
 = 
PTHREAD_MUTEX_INITIALIZER
;

	)

107 
	#__libc_rwlock_deföe_öôülized
(
CLASS
,
NAME
) \

108 
CLASS
 
__libc_rwlock_t
 
NAME
 = 
PTHREAD_RWLOCK_INITIALIZER
;

	)

112 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

113 #i‡
LLL_LOCK_INITIALIZER
 == 0

114 
	#__libc_lock_deföe_öôülized_ªcursive
(
CLASS
,
NAME
) \

115 
CLASS
 
__libc_lock_ªcursive_t
 
NAME
;

	)

117 
	#__libc_lock_deföe_öôülized_ªcursive
(
CLASS
,
NAME
) \

118 
CLASS
 
__libc_lock_ªcursive_t
 
NAME
 = 
_LIBC_LOCK_RECURSIVE_INITIALIZER
;

	)

120 
	#_LIBC_LOCK_RECURSIVE_INITIALIZER
 \

121 { 
LLL_LOCK_INITIALIZER
, 0, 
NULL
 }

	)

123 
	#__libc_lock_deföe_öôülized_ªcursive
(
CLASS
,
NAME
) \

124 
CLASS
 
__libc_lock_ªcursive_t
 
NAME
 = 
_LIBC_LOCK_RECURSIVE_INITIALIZER
;

	)

125 
	#_LIBC_LOCK_RECURSIVE_INITIALIZER
 \

126 {
PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
}

	)

129 
	#__πld_lock_deföe_öôülized_ªcursive
(
CLASS
,
NAME
) \

130 
CLASS
 
__πld_lock_ªcursive_t
 
NAME
 = 
_RTLD_LOCK_RECURSIVE_INITIALIZER
;

	)

131 
	#_RTLD_LOCK_RECURSIVE_INITIALIZER
 \

132 {
PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
}

	)

134 
	#__πld_lock_öôülize
(
NAME
) \

135 (Ë((
NAME
Ë(
__πld_lock_ªcursive_t
Ë
_RTLD_LOCK_RECURSIVE_INITIALIZER
)

	)

142 #ifde‡
__PIC__


143 
	#__libc_maybe_ˇŒ
(
FUNC
, 
ARGS
, 
ELSE
) \

144 (
	`__exãnsi⁄__
 ({ 
	`__ty≥of
 (
FUNC
Ë*
_‚
 = (FUNC); \

145 
_‚
 !
NULL
 ? (*_‚Ë
ARGS
 : 
ELSE
; }))

	)

147 
	#__libc_maybe_ˇŒ
(
FUNC
, 
ARGS
, 
ELSE
) \

148 (
FUNC
 !
NULL
 ? FUNC 
ARGS
 : 
ELSE
)

	)

152 #i‡
deföed
 
SHARED
 && !deföed 
NOT_IN_libc


153 
	#PTFAVAIL
(
NAME
Ë
__libc_±hªad_fun˘i⁄s_öô


	)

154 
	#__libc_±f_ˇŒ
(
FUNC
, 
ARGS
, 
ELSE
) \

155 (
__libc_±hªad_fun˘i⁄s_öô
 ? 
	`PTHFCT_CALL
 (
±r_
##
FUNC
, 
ARGS
Ë: 
ELSE
)

	)

156 
	#__libc_±f_ˇŒ_Æways
(
FUNC
, 
ARGS
) \

157 
	`PTHFCT_CALL
 (
±r_
##
FUNC
, 
ARGS
)

	)

159 
	#PTFAVAIL
(
NAME
Ë(NAME !
NULL
)

	)

160 
	#__libc_±f_ˇŒ
(
FUNC
, 
ARGS
, 
ELSE
) \

161 
	`__libc_maybe_ˇŒ
 (
FUNC
, 
ARGS
, 
ELSE
)

	)

162 
	#__libc_±f_ˇŒ_Æways
(
FUNC
, 
ARGS
) \

163 
FUNC
 
ARGS


	)

169 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

170 
	#__libc_lock_öô
(
NAME
Ë((NAMEË
LLL_LOCK_INITIALIZER
, 0)

	)

172 
	#__libc_lock_öô
(
NAME
) \

173 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_öô
, (&(
NAME
), 
NULL
), 0)

	)

175 
	#__libc_rwlock_öô
(
NAME
) \

176 
	`__libc_maybe_ˇŒ
 (
__±hªad_rwlock_öô
, (&(
NAME
), 
NULL
), 0)

	)

179 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

180 
	#__libc_lock_öô_ªcursive
(
NAME
) \

181 ((
NAME
Ë(
__libc_lock_ªcursive_t
Ë
_LIBC_LOCK_RECURSIVE_INITIALIZER
, 0)

	)

183 
	#__libc_lock_öô_ªcursive
(
NAME
) \

185 i‡(
__±hªad_muãx_öô
 !
NULL
) \

187 
±hªad_muãx©å_t
 
__©å
; \

188 
	`__±hªad_muãx©å_öô
 (&
__©å
); \

189 
	`__±hªad_muãx©å_£ây≥
 (&
__©å
, 
PTHREAD_MUTEX_RECURSIVE_NP
); \

190 
	`__±hªad_muãx_öô
 (&(
NAME
).
muãx
, &
__©å
); \

191 
	`__±hªad_muãx©å_de°roy
 (&
__©å
); \

193 } 0)

	)

196 
	#__πld_lock_öô_ªcursive
(
NAME
) \

198 i‡(
__±hªad_muãx_öô
 !
NULL
) \

200 
±hªad_muãx©å_t
 
__©å
; \

201 
	`__±hªad_muãx©å_öô
 (&
__©å
); \

202 
	`__±hªad_muãx©å_£ây≥
 (&
__©å
, 
PTHREAD_MUTEX_RECURSIVE_NP
); \

203 
	`__±hªad_muãx_öô
 (&(
NAME
).
muãx
, &
__©å
); \

204 
	`__±hªad_muãx©å_de°roy
 (&
__©å
); \

206 } 0)

	)

211 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

212 
	#__libc_lock_föi
(
NAME
Ë((Ë0)

	)

214 
	#__libc_lock_föi
(
NAME
) \

215 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_de°roy
, (&(
NAME
)), 0)

	)

217 
	#__libc_rwlock_föi
(
NAME
) \

218 
	`__libc_maybe_ˇŒ
 (
__±hªad_rwlock_de°roy
, (&(
NAME
)), 0)

	)

221 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

222 
	#__libc_lock_föi_ªcursive
(
NAME
Ë((Ë0)

	)

224 
	#__libc_lock_föi_ªcursive
(
NAME
) \

225 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_de°roy
, (&(
NAME
)), 0)

	)

229 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

230 
	#__libc_lock_lock
(
NAME
) \

231 ({ 
	`Œl_lock
 (
NAME
); 0; })

	)

233 
	#__libc_lock_lock
(
NAME
) \

234 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_lock
, (&(
NAME
)), 0)

	)

236 
	#__libc_rwlock_rdlock
(
NAME
) \

237 
	`__libc_±f_ˇŒ
 (
__±hªad_rwlock_rdlock
, (&(
NAME
)), 0)

	)

238 
	#__libc_rwlock_wæock
(
NAME
) \

239 
	`__libc_±f_ˇŒ
 (
__±hªad_rwlock_wæock
, (&(
NAME
)), 0)

	)

242 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

243 
	#__libc_lock_lock_ªcursive
(
NAME
) \

245 *
£lf
 = 
THREAD_SELF
; \

246 i‡((
NAME
).
ow√r
 !
£lf
) \

248 
	`Œl_lock
 ((
NAME
).
lock
); \

249 (
NAME
).
ow√r
 = 
£lf
; \

251 ++(
NAME
).
˙t
; \

252 } 0)

	)

254 
	#__libc_lock_lock_ªcursive
(
NAME
) \

255 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_lock
, (&(
NAME
).
muãx
), 0)

	)

259 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

260 
	#__libc_lock_åylock
(
NAME
) \

261 
	`Œl_åylock
 (
NAME
)

	)

263 
	#__libc_lock_åylock
(
NAME
) \

264 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_åylock
, (&(
NAME
)), 0)

	)

266 
	#__libc_rwlock_åyrdlock
(
NAME
) \

267 
	`__libc_maybe_ˇŒ
 (
__±hªad_rwlock_åyrdlock
, (&(
NAME
)), 0)

	)

268 
	#__libc_rwlock_åywæock
(
NAME
) \

269 
	`__libc_maybe_ˇŒ
 (
__±hªad_rwlock_åywæock
, (&(
NAME
)), 0)

	)

272 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

273 
	#__libc_lock_åylock_ªcursive
(
NAME
) \

275 
ªsu…
 = 0; \

276 *
£lf
 = 
THREAD_SELF
; \

277 i‡((
NAME
).
ow√r
 !
£lf
) \

279 i‡(
	`Œl_åylock
 ((
NAME
).
lock
) == 0) \

281 (
NAME
).
ow√r
 = 
£lf
; \

282 (
NAME
).
˙t
 = 1; \

285 
ªsu…
 = 
EBUSY
; \

288 ++(
NAME
).
˙t
; \

289 
ªsu…
; \

290 })

	)

292 
	#__libc_lock_åylock_ªcursive
(
NAME
) \

293 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_åylock
, (&(
NAME
)), 0)

	)

296 
	#__πld_lock_åylock_ªcursive
(
NAME
) \

297 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_åylock
, (&(
NAME
).
muãx
), 0)

	)

300 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

301 
	#__libc_lock_u∆ock
(
NAME
) \

302 
	`Œl_u∆ock
 (
NAME
)

	)

304 
	#__libc_lock_u∆ock
(
NAME
) \

305 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_u∆ock
, (&(
NAME
)), 0)

	)

307 
	#__libc_rwlock_u∆ock
(
NAME
) \

308 
	`__libc_±f_ˇŒ
 (
__±hªad_rwlock_u∆ock
, (&(
NAME
)), 0)

	)

311 #i‡
deföed
 
_LIBC
 && (!deföed 
NOT_IN_libc
 || deföed 
IS_IN_lib±hªad
)

313 
	#__libc_lock_u∆ock_ªcursive
(
NAME
) \

315 i‡(--(
NAME
).
˙t
 == 0) \

317 (
NAME
).
ow√r
 = 
NULL
; \

318 
	`Œl_u∆ock
 ((
NAME
).
lock
); \

320 } 0)

	)

322 
	#__libc_lock_u∆ock_ªcursive
(
NAME
) \

323 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_u∆ock
, (&(
NAME
)), 0)

	)

326 #i‡
deföed
 
_LIBC
 && deföed 
SHARED


327 
	#__πld_lock_deÁu…_lock_ªcursive
(
lock
) \

328 ++((
±hªad_muãx_t
 *)(
lock
))->
__d©a
.
__cou¡
;

	)

330 
	#__πld_lock_deÁu…_u∆ock_ªcursive
(
lock
) \

331 --((
±hªad_muãx_t
 *)(
lock
))->
__d©a
.
__cou¡
;

	)

333 
	#__πld_lock_lock_ªcursive
(
NAME
) \

334 
	`GL
(
dl_πld_lock_ªcursive
Ë(&(
NAME
).
muãx
)

	)

336 
	#__πld_lock_u∆ock_ªcursive
(
NAME
) \

337 
	`GL
(
dl_πld_u∆ock_ªcursive
Ë(&(
NAME
).
muãx
)

	)

339 
	#__πld_lock_lock_ªcursive
(
NAME
) \

340 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_lock
, (&(
NAME
).
muãx
), 0)

	)

342 
	#__πld_lock_u∆ock_ªcursive
(
NAME
) \

343 
	`__libc_maybe_ˇŒ
 (
__±hªad_muãx_u∆ock
, (&(
NAME
).
muãx
), 0)

	)

347 #i‡
PTHREAD_ONCE_INIT
 == 0

350 
	#__libc_⁄˚_deföe
(
CLASS
, 
NAME
) \

351 
CLASS
 
±hªad_⁄˚_t
 
NAME


	)

353 
	#__libc_⁄˚_deföe
(
CLASS
, 
NAME
) \

354 
CLASS
 
±hªad_⁄˚_t
 
NAME
 = 
PTHREAD_ONCE_INIT


	)

358 
	#__libc_⁄˚
(
ONCE_CONTROL
, 
INIT_FUNCTION
) \

360 i‡(
	`PTFAVAIL
 (
__±hªad_⁄˚
)) \

361 
	`__libc_±f_ˇŒ_Æways
 (
__±hªad_⁄˚
, (&(
ONCE_CONTROL
), \

362 
INIT_FUNCTION
)); \

363 i‡((
ONCE_CONTROL
Ë=
PTHREAD_ONCE_INIT
) { \

364 
	`INIT_FUNCTION
 (); \

365 (
ONCE_CONTROL
) |= 2; \

367 } 0)

	)

374 
_±hªad_˛ónup_push
 (
_±hªad_˛ónup_buf„r
 *
buf„r
,

375 (*
routöe
Ë(*), *
¨g
);

376 
	`_±hªad_˛ónup_p›
 (
_±hªad_˛ónup_buf„r
 *
buf„r
,

377 
execuã
);

378 
	`_±hªad_˛ónup_push_de„r
 (
_±hªad_˛ónup_buf„r
 *
buf„r
,

379 (*
routöe
Ë(*), *
¨g
);

380 
	`_±hªad_˛ónup_p›_ª°‹e
 (
_±hªad_˛ónup_buf„r
 *
buf„r
,

381 
execuã
);

384 
	#__libc_˛ónup_ªgi⁄_°¨t
(
DOIT
, 
FCT
, 
ARG
) \

385 { 
_±hªad_˛ónup_buf„r
 
_buf„r
; \

386 
_avaû
; \

387 i‡(
DOIT
) { \

388 
_avaû
 = 
	`PTFAVAIL
 (
_±hªad_˛ónup_push_de„r
); \

389 i‡(
_avaû
) { \

390 
	`__libc_±f_ˇŒ_Æways
 (
_±hªad_˛ónup_push_de„r
, (&
_buf„r
, 
FCT
, \

391 
ARG
)); \

393 
_buf„r
.
__routöe
 = (
FCT
); \

394 
_buf„r
.
__¨g
 = (
ARG
); \

397 
_avaû
 = 0; \

398 }

	)

401 
	#__libc_˛ónup_ªgi⁄_íd
(
DOIT
) \

402 i‡(
_avaû
) { \

403 
	`__libc_±f_ˇŒ_Æways
 (
_±hªad_˛ónup_p›_ª°‹e
, (&
_buf„r
, 
DOIT
));\

404 } i‡(
DOIT
) \

405 
_buf„r
.
	`__routöe
 (_buf„r.
__¨g
); \

406 
	}

	)
}

409 
	#__libc_˛ónup_íd
(
DOIT
) \

410 i‡(
_avaû
) { \

411 
	`__libc_±f_ˇŒ_Æways
 (
_±hªad_˛ónup_p›_ª°‹e
, (&
_buf„r
, 
DOIT
));\

412 } i‡(
DOIT
) \

413 
_buf„r
.
	`__routöe
 (_buf„r.
__¨g
)

	)

417 
__exã∫_ölöe
 

418 
	$__libc_˛ónup_routöe
 (
__±hªad_˛ónup_‰ame
 *
f
)

420 i‡(
f
->
__do_ô
)

421 
f
->
	`__ˇn˚l_routöe
 (f->
__ˇn˚l_¨g
);

422 
	}
}

424 
	#__libc_˛ónup_push
(
f˘
, 
¨g
) \

426 
__±hªad_˛ónup_‰ame
 
__˛‰ame
 \

427 
	`__©åibuã__
 ((
	`__˛ónup__
 (
__libc_˛ónup_routöe
))) \

428 { .
__ˇn˚l_routöe
 = (
f˘
), .
__ˇn˚l_¨g
 = (
¨g
), \

429 .
__do_ô
 = 1 };

	)

431 
	#__libc_˛ónup_p›
(
execuã
) \

432 
__˛‰ame
.
__do_ô
 = (
execuã
); \

433 } 0)

	)

437 
	#__libc_key_¸óã
(
KEY
, 
DESTRUCTOR
) \

438 
	`__libc_±f_ˇŒ
 (
__±hªad_key_¸óã
, (
KEY
, 
DESTRUCTOR
), 1)

	)

441 
	#__libc_gë•ecific
(
KEY
) \

442 
	`__libc_±f_ˇŒ
 (
__±hªad_gë•ecific
, (
KEY
), 
NULL
)

	)

445 
	#__libc_£t•ecific
(
KEY
, 
VALUE
) \

446 
	`__libc_±f_ˇŒ
 (
__±hªad_£t•ecific
, (
KEY
, 
VALUE
), 0)

	)

452 
	#__libc_©f‹k
(
PREPARE
, 
PARENT
, 
CHILD
) \

453 
	`__ªgi°î_©f‹k
 (
PREPARE
, 
PARENT
, 
CHILD
, 
NULL
)

	)

454 
__ªgi°î_©f‹k
 ((*
__¥ï¨e
) (),

455 (*
__∑ª¡
) (),

456 (*
__chûd
) (),

457 *
__dso_h™dÀ
);

462 
	`__±hªad_muãx_öô
 (
±hªad_muãx_t
 *
__muãx
,

463 
__c⁄°
 
±hªad_muãx©å_t
 *
__muãx_©å
);

465 
	`__±hªad_muãx_de°roy
 (
±hªad_muãx_t
 *
__muãx
);

467 
	`__±hªad_muãx_åylock
 (
±hªad_muãx_t
 *
__muãx
);

469 
	`__±hªad_muãx_lock
 (
±hªad_muãx_t
 *
__muãx
);

471 
	`__±hªad_muãx_u∆ock
 (
±hªad_muãx_t
 *
__muãx
);

473 
	`__±hªad_muãx©å_öô
 (
±hªad_muãx©å_t
 *
__©å
);

475 
	`__±hªad_muãx©å_de°roy
 (
±hªad_muãx©å_t
 *
__©å
);

477 
	`__±hªad_muãx©å_£ây≥
 (
±hªad_muãx©å_t
 *
__©å
,

478 
__köd
);

480 #ifde‡
__USE_UNIX98


481 
	`__±hªad_rwlock_öô
 (
±hªad_rwlock_t
 *
__rwlock
,

482 
__c⁄°
 
±hªad_rwlock©å_t
 *
__©å
);

484 
	`__±hªad_rwlock_de°roy
 (
±hªad_rwlock_t
 *
__rwlock
);

486 
	`__±hªad_rwlock_rdlock
 (
±hªad_rwlock_t
 *
__rwlock
);

488 
	`__±hªad_rwlock_åyrdlock
 (
±hªad_rwlock_t
 *
__rwlock
);

490 
	`__±hªad_rwlock_wæock
 (
±hªad_rwlock_t
 *
__rwlock
);

492 
	`__±hªad_rwlock_åywæock
 (
±hªad_rwlock_t
 *
__rwlock
);

494 
	`__±hªad_rwlock_u∆ock
 (
±hªad_rwlock_t
 *
__rwlock
);

497 
	`__±hªad_key_¸óã
 (
±hªad_key_t
 *
__key
,

498 (*
__de°r_fun˘i⁄
) (*));

500 
	`__±hªad_£t•ecific
 (
±hªad_key_t
 
__key
,

501 
__c⁄°
 *
__poöãr
);

503 *
	`__±hªad_gë•ecific
 (
±hªad_key_t
 
__key
);

505 
	`__±hªad_⁄˚
 (
±hªad_⁄˚_t
 *
__⁄˚_c⁄åﬁ
,

506 (*
__öô_routöe
) ());

508 
	`__±hªad_©f‹k
 ((*
__¥ï¨e
) (),

509 (*
__∑ª¡
) (),

510 (*
__chûd
) ());

516 #i‚de‡
__NO_WEAK_PTHREAD_ALIASES


517 #ifde‡
wók_exã∫


518 #i‡
_LIBC


519 
	~<bp-sym.h
>

521 
	#BP_SYM
 (
sym
Ë
	)
sym

523 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_muãx_öô
))

524 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_muãx_de°roy
))

525 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_muãx_lock
))

526 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_muãx_åylock
))

527 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_muãx_u∆ock
))

528 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_muãx©å_öô
))

529 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_muãx©å_de°roy
))

530 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_muãx©å_£ây≥
))

531 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_rwlock_öô
))

532 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_rwlock_de°roy
))

533 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_rwlock_rdlock
))

534 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_rwlock_åyrdlock
))

535 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_rwlock_wæock
))

536 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_rwlock_åywæock
))

537 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_rwlock_u∆ock
))

538 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_key_¸óã
))

539 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_£t•ecific
))

540 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_gë•ecific
))

541 
	`wók_exã∫
 (
	$BP_SYM
 (
__±hªad_⁄˚
))

542 
	$wók_exã∫
 (
__±hªad_öôülize
)

543 
	$wók_exã∫
 (
__±hªad_©f‹k
)

544 
	`wók_exã∫
 (
	$BP_SYM
 (
_±hªad_˛ónup_push_de„r
))

545 
	`wók_exã∫
 (
	$BP_SYM
 (
_±hªad_˛ónup_p›_ª°‹e
))

546 
	`wók_exã∫
 (
	$BP_SYM
 (
±hªad_£tˇn˚l°©e
))

548 #¥agm®
wók
 
__±hªad_muãx_öô


549 #¥agm®
wók
 
__±hªad_muãx_de°roy


550 #¥agm®
wók
 
__±hªad_muãx_lock


551 #¥agm®
wók
 
__±hªad_muãx_åylock


552 #¥agm®
wók
 
__±hªad_muãx_u∆ock


553 #¥agm®
wók
 
__±hªad_muãx©å_öô


554 #¥agm®
wók
 
__±hªad_muãx©å_de°roy


555 #¥agm®
wók
 
__±hªad_muãx©å_£ây≥


556 #¥agm®
wók
 
__±hªad_rwlock_de°roy


557 #¥agm®
wók
 
__±hªad_rwlock_rdlock


558 #¥agm®
wók
 
__±hªad_rwlock_åyrdlock


559 #¥agm®
wók
 
__±hªad_rwlock_wæock


560 #¥agm®
wók
 
__±hªad_rwlock_åywæock


561 #¥agm®
wók
 
__±hªad_rwlock_u∆ock


562 #¥agm®
wók
 
__±hªad_key_¸óã


563 #¥agm®
wók
 
__±hªad_£t•ecific


564 #¥agm®
wók
 
__±hªad_gë•ecific


565 #¥agm®
wók
 
__±hªad_⁄˚


566 #¥agm®
wók
 
__±hªad_öôülize


567 #¥agm®
wók
 
__±hªad_©f‹k


568 #¥agm®
wók
 
_±hªad_˛ónup_push_de„r


569 #¥agm®
wók
 
_±hªad_˛ónup_p›_ª°‹e


570 #¥agm®
wók
 
±hªad_£tˇn˚l°©e


	@/usr/include/gconv.h

23 #i‚de‡
_GCONV_H


24 
	#_GCONV_H
 1

	)

26 
	~<„©uªs.h
>

27 
	#__√ed_mb°©e_t


	)

28 
	~<wch¨.h
>

29 
	#__√ed_size_t


	)

30 
	#__√ed_wch¨_t


	)

31 
	~<°ddef.h
>

34 
	#__UNKNOWN_10646_CHAR
 ((
wch¨_t
Ë0xfffd)

	)

39 
	m__GCONV_OK
 = 0,

40 
	m__GCONV_NOCONV
,

41 
	m__GCONV_NODB
,

42 
	m__GCONV_NOMEM
,

44 
	m__GCONV_EMPTY_INPUT
,

45 
	m__GCONV_FULL_OUTPUT
,

46 
	m__GCONV_ILLEGAL_INPUT
,

47 
	m__GCONV_INCOMPLETE_INPUT
,

49 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

50 
	m__GCONV_INTERNAL_ERROR


57 
	m__GCONV_IS_LAST
 = 0x0001,

58 
	m__GCONV_IGNORE_ERRORS
 = 0x0002

63 
	g__gc⁄v_°ï
;

64 
	g__gc⁄v_°ï_d©a
;

65 
	g__gc⁄v_lﬂded_obje˘
;

66 
	g__gc⁄v_å™s_d©a
;

70 (*
	t__gc⁄v_f˘
Ë(
	t__gc⁄v_°ï
 *, 
	t__gc⁄v_°ï_d©a
 *,

71 
	t__c⁄°
 **, __const *,

72 **, 
	tsize_t
 *, , );

75 
	$wöt_t
 (*
	t__gc⁄v_btowc_f˘
Ë(
	t__gc⁄v_°ï
 *, );

78 (*
	t__gc⁄v_öô_f˘
Ë(
	t__gc⁄v_°ï
 *);

79 (*
	t__gc⁄v_íd_f˘
Ë(
	t__gc⁄v_°ï
 *);

83 (*
	t__gc⁄v_å™s_f˘
Ë(
	t__gc⁄v_°ï
 *,

84 
	t__gc⁄v_°ï_d©a
 *, *,

85 
	t__c⁄°
 *,

86 
	t__c⁄°
 **,

87 
	t__c⁄°
 *, **,

88 
	tsize_t
 *);

91 (*
	t__gc⁄v_å™s_c⁄ãxt_f˘
Ë(*, 
	t__c⁄°
 *,

92 
	t__c⁄°
 *,

96 (*
	t__gc⁄v_å™s_quîy_f˘
Ë(
	t__c⁄°
 *, __const ***,

97 
	tsize_t
 *);

100 (*
	t__gc⁄v_å™s_öô_f˘
) (**, const *);

101 (*
	t__gc⁄v_å™s_íd_f˘
) (*);

103 
	s__gc⁄v_å™s_d©a


106 
__gc⁄v_å™s_f˘
 
__å™s_f˘
;

107 
__gc⁄v_å™s_c⁄ãxt_f˘
 
__å™s_c⁄ãxt_f˘
;

108 
__gc⁄v_å™s_íd_f˘
 
__å™s_íd_f˘
;

109 *
__d©a
;

110 
__gc⁄v_å™s_d©a
 *
__√xt
;

115 
	s__gc⁄v_°ï


117 
__gc⁄v_lﬂded_obje˘
 *
__shlib_h™dÀ
;

118 
__c⁄°
 *
__mod«me
;

120 
__cou¡î
;

122 *
__‰om_«me
;

123 *
__to_«me
;

125 
__gc⁄v_f˘
 
__f˘
;

126 
__gc⁄v_btowc_f˘
 
__btowc_f˘
;

127 
__gc⁄v_öô_f˘
 
__öô_f˘
;

128 
__gc⁄v_íd_f˘
 
__íd_f˘
;

132 
__mö_√eded_‰om
;

133 
__max_√eded_‰om
;

134 
__mö_√eded_to
;

135 
__max_√eded_to
;

138 
__°©eful
;

140 *
__d©a
;

145 
	s__gc⁄v_°ï_d©a


147 *
__outbuf
;

148 *
__outbu„nd
;

152 
__Êags
;

156 
__övoˇti⁄_cou¡î
;

160 
__öã∫Æ_u£
;

162 
__mb°©e_t
 *
__°©ï
;

163 
__mb°©e_t
 
__°©e
;

167 
__gc⁄v_å™s_d©a
 *
__å™s
;

172 
	s__gc⁄v_öfo


174 
size_t
 
__n°ïs
;

175 
__gc⁄v_°ï
 *
__°ïs
;

176 
__exãnsi⁄__
 
__gc⁄v_°ï_d©a
 
__d©a
 
__Êex¨r
;

177 } *
	t__gc⁄v_t
;

	@/usr/include/gnu/stubs-32.h

6 #ifde‡
_LIBC


7 #îr‹ 
Aµliˇti⁄s
 
may
 
nŸ
 
deföe
 
the
 
ma¸o
 
_LIBC


10 
	#__°ub___kî√l_co¶


	)

11 
	#__°ub___kî√l_söl


	)

12 
	#__°ub___kî√l_è∆


	)

13 
	#__°ub_chÊags


	)

14 
	#__°ub_Áâach


	)

15 
	#__°ub_fchÊags


	)

16 
	#__°ub_fdëach


	)

17 
	#__°ub_gây


	)

18 
	#__°ub_lchmod


	)

19 
	#__°ub_ªvoke


	)

20 
	#__°ub_£éogö


	)

21 
	#__°ub_sigªtu∫


	)

22 
	#__°ub_s°k


	)

23 
	#__°ub_°ty


	)

	@/usr/include/linux/limits.h

1 #i‚de‡
_LINUX_LIMITS_H


2 
	#_LINUX_LIMITS_H


	)

4 
	#NR_OPEN
 1024

	)

6 
	#NGROUPS_MAX
 65536

	)

7 
	#ARG_MAX
 131072

	)

8 
	#CHILD_MAX
 999

	)

9 
	#OPEN_MAX
 256

	)

10 
	#LINK_MAX
 127

	)

11 
	#MAX_CANON
 255

	)

12 
	#MAX_INPUT
 255

	)

13 
	#NAME_MAX
 255

	)

14 
	#PATH_MAX
 4096

	)

15 
	#PIPE_BUF
 4096

	)

16 
	#XATTR_NAME_MAX
 255

	)

17 
	#XATTR_SIZE_MAX
 65536

	)

18 
	#XATTR_LIST_MAX
 65536

	)

20 
	#RTSIG_MAX
 32

	)

	@/usr/include/linux/stddef.h

1 #i‚de‡
_LINUX_STDDEF_H


2 
	#_LINUX_STDDEF_H


	)

5 #unde‡
NULL


6 #i‡
deföed
(
__˝lu•lus
)

7 
	#NULL
 0

	)

9 
	#NULL
 ((*)0)

	)

	@/usr/include/wchar.h

24 #i‚de‡
_WCHAR_H


26 #i‚de‡
__√ed_mb°©e_t


27 
	#_WCHAR_H
 1

	)

28 
	~<„©uªs.h
>

31 #ifde‡
_WCHAR_H


33 
	#__√ed___FILE


	)

34 #ifde‡
__USE_UNIX98


35 
	#__√ed_FILE


	)

37 
	~<°dio.h
>

39 
	#__√ed___va_li°


	)

40 
	~<°d¨g.h
>

43 
	#__√ed_size_t


	)

44 
	#__√ed_wch¨_t


	)

45 
	#__√ed_NULL


	)

47 
	#__√ed_wöt_t


	)

48 
	~<°ddef.h
>

50 
	~<bôs/wch¨.h
>

54 #i‚de‡
_WINT_T


59 
	#_WINT_T


	)

60 
	twöt_t
;

64 #i‡
deföed
 
__˝lu•lus
 && deföed 
_GLIBCPP_USE_NAMESPACES
 \

65 && 
deföed
 
__WINT_TYPE__


66 
__BEGIN_NAMESPACE_STD


67 
__WINT_TYPE__
 
	twöt_t
;

68 
	g__END_NAMESPACE_STD


73 #i‚de‡
__mb°©e_t_deföed


74 
	#__mb°©e_t_deföed
 1

	)

78 
	m__cou¡
;

81 
wöt_t
 
	m__wch
;

82 
	m__wchb
[4];

83 } 
	m__vÆue
;

84 } 
	t__mb°©e_t
;

86 #unde‡
__√ed_mb°©e_t


91 #ifde‡
_WCHAR_H


93 
__BEGIN_NAMESPACE_C99


95 
__mb°©e_t
 
	tmb°©e_t
;

96 
	g__END_NAMESPACE_C99


97 #ifde‡
__USE_GNU


98 
	$__USING_NAMESPACE_C99
(
mb°©e_t
)

101 #i‚de‡
WCHAR_MIN


103 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

104 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

107 #i‚de‡
WEOF


108 
	#WEOF
 (0xffffffffu)

	)

113 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_UNIX98


114 
	~<w˘y≥.h
>

118 
__BEGIN_DECLS


120 
__BEGIN_NAMESPACE_STD


123 
tm
;

124 
__END_NAMESPACE_STD


128 
	$__USING_NAMESPACE_STD
(
tm
)

131 
__BEGIN_NAMESPACE_C99


133 
wch¨_t
 *
	$wcs˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

134 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

136 
wch¨_t
 *
	$wc¢˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

137 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

138 
__THROW
;

141 
wch¨_t
 *
	$wcsˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

142 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

144 
wch¨_t
 *
	$wc¢ˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

145 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

146 
__THROW
;

149 
	$wcscmp
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
)

150 
__THROW
 
__©åibuã_puª__
;

152 
	$wc¢cmp
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

153 
__THROW
 
__©åibuã_puª__
;

154 
__END_NAMESPACE_C99


156 #ifde‡
__USE_GNU


158 
	$wcsˇ£cmp
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
Ë
__THROW
;

161 
	$wc¢ˇ£cmp
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
,

162 
size_t
 
__n
Ë
__THROW
;

166 
	~<xloˇÀ.h
>

168 
	$wcsˇ£cmp_l
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
,

169 
__loˇÀ_t
 
__loc
Ë
__THROW
;

171 
	$wc¢ˇ£cmp_l
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
,

172 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

175 
__BEGIN_NAMESPACE_C99


178 
	$wcscﬁl
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
Ë
__THROW
;

182 
size_t
 
	$wcsx‰m
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

183 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

184 
__END_NAMESPACE_C99


186 #ifde‡
__USE_GNU


192 
	$wcscﬁl_l
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
,

193 
__loˇÀ_t
 
__loc
Ë
__THROW
;

198 
size_t
 
	$wcsx‰m_l
 (
wch¨_t
 *
__s1
, 
__c⁄°
 wch¨_à*
__s2
,

199 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

202 
wch¨_t
 *
	$wcsdup
 (
__c⁄°
 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_mÆloc__
;

205 
__BEGIN_NAMESPACE_C99


207 
wch¨_t
 *
	$wcschr
 (
__c⁄°
 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

208 
__THROW
 
__©åibuã_puª__
;

210 
wch¨_t
 *
	$wc§chr
 (
__c⁄°
 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

211 
__THROW
 
__©åibuã_puª__
;

212 
__END_NAMESPACE_C99


214 #ifde‡
__USE_GNU


217 
wch¨_t
 *
	$wcsch∫ul
 (
__c⁄°
 
wch¨_t
 *
__s
, wch¨_à
__wc
)

218 
__THROW
 
__©åibuã_puª__
;

221 
__BEGIN_NAMESPACE_C99


224 
size_t
 
	$wcsc•n
 (
__c⁄°
 
wch¨_t
 *
__wcs
, __c⁄° wch¨_à*
__ªje˘
)

225 
__THROW
 
__©åibuã_puª__
;

228 
size_t
 
	$wcs•n
 (
__c⁄°
 
wch¨_t
 *
__wcs
, __c⁄° wch¨_à*
__ac˚±
)

229 
__THROW
 
__©åibuã_puª__
;

231 
wch¨_t
 *
	$wc•brk
 (
__c⁄°
 
wch¨_t
 *
__wcs
, __c⁄° wch¨_à*
__ac˚±
)

232 
__THROW
 
__©åibuã_puª__
;

234 
wch¨_t
 *
	$wcs°r
 (
__c⁄°
 
wch¨_t
 *
__hay°ack
, __c⁄° wch¨_à*
__√edÀ
)

235 
__THROW
 
__©åibuã_puª__
;

238 
wch¨_t
 *
	$wc°ok
 (
wch¨_t
 *
__ª°ri˘
 
__s
,

239 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__dñim
,

240 
wch¨_t
 **
__ª°ri˘
 
__±r
Ë
__THROW
;

243 
size_t
 
	$wc¶í
 (
__c⁄°
 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_puª__
;

244 
__END_NAMESPACE_C99


246 #ifde‡
__USE_XOPEN


248 
wch¨_t
 *
	$wcswcs
 (
__c⁄°
 
wch¨_t
 *
__hay°ack
, __c⁄° wch¨_à*
__√edÀ
)

249 
__THROW
 
__©åibuã_puª__
;

252 #ifde‡
__USE_GNU


254 
size_t
 
	$wc¢Àn
 (
__c⁄°
 
wch¨_t
 *
__s
, 
size_t
 
__maxÀn
)

255 
__THROW
 
__©åibuã_puª__
;

259 
__BEGIN_NAMESPACE_C99


261 
wch¨_t
 *
	$wmemchr
 (
__c⁄°
 
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
)

262 
__THROW
 
__©åibuã_puª__
;

265 
	$wmemcmp
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s1
,

266 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
)

267 
__THROW
 
__©åibuã_puª__
;

270 
wch¨_t
 *
	$wmem˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

271 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

275 
wch¨_t
 *
	$wmemmove
 (
wch¨_t
 *
__s1
, 
__c⁄°
 wch¨_à*
__s2
, 
size_t
 
__n
)

276 
__THROW
;

279 
wch¨_t
 *
	$wmem£t
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
Ë
__THROW
;

280 
__END_NAMESPACE_C99


282 #ifde‡
__USE_GNU


285 
wch¨_t
 *
	$wmemp˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

286 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
)

287 
__THROW
;

291 
__BEGIN_NAMESPACE_C99


294 
wöt_t
 
	$btowc
 (
__c
Ë
__THROW
;

298 
	$w˘ob
 (
wöt_t
 
__c
Ë
__THROW
;

302 
	$mbsöô
 (
__c⁄°
 
mb°©e_t
 *
__ps
Ë
__THROW
 
__©åibuã_puª__
;

306 
size_t
 
	$mbπowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

307 
__c⁄°
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

308 
mb°©e_t
 *
__p
Ë
__THROW
;

311 
size_t
 
	$w¸tomb
 (*
__ª°ri˘
 
__s
, 
wch¨_t
 
__wc
,

312 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

315 
size_t
 
	$__mbæí
 (
__c⁄°
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

316 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

317 
size_t
 
	$mbæí
 (
__c⁄°
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

318 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

319 
__END_NAMESPACE_C99


321 #ifde‡
__USE_EXTERN_INLINES


324 #i‚de‡
__˝lu•lus


328 
wöt_t
 
	$__btowc_Æüs
 (
__c
Ë
	`__asm
 ("btowc");

329 
__exã∫_ölöe
 
wöt_t


330 
	`__NTH
 (
	$btowc
 (
__c
))

331 {  (
	`__buûtö_c⁄°™t_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

332 ? (
wöt_t
Ë
__c
 : 
	`__btowc_Æüs
 (__c)); 
	}
}

334 
	$__w˘ob_Æüs
 (
wöt_t
 
__c
Ë
	`__asm
 ("wctob");

335 
__exã∫_ölöe
 

336 
	`__NTH
 (
	$w˘ob
 (
wöt_t
 
__wc
))

337 {  (
	`__buûtö_c⁄°™t_p
 (
__wc
Ë&& __w¯>
L
'\0' && __wc <= L'\x7f'

338 ? (Ë
__wc
 : 
	`__w˘ob_Æüs
 (__wc)); 
	}
}

341 
__exã∫_ölöe
 
size_t


342 
__NTH
 (
	$mbæí
 (
__c⁄°
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

343 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

344 {  (
__ps
 !
NULL


345 ? 
	`mbπowc
 (
NULL
, 
__s
, 
__n
, 
__ps
Ë: 
	`__mbæí
 (__s, __n, NULL)); 
	}
}

348 
__BEGIN_NAMESPACE_C99


351 
size_t
 
	$mb§towcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

352 
__c⁄°
 **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

353 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

357 
size_t
 
	$wc§tombs
 (*
__ª°ri˘
 
__d°
,

358 
__c⁄°
 
wch¨_t
 **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

359 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

360 
__END_NAMESPACE_C99


363 #ifdef 
__USE_GNU


366 
size_t
 
	$mb¢πowcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

367 
__c⁄°
 **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

368 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

372 
size_t
 
	$wc¢πombs
 (*
__ª°ri˘
 
__d°
,

373 
__c⁄°
 
wch¨_t
 **
__ª°ri˘
 
__§c
,

374 
size_t
 
__nwc
, size_à
__Àn
,

375 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

380 #ifde‡
__USE_XOPEN


382 
	$wcwidth
 (
wch¨_t
 
__c
Ë
__THROW
;

386 
	$wcswidth
 (
__c⁄°
 
wch¨_t
 *
__s
, 
size_t
 
__n
Ë
__THROW
;

390 
__BEGIN_NAMESPACE_C99


393 
	$wc°od
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

394 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

396 #ifde‡
__USE_ISOC99


398 
	$wc°of
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

399 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

400 
	$wc°ﬁd
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

401 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

407 
	$wc°ﬁ
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

408 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
Ë
__THROW
;

412 
	$wc°oul
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

413 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

414 
__THROW
;

416 #i‡
deföed
 
__USE_ISOC99
 || (deföed 
__GNUC__
 && deföed 
__USE_GNU
)

419 
__exãnsi⁄__


420 
	$wc°ﬁl
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

421 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

422 
__THROW
;

426 
__exãnsi⁄__


427 
	$wc°ouŒ
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

428 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

429 
__ba£
Ë
__THROW
;

431 
__END_NAMESPACE_C99


433 #i‡
deföed
 
__GNUC__
 && deföed 
__USE_GNU


436 
__exãnsi⁄__


437 
	$wc°oq
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

438 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

439 
__THROW
;

443 
__exãnsi⁄__


444 
	$wc°ouq
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

445 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

446 
__ba£
Ë
__THROW
;

449 #ifde‡
__USE_GNU


463 
	~<xloˇÀ.h
>

467 
	$wc°ﬁ_l
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

468 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

469 
__loˇÀ_t
 
__loc
Ë
__THROW
;

471 
	$wc°oul_l
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

472 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

473 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

475 
__exãnsi⁄__


476 
	$wc°ﬁl_l
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

477 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

478 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

480 
__exãnsi⁄__


481 
	$wc°ouŒ_l
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

482 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

483 
__ba£
, 
__loˇÀ_t
 
__loc
)

484 
__THROW
;

486 
	$wc°od_l
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

487 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

488 
__THROW
;

490 
	$wc°of_l
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

491 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

492 
__THROW
;

494 
	$wc°ﬁd_l
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

495 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

496 
__loˇÀ_t
 
__loc
Ë
__THROW
;

502 
	$__wc°od_öã∫Æ
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

503 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__group
)

504 
__THROW
;

505 
	$__wc°of_öã∫Æ
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

506 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__group
)

507 
__THROW
;

508 
	$__wc°ﬁd_öã∫Æ
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

509 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

510 
__group
Ë
__THROW
;

512 #i‡!
deföed
 
__wc°ﬁ_öã∫Æ_deföed
 \

513 && 
deföed
 
__OPTIMIZE__
 && 
__GNUC__
 >= 2

514 
	$__wc°ﬁ_öã∫Æ
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

515 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

516 
__ba£
, 
__group
Ë
__THROW
;

517 
	#__wc°ﬁ_öã∫Æ_deföed
 1

	)

519 #i‡!
deföed
 
__wc°oul_öã∫Æ_deföed
 \

520 && 
deföed
 
__OPTIMIZE__
 && 
__GNUC__
 >= 2

521 
	$__wc°oul_öã∫Æ
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈t
,

522 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

523 
__ba£
, 
__group
Ë
__THROW
;

524 
	#__wc°oul_öã∫Æ_deföed
 1

	)

526 #i‡!
deföed
 
__wc°ﬁl_öã∫Æ_deföed
 \

527 && 
deföed
 
__OPTIMIZE__
 && 
__GNUC__
 >= 2

528 
__exãnsi⁄__


529 
	$__wc°ﬁl_öã∫Æ
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

530 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

531 
__ba£
, 
__group
Ë
__THROW
;

532 
	#__wc°ﬁl_öã∫Æ_deföed
 1

	)

534 #i‡!
deföed
 
__wc°ouŒ_öã∫Æ_deföed
 \

535 && 
deföed
 
__OPTIMIZE__
 && 
__GNUC__
 >= 2

536 
__exãnsi⁄__


537 
	$__wc°ouŒ_öã∫Æ
 (
__c⁄°
 
wch¨_t
 *

538 
__ª°ri˘
 
__≈å
,

539 
wch¨_t
 **

540 
__ª°ri˘
 
__íd±r
,

541 
__ba£
,

542 
__group
Ë
__THROW
;

543 
	#__wc°ouŒ_öã∫Æ_deföed
 1

	)

547 #i‡
deföed
 
__OPTIMIZE__
 && 
__GNUC__
 >= 2

549 
__BEGIN_NAMESPACE_C99


551 
__exã∫_ölöe
 

552 
	`__NTH
 (
	$wc°od
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

553 
wch¨_t
 **
__ª°ri˘
 
__íd±r
))

554 {  
	`__wc°od_öã∫Æ
 (
__≈å
, 
__íd±r
, 0); 
	}
}

555 
__exã∫_ölöe
 

556 
__NTH
 (
	$wc°ﬁ
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

557 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
))

558 {  
	`__wc°ﬁ_öã∫Æ
 (
__≈å
, 
__íd±r
, 
__ba£
, 0); 
	}
}

559 
__exã∫_ölöe
 

560 
__NTH
 (
	$wc°oul
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

561 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
))

562 {  
	`__wc°oul_öã∫Æ
 (
__≈å
, 
__íd±r
, 
__ba£
, 0); 
	}
}

563 
	g__END_NAMESPACE_C99


565 #ifde‡
__USE_GNU


566 
__exã∫_ölöe
 

567 
__NTH
 (
	$wc°of
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

568 
wch¨_t
 **
__ª°ri˘
 
__íd±r
))

569 {  
	`__wc°of_öã∫Æ
 (
__≈å
, 
__íd±r
, 0); 
	}
}

570 #i‚de‡
__LDBL_COMPAT


571 
__exã∫_ölöe
 

572 
__NTH
 (
	$wc°ﬁd
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

573 
wch¨_t
 **
__ª°ri˘
 
__íd±r
))

574 {  
	`__wc°ﬁd_öã∫Æ
 (
__≈å
, 
__íd±r
, 0); 
	}
}

576 
__exãnsi⁄__


577 
__exã∫_ölöe
 

578 
__NTH
 (
	$wc°oq
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

579 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
))

580 {  
	`__wc°ﬁl_öã∫Æ
 (
__≈å
, 
__íd±r
, 
__ba£
, 0); 
	}
}

581 
__exãnsi⁄__


582 
__exã∫_ölöe
 

583 
__NTH
 (
	$wc°ouq
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

584 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
))

585 {  
	`__wc°ouŒ_öã∫Æ
 (
__≈å
, 
__íd±r
, 
__ba£
, 0); 
	}
}

590 #ifdef 
__USE_GNU


593 
wch¨_t
 *
	$w˝˝y
 (
wch¨_t
 *
__de°
, 
__c⁄°
 wch¨_à*
__§c
Ë
__THROW
;

597 
wch¨_t
 *
	$w˝n˝y
 (
wch¨_t
 *
__de°
, 
__c⁄°
 wch¨_à*
__§c
, 
size_t
 
__n
)

598 
__THROW
;

604 #ifdef 
__USE_GNU


607 
__FILE
 *
	$›í_wmem°ªam
 (
wch¨_t
 **
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
;

610 #i‡
deföed
 
__USE_ISOC99
 || deföed 
__USE_UNIX98


611 
__BEGIN_NAMESPACE_C99


614 
	$fwide
 (
__FILE
 *
__Â
, 
__mode
Ë
__THROW
;

621 
	`fw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

622 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

628 
	`w¥ötf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

631 
	$sw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

632 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

633 
__THROW
 ;

639 
	`vfw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__s
,

640 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

641 
__gnuc_va_li°
 
__¨g
)

647 
	`vw¥ötf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

648 
__gnuc_va_li°
 
__¨g
)

652 
	$vsw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

653 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

654 
__gnuc_va_li°
 
__¨g
)

655 
__THROW
 ;

662 
	`fwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

663 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

669 
	`wsˇnf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

672 
	$swsˇnf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s
,

673 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

674 
__THROW
 ;

676 
__END_NAMESPACE_C99


679 #ifde‡
__USE_ISOC99


680 
__BEGIN_NAMESPACE_C99


686 
	`vfwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__s
,

687 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

688 
__gnuc_va_li°
 
__¨g
)

694 
	`vwsˇnf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

695 
__gnuc_va_li°
 
__¨g
)

698 
	$vswsˇnf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s
,

699 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

700 
__gnuc_va_li°
 
__¨g
)

701 
__THROW
 ;

703 
__END_NAMESPACE_C99


707 
__BEGIN_NAMESPACE_C99


712 
wöt_t
 
	`fgëwc
 (
__FILE
 *
__°ªam
);

713 
wöt_t
 
	`gëwc
 (
__FILE
 *
__°ªam
);

719 
wöt_t
 
	`gëwch¨
 ();

726 
wöt_t
 
	`Âutwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

727 
wöt_t
 
	`putwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

733 
wöt_t
 
	`putwch¨
 (
wch¨_t
 
__wc
);

741 
wch¨_t
 *
	`fgëws
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

742 
__FILE
 *
__ª°ri˘
 
__°ªam
);

748 
	`Âutws
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__ws
,

749 
__FILE
 *
__ª°ri˘
 
__°ªam
);

756 
wöt_t
 
	`ungëwc
 (wöt_à
__wc
, 
__FILE
 *
__°ªam
);

757 
__END_NAMESPACE_C99


760 #ifde‡
__USE_GNU


768 
wöt_t
 
	`gëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

769 
wöt_t
 
	`gëwch¨_u∆ocked
 ();

777 
wöt_t
 
	`fgëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

785 
wöt_t
 
	`Âutwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

794 
wöt_t
 
	`putwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

795 
wöt_t
 
	`putwch¨_u∆ocked
 (
wch¨_t
 
__wc
);

804 
wch¨_t
 *
	`fgëws_u∆ocked
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

805 
__FILE
 *
__ª°ri˘
 
__°ªam
);

813 
	`Âutws_u∆ocked
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__ws
,

814 
__FILE
 *
__ª°ri˘
 
__°ªam
);

818 
__BEGIN_NAMESPACE_C99


822 
size_t
 
	$wcs·ime
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

823 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

824 
__c⁄°
 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

825 
__END_NAMESPACE_C99


827 #ifde‡
__USE_GNU


828 
	~<xloˇÀ.h
>

832 
size_t
 
	$wcs·ime_l
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

833 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

834 
__c⁄°
 
tm
 *
__ª°ri˘
 
__ç
,

835 
__loˇÀ_t
 
__loc
Ë
__THROW
;

844 #i‡
deföed
 
__USE_UNIX98
 && !deföed 
__USE_GNU


845 
	#__√ed_iswxxx


	)

846 
	~<w˘y≥.h
>

850 #i‡
__USE_FORTIFY_LEVEL
 > 0 && !
deföed
 
__˝lu•lus


851 
	~<bôs/wch¨2.h
>

854 #ifde‡
__LDBL_COMPAT


855 
	~<bôs/wch¨-ldbl.h
>

858 
__END_DECLS


	@/usr/include/asm-i386/errno.h

1 #i‚de‡
_I386_ERRNO_H


2 
	#_I386_ERRNO_H


	)

4 
	~<asm-gíîic/î∫o.h
>

	@/usr/include/asm-i386/posix_types.h

1 #i‚de‡
__ARCH_I386_POSIX_TYPES_H


2 
	#__ARCH_I386_POSIX_TYPES_H


	)

10 
	t__kî√l_öo_t
;

11 
	t__kî√l_mode_t
;

12 
	t__kî√l_∆ök_t
;

13 
	t__kî√l_off_t
;

14 
	t__kî√l_pid_t
;

15 
	t__kî√l_ùc_pid_t
;

16 
	t__kî√l_uid_t
;

17 
	t__kî√l_gid_t
;

18 
	t__kî√l_size_t
;

19 
	t__kî√l_ssize_t
;

20 
	t__kî√l_±rdiff_t
;

21 
	t__kî√l_time_t
;

22 
	t__kî√l_su£c⁄ds_t
;

23 
	t__kî√l_˛ock_t
;

24 
	t__kî√l_timî_t
;

25 
	t__kî√l_˛ockid_t
;

26 
	t__kî√l_daddr_t
;

27 * 
	t__kî√l_ˇddr_t
;

28 
	t__kî√l_uid16_t
;

29 
	t__kî√l_gid16_t
;

30 
	t__kî√l_uid32_t
;

31 
	t__kî√l_gid32_t
;

33 
	t__kî√l_ﬁd_uid_t
;

34 
	t__kî√l_ﬁd_gid_t
;

35 
	t__kî√l_ﬁd_dev_t
;

37 #ifde‡
__GNUC__


38 
	t__kî√l_loff_t
;

42 #i‡
deföed
(
__KERNEL__
Ë|| deföed(
__USE_ALL
)

43 
	mvÆ
[2];

45 
	m__vÆ
[2];

47 } 
	t__kî√l_fsid_t
;

49 #i‡
deföed
(
__KERNEL__
Ë|| !deföed(
__GLIBC__
) || (__GLIBC__ < 2)

51 #unde‡
__FD_SET


52 
	#__FD_SET
(
fd
,
fd£ç
) \

53 
__asm__
 
	`__vﬁ©ûe__
("btsl %1,%0": \

54 "+m" (*(
__kî√l_fd_£t
 *Ë(
fd£ç
)):"r" ((Ë(
fd
)))

	)

56 #unde‡
__FD_CLR


57 
	#__FD_CLR
(
fd
,
fd£ç
) \

58 
__asm__
 
	`__vﬁ©ûe__
("btrl %1,%0": \

59 "+m" (*(
__kî√l_fd_£t
 *Ë(
fd£ç
)):"r" ((Ë(
fd
)))

	)

61 #unde‡
__FD_ISSET


62 
	#__FD_ISSET
(
fd
,
fd£ç
Ë(
	`__exãnsi⁄__
 ({ \

63 
__ªsu…
; \

64 
__asm__
 
	`__vﬁ©ûe__
("btl %1,%2 ; setb %0" \

65 :"=q" (
__ªsu…
Ë:"r" ((Ë(
fd
)), \

66 "m" (*(
__kî√l_fd_£t
 *Ë(
fd£ç
))); \

67 
__ªsu…
; }))

	)

69 #unde‡
__FD_ZERO


70 
	#__FD_ZERO
(
fd£ç
) \

72 
__d0
, 
__d1
; \

73 
__asm__
 
	`__vﬁ©ûe__
("cld ;Ñep ; stosl" \

74 :"=m" (*(
__kî√l_fd_£t
 *Ë(
fd£ç
)), \

75 "=&c" (
__d0
), "=&D" (
__d1
) \

76 :"a" (0), "1" (
__FDSET_LONGS
), \

77 "2" ((
__kî√l_fd_£t
 *Ë(
fd£ç
)) : "memory"); \

78 } 0)

	)

	@/usr/include/asm-x86_64/errno.h

1 #i‚de‡
_X8664_ERRNO_H


2 
	#_X8664_ERRNO_H


	)

4 
	~<asm-gíîic/î∫o.h
>

	@/usr/include/asm-x86_64/posix_types.h

1 #i‚de‡
_ASM_X86_64_POSIX_TYPES_H


2 
	#_ASM_X86_64_POSIX_TYPES_H


	)

10 
	t__kî√l_öo_t
;

11 
	t__kî√l_mode_t
;

12 
	t__kî√l_∆ök_t
;

13 
	t__kî√l_off_t
;

14 
	t__kî√l_pid_t
;

15 
	t__kî√l_ùc_pid_t
;

16 
	t__kî√l_uid_t
;

17 
	t__kî√l_gid_t
;

18 
	t__kî√l_size_t
;

19 
	t__kî√l_ssize_t
;

20 
	t__kî√l_±rdiff_t
;

21 
	t__kî√l_time_t
;

22 
	t__kî√l_su£c⁄ds_t
;

23 
	t__kî√l_˛ock_t
;

24 
	t__kî√l_timî_t
;

25 
	t__kî√l_˛ockid_t
;

26 
	t__kî√l_daddr_t
;

27 * 
	t__kî√l_ˇddr_t
;

28 
	t__kî√l_uid16_t
;

29 
	t__kî√l_gid16_t
;

31 #ifde‡
__GNUC__


32 
	t__kî√l_loff_t
;

36 
	mvÆ
[2];

37 } 
	t__kî√l_fsid_t
;

39 
	t__kî√l_ﬁd_uid_t
;

40 
	t__kî√l_ﬁd_gid_t
;

41 
__kî√l_uid_t
 
	t__kî√l_uid32_t
;

42 
__kî√l_gid_t
 
	t__kî√l_gid32_t
;

44 
	t__kî√l_ﬁd_dev_t
;

	@/usr/include/asm/ioctl.h

2 #i‚de‡
__ASM_STUB_IOCTL_H


3 
	#__ASM_STUB_IOCTL_H


	)

4 #i‡
deföed
 
__x86_64__


5 
	~<asm-x86_64/io˘l.h
>

6 #ñi‡
deföed
 
__i386__


7 
	~<asm-i386/io˘l.h
>

9 #w¨nög 
This
 
machöe
 
≠≥¨s
 
to
 
be
 
√ôhî
 
x86_64
 
n‹
 
i386
.

	@/usr/include/asm/sockios.h

2 #i‚de‡
__ASM_STUB_SOCKIOS_H


3 
	#__ASM_STUB_SOCKIOS_H


	)

4 #i‡
deföed
 
__x86_64__


5 
	~<asm-x86_64/sockios.h
>

6 #ñi‡
deföed
 
__i386__


7 
	~<asm-i386/sockios.h
>

9 #w¨nög 
This
 
machöe
 
≠≥¨s
 
to
 
be
 
√ôhî
 
x86_64
 
n‹
 
i386
.

	@/usr/include/bits/wchar-ldbl.h

20 #i‚de‡
_WCHAR_H


24 #i‡
deföed
 
__USE_ISOC99
 || deföed 
__USE_UNIX98


25 
__BEGIN_NAMESPACE_C99


26 
__LDBL_REDIR_DECL
 (
fw¥ötf
);

27 
__LDBL_REDIR_DECL
 (
w¥ötf
);

28 
__LDBL_REDIR_DECL
 (
sw¥ötf
);

29 
__LDBL_REDIR_DECL
 (
vfw¥ötf
);

30 
__LDBL_REDIR_DECL
 (
vw¥ötf
);

31 
__LDBL_REDIR_DECL
 (
vsw¥ötf
);

32 
__LDBL_REDIR_DECL
 (
fwsˇnf
);

33 
__LDBL_REDIR_DECL
 (
wsˇnf
);

34 
__LDBL_REDIR_DECL
 (
swsˇnf
);

35 
	g__END_NAMESPACE_C99


38 #ifde‡
__USE_ISOC99


39 
__BEGIN_NAMESPACE_C99


40 
__LDBL_REDIR1_DECL
 (
wc°ﬁd
, 
wc°od
);

41 
__LDBL_REDIR_DECL
 (
vfwsˇnf
);

42 
__LDBL_REDIR_DECL
 (
vwsˇnf
);

43 
__LDBL_REDIR_DECL
 (
vswsˇnf
);

44 
	g__END_NAMESPACE_C99


47 #ifde‡
__USE_GNU


48 
__LDBL_REDIR1_DECL
 (
wc°ﬁd_l
, 
wc°od_l
);

51 
__LDBL_REDIR1_DECL
 (
__wc°ﬁd_öã∫Æ
, 
__wc°od_öã∫Æ
);

53 #i‡
__USE_FORTIFY_LEVEL
 > 0 && !
deföed
 
__˝lu•lus


54 
	$__LDBL_REDIR_DECL
 (
__sw¥ötf_chk
)

55 
	$__LDBL_REDIR_DECL
 (
__vsw¥ötf_chk
)

56 #i‡
__USE_FORTIFY_LEVEL
 > 1

57 
	$__LDBL_REDIR_DECL
 (
__fw¥ötf_chk
)

58 
	$__LDBL_REDIR_DECL
 (
__w¥ötf_chk
)

59 
	$__LDBL_REDIR_DECL
 (
__vfw¥ötf_chk
)

60 
	$__LDBL_REDIR_DECL
 (
__vw¥ötf_chk
)

	@/usr/include/bits/wchar2.h

20 #i‚de‡
_WCHAR_H


25 
wch¨_t
 *
	$__wmem˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

26 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
,

27 
size_t
 
__ns1
Ë
__THROW
;

28 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmem˝y_Æüs
,

29 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

30 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
),

31 
wmem˝y
);

33 
__exã∫_Æways_ölöe
 
wch¨_t
 *

34 
	`__NTH
 (
	$wmem˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
, 
__c⁄°
 wch¨_à*__ª°ri˘ 
__s2
,

35 
size_t
 
__n
))

37 i‡(
	`__bos0
 (
__s1
Ë!(
size_t
) -1)

38  
	`__wmem˝y_chk
 (
__s1
, 
__s2
, 
__n
, 
	`__bos0
 (__s1Ë/  (
wch¨_t
));

39  
	`__wmem˝y_Æüs
 (
__s1
, 
__s2
, 
__n
);

40 
	}
}

43 
wch¨_t
 *
	$__wmemmove_chk
 (
wch¨_t
 *
__s1
, 
__c⁄°
 wch¨_à*
__s2
,

44 
size_t
 
__n
, size_à
__ns1
Ë
__THROW
;

45 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmemmove_Æüs
, (wch¨_à*
__s1
,

46 
__c⁄°
 
wch¨_t
 *
__s2
,

47 
size_t
 
__n
), 
wmemmove
);

49 
__exã∫_Æways_ölöe
 
wch¨_t
 *

50 
	`__NTH
 (
	$wmemmove
 (
wch¨_t
 *
__ª°ri˘
 
__s1
, 
__c⁄°
 wch¨_à*__ª°ri˘ 
__s2
,

51 
size_t
 
__n
))

53 i‡(
	`__bos0
 (
__s1
Ë!(
size_t
) -1)

54  
	`__wmemmove_chk
 (
__s1
, 
__s2
, 
__n
, 
	`__bos0
 (__s1Ë/  (
wch¨_t
));

55  
	`__wmemmove_Æüs
 (
__s1
, 
__s2
, 
__n
);

56 
	}
}

59 #ifde‡
__USE_GNU


60 
wch¨_t
 *
	$__wmemp˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

61 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
,

62 
size_t
 
__ns1
Ë
__THROW
;

63 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmemp˝y_Æüs
,

64 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

65 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s2
,

66 
size_t
 
__n
), 
wmemp˝y
);

68 
__exã∫_Æways_ölöe
 
wch¨_t
 *

69 
	`__NTH
 (
	$wmemp˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
, 
__c⁄°
 wch¨_à*__ª°ri˘ 
__s2
,

70 
size_t
 
__n
))

72 i‡(
	`__bos0
 (
__s1
Ë!(
size_t
) -1)

73  
	`__wmemp˝y_chk
 (
__s1
, 
__s2
, 
__n
, 
	`__bos0
 (__s1Ë/  (
wch¨_t
));

74  
	`__wmemp˝y_Æüs
 (
__s1
, 
__s2
, 
__n
);

75 
	}
}

79 
wch¨_t
 *
	$__wmem£t_chk
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
,

80 
size_t
 
__ns
Ë
__THROW
;

81 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wmem£t_Æüs
, (wch¨_à*
__s
, wch¨_à
__c
,

82 
size_t
 
__n
), 
wmem£t
);

84 
__exã∫_Æways_ölöe
 
wch¨_t
 *

85 
	`__NTH
 (
	$wmem£t
 (
wch¨_t
 *
__ª°ri˘
 
__s
, wch¨_à
__c
, 
size_t
 
__n
))

87 i‡(
	`__bos0
 (
__s
Ë!(
size_t
) -1)

88  
	`__wmem£t_chk
 (
__s
, 
__c
, 
__n
, 
	`__bos0
 (__sË/  (
wch¨_t
));

89  
	`__wmem£t_Æüs
 (
__s
, 
__c
, 
__n
);

90 
	}
}

93 
wch¨_t
 *
	$__wcs˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

94 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
,

95 
size_t
 
__n
Ë
__THROW
;

96 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wcs˝y_Æüs
,

97 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

98 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
), 
wcs˝y
);

100 
__exã∫_Æways_ölöe
 
wch¨_t
 *

101 
	`__NTH
 (
	$wcs˝y
 (
wch¨_t
 *
__de°
, 
__c⁄°
 wch¨_à*
__§c
))

103 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

104  
	`__wcs˝y_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__de°Ë/  (
wch¨_t
));

105  
	`__wcs˝y_Æüs
 (
__de°
, 
__§c
);

106 
	}
}

109 
wch¨_t
 *
	$__w˝˝y_chk
 (
wch¨_t
 *
__de°
, 
__c⁄°
 wch¨_à*
__§c
,

110 
size_t
 
__de°Àn
Ë
__THROW
;

111 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__w˝˝y_Æüs
, (wch¨_à*
__de°
,

112 
__c⁄°
 
wch¨_t
 *
__§c
),

113 
w˝˝y
);

115 
__exã∫_Æways_ölöe
 
wch¨_t
 *

116 
	`__NTH
 (
	$w˝˝y
 (
wch¨_t
 *
__de°
, 
__c⁄°
 wch¨_à*
__§c
))

118 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

119  
	`__w˝˝y_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__de°Ë/  (
wch¨_t
));

120  
	`__w˝˝y_Æüs
 (
__de°
, 
__§c
);

121 
	}
}

124 
wch¨_t
 *
	$__wc¢˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

125 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
,

126 
size_t
 
__de°Àn
Ë
__THROW
;

127 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wc¢˝y_Æüs
,

128 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

129 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
,

130 
size_t
 
__n
), 
wc¢˝y
);

132 
__exã∫_Æways_ölöe
 
wch¨_t
 *

133 
	`__NTH
 (
	$wc¢˝y
 (
wch¨_t
 *
__de°
, 
__c⁄°
 wch¨_à*
__§c
, 
size_t
 
__n
))

135 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1

136 && (!
	`__buûtö_c⁄°™t_p
 (
__n
Ë|| 
	`__bos
 (
__de°
) >= __n))

137  
	`__wc¢˝y_chk
 (
__de°
, 
__§c
, 
__n
,

138 
	`__bos
 (
__de°
Ë/  (
wch¨_t
));

139  
	`__wc¢˝y_Æüs
 (
__de°
, 
__§c
, 
__n
);

140 
	}
}

143 
wch¨_t
 *
	$__w˝n˝y_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

144 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
,

145 
size_t
 
__de°Àn
Ë
__THROW
;

146 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__w˝n˝y_Æüs
,

147 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

148 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
,

149 
size_t
 
__n
), 
w˝n˝y
);

151 
__exã∫_Æways_ölöe
 
wch¨_t
 *

152 
	`__NTH
 (
	$w˝n˝y
 (
wch¨_t
 *
__de°
, 
__c⁄°
 wch¨_à*
__§c
, 
size_t
 
__n
))

154 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1

155 && (!
	`__buûtö_c⁄°™t_p
 (
__n
Ë|| 
	`__bos
 (
__de°
) >= __n))

156  
	`__w˝n˝y_chk
 (
__de°
, 
__§c
, 
__n
,

157 
	`__bos
 (
__de°
Ë/  (
wch¨_t
));

158  
	`__w˝n˝y_Æüs
 (
__de°
, 
__§c
, 
__n
);

159 
	}
}

162 
wch¨_t
 *
	$__wcsˇt_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

163 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
,

164 
size_t
 
__de°Àn
Ë
__THROW
;

165 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wcsˇt_Æüs
,

166 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

167 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
), 
wcsˇt
);

169 
__exã∫_Æways_ölöe
 
wch¨_t
 *

170 
	`__NTH
 (
	$wcsˇt
 (
wch¨_t
 *
__de°
, 
__c⁄°
 wch¨_à*
__§c
))

172 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

173  
	`__wcsˇt_chk
 (
__de°
, 
__§c
, 
	`__bos
 (__de°Ë/  (
wch¨_t
));

174  
	`__wcsˇt_Æüs
 (
__de°
, 
__§c
);

175 
	}
}

178 
wch¨_t
 *
	$__wc¢ˇt_chk
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

179 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
,

180 
size_t
 
__n
, size_à
__de°Àn
Ë
__THROW
;

181 
wch¨_t
 *
	`__REDIRECT_NTH
 (
__wc¢ˇt_Æüs
,

182 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

183 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
,

184 
size_t
 
__n
), 
wc¢ˇt
);

186 
__exã∫_Æways_ölöe
 
wch¨_t
 *

187 
	`__NTH
 (
	$wc¢ˇt
 (
wch¨_t
 *
__de°
, 
__c⁄°
 wch¨_à*
__§c
, 
size_t
 
__n
))

189 i‡(
	`__bos
 (
__de°
Ë!(
size_t
) -1)

190  
	`__wc¢ˇt_chk
 (
__de°
, 
__§c
, 
__n
,

191 
	`__bos
 (
__de°
Ë/  (
wch¨_t
));

192  
	`__wc¢ˇt_Æüs
 (
__de°
, 
__§c
, 
__n
);

193 
	}
}

196 
	$__sw¥ötf_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

197 
__Êag
, 
size_t
 
__s_Àn
,

198 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

199 
__THROW
 ;

202 
	#sw¥ötf
(
s
, 
n
, ...) \

203 (
	`__bos
 (
s
Ë!(
size_t
Ë-1 || 
__USE_FORTIFY_LEVEL
 > 1 \

204 ? 
	`__sw¥ötf_chk
 (
s
, 
n
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (s), 
__VA_ARGS__
) \

205 : 
	`sw¥ötf
 (
s
, 
n
, 
__VA_ARGS__
))

	)

208 
	$__vsw¥ötf_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

209 
__Êag
, 
size_t
 
__s_Àn
,

210 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

211 
__gnuc_va_li°
 
__¨g
)

212 
__THROW
 ;

214 
	#vsw¥ötf
(
s
, 
n
, 
fmt
, 
≠
) \

215 (
	`__bos
 (
s
Ë!(
size_t
Ë-1 || 
__USE_FORTIFY_LEVEL
 > 1 \

216 ? 
	`__vsw¥ötf_chk
 (
s
, 
n
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (s), 
fmt
, 
≠
) \

217 : 
	`vsw¥ötf
 (
s
, 
n
, 
fmt
, 
≠
))

	)

220 #i‡
__USE_FORTIFY_LEVEL
 > 1

222 
	`__fw¥ötf_chk
 (
__FILE
 *
__ª°ri˘
 
__°ªam
, 
__Êag
,

223 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

224 
	`__w¥ötf_chk
 (
__Êag
, 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

226 
	`__vfw¥ötf_chk
 (
__FILE
 *
__ª°ri˘
 
__°ªam
, 
__Êag
,

227 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

228 
__gnuc_va_li°
 
__≠
);

229 
	`__vw¥ötf_chk
 (
__Êag
, 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

230 
__gnuc_va_li°
 
__≠
);

232 
	#w¥ötf
(...) \

233 
	`__w¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

234 
	#fw¥ötf
(
°ªam
, ...) \

235 
	`__fw¥ötf_chk
 (
°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

236 
	#vw¥ötf
(
f‹m©
, 
≠
) \

237 
	`__vw¥ötf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
f‹m©
, 
≠
)

	)

238 
	#vfw¥ötf
(
°ªam
, 
f‹m©
, 
≠
) \

239 
	`__vfw¥ötf_chk
 (
°ªam
, 
__USE_FORTIFY_LEVEL
 - 1, 
f‹m©
, 
≠
)

	)

243 
wch¨_t
 *
	$__fgëws_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__size
, 
__n
,

244 
__FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

245 
wch¨_t
 *
	`__REDIRECT
 (
__fgëws_Æüs
,

246 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
__n
,

247 
__FILE
 *
__ª°ri˘
 
__°ªam
), 
fgëws
Ë
__wur
;

249 
__exã∫_Æways_ölöe
 
__wur
 
wch¨_t
 *

250 
	$fgëws
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
__n
, 
__FILE
 *__ª°ri˘ 
__°ªam
)

252 i‡(
	`__bos
 (
__s
Ë!(
size_t
) -1

253 && (!
	`__buûtö_c⁄°™t_p
 (
__n
Ë|| (
size_t
Ë__¿> 
	`__bos
 (
__s
)))

254  
	`__fgëws_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__°ªam
);

255  
	`__fgëws_Æüs
 (
__s
, 
__n
, 
__°ªam
);

256 
	}
}

258 #ifde‡
__USE_GNU


259 
wch¨_t
 *
	$__fgëws_u∆ocked_chk
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__size
,

260 
__n
, 
__FILE
 *
__ª°ri˘
 
__°ªam
)

261 
__wur
;

262 
wch¨_t
 *
	`__REDIRECT
 (
__fgëws_u∆ocked_Æüs
,

263 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
__n
,

264 
__FILE
 *
__ª°ri˘
 
__°ªam
), 
fgëws_u∆ocked
)

265 
__wur
;

267 
__exã∫_Æways_ölöe
 
__wur
 
wch¨_t
 *

268 
	$fgëws_u∆ocked
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
__n
, 
__FILE
 *__ª°ri˘ 
__°ªam
)

270 i‡(
	`__bos
 (
__s
Ë!(
size_t
) -1

271 && (!
	`__buûtö_c⁄°™t_p
 (
__n
Ë|| (
size_t
Ë__¿> 
	`__bos
 (
__s
)))

272  
	`__fgëws_u∆ocked_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__°ªam
);

273  
	`__fgëws_u∆ocked_Æüs
 (
__s
, 
__n
, 
__°ªam
);

274 
	}
}

278 
size_t
 
	$__w¸tomb_chk
 (*
__s
, 
wch¨_t
 
__wch¨
, 
mb°©e_t
 *
__p
,

279 
size_t
 
__buÊí
Ë
__THROW
 
__wur
;

280 
size_t
 
	`__REDIRECT_NTH
 (
__w¸tomb_Æüs
,

281 (*
__ª°ri˘
 
__s
, 
wch¨_t
 
__wch¨
,

282 
mb°©e_t
 *
__ª°ri˘
 
__ps
), 
w¸tomb
Ë
__wur
;

284 
__exã∫_Æways_ölöe
 
__wur
 
size_t


285 
	`__NTH
 (
	$w¸tomb
 (*
__s
, 
wch¨_t
 
__wch¨
, 
mb°©e_t
 *
__ps
))

290 
	#__WCHAR_MB_LEN_MAX
 16

	)

291 #i‡
deföed
 
MB_LEN_MAX
 && MB_LEN_MAX !
__WCHAR_MB_LEN_MAX


294 i‡(
	`__bos
 (
__s
Ë!(
size_t
Ë-1 && 
__WCHAR_MB_LEN_MAX
 > __bos (__s))

295  
	`__w¸tomb_chk
 (
__s
, 
__wch¨
, 
__ps
, 
	`__bos
 (__s));

296  
	`__w¸tomb_Æüs
 (
__s
, 
__wch¨
, 
__ps
);

297 
	}
}

300 
size_t
 
	$__mb§towcs_chk
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

301 
__c⁄°
 **
__ª°ri˘
 
__§c
,

302 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

303 
size_t
 
__d°Àn
Ë
__THROW
;

304 
size_t
 
	`__REDIRECT_NTH
 (
__mb§towcs_Æüs
,

305 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

306 
__c⁄°
 **
__ª°ri˘
 
__§c
,

307 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
),

308 
mb§towcs
);

310 
__exã∫_Æways_ölöe
 
size_t


311 
	`__NTH
 (
	$mb§towcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
, 
__c⁄°
 **__ª°ri˘ 
__§c
,

312 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

314 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1

315 && (!
	`__buûtö_c⁄°™t_p
 (
__Àn
)

316 || 
__Àn
 > 
	`__bos
 (
__d°
Ë/  (
wch¨_t
)))

317  
	`__mb§towcs_chk
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
,

318 
	`__bos
 (
__d°
Ë/  (
wch¨_t
));

319  
	`__mb§towcs_Æüs
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
);

320 
	}
}

323 
size_t
 
	$__wc§tombs_chk
 (*
__ª°ri˘
 
__d°
,

324 
__c⁄°
 
wch¨_t
 **
__ª°ri˘
 
__§c
,

325 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

326 
size_t
 
__d°Àn
Ë
__THROW
;

327 
size_t
 
	`__REDIRECT_NTH
 (
__wc§tombs_Æüs
,

328 (*
__ª°ri˘
 
__d°
,

329 
__c⁄°
 
wch¨_t
 **
__ª°ri˘
 
__§c
,

330 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
),

331 
wc§tombs
);

333 
__exã∫_Æways_ölöe
 
size_t


334 
	`__NTH
 (
	$wc§tombs
 (*
__ª°ri˘
 
__d°
, 
__c⁄°
 
wch¨_t
 **__ª°ri˘ 
__§c
,

335 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

337 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1

338 && (!
	`__buûtö_c⁄°™t_p
 (
__Àn
Ë|| __À¿> 
	`__bos
 (
__d°
)))

339  
	`__wc§tombs_chk
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
, 
	`__bos
 (__dst));

340  
	`__wc§tombs_Æüs
 (
__d°
, 
__§c
, 
__Àn
, 
__ps
);

341 
	}
}

344 #ifde‡
__USE_GNU


345 
size_t
 
	$__mb¢πowcs_chk
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

346 
__c⁄°
 **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

347 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
,

348 
size_t
 
__d°Àn
Ë
__THROW
;

349 
size_t
 
	`__REDIRECT_NTH
 (
__mb¢πowcs_Æüs
,

350 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

351 
__c⁄°
 **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

352 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
),

353 
mb¢πowcs
);

355 
__exã∫_Æways_ölöe
 
size_t


356 
	`__NTH
 (
	$mb¢πowcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
, 
__c⁄°
 **__ª°ri˘ 
__§c
,

357 
size_t
 
__nmc
, size_à
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

359 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1

360 && (!
	`__buûtö_c⁄°™t_p
 (
__Àn
)

361 || 
__Àn
 > 
	`__bos
 (
__d°
Ë/  (
wch¨_t
)))

362  
	`__mb¢πowcs_chk
 (
__d°
, 
__§c
, 
__nmc
, 
__Àn
, 
__ps
,

363 
	`__bos
 (
__d°
Ë/  (
wch¨_t
));

364  
	`__mb¢πowcs_Æüs
 (
__d°
, 
__§c
, 
__nmc
, 
__Àn
, 
__ps
);

365 
	}
}

368 
size_t
 
	$__wc¢πombs_chk
 (*
__ª°ri˘
 
__d°
,

369 
__c⁄°
 
wch¨_t
 **
__ª°ri˘
 
__§c
,

370 
size_t
 
__nwc
, size_à
__Àn
,

371 
mb°©e_t
 *
__ª°ri˘
 
__ps
, 
size_t
 
__d°Àn
)

372 
__THROW
;

373 
size_t
 
	`__REDIRECT_NTH
 (
__wc¢πombs_Æüs
,

374 (*
__ª°ri˘
 
__d°
,

375 
__c⁄°
 
wch¨_t
 **
__ª°ri˘
 
__§c
,

376 
size_t
 
__nwc
, size_à
__Àn
,

377 
mb°©e_t
 *
__ª°ri˘
 
__ps
), 
wc¢πombs
);

379 
__exã∫_Æways_ölöe
 
size_t


380 
	`__NTH
 (
	$wc¢πombs
 (*
__ª°ri˘
 
__d°
, 
__c⁄°
 
wch¨_t
 **__ª°ri˘ 
__§c
,

381 
size_t
 
__nwc
, size_à
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

383 i‡(
	`__bos
 (
__d°
Ë!(
size_t
) -1

384 && (!
	`__buûtö_c⁄°™t_p
 (
__Àn
Ë|| __À¿> 
	`__bos
 (
__d°
)))

385  
	`__wc¢πombs_chk
 (
__d°
, 
__§c
, 
__nwc
, 
__Àn
, 
__ps
, 
	`__bos
 (__dst));

386  
	`__wc¢πombs_Æüs
 (
__d°
, 
__§c
, 
__nwc
, 
__Àn
, 
__ps
);

387 
	}
}

	@/usr/include/wctype.h

24 #i‚de‡
_WCTYPE_H


26 
	~<„©uªs.h
>

27 
	~<bôs/ty≥s.h
>

29 #i‚de‡
__√ed_iswxxx


30 
	#_WCTYPE_H
 1

	)

34 
	#__√ed_wöt_t


	)

35 
	~<°ddef.h
>

36 #i‚de‡
_WINT_T


41 
	#_WINT_T


	)

42 
	twöt_t
;

44 #ifde‡
__USE_ISOC99


45 
	$__USING_NAMESPACE_C99
(
wöt_t
)

51 #i‚de‡
WEOF


52 
	#WEOF
 (0xffffffffu)

	)

55 #unde‡
__√ed_iswxxx


60 #i‚de‡
__iswxxx_deföed


61 
	#__iswxxx_deföed
 1

	)

63 
__BEGIN_NAMESPACE_C99


66 
	tw˘y≥_t
;

67 
__END_NAMESPACE_C99


69 #i‚de‡
_ISwbô


74 
	~<ídün.h
>

75 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


76 
	#_ISwbô
(
bô
Ë(1 << (bô))

	)

78 
	#_ISwbô
(
bô
) \

79 ((
bô
) < 8 ? () ((1UL << (bit)) << 24) \

80 : ((
bô
) < 16 ? () ((1UL << (bit)) << 8) \

81 : ((
bô
) < 24 ? () ((1UL << (bit)) >> 8) \

82 : (Ë((1UL << (
bô
)Ë>> 24))))

	)

87 
__ISwuµî
 = 0,

88 
__ISwlowî
 = 1,

89 
__ISwÆpha
 = 2,

90 
__ISwdigô
 = 3,

91 
__ISwxdigô
 = 4,

92 
__ISw•a˚
 = 5,

93 
__ISw¥öt
 = 6,

94 
__ISwgøph
 = 7,

95 
__ISwbœnk
 = 8,

96 
__ISw˙ål
 = 9,

97 
__ISwpun˘
 = 10,

98 
__ISwÆnum
 = 11,

100 
_ISwuµî
 = 
	`_ISwbô
 (
__ISwuµî
),

101 
_ISwlowî
 = 
	`_ISwbô
 (
__ISwlowî
),

102 
_ISwÆpha
 = 
	`_ISwbô
 (
__ISwÆpha
),

103 
_ISwdigô
 = 
	`_ISwbô
 (
__ISwdigô
),

104 
_ISwxdigô
 = 
	`_ISwbô
 (
__ISwxdigô
),

105 
_ISw•a˚
 = 
	`_ISwbô
 (
__ISw•a˚
),

106 
_ISw¥öt
 = 
	`_ISwbô
 (
__ISw¥öt
),

107 
_ISwgøph
 = 
	`_ISwbô
 (
__ISwgøph
),

108 
_ISwbœnk
 = 
	`_ISwbô
 (
__ISwbœnk
),

109 
_ISw˙ål
 = 
	`_ISwbô
 (
__ISw˙ål
),

110 
_ISwpun˘
 = 
	`_ISwbô
 (
__ISwpun˘
),

111 
_ISwÆnum
 = 
	`_ISwbô
 (
__ISwÆnum
)

116 
__BEGIN_DECLS


118 
__BEGIN_NAMESPACE_C99


125 
	$iswÆnum
 (
wöt_t
 
__wc
Ë
__THROW
;

131 
	$iswÆpha
 (
wöt_t
 
__wc
Ë
__THROW
;

134 
	$isw˙ål
 (
wöt_t
 
__wc
Ë
__THROW
;

138 
	$iswdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

142 
	$iswgøph
 (
wöt_t
 
__wc
Ë
__THROW
;

147 
	$iswlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

150 
	$isw¥öt
 (
wöt_t
 
__wc
Ë
__THROW
;

155 
	$iswpun˘
 (
wöt_t
 
__wc
Ë
__THROW
;

160 
	$isw•a˚
 (
wöt_t
 
__wc
Ë
__THROW
;

165 
	$iswuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

170 
	$iswxdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

175 #ifde‡
__USE_ISOC99


176 
	$iswbœnk
 (
wöt_t
 
__wc
Ë
__THROW
;

185 
w˘y≥_t
 
	$w˘y≥
 (
__c⁄°
 *
__¥›îty
Ë
__THROW
;

189 
	$isw˘y≥
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
Ë
__THROW
;

190 
__END_NAMESPACE_C99


197 
__BEGIN_NAMESPACE_C99


200 
__c⁄°
 
	t__öt32_t
 *
	tw˘øns_t
;

201 
__END_NAMESPACE_C99


202 #ifde‡
__USE_GNU


203 
	$__USING_NAMESPACE_C99
(
w˘øns_t
)

206 
__BEGIN_NAMESPACE_C99


208 
wöt_t
 
	$towlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

211 
wöt_t
 
	$towuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

212 
__END_NAMESPACE_C99


214 
__END_DECLS


221 #ifde‡
_WCTYPE_H


227 
__BEGIN_DECLS


229 
__BEGIN_NAMESPACE_C99


232 
w˘øns_t
 
	$w˘øns
 (
__c⁄°
 *
__¥›îty
Ë
__THROW
;

235 
wöt_t
 
	$tow˘øns
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
Ë
__THROW
;

236 
__END_NAMESPACE_C99


238 #ifde‡
__USE_GNU


240 
	~<xloˇÀ.h
>

244 
	$iswÆnum_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

250 
	$iswÆpha_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

253 
	$isw˙ål_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

257 
	$iswdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

261 
	$iswgøph_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

266 
	$iswlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

269 
	$isw¥öt_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

274 
	$iswpun˘_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

279 
	$isw•a˚_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

284 
	$iswuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

289 
	$iswxdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

294 
	$iswbœnk_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

298 
w˘y≥_t
 
	$w˘y≥_l
 (
__c⁄°
 *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

299 
__THROW
;

303 
	$isw˘y≥_l
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
, 
__loˇÀ_t
 
__loˇÀ
)

304 
__THROW
;

312 
wöt_t
 
	$towlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

315 
wöt_t
 
	$towuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

319 
w˘øns_t
 
	$w˘øns_l
 (
__c⁄°
 *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

320 
__THROW
;

323 
wöt_t
 
	$tow˘øns_l
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
,

324 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

328 
__END_DECLS


	@/usr/include/asm-generic/errno.h

1 #i‚de‡
_ASM_GENERIC_ERRNO_H


2 
	#_ASM_GENERIC_ERRNO_H


	)

4 
	~<asm-gíîic/î∫o-ba£.h
>

6 
	#EDEADLK
 35

	)

7 
	#ENAMETOOLONG
 36

	)

8 
	#ENOLCK
 37

	)

9 
	#ENOSYS
 38

	)

10 
	#ENOTEMPTY
 39

	)

11 
	#ELOOP
 40

	)

12 
	#EWOULDBLOCK
 
EAGAIN


	)

13 
	#ENOMSG
 42

	)

14 
	#EIDRM
 43

	)

15 
	#ECHRNG
 44

	)

16 
	#EL2NSYNC
 45

	)

17 
	#EL3HLT
 46

	)

18 
	#EL3RST
 47

	)

19 
	#ELNRNG
 48

	)

20 
	#EUNATCH
 49

	)

21 
	#ENOCSI
 50

	)

22 
	#EL2HLT
 51

	)

23 
	#EBADE
 52

	)

24 
	#EBADR
 53

	)

25 
	#EXFULL
 54

	)

26 
	#ENOANO
 55

	)

27 
	#EBADRQC
 56

	)

28 
	#EBADSLT
 57

	)

30 
	#EDEADLOCK
 
EDEADLK


	)

32 
	#EBFONT
 59

	)

33 
	#ENOSTR
 60

	)

34 
	#ENODATA
 61

	)

35 
	#ETIME
 62

	)

36 
	#ENOSR
 63

	)

37 
	#ENONET
 64

	)

38 
	#ENOPKG
 65

	)

39 
	#EREMOTE
 66

	)

40 
	#ENOLINK
 67

	)

41 
	#EADV
 68

	)

42 
	#ESRMNT
 69

	)

43 
	#ECOMM
 70

	)

44 
	#EPROTO
 71

	)

45 
	#EMULTIHOP
 72

	)

46 
	#EDOTDOT
 73

	)

47 
	#EBADMSG
 74

	)

48 
	#EOVERFLOW
 75

	)

49 
	#ENOTUNIQ
 76

	)

50 
	#EBADFD
 77

	)

51 
	#EREMCHG
 78

	)

52 
	#ELIBACC
 79

	)

53 
	#ELIBBAD
 80

	)

54 
	#ELIBSCN
 81

	)

55 
	#ELIBMAX
 82

	)

56 
	#ELIBEXEC
 83

	)

57 
	#EILSEQ
 84

	)

58 
	#ERESTART
 85

	)

59 
	#ESTRPIPE
 86

	)

60 
	#EUSERS
 87

	)

61 
	#ENOTSOCK
 88

	)

62 
	#EDESTADDRREQ
 89

	)

63 
	#EMSGSIZE
 90

	)

64 
	#EPROTOTYPE
 91

	)

65 
	#ENOPROTOOPT
 92

	)

66 
	#EPROTONOSUPPORT
 93

	)

67 
	#ESOCKTNOSUPPORT
 94

	)

68 
	#EOPNOTSUPP
 95

	)

69 
	#EPFNOSUPPORT
 96

	)

70 
	#EAFNOSUPPORT
 97

	)

71 
	#EADDRINUSE
 98

	)

72 
	#EADDRNOTAVAIL
 99

	)

73 
	#ENETDOWN
 100

	)

74 
	#ENETUNREACH
 101

	)

75 
	#ENETRESET
 102

	)

76 
	#ECONNABORTED
 103

	)

77 
	#ECONNRESET
 104

	)

78 
	#ENOBUFS
 105

	)

79 
	#EISCONN
 106

	)

80 
	#ENOTCONN
 107

	)

81 
	#ESHUTDOWN
 108

	)

82 
	#ETOOMANYREFS
 109

	)

83 
	#ETIMEDOUT
 110

	)

84 
	#ECONNREFUSED
 111

	)

85 
	#EHOSTDOWN
 112

	)

86 
	#EHOSTUNREACH
 113

	)

87 
	#EALREADY
 114

	)

88 
	#EINPROGRESS
 115

	)

89 
	#ESTALE
 116

	)

90 
	#EUCLEAN
 117

	)

91 
	#ENOTNAM
 118

	)

92 
	#ENAVAIL
 119

	)

93 
	#EISNAM
 120

	)

94 
	#EREMOTEIO
 121

	)

95 
	#EDQUOT
 122

	)

97 
	#ENOMEDIUM
 123

	)

98 
	#EMEDIUMTYPE
 124

	)

99 
	#ECANCELED
 125

	)

100 
	#ENOKEY
 126

	)

101 
	#EKEYEXPIRED
 127

	)

102 
	#EKEYREVOKED
 128

	)

103 
	#EKEYREJECTED
 129

	)

106 
	#EOWNERDEAD
 130

	)

107 
	#ENOTRECOVERABLE
 131

	)

	@/usr/include/asm-i386/ioctl.h

1 
	~<asm-gíîic/io˘l.h
>

	@/usr/include/asm-i386/sockios.h

1 #i‚de‡
__ARCH_I386_SOCKIOS__


2 
	#__ARCH_I386_SOCKIOS__


	)

5 
	#FIOSETOWN
 0x8901

	)

6 
	#SIOCSPGRP
 0x8902

	)

7 
	#FIOGETOWN
 0x8903

	)

8 
	#SIOCGPGRP
 0x8904

	)

9 
	#SIOCATMARK
 0x8905

	)

10 
	#SIOCGSTAMP
 0x8906

	)

11 
	#SIOCGSTAMPNS
 0x8907

	)

	@/usr/include/asm-x86_64/ioctl.h

1 
	~<asm-gíîic/io˘l.h
>

	@/usr/include/asm-x86_64/sockios.h

1 #i‚de‡
__ARCH_X8664_SOCKIOS__


2 
	#__ARCH_X8664_SOCKIOS__


	)

5 
	#FIOSETOWN
 0x8901

	)

6 
	#SIOCSPGRP
 0x8902

	)

7 
	#FIOGETOWN
 0x8903

	)

8 
	#SIOCGPGRP
 0x8904

	)

9 
	#SIOCATMARK
 0x8905

	)

10 
	#SIOCGSTAMP
 0x8906

	)

11 
	#SIOCGSTAMPNS
 0x8907

	)

	@/usr/include/asm-generic/errno-base.h

1 #i‚de‡
_ASM_GENERIC_ERRNO_BASE_H


2 
	#_ASM_GENERIC_ERRNO_BASE_H


	)

4 
	#EPERM
 1

	)

5 
	#ENOENT
 2

	)

6 
	#ESRCH
 3

	)

7 
	#EINTR
 4

	)

8 
	#EIO
 5

	)

9 
	#ENXIO
 6

	)

10 
	#E2BIG
 7

	)

11 
	#ENOEXEC
 8

	)

12 
	#EBADF
 9

	)

13 
	#ECHILD
 10

	)

14 
	#EAGAIN
 11

	)

15 
	#ENOMEM
 12

	)

16 
	#EACCES
 13

	)

17 
	#EFAULT
 14

	)

18 
	#ENOTBLK
 15

	)

19 
	#EBUSY
 16

	)

20 
	#EEXIST
 17

	)

21 
	#EXDEV
 18

	)

22 
	#ENODEV
 19

	)

23 
	#ENOTDIR
 20

	)

24 
	#EISDIR
 21

	)

25 
	#EINVAL
 22

	)

26 
	#ENFILE
 23

	)

27 
	#EMFILE
 24

	)

28 
	#ENOTTY
 25

	)

29 
	#ETXTBSY
 26

	)

30 
	#EFBIG
 27

	)

31 
	#ENOSPC
 28

	)

32 
	#ESPIPE
 29

	)

33 
	#EROFS
 30

	)

34 
	#EMLINK
 31

	)

35 
	#EPIPE
 32

	)

36 
	#EDOM
 33

	)

37 
	#ERANGE
 34

	)

	@/usr/include/asm-generic/ioctl.h

1 #i‚de‡
_ASM_GENERIC_IOCTL_H


2 
	#_ASM_GENERIC_IOCTL_H


	)

22 
	#_IOC_NRBITS
 8

	)

23 
	#_IOC_TYPEBITS
 8

	)

24 
	#_IOC_SIZEBITS
 14

	)

25 
	#_IOC_DIRBITS
 2

	)

27 
	#_IOC_NRMASK
 ((1 << 
_IOC_NRBITS
)-1)

	)

28 
	#_IOC_TYPEMASK
 ((1 << 
_IOC_TYPEBITS
)-1)

	)

29 
	#_IOC_SIZEMASK
 ((1 << 
_IOC_SIZEBITS
)-1)

	)

30 
	#_IOC_DIRMASK
 ((1 << 
_IOC_DIRBITS
)-1)

	)

32 
	#_IOC_NRSHIFT
 0

	)

33 
	#_IOC_TYPESHIFT
 (
_IOC_NRSHIFT
+
_IOC_NRBITS
)

	)

34 
	#_IOC_SIZESHIFT
 (
_IOC_TYPESHIFT
+
_IOC_TYPEBITS
)

	)

35 
	#_IOC_DIRSHIFT
 (
_IOC_SIZESHIFT
+
_IOC_SIZEBITS
)

	)

40 
	#_IOC_NONE
 0U

	)

41 
	#_IOC_WRITE
 1U

	)

42 
	#_IOC_READ
 2U

	)

44 
	#_IOC
(
dú
,
ty≥
,
ƒ
,
size
) \

45 (((
dú
Ë<< 
_IOC_DIRSHIFT
) | \

46 ((
ty≥
Ë<< 
_IOC_TYPESHIFT
) | \

47 ((
ƒ
Ë<< 
_IOC_NRSHIFT
) | \

48 ((
size
Ë<< 
_IOC_SIZESHIFT
))

	)

51 
__övÆid_size_¨gumít_f‹_IOC
;

52 
	#_IOC_TYPECHECK
(
t
) \

53 (((
t
) == (t[1]) && \

54 (
t
Ë< (1 << 
_IOC_SIZEBITS
)) ? \

55 (
t
Ë: 
__övÆid_size_¨gumít_f‹_IOC
)

	)

58 
	#_IO
(
ty≥
,
ƒ
Ë
	`_IOC
(
_IOC_NONE
,—y≥),“r),0)

	)

59 
	#_IOR
(
ty≥
,
ƒ
,
size
Ë
	`_IOC
(
_IOC_READ
,—y≥),“r),(
	`_IOC_TYPECHECK
(size)))

	)

60 
	#_IOW
(
ty≥
,
ƒ
,
size
Ë
	`_IOC
(
_IOC_WRITE
,—y≥),“r),(
	`_IOC_TYPECHECK
(size)))

	)

61 
	#_IOWR
(
ty≥
,
ƒ
,
size
Ë
	`_IOC
(
_IOC_READ
|
_IOC_WRITE
,—y≥),“r),(
	`_IOC_TYPECHECK
(size)))

	)

62 
	#_IOR_BAD
(
ty≥
,
ƒ
,
size
Ë
	`_IOC
(
_IOC_READ
,—y≥),“r),(size))

	)

63 
	#_IOW_BAD
(
ty≥
,
ƒ
,
size
Ë
	`_IOC
(
_IOC_WRITE
,—y≥),“r),(size))

	)

64 
	#_IOWR_BAD
(
ty≥
,
ƒ
,
size
Ë
	`_IOC
(
_IOC_READ
|
_IOC_WRITE
,—y≥),“r),(size))

	)

67 
	#_IOC_DIR
(
ƒ
Ë((“rË>> 
_IOC_DIRSHIFT
Ë& 
_IOC_DIRMASK
)

	)

68 
	#_IOC_TYPE
(
ƒ
Ë((“rË>> 
_IOC_TYPESHIFT
Ë& 
_IOC_TYPEMASK
)

	)

69 
	#_IOC_NR
(
ƒ
Ë((“rË>> 
_IOC_NRSHIFT
Ë& 
_IOC_NRMASK
)

	)

70 
	#_IOC_SIZE
(
ƒ
Ë((“rË>> 
_IOC_SIZESHIFT
Ë& 
_IOC_SIZEMASK
)

	)

74 
	#IOC_IN
 (
_IOC_WRITE
 << 
_IOC_DIRSHIFT
)

	)

75 
	#IOC_OUT
 (
_IOC_READ
 << 
_IOC_DIRSHIFT
)

	)

76 
	#IOC_INOUT
 ((
_IOC_WRITE
|
_IOC_READ
Ë<< 
_IOC_DIRSHIFT
)

	)

77 
	#IOCSIZE_MASK
 (
_IOC_SIZEMASK
 << 
_IOC_SIZESHIFT
)

	)

78 
	#IOCSIZE_SHIFT
 (
_IOC_SIZESHIFT
)

	)

	@
1
.
1
/usr/include
588
13397
contrib/GPL/tpcal/tpcal.c
contrib/GPL/tpcal/transform.c
contrib/GPL/tpcal/transform.h
contrib/ntimers.c
contrib/ntimers.h
contrib/speedtst/speed.c
demos/mwin/malpha.c
demos/mwin/mdemo.c
demos/mwin/mdemo.stretch.c
demos/mwin/mine.c
demos/mwin/mstretch.c
demos/mwin/mterm.c
demos/mwin/mtest.c
demos/mwin/mtest2.c
demos/mwin/muserfd.c
demos/nanowm/actions.c
demos/nanowm/clients.c
demos/nanowm/events.c
demos/nanowm/nanowm.c
demos/nanowm/nanowm.h
demos/nanowm/wlist.c
demos/nanox/arcdemo.c
demos/nanox/bmpdemo.c
demos/nanox/convpbm.c
demos/nanox/dashdemo.c
demos/nanox/demo.c
demos/nanox/demo2.c
demos/nanox/demo4.c
demos/nanox/demo5.c
demos/nanox/demo6.c
demos/nanox/fontdemo.c
demos/nanox/ftdemo.c
demos/nanox/getselection.c
demos/nanox/grabdemo.c
demos/nanox/info.c
demos/nanox/ipcclient.c
demos/nanox/ipcserver.c
demos/nanox/landmine.c
demos/nanox/launcher.c
demos/nanox/launcher.h
demos/nanox/logfont.c
demos/nanox/move.c
demos/nanox/npanel.c
demos/nanox/nsaver.c
demos/nanox/nsaver.h
demos/nanox/nterm.c
demos/nanox/ntetris.c
demos/nanox/ntetris.h
demos/nanox/nxcal.c
demos/nanox/nxclock.c
demos/nanox/nxev.c
demos/nanox/nxeyes.c
demos/nanox/nxeyes.h
demos/nanox/nxlsclients.c
demos/nanox/nxmag.c
demos/nanox/nxterm.c
demos/nanox/nxterm.h
demos/nanox/nxview.c
demos/nanox/oneshot.c
demos/nanox/pcfdemo.c
demos/nanox/periodic.c
demos/nanox/polydemo.c
demos/nanox/pressure.c
demos/nanox/rgndemo.c
demos/nanox/setportrait.c
demos/nanox/setselection.c
demos/nanox/slider.c
demos/nanox/snap_jpg.c
demos/nanox/snap_ppm.c
demos/nanox/t1demo.c
demos/nanox/tsdemo.c
demos/nanox/tux.c
demos/nanox/tuxmask.h
demos/nanox/wait.c
demos/nanox/world.c
demos/nbreaker/animate.c
demos/nbreaker/ball.c
demos/nbreaker/bat.c
demos/nbreaker/brick.c
demos/nbreaker/cheat.c
demos/nbreaker/draw.c
demos/nbreaker/dump.c
demos/nbreaker/event.c
demos/nbreaker/game.c
demos/nbreaker/init.c
demos/nbreaker/levels.c
demos/nbreaker/loader.c
demos/nbreaker/misc.c
demos/nbreaker/nbreaker.c
demos/nbreaker/nbreaker.h
demos/nbreaker/powers.c
demos/nbreaker/scores.c
demos/nbreaker/sprite.c
demos/nxkbd/keyctrl.c
demos/nxkbd/keynorm.c
demos/nxkbd/keynum.c
demos/nxkbd/keyshft.c
demos/nxkbd/nxkbd.c
demos/nxkbd/srvconn.c
demos/nxroach/nxroach.c
demos/nxroach/roachmap.h
demos/nxscribble/bitvector.c
demos/nxscribble/bitvector.h
demos/nxscribble/hre.h
demos/nxscribble/hre_api.c
demos/nxscribble/hre_api.h
demos/nxscribble/hre_api_internal.h
demos/nxscribble/hre_internal.h
demos/nxscribble/li_recognizer.c
demos/nxscribble/li_recognizer.h
demos/nxscribble/li_recognizer_internal.h
demos/nxscribble/matrix.c
demos/nxscribble/matrix.h
demos/nxscribble/nxscribble.c
demos/nxscribble/sc.c
demos/nxscribble/sc.h
demos/nxscribble/scrib.h
demos/nxscribble/scribwidget.c
demos/nxscribble/util.c
demos/nxscribble/util.h
demos/nxscribble/zdebug.h
demos/test/test.c
demos/tuxchess/board.c
demos/tuxchess/data.c
demos/tuxchess/data.h
demos/tuxchess/defs.h
demos/tuxchess/eval.c
demos/tuxchess/images.c
demos/tuxchess/main.c
demos/tuxchess/protos.h
demos/tuxchess/search.c
demos/vnc/include/rfbproto.h
demos/vnc/include/vncauth.h
demos/vnc/libvncauth/d3des.c
demos/vnc/libvncauth/d3des.h
demos/vnc/libvncauth/vncauth.c
demos/vnc/vncviewer/args.c
demos/vnc/vncviewer/listen.c
demos/vnc/vncviewer/nanox.c
demos/vnc/vncviewer/rfbproto.c
demos/vnc/vncviewer/sockets.c
demos/vnc/vncviewer/vncviewer.c
demos/vnc/vncviewer/vncviewer.h
drivers/SubRepl.h
drivers/asm.h
drivers/asmmsc.h
drivers/dynacal.c
drivers/elkplan4.c
drivers/elksutil.c
drivers/fb.c
drivers/fb.h
drivers/fblin1.c
drivers/fblin12.c
drivers/fblin16.c
drivers/fblin1rev.c
drivers/fblin2.c
drivers/fblin24.c
drivers/fblin2rev.c
drivers/fblin32.c
drivers/fblin32alpha.c
drivers/fblin4.c
drivers/fblin4hp.c
drivers/fblin4orion.c
drivers/fblin4rev.c
drivers/fblin4sa1100.c
drivers/fblin4sh3.c
drivers/fblin8.c
drivers/fbportrait_down.c
drivers/fbportrait_left.c
drivers/fbportrait_right.c
drivers/genfont.c
drivers/genfont.h
drivers/genmem.c
drivers/genmem.h
drivers/int10_pc.c
drivers/kbd_bios.c
drivers/kbd_djgr.c
drivers/kbd_fbsd.c
drivers/kbd_ipaq.c
drivers/kbd_lirc.c
drivers/kbd_null.c
drivers/kbd_pac.c
drivers/kbd_pipe.c
drivers/kbd_psp.c
drivers/kbd_rtems.c
drivers/kbd_tc.c
drivers/kbd_tty.c
drivers/kbd_ttyscan.c
drivers/kbd_x11.c
drivers/keymap_standard.h
drivers/keymap_zaurus.h
drivers/memplan4.c
drivers/mou_dos.c
drivers/mou_dynapro.c
drivers/mou_fbsd.c
drivers/mou_gpm.c
drivers/mou_harrier.c
drivers/mou_mt.c
drivers/mou_null.c
drivers/mou_ps5.c
drivers/mou_psp.c
drivers/mou_rtems.c
drivers/mou_ser.c
drivers/mou_sun.c
drivers/mou_touchscreen.c
drivers/mou_vrlinux.c
drivers/mou_x11.c
drivers/mou_yopy.c
drivers/mwlirc.c
drivers/mwlirc.h
drivers/nofont.c
drivers/obsolete.c
drivers/old/mou_ads.c
drivers/old/mou_ipaq.c
drivers/old/mou_tp.c
drivers/old/mou_tp.h
drivers/old/mou_ucb1x00.c
drivers/romfont.c
drivers/romfont.h
drivers/scr_bios.c
drivers/scr_debug.c
drivers/scr_djgr.c
drivers/scr_ecos.c
drivers/scr_em84xx.c
drivers/scr_fb.c
drivers/scr_fbsd.c
drivers/scr_herc.c
drivers/scr_prsm.c
drivers/scr_psp.c
drivers/scr_rtems.c
drivers/scr_svga.c
drivers/scr_tc.c
drivers/scr_x11.c
drivers/touchscreen_ads.h
drivers/touchscreen_ads7846.h
drivers/touchscreen_ipaq.h
drivers/touchscreen_ucb1x00.h
drivers/touchscreen_zaurus.h
drivers/vgainit.c
drivers/vgaplan4.c
drivers/vgaplan4.h
drivers/vtswitch.c
ecos/ecos_app.c
ecos/ecos_init.c
ecos/landmine_thread.c
ecos/nanowm_thread.c
ecos/nanox_thread.c
ecos/ntetris_thread.c
ecos/nxkbd_thread.c
ecos/nxscribble_thread.c
ecos/world_thread.c
engine/devarc.c
engine/devclip.c
engine/devclip1.c
engine/devclip2.c
engine/devdraw.c
engine/devfont.c
engine/devfont.h
engine/devimage.c
engine/devimage_stretch.c
engine/devkbd.c
engine/devlist.c
engine/devmouse.c
engine/devopen.c
engine/devpal1.c
engine/devpal2.c
engine/devpal4.c
engine/devpal8.c
engine/devpalgray4.c
engine/devpoly.c
engine/devrgn.c
engine/devrgn2.c
engine/devstipple.c
engine/devtimer.c
engine/error.c
engine/font_dbcs.c
engine/font_eucjp.c
engine/font_fnt.c
engine/font_freetype.c
engine/font_freetype.cache.c
engine/font_freetype2.c
engine/font_hzk.c
engine/font_pcf.c
engine/font_t1lib.c
engine/image_bmp.c
engine/image_gif.c
engine/image_jpeg.c
engine/image_png.c
engine/image_pnm.c
engine/image_tiff.c
engine/image_xpm.c
engine/obsolete.c
engine/selfont.c
fonts/convbdf.c
fonts/obsolete.c
fonts/rom8x16.c
fonts/rom8x8.c
fonts/tools/convfnt.c
fonts/tools/convrom.c
fonts/winFreeSansSerif11x13.c
fonts/winFreeSystem14x16.c
include/XtoNX.h
include/device.h
include/graph3d.h
include/lock.h
include/mwobjects.h
include/mwsystem.h
include/mwtypes.h
include/nano-X.h
include/nxcolors.h
include/nxdraw.h
include/swap.h
include/winctl.h
include/windef.h
include/windows.h
include/windowsx.h
include/winfont.h
include/wingdi.h
include/winkbd.h
include/wintern.h
include/wintools.h
include/winuser.h
mwin/bmp/convbmp.c
mwin/bmp/makebmp.c
mwin/winclip.c
mwin/winclip1.c
mwin/winclip2.c
mwin/windefw.c
mwin/winevent.c
mwin/winexpos.c
mwin/winfont.c
mwin/wingdi.c
mwin/winlib/button.c
mwin/winlib/caret.c
mwin/winlib/combobox.c
mwin/winlib/draw3d.c
mwin/winlib/edit.c
mwin/winlib/fastfill.c
mwin/winlib/graph3d.c
mwin/winlib/insetr.c
mwin/winlib/listbox.c
mwin/winlib/medit.c
mwin/winlib/mwuser.c
mwin/winlib/obsolete.c
mwin/winlib/progbar.c
mwin/winlib/ptinsid.c
mwin/winlib/scrlbar.c
mwin/winlib/static.c
mwin/winmain.c
mwin/winrgn.c
mwin/winsbar.c
mwin/winuser.c
nanox/client.c
nanox/clientfb.c
nanox/error.c
nanox/nxdraw.c
nanox/nxproto.c
nanox/nxproto.h
nanox/nxtransform.c
nanox/nxutil.c
nanox/serv.h
nanox/srvclip.c
nanox/srvclip1.c
nanox/srvclip2.c
nanox/srvevent.c
nanox/srvfunc.c
nanox/srvmain.c
nanox/srvnet.c
nanox/srvutil.c
obj/fonts/X6x13.c
obj/mwin/bmp/car8.c
obj/mwin/bmp/close4.c
obj/mwin/bmp/cs1.c
obj/mwin/bmp/max4.c
obj/mwin/bmp/microwin.c
obj/mwin/bmp/min4.c
obj/mwin/bmp/penguin.c
obj/mwin/bmp/rle8.c
obj/mwin/bmp/under4.c
obj/mwin/bmp/zion208.c
rtems/mw_uid_test.c
rtems/net_cfg.h
rtems/rtems_init.c
rtems/rtemscfg.h
/usr/include/X11/XKBlib.h
/usr/include/X11/Xatom.h
/usr/include/X11/Xlib.h
/usr/include/X11/Xmd.h
/usr/include/X11/Xutil.h
/usr/include/X11/keysym.h
/usr/include/arpa/inet.h
/usr/include/asm/page.h
/usr/include/assert.h
/usr/include/byteswap.h
/usr/include/ctype.h
/usr/include/dirent.h
/usr/include/endian.h
/usr/include/errno.h
/usr/include/fcntl.h
/usr/include/ft2build.h
/usr/include/getopt.h
/usr/include/jpeglib.h
/usr/include/limits.h
/usr/include/linux/fb.h
/usr/include/linux/kd.h
/usr/include/linux/keyboard.h
/usr/include/linux/vt.h
/usr/include/locale.h
/usr/include/malloc.h
/usr/include/math.h
/usr/include/microwin/nano-X.h
/usr/include/netdb.h
/usr/include/netinet/in.h
/usr/include/netinet/tcp.h
/usr/include/png.h
/usr/include/pthread.h
/usr/include/pwd.h
/usr/include/setjmp.h
/usr/include/sgtty.h
/usr/include/signal.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/sys/io.h
/usr/include/sys/ioctl.h
/usr/include/sys/ipc.h
/usr/include/sys/mman.h
/usr/include/sys/select.h
/usr/include/sys/shm.h
/usr/include/sys/socket.h
/usr/include/sys/stat.h
/usr/include/sys/termios.h
/usr/include/sys/time.h
/usr/include/sys/timeb.h
/usr/include/sys/times.h
/usr/include/sys/types.h
/usr/include/sys/uio.h
/usr/include/sys/un.h
/usr/include/sys/utsname.h
/usr/include/sys/wait.h
/usr/include/termios.h
/usr/include/time.h
/usr/include/unistd.h
/usr/include/utmp.h
/usr/include/values.h
/usr/include/zlib.h
/usr/include/X11/X.h
/usr/include/X11/Xfuncproto.h
/usr/include/X11/Xosdefs.h
/usr/include/X11/extensions/XKBstr.h
/usr/include/X11/keysymdef.h
/usr/include/alloca.h
/usr/include/asm-i386/page.h
/usr/include/asm-x86_64/page.h
/usr/include/asm/types.h
/usr/include/bits/byteswap.h
/usr/include/bits/confname.h
/usr/include/bits/dirent.h
/usr/include/bits/endian.h
/usr/include/bits/environments.h
/usr/include/bits/errno.h
/usr/include/bits/fcntl.h
/usr/include/bits/huge_val.h
/usr/include/bits/huge_valf.h
/usr/include/bits/huge_vall.h
/usr/include/bits/in.h
/usr/include/bits/inf.h
/usr/include/bits/ioctl-types.h
/usr/include/bits/ioctls.h
/usr/include/bits/ipc.h
/usr/include/bits/ipctypes.h
/usr/include/bits/locale.h
/usr/include/bits/mathcalls.h
/usr/include/bits/mathdef.h
/usr/include/bits/mathinline.h
/usr/include/bits/mman.h
/usr/include/bits/nan.h
/usr/include/bits/netdb.h
/usr/include/bits/posix1_lim.h
/usr/include/bits/posix2_lim.h
/usr/include/bits/posix_opt.h
/usr/include/bits/pthreadtypes.h
/usr/include/bits/select.h
/usr/include/bits/setjmp.h
/usr/include/bits/shm.h
/usr/include/bits/sigaction.h
/usr/include/bits/sigcontext.h
/usr/include/bits/siginfo.h
/usr/include/bits/signum.h
/usr/include/bits/sigset.h
/usr/include/bits/sigstack.h
/usr/include/bits/sigthread.h
/usr/include/bits/sockaddr.h
/usr/include/bits/socket.h
/usr/include/bits/socket2.h
/usr/include/bits/stat.h
/usr/include/bits/stdio-ldbl.h
/usr/include/bits/stdio.h
/usr/include/bits/stdio2.h
/usr/include/bits/stdio_lim.h
/usr/include/bits/stdlib-ldbl.h
/usr/include/bits/stdlib.h
/usr/include/bits/string.h
/usr/include/bits/string2.h
/usr/include/bits/string3.h
/usr/include/bits/sys_errlist.h
/usr/include/bits/termios.h
/usr/include/bits/time.h
/usr/include/bits/types.h
/usr/include/bits/uio.h
/usr/include/bits/unistd.h
/usr/include/bits/utmp.h
/usr/include/bits/utsname.h
/usr/include/bits/waitflags.h
/usr/include/bits/waitstatus.h
/usr/include/bits/wordsize.h
/usr/include/bits/xopen_lim.h
/usr/include/features.h
/usr/include/jconfig.h
/usr/include/jerror.h
/usr/include/jmorecfg.h
/usr/include/jpegint.h
/usr/include/libio.h
/usr/include/linux/i2c.h
/usr/include/linux/types.h
/usr/include/linux/wait.h
/usr/include/pngconf.h
/usr/include/rpc/netdb.h
/usr/include/sched.h
/usr/include/stdint.h
/usr/include/sys/cdefs.h
/usr/include/sys/resource.h
/usr/include/sys/sysmacros.h
/usr/include/sys/ttydefaults.h
/usr/include/sys/ucontext.h
/usr/include/xlocale.h
/usr/include/zconf.h
/usr/include/X11/extensions/XKB.h
/usr/include/_G_config.h
/usr/include/asm-i386/types.h
/usr/include/asm-x86_64/types.h
/usr/include/asm/ioctls.h
/usr/include/asm/sigcontext.h
/usr/include/asm/socket.h
/usr/include/bits/libio-ldbl.h
/usr/include/bits/local_lim.h
/usr/include/bits/resource.h
/usr/include/bits/sched.h
/usr/include/bits/stdio-lock.h
/usr/include/bits/typesizes.h
/usr/include/bits/wchar.h
/usr/include/gnu/stubs.h
/usr/include/linux/const.h
/usr/include/linux/errno.h
/usr/include/linux/posix_types.h
/usr/include/paths.h
/usr/include/strings.h
/usr/include/zlibdefs.h
/usr/include/asm-i386/ioctls.h
/usr/include/asm-i386/sigcontext.h
/usr/include/asm-i386/socket.h
/usr/include/asm-x86_64/ioctls.h
/usr/include/asm-x86_64/sigcontext.h
/usr/include/asm-x86_64/socket.h
/usr/include/asm/errno.h
/usr/include/asm/posix_types.h
/usr/include/bits/libc-lock.h
/usr/include/gconv.h
/usr/include/gnu/stubs-32.h
/usr/include/linux/limits.h
/usr/include/linux/stddef.h
/usr/include/wchar.h
/usr/include/asm-i386/errno.h
/usr/include/asm-i386/posix_types.h
/usr/include/asm-x86_64/errno.h
/usr/include/asm-x86_64/posix_types.h
/usr/include/asm/ioctl.h
/usr/include/asm/sockios.h
/usr/include/bits/wchar-ldbl.h
/usr/include/bits/wchar2.h
/usr/include/wctype.h
/usr/include/asm-generic/errno.h
/usr/include/asm-i386/ioctl.h
/usr/include/asm-i386/sockios.h
/usr/include/asm-x86_64/ioctl.h
/usr/include/asm-x86_64/sockios.h
/usr/include/asm-generic/errno-base.h
/usr/include/asm-generic/ioctl.h
